[{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31671", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31671/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31671/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31671/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31671", "id": 481425197, "node_id": "MDU6SXNzdWU0ODE0MjUxOTc=", "number": 31671, "title": " TF-TRT: Assertion `mParams.k > 0' failed.", "user": {"login": "sgambient", "id": 42156923, "node_id": "MDQ6VXNlcjQyMTU2OTIz", "avatar_url": "https://avatars0.githubusercontent.com/u/42156923?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sgambient", "html_url": "https://github.com/sgambient", "followers_url": "https://api.github.com/users/sgambient/followers", "following_url": "https://api.github.com/users/sgambient/following{/other_user}", "gists_url": "https://api.github.com/users/sgambient/gists{/gist_id}", "starred_url": "https://api.github.com/users/sgambient/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sgambient/subscriptions", "organizations_url": "https://api.github.com/users/sgambient/orgs", "repos_url": "https://api.github.com/users/sgambient/repos", "events_url": "https://api.github.com/users/sgambient/events{/privacy}", "received_events_url": "https://api.github.com/users/sgambient/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1754777628, "node_id": "MDU6TGFiZWwxNzU0Nzc3NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu:tensorrt", "name": "comp:gpu:tensorrt", "color": "ea98ba", "default": false, "description": "Issues specific to TensorRT"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, {"login": "pooyadavoodi", "id": 7076961, "node_id": "MDQ6VXNlcjcwNzY5NjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/7076961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pooyadavoodi", "html_url": "https://github.com/pooyadavoodi", "followers_url": "https://api.github.com/users/pooyadavoodi/followers", "following_url": "https://api.github.com/users/pooyadavoodi/following{/other_user}", "gists_url": "https://api.github.com/users/pooyadavoodi/gists{/gist_id}", "starred_url": "https://api.github.com/users/pooyadavoodi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pooyadavoodi/subscriptions", "organizations_url": "https://api.github.com/users/pooyadavoodi/orgs", "repos_url": "https://api.github.com/users/pooyadavoodi/repos", "events_url": "https://api.github.com/users/pooyadavoodi/events{/privacy}", "received_events_url": "https://api.github.com/users/pooyadavoodi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2019-08-16T03:27:05Z", "updated_at": "2020-01-08T23:47:42Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):binary\r\n- TensorFlow version (use command below):1.14\r\n- Python version:2.7\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:10.1\r\n- GPU model and memory:T4\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nSeeing the following error:\r\n```\r\n2019-08-16 03:21:42.299651: E tensorflow/compiler/tf2tensorrt/utils/trt_logger.cc:41] DefaultLogger Parameter check failed at: ../builder/Layers.cpp::TopKLayer::2009, condition: k > 0 && k <= MAX_TOPK_K\r\nb_engine-0: ../builder/Layers.cpp:2048: virtual bool nvinfer1::TopKLayer::validate(const std::vector<nvinfer1::TensorForm>&, const nvinfer1::NetworkLayer::ValidationContext&) const: Assertion `mParams.k > 0' failed.\r\n\r\n```\r\n**Describe the expected behavior**\r\n\r\nWhat is this error for  ? How to stop this from happening ? \r\n\r\n**Code to reproduce the issue**\r\n\r\nTry to create a snippet.\r\n\r\n**Other info / logs**\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31661", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31661/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31661/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31661/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31661", "id": 481332793, "node_id": "MDU6SXNzdWU0ODEzMzI3OTM=", "number": 31661, "title": "Tensorflow Lite Allow Variable length sequences", "user": {"login": "Jbiloki", "id": 15188004, "node_id": "MDQ6VXNlcjE1MTg4MDA0", "avatar_url": "https://avatars2.githubusercontent.com/u/15188004?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jbiloki", "html_url": "https://github.com/Jbiloki", "followers_url": "https://api.github.com/users/Jbiloki/followers", "following_url": "https://api.github.com/users/Jbiloki/following{/other_user}", "gists_url": "https://api.github.com/users/Jbiloki/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jbiloki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jbiloki/subscriptions", "organizations_url": "https://api.github.com/users/Jbiloki/orgs", "repos_url": "https://api.github.com/users/Jbiloki/repos", "events_url": "https://api.github.com/users/Jbiloki/events{/privacy}", "received_events_url": "https://api.github.com/users/Jbiloki/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-08-15T20:50:03Z", "updated_at": "2019-12-24T02:27:25Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 1.14.9\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.** \r\n\r\nCurrently, porting a tensorflow model to tflite does not allow for variable length inputs and instead throws\r\n\r\n```\r\nValueError: None is only supported in the 1st dimension. Tensor 'input_2' has invalid shape '[None, None, 1]'.\r\n```\r\n\r\nMany NLP applications require the second axis of the shape to allow for variable length input sequences.\r\n\r\n**Will this change the current api? How?** N/A\r\n\r\n**Who will benefit with this feature?** NLP/CV applications of tflite"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31653", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31653/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31653/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31653/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31653", "id": 481286580, "node_id": "MDU6SXNzdWU0ODEyODY1ODA=", "number": 31653, "title": "ValueError: Cannot add function 'TRTEngineOp_0_native_segment' because a different function with the same name already exists.", "user": {"login": "sgambient", "id": 42156923, "node_id": "MDQ6VXNlcjQyMTU2OTIz", "avatar_url": "https://avatars0.githubusercontent.com/u/42156923?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sgambient", "html_url": "https://github.com/sgambient", "followers_url": "https://api.github.com/users/sgambient/followers", "following_url": "https://api.github.com/users/sgambient/following{/other_user}", "gists_url": "https://api.github.com/users/sgambient/gists{/gist_id}", "starred_url": "https://api.github.com/users/sgambient/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sgambient/subscriptions", "organizations_url": "https://api.github.com/users/sgambient/orgs", "repos_url": "https://api.github.com/users/sgambient/repos", "events_url": "https://api.github.com/users/sgambient/events{/privacy}", "received_events_url": "https://api.github.com/users/sgambient/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1754777628, "node_id": "MDU6TGFiZWwxNzU0Nzc3NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu:tensorrt", "name": "comp:gpu:tensorrt", "color": "ea98ba", "default": false, "description": "Issues specific to TensorRT"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-08-15T18:50:56Z", "updated_at": "2019-12-26T18:34:18Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):18.04 \r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version (use command below): 1.14 and dev\r\n- Python version:2.7\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:10.1\r\n- GPU model and memory:T4\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nNot able to call trt.create_inference_graph more than once to create TF-TRT nodes for disjointed sub-graphs. Throws the above error.\r\n\r\n**Describe the expected behavior**\r\nShould not throw the above error.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n```\r\nfrom tensorflow.contrib.slim.nets import resnet_v1\r\nimport tensorflow as tf\r\nimport tensorflow.contrib.slim as slim\r\nimport numpy as np\r\nimport time\r\nimport os\r\nfrom PIL import Image\r\n#import tensorflow.contrib.tensorrt as tftrt\r\nfrom tensorflow.python.compiler.tensorrt import trt_convert as tftrt\r\nimport argparse\r\n\r\nPATH_TO_CKPT = \"resnet_v1_50.ckpt\"\r\nTEST_IMAGE_PATHS = [ \"elephant_small.jpg\", \"tabby_tiger_cat.jpg\"]\r\nBATCH_SIZE=25\r\nMAX_BATCH_SIZE=1000\r\nHEIGHT=224\r\nWIDTH=224\r\nCHANNELS=3\r\n\r\n\r\ndef load_image_into_numpy_array(image, batch_size=1):\r\n  (im_width, im_height) = image.size\r\n  x = np.array(image.getdata()).reshape(\r\n      (HEIGHT, WIDTH, CHANNELS)).astype(np.uint8)\r\n  x = np.expand_dims(x, axis=0)\r\n  xsl = list (x.shape)\r\n  xsl[0] = batch_size#MAX_BATCH_SIZE\r\n  x = np.broadcast_to(x[0,:,:,:], xsl) \r\n  return x\r\n\r\ndef run_resnet_50():\r\n    # Create graph\r\n    inputs = tf.placeholder(tf.float32, shape=[BATCH_SIZE, HEIGHT, WIDTH, CHANNELS])\r\n    with slim.arg_scope(resnet_v1.resnet_arg_scope()):\r\n            net, end_points = resnet_v1.resnet_v1_50(inputs, is_training=False)\r\n    \r\n    saver = tf.train.Saver()\r\n    \r\n    with tf.Session() as sess:\r\n            saver.restore(sess, PATH_TO_CKPT)\r\n            representation_tensor = sess.graph.get_tensor_by_name('resnet_v1_50/pool5:0') # if you don't know names like these, consider referring to corresponding model file or generate .pbtxt file as mentioned in  @civilman628 's answer above\r\n            img = np.ones((batch_size, height, width, channels))   #load image here with size [1, 224,224, 3]\r\n            features = sess.run(representation_tensor, {'Placeholder:0': img})\r\n            print ( \"features\", features)\r\n\r\ndef renamed_ckpt_save(name):\r\n    with tf.Session() as sess:# Restore the TF checkpoint\r\n\r\n        for var_name, var_shape in tf.contrib.framework.list_variables(PATH_TO_CKPT):\r\n            var = tf.contrib.framework.load_variable(PATH_TO_CKPT, var_name)\r\n            new_name_parts = [name] + var_name.split('/')[1:]\r\n            new_name = '/'.join(new_name_parts)\r\n            var = tf.Variable(var, name=new_name)\r\n            print var_name, var_shape, var.name\r\n\r\n        ckpt_dir = \"/tmp/\"+name\r\n        if not os.path.exists(ckpt_dir):\r\n            os.mkdir(ckpt_dir)\r\n        sess.run(tf.global_variables_initializer())\r\n        saver = tf.train.Saver()\r\n        saver.save(sess, ckpt_dir)\r\n\r\ndef renamed_ckpt_mem(sess, name):\r\n\r\n        for var_name, var_shape in tf.contrib.framework.list_variables(PATH_TO_CKPT):\r\n            var = tf.contrib.framework.load_variable(PATH_TO_CKPT, var_name)\r\n            new_name_parts = [name] + var_name.split('/')[1:]\r\n            new_name = '/'.join(new_name_parts)\r\n            var = tf.Variable(var, name=new_name)\r\n            print var_name, var_shape, var.name\r\n\r\ndef build_graph (sess, input_graph, name='graph1'):\r\n\r\n    inputs = tf.placeholder(tf.float32, shape=[BATCH_SIZE, HEIGHT, WIDTH, CHANNELS])\r\n    with slim.arg_scope(resnet_v1.resnet_arg_scope()):\r\n            net, end_points = resnet_v1.resnet_v1_50(inputs, is_training=False, scope=name)\r\n\r\n    with input_graph.as_default():\r\n      # Get handles to input and output tensors\r\n      ops = tf.get_default_graph().get_operations()\r\n      all_tensor_names = {output.name for op in ops for output in op.outputs}\r\n      tensor_dict = {}\r\n      for key in [\r\n          'pool5',\r\n      ]:\r\n        if name == '':\r\n            tensor_name = key + ':0'\r\n        else :\r\n            tensor_name = name+'/'+key + ':0'\r\n        if tensor_name in all_tensor_names:\r\n                tensor_dict[key] = tf.get_default_graph().get_tensor_by_name(\r\n                tensor_name)\r\n                print ( \"tensor_name\", tensor_name, tensor_dict[key])\r\n        else:\r\n           print( \"tensor_name \", tensor_name, \" not found\")\r\n\r\n\r\n    # Restore the TF checkpoint\r\n    saver = tf.train.Saver()\r\n    saver.restore(sess, \"/tmp/\"+name)\r\n    return tensor_dict\r\n\r\nclass TfTrt():\r\n\r\n    @staticmethod\r\n    def build(sess, graph, name='', import_name='import'):\r\n        tensor_dict = build_graph(sess, graph, name=name, )\r\n\r\n        outputl = []\r\n        for i,nname in enumerate(tensor_dict):\r\n            nvalue = tensor_dict[nname].name.split(\":\")[0]\r\n            print( i, nname, tensor_dict[nname].name )\r\n            outputl.append(nvalue)\r\n        print ( \"outputl \", outputl)\r\n\r\n        #node_names = [n.name for n in graph.as_graph_def().node]\r\n        #import pdb\r\n        #pdb.set_trace()\r\n\r\n        # Freeze the graph:\r\n        frozen_graph = tf.graph_util.convert_variables_to_constants(\r\n        sess,\r\n        sess.graph_def,\r\n        output_node_names= outputl)\r\n\r\n        # remove training nodes\r\n        frozen_graph = tf.compat.v1.graph_util.remove_training_nodes(frozen_graph)\r\n        # Now you can create a TensorRT inference graph from your frozen graph\r\n\r\n        tftrt_graph = tftrt.create_inference_graph(\r\n            input_graph_def=frozen_graph,\r\n            outputs = outputl,\r\n            max_batch_size = MAX_BATCH_SIZE ,\r\n            max_workspace_size_bytes= 1024*1024*1024,\r\n            precision_mode=\"FP16\")\r\n\r\n        output_nodes = tf.import_graph_def(\r\n            tftrt_graph,\r\n            return_elements = outputl,\r\n            name=import_name\r\n        )\r\n\r\n        tensor_dict = {}\r\n        for opname, opnode in zip (outputl, output_nodes):\r\n            tensor_dict[opnode.name] = opnode.outputs[0]\r\n\r\n        print ( \"tensor_dict\", tensor_dict)\r\n\r\n        return tensor_dict\r\n\r\n    @staticmethod\r\n    def run(sess, tensor_dict, image_tensor, image_np_expanded):\r\n        output_dict = sess.run(tensor_dict, feed_dict={image_tensor: image_np_expanded})\r\n        return output_dict\r\n\r\nclass Tf():\r\n\r\n    @staticmethod\r\n    def build(sess, graph, name='', import_name=None):\r\n        return build_graph(sess, graph, name=name)\r\n\r\n    @staticmethod\r\n    def run(sess, tensor_dict, image_tensor, image_np_expanded):\r\n        output_dict = sess.run(tensor_dict, feed_dict={image_tensor: image_np_expanded})\r\n        return output_dict\r\n\r\ndef run (runtime='TF'):\r\n\r\n    if runtime=='TF':\r\n        RunClass = Tf\r\n        import_name1= ''\r\n        import_name2= ''\r\n        placeholder_name1 = 'Placeholder:0'\r\n        placeholder_name2 = 'Placeholder_1:0'\r\n    elif runtime=='TFTRT':\r\n        RunClass = TfTrt\r\n        import_name1 = 'import1'\r\n        import_name2 = 'import2'\r\n        placeholder_name1 = 'import1/Placeholder:0'\r\n        placeholder_name2 = 'import2/Placeholder_1:0'\r\n\r\n    graph = tf.Graph()\r\n\r\n    config = tf.ConfigProto()\r\n    config.gpu_options.allow_growth = True\r\n    #config.gpu_options.per_process_gpu_memory_fraction = 0.33\r\n    config.graph_options.rewrite_options.auto_mixed_precision = 1\r\n    with tf.Session(graph=graph, config=config) as sess:\r\n        #renamed_ckpt_mem(sess, 'resnet_v1_50_1')\r\n        #renamed_ckpt_mem(sess, 'resnet_v1_50_2')\r\n        tensor_dict1 = RunClass.build(sess, graph, name='resnet_v1_50_1', import_name=import_name1)\r\n        tensor_dict2 = RunClass.build(sess, graph, name='resnet_v1_50_2', import_name=import_name2)\r\n        tensorboard_dir = os.environ['TENSORBOARD_DIR']\r\n        file_writer = tf.summary.FileWriter(tensorboard_dir, sess.graph)\r\n        image_path = TEST_IMAGE_PATHS[0]\r\n        print ( \"image_path {}\".format(image_path))\r\n        image = Image.open(image_path)\r\n        image = image.resize((WIDTH, HEIGHT))\r\n        image_np_expanded = load_image_into_numpy_array(image, batch_size=BATCH_SIZE)\r\n        image_tensor1 = graph.get_tensor_by_name(placeholder_name1)\r\n        image_tensor2 = graph.get_tensor_by_name(placeholder_name2)\r\n        time0 = time.time()\r\n        for i in range(1,1001):\r\n            output_dict1 = RunClass.run(sess, tensor_dict1, image_tensor1, image_np_expanded)\r\n            output_dict2 = RunClass.run(sess, tensor_dict2, image_tensor2, image_np_expanded)\r\n            if i % 100 == 0:\r\n                time_taken = (time.time() - time0 )/(i * 1.0)\r\n                print (i, time_taken)\r\n        time_taken = (time.time() - time0 )/(i * 1.0)\r\n        print (\"time_taken \", time_taken, \"output_dict\", output_dict1, output_dict2)\r\n\r\nif __name__ == '__main__':\r\n    parser = argparse.ArgumentParser()\r\n    parser.add_argument('--runtime', default='TF', help='TF or TFTRT')\r\n    parser.add_argument('--rewrite_ckpt', action='store_true',  help='rename checkpoints')\r\n    args = parser.parse_args()\r\n    if args.rewrite_ckpt:\r\n        renamed_ckpt_save('resnet_v1_50_1')\r\n        renamed_ckpt_save('resnet_v1_50_2')\r\n\r\n    run (args.runtime)\r\n\r\n\r\n\r\n```\r\nTo run \r\n```\r\nPYTHONPATH=$PYTHONPATH:~/models/research/slim  python ./tftrt_resnet2x.py --runtime TFTRT\r\n```\r\n**Other info / logs**\r\n```\r\n File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/util/deprecation.py\", line 507, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/importer.py\", line 430, in import_graph_def\r\n    raise ValueError(str(e))\r\nValueError: Cannot add function 'TRTEngineOp_0_native_segment' because a different function with the same name already exists.\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31638", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31638/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31638/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31638/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31638", "id": 481055923, "node_id": "MDU6SXNzdWU0ODEwNTU5MjM=", "number": 31638, "title": "Mask is not propagated into Sequential keras layers", "user": {"login": "mpdn", "id": 448023, "node_id": "MDQ6VXNlcjQ0ODAyMw==", "avatar_url": "https://avatars3.githubusercontent.com/u/448023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpdn", "html_url": "https://github.com/mpdn", "followers_url": "https://api.github.com/users/mpdn/followers", "following_url": "https://api.github.com/users/mpdn/following{/other_user}", "gists_url": "https://api.github.com/users/mpdn/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpdn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpdn/subscriptions", "organizations_url": "https://api.github.com/users/mpdn/orgs", "repos_url": "https://api.github.com/users/mpdn/repos", "events_url": "https://api.github.com/users/mpdn/events{/privacy}", "received_events_url": "https://api.github.com/users/mpdn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-08-15T08:49:10Z", "updated_at": "2019-09-16T12:17:25Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Mac OS\r\n- TensorFlow installed from (source or binary): docker, pip\r\n- TensorFlow version (use command below): 1.14.0, 2.0.0b\r\n- Python version: 3.6.8\r\n\r\n**Describe the current behavior**\r\n\r\nWhen a masked input is fed to a `tf.keras.models.Sequential`, the mask is ignored\r\n\r\n**Describe the expected behavior**\r\n\r\nI would expect the mask to be propagated as if the inner layers were not in a `Sequential` layer.\r\n\r\n**Code to reproduce the issue**\r\n\r\nThis works:\r\n```\r\nimport tensorflow as tf\r\n\r\ndef check_mask(inputs, mask=None):\r\n    assert mask is not None\r\n    return inputs\r\n\r\nmodel = tf.keras.models.Sequential([\r\n    tf.keras.layers.Masking(0, input_shape=[1]),\r\n    tf.keras.layers.Lambda(check_mask)\r\n])\r\n```\r\n\r\nThis fails due to failed assert:\r\n```\r\nimport tensorflow as tf\r\n\r\ndef check_mask(inputs, mask=None):\r\n    assert mask is not None\r\n    return inputs\r\n\r\nmodel = tf.keras.models.Sequential([\r\n    tf.keras.layers.Masking(0, input_shape=[1]),\r\n    tf.keras.models.Sequential([\r\n        tf.keras.layers.Lambda(check_mask),\r\n    ]),\r\n])\r\n```\r\n\r\n**Other info / logs**\r\nI think I have narrowed this down to a cache invalidation issue in `tf.keras.layers.Layer._should_compute_mask`: https://github.com/tensorflow/tensorflow/blob/e19c354920c3b246dda6598229210a582caaa1a9/tensorflow/python/keras/engine/base_layer.py#L2055-L2059\r\n\r\nFrom my debugging, it seems that whenever the issue above appears `_should_compute_mask` is cached as false even though evaluating the actual property expression results in true.\r\n\r\nSince this problem is in a base layer, this issue might be affecting other layers as well."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31634", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31634/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31634/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31634/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31634", "id": 481012463, "node_id": "MDU6SXNzdWU0ODEwMTI0NjM=", "number": 31634, "title": "Custom OP using eigen matrix", "user": {"login": "SeanCho1996", "id": 49351431, "node_id": "MDQ6VXNlcjQ5MzUxNDMx", "avatar_url": "https://avatars1.githubusercontent.com/u/49351431?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SeanCho1996", "html_url": "https://github.com/SeanCho1996", "followers_url": "https://api.github.com/users/SeanCho1996/followers", "following_url": "https://api.github.com/users/SeanCho1996/following{/other_user}", "gists_url": "https://api.github.com/users/SeanCho1996/gists{/gist_id}", "starred_url": "https://api.github.com/users/SeanCho1996/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SeanCho1996/subscriptions", "organizations_url": "https://api.github.com/users/SeanCho1996/orgs", "repos_url": "https://api.github.com/users/SeanCho1996/repos", "events_url": "https://api.github.com/users/SeanCho1996/events{/privacy}", "received_events_url": "https://api.github.com/users/SeanCho1996/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-08-15T06:27:45Z", "updated_at": "2019-08-17T06:23:51Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Win 10 pro\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 1.13.1\r\n- Python version: 3.6.7\r\n- Installed using virtualenv? pip? conda?: from source\r\n- Bazel version (if compiling from source): 0.21.0\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: cuda 10.0 cudnn 7.6.2\r\n- GPU model and memory:ROG strix geforce gtx 1080Ti, 11G\r\n\r\n\r\n\r\n**Describe the problem**\r\nI'm trying to develop a Tensorflow custom op using cuda. And inside the op, I need to use Eigen to run some matrix operations, but when I try to calculate the inverse of a size 8*8 matrix, I've encountered several problems.\r\n\r\nThis function is written in CUDA kernel.\r\nIn cuda kernel function file (.cu.cc), I have included\r\n```c++\r\n#include <Eigen\\Dense>\r\n#include <Eigen/LU>\r\n#include \"third_party/eigen3/unsupported/Eigen/CXX11/Tensor\"\r\n#include \"tensorflow/core/framework/op.h\"\r\n#include \"tensorflow/core/framework/op_kernel.h\"\r\n#include <stdio.h>\r\n#include <math.h>\r\n```\r\nAnd in the kernel function, I just tried a simple test:\r\n```c++\r\ntypedef Eigen::Matrix<float, 8, 8> Matrix8f;\r\n\r\n__global__ void CsmToRcmKernel(Eigen::Map<const Eigen::MatrixXcf> csm_map, Eigen::Map<const Eigen::VectorXf> reg_vec,\r\n    Eigen::Map<const MatrixXi16> offset8,       // (12160, 8, 3)\r\n    Eigen::Map<const MatrixXi16> offset3,       // (9728, 3, 3)\r\n    Eigen::Map<const MatrixXi16> offset4,       // (12160, 4, 3)\r\n    Eigen::Map<const MatrixXi16> offset6,       // (9728, 6, 3)\r\n    Eigen::Map<Eigen::MatrixXcf> rcm_map) {\r\n\r\n    Matrix8f A = MatrixXf::Identity(8, 8);\r\n    A(0, 0) = 2;\r\n\r\n    // inv_A = inv(A);\r\n    Matrix8f inv_A = A.inverse();\r\n}\r\n```\r\n(You can ignore the input parameters, they aren't used in this test program.)\r\n\r\nAnd when I try to build this op with bazel, I got following errors:\r\n```\r\nc:\\users\\administrator\\_bazel_zhaozixiao\\sr6amwum\\execroot\\org_tensorflow\\external\\eigen_archive\\eigen\\src/Core/SolveTriangular.h(185): \r\nerror: function \"Eigen::Block<XprType, BlockRows, BlockCols, InnerPanel>::operator=(const Eigen::Block<Eigen::Block<Eigen::Map<Eigen::Matrix<float, -1, -1, 0, -1, -1>, 0, Eigen::Stride<0, 0>>, -1, -1, false>, -1, -1, false> &) [with XprType=Eigen::Block<Eigen::Map<Eigen::Matrix<float, -1, -1, 0, -1, -1>, 0,Eigen::Stride<0, 0>>, -1, -1, false>, BlockRows=-1, BlockCols=-1, InnerPanel=false]\" (declared implicitly) cannot be referenced -- it is a deleted function\r\n\r\nc:\\users\\administrator\\_bazel_zhaozixiao\\sr6amwum\\execroot\\org_tensorflow\\external\\eigen_archive\\eigen\\src/Core/GenericPacketMath.h(368): \r\nerror: asm operand type size(8) does not match type/size implied by constraint 'r'\r\n```\r\nAnd if I try to calculate the inverse of a size 4 * 4(or below) matrix, there isn't any problem. \r\nIn fact I found that tensorflow itself can realise big size matrix operation, matrix inverse for example, but it seems like they don't use eigen structure. So I'd like to know if cuda kernel supports big size(bigger than 4 * 4) matrix operations based on eigen? Thank you!\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31619", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31619/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31619/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31619/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31619", "id": 480728050, "node_id": "MDU6SXNzdWU0ODA3MjgwNTA=", "number": 31619, "title": "Incorrect value in results when using tf.math.log()", "user": {"login": "yqtianust", "id": 41743566, "node_id": "MDQ6VXNlcjQxNzQzNTY2", "avatar_url": "https://avatars3.githubusercontent.com/u/41743566?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yqtianust", "html_url": "https://github.com/yqtianust", "followers_url": "https://api.github.com/users/yqtianust/followers", "following_url": "https://api.github.com/users/yqtianust/following{/other_user}", "gists_url": "https://api.github.com/users/yqtianust/gists{/gist_id}", "starred_url": "https://api.github.com/users/yqtianust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yqtianust/subscriptions", "organizations_url": "https://api.github.com/users/yqtianust/orgs", "repos_url": "https://api.github.com/users/yqtianust/repos", "events_url": "https://api.github.com/users/yqtianust/events{/privacy}", "received_events_url": "https://api.github.com/users/yqtianust/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-08-14T14:56:25Z", "updated_at": "2019-09-02T03:26:56Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No idea\r\n- TensorFlow installed from (source or binary): binary using pip3 install\r\n- TensorFlow version (use command below): 1.14\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: cuda9.0, cudnn 7.6\r\n- GPU model and memory: RTX 2080Ti\r\n\r\nWhen I run the following code using CPU:\r\n`result= tf.math.log(tf.constant([280.41303540865516]*100, dtype=tf.float32)).numpy()`\r\nI got:\r\n`\r\n[5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634\r\n 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634\r\n 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634\r\n 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634\r\n 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634\r\n 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634\r\n 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634\r\n 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634\r\n 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634\r\n 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634\r\n 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634\r\n 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634\r\n 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634\r\n 5.6362634 5.6362634 5.6362634 5.6362634 5.6362634 5.636264  5.636264\r\n 5.636264  5.636264 ]`\r\n\r\nI found result[0] is not equal to result[-1]. the first one is \r\n5.636263370513916 while the latter one is equal to 5.636263847351074.\r\n\r\nI believe it is a bug.\r\n\r\n\r\n**Code to reproduce the issue**\r\n`\r\nfrom __future__ import absolute_import, division, print_function, unicode_literals\r\nimport tensorflow as tf\r\nfrom random import *\r\ntf.enable_eager_execution()\r\nwith tf.device(\"/cpu:0\"):\r\n    result = tf.math.log(tf.constant([ 280.41303540865516]*100, dtype=tf.float32)).numpy()\r\nprint(\"{} vs {}\".format(result[0], result[-1]))`\r\n\r\n\r\nSeems GPU has no such issues."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31617", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31617/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31617/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31617/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31617", "id": 480662971, "node_id": "MDU6SXNzdWU0ODA2NjI5NzE=", "number": 31617, "title": "Accuracy metric not consistent between training and evaluation when using same dataset for both train and test", "user": {"login": "Efaq", "id": 42271354, "node_id": "MDQ6VXNlcjQyMjcxMzU0", "avatar_url": "https://avatars2.githubusercontent.com/u/42271354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Efaq", "html_url": "https://github.com/Efaq", "followers_url": "https://api.github.com/users/Efaq/followers", "following_url": "https://api.github.com/users/Efaq/following{/other_user}", "gists_url": "https://api.github.com/users/Efaq/gists{/gist_id}", "starred_url": "https://api.github.com/users/Efaq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Efaq/subscriptions", "organizations_url": "https://api.github.com/users/Efaq/orgs", "repos_url": "https://api.github.com/users/Efaq/repos", "events_url": "https://api.github.com/users/Efaq/events{/privacy}", "received_events_url": "https://api.github.com/users/Efaq/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-08-14T12:55:18Z", "updated_at": "2019-09-05T17:18:48Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): YES, I made changes based on a script provided by TF\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- TensorFlow installed from (source or binary): PIP install\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: 3.6\r\n\r\n**Intro**\r\n\r\nIn order to sanity check a code for custom estimator I wrote, I trained and evaluated it on the same dataset (training set = evaluation set), expecting to get the same metrics. I also set the batch size to the dataset size to avoid having discrepancies due to calculations based on the batch instead of the whole dataset.\r\n\r\nWhile I could verify that the loss was consistent, I haven't managed to get consistent accuracies. Because of that, I grabbed code provided by tensorflow (https://github.com/tensorflow/models/tree/master/samples/core/get_started) and tried to replicate the behavior. I needed to make some changes in order to 1)run it with batch size = whole dataset, 2) run it with training set = test set, and 3) save data to disk so I could inspect it with Tensorboard. The whole pieces of code are shown below.\r\n\r\n**Describe the current behavior**\r\n\r\nThe accuracy calculated during training is different from the one calculated during evaluation, even if training and test set are exactly the same.\r\n\r\n**Describe the expected behavior**\r\n\r\nI would expect to be able to get the same accuracy both for training and for evaluation, if the same dataset is being used for both phases.\r\n\r\n**Code to reproduce the issue**\r\n\r\nScripts based on [custom_estimator.py](https://github.com/tensorflow/models/blob/master/samples/core/get_started/custom_estimator.py) and [iris_data.py](https://github.com/tensorflow/models/blob/master/samples/core/get_started/iris_data.py).\r\n\r\nMy custom_estimator.py:\r\n\r\n```\r\n#  Copyright 2016 The TensorFlow Authors. All Rights Reserved.\r\n#\r\n#  Licensed under the Apache License, Version 2.0 (the \"License\");\r\n#  you may not use this file except in compliance with the License.\r\n#  You may obtain a copy of the License at\r\n#\r\n#   http://www.apache.org/licenses/LICENSE-2.0\r\n#\r\n#  Unless required by applicable law or agreed to in writing, software\r\n#  distributed under the License is distributed on an \"AS IS\" BASIS,\r\n#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n#  See the License for the specific language governing permissions and\r\n#  limitations under the License.\r\n\"\"\"An Example of a custom Estimator for the Iris dataset.\"\"\"\r\nfrom __future__ import absolute_import\r\nfrom __future__ import division\r\nfrom __future__ import print_function\r\n\r\nimport os\r\nimport argparse\r\nimport tensorflow as tf\r\nfrom tensorflow_estimator import estimator\r\n\r\nimport iris_data\r\n\r\nparser = argparse.ArgumentParser()\r\nparser.add_argument('--batch_size', default=120, type=int, help='batch size')\r\nparser.add_argument('--train_steps', default=10, type=int,\r\n                    help='number of training steps')\r\n\r\ndef my_model(features, labels, mode, params):\r\n    \"\"\"DNN with three hidden layers and learning_rate=0.1.\"\"\"\r\n    # Create three fully connected layers.\r\n    net = tf.feature_column.input_layer(features, params['feature_columns'])\r\n    for units in params['hidden_units']:\r\n        net = tf.layers.dense(net, units=units, activation=tf.nn.relu)\r\n\r\n    # Compute logits (1 per class).\r\n    logits = tf.layers.dense(net, params['n_classes'], activation=None)\r\n\r\n    # Compute predictions.\r\n    predicted_classes = tf.argmax(logits, 1)\r\n    if mode == tf.estimator.ModeKeys.PREDICT:\r\n        predictions = {\r\n            'class_ids': predicted_classes[:, tf.newaxis],\r\n            'probabilities': tf.nn.softmax(logits),\r\n            'logits': logits,\r\n        }\r\n        return tf.estimator.EstimatorSpec(mode, predictions=predictions)\r\n\r\n    # Compute loss.\r\n    loss = tf.losses.sparse_softmax_cross_entropy(labels=labels, logits=logits)\r\n\r\n    # Compute evaluation metrics.\r\n    accuracy = tf.metrics.accuracy(labels=labels,\r\n                                   predictions=predicted_classes,\r\n                                   name='acc_op')\r\n    metrics = {'accuracy': accuracy}\r\n    tf.summary.scalar('accuracy', accuracy[1])\r\n\r\n    if mode == tf.estimator.ModeKeys.EVAL:\r\n        return tf.estimator.EstimatorSpec(\r\n            mode, loss=loss, eval_metric_ops=metrics)\r\n\r\n    # Create training op.\r\n    assert mode == tf.estimator.ModeKeys.TRAIN\r\n\r\n    optimizer = tf.train.AdagradOptimizer(learning_rate=0.1)\r\n    train_op = optimizer.minimize(loss, global_step=tf.train.get_global_step())\r\n    return tf.estimator.EstimatorSpec(mode, loss=loss, train_op=train_op)\r\n\r\n\r\ndef main(argv):\r\n    args = parser.parse_args(argv[1:])\r\n\r\n    # Fetch the data\r\n    (train_x, train_y), (test_x, test_y) = iris_data.load_data()\r\n\r\n    # Feature columns describe how to use the input.\r\n    my_feature_columns = []\r\n    for key in train_x.keys():\r\n        my_feature_columns.append(tf.feature_column.numeric_column(key=key))\r\n\r\n    # Build 2 hidden layer DNN with 10, 10 units respectively.\r\n    classifier = tf.estimator.Estimator(\r\n        model_fn=my_model,\r\n        params={\r\n            'feature_columns': my_feature_columns,\r\n            # Two hidden layers of 10 nodes each.\r\n            'hidden_units': [10, 10],\r\n            # The model must choose between 3 classes.\r\n            'n_classes': 3,\r\n        },\r\n        config=estimator.RunConfig(\r\n            keep_checkpoint_max=1,\r\n            save_checkpoints_steps=1,\r\n            save_summary_steps=1,\r\n            model_dir=os.path.join(\".\", \"model_dir\")))\r\n\r\n    # Train the Model.\r\n    estimator.train_and_evaluate(\r\n        estimator=classifier,\r\n        train_spec=estimator.TrainSpec(input_fn=lambda: iris_data.train_input_fn(train_x, train_y, args.batch_size),\r\n                                       max_steps=args.train_steps),\r\n        eval_spec=estimator.EvalSpec(input_fn=lambda: iris_data.eval_input_fn(test_x, test_y, args.batch_size),\r\n                                     start_delay_secs=0,\r\n                                     throttle_secs=0,\r\n                                     steps=None),\r\n\r\n    )\r\n    #classifier.train(\r\n    #    input_fn=lambda:iris_data.train_input_fn(train_x, train_y, args.batch_size),\r\n    #    steps=args.train_steps)\r\n\r\n    # Evaluate the model.\r\n    #eval_result = classifier.evaluate(\r\n    #    input_fn=lambda:iris_data.eval_input_fn(test_x, test_y, args.batch_size))\r\n\r\n    #print('\\nTest set accuracy: {accuracy:0.3f}\\n'.format(**eval_result))\r\n\r\n    # Generate predictions from the model\r\n    expected = ['Setosa', 'Versicolor', 'Virginica']\r\n    predict_x = {\r\n        'SepalLength': [5.1, 5.9, 6.9],\r\n        'SepalWidth': [3.3, 3.0, 3.1],\r\n        'PetalLength': [1.7, 4.2, 5.4],\r\n        'PetalWidth': [0.5, 1.5, 2.1],\r\n    }\r\n\r\n    predictions = classifier.predict(\r\n        input_fn=lambda:iris_data.eval_input_fn(predict_x,\r\n                                                labels=None,\r\n                                                batch_size=args.batch_size))\r\n\r\n    for pred_dict, expec in zip(predictions, expected):\r\n        template = ('\\nPrediction is \"{}\" ({:.1f}%), expected \"{}\"')\r\n\r\n        class_id = pred_dict['class_ids'][0]\r\n        probability = pred_dict['probabilities'][class_id]\r\n\r\n        print(template.format(iris_data.SPECIES[class_id],\r\n                              100 * probability, expec))\r\n\r\n\r\nif __name__ == '__main__':\r\n    tf.logging.set_verbosity(tf.logging.INFO)\r\n    tf.app.run(main)\r\n```\r\n\r\nMy iris_data.py:\r\n\r\n```\r\nimport pandas as pd\r\nimport tensorflow as tf\r\n\r\nTRAIN_URL = \"http://download.tensorflow.org/data/iris_training.csv\"\r\nTEST_URL = TRAIN_URL#\"http://download.tensorflow.org/data/iris_test.csv\"\r\n\r\nCSV_COLUMN_NAMES = ['SepalLength', 'SepalWidth',\r\n                    'PetalLength', 'PetalWidth', 'Species']\r\nSPECIES = ['Setosa', 'Versicolor', 'Virginica']\r\n\r\ndef maybe_download():\r\n    train_path = tf.keras.utils.get_file(TRAIN_URL.split('/')[-1], TRAIN_URL)\r\n    test_path = tf.keras.utils.get_file(TEST_URL.split('/')[-1], TEST_URL)\r\n\r\n    return train_path, test_path\r\n\r\ndef load_data(y_name='Species'):\r\n    \"\"\"Returns the iris dataset as (train_x, train_y), (test_x, test_y).\"\"\"\r\n    train_path, test_path = maybe_download()\r\n\r\n    train = pd.read_csv(train_path, names=CSV_COLUMN_NAMES, header=0)\r\n    train_x, train_y = train, train.pop(y_name)\r\n\r\n    test = pd.read_csv(test_path, names=CSV_COLUMN_NAMES, header=0)\r\n    test_x, test_y = test, test.pop(y_name)\r\n\r\n    return (train_x, train_y), (test_x, test_y)\r\n\r\n\r\ndef train_input_fn(features, labels, batch_size):\r\n    \"\"\"An input function for training\"\"\"\r\n    # Convert the inputs to a Dataset.\r\n    dataset = tf.data.Dataset.from_tensor_slices((dict(features), labels))\r\n\r\n    # Shuffle, repeat, and batch the examples.\r\n    dataset = dataset.shuffle(1000).repeat().batch(batch_size)\r\n\r\n    # Return the dataset.\r\n    return dataset\r\n\r\n\r\ndef eval_input_fn(features, labels, batch_size):\r\n    \"\"\"An input function for evaluation or prediction\"\"\"\r\n    features=dict(features)\r\n    if labels is None:\r\n        # No labels, use only features.\r\n        inputs = features\r\n    else:\r\n        inputs = (features, labels)\r\n\r\n    # Convert the inputs to a Dataset.\r\n    dataset = tf.data.Dataset.from_tensor_slices(inputs)\r\n\r\n    # Batch the examples\r\n    assert batch_size is not None, \"batch_size must not be None\"\r\n    dataset = dataset.batch(batch_size)\r\n\r\n    # Return the dataset.\r\n    return dataset\r\n\r\n\r\n# The remainder of this file contains a simple example of a csv parser,\r\n#     implemented using the `Dataset` class.\r\n\r\n# `tf.parse_csv` sets the types of the outputs to match the examples given in\r\n#     the `record_defaults` argument.\r\nCSV_TYPES = [[0.0], [0.0], [0.0], [0.0], [0]]\r\n\r\ndef _parse_line(line):\r\n    # Decode the line into its fields\r\n    fields = tf.decode_csv(line, record_defaults=CSV_TYPES)\r\n\r\n    # Pack the result into a dictionary\r\n    features = dict(zip(CSV_COLUMN_NAMES, fields))\r\n\r\n    # Separate the label from the features\r\n    label = features.pop('Species')\r\n\r\n    return features, label\r\n\r\n\r\ndef csv_input_fn(csv_path, batch_size):\r\n    # Create a dataset containing the text lines.\r\n    dataset = tf.data.TextLineDataset(csv_path).skip(1)\r\n\r\n    # Parse each line.\r\n    dataset = dataset.map(_parse_line)\r\n\r\n    # Shuffle, repeat, and batch the examples.\r\n    dataset = dataset.shuffle(1000).repeat().batch(batch_size)\r\n\r\n    # Return the dataset.\r\n    return dataset\r\n```\r\n\r\n**Other info / logs**\r\n\r\nSome tensorboard images. First, I can always get a consistent loss (loss in step x for eval is equal to loss in step x+1 for training). Example:\r\n\r\n![image](https://user-images.githubusercontent.com/42271354/63022114-7d704580-bea2-11e9-9873-19ed0bf715e0.png)\r\n\r\n![image](https://user-images.githubusercontent.com/42271354/63022154-8e20bb80-bea2-11e9-8c96-dc2a45d79f76.png)\r\n\r\nBut the accuracies don't match in any apparent way. I could verify that the evaluation accuracy is indeed correct, when looking at the labels and predicted values, but the accuracy during training is different.\r\n\r\n![image](https://user-images.githubusercontent.com/42271354/63022282-d7710b00-bea2-11e9-965b-f59bbf45a4e1.png)\r\n\r\nI might be missing some obvious detail here, so please do let me know if you can spot something.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31611", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31611/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31611/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31611/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31611", "id": 480543993, "node_id": "MDU6SXNzdWU0ODA1NDM5OTM=", "number": 31611, "title": "[issue]Pb convert to tflite :how to calculate output min max of concatenation layer", "user": {"login": "MasterGG", "id": 13192737, "node_id": "MDQ6VXNlcjEzMTkyNzM3", "avatar_url": "https://avatars2.githubusercontent.com/u/13192737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MasterGG", "html_url": "https://github.com/MasterGG", "followers_url": "https://api.github.com/users/MasterGG/followers", "following_url": "https://api.github.com/users/MasterGG/following{/other_user}", "gists_url": "https://api.github.com/users/MasterGG/gists{/gist_id}", "starred_url": "https://api.github.com/users/MasterGG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MasterGG/subscriptions", "organizations_url": "https://api.github.com/users/MasterGG/orgs", "repos_url": "https://api.github.com/users/MasterGG/repos", "events_url": "https://api.github.com/users/MasterGG/events{/privacy}", "received_events_url": "https://api.github.com/users/MasterGG/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, {"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-08-14T08:18:39Z", "updated_at": "2019-08-20T03:44:16Z", "closed_at": null, "author_association": "NONE", "body": "I notice that tensorflow source code in quantized_concat_op.cc use the function of **CalculateInputAndOutputRange()** to caculate the minmax value of input and output feature maps, which just let the output min value be the minimum of the  input_mins[i], and max value be the maximum of the  input_maxes[i].\r\nBut when i convert pb file to tflite, the minmax value of output feature map of  concat layer not be the value  what it should be.\r\n\r\n\r\nthis is my convet command:\r\ntoco  \\\r\n--graph_def_file=rpn_190516.pb \\\r\n--output_file=rpn_190516_tt.tflite \\\r\n--input_shapes=1,2048,2048,3 \\\r\n--input_arrays='input_rpn' \\\r\n--output_arrays='concat' \\\r\n--inference_type=QUANTIZED_UINT8 \\\r\n--mean_values=128 \\\r\n--std_dev_values=128 \\\r\n--change_concat_input_ranges=false \\\r\n--allow_custom_ops\r\n\r\n\r\nand the reslut screenshot:\r\n![image](https://user-images.githubusercontent.com/13192737/63005315-d7770800-beae-11e9-9372-edd151d909dc.png)\r\n\r\ni would appreciate it , if someone can explain the result.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31608", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31608/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31608/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31608/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31608", "id": 480513585, "node_id": "MDU6SXNzdWU0ODA1MTM1ODU=", "number": 31608, "title": "Auto-Configuration Error: Couldn't find undname.exe under C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\", "user": {"login": "mayadav1", "id": 51187678, "node_id": "MDQ6VXNlcjUxMTg3Njc4", "avatar_url": "https://avatars0.githubusercontent.com/u/51187678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mayadav1", "html_url": "https://github.com/mayadav1", "followers_url": "https://api.github.com/users/mayadav1/followers", "following_url": "https://api.github.com/users/mayadav1/following{/other_user}", "gists_url": "https://api.github.com/users/mayadav1/gists{/gist_id}", "starred_url": "https://api.github.com/users/mayadav1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mayadav1/subscriptions", "organizations_url": "https://api.github.com/users/mayadav1/orgs", "repos_url": "https://api.github.com/users/mayadav1/repos", "events_url": "https://api.github.com/users/mayadav1/events{/privacy}", "received_events_url": "https://api.github.com/users/mayadav1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-08-14T07:00:05Z", "updated_at": "2019-08-20T15:59:06Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform : Windows 10\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: r1.13\r\n- Python version:  python3.6\r\n- Installed using virtualenv? pip? conda?: conda\r\n- Bazel version (if compiling from source): 0.21.0\r\n- Compiler version (if compiling from source): VS2019,16.2,MSVC++=14.22\r\n\r\n**Describe the problem**\r\nAuto-Configuration Error: Couldn't find undname.exe under C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\, please check your VC installation and set BAZEL_VC environment variable correctly.\r\n\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n1)conda create -n tensorflow-1.13.1-without-mkl python=3.6 anaconda\r\n2)conda activate tensorflow-1.13.1-without-mkl\r\n3)Install MSYS2\r\nset environmental variable, under PATH -> C:\\msys64\\usr\\bin\r\n4)Install JDK12 and set environmental variable : JAVA_HOME = C:\\Program Files\\Java\\jdk-12\r\n5)pacman -Syu zip unzip\r\n6)pacman -Syuu --noconfirm patch\r\n7)set BAZEL_VC=C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Professional\\VC\r\n8) set BAZEL_SH=C:\\msys64\\usr\\bin\\bash.exe\r\n9) git clone https://github.com/tensorflow/tensorflow.git -b r1.4\r\n10) python ./configure.py\r\n\r\nYou have bazel 0.21.0 installed.\r\nPlease specify the location of python. [Default is C:\\Users\\zen2-\\Anaconda2\\envs\\tensorflow-1.13.1-without-mkl\\python.exe]:\r\nFound possible Python library paths:\r\n  C:\\Users\\zen2-\\Anaconda2\\envs\\tensorflow-1.13.1-without-mkl\\lib\\site-packages\r\nPlease input the desired Python library path to use.  Default is [C:\\Users\\zen2-\\Anaconda2\\envs\\tensorflow-1.13.1-without-mkl\\lib\\site-packages]\r\nDo you wish to build TensorFlow with XLA JIT support? [y/N]: N\r\nNo XLA JIT support will be enabled for TensorFlow.\r\nDo you wish to build TensorFlow with ROCm support? [y/N]: N\r\nNo ROCm support will be enabled for TensorFlow.\r\nDo you wish to build TensorFlow with CUDA support? [y/N]: N\r\nNo CUDA support will be enabled for TensorFlow.\r\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is /arch:AVX]:\r\nWould you like to override eigen strong inline for some C++ compilation to reduce the compilation time? [Y/n]: Y\r\n\r\n11)bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package\r\n\r\n**Any other info / logs**\r\n\r\nWARNING: Option 'experimental_shortened_obj_file_path' is deprecated\r\nINFO: Invocation ID: ca6515c1-83e0-4ddf-a065-733711b4a9ff\r\nERROR: C:/users/zen2-/tensorflow/tensorflow/python/BUILD:4172:1: no such package '@local_config_def_file_filter//': Traceback (most recent call last):\r\n        File \"C:/users/zen2-/tensorflow/tensorflow/tools/def_file_filter/def_file_filter_configure.bzl\", line 37\r\n                auto_configure_fail((\"Couldn't find undname.exe unde...))\r\n        File \"C:/users/zen2-/_bazel_zen2_microsoft/ldf7kfdv/external/bazel_tools/tools/cpp/lib_cc_configure.bzl\", line 109, in auto_configure_fail\r\n                fail((\"\\n%sAuto-Configuration Error:%...)))\r\n\r\nAuto-Configuration Error: Couldn't find undname.exe under C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\, please check your VC installation and set BAZEL_VC environment variable correctly.\r\n and referenced by '//tensorflow/python:pywrap_tensorflow_filtered_def_file'\r\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted: no such package '@local_config_def_file_filter//': Traceback (most recent call last):\r\n        File \"C:/users/zen2-/tensorflow/tensorflow/tools/def_file_filter/def_file_filter_configure.bzl\", line 37\r\n                auto_configure_fail((\"Couldn't find undname.exe unde...))\r\n        File \"C:/users/zen2-/_bazel_zen2_microsoft/ldf7kfdv/external/bazel_tools/tools/cpp/lib_cc_configure.bzl\", line 109, in auto_configure_fail\r\n                fail((\"\\n%sAuto-Configuration Error:%...)))\r\n\r\nAuto-Configuration Error: Couldn't find undname.exe under C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\, please check your VC installation and set BAZEL_VC environment variable correctly.\r\nINFO: Elapsed time: 0.713s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (5 packages loaded, 20 targets configured)\r\n    currently loading: tensorflow/lite/schema ... (3 packages)\r\n    Fetching @cython; fetching\r\n    Fetching @swig; fetching\r\n    Fetching @local_config_git; Restarting.\r\n    Fetching @grpc; fetching\r\n    Fetching @local_config_def_file_filter; fetching\r\n    Fetching @flatbuffers; fetching\r\n    Fetching @eigen_archive; fetching\r\n    Fetching @icu; fetching ... (9 fetches)\r\n\r\nPlease correct me in case wrong . "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31603", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31603/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31603/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31603/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31603", "id": 480440729, "node_id": "MDU6SXNzdWU0ODA0NDA3Mjk=", "number": 31603, "title": "Lookahead optimizer", "user": {"login": "jinmel", "id": 2859853, "node_id": "MDQ6VXNlcjI4NTk4NTM=", "avatar_url": "https://avatars2.githubusercontent.com/u/2859853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jinmel", "html_url": "https://github.com/jinmel", "followers_url": "https://api.github.com/users/jinmel/followers", "following_url": "https://api.github.com/users/jinmel/following{/other_user}", "gists_url": "https://api.github.com/users/jinmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/jinmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jinmel/subscriptions", "organizations_url": "https://api.github.com/users/jinmel/orgs", "repos_url": "https://api.github.com/users/jinmel/repos", "events_url": "https://api.github.com/users/jinmel/events{/privacy}", "received_events_url": "https://api.github.com/users/jinmel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-08-14T01:35:27Z", "updated_at": "2019-11-05T06:14:49Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 1.14\r\n- Are you willing to contribute it (Yes/No):Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nhttps://arxiv.org/abs/1907.08610\r\n\r\nThis is not a conventional optimizer as in tensorflow API. It observes through k iterations of optimizers(SGD, Adam), and linear interpolates entire weight into direction where fast weight after k iteration has reached. \r\n\r\nI have seen an implementation of this defining two ops for slow weight update and fast weight update. However I see some potential performance benefit if it was defined on backend. \r\n\r\n**Will this change the current api? How?**\r\n\r\nI believe not.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nTasks with heavy training load will benefit from faster learning rate.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31596", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31596/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31596/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31596/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31596", "id": 480397787, "node_id": "MDU6SXNzdWU0ODAzOTc3ODc=", "number": 31596, "title": "TFLiteConverter fails with tf.gather when the params argument is a layer attribute", "user": {"login": "michaelbenayoun", "id": 25418079, "node_id": "MDQ6VXNlcjI1NDE4MDc5", "avatar_url": "https://avatars0.githubusercontent.com/u/25418079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelbenayoun", "html_url": "https://github.com/michaelbenayoun", "followers_url": "https://api.github.com/users/michaelbenayoun/followers", "following_url": "https://api.github.com/users/michaelbenayoun/following{/other_user}", "gists_url": "https://api.github.com/users/michaelbenayoun/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelbenayoun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelbenayoun/subscriptions", "organizations_url": "https://api.github.com/users/michaelbenayoun/orgs", "repos_url": "https://api.github.com/users/michaelbenayoun/repos", "events_url": "https://api.github.com/users/michaelbenayoun/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelbenayoun/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-08-13T22:26:37Z", "updated_at": "2019-09-07T06:31:24Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04.5 LTS \r\n- TensorFlow installed from (source or binary): conda\r\n- TensorFlow version (use command below): 2.0.0-dev20190807\r\n- Python version: 3.6.8\r\n- CUDA/cuDNN version: 10.0\r\n- GPU model and memory: 8 x Tesla P100-PCIE-16GB \r\n\r\n**Describe the current behavior**\r\nI am not able to convert a SavedModel to a FlatBuffer using TFLiteConverter when the corresponding tf.keras.Model contains a layer with a tf.gather op for which the params argument comes from a variable that was initialized in the build method of that said layer.\r\n\r\nWhen the params argument is from a locally defined variable, or when using tf.nn.embedding_lookup instead of tf.gather, everything works perfectly fine.\r\n\r\nIt also applies to tf.gather_nd.\r\n\r\n**Describe the expected behavior**\r\nI expect tf.gather to work for the case in which the params argument is an attribute of the tf.keras.layers.Layer, just as it does for the other cases mentioned.\r\n\r\n**Code to reproduce the issue**\r\nI wrote a toy example to reproduce the issue, it might be clearer than the description above.\r\n```\r\nimport numpy as np\r\nimport tensorflow as tf\r\nprint(tf.__version__)\r\n\r\nclass Embedding(tf.keras.layers.Layer):\r\n    def __init__(self, vocab_size, hidden_size):\r\n        super(Embedding, self).__init__()\r\n        self.vocab_size = vocab_size\r\n        self.hidden_size = hidden_size\r\n    \r\n    def build(self, input_shape):\r\n        self.shared_weights = self.add_weight(\r\n            \"weights\",\r\n            shape=(self.vocab_size, self.hidden_size),\r\n            dtype=tf.float32,\r\n            initializer=tf.random_normal_initializer(\r\n                mean=0.0, \r\n                stddev=self.hidden_size ** (-0.5)\r\n            )\r\n        )\r\n    \r\n    def call(self, input_):\r\n        # return tf.nn.embedding_lookup(self.shared_weights, input_)\r\n        # return tf.gather(tf.zeros(shape=(self.vocab_size, self.hidden_size)), input_)\r\n        return tf.gather(self.shared_weights, input_)\r\n\r\n\r\nclass SimpleModel(tf.keras.Model):\r\n    def __init__(self, vocab_size, hidden_size):\r\n        super(SimpleModel, self).__init__()\r\n        self.embedding_layer = Embedding(vocab_size, hidden_size)\r\n    \r\n    @tf.function(input_signature=[tf.TensorSpec(shape=(None, ), dtype=tf.int64, name='input')])\r\n    def call(self, input_):\r\n        return self.embedding_layer(input_)\r\n\r\nvocab_size = 20000\r\nhidden_size = 300\r\n\r\n# Building the model.\r\nmodel = SimpleModel(vocab_size, hidden_size)\r\ninput_ = tf.random.uniform(shape=(20, ), dtype=tf.int64, maxval=100)\r\nmodel(input_)\r\n\r\n# Exporting to SavedModel.\r\nsaved_model_dir = 'simple_model/'\r\ntf.saved_model.save(model, saved_model_dir)\r\n\r\n# TFLite conversion.\r\nconverter = tf.lite.TFLiteConverter.from_saved_model(saved_model_dir)\r\ntflite_model = converter.convert()\r\n```\r\n\r\n**Other info / logs**\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/michael/.conda/envs/tf20/bin/toco_from_protos\", line 10, in <module>\r\n    sys.exit(main())\r\n  File \"/home/michael/.conda/envs/tf20/lib/python3.6/site-packages/tensorflow_core/lite/toco/python/toco_from_protos.py\", line 89, in main\r\n    app.run(main=execute, argv=[sys.argv[0]] + unparsed)\r\n  File \"/home/michael/.conda/envs/tf20/lib/python3.6/site-packages/tensorflow_core/python/platform/app.py\", line 40, in run\r\n    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)\r\n  File \"/home/michael/.conda/envs/tf20/lib/python3.6/site-packages/absl/app.py\", line 300, in run\r\n    _run_main(main, args)\r\n  File \"/home/michael/.conda/envs/tf20/lib/python3.6/site-packages/absl/app.py\", line 251, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"/home/michael/.conda/envs/tf20/lib/python3.6/site-packages/tensorflow_core/lite/toco/python/toco_from_protos.py\", line 52, in execute\r\n    enable_mlir_converter)\r\nException: Placeholder statefulpartitionedcall_args_1 should be specied by input_arrays.\r\n\r\n```\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31588", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31588/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31588/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31588/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31588", "id": 480260735, "node_id": "MDU6SXNzdWU0ODAyNjA3MzU=", "number": 31588, "title": "Performance issue: per-device memory usage increases with number of devices within tf.distribute strategy ", "user": {"login": "mjlbach", "id": 13316262, "node_id": "MDQ6VXNlcjEzMzE2MjYy", "avatar_url": "https://avatars1.githubusercontent.com/u/13316262?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mjlbach", "html_url": "https://github.com/mjlbach", "followers_url": "https://api.github.com/users/mjlbach/followers", "following_url": "https://api.github.com/users/mjlbach/following{/other_user}", "gists_url": "https://api.github.com/users/mjlbach/gists{/gist_id}", "starred_url": "https://api.github.com/users/mjlbach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mjlbach/subscriptions", "organizations_url": "https://api.github.com/users/mjlbach/orgs", "repos_url": "https://api.github.com/users/mjlbach/repos", "events_url": "https://api.github.com/users/mjlbach/events{/privacy}", "received_events_url": "https://api.github.com/users/mjlbach/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "guptapriya", "id": 14104855, "node_id": "MDQ6VXNlcjE0MTA0ODU1", "avatar_url": "https://avatars1.githubusercontent.com/u/14104855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guptapriya", "html_url": "https://github.com/guptapriya", "followers_url": "https://api.github.com/users/guptapriya/followers", "following_url": "https://api.github.com/users/guptapriya/following{/other_user}", "gists_url": "https://api.github.com/users/guptapriya/gists{/gist_id}", "starred_url": "https://api.github.com/users/guptapriya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guptapriya/subscriptions", "organizations_url": "https://api.github.com/users/guptapriya/orgs", "repos_url": "https://api.github.com/users/guptapriya/repos", "events_url": "https://api.github.com/users/guptapriya/events{/privacy}", "received_events_url": "https://api.github.com/users/guptapriya/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "guptapriya", "id": 14104855, "node_id": "MDQ6VXNlcjE0MTA0ODU1", "avatar_url": "https://avatars1.githubusercontent.com/u/14104855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guptapriya", "html_url": "https://github.com/guptapriya", "followers_url": "https://api.github.com/users/guptapriya/followers", "following_url": "https://api.github.com/users/guptapriya/following{/other_user}", "gists_url": "https://api.github.com/users/guptapriya/gists{/gist_id}", "starred_url": "https://api.github.com/users/guptapriya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guptapriya/subscriptions", "organizations_url": "https://api.github.com/users/guptapriya/orgs", "repos_url": "https://api.github.com/users/guptapriya/repos", "events_url": "https://api.github.com/users/guptapriya/events{/privacy}", "received_events_url": "https://api.github.com/users/guptapriya/received_events", "type": "User", "site_admin": false}, {"login": "mdanatg", "id": 26628547, "node_id": "MDQ6VXNlcjI2NjI4NTQ3", "avatar_url": "https://avatars1.githubusercontent.com/u/26628547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdanatg", "html_url": "https://github.com/mdanatg", "followers_url": "https://api.github.com/users/mdanatg/followers", "following_url": "https://api.github.com/users/mdanatg/following{/other_user}", "gists_url": "https://api.github.com/users/mdanatg/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdanatg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdanatg/subscriptions", "organizations_url": "https://api.github.com/users/mdanatg/orgs", "repos_url": "https://api.github.com/users/mdanatg/repos", "events_url": "https://api.github.com/users/mdanatg/events{/privacy}", "received_events_url": "https://api.github.com/users/mdanatg/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-08-13T16:51:28Z", "updated_at": "2019-09-16T14:45:09Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): tf-nightly-gpu-2.0-preview==\r\n- TensorFlow version (use command below): v1.12.1-8566-g207bd43 2.0.0-dev20190812\r\n- Python version: 3.7.4\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 10.0/7.4.2\r\n- GPU model and memory: (4) Titan Xp 12 gb \r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nTensor memory allocation fails for the same batch size (determined by n_acton_samples)  as I scale the number of GPUs in my strategy.\r\n\r\n**Describe the expected behavior**\r\nWithout the distributed strategy, I can readily pass a batch size of 300 to a given GPU, within the distributed strategy, this drops to 200 on 2 GPUs, and 70 on 4 GPUs.\r\n\r\n**Code to reproduce the issue**\r\n<details>\r\n  <summary>Example code snippet</summary>\r\n\r\n```\r\ndef tree_search(\r\n    inputs, self_model, world_model, plan_sequence\r\n):\r\n    n_action_samples = 1000\r\n    tree_value = tf.zeros([n_action_samples, 1], dtype=tf.float32)\r\n\r\n    for idx, action in enumerate(plan_sequence):\r\n        # print(\"idx: \", idx)\r\n        if idx == 0 and action:\r\n\r\n            candidate_actions = tf.random.uniform(\r\n                [n_action_samples, 1, num_fingers, 7],\r\n                minval=-1.0,\r\n                maxval=1.0,\r\n                dtype=tf.float32,\r\n            )\r\n\r\n\r\n        elif idx > 0 and action:\r\n            pass\r\n\r\n        elif idx > 0 and not action:\r\n               candidate_actions = tf.zeros(\r\n                [n_action_samples, 1, num_fingers, 7],\r\n                dtype=tf.float32,\r\n            )\r\n\r\n\r\n        else:\r\n            pass\r\n\r\n        tree_value += policy_model(candidate_actions, inputs)\r\n        inputs = world_model(candidate_actions, inputs)\r\n\r\n    retval = {\"action\": candidate_actions, \"tree_value\": tree_value}\r\n\r\n    return retval\r\n\r\n@tf.function\r\ndef policy(\r\n    inputs,\r\n    policy_model,\r\n    world_model,\r\n    strategy\r\n):\r\n\r\n    take_action = [True, False, False]\r\n\r\n    distributed_output = strategy.experimental_run_v2(\r\n        tree_search,\r\n        args=(\r\n            inputs,\r\n            self_model,\r\n            world_model,\r\n            plan_sequence,\r\n        ),\r\n    )\r\n\r\n     distributed_output[\"tree_value\"] = tf.concat(\r\n            strategy.experimental_local_results(distributed_output[\"tree_value\"]), axis=0\r\n        )\r\n\r\n     distributed_output[\"action\"] = tf.concat(\r\n            strategy.experimental_local_results(distributed_output[\"action\"]), axis=0\r\n        )\r\n\r\n\r\n    action = choose_max_value_action(\r\n       distributed_output[\"action\"], distributed_output[\"tree_value\"]\r\n    )\r\n\r\n    return action\r\n```\r\n\r\n</details>\r\n\r\n\r\n**Other info / logs**\r\nOn a related note, it seems like there's a regression in the tf.summary.start_trace() based method of profiling models that is required by 2.0. The new tensorboard interface allows visualizing execution time of ops, but there doesn't seem to be a way to show memory usage."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31579", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31579/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31579/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31579/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31579", "id": 480069239, "node_id": "MDU6SXNzdWU0ODAwNjkyMzk=", "number": 31579, "title": "[TF 2.0] allow tf.function input_signature to be specified by annotations", "user": {"login": "jeffpollock9", "id": 5081168, "node_id": "MDQ6VXNlcjUwODExNjg=", "avatar_url": "https://avatars3.githubusercontent.com/u/5081168?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeffpollock9", "html_url": "https://github.com/jeffpollock9", "followers_url": "https://api.github.com/users/jeffpollock9/followers", "following_url": "https://api.github.com/users/jeffpollock9/following{/other_user}", "gists_url": "https://api.github.com/users/jeffpollock9/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeffpollock9/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeffpollock9/subscriptions", "organizations_url": "https://api.github.com/users/jeffpollock9/orgs", "repos_url": "https://api.github.com/users/jeffpollock9/repos", "events_url": "https://api.github.com/users/jeffpollock9/events{/privacy}", "received_events_url": "https://api.github.com/users/jeffpollock9/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1190546177, "node_id": "MDU6TGFiZWwxMTkwNTQ2MTc3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:autograph", "name": "comp:autograph", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, {"login": "kkimdev", "id": 503414, "node_id": "MDQ6VXNlcjUwMzQxNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/503414?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kkimdev", "html_url": "https://github.com/kkimdev", "followers_url": "https://api.github.com/users/kkimdev/followers", "following_url": "https://api.github.com/users/kkimdev/following{/other_user}", "gists_url": "https://api.github.com/users/kkimdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/kkimdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kkimdev/subscriptions", "organizations_url": "https://api.github.com/users/kkimdev/orgs", "repos_url": "https://api.github.com/users/kkimdev/repos", "events_url": "https://api.github.com/users/kkimdev/events{/privacy}", "received_events_url": "https://api.github.com/users/kkimdev/received_events", "type": "User", "site_admin": false}, {"login": "jeffpollock9", "id": 5081168, "node_id": "MDQ6VXNlcjUwODExNjg=", "avatar_url": "https://avatars3.githubusercontent.com/u/5081168?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeffpollock9", "html_url": "https://github.com/jeffpollock9", "followers_url": "https://api.github.com/users/jeffpollock9/followers", "following_url": "https://api.github.com/users/jeffpollock9/following{/other_user}", "gists_url": "https://api.github.com/users/jeffpollock9/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeffpollock9/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeffpollock9/subscriptions", "organizations_url": "https://api.github.com/users/jeffpollock9/orgs", "repos_url": "https://api.github.com/users/jeffpollock9/repos", "events_url": "https://api.github.com/users/jeffpollock9/events{/privacy}", "received_events_url": "https://api.github.com/users/jeffpollock9/received_events", "type": "User", "site_admin": false}, {"login": "mdanatg", "id": 26628547, "node_id": "MDQ6VXNlcjI2NjI4NTQ3", "avatar_url": "https://avatars1.githubusercontent.com/u/26628547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdanatg", "html_url": "https://github.com/mdanatg", "followers_url": "https://api.github.com/users/mdanatg/followers", "following_url": "https://api.github.com/users/mdanatg/following{/other_user}", "gists_url": "https://api.github.com/users/mdanatg/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdanatg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdanatg/subscriptions", "organizations_url": "https://api.github.com/users/mdanatg/orgs", "repos_url": "https://api.github.com/users/mdanatg/repos", "events_url": "https://api.github.com/users/mdanatg/events{/privacy}", "received_events_url": "https://api.github.com/users/mdanatg/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 18, "created_at": "2019-08-13T10:03:27Z", "updated_at": "2020-02-25T09:26:35Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n\r\n- TensorFlow version (you are using): 2.0.0-rc0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\n`tf.function` has an argument `input_signature` which I have been using to try and make my code a bit safer and ensure I don't keep re-tracing functions. The `input_signature` specifies the tensor type for each of the function arguments. It would be much nicer (I think) to specify these types using python (>=3.5) annotations, where a suitable version of python is available. A very rough example looks like:\r\n\r\n``` python\r\nimport tensorflow as tf\r\n\r\n\r\ndef function(fn):\r\n    input_signature = list(fn.__annotations__.values())\r\n    return tf.function(fn, autograph=False, input_signature=input_signature)\r\n\r\n\r\n@function\r\ndef foo(\r\n    x: tf.TensorSpec(shape=[None], dtype=tf.float64),\r\n    y: tf.TensorSpec(shape=[None], dtype=tf.float64),\r\n):\r\n    return x + 10.0 + y\r\n\r\n\r\nvec32 = tf.random.normal([2], dtype=tf.float32)\r\nvec64 = tf.random.normal([2], dtype=tf.float64)\r\n\r\n\r\n# should pass\r\nfoo(vec64, vec64)\r\nfoo(y=vec64, x=vec64)\r\n\r\n# should fail\r\nfoo(vec32, vec64)\r\n```\r\n\r\nWhich I think is nicer than the current signature:\r\n\r\n``` python\r\n@tf.function(\r\n    autograph=False,\r\n    input_signature=[\r\n        tf.TensorSpec(shape=[None], dtype=tf.float64),\r\n        tf.TensorSpec(shape=[None], dtype=tf.float64),\r\n    ],\r\n)\r\ndef foo(x, y):\r\n    return x + 10.0 + y\r\n```\r\n\r\nI think the main benefit of the annotation approach is that the argument name and type are beside each other, and this syntax is already widely used in python.\r\n\r\nIn order to enable using annotations as the `input_signature` I think there should be an extra boolean argument to `tf.function` called e.g. `use_annotation_input_signature` which defaults to `False`.\r\n\r\nAlso note I have set `autograph=False` here to avoid a warning:\r\n\r\n> Cause: name 'foo_scope' is not defined\r\n\r\nI am guessing a proper implementation inside of `tf.function` would not have this problem.\r\n\r\n**Will this change the current api? How?**\r\n\r\nIt would add an additional argument to `tf.function` which at the default value would not change anything.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nAnyone using python >= 3.5 who would like to specify the tensor types of their functions.\r\n\r\n**Any Other info.**\r\n\r\nNone"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31577", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31577/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31577/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31577/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31577", "id": 480012428, "node_id": "MDU6SXNzdWU0ODAwMTI0Mjg=", "number": 31577, "title": "TensorFlow Lite BroadcastTo", "user": {"login": "DoritoDog", "id": 33669821, "node_id": "MDQ6VXNlcjMzNjY5ODIx", "avatar_url": "https://avatars3.githubusercontent.com/u/33669821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DoritoDog", "html_url": "https://github.com/DoritoDog", "followers_url": "https://api.github.com/users/DoritoDog/followers", "following_url": "https://api.github.com/users/DoritoDog/following{/other_user}", "gists_url": "https://api.github.com/users/DoritoDog/gists{/gist_id}", "starred_url": "https://api.github.com/users/DoritoDog/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DoritoDog/subscriptions", "organizations_url": "https://api.github.com/users/DoritoDog/orgs", "repos_url": "https://api.github.com/users/DoritoDog/repos", "events_url": "https://api.github.com/users/DoritoDog/events{/privacy}", "received_events_url": "https://api.github.com/users/DoritoDog/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "renjie-liu", "id": 36247193, "node_id": "MDQ6VXNlcjM2MjQ3MTkz", "avatar_url": "https://avatars3.githubusercontent.com/u/36247193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/renjie-liu", "html_url": "https://github.com/renjie-liu", "followers_url": "https://api.github.com/users/renjie-liu/followers", "following_url": "https://api.github.com/users/renjie-liu/following{/other_user}", "gists_url": "https://api.github.com/users/renjie-liu/gists{/gist_id}", "starred_url": "https://api.github.com/users/renjie-liu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/renjie-liu/subscriptions", "organizations_url": "https://api.github.com/users/renjie-liu/orgs", "repos_url": "https://api.github.com/users/renjie-liu/repos", "events_url": "https://api.github.com/users/renjie-liu/events{/privacy}", "received_events_url": "https://api.github.com/users/renjie-liu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "renjie-liu", "id": 36247193, "node_id": "MDQ6VXNlcjM2MjQ3MTkz", "avatar_url": "https://avatars3.githubusercontent.com/u/36247193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/renjie-liu", "html_url": "https://github.com/renjie-liu", "followers_url": "https://api.github.com/users/renjie-liu/followers", "following_url": "https://api.github.com/users/renjie-liu/following{/other_user}", "gists_url": "https://api.github.com/users/renjie-liu/gists{/gist_id}", "starred_url": "https://api.github.com/users/renjie-liu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/renjie-liu/subscriptions", "organizations_url": "https://api.github.com/users/renjie-liu/orgs", "repos_url": "https://api.github.com/users/renjie-liu/repos", "events_url": "https://api.github.com/users/renjie-liu/events{/privacy}", "received_events_url": "https://api.github.com/users/renjie-liu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2019-08-13T07:56:32Z", "updated_at": "2019-12-27T02:27:01Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):Yes\r\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10 64 bit\r\nTensorFlow installed from (source or binary):source\r\nTensorFlow version (use command below): tf-nightly\r\nPython version: Python 3.6\r\nGCC/Compiler version (if compiling from source): N/A\r\nCUDA/cuDNN version: N/A\r\nGPU model and memory: NVIDIA GeForce GTX 1050 Ti\r\n\r\n\r\n\r\n**Provide the text output from tflite_convert**\r\n\r\n```\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime. If those are native TensorFlow operators, you might be able to use the extended runtime by passing --enable_select_tf_ops, or by setting target_ops=TFLITE_BUILTINS,SELECT_TF_OPS when calling tf.lite.TFLiteConverter(). Otherwise, if you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: CONCATENATION, CONV_2D, DIV, FULLY_CONNECTED, MAXIMUM, MAX_POOL_2D, MEAN, PAD, RESHAPE, SOFTMAX, SPLIT_V, SQRT, SQUARE, STRIDED_SLICE, SUB, TRANSPOSE. Here is a list of operators for which you will need custom implementations: BroadcastTo.\r\n```\r\n\r\n[frozen_graph.pb](https://drive.google.com/open?id=1z-TPW-n0OziQ6-5ix1sCMzBMT5qmlbv-)\r\n[full_log.txt](https://github.com/tensorflow/tensorflow/files/3495827/full_log.txt)\r\n\r\n\r\n**Any other info / logs**\r\nI am trying to convert a person re-identification model to tflite to run on Android. However it seems that the operator BroadcastTo is unsupported. I'm not sure where this operator is even used, because searching on TensorBoard returns nothing. I am aware that it is possible to create [custom operators](https://www.tensorflow.org/lite/guide/ops_custom), however I instantly got lost at the C++ code, I don't even know where to place the new operator if I manage to make it. And even then I'd have to compile a new AAR and use JNI in order to use it on Android.\r\n\r\nThe command I used is:\r\ntoco --graph_def_file=output/frozen_graph.pb --output_file=output/model.tflite --input_shapes=2,1,160,60,3 --input_arrays=images --output_arrays=Softmax --output_format=TFLITE --inference_type=FLOAT --input_data_type=FLOAT\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31564", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31564/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31564/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31564/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/31564", "id": 479862497, "node_id": "MDExOlB1bGxSZXF1ZXN0MzA2NjcwMjU1", "number": 31564, "title": "[tflite] make Metal Mul kernel unlinkable", "user": {"login": "LK", "id": 975916, "node_id": "MDQ6VXNlcjk3NTkxNg==", "avatar_url": "https://avatars2.githubusercontent.com/u/975916?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LK", "html_url": "https://github.com/LK", "followers_url": "https://api.github.com/users/LK/followers", "following_url": "https://api.github.com/users/LK/following{/other_user}", "gists_url": "https://api.github.com/users/LK/gists{/gist_id}", "starred_url": "https://api.github.com/users/LK/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LK/subscriptions", "organizations_url": "https://api.github.com/users/LK/orgs", "repos_url": "https://api.github.com/users/LK/repos", "events_url": "https://api.github.com/users/LK/events{/privacy}", "received_events_url": "https://api.github.com/users/LK/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1169365494, "node_id": "MDU6TGFiZWwxMTY5MzY1NDk0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:M", "name": "size:M", "color": "adafea", "default": false, "description": "CL Change Size: Medium"}], "state": "open", "locked": false, "assignee": {"login": "NikolayChirkov", "id": 11627523, "node_id": "MDQ6VXNlcjExNjI3NTIz", "avatar_url": "https://avatars3.githubusercontent.com/u/11627523?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NikolayChirkov", "html_url": "https://github.com/NikolayChirkov", "followers_url": "https://api.github.com/users/NikolayChirkov/followers", "following_url": "https://api.github.com/users/NikolayChirkov/following{/other_user}", "gists_url": "https://api.github.com/users/NikolayChirkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/NikolayChirkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NikolayChirkov/subscriptions", "organizations_url": "https://api.github.com/users/NikolayChirkov/orgs", "repos_url": "https://api.github.com/users/NikolayChirkov/repos", "events_url": "https://api.github.com/users/NikolayChirkov/events{/privacy}", "received_events_url": "https://api.github.com/users/NikolayChirkov/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "NikolayChirkov", "id": 11627523, "node_id": "MDQ6VXNlcjExNjI3NTIz", "avatar_url": "https://avatars3.githubusercontent.com/u/11627523?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NikolayChirkov", "html_url": "https://github.com/NikolayChirkov", "followers_url": "https://api.github.com/users/NikolayChirkov/followers", "following_url": "https://api.github.com/users/NikolayChirkov/following{/other_user}", "gists_url": "https://api.github.com/users/NikolayChirkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/NikolayChirkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NikolayChirkov/subscriptions", "organizations_url": "https://api.github.com/users/NikolayChirkov/orgs", "repos_url": "https://api.github.com/users/NikolayChirkov/repos", "events_url": "https://api.github.com/users/NikolayChirkov/events{/privacy}", "received_events_url": "https://api.github.com/users/NikolayChirkov/received_events", "type": "User", "site_admin": false}, {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-08-12T21:39:00Z", "updated_at": "2020-02-13T10:57:24Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/31564", "html_url": "https://github.com/tensorflow/tensorflow/pull/31564", "diff_url": "https://github.com/tensorflow/tensorflow/pull/31564.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/31564.patch"}, "body": "As highlighted in #31468, the Mul operator causes an error when run on larger inputs. As far as I could tell from my digging, this is caused by the fact that:\r\n\r\n * the Mul kernel is linked with other compute tasks, and as a result does not specify a `resize_function`\r\n * when the Mul task is the first in a `FusionChain`, the `NonLinkableStub`'s resize function is used, which assigns the entire input to a single threadgroup\r\n\r\nIt seems that this then triggers a timeout on the GPU for larger inputs because there are not enough threads associated to this group. This workaround, which makes the Mul kernel unlinkable and specifies a proper thread grouping for this kernel, enables #31468 to work as expected.\r\n\r\nI would imagine this change does incur some performance penalty, but I'm not sure how else to specify proper threading grouping for a linked operator.\r\n\r\ncloses #31468"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31549", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31549/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31549/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31549/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31549", "id": 479728559, "node_id": "MDU6SXNzdWU0Nzk3Mjg1NTk=", "number": 31549, "title": "tf.Estimator starts with GPU and switches to CPU", "user": {"login": "arozans", "id": 16906186, "node_id": "MDQ6VXNlcjE2OTA2MTg2", "avatar_url": "https://avatars0.githubusercontent.com/u/16906186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arozans", "html_url": "https://github.com/arozans", "followers_url": "https://api.github.com/users/arozans/followers", "following_url": "https://api.github.com/users/arozans/following{/other_user}", "gists_url": "https://api.github.com/users/arozans/gists{/gist_id}", "starred_url": "https://api.github.com/users/arozans/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arozans/subscriptions", "organizations_url": "https://api.github.com/users/arozans/orgs", "repos_url": "https://api.github.com/users/arozans/repos", "events_url": "https://api.github.com/users/arozans/events{/privacy}", "received_events_url": "https://api.github.com/users/arozans/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-08-12T16:05:24Z", "updated_at": "2020-01-06T04:03:42Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): 16.04.4 LTS (Xenial Xerus)\r\n- TensorFlow installed from (source or binary): from pip\r\n- TensorFlow version (use command below): 1.14, but earlier also for 1.11\r\n- Python version: 3.6\r\n- CUDA/cuDNN version: 10.0.130 / 7.6.2\r\n- GPU model and memory: 1080Ti 11GB\r\n\r\nFew days ago I've asked a SO question: https://stackoverflow.com/questions/57097880/tensorflow-estimator-gradually-decreasing-gpu-utilization - sadly without a response, so I'm trying here, not sure if this is a bug.\r\n\r\nCopied from the question:\r\nI'm training tf.Estimator model (5025056 trainable parameters):\r\n\r\n    # simplified code\r\n    model = create_custom_model() #preparing my model here \r\n    tf.reset_default_graph()\r\n    estimator = tf.estimator.Estimator(model_fn=model.get_model_fn())\r\n    evaluation_hook = tf.contrib.estimator.InMemoryEvaluatorHook(\r\n        estimator=estimator,\r\n        input_fn=lambda: model.eval_input_fn()\r\n    )\r\n    estimator.train(\r\n        input_fn=lambda: model.train_input_fn(),\r\n        hooks=[evaluation_hook]\r\n    )\r\nAnd dataset is prepared here:\r\n\r\n    def train_input_fn():\r\n        dataset = tf.data.TFRecordDataset(\"some_filename\")\r\n        dataset = dataset.shuffle(3000)\r\n        dataset = dataset.repeat()\r\n        dataset = dataset.batch(384)\r\n        dataset = dataset.prefetch(1)\r\n        return dataset\r\n\r\nMy dataset consists of images, 9000 samples, stored in TFRecord (163M). \r\nGPU is `GeForce GTX 1080 Ti` and CPU is `i5-6600 CPU @ 3.30GHz`.\r\nDuring the training, at first, everything looks fine - `htop` shows that each core is working approximately the same way (mostly jumping between `0` - `50%` utilization), and gpu stats (shown using `vidia-smi --query-gpu=timestamp,pstate,temperature.gpu,utilization.gpu,utilization.memory,memory.total,memory.free,memory.used --format=csv -l 1`) indicate that card is working on `100%` of its power - temperatures around `85\u00b0C`, `100%` utilization of gpu and memory, also most of the memory is used(10GB).\r\nUp to step `4000` (of `10000`) tensorflow prints `global_step/sec` with values ranging from `1.0` to `1.1`. `15GB` of available `16GB` of RAM is used and no swap.\r\n\r\n\r\nAfter that step, that time `global_step/sec` is lower and lower. For step `5000` it is `0.617275`.\r\nAaround step 2000 it is only `0.0938672` and decreasing (down to `0.0368357` at the end of the training). During this process `nvidia-smi` shows that `utilization.gpu` and `utilization.memory` is `0%` more and more frequently (despite the fact that `memory.used` shows same amount whole time, that is `10GB`), and CPU is working at a `100%` of a single core. RAM is at the same level as when training started, and no swapping occurs. Periodically, mayby once for `20` steps, GPU utilization is slightly higher, but quickly returns to `0`. \r\n\r\n\r\nIt looks like after some epochs tensorflow trains on CPU instead of GPU? What can be possible cause of that? "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31548", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31548/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31548/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31548/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31548", "id": 479724659, "node_id": "MDU6SXNzdWU0Nzk3MjQ2NTk=", "number": 31548, "title": "Add adjust_batch or (re_batch) support for tf.data", "user": {"login": "yongtang", "id": 6932348, "node_id": "MDQ6VXNlcjY5MzIzNDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6932348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yongtang", "html_url": "https://github.com/yongtang", "followers_url": "https://api.github.com/users/yongtang/followers", "following_url": "https://api.github.com/users/yongtang/following{/other_user}", "gists_url": "https://api.github.com/users/yongtang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yongtang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yongtang/subscriptions", "organizations_url": "https://api.github.com/users/yongtang/orgs", "repos_url": "https://api.github.com/users/yongtang/repos", "events_url": "https://api.github.com/users/yongtang/events{/privacy}", "received_events_url": "https://api.github.com/users/yongtang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-08-12T15:56:53Z", "updated_at": "2019-08-13T17:52:24Z", "closed_at": null, "author_association": "MEMBER", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): N/A\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nAt the moment `tf.data` has both `unbatch()` and `batch(n)` support, where you can either change the output of `tf.data` from `any`-batched ones to `non`-batched ones, or from `non`-batched ones to `n`-batched ones.\r\n\r\nWhat is not available is the transformation from `m`-batched ones to `n`-batched ones directly.\r\n\r\nIndirectly it is possible to achieve the above mentioned `m`-batched => `n-batched` through:\r\n```\r\ndataset = dataset.unbatch().batch(n)\r\n```\r\n\r\nHowever, in case each record is small in size (e.g., one record only have one float32) then `.unbatch().batch(n)` could be costly.\r\n\r\nIt would be great to have a way to shortcut with an `adjust_batch` or `re_batch` that achieve the same thing:\r\n```\r\ndataset = dataset.re_batch(n) # from m-batched to n-batched\r\n```\r\n\r\nNote there is already a `RebatchDataset` (which archives different goal) so not sure if `re_batch(n)` could be a good naming.\r\n\r\n**Will this change the current api? How?**\r\n\r\nNo.\r\n**Who will benefit with this feature?**\r\n\r\nSee description above.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31545", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31545/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31545/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31545/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31545", "id": 479677254, "node_id": "MDU6SXNzdWU0Nzk2NzcyNTQ=", "number": 31545, "title": "tf.shape() for RaggedTensor is raising an exception", "user": {"login": "DEKHTIARJonathan", "id": 10923599, "node_id": "MDQ6VXNlcjEwOTIzNTk5", "avatar_url": "https://avatars2.githubusercontent.com/u/10923599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DEKHTIARJonathan", "html_url": "https://github.com/DEKHTIARJonathan", "followers_url": "https://api.github.com/users/DEKHTIARJonathan/followers", "following_url": "https://api.github.com/users/DEKHTIARJonathan/following{/other_user}", "gists_url": "https://api.github.com/users/DEKHTIARJonathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/DEKHTIARJonathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DEKHTIARJonathan/subscriptions", "organizations_url": "https://api.github.com/users/DEKHTIARJonathan/orgs", "repos_url": "https://api.github.com/users/DEKHTIARJonathan/repos", "events_url": "https://api.github.com/users/DEKHTIARJonathan/events{/privacy}", "received_events_url": "https://api.github.com/users/DEKHTIARJonathan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "edloper", "id": 5790348, "node_id": "MDQ6VXNlcjU3OTAzNDg=", "avatar_url": "https://avatars1.githubusercontent.com/u/5790348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edloper", "html_url": "https://github.com/edloper", "followers_url": "https://api.github.com/users/edloper/followers", "following_url": "https://api.github.com/users/edloper/following{/other_user}", "gists_url": "https://api.github.com/users/edloper/gists{/gist_id}", "starred_url": "https://api.github.com/users/edloper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edloper/subscriptions", "organizations_url": "https://api.github.com/users/edloper/orgs", "repos_url": "https://api.github.com/users/edloper/repos", "events_url": "https://api.github.com/users/edloper/events{/privacy}", "received_events_url": "https://api.github.com/users/edloper/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "edloper", "id": 5790348, "node_id": "MDQ6VXNlcjU3OTAzNDg=", "avatar_url": "https://avatars1.githubusercontent.com/u/5790348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edloper", "html_url": "https://github.com/edloper", "followers_url": "https://api.github.com/users/edloper/followers", "following_url": "https://api.github.com/users/edloper/following{/other_user}", "gists_url": "https://api.github.com/users/edloper/gists{/gist_id}", "starred_url": "https://api.github.com/users/edloper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edloper/subscriptions", "organizations_url": "https://api.github.com/users/edloper/orgs", "repos_url": "https://api.github.com/users/edloper/repos", "events_url": "https://api.github.com/users/edloper/events{/privacy}", "received_events_url": "https://api.github.com/users/edloper/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-08-12T14:28:27Z", "updated_at": "2019-12-12T19:36:42Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "Let suppose the following context:\r\n\r\n```python\r\nragged_tensor = tf.ragged.constant(\r\n    [['All', 'the', 'world', 'is', 'a', 'stage'],\r\n    ['And', 'all', 'the', 'men', 'and', 'women', 'merely', 'players'],\r\n    ['They', 'have', 'their', 'exits', 'and', 'their', 'entrances']]\r\n)\r\n\r\nprint(isinstance(ragged_tensor, tf.RaggedTensor))   # True\r\n\r\ntf.shape(ragged_tensor)[0]   # Should return \"3\"\r\n\r\n>>> TypeError: Failed to convert object of type \r\n<class 'tensorflow.python.ops.ragged.ragged_tensor.RaggedTensor'> to Tensor. \r\nContents: tf.RaggedTensor(\r\n    values=Tensor(\"RaggedConstant/values:0\", shape=(21,), dtype=string), \r\n    row_splits=Tensor(\"RaggedConstant/Const:0\", shape=(4,), dtype=int64)\r\n). \r\nConsider casting elements to a supported type.\r\n\r\n# To obtain the information, one shall call the following:\r\nragged_tensor.bounding_shape()[0]\r\n```\r\n\r\nWe should merge the two functionalities into TF.Shape and raise a warning/exception in case someone tries to evaluate a ragged dimension."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31543", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31543/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31543/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31543/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31543", "id": 479655089, "node_id": "MDU6SXNzdWU0Nzk2NTUwODk=", "number": 31543, "title": "Interrelations of collections and scope counts are not clear from documentation", "user": {"login": "Uiuran", "id": 1892703, "node_id": "MDQ6VXNlcjE4OTI3MDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/1892703?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Uiuran", "html_url": "https://github.com/Uiuran", "followers_url": "https://api.github.com/users/Uiuran/followers", "following_url": "https://api.github.com/users/Uiuran/following{/other_user}", "gists_url": "https://api.github.com/users/Uiuran/gists{/gist_id}", "starred_url": "https://api.github.com/users/Uiuran/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Uiuran/subscriptions", "organizations_url": "https://api.github.com/users/Uiuran/orgs", "repos_url": "https://api.github.com/users/Uiuran/repos", "events_url": "https://api.github.com/users/Uiuran/events{/privacy}", "received_events_url": "https://api.github.com/users/Uiuran/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-08-12T13:46:38Z", "updated_at": "2019-08-21T21:35:33Z", "closed_at": null, "author_association": "NONE", "body": "Thank you for submitting a TensorFlow documentation issue. Per our GitHub\r\npolicy, we only address code/doc bugs, performance issues, feature requests, and\r\nbuild/installation issues on GitHub.\r\n\r\nThe TensorFlow docs are open source! To get involved, read the documentation\r\ncontributor guide: https://www.tensorflow.org/community/contribute/docs\r\n\r\n## URL(s) with the issue:\r\nhttps://www.tensorflow.org/api_docs/python/tf/GraphKeys\r\n\r\n## Description of issue (what needs changing):\r\n\r\nThe GraphKeys doc is lacking explanation of ('__variable_store',) and ('__varscope',) keys relation to the others collections e to the variable creation in in a variable scope context.\r\nIn my modelling, since iam building a dnn from scratch, its cond sine-qua-non to estimate memory usage like given in this  for VGGNet \r\nhttp://cs231n.github.io/convolutional-networks/#case\r\n\r\nHowever to me its not clear which tensors summup the computation memory allocations (even if it initializes in the runtime, you should be able to pre-calculate the estimative from the graph builted, before running).\r\n\r\nSo iam able to realize the relations of scopes counting, variable creation and using, will be hard to do such kind of memory estimation function.\r\n\r\nToday iam using ._collections['variables'], i think it subsums the variables used in any session of training.\r\n\r\n### Clear description\r\n\r\nCollections are created in the modelling process with the intent of variable management for some functional reason. The developer must have a clear image of which is the intent of each collection and the inter-relation of them (this is somewhat done in GraphKeys, but the mentioned keys are lacking).\r\n\r\n### Submit a pull request?\r\n\r\nAre you planning to also submit a pull request to fix the issue? See the docs\r\ncontributor guide: https://www.tensorflow.org/community/contribute/docs and the\r\ndocs style guide: https://www.tensorflow.org/community/contribute/docs_style\r\n\r\n### More Info\r\n\r\nI have seem the RFC and know that the 2.0beta Variable became abs class and the management and implementation is more flexible, but now i dont have time to migrate the code, so i think this is stuff is good to keep-up updated (if it is possible and desirable by TFlow team), more people may be in the same condition ."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31542", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31542/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31542/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31542/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31542", "id": 479654833, "node_id": "MDU6SXNzdWU0Nzk2NTQ4MzM=", "number": 31542, "title": "Ploting Gradients to Tensorboard and Console", "user": {"login": "SPP3000", "id": 9450391, "node_id": "MDQ6VXNlcjk0NTAzOTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/9450391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SPP3000", "html_url": "https://github.com/SPP3000", "followers_url": "https://api.github.com/users/SPP3000/followers", "following_url": "https://api.github.com/users/SPP3000/following{/other_user}", "gists_url": "https://api.github.com/users/SPP3000/gists{/gist_id}", "starred_url": "https://api.github.com/users/SPP3000/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SPP3000/subscriptions", "organizations_url": "https://api.github.com/users/SPP3000/orgs", "repos_url": "https://api.github.com/users/SPP3000/repos", "events_url": "https://api.github.com/users/SPP3000/events{/privacy}", "received_events_url": "https://api.github.com/users/SPP3000/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 284285184, "node_id": "MDU6TGFiZWwyODQyODUxODQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tensorboard", "name": "comp:tensorboard", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "nfelt", "id": 710113, "node_id": "MDQ6VXNlcjcxMDExMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/710113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nfelt", "html_url": "https://github.com/nfelt", "followers_url": "https://api.github.com/users/nfelt/followers", "following_url": "https://api.github.com/users/nfelt/following{/other_user}", "gists_url": "https://api.github.com/users/nfelt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nfelt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nfelt/subscriptions", "organizations_url": "https://api.github.com/users/nfelt/orgs", "repos_url": "https://api.github.com/users/nfelt/repos", "events_url": "https://api.github.com/users/nfelt/events{/privacy}", "received_events_url": "https://api.github.com/users/nfelt/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nfelt", "id": 710113, "node_id": "MDQ6VXNlcjcxMDExMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/710113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nfelt", "html_url": "https://github.com/nfelt", "followers_url": "https://api.github.com/users/nfelt/followers", "following_url": "https://api.github.com/users/nfelt/following{/other_user}", "gists_url": "https://api.github.com/users/nfelt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nfelt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nfelt/subscriptions", "organizations_url": "https://api.github.com/users/nfelt/orgs", "repos_url": "https://api.github.com/users/nfelt/repos", "events_url": "https://api.github.com/users/nfelt/events{/privacy}", "received_events_url": "https://api.github.com/users/nfelt/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-08-12T13:46:08Z", "updated_at": "2019-10-25T05:56:58Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Windows 10 Pro Version 1903\r\n- TensorFlow installed from pip in Anaconda:\r\n- TensorFlow version 2.0.0-beta1 (gpu)\r\n- Python version: 3.7.3 (default, Apr 24 2019, 15:29:51) [MSC v.1915 64 bit (AMD64)]\r\n- CUDA/cuDNN version: Cuda compilation tools, release 10.0, V10.0.130\r\n- GPU model and memory:  GeForce GTX 980 Ti major: 5 minor: 2 memoryClockRate(GHz): 1.2785\r\n\r\n**Describe the current behavior**\r\nProgram ends with an unclear error, while trying to retrieve the bias gradients of the two dense layers in the model.\r\n\r\n* Writing to tensorboard (*console parameter = False*)\r\n```\r\nTrain on 60000 samples\r\nEpoch 1/5\r\n2019-08-12 15:24:48.713962: I tensorflow/core/profiler/lib/profiler_session.cc:174] Profiler session started.\r\n2019-08-12 15:24:48.718362: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library cupti64_100.dll\r\n   32/60000 [..............................] - ETA: 12:48 - loss: 2.2374 - accuracy: 0.18752019-08-12 15:24:48.840661: I tensorflow/core/platform/default/device_tracer.cc:641] Collecting 81 kernel records, 14 memcpy rec\r\nords.\r\n59744/60000 [============================>.] - ETA: 0s - loss: 0.2971 - accuracy: 0.9123Traceback (most recent call last):\r\n  File \"C:/Users/Harald Schweiger/PycharmProjects/Gradients/gradient_test.py\", line 42, in <module>\r\n    model.fit(x_train, y_train, epochs=5, callbacks=[gradient_cb, tensorboard_cb])\r\n  File \"C:\\Users\\Harald Schweiger\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training.py\", line 643, in fit\r\n    use_multiprocessing=use_multiprocessing)\r\n  File \"C:\\Users\\Harald Schweiger\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training_arrays.py\", line 664, in fit\r\n    steps_name='steps_per_epoch')\r\n  File \"C:\\Users\\Harald Schweiger\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training_arrays.py\", line 439, in model_iteration\r\n    callbacks.on_epoch_end(epoch, epoch_logs)\r\n  File \"C:\\Users\\Harald Schweiger\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\keras\\callbacks.py\", line 295, in on_epoch_end\r\n    callback.on_epoch_end(epoch, logs)\r\n  File \"C:/Users/Harald Schweiger/PycharmProjects/Gradients/gradient_test.py\", line 32, in on_epoch_end\r\n    tf.summary.histogram(t.name, data=t)\r\n  File \"C:\\Users\\Harald Schweiger\\Anaconda3\\lib\\site-packages\\tensorboard\\plugins\\histogram\\summary_v2.py\", line 77, in histogram\r\n    tensor = _buckets(data, bucket_count=buckets)\r\n  File \"C:\\Users\\Harald Schweiger\\Anaconda3\\lib\\site-packages\\tensorboard\\plugins\\histogram\\summary_v2.py\", line 139, in _buckets\r\n    return tf.cond(is_empty, when_empty, when_nonempty)\r\n  File \"C:\\Users\\Harald Schweiger\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\control_flow_ops.py\", line 1382, in cond_for_tf_v2\r\n    return cond(pred, true_fn=true_fn, false_fn=false_fn, strict=True, name=name)\r\n  File \"C:\\Users\\Harald Schweiger\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\util\\deprecation.py\", line 507, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"C:\\Users\\Harald Schweiger\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\control_flow_ops.py\", line 1177, in cond\r\n    result = false_fn()\r\n  File \"C:\\Users\\Harald Schweiger\\Anaconda3\\lib\\site-packages\\tensorboard\\plugins\\histogram\\summary_v2.py\", line 137, in when_nonempty\r\n    return tf.cond(is_singular, when_singular, when_nonsingular)\r\n  File \"C:\\Users\\Harald Schweiger\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\control_flow_ops.py\", line 1382, in cond_for_tf_v2\r\n    return cond(pred, true_fn=true_fn, false_fn=false_fn, strict=True, name=name)\r\n  File \"C:\\Users\\Harald Schweiger\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\util\\deprecation.py\", line 507, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"C:\\Users\\Harald Schweiger\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\ops\\control_flow_ops.py\", line 1174, in cond\r\n    if pred:\r\n  File \"C:\\Users\\Harald Schweiger\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 698, in __bool__\r\n    raise TypeError(\"Using a `tf.Tensor` as a Python `bool` is not allowed. \"\r\nTypeError: Using a `tf.Tensor` as a Python `bool` is not allowed. Use `if t is not None:` instead of `if t:` to test if a tensor is defined, and use TensorFlow ops such as tf.cond to execute subgraphs conditioned on the\r\n value of a tensor.\r\n```\r\n\r\n* Priniting bias gradients to console(*console parameter = True*)\r\n```\r\nInstructions for updating:\r\nUse tf.where in 2.0, which has the same broadcast rule as np.where\r\nTrain on 60000 samples\r\nEpoch 1/5\r\n2019-08-12 15:26:01.265400: I tensorflow/core/profiler/lib/profiler_session.cc:174] Profiler session started.\r\n2019-08-12 15:26:01.268877: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library cupti64_100.dll\r\n   32/60000 [..............................] - ETA: 12:53 - loss: 2.4094 - accuracy: 0.09382019-08-12 15:26:01.391432: I tensorflow/core/platform/default/device_tracer.cc:641] Collecting 81 kernel records, 14 memcpy rec\r\nords.\r\n59776/60000 [============================>.] - ETA: 0s - loss: 0.3015 - accuracy: 0.9121Tensor: Adam/gradients_1/dense128/BiasAdd_grad/BiasAddGrad:0\r\nTraceback (most recent call last):\r\n  File \"C:/Users/Harald Schweiger/PycharmProjects/Gradients/gradient_test.py\", line 42, in <module>\r\n    model.fit(x_train, y_train, epochs=5, callbacks=[gradient_cb, tensorboard_cb])\r\n  File \"C:\\Users\\Harald Schweiger\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training.py\", line 643, in fit\r\n    use_multiprocessing=use_multiprocessing)\r\n  File \"C:\\Users\\Harald Schweiger\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training_arrays.py\", line 664, in fit\r\n    steps_name='steps_per_epoch')\r\n  File \"C:\\Users\\Harald Schweiger\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training_arrays.py\", line 439, in model_iteration\r\n    callbacks.on_epoch_end(epoch, epoch_logs)\r\n  File \"C:\\Users\\Harald Schweiger\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\keras\\callbacks.py\", line 295, in on_epoch_end\r\n    callback.on_epoch_end(epoch, logs)\r\n  File \"C:/Users/Harald Schweiger/PycharmProjects/Gradients/gradient_test.py\", line 30, in on_epoch_end\r\n    print('{}\\n'.format(K.get_value(t)[:10]))\r\n  File \"C:\\Users\\Harald Schweiger\\Anaconda3\\lib\\site-packages\\tensorflow\\python\\keras\\backend.py\", line 2981, in get_value\r\n    return x.numpy()\r\nAttributeError: 'Tensor' object has no attribute 'numpy'\r\n```\r\n\r\n**Describe the expected behavior**\r\n\r\n* Writing to tensorboard (*console parameter = False*)\r\nTensorboard event file which contains the distribution and histograms of gradients \r\nderived from the total loss that has been accumulated over the last epoch.\r\n\r\n* Priniting to console(*console parameter = True*)\r\nThe program should print the first 10 gradient bias values of each of the two dense layer\r\nto the console.\r\n\r\nIf the exceptions produced here are the expected behavior due to errors in the developers code\r\na more meaningful error message would be appriciated. \r\nIn that case a correction of the code would be useful for me and other people as well who had to update their code as the *write_grads* parameter has been removed from the tensorboard callback in version 2.0.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\nfrom tensorflow.python.keras import backend as K\r\n\r\nmnist = tf.keras.datasets.mnist\r\n\r\n(x_train, y_train), (x_test, y_test) = mnist.load_data()\r\nx_train, x_test = x_train / 255.0, x_test / 255.0\r\n\r\nmodel = tf.keras.models.Sequential([\r\n  tf.keras.layers.Flatten(input_shape=(28, 28)),\r\n  tf.keras.layers.Dense(128, activation='relu', name='dense128'),\r\n  tf.keras.layers.Dropout(0.2),\r\n  tf.keras.layers.Dense(10, activation='softmax', name='dense10')\r\n])\r\n\r\nmodel.compile(optimizer='adam', loss='sparse_categorical_crossentropy', metrics=['accuracy'])\r\n\r\n\r\nclass GradientCallback(tf.keras.callbacks.Callback):\r\n    console = True\r\n\r\n    def on_epoch_end(self, epoch, logs=None):\r\n        weights = [w for w in self.model.trainable_weights if 'dense' in w.name and 'bias' in w.name]\r\n        loss = self.model.total_loss\r\n        optimizer = self.model.optimizer\r\n        gradients = optimizer.get_gradients(loss, weights)\r\n        for t in gradients:\r\n            if self.console:\r\n                print('Tensor: {}'.format(t.name))\r\n                print('{}\\n'.format(K.get_value(t)[:10]))\r\n            else:\r\n                tf.summary.histogram(t.name, data=t)\r\n\r\n\r\nfile_writer = tf.summary.create_file_writer(\"./metrics\")\r\nfile_writer.set_as_default()\r\n\r\n# write_grads has been removed\r\ntensorboard_cb = tf.keras.callbacks.TensorBoard(histogram_freq=1, write_grads=True)\r\ngradient_cb = GradientCallback()\r\n\r\nmodel.fit(x_train, y_train, epochs=5, callbacks=[gradient_cb, tensorboard_cb])\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31540", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31540/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31540/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31540/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31540", "id": 479640972, "node_id": "MDU6SXNzdWU0Nzk2NDA5NzI=", "number": 31540, "title": "Tensorflow 2 creating custom dataset ", "user": {"login": "ArashJavan", "id": 5918827, "node_id": "MDQ6VXNlcjU5MTg4Mjc=", "avatar_url": "https://avatars1.githubusercontent.com/u/5918827?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ArashJavan", "html_url": "https://github.com/ArashJavan", "followers_url": "https://api.github.com/users/ArashJavan/followers", "following_url": "https://api.github.com/users/ArashJavan/following{/other_user}", "gists_url": "https://api.github.com/users/ArashJavan/gists{/gist_id}", "starred_url": "https://api.github.com/users/ArashJavan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ArashJavan/subscriptions", "organizations_url": "https://api.github.com/users/ArashJavan/orgs", "repos_url": "https://api.github.com/users/ArashJavan/repos", "events_url": "https://api.github.com/users/ArashJavan/events{/privacy}", "received_events_url": "https://api.github.com/users/ArashJavan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rsepassi", "id": 1115739, "node_id": "MDQ6VXNlcjExMTU3Mzk=", "avatar_url": "https://avatars3.githubusercontent.com/u/1115739?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsepassi", "html_url": "https://github.com/rsepassi", "followers_url": "https://api.github.com/users/rsepassi/followers", "following_url": "https://api.github.com/users/rsepassi/following{/other_user}", "gists_url": "https://api.github.com/users/rsepassi/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsepassi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsepassi/subscriptions", "organizations_url": "https://api.github.com/users/rsepassi/orgs", "repos_url": "https://api.github.com/users/rsepassi/repos", "events_url": "https://api.github.com/users/rsepassi/events{/privacy}", "received_events_url": "https://api.github.com/users/rsepassi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rsepassi", "id": 1115739, "node_id": "MDQ6VXNlcjExMTU3Mzk=", "avatar_url": "https://avatars3.githubusercontent.com/u/1115739?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsepassi", "html_url": "https://github.com/rsepassi", "followers_url": "https://api.github.com/users/rsepassi/followers", "following_url": "https://api.github.com/users/rsepassi/following{/other_user}", "gists_url": "https://api.github.com/users/rsepassi/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsepassi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsepassi/subscriptions", "organizations_url": "https://api.github.com/users/rsepassi/orgs", "repos_url": "https://api.github.com/users/rsepassi/repos", "events_url": "https://api.github.com/users/rsepassi/events{/privacy}", "received_events_url": "https://api.github.com/users/rsepassi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-08-12T13:17:47Z", "updated_at": "2019-10-30T15:13:48Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 2.0.0-beta\r\n- Are you willing to contribute it (Yes/No): yes\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nIMO there is currently not a really clean way to build an own dataset by using/subclassing the tf.data.Dataset-class. Specially for datasets which have more complex structure as [ICDAR](https://rrc.cvc.uab.es/?ch=4), here the labels are made of text-files with bounding-boxes and transcripts. In these cases even tensorflow_datasets can not be used in a straight way as described [here] (https://www.tensorflow.org/datasets/add_dataset).\r\n\r\nSo i would like to know what is actually the correct procedure to use the Dataset-Api for creating a custom dataset? \r\n\r\n**Will this change the current api? How?**\r\n\r\n**Who will benefit with this feature?**\r\nMost of object detection tasks\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31531", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31531/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31531/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31531/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31531", "id": 479521540, "node_id": "MDU6SXNzdWU0Nzk1MjE1NDA=", "number": 31531, "title": "Error when using batch renormalisation option under a strategy", "user": {"login": "ahmadsalim", "id": 1647846, "node_id": "MDQ6VXNlcjE2NDc4NDY=", "avatar_url": "https://avatars0.githubusercontent.com/u/1647846?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ahmadsalim", "html_url": "https://github.com/ahmadsalim", "followers_url": "https://api.github.com/users/ahmadsalim/followers", "following_url": "https://api.github.com/users/ahmadsalim/following{/other_user}", "gists_url": "https://api.github.com/users/ahmadsalim/gists{/gist_id}", "starred_url": "https://api.github.com/users/ahmadsalim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ahmadsalim/subscriptions", "organizations_url": "https://api.github.com/users/ahmadsalim/orgs", "repos_url": "https://api.github.com/users/ahmadsalim/repos", "events_url": "https://api.github.com/users/ahmadsalim/events{/privacy}", "received_events_url": "https://api.github.com/users/ahmadsalim/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-08-12T08:23:29Z", "updated_at": "2020-01-13T13:48:19Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS: Windows 10\r\n- TensorFlow installed from (source or binary): tensorflow-gpu binary on pip\r\n- TensorFlow version (use command below): 1.14\r\n- Python version: 3.6.8\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n**Describe the current behavior**\r\nWhen I try to use `renorm=True` with `tf.keras.layers.BatchNormalization` under `tf.distribute.MirroredStrategy` I get the following error: `handle` is not available outside the replica context or a `tf.distribute.Strategy.update()` call.\r\n\r\n\r\n**Describe the expected behavior**\r\nI can use batch renormalisation under mirrored strategy.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\n\r\nstrat = tf.distribute.MirroredStrategy()\r\nwith strat.scope():\r\n  inp = tf.keras.Input((28, 28))\r\n  tf.keras.layers.BatchNormalization(renorm=True)(inp)\r\n```\r\n\r\n**Other info / logs**\r\n\r\nThe following is the stack trace:\r\n```\r\n<ipython-input-3-d17cda041220> in <module>()\r\n      2 with strat.scope():\r\n      3   inp = tf.keras.Input((28, 28))\r\n----> 4   tf.keras.layers.BatchNormalization(renorm=True)(inp)\r\n\r\n16 frames\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/engine/base_layer.py in __call__(self, inputs, *args, **kwargs)\r\n    632                     outputs = base_layer_utils.mark_as_return(outputs, acd)\r\n    633                 else:\r\n--> 634                   outputs = call_fn(inputs, *args, **kwargs)\r\n    635 \r\n    636             except TypeError as e:\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/layers/normalization.py in call(self, inputs, training)\r\n    734       if self.renorm:\r\n    735         r, d, new_mean, new_variance = self._renorm_correction_and_moments(\r\n--> 736             new_mean, new_variance, training, inputs_size)\r\n    737         # When training, the normalized values (say, x) will be transformed as\r\n    738         # x * gamma + beta without renorm, and (x * r + d) * gamma + beta\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/layers/normalization.py in _renorm_correction_and_moments(self, mean, variance, training, inputs_size)\r\n    598     new_mean = _update_renorm_variable(self.renorm_mean,\r\n    599                                        self.renorm_mean_weight, mean,\r\n--> 600                                        inputs_size)\r\n    601     new_stddev = _update_renorm_variable(self.renorm_stddev,\r\n    602                                          self.renorm_stddev_weight, stddev,\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/layers/normalization.py in _update_renorm_variable(var, weight, value, inputs_size)\r\n    593       def _fake_update():\r\n    594         return array_ops.identity(var)\r\n--> 595       return tf_utils.smart_cond(training, _do_update, _fake_update)\r\n    596 \r\n    597     # TODO(yuefengz): colocate the operations\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/utils/tf_utils.py in smart_cond(pred, true_fn, false_fn, name)\r\n     56         pred, true_fn=true_fn, false_fn=false_fn, name=name)\r\n     57   return smart_module.smart_cond(\r\n---> 58       pred, true_fn=true_fn, false_fn=false_fn, name=name)\r\n     59 \r\n     60 \r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/smart_cond.py in smart_cond(pred, true_fn, false_fn, name)\r\n     57   else:\r\n     58     return control_flow_ops.cond(pred, true_fn=true_fn, false_fn=false_fn,\r\n---> 59                                  name=name)\r\n     60 \r\n     61 \r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/util/deprecation.py in new_func(*args, **kwargs)\r\n    505                 'in a future version' if date is None else ('after %s' % date),\r\n    506                 instructions)\r\n--> 507       return func(*args, **kwargs)\r\n    508 \r\n    509     doc = _add_deprecated_arg_notice_to_docstring(\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/control_flow_ops.py in cond(pred, true_fn, false_fn, strict, name, fn1, fn2)\r\n   1975     try:\r\n   1976       context_t.Enter()\r\n-> 1977       orig_res_t, res_t = context_t.BuildCondBranch(true_fn)\r\n   1978       if orig_res_t is None:\r\n   1979         raise ValueError(\"true_fn must have a return value.\")\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/control_flow_ops.py in BuildCondBranch(self, fn)\r\n   1812     \"\"\"Add the subgraph defined by fn() to the graph.\"\"\"\r\n   1813     pre_summaries = ops.get_collection(ops.GraphKeys._SUMMARY_COLLECTION)  # pylint: disable=protected-access\r\n-> 1814     original_result = fn()\r\n   1815     post_summaries = ops.get_collection(ops.GraphKeys._SUMMARY_COLLECTION)  # pylint: disable=protected-access\r\n   1816     if len(post_summaries) > len(pre_summaries):\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/layers/normalization.py in _do_update()\r\n    582           weight_value = array_ops.constant(1., dtype=weight.dtype)\r\n    583         new_var = self._assign_moving_average(var, value, self.renorm_momentum,\r\n--> 584                                               inputs_size)\r\n    585         new_weight = self._assign_moving_average(weight, weight_value,\r\n    586                                                  self.renorm_momentum,\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/layers/normalization.py in _assign_moving_average(self, variable, value, momentum, inputs_size)\r\n    447   def _assign_moving_average(self, variable, value, momentum, inputs_size):\r\n    448     with K.name_scope('AssignMovingAvg') as scope:\r\n--> 449       with ops.colocate_with(variable):\r\n    450         decay = ops.convert_to_tensor(1.0 - momentum, name='decay')\r\n    451         if decay.dtype != variable.dtype.base_dtype:\r\n\r\n/usr/lib/python3.6/contextlib.py in __enter__(self)\r\n     79     def __enter__(self):\r\n     80         try:\r\n---> 81             return next(self.gen)\r\n     82         except StopIteration:\r\n     83             raise RuntimeError(\"generator didn't yield\") from None\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/ops.py in _colocate_with_for_gradient(self, op, gradient_uid, ignore_existing)\r\n   4398   def _colocate_with_for_gradient(self, op, gradient_uid,\r\n   4399                                   ignore_existing=False):\r\n-> 4400     with self.colocate_with(op, ignore_existing):\r\n   4401       if gradient_uid is not None and self._control_flow_context is not None:\r\n   4402         self._control_flow_context.EnterGradientColocation(op, gradient_uid)\r\n\r\n/usr/lib/python3.6/contextlib.py in __enter__(self)\r\n     79     def __enter__(self):\r\n     80         try:\r\n---> 81             return next(self.gen)\r\n     82         except StopIteration:\r\n     83             raise RuntimeError(\"generator didn't yield\") from None\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/ops.py in colocate_with(self, op, ignore_existing)\r\n   4447       raise ValueError(\"Trying to reset colocation (op is None) but \"\r\n   4448                        \"ignore_existing is not True\")\r\n-> 4449     op = _op_to_colocate_with(op)\r\n   4450 \r\n   4451     # By default, colocate_with resets the device function stack,\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/ops.py in _op_to_colocate_with(v)\r\n   6714   # happen soon, perhaps this hack to work around the circular\r\n   6715   # import dependency is acceptable.\r\n-> 6716   if hasattr(v, \"handle\") and hasattr(v.handle, \"op\") and isinstance(\r\n   6717       v.handle.op, Operation):\r\n   6718     return v.handle.op\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/distribute/values.py in handle(self)\r\n    641       device = distribute_lib.get_update_device()\r\n    642       if device is None:\r\n--> 643         raise ValueError(\"`handle` is not available outside the replica context\"\r\n    644                          \" or a `tf.distribute.Strategy.update()` call.\")\r\n    645     return self.get(device=device).handle\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31526", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31526/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31526/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31526/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31526", "id": 479455214, "node_id": "MDU6SXNzdWU0Nzk0NTUyMTQ=", "number": 31526, "title": "TFLite Metal GPU delegate: Add operator does not support broadcasting", "user": {"login": "LK", "id": 975916, "node_id": "MDQ6VXNlcjk3NTkxNg==", "avatar_url": "https://avatars2.githubusercontent.com/u/975916?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LK", "html_url": "https://github.com/LK", "followers_url": "https://api.github.com/users/LK/followers", "following_url": "https://api.github.com/users/LK/following{/other_user}", "gists_url": "https://api.github.com/users/LK/gists{/gist_id}", "starred_url": "https://api.github.com/users/LK/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LK/subscriptions", "organizations_url": "https://api.github.com/users/LK/orgs", "repos_url": "https://api.github.com/users/LK/repos", "events_url": "https://api.github.com/users/LK/events{/privacy}", "received_events_url": "https://api.github.com/users/LK/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-08-12T03:37:27Z", "updated_at": "2019-11-09T06:22:00Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes.\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): iOS 12.3.1\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: iPhone Xr\r\n- TensorFlow installed from (source or binary): binary, but TFLite compiled from source\r\n- TensorFlow version (use command below): b'v1.13.2-5-g04256c89d8' 1.13.2\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source): 0.26.1\r\n- GCC/Compiler version (if compiling from source): clang-1001.0.46.4\r\n- CUDA/cuDNN version: n/a\r\n- GPU model and memory: iPhone Xr\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nRunning the single-operation model given below using the Metal GPU delegate gives a different output than when executing on CPU or with the full Tensorflow interpreter.\r\n\r\n**Describe the expected behavior**\r\nThe Metal GPU delegate gives the same output as the CPU interpreter.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n[model-broken.tflite.zip](https://github.com/tensorflow/tensorflow/files/3490983/model-broken.tflite.zip)\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31524", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31524/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31524/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31524/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31524", "id": 479447964, "node_id": "MDU6SXNzdWU0Nzk0NDc5NjQ=", "number": 31524, "title": " how to replace the wrong node definitions in the frozen graph when importing frozen graph with batchnorm", "user": {"login": "bitwanghe", "id": 49185650, "node_id": "MDQ6VXNlcjQ5MTg1NjUw", "avatar_url": "https://avatars1.githubusercontent.com/u/49185650?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bitwanghe", "html_url": "https://github.com/bitwanghe", "followers_url": "https://api.github.com/users/bitwanghe/followers", "following_url": "https://api.github.com/users/bitwanghe/following{/other_user}", "gists_url": "https://api.github.com/users/bitwanghe/gists{/gist_id}", "starred_url": "https://api.github.com/users/bitwanghe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bitwanghe/subscriptions", "organizations_url": "https://api.github.com/users/bitwanghe/orgs", "repos_url": "https://api.github.com/users/bitwanghe/repos", "events_url": "https://api.github.com/users/bitwanghe/events{/privacy}", "received_events_url": "https://api.github.com/users/bitwanghe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-08-12T02:44:47Z", "updated_at": "2019-08-14T09:44:22Z", "closed_at": null, "author_association": "NONE", "body": "there is a confusion when i try to do as the answers in the question #3628, and could anyone give me a proper solution for it?\r\nhe says:\r\n''\r\nAn ugly way to get it working:\r\nmanually replace the wrong node definitions in the frozen graph\r\nRefSwitch --> Switch + add '/read' to the input names\r\nAssignSub --> Sub + remove use_locking attributes\r\n''\r\n\r\nbut, I printed the nodes in my net,:\r\n''\r\ninputs\r\nlabels\r\nkeep_prob\r\nMobilenetV2/input\r\nMobilenetV2/Conv/weights/Initializer/truncated_normal/shape\r\nMobilenetV2/Conv/weights/Initializer/truncated_normal/mean\r\nMobilenetV2/Conv/weights/Initializer/truncated_normal/stddev\r\nMobilenetV2/Conv/weights/Initializer/truncated_normal/TruncatedNormal\r\nMobilenetV2/Conv/weights/Initializer/truncated_normal/mul\r\nMobilenetV2/Conv/weights/Initializer/truncated_normal\r\nMobilenetV2/Conv/weights\r\nMobilenetV2/Conv/weights/Assign\r\nMobilenetV2/Conv/weights/read\r\nMobilenetV2/Conv/kernel/Regularizer/l2_regularizer/scale\r\nMobilenetV2/Conv/kernel/Regularizer/l2_regularizer/L2Loss\r\nMobilenetV2/Conv/kernel/Regularizer/l2_regularizer\r\nMobilenetV2/Conv/dilation_rate\r\nMobilenetV2/Conv/Conv2D\r\nMobilenetV2/Conv/BatchNorm/gamma/Initializer/ones\r\nMobilenetV2/Conv/BatchNorm/gamma\r\nMobilenetV2/Conv/BatchNorm/gamma/Assign\r\nMobilenetV2/Conv/BatchNorm/gamma/read\r\nMobilenetV2/Conv/BatchNorm/beta/Initializer/zeros\r\nMobilenetV2/Conv/BatchNorm/beta\r\nMobilenetV2/Conv/BatchNorm/beta/Assign\r\nMobilenetV2/Conv/BatchNorm/beta/read\r\nMobilenetV2/Conv/BatchNorm/moving_mean/Initializer/zeros\r\nMobilenetV2/Conv/BatchNorm/moving_mean\r\nMobilenetV2/Conv/BatchNorm/moving_mean/Assign\r\nMobilenetV2/Conv/BatchNorm/moving_mean/read\r\nMobilenetV2/Conv/BatchNorm/moving_variance/Initializer/ones\r\nMobilenetV2/Conv/BatchNorm/moving_variance\r\nMobilenetV2/Conv/BatchNorm/moving_variance/Assign\r\nMobilenetV2/Conv/BatchNorm/moving_variance/read\r\nMobilenetV2/Conv/BatchNorm/Const\r\nMobilenetV2/Conv/BatchNorm/Const_1\r\nMobilenetV2/Conv/BatchNorm/FusedBatchNorm\r\nMobilenetV2/Conv/BatchNorm/Const_2\r\nMobilenetV2/Conv/BatchNorm/AssignMovingAvg/sub/x\r\nMobilenetV2/Conv/BatchNorm/AssignMovingAvg/sub\r\nMobilenetV2/Conv/BatchNorm/AssignMovingAvg/sub_1\r\nMobilenetV2/Conv/BatchNorm/AssignMovingAvg/mul\r\nMobilenetV2/Conv/BatchNorm/AssignMovingAvg\r\nMobilenetV2/Conv/BatchNorm/AssignMovingAvg_1/sub/x\r\nMobilenetV2/Conv/BatchNorm /AssignMovingAvg_1/sub\r\nMobilenetV2/Conv/BatchNorm/AssignMovingAvg_1/sub_1\r\nMobilenetV2/Conv/BatchNorm/AssignMovingAvg_1/mul\r\nMobilenetV2/Conv/BatchNorm/AssignMovingAvg_1\r\nMobilenetV2/Conv/Relu6\r\nMobilenetV2/expanded_conv/input\r\n''\r\n\r\nbut! the 'nodes.op' of the 'nodes' above donot exist \"RefSwitch\", please do you any suggestions?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31518", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31518/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31518/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31518/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31518", "id": 479361823, "node_id": "MDU6SXNzdWU0NzkzNjE4MjM=", "number": 31518, "title": "saved_model_cli convert hub module to tensorRT model", "user": {"login": "vio-codes", "id": 53267372, "node_id": "MDQ6VXNlcjUzMjY3Mzcy", "avatar_url": "https://avatars2.githubusercontent.com/u/53267372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vio-codes", "html_url": "https://github.com/vio-codes", "followers_url": "https://api.github.com/users/vio-codes/followers", "following_url": "https://api.github.com/users/vio-codes/following{/other_user}", "gists_url": "https://api.github.com/users/vio-codes/gists{/gist_id}", "starred_url": "https://api.github.com/users/vio-codes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vio-codes/subscriptions", "organizations_url": "https://api.github.com/users/vio-codes/orgs", "repos_url": "https://api.github.com/users/vio-codes/repos", "events_url": "https://api.github.com/users/vio-codes/events{/privacy}", "received_events_url": "https://api.github.com/users/vio-codes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1754777628, "node_id": "MDU6TGFiZWwxNzU0Nzc3NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu:tensorrt", "name": "comp:gpu:tensorrt", "color": "ea98ba", "default": false, "description": "Issues specific to TensorRT"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-08-11T11:57:26Z", "updated_at": "2019-12-26T18:34:18Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):Colab Notebook\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:No\r\n- TensorFlow installed from (source or binary): Provided by Colab\r\n- TensorFlow version (use command below): Provided by Colab\r\n- Python version: Provided by Colab\r\n- Bazel version (if compiling from source): Provided by Colab\r\n- GCC/Compiler version (if compiling from source): Provided by Colab\r\n- CUDA/cuDNN version: Provided by Colab\r\n- GPU model and memory: Provided by Colab\r\n\r\n**Describe the current behavior**\r\nI am saving the BigGan-Deep-512 module from the TF hub into a savedModel.\r\nAnd when I try to convert it to a tensorRT module it fails\r\n\r\n**Describe the expected behavior**\r\nI expect that the **convert** should be applicable directly to the hub module.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\nCode to save the hub module to a savedModel:\r\n\r\n```\r\nimport os\r\nimport numpy as np\r\nfrom datetime import datetime\r\n\r\nimport tensorflow as tf\r\nimport tensorflow_hub as hub\r\nfrom tensorflow.python.summary import summary\r\n\r\nprint(tf.__version__)\r\n\r\nwith tf.Graph().as_default():\r\n    module = hub.Module(\"https://tfhub.dev/deepmind/biggan-deep-512/1\")\r\n    initial_inputs = {k: tf.compat.v1.placeholder(v.dtype, v.get_shape().as_list(), k)\r\n                      for k, v in module.get_input_info_dict().items()}\r\n    output = module(initial_inputs)\r\n    print(initial_inputs)\r\n    print(output)\r\n    init_op = tf.group([tf.global_variables_initializer(), tf.tables_initializer()])\r\n    with tf.Session() as session:\r\n        session.run(init_op)\r\n        tf.saved_model.simple_save(\r\n            session,\r\n            \"bg/serving_saved_model\",\r\n            inputs={'z': initial_inputs['z'], 'y': initial_inputs['y'], 'truncation': initial_inputs['truncation']},\r\n            outputs={\"output\": output},\r\n            legacy_init_op=tf.tables_initializer()\r\n        )\r\n```\r\n\r\nBash command to convert to tensorRT model:\r\n\r\n```\r\n%%bash\r\n\r\nsaved_model_dir=bg/serving_saved_model\r\nopt_model_dir=bg/opt_saved_model\r\n\r\nsaved_model_cli convert --dir=${saved_model_dir} --output_dir=${opt_model_dir} --tag_set serve tensorrt --precision_mode FP32 --max_batch_size 1 --is_dynamic_op True\r\n```\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\nHere are the logs: \r\n\r\n```\r\n2019-08-11 11:52:49.646188: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2300000000 Hz\r\n2019-08-11 11:52:49.646774: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x5590ff396140 executing computations on platform Host. Devices:\r\n2019-08-11 11:52:49.646832: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): <undefined>, <undefined>\r\n2019-08-11 11:52:49.651856: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcuda.so.1\r\n2019-08-11 11:52:49.799218: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1005] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-08-11 11:52:49.799757: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x5590ff3979c0 executing computations on platform CUDA. Devices:\r\n2019-08-11 11:52:49.799788: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): Tesla T4, Compute Capability 7.5\r\n2019-08-11 11:52:49.800013: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1005] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-08-11 11:52:49.800421: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 0 with properties: \r\nname: Tesla T4 major: 7 minor: 5 memoryClockRate(GHz): 1.59\r\npciBusID: 0000:00:04.0\r\n2019-08-11 11:52:49.800717: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudart.so.10.0\r\n2019-08-11 11:52:49.801856: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcublas.so.10.0\r\n2019-08-11 11:52:49.803002: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcufft.so.10.0\r\n2019-08-11 11:52:49.803339: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcurand.so.10.0\r\n2019-08-11 11:52:49.804771: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcusolver.so.10.0\r\n2019-08-11 11:52:49.805786: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcusparse.so.10.0\r\n2019-08-11 11:52:49.808901: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudnn.so.7\r\n2019-08-11 11:52:49.809023: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1005] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-08-11 11:52:49.809465: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1005] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-08-11 11:52:49.809790: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1763] Adding visible gpu devices: 0\r\n2019-08-11 11:52:49.814498: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudart.so.10.0\r\n2019-08-11 11:52:49.815576: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1181] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-08-11 11:52:49.815605: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1187]      0 \r\n2019-08-11 11:52:49.815613: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1200] 0:   N \r\n2019-08-11 11:52:49.822976: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1005] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-08-11 11:52:49.823434: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1005] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-08-11 11:52:49.823790: W tensorflow/core/common_runtime/gpu/gpu_bfc_allocator.cc:40] Overriding allow_growth setting because the TF_FORCE_GPU_ALLOW_GROWTH environment variable is set. Original config value was 0.\r\n2019-08-11 11:52:49.823830: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1326] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 13500 MB memory) -> physical GPU (device: 0, name: Tesla T4, pci bus id: 0000:00:04.0, compute capability: 7.5)\r\nWARNING: Logging before flag parsing goes to stderr.\r\nW0811 11:52:49.824687 139988375598976 deprecation.py:323] From /usr/local/lib/python2.7/dist-packages/tensorflow/python/compiler/tensorrt/trt_convert.py:245: load (from tensorflow.python.saved_model.loader_impl) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nThis function will only be available through the v1 compatibility library as tf.compat.v1.saved_model.loader.load or tf.compat.v1.saved_model.load. There will be a new function for importing SavedModels in Tensorflow 2.0.\r\nW0811 11:53:27.486973 139988375598976 deprecation.py:323] From /usr/local/lib/python2.7/dist-packages/tensorflow/python/training/saver.py:1276: checkpoint_exists (from tensorflow.python.training.checkpoint_management) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse standard file APIs to check for files with this prefix.\r\nW0811 11:53:48.502595 139988375598976 deprecation.py:323] From /usr/local/lib/python2.7/dist-packages/tensorflow/python/compiler/tensorrt/trt_convert.py:268: convert_variables_to_constants (from tensorflow.python.framework.graph_util_impl) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse `tf.compat.v1.graph_util.convert_variables_to_constants`\r\nW0811 11:53:48.502814 139988375598976 deprecation.py:323] From /usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/graph_util_impl.py:270: extract_sub_graph (from tensorflow.python.framework.graph_util_impl) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse `tf.compat.v1.graph_util.extract_sub_graph`\r\n2019-08-11 11:53:54.431183: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1005] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-08-11 11:53:54.431681: I tensorflow/core/grappler/devices.cc:55] Number of eligible GPUs (core count >= 8, compute capability >= 0.0): 1\r\n2019-08-11 11:53:54.431812: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\r\n2019-08-11 11:53:54.432418: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1005] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-08-11 11:53:54.432767: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 0 with properties: \r\nname: Tesla T4 major: 7 minor: 5 memoryClockRate(GHz): 1.59\r\npciBusID: 0000:00:04.0\r\n2019-08-11 11:53:54.432835: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudart.so.10.0\r\n2019-08-11 11:53:54.432858: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcublas.so.10.0\r\n2019-08-11 11:53:54.432869: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcufft.so.10.0\r\n2019-08-11 11:53:54.432885: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcurand.so.10.0\r\n2019-08-11 11:53:54.432900: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcusolver.so.10.0\r\n2019-08-11 11:53:54.432910: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcusparse.so.10.0\r\n2019-08-11 11:53:54.432920: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudnn.so.7\r\n2019-08-11 11:53:54.432990: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1005] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-08-11 11:53:54.433378: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1005] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-08-11 11:53:54.433695: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1763] Adding visible gpu devices: 0\r\n2019-08-11 11:53:54.433737: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1181] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-08-11 11:53:54.433754: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1187]      0 \r\n2019-08-11 11:53:54.433762: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1200] 0:   N \r\n2019-08-11 11:53:54.434036: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1005] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-08-11 11:53:54.434450: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1005] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-08-11 11:53:54.434793: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1326] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 13500 MB memory) -> physical GPU (device: 0, name: Tesla T4, pci bus id: 0000:00:04.0, compute capability: 7.5)\r\n2019-08-11 11:54:02.561839: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:716] Optimization results for grappler item: tf_graph\r\n2019-08-11 11:54:02.561909: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   constant folding: Graph size after: 7430 nodes (-10408), 12752 edges (-11753), time = 4901.51221ms.\r\n2019-08-11 11:54:02.561918: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   layout: Graph size after: 7580 nodes (150), 13019 edges (267), time = 683.694ms.\r\n2019-08-11 11:54:02.561924: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   constant folding: Graph size after: 7549 nodes (-31), 12986 edges (-33), time = 1578.22205ms.\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/saved_model_cli\", line 10, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/saved_model_cli.py\", line 909, in main\r\n    args.func(args)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/tools/saved_model_cli.py\", line 680, in convert_with_tensorrt\r\n    output_saved_model_dir=args.output_dir)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/tensorrt/python/trt_convert.py\", line 51, in create_inference_graph\r\n    session_config=session_config)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/compiler/tensorrt/trt_convert.py\", line 1148, in create_inference_graph\r\n    trt_converter.save(output_saved_model_dir)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/compiler/tensorrt/trt_convert.py\", line 825, in save\r\n    super(TrtGraphConverter, self).save(output_saved_model_dir)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/compiler/tensorrt/trt_convert.py\", line 432, in save\r\n    importer.import_graph_def(self._converted_graph_def, name=\"\")\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/util/deprecation.py\", line 507, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/importer.py\", line 431, in import_graph_def\r\n    raise ValueError(str(e))\r\nValueError: Input 0 of node module_apply_default/cond/AssignVariableOp/Switch was passed float from module/prev_truncation:0 incompatible with expected resource.\r\n\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31514", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31514/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31514/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31514/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31514", "id": 479316758, "node_id": "MDU6SXNzdWU0NzkzMTY3NTg=", "number": 31514, "title": "Bug in keras.layers.DepthwiseConv2D when using stride and dilation", "user": {"login": "DavidS3141", "id": 6333870, "node_id": "MDQ6VXNlcjYzMzM4NzA=", "avatar_url": "https://avatars2.githubusercontent.com/u/6333870?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DavidS3141", "html_url": "https://github.com/DavidS3141", "followers_url": "https://api.github.com/users/DavidS3141/followers", "following_url": "https://api.github.com/users/DavidS3141/following{/other_user}", "gists_url": "https://api.github.com/users/DavidS3141/gists{/gist_id}", "starred_url": "https://api.github.com/users/DavidS3141/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DavidS3141/subscriptions", "organizations_url": "https://api.github.com/users/DavidS3141/orgs", "repos_url": "https://api.github.com/users/DavidS3141/repos", "events_url": "https://api.github.com/users/DavidS3141/events{/privacy}", "received_events_url": "https://api.github.com/users/DavidS3141/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-08-10T23:53:06Z", "updated_at": "2019-08-12T20:14:16Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes (attached)\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.13.1\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 10.0/7.4.2\r\n- GPU model and memory: Nvidia Quadro P2000 with 4GB\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nWhen executing the following lines of code, I get an assertion, because the result is not as expected, but actually the values [-29, -19, 1]. I would see how the -19 would be correct if I had a stride of 1 along the y-axis, however, then it would not match up again with the third number being 1 instead of -4. So it is not only that either dilation or stride is ignored, but actually providing for both non-trivial values results in some strange behavior, which I think is actually a bug.\r\n```\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\nkernel = np.array([5, 5], dtype=np.float32).reshape([1, 2, 1, 1])\r\nbias = np.array([-4], dtype=np.float32)\r\nimg = np.array([-2, -1, -3, -2, 3, -1, -2, -1, 2], dtype=np.float32).reshape([1, 1, 9, 1])\r\n\r\nstrides = (2, 2)\r\ndilation = (1, 2)\r\n\r\ndepthconv2d_layer = tf.keras.layers.DepthwiseConv2D(\r\n    depth_multiplier=1,\r\n    kernel_size=(1, 2),\r\n    strides=strides,\r\n    dilation_rate=dilation,\r\n    padding='valid',\r\n    depthwise_initializer=lambda *args, **kwargs: tf.constant(kernel),\r\n    bias_initializer=lambda *args, **kwargs: tf.constant(bias),\r\n)\r\ndepthconv2d_output = depthconv2d_layer(tf.constant(img))\r\n\r\nwith tf.Session() as s:\r\n    s.run(tf.global_variables_initializer())\r\n    result = s.run(depthconv2d_output)\r\n    print(result)\r\n    assert np.all(result == np.array([-29, -4, 1, -4]).reshape(1, 1, 4, 1))\r\n```\r\n**Describe the expected behavior**\r\nNo assertion, as I computed the values by hand and expect them to be right.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n**Other info / logs**\r\nNothing else.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31501", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31501/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31501/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31501/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31501", "id": 479210428, "node_id": "MDU6SXNzdWU0NzkyMTA0Mjg=", "number": 31501, "title": "Can't translate saved model to MLIR", "user": {"login": "albertNod", "id": 52508531, "node_id": "MDQ6VXNlcjUyNTA4NTMx", "avatar_url": "https://avatars1.githubusercontent.com/u/52508531?v=4", "gravatar_id": "", "url": "https://api.github.com/users/albertNod", "html_url": "https://github.com/albertNod", "followers_url": "https://api.github.com/users/albertNod/followers", "following_url": "https://api.github.com/users/albertNod/following{/other_user}", "gists_url": "https://api.github.com/users/albertNod/gists{/gist_id}", "starred_url": "https://api.github.com/users/albertNod/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/albertNod/subscriptions", "organizations_url": "https://api.github.com/users/albertNod/orgs", "repos_url": "https://api.github.com/users/albertNod/repos", "events_url": "https://api.github.com/users/albertNod/events{/privacy}", "received_events_url": "https://api.github.com/users/albertNod/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "antiagainst", "id": 487928, "node_id": "MDQ6VXNlcjQ4NzkyOA==", "avatar_url": "https://avatars1.githubusercontent.com/u/487928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antiagainst", "html_url": "https://github.com/antiagainst", "followers_url": "https://api.github.com/users/antiagainst/followers", "following_url": "https://api.github.com/users/antiagainst/following{/other_user}", "gists_url": "https://api.github.com/users/antiagainst/gists{/gist_id}", "starred_url": "https://api.github.com/users/antiagainst/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antiagainst/subscriptions", "organizations_url": "https://api.github.com/users/antiagainst/orgs", "repos_url": "https://api.github.com/users/antiagainst/repos", "events_url": "https://api.github.com/users/antiagainst/events{/privacy}", "received_events_url": "https://api.github.com/users/antiagainst/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "antiagainst", "id": 487928, "node_id": "MDQ6VXNlcjQ4NzkyOA==", "avatar_url": "https://avatars1.githubusercontent.com/u/487928?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antiagainst", "html_url": "https://github.com/antiagainst", "followers_url": "https://api.github.com/users/antiagainst/followers", "following_url": "https://api.github.com/users/antiagainst/following{/other_user}", "gists_url": "https://api.github.com/users/antiagainst/gists{/gist_id}", "starred_url": "https://api.github.com/users/antiagainst/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antiagainst/subscriptions", "organizations_url": "https://api.github.com/users/antiagainst/orgs", "repos_url": "https://api.github.com/users/antiagainst/repos", "events_url": "https://api.github.com/users/antiagainst/events{/privacy}", "received_events_url": "https://api.github.com/users/antiagainst/received_events", "type": "User", "site_admin": false}, {"login": "jpienaar", "id": 706766, "node_id": "MDQ6VXNlcjcwNjc2Ng==", "avatar_url": "https://avatars2.githubusercontent.com/u/706766?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jpienaar", "html_url": "https://github.com/jpienaar", "followers_url": "https://api.github.com/users/jpienaar/followers", "following_url": "https://api.github.com/users/jpienaar/following{/other_user}", "gists_url": "https://api.github.com/users/jpienaar/gists{/gist_id}", "starred_url": "https://api.github.com/users/jpienaar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jpienaar/subscriptions", "organizations_url": "https://api.github.com/users/jpienaar/orgs", "repos_url": "https://api.github.com/users/jpienaar/repos", "events_url": "https://api.github.com/users/jpienaar/events{/privacy}", "received_events_url": "https://api.github.com/users/jpienaar/received_events", "type": "User", "site_admin": false}, {"login": "silvasean", "id": 24583347, "node_id": "MDQ6VXNlcjI0NTgzMzQ3", "avatar_url": "https://avatars1.githubusercontent.com/u/24583347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/silvasean", "html_url": "https://github.com/silvasean", "followers_url": "https://api.github.com/users/silvasean/followers", "following_url": "https://api.github.com/users/silvasean/following{/other_user}", "gists_url": "https://api.github.com/users/silvasean/gists{/gist_id}", "starred_url": "https://api.github.com/users/silvasean/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/silvasean/subscriptions", "organizations_url": "https://api.github.com/users/silvasean/orgs", "repos_url": "https://api.github.com/users/silvasean/repos", "events_url": "https://api.github.com/users/silvasean/events{/privacy}", "received_events_url": "https://api.github.com/users/silvasean/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-08-10T00:45:45Z", "updated_at": "2019-11-17T22:25:35Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): Binary for training, Source for translation\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: 3.7.3\r\n- Bazel version (if compiling from source): 0.24.1\r\n- GCC/Compiler version (if compiling from source): 8.3.0\r\n- CUDA/cuDNN version: 10.0/7.4.1\r\n- GPU model and memory: P100\r\n\r\n\r\n**Describe the current behavior**\r\n\r\nI trained the official resnet imagenet model (r1) until it exported a saved_model.pb and associated variables folder\r\n\r\nI then copied both of those into a separate directory and verified that the model was saved correctly by loading it and inferencing a few images, which returned the correct results.\r\n\r\nI cloned tensorflow and called the following command in the tensorflow directory to translate the saved model to MLIR\r\n\r\n`bazel run //tensorflow/compiler/mlir:tf-mlir-translate -- --graphdef-to-mlir --tf-input-arrays=input_tensor --tf-input-shapes=32,244,244,3 --tf-input-data-types=DT_FLOAT --tf-output-arrays=ArgMax ~/MLIR/saved_model.pb -o ~/MLIR/saved_model.mlir`\r\n\r\nHowever, I got the following error\r\n\r\n> INFO: Analysed target //tensorflow/compiler/mlir:tf-mlir-translate (0 packages loaded, 0 targets configured).\r\n> INFO: Found 1 target...\r\n> Target //tensorflow/compiler/mlir:tf-mlir-translate up-to-date:\r\n>   bazel-bin/tensorflow/compiler/mlir/tf-mlir-translate\r\n> INFO: Elapsed time: 0.571s, Critical Path: 0.00s\r\n> INFO: 0 processes.\r\n> INFO: Build completed successfully, 1 total action\r\n> INFO: Running command line: bazel-bin/tensorflow/compiler/mlir/tf-mlir-translate --graphdef-to-mlir '--tf-input-arrays=input_tensor' '--tf-input-shapes=32,244,244,3' '--tf-input-data-types=DT_FLOAT' '--tf-output-arrays=ArgMax' /home/alber\r\n\r\n_It got cut off by the edge of the terminal above_\r\n\r\n> INFO: Build completed successfully, 1 total action\r\n> 2019-08-09 16:59:17.399053: E tensorflow/compiler/mlir/tensorflow/utils/import_utils.cc:66] Error parsing Protobuf: /home/albert/MLIR/saved_model.pbtxt\r\n> 2019-08-09 16:59:17.399429: E tensorflow/compiler/mlir/tensorflow/translate/tf_mlir_translate.cc:81] Graph import failed: Invalid argument: Could not parse input file\r\n\r\nI tried converting the saved_model.pb to a .pbtxt and running the same command, but I got the same error\r\n\r\nI've uploaded the contents of the .pbtxt file here: [http://m.uploadedit.com/bbtc/1565397330160.txt](http://m.uploadedit.com/bbtc/1565397330160.txt)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31499", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31499/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31499/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31499/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31499", "id": 479201107, "node_id": "MDU6SXNzdWU0NzkyMDExMDc=", "number": 31499, "title": "MultiWorkerMirroredStrategy stuck in all_reduce", "user": {"login": "grananqvist", "id": 16865473, "node_id": "MDQ6VXNlcjE2ODY1NDcz", "avatar_url": "https://avatars1.githubusercontent.com/u/16865473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/grananqvist", "html_url": "https://github.com/grananqvist", "followers_url": "https://api.github.com/users/grananqvist/followers", "following_url": "https://api.github.com/users/grananqvist/following{/other_user}", "gists_url": "https://api.github.com/users/grananqvist/gists{/gist_id}", "starred_url": "https://api.github.com/users/grananqvist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/grananqvist/subscriptions", "organizations_url": "https://api.github.com/users/grananqvist/orgs", "repos_url": "https://api.github.com/users/grananqvist/repos", "events_url": "https://api.github.com/users/grananqvist/events{/privacy}", "received_events_url": "https://api.github.com/users/grananqvist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-08-09T23:33:55Z", "updated_at": "2019-10-22T23:47:26Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): MacOS Mojave\r\n- TensorFlow installed from (source or binary): PyPi\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: 3.6.5\r\n- CUDA/cuDNN version: none. (MacOS)\r\n- GPU model and memory: none. (MacOS)\r\n\r\n**Describe the current behavior**\r\nI am setting up a multi-worker cluster with two workers and I want to reduce the value of a tensor from each worker. Tensorflow is simply blocking on the collective all reduce operation (tensorflow.python.ops.collective_ops.all_reduce) and never synchronizes between workers.\r\n\r\n**Describe the expected behavior**\r\nI expect the collective op to return the sum of the tensor across each worker. More specifically, I expect the code below to print the value `[[2.,3.]]`\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport json\r\nimport os\r\nimport sys\r\nfrom multiprocessing import Process\r\nimport tensorflow as tf\r\nfrom tensorflow.distribute.cluster_resolver import TFConfigClusterResolver\r\n\r\ntf.logging.set_verbosity('DEBUG')\r\n\r\ndef test_dist(task_id):\r\n    resolver = TFConfigClusterResolver()\r\n    cluster = resolver.cluster_spec()\r\n    server = tf.distribute.Server(\r\n        cluster, job_name=\"worker\", task_index=task_id)\r\n\r\n    dist = tf.distribute.experimental.MultiWorkerMirroredStrategy(\r\n        tf.distribute.experimental.CollectiveCommunication.RING)\r\n\r\n    print('num replicas', dist.num_replicas_in_sync)\r\n\r\n    with tf.device('/job:worker/task:{0}/device:CPU:0'.format(task_id)):\r\n        t = tf.Variable([1.0,3.0*task_id], dtype=tf.float32, name='myvar')\r\n\r\n    def sum_deltas_fn(v):\r\n        return tf.identity(v)\r\n\r\n    with dist.scope():\r\n        all_ts = dist.experimental_run_v2(sum_deltas_fn, args=[t])\r\n        delta_sums_results = dist.reduce(tf.distribute.ReduceOp.SUM, all_ts)\r\n\r\n        sess = tf.compat.v1.Session(server.target)\r\n        sess.run(tf.compat.v1.global_variables_initializer())\r\n\r\n        print('tensor', delta_sums_results)\r\n        print('tensor value', sess.run(delta_sums_results))\r\n\r\ntest_dist(int(sys.argv[1]))\r\n```\r\n\r\nI run two workers in one terminal each:\r\n```\r\n# Terminal 1\r\nexport TF_CONFIG='{ \"cluster\": { \"worker\": [\"localhost:8027\", \"localhost:8028\"] }, \"task\": {\"type\": \"worker\", \"index\": 0} }'\r\npython collective_reduce.old.py 0\r\n```\r\n\r\n```\r\n# Terminal 2\r\nexport TF_CONFIG='{ \"cluster\": { \"worker\": [\"localhost:8027\", \"localhost:8028\"] }, \"task\": {\"type\": \"worker\", \"index\": 1} }'\r\npython collective_reduce.old.py 1\r\n```\r\n\r\n**Other info / logs**\r\nThe output is:\r\n\r\nworker 1\r\n```\r\nWARNING: Logging before flag parsing goes to stderr.\r\nW0809 16:15:59.427072 4541060544 deprecation_wrapper.py:119] From collective_reduce.old.py:8: The name tf.logging.set_verbosity is deprecated. Please use tf.compat.v1.logging.set_verbosity instead.\r\n\r\n2019-08-09 16:15:59.428197: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-08-09 16:15:59.431492: I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:250] Initialize GrpcChannelCache for job worker -> {0 -> localhost:8027, 1 -> localhost:8028}\r\n2019-08-09 16:15:59.432571: I tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:365] Started server with target: grpc://localhost:8027\r\nI0809 16:15:59.470151 4541060544 cross_device_ops.py:1174] Device is available but not used by distribute strategy: /device:CPU:0\r\nW0809 16:15:59.471471 4541060544 cross_device_ops.py:1177] Not all devices in `tf.distribute.Strategy` are visible to TensorFlow.\r\nI0809 16:15:59.472136 4541060544 collective_all_reduce_strategy.py:226] Multi-worker CollectiveAllReduceStrategy with cluster_spec = {'worker': ['localhost:8027', 'localhost:8028']}, task_type = 'worker', task_id = 0, num_workers = 2, local_devices = ('/job:worker/task:0',), communication = CollectiveCommunication.RING\r\nnum replicas 2\r\nI0809 16:15:59.488581 4541060544 cross_device_ops.py:1032] Collective batch_all_reduce: 1 all-reduces, num_workers = 2\r\nI0809 16:15:59.489030 4541060544 cross_device_ops.py:1053] Collective batch_all_reduce: 1 all-reduces, num_workers = 2\r\ntensor Tensor(\"allreduce/CollectiveReduce:0\", shape=(2,), dtype=float32, device=/job:worker/replica:0/task:0/device:CPU:0)\r\n```\r\n\r\nworker 2\r\n```\r\nWARNING: Logging before flag parsing goes to stderr.\r\nW0809 16:16:07.349786 4473202112 deprecation_wrapper.py:119] From collective_reduce.old.py:8: The name tf.logging.set_verbosity is deprecated. Please use tf.compat.v1.logging.set_verbosity instead.\r\n\r\n2019-08-09 16:16:07.350931: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-08-09 16:16:07.354157: I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:250] Initialize GrpcChannelCache for job worker -> {0 -> localhost:8027, 1 -> localhost:8028}\r\n2019-08-09 16:16:07.355424: I tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:365] Started server with target: grpc://localhost:8028\r\nI0809 16:16:07.392420 4473202112 cross_device_ops.py:1174] Device is available but not used by distribute strategy: /device:CPU:0\r\nW0809 16:16:07.393295 4473202112 cross_device_ops.py:1177] Not all devices in `tf.distribute.Strategy` are visible to TensorFlow.\r\nI0809 16:16:07.393734 4473202112 collective_all_reduce_strategy.py:226] Multi-worker CollectiveAllReduceStrategy with cluster_spec = {'worker': ['localhost:8027', 'localhost:8028']}, task_type = 'worker', task_id = 1, num_workers = 2, local_devices = ('/job:worker/task:1',), communication = CollectiveCommunication.RING\r\nnum replicas 2\r\nI0809 16:16:07.408463 4473202112 cross_device_ops.py:1032] Collective batch_all_reduce: 1 all-reduces, num_workers = 2\r\nI0809 16:16:07.408880 4473202112 cross_device_ops.py:1053] Collective batch_all_reduce: 1 all-reduces, num_workers = 2\r\ntensor Tensor(\"allreduce/CollectiveReduce:0\", shape=(2,), dtype=float32, device=/job:worker/replica:0/task:1/device:CPU:0)\r\n```\r\n\r\nWhether this is a bug or me doing something wrong, it is very unclear in the docs how to do anything with `MultiWorkerMirroredStrategy`.\r\nAlso, the example with setting the env variable directly with os.environ here https://www.tensorflow.org/guide/distribute_strategy#setting_up_tf_config_environment_variable\r\ndoes not register, and the ClusterSpec will be empty"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31478", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31478/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31478/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31478/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31478", "id": 479010587, "node_id": "MDU6SXNzdWU0NzkwMTA1ODc=", "number": 31478, "title": "[C++] The first SessionOptions controls the \"inter intra number\" of all following Sessions?", "user": {"login": "JiayiFu", "id": 8230560, "node_id": "MDQ6VXNlcjgyMzA1NjA=", "avatar_url": "https://avatars0.githubusercontent.com/u/8230560?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JiayiFu", "html_url": "https://github.com/JiayiFu", "followers_url": "https://api.github.com/users/JiayiFu/followers", "following_url": "https://api.github.com/users/JiayiFu/following{/other_user}", "gists_url": "https://api.github.com/users/JiayiFu/gists{/gist_id}", "starred_url": "https://api.github.com/users/JiayiFu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JiayiFu/subscriptions", "organizations_url": "https://api.github.com/users/JiayiFu/orgs", "repos_url": "https://api.github.com/users/JiayiFu/repos", "events_url": "https://api.github.com/users/JiayiFu/events{/privacy}", "received_events_url": "https://api.github.com/users/JiayiFu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "ezhulenev", "id": 1174378, "node_id": "MDQ6VXNlcjExNzQzNzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1174378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezhulenev", "html_url": "https://github.com/ezhulenev", "followers_url": "https://api.github.com/users/ezhulenev/followers", "following_url": "https://api.github.com/users/ezhulenev/following{/other_user}", "gists_url": "https://api.github.com/users/ezhulenev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezhulenev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezhulenev/subscriptions", "organizations_url": "https://api.github.com/users/ezhulenev/orgs", "repos_url": "https://api.github.com/users/ezhulenev/repos", "events_url": "https://api.github.com/users/ezhulenev/events{/privacy}", "received_events_url": "https://api.github.com/users/ezhulenev/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ezhulenev", "id": 1174378, "node_id": "MDQ6VXNlcjExNzQzNzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1174378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezhulenev", "html_url": "https://github.com/ezhulenev", "followers_url": "https://api.github.com/users/ezhulenev/followers", "following_url": "https://api.github.com/users/ezhulenev/following{/other_user}", "gists_url": "https://api.github.com/users/ezhulenev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezhulenev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezhulenev/subscriptions", "organizations_url": "https://api.github.com/users/ezhulenev/orgs", "repos_url": "https://api.github.com/users/ezhulenev/repos", "events_url": "https://api.github.com/users/ezhulenev/events{/privacy}", "received_events_url": "https://api.github.com/users/ezhulenev/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-08-09T14:16:52Z", "updated_at": "2019-08-27T11:58:24Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**Describe the current behavior**\r\n    I trained a model. It runs near 25 milliseconds each inference when the `inter_op_parallelism_threads=1` and `intra_op_parallelism_threads=8` and near 90 milliseconds each inference when the `inter_op_parallelism_threads=1` and `intra_op_parallelism_threads=1`.\r\n  I found that the first `SessionOptions` will determine all the following Sessions' Options.\r\n  For example, I created a Session with `inter=1, intra=1` and close it. Then I create another Session with `inter=1, intra=8` and run my model in the later Session. The inference speed of the model is 90ms which corresponding to `inter=1, intra=1` but not `inter=1, intra=8`. It seems the first SessionOptions still control the later Session.\r\n \r\n**Code to reproduce the issue**\r\n    \r\n    void DoSessionAction(boost::filesystem::path model_path, unsigned inter, unsigned intra){\r\n      std::unique_ptr<tensorflow::Session> sess_;\r\n      tensorflow::SessionOptions sess_options_;\r\n      sess_options_.config.set_use_per_session_threads(false);\r\n      sess_options_.config.set_inter_op_parallelism_threads(inter);\r\n      sess_options_.config.set_intra_op_parallelism_threads(intra);\r\n      sess_.reset(tensorflow::NewSession(sess_options_));\r\n      tensorflow::GraphDef graph_def;\r\n      auto default_env = tensorflow::Env::Default();\r\n      tensorflow::ReadBinaryProto(default_env, model_path.string(), &graph_def);\r\n      sess_->Create(graph_def);\r\n      sess_->Close();\r\n    }\r\n\r\n    // This situation the inference time is 90ms.\r\n    int main(int argc, char **argv) {\r\n        DoSessionAction(model_path, 1, 1);\r\n        DoSessionAction(model_path, 1, 8);\r\n        RunModel(); \r\n    }\r\n\r\n    // This situation the inference time is 25ms.\r\n    int main(int argc, char **argv) {\r\n        DoSessionAction(model_path, 1, 8);\r\n        RunModel(); \r\n    }\r\n**System information**\r\n- OS Platform and Distribution: Linux Ubuntu 16.04\r\n- TensorFlow installed from source\r\n- TensorFlow version: 1.14.1\r\n- Python version: 3.5.2\r\n- Bazel version: 0.24\r\n- GCC/Compiler version: 5.4.0\r\n\r\nIs there anything wrong with my usage of Session or SessionOptions?\r\nThanks!\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31468", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31468/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31468/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31468/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31468", "id": 478799277, "node_id": "MDU6SXNzdWU0Nzg3OTkyNzc=", "number": 31468, "title": "TFLite Metal GPU delegate: crash in Mul operation", "user": {"login": "LK", "id": 975916, "node_id": "MDQ6VXNlcjk3NTkxNg==", "avatar_url": "https://avatars2.githubusercontent.com/u/975916?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LK", "html_url": "https://github.com/LK", "followers_url": "https://api.github.com/users/LK/followers", "following_url": "https://api.github.com/users/LK/following{/other_user}", "gists_url": "https://api.github.com/users/LK/gists{/gist_id}", "starred_url": "https://api.github.com/users/LK/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LK/subscriptions", "organizations_url": "https://api.github.com/users/LK/orgs", "repos_url": "https://api.github.com/users/LK/repos", "events_url": "https://api.github.com/users/LK/events{/privacy}", "received_events_url": "https://api.github.com/users/LK/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-08-09T05:09:18Z", "updated_at": "2019-11-09T06:21:59Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes.\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): iOS 12.3.1\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: iPhone Xr\r\n- TensorFlow installed from (source or binary): binary, but TFLite compiled from source\r\n- TensorFlow version (use command below): b'v1.13.2-5-g04256c89d8' 1.13.2\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source): 0.26.1\r\n- GCC/Compiler version (if compiling from source): clang-1001.0.46.4\r\n- CUDA/cuDNN version: n/a\r\n- GPU model and memory: iPhone Xr\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nRunning the single-operation model given below using the Metal GPU delegate causes the following error:\r\n> Execution of the command buffer was aborted due to an error during execution. Caused GPU Hang Error (IOAF code 3)\r\n\r\n**Describe the expected behavior**\r\nRunning the model completes successfully.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n[model-broken.tflite.zip](https://github.com/tensorflow/tensorflow/files/3484839/model-broken.tflite.zip)\r\n\r\nThis basic model fails to run on GPU (with the error specified above), but will run fine on CPU.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nTFLite interpreter is being run using provided sample code and the crash only occurs on GPU\u00a0\u2014\u00a0the model runs correctly on CPU."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31464", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31464/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31464/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31464/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31464", "id": 478755520, "node_id": "MDU6SXNzdWU0Nzg3NTU1MjA=", "number": 31464, "title": "Can't get MnasNet mean & stdev for input normalization: get correct classes but incorrect scores.", "user": {"login": "Jonarod", "id": 6122703, "node_id": "MDQ6VXNlcjYxMjI3MDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/6122703?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jonarod", "html_url": "https://github.com/Jonarod", "followers_url": "https://api.github.com/users/Jonarod/followers", "following_url": "https://api.github.com/users/Jonarod/following{/other_user}", "gists_url": "https://api.github.com/users/Jonarod/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jonarod/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jonarod/subscriptions", "organizations_url": "https://api.github.com/users/Jonarod/orgs", "repos_url": "https://api.github.com/users/Jonarod/repos", "events_url": "https://api.github.com/users/Jonarod/events{/privacy}", "received_events_url": "https://api.github.com/users/Jonarod/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-08-09T01:36:28Z", "updated_at": "2019-10-08T20:53:40Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow):** Stock example `label_image.py`\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04):** Linux Ubuntu 18.04\r\n- **TensorFlow installed from (source or binary):** Tensorflow Lite installed from source.\r\n- **TensorFlow version (use command below):** v2.0.0-beta0-16-g1d91213fe7 2.0.0-beta1\r\n- **Python version:** 3.6.7\r\n- **Bazel version (if compiling from source):** using Make, not bazel\r\n- **GCC/Compiler version (if compiling from source):** gcc\r\n- **CUDA/cuDNN version:** no CUDA\r\n- **GPU model and memory:** no GPU\r\n\r\n\r\n### Describe the current behavior\r\nThe docs are quite unclear about which normalization technique and constants are used for inputs. But generally speaking, popular models like `mobilenet` use an input range of `[0,1]`.\r\nThis is the case for most models hosted [here](https://www.tensorflow.org/lite/guide/hosted_models), except `MnasNet`. For some reasons, I cannot properly use inference with the `MnasNet_1.0_224` `.tflite` model using input ranges of `[0,1]`. For instance, after normalizing my input from 0 to 1, I do get the correct output class but get an incorrect output score. In fact, **normalizing RGB channels from `[0,255]` to `[0,1]` produces scores above 100% (sometimes 900%...) using TFLite's `MnasNet_1.0_224`**.\r\n\r\nBefore writing this issue, I have randomly tested other input ranges like `[-1,1]` and `[-127,128]` but with no luck either. In PyTorch docs there are some references of using a normalization per channels like `[0.485*255, 0.456*255, 0.456*255]` for the mean and `[0.229*255, 0.224*255, 0.225*255]` for the standard deviation (for each R,G and B channel respectively), but once again to no avail: **correct class with unscaled scores**.\r\n\r\n### Describe the expected behavior\r\n\r\nMore than an expected behavior I would expect some documentation around models. Recently I could see a new convention to ship models with a text file informing input and output channels names which I think is great. However, IMHO it should also ship with `mean` and `stdev` used for input normalization. Moreover, and here I am deviating from the original issue briefly, I would love to see these information **coded** in some constant variables like `input.get_normalization_range()` or something like that (just my 2cts).\r\n\r\nNow regarding that specific issue, is anyone able to tell if that is an MnasNet bug not respecting classic ranges, or a deliberate training-related optimization ?\r\nAnd, of course, I'd love to see a code or pseudo-code to get my input right using MnasNet :smile: \r\n\r\n\r\n### Code to reproduce the issue\r\n\r\nJust download the `MnasNet_1.0_224.tflite` model here: [mnasnet_1.0_224_09_07_2018.tgz](https://storage.cloud.google.com/download.tensorflow.org/models/tflite/mnasnet_1.0_224_09_07_2018.tgz)\r\nExtract it.\r\nThen, copy the stock python script `label_image.py` here: [label_image.py](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/lite/examples/python/label_image.py)\r\nThen get a random image to run inference.\r\n\r\nFinally just run inference but providing mnasnet model instead of default one:\r\n```\r\npython3 label_image.py --model_file mnasnet_1.0_224/mnasnet_1.0_224.tflite\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31455", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31455/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31455/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31455/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31455", "id": 478616619, "node_id": "MDU6SXNzdWU0Nzg2MTY2MTk=", "number": 31455, "title": "python for loops in eager model yield expected results for  keras model.predict but not for saved model with multiple outputs", "user": {"login": "mckeown12", "id": 2261701, "node_id": "MDQ6VXNlcjIyNjE3MDE=", "avatar_url": "https://avatars1.githubusercontent.com/u/2261701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mckeown12", "html_url": "https://github.com/mckeown12", "followers_url": "https://api.github.com/users/mckeown12/followers", "following_url": "https://api.github.com/users/mckeown12/following{/other_user}", "gists_url": "https://api.github.com/users/mckeown12/gists{/gist_id}", "starred_url": "https://api.github.com/users/mckeown12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mckeown12/subscriptions", "organizations_url": "https://api.github.com/users/mckeown12/orgs", "repos_url": "https://api.github.com/users/mckeown12/repos", "events_url": "https://api.github.com/users/mckeown12/events{/privacy}", "received_events_url": "https://api.github.com/users/mckeown12/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-08-08T18:11:27Z", "updated_at": "2019-08-15T20:23:31Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): YES\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): NA\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source): na\r\n- GCC/Compiler version (if compiling from source): na\r\n- CUDA/cuDNN version: na\r\n- GPU model and memory: na\r\n\r\n**Describe the current behavior**\r\ntf.keras Model's predict method prediction differs from tf.saved_model's prediction\r\n**Describe the expected behavior**\r\n`tf.saved_model.save()` should either fail to serialize, or should yield correct predictions on reload.\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport tensorflow as tf\r\ntf.enable_eager_execution()\r\nprint(tf.__version__)\r\nfrom tensorflow.keras.layers import Input, Dense, Lambda\r\nfrom tensorflow.keras.models import Model\r\nimport numpy as np\r\n\r\nin0 = Input(shape=(1,), dtype=\"float32\", name='my_input_0')\r\nin1 = Input(shape=(1,), dtype=\"float32\", name='my_input_1')\r\nconcatted = Lambda(lambda inputs: tf.concat(inputs, axis=-1))([in0,in1])\r\n\r\noutputs = Dense(3)(concatted)\r\n\r\n#------------- way 1 (does not work)-----------------\r\n\r\n# outs = [Lambda(lambda outputs: outputs[...,i], name=f'output_{i}')(outputs) for i in range(3)]\r\n\r\n#------------- way 2 (does not work)-----------------\r\n\r\nouts = []\r\nfor i in range(3):\r\n  outs.append(Lambda(lambda outputs: outputs[...,i], name=f'output_{i}')(outputs))\r\n\r\n#------------- way 3 (does work)-----------------\r\n\r\n# out0 = Lambda(lambda outputs: outputs[...,0], name='my_output_0')(post_process)\r\n# out1 = Lambda(lambda outputs: outputs[...,1], name='my_output_1')(post_process)\r\n# out2 = Lambda(lambda outputs: outputs[...,2], name='my_output_2')(post_process)\r\n# outs=[out0, out1, out2]\r\n\r\n#----------------------------\r\n\r\nmy_model = Model(inputs=[in0,in1], outputs=outs)\r\ntf.keras.backend.learning_phase = 0\r\n\r\nmy_model.predict([np.array([[.5],[.3]]), np.array([[-.1],[.2]])])\r\n```\r\n\r\nyields\r\n```\r\n1.14.0\r\n[array([0.13002533, 0.03461001], dtype=float32),\r\n array([-0.45988005, -0.3892737 ], dtype=float32),\r\n array([-0.28218567, -0.14224575], dtype=float32)]\r\n```\r\nOn the other hand,\r\n```python\r\ntf.saved_model.save(my_model, './mymodel')\r\nreloaded = tf.saved_model.load_v2('./mymodel')\r\nsig = reloaded.signatures['serving_default']\r\nsig(my_input_0=tf.constant(np.array([[.5],[.3]]), dtype=tf.float32), my_input_1=tf.constant(np.array([[-.1],[.2]]), dtype=tf.float32))\r\n```\r\nyields\r\n```\r\n{'output_0': <tf.Tensor: id=316, shape=(2,), dtype=float32, numpy=array([-0.28218567, -0.14224575], dtype=float32)>,\r\n 'output_1': <tf.Tensor: id=317, shape=(2,), dtype=float32, numpy=array([-0.28218567, -0.14224575], dtype=float32)>,\r\n 'output_2': <tf.Tensor: id=318, shape=(2,), dtype=float32, numpy=array([-0.28218567, -0.14224575], dtype=float32)>}\r\n```\r\ntry it for yourself here:\r\nhttps://colab.research.google.com/drive/1x1eDTl-nMuhZTQYWSi_I9F_SguFZRP2i\r\n\r\n\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n\r\n\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31449", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31449/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31449/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31449/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31449", "id": 478560561, "node_id": "MDU6SXNzdWU0Nzg1NjA1NjE=", "number": 31449, "title": "GPU race conditions from `tf.map_fn` ", "user": {"login": "ShellRox", "id": 18748373, "node_id": "MDQ6VXNlcjE4NzQ4Mzcz", "avatar_url": "https://avatars3.githubusercontent.com/u/18748373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShellRox", "html_url": "https://github.com/ShellRox", "followers_url": "https://api.github.com/users/ShellRox/followers", "following_url": "https://api.github.com/users/ShellRox/following{/other_user}", "gists_url": "https://api.github.com/users/ShellRox/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShellRox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShellRox/subscriptions", "organizations_url": "https://api.github.com/users/ShellRox/orgs", "repos_url": "https://api.github.com/users/ShellRox/repos", "events_url": "https://api.github.com/users/ShellRox/events{/privacy}", "received_events_url": "https://api.github.com/users/ShellRox/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "reedwm", "id": 6510203, "node_id": "MDQ6VXNlcjY1MTAyMDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6510203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reedwm", "html_url": "https://github.com/reedwm", "followers_url": "https://api.github.com/users/reedwm/followers", "following_url": "https://api.github.com/users/reedwm/following{/other_user}", "gists_url": "https://api.github.com/users/reedwm/gists{/gist_id}", "starred_url": "https://api.github.com/users/reedwm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reedwm/subscriptions", "organizations_url": "https://api.github.com/users/reedwm/orgs", "repos_url": "https://api.github.com/users/reedwm/repos", "events_url": "https://api.github.com/users/reedwm/events{/privacy}", "received_events_url": "https://api.github.com/users/reedwm/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "reedwm", "id": 6510203, "node_id": "MDQ6VXNlcjY1MTAyMDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6510203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reedwm", "html_url": "https://github.com/reedwm", "followers_url": "https://api.github.com/users/reedwm/followers", "following_url": "https://api.github.com/users/reedwm/following{/other_user}", "gists_url": "https://api.github.com/users/reedwm/gists{/gist_id}", "starred_url": "https://api.github.com/users/reedwm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reedwm/subscriptions", "organizations_url": "https://api.github.com/users/reedwm/orgs", "repos_url": "https://api.github.com/users/reedwm/repos", "events_url": "https://api.github.com/users/reedwm/events{/privacy}", "received_events_url": "https://api.github.com/users/reedwm/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 17, "created_at": "2019-08-08T16:02:22Z", "updated_at": "2019-11-17T16:13:11Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): All the code that caused this issue uses Tensorflow/Keras operations.\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: 3.6.8\r\n- CUDA/cuDNN version: 10.0/7.6.2\r\n- GPU model and memory: RTX 6000x2, 48 GB\r\n\r\n**Describe the current behavior**\r\n\r\nI've created a custom layer called `ROI` in Keras that uses `tf.map_fn`, [precisely because it has unknown parameter that it needs to take as tensor object](https://github.com/keras-team/keras/issues/12139). \r\n\r\nThis layer works perfectly on CPU inference and training, it also works perfectly on GPU during inference. But during training with a powerful GPU, exception about GPU colocation of `ROI` layer occurs:\r\n\r\n```\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Cannot assign a device for operation ROI/map/while/Identity_1: Could not satisfy explicit device specification '' because the node node ROI/map/while/Identity_1 (defined at /path/to/custom/layer/custom.py:70) placed on device No device assignments were active during op 'ROI/map/while/Identity_1' creation.\r\n```\r\n\r\n```\r\n[[node ROI/map/while/Identity_1 (defined at /path/to/custom/layer/custom.py:70) Additional information about colocations: No node-device colocations were active during                                                                                                                                                              op 'ROI/map/while/Identity_1' creation.\r\nNo device assignments were active during op 'ROI/map/while/Identity_1' creation.`\r\n```\r\n\r\nManual colocation of `ROI` layer to CPU device with `tf.device` worked, but I want `ROI` to support GPU as well.\r\n\r\n**My hypothesis**\r\n\r\n`ROI` layer works on CPU because only single core at a time should handle the layer - even if multiprocessing is activated, there are few cores slowly balancing the task. \r\n\r\nBut whenever GPU is utilized, thousands of cores are working together in parallel and they are not waiting for each other to finish their tasks. Thus one of the processes tries to gather data from `TensorArray` that is still in while loop (using `tf.map_fn`), which causes the error.\r\n\r\n**Describe the expected behavior**\r\n\r\nTensorflow should be able to handle these race conditions by waiting for its own `tf.map_fn` to be finished instead of raising exceptions. \r\n\r\n**Code to reproduce the issue**\r\n\r\n[This is the code\r\n](https://gist.github.com/ShellRox/a1c11565ed53f219bc1033164947aa72) that instantly causes the mentioned issue on my local machine.\r\n\r\n**Other info / logs**\r\n\r\nFull Log:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/path/to/site-packages/tensorflow/python/client/session.py\", line 1356, in _do_call\r\n    return fn(*args)\r\n  File \"/path/to/site-packages/tensorflow/python/client/session.py\", line 1339, in _run_fn\r\n    self._extend_graph()\r\n  File \"/path/to/site-packages/tensorflow/python/client/session.py\", line 1374, in _extend_graph\r\n    tf_session.ExtendSession(self._session)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Cannot assign a device for operation ROI/map/while/Identity_1: Could not satisfy explicit device specification '' because the node {{colocation_node ROI/map/while/Identity_1}} was colocated with a group of nodes that required incompatible device '/job:localhost/replica:0/task:0/device:GPU:0'. All available devices [/job:localhost/replica:0/task:0/device:CPU:0, /job:localhost/replica:0/task:0/device:XLA_GPU:0, /job:localhost/replica:0/task:0/device:XLA_CPU:0, /job:localhost/replica:0/task:0/device:GPU:0].\r\nColocation Debug Info:\r\nColocation group had the following types and supported devices:\r\nRoot Member(assigned_device_name_index_=1 requested_device_name_='/job:localhost/replica:0/task:0/device:GPU:0' assigned_device_name_='/job:localhost/replica:0/task:0/device:GPU:0' resource_device_name_='/job:localhost/replica:0/task:0/device:GPU:0' supported_device_types_=[CPU] possible_devices_=[]\r\nStridedSliceGrad: GPU CPU XLA_CPU XLA_GPU\r\nNextIteration: GPU CPU XLA_CPU XLA_GPU\r\nMul: GPU CPU XLA_CPU XLA_GPU\r\nEqual: GPU CPU XLA_CPU XLA_GPU\r\nDynamicStitch: GPU CPU XLA_CPU XLA_GPU\r\nFill: GPU CPU XLA_CPU XLA_GPU\r\nFloorMod: GPU CPU XLA_CPU XLA_GPU\r\nShape: GPU CPU XLA_CPU XLA_GPU\r\nReshape: GPU CPU XLA_CPU XLA_GPU\r\nTensorArrayReadV3: GPU CPU XLA_CPU XLA_GPU\r\nTensorArrayScatterV3: GPU CPU XLA_CPU XLA_GPU\r\nTensorArraySizeV3: GPU CPU XLA_CPU XLA_GPU\r\nConst: GPU CPU XLA_CPU XLA_GPU\r\nTensorArrayWriteV3: GPU CPU XLA_CPU XLA_GPU\r\nIdentity: GPU CPU XLA_CPU XLA_GPU\r\nGreaterEqual: GPU CPU XLA_CPU XLA_GPU\r\nExit: GPU CPU XLA_CPU XLA_GPU\r\nCast: GPU CPU XLA_CPU XLA_GPU\r\nControlTrigger: GPU CPU XLA_CPU XLA_GPU\r\nTensorArrayGradV3: GPU CPU XLA_CPU XLA_GPU\r\nPack: GPU CPU XLA_CPU XLA_GPU\r\nEnter: GPU CPU XLA_CPU XLA_GPU\r\nTensorArrayV3: GPU CPU XLA_CPU XLA_GPU\r\nMerge: GPU CPU XLA_CPU XLA_GPU\r\nStackV2: GPU CPU XLA_CPU XLA_GPU\r\nRange: GPU CPU XLA_CPU XLA_GPU\r\nTensorArrayGatherV3: GPU CPU XLA_CPU XLA_GPU\r\nStackPushV2: GPU CPU XLA_CPU XLA_GPU\r\nSwitch: GPU CPU XLA_CPU XLA_GPU\r\nRealDiv: GPU CPU XLA_CPU XLA_GPU\r\nAdd: GPU CPU XLA_CPU XLA_GPU\r\nStridedSlice: GPU CPU XLA_CPU XLA_GPU\r\nMax: GPU CPU XLA_CPU XLA_GPU\r\nLoopCond: GPU CPU XLA_CPU XLA_GPU\r\nSum: GPU CPU XLA_CPU XLA_GPU\r\nStackPopV2: GPU CPU XLA_CPU XLA_GPU\r\nSub: GPU CPU XLA_CPU XLA_GPU\r\n\r\nColocation members, user-requested devices, and framework assigned devices, if any:\r\n  ROI/map/TensorArray_2 (TensorArrayV3)  framework assigned device=/job:localhost/replica:0/task:0/device:GPU:0\r\n  ROI/map/while/Identity_1 (Identity)\r\n  ROI/map/while/map/TensorArray_1 (TensorArrayV3)  framework assigned device=/job:localhost/replica:0/task:0/device:GPU:0\r\n  ROI/map/while/map/while/Identity_1 (Identity)\r\n  ROI/map/while/map/while/strided_slice_4/stack (Pack)\r\n  ROI/map/while/map/while/strided_slice_4/stack_1 (Pack)\r\n  ROI/map/while/map/while/strided_slice_4 (StridedSlice)\r\n  ROI/map/while/map/while/Max (Max)\r\n  ROI/map/while/map/while/TensorArrayWrite/TensorArrayWriteV3/Enter (Enter)\r\n  ROI/map/while/map/while/TensorArrayWrite/TensorArrayWriteV3 (TensorArrayWriteV3)  framework assigned device=/job:localhost/replica:0/task:0/device:GPU:0\r\n  ROI/map/while/map/while/Exit_2 (Exit)\r\n  ROI/map/while/map/TensorArrayStack/TensorArraySizeV3 (TensorArraySizeV3)  framework assigned device=/job:localhost/replica:0/task:0/device:GPU:0\r\n  ROI/map/while/map/TensorArrayStack/range/start (Const)\r\n  ROI/map/while/map/TensorArrayStack/range/delta (Const)\r\n  ROI/map/while/map/TensorArrayStack/range (Range)\r\n  ROI/map/while/map/TensorArrayStack/TensorArrayGatherV3 (TensorArrayGatherV3)  framework assigned device=/job:localhost/replica:0/task:0/device:GPU:0\r\n  ROI/map/while/TensorArrayWrite/TensorArrayWriteV3/Enter (Enter)\r\n  ROI/map/while/TensorArrayWrite/TensorArrayWriteV3 (TensorArrayWriteV3)  framework assigned device=/job:localhost/replica:0/task:0/device:GPU:0\r\n  ROI/map/TensorArrayStack/TensorArraySizeV3 (TensorArraySizeV3)  framework assigned device=/job:localhost/replica:0/task:0/device:GPU:0\r\n  ROI/map/TensorArrayStack/range/start (Const)\r\n  ROI/map/TensorArrayStack/range/delta (Const)\r\n  ROI/map/TensorArrayStack/range (Range)\r\n  ROI/map/TensorArrayStack/TensorArrayGatherV3 (TensorArrayGatherV3)  framework assigned device=/job:localhost/replica:0/task:0/device:GPU:0\r\n  training/MultiplierWrapper/gradients/f_count_3 (Const)\r\n  training/MultiplierWrapper/gradients/f_count_4 (Enter)\r\n  training/MultiplierWrapper/gradients/Merge_2 (Merge)\r\n  training/MultiplierWrapper/gradients/Switch_2 (Switch)\r\n  training/MultiplierWrapper/gradients/Add_1/y (Const)\r\n  training/MultiplierWrapper/gradients/Add_1 (Add)\r\n  training/MultiplierWrapper/gradients/f_count_5 (Exit)\r\n  training/MultiplierWrapper/gradients/Const (Const)\r\n  training/MultiplierWrapper/gradients/f_acc (StackV2)\r\n  training/MultiplierWrapper/gradients/Enter (Enter)\r\n  training/MultiplierWrapper/gradients/StackPushV2 (StackPushV2)\r\n  training/MultiplierWrapper/gradients/StackPopV2/Enter (Enter)\r\n  training/MultiplierWrapper/gradients/StackPopV2 (StackPopV2)\r\n  training/MultiplierWrapper/gradients/b_count_4 (Const)\r\n  training/MultiplierWrapper/gradients/b_count_5 (Enter)\r\n  training/MultiplierWrapper/gradients/Merge_3 (Merge)\r\n  training/MultiplierWrapper/gradients/GreaterEqual_1/Enter (Enter)\r\n  training/MultiplierWrapper/gradients/GreaterEqual_1 (GreaterEqual)\r\n  training/MultiplierWrapper/gradients/b_count_6 (LoopCond)\r\n  training/MultiplierWrapper/gradients/Switch_3 (Switch)\r\n  training/MultiplierWrapper/gradients/Sub_1 (Sub)\r\n  training/MultiplierWrapper/gradients/b_count_7 (Exit)\r\n  training/MultiplierWrapper/gradients/ROI/map/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayGrad/TensorArrayGradV3 (TensorArrayGradV3)\r\n  training/MultiplierWrapper/gradients/ROI/map/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayGrad/gradient_flow (Identity)\r\n  training/MultiplierWrapper/gradients/ROI/map/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayScatter/TensorArrayScatterV3 (TensorArrayScatterV3)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayGrad/TensorArrayGradV3/Enter (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayGrad/TensorArrayGradV3 (TensorArrayGradV3)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayGrad/gradient_flow (Identity)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayReadV3/Const (Const)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayReadV3/f_acc (StackV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayReadV3/Enter (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayReadV3/StackPushV2 (StackPushV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayReadV3/StackPopV2/Enter (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayReadV3/StackPopV2 (StackPopV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayReadV3 (TensorArrayReadV3)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayGrad/TensorArrayGradV3/Const (Const)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayGrad/TensorArrayGradV3/f_acc (StackV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayGrad/TensorArrayGradV3/Enter (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayGrad/TensorArrayGradV3/StackPushV2 (StackPushV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayGrad/TensorArrayGradV3/StackPopV2/Enter (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayGrad/TensorArrayGradV3/StackPopV2 (StackPopV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayGrad/TensorArrayGradV3/Const_1 (Const)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayGrad/TensorArrayGradV3/f_acc_1 (StackV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayGrad/TensorArrayGradV3/Enter_1 (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayGrad/TensorArrayGradV3/StackPushV2_1 (StackPushV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayGrad/TensorArrayGradV3/StackPopV2_1/Enter (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayGrad/TensorArrayGradV3/StackPopV2_1 (StackPopV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayGrad/TensorArrayGradV3 (TensorArrayGradV3)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayGrad/gradient_flow (Identity)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayScatter/TensorArrayScatterV3/Const (Const)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayScatter/TensorArrayScatterV3/f_acc (StackV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayScatter/TensorArrayScatterV3/Enter (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayScatter/TensorArrayScatterV3/StackPushV2 (StackPushV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayScatter/TensorArrayScatterV3/StackPopV2/Enter (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayScatter/TensorArrayScatterV3/StackPopV2 (StackPopV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayScatter/TensorArrayScatterV3 (TensorArrayScatterV3)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Exit_2_grad/b_exit (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayGrad/TensorArrayGradV3/Const (Const)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayGrad/TensorArrayGradV3/f_acc (StackV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayGrad/TensorArrayGradV3/Enter (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayGrad/TensorArrayGradV3/StackPushV2 (StackPushV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayGrad/TensorArrayGradV3/StackPopV2/Enter (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayGrad/TensorArrayGradV3/StackPopV2 (StackPopV2)\r\n  training/MultiplierWrapper/gradients/b_sync (ControlTrigger)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayGrad/TensorArrayGradV3/Enter_1 (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayGrad/TensorArrayGradV3 (TensorArrayGradV3)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayGrad/gradient_flow (Identity)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayReadV3/Const (Const)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayReadV3/f_acc (StackV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayReadV3/Enter (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayReadV3/Enter_1 (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayReadV3/StackPushV2 (StackPushV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayReadV3/StackPopV2/Enter (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayReadV3/StackPopV2/Enter_1 (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayReadV3/StackPopV2 (StackPopV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayReadV3 (TensorArrayReadV3)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Shape (Shape)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Size (Const)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/add/Const (Const)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/add (Add)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/mod (FloorMod)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Shape_1 (Const)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/range/start (Const)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/range/delta (Const)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/range (Range)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Fill/value (Const)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Fill (Fill)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/DynamicStitch/Const (Const)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/DynamicStitch/f_acc (StackV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/DynamicStitch/Enter (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/DynamicStitch/Enter_1 (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/DynamicStitch/StackPushV2 (StackPushV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/DynamicStitch/StackPopV2/Enter (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/DynamicStitch/StackPopV2/Enter_1 (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/DynamicStitch/StackPopV2 (StackPopV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/DynamicStitch (DynamicStitch)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Reshape/Const (Const)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Reshape/f_acc (StackV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Reshape/Enter (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Reshape/Enter_1 (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Reshape/StackPushV2 (StackPushV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Reshape/StackPopV2/Enter (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Reshape/StackPopV2/Enter_1 (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Reshape/StackPopV2 (StackPopV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Reshape (Reshape)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Reshape_1 (Reshape)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Equal/Const (Const)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Equal/f_acc (StackV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Equal/Enter (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Equal/Enter_1 (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Equal/StackPushV2 (StackPushV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Equal/StackPopV2/Enter (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Equal/StackPopV2/Enter_1 (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Equal/StackPopV2 (StackPopV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Equal (Equal)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Cast (Cast)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Sum (Sum)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/Reshape_2 (Reshape)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/truediv (RealDiv)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/Max_grad/mul (Mul)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/strided_slice_4_grad/Shape (Const)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/strided_slice_4_grad/StridedSliceGrad/Const (Const)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/strided_slice_4_grad/StridedSliceGrad/f_acc (StackV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/strided_slice_4_grad/StridedSliceGrad/Enter (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/strided_slice_4_grad/StridedSliceGrad/Enter_1 (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/strided_slice_4_grad/StridedSliceGrad/StackPushV2 (StackPushV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/strided_slice_4_grad/StridedSliceGrad/StackPopV2/Enter (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/strided_slice_4_grad/StridedSliceGrad/StackPopV2/Enter_1 (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/strided_slice_4_grad/StridedSliceGrad/StackPopV2 (StackPopV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/strided_slice_4_grad/StridedSliceGrad/Const_1 (Const)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/strided_slice_4_grad/StridedSliceGrad/f_acc_1 (StackV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/strided_slice_4_grad/StridedSliceGrad/Enter_2 (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/strided_slice_4_grad/StridedSliceGrad/Enter_3 (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/strided_slice_4_grad/StridedSliceGrad/StackPushV2_1 (StackPushV2)\r\n  training/MultiplierWrapper/gradients/NextIteration_2 (NextIteration)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/strided_slice_4_grad/StridedSliceGrad/StackPopV2_1/Enter (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/strided_slice_4_grad/StridedSliceGrad/StackPopV2_1/Enter_1 (Enter)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/strided_slice_4_grad/StridedSliceGrad/StackPopV2_1 (StackPopV2)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/TensorArrayWrite/TensorArrayWriteV3_grad/TensorArrayReadV3/b_sync (ControlTrigger)\r\n  training/MultiplierWrapper/gradients/NextIteration_3 (NextIteration)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/strided_slice_4_grad/StridedSliceGrad/Const_2 (Const)\r\n  training/MultiplierWrapper/gradients/ROI/map/while/map/while/strided_slice_4_grad/StridedSliceGrad (StridedSliceGrad)\r\n\r\n         [[{{node ROI/map/while/Identity_1}}]]\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31447", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31447/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31447/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31447/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31447", "id": 478483104, "node_id": "MDU6SXNzdWU0Nzg0ODMxMDQ=", "number": 31447, "title": "Adding speech output for tensorflowlite apps", "user": {"login": "Vanrap", "id": 44259234, "node_id": "MDQ6VXNlcjQ0MjU5MjM0", "avatar_url": "https://avatars3.githubusercontent.com/u/44259234?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Vanrap", "html_url": "https://github.com/Vanrap", "followers_url": "https://api.github.com/users/Vanrap/followers", "following_url": "https://api.github.com/users/Vanrap/following{/other_user}", "gists_url": "https://api.github.com/users/Vanrap/gists{/gist_id}", "starred_url": "https://api.github.com/users/Vanrap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Vanrap/subscriptions", "organizations_url": "https://api.github.com/users/Vanrap/orgs", "repos_url": "https://api.github.com/users/Vanrap/repos", "events_url": "https://api.github.com/users/Vanrap/events{/privacy}", "received_events_url": "https://api.github.com/users/Vanrap/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-08-08T13:48:14Z", "updated_at": "2019-08-14T12:53:12Z", "closed_at": null, "author_association": "NONE", "body": "Hello, I am currently building a image recognizer using tensorflow lite. I also wanted to add speech output with the prediction of the model. For example, if the model predicts that a given image is a daisy flower, it will say out loud \"daisy\".\r\n\r\n**System information**\r\n- TensorFlow version (you are using): Tensorflow lite 2.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\n**Will this change the current api? How?** The api would be modified such that text to speech is involved.\r\n\r\n**Who will benefit with this feature?** Adding speech would greatly help people with visual impairments, and benefit other app users in general.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31442", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31442/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31442/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31442/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31442", "id": 478366935, "node_id": "MDU6SXNzdWU0NzgzNjY5MzU=", "number": 31442, "title": "python API debugging best practices", "user": {"login": "konstantinARM", "id": 53899407, "node_id": "MDQ6VXNlcjUzODk5NDA3", "avatar_url": "https://avatars2.githubusercontent.com/u/53899407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/konstantinARM", "html_url": "https://github.com/konstantinARM", "followers_url": "https://api.github.com/users/konstantinARM/followers", "following_url": "https://api.github.com/users/konstantinARM/following{/other_user}", "gists_url": "https://api.github.com/users/konstantinARM/gists{/gist_id}", "starred_url": "https://api.github.com/users/konstantinARM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/konstantinARM/subscriptions", "organizations_url": "https://api.github.com/users/konstantinARM/orgs", "repos_url": "https://api.github.com/users/konstantinARM/repos", "events_url": "https://api.github.com/users/konstantinARM/events{/privacy}", "received_events_url": "https://api.github.com/users/konstantinARM/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-08-08T09:54:32Z", "updated_at": "2020-02-06T02:51:56Z", "closed_at": null, "author_association": "NONE", "body": "Hi guys,\r\n\r\nI work for ARM Ltd and we are looking into adding int16 quantization support for the TFLite format. For that, I would need to change the source code of some files, including the command-line interface implemented in /tensorflow/lite/python/tflite_convert.py. I was just wondering what is the most efficient way to debug my code and iterate quickly?\r\n\r\nI am currently using CLIon+Google Bazel Plugin. This combination allows quick and convenient code development process. Thanks to the tools, I can place breakpoints, see variables, etc(only for CPP though). What is the most efficient way to debug python APIs?\r\n\r\nI get, for example, I could rebuild the tflite_convert tool every time with the following command:\r\nbazel build //tensorflow/lite/python:tflite_convert.\r\n\r\nThis is fine, but I can\u2019t debug this executable, which is inconvenient and does not allow quick iterations.\r\nMay I ask you to share your best practices for tensorflow python APIs development?\r\nMany thanks,\r\nKonstantin"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31441", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31441/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31441/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31441/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31441", "id": 478365319, "node_id": "MDU6SXNzdWU0NzgzNjUzMTk=", "number": 31441, "title": "Zero copy between CPU and GPU", "user": {"login": "faerics", "id": 46574340, "node_id": "MDQ6VXNlcjQ2NTc0MzQw", "avatar_url": "https://avatars0.githubusercontent.com/u/46574340?v=4", "gravatar_id": "", "url": "https://api.github.com/users/faerics", "html_url": "https://github.com/faerics", "followers_url": "https://api.github.com/users/faerics/followers", "following_url": "https://api.github.com/users/faerics/following{/other_user}", "gists_url": "https://api.github.com/users/faerics/gists{/gist_id}", "starred_url": "https://api.github.com/users/faerics/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/faerics/subscriptions", "organizations_url": "https://api.github.com/users/faerics/orgs", "repos_url": "https://api.github.com/users/faerics/repos", "events_url": "https://api.github.com/users/faerics/events{/privacy}", "received_events_url": "https://api.github.com/users/faerics/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-08-08T09:51:30Z", "updated_at": "2019-12-18T17:24:43Z", "closed_at": null, "author_association": "NONE", "body": "<em>I made sure that this is a feature request. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): __tensorflow-gpu 1.13.1+nv19.5__\r\n- Are you willing to contribute it (Yes/No): __No__, not involved in project, could try\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nI use some network which requires **a lot of CPU <-> GPU transfers**, namely NMSv2 on a hardware platform where CPU and GPU have **unified (common) memory**. Such a transfers cause a lot of copying between the same memory, while **zero-copy** technique could be used.\r\n\r\nNVIDIA team [says](https://devtalk.nvidia.com/default/topic/1059017/jetson-agx-xavier/zero-copy-with-tensorflow/post/5369698/#5369698) that this request should be filed here.\r\n\r\n\r\n**Will this change the current api? How?**\r\n\r\n**Yes.** Probably requires adding some new option in config, which handles whether or not to copy between CPU & GPU. like\r\n```python\r\nconfig.gpu_options.zero_copy = True\r\n```\r\n\r\nMaybe some further investigation is needed.\r\n\r\n**Who will benefit with this feature?**\r\n\r\n- **Users** who use embedded devices with unified memory will get **performance increase** in cases with many CPU <-> GPU transfers.\r\n- **Tensorflow itself** could use this feature to persuade developers to choose it for embedded systems.\r\n\r\n**Any Other info.**\r\n\r\n- A [question](https://devtalk.nvidia.com/default/topic/1059017/jetson-agx-xavier/zero-copy-with-tensorflow/) about zero copy on NVIDIA DevTalk forum\r\n- A [post](http://arrayfire.com/zero-copy-on-tegra-k1/) about sources modification need to make zero-copy work"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31440", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31440/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31440/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31440/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31440", "id": 478334357, "node_id": "MDU6SXNzdWU0NzgzMzQzNTc=", "number": 31440, "title": "Better documentation for Dataset.from_tensors/from_tensor_slices", "user": {"login": "karwa", "id": 5254025, "node_id": "MDQ6VXNlcjUyNTQwMjU=", "avatar_url": "https://avatars2.githubusercontent.com/u/5254025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karwa", "html_url": "https://github.com/karwa", "followers_url": "https://api.github.com/users/karwa/followers", "following_url": "https://api.github.com/users/karwa/following{/other_user}", "gists_url": "https://api.github.com/users/karwa/gists{/gist_id}", "starred_url": "https://api.github.com/users/karwa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karwa/subscriptions", "organizations_url": "https://api.github.com/users/karwa/orgs", "repos_url": "https://api.github.com/users/karwa/repos", "events_url": "https://api.github.com/users/karwa/events{/privacy}", "received_events_url": "https://api.github.com/users/karwa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-08-08T08:50:56Z", "updated_at": "2019-09-27T22:58:32Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\n\r\nPlease provide a link to the documentation entry, for example:\r\nhttps://www.tensorflow.org/api_docs/python/tf/data/Dataset#from_tensor_slices\r\n\r\n## Description of issue (what needs changing):\r\n\r\nWhile following Google's ML crash course, I found it very difficult to understand the difference between `Dataset.from_tensors/from_tensor_slices` and when to use each. One thing that confused me was that `from_tensors` only creates a single tensor, despite the name including the plural form \"tensors\".\r\n\r\nBeginners get introduced to these APIs very early, but the current documentation consists of one terse sentence about behaviour (plus a multi-line warning about memory usage):\r\n\r\n```\r\nFTS:\r\nCreates a Dataset whose elements are slices of the given tensors.\r\n\r\nFT:\r\nCreates a Dataset with a single element, comprising the given tensors.\r\n```\r\n\r\nI think this would benefit from some elaboration and a clearer description of how the two are related. Given that users enocunter this API very early, the behaviour should ideally be obvious. A small example would help communicate this, e.g:\r\n\r\n```\r\nmy_data = { \"my_feature\" : [ [1, 2, 3], [4, 5, 6] ] }\r\ntf.data.Dataset.from_tensors(my_data) # Models a single, 2x3 tensor.\r\n```\r\n\r\n```\r\nmy_data = { \"my_feature\" : [ [1, 2, 3], [4, 5, 6] ] }\r\ntf.data.Dataset.from_tensor_slices(my_data) # Splits on rows. Models two, 1x3 tensors.\r\n```\r\n\r\n### Clear description\r\n\r\n### Correct links\r\n\r\nFine AFAIK\r\n\r\n### Parameters defined\r\n\r\nFine AFAIK\r\n\r\n### Returns defined\r\n\r\nFine AFAIK\r\n\r\n### Raises listed and defined\r\n\r\nFine AFAIK\r\n\r\n### Usage example\r\n\r\n**There is currently no usage example, and I think the documentation would greatly benefit from one.**\r\n\r\n### Request visuals, if applicable\r\n\r\nThere are currently no visuals. They might possibly help, but I think a usage example is probably sufficient. \r\n\r\n### Submit a pull request?\r\n\r\nI'm not sure if I'll submit a PR to improve this. I'd like to, but I'm still quite new to TF and wouldn't like to introduce any inaccuracies.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31434", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31434/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31434/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31434/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31434", "id": 478223655, "node_id": "MDU6SXNzdWU0NzgyMjM2NTU=", "number": 31434, "title": "tensorflow 1.14 build failed ", "user": {"login": "chengleiwang", "id": 11610520, "node_id": "MDQ6VXNlcjExNjEwNTIw", "avatar_url": "https://avatars3.githubusercontent.com/u/11610520?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chengleiwang", "html_url": "https://github.com/chengleiwang", "followers_url": "https://api.github.com/users/chengleiwang/followers", "following_url": "https://api.github.com/users/chengleiwang/following{/other_user}", "gists_url": "https://api.github.com/users/chengleiwang/gists{/gist_id}", "starred_url": "https://api.github.com/users/chengleiwang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chengleiwang/subscriptions", "organizations_url": "https://api.github.com/users/chengleiwang/orgs", "repos_url": "https://api.github.com/users/chengleiwang/repos", "events_url": "https://api.github.com/users/chengleiwang/events{/privacy}", "received_events_url": "https://api.github.com/users/chengleiwang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sjamesr", "id": 4641539, "node_id": "MDQ6VXNlcjQ2NDE1Mzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/4641539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjamesr", "html_url": "https://github.com/sjamesr", "followers_url": "https://api.github.com/users/sjamesr/followers", "following_url": "https://api.github.com/users/sjamesr/following{/other_user}", "gists_url": "https://api.github.com/users/sjamesr/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjamesr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjamesr/subscriptions", "organizations_url": "https://api.github.com/users/sjamesr/orgs", "repos_url": "https://api.github.com/users/sjamesr/repos", "events_url": "https://api.github.com/users/sjamesr/events{/privacy}", "received_events_url": "https://api.github.com/users/sjamesr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sjamesr", "id": 4641539, "node_id": "MDQ6VXNlcjQ2NDE1Mzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/4641539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjamesr", "html_url": "https://github.com/sjamesr", "followers_url": "https://api.github.com/users/sjamesr/followers", "following_url": "https://api.github.com/users/sjamesr/following{/other_user}", "gists_url": "https://api.github.com/users/sjamesr/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjamesr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjamesr/subscriptions", "organizations_url": "https://api.github.com/users/sjamesr/orgs", "repos_url": "https://api.github.com/users/sjamesr/repos", "events_url": "https://api.github.com/users/sjamesr/events{/privacy}", "received_events_url": "https://api.github.com/users/sjamesr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 21, "created_at": "2019-08-08T02:48:42Z", "updated_at": "2019-09-27T00:39:30Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- OS Platform and Distribution (Linux Ubuntu 18.04):\r\n- TensorFlow installed from (source):\r\n- TensorFlow version: r1.14\r\n- Python version: v3.6.8\r\n- Bazel version (tried v0.24.1, v0.26, v0.28):\r\n- GCC/Compiler version (gcc version 7.4):\r\n- CUDA/cuDNN version: 10.0/7.5\r\n- GPU model and memory: GTX1050\r\n\r\n\r\n\r\n**Describe the problem**\r\nI tried to use below command to build concat_op_test application.\r\n`bazel test -c opt  --strip=never  -s //tensorflow/core/kernels:concat_op_test --verbose_failures` \r\nThe compiler I select is clang and build with CUDA support.\r\nI got below errors when bazel version is 0.24.1 and 0.26\r\n```\r\nERROR: Skipping '//tensorflow/core/kernels:concat_op_test': error loading package 'tensorflow/core/kernels': Encountered error while reading extension file 'cu\r\nda/build_defs.bzl': no such package '@local_config_cuda//cuda': Traceback (most recent call last):\r\n        File \"/home/chengleiwang/code/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1266\r\n                _create_local_cuda_repository(repository_ctx)\r\n        File \"/home/chengleiwang/code/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1199, in _create_local_cuda_repository\r\n                _tpl(repository_ctx, \"crosstool:BUILD\", c...)\r\n        File \"/home/chengleiwang/code/tensorflow/third_party/gpus/cuda_configure.bzl\", line 745, in _tpl\r\n                repository_ctx.template(out, Label((\"//third_party/gpus/%s...)), ...)\r\nclass com.google.devtools.build.lib.syntax.SkylarkList$MutableList cannot be cast to class java.lang.String (com.google.devtools.build.lib.syntax.SkylarkList$MutableList is in unnamed module of loader 'app'; java.lang.String is in module java.base of loader 'bootstrap')\r\nERROR: error loading package 'tensorflow/core/kernels': Encountered error while reading extension file 'cuda/build_defs.bzl': no such package '@local_config_cu\r\nda//cuda': Traceback (most recent call last):\r\n        File \"/home/chengleiwang/code/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1266\r\n                _create_local_cuda_repository(repository_ctx)\r\n        File \"/home/chengleiwang/code/tensorflow/third_party/gpus/cuda_configure.bzl\", line 1199, in _create_local_cuda_repository\r\n                _tpl(repository_ctx, \"crosstool:BUILD\", c...)\r\n        File \"/home/chengleiwang/code/tensorflow/third_party/gpus/cuda_configure.bzl\", line 745, in _tpl\r\n                repository_ctx.template(out, Label((\"//third_party/gpus/%s...)), ...)\r\nclass com.google.devtools.build.lib.syntax.SkylarkList$MutableList cannot be cast to class java.lang.String (com.google.devtools.build.lib.syntax.SkylarkList$MutableList is in unnamed module of loader 'app'; java.lang.String is in module java.base of loader 'bootstrap')\r\n``` \r\nI got below errors when bazel version is 0.28.0 (I changed the bazel version check in configure.py   `current_bazel_version = check_bazel_version('0.24.1', '0.28.2')` )\r\n```\r\nStarting local Bazel server and connecting to it...\r\nInternal error thrown during build. Printing stack trace: java.lang.RuntimeException: Unrecoverable error while evaluating node 'REPOSITORY_DIREC\r\nTORY:@local_config_cuda' (requested by nodes 'REPOSITORY:@local_config_cuda')\r\n        at com.google.devtools.build.skyframe.AbstractParallelEvaluator$Evaluate.run(AbstractParallelEvaluator.java:528)\r\n        at com.google.devtools.build.lib.concurrent.AbstractQueueVisitor$WrappedRunnable.run(AbstractQueueVisitor.java:399)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n        at java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.ClassCastException: class com.google.devtools.build.lib.syntax.SkylarkList$MutableList cannot be cast to class java.lang.String (com.google.devtools.build.lib.syntax.SkylarkList$MutableList is in unnamed module of loader 'app'; java.lang.String is in module java.base of loader 'bootstrap')\r\n        at com.google.devtools.build.lib.bazel.repository.skylark.SkylarkRepositoryContext.createFileFromTemplate(SkylarkRepositoryContext.java:295)\r\n        at jdk.internal.reflect.GeneratedMethodAccessor22.invoke(Unknown Source)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n        at java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n        at com.google.devtools.build.lib.syntax.MethodDescriptor.call(MethodDescriptor.java:135)\r\n        at com.google.devtools.build.lib.syntax.FuncallExpression.invokeObjectMethod(FuncallExpression.java:930)\r\n        at com.google.devtools.build.lib.syntax.FuncallExpression.doEval(FuncallExpression.java:898)\r\n        at com.google.devtools.build.lib.syntax.Expression.eval(Expression.java:75)\r\n        at com.google.devtools.build.lib.syntax.Eval.execDispatch(Eval.java:201)\r\n        at com.google.devtools.build.lib.syntax.Eval.exec(Eval.java:183)\r\n        at com.google.devtools.build.lib.syntax.UserDefinedFunction.call(UserDefinedFunction.java:91)\r\n        at com.google.devtools.build.lib.syntax.BaseFunction.callWithArgArray(BaseFunction.java:475)\r\n        at com.google.devtools.build.lib.syntax.BaseFunction.call(BaseFunction.java:437)\r\n        at com.google.devtools.build.lib.syntax.FuncallExpression.callFunction(FuncallExpression.java:992)\r\n        at com.google.devtools.build.lib.syntax.FuncallExpression.doEval(FuncallExpression.java:904)\r\n        at com.google.devtools.build.lib.syntax.Expression.eval(Expression.java:75)\r\n        at com.google.devtools.build.lib.syntax.Eval.execDispatch(Eval.java:201)\r\n        at com.google.devtools.build.lib.syntax.Eval.exec(Eval.java:183)\r\n        at com.google.devtools.build.lib.syntax.UserDefinedFunction.call(UserDefinedFunction.java:91)\r\n        at com.google.devtools.build.lib.syntax.BaseFunction.callWithArgArray(BaseFunction.java:475)\r\n        at com.google.devtools.build.lib.syntax.BaseFunction.call(BaseFunction.java:437)\r\n        at com.google.devtools.build.lib.syntax.FuncallExpression.callFunction(FuncallExpression.java:992)\r\n        at com.google.devtools.build.lib.syntax.FuncallExpression.doEval(FuncallExpression.java:904)\r\n        at com.google.devtools.build.lib.syntax.Expression.eval(Expression.java:75)\r\n        at com.google.devtools.build.lib.syntax.Eval.execDispatch(Eval.java:201)\r\n        at com.google.devtools.build.lib.syntax.Eval.exec(Eval.java:183)\r\n        at com.google.devtools.build.lib.syntax.Eval.execStatements(Eval.java:231)\r\n        at com.google.devtools.build.lib.syntax.Eval.execIf(Eval.java:144)\r\n        at com.google.devtools.build.lib.syntax.Eval.execDispatch(Eval.java:214)\r\n        at com.google.devtools.build.lib.syntax.Eval.exec(Eval.java:183)\r\n        at com.google.devtools.build.lib.syntax.UserDefinedFunction.call(UserDefinedFunction.java:91)\r\n        at com.google.devtools.build.lib.syntax.BaseFunction.callWithArgArray(BaseFunction.java:475)\r\n        at com.google.devtools.build.lib.syntax.BaseFunction.call(BaseFunction.java:437)\r\n        at com.google.devtools.build.lib.bazel.repository.skylark.SkylarkRepositoryFunction.fetch(SkylarkRepositoryFunction.java:167)\r\n        at com.google.devtools.build.lib.rules.repository.RepositoryDelegatorFunction.fetchRepository(RepositoryDelegatorFunction.java:288)\r\n        at com.google.devtools.build.lib.rules.repository.RepositoryDelegatorFunction.compute(RepositoryDelegatorFunction.java:215)\r\n        at com.google.devtools.build.skyframe.AbstractParallelEvaluator$Evaluate.run(AbstractParallelEvaluator.java:451)\r\n        ... 4 more\r\n\r\nINFO: Elapsed time: 2.858s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (0 packages loaded)\r\n    currently loading: tensorflow/core/kernels\r\n    Fetching @local_config_cuda; fetching\r\nInternal error thrown during build. Printing stack trace: java.lang.RuntimeException: Unrecoverable error while evaluating node 'REPOSITORY_DIRECTORY:@local_config_cuda' (requested by nodes 'REPOSITORY:@local_config_cuda')\r\n        at com.google.devtools.build.skyframe.AbstractParallelEvaluator$Evaluate.run(AbstractParallelEvaluator.java:528)\r\n        at com.google.devtools.build.lib.concurrent.AbstractQueueVisitor$WrappedRunnable.run(AbstractQueueVisitor.java:399)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n        at java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.ClassCastException: class com.google.devtools.build.lib.syntax.SkylarkList$MutableList cannot be cast to class java.lang.String (com.google.devtools.build.lib.syntax.SkylarkList$MutableList is in unnamed module of loader 'app'; java.lang.String is in module java.base of loader 'bootstrap')\r\n        at com.google.devtools.build.lib.bazel.repository.skylark.SkylarkRepositoryContext.createFileFromTemplate(SkylarkRepositoryContext.java:295)\r\n        at jdk.internal.reflect.GeneratedMethodAccessor22.invoke(Unknown Source)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n        at java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n        at com.google.devtools.build.lib.syntax.MethodDescriptor.call(MethodDescriptor.java:135)\r\n        at com.google.devtools.build.lib.syntax.FuncallExpression.invokeObjectMethod(FuncallExpression.java:930)\r\n        at com.google.devtools.build.lib.syntax.FuncallExpression.doEval(FuncallExpression.java:898)\r\n        at com.google.devtools.build.lib.syntax.Expression.eval(Expression.java:75)\r\n        at com.google.devtools.build.lib.syntax.Eval.execDispatch(Eval.java:201)\r\n        at com.google.devtools.build.lib.syntax.Eval.exec(Eval.java:183)\r\n        at com.google.devtools.build.lib.syntax.UserDefinedFunction.call(UserDefinedFunction.java:91)\r\n        at com.google.devtools.build.lib.syntax.BaseFunction.callWithArgArray(BaseFunction.java:475)\r\n        at com.google.devtools.build.lib.syntax.BaseFunction.call(BaseFunction.java:437)\r\n        at com.google.devtools.build.lib.syntax.FuncallExpression.callFunction(FuncallExpression.java:992)\r\n        at com.google.devtools.build.lib.syntax.FuncallExpression.doEval(FuncallExpression.java:904)\r\n        at com.google.devtools.build.lib.syntax.Expression.eval(Expression.java:75)\r\n        at com.google.devtools.build.lib.syntax.Eval.execDispatch(Eval.java:201)\r\n        at com.google.devtools.build.lib.syntax.Eval.exec(Eval.java:183)\r\n        at com.google.devtools.build.lib.syntax.UserDefinedFunction.call(UserDefinedFunction.java:91)\r\n        at com.google.devtools.build.lib.syntax.BaseFunction.callWithArgArray(BaseFunction.java:475)\r\n        at com.google.devtools.build.lib.syntax.BaseFunction.call(BaseFunction.java:437)\r\n        at com.google.devtools.build.lib.syntax.FuncallExpression.callFunction(FuncallExpression.java:992)\r\n        at com.google.devtools.build.lib.syntax.FuncallExpression.doEval(FuncallExpression.java:904)\r\n        at com.google.devtools.build.lib.syntax.Expression.eval(Expression.java:75)\r\n        at com.google.devtools.build.lib.syntax.Eval.execDispatch(Eval.java:201)\r\n        at com.google.devtools.build.lib.syntax.Eval.exec(Eval.java:183)\r\n        at com.google.devtools.build.lib.syntax.Eval.execStatements(Eval.java:231)\r\n        at com.google.devtools.build.lib.syntax.Eval.execIf(Eval.java:144)\r\n        at com.google.devtools.build.lib.syntax.Eval.execDispatch(Eval.java:214)\r\n        at com.google.devtools.build.lib.syntax.Eval.exec(Eval.java:183)\r\n        at com.google.devtools.build.lib.syntax.UserDefinedFunction.call(UserDefinedFunction.java:91)\r\n        at com.google.devtools.build.lib.syntax.BaseFunction.callWithArgArray(BaseFunction.java:475)\r\n        at com.google.devtools.build.lib.syntax.BaseFunction.call(BaseFunction.java:437)\r\n        at com.google.devtools.build.lib.bazel.repository.skylark.SkylarkRepositoryFunction.fetch(SkylarkRepositoryFunction.java:167)\r\n        at com.google.devtools.build.lib.rules.repository.RepositoryDelegatorFunction.fetchRepository(RepositoryDelegatorFunction.java:288)\r\n        at com.google.devtools.build.lib.rules.repository.RepositoryDelegatorFunction.compute(RepositoryDelegatorFunction.java:215)\r\n        at com.google.devtools.build.skyframe.AbstractParallelEvaluator$Evaluate.run(AbstractParallelEvaluator.java:451)\r\n        ... 4 more\r\njava.lang.RuntimeException: Unrecoverable error while evaluating node 'REPOSITORY_DIRECTORY:@local_config_cuda' (requested by nodes 'REPOSITORY:@local_config_cuda')\r\n        at com.google.devtools.build.skyframe.AbstractParallelEvaluator$Evaluate.run(AbstractParallelEvaluator.java:528)\r\n        at com.google.devtools.build.lib.concurrent.AbstractQueueVisitor$WrappedRunnable.run(AbstractQueueVisitor.java:399)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n        at java.base/java.lang.Thread.run(Unknown Source)\r\nCaused by: java.lang.ClassCastException: class com.google.devtools.build.lib.syntax.SkylarkList$MutableList cannot be cast to class java.lang.String (com.google.devtools.build.lib.syntax.SkylarkList$MutableList is in unnamed module of loader 'app'; java.lang.String is in module java.base of loader 'bootstrap')\r\n        at com.google.devtools.build.lib.bazel.repository.skylark.SkylarkRepositoryContext.createFileFromTemplate(SkylarkRepositoryContext.java:295)\r\n        at jdk.internal.reflect.GeneratedMethodAccessor22.invoke(Unknown Source)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n        at java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n        at com.google.devtools.build.lib.syntax.MethodDescriptor.call(MethodDescriptor.java:135)\r\n        at com.google.devtools.build.lib.syntax.FuncallExpression.invokeObjectMethod(FuncallExpression.java:930)\r\n        at com.google.devtools.build.lib.syntax.FuncallExpression.doEval(FuncallExpression.java:898)\r\n        at com.google.devtools.build.lib.syntax.Expression.eval(Expression.java:75)\r\n        at com.google.devtools.build.lib.syntax.Eval.execDispatch(Eval.java:201)\r\n        at com.google.devtools.build.lib.syntax.Eval.exec(Eval.java:183)\r\n        at com.google.devtools.build.lib.syntax.UserDefinedFunction.call(UserDefinedFunction.java:91)\r\n        at com.google.devtools.build.lib.syntax.BaseFunction.callWithArgArray(BaseFunction.java:475)\r\n        at com.google.devtools.build.lib.syntax.BaseFunction.call(BaseFunction.java:437)\r\n        at com.google.devtools.build.lib.syntax.FuncallExpression.callFunction(FuncallExpression.java:992)\r\n        at com.google.devtools.build.lib.syntax.FuncallExpression.doEval(FuncallExpression.java:904)\r\n        at com.google.devtools.build.lib.syntax.Expression.eval(Expression.java:75)\r\n        at com.google.devtools.build.lib.syntax.Eval.execDispatch(Eval.java:201)\r\n        at com.google.devtools.build.lib.syntax.Eval.exec(Eval.java:183)\r\n        at com.google.devtools.build.lib.syntax.UserDefinedFunction.call(UserDefinedFunction.java:91)\r\n        at com.google.devtools.build.lib.syntax.BaseFunction.callWithArgArray(BaseFunction.java:475)\r\n        at com.google.devtools.build.lib.syntax.BaseFunction.call(BaseFunction.java:437)\r\n        at com.google.devtools.build.lib.syntax.FuncallExpression.callFunction(FuncallExpression.java:992)\r\n        at com.google.devtools.build.lib.syntax.FuncallExpression.doEval(FuncallExpression.java:904)\r\n        at com.google.devtools.build.lib.syntax.Expression.eval(Expression.java:75)\r\n        at com.google.devtools.build.lib.syntax.Eval.execDispatch(Eval.java:201)\r\n        at com.google.devtools.build.lib.syntax.Eval.exec(Eval.java:183)\r\n        at com.google.devtools.build.lib.syntax.Eval.execStatements(Eval.java:231)\r\n        at com.google.devtools.build.lib.syntax.Eval.execIf(Eval.java:144)\r\n        at com.google.devtools.build.lib.syntax.Eval.execDispatch(Eval.java:214)\r\n        at com.google.devtools.build.lib.syntax.Eval.exec(Eval.java:183)\r\n        at com.google.devtools.build.lib.syntax.UserDefinedFunction.call(UserDefinedFunction.java:91)\r\n        at com.google.devtools.build.lib.syntax.BaseFunction.callWithArgArray(BaseFunction.java:475)\r\n        at com.google.devtools.build.lib.syntax.BaseFunction.call(BaseFunction.java:437)\r\n        at com.google.devtools.build.lib.bazel.repository.skylark.SkylarkRepositoryFunction.fetch(SkylarkRepositoryFunction.java:167)\r\n        at com.google.devtools.build.lib.rules.repository.RepositoryDelegatorFunction.fetchRepository(RepositoryDelegatorFunction.java:288)\r\nFAILED: Build did NOT complete successfully (0 packages loaded)\r\n    currently loading: tensorflow/core/kernels\r\n    Fetching @local_config_cuda; fetching\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31429", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31429/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31429/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31429/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31429", "id": 478183566, "node_id": "MDU6SXNzdWU0NzgxODM1NjY=", "number": 31429, "title": "SIGABRT on `tf.image.encode_png` with empty tensor", "user": {"login": "wchargin", "id": 4317806, "node_id": "MDQ6VXNlcjQzMTc4MDY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4317806?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wchargin", "html_url": "https://github.com/wchargin", "followers_url": "https://api.github.com/users/wchargin/followers", "following_url": "https://api.github.com/users/wchargin/following{/other_user}", "gists_url": "https://api.github.com/users/wchargin/gists{/gist_id}", "starred_url": "https://api.github.com/users/wchargin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wchargin/subscriptions", "organizations_url": "https://api.github.com/users/wchargin/orgs", "repos_url": "https://api.github.com/users/wchargin/repos", "events_url": "https://api.github.com/users/wchargin/events{/privacy}", "received_events_url": "https://api.github.com/users/wchargin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-08-07T23:35:07Z", "updated_at": "2019-10-11T04:18:52Z", "closed_at": null, "author_association": "MEMBER", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): gLinux (like Debian)\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): tf-nightly-2.0-preview==2.0.0.dev20190807\r\n- TensorFlow version (use command below): v1.12.1-8193-ge7d48dc 2.0.0-dev20190807\r\n- Python version: 3.6.6\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: None\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\nCalling `tf.image.encode_png` kills the process with SIGABRT if you pass\r\na tensor that has no elements.\r\n\r\n**Describe the expected behavior**\r\n\r\nIt should never SIGABRT.\r\n\r\n**Code to reproduce the issue**\r\n\r\n```python\r\nimport tensorflow as tf\r\n\r\nimage = tf.cast(tf.tile([[[0, 0, 0]]], [0, 0, 1]), tf.uint8)\r\n# Or: = tf.cast(tf.reshape([], [0, 0, 3]))\r\ntry:\r\n  tf.print(image)\r\n  tf.print(tf.shape(image))\r\n  tf.image.encode_png(image)\r\nfinally:\r\n  print(\"We never get here!\")\r\n```\r\n\r\n```\r\n$ TF_CPP_MIN_LOG_LEVEL=1 python test.py\r\n[]\r\n[0 0 3]\r\n2019-08-07 16:32:12.864303: F tensorflow/core/lib/png/png_io.cc:347] 'image' Must be non NULL\r\nAborted\r\n$ echo $?\r\n134\r\n```\r\n\r\n**Other info / logs**\r\n\r\nThis also affects `tf.summary.image`.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31419", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31419/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31419/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31419/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31419", "id": 478069938, "node_id": "MDU6SXNzdWU0NzgwNjk5Mzg=", "number": 31419, "title": "Memory leakage when converting to tensor", "user": {"login": "benoitkoenig", "id": 4030678, "node_id": "MDQ6VXNlcjQwMzA2Nzg=", "avatar_url": "https://avatars3.githubusercontent.com/u/4030678?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benoitkoenig", "html_url": "https://github.com/benoitkoenig", "followers_url": "https://api.github.com/users/benoitkoenig/followers", "following_url": "https://api.github.com/users/benoitkoenig/following{/other_user}", "gists_url": "https://api.github.com/users/benoitkoenig/gists{/gist_id}", "starred_url": "https://api.github.com/users/benoitkoenig/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benoitkoenig/subscriptions", "organizations_url": "https://api.github.com/users/benoitkoenig/orgs", "repos_url": "https://api.github.com/users/benoitkoenig/repos", "events_url": "https://api.github.com/users/benoitkoenig/events{/privacy}", "received_events_url": "https://api.github.com/users/benoitkoenig/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1478826728, "node_id": "MDU6TGFiZWwxNDc4ODI2NzI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:core", "name": "comp:core", "color": "024391", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-08-07T18:12:44Z", "updated_at": "2019-11-22T12:31:30Z", "closed_at": null, "author_association": "NONE", "body": "`\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\nfor i in range(5000):\r\n    print(i)\r\n    array = np.random.random((1024, 1024))\r\n    tf.convert_to_tensor(array, dtype=tf.float32)\r\n`\r\n\r\nTensorflow version is 1.14.0, Numpy version is 1.17.0, python version is 3.6.8\r\nThe process is killed when i ~= 2400 on my machine\r\nThe command \"watch -d free -m\" shows that memory decreases over time until it gets close to zero, then crashes\r\n\r\nI did not find a way to free the memory from the unreferenced tensors\r\n\r\nBest,\r\nBeno\u00eet"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31417", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31417/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31417/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31417/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31417", "id": 477987348, "node_id": "MDU6SXNzdWU0Nzc5ODczNDg=", "number": 31417, "title": "libnvinfer-dev : Depends: libnvinfer5 (= 5.0.2-1+cuda10.0) but 5.1.5-1+cuda10.1 is to be installed", "user": {"login": "movie3105", "id": 52781140, "node_id": "MDQ6VXNlcjUyNzgxMTQw", "avatar_url": "https://avatars0.githubusercontent.com/u/52781140?v=4", "gravatar_id": "", "url": "https://api.github.com/users/movie3105", "html_url": "https://github.com/movie3105", "followers_url": "https://api.github.com/users/movie3105/followers", "following_url": "https://api.github.com/users/movie3105/following{/other_user}", "gists_url": "https://api.github.com/users/movie3105/gists{/gist_id}", "starred_url": "https://api.github.com/users/movie3105/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/movie3105/subscriptions", "organizations_url": "https://api.github.com/users/movie3105/orgs", "repos_url": "https://api.github.com/users/movie3105/repos", "events_url": "https://api.github.com/users/movie3105/events{/privacy}", "received_events_url": "https://api.github.com/users/movie3105/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-08-07T15:08:27Z", "updated_at": "2019-08-13T11:03:48Z", "closed_at": null, "author_association": "NONE", "body": "can someone tell me how to change the libvnfer to the right one ?\r\nlibnvinfer-dev : Depends: libnvinfer5 (= 5.0.2-1+cuda10.0) but 5.1.5-1+cuda10.1 is to be installed\r\nE: Unable to correct problems, you have held broken packages."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31412", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31412/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31412/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31412/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31412", "id": 477928491, "node_id": "MDU6SXNzdWU0Nzc5Mjg0OTE=", "number": 31412, "title": "DeprecationWarning: the imp module is deprecated", "user": {"login": "carlosgalvezp", "id": 1083865, "node_id": "MDQ6VXNlcjEwODM4NjU=", "avatar_url": "https://avatars2.githubusercontent.com/u/1083865?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carlosgalvezp", "html_url": "https://github.com/carlosgalvezp", "followers_url": "https://api.github.com/users/carlosgalvezp/followers", "following_url": "https://api.github.com/users/carlosgalvezp/following{/other_user}", "gists_url": "https://api.github.com/users/carlosgalvezp/gists{/gist_id}", "starred_url": "https://api.github.com/users/carlosgalvezp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carlosgalvezp/subscriptions", "organizations_url": "https://api.github.com/users/carlosgalvezp/orgs", "repos_url": "https://api.github.com/users/carlosgalvezp/repos", "events_url": "https://api.github.com/users/carlosgalvezp/events{/privacy}", "received_events_url": "https://api.github.com/users/carlosgalvezp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-08-07T13:26:55Z", "updated_at": "2019-10-16T06:12:01Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 18.04\r\n- **TensorFlow installed from (source or binary)**: binary (pip)\r\n- **TensorFlow version (use command below)**: tensorflow-gpu==2.0.0b1\r\n- **Python version**: 3.6.8\r\n- **CUDA/cuDNN version**: 10.0.130/7.6.2\r\n- **Exact command to reproduce**:\r\n\r\nCreate `test.py` file with the following content:\r\n`import tensorflow as tf`\r\n\r\nRun pytest (5.0.1) on it:\r\n`pytest test.py`\r\n\r\nResult:\r\n`============================================================================================= warnings summary =============================================================================================\r\nvenv/lib/python3.6/site-packages/tensorflow/python/pywrap_tensorflow_internal.py:15\r\n  venv/lib/python3.6/site-packages/tensorflow/python/pywrap_tensorflow_internal.py:15: DeprecationWarning: the imp module is deprecated in favour of importlib; see the module's documentation for alternative uses\r\n    import imp\r\n`\r\n\r\n### Describe the problem\r\nTensorFlow is using \"imp\" which is deprecated since Python 3.4. Are there plans to update it?\r\nThanks!"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31408", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31408/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31408/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31408/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31408", "id": 477874129, "node_id": "MDU6SXNzdWU0Nzc4NzQxMjk=", "number": 31408, "title": "Value of sqrt(2) is calculated incorrectly and inconsistently", "user": {"login": "tarokiritani", "id": 1145404, "node_id": "MDQ6VXNlcjExNDU0MDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1145404?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tarokiritani", "html_url": "https://github.com/tarokiritani", "followers_url": "https://api.github.com/users/tarokiritani/followers", "following_url": "https://api.github.com/users/tarokiritani/following{/other_user}", "gists_url": "https://api.github.com/users/tarokiritani/gists{/gist_id}", "starred_url": "https://api.github.com/users/tarokiritani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tarokiritani/subscriptions", "organizations_url": "https://api.github.com/users/tarokiritani/orgs", "repos_url": "https://api.github.com/users/tarokiritani/repos", "events_url": "https://api.github.com/users/tarokiritani/events{/privacy}", "received_events_url": "https://api.github.com/users/tarokiritani/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, {"login": "gadagashwini", "id": 48476109, "node_id": "MDQ6VXNlcjQ4NDc2MTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/48476109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadagashwini", "html_url": "https://github.com/gadagashwini", "followers_url": "https://api.github.com/users/gadagashwini/followers", "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}", "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions", "organizations_url": "https://api.github.com/users/gadagashwini/orgs", "repos_url": "https://api.github.com/users/gadagashwini/repos", "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}", "received_events_url": "https://api.github.com/users/gadagashwini/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-08-07T11:36:23Z", "updated_at": "2020-03-13T11:01:10Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04.1 LTS\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: NA\r\n- TensorFlow installed from (source or binary): not known\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source): not known\r\n- CUDA/cuDNN version: 10.0/7.6.0\r\n- GPU model and memory: Tesla K-80 12gb\r\n\r\n**Describe the current behavior**\r\nI just computed sqrt(2) 100 times in google colab. The values are computed inconsistently, and a bit incorrectly, in a single tensor.\r\n\r\n**Describe the expected behavior**\r\nsqrt(2) should be computed the same way every time.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nfrom __future__ import absolute_import, division, print_function, unicode_literals\r\n\r\nimport tensorflow as tf\r\n\r\ntf.enable_eager_execution()\r\n\r\nsqrt2s = tf.sqrt(tf.constant([2.0]*100, dtype=tf.float32))\r\nprint(sqrt2s)\r\nprint(sqrt2s[0].numpy())\r\nprint(sqrt2s[-1].numpy())\r\nprint(sqrt2s[0].numpy() == sqrt2s[-1].numpy())\r\n```\r\nThe results:\r\n```\r\ntf.Tensor(\r\n[1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134\r\n 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134\r\n 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134\r\n 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134\r\n 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134\r\n 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134\r\n 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134\r\n 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134\r\n 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134\r\n 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134\r\n 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134\r\n 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134\r\n 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134\r\n 1.4142134 1.4142134 1.4142134 1.4142134 1.4142134 1.4142135 1.4142135\r\n 1.4142135 1.4142135], shape=(100,), dtype=float32)\r\n1.4142134\r\n1.4142135\r\nFalse\r\n```\r\n**Other info / logs**\r\nThe notebook is here:\r\nhttps://colab.research.google.com/drive/1PQp2KtFUoaUEHETrIUne-J1Cu2blg2cG"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31399", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31399/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31399/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31399/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31399", "id": 477706597, "node_id": "MDU6SXNzdWU0Nzc3MDY1OTc=", "number": 31399, "title": "Bug in tflite_convert: when converting tf.gather operation (r1.14)", "user": {"login": "paanguin", "id": 24224076, "node_id": "MDQ6VXNlcjI0MjI0MDc2", "avatar_url": "https://avatars0.githubusercontent.com/u/24224076?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paanguin", "html_url": "https://github.com/paanguin", "followers_url": "https://api.github.com/users/paanguin/followers", "following_url": "https://api.github.com/users/paanguin/following{/other_user}", "gists_url": "https://api.github.com/users/paanguin/gists{/gist_id}", "starred_url": "https://api.github.com/users/paanguin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paanguin/subscriptions", "organizations_url": "https://api.github.com/users/paanguin/orgs", "repos_url": "https://api.github.com/users/paanguin/repos", "events_url": "https://api.github.com/users/paanguin/events{/privacy}", "received_events_url": "https://api.github.com/users/paanguin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-08-07T04:53:22Z", "updated_at": "2020-02-21T18:43:10Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- TensorFlow installed from (source or binary): built from r1.14 (https://github.com/tensorflow/tensorflow/tree/r1.14)\r\n- TensorFlow version (or github SHA if from source): 1.14\r\n\r\n\r\n\r\nI might found a bug in tflite_convert, and I want to report this.\r\nI am not sure whether you aware of this or not, but I will explain it for the safety.\r\n\r\nThe following converting code gives an error in making tflite model.\r\nIt complains about checking dims() during the conversion.\r\n\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\nexport_dir = 'test_saved_model'\r\nbuilder = tf.saved_model.builder.SavedModelBuilder(export_dir)\r\n\r\nweight = np.random.rand(32,512)\r\n\r\nx = tf.placeholder(tf.float32, shape=[None,512])\r\nW = tf.constant(weight,dtype=tf.float32, name='kernel')\r\nz = x*W\r\n\r\ngdim = tf.constant(3,dtype=tf.int32)\r\ngaxis = tf.constant(0,dtype=tf.int32)\r\nWg = tf.get_variable(\"kernel\", [32,512])\r\ny = tf.gather(Wg,gdim,gaxis)\r\nres = y\r\n\r\n\r\n\r\n\r\n\r\nwith tf.Session() as sess:\r\n        sess.run(tf.global_variables_initializer())\r\n\r\n        builder.add_meta_graph_and_variables(sess, [\"test\"])\r\n        builder.save(as_text=True)\r\n\r\n        converter = tf.lite.TFLiteConverter.from_session(sess, [x], [res])\r\n\r\n        # options for converter\r\n        converter.dump_graphviz_dir=\"graph_dir\" # outputs graph visualization file (.dot)\r\n        converter.dump_graphviz_video=True\r\n\r\n        tflite_model = converter.convert()\r\n\r\n```\r\n\r\nI found that it is caused by the resolve_constant_gather.cc\r\nhttps://github.com/tensorflow/tensorflow/blob/a497fb2da9258cbfaa4e443f446c5ab039ef4a32/tensorflow/lite/toco/graph_transformations/resolve_constant_gather.cc#L42\r\n\r\nIt seems that the Gather function assumes that 'coords_array' is always 1-dim array.\r\nHowever, tf.gather may accept it as 0-dim array, a scalar value, so that the checking fail if 'coords_array' became a scalar.\r\n\r\n\r\nMy solution is following modification for Gather function.\r\nIt worked for me when I personally built and installed from the modified source.\r\n\r\nI hope someone to check about this and fix the issue if necessary.\r\n\r\n```\r\n// Gathers data from axis 0.\r\ntemplate <ArrayDataType Type>\r\ninline void Gather(const Array& input_array, const Array& coords_array,\r\n                   Array* output_array) {\r\n  const Shape& input_shape = input_array.shape();\r\n  const std::vector<DataType<Type>>& input_data =\r\n      input_array.GetBuffer<Type>().data;\r\n  const Shape& coords_shape = coords_array.shape();\r\n  const std::vector<int32>& coords_data =\r\n      coords_array.GetBuffer<ArrayDataType::kInt32>().data;\r\n\r\n  const Shape& output_shape = output_array->shape();\r\n  std::vector<DataType<Type>>& output_data =\r\n      output_array->GetMutableBuffer<Type>().data;\r\n  output_data.resize(RequiredBufferSizeForShape(output_shape));\r\n\r\n  int stride = 1;\r\n  for (int i = 1; i < input_shape.dimensions_count(); ++i) {\r\n    stride *= input_shape.dims(i);\r\n  }\r\n\r\n  if (coords_shape.dimensions_count()==0){\r\n        // when coords_array is 0-dim (a constant)\r\n        CHECK_EQ(stride * 1, output_data.size());\r\n\r\n        DCHECK_GE(coords_data[0], 0);\r\n        DCHECK_LT(coords_data[0], input_shape.dims(0));\r\n        DataType<Type>* out = output_data.data();\r\n        const DataType<Type>* in = input_data.data() + coords_data[0] * stride;\r\n        memcpy(out, in, sizeof(DataType<Type>) * stride);\r\n  }\r\n  else {\r\n        // when coords_array is 1-dim array\r\n        CHECK_EQ(coords_shape.dims(0), output_array->shape().dims(0));\r\n\r\n        // Let's make sure we have enough space for all element in the memcpy()\r\n        // below, which writes 'stride' elements starting at 'i * stride'.\r\n        CHECK_EQ(stride * coords_shape.dims(0), output_data.size());\r\n\r\n        for (int i = 0; i < coords_shape.dims(0); ++i) {\r\n            DCHECK_GE(coords_data[i], 0);\r\n            DCHECK_LT(coords_data[i], input_shape.dims(0));\r\n            DataType<Type>* out = output_data.data() + i * stride;\r\n            const DataType<Type>* in = input_data.data() + coords_data[i] * stride;\r\n        }\r\n  }\r\n}\r\n\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31369", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31369/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31369/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31369/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31369", "id": 477392584, "node_id": "MDU6SXNzdWU0NzczOTI1ODQ=", "number": 31369, "title": "TensorflowLite Runtime Installation Doesn't provide Interpreter Package", "user": {"login": "vibhatha", "id": 12179219, "node_id": "MDQ6VXNlcjEyMTc5MjE5", "avatar_url": "https://avatars3.githubusercontent.com/u/12179219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vibhatha", "html_url": "https://github.com/vibhatha", "followers_url": "https://api.github.com/users/vibhatha/followers", "following_url": "https://api.github.com/users/vibhatha/following{/other_user}", "gists_url": "https://api.github.com/users/vibhatha/gists{/gist_id}", "starred_url": "https://api.github.com/users/vibhatha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vibhatha/subscriptions", "organizations_url": "https://api.github.com/users/vibhatha/orgs", "repos_url": "https://api.github.com/users/vibhatha/repos", "events_url": "https://api.github.com/users/vibhatha/events{/privacy}", "received_events_url": "https://api.github.com/users/vibhatha/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-08-06T13:48:38Z", "updated_at": "2019-09-02T18:09:17Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution: \r\n[Platform 1]\r\nNAME=\"Ubuntu\"\r\nVERSION=\"16.04.5 LTS (Xenial Xerus)\"\r\nID=ubuntu\r\nID_LIKE=debian\r\nPRETTY_NAME=\"Ubuntu 16.04.5 LTS\"\r\nVERSION_ID=\"16.04\"\r\n\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n\r\n[Platform 2]\r\nPRETTY_NAME=\"Mendel GNU/Linux 3 (Chef)\"\r\nNAME=\"Mendel GNU/Linux\"\r\nVERSION_ID=\"3\"\r\nVERSION=\"3 (chef)\"\r\nID=mendel\r\nID_LIKE=debian\r\n\r\n- TensorFlow installed from (source or binary): {Didn't install trying to use tflite_runtime} [TFLITE RUNTIME](https://www.tensorflow.org/lite/guide/python#run_an_inference_using_tflite_runtime)\r\n- TensorFlow version: N/A\r\n- Python version: Mendel 3.5.3 / Ubuntu 16.04 3.6.9\r\n- Installed using virtualenv? pip? conda?: virtualenv\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source):  Mendel (gcc (Debian 6.3.0-18+deb9u1) 6.3.0 20170516), Ubuntu 16.04 (gcc (Ubuntu 5.4.0-6ubuntu1~16.04.11) 5.4.0 20160609)\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\nI tried to install the TFLITE Runtime using \r\n\r\nhttps://www.tensorflow.org/lite/guide/python#run_an_inference_using_tflite_runtime\r\n\r\nWhen I tried to import as follows.\r\n\r\n`from tflite_runtime import Interpreter`\r\n\r\nI get the following error in both devices (Ubuntu 16.04 and Mendel)\r\n\r\n`>>> from tflite_runtime import Interpreter\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n`\r\n\r\nBut when I just do \r\n\r\n`import tflite_runtime`\r\n\r\nDoesn't give me an error in either platform. \r\nI tried using IntelliSense and it shows me no Interpreter API. \r\n\r\nAm I doing something wrong? How to fix this issue? \r\n\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31368", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31368/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31368/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31368/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31368", "id": 477389806, "node_id": "MDU6SXNzdWU0NzczODk4MDY=", "number": 31368, "title": "Internal compiler error", "user": {"login": "DocDriven", "id": 30296124, "node_id": "MDQ6VXNlcjMwMjk2MTI0", "avatar_url": "https://avatars2.githubusercontent.com/u/30296124?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DocDriven", "html_url": "https://github.com/DocDriven", "followers_url": "https://api.github.com/users/DocDriven/followers", "following_url": "https://api.github.com/users/DocDriven/following{/other_user}", "gists_url": "https://api.github.com/users/DocDriven/gists{/gist_id}", "starred_url": "https://api.github.com/users/DocDriven/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DocDriven/subscriptions", "organizations_url": "https://api.github.com/users/DocDriven/orgs", "repos_url": "https://api.github.com/users/DocDriven/repos", "events_url": "https://api.github.com/users/DocDriven/events{/privacy}", "received_events_url": "https://api.github.com/users/DocDriven/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 16, "created_at": "2019-08-06T13:43:34Z", "updated_at": "2020-02-19T17:48:55Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: -\r\n- TensorFlow installed from (source or binary): Docker image latest-gpu-py3\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source): -\r\n- GCC/Compiler version (if compiling from source): -\r\n- CUDA/cuDNN version: 10.1\r\n- GPU model and memory: RTX 2080 Ti / 12 GB\r\n\r\nI have created a fully-quantized tf lite model from a saved model. But trying to compile it with the edgetpu_compiler, I get an error:\r\n\r\n```\r\nuser@ubuntu:~/tf/tensorflow1_14$ edgetpu_compiler saved_converted_linearmodel_tpu_1.14.0.tflite \r\nEdge TPU Compiler version 2.0.258810407\r\nINFO: Initialized TensorFlow Lite runtime.\r\n\r\nInternal compiler error. Aborting!\r\n```\r\nError message is unfortunately not very helpful. The non-compiled version is loadable and produces the correct results.\r\n\r\nI have attached the model that I try to compile, as well as its visualization (via visualize.py).\r\n\r\n[litemodel.tar.gz](https://github.com/tensorflow/tensorflow/files/3472515/litemodel.tar.gz)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31358", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31358/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31358/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31358/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31358", "id": 477216794, "node_id": "MDU6SXNzdWU0NzcyMTY3OTQ=", "number": 31358, "title": "[freeze_graph]Node def expected inputs do not match with tf.keras layers", "user": {"login": "stefanpantic", "id": 26638219, "node_id": "MDQ6VXNlcjI2NjM4MjE5", "avatar_url": "https://avatars2.githubusercontent.com/u/26638219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stefanpantic", "html_url": "https://github.com/stefanpantic", "followers_url": "https://api.github.com/users/stefanpantic/followers", "following_url": "https://api.github.com/users/stefanpantic/following{/other_user}", "gists_url": "https://api.github.com/users/stefanpantic/gists{/gist_id}", "starred_url": "https://api.github.com/users/stefanpantic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stefanpantic/subscriptions", "organizations_url": "https://api.github.com/users/stefanpantic/orgs", "repos_url": "https://api.github.com/users/stefanpantic/repos", "events_url": "https://api.github.com/users/stefanpantic/events{/privacy}", "received_events_url": "https://api.github.com/users/stefanpantic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097545273, "node_id": "MDU6TGFiZWwxMDk3NTQ1Mjcz", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:grappler", "name": "comp:grappler", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-08-06T07:32:12Z", "updated_at": "2019-08-15T21:29:35Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): Anaconda binary (```tensorflow-gpu```)\r\n- TensorFlow version (use command below): ```b'unknown' 1.13.1```\r\n- Python version: 3.6.7\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A (Because of conda binary)\r\n- GPU model and memory: GTX 1080Ti, 11Gb\r\n\r\n**Describe the current behavior**\r\nWhen I try to freeze my TF graph that uses ```tf.keras``` layers I get the following exception.\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/stefan/miniconda3/envs/ds/lib/python3.6/site-packages/tensorflow/python/framework/importer.py\", line 426, in import_graph_def\r\n    graph._c_graph, serialized, options)  # pylint: disable=protected-access\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: NodeDef expected inputs '' do not match 1 inputs specified; Op<name=Const; signature= -> output:dtype; attr=value:tensor; attr=dtype:type>; NodeDef: {{node model/batch_normalization_v1/cond/Const_2}}\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/stefan/Documents/work/asr/reproduce_bug/bug.py\", line 100, in <module>\r\n    export()\r\n  File \"/home/stefan/Documents/work/asr/reproduce_bug/bug.py\", line 95, in export\r\n    filename_tensor_name='')\r\n  File \"/home/stefan/miniconda3/envs/ds/lib/python3.6/site-packages/tensorflow/python/tools/freeze_graph.py\", line 146, in freeze_graph_with_def_protos\r\n    _ = importer.import_graph_def(input_graph_def, name=\"\")\r\n  File \"/home/stefan/miniconda3/envs/ds/lib/python3.6/site-packages/tensorflow/python/util/deprecation.py\", line 507, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/home/stefan/miniconda3/envs/ds/lib/python3.6/site-packages/tensorflow/python/framework/importer.py\", line 430, in import_graph_def\r\n    raise ValueError(str(e))\r\nValueError: NodeDef expected inputs '' do not match 1 inputs specified; Op<name=Const; signature= -> output:dtype; attr=value:tensor; attr=dtype:type>; NodeDef: {{node model/batch_normalization_v1/cond/Const_2}}\r\n```\r\n\r\nIt seems to be related to the ```tf.keras.layers.BatchNormalization```. When I pass the ```training=True``` or ```training=False``` to it the error goes away.\r\n\r\n**Describe the expected behavior**\r\nThe graph should freeze no matter the ```training``` parameter.\r\n\r\n**Code to reproduce the issue**\r\nStandalone script required to reproduce.\r\n```\r\nimport os\r\n\r\nimport tensorflow as tf\r\nfrom tensorflow.python.keras.datasets import mnist\r\nfrom tensorflow.python.tools import freeze_graph\r\n\r\n\r\nclass Model:\r\n    def __init__(self):\r\n        self._conv = tf.keras.layers.Conv2D(filters=64, kernel_size=5, activation=tf.nn.relu)\r\n        self._batch_norm = tf.keras.layers.BatchNormalization()\r\n        self._flatten = tf.keras.layers.Flatten()\r\n        self._logits = tf.keras.layers.Dense(units=10)\r\n\r\n    def forward(self, inputs):\r\n        with tf.name_scope('model'):\r\n            conv_out = self._conv(inputs)\r\n            norm_out = self._batch_norm(conv_out)\r\n            flat_out = self._flatten(norm_out)\r\n            logits = self._logits(flat_out)\r\n\r\n        return tf.identity(logits, name='logits')\r\n\r\n    @staticmethod\r\n    def loss(logits, labels):\r\n        with tf.name_scope('loss'):\r\n            loss = tf.losses.sparse_softmax_cross_entropy(labels=labels, logits=logits)\r\n\r\n        return loss\r\n\r\n\r\ndef train():\r\n    def map_fn(x, y):\r\n        return tf.expand_dims(tf.math.divide(tf.cast(x, tf.float32), 255), axis=2), tf.cast(y, tf.int32)\r\n\r\n    (x_train, y_train), (_, _) = mnist.load_data()\r\n\r\n    dataset = tf.data.Dataset.from_tensor_slices((x_train, y_train))\r\n    dataset = dataset.map(map_fn).batch(128).repeat(10)\r\n\r\n    iterator = dataset.make_one_shot_iterator()\r\n    inputs, labels = iterator.get_next()\r\n\r\n    model = Model()\r\n    logits = model.forward(inputs)\r\n    loss = model.loss(logits, labels)\r\n\r\n    with tf.name_scope('optimizer'):\r\n        optimizer = tf.train.AdamOptimizer(learning_rate=1e4).minimize(loss,\r\n                                                                       global_step=tf.train.get_or_create_global_step())\r\n\r\n    with tf.train.MonitoredTrainingSession(checkpoint_dir='./tmp') as sess:\r\n        while not sess.should_stop():\r\n            print(sess.run([optimizer, loss])[1])\r\n\r\n\r\ndef export():\r\n    tf.reset_default_graph()\r\n\r\n    export_dir = './tmp/frozen'\r\n    model = Model()\r\n\r\n    inputs = tf.placeholder(dtype=tf.float32, shape=[None, 28, 28, 1], name='input_placeholder')\r\n    _ = model.forward(inputs)\r\n\r\n    with open('./tmp/checkpoint') as f:\r\n        line = f.readline()\r\n        checkpoint = line[line.find('\"') + 1:line.rfind('\"')]\r\n        print(checkpoint)\r\n\r\n    with tf.Session(graph=tf.get_default_graph()) as sess:\r\n        saver = tf.train.Saver()\r\n\r\n        sess.run(tf.global_variables_initializer())\r\n        print(os.path.join('./tmp', checkpoint))\r\n        saver.restore(sess, os.path.join('./tmp', checkpoint))\r\n\r\n        builder = tf.saved_model.Builder('./tmp/frozen')\r\n        builder.add_meta_graph_and_variables(sess, [tf.saved_model.tag_constants.SERVING], strip_default_attrs=True)\r\n        builder.save()\r\n\r\n        graph = tf.graph_util.remove_training_nodes(sess.graph.as_graph_def(), protected_nodes=['logits'])\r\n\r\n        freeze_graph.freeze_graph_with_def_protos(\r\n            input_graph_def=graph,\r\n            input_saver_def=None,\r\n            input_saved_model_dir=export_dir,\r\n            saved_model_tags=[tf.saved_model.tag_constants.SERVING],\r\n            input_checkpoint=os.path.join('./tmp', checkpoint),\r\n            output_node_names='logits',\r\n            output_graph=os.path.join('./tmp', 'frozen.pb'),\r\n            clear_devices=True,\r\n            initializer_nodes='',\r\n            restore_op_name='',\r\n            filename_tensor_name='')\r\n\r\n\r\nif __name__ == '__main__':\r\n    train()\r\n    export()\r\n\r\n```\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31355", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31355/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31355/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31355/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31355", "id": 477152096, "node_id": "MDU6SXNzdWU0NzcxNTIwOTY=", "number": 31355, "title": "Custom OPS with registering gradient functions error in eager backprop", "user": {"login": "MKFMIKU", "id": 13622651, "node_id": "MDQ6VXNlcjEzNjIyNjUx", "avatar_url": "https://avatars3.githubusercontent.com/u/13622651?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MKFMIKU", "html_url": "https://github.com/MKFMIKU", "followers_url": "https://api.github.com/users/MKFMIKU/followers", "following_url": "https://api.github.com/users/MKFMIKU/following{/other_user}", "gists_url": "https://api.github.com/users/MKFMIKU/gists{/gist_id}", "starred_url": "https://api.github.com/users/MKFMIKU/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MKFMIKU/subscriptions", "organizations_url": "https://api.github.com/users/MKFMIKU/orgs", "repos_url": "https://api.github.com/users/MKFMIKU/repos", "events_url": "https://api.github.com/users/MKFMIKU/events{/privacy}", "received_events_url": "https://api.github.com/users/MKFMIKU/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-08-06T03:36:04Z", "updated_at": "2019-10-08T22:08:46Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Centos\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): PIP\r\n- TensorFlow version (use command below): 2.0.0-beta1\r\n- Python version: 3.6.9\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: V10.0.130 / V7.0.5\r\n- GPU model and memory: NVIDIA TITAN Xp\r\n\r\n**Describe the current behavior**\r\nIf I run the code with directly\r\n```\r\n2019-08-06 11:32:33.687311: E tensorflow/stream_executor/cuda/cuda_driver.cc:1003] failed to synchronize the stop event: CUDA_ERROR_ILLEGAL_ADDRESS: an illegal memory access was encountered\r\n2019-08-06 11:32:33.687356: E tensorflow/stream_executor/gpu/gpu_timer.cc:78] Invalid argument: error recording CUDA event on stream 0x7fce8a062590: CUDA_ERROR_ILLEGAL_ADDRESS: an illegal memory access was encountered\r\n2019-08-06 11:32:33.687558: F ./tensorflow/core/kernels/reduction_gpu_kernels.cu.h:644] Non-OK-status: CudaLaunchKernel( ColumnReduceKernel<IN_T, T*, Op>, grid_dim, block_dim, 0, cu_stream, in, (T*)temp_storage.flat<int8_t>().data(), extent_x, extent_y, op, init) status: Internal: an illegal memory access was encountered\r\nAborted (core dumped)\r\n```\r\n\r\nIf I run the code with `cuda-memcheck --binary-patching no python train_simple.py`\r\n```\r\nTraceback (most recent call last):\r\n  File \"train_simple.py\", line 71, in <module>\r\n    grads = tape.gradient(loss, model.trainable_variables)\r\n  File \"/media/disk1/fordata/web_server/kangfu/anaconda3/envs/tensorflow-gpu/lib/python3.6/site-packages/tensorflow/python/eager/backprop.py\", line 1002, in gradient\r\n    unconnected_gradients=unconnected_gradients)\r\n  File \"/media/disk1/fordata/web_server/kangfu/anaconda3/envs/tensorflow-gpu/lib/python3.6/site-packages/tensorflow/python/eager/imperative_grad.py\", line 76, in imperative_grad\r\n    compat.as_str(unconnected_gradients.value))\r\n  File \"/media/disk1/fordata/web_server/kangfu/anaconda3/envs/tensorflow-gpu/lib/python3.6/site-packages/tensorflow/python/eager/backprop.py\", line 137, in _gradient_function\r\n    return grad_fn(mock_op, *out_grads)\r\n  File \"/media/disk4/fordata/web_server/kangfu/HDRNet-TF/hdrnet_ops.py\", line 24, in _bilateral_slice_grad\r\n    grid_tensor, guide_tensor, input_tensor, grad, has_offset=has_offset)\r\n  File \"<string>\", line 355, in bilateral_slice_apply_grad\r\n  File \"<string>\", line 3, in raise_from\r\ntensorflow.python.framework.errors_impl.InternalError: Failed launch BilateralSliceApplyGradKernel. [Op:BilateralSliceApplyGrad]\r\n```\r\n**Describe the expected behavior**\r\nThe code should calculate gradient properly without error. The custom ops run correctly in inferring mode, however, it throws bug during `model.fit` or below:\r\n```\r\nwith tf.GradientTape() as tape:\r\n    output = model(_full_res)\r\n    loss = tf.keras.losses.mse(output, _full_res)\r\ngrads = tape.gradient(loss, model.trainable_variables)\r\n```\r\n\r\n**Code to reproduce the issue**\r\nI define the custom ops like below:\r\n\r\n```\r\nREGISTER_KERNEL_BUILDER(Name(\"BilateralSlice\").Device(DEVICE_GPU), BilateralSliceOp);\r\nREGISTER_KERNEL_BUILDER(Name(\"BilateralSliceGrad\").Device(DEVICE_GPU), BilateralSliceGradOp);\r\nREGISTER_KERNEL_BUILDER(Name(\"BilateralSliceApply\").Device(DEVICE_GPU), BilateralSliceApplyOp);\r\nREGISTER_KERNEL_BUILDER(Name(\"BilateralSliceApplyGrad\").Device(DEVICE_GPU), BilateralSliceApplyGradOp);\r\n```\r\nIt seems like the custom ops not work OK in eager mode\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31354", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31354/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31354/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31354/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31354", "id": 477148066, "node_id": "MDU6SXNzdWU0NzcxNDgwNjY=", "number": 31354, "title": "Tensorflow library query API", "user": {"login": "peardox", "id": 1549219, "node_id": "MDQ6VXNlcjE1NDkyMTk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1549219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peardox", "html_url": "https://github.com/peardox", "followers_url": "https://api.github.com/users/peardox/followers", "following_url": "https://api.github.com/users/peardox/following{/other_user}", "gists_url": "https://api.github.com/users/peardox/gists{/gist_id}", "starred_url": "https://api.github.com/users/peardox/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peardox/subscriptions", "organizations_url": "https://api.github.com/users/peardox/orgs", "repos_url": "https://api.github.com/users/peardox/repos", "events_url": "https://api.github.com/users/peardox/events{/privacy}", "received_events_url": "https://api.github.com/users/peardox/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-08-06T03:18:15Z", "updated_at": "2019-08-14T04:19:41Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n**System information**\r\nMac / Windows / Linux - x86 + Aarch64 \r\n\r\n- TensorFlow version (you are using):\r\n1.11.0 and upwards\r\n\r\n- Are you willing to contribute it (Yes/No):\r\nIf I can help I will gladly\r\n\r\n**Describe the feature and the current behavior/state.**\r\nPresently tensorflow_framework and it's friends (e.g. the _jni version etc) use cpu_feature_guard / cpu_info to check if your CPU supports the instruction set the build was performed with and complains if you're missing features / extra features.\r\n\r\nThere should be a way to programmatically query the library and CPU (+ GPU???) to discover what feature set the library was compiled with etc.\r\n\r\nPresently there are a couple of un-exposed methods that do some of the desired functionality...\r\n\r\nInfoAboutUnusedCPUFeatures and TestCPUFeature are examples of useful features that could be exposed via a c_api extension\r\n\r\nWhat I propose is that the library expose the features used to compile it and the features the host is capable of supporting with various overlapping calls allowing the caller to identify the following cases...\r\n\r\n1) The library matches the host perfectly (very rare)\r\n2) The library includes features not supported by the host\r\n3) The library works on the host but does not use all available features (a-la feature-guard)\r\n \r\n(2) + (3) should return a set of unsupported / extra features\r\n\r\n**Will this change the current api? How?**\r\nNo, it can be implemented as an extra C API\r\n\r\n**Who will benefit with this feature?**\r\nPotentially any user who experiences a crash from unsupported features or could reasonably expect better performance from a rebuild\r\n\r\nMy personal experience showed a 100% improvement in speed on my Mac and Linux machines using CPU-only builds. On GPU builds the change is, of course, trivial\r\n\r\nAs Tensorflow is increasingly becoming a hobbyist interest - \"Build a brain out of a Raspberry Pi\" fluff pieces it seems advisable to cater for the non academic / commercial user\r\n\r\n**Any Other info.**\r\nPotentially this feature would allow external API developers to check for host issues before starting rather than, at worst, dump the core (see this happen several times)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31352", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31352/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31352/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31352/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31352", "id": 477136066, "node_id": "MDU6SXNzdWU0NzcxMzYwNjY=", "number": 31352, "title": "(Windows) ptxas_utils.cc(54): 'tensorflow::SubProcess' unimplemented class?", "user": {"login": "TheNewSound", "id": 1410503, "node_id": "MDQ6VXNlcjE0MTA1MDM=", "avatar_url": "https://avatars1.githubusercontent.com/u/1410503?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TheNewSound", "html_url": "https://github.com/TheNewSound", "followers_url": "https://api.github.com/users/TheNewSound/followers", "following_url": "https://api.github.com/users/TheNewSound/following{/other_user}", "gists_url": "https://api.github.com/users/TheNewSound/gists{/gist_id}", "starred_url": "https://api.github.com/users/TheNewSound/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TheNewSound/subscriptions", "organizations_url": "https://api.github.com/users/TheNewSound/orgs", "repos_url": "https://api.github.com/users/TheNewSound/repos", "events_url": "https://api.github.com/users/TheNewSound/events{/privacy}", "received_events_url": "https://api.github.com/users/TheNewSound/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-08-06T02:23:27Z", "updated_at": "2019-10-08T22:10:51Z", "closed_at": null, "author_association": "NONE", "body": "tags: 2.0.0-beta0 subtype:windows type:build/install\r\n\r\n**System information**\r\n- OS Platform and Distribution: Windows 10\r\n- Mobile device: -\r\n- TensorFlow installed from: Source\r\n- TensorFlow version: r2.0\r\n- Python version: 3.6.8\r\n- Installed using virtualenv? pip? conda?: NO, pip is installed, NO\r\n- Bazel version: 26.0\r\n- GCC/Compiler version: -\r\n- CUDA/cuDNN version: 10.1 / 7.6.2\r\n- GPU model and memory: GTX 1060 3GB\r\n- CPU: i7-860 (AVX unsupported) (64-bit)\r\n\r\n**Describe the problem**\r\nI know CUDA 10.1/VS2019 is unsupported for 2.0 currently, but the error may have nothing to do with that? Tensorflow's SubProcess class is not implemented for Windows? Is this a necessity, how is Tensorflow-gpu else compiled for Windows?\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n`python ./configure`\r\n```\r\nbazel build --config=cuda --define=no_tensorflow_py_deps=true //tensorflow/tools/pip_package:build_pip_package --define=no_tensorflow_py_deps=true --copt=-nvcc_options=disable-warnings\r\n```\r\n\r\n\r\n**Any other info / logs**\r\n```\r\nC:/users/admin/documents/git-tf/tensorflow/tensorflow/stream_executor/cuda/BUILD:97:1: C++ compilation of rule '//tensorflow/stream_executor/cuda:ptxas_utils' failed (Exit 2): python.exe failed: error executing command\r\n  cd C:/users/admin/_bazel_admin/52rkf7yz/execroot/org_tensorflow\r\n  SET CUDA_TOOLKIT_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.1\r\n    SET INCLUDE=C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.22.27905\\ATLMFC\\include;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.22.27905\\include;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\ucrt;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\shared;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\winrt;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\cppwinrt\r\n    SET LIB=C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.22.27905\\ATLMFC\\lib\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.22.27905\\lib\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.18362.0\\ucrt\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.18362.0\\um\\x64;\r\n    SET PATH=C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.22.27905\\bin\\HostX64\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\Common7\\IDE\\VC\\VCPackages;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\Common7\\IDE\\CommonExtensions\\Microsoft\\TestWindow;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\Common7\\IDE\\CommonExtensions\\Microsoft\\TeamFoundation\\Team Explorer;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\MSBuild\\Current\\bin\\Roslyn;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\Team Tools\\Performance Tools\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\Team Tools\\Performance Tools;C:\\Program Files (x86)\\Microsoft Visual Studio\\Shared\\Common\\VSPerfCollectionTools\\vs2019\\\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio\\Shared\\Common\\VSPerfCollectionTools\\vs2019\\;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\10.0.18362.0\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\\\MSBuild\\Current\\Bin;C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\Common7\\IDE\\;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\Common7\\Tools\\;;C:\\Windows\\system32;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\Common7\\IDE\\CommonExtensions\\Microsoft\\CMake\\CMake\\bin;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\Common7\\IDE\\CommonExtensions\\Microsoft\\CMake\\Ninja\r\n    SET PWD=/proc/self/cwd\r\n    SET PYTHON_BIN_PATH=C:/Program Files/Python36/python.exe\r\n    SET PYTHON_LIB_PATH=C:/Program Files/Python36/lib/site-packages\r\n    SET RUNFILES_MANIFEST_ONLY=1\r\n    SET TEMP=C:\\Users\\Admin\\AppData\\Local\\Temp\r\n    SET TF_CONFIGURE_IOS=0\r\n    SET TF_CUDA_COMPUTE_CAPABILITIES=6.1\r\n    SET TF_NEED_CUDA=1\r\n    SET TMP=C:\\Users\\Admin\\AppData\\Local\\Temp\r\n  C:/Program Files/Python36/python.exe -B external/local_config_cuda/crosstool/windows/msvc_wrapper_for_nvcc.py /nologo /DCOMPILER_MSVC /DNOMINMAX /D_WIN32_WINNT=0x0600 /D_CRT_SECURE_NO_DEPRECATE /D_CRT_SECURE_NO_WARNINGS /D_SILENCE_STDEXT_HASH_DEPRECATION_WARNINGS /bigobj /Zm500 /J /Gy /GF /EHsc /wd4351 /wd4291 /wd4250 /wd4996 /I. /Ibazel-out/x64_windows-py2-opt/bin /Iexternal/com_google_absl /Ibazel-out/x64_windows-py2-opt/bin/external/com_google_absl /Iexternal/nsync /Ibazel-out/x64_windows-py2-opt/bin/external/nsync /Iexternal/eigen_archive /Ibazel-out/x64_windows-py2-opt/bin/external/eigen_archive /Iexternal/local_config_sycl /Ibazel-out/x64_windows-py2-opt/bin/external/local_config_sycl /Iexternal/gif_archive /Ibazel-out/x64_windows-py2-opt/bin/external/gif_archive /Iexternal/jpeg /Ibazel-out/x64_windows-py2-opt/bin/external/jpeg /Iexternal/protobuf_archive /Ibazel-out/x64_windows-py2-opt/bin/external/protobuf_archive /Iexternal/com_googlesource_code_re2 /Ibazel-out/x64_windows-py2-opt/bin/external/com_googlesource_code_re2 /Iexternal/farmhash_archive /Ibazel-out/x64_windows-py2-opt/bin/external/farmhash_archive /Iexternal/fft2d /Ibazel-out/x64_windows-py2-opt/bin/external/fft2d /Iexternal/highwayhash /Ibazel-out/x64_windows-py2-opt/bin/external/highwayhash /Iexternal/zlib_archive /Ibazel-out/x64_windows-py2-opt/bin/external/zlib_archive /Iexternal/double_conversion /Ibazel-out/x64_windows-py2-opt/bin/external/double_conversion /Iexternal/snappy /Ibazel-out/x64_windows-py2-opt/bin/external/snappy /Iexternal/local_config_cuda /Ibazel-out/x64_windows-py2-opt/bin/external/local_config_cuda /Ibazel-out/x64_windows-py2-opt/bin/external/local_config_cuda/cuda/_virtual_includes/cuda_headers_virtual /Iexternal/nsync/public /Ibazel-out/x64_windows-py2-opt/bin/external/nsync/public /Iexternal/eigen_archive /Ibazel-out/x64_windows-py2-opt/bin/external/eigen_archive /Iexternal/gif_archive/lib /Ibazel-out/x64_windows-py2-opt/bin/external/gif_archive/lib /Iexternal/gif_archive/windows /Ibazel-out/x64_windows-py2-opt/bin/external/gif_archive/windows /Iexternal/protobuf_archive/src /Ibazel-out/x64_windows-py2-opt/bin/external/protobuf_archive/src /Iexternal/farmhash_archive/src /Ibazel-out/x64_windows-py2-opt/bin/external/farmhash_archive/src /Iexternal/zlib_archive /Ibazel-out/x64_windows-py2-opt/bin/external/zlib_archive /Iexternal/double_conversion /Ibazel-out/x64_windows-py2-opt/bin/external/double_conversion /Iexternal/local_config_cuda/cuda /Ibazel-out/x64_windows-py2-opt/bin/external/local_config_cuda/cuda /Iexternal/local_config_cuda/cuda/cuda/include /Ibazel-out/x64_windows-py2-opt/bin/external/local_config_cuda/cuda/cuda/include /D__CLANG_SUPPORT_DYN_ANNOTATION__ /DEIGEN_MPL2_ONLY /DEIGEN_MAX_ALIGN_BYTES=64 /DEIGEN_HAS_TYPE_TRAITS=0 /DTF_USE_SNAPPY /showIncludes /MD /O2 /DNDEBUG -w -DWIN32_LEAN_AND_MEAN -DNOGDI -nvcc_options=disable-warnings /Fobazel-out/x64_windows-py2-opt/bin/tensorflow/stream_executor/cuda/_objs/ptxas_utils/ptxas_utils.o /c tensorflow/stream_executor/cuda/ptxas_utils.cc\r\nExecution platform: @bazel_tools//platforms:host_platform\r\ntensorflow/stream_executor/cuda/ptxas_utils.cc(54): error C2039: 'SetProgram': is not a member of 'tensorflow::SubProcess'\r\n.\\tensorflow/core/platform/windows/subprocess.h(27): note: see declaration of 'tensorflow::SubProcess'\r\ntensorflow/stream_executor/cuda/ptxas_utils.cc(55): error C2039: 'SetChannelAction': is not a member of 'tensorflow::SubProcess'\r\n.\\tensorflow/core/platform/windows/subprocess.h(27): note: see declaration of 'tensorflow::SubProcess'\r\ntensorflow/stream_executor/cuda/ptxas_utils.cc(56): error C2039: 'Start': is not a member of 'tensorflow::SubProcess'\r\n.\\tensorflow/core/platform/windows/subprocess.h(27): note: see declaration of 'tensorflow::SubProcess'\r\ntensorflow/stream_executor/cuda/ptxas_utils.cc(62): error C2039: 'Communicate': is not a member of 'tensorflow::SubProcess'\r\n.\\tensorflow/core/platform/windows/subprocess.h(27): note: see declaration of 'tensorflow::SubProcess'\r\ntensorflow/stream_executor/cuda/ptxas_utils.cc(192): error C2039: 'SetProgram': is not a member of 'tensorflow::SubProcess'\r\n.\\tensorflow/core/platform/windows/subprocess.h(27): note: see declaration of 'tensorflow::SubProcess'\r\ntensorflow/stream_executor/cuda/ptxas_utils.cc(193): error C2039: 'SetChannelAction': is not a member of 'tensorflow::SubProcess'\r\n.\\tensorflow/core/platform/windows/subprocess.h(27): note: see declaration of 'tensorflow::SubProcess'\r\ntensorflow/stream_executor/cuda/ptxas_utils.cc(195): error C2039: 'Start': is not a member of 'tensorflow::SubProcess'\r\n.\\tensorflow/core/platform/windows/subprocess.h(27): note: see declaration of 'tensorflow::SubProcess'\r\ntensorflow/stream_executor/cuda/ptxas_utils.cc(199): error C2039: 'Communicate': is not a member of 'tensorflow::SubProcess'\r\n.\\tensorflow/core/platform/windows/subprocess.h(27): note: see declaration of 'tensorflow::SubProcess'\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nINFO: Elapsed time: 1863.507s, Critical Path: 326.27s\r\nINFO: 2580 processes: 2580 local.\r\nFAILED: Build did NOT complete successfully\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31335", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31335/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31335/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31335/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31335", "id": 476958023, "node_id": "MDU6SXNzdWU0NzY5NTgwMjM=", "number": 31335, "title": "A custom operator get Segmentation Fault in tf.function", "user": {"login": "laket", "id": 1290076, "node_id": "MDQ6VXNlcjEyOTAwNzY=", "avatar_url": "https://avatars1.githubusercontent.com/u/1290076?v=4", "gravatar_id": "", "url": "https://api.github.com/users/laket", "html_url": "https://github.com/laket", "followers_url": "https://api.github.com/users/laket/followers", "following_url": "https://api.github.com/users/laket/following{/other_user}", "gists_url": "https://api.github.com/users/laket/gists{/gist_id}", "starred_url": "https://api.github.com/users/laket/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/laket/subscriptions", "organizations_url": "https://api.github.com/users/laket/orgs", "repos_url": "https://api.github.com/users/laket/repos", "events_url": "https://api.github.com/users/laket/events{/privacy}", "received_events_url": "https://api.github.com/users/laket/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1190546177, "node_id": "MDU6TGFiZWwxMTkwNTQ2MTc3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:autograph", "name": "comp:autograph", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, {"login": "kkimdev", "id": 503414, "node_id": "MDQ6VXNlcjUwMzQxNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/503414?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kkimdev", "html_url": "https://github.com/kkimdev", "followers_url": "https://api.github.com/users/kkimdev/followers", "following_url": "https://api.github.com/users/kkimdev/following{/other_user}", "gists_url": "https://api.github.com/users/kkimdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/kkimdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kkimdev/subscriptions", "organizations_url": "https://api.github.com/users/kkimdev/orgs", "repos_url": "https://api.github.com/users/kkimdev/repos", "events_url": "https://api.github.com/users/kkimdev/events{/privacy}", "received_events_url": "https://api.github.com/users/kkimdev/received_events", "type": "User", "site_admin": false}, {"login": "mdanatg", "id": 26628547, "node_id": "MDQ6VXNlcjI2NjI4NTQ3", "avatar_url": "https://avatars1.githubusercontent.com/u/26628547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdanatg", "html_url": "https://github.com/mdanatg", "followers_url": "https://api.github.com/users/mdanatg/followers", "following_url": "https://api.github.com/users/mdanatg/following{/other_user}", "gists_url": "https://api.github.com/users/mdanatg/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdanatg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdanatg/subscriptions", "organizations_url": "https://api.github.com/users/mdanatg/orgs", "repos_url": "https://api.github.com/users/mdanatg/repos", "events_url": "https://api.github.com/users/mdanatg/events{/privacy}", "received_events_url": "https://api.github.com/users/mdanatg/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2019-08-05T16:46:01Z", "updated_at": "2019-10-08T18:50:40Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nNo\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nUbuntu 18.04\r\n- TensorFlow installed from (source or binary):\r\nbinary\r\n- TensorFlow version (use command below):\r\nv2.0.0-beta0-16-g1d91213fe7 2.0.0-beta1\r\n- Python version:\r\n3.6.8\r\n- GCC/Compiler version (if compiling from source):\r\ng++ 7.4.0\r\n\r\n**Describe the current behavior**\r\nWhen calling a custom op from a python function with tf.function, I got a segmentation fault.\r\nThe op run normally without tf.function.\r\n\r\n**Code to reproduce the issue**\r\nI implemented a custom op with [zero_out_op_kernel_1.cc](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/adding_an_op/zero_out_op_kernel_1.cc) in tensorflow repository.\r\n\r\nI called the operator from the following python code.\r\n\r\n```python\r\nimport tensorflow as tf\r\n\r\n_zero_out_module = tf.load_op_library('custom_ops.so')\r\nzero_out = _zero_out_module.zero_out\r\n\r\n@tf.function\r\ndef make_zero(x):\r\n    return zero_out(x)\r\n\r\nc = tf.constant([4,2,8,9])\r\nres  = make_zero(c)\r\n```\r\n\r\n**Other info / logs**\r\nI confirmed that InferenceContext is NULL.\r\nThis bug is similar to #30494\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31323", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31323/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31323/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31323/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31323", "id": 476583535, "node_id": "MDU6SXNzdWU0NzY1ODM1MzU=", "number": 31323, "title": "Passing a callable learning_rate to Adam optimizer does not work as documented", "user": {"login": "bjornsing", "id": 3122051, "node_id": "MDQ6VXNlcjMxMjIwNTE=", "avatar_url": "https://avatars0.githubusercontent.com/u/3122051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjornsing", "html_url": "https://github.com/bjornsing", "followers_url": "https://api.github.com/users/bjornsing/followers", "following_url": "https://api.github.com/users/bjornsing/following{/other_user}", "gists_url": "https://api.github.com/users/bjornsing/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjornsing/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjornsing/subscriptions", "organizations_url": "https://api.github.com/users/bjornsing/orgs", "repos_url": "https://api.github.com/users/bjornsing/repos", "events_url": "https://api.github.com/users/bjornsing/events{/privacy}", "received_events_url": "https://api.github.com/users/bjornsing/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-08-04T19:03:14Z", "updated_at": "2020-03-18T09:06:11Z", "closed_at": null, "author_association": "NONE", "body": "tag:bug_template\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: n/a\r\n- TensorFlow installed from (source or binary): binary through pip3\r\n- TensorFlow version (use command below): v2.0.0-beta0-16-g1d91213fe7 2.0.0-beta1\r\n- Python version: sys.version_info(major=3, minor=5, micro=6, releaselevel='final', serial=0)\r\n- Bazel version (if compiling from source): n/a\r\n- GCC/Compiler version (if compiling from source): n/a\r\n- CUDA/cuDNN version: 10.0.130_410.48 / 10.0-linux-x64-v7.4.2.24\r\n- GPU model and memory: GeForce GTX 1080 with 7598 MB memory\r\n\r\n**Describe the current behavior**\r\n\r\nThe Adam optimizer does not seem to keep calling the supplied learning_rate callable. It seems like it's being called once or a few times, but then a \"cached\" value is repeatedly used in updates.\r\n\r\n**Describe the expected behavior**\r\n\r\nAccording to the [documentation](https://www.tensorflow.org/versions/r2.0/api_docs/python/tf/keras/optimizers/Adam) it should be possible to pass a \"callable that takes no arguments and returns the actual value to use\" as learning_rate to tf.keras.optimizers.Adam(), and this \"can be useful for changing these values across different invocations of optimizer functions\".\r\n\r\nMy expectation was that the Adam optimizer would keep calling the supplied callable at each update (i.e. from within apply_gradients()).\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n```\r\nimport tensorflow as tf\r\nprint(tf.version.GIT_VERSION, tf.version.VERSION)\r\n\r\nimport sys\r\nprint(sys.version_info)\r\n\r\ntf_a = tf.Variable(1.0)\r\nprint('Variable tf_a initialized to {}.'.format(tf_a.numpy()))\r\n\r\nlr = 0.1\r\ndef get_lr():\r\n    global lr\r\n    return lr\r\n\r\ntf_opt = tf.keras.optimizers.Adam(learning_rate=get_lr)\r\n\r\n@tf.function\r\ndef train_step():\r\n    with tf.GradientTape() as tf_tape:\r\n        tf_loss = tf_a**2\r\n        \r\n    tf_gradients = tf_tape.gradient(tf_loss, [tf_a])\r\n\r\n    tf_opt.apply_gradients(zip(tf_gradients, [tf_a]))\r\n\r\nprint('After one step with learning rate {}... '.format(get_lr()), end='')\r\ntrain_step()\r\nprint('Variable tf_a is {}.'.format(tf_a.numpy()))\r\n\r\nlr = 0.0\r\n\r\nfor _ in range(10):\r\n    print('After another step, now with learning rate {}... '.format(get_lr()), end='')\r\n    train_step()\r\n    print('Variable tf_a is {}.'.format(tf_a.numpy()))\r\n```\r\n\r\nThe code above produces the following output on my system:\r\n\r\n```\r\nv2.0.0-beta0-16-g1d91213fe7 2.0.0-beta1\r\nsys.version_info(major=3, minor=5, micro=6, releaselevel='final', serial=0)\r\nVariable tf_a initialized to 1.0.\r\nAfter one step with learning rate 0.1... Variable tf_a is 0.8999971747398376.\r\nAfter another step, now with learning rate 0.0... Variable tf_a is 0.8004083633422852.\r\nAfter another step, now with learning rate 0.0... Variable tf_a is 0.7015821933746338.\r\nAfter another step, now with learning rate 0.0... Variable tf_a is 0.6039347052574158.\r\nAfter another step, now with learning rate 0.0... Variable tf_a is 0.5079591274261475.\r\nAfter another step, now with learning rate 0.0... Variable tf_a is 0.41423195600509644.\r\nAfter another step, now with learning rate 0.0... Variable tf_a is 0.3234161138534546.\r\nAfter another step, now with learning rate 0.0... Variable tf_a is 0.23625943064689636.\r\nAfter another step, now with learning rate 0.0... Variable tf_a is 0.1535806804895401.\r\nAfter another step, now with learning rate 0.0... Variable tf_a is 0.07624538242816925.\r\nAfter another step, now with learning rate 0.0... Variable tf_a is 0.005127914249897003.\r\n```\r\nAs you can see tf_a keeps changing at a fast pace. My expectation was that after setting the learning rate to 0.0 updates would no-longer change tf_a.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31305", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31305/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31305/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31305/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31305", "id": 476456901, "node_id": "MDU6SXNzdWU0NzY0NTY5MDE=", "number": 31305, "title": "Parallel sessions for Comp Graph editing and optimization", "user": {"login": "Uiuran", "id": 1892703, "node_id": "MDQ6VXNlcjE4OTI3MDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/1892703?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Uiuran", "html_url": "https://github.com/Uiuran", "followers_url": "https://api.github.com/users/Uiuran/followers", "following_url": "https://api.github.com/users/Uiuran/following{/other_user}", "gists_url": "https://api.github.com/users/Uiuran/gists{/gist_id}", "starred_url": "https://api.github.com/users/Uiuran/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Uiuran/subscriptions", "organizations_url": "https://api.github.com/users/Uiuran/orgs", "repos_url": "https://api.github.com/users/Uiuran/repos", "events_url": "https://api.github.com/users/Uiuran/events{/privacy}", "received_events_url": "https://api.github.com/users/Uiuran/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jaingaurav", "id": 84372, "node_id": "MDQ6VXNlcjg0Mzcy", "avatar_url": "https://avatars1.githubusercontent.com/u/84372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaingaurav", "html_url": "https://github.com/jaingaurav", "followers_url": "https://api.github.com/users/jaingaurav/followers", "following_url": "https://api.github.com/users/jaingaurav/following{/other_user}", "gists_url": "https://api.github.com/users/jaingaurav/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaingaurav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaingaurav/subscriptions", "organizations_url": "https://api.github.com/users/jaingaurav/orgs", "repos_url": "https://api.github.com/users/jaingaurav/repos", "events_url": "https://api.github.com/users/jaingaurav/events{/privacy}", "received_events_url": "https://api.github.com/users/jaingaurav/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jaingaurav", "id": 84372, "node_id": "MDQ6VXNlcjg0Mzcy", "avatar_url": "https://avatars1.githubusercontent.com/u/84372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaingaurav", "html_url": "https://github.com/jaingaurav", "followers_url": "https://api.github.com/users/jaingaurav/followers", "following_url": "https://api.github.com/users/jaingaurav/following{/other_user}", "gists_url": "https://api.github.com/users/jaingaurav/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaingaurav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaingaurav/subscriptions", "organizations_url": "https://api.github.com/users/jaingaurav/orgs", "repos_url": "https://api.github.com/users/jaingaurav/repos", "events_url": "https://api.github.com/users/jaingaurav/events{/privacy}", "received_events_url": "https://api.github.com/users/jaingaurav/received_events", "type": "User", "site_admin": false}, {"login": "kkimdev", "id": 503414, "node_id": "MDQ6VXNlcjUwMzQxNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/503414?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kkimdev", "html_url": "https://github.com/kkimdev", "followers_url": "https://api.github.com/users/kkimdev/followers", "following_url": "https://api.github.com/users/kkimdev/following{/other_user}", "gists_url": "https://api.github.com/users/kkimdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/kkimdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kkimdev/subscriptions", "organizations_url": "https://api.github.com/users/kkimdev/orgs", "repos_url": "https://api.github.com/users/kkimdev/repos", "events_url": "https://api.github.com/users/kkimdev/events{/privacy}", "received_events_url": "https://api.github.com/users/kkimdev/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-08-03T14:31:04Z", "updated_at": "2019-09-26T16:48:18Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.14\r\n- Are you willing to contribute it (Yes/No):\r\nyes\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nIt dosnt seen to be possible to do this in Tensorflow. Ive read that pyTorch has this ability although never tested it since iam developing in Tensorflow for a couple of months now (and Tensorflow has a handful of libs and other langs api what make me not want to go test the other frame)\r\n\r\n**Will this change the current api? How?**\r\nMaybe, i dont know really, i wanna you opinion if it will change the API and if it is desirable.\r\n\r\n**Who will benefit with this feature?**\r\nAlthough the infra host machine has to be very powerful it's really a benefit to have a ability to change your comp graph on the fly while the other graph trains, it speeds up the researching process.\r\n\r\n**Any Other info.**\r\nIam not talking about editing the same graph that is optimizing, but editing one instance diverse of graph then that one that is optimizing"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31303", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31303/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31303/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31303/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31303", "id": 476452080, "node_id": "MDU6SXNzdWU0NzY0NTIwODA=", "number": 31303, "title": "Change `kernel_initializer` in some `tf.keras` layers for improved performance", "user": {"login": "AakashKumarNain", "id": 11736571, "node_id": "MDQ6VXNlcjExNzM2NTcx", "avatar_url": "https://avatars3.githubusercontent.com/u/11736571?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AakashKumarNain", "html_url": "https://github.com/AakashKumarNain", "followers_url": "https://api.github.com/users/AakashKumarNain/followers", "following_url": "https://api.github.com/users/AakashKumarNain/following{/other_user}", "gists_url": "https://api.github.com/users/AakashKumarNain/gists{/gist_id}", "starred_url": "https://api.github.com/users/AakashKumarNain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AakashKumarNain/subscriptions", "organizations_url": "https://api.github.com/users/AakashKumarNain/orgs", "repos_url": "https://api.github.com/users/AakashKumarNain/repos", "events_url": "https://api.github.com/users/AakashKumarNain/events{/privacy}", "received_events_url": "https://api.github.com/users/AakashKumarNain/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-08-03T13:32:04Z", "updated_at": "2019-08-07T06:29:59Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.0\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 10\r\n- GPU model and memory: P100\r\n\r\n**Describe the current behavior**\r\nThe current `Conv2D` and `dense` layers in the `tf.keras` package have `glorot_uniform` as the default kernel initializer which doesn't play well with advanced activations like `relu`, `prelu`, `selu`, etc.  Given the fact that `relu` is a default choice for modern architectures, the kernel should be initialized from a different distribution.\r\n\r\n**Describe the expected behavior**\r\nThe `kernel initializer` should be changed to `he_uniform` in `Conv`, `SeparableConv`, `DepthwiseConv` and `Dense` layers from this\r\n\r\n```\r\n__init__(\r\n    filters,\r\n    kernel_size,\r\n    strides=(1, 1),\r\n    padding='valid',\r\n    data_format=None,\r\n    dilation_rate=(1, 1),\r\n    activation=None,\r\n    use_bias=True,\r\n    kernel_initializer='glorot_uniform',\r\n    bias_initializer='zeros',\r\n    kernel_regularizer=None,\r\n    bias_regularizer=None,\r\n    activity_regularizer=None,\r\n    kernel_constraint=None,\r\n    bias_constraint=None,\r\n    **kwargs\r\n)\r\n```\r\n\r\nto this\r\n```\r\n__init__(\r\n    filters,\r\n    kernel_size,\r\n    strides=(1, 1),\r\n    padding='valid',\r\n    data_format=None,\r\n    dilation_rate=(1, 1),\r\n    activation=None,\r\n    use_bias=True,\r\n    kernel_initializer='he_uniform',\r\n    bias_initializer='zeros',\r\n    kernel_regularizer=None,\r\n    bias_regularizer=None,\r\n    activity_regularizer=None,\r\n    kernel_constraint=None,\r\n    bias_constraint=None,\r\n    **kwargs\r\n)\r\n```\r\n\r\n**Other info / logs**\r\nHere are the resources that you can look into:\r\n1) The original paper for `Kaiming init`: https://arxiv.org/pdf/1502.01852.pdf\r\n2) Blog post: https://towardsdatascience.com/why-default-cnn-are-broken-in-keras-and-how-to-fix-them-ce295e5e5f2\r\n3) Blog post: https://towardsdatascience.com/weight-initialization-in-neural-networks-a-journey-from-the-basics-to-kaiming-954fb9b47c79"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31298", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31298/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31298/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31298/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31298", "id": 476412332, "node_id": "MDU6SXNzdWU0NzY0MTIzMzI=", "number": 31298, "title": "Serialization problems in keras when using add_loss or '.tf' extension for saving", "user": {"login": "nguerinjr", "id": 35977339, "node_id": "MDQ6VXNlcjM1OTc3MzM5", "avatar_url": "https://avatars2.githubusercontent.com/u/35977339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nguerinjr", "html_url": "https://github.com/nguerinjr", "followers_url": "https://api.github.com/users/nguerinjr/followers", "following_url": "https://api.github.com/users/nguerinjr/following{/other_user}", "gists_url": "https://api.github.com/users/nguerinjr/gists{/gist_id}", "starred_url": "https://api.github.com/users/nguerinjr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nguerinjr/subscriptions", "organizations_url": "https://api.github.com/users/nguerinjr/orgs", "repos_url": "https://api.github.com/users/nguerinjr/repos", "events_url": "https://api.github.com/users/nguerinjr/events{/privacy}", "received_events_url": "https://api.github.com/users/nguerinjr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-08-03T03:54:10Z", "updated_at": "2019-08-14T04:37:16Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- WSL Win10 Ubuntu 18.04 (it also happens in a real ubuntu 18)\r\n- tf-nightly-gpu-2.0-preview==2.0.0.dev20190802 (happens in cpu and gpu)\r\n- python3.7\r\n\r\n**Describe the current behavior**\r\n\r\nI have a simple test to serialized and deserialize a model which has no compiled loss, just one added with add_loss.\r\n\r\n**Describe the expected behavior**\r\n\r\nCorrect serialization and deserialization of the code\r\n\r\n**Code 1 to reproduce the issue**\r\n\r\nOccurs with both the pure loss function (which on earlier version would return json errors, but now seems ok), but also with the Lambda wrapper.\r\n\r\n``` python\r\nimport tensorflow as tf\r\nimport tensorflow.keras as tf_k\r\n\r\nmodel = tf_k.models.Sequential()\r\nmodel.add(tf_k.layers.Conv2D(32, (3, 3), activation='relu', batch_size=32, input_shape=(28, 28, 1), padding='same', strides=2))\r\nmodel.add(tf_k.layers.Conv2DTranspose(64, (3, 3), strides=2, padding='same'))\r\nmodel.add(tf_k.layers.Conv2D(1, (3, 3), activation='sigmoid', padding='same'))\r\n#loss = tf_k.layers.Lambda(lambda i: tf_k.losses.mse(*i))([model.inputs[0], model.outputs[0]])\r\nloss = tf_k.losses.mean_squared_error(model.inputs[0], tf.zeros_like(model.inputs[0]))\r\nmodel.add_loss(loss)\r\nmodel.compile(optimizer='adam')\r\nmodel.save('teste.h5')\r\nmodel = tf.keras.models.load_model('teste.h5')\r\n```\r\n\r\n```python\r\n2019-08-03 03:38:05.624310: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcuda.so.1'; dlerror: libcuda.so.1: cannot open shared object file: No such file or directory\r\n2019-08-03 03:38:05.624506: E tensorflow/stream_executor/cuda/cuda_driver.cc:318] failed call to cuInit: UNKNOWN ERROR (303)\r\n2019-08-03 03:38:05.624652: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:156] kernel driver does not appear to be running on this host (DESKTOP-GUERINJR): /proc/driver/nvidia/version does not exist\r\n2019-08-03 03:38:05.624991: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-08-03 03:38:05.634458: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 3408000000 Hz\r\n2019-08-03 03:38:05.636116: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x7fffe06c0120 executing computations on platform Host. Devices:\r\n2019-08-03 03:38:05.636259: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): Host, Default Version\r\nWARNING: Logging before flag parsing goes to stderr.\r\nW0803 03:38:05.683956 139979377280832 training_utils.py:1320] Output conv2d_1 missing from loss dictionary. We assume this was done on purpose. The fit and evaluate APIs will not be expecting any data to be passed to conv2d_1.\r\nTraceback (most recent call last):\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/framework/ops.py\", line 1554, in _create_c_op\r\n    c_op = c_api.TF_FinishOperation(op_desc)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: 1 inputs specified of 2 inputs in Op while building NodeDef 'tf_op_layer_SquaredDifference/SquaredDifference' using Op<name=SquaredDifference; signature=x:T, y:T -> z:T; attr=T:type,allowed=[DT_BFLOAT16, DT_HALF, DT_FLOAT, DT_DOUBLE, DT_INT32, DT_INT64, DT_COMPLEX64, DT_COMPLEX128]; is_commutative=true>\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/img_common/teste.py\", line 14, in <module>\r\n    model = tf.keras.models.load_model('teste.h5')\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/saving/save.py\", line 138, in load_model\r\n    return hdf5_format.load_model_from_hdf5(filepath, custom_objects, compile)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/saving/hdf5_format.py\", line 162, in load_model_from_hdf5\r\n    custom_objects=custom_objects)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/saving/model_config.py\", line 55, in model_from_config\r\n    return deserialize(config, custom_objects=custom_objects)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/layers/serialization.py\", line 98, in deserialize\r\n    printable_module_name='layer')\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/utils/generic_utils.py\", line 191, in deserialize_keras_object\r\n    list(custom_objects.items())))\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/sequential.py\", line 369, in from_config\r\n    model.add(layer)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/training/tracking/base.py\", line 457, in _method_wrapper\r\n    result = method(self, *args, **kwargs)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/sequential.py\", line 195, in add\r\n    output_tensor = layer(self.outputs[0])\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/base_layer.py\", line 799, in __call__\r\n    outputs = call_fn(cast_inputs, *args, **kwargs)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/base_layer.py\", line 2507, in call\r\n    return self._make_op(inputs)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/base_layer.py\", line 2530, in _make_op\r\n    c_op = ops._create_c_op(graph, node_def, inputs, control_inputs=[])\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/framework/ops.py\", line 1557, in _create_c_op\r\n    raise ValueError(str(e))\r\nValueError: 1 inputs specified of 2 inputs in Op while building NodeDef 'tf_op_layer_SquaredDifference/SquaredDifference' using Op<name=SquaredDifference; signature=x:T, y:T -> z:T; attr=T:type,allowed=[DT_BFLOAT16, DT_HALF, DT_FLOAT, DT_DOUBLE, DT_INT32, DT_INT64, DT_COMPLEX64, DT_COMPLEX128]; is_commutative=true>\r\n\r\nProcess finished with exit code 1\r\n```\r\n\r\n**Code 2 to reproduce the issue**\r\n\r\nPutting the '.tf' suffix, only changes the error message. Here's an example\r\n\r\n``` python\r\nimport tensorflow as tf\r\nimport tensorflow.keras as tf_k\r\n\r\nmodel = tf_k.models.Sequential()\r\nmodel.add(tf_k.layers.Conv2D(32, (3, 3), activation='relu', batch_size=32, input_shape=(28, 28, 1), padding='same', strides=2))\r\nmodel.add(tf_k.layers.Conv2DTranspose(64, (3, 3), strides=2, padding='same'))\r\nmodel.add(tf_k.layers.Conv2D(1, (3, 3), activation='sigmoid', padding='same'))\r\n\r\n#loss = tf_k.layers.Lambda(lambda i: tf_k.losses.mse(*i))([model.inputs[0], model.outputs[0]])\r\nloss = tf_k.losses.mean_squared_error(model.inputs[0], tf.zeros_like(model.inputs[0]))\r\nmodel.add_loss(loss)\r\nmodel.compile(optimizer='adam')\r\nmodel.save('teste.tf')\r\nmodel = tf.keras.models.load_model('teste.tf')\r\n```\r\n\r\n```python\r\n2019-08-03 03:38:42.774544: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcuda.so.1'; dlerror: libcuda.so.1: cannot open shared object file: No such file or directory\r\n2019-08-03 03:38:42.774737: E tensorflow/stream_executor/cuda/cuda_driver.cc:318] failed call to cuInit: UNKNOWN ERROR (303)\r\n2019-08-03 03:38:42.774932: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:156] kernel driver does not appear to be running on this host (DESKTOP-GUERINJR): /proc/driver/nvidia/version does not exist\r\n2019-08-03 03:38:42.775273: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-08-03 03:38:42.784443: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 3408000000 Hz\r\n2019-08-03 03:38:42.786142: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x7fffc04e4040 executing computations on platform Host. Devices:\r\n2019-08-03 03:38:42.786289: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): Host, Default Version\r\nWARNING: Logging before flag parsing goes to stderr.\r\nW0803 03:38:42.835703 140157751789376 training_utils.py:1320] Output conv2d_1 missing from loss dictionary. We assume this was done on purpose. The fit and evaluate APIs will not be expecting any data to be passed to conv2d_1.\r\n2019-08-03 03:38:43.281262: W tensorflow/python/util/util.cc:288] Sets are not currently considered sequences, but this may change in the future, so consider avoiding using them.\r\nW0803 03:38:43.369712 140157751789376 deprecation.py:506] From /home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/ops/resource_variable_ops.py:1784: calling BaseResourceVariable.__init__ (from tensorflow.python.ops.resource_variable_ops) with constraint is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nIf using Keras pass *_constraint arguments to layers.\r\nTraceback (most recent call last):\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/img_common/teste.py\", line 14, in <module>\r\n    model = tf.keras.models.load_model('teste.tf')\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/saving/save.py\", line 142, in load_model\r\n    return saved_model_load.load(filepath, compile)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/saving/saved_model/load.py\", line 86, in load\r\n    model = tf_load.load_internal(path, loader_cls=KerasObjectLoader)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/saved_model/load.py\", line 541, in load_internal\r\n    export_dir)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/saving/saved_model/load.py\", line 103, in __init__\r\n    self._finalize()\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/saving/saved_model/load.py\", line 127, in _finalize\r\n    node.add(layer)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/training/tracking/base.py\", line 457, in _method_wrapper\r\n    result = method(self, *args, **kwargs)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/sequential.py\", line 195, in add\r\n    output_tensor = layer(self.outputs[0])\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/base_layer.py\", line 799, in __call__\r\n    outputs = call_fn(cast_inputs, *args, **kwargs)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/saving/saved_model/utils.py\", line 57, in return_outputs_and_add_losses\r\n    outputs, losses = fn(inputs, *args, **kwargs)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 439, in __call__\r\n    self._initialize(args, kwds, add_initializers_to=initializer_map)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 382, in _initialize\r\n    *args, **kwds))\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 1806, in _get_concrete_function_internal_garbage_collected\r\n    graph_function, _, _ = self._maybe_define_function(args, kwargs)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 2106, in _maybe_define_function\r\n    graph_function = self._create_graph_function(args, kwargs)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 1997, in _create_graph_function\r\n    capture_by_value=self._capture_by_value),\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/framework/func_graph.py\", line 884, in func_graph_from_py_func\r\n    func_outputs = python_func(*func_args, **func_kwargs)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 325, in wrapped_fn\r\n    return weak_wrapped_fn().__wrapped__(*args, **kwds)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/saved_model/function_deserialization.py\", line 262, in restored_function_body\r\n    \"\\n\\n\".join(signature_descriptions)))\r\nValueError: Could not find matching function to call loaded from the SavedModel. Got:\r\n  Positional arguments (1 total):\r\n    * Tensor(\"inputs:0\", shape=(32, 28, 28, 1), dtype=float32)\r\n  Keyword arguments: {}\r\n\r\nExpected these arguments to match one of the following 1 option(s):\r\n\r\nOption 1:\r\n  Positional arguments (1 total):\r\n    * [TensorSpec(shape=(None, 28, 28, 1), dtype=tf.float32, name='inputs/0')]\r\n  Keyword arguments: {}\r\n\r\nProcess finished with exit code 1\r\n```\r\n\r\n> Is there something wrong with this simple example? Something I'm missing. Or it's just that the add_loss still have some problems wrt serialization / deserialization?\r\n\r\nI perceived a bunch of errors have been fixed since my last report about this custom uses of keras (https://github.com/tensorflow/tensorflow/issues/30378). For example, I know a workaround for this, which seems ok in this nightly version, is to use a custom compiled loss, which was not working at that time, as another issue I had reported  (https://github.com/tensorflow/tensorflow/issues/30384)\r\n\r\n```python\r\nimport tensorflow as tf\r\nimport tensorflow.keras as tf_k\r\n\r\nmodel = tf_k.models.Sequential()\r\nmodel.add(tf_k.layers.Conv2D(32, (3, 3), activation='relu', batch_size=32, input_shape=(28, 28, 1), padding='same', strides=2))\r\nmodel.add(tf_k.layers.Conv2DTranspose(64, (3, 3), strides=2, padding='same'))\r\nmodel.add(tf_k.layers.Conv2D(1, (3, 3), activation='sigmoid', padding='same'))\r\n\r\ndef my_loss(y_true, y_pred):\r\n    return y_true\r\n\r\ndef my_loss2(y_true, y_pred):\r\n    return y_pred\r\n\r\nmodel.compile(optimizer='adam', loss=[my_loss])\r\nmodel.save('teste.h5')\r\n\r\nmodel = tf.keras.models.load_model('teste.h5', custom_objects={'my_loss': my_loss, 'my_loss2': my_loss2})\r\nprint(model)\r\n```\r\n\r\n```python\r\n/home/nguerinjr/Documents/deep_coding_project/venv/bin/python /home/nguerinjr/Documents/deep_coding_project/img_common/teste.py\r\n2019-08-03 03:46:57.744222: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcuda.so.1'; dlerror: libcuda.so.1: cannot open shared object file: No such file or directory\r\n2019-08-03 03:46:57.744406: E tensorflow/stream_executor/cuda/cuda_driver.cc:318] failed call to cuInit: UNKNOWN ERROR (303)\r\n2019-08-03 03:46:57.744557: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:156] kernel driver does not appear to be running on this host (DESKTOP-GUERINJR): /proc/driver/nvidia/version does not exist\r\n2019-08-03 03:46:57.744891: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-08-03 03:46:57.755141: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 3408000000 Hz\r\n2019-08-03 03:46:57.756825: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x7fffea867eb0 executing computations on platform Host. Devices:\r\n2019-08-03 03:46:57.757004: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): Host, Default Version\r\n<tensorflow.python.keras.engine.sequential.Sequential object at 0x7f4e203ee940>\r\n\r\nProcess finished with exit code 0\r\n```\r\n\r\nBut, as an extension to these tests, I've noticed the '.tf' version does not work correctly, which seems another related bug:\r\n\r\n```python\r\nimport tensorflow as tf\r\nimport tensorflow.keras as tf_k\r\n\r\nmodel = tf_k.models.Sequential()\r\nmodel.add(tf_k.layers.Conv2D(32, (3, 3), activation='relu', batch_size=32, input_shape=(28, 28, 1), padding='same', strides=2))\r\nmodel.add(tf_k.layers.Conv2DTranspose(64, (3, 3), strides=2, padding='same'))\r\nmodel.add(tf_k.layers.Conv2D(1, (3, 3), activation='sigmoid', padding='same'))\r\n\r\ndef my_loss(y_true, y_pred):\r\n    return y_true\r\n\r\ndef my_loss2(y_true, y_pred):\r\n    return y_pred\r\n\r\nmodel.compile(optimizer='adam', loss=[my_loss])\r\nmodel.save('teste.tf')\r\n\r\nmodel = tf.keras.models.load_model('teste.tf', custom_objects={'my_loss': my_loss, 'my_loss2': my_loss2})\r\nprint(model)\r\n```\r\n\r\n```python\r\n/home/nguerinjr/Documents/deep_coding_project/venv/bin/python /home/nguerinjr/Documents/deep_coding_project/img_common/teste.py\r\n2019-08-03 03:47:16.464514: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcuda.so.1'; dlerror: libcuda.so.1: cannot open shared object file: No such file or directory\r\n2019-08-03 03:47:16.464702: E tensorflow/stream_executor/cuda/cuda_driver.cc:318] failed call to cuInit: UNKNOWN ERROR (303)\r\n2019-08-03 03:47:16.464859: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:156] kernel driver does not appear to be running on this host (DESKTOP-GUERINJR): /proc/driver/nvidia/version does not exist\r\n2019-08-03 03:47:16.465200: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-08-03 03:47:16.474429: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 3408000000 Hz\r\n2019-08-03 03:47:16.476021: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x7fffbb87a7b0 executing computations on platform Host. Devices:\r\n2019-08-03 03:47:16.476185: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): Host, Default Version\r\n2019-08-03 03:47:16.873280: W tensorflow/python/util/util.cc:288] Sets are not currently considered sequences, but this may change in the future, so consider avoiding using them.\r\nWARNING: Logging before flag parsing goes to stderr.\r\nW0803 03:47:16.921350 140320731367232 deprecation.py:506] From /home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/ops/resource_variable_ops.py:1784: calling BaseResourceVariable.__init__ (from tensorflow.python.ops.resource_variable_ops) with constraint is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nIf using Keras pass *_constraint arguments to layers.\r\nTraceback (most recent call last):\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/img_common/teste.py\", line 25, in <module>\r\n    model = tf.keras.models.load_model('teste.tf', custom_objects={'my_loss': my_loss, 'my_loss2': my_loss2})\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/saving/save.py\", line 142, in load_model\r\n    return saved_model_load.load(filepath, compile)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/saving/saved_model/load.py\", line 93, in load\r\n    model._training_config))  # pylint: disable=protected-access\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/training/tracking/base.py\", line 457, in _method_wrapper\r\n    result = method(self, *args, **kwargs)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training.py\", line 340, in compile\r\n    self.loss, self.output_names)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_utils.py\", line 1329, in prepare_loss_functions\r\n    loss_functions = nest.map_structure(get_loss_function, loss)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/util/nest.py\", line 523, in map_structure\r\n    structure[0], [func(*x) for x in entries],\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/util/nest.py\", line 523, in <listcomp>\r\n    structure[0], [func(*x) for x in entries],\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_utils.py\", line 1086, in get_loss_function\r\n    loss_fn = losses.get(loss)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/losses.py\", line 1166, in get\r\n    return deserialize(identifier)\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/losses.py\", line 1157, in deserialize\r\n    printable_module_name='loss function')\r\n  File \"/home/nguerinjr/Documents/deep_coding_project/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/utils/generic_utils.py\", line 210, in deserialize_keras_object\r\n    raise ValueError('Unknown ' + printable_module_name + ':' + object_name)\r\nValueError: Unknown loss function:my_loss\r\n\r\nProcess finished with exit code 1\r\n```\r\n\r\nThe real point about my interest in the add_loss it that's the only way, at least I think, to use losses in a flexible way. I still need very flexible losses. add_loss seems an interesting way to do this."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31287", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31287/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31287/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31287/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31287", "id": 476291134, "node_id": "MDU6SXNzdWU0NzYyOTExMzQ=", "number": 31287, "title": "Optimizer (Adam) does not propagate hyperparameter update on first update", "user": {"login": "svobora", "id": 17670772, "node_id": "MDQ6VXNlcjE3NjcwNzcy", "avatar_url": "https://avatars0.githubusercontent.com/u/17670772?v=4", "gravatar_id": "", "url": "https://api.github.com/users/svobora", "html_url": "https://github.com/svobora", "followers_url": "https://api.github.com/users/svobora/followers", "following_url": "https://api.github.com/users/svobora/following{/other_user}", "gists_url": "https://api.github.com/users/svobora/gists{/gist_id}", "starred_url": "https://api.github.com/users/svobora/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/svobora/subscriptions", "organizations_url": "https://api.github.com/users/svobora/orgs", "repos_url": "https://api.github.com/users/svobora/repos", "events_url": "https://api.github.com/users/svobora/events{/privacy}", "received_events_url": "https://api.github.com/users/svobora/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}, {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-08-02T17:51:46Z", "updated_at": "2019-10-08T18:43:51Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): no\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04 64b\r\n- TensorFlow version (use command below): 2.0.0b1\r\n- Python version: 3.6\r\n\r\n**Describe the current behavior**\r\nUsing tf.keras.optimizers.Adam and updating hyperparameters results in hyperparameters not updating on the first update.\r\n\r\n**Describe the expected behavior**\r\nHyperparameters DO update on the first run, ie they are initialized to tf.Variables at constructor of the optimizer, not on first call.\r\n\r\n**Code to reproduce the issue**\r\n`adam = tf.keras.optimizers.Adam()`\r\n`adam.learning_rate = 0.00001   # this does not update learning_rate, but changes python-typed ` `hyperparameters in \"_hyper\" dictionary to tf.Variables`\r\n`adam.learning_rate = 0.00001  # this finally updates the tf.Variable `\r\n\r\n\r\nCalling adam._hyper before update yields:\r\n\r\n`{'learning_rate': 0.001, 'decay': 0.0, 'beta_1': 0.9, 'beta_2': 0.999}`\r\n\r\nCalling adam._hyper after first update yields:\r\n\r\n`{'learning_rate': <tf.Variable 'learning_rate:0' shape=() dtype=float32, numpy=0.001>, 'decay': <tf.Variable 'decay:0' shape=() dtype=float32, numpy=0.0>, 'beta_1': <tf.Variable 'beta_1:0' shape=() dtype=float32, numpy=0.9>, 'beta_2': <tf.Variable 'beta_2:0' shape=() dtype=float32, numpy=0.999>}`\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31279", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31279/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31279/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31279/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31279", "id": 476242202, "node_id": "MDU6SXNzdWU0NzYyNDIyMDI=", "number": 31279, "title": "[TF 2.0 API Docs] tf.tuple", "user": {"login": "johnkegz", "id": 29975767, "node_id": "MDQ6VXNlcjI5OTc1NzY3", "avatar_url": "https://avatars2.githubusercontent.com/u/29975767?v=4", "gravatar_id": "", "url": "https://api.github.com/users/johnkegz", "html_url": "https://github.com/johnkegz", "followers_url": "https://api.github.com/users/johnkegz/followers", "following_url": "https://api.github.com/users/johnkegz/following{/other_user}", "gists_url": "https://api.github.com/users/johnkegz/gists{/gist_id}", "starred_url": "https://api.github.com/users/johnkegz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/johnkegz/subscriptions", "organizations_url": "https://api.github.com/users/johnkegz/orgs", "repos_url": "https://api.github.com/users/johnkegz/repos", "events_url": "https://api.github.com/users/johnkegz/events{/privacy}", "received_events_url": "https://api.github.com/users/johnkegz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-08-02T15:40:49Z", "updated_at": "2020-03-04T07:15:19Z", "closed_at": null, "author_association": "NONE", "body": "\r\n## Documentation contributor guide: \r\nhttps://www.tensorflow.org/community/contribute/docs\r\n\r\n## URL(s) with the issue:\r\nhttps://www.tensorflow.org/versions/r2.0/api_docs/python/tf/tuple\r\n\r\nPlease provide a link to the documentation entry, for example:\r\nhttps://www.tensorflow.org/versions/r2.0/api_docs/python/tf/MyMethod\r\n\r\n## Description of issue (what needs changing):\r\n### Correct links\r\nThe GitHub link to `tf.tuple` leads to `tf.tuple_v2`.\r\n### Usage example\r\nThere is no usage example.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31278", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31278/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31278/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31278/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31278", "id": 476241257, "node_id": "MDU6SXNzdWU0NzYyNDEyNTc=", "number": 31278, "title": "[TF.2.0 API Docs] tf.train.list_variables", "user": {"login": "KabohaJeanMark", "id": 44635784, "node_id": "MDQ6VXNlcjQ0NjM1Nzg0", "avatar_url": "https://avatars0.githubusercontent.com/u/44635784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KabohaJeanMark", "html_url": "https://github.com/KabohaJeanMark", "followers_url": "https://api.github.com/users/KabohaJeanMark/followers", "following_url": "https://api.github.com/users/KabohaJeanMark/following{/other_user}", "gists_url": "https://api.github.com/users/KabohaJeanMark/gists{/gist_id}", "starred_url": "https://api.github.com/users/KabohaJeanMark/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KabohaJeanMark/subscriptions", "organizations_url": "https://api.github.com/users/KabohaJeanMark/orgs", "repos_url": "https://api.github.com/users/KabohaJeanMark/repos", "events_url": "https://api.github.com/users/KabohaJeanMark/events{/privacy}", "received_events_url": "https://api.github.com/users/KabohaJeanMark/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-08-02T15:38:38Z", "updated_at": "2019-08-05T19:01:03Z", "closed_at": null, "author_association": "NONE", "body": "\r\n## URL(s) with the issue:\r\nhttps://www.tensorflow.org/versions/r2.0/api_docs/python/tf/train/list_variables\r\n\r\n## Description of the issue (what needs changing):\r\nRaises for exceptions to deal with any errors and a few drawings to be added to make it easier to understand.\r\n\r\n### Raises listed and defined\r\nNo, the errors are not listed and returned.\r\n\r\nAre there currently visuals? If not, will it clarify the content?\r\nNo, there are not any current visuals.\r\n\r\n### Submit a pull request?\r\n\r\nNo, I am not willing to submit a pull request.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31277", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31277/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31277/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31277/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31277", "id": 476229341, "node_id": "MDU6SXNzdWU0NzYyMjkzNDE=", "number": 31277, "title": "[TF 2.0 API Docs] tf.keras.backend.random_uniform", "user": {"login": "mwinel", "id": 14992011, "node_id": "MDQ6VXNlcjE0OTkyMDEx", "avatar_url": "https://avatars0.githubusercontent.com/u/14992011?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mwinel", "html_url": "https://github.com/mwinel", "followers_url": "https://api.github.com/users/mwinel/followers", "following_url": "https://api.github.com/users/mwinel/following{/other_user}", "gists_url": "https://api.github.com/users/mwinel/gists{/gist_id}", "starred_url": "https://api.github.com/users/mwinel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mwinel/subscriptions", "organizations_url": "https://api.github.com/users/mwinel/orgs", "repos_url": "https://api.github.com/users/mwinel/repos", "events_url": "https://api.github.com/users/mwinel/events{/privacy}", "received_events_url": "https://api.github.com/users/mwinel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-08-02T15:12:20Z", "updated_at": "2019-08-06T00:26:06Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\nhttps://www.tensorflow.org/versions/r2.0/api_docs/python/tf/keras/backend/random_uniform\r\n\r\n## Description of issue (what needs changing):\r\nThe function has no usage example and there are no errors raised.\r\n\r\n### Raises listed and defined\r\nNo raises listed or defined.\r\n\r\n### Usage example\r\nNo usage example\r\n\r\n### Submit a pull request?\r\nNo.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31275", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31275/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31275/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31275/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31275", "id": 476221014, "node_id": "MDU6SXNzdWU0NzYyMjEwMTQ=", "number": 31275, "title": "[TF 2.0 API Docs] tf.io.extract_jpeg", "user": {"login": "dannylwe", "id": 17986212, "node_id": "MDQ6VXNlcjE3OTg2MjEy", "avatar_url": "https://avatars1.githubusercontent.com/u/17986212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dannylwe", "html_url": "https://github.com/dannylwe", "followers_url": "https://api.github.com/users/dannylwe/followers", "following_url": "https://api.github.com/users/dannylwe/following{/other_user}", "gists_url": "https://api.github.com/users/dannylwe/gists{/gist_id}", "starred_url": "https://api.github.com/users/dannylwe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dannylwe/subscriptions", "organizations_url": "https://api.github.com/users/dannylwe/orgs", "repos_url": "https://api.github.com/users/dannylwe/repos", "events_url": "https://api.github.com/users/dannylwe/events{/privacy}", "received_events_url": "https://api.github.com/users/dannylwe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-08-02T14:55:09Z", "updated_at": "2019-08-05T18:51:08Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\nhttps://www.tensorflow.org/versions/r2.0/api_docs/python/tf/io/encode_jpeg\r\n\r\n## Description of issue (what needs changing):\r\n- No link to github source code provided\r\n- No `Raises` provided in the description\r\n- No usage example\r\n\r\n### Correct links\r\n\r\nNo link provided\r\n\r\n### Raises listed and defined\r\n\r\nRaises are not defined/listed.\r\n\r\n### Usage example\r\n\r\nThere is no usage example\r\n\r\n### Request visuals, if applicable\r\n\r\nCurrently, no visuals, may not be required.\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31252", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31252/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31252/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31252/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31252", "id": 475937252, "node_id": "MDU6SXNzdWU0NzU5MzcyNTI=", "number": 31252, "title": "Model can't be checkpointed with Keras+MultiworkerMirroredStrategy", "user": {"login": "jtang7", "id": 51727795, "node_id": "MDQ6VXNlcjUxNzI3Nzk1", "avatar_url": "https://avatars0.githubusercontent.com/u/51727795?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtang7", "html_url": "https://github.com/jtang7", "followers_url": "https://api.github.com/users/jtang7/followers", "following_url": "https://api.github.com/users/jtang7/following{/other_user}", "gists_url": "https://api.github.com/users/jtang7/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtang7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtang7/subscriptions", "organizations_url": "https://api.github.com/users/jtang7/orgs", "repos_url": "https://api.github.com/users/jtang7/repos", "events_url": "https://api.github.com/users/jtang7/events{/privacy}", "received_events_url": "https://api.github.com/users/jtang7/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-08-01T23:56:58Z", "updated_at": "2019-10-08T18:41:55Z", "closed_at": null, "author_association": "NONE", "body": "Please make sure that this is a bug. As per our GitHub Policy, we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template\r\n\r\nSystem information\r\n\r\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Darwin-18.0.0-x86_64-i386-64bit\r\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\nTensorFlow installed from (source or binary): binary\r\nTensorFlow version (use command below): 2.0.0-beta1\r\nPython version:3.6.8\r\nBazel version (if compiling from source):\r\nGCC/Compiler version (if compiling from source):\r\nCUDA/cuDNN version:\r\nGPU model and memory:\r\nYou can collect some of this information using our environment capture\r\nscript\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: python -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\" 2. TF 2.0: python -c \"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"\r\n\r\nDescribe the current behavior\r\nThis is a followup for https://github.com/tensorflow/tensorflow/issues/31070\r\n\r\nI tried following 2 solutions\r\n1.I applied 6345ad5\r\nto my tensorflow installed code\r\n2. I install latest nightly dev build\r\n\r\nboth gave me following error, seems though previous commit change data type to int64, somewhere else still expects int32\r\n\r\n```\r\n2019-08-01 22:41:51.971726: W tensorflow/core/framework/op_kernel.cc:1546] OP_REQUIRES failed at collective_ops.cc:354 : Internal: RecvBufResponse returned 8 bytes where to_tensor expected 4\r\nTraceback (most recent call last):\r\n  File \"example_tf2.py\", line 124, in <module>\r\n    steps_per_epoch = parallel_steps)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/engine/training.py\", line 643, in fit\r\n    use_multiprocessing=use_multiprocessing)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/engine/training_distributed.py\", line 776, in wrapper\r\n    mode=dc.CoordinatorMode.INDEPENDENT_WORKER)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/distribute/distribute_coordinator.py\", line 853, in run_distribute_coordinator\r\n    task_id, session_config, rpc_layer)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/distribute/distribute_coordinator.py\", line 360, in _run_single_worker\r\n    return worker_fn(strategy)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/engine/training_distributed.py\", line 771, in _worker_fn\r\n    return fn(instance, model, **kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/engine/training_distributed.py\", line 681, in fit\r\n    steps_name='steps_per_epoch')\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/engine/training_arrays.py\", line 294, in model_iteration\r\n    batch_outs = f(actual_inputs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/distribute/distributed_training_utils.py\", line 813, in execution_function\r\n    return [out.numpy() for out in distributed_function(input_fn)]\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/eager/def_function.py\", line 416, in __call__\r\n    self._initialize(args, kwds, add_initializers_to=initializer_map)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/eager/def_function.py\", line 359, in _initialize\r\n    *args, **kwds))\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/eager/function.py\", line 1360, in _get_concrete_function_internal_garbage_collected\r\n    graph_function, _, _ = self._maybe_define_function(args, kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/eager/function.py\", line 1648, in _maybe_define_function\r\n    graph_function = self._create_graph_function(args, kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/eager/function.py\", line 1541, in _create_graph_function\r\n    capture_by_value=self._capture_by_value),\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/func_graph.py\", line 716, in func_graph_from_py_func\r\n    func_outputs = python_func(*func_args, **func_kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/eager/def_function.py\", line 309, in wrapped_fn\r\n    return weak_wrapped_fn().__wrapped__(*args, **kwds)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/func_graph.py\", line 706, in wrapper\r\n    raise e.ag_error_metadata.to_exception(type(e))\r\ntensorflow.python.autograph.impl.api.StagingError: in converted code:\r\n\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/distribute/distributed_training_utils.py:804 distributed_function  *\r\n        outputs = strategy.experimental_run_v2(\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/distribute/distribute_lib.py:708 experimental_run_v2\r\n        return self._extended.call_for_each_replica(fn, args=args, kwargs=kwargs)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/distribute/distribute_lib.py:1710 call_for_each_replica\r\n        return self._call_for_each_replica(fn, args, kwargs)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/distribute/mirrored_strategy.py:708 _call_for_each_replica\r\n        fn, args, kwargs)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/distribute/mirrored_strategy.py:195 _call_for_each_replica\r\n        coord.join(threads)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/training/coordinator.py:389 join\r\n        six.reraise(*self._exc_info_to_raise)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/training/coordinator.py:297 stop_on_exception\r\n        yield\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/distribute/mirrored_strategy.py:926 run\r\n        self.main_result = self.main_fn(*self.main_args, **self.main_kwargs)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/engine/training.py:908 train_on_batch\r\n        output_loss_metrics=self._output_loss_metrics)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/engine/training_eager.py:307 train_on_batch\r\n        output_loss_metrics=output_loss_metrics))\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/engine/training_eager.py:260 _process_single_batch\r\n        model.trainable_weights))\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/optimizer_v2/optimizer_v2.py:434 apply_gradients\r\n        self._create_hypers()\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/optimizer_v2/optimizer_v2.py:608 _create_hypers\r\n        aggregation=tf_variables.VariableAggregation.ONLY_FIRST_REPLICA)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/optimizer_v2/optimizer_v2.py:770 add_weight\r\n        aggregation=aggregation)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/training/tracking/base.py:713 _add_variable_with_custom_getter\r\n        **kwargs_for_getter)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/engine/base_layer_utils.py:154 make_variable\r\n        shape=variable_shape if variable_shape else None)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variables.py:260 __call__\r\n        return cls._variable_v1_call(*args, **kwargs)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variables.py:221 _variable_v1_call\r\n        shape=shape)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variables.py:60 getter\r\n        return captured_getter(captured_previous, **kwargs)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/distribute/shared_variable_creator.py:69 create_new_variable\r\n        v = next_creator(*args, **kwargs)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variables.py:60 getter\r\n        return captured_getter(captured_previous, **kwargs)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/distribute/distribute_lib.py:1250 creator_with_resource_vars\r\n        return self._create_variable(*args, **kwargs)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/distribute/collective_all_reduce_strategy.py:368 _create_variable\r\n        _real_mirrored_creator, *args, **kwargs)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/distribute/mirrored_strategy.py:251 _create_mirrored_variable\r\n        value_list = real_mirrored_creator(devices, *args, **kwargs)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/distribute/collective_all_reduce_strategy.py:355 _real_mirrored_creator\r\n        v = next_creator(*args, **kwargs)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variables.py:60 getter\r\n        return captured_getter(captured_previous, **kwargs)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/eager/def_function.py:347 variable_capturing_scope\r\n        lifted_initializer_graph=lifted_initializer_graph, **kwds)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/variables.py:264 __call__\r\n        return super(VariableMetaclass, cls).__call__(*args, **kwargs)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/eager/def_function.py:139 __init__\r\n        initial_value() if init_from_fn else initial_value,\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/distribute/collective_all_reduce_strategy.py:330 _overridden_initial_value_fn\r\n        group_key, collective_instance_key)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/collective_ops.py:161 broadcast_recv\r\n        instance_key=instance_key)\r\n    /usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_collective_ops.py:66 collective_bcast_recv\r\n        _six.raise_from(_core._status_to_exception(e.code, message), None)\r\n    /root/.local/lib/python2.7/site-packages/six.py:737 raise_from\r\n        raise value\r\n\r\n    InternalError: RecvBufResponse returned 8 bytes where to_tensor expected 4 [Op:CollectiveBcastRecv]\r\n\r\n\r\n```\r\n\r\nDescribe the expected behavior\r\nKeras model could be checkpoint-ed under multi worker training\r\n\r\nCode to reproduce the issue\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n```\r\nfrom __future__ import absolute_import, division, print_function, unicode_literals\r\nimport datetime\r\nimport json\r\nimport os\r\nimport tensorflow_datasets as tfds\r\nimport tensorflow as tf\r\nimport subprocess\r\nimport shlex\r\nimport sys\r\n\r\ntfds.disable_progress_bar()\r\n\r\nBUFFER_SIZE = 60000\r\nBATCH_SIZE = 64\r\n\r\nNUM_WORKERS = 2\r\nGLOBAL_BATCH_SIZE = NUM_WORKERS * BATCH_SIZE\r\n\r\nif __name__ == \"__main__\":\r\n  worker_addrs = ['localhost:9999', 'localhost:9998']\r\n  os.environ['TF_CONFIG'] = json.dumps({\r\n      'cluster': {\r\n          'worker': worker_addrs,\r\n      },\r\n      'task': {'type': 'worker', 'index': int(sys.argv[1])}\r\n  })\r\n\r\n  strategy = tf.distribute.experimental.MultiWorkerMirroredStrategy()\r\n\r\n  def scale(image, label):\r\n    image = tf.cast(image, tf.float32)\r\n    image /= 255\r\n    return image, label\r\n\r\n  def build_and_compile_cnn_model():\r\n    model = tf.keras.Sequential([\r\n        tf.keras.layers.Conv2D(32, 3, activation='relu', input_shape=(28, 28, 1)),\r\n        tf.keras.layers.MaxPooling2D(),\r\n        tf.keras.layers.Flatten(),\r\n        tf.keras.layers.Dense(64, activation='relu'),\r\n        tf.keras.layers.Dense(10, activation='softmax')\r\n    ])\r\n    model.compile(\r\n        loss=tf.keras.losses.sparse_categorical_crossentropy,\r\n        optimizer=tf.keras.optimizers.SGD(learning_rate=0.001),\r\n        metrics=['accuracy'])\r\n    return model\r\n\r\n  datasets, info = tfds.load(name='mnist',\r\n                             with_info=True,\r\n                             as_supervised=True)\r\n\r\n  train_datasets_unbatched = datasets['train'].map(scale).shuffle(BUFFER_SIZE)\r\n\r\n  train_datasets = train_datasets_unbatched.batch(GLOBAL_BATCH_SIZE)\r\n\r\n  with strategy.scope():\r\n    multi_worker_model = build_and_compile_cnn_model()\r\n\r\n   \r\n  checkpoint_callback = tf.keras.callbacks.ModelCheckpoint(\r\n        filepath='/tmp/chk.hdf5',\r\n        monitor='val_loss',\r\n        save_best_only=True,\r\n        load_weights_on_restart=True)\r\n\r\n  multi_worker_model.fit(x=train_datasets, epochs=100, callbacks = [checkpoint_callback])\r\n\r\n```\r\nOther info / logs\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31250", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31250/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31250/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31250/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31250", "id": 475919978, "node_id": "MDU6SXNzdWU0NzU5MTk5Nzg=", "number": 31250, "title": "google.protobuf.json_format.MessageToDict incorrectly decodes bytes_list", "user": {"login": "robertlugg", "id": 6054540, "node_id": "MDQ6VXNlcjYwNTQ1NDA=", "avatar_url": "https://avatars0.githubusercontent.com/u/6054540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/robertlugg", "html_url": "https://github.com/robertlugg", "followers_url": "https://api.github.com/users/robertlugg/followers", "following_url": "https://api.github.com/users/robertlugg/following{/other_user}", "gists_url": "https://api.github.com/users/robertlugg/gists{/gist_id}", "starred_url": "https://api.github.com/users/robertlugg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/robertlugg/subscriptions", "organizations_url": "https://api.github.com/users/robertlugg/orgs", "repos_url": "https://api.github.com/users/robertlugg/repos", "events_url": "https://api.github.com/users/robertlugg/events{/privacy}", "received_events_url": "https://api.github.com/users/robertlugg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1093464312, "node_id": "MDU6TGFiZWwxMDkzNDY0MzEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:others", "name": "type:others", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-08-01T22:43:27Z", "updated_at": "2020-01-08T22:13:59Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n\r\n> - Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n\r\nYES, custom code.\r\n> - OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n\r\nCentOS 7-1810 in VirtualBox VM\r\n```\r\nuname -a\r\nLinux centos7-1810 3.10.0-957.10.1.el7.x86_64 #1 SMP Mon Mar 18 15:06:45 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\r\n```\r\n> - TensorFlow installed from (source or binary):\r\n\r\nBinary.  Unchanged from tf-nightly.\r\n> - TensorFlow version (use command below):\r\n\r\nNote that a warning is printed if I use tf.GIT_VERSION.\r\n```\r\nprint(tf.version.GIT_VERSION, tf.VERSION) \r\nv1.12.1-7396-g12481e7e74 1.15.0-dev20190730\r\n```\r\n> - Python version:\r\n\r\nPython 3.6.8 :: Anaconda, Inc.\r\n\r\n**Describe the current behavior**\r\ngoogle.protobuf.json_format.MessageToDict, I believe \"decodes\" bytes_list incorrectly.  What I get is:\r\n`['VGF4aSBBZmZpbGlhdGlvbiBTZXJ2aWNlcw==']`\r\n\r\n**Describe the expected behavior**\r\ngoogle.protobuf.json_format.MessageToDict should decode my byte_list to:\r\n`[b'Taxi Affiliation Services']`\r\n, which is what I get when looking directly at the tf.train.Example.\r\n\r\nData is from the chicago_taxi_pipeline demo at:\r\nhttps://github.com/tensorflow/tfx/blob/master/tfx/examples/chicago_taxi_pipeline\r\n\r\n\"data_tfrecord-00000-of-00001\" is the \"eval\" output of:\r\ntfx.components.example_gen.csv_example_gen.component.CsvExampleGen\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\nimport google.protobuf.json_format as jfmt\r\n\r\nprint(tf.__version__)\r\nexample = next(tf.python_io.tf_record_iterator(\"data_tfrecord-00000-of-00001\"))\r\nresult = tf.train.Example.FromString(example)\r\n\r\ncompany_name_direct = result.features.feature['company'].bytes_list.value\r\nprint(company_name_direct)\r\n\r\nresult_as_dict = jfmt.MessageToDict(result)\r\ncompany_name_indirect = result_as_dict['features']['feature']['company']['bytesList']['value'] \r\nprint(company_name_indirect)\r\n```\r\n```\r\n# output:\r\n1.15.0-dev20190730\r\n[b'Taxi Affiliation Services']\r\n['VGF4aSBBZmZpbGlhdGlvbiBTZXJ2aWNlcw==']\r\n```\r\n\r\n**Other info / logs**\r\nI have not tested this on any other build except 1.15 nightly.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31248", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31248/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31248/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31248/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31248", "id": 475886095, "node_id": "MDU6SXNzdWU0NzU4ODYwOTU=", "number": 31248, "title": "WALSMatrixFactorization: Input matrix is not invertible. node cond/MatrixSolve", "user": {"login": "MiladShahidi", "id": 36179054, "node_id": "MDQ6VXNlcjM2MTc5MDU0", "avatar_url": "https://avatars0.githubusercontent.com/u/36179054?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MiladShahidi", "html_url": "https://github.com/MiladShahidi", "followers_url": "https://api.github.com/users/MiladShahidi/followers", "following_url": "https://api.github.com/users/MiladShahidi/following{/other_user}", "gists_url": "https://api.github.com/users/MiladShahidi/gists{/gist_id}", "starred_url": "https://api.github.com/users/MiladShahidi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MiladShahidi/subscriptions", "organizations_url": "https://api.github.com/users/MiladShahidi/orgs", "repos_url": "https://api.github.com/users/MiladShahidi/repos", "events_url": "https://api.github.com/users/MiladShahidi/events{/privacy}", "received_events_url": "https://api.github.com/users/MiladShahidi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "walidk", "id": 734669, "node_id": "MDQ6VXNlcjczNDY2OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/734669?v=4", "gravatar_id": "", "url": "https://api.github.com/users/walidk", "html_url": "https://github.com/walidk", "followers_url": "https://api.github.com/users/walidk/followers", "following_url": "https://api.github.com/users/walidk/following{/other_user}", "gists_url": "https://api.github.com/users/walidk/gists{/gist_id}", "starred_url": "https://api.github.com/users/walidk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/walidk/subscriptions", "organizations_url": "https://api.github.com/users/walidk/orgs", "repos_url": "https://api.github.com/users/walidk/repos", "events_url": "https://api.github.com/users/walidk/events{/privacy}", "received_events_url": "https://api.github.com/users/walidk/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "walidk", "id": 734669, "node_id": "MDQ6VXNlcjczNDY2OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/734669?v=4", "gravatar_id": "", "url": "https://api.github.com/users/walidk", "html_url": "https://github.com/walidk", "followers_url": "https://api.github.com/users/walidk/followers", "following_url": "https://api.github.com/users/walidk/following{/other_user}", "gists_url": "https://api.github.com/users/walidk/gists{/gist_id}", "starred_url": "https://api.github.com/users/walidk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/walidk/subscriptions", "organizations_url": "https://api.github.com/users/walidk/orgs", "repos_url": "https://api.github.com/users/walidk/repos", "events_url": "https://api.github.com/users/walidk/events{/privacy}", "received_events_url": "https://api.github.com/users/walidk/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-08-01T20:58:13Z", "updated_at": "2019-08-02T22:24:44Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Custom code: Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- Mobile device: Noe\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v1.13.0-rc2-0-gc865ec5621 / 1.13.0-rc2\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n**Describe the current behavior**\r\nFactorizing a small 4x4 (dense) matrix with WALSMatrixFactorizaion results in the following error:\r\n\r\n> InvalidArgumentError (see above for traceback): Input matrix is not invertible.\r\n> \t [[node cond/MatrixSolve (defined at /home/milad/PycharmProjects/wals_rec/temp.py:55) ]] \r\n\r\n**Describe the expected behavior**\r\nFactorize the matrix and evaluate without the error.\r\n\r\n**Code to reproduce the issue**\r\n\r\n\timport numpy as np\r\n\timport tensorflow as tf\r\n\tfrom tensorflow.contrib.factorization import WALSMatrixFactorization\r\n\timport shutil\r\n\r\n\r\n\tdef make_input_fn(args):\r\n\r\n\t\tdef to_sparse(values):\r\n\t\t\tindices = np.array([[0], [1], [2], [3]], dtype=np.int64)\r\n\t\t\tsp_tensor = tf.SparseTensor(indices=indices, values=values, dense_shape=values.shape)\r\n\t\t\treturn sp_tensor\r\n\r\n\t\tdef _input_fn():\r\n\t\t\trows_dataset = tf.data.Dataset.from_tensor_slices(args['matrix_values']). \\\r\n\t\t\t\tmap(map_func=to_sparse). \\\r\n\t\t\t\trepeat(count=None). \\\r\n\t\t\t\tbatch(batch_size=args['batch_size'])\r\n\r\n\t\t\tcols_dataset = tf.data.Dataset.from_tensor_slices(np.transpose(args['matrix_values'])). \\\r\n\t\t\t\tmap(map_func=to_sparse). \\\r\n\t\t\t\trepeat(count=None). \\\r\n\t\t\t\tbatch(batch_size=4)\r\n\r\n\t\t\tfeatures = {\r\n\t\t\t\tWALSMatrixFactorization.INPUT_ROWS: rows_dataset.make_one_shot_iterator().get_next(),\r\n\t\t\t\tWALSMatrixFactorization.INPUT_COLS: cols_dataset.make_one_shot_iterator().get_next(),\r\n\t\t\t\tWALSMatrixFactorization.PROJECT_ROW: tf.constant(True, name=\"PROJECT_ROW\")\r\n\t\t\t}\r\n\t\t\treturn features, None\r\n\r\n\t\treturn _input_fn\r\n\r\n\r\n\tdef train_and_evaluate(args):\r\n\r\n\t\tdef experiment_fn(output_dir):\r\n\t\t\treturn tf.contrib.learn.Experiment(\r\n\t\t\t\ttf.contrib.factorization.WALSMatrixFactorization(\r\n\t\t\t\t\tnum_rows=args[\"nrows\"],\r\n\t\t\t\t\tnum_cols=args[\"ncols\"],\r\n\t\t\t\t\trow_weights=None,\r\n\t\t\t\t\tcol_weights=None,\r\n\t\t\t\t\tregularization_coeff=0,\r\n\t\t\t\t\tembedding_dimension=args[\"n_embeds\"],\r\n\t\t\t\t\tmodel_dir=output_dir),\r\n\t\t\t\ttrain_input_fn=make_input_fn(args),\r\n\t\t\t\teval_input_fn=make_input_fn(args),\r\n\t\t\t\ttrain_steps=10,\r\n\t\t\t\teval_steps=1,\r\n\t\t\t\t# Error doesn't happen if min_eval_frequency > train_steps\r\n\t\t\t\tmin_eval_frequency=5)\r\n\r\n\t\tfrom tensorflow.contrib.learn.python.learn import learn_runner\r\n\t\tlearn_runner.run(experiment_fn=experiment_fn, output_dir=args[\"output_dir\"])\r\n\r\n\r\n\tif __name__ == '__main__':\r\n\r\n\t\tK = 4\r\n\t\targs = {\r\n\t\t\t'ncols': K,\r\n\t\t\t'nrows': K,\r\n\t\t\t'output_dir': 'wals_temp',\r\n\t\t\t'n_embeds': 2,\r\n\t\t\t'n_steps': 5,\r\n\t\t\t'batch_size': K,\r\n\t\t\t'matrix_values': np.array([[1, 2, 3, 4],\r\n\t\t\t\t\t\t\t\t\t   [2, 4, 8, 12],\r\n\t\t\t\t\t\t\t\t\t   [3, 6, 7, 13],\r\n\t\t\t\t\t\t\t\t\t   [3, 5, 7, 9]], dtype=np.float32)\r\n\r\n\t\t}\r\n\r\n\t\tshutil.rmtree(args['output_dir'], ignore_errors=True)\r\n\t\ttrain_and_evaluate(args)\r\n\r\n**Other info / logs**\r\nThe error happens on [this line](https://github.com/tensorflow/tensorflow/blob/27d5e277dd6b9a6c3a331ae0dfd51361607d6b9b/tensorflow/contrib/factorization/python/ops/factorization_ops.py#L919). The cause seems to be that the (column) Gramian suddenly becomes zero during evaluation and therefore the lhs of the normal equation is not invertible (training steps run fine). I confirmed this by running it step by step and using tfdbg.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31247", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31247/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31247/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31247/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31247", "id": 475879051, "node_id": "MDU6SXNzdWU0NzU4NzkwNTE=", "number": 31247, "title": "Branch r2.0 Failed Source Build on macOS Mojave", "user": {"login": "ilhamfp", "id": 31740013, "node_id": "MDQ6VXNlcjMxNzQwMDEz", "avatar_url": "https://avatars0.githubusercontent.com/u/31740013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ilhamfp", "html_url": "https://github.com/ilhamfp", "followers_url": "https://api.github.com/users/ilhamfp/followers", "following_url": "https://api.github.com/users/ilhamfp/following{/other_user}", "gists_url": "https://api.github.com/users/ilhamfp/gists{/gist_id}", "starred_url": "https://api.github.com/users/ilhamfp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ilhamfp/subscriptions", "organizations_url": "https://api.github.com/users/ilhamfp/orgs", "repos_url": "https://api.github.com/users/ilhamfp/repos", "events_url": "https://api.github.com/users/ilhamfp/events{/privacy}", "received_events_url": "https://api.github.com/users/ilhamfp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1205765054, "node_id": "MDU6TGFiZWwxMjA1NzY1MDU0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:macOS", "name": "subtype:macOS", "color": "b619ea", "default": false, "description": "macOS Build/Installation issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2019-08-01T20:40:46Z", "updated_at": "2019-11-13T00:31:25Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- OS Platform and Distribution: macOS Mojave, 10.14.5 (18F203), (15-inch 2018)\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version: r2.0\r\n- Python version: Here's the result for `python` in terminal\r\n```\r\n  Python 3.7.3 (default, Mar 27 2019, 16:54:48) \r\n  [Clang 4.0.1 (tags/RELEASE_401/final)] :: Anaconda, Inc. on darwin\r\n  Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n```\r\n- Bazel version (if compiling from source): 0.26.0\r\n- GCC/Compiler version (if compiling from source): The result for `gcc -v`\r\n```\r\nConfigured with: --prefix=/Applications/Xcode-beta.app/Contents/Developer/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/4.2.1\r\nApple clang version 11.0.0 (clang-1100.0.31.5)\r\nTarget: x86_64-apple-darwin18.6.0\r\nThread model: posix\r\nInstalledDir: /Applications/Xcode-beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\r\n```\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the problem**\r\nBuild failed with `bazel run //tensorflow/python/autograph/operators:py_builtins_test` command. I have tried both answering yes and no for `Do you wish to download a fresh release of clang?` question on `./configure`, everything else is the default.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n1. Clone tensorflow from official github repo\r\n2. Checkout to branch r2.0\r\n3. run `./configure` and press enter (all default) except for `Do you wish to download a fresh release of clang?` where I tried both yes & no\r\n4. `bazel run //tensorflow/python/autograph/operators:py_builtins_test`\r\n\r\n\r\n**Any other info / logs**\r\nHere's one of the `./configure` log: https://pastebin.com/yqsPgKeS\r\nHere's the terminal log for `yes` on bazel run command: https://pastebin.com/cvsdbcHY\r\nHere's the terminal log for `no` on bazel run command: https://pastebin.com/VrEVn8ig\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31244", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31244/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31244/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31244/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31244", "id": 475822103, "node_id": "MDU6SXNzdWU0NzU4MjIxMDM=", "number": 31244, "title": "Make TF-TRT  input and output  semantic same as  TF ", "user": {"login": "sgambient", "id": 42156923, "node_id": "MDQ6VXNlcjQyMTU2OTIz", "avatar_url": "https://avatars0.githubusercontent.com/u/42156923?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sgambient", "html_url": "https://github.com/sgambient", "followers_url": "https://api.github.com/users/sgambient/followers", "following_url": "https://api.github.com/users/sgambient/following{/other_user}", "gists_url": "https://api.github.com/users/sgambient/gists{/gist_id}", "starred_url": "https://api.github.com/users/sgambient/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sgambient/subscriptions", "organizations_url": "https://api.github.com/users/sgambient/orgs", "repos_url": "https://api.github.com/users/sgambient/repos", "events_url": "https://api.github.com/users/sgambient/events{/privacy}", "received_events_url": "https://api.github.com/users/sgambient/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1754777628, "node_id": "MDU6TGFiZWwxNzU0Nzc3NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu:tensorrt", "name": "comp:gpu:tensorrt", "color": "ea98ba", "default": false, "description": "Issues specific to TensorRT"}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-08-01T18:17:26Z", "updated_at": "2019-12-26T18:34:17Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using):1.13.1\r\n- Are you willing to contribute it (Yes/No):Do not think have the capability yet. \r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nIn TF-TRT the outputs  have to be specified in create_inference_graph unlike in TF, where outputs can be selected at sess.run ().     Also, in TF not all placeholders need to be assigned at sess.run () if  in the network they have not effect in the output.  That is not the case with TF-TRT. These 2 semantic differences make it very hard for complex TF network to be converted to TF-TRT. \r\n\r\n**Will this change the current api? How?**\r\n\r\n**Who will benefit with this feature?**\r\nAny TF-TRT user. \r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31240", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31240/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31240/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31240/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31240", "id": 475798927, "node_id": "MDU6SXNzdWU0NzU3OTg5Mjc=", "number": 31240, "title": "SequenceFeatures gets overly complex when used with a sequence_numeric_column", "user": {"login": "durandg12", "id": 45902885, "node_id": "MDQ6VXNlcjQ1OTAyODg1", "avatar_url": "https://avatars0.githubusercontent.com/u/45902885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/durandg12", "html_url": "https://github.com/durandg12", "followers_url": "https://api.github.com/users/durandg12/followers", "following_url": "https://api.github.com/users/durandg12/following{/other_user}", "gists_url": "https://api.github.com/users/durandg12/gists{/gist_id}", "starred_url": "https://api.github.com/users/durandg12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/durandg12/subscriptions", "organizations_url": "https://api.github.com/users/durandg12/orgs", "repos_url": "https://api.github.com/users/durandg12/repos", "events_url": "https://api.github.com/users/durandg12/events{/privacy}", "received_events_url": "https://api.github.com/users/durandg12/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-08-01T17:19:57Z", "updated_at": "2019-12-05T10:35:58Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): no\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS 10.13.6\r\n- TensorFlow installed from (source or binary): from pip install\r\n- TensorFlow version (use command below): v2.0.0-beta0-16-g1d91213fe7 2.0.0-beta1\r\n- Python version: v3.6.7:6ec5cf24b7, Oct 20 2018, 03:02:14\r\n\r\n**Describe the current behavior**\r\n\r\nThe behaviour of `SequenceFeatures` layer is really different between when it's used with a feature column produced with `sequence_numeric_column` and when it's used with a feature column produced with `sequence_categorical_column_with_identity`and `embedding_column`.\r\n\r\nI've [already reported an issue](https://github.com/tensorflow/tensorflow/issues/29879) where the `call` method of `SequenceFeatures` used with `sequence_numeric_column` unnecessarily requires its input to be a `SparseTensor` instead of a regular `Tensor`.\r\n\r\nToday I was experimenting with Keras Funcional API by building a model using two `SequenceFeatures` layers along with both `sequence_numeric_column` and `embedding_column`. I got graphic depictions of the model using `tf.keras.Model.summary` and `tf.keras.utils.plot_model` and discovered that `SequenceFeatures`  with `sequence_numeric_column` gets decomposed in a million of sub-layers of type `TensorFlowOpLayer`, as opposite to the clean and to the point depiction of `SequenceFeatures` with `embedding_column`. This has the only effect of overloading the results of `summary`and `plot_model`with not so relevant information instead of having a concise insight of the graph.\r\n\r\nHere is the obtained plot:\r\n![Large and complex plot of the model](https://github.com/durandg12/nn_pictures/blob/master/total_mess.png)\r\n\r\nThe ![upper part](https://github.com/durandg12/nn_pictures/blob/master/zoom.png) of the plot is due to the conversion of the input into sparse tensor, so this is related to [the previous issue](https://github.com/tensorflow/tensorflow/issues/29879). The focus of the issue I'm opening today is ![this part](https://github.com/durandg12/nn_pictures/blob/master/zoom2.png) which should not exist in my opinion.\r\n\r\n**Describe the expected behavior**\r\n\r\nAssuming my previous issue is solved, I think that the result of `plot_model` should simply ![look like this](https://github.com/durandg12/nn_pictures/blob/master/expected_model.png).\r\n\r\n**Code to reproduce the issue**\r\n\r\n```\r\nimport numpy as np\r\nimport tensorflow as tf\r\nfrom tensorflow.feature_column import embedding_column, sequence_categorical_column_with_identity, \\\r\n    sequence_numeric_column\r\nfrom tensorflow.keras import Input, Model\r\nfrom tensorflow.keras.experimental import SequenceFeatures\r\nfrom tensorflow.keras.layers import Input, Dense\r\n\r\n\r\n#on my computer I have used a\r\n#custom plot_model instead of tf.keras.utils.plot_model \r\n#because of a bug, see nota bene below\r\n#from deep.modeltodot import plot_model\r\nfrom tensorflow.keras.utils import plot_model\r\n\r\nprint(tf.version.GIT_VERSION, tf.version.VERSION)\r\n\r\n#Model preparation\r\nseq_fc_dense = sequence_numeric_column('denseFeat')\r\nseq_layer_dense = SequenceFeatures(seq_fc_dense, name='denseFeatLayer')\r\n\r\nnb_cat = 5\r\nseq_fc_cat = sequence_categorical_column_with_identity('catFeat', nb_cat)\r\nseq_fc_cat = embedding_column(seq_fc_cat, 2)\r\nseq_layer_cat = SequenceFeatures(seq_fc_cat, name='catFeatLayer')\r\n\r\ninput_dense = Input(shape=(None,), name='denseFeat')\r\ninput_cat = Input(shape=(None,), name='catFeat', dtype=tf.int32)\r\n# we need to convert input_dense to a sparse tensor, see https://github.com/tensorflow/tensorflow/issues/29879\r\nzero = tf.constant(0, dtype=tf.float32)\r\nindices = tf.where(tf.not_equal(input_dense, zero))\r\nvalues = tf.gather_nd(input_dense, indices)\r\nsparse = tf.SparseTensor(indices, values, tf.cast(tf.shape(input_dense), dtype=tf.int64))\r\n\r\nx_dense = seq_layer_dense({'denseFeat': sparse})[0]\r\nx_cat = seq_layer_cat({'catFeat': input_cat})[0]\r\nx = tf.concat([x_dense, x_cat], -1)\r\noutput = Dense(1, activation='sigmoid')(x)\r\n\r\nmodel = Model(inputs={'denseFeat': input_dense, 'catFeat': input_cat}, outputs=output)\r\n\r\n#model.summary()\r\nplot_model(model)\r\n```\r\n\r\n**Nota bene**\r\nThe custom `plot_model` that I used to make my plots is the same as `tf.keras.utils.plot_model` except that I replaced the following import in keras/utils/vis_utils.py:\r\n```\r\ntry:\r\n  # pydot-ng is a fork of pydot that is better maintained.\r\n  import pydot_ng as pydot\r\nexcept ImportError:\r\n  # pydotplus is an improved version of pydot\r\n  try:\r\n    import pydotplus as pydot\r\n  except ImportError:\r\n    # Fall back on pydot if necessary.\r\n    try:\r\n      import pydot\r\n    except ImportError:\r\n      pydot = None\r\n```\r\nby `import pydot_ng as pydot`and I removed the call to `_check_pydot` in `model_to_dot` because it was raising an exception.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31239", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31239/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31239/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31239/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31239", "id": 475755110, "node_id": "MDU6SXNzdWU0NzU3NTUxMTA=", "number": 31239, "title": "Tflite model show a completely different result than frozen inference model", "user": {"login": "abdou31", "id": 19480228, "node_id": "MDQ6VXNlcjE5NDgwMjI4", "avatar_url": "https://avatars3.githubusercontent.com/u/19480228?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abdou31", "html_url": "https://github.com/abdou31", "followers_url": "https://api.github.com/users/abdou31/followers", "following_url": "https://api.github.com/users/abdou31/following{/other_user}", "gists_url": "https://api.github.com/users/abdou31/gists{/gist_id}", "starred_url": "https://api.github.com/users/abdou31/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abdou31/subscriptions", "organizations_url": "https://api.github.com/users/abdou31/orgs", "repos_url": "https://api.github.com/users/abdou31/repos", "events_url": "https://api.github.com/users/abdou31/events{/privacy}", "received_events_url": "https://api.github.com/users/abdou31/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "karimnosseir", "id": 44206880, "node_id": "MDQ6VXNlcjQ0MjA2ODgw", "avatar_url": "https://avatars1.githubusercontent.com/u/44206880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karimnosseir", "html_url": "https://github.com/karimnosseir", "followers_url": "https://api.github.com/users/karimnosseir/followers", "following_url": "https://api.github.com/users/karimnosseir/following{/other_user}", "gists_url": "https://api.github.com/users/karimnosseir/gists{/gist_id}", "starred_url": "https://api.github.com/users/karimnosseir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karimnosseir/subscriptions", "organizations_url": "https://api.github.com/users/karimnosseir/orgs", "repos_url": "https://api.github.com/users/karimnosseir/repos", "events_url": "https://api.github.com/users/karimnosseir/events{/privacy}", "received_events_url": "https://api.github.com/users/karimnosseir/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "karimnosseir", "id": 44206880, "node_id": "MDQ6VXNlcjQ0MjA2ODgw", "avatar_url": "https://avatars1.githubusercontent.com/u/44206880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karimnosseir", "html_url": "https://github.com/karimnosseir", "followers_url": "https://api.github.com/users/karimnosseir/followers", "following_url": "https://api.github.com/users/karimnosseir/following{/other_user}", "gists_url": "https://api.github.com/users/karimnosseir/gists{/gist_id}", "starred_url": "https://api.github.com/users/karimnosseir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karimnosseir/subscriptions", "organizations_url": "https://api.github.com/users/karimnosseir/orgs", "repos_url": "https://api.github.com/users/karimnosseir/repos", "events_url": "https://api.github.com/users/karimnosseir/events{/privacy}", "received_events_url": "https://api.github.com/users/karimnosseir/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-08-01T15:41:03Z", "updated_at": "2020-01-18T02:39:37Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No, I use a Github repo\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10 x64\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: Samsung A3 2016\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below):1.13.1\r\n- Python version:3.6.8\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:9.0/7.4\r\n- GPU model and memory: Nvidia GeForce 840m\r\n\r\n\r\n\r\n**Describe the current behavior**\r\nHello, \r\nI have trained my custom dataset using the Github project [link](https://github.com/yinguobing/cnn-facial-landmark) to create a model that detects eye region with landmarks.\r\nI have converted the ckpt files model to pb and from pb to tflite model.\r\nEverything is OK here when testing with ckpt files and pb frozen graph in prediction it gives 75 %, 80 % predictions :\r\nThat a result on ibug dataset\r\n![resulttaa](https://user-images.githubusercontent.com/19480228/62306855-e7d8bd00-b482-11e9-92e1-05756165c8c3.PNG)\r\n\r\nI have used ML Kit firebase SDK to integrate tflite model and I have followed instruction for how to use custom model.\r\nFor the first time, I tried to print just values (x,y) couples of points ( landmarks ) that can be drawn on the eye region contours\r\n\r\n**Describe the expected behavior**\r\nI got values but are not the same with the same image tested with ckpt files.\r\nI have \r\n\r\n**Code to reproduce the issue**\r\nI have add a new issue on firebase Ml kit , you can find the code and logs [here](https://github.com/firebase/quickstart-android/issues/923)\r\n\r\n\r\nUpdate:\r\nThis is the difference showing between tflite model prediction and frozen inference model prediction:\r\n\r\n+ Tflite model prediction:\r\n\r\n![2019-08-07](https://user-images.githubusercontent.com/19480228/62698776-426f9d00-b9de-11e9-9e7a-0927c467ff78.png) \r\n\r\n+ frozen inference graph model prediction:\r\n\r\n![image](https://user-images.githubusercontent.com/19480228/62699230-55cf3800-b9df-11e9-98e9-8a2fb5f9563a.png)\r\n\r\n\r\n\r\nHow can I solve this?\r\nI really need help to fix this problem.\r\nThanks\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31236", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31236/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31236/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31236/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31236", "id": 475708519, "node_id": "MDU6SXNzdWU0NzU3MDg1MTk=", "number": 31236, "title": "PyCharm debugger automatically evaluates Tensor._shape and spams console", "user": {"login": "jannik-w", "id": 19254791, "node_id": "MDQ6VXNlcjE5MjU0Nzkx", "avatar_url": "https://avatars0.githubusercontent.com/u/19254791?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jannik-w", "html_url": "https://github.com/jannik-w", "followers_url": "https://api.github.com/users/jannik-w/followers", "following_url": "https://api.github.com/users/jannik-w/following{/other_user}", "gists_url": "https://api.github.com/users/jannik-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/jannik-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jannik-w/subscriptions", "organizations_url": "https://api.github.com/users/jannik-w/orgs", "repos_url": "https://api.github.com/users/jannik-w/repos", "events_url": "https://api.github.com/users/jannik-w/events{/privacy}", "received_events_url": "https://api.github.com/users/jannik-w/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 736653459, "node_id": "MDU6TGFiZWw3MzY2NTM0NTk=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:eager", "name": "comp:eager", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-08-01T14:14:55Z", "updated_at": "2020-02-20T06:32:37Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution: macOS 10.14.6\r\n- TensorFlow version: 1.14.0\r\n- Python version: 3.6.8\r\n\r\n**Describe the current behavior**\r\nWhen analyzing a tensor in eager-execution mode in the \"Watches\" of the PyCharm Debugger, the deprecated object Tensor._shape is automatically evaluated. This results in following warning in the console (two times for one evaluation). When evaluating many tensor, this substantially spams the console.\r\n\r\n```console\r\nW0801 15:29:42.581780 4505736640 ops.py:465] Tensor._shape is private, use Tensor.shape instead. Tensor._shape will eventually be removed.\r\n```\r\n\r\n**Describe the expected behavior**\r\nSignificant reduce in the amount of warnings, ideally to zero.\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport tensorflow as tf\r\n\r\ntf.compat.v1.enable_eager_execution()\r\n\r\nimport numpy as np\r\n\r\ntensor_1 = tf.convert_to_tensor(np.ones((20, 20)))\r\n\r\nprint()  # set breakpoint here\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31235", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31235/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31235/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31235/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31235", "id": 475675074, "node_id": "MDU6SXNzdWU0NzU2NzUwNzQ=", "number": 31235, "title": "tf.numpy_function throws error when encounter np.transpose", "user": {"login": "SumNeuron", "id": 22868585, "node_id": "MDQ6VXNlcjIyODY4NTg1", "avatar_url": "https://avatars3.githubusercontent.com/u/22868585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SumNeuron", "html_url": "https://github.com/SumNeuron", "followers_url": "https://api.github.com/users/SumNeuron/followers", "following_url": "https://api.github.com/users/SumNeuron/following{/other_user}", "gists_url": "https://api.github.com/users/SumNeuron/gists{/gist_id}", "starred_url": "https://api.github.com/users/SumNeuron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SumNeuron/subscriptions", "organizations_url": "https://api.github.com/users/SumNeuron/orgs", "repos_url": "https://api.github.com/users/SumNeuron/repos", "events_url": "https://api.github.com/users/SumNeuron/events{/privacy}", "received_events_url": "https://api.github.com/users/SumNeuron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-08-01T13:11:47Z", "updated_at": "2019-11-29T12:32:15Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): kinda\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): 16.04LTS Ubuntu\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/a\r\n- TensorFlow installed from (source or binary): conda forge\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: 2.6\r\n- Bazel version (if compiling from source): n/a\r\n- GCC/Compiler version (if compiling from source): n/a\r\n- CUDA/cuDNN version: 9\r\n- GPU model and memory: Quadrao 16GB\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nI am trying to move some of Keras's image [transformation functions](https://github.com/keras-team/keras-preprocessing/blob/master/keras_preprocessing/image/affine_transformations.py) into my dataset constructor function, e.g. \r\n\r\n```python\r\n# inside my function that makes a dataset\r\nfilenames = [...]\r\n\r\npreprocess_fn = lambda p: preprocess_image(p, some, default, arguments)\r\n\r\n# workaround as shown by @mrry in https://github.com/tensorflow/tensorflow/issues/12396\r\ntf_preproc_fn = lambda p: tf.numpy_function(preprocess_fn, [p], tf.float32)\r\n\r\npath_ds = tf.data.Dataset.from_tensor_slices(fullpaths)\r\nimgs_ds = path_ds.map(tf_preproc_fn, num_parallel_calls=AUTOTUNE)\r\n\r\n\r\n```\r\nwhere  at somepoint in `preprocess_fn` `np.rollaxis` is called, which in turns calls `np.transpose`. this throws:\r\n\r\n```\r\n\r\n  File \"/home/user/anaconda3/envs/tf/lib/python3.6/site-packages/numpy/core/numeric.py\", line 1554, in rollaxis\r\n    return a.transpose(axes)\r\n\r\nAttributeError: 'tensorflow.python.framework.ops.EagerTensor' object has no attribute 'transpose'\r\n\r\n\r\n\t [[{{node PyFunc}}]] [Op:IteratorGetNextSync]\r\n```\r\n\r\n\r\n**Describe the expected behavior**\r\n\r\nThat `tf.numpy_function` just \"works\". Already had to use `tf.cast(tensor.shape[0], tf.float32)` to prevent some errors.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n\r\n\r\n```python\r\n# from keras\r\ndef apply_channel_shift(x:list, intensity:float, channel_axis:int=0)->list:\r\n    '''\r\n    Performs a channel shift.\r\n\r\n    Arguments\r\n        x (np.ndarray): Input tensor. Must be 3D.\r\n        intensity (float): Transformation intensity.\r\n        channel_axis (int): Index of axis for channels in the input tensor.\r\n\r\n    Returns\r\n        Numpy image tensor.\r\n    '''\r\n    x = np.rollaxis(x, channel_axis, 0)\r\n    min_x, max_x = np.min(x), np.max(x)\r\n    channel_images = [\r\n        np.clip(x_channel + intensity,\r\n                min_x,\r\n                max_x)\r\n        for x_channel in x]\r\n    x = np.stack(channel_images, axis=0)\r\n    x = np.rollaxis(x, 0, channel_axis + 1)\r\n    return x\r\n\r\n_fn = lambda img_tnsr : apply_channel_shift(img_tnsr, 1, 3)\r\ntf_fn = tf.numpy_function(lambda i: _fn(i), [i], [tf.float32])\r\n\r\npath_ds.map(tf_fn)\r\n```\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31229", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31229/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31229/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31229/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31229", "id": 475558840, "node_id": "MDU6SXNzdWU0NzU1NTg4NDA=", "number": 31229, "title": "Incorrect predictions of Mobilenet_V2", "user": {"login": "JionBin", "id": 40187402, "node_id": "MDQ6VXNlcjQwMTg3NDAy", "avatar_url": "https://avatars3.githubusercontent.com/u/40187402?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JionBin", "html_url": "https://github.com/JionBin", "followers_url": "https://api.github.com/users/JionBin/followers", "following_url": "https://api.github.com/users/JionBin/following{/other_user}", "gists_url": "https://api.github.com/users/JionBin/gists{/gist_id}", "starred_url": "https://api.github.com/users/JionBin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JionBin/subscriptions", "organizations_url": "https://api.github.com/users/JionBin/orgs", "repos_url": "https://api.github.com/users/JionBin/repos", "events_url": "https://api.github.com/users/JionBin/events{/privacy}", "received_events_url": "https://api.github.com/users/JionBin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "nutsiepully", "id": 1307460, "node_id": "MDQ6VXNlcjEzMDc0NjA=", "avatar_url": "https://avatars3.githubusercontent.com/u/1307460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nutsiepully", "html_url": "https://github.com/nutsiepully", "followers_url": "https://api.github.com/users/nutsiepully/followers", "following_url": "https://api.github.com/users/nutsiepully/following{/other_user}", "gists_url": "https://api.github.com/users/nutsiepully/gists{/gist_id}", "starred_url": "https://api.github.com/users/nutsiepully/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nutsiepully/subscriptions", "organizations_url": "https://api.github.com/users/nutsiepully/orgs", "repos_url": "https://api.github.com/users/nutsiepully/repos", "events_url": "https://api.github.com/users/nutsiepully/events{/privacy}", "received_events_url": "https://api.github.com/users/nutsiepully/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nutsiepully", "id": 1307460, "node_id": "MDQ6VXNlcjEzMDc0NjA=", "avatar_url": "https://avatars3.githubusercontent.com/u/1307460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nutsiepully", "html_url": "https://github.com/nutsiepully", "followers_url": "https://api.github.com/users/nutsiepully/followers", "following_url": "https://api.github.com/users/nutsiepully/following{/other_user}", "gists_url": "https://api.github.com/users/nutsiepully/gists{/gist_id}", "starred_url": "https://api.github.com/users/nutsiepully/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nutsiepully/subscriptions", "organizations_url": "https://api.github.com/users/nutsiepully/orgs", "repos_url": "https://api.github.com/users/nutsiepully/repos", "events_url": "https://api.github.com/users/nutsiepully/events{/privacy}", "received_events_url": "https://api.github.com/users/nutsiepully/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-08-01T08:55:45Z", "updated_at": "2019-09-03T05:30:35Z", "closed_at": null, "author_association": "NONE", "body": "Hi,\r\nI built the tensorflow lite on iMX8(4xA53) platform. I can get correct results when using models of mobilenet_v1_1.0_224, mobilenet_v1_1.0_224_quant and mobilenet_v2_1.0_224 as input model for  [label_image](https://github.com/tensorflow/tensorflow/tree/v2.0.0-alpha0/tensorflow/lite/examples/label_image). But I got unreasonable predictons when using [mobilenet_v2_1.0_quant](https://storage.googleapis.com/download.tensorflow.org/models/tflite_11_05_08/mobilenet_v2_1.0_224_quant.tgzl).\r\n\r\nHere are the results:\r\n_./label_image -i dog.bmp -m **mobilenet_v1_1.0_224.tflite** -l labels.txt                          \r\nLoaded model mobilenet_v1_1.0_224.tflite\r\nresolved reporter\r\ninvoked \r\naverage time: 200.31 ms \r\n0.987781: 209 Labrador retriever\r\n0.00432148: 208 golden retriever\r\n0.00298653: 163 beagle\r\n0.00134322: 160 Rhodesian ridgeback\r\n./label_image -i dog.bmp -m **mobilenet_v1_1.0_224_quant.tflite** -l labels.txt \r\nLoaded model mobilenet_v1_1.0_224_quant.tflite\r\nresolved reporter\r\ninvoked \r\naverage time: 85.934 ms \r\n0.984314: 209 Labrador retriever\r\n0.00392157: 435 bath towel\r\n0.00392157: 208 golden retriever\r\n0.00392157: 169 redbone\r\n0.00392157: 163 beagle\r\n./label_image -i dog.bmp -m **mobilenet_v2_1.0_224.tflite** -l labels.txt \r\nLoaded model mobilenet_v2_1.0_224.tflite\r\nresolved reporter\r\ninvoked \r\naverage time: 180.721 ms \r\n0.946971: 209 Labrador retriever\r\n0.00624463: 160 Rhodesian ridgeback\r\n0.0035156: 208 golden retriever\r\n0.00168908: 244 bull mastiff\r\n0.0015452: 163 beagle\r\n./label_image -i dog.bmp -m **mobilenet_v2_1.0_224_quant.tflite** -l labels.txt \r\nLoaded model mobilenet_v2_1.0_224_quant.tflite\r\nresolved reporter\r\ninvoked \r\naverage time: 87.001 ms \r\n**0.780392: 209 Labrador retriever\r\n0.529412: 853 tennis ball\r\n0.529412: 160 Rhodesian ridgeback\r\n0.509804: 208 golden retriever\r\n0.498039: 244 bull mastiff**_\r\n\r\nMy questionn is that is this a bug about the Mobilenet_V2 quantized models in tensorflow lite 2.0 alpha?  Would you please help? Thanks in advance."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31228", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31228/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31228/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31228/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31228", "id": 475546450, "node_id": "MDU6SXNzdWU0NzU1NDY0NTA=", "number": 31228, "title": "contrib.receptive_field: ValueError: Weight layer's name input to conv layer does not end with '/read'", "user": {"login": "julj", "id": 23333384, "node_id": "MDQ6VXNlcjIzMzMzMzg0", "avatar_url": "https://avatars3.githubusercontent.com/u/23333384?v=4", "gravatar_id": "", "url": "https://api.github.com/users/julj", "html_url": "https://github.com/julj", "followers_url": "https://api.github.com/users/julj/followers", "following_url": "https://api.github.com/users/julj/following{/other_user}", "gists_url": "https://api.github.com/users/julj/gists{/gist_id}", "starred_url": "https://api.github.com/users/julj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/julj/subscriptions", "organizations_url": "https://api.github.com/users/julj/orgs", "repos_url": "https://api.github.com/users/julj/repos", "events_url": "https://api.github.com/users/julj/events{/privacy}", "received_events_url": "https://api.github.com/users/julj/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1166103538, "node_id": "MDU6TGFiZWwxMTY2MTAzNTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/contrib", "name": "contrib", "color": "5319e7", "default": false, "description": "Anything that comes under contrib directory"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-08-01T08:28:52Z", "updated_at": "2019-08-30T17:30:51Z", "closed_at": null, "author_association": "NONE", "body": "I want to compute the receptive field of some convolutional model defined using tf.keras.\r\nI get the graph directly from the session in which the model is built and run `compute_receptive_field_from_graph_def`:\r\n\r\n```\r\nfrom tensorflow.contrib import receptive_field\r\nfrom tensorflow.keras.layers import Input, Conv2D, AvgPool2D, Dense, Flatten\r\nfrom tensorflow.keras.models import Model                                                                                                                                           \r\nfrom tensorflow.keras.backend import get_session\r\n\r\ndef build_model(input_shape):\r\n    inp = Input(shape=input_shape, name='my_input')\r\n    x = Conv2D(32, (3, 3))(inp)\r\n    x = AvgPool2D((2, 2))(x)\r\n    x = Conv2D(32, (3, 3))(x)\r\n    x = AvgPool2D((2, 2))(x)\r\n    x = Conv2D(32, (3, 3), name='my_output')(x)\r\n    x = Flatten()(x)\r\n    x = Dense(100)(x)\r\n    x = Dense(10, activation='softmax')(x)\r\n    return x\r\n\r\nmodel = build_model([64,64,3])\r\ng = get_session().graph\r\nreceptive_field.compute_receptive_field_from_graph_def(g, 'my_input', 'my_output/BiasAdd')\r\n```\r\n\r\nI set the name of the output as the last name of the operation in my_output layer, obtained by checking `g.get_operations()`, i.e. 'my_output/BiasAdd'\r\n\r\n```\r\n...\r\n <tf.Operation 'my_output/kernel/Initializer/random_uniform/shape' type=Const>,\r\n <tf.Operation 'my_output/kernel/Initializer/random_uniform/min' type=Const>,\r\n <tf.Operation 'my_output/kernel/Initializer/random_uniform/max' type=Const>,\r\n <tf.Operation 'my_output/kernel/Initializer/random_uniform/RandomUniform' type=RandomUniform>,\r\n <tf.Operation 'my_output/kernel/Initializer/random_uniform/sub' type=Sub>,\r\n <tf.Operation 'my_output/kernel/Initializer/random_uniform/mul' type=Mul>,\r\n <tf.Operation 'my_output/kernel/Initializer/random_uniform' type=Add>,\r\n <tf.Operation 'my_output/kernel' type=VarHandleOp>,\r\n <tf.Operation 'my_output/kernel/IsInitialized/VarIsInitializedOp' type=VarIsInitializedOp>,\r\n <tf.Operation 'my_output/kernel/Assign' type=AssignVariableOp>,\r\n <tf.Operation 'my_output/kernel/Read/ReadVariableOp' type=ReadVariableOp>,\r\n <tf.Operation 'my_output/bias/Initializer/zeros' type=Const>,\r\n <tf.Operation 'my_output/bias' type=VarHandleOp>,\r\n <tf.Operation 'my_output/bias/IsInitialized/VarIsInitializedOp' type=VarIsInitializedOp>,\r\n <tf.Operation 'my_output/bias/Assign' type=AssignVariableOp>,\r\n <tf.Operation 'my_output/bias/Read/ReadVariableOp' type=ReadVariableOp>,\r\n <tf.Operation 'my_output/dilation_rate' type=Const>,\r\n <tf.Operation 'my_output/Conv2D/ReadVariableOp' type=ReadVariableOp>,\r\n <tf.Operation 'my_output/Conv2D' type=Conv2D>,\r\n <tf.Operation 'my_output/BiasAdd/ReadVariableOp' type=ReadVariableOp>,\r\n <tf.Operation 'my_output/BiasAdd' type=BiasAdd>,\r\n...\r\n```\r\nbut I get\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-13-aad80edbd6db> in <module>\r\n----> 1 receptive_field.compute_receptive_field_from_graph_def(g, 'my_input', 'my_output/BiasAdd')\r\n\r\n~/.miniconda3/envs/phaunos_ml/lib/python3.6/site-packages/tensorflow/contrib/receptive_field/python/util/receptive_field.py in compute_receptive_field_from_graph_def(graph_def, input_node, output_node, stop_propagation, input_resolution)\r\n    272       (kernel_size_x, kernel_size_y, stride_x, stride_y, padding_x, padding_y,\r\n    273        _, _) = parse_layer_parameters.get_layer_params(\r\n--> 274            node, name_to_node, node_info[node.name].input_size)\r\n    275       logging.vlog(\r\n    276           3, \"kernel_size_x = %s, kernel_size_y = %s, \"\r\n\r\n~/.miniconda3/envs/phaunos_ml/lib/python3.6/site-packages/tensorflow/contrib/receptive_field/python/util/parse_layer_parameters.py in get_layer_params(node, name_to_node, input_resolution, force)\r\n    275   if node.op == \"Conv2D\" or node.op == \"DepthwiseConv2dNative\":\r\n    276     stride_x, stride_y = _stride_size(node, name_to_node)\r\n--> 277     kernel_size_x, kernel_size_y = _conv_kernel_size(node, name_to_node)\r\n    278     # Compute the padding for this node separately for each direction.\r\n    279     total_padding_x, padding_x = _padding_size_conv_pool(\r\n\r\n~/.miniconda3/envs/phaunos_ml/lib/python3.6/site-packages/tensorflow/contrib/receptive_field/python/util/parse_layer_parameters.py in _conv_kernel_size(node, name_to_node)\r\n     86   if not weights_layer_read_name.endswith(\"/read\"):\r\n     87     raise ValueError(\r\n---> 88         \"Weight layer's name input to conv layer does not end with '/read'\")\r\n     89   weights_layer_param_name = weights_layer_read_name[:-5]\r\n     90   weights_node = name_to_node[weights_layer_param_name]\r\n\r\nValueError: Weight layer's name input to conv layer does not end with '/read'\r\n```\r\n\r\nI could not find any layer ending with '/read', as suggested. I also tried just 'my_output', but got `ValueError: Output node was not found`. I also tried to set `g.as_graph_def()` instead of `g` as the function's first argument and failed, so here I am.\r\n\r\n\r\n\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31224", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31224/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31224/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31224/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31224", "id": 475511590, "node_id": "MDU6SXNzdWU0NzU1MTE1OTA=", "number": 31224, "title": "Can not load tflite model", "user": {"login": "wugh", "id": 1518998, "node_id": "MDQ6VXNlcjE1MTg5OTg=", "avatar_url": "https://avatars3.githubusercontent.com/u/1518998?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wugh", "html_url": "https://github.com/wugh", "followers_url": "https://api.github.com/users/wugh/followers", "following_url": "https://api.github.com/users/wugh/following{/other_user}", "gists_url": "https://api.github.com/users/wugh/gists{/gist_id}", "starred_url": "https://api.github.com/users/wugh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wugh/subscriptions", "organizations_url": "https://api.github.com/users/wugh/orgs", "repos_url": "https://api.github.com/users/wugh/repos", "events_url": "https://api.github.com/users/wugh/events{/privacy}", "received_events_url": "https://api.github.com/users/wugh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2019-08-01T07:08:43Z", "updated_at": "2020-02-17T10:35:17Z", "closed_at": null, "author_association": "NONE", "body": "# TF information\r\n```\r\ntf-nightly           1.15.0.dev20190730\r\n```\r\n# Model Information\r\n\r\nI use the bert's `run_classifier.py` to export the classifier model\r\n```\r\n1141         name_to_features = {\r\n1142             \"input_ids\": tf.VarLenFeature(tf.int64),\r\n1143             \"input_mask\": tf.VarLenFeature(tf.int64),\r\n1144             \"segment_ids\": tf.VarLenFeature(tf.int64),\r\n1145             \"label_ids\": tf.FixedLenFeature([], tf.int64)\r\n1146         }\r\n1147         serving_input_receiver_fn = tf.estimator.export.build_parsing_serving_input_receiver_fn(name_to_features)\r\n1148         estimator.export_savedmodel(FLAGS.output_dir, serving_input_receiver_fn)\r\n```\r\nThen the estimator to export model.\r\n\r\n# Code to generate tflite model\r\n```\r\nimport tensorflow as tf\r\nimport sys\r\nsaved_model_dir = sys.argv[1]\r\nconverter = tf.lite.TFLiteConverter.from_saved_model(saved_model_dir)\r\nconverter.optimizations = [tf.lite.Optimize.OPTIMIZE_FOR_SIZE]\r\nconverter.target_spec.supported_ops = [tf.lite.OpsSet.TFLITE_BUILTINS,\r\n                                       tf.lite.OpsSet.SELECT_TF_OPS]\r\ntflite_quant_model = converter.convert()\r\nopen(\"converted_model.tflite\", \"wb\").write(tflite_quant_model)\r\n```\r\n\r\n# Code to load tflite model\r\n```import numpy as np\r\nimport tensorflow as tf\r\n\r\n# Load TFLite model and allocate tensors.\r\ninterpreter = tf.lite.Interpreter(model_path=\"converted_model.tflite\")\r\ninterpreter.allocate_tensors()\r\n\r\n# Get input and output tensors.\r\ninput_details = interpreter.get_input_details()\r\nprint(input_details)\r\noutput_details = interpreter.get_output_details()\r\nprint(output_details)\r\n\r\n# Test model on random input data.\r\ninput_shape = input_details[0]['shape']\r\ninput_data = np.array(np.random.random_sample(input_shape), dtype=np.float32)\r\ninterpreter.set_tensor(input_details[0]['index'], input_data)\r\n\r\ninterpreter.invoke()\r\n\r\n# The function `get_tensor()` returns a copy of the tensor data.\r\n# Use `tensor()` in order to get a pointer to the tensor.\r\noutput_data = interpreter.get_tensor(output_details[0]['index'])\r\nprint(output_data)\r\n```\r\nWhen load tflite load model path I get error message\r\n```\r\n$python test_quant.py\r\nWARNING: Logging before flag parsing goes to stderr.\r\nW0801 15:01:28.343195 140634983794496 __init__.py:328] Limited tf.compat.v2.summary API due to missing TensorBoard installation.\r\nINFO: Initialized TensorFlow Lite runtime.\r\nTraceback (most recent call last):\r\n  File \"test_quant.py\", line 5, in <module>\r\n    interpreter = tf.lite.Interpreter(model_path=\"converted_model.tflite\")\r\n  File \"/home/guohuawu.wgh/miniconda3/envs/quant/lib/python3.6/site-packages/tensorflow_core/lite/python/interpreter.py\", line 206, in __init__\r\n    model_path))\r\nValueError: Input array not provided for operation 'reshape'.\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31222", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31222/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31222/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31222/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31222", "id": 475488659, "node_id": "MDU6SXNzdWU0NzU0ODg2NTk=", "number": 31222, "title": "Specifying shapehandle's shape when creating new op in tensorflow (rank problem of the output tensor)", "user": {"login": "Kayee6", "id": 33071542, "node_id": "MDQ6VXNlcjMzMDcxNTQy", "avatar_url": "https://avatars3.githubusercontent.com/u/33071542?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kayee6", "html_url": "https://github.com/Kayee6", "followers_url": "https://api.github.com/users/Kayee6/followers", "following_url": "https://api.github.com/users/Kayee6/following{/other_user}", "gists_url": "https://api.github.com/users/Kayee6/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kayee6/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kayee6/subscriptions", "organizations_url": "https://api.github.com/users/Kayee6/orgs", "repos_url": "https://api.github.com/users/Kayee6/repos", "events_url": "https://api.github.com/users/Kayee6/events{/privacy}", "received_events_url": "https://api.github.com/users/Kayee6/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-08-01T06:02:12Z", "updated_at": "2019-08-14T22:41:22Z", "closed_at": null, "author_association": "NONE", "body": "System: Ubuntu 18.04\r\nTensorflow: 1.13.1\r\nCuDNN: 7.4.2\r\nCUDA: 10.2\r\nNVIDIA: 430.26\r\nPython: 3.6\r\nGPU: 2080TI\r\n\r\nI have successfully compiled the op registration file and tested when only using this file. But during training process, I tried to call the function defined in the op, these errors were encountered, which vary every time:\r\n\r\n`Segmentation fault (core dumped)`\r\n\r\nor\r\n\r\n```\r\ndouble free or corruption (!prev)\r\nAborted (core dumped)\r\n```\r\n\r\nor\r\n\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/tifo-kj/anaconda3/envs/tf13/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1659, in _create_c_op\r\n    c_op = c_api.TF_FinishOperation(op_desc)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Shape must be rank 1 but is rank 99648624 for '...myop' (op: 'myop') with input shapes: [50,2048,3].\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"main.py\", line 327, in <module>\r\n    network.build_graph(training=True)\r\n  File \"main.py\", line 36, in build_graph\r\n    reuse=None, bn_decay=self.bn_decay, up_ratio=opt.u)\r\n  File \"/home/.../graph.py\", line 87, in graph\r\n    p_out = myfunc(x)\r\n  File \"/home/.../myop.py\", line 19, in myfunc\r\n    return myop_module.myfunc(x)\r\n  File \"<string>\", line 68, in myfunc\r\n  File \"/home/tifo-kj/anaconda3/envs/tf13/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 788, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"/home/tifo-kj/anaconda3/envs/tf13/lib/python3.6/site-packages/tensorflow/python/util/deprecation.py\", line 507, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/home/tifo-kj/anaconda3/envs/tf13/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 3300, in create_op\r\n    op_def=op_def)\r\n  File \"/home/tifo-kj/anaconda3/envs/tf13/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1823, in __init__\r\n    control_input_ops)\r\n  File \"/home/tifo-kj/anaconda3/envs/tf13/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1662, in _create_c_op\r\n    raise ValueError(str(e))\r\n\r\nValueError: Shape must be rank 1 but is rank 99648624 for '...myop' (op: 'myop') with input shapes: [50, 1000, 3].\r\n```\r\n\r\nAnd please note the number `99648624` above is uncertain, sometimes it could be 0 or any weird number.\r\n\r\nBelow is the code for registering the op in tensorflow, where I specify the output's dimension as `(b,200,200,1)`:\r\n \r\n````\r\n.SetShapeFn([](::tensorflow::shape_inference::InferenceContext* c) {\r\n        ::tensorflow::shape_inference::ShapeHandle input\r\n        TF_RETURN_IF_ERROR(c->WithRank(c->input(0), 3, &input));   \r\n        ::tensorflow::shape_inference::ShapeHandle dim2;\r\n        TF_RETURN_IF_ERROR(c->MakeShapeFromShapeTensor(200, &dim2));    \r\n        ::tensorflow::shape_inference::ShapeHandle dim3;\r\n        TF_RETURN_IF_ERROR(c->MakeShapeFromShapeTensor(200, &dim3));    \r\n        ::tensorflow::shape_inference::ShapeHandle dim4;\r\n        TF_RETURN_IF_ERROR(c->MakeShapeFromShapeTensor(1, &dim4));    \r\n        ::tensorflow::shape_inference::ShapeHandle output = c->MakeShape({c->Dim(input, 0), c->Dim(dim2, 0), c->Dim(dim3, 0), c->Dim(dim4, 0)});\r\n        c->set_output(0, output);\r\n        return Status::OK();\r\n    });\r\n````\r\n\r\nI believe that in my code of op registration, the output shape has been already successfully determined. There is no similar question that I can find online. Please help!\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31217", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31217/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31217/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31217/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31217", "id": 475428679, "node_id": "MDU6SXNzdWU0NzU0Mjg2Nzk=", "number": 31217, "title": "TF Lite quantize with representative data, memory keep growing", "user": {"login": "eric4337", "id": 4446235, "node_id": "MDQ6VXNlcjQ0NDYyMzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/4446235?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eric4337", "html_url": "https://github.com/eric4337", "followers_url": "https://api.github.com/users/eric4337/followers", "following_url": "https://api.github.com/users/eric4337/following{/other_user}", "gists_url": "https://api.github.com/users/eric4337/gists{/gist_id}", "starred_url": "https://api.github.com/users/eric4337/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eric4337/subscriptions", "organizations_url": "https://api.github.com/users/eric4337/orgs", "repos_url": "https://api.github.com/users/eric4337/repos", "events_url": "https://api.github.com/users/eric4337/events{/privacy}", "received_events_url": "https://api.github.com/users/eric4337/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-08-01T01:43:22Z", "updated_at": "2019-08-02T11:24:10Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): no\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v1.14.0-rc1-22-gaf24dc91b5 1.14.0\r\n- Python version: 3.6.3\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n**Describe the current behavior**\r\nThe memory keep growing with given representative data set.\r\nThe problem doesn't come from how I load data, since no problem if I test for loop over my data.\r\nProbably something in quantization process is holding the data.\r\n\r\n**Describe the expected behavior**\r\nNo memory leak.\r\n\r\n**Code to reproduce the issue**\r\n```\r\ndef representative_data_loader(FLAGS, tgt_h, tgt_w):\r\n    # Get the image name list\r\n    input_dir = FLAGS.representative_datset  # a path to some image dataset\r\n    if (input_dir == 'None'):\r\n        raise ValueError('Input directory is not provided')\r\n\r\n    if not os.path.exists(input_dir):\r\n        raise ValueError('Input directory not found')\r\n\r\n    image_list_LR_temp = os.listdir(input_dir)\r\n    image_list_LR = [os.path.join(input_dir, _) for _ in image_list_LR_temp if _.split('.')[-1] == 'png' or _.split('.')[-1] == '.jpeg' or _.split('.')[-1] == 'jpg']\r\n\r\n    image_list_ds = tf.data.Dataset.from_tensor_slices(image_list_LR)\r\n    image_list_ds = image_list_ds.shuffle(len(image_list_LR))\r\n    image_list_ds = image_list_ds.repeat()\r\n\r\n    # Read in and preprocess the images\r\n    def preprocess_image(image):\r\n        image = tf.image.decode_image(image, channels=3)\r\n        image = tf.image.convert_image_dtype(image, tf.float32)\r\n        image = tf.image.random_crop(image, [tgt_h, tgt_w, 3])\r\n\r\n        return image\r\n\r\n    def load_and_preprocess_image(path):\r\n        image = tf.read_file(path)\r\n        return preprocess_image(image)\r\n    image_ds = image_list_ds.map(load_and_preprocess_image, num_parallel_calls=tf.data.experimental.AUTOTUNE)\r\n    image_ds = image_ds.batch(1)\r\n    # Push path and image into a list\r\n    Data = collections.namedtuple('Data', 'paths_LR, inputs')\r\n\r\n    return Data(\r\n        paths_LR=image_list_ds,\r\n        inputs=image_ds\r\n    )\r\n\r\ndef memory(): # from somewhere online\r\n    import os\r\n    import psutil\r\n    pid = os.getpid()\r\n    py = psutil.Process(pid)\r\n    memoryUse = py.memory_info()[0]/2.**30  # memory use in GB...I think\r\n    print('memory use:', memoryUse)\r\n\r\ndef main():\r\n    in_ch = 3\r\n    up_factor = 2\r\n    #h, w = (32, 32)\r\n    h, w = (536, 536)\r\n    inputs_raw = tf.placeholder(tf.float32, shape=[1, h, w, in_ch], name='inputs_raw')\r\n    outputs = tf.split(value = inputs_raw, num_or_size_splits = tf.constant([int(h/2), int(h/2)]), axis = 1)[0]\r\n\r\n    # to test dataset\r\n    data = representative_data_loader(FLAGS, h, w)\r\n    memory()\r\n            \r\n    with tf.Session() as sess:\r\n        sess.run(tf.global_variables_initializer())\r\n\r\n        # to test dataset\r\n        image_iter = data.inputs.make_initializable_iterator()\r\n        sess.run(image_iter.initializer)\r\n        image_el = image_iter.get_next()\r\n\r\n        converter = lite.TFLiteConverter.from_session(sess, [inputs_raw], [outputs])\r\n\r\n        converter.optimizations = [lite.Optimize.DEFAULT]\r\n        def representative_data_gen():\r\n            for i in range(1000):\r\n                print(i, end = ' ')\r\n                memory()\r\n                yield [sess.run(image_el)]\r\n        converter.representative_dataset = representative_data_gen\r\n        tflite_model = converter.convert()\r\n```\r\n**Other info / logs**\r\nmemory just keep growing, until running out"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31216", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31216/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31216/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31216/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31216", "id": 475424043, "node_id": "MDU6SXNzdWU0NzU0MjQwNDM=", "number": 31216, "title": "training code utilize more cpu memory than gpu memory", "user": {"login": "mudassirej", "id": 45818401, "node_id": "MDQ6VXNlcjQ1ODE4NDAx", "avatar_url": "https://avatars0.githubusercontent.com/u/45818401?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mudassirej", "html_url": "https://github.com/mudassirej", "followers_url": "https://api.github.com/users/mudassirej/followers", "following_url": "https://api.github.com/users/mudassirej/following{/other_user}", "gists_url": "https://api.github.com/users/mudassirej/gists{/gist_id}", "starred_url": "https://api.github.com/users/mudassirej/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mudassirej/subscriptions", "organizations_url": "https://api.github.com/users/mudassirej/orgs", "repos_url": "https://api.github.com/users/mudassirej/repos", "events_url": "https://api.github.com/users/mudassirej/events{/privacy}", "received_events_url": "https://api.github.com/users/mudassirej/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-08-01T01:18:51Z", "updated_at": "2019-12-18T17:45:00Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): ('v1.12.0-0-ga6d8ffae09', '1.12.0')\r\n- Python version:2.7\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):5.4.0\r\n- CUDA/cuDNN version:10\r\n- GPU model and memory:RTX2060 6GB\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nI am using tensorflow 1.12.0 with GPU RTX2060 with 6GB memory. I am using reinforcement learning code to train the robot in a gazebo platform using ROS. The issue is that it is utilizing more CPU memory rather than GPU memory. It takes a lot of time to train a robot. I attached a screenshot of the code and the system memory status along with GPU status. From the status, it is shown that it utilized whole 16gb system memory while it utilized 80% GPU memory but the temp and GPU utilization status is low. Its means GPU is not taking the load.\r\n![Screenshot 2019-07-31 16:51:16](https://user-images.githubusercontent.com/45818401/62258506-5135dd00-b43d-11e9-8568-d8575a833655.png)\r\n![Screenshot 2019-08-01 09:03:16](https://user-images.githubusercontent.com/45818401/62258507-5135dd00-b43d-11e9-8bb2-0a4857d20daf.png)\r\n![Screenshot 2019-08-01 09:03:34](https://user-images.githubusercontent.com/45818401/62258509-5135dd00-b43d-11e9-87c3-8cd830c1abf3.png)\r\n![Screenshot 2019-08-01 09:03:43](https://user-images.githubusercontent.com/45818401/62258510-51ce7380-b43d-11e9-9444-e2a23933652c.png)\r\n\r\n\r\n\r\n\r\n**Describe the expected behavior**\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31205", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31205/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31205/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31205/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31205", "id": 475241972, "node_id": "MDU6SXNzdWU0NzUyNDE5NzI=", "number": 31205, "title": "TFLite: Changing weights", "user": {"login": "sbsky", "id": 51410709, "node_id": "MDQ6VXNlcjUxNDEwNzA5", "avatar_url": "https://avatars2.githubusercontent.com/u/51410709?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sbsky", "html_url": "https://github.com/sbsky", "followers_url": "https://api.github.com/users/sbsky/followers", "following_url": "https://api.github.com/users/sbsky/following{/other_user}", "gists_url": "https://api.github.com/users/sbsky/gists{/gist_id}", "starred_url": "https://api.github.com/users/sbsky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sbsky/subscriptions", "organizations_url": "https://api.github.com/users/sbsky/orgs", "repos_url": "https://api.github.com/users/sbsky/repos", "events_url": "https://api.github.com/users/sbsky/events{/privacy}", "received_events_url": "https://api.github.com/users/sbsky/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-07-31T16:27:12Z", "updated_at": "2019-08-01T18:34:38Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): OSX\r\n- TensorFlow installed from (source or binary): Binary\r\n- TensorFlow version (use command below): v1.12.1-7529-g3e0ad8a004 2.0.0-dev20190731\r\n- Python version: 3.6.8\r\n\r\nI'm attempting to implement Soft Conditional Computation (https://arxiv.org/pdf/1904.04971.pdf).  In this approach, the convolution weights are calculated dynamically for each input.  With a concrete function this works, however tflite seems to freeze the weights from the first input.  I was able to resolve this by calling resize_tensor_input() and allocate_tensors() for each image, at the cost of a small performance hit:\r\n\r\n```\r\n    # Note: need to fake resize the input & reallocate tensors\r\n    interpreter.resize_tensor_input(0, (1, in_size, in_size, nb_channels,))\r\n    interpreter.allocate_tensors()\r\n```\r\n\r\nMy first thought was that tflite hardcodes the weights as an optimisation, however upon looking through the source code this doesn't seem to be the case, leading me to think this is a bug?\r\n\r\nExample to reproduce the issue:\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\nreallocate_tensors = False  # Turn this on to reallocate tensors every run, fixing tflite accuracy\r\nnb_channels = 5\r\nwt_size = 100\r\nin_size = 30\r\n\r\nclass DynamicWeightTest(tf.keras.layers.Layer):\r\n    def __init__(self,\r\n                 channels,\r\n                 select_size,\r\n                 **kwargs\r\n                 ):\r\n        super().__init__()\r\n\r\n        self.channels = channels\r\n        self.select_size = select_size\r\n\r\n\r\n    def call(self, inputs):\r\n        x = inputs[0]\r\n        wt = inputs[1]\r\n\r\n        x = tf.nn.conv2d(x, wt, (1, 1), 'VALID')\r\n\r\n        return x\r\n\r\n\r\ninput_wt = tf.keras.layers.Input(shape=(1, nb_channels, wt_size), dtype=tf.float32)\r\ninput_data = tf.keras.layers.Input(shape=(in_size, in_size, nb_channels,), dtype=tf.float32)\r\nx = DynamicWeightTest(channels=wt_size, select_size=nb_channels)([input_data, input_wt])\r\n\r\nmodel = tf.keras.Model(inputs=[input_data, input_wt], outputs=[x])\r\n\r\n# Get the concrete function from the Keras model.\r\nmodel_fn = tf.function(lambda x: model(x))\r\nmodel_fn_concrete = model_fn.get_concrete_function([input_data, input_wt])\r\n\r\n\r\n# tflite\r\nconverter = tf.lite.TFLiteConverter.from_concrete_functions([model_fn_concrete])\r\nconverter.optimizations = [tf.lite.Optimize.DEFAULT]\r\n\r\ntflite_model = converter.convert()\r\n\r\n# Load TFLite model and allocate tensors.\r\ninterpreter = tf.lite.Interpreter(model_content=tflite_model)\r\ninterpreter.allocate_tensors()\r\n\r\n# Get input and output tensors.\r\ninput_details = interpreter.get_input_details()\r\noutput_details = interpreter.get_output_details()\r\n\r\nfor _ in range(10):\r\n    data = np.array(np.random.random_sample((1, in_size, in_size, nb_channels,)), dtype=np.float32)\r\n    wt = np.array(np.random.random_sample((1, 1, nb_channels, wt_size)), dtype=np.float32)\r\n    out_ref = model([data, wt])\r\n\r\n    # concrete\r\n    out_fn = model_fn_concrete(tf.constant(data), tf.constant(wt))\r\n\r\n    # Note: need to fake resize the input & reallocate tensors\r\n    if reallocate_tensors:\r\n        interpreter.resize_tensor_input(0, (1, in_size, in_size, nb_channels,))\r\n        interpreter.allocate_tensors()\r\n\r\n    # Call tflite\r\n    interpreter.set_tensor(input_details[0]['index'], data)\r\n    interpreter.set_tensor(input_details[1]['index'], wt)\r\n    interpreter.invoke()\r\n    out_test = interpreter.get_tensor(output_details[0]['index'])\r\n\r\n    out_ref = out_ref.numpy()\r\n    out_fn = out_fn.numpy()\r\n    diff = 100. * np.sum(np.abs(out_test - out_ref)) / np.sum(np.abs(out_ref))\r\n    diff_fn = 100. * np.sum(np.abs(out_fn - out_ref)) / np.sum(np.abs(out_ref))\r\n    test_sum = np.sum(out_test)\r\n\r\n    print('Diff concrete function is: %f, diff tflite is: %f' % (diff_fn, diff))\r\n```\r\n\r\nExample output (without resize & allocate fix):\r\nDiff concrete function is: 0.000000, diff tflite is: 0.000002\r\nDiff concrete function is: 0.000000, diff tflite is: 33.312505\r\nDiff concrete function is: 0.000000, diff tflite is: 34.966878\r\nDiff concrete function is: 0.000000, diff tflite is: 31.750450\r\nDiff concrete function is: 0.000000, diff tflite is: 33.716212\r\nDiff concrete function is: 0.000000, diff tflite is: 34.539647\r\nDiff concrete function is: 0.000000, diff tflite is: 35.657966\r\nDiff concrete function is: 0.000000, diff tflite is: 35.823278\r\nDiff concrete function is: 0.000000, diff tflite is: 36.413545\r\nDiff concrete function is: 0.000000, diff tflite is: 33.483852\r\n\r\nEdit: Changed above example to include a variable that turns on/off fix"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31204", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31204/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31204/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31204/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31204", "id": 475237996, "node_id": "MDU6SXNzdWU0NzUyMzc5OTY=", "number": 31204, "title": "BatchMatMul, Merge, Switch.", "user": {"login": "guo-max", "id": 27696259, "node_id": "MDQ6VXNlcjI3Njk2MjU5", "avatar_url": "https://avatars0.githubusercontent.com/u/27696259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guo-max", "html_url": "https://github.com/guo-max", "followers_url": "https://api.github.com/users/guo-max/followers", "following_url": "https://api.github.com/users/guo-max/following{/other_user}", "gists_url": "https://api.github.com/users/guo-max/gists{/gist_id}", "starred_url": "https://api.github.com/users/guo-max/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guo-max/subscriptions", "organizations_url": "https://api.github.com/users/guo-max/orgs", "repos_url": "https://api.github.com/users/guo-max/repos", "events_url": "https://api.github.com/users/guo-max/events{/privacy}", "received_events_url": "https://api.github.com/users/guo-max/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jaeyoo", "id": 40815393, "node_id": "MDQ6VXNlcjQwODE1Mzkz", "avatar_url": "https://avatars1.githubusercontent.com/u/40815393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaeyoo", "html_url": "https://github.com/jaeyoo", "followers_url": "https://api.github.com/users/jaeyoo/followers", "following_url": "https://api.github.com/users/jaeyoo/following{/other_user}", "gists_url": "https://api.github.com/users/jaeyoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaeyoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaeyoo/subscriptions", "organizations_url": "https://api.github.com/users/jaeyoo/orgs", "repos_url": "https://api.github.com/users/jaeyoo/repos", "events_url": "https://api.github.com/users/jaeyoo/events{/privacy}", "received_events_url": "https://api.github.com/users/jaeyoo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jaeyoo", "id": 40815393, "node_id": "MDQ6VXNlcjQwODE1Mzkz", "avatar_url": "https://avatars1.githubusercontent.com/u/40815393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaeyoo", "html_url": "https://github.com/jaeyoo", "followers_url": "https://api.github.com/users/jaeyoo/followers", "following_url": "https://api.github.com/users/jaeyoo/following{/other_user}", "gists_url": "https://api.github.com/users/jaeyoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaeyoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaeyoo/subscriptions", "organizations_url": "https://api.github.com/users/jaeyoo/orgs", "repos_url": "https://api.github.com/users/jaeyoo/repos", "events_url": "https://api.github.com/users/jaeyoo/events{/privacy}", "received_events_url": "https://api.github.com/users/jaeyoo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-07-31T16:18:29Z", "updated_at": "2020-03-04T02:45:07Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n   Windows 10\r\n- TensorFlow installed from (source or binary):\r\n   Github\r\n- TensorFlow version (or github SHA if from source):\r\n   1.14.0\r\n\r\n**Provide the text output from tflite_convert**\r\n   \r\n```\r\nTOCO failed. See console for info.\r\n2019-07-30 13:09:37.522804: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 67 operators, 113 arrays (0 quantized)\r\n2019-07-30 13:09:37.523543: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After Removing unused ops pass 1: 65 operators, 110 arrays (0 quantized)\r\n2019-07-30 13:09:37.524229: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 65 operators, 110 arrays (0 quantized)\r\n2019-07-30 13:09:37.525344: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 49 operators, 87 arrays (0 quantized)\r\n2019-07-30 13:09:37.526111: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Group bidirectional sequence lstm/rnn: 49 operators, 87 arrays (0 quantized)\r\n2019-07-30 13:09:37.526697: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before dequantization graph transformations: 49 operators, 87 arrays (0 quantized)\r\n2019-07-30 13:09:37.527380: I tensorflow/lite/toco/allocate_transient_arrays.cc:345] Total transient array allocated size: 256 bytes, theoretical optimal value: 128 bytes.\r\n2019-07-30 13:09:37.527969: E tensorflow/lite/toco/toco_tooling.cc:456] We are continually in the process of adding support to TensorFlow Lite for more ops. It would be helpful if you could inform us of how this conversion went by opening a github issue at https://github.com/tensorflow/tensorflow/issues/new?template=40-tflite-op-request.md\r\n and pasting the following:\r\n\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime. If those are native TensorFlow operators, you might be able to use the extended runtime by passing --enable_select_tf_ops, or by setting target_ops=TFLITE_BUILTINS,SELECT_TF_OPS when calling tf.lite.TFLiteConverter(). Otherwise, if you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: ADD, CONCATENATION, FULLY_CONNECTED, GREATER, LESS_EQUAL, LOGISTIC, MUL, PACK, REDUCE_MAX, REDUCE_MIN, SELECT, SPLIT, TANH, TRANSPOSE, UNPACK. Here is a list of operators for which you will need custom implementations: BatchMatMul, Merge, Switch.\r\n```\r\n\r\nAlso, please include a link to a GraphDef or the model if possible.\r\n\r\n**Any other info / logs**\r\nI am trying to convert a static LSTM model with an initial_state as input. If the initial_state =None, it will convert to tflite model correctly. \r\n\r\n\r\n\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\nConverterError                            Traceback (most recent call last)\r\n<ipython-input-6-647e6fe58eae> in <module>\r\n      2 converter=tf.lite.TFLiteConverter.from_frozen_graph(output_graph,input_arrays={'input_tensor'},#'input_state'},\r\n      3                                                     output_arrays={'output','output_state'})\r\n----> 4 tflite_model = converter.convert()\r\n      5 open(\"./TF_LSTM_V2.tflite\", \"wb\").write(tflite_model)\r\n\r\n~\\Anaconda3\\envs\\tf_1_14\\lib\\site-packages\\tensorflow\\lite\\python\\lite.py in convert(self)\r\n    896           input_tensors=self._input_tensors,\r\n    897           output_tensors=self._output_tensors,\r\n--> 898           **converter_kwargs)\r\n    899     else:\r\n    900       result = _toco_convert_graph_def(\r\n\r\n~\\Anaconda3\\envs\\tf_1_14\\lib\\site-packages\\tensorflow\\lite\\python\\convert.py in toco_convert_impl(input_data, input_tensors, output_tensors, *args, **kwargs)\r\n    402   data = toco_convert_protos(model_flags.SerializeToString(),\r\n    403                              toco_flags.SerializeToString(),\r\n--> 404                              input_data.SerializeToString())\r\n    405   return data\r\n    406 \r\n\r\n~\\Anaconda3\\envs\\tf_1_14\\lib\\site-packages\\tensorflow\\lite\\python\\convert.py in toco_convert_protos(model_flags_str, toco_flags_str, input_data_str)\r\n    170       stderr = _try_convert_to_unicode(stderr)\r\n    171       raise ConverterError(\r\n--> 172           \"TOCO failed. See console for info.\\n%s\\n%s\\n\" % (stdout, stderr))\r\n    173   finally:\r\n    174     # Must manually cleanup files."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31195", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31195/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31195/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31195/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31195", "id": 475137333, "node_id": "MDU6SXNzdWU0NzUxMzczMzM=", "number": 31195, "title": "Can not build //tensorflow/core/kernels:cwise_ops_test", "user": {"login": "chengleiwang", "id": 11610520, "node_id": "MDQ6VXNlcjExNjEwNTIw", "avatar_url": "https://avatars3.githubusercontent.com/u/11610520?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chengleiwang", "html_url": "https://github.com/chengleiwang", "followers_url": "https://api.github.com/users/chengleiwang/followers", "following_url": "https://api.github.com/users/chengleiwang/following{/other_user}", "gists_url": "https://api.github.com/users/chengleiwang/gists{/gist_id}", "starred_url": "https://api.github.com/users/chengleiwang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chengleiwang/subscriptions", "organizations_url": "https://api.github.com/users/chengleiwang/orgs", "repos_url": "https://api.github.com/users/chengleiwang/repos", "events_url": "https://api.github.com/users/chengleiwang/events{/privacy}", "received_events_url": "https://api.github.com/users/chengleiwang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2019-07-31T13:13:34Z", "updated_at": "2019-09-05T16:15:20Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution ( Linux Ubuntu 18.04):\r\n- TensorFlow installed from (source ):\r\n- TensorFlow version: r2.0\r\n- Python version: Python 3.6.8 (default, Jan 14 2019, 11:02:34) \r\n- Installed using virtualenv? pip? conda?: build test binary with bazel\r\n- Bazel version (if compiling from source):Build label: 0.24.1\r\n- GCC/Compiler version (if compiling from source): gcc version 7.4.0 (Ubuntu 7.4.0-1ubuntu1~18.04.1) \r\n- CUDA/cuDNN version: cuda 10.0/ cudnn 7.6\r\n- GPU model and memory: GeForce GTX 1050 / 2000M\r\n\r\n\r\n\r\n**Describe the problem**\r\nI am trying to build cwise_ops_test with bazel test -c opt --strip=never --config=cuda_clang -s //tensorflow/core/kernels:cwise_ops_test command , but failed with below error message. \r\nHow to add --expt-relaxed-constexpr for clang? I saw this compiler option added with nvcc, so I guess clang also need a similar option, where I can add this option?\r\n\r\n```\r\nWARNING: The following configs were expanded more than once: [cuda_clang, using_cuda]. For repeatable flags, repeats are counted twice and may lead to unexpected behavior.\r\nINFO: Options provided by the client:\r\n  Inherited 'common' options: --isatty=0 --terminal_columns=80\r\nINFO: Reading rc options for 'test' from /home/chengleiwang/code/tensorflow/.bazelrc:\r\n  Inherited 'build' options: --apple_platform_type=macos --define framework_shared_object=true --define=use_fast_cpp_protos=true --define=allow_oversize_protos=true --spawn_strategy=standalone --strategy=Genrule=standalone -c opt --announce_rc --define=grpc_no_ares=true --define=PREFIX=/usr --define=LIBDIR=$(PREFIX)/lib --define=INCLUDEDIR=$(PREFIX)/include\r\nINFO: Reading rc options for 'test' from /home/chengleiwang/code/tensorflow/.tf_configure.bazelrc:\r\n  Inherited 'build' options: --action_env PYTHON_BIN_PATH=/usr/bin/python3 --action_env PYTHON_LIB_PATH=/usr/lib/python3/dist-packages --python_path=/usr/bin/python3 --action_env CUDA_TOOLKIT_PATH=/usr/local/cuda --action_env TF_CUDA_COMPUTE_CAPABILITIES=6.1 --config=cuda_clang --action_env CLANG_CUDA_COMPILER_PATH=/usr/bin/clang --config=cuda_clang --action_env TF_CONFIGURE_IOS=0\r\nINFO: Reading rc options for 'test' from /home/chengleiwang/code/tensorflow/.tf_configure.bazelrc:\r\n  'test' options: --flaky_test_attempts=3 --test_size_filters=small,medium --test_tag_filters=-benchmark-test,-no_oss,-oss_serial --build_tag_filters=-benchmark-test,-no_oss --test_tag_filters=-gpu --build_tag_filters=-gpu\r\nINFO: Found applicable config definition build:cuda_clang in file /home/chengleiwang/code/tensorflow/.bazelrc: --config=using_cuda --define=using_cuda_clang=true --define=using_clang=true\r\nINFO: Found applicable config definition build:using_cuda in file /home/chengleiwang/code/tensorflow/.bazelrc: --define=using_cuda=true --action_env TF_NEED_CUDA=1 --crosstool_top=@local_config_cuda//crosstool:toolchain\r\nINFO: Found applicable config definition build:cuda_clang in file /home/chengleiwang/code/tensorflow/.bazelrc: --config=using_cuda --define=using_cuda_clang=true --define=using_clang=true\r\nINFO: Found applicable config definition build:using_cuda in file /home/chengleiwang/code/tensorflow/.bazelrc: --define=using_cuda=true --action_env TF_NEED_CUDA=1 --crosstool_top=@local_config_cuda//crosstool:toolchain\r\nINFO: Found applicable config definition build:cuda_clang in file /home/chengleiwang/code/tensorflow/.bazelrc: --config=using_cuda --define=using_cuda_clang=true --define=using_clang=true\r\nINFO: Found applicable config definition build:using_cuda in file /home/chengleiwang/code/tensorflow/.bazelrc: --define=using_cuda=true --action_env TF_NEED_CUDA=1 --crosstool_top=@local_config_cuda//crosstool:toolchain\r\nLoading: \r\nLoading: 0 packages loaded\r\nAnalyzing: target //tensorflow/core/kernels:cwise_ops_test (0 packages loaded, 0 targets configured)\r\nINFO: Analysed target //tensorflow/core/kernels:cwise_ops_test (2 packages loaded, 143 targets configured).\r\nINFO: Found 1 test target...\r\n[0 / 4] [-----] BazelWorkspaceStatusAction stable-status.txt\r\nSUBCOMMAND: # //tensorflow/stream_executor:plugin_registry [action 'Linking tensorflow/stream_executor/libplugin_registry.so']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -shared -o bazel-out/k8-opt/bin/tensorflow/stream_executor/libplugin_registry.so -Wl,-no-as-needed -Wl,-z,relro,-z,now '-Wl,--build-id=md5' '-Wl,--hash-style=gnu' -no-canonical-prefixes -fno-canonical-system-headers -B/usr/bin -Wl,--gc-sections -Wl,@bazel-out/k8-opt/bin/tensorflow/stream_executor/libplugin_registry.so-2.params)\r\nSUBCOMMAND: # //tensorflow/stream_executor:dnn [action 'Linking tensorflow/stream_executor/libdnn.so']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -shared -o bazel-out/k8-opt/bin/tensorflow/stream_executor/libdnn.so -Wl,-no-as-needed -Wl,-z,relro,-z,now '-Wl,--build-id=md5' '-Wl,--hash-style=gnu' -no-canonical-prefixes -fno-canonical-system-headers -B/usr/bin -Wl,--gc-sections -Wl,@bazel-out/k8-opt/bin/tensorflow/stream_executor/libdnn.so-2.params)\r\nSUBCOMMAND: # //tensorflow/stream_executor:blas [action 'Linking tensorflow/stream_executor/libblas.so']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -shared -o bazel-out/k8-opt/bin/tensorflow/stream_executor/libblas.so -Wl,-no-as-needed -Wl,-z,relro,-z,now '-Wl,--build-id=md5' '-Wl,--hash-style=gnu' -no-canonical-prefixes -fno-canonical-system-headers -B/usr/bin -Wl,--gc-sections -Wl,@bazel-out/k8-opt/bin/tensorflow/stream_executor/libblas.so-2.params)\r\nSUBCOMMAND: # //tensorflow/core/grappler/optimizers:loop_optimizer [action 'Linking tensorflow/core/grappler/optimizers/libloop_optimizer.so']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -shared -o bazel-out/k8-opt/bin/tensorflow/core/grappler/optimizers/libloop_optimizer.so -Wl,-no-as-needed -Wl,-z,relro,-z,now '-Wl,--build-id=md5' '-Wl,--hash-style=gnu' -no-canonical-prefixes -fno-canonical-system-headers -B/usr/bin -Wl,--gc-sections -Wl,@bazel-out/k8-opt/bin/tensorflow/core/grappler/optimizers/libloop_optimizer.so-2.params)\r\nSUBCOMMAND: # //tensorflow/core/kernels:depthwise_conv_op_gpu [action 'Compiling tensorflow/core/kernels/depthwise_conv_op_gpu_float.cu.cc']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/tensorflow/core/kernels/_objs/depthwise_conv_op_gpu/depthwise_conv_op_gpu_float.cu.pic.d '-frandom-seed=bazel-out/k8-opt/bin/tensorflow/core/kernels/_objs/depthwise_conv_op_gpu/depthwise_conv_op_gpu_float.cu.pic.o' -D__CLANG_SUPPORT_DYN_ANNOTATION__ -DEIGEN_MPL2_ONLY '-DEIGEN_MAX_ALIGN_BYTES=64' '-DEIGEN_HAS_TYPE_TRAITS=0' -DTENSORFLOW_USE_CUSTOM_CONTRACTION_KERNEL -DTENSORFLOW_USE_MKLDNN_CONTRACTION_KERNEL -DTF_USE_SNAPPY -DCURL_STATICLIB -DPLATFORM_LINUX -DENABLE_CURL_CLIENT -DENABLE_NO_ENCRYPTION -iquote . -iquote bazel-out/k8-opt/genfiles -iquote bazel-out/k8-opt/bin -iquote external/com_google_absl -iquote bazel-out/k8-opt/genfiles/external/com_google_absl -iquote bazel-out/k8-opt/bin/external/com_google_absl -iquote external/eigen_archive -iquote bazel-out/k8-opt/genfiles/external/eigen_archive -iquote bazel-out/k8-opt/bin/external/eigen_archive -iquote external/local_config_sycl -iquote bazel-out/k8-opt/genfiles/external/local_config_sycl -iquote bazel-out/k8-opt/bin/external/local_config_sycl -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -iquote external/nsync -iquote bazel-out/k8-opt/genfiles/external/nsync -iquote bazel-out/k8-opt/bin/external/nsync -iquote external/gif_archive -iquote bazel-out/k8-opt/genfiles/external/gif_archive -iquote bazel-out/k8-opt/bin/external/gif_archive -iquote external/jpeg -iquote bazel-out/k8-opt/genfiles/external/jpeg -iquote bazel-out/k8-opt/bin/external/jpeg -iquote external/protobuf_archive -iquote bazel-out/k8-opt/genfiles/external/protobuf_archive -iquote bazel-out/k8-opt/bin/external/protobuf_archive -iquote external/com_googlesource_code_re2 -iquote bazel-out/k8-opt/genfiles/external/com_googlesource_code_re2 -iquote bazel-out/k8-opt/bin/external/com_googlesource_code_re2 -iquote external/farmhash_archive -iquote bazel-out/k8-opt/genfiles/external/farmhash_archive -iquote bazel-out/k8-opt/bin/external/farmhash_archive -iquote external/fft2d -iquote bazel-out/k8-opt/genfiles/external/fft2d -iquote bazel-out/k8-opt/bin/external/fft2d -iquote external/highwayhash -iquote bazel-out/k8-opt/genfiles/external/highwayhash -iquote bazel-out/k8-opt/bin/external/highwayhash -iquote external/zlib_archive -iquote bazel-out/k8-opt/genfiles/external/zlib_archive -iquote bazel-out/k8-opt/bin/external/zlib_archive -iquote external/local_config_cuda -iquote bazel-out/k8-opt/genfiles/external/local_config_cuda -iquote bazel-out/k8-opt/bin/external/local_config_cuda -iquote external/double_conversion -iquote bazel-out/k8-opt/genfiles/external/double_conversion -iquote bazel-out/k8-opt/bin/external/double_conversion -iquote external/curl -iquote bazel-out/k8-opt/genfiles/external/curl -iquote bazel-out/k8-opt/bin/external/curl -iquote external/boringssl -iquote bazel-out/k8-opt/genfiles/external/boringssl -iquote bazel-out/k8-opt/bin/external/boringssl -iquote external/jsoncpp_git -iquote bazel-out/k8-opt/genfiles/external/jsoncpp_git -iquote bazel-out/k8-opt/bin/external/jsoncpp_git -iquote external/aws -iquote bazel-out/k8-opt/genfiles/external/aws -iquote bazel-out/k8-opt/bin/external/aws -iquote external/cub_archive -iquote bazel-out/k8-opt/genfiles/external/cub_archive -iquote bazel-out/k8-opt/bin/external/cub_archive -Ibazel-out/k8-opt/bin/external/local_config_cuda/cuda/_virtual_includes/cuda_headers_virtual -Ibazel-out/k8-opt/bin/external/local_config_cuda/cuda/_virtual_includes/cudnn_header -Ibazel-out/k8-opt/bin/external/cub_archive/_virtual_includes/cub -isystem external/eigen_archive -isystem bazel-out/k8-opt/genfiles/external/eigen_archive -isystem bazel-out/k8-opt/bin/external/eigen_archive -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak -isystem external/nsync/public -isystem bazel-out/k8-opt/genfiles/external/nsync/public -isystem bazel-out/k8-opt/bin/external/nsync/public -isystem external/gif_archive/lib -isystem bazel-out/k8-opt/genfiles/external/gif_archive/lib -isystem bazel-out/k8-opt/bin/external/gif_archive/lib -isystem external/protobuf_archive/src -isystem bazel-out/k8-opt/genfiles/external/protobuf_archive/src -isystem bazel-out/k8-opt/bin/external/protobuf_archive/src -isystem external/farmhash_archive/src -isystem bazel-out/k8-opt/genfiles/external/farmhash_archive/src -isystem bazel-out/k8-opt/bin/external/farmhash_archive/src -isystem external/zlib_archive -isystem bazel-out/k8-opt/genfiles/external/zlib_archive -isystem bazel-out/k8-opt/bin/external/zlib_archive -isystem external/local_config_cuda/cuda -isystem bazel-out/k8-opt/genfiles/external/local_config_cuda/cuda -isystem bazel-out/k8-opt/bin/external/local_config_cuda/cuda -isystem external/local_config_cuda/cuda/cuda/include -isystem bazel-out/k8-opt/genfiles/external/local_config_cuda/cuda/cuda/include -isystem bazel-out/k8-opt/bin/external/local_config_cuda/cuda/cuda/include -isystem external/double_conversion -isystem bazel-out/k8-opt/genfiles/external/double_conversion -isystem bazel-out/k8-opt/bin/external/double_conversion -isystem external/curl/include -isystem bazel-out/k8-opt/genfiles/external/curl/include -isystem bazel-out/k8-opt/bin/external/curl/include -isystem external/boringssl/src/include -isystem bazel-out/k8-opt/genfiles/external/boringssl/src/include -isystem bazel-out/k8-opt/bin/external/boringssl/src/include -isystem external/jsoncpp_git/include -isystem bazel-out/k8-opt/genfiles/external/jsoncpp_git/include -isystem bazel-out/k8-opt/bin/external/jsoncpp_git/include -isystem external/aws/aws-cpp-sdk-core/include -isystem bazel-out/k8-opt/genfiles/external/aws/aws-cpp-sdk-core/include -isystem bazel-out/k8-opt/bin/external/aws/aws-cpp-sdk-core/include -isystem external/aws/aws-cpp-sdk-kinesis/include -isystem bazel-out/k8-opt/genfiles/external/aws/aws-cpp-sdk-kinesis/include -isystem bazel-out/k8-opt/bin/external/aws/aws-cpp-sdk-kinesis/include -isystem external/aws/aws-cpp-sdk-s3/include -isystem bazel-out/k8-opt/genfiles/external/aws/aws-cpp-sdk-s3/include -isystem bazel-out/k8-opt/bin/external/aws/aws-cpp-sdk-s3/include '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -DEIGEN_AVOID_STL_ARRAY -Iexternal/gemmlowp -Wno-sign-compare -fno-exceptions '-ftemplate-depth=900' '-DGOOGLE_CUDA=1' -msse3 -pthread -x cuda '-DGOOGLE_CUDA=1' -fcuda-flush-denormals-to-zero -c tensorflow/core/kernels/depthwise_conv_op_gpu_float.cu.cc -o bazel-out/k8-opt/bin/tensorflow/core/kernels/_objs/depthwise_conv_op_gpu/depthwise_conv_op_gpu_float.cu.pic.o)\r\nSUBCOMMAND: # //tensorflow/core/kernels:depthwise_conv_op_gpu [action 'Compiling tensorflow/core/kernels/depthwise_conv_op_gpu_half.cu.cc']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/tensorflow/core/kernels/_objs/depthwise_conv_op_gpu/depthwise_conv_op_gpu_half.cu.pic.d '-frandom-seed=bazel-out/k8-opt/bin/tensorflow/core/kernels/_objs/depthwise_conv_op_gpu/depthwise_conv_op_gpu_half.cu.pic.o' -D__CLANG_SUPPORT_DYN_ANNOTATION__ -DEIGEN_MPL2_ONLY '-DEIGEN_MAX_ALIGN_BYTES=64' '-DEIGEN_HAS_TYPE_TRAITS=0' -DTENSORFLOW_USE_CUSTOM_CONTRACTION_KERNEL -DTENSORFLOW_USE_MKLDNN_CONTRACTION_KERNEL -DTF_USE_SNAPPY -DCURL_STATICLIB -DPLATFORM_LINUX -DENABLE_CURL_CLIENT -DENABLE_NO_ENCRYPTION -iquote . -iquote bazel-out/k8-opt/genfiles -iquote bazel-out/k8-opt/bin -iquote external/com_google_absl -iquote bazel-out/k8-opt/genfiles/external/com_google_absl -iquote bazel-out/k8-opt/bin/external/com_google_absl -iquote external/eigen_archive -iquote bazel-out/k8-opt/genfiles/external/eigen_archive -iquote bazel-out/k8-opt/bin/external/eigen_archive -iquote external/local_config_sycl -iquote bazel-out/k8-opt/genfiles/external/local_config_sycl -iquote bazel-out/k8-opt/bin/external/local_config_sycl -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -iquote external/nsync -iquote bazel-out/k8-opt/genfiles/external/nsync -iquote bazel-out/k8-opt/bin/external/nsync -iquote external/gif_archive -iquote bazel-out/k8-opt/genfiles/external/gif_archive -iquote bazel-out/k8-opt/bin/external/gif_archive -iquote external/jpeg -iquote bazel-out/k8-opt/genfiles/external/jpeg -iquote bazel-out/k8-opt/bin/external/jpeg -iquote external/protobuf_archive -iquote bazel-out/k8-opt/genfiles/external/protobuf_archive -iquote bazel-out/k8-opt/bin/external/protobuf_archive -iquote external/com_googlesource_code_re2 -iquote bazel-out/k8-opt/genfiles/external/com_googlesource_code_re2 -iquote bazel-out/k8-opt/bin/external/com_googlesource_code_re2 -iquote external/farmhash_archive -iquote bazel-out/k8-opt/genfiles/external/farmhash_archive -iquote bazel-out/k8-opt/bin/external/farmhash_archive -iquote external/fft2d -iquote bazel-out/k8-opt/genfiles/external/fft2d -iquote bazel-out/k8-opt/bin/external/fft2d -iquote external/highwayhash -iquote bazel-out/k8-opt/genfiles/external/highwayhash -iquote bazel-out/k8-opt/bin/external/highwayhash -iquote external/zlib_archive -iquote bazel-out/k8-opt/genfiles/external/zlib_archive -iquote bazel-out/k8-opt/bin/external/zlib_archive -iquote external/local_config_cuda -iquote bazel-out/k8-opt/genfiles/external/local_config_cuda -iquote bazel-out/k8-opt/bin/external/local_config_cuda -iquote external/double_conversion -iquote bazel-out/k8-opt/genfiles/external/double_conversion -iquote bazel-out/k8-opt/bin/external/double_conversion -iquote external/curl -iquote bazel-out/k8-opt/genfiles/external/curl -iquote bazel-out/k8-opt/bin/external/curl -iquote external/boringssl -iquote bazel-out/k8-opt/genfiles/external/boringssl -iquote bazel-out/k8-opt/bin/external/boringssl -iquote external/jsoncpp_git -iquote bazel-out/k8-opt/genfiles/external/jsoncpp_git -iquote bazel-out/k8-opt/bin/external/jsoncpp_git -iquote external/aws -iquote bazel-out/k8-opt/genfiles/external/aws -iquote bazel-out/k8-opt/bin/external/aws -iquote external/cub_archive -iquote bazel-out/k8-opt/genfiles/external/cub_archive -iquote bazel-out/k8-opt/bin/external/cub_archive -Ibazel-out/k8-opt/bin/external/local_config_cuda/cuda/_virtual_includes/cuda_headers_virtual -Ibazel-out/k8-opt/bin/external/local_config_cuda/cuda/_virtual_includes/cudnn_header -Ibazel-out/k8-opt/bin/external/cub_archive/_virtual_includes/cub -isystem external/eigen_archive -isystem bazel-out/k8-opt/genfiles/external/eigen_archive -isystem bazel-out/k8-opt/bin/external/eigen_archive -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak -isystem external/nsync/public -isystem bazel-out/k8-opt/genfiles/external/nsync/public -isystem bazel-out/k8-opt/bin/external/nsync/public -isystem external/gif_archive/lib -isystem bazel-out/k8-opt/genfiles/external/gif_archive/lib -isystem bazel-out/k8-opt/bin/external/gif_archive/lib -isystem external/protobuf_archive/src -isystem bazel-out/k8-opt/genfiles/external/protobuf_archive/src -isystem bazel-out/k8-opt/bin/external/protobuf_archive/src -isystem external/farmhash_archive/src -isystem bazel-out/k8-opt/genfiles/external/farmhash_archive/src -isystem bazel-out/k8-opt/bin/external/farmhash_archive/src -isystem external/zlib_archive -isystem bazel-out/k8-opt/genfiles/external/zlib_archive -isystem bazel-out/k8-opt/bin/external/zlib_archive -isystem external/local_config_cuda/cuda -isystem bazel-out/k8-opt/genfiles/external/local_config_cuda/cuda -isystem bazel-out/k8-opt/bin/external/local_config_cuda/cuda -isystem external/local_config_cuda/cuda/cuda/include -isystem bazel-out/k8-opt/genfiles/external/local_config_cuda/cuda/cuda/include -isystem bazel-out/k8-opt/bin/external/local_config_cuda/cuda/cuda/include -isystem external/double_conversion -isystem bazel-out/k8-opt/genfiles/external/double_conversion -isystem bazel-out/k8-opt/bin/external/double_conversion -isystem external/curl/include -isystem bazel-out/k8-opt/genfiles/external/curl/include -isystem bazel-out/k8-opt/bin/external/curl/include -isystem external/boringssl/src/include -isystem bazel-out/k8-opt/genfiles/external/boringssl/src/include -isystem bazel-out/k8-opt/bin/external/boringssl/src/include -isystem external/jsoncpp_git/include -isystem bazel-out/k8-opt/genfiles/external/jsoncpp_git/include -isystem bazel-out/k8-opt/bin/external/jsoncpp_git/include -isystem external/aws/aws-cpp-sdk-core/include -isystem bazel-out/k8-opt/genfiles/external/aws/aws-cpp-sdk-core/include -isystem bazel-out/k8-opt/bin/external/aws/aws-cpp-sdk-core/include -isystem external/aws/aws-cpp-sdk-kinesis/include -isystem bazel-out/k8-opt/genfiles/external/aws/aws-cpp-sdk-kinesis/include -isystem bazel-out/k8-opt/bin/external/aws/aws-cpp-sdk-kinesis/include -isystem external/aws/aws-cpp-sdk-s3/include -isystem bazel-out/k8-opt/genfiles/external/aws/aws-cpp-sdk-s3/include -isystem bazel-out/k8-opt/bin/external/aws/aws-cpp-sdk-s3/include '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -DEIGEN_AVOID_STL_ARRAY -Iexternal/gemmlowp -Wno-sign-compare -fno-exceptions '-ftemplate-depth=900' '-DGOOGLE_CUDA=1' -msse3 -pthread -x cuda '-DGOOGLE_CUDA=1' -fcuda-flush-denormals-to-zero -c tensorflow/core/kernels/depthwise_conv_op_gpu_half.cu.cc -o bazel-out/k8-opt/bin/tensorflow/core/kernels/_objs/depthwise_conv_op_gpu/depthwise_conv_op_gpu_half.cu.pic.o)\r\nSUBCOMMAND: # //tensorflow/core/kernels:depthwise_conv_op_gpu [action 'Compiling tensorflow/core/kernels/depthwise_conv_op_gpu_double.cu.cc']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/tensorflow/core/kernels/_objs/depthwise_conv_op_gpu/depthwise_conv_op_gpu_double.cu.pic.d '-frandom-seed=bazel-out/k8-opt/bin/tensorflow/core/kernels/_objs/depthwise_conv_op_gpu/depthwise_conv_op_gpu_double.cu.pic.o' -D__CLANG_SUPPORT_DYN_ANNOTATION__ -DEIGEN_MPL2_ONLY '-DEIGEN_MAX_ALIGN_BYTES=64' '-DEIGEN_HAS_TYPE_TRAITS=0' -DTENSORFLOW_USE_CUSTOM_CONTRACTION_KERNEL -DTENSORFLOW_USE_MKLDNN_CONTRACTION_KERNEL -DTF_USE_SNAPPY -DCURL_STATICLIB -DPLATFORM_LINUX -DENABLE_CURL_CLIENT -DENABLE_NO_ENCRYPTION -iquote . -iquote bazel-out/k8-opt/genfiles -iquote bazel-out/k8-opt/bin -iquote external/com_google_absl -iquote bazel-out/k8-opt/genfiles/external/com_google_absl -iquote bazel-out/k8-opt/bin/external/com_google_absl -iquote external/eigen_archive -iquote bazel-out/k8-opt/genfiles/external/eigen_archive -iquote bazel-out/k8-opt/bin/external/eigen_archive -iquote external/local_config_sycl -iquote bazel-out/k8-opt/genfiles/external/local_config_sycl -iquote bazel-out/k8-opt/bin/external/local_config_sycl -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -iquote external/nsync -iquote bazel-out/k8-opt/genfiles/external/nsync -iquote bazel-out/k8-opt/bin/external/nsync -iquote external/gif_archive -iquote bazel-out/k8-opt/genfiles/external/gif_archive -iquote bazel-out/k8-opt/bin/external/gif_archive -iquote external/jpeg -iquote bazel-out/k8-opt/genfiles/external/jpeg -iquote bazel-out/k8-opt/bin/external/jpeg -iquote external/protobuf_archive -iquote bazel-out/k8-opt/genfiles/external/protobuf_archive -iquote bazel-out/k8-opt/bin/external/protobuf_archive -iquote external/com_googlesource_code_re2 -iquote bazel-out/k8-opt/genfiles/external/com_googlesource_code_re2 -iquote bazel-out/k8-opt/bin/external/com_googlesource_code_re2 -iquote external/farmhash_archive -iquote bazel-out/k8-opt/genfiles/external/farmhash_archive -iquote bazel-out/k8-opt/bin/external/farmhash_archive -iquote external/fft2d -iquote bazel-out/k8-opt/genfiles/external/fft2d -iquote bazel-out/k8-opt/bin/external/fft2d -iquote external/highwayhash -iquote bazel-out/k8-opt/genfiles/external/highwayhash -iquote bazel-out/k8-opt/bin/external/highwayhash -iquote external/zlib_archive -iquote bazel-out/k8-opt/genfiles/external/zlib_archive -iquote bazel-out/k8-opt/bin/external/zlib_archive -iquote external/local_config_cuda -iquote bazel-out/k8-opt/genfiles/external/local_config_cuda -iquote bazel-out/k8-opt/bin/external/local_config_cuda -iquote external/double_conversion -iquote bazel-out/k8-opt/genfiles/external/double_conversion -iquote bazel-out/k8-opt/bin/external/double_conversion -iquote external/curl -iquote bazel-out/k8-opt/genfiles/external/curl -iquote bazel-out/k8-opt/bin/external/curl -iquote external/boringssl -iquote bazel-out/k8-opt/genfiles/external/boringssl -iquote bazel-out/k8-opt/bin/external/boringssl -iquote external/jsoncpp_git -iquote bazel-out/k8-opt/genfiles/external/jsoncpp_git -iquote bazel-out/k8-opt/bin/external/jsoncpp_git -iquote external/aws -iquote bazel-out/k8-opt/genfiles/external/aws -iquote bazel-out/k8-opt/bin/external/aws -iquote external/cub_archive -iquote bazel-out/k8-opt/genfiles/external/cub_archive -iquote bazel-out/k8-opt/bin/external/cub_archive -Ibazel-out/k8-opt/bin/external/local_config_cuda/cuda/_virtual_includes/cuda_headers_virtual -Ibazel-out/k8-opt/bin/external/local_config_cuda/cuda/_virtual_includes/cudnn_header -Ibazel-out/k8-opt/bin/external/cub_archive/_virtual_includes/cub -isystem external/eigen_archive -isystem bazel-out/k8-opt/genfiles/external/eigen_archive -isystem bazel-out/k8-opt/bin/external/eigen_archive -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak -isystem external/nsync/public -isystem bazel-out/k8-opt/genfiles/external/nsync/public -isystem bazel-out/k8-opt/bin/external/nsync/public -isystem external/gif_archive/lib -isystem bazel-out/k8-opt/genfiles/external/gif_archive/lib -isystem bazel-out/k8-opt/bin/external/gif_archive/lib -isystem external/protobuf_archive/src -isystem bazel-out/k8-opt/genfiles/external/protobuf_archive/src -isystem bazel-out/k8-opt/bin/external/protobuf_archive/src -isystem external/farmhash_archive/src -isystem bazel-out/k8-opt/genfiles/external/farmhash_archive/src -isystem bazel-out/k8-opt/bin/external/farmhash_archive/src -isystem external/zlib_archive -isystem bazel-out/k8-opt/genfiles/external/zlib_archive -isystem bazel-out/k8-opt/bin/external/zlib_archive -isystem external/local_config_cuda/cuda -isystem bazel-out/k8-opt/genfiles/external/local_config_cuda/cuda -isystem bazel-out/k8-opt/bin/external/local_config_cuda/cuda -isystem external/local_config_cuda/cuda/cuda/include -isystem bazel-out/k8-opt/genfiles/external/local_config_cuda/cuda/cuda/include -isystem bazel-out/k8-opt/bin/external/local_config_cuda/cuda/cuda/include -isystem external/double_conversion -isystem bazel-out/k8-opt/genfiles/external/double_conversion -isystem bazel-out/k8-opt/bin/external/double_conversion -isystem external/curl/include -isystem bazel-out/k8-opt/genfiles/external/curl/include -isystem bazel-out/k8-opt/bin/external/curl/include -isystem external/boringssl/src/include -isystem bazel-out/k8-opt/genfiles/external/boringssl/src/include -isystem bazel-out/k8-opt/bin/external/boringssl/src/include -isystem external/jsoncpp_git/include -isystem bazel-out/k8-opt/genfiles/external/jsoncpp_git/include -isystem bazel-out/k8-opt/bin/external/jsoncpp_git/include -isystem external/aws/aws-cpp-sdk-core/include -isystem bazel-out/k8-opt/genfiles/external/aws/aws-cpp-sdk-core/include -isystem bazel-out/k8-opt/bin/external/aws/aws-cpp-sdk-core/include -isystem external/aws/aws-cpp-sdk-kinesis/include -isystem bazel-out/k8-opt/genfiles/external/aws/aws-cpp-sdk-kinesis/include -isystem bazel-out/k8-opt/bin/external/aws/aws-cpp-sdk-kinesis/include -isystem external/aws/aws-cpp-sdk-s3/include -isystem bazel-out/k8-opt/genfiles/external/aws/aws-cpp-sdk-s3/include -isystem bazel-out/k8-opt/bin/external/aws/aws-cpp-sdk-s3/include '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -DEIGEN_AVOID_STL_ARRAY -Iexternal/gemmlowp -Wno-sign-compare -fno-exceptions '-ftemplate-depth=900' '-DGOOGLE_CUDA=1' -msse3 -pthread -x cuda '-DGOOGLE_CUDA=1' -fcuda-flush-denormals-to-zero -c tensorflow/core/kernels/depthwise_conv_op_gpu_double.cu.cc -o bazel-out/k8-opt/bin/tensorflow/core/kernels/_objs/depthwise_conv_op_gpu/depthwise_conv_op_gpu_double.cu.pic.o)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/rnn/cell_common.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/cell_common.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/cell_common.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/rnn/cell_common.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/cell_common.pic.o)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/rnn/cell_gru_lbr.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/cell_gru_lbr.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/cell_gru_lbr.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/rnn/cell_gru_lbr.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/cell_gru_lbr.pic.o)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/ref_shuffle.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/ref_shuffle.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/ref_shuffle.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/ref_shuffle.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/ref_shuffle.pic.o)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/rnn/cell_rnn.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/cell_rnn.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/cell_rnn.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/rnn/cell_rnn.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/cell_rnn.pic.o)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/rnn/cell_lstm.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/cell_lstm.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/cell_lstm.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/rnn/cell_lstm.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/cell_lstm.pic.o)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/rnn/ref_rnn.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/ref_rnn.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/ref_rnn.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/rnn/ref_rnn.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/ref_rnn.pic.o)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/ref_softmax.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/ref_softmax.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/ref_softmax.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/ref_softmax.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/ref_softmax.pic.o)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/rnn/rnn_utils.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/rnn_utils.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/rnn_utils.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/rnn/rnn_utils.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/rnn_utils.pic.o)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/simple_concat.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/simple_concat.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/simple_concat.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/simple_concat.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/simple_concat.pic.o)\r\n[25 / 42] Compiling tensorflow/core/kernels/depthwise_conv_op_gpu_float.cu.cc; 1s local ... (11 actions running)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/simple_sum.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/simple_sum.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/simple_sum.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/simple_sum.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/simple_sum.pic.o)\r\nINFO: From Compiling external/mkl_dnn/src/cpu/rnn/cell_gru_lbr.cpp:\r\nexternal/mkl_dnn/src/cpu/rnn/cell_gru_lbr.cpp:45:0: warning: ignoring #pragma omp simd [-Wunknown-pragmas]\r\n         PRAGMA_OMP_SIMD()\r\n \r\nexternal/mkl_dnn/src/cpu/rnn/cell_gru_lbr.cpp:104:0: warning: ignoring #pragma omp simd [-Wunknown-pragmas]\r\n         PRAGMA_OMP_SIMD()\r\n \r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/ref_lrn.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/ref_lrn.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/ref_lrn.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/ref_lrn.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/ref_lrn.pic.o)\r\nINFO: From Compiling external/mkl_dnn/src/cpu/rnn/cell_lstm.cpp:\r\nexternal/mkl_dnn/src/cpu/rnn/cell_lstm.cpp:44:0: warning: ignoring #pragma omp simd [-Wunknown-pragmas]\r\n         PRAGMA_OMP_SIMD()\r\n \r\nexternal/mkl_dnn/src/cpu/rnn/cell_lstm.cpp:85:0: warning: ignoring #pragma omp simd [-Wunknown-pragmas]\r\n         PRAGMA_OMP_SIMD()\r\n \r\nexternal/mkl_dnn/src/cpu/rnn/cell_lstm.cpp:113:0: warning: ignoring #pragma omp simd [-Wunknown-pragmas]\r\n         PRAGMA_OMP_SIMD()\r\n \r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/ref_eltwise.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/ref_eltwise.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/ref_eltwise.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/ref_eltwise.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/ref_eltwise.pic.o)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/ref_inner_product.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/ref_inner_product.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/ref_inner_product.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/ref_inner_product.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/ref_inner_product.pic.o)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/jit_uni_lrn_kernel_f32.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_uni_lrn_kernel_f32.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_uni_lrn_kernel_f32.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/jit_uni_lrn_kernel_f32.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_uni_lrn_kernel_f32.pic.o)\r\nINFO: From Compiling external/mkl_dnn/src/cpu/ref_softmax.cpp:\r\nexternal/mkl_dnn/src/cpu/ref_softmax.cpp:146:0: warning: ignoring #pragma omp simd [-Wunknown-pragmas]\r\n         PRAGMA_OMP_SIMD()\r\n \r\nexternal/mkl_dnn/src/cpu/ref_softmax.cpp:151:0: warning: ignoring #pragma omp simd [-Wunknown-pragmas]\r\n     PRAGMA_OMP_SIMD()\r\n \r\nexternal/mkl_dnn/src/cpu/ref_softmax.cpp:181:0: warning: ignoring #pragma omp simd [-Wunknown-pragmas]\r\n     PRAGMA_OMP_SIMD(reduction(+ : tsum))\r\n \r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/ref_convolution.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/ref_convolution.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/ref_convolution.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/ref_convolution.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/ref_convolution.pic.o)\r\nINFO: From Compiling external/mkl_dnn/src/cpu/ref_shuffle.cpp:\r\nexternal/mkl_dnn/src/cpu/ref_shuffle.cpp:96:0: warning: ignoring #pragma omp simd [-Wunknown-pragmas]\r\n             PRAGMA_OMP_SIMD()\r\n \r\nexternal/mkl_dnn/src/cpu/ref_shuffle.cpp:104:0: warning: ignoring #pragma omp simd [-Wunknown-pragmas]\r\n             PRAGMA_OMP_SIMD()\r\n \r\n[31 / 48] Compiling tensorflow/core/kernels/depthwise_conv_op_gpu_float.cu.cc; 2s local ... (11 actions running)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/ref_batch_normalization.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/ref_batch_normalization.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/ref_batch_normalization.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/ref_batch_normalization.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/ref_batch_normalization.pic.o)\r\nINFO: From Compiling external/mkl_dnn/src/cpu/simple_sum.cpp:\r\nexternal/mkl_dnn/src/cpu/simple_sum.cpp:53:0: warning: ignoring #pragma omp simd [-Wunknown-pragmas]\r\n             PRAGMA_OMP_SIMD()\r\n \r\nexternal/mkl_dnn/src/cpu/simple_sum.cpp:58:0: warning: ignoring #pragma omp simd [-Wunknown-pragmas]\r\n                 PRAGMA_OMP_SIMD()\r\n \r\nexternal/mkl_dnn/src/cpu/simple_sum.cpp:69:0: warning: ignoring #pragma omp simd [-Wunknown-pragmas]\r\n             PRAGMA_OMP_SIMD()\r\n \r\nexternal/mkl_dnn/src/cpu/simple_sum.cpp:74:0: warning: ignoring #pragma omp simd [-Wunknown-pragmas]\r\n                 PRAGMA_OMP_SIMD()\r\n \r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/common/inner_product.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/inner_product.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/inner_product.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/common/inner_product.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/inner_product.pic.o)\r\nINFO: From Compiling external/mkl_dnn/src/cpu/ref_lrn.cpp:\r\nexternal/mkl_dnn/src/cpu/ref_lrn.cpp:124:0: warning: ignoring #pragma omp simd [-Wunknown-pragmas]\r\n             PRAGMA_OMP_SIMD()\r\n \r\nexternal/mkl_dnn/src/cpu/ref_lrn.cpp:215:0: warning: ignoring #pragma omp simd [-Wunknown-pragmas]\r\n             PRAGMA_OMP_SIMD()\r\n \r\nINFO: From Compiling external/mkl_dnn/src/cpu/simple_concat.cpp:\r\nexternal/mkl_dnn/src/cpu/simple_concat.cpp:98:0: warning: ignoring #pragma omp simd [-Wunknown-pragmas]\r\n             PRAGMA_OMP_SIMD()\r\n \r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/gemm_x8s8s32x_convolution.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/gemm_x8s8s32x_convolution.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/gemm_x8s8s32x_convolution.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/gemm_x8s8s32x_convolution.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/gemm_x8s8s32x_convolution.pic.o)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/nhwc_pooling.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/nhwc_pooling.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/nhwc_pooling.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/nhwc_pooling.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/nhwc_pooling.pic.o)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/jit_uni_reorder_utils.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_uni_reorder_utils.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_uni_reorder_utils.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/jit_uni_reorder_utils.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_uni_reorder_utils.pic.o)\r\n[35 / 52] Compiling tensorflow/core/kernels/depthwise_conv_op_gpu_float.cu.cc; 3s local ... (12 actions running)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/nchw_pooling.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/nchw_pooling.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/nchw_pooling.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/nchw_pooling.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/nchw_pooling.pic.o)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/jit_uni_pooling.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_uni_pooling.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_uni_pooling.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/jit_uni_pooling.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_uni_pooling.pic.o)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/common/batch_normalization.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/batch_normalization.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/batch_normalization.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/common/batch_normalization.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/batch_normalization.pic.o)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/common/primitive_attr.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/primitive_attr.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/primitive_attr.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/common/primitive_attr.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/primitive_attr.pic.o)\r\n[41 / 58] Compiling tensorflow/core/kernels/depthwise_conv_op_gpu_float.cu.cc; 4s local ... (11 actions running)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/common/memory_desc_wrapper.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/memory_desc_wrapper.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/memory_desc_wrapper.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/common/memory_desc_wrapper.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/memory_desc_wrapper.pic.o)\r\nINFO: From Compiling external/mkl_dnn/src/cpu/nhwc_pooling.cpp:\r\nIn file included from external/mkl_dnn/src/cpu/nhwc_pooling.cpp:26:0:\r\nexternal/mkl_dnn/src/cpu/nhwc_pooling.hpp:115:0: warning: ignoring #pragma omp simd [-Wunknown-pragmas]\r\n         PRAGMA_OMP_SIMD()\r\n \r\nexternal/mkl_dnn/src/cpu/nhwc_pooling.cpp:336:0: warning: ignoring #pragma omp simd [-Wunknown-pragmas]\r\n                 PRAGMA_OMP_SIMD()\r\n \r\nexternal/mkl_dnn/src/cpu/nhwc_pooling.cpp:372:0: warning: ignoring #pragma omp simd [-Wunknown-pragmas]\r\n                 PRAGMA_OMP_SIMD()\r\n \r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/jit_uni_eltwise.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_uni_eltwise.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_uni_eltwise.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/jit_uni_eltwise.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_uni_eltwise.pic.o)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/jit_transpose_src_utils.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_transpose_src_utils.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_transpose_src_utils.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/jit_transpose_src_utils.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_transpose_src_utils.pic.o)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/jit_uni_i8i8_pooling.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_uni_i8i8_pooling.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_uni_i8i8_pooling.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/jit_uni_i8i8_pooling.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_uni_i8i8_pooling.pic.o)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/jit_avx512_core_x8s8s32x_convolution.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_avx512_core_x8s8s32x_convolution.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_avx512_core_x8s8s32x_convolution.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/jit_avx512_core_x8s8s32x_convolution.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_avx512_core_x8s8s32x_convolution.pic.o)\r\n[46 / 63] Compiling tensorflow/core/kernels/depthwise_conv_op_gpu_float.cu.cc; 6s local ... (11 actions running)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/jit_uni_dw_conv_kernel_f32.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_uni_dw_conv_kernel_f32.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_uni_dw_conv_kernel_f32.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/jit_uni_dw_conv_kernel_f32.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_uni_dw_conv_kernel_f32.pic.o)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/cpu/jit_uni_batch_normalization.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_uni_batch_normalization.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_uni_batch_normalization.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/cpu/jit_uni_batch_normalization.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/jit_uni_batch_normalization.pic.o)\r\n[47 / 64] Compiling tensorflow/core/kernels/depthwise_conv_op_gpu_float.cu.cc; 7s local ... (12 actions running)\r\nSUBCOMMAND: # @mkl_dnn//:mkldnn_single_threaded [action 'Compiling external/mkl_dnn/src/common/deconvolution.cpp']\r\n(cd /home/chengleiwang/.cache/bazel/_bazel_chengleiwang/2f444a5606241cb2da19b329364d6093/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CLANG_CUDA_COMPILER_PATH=/usr/bin/clang \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\n    PATH=/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/home/chengleiwang/.local/bin:/home/chengleiwang/bin:/home/chengleiwang/.vscode-server/bin/2213894ea0415ee8c85c5eea0d0ff81ecc191529/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n    PYTHON_BIN_PATH=/usr/bin/python3 \\\r\n    PYTHON_LIB_PATH=/usr/lib/python3/dist-packages \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=6.1 \\\r\n    TF_NEED_CUDA=1 \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/deconvolution.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/deconvolution.pic.o' -iquote external/mkl_dnn -iquote bazel-out/k8-opt/genfiles/external/mkl_dnn -iquote bazel-out/k8-opt/bin/external/mkl_dnn -isystem external/mkl_dnn/include -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/include -isystem bazel-out/k8-opt/bin/external/mkl_dnn/include -isystem external/mkl_dnn/src -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src -isystem external/mkl_dnn/src/common -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/common -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/common -isystem external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu -isystem external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/gemm -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/gemm -isystem external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/genfiles/external/mkl_dnn/src/cpu/xbyak -isystem bazel-out/k8-opt/bin/external/mkl_dnn/src/cpu/xbyak '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIC -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -fexceptions '-DMKLDNN_THR=MKLDNN_THR_SEQ' -c external/mkl_dnn/src/common/deconvolution.cpp -o bazel-out/k8-opt/bin/external/mkl_dnn/_objs/mkldnn_single_threaded/deconvolution.pic.o)\r\nINFO: From Compiling tensorflow/core/kernels/depthwise_conv_op_gpu_half.cu.cc:\r\n./tensorflow/core/lib/bfloat16/bfloat16.h(74): warning: calling a constexpr __host__ function(\"real\") from a __host__ __device__ function(\"bfloat16\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/lib/bfloat16/bfloat16.h(74): warning: calling a constexpr __host__ function from a __host__ __device__ function is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/lib/bfloat16/bfloat16.h(77): warning: calling a constexpr __host__ function(\"real\") from a __host__ __device__ function(\"bfloat16\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/lib/bfloat16/bfloat16.h(77): warning: calling a constexpr __host__ function from a __host__ __device__ function is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/lib/bfloat16/bfloat16.h(166): warning: calling a constexpr __host__ function from a __host__ __device__ function is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/lib/bfloat16/bfloat16.h(170): warning: calling a constexpr __host__ function from a __host__ __device__ function is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\nexternal/com_google_absl/absl/strings/string_view.h(495): warning: expression has no effect\r\n\r\n./tensorflow/core/util/tensor_format.h(127): warning: missing return statement at end of non-void function \"tensorflow::GetTensorSpatialDims\"\r\n\r\n./tensorflow/core/util/tensor_format.h(151): warning: missing return statement at end of non-void function \"tensorflow::GetTensorDimsFromSpatialDims\"\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(480): warning: calling a constexpr __host__ function from a __host__ __device__ function is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(490): warning: calling a constexpr __host__ function from a __host__ __device__ function is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(648): error: calling a constexpr __host__ function(\"real\") from a __device__ function(\"GpuAtomicAdd\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(649): error: calling a constexpr __host__ function(\"imag\") from a __device__ function(\"GpuAtomicAdd\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(655): error: calling a constexpr __host__ function(\"real\") from a __device__ function(\"GpuAtomicAdd\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(656): error: calling a constexpr __host__ function(\"imag\") from a __device__ function(\"GpuAtomicAdd\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(826): error: calling a constexpr __host__ function(\"real\") from a __device__ function(\"operator+\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(826): error: calling a constexpr __host__ function(\"imag\") from a __device__ function(\"operator+\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(827): error: calling a constexpr __host__ function(\"real\") from a __device__ function(\"operator+\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(827): error: calling a constexpr __host__ function(\"imag\") from a __device__ function(\"operator+\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(833): error: calling a constexpr __host__ function(\"real\") from a __device__ function(\"operator-\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(833): error: calling a constexpr __host__ function(\"imag\") from a __device__ function(\"operator-\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(834): error: calling a constexpr __host__ function(\"real\") from a __device__ function(\"operator-\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(834): error: calling a constexpr __host__ function(\"imag\") from a __device__ function(\"operator-\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(840): error: calling a constexpr __host__ function(\"real\") from a __device__ function(\"operator*\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(840): error: calling a constexpr __host__ function(\"imag\") from a __device__ function(\"operator*\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(841): error: calling a constexpr __host__ function(\"real\") from a __device__ function(\"operator*\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(841): error: calling a constexpr __host__ function(\"imag\") from a __device__ function(\"operator*\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(847): error: calling a constexpr __host__ function(\"real\") from a __device__ function(\"operator/\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(847): error: calling a constexpr __host__ function(\"imag\") from a __device__ function(\"operator/\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(848): error: calling a constexpr __host__ function(\"real\") from a __device__ function(\"operator/\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(848): error: calling a constexpr __host__ function(\"imag\") from a __device__ function(\"operator/\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(854): error: calling a constexpr __host__ function(\"real\") from a __device__ function(\"operator+\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(854): error: calling a constexpr __host__ function(\"imag\") from a __device__ function(\"operator+\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(855): error: calling a constexpr __host__ function(\"real\") from a __device__ function(\"operator+\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(855): error: calling a constexpr __host__ function(\"imag\") from a __device__ function(\"operator+\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(861): error: calling a constexpr __host__ function(\"real\") from a __device__ function(\"operator-\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(861): error: calling a constexpr __host__ function(\"imag\") from a __device__ function(\"operator-\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(862): error: calling a constexpr __host__ function(\"real\") from a __device__ function(\"operator-\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(862): error: calling a constexpr __host__ function(\"imag\") from a __device__ function(\"operator-\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(868): error: calling a constexpr __host__ function(\"real\") from a __device__ function(\"operator*\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(868): error: calling a constexpr __host__ function(\"imag\") from a __device__ function(\"operator*\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(869): error: calling a constexpr __host__ function(\"real\") from a __device__ function(\"operator*\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(869): error: calling a constexpr __host__ function(\"imag\") from a __device__ function(\"operator*\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(875): error: calling a constexpr __host__ function(\"real\") from a __device__ function(\"operator/\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(875): error: calling a constexpr __host__ function(\"imag\") from a __device__ function(\"operator/\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(876): error: calling a constexpr __host__ function(\"real\") from a __device__ function(\"operator/\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\n./tensorflow/core/util/gpu_device_functions.h(876): error: calling a constexpr __host__ function(\"imag\") from a __device__ function(\"operator/\") is not allowed. The experimental flag '--expt-relaxed-constexpr' can be used to allow this.\r\n\r\nexternal/com_google_absl/absl/types/optional.h(425): warning: expression has no effect\r\n          detected during instantiation of \"const T &absl::optional<T>::operator*() const & [with T=stream_executor::dnn::AlgorithmDesc]\" \r\n./tensorflow/stream_executor/dnn.h(802): here\r\n\r\n36 errors detected in the compilation of \"/tmp/tmpxft_00001be0_00000000-6_depthwise_conv_op_gpu_half.cu.cpp1.ii\".\r\nERROR: /home/chengleiwang/code/tensorflow/tensorflow/core/kernels/BUILD:4094:1: output 'tensorflow/core/kernels/_objs/depthwise_conv_op_gpu/depthwise_conv_op_gpu_half.cu.pic.o' was not created\r\nERROR: /home/chengleiwang/code/tensorflow/tensorflow/core/kernels/BUILD:4094:1: not all outputs were created or valid\r\nTarget //tensorflow/core/kernels:cwise_ops_test failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nINFO: Elapsed time: 9.246s, Critical Path: 8.82s\r\nINFO: 28 processes: 28 local.\r\nFAILED: Build did NOT complete successfully\r\nFAILED: Build did NOT complete successfully\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31192", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31192/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31192/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31192/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31192", "id": 475061772, "node_id": "MDU6SXNzdWU0NzUwNjE3NzI=", "number": 31192, "title": "conv2d_transpose param tensor shapes differ from conv2d shapes", "user": {"login": "kassemyu", "id": 11503884, "node_id": "MDQ6VXNlcjExNTAzODg0", "avatar_url": "https://avatars2.githubusercontent.com/u/11503884?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kassemyu", "html_url": "https://github.com/kassemyu", "followers_url": "https://api.github.com/users/kassemyu/followers", "following_url": "https://api.github.com/users/kassemyu/following{/other_user}", "gists_url": "https://api.github.com/users/kassemyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/kassemyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kassemyu/subscriptions", "organizations_url": "https://api.github.com/users/kassemyu/orgs", "repos_url": "https://api.github.com/users/kassemyu/repos", "events_url": "https://api.github.com/users/kassemyu/events{/privacy}", "received_events_url": "https://api.github.com/users/kassemyu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2019-07-31T10:24:56Z", "updated_at": "2020-01-01T21:06:07Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code: yes\r\n- OS Platform and Distribution: Ubuntu 16.04\r\n- Mobile device: Not tested\r\n- TensorFlow installed from: binary\r\n- TensorFlow version: 1.13 and 1.12\r\n- Python version: 3.7.3 and 3.6.8\r\n- Bazel version:\r\n- GCC/Compiler version:\r\n- CUDA/cuDNN version: 10.0/7.3.1\r\n- GPU model and memory: Nvidia, driver 418.56, 11178MiB\r\n\r\n**Describe the current behavior**\r\nThe kernel tensor for conv2d and conv2d_transpose layers (in contrib.layers) behave differently. The number of outputs determines the number of featuremaps/filters and is at the last position (X,X,X,here) while for conv2d_transpose layers it is (X,X,here,X) as the following code example will show. Is this behaviour wanted? Because when building in model where the input_dimensions and out_put_dimensions differ I need to manually transpose the last 2 dimensions in Order for the model to be trainable.\r\n\r\n**Describe the expected behavior**\r\nThe expected Behaviour would be that the output number for conv2d_layers is at the same position as for usual conv2d_layers.\r\n\r\nThis problem is independent of the data_format and saving/loading procedures.\r\n\r\n**Code to reproduce the issue**\r\nThis is a small code snippet for reproduction. Please set the breakpoint at the last `print(...)` and evaluate the shapes-dictionary. You will see that `conv2d` layer 'conv1' has the kernel shape \r\n`(3, 3, 1, 32)`, indicating that 1 is the depth/number of channels for the input. \r\n32 is the number of filters/outputs/feature maps. \r\n\r\nIf you look at the `conv2d_transposed` layer 'up1' the number of outputs is set to 16 but the kernel shape is `(3,3,16,32)` indicating that the input dimensions are 16 even though they are 32 from the `conv2d` layer 'conv3' preceding it. I believe that this shape should instead be `(3,3,32,16)` because the number of outputs for the `conv2d_transposed` layer is set to 16. \r\n\r\n\r\n```\r\nimport tensorflow as tf\r\nimport tensorflow.contrib.layers as layers\r\n\r\n\r\nfrom tensorflow.examples.tutorials.mnist import input_data\r\nmnist = input_data.read_data_sets(\"/tmp/data/\", one_hot=True)\r\ntrain_X = mnist.train.images\r\ntrain_Y = mnist.train.labels\r\ntest_X = mnist.test.images\r\n\r\n\r\ndef shapes_of_built_model(layer_names):\r\n    layer_names_and_shapes = {}\r\n    for name in layer_names:\r\n        layer_names_and_shapes[name] = tf.get_collection(tf.GraphKeys.GLOBAL_VARIABLES, scope=name)[0].shape\r\n    return layer_names_and_shapes\r\n\r\n\r\ndef model(inputs_):\r\n    # Encoder\r\n    conv1 = layers.conv2d(inputs_, num_outputs=32, kernel_size=(3, 3), scope='conv1')\r\n    conv_str2 = layers.conv2d(conv1, num_outputs=32, kernel_size=(3, 3), stride=2, scope='conv_str2')\r\n    conv2 = layers.conv2d(conv_str2, num_outputs=32, kernel_size=(3, 3), scope='conv2')\r\n    encoded = layers.conv2d(conv2, num_outputs=32, kernel_size=(3, 3), stride=2, scope='encoding')\r\n\r\n    conv3 = layers.conv2d(encoded, num_outputs=32, kernel_size=(3, 3), scope='conv3')\r\n    upsample1 = layers.conv2d_transpose(conv3, num_outputs=16, kernel_size=3, stride=2, scope='up1')\r\n    upsample2 = layers.conv2d_transpose(upsample1, num_outputs=32, kernel_size=3,  stride=2, scope='up2')\r\n    logits = layers.conv2d(upsample2, num_outputs=1, kernel_size=(3, 3),  scope='logits', padding='SAME')\r\n    decoded = tf.sigmoid(logits, name='reconstruct')\r\n    return decoded\r\n\r\n\r\nwith tf.name_scope('Input'):\r\n    x = tf.placeholder(tf.float32, shape=[None, 28, 28, 1], name='X')\r\n    y = tf.placeholder(tf.float32, shape=[None, 28, 28, 1], name='Y')\r\n\r\noutput_logits = model(x)\r\n\r\nwith tf.variable_scope('Train'):\r\n    with tf.variable_scope('Loss'):\r\n        loss = tf.reduce_mean(tf.nn.softmax_cross_entropy_with_logits(labels=y, logits=output_logits), name='loss')\r\n    tf.summary.scalar('loss', loss)\r\n    with tf.variable_scope('Optimizer'):\r\n        optimizer = tf.train.AdamOptimizer(learning_rate=0.05, name='Adam-op')\r\n        optimizer = optimizer.minimize(loss)\r\n    with tf.variable_scope('Accuracy'):\r\n        correct_prediction = tf.equal(tf.argmax(output_logits, 1), tf.argmax(y, 1), name='correct_pred')\r\n        accuracy = tf.reduce_mean(tf.cast(correct_prediction, tf.float32), name='accuracy')\r\n    tf.summary.scalar('accuracy', accuracy)\r\n    with tf.variable_scope('Prediction'):\r\n        cls_prediction = tf.argmax(output_logits, axis=1, name='predictions')\r\n\r\n\r\ninit = tf.global_variables_initializer()\r\nmerged = tf.summary.merge_all()\r\nsess = tf.InteractiveSession()\r\nsess.run(init)\r\n\r\nnames = ['conv1', 'conv_str2', 'conv2', 'encoding', 'conv3', 'up1', 'up2']\r\nshapes = shapes_of_built_model(names)\r\nprint('set breakpoint here')\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31174", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31174/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31174/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31174/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31174", "id": 474855055, "node_id": "MDU6SXNzdWU0NzQ4NTUwNTU=", "number": 31174, "title": "TF 1.14 Keras model throws exception when inputs are not the deepest nodes", "user": {"login": "peastman", "id": 4379786, "node_id": "MDQ6VXNlcjQzNzk3ODY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4379786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peastman", "html_url": "https://github.com/peastman", "followers_url": "https://api.github.com/users/peastman/followers", "following_url": "https://api.github.com/users/peastman/following{/other_user}", "gists_url": "https://api.github.com/users/peastman/gists{/gist_id}", "starred_url": "https://api.github.com/users/peastman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peastman/subscriptions", "organizations_url": "https://api.github.com/users/peastman/orgs", "repos_url": "https://api.github.com/users/peastman/repos", "events_url": "https://api.github.com/users/peastman/events{/privacy}", "received_events_url": "https://api.github.com/users/peastman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-07-30T22:43:23Z", "updated_at": "2019-08-23T21:36:28Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: n/a\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: 3.6.9\r\n- Bazel version (if compiling from source): n/a\r\n- GCC/Compiler version (if compiling from source): n/a\r\n- CUDA/cuDNN version: 10.1\r\n- GPU model and memory: Titan V\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\nTensorFlow 1.14 introduced a bug in Keras models.  The specific change is the introduction of these lines:\r\n\r\nhttps://github.com/tensorflow/tensorflow/blob/a5120db4d6917f943176ef3c5bb938064604c761/tensorflow/python/keras/engine/network.py#L849-L850\r\n\r\nThey make the assumption that a model's inputs will be deeper than any other node.  When that is not true, any nodes whose depth is equal to or greater than the inputs does not get evaluated, producing an exception.\r\n\r\nThe problem is demonstrated by the following script.  It creates a model where an input and a variable have the same depth.  In TensorFlow 1.13 this runs correctly, but in 1.14 it throws an exception:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 17, in <module>\r\n    print(model(model.inputs))\r\n  File \"/home/peastman/miniconda3/lib/python3.6/site-packages/tensorflow/python/keras/engine/base_layer.py\", line 634, in __call__\r\n    outputs = call_fn(inputs, *args, **kwargs)\r\n  File \"/home/peastman/miniconda3/lib/python3.6/site-packages/tensorflow/python/keras/engine/network.py\", line 751, in call\r\n    return self._run_internal_graph(inputs, training=training, mask=mask)\r\n  File \"/home/peastman/miniconda3/lib/python3.6/site-packages/tensorflow/python/keras/engine/network.py\", line 903, in _run_internal_graph\r\n    assert str(id(x)) in tensor_dict, 'Could not compute output ' + str(x)\r\nAssertionError: Could not compute output Tensor(\"add/add:0\", shape=(?, 1), dtype=float32)\r\n```\r\n\r\n**Describe the expected behavior**\r\n\r\nCalling the model should return a Tensor, not throw an exception.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n```python\r\nimport tensorflow as tf\r\nimport tensorflow.keras.layers as layers\r\n\r\nclass Variable(layers.Layer):\r\n\r\n  def __init__(self, initial_value, **kwargs):\r\n    super(Variable, self).__init__(**kwargs)\r\n    self.var = tf.Variable(initial_value)\r\n\r\n  def call(self, inputs):\r\n    return self.var\r\n\r\nvar = Variable([1.0])([])\r\ninput = layers.Input(shape=(1,))\r\noutput = layers.Add()([input, var])\r\nmodel = tf.keras.Model(inputs=[input], outputs=[output])\r\nprint(model(model.inputs))\r\n```\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31173", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31173/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31173/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31173/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31173", "id": 474827203, "node_id": "MDU6SXNzdWU0NzQ4MjcyMDM=", "number": 31173, "title": "un-deprecate `write_grads` for `fit`", "user": {"login": "IanQS", "id": 6968573, "node_id": "MDQ6VXNlcjY5Njg1NzM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6968573?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IanQS", "html_url": "https://github.com/IanQS", "followers_url": "https://api.github.com/users/IanQS/followers", "following_url": "https://api.github.com/users/IanQS/following{/other_user}", "gists_url": "https://api.github.com/users/IanQS/gists{/gist_id}", "starred_url": "https://api.github.com/users/IanQS/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IanQS/subscriptions", "organizations_url": "https://api.github.com/users/IanQS/orgs", "repos_url": "https://api.github.com/users/IanQS/repos", "events_url": "https://api.github.com/users/IanQS/events{/privacy}", "received_events_url": "https://api.github.com/users/IanQS/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-07-30T21:22:12Z", "updated_at": "2020-02-26T02:42:16Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 2.0-beta\r\n- Are you willing to contribute it (Yes/No): No\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\n```\r\ntb_callback = tf.keras.callbacks.TensorBoard(log_dir=logdir,\r\n                                                 write_grads=True)\r\n```\r\n\r\n- ignores the `write_grads` \r\n\r\nOne might argue that I can write a custom `train` function then accumulate the gradients myself but some features I'm using cause the custom train function to fail (`tf.feature_columns`) [BUG: [TF 2.0] categorical_column_with_vocabulary_list not usable in custom training loop](https://github.com/tensorflow/tensorflow/issues/30453)\r\n\r\n**Will this change the current api? How?**\r\n\r\nwrites the grads to Tensorboard\r\n\r\n**Who will benefit with this feature?**\r\n\r\nPeople who want to visualize the gradients of their model\r\n\r\n**Any Other info.**\r\n\r\nWhy is it getting deprecated?\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31171", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31171/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31171/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31171/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31171", "id": 474795112, "node_id": "MDU6SXNzdWU0NzQ3OTUxMTI=", "number": 31171, "title": "404 Error during oxford-pets tutorial dataset loading", "user": {"login": "janprz", "id": 38572959, "node_id": "MDQ6VXNlcjM4NTcyOTU5", "avatar_url": "https://avatars0.githubusercontent.com/u/38572959?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janprz", "html_url": "https://github.com/janprz", "followers_url": "https://api.github.com/users/janprz/followers", "following_url": "https://api.github.com/users/janprz/following{/other_user}", "gists_url": "https://api.github.com/users/janprz/gists{/gist_id}", "starred_url": "https://api.github.com/users/janprz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janprz/subscriptions", "organizations_url": "https://api.github.com/users/janprz/orgs", "repos_url": "https://api.github.com/users/janprz/repos", "events_url": "https://api.github.com/users/janprz/events{/privacy}", "received_events_url": "https://api.github.com/users/janprz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rsepassi", "id": 1115739, "node_id": "MDQ6VXNlcjExMTU3Mzk=", "avatar_url": "https://avatars3.githubusercontent.com/u/1115739?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsepassi", "html_url": "https://github.com/rsepassi", "followers_url": "https://api.github.com/users/rsepassi/followers", "following_url": "https://api.github.com/users/rsepassi/following{/other_user}", "gists_url": "https://api.github.com/users/rsepassi/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsepassi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsepassi/subscriptions", "organizations_url": "https://api.github.com/users/rsepassi/orgs", "repos_url": "https://api.github.com/users/rsepassi/repos", "events_url": "https://api.github.com/users/rsepassi/events{/privacy}", "received_events_url": "https://api.github.com/users/rsepassi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rsepassi", "id": 1115739, "node_id": "MDQ6VXNlcjExMTU3Mzk=", "avatar_url": "https://avatars3.githubusercontent.com/u/1115739?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsepassi", "html_url": "https://github.com/rsepassi", "followers_url": "https://api.github.com/users/rsepassi/followers", "following_url": "https://api.github.com/users/rsepassi/following{/other_user}", "gists_url": "https://api.github.com/users/rsepassi/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsepassi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsepassi/subscriptions", "organizations_url": "https://api.github.com/users/rsepassi/orgs", "repos_url": "https://api.github.com/users/rsepassi/repos", "events_url": "https://api.github.com/users/rsepassi/events{/privacy}", "received_events_url": "https://api.github.com/users/rsepassi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 18, "created_at": "2019-07-30T20:03:52Z", "updated_at": "2019-12-22T05:31:49Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (Windows 10):\r\n- TensorFlow installed from (binary):\r\n- TensorFlow version: GPU 2.0 beta\r\n- Python version: 3.6\r\n- Installed using virtualenv? pip? conda?: pip\r\n- CUDA/cuDNN version: 10.0/7.5\r\n- GPU model and memory: nvidia GTX 1050 4gb\r\n\r\n\r\n\r\n**Describe the problem**\r\nproblematic tutorial: https://www.tensorflow.org/beta/tutorials/images/segmentation\r\nIn the segmentation tutorial, with the copied code from the tutorial, when loading oxford pet dataset from tensorflow_datasets I get:\r\ntensorflow_datasets.core.download.downloader.DownloadError: Failed to get url http://www.robots.ox.ac.uk/~vgg/data/pets/data\\images.tar.gz. HTTP code: 404.\r\n\r\nI can  go to the site with the web browser with no problems (and even download the dataset).\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nfrom __future__ import absolute_import, division, print_function, unicode_literals\r\nimport tensorflow as tf\r\nfrom tensorflow_examples.models.pix2pix import pix2pix\r\nimport tensorflow_datasets as tfds\r\ntfds.disable_progress_bar()\r\nfrom IPython.display import clear_output\r\nimport matplotlib.pyplot as plt\r\n#problematic line:\r\ndataset, info = tfds.load('oxford_iiit_pet:3.0.0', with_info=True)\r\n\r\n\r\n**Any other info / logs**\r\ntensorflow_datasets.core.download.downloader.DownloadError: Failed to get url http://www.robots.ox.ac.uk/~vgg/data/pets/data\\images.tar.gz. HTTP code: 404.\r\n\r\nAm i doing something wrong, or the site structure changed?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31162", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31162/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31162/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31162/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31162", "id": 474522202, "node_id": "MDU6SXNzdWU0NzQ1MjIyMDI=", "number": 31162, "title": "Can not use large dimension in Embedding layer on GPU(s).", "user": {"login": "rishabhsahrawat", "id": 15910460, "node_id": "MDQ6VXNlcjE1OTEwNDYw", "avatar_url": "https://avatars2.githubusercontent.com/u/15910460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rishabhsahrawat", "html_url": "https://github.com/rishabhsahrawat", "followers_url": "https://api.github.com/users/rishabhsahrawat/followers", "following_url": "https://api.github.com/users/rishabhsahrawat/following{/other_user}", "gists_url": "https://api.github.com/users/rishabhsahrawat/gists{/gist_id}", "starred_url": "https://api.github.com/users/rishabhsahrawat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rishabhsahrawat/subscriptions", "organizations_url": "https://api.github.com/users/rishabhsahrawat/orgs", "repos_url": "https://api.github.com/users/rishabhsahrawat/repos", "events_url": "https://api.github.com/users/rishabhsahrawat/events{/privacy}", "received_events_url": "https://api.github.com/users/rishabhsahrawat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 28, "created_at": "2019-07-30T11:10:32Z", "updated_at": "2020-02-19T19:47:03Z", "closed_at": null, "author_association": "NONE", "body": "I am using TF2.0 latest nightly build and I am trying to train LSTM model for text classification on very large dataset of 16455928 sentences. For embedding layer in the model, I have a vocab size of 366856 and I used 1000 as embedding dimension value in it, on which the 2 GPUs(Tesla T4 from Google) ran out of memory.\r\nSince I can not lower the size of vocabulary (maybe there is a way), so I used lower value for embedding dimension (100) on which the model starts training. Now my question is if there is a way I can use higher value of embedding dimension?. Maybe by putting set of layers of my model on different GPUs, if so then what is the way in TF2.0? Also, will using more number GPUs help? Thank you!"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31155", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31155/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31155/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31155/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31155", "id": 474336657, "node_id": "MDU6SXNzdWU0NzQzMzY2NTc=", "number": 31155, "title": "quantized for SplitV", "user": {"login": "sunzhe09", "id": 30410113, "node_id": "MDQ6VXNlcjMwNDEwMTEz", "avatar_url": "https://avatars0.githubusercontent.com/u/30410113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sunzhe09", "html_url": "https://github.com/sunzhe09", "followers_url": "https://api.github.com/users/sunzhe09/followers", "following_url": "https://api.github.com/users/sunzhe09/following{/other_user}", "gists_url": "https://api.github.com/users/sunzhe09/gists{/gist_id}", "starred_url": "https://api.github.com/users/sunzhe09/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sunzhe09/subscriptions", "organizations_url": "https://api.github.com/users/sunzhe09/orgs", "repos_url": "https://api.github.com/users/sunzhe09/repos", "events_url": "https://api.github.com/users/sunzhe09/events{/privacy}", "received_events_url": "https://api.github.com/users/sunzhe09/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-07-30T02:17:51Z", "updated_at": "2019-07-31T10:46:15Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):Ubuntu 16.04\r\n- TensorFlow installed from (source or binary):pip install tensorflow==1.14\r\n- TensorFlow version (or github SHA if from source):1.14.0\r\n\r\n\r\n**Provide the text output from tflite_convert**\r\n\r\n```\r\ntflite_convert  --output_file=quantized.tflite  --graph_def_file=mixnet.pb   --inference_type=QUANTIZED_UINT8     --input_arrays=truediv  --output_arrays=Softmax  --mean_values=128   --std_dev_values=127  --default_ranges_min=0  --default_ranges_max=6\r\n```\r\n\r\nAlso, please include a link to a GraphDef or the model if possible.\r\n\r\n**Any other info / logs**\r\nW tensorflow/lite/toco/graph_transformations/quantize.cc:132] Constant array mixnet-s/mixnet_model/blocks_0/conv2d/kernel lacks MinMax information. To make up for that, we will now compute the MinMax from actual array elements. That will result in quantization parameters that probably do not match whichever arithmetic was used during training, and thus will probably be a cause of poor inference accuracy.\r\n2019-07-30 01:54:53.127377: F ./tensorflow/lite/toco/toco_tooling.h:38] Check failed: s.ok() Unimplemented: this graph contains an operator of type SplitV for which the quantized form is not yet implemented. Sorry, and patches welcome (that's a relatively fun patch to write, mostly providing the actual quantized arithmetic code for this op).\r\nFatal Python error: Aborted\r\n\r\n\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31153", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31153/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31153/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31153/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31153", "id": 474324731, "node_id": "MDU6SXNzdWU0NzQzMjQ3MzE=", "number": 31153, "title": "Quantization aware training does not add weights quantization and fake quantization nodes to Conv2D layers without bias and followed by non-addition ops", "user": {"login": "protossw512", "id": 18194209, "node_id": "MDQ6VXNlcjE4MTk0MjA5", "avatar_url": "https://avatars1.githubusercontent.com/u/18194209?v=4", "gravatar_id": "", "url": "https://api.github.com/users/protossw512", "html_url": "https://github.com/protossw512", "followers_url": "https://api.github.com/users/protossw512/followers", "following_url": "https://api.github.com/users/protossw512/following{/other_user}", "gists_url": "https://api.github.com/users/protossw512/gists{/gist_id}", "starred_url": "https://api.github.com/users/protossw512/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/protossw512/subscriptions", "organizations_url": "https://api.github.com/users/protossw512/orgs", "repos_url": "https://api.github.com/users/protossw512/repos", "events_url": "https://api.github.com/users/protossw512/events{/privacy}", "received_events_url": "https://api.github.com/users/protossw512/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1166103538, "node_id": "MDU6TGFiZWwxMTY2MTAzNTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/contrib", "name": "contrib", "color": "5319e7", "default": false, "description": "Anything that comes under contrib directory"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-07-30T01:20:16Z", "updated_at": "2019-07-31T23:07:14Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: NA\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: 3.6.6\r\n- Bazel version (if compiling from source): NA\r\n- GCC/Compiler version (if compiling from source): NA\r\n- CUDA/cuDNN version: 10.1/7\r\n- GPU model and memory: GTX 1080ti/12G\r\n\r\n**Describe the current behavior**\r\nCalling `tf.contrib.quantize.create_training_graph()` or `tf.contrib.quantize.create_eval_graph()` will not add weight quantization and activation quantization nodes to Conv2D layers with `use_bias=False, activation=None` and without following batch normalization layer.\r\n\r\n**Describe the expected behavior**\r\nA weights quantization node and an activation quantization node should be added to this layer, even it does not have biases, activation function, and batch normalization.\r\n\r\nThe issue seems to be related to [THIS](https://github.com/tensorflow/tensorflow/blob/dfe0d543aa6777b780f42f12fd503aebc71839d7/tensorflow/contrib/quantize/python/quantize.py#L529-L561) part\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport tensorflow as tf\r\nslim = tf.contrib.slim\r\n\r\nif __name__ == '__main__':\r\n    with tf.Session() as sess:\r\n        input = tf.ones((2, 5, 5, 10))\r\n\r\n        conv_bias = tf.keras.layers.Conv2D(\r\n            15,\r\n            kernel_size=3,\r\n            dilation_rate=(1, 1),\r\n            activation=None,\r\n            use_bias=True,\r\n            kernel_initializer=tf.truncated_normal_initializer(stddev=0.01),\r\n            kernel_regularizer=slim.l2_regularizer(0.00005),\r\n            kernel_constraint=tf.keras.constraints.UnitNorm(axis=2))\r\n\r\n        conv_no_bias = tf.keras.layers.Conv2D(\r\n            15,\r\n            kernel_size=3,\r\n            dilation_rate=(1, 1),\r\n            activation=None,\r\n            use_bias=False,\r\n            kernel_initializer=tf.truncated_normal_initializer(stddev=0.01),\r\n            kernel_regularizer=slim.l2_regularizer(0.00005),\r\n            kernel_constraint=tf.keras.constraints.UnitNorm(axis=2))\r\n\r\n        x_2 = conv_bias(input)\r\n        x_1 = conv_no_bias(input)\r\n\r\n        output = tf.concat((x_1, x_2), axis=3)\r\n        tf.contrib.quantize.create_training_graph(quant_delay=0)\r\n        writer = tf.summary.FileWriter('./bug_report', sess.graph)\r\n\r\n```\r\n**Other info / logs**\r\nGraph from tensorboard:\r\n\r\n![image](https://user-images.githubusercontent.com/18194209/62093263-810e9600-b22d-11e9-87d5-17703fa7542e.png)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31149", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31149/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31149/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31149/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31149", "id": 474292721, "node_id": "MDU6SXNzdWU0NzQyOTI3MjE=", "number": 31149, "title": "Feature Request: Capability to fix the seed for all keras kernel initializers", "user": {"login": "mhaghighat", "id": 13155707, "node_id": "MDQ6VXNlcjEzMTU1NzA3", "avatar_url": "https://avatars1.githubusercontent.com/u/13155707?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mhaghighat", "html_url": "https://github.com/mhaghighat", "followers_url": "https://api.github.com/users/mhaghighat/followers", "following_url": "https://api.github.com/users/mhaghighat/following{/other_user}", "gists_url": "https://api.github.com/users/mhaghighat/gists{/gist_id}", "starred_url": "https://api.github.com/users/mhaghighat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mhaghighat/subscriptions", "organizations_url": "https://api.github.com/users/mhaghighat/orgs", "repos_url": "https://api.github.com/users/mhaghighat/repos", "events_url": "https://api.github.com/users/mhaghighat/events{/privacy}", "received_events_url": "https://api.github.com/users/mhaghighat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-07-29T22:57:19Z", "updated_at": "2019-09-09T23:21:40Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 2.0-beta\r\n- Are you willing to contribute it (Yes/No): No\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nIf you create a Keras model, the only way to make your model reproducible is to repeat setting the seed for the `kernel_initializer` in every layer. This makes the code bulky and more prone to error. For example, a reproducible code looks like this:\r\n\r\n```\r\nnp.random.seed(1)\r\ntf.set_random_seed(1)\r\n# FEATURE REQUEST for another parameter like the ones above that we can set\r\n# here and avoid repeating initializer seed in each and every layer below\r\n\r\nmodel = tf.keras.Sequential()\r\nmodel.add(tf.keras.layers.Dense(8, activation='relu', kernel_initializer=keras.initializers.glorot_uniform(seed=1), input_shape=[1]))\r\nmodel.add(tf.keras.layers.Dense(8, activation='relu', kernel_initializer=keras.initializers.glorot_uniform(seed=1)))\r\nmodel.add(tf.keras.layers.Dense(1, activation='linear', kernel_initializer=keras.initializers.glorot_uniform(seed=1)))\r\n```\r\nI wonder if you can add a default seed parameter that we can set and it affects all the initializers. \r\n\r\n**Will this change the current api? How?**\r\nNo\r\n\r\n**Who will benefit with this feature?**\r\nAnyone who likes clean code and would like to create reproducible models.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31118", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31118/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31118/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31118/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31118", "id": 473848738, "node_id": "MDU6SXNzdWU0NzM4NDg3Mzg=", "number": 31118, "title": "Tensorflowlite 1.14: bazel windows build is broken", "user": {"login": "ElderOrb", "id": 23638, "node_id": "MDQ6VXNlcjIzNjM4", "avatar_url": "https://avatars2.githubusercontent.com/u/23638?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ElderOrb", "html_url": "https://github.com/ElderOrb", "followers_url": "https://api.github.com/users/ElderOrb/followers", "following_url": "https://api.github.com/users/ElderOrb/following{/other_user}", "gists_url": "https://api.github.com/users/ElderOrb/gists{/gist_id}", "starred_url": "https://api.github.com/users/ElderOrb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ElderOrb/subscriptions", "organizations_url": "https://api.github.com/users/ElderOrb/orgs", "repos_url": "https://api.github.com/users/ElderOrb/repos", "events_url": "https://api.github.com/users/ElderOrb/events{/privacy}", "received_events_url": "https://api.github.com/users/ElderOrb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1222092379, "node_id": "MDU6TGFiZWwxMjIyMDkyMzc5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:bazel", "name": "subtype:bazel", "color": "b619ea", "default": false, "description": "Bazel related Build_Installation issues"}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 27, "created_at": "2019-07-29T04:54:55Z", "updated_at": "2020-01-15T16:58:00Z", "closed_at": null, "author_association": "NONE", "body": "Please make sure that this is a build/installation issue. As per our GitHub Policy, we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template\r\n\r\nSystem information\r\n\r\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nWindows 10\r\n\r\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\nn/a\r\n\r\nTensorFlow installed from (source or binary):\r\nBuild from source\r\n\r\nTensorFlow version:\r\nr1.14, 456fbc0e498e3d10604973de9f46ca48d62267cc\r\n\r\nPython version:\r\n2.7.15\r\n\r\nInstalled using virtualenv? pip? conda?:\r\nn/a\r\n\r\nBazel version (if compiling from source):\r\n0.21.0\r\n\r\nGCC/Compiler version (if compiling from source):\r\nMSVC 2017\r\n\r\nCUDA/cuDNN version:\r\nn/a\r\n\r\nGPU model and memory:\r\nn/a\r\n\r\nDescribe the problem\r\nWindows build of tensorflow lite fails.\r\n\r\nProvide the exact sequence of commands / steps that you executed before running into the problem\r\n\r\n```\r\n$ bazel --output_user_root=D:\\test\\tensorflow_1.14.windows build  --jobs 1 -c opt --cxxopt=--std=c++11 //tensorflow/lite:libtensorflowlite.so\r\n\r\nINFO: Repository 'flatbuffers' used the following cache hits instead of downloading the corresponding file.              \r\n* Hash '3f4a286642094f45b1b77228656fbd7ea123964f19502f9ecfd29933fd23a50b' for http://mirror.tensorflow.org/github.com/google/flatbuffers/archive/v1.11.0.tar.gz                                                                                \r\nIf the definition of 'flatbuffers' was updated, verify that the hashes were also updated.                               \r\nERROR: An error occurred during the fetch of repository 'flatbuffers':                                                     \r\njava.io.IOException: Could not create symlink from \r\nD:/test/tensorflow/third_party/flatbuffers/build_defs.bzl to \r\nD:/test/tensorflow_1.14.windows/s5ozolul/external/flatbuffers/build_defs.bzl: \r\nD:/test/tensorflow_1.14.windows/s5ozolul/external/flatbuffers/build_defs.bzl (File exists)                                                                             \r\nERROR: D:/test/tensorflow/tensorflow/lite/BUILD:149:1: //tensorflow/lite:framework depends on \r\n//tensorflow/lite/schema:schema_fbs in repository @ which failed to fetch. no such package \r\n'@flatbuffers//': java.io.IOException: Could not create symlink from \r\nD:/test/tensorflow/third_party/flatbuffers/build_defs.bzl to \r\nD:/test/tensorflow_1.14.windows/s5ozolul/external/flatbuffers/build_defs.bzl: \r\nD:/test/tensorflow_1.14.windows/s5ozolul/external/flatbuffers/build_defs.bzl (File exists)                                                                                                                     \r\nERROR: Analysis of target '//tensorflow/lite:libtensorflowlite.so' failed; build aborted: no such package \r\n'@flatbuffers//': java.io.IOException: Could not create symlink from \r\nD:/test/tensorflow/third_party/flatbuffers/build_defs.bzl to \r\nD:/test/tensorflow_1.14.windows/s5ozolul/external/flatbuffers/build_defs.bzl: \r\nD:/test/tensorflow_1.14.windows/s5ozolul/external/flatbuffers/build_defs.bzl (File exists)                                                                            \r\nINFO: Elapsed time: 96.770s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (22 packages loaded, 98 targets configured)                                    \r\ncurrently loading: tensorflow/lite/schema\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31096", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31096/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31096/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31096/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31096", "id": 473615817, "node_id": "MDU6SXNzdWU0NzM2MTU4MTc=", "number": 31096, "title": "Op request tensorflow lite ", "user": {"login": "kishorekumarsingh", "id": 19643986, "node_id": "MDQ6VXNlcjE5NjQzOTg2", "avatar_url": "https://avatars0.githubusercontent.com/u/19643986?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kishorekumarsingh", "html_url": "https://github.com/kishorekumarsingh", "followers_url": "https://api.github.com/users/kishorekumarsingh/followers", "following_url": "https://api.github.com/users/kishorekumarsingh/following{/other_user}", "gists_url": "https://api.github.com/users/kishorekumarsingh/gists{/gist_id}", "starred_url": "https://api.github.com/users/kishorekumarsingh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kishorekumarsingh/subscriptions", "organizations_url": "https://api.github.com/users/kishorekumarsingh/orgs", "repos_url": "https://api.github.com/users/kishorekumarsingh/repos", "events_url": "https://api.github.com/users/kishorekumarsingh/events{/privacy}", "received_events_url": "https://api.github.com/users/kishorekumarsingh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-07-27T08:34:27Z", "updated_at": "2019-07-30T09:50:12Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version (or github SHA if from source):\r\n\r\n\r\n**Provide the text output from tflite_convert**\r\n\r\n```\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime. If those are native TensorFlow operators, you might be able to use the extended runtime by passing --enable_select_tf_ops, or by setting target_ops=TFLITE_BUILTINS,SELECT_TF_OPS when calling tf.lite.TFLiteConverter(). Otherwise, if you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: ADD, CAST, CONCATENATION, CONV_2D, DEPTHWISE_CONV_2D, EXP, EXPAND_DIMS, FILL, GATHER, GREATER, GREATER_EQUAL, LESS, LOGICAL_AND, LOGISTIC, MAXIMUM, MINIMUM, MUL, PACK, PAD, RANGE, RESHAPE, RESIZE_BILINEAR, SELECT, SHAPE, SLICE, SPLIT, SQUEEZE, STRIDED_SLICE, SUB, SUM, TILE, TOPK_V2, TRANSPOSE, UNPACK, WHERE, ZEROS_LIKE. Here is a list of operators for which you will need custom implementations: Enter, Exit, LoopCond, Merge, NonMaxSuppressionV3, Switch, TensorArrayGatherV3, TensorArrayReadV3, TensorArrayScatterV3, TensorArraySizeV3, TensorArrayV3, TensorArrayWriteV3.\r\n```\r\n\r\nAlso, please include a link to a GraphDef or the model if possible.\r\n\r\n**Any other info / logs**\r\n\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31095", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31095/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31095/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31095/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31095", "id": 473613689, "node_id": "MDU6SXNzdWU0NzM2MTM2ODk=", "number": 31095, "title": "YOLO V3 Tensorflow Lite request", "user": {"login": "hailigu", "id": 32663824, "node_id": "MDQ6VXNlcjMyNjYzODI0", "avatar_url": "https://avatars3.githubusercontent.com/u/32663824?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hailigu", "html_url": "https://github.com/hailigu", "followers_url": "https://api.github.com/users/hailigu/followers", "following_url": "https://api.github.com/users/hailigu/following{/other_user}", "gists_url": "https://api.github.com/users/hailigu/gists{/gist_id}", "starred_url": "https://api.github.com/users/hailigu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hailigu/subscriptions", "organizations_url": "https://api.github.com/users/hailigu/orgs", "repos_url": "https://api.github.com/users/hailigu/repos", "events_url": "https://api.github.com/users/hailigu/events{/privacy}", "received_events_url": "https://api.github.com/users/hailigu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-07-27T08:11:49Z", "updated_at": "2019-07-29T11:46:41Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version (or github SHA if from source):\r\n\r\n\r\n**Provide the text output from tflite_convert**\r\n\r\n```\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime. If those are native TensorFlow operators, you might be able to use the extended runtime by passing --enable_select_tf_ops, or by setting target_ops=TFLITE_BUILTINS,SELECT_TF_OPS when calling tf.lite.TFLiteConverter(). Otherwise, if you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: ADD, CONCATENATION, CONV_2D, EXP, FILL, GATHER, GREATER_EQUAL, LEAKY_RELU, LOGISTIC, MUL, PAD, RESHAPE, RESIZE_NEAREST_NEIGHBOR, SHAPE, SPLIT_V, SQUEEZE, STRIDED_SLICE, SUB, WHERE. Here is a list of operators for which you will need custom implementations: NonMaxSuppressionV3.\r\n\r\n```\r\n\r\nAlso, please include a link to a GraphDef or the model if possible.\r\n\r\n**Any other info / logs**\r\n\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31092", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31092/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31092/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31092/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31092", "id": 473587674, "node_id": "MDU6SXNzdWU0NzM1ODc2NzQ=", "number": 31092, "title": "Tensorflow-lite gpu ios memory leak", "user": {"login": "zuoshaobo", "id": 3012605, "node_id": "MDQ6VXNlcjMwMTI2MDU=", "avatar_url": "https://avatars2.githubusercontent.com/u/3012605?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zuoshaobo", "html_url": "https://github.com/zuoshaobo", "followers_url": "https://api.github.com/users/zuoshaobo/followers", "following_url": "https://api.github.com/users/zuoshaobo/following{/other_user}", "gists_url": "https://api.github.com/users/zuoshaobo/gists{/gist_id}", "starred_url": "https://api.github.com/users/zuoshaobo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zuoshaobo/subscriptions", "organizations_url": "https://api.github.com/users/zuoshaobo/orgs", "repos_url": "https://api.github.com/users/zuoshaobo/repos", "events_url": "https://api.github.com/users/zuoshaobo/events{/privacy}", "received_events_url": "https://api.github.com/users/zuoshaobo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-07-27T02:07:51Z", "updated_at": "2019-07-29T18:18:07Z", "closed_at": null, "author_association": "NONE", "body": "I use TensorFlowLiteGpuExperimental  for inference ,I have 60 models, if i only use one model to inference ,it works well, but if i switch different models in running , than memory leak occurs, I just use code :\r\n            interpreter = nullptr;\r\n            DeleteGpuDelegate(delegate);\r\nto free resources\r\nso if i loss other free function ?\r\nif TensorFlowLiteGpuExperimental a bug?\r\nTensorFlowLiteGpuExperimental the newer version number is what? "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31089", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31089/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31089/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31089/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31089", "id": 473542557, "node_id": "MDU6SXNzdWU0NzM1NDI1NTc=", "number": 31089, "title": "Can't set tf.keras.backend.variable(trainable=False)", "user": {"login": "beasteers", "id": 6741720, "node_id": "MDQ6VXNlcjY3NDE3MjA=", "avatar_url": "https://avatars2.githubusercontent.com/u/6741720?v=4", "gravatar_id": "", "url": "https://api.github.com/users/beasteers", "html_url": "https://github.com/beasteers", "followers_url": "https://api.github.com/users/beasteers/followers", "following_url": "https://api.github.com/users/beasteers/following{/other_user}", "gists_url": "https://api.github.com/users/beasteers/gists{/gist_id}", "starred_url": "https://api.github.com/users/beasteers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/beasteers/subscriptions", "organizations_url": "https://api.github.com/users/beasteers/orgs", "repos_url": "https://api.github.com/users/beasteers/repos", "events_url": "https://api.github.com/users/beasteers/events{/privacy}", "received_events_url": "https://api.github.com/users/beasteers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-07-26T21:27:41Z", "updated_at": "2019-07-29T20:18:22Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.13.1\r\n- Are you willing to contribute it (Yes/No): maybe, but I don't have time for tests/docs\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nCurrently, I have to do this.\r\n```python\r\nimport tensorflow.keras.backend as K\r\n\r\nvariable = K.variable(5)\r\nvariable._trainable = False\r\n```\r\n\r\nBut changing private attributes always feels dodgy. Ideally, we should just be able to do this.\r\n```python\r\nvariable = K.variable(5, trainable=False)\r\n```\r\n\r\n**Will this change the current api? How?**\r\n\r\nIt will add one parameter `trainable=True` to `tensorflow.keras.backend.variable`\r\n\r\n**Who will benefit with this feature?**\r\n\r\nPeople who don't like the feeling of having to modify private attributes.\r\n\r\n**Any Other info.**\r\nLooking here: https://github.com/tensorflow/tensorflow/blob/ec71eb1ac4986e145845372b44648a03ea0e7545/tensorflow/python/keras/backend.py#L739\r\n\r\n```python\r\ndef variable(value, dtype=None, name=None, constraint=None, trainable=True):\r\n    ...\r\n    v = variables_module.Variable(\r\n      value,\r\n      dtype=dtypes_module.as_dtype(dtype),\r\n      name=name,\r\n      trainable=trainable, # +++\r\n      constraint=constraint)\r\n    ...\r\n```\r\n\r\nNot sure what's going on with the sparse tensor, but you could always raise an exception if \r\n`hasattr(value, 'tocoo') and trainable == False` if that's a problem."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31086", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31086/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31086/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31086/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31086", "id": 473485349, "node_id": "MDU6SXNzdWU0NzM0ODUzNDk=", "number": 31086, "title": "TensorFlow 2.0 using pretrained word embeddings as input to sequence model", "user": {"login": "NeuralGirl", "id": 11749219, "node_id": "MDQ6VXNlcjExNzQ5MjE5", "avatar_url": "https://avatars0.githubusercontent.com/u/11749219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NeuralGirl", "html_url": "https://github.com/NeuralGirl", "followers_url": "https://api.github.com/users/NeuralGirl/followers", "following_url": "https://api.github.com/users/NeuralGirl/following{/other_user}", "gists_url": "https://api.github.com/users/NeuralGirl/gists{/gist_id}", "starred_url": "https://api.github.com/users/NeuralGirl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NeuralGirl/subscriptions", "organizations_url": "https://api.github.com/users/NeuralGirl/orgs", "repos_url": "https://api.github.com/users/NeuralGirl/repos", "events_url": "https://api.github.com/users/NeuralGirl/events{/privacy}", "received_events_url": "https://api.github.com/users/NeuralGirl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-07-26T18:37:00Z", "updated_at": "2020-01-05T17:48:07Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): TF 2.0 Beta\r\n- Are you willing to contribute it (Yes/No):\r\n**Describe the feature and the current behavior/state.**\r\nI've just started exploring TF2.0 and it appears that the word embeddings must be generated as part of the seq2seq model.  \r\n\r\n**Will this change the current api? How?**\r\nembedding layer would need to be modified to not train and permit inclusion of pretrained word embeddings\r\n\r\n**Who will benefit with this feature?**\r\nanyone who would like to use pretrained word embeddings**Any\r\n\r\n Other info.**\r\ninclusion of pretrained word embeddings would further expedite training so a huge win. \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31067", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31067/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31067/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31067/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31067", "id": 473280901, "node_id": "MDU6SXNzdWU0NzMyODA5MDE=", "number": 31067, "title": "tensorflow polyfill operation", "user": {"login": "capilano", "id": 14918256, "node_id": "MDQ6VXNlcjE0OTE4MjU2", "avatar_url": "https://avatars3.githubusercontent.com/u/14918256?v=4", "gravatar_id": "", "url": "https://api.github.com/users/capilano", "html_url": "https://github.com/capilano", "followers_url": "https://api.github.com/users/capilano/followers", "following_url": "https://api.github.com/users/capilano/following{/other_user}", "gists_url": "https://api.github.com/users/capilano/gists{/gist_id}", "starred_url": "https://api.github.com/users/capilano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/capilano/subscriptions", "organizations_url": "https://api.github.com/users/capilano/orgs", "repos_url": "https://api.github.com/users/capilano/repos", "events_url": "https://api.github.com/users/capilano/events{/privacy}", "received_events_url": "https://api.github.com/users/capilano/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 522623856, "node_id": "MDU6TGFiZWw1MjI2MjM4NTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/API%20review", "name": "API review", "color": "d4c5f9", "default": false, "description": null}, {"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 25, "created_at": "2019-07-26T10:04:20Z", "updated_at": "2020-03-10T18:05:09Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using):Current stable build(1.14)\r\n- Are you willing to contribute it (Yes/No):Maybe\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nAs far as I can tell, there is no easy way to create a polygon mask, given a set of points using pure tensorflow operations during run time. For a given image, with a set of landmark points(let's say 8 points), I would like to create a polygon(more precisely,a convex hull) mask with the points as boundaries, which can be used as an attention mask etc. There are opencv/scipy/etc functions that can easily do this with a single line of code. Unfortunately, there are no equivalent functions in tensorflow and these are tricky to code because of the looping involved. Any ideas on if this is possible would be appreciated. Thanks\r\n\r\n**Will this change the current api? How?**No. This is just a request to support a new operation\r\n\r\n**Who will benefit with this feature?**Tensorflow community/users\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31064", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31064/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31064/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31064/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31064", "id": 473267272, "node_id": "MDU6SXNzdWU0NzMyNjcyNzI=", "number": 31064, "title": "Support for Latest NDK ( ndk14b above) for  tensorflow/contrib/makefile/Makefile", "user": {"login": "alokprasad", "id": 11716522, "node_id": "MDQ6VXNlcjExNzE2NTIy", "avatar_url": "https://avatars2.githubusercontent.com/u/11716522?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alokprasad", "html_url": "https://github.com/alokprasad", "followers_url": "https://api.github.com/users/alokprasad/followers", "following_url": "https://api.github.com/users/alokprasad/following{/other_user}", "gists_url": "https://api.github.com/users/alokprasad/gists{/gist_id}", "starred_url": "https://api.github.com/users/alokprasad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alokprasad/subscriptions", "organizations_url": "https://api.github.com/users/alokprasad/orgs", "repos_url": "https://api.github.com/users/alokprasad/repos", "events_url": "https://api.github.com/users/alokprasad/events{/privacy}", "received_events_url": "https://api.github.com/users/alokprasad/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-07-26T09:32:25Z", "updated_at": "2019-09-27T04:25:04Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version: 1.14\r\n- Python version: 3.7\r\n- Installed using virtualenv? pip? conda?:  No\r\n- Bazel version (if compiling from source): NA\r\n- GCC/Compiler version (if compiling from source): CLANG\r\n- CUDA/cuDNN version:10.1\r\n- GPU model and memory:\r\n8GB\r\n\r\n\r\n**Describe the problem**\r\n tensorflow/contrib/makefile/Makefile is desingned to work with Android ndk14b only , None of the latest NDK can be used to compile libtensorflow-core.a for Android using latest ndk , Please modify the Makefile to support latest NDK \r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31062", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31062/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31062/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31062/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31062", "id": 473253557, "node_id": "MDU6SXNzdWU0NzMyNTM1NTc=", "number": 31062, "title": "Why tensorflow r2.0 still load libcudart_static.a in cuda_configure.bzl ", "user": {"login": "chengleiwang", "id": 11610520, "node_id": "MDQ6VXNlcjExNjEwNTIw", "avatar_url": "https://avatars3.githubusercontent.com/u/11610520?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chengleiwang", "html_url": "https://github.com/chengleiwang", "followers_url": "https://api.github.com/users/chengleiwang/followers", "following_url": "https://api.github.com/users/chengleiwang/following{/other_user}", "gists_url": "https://api.github.com/users/chengleiwang/gists{/gist_id}", "starred_url": "https://api.github.com/users/chengleiwang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chengleiwang/subscriptions", "organizations_url": "https://api.github.com/users/chengleiwang/orgs", "repos_url": "https://api.github.com/users/chengleiwang/repos", "events_url": "https://api.github.com/users/chengleiwang/events{/privacy}", "received_events_url": "https://api.github.com/users/chengleiwang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 1222092379, "node_id": "MDU6TGFiZWwxMjIyMDkyMzc5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:bazel", "name": "subtype:bazel", "color": "b619ea", "default": false, "description": "Bazel related Build_Installation issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-07-26T09:00:40Z", "updated_at": "2020-01-08T10:08:24Z", "closed_at": null, "author_association": "NONE", "body": "In tensorflow r2.0, I still can see libcudart_static.a copied to local cuda repository in third_party/gpus/cuda_configure.bzl file, but looks like tensorflow using cuda shared object to access Nvidia GPUs, so why still we need load static library here? "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31053", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31053/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31053/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31053/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31053", "id": 473148529, "node_id": "MDU6SXNzdWU0NzMxNDg1Mjk=", "number": 31053, "title": "TFLite Interpreter, allocate_tensors() failed to prepare, not kTFLiteInt8/Uint8", "user": {"login": "eric4337", "id": 4446235, "node_id": "MDQ6VXNlcjQ0NDYyMzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/4446235?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eric4337", "html_url": "https://github.com/eric4337", "followers_url": "https://api.github.com/users/eric4337/followers", "following_url": "https://api.github.com/users/eric4337/following{/other_user}", "gists_url": "https://api.github.com/users/eric4337/gists{/gist_id}", "starred_url": "https://api.github.com/users/eric4337/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eric4337/subscriptions", "organizations_url": "https://api.github.com/users/eric4337/orgs", "repos_url": "https://api.github.com/users/eric4337/repos", "events_url": "https://api.github.com/users/eric4337/events{/privacy}", "received_events_url": "https://api.github.com/users/eric4337/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jianlijianli", "id": 43797323, "node_id": "MDQ6VXNlcjQzNzk3MzIz", "avatar_url": "https://avatars3.githubusercontent.com/u/43797323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jianlijianli", "html_url": "https://github.com/jianlijianli", "followers_url": "https://api.github.com/users/jianlijianli/followers", "following_url": "https://api.github.com/users/jianlijianli/following{/other_user}", "gists_url": "https://api.github.com/users/jianlijianli/gists{/gist_id}", "starred_url": "https://api.github.com/users/jianlijianli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jianlijianli/subscriptions", "organizations_url": "https://api.github.com/users/jianlijianli/orgs", "repos_url": "https://api.github.com/users/jianlijianli/repos", "events_url": "https://api.github.com/users/jianlijianli/events{/privacy}", "received_events_url": "https://api.github.com/users/jianlijianli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jianlijianli", "id": 43797323, "node_id": "MDQ6VXNlcjQzNzk3MzIz", "avatar_url": "https://avatars3.githubusercontent.com/u/43797323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jianlijianli", "html_url": "https://github.com/jianlijianli", "followers_url": "https://api.github.com/users/jianlijianli/followers", "following_url": "https://api.github.com/users/jianlijianli/following{/other_user}", "gists_url": "https://api.github.com/users/jianlijianli/gists{/gist_id}", "starred_url": "https://api.github.com/users/jianlijianli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jianlijianli/subscriptions", "organizations_url": "https://api.github.com/users/jianlijianli/orgs", "repos_url": "https://api.github.com/users/jianlijianli/repos", "events_url": "https://api.github.com/users/jianlijianli/events{/privacy}", "received_events_url": "https://api.github.com/users/jianlijianli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2019-07-26T02:36:06Z", "updated_at": "2020-03-09T05:34:10Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v1.14.0-rc1-22-gaf24dc91b5 1.14.0\r\n- Python version: 3.6.3\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n**Describe the current behavior**\r\nThe graph only consist of ```tf.split()```, where I pin down to for this issue.\r\nAfter quantization with ```representative_dataset()```, the interpreter fail to `allocate_tensor()`.\r\n`RuntimeError: tensorflow/lite/kernels/dequantize.cc:62 op_context.input->type == kTFLiteUInt8 || op_context.input->type == kTFLiteInt8 was not true.Node number 0 (DEQUANTIZE) failed to prepare`.\r\nI assume ```tf.split()``` cannot be quantize, and nothing to be quantize actually, since if I add ```tf.lite.OpsSet.TFLITE_BUILTINS_INT8``` to fully quantize into INT8, it tell me SPLIT_V is not supported.\r\nSo this simple graph should not have any quantize/dequantize at tf.split ops?\r\nThus checking type if is Int8 and has dequantize layer here seems not to make sense?\r\n\r\n**Describe the expected behavior**\r\nInterpreter sucessfully\r\n\r\n**Code to reproduce the issue**\r\n```\r\ninputs_raw = tf.placeholder(tf.float32, shape=[1, 32, 32, 1], name='inputs_raw')\r\noutputs = tf.split(value = inputs_raw, num_or_size_splits = 2, axis = 1)[0]\r\n\r\nwith tf.Session() as sess:\r\n    sess.run(tf.global_variables_initializer())\r\n\r\n    converter = lite.TFLiteConverter.from_session(sess, [inputs_raw], [outputs])\r\n\r\n    converter.optimizations = [lite.Optimize.DEFAULT]\r\n    def representative_data_gen():\r\n        for i in range(1):\r\n            yield [np.random.random_sample((1, 32, 32, 1)).astype(np.float32)]\r\n            #yield [sess.run(tf.random.normal(inputs_raw.get_shape(), dtype = tf.float32, seed = 1))] # both have issue\r\n    converter.representative_dataset = representative_data_gen\r\n    tflite_model = converter.convert()\r\n    open(\"converted_model_quant_test.tflite\", \"wb\").write(tflite_model)\r\n\r\ninterpreter = lite.Interpreter(model_path = \"converted_model_quant_test.tflite\")\r\nnterpreter.allocate_tensors()\r\n```\r\n\r\n**Other info / logs**\r\nTraceback (most recent call last):\r\n  File \"main.py\", line 532, in <module>\r\n    interpreter.allocate_tensors()\r\n  File \"/proj/gpu_xxx/.local/lib/python3.6/site-packages/tensorflow/lite/python/interpreter.py\", line 95, in allocate_tensors\r\n    return self._interpreter.AllocateTensors()\r\n  File \"/proj/gpu_xxx/.local/lib/python3.6/site-packages/tensorflow/lite/python/interpreter_wrapper/tensorflow_wrap_interpreter_wrapper.py\", line 106, in AllocateTensors\r\n    return _tensorflow_wrap_interpreter_wrapper.InterpreterWrapper_AllocateTensors(self)\r\nRuntimeError: tensorflow/lite/kernels/dequantize.cc:62 op_context.input->type == kTfLiteUInt8 || op_context.input->type == kTfLiteInt8 was not true.Node number 0 (DEQUANTIZE) failed to prepare.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31052", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31052/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31052/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31052/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31052", "id": 473148485, "node_id": "MDU6SXNzdWU0NzMxNDg0ODU=", "number": 31052, "title": "CUDA optimization: using read-only cache", "user": {"login": "ThisIsIsaac", "id": 49523965, "node_id": "MDQ6VXNlcjQ5NTIzOTY1", "avatar_url": "https://avatars1.githubusercontent.com/u/49523965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThisIsIsaac", "html_url": "https://github.com/ThisIsIsaac", "followers_url": "https://api.github.com/users/ThisIsIsaac/followers", "following_url": "https://api.github.com/users/ThisIsIsaac/following{/other_user}", "gists_url": "https://api.github.com/users/ThisIsIsaac/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThisIsIsaac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThisIsIsaac/subscriptions", "organizations_url": "https://api.github.com/users/ThisIsIsaac/orgs", "repos_url": "https://api.github.com/users/ThisIsIsaac/repos", "events_url": "https://api.github.com/users/ThisIsIsaac/events{/privacy}", "received_events_url": "https://api.github.com/users/ThisIsIsaac/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "chsigg", "id": 7523982, "node_id": "MDQ6VXNlcjc1MjM5ODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/7523982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chsigg", "html_url": "https://github.com/chsigg", "followers_url": "https://api.github.com/users/chsigg/followers", "following_url": "https://api.github.com/users/chsigg/following{/other_user}", "gists_url": "https://api.github.com/users/chsigg/gists{/gist_id}", "starred_url": "https://api.github.com/users/chsigg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chsigg/subscriptions", "organizations_url": "https://api.github.com/users/chsigg/orgs", "repos_url": "https://api.github.com/users/chsigg/repos", "events_url": "https://api.github.com/users/chsigg/events{/privacy}", "received_events_url": "https://api.github.com/users/chsigg/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "chsigg", "id": 7523982, "node_id": "MDQ6VXNlcjc1MjM5ODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/7523982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chsigg", "html_url": "https://github.com/chsigg", "followers_url": "https://api.github.com/users/chsigg/followers", "following_url": "https://api.github.com/users/chsigg/following{/other_user}", "gists_url": "https://api.github.com/users/chsigg/gists{/gist_id}", "starred_url": "https://api.github.com/users/chsigg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chsigg/subscriptions", "organizations_url": "https://api.github.com/users/chsigg/orgs", "repos_url": "https://api.github.com/users/chsigg/repos", "events_url": "https://api.github.com/users/chsigg/events{/privacy}", "received_events_url": "https://api.github.com/users/chsigg/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-07-26T02:35:54Z", "updated_at": "2019-08-01T21:51:56Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using):\r\n- Are you willing to contribute it (Yes):\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\n@chsigg \r\n\r\nI wanted to propose adding `__restrict__` or `const __restrict__` tags on `input` and `output` arrays of ALL tensorflow kernels. But before I go on, I wanted to check a couple things:\r\n\r\n1. can I assume that input and output arrays given to a CUDA kernel do not overlap?\r\n2. Can I assume that input arrays are not modified, or would I have to check this per-kernel bases?\r\n\r\n**Will this change the current api? How?**\r\n\r\n**Who will benefit with this feature?**\r\n\r\nSince pytorch arrays are stored in NHWC data layout, many kernels waste global memory read bandwidth. By adding `__restrict__` or `const __restrict__` tags, we can let the compiler cache the reads to read-only cache which displays about 50 ~ 100x faster clockspeed on memory reads.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31051", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31051/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31051/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31051/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31051", "id": 473146667, "node_id": "MDU6SXNzdWU0NzMxNDY2Njc=", "number": 31051, "title": "caching cuDNN CNN kernel choices", "user": {"login": "ThisIsIsaac", "id": 49523965, "node_id": "MDQ6VXNlcjQ5NTIzOTY1", "avatar_url": "https://avatars1.githubusercontent.com/u/49523965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThisIsIsaac", "html_url": "https://github.com/ThisIsIsaac", "followers_url": "https://api.github.com/users/ThisIsIsaac/followers", "following_url": "https://api.github.com/users/ThisIsIsaac/following{/other_user}", "gists_url": "https://api.github.com/users/ThisIsIsaac/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThisIsIsaac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThisIsIsaac/subscriptions", "organizations_url": "https://api.github.com/users/ThisIsIsaac/orgs", "repos_url": "https://api.github.com/users/ThisIsIsaac/repos", "events_url": "https://api.github.com/users/ThisIsIsaac/events{/privacy}", "received_events_url": "https://api.github.com/users/ThisIsIsaac/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "timshen91", "id": 1157432, "node_id": "MDQ6VXNlcjExNTc0MzI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1157432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timshen91", "html_url": "https://github.com/timshen91", "followers_url": "https://api.github.com/users/timshen91/followers", "following_url": "https://api.github.com/users/timshen91/following{/other_user}", "gists_url": "https://api.github.com/users/timshen91/gists{/gist_id}", "starred_url": "https://api.github.com/users/timshen91/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timshen91/subscriptions", "organizations_url": "https://api.github.com/users/timshen91/orgs", "repos_url": "https://api.github.com/users/timshen91/repos", "events_url": "https://api.github.com/users/timshen91/events{/privacy}", "received_events_url": "https://api.github.com/users/timshen91/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "timshen91", "id": 1157432, "node_id": "MDQ6VXNlcjExNTc0MzI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1157432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timshen91", "html_url": "https://github.com/timshen91", "followers_url": "https://api.github.com/users/timshen91/followers", "following_url": "https://api.github.com/users/timshen91/following{/other_user}", "gists_url": "https://api.github.com/users/timshen91/gists{/gist_id}", "starred_url": "https://api.github.com/users/timshen91/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timshen91/subscriptions", "organizations_url": "https://api.github.com/users/timshen91/orgs", "repos_url": "https://api.github.com/users/timshen91/repos", "events_url": "https://api.github.com/users/timshen91/events{/privacy}", "received_events_url": "https://api.github.com/users/timshen91/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-07-26T02:27:21Z", "updated_at": "2019-07-31T06:31:14Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using):\r\n- Are you willing to contribute it (Yes):\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nPytorch as a functionality to cache the chosen cuDNN kernels when the input dimensions are identical to previous calls:\r\n\r\ntorch.backend.cudnn.benchmark = True\r\nThis improves throughput of a network by 30~40% (again, when the input dimensions of the network do not change).\r\n\r\nHere is where the caching is implemented in Aten:\r\nhttps://github.com/pytorch/pytorch/blob/358fb51e773b8ad509ec270caee5ec1c51d82f38/aten/src/ATen/native/cudnn/Conv.cpp#L340\r\n\r\nDo you have any plans to add similar functionality? If not, I would love to send a PR.\r\n\r\n**Will this change the current api? How?**\r\n\r\nLike pytorch, it would require setting a flag.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nAll forward passes that are performed with fixed input sizes and types\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31050", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31050/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31050/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31050/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31050", "id": 473117568, "node_id": "MDU6SXNzdWU0NzMxMTc1Njg=", "number": 31050, "title": "Can't set sprite in Keras Tensorboard Callback", "user": {"login": "beasteers", "id": 6741720, "node_id": "MDQ6VXNlcjY3NDE3MjA=", "avatar_url": "https://avatars2.githubusercontent.com/u/6741720?v=4", "gravatar_id": "", "url": "https://api.github.com/users/beasteers", "html_url": "https://github.com/beasteers", "followers_url": "https://api.github.com/users/beasteers/followers", "following_url": "https://api.github.com/users/beasteers/following{/other_user}", "gists_url": "https://api.github.com/users/beasteers/gists{/gist_id}", "starred_url": "https://api.github.com/users/beasteers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/beasteers/subscriptions", "organizations_url": "https://api.github.com/users/beasteers/orgs", "repos_url": "https://api.github.com/users/beasteers/repos", "events_url": "https://api.github.com/users/beasteers/events{/privacy}", "received_events_url": "https://api.github.com/users/beasteers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 284285184, "node_id": "MDU6TGFiZWwyODQyODUxODQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tensorboard", "name": "comp:tensorboard", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-07-25T23:58:07Z", "updated_at": "2019-07-30T04:08:43Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.13.1\r\n- Are you willing to contribute it (Yes/No): maybe, but not at this moment\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nThere is no way to specify a sprite for embedding visualizations with the Tensorboard Callback in Keras. \r\n\r\n\r\n**Will this change the current api? How?**\r\n\r\nIt would add two more parameters to `Tensorboard.__init__()`\r\n - `embeddings_image_path=None,`\r\n - `embeddings_image_size=None,`\r\n\r\n**Who will benefit with this feature?**\r\n\r\nAnyone who wants to be able to see what their embedding clusters actually look like. NLP people are covered tho.\r\n\r\n**Any Other info.**\r\n\r\nHere's basically what you need. I just don't have the time to write unittests and docs. \r\n\r\n```python\r\nclass Tensorboard(Callback):\r\n\r\n    def __init__(self,\r\n                   ...\r\n                   embeddings_freq=0,\r\n                   embeddings_layer_names=None,\r\n                   embeddings_metadata=None,\r\n                   embeddings_data=None,\r\n\r\n                   ### add\r\n                   embeddings_image_path=None,\r\n                   embeddings_image_size=None,\r\n                   ...):\r\n\r\n        ### add \r\n        self.embeddings_image_path = embeddings_image_path\r\n        self.embeddings_image_size = embeddings_image_size\r\n\r\n\r\n    def set_model(self, model):\r\n        ...\r\n\r\n        ### add/rework a tad ~L282-L290\r\n        # allow embedding parameters to be passed as a dict(layer_name -> param)\r\n        # or as a single string that applies to all layers\r\n        layer_names = embeddings_vars.keys()\r\n\r\n        embeddings_metadata = (\r\n            {name: self.embeddings_metadata for name in layer_names}\r\n            if not isinstance(self.embeddings_metadata, dict) else data)\r\n            \r\n        embeddings_image_path = (\r\n            {name: self.embeddings_image_path for name in layer_names}\r\n            if not isinstance(self.embeddings_image_path, dict) else data)\r\n\r\n        embeddings_image_size = (\r\n            {name: self.embeddings_image_size for name in layer_names}\r\n            if not isinstance(self.embeddings_image_size, dict) else data)\r\n        ###\r\n        \r\n        try:\r\n            from tensorboard.plugins import projector\r\n        except ImportError:\r\n            raise ImportError('Failed to import TensorBoard. Please make sure that '\r\n                              'TensorBoard integration is complete.\"')\r\n\r\n        # TODO(psv): Add integration tests to test embedding visualization\r\n        # with TensorBoard callback. We are unable to write a unit test for this\r\n        # because TensorBoard dependency assumes TensorFlow package is installed.\r\n        config = projector.ProjectorConfig()\r\n        for layer_name, tensor in embeddings_vars.items():\r\n            embedding = config.embeddings.add()\r\n            embedding.tensor_name = tensor.name\r\n\r\n            if (embeddings_metadata is not None and\r\n                layer_name in embeddings_metadata):\r\n                embedding.metadata_path = embeddings_metadata[layer_name]\r\n\r\n            ### add \r\n            if (embeddings_image_path is not None and\r\n                embeddings_image_size is not None and\r\n                layer_name in embeddings_image_path and\r\n                layer_name in embeddings_image_size):\r\n\r\n                # this is what I need\r\n                embedding.sprite.image_path = embeddings_image_path[layer_name]\r\n                embedding.sprite.single_image_dim.extend(embeddings_image_size)\r\n            ###\r\n\r\n        projector.visualize_embeddings(self.writer, config)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31049", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31049/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31049/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31049/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/31049", "id": 473109573, "node_id": "MDExOlB1bGxSZXF1ZXN0MzAxMzQzMDc4", "number": 31049, "title": "Extract all the layers included inner layers when doing \"load_weights\u2026", "user": {"login": "edwardyehuang", "id": 3354448, "node_id": "MDQ6VXNlcjMzNTQ0NDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3354448?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edwardyehuang", "html_url": "https://github.com/edwardyehuang", "followers_url": "https://api.github.com/users/edwardyehuang/followers", "following_url": "https://api.github.com/users/edwardyehuang/following{/other_user}", "gists_url": "https://api.github.com/users/edwardyehuang/gists{/gist_id}", "starred_url": "https://api.github.com/users/edwardyehuang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edwardyehuang/subscriptions", "organizations_url": "https://api.github.com/users/edwardyehuang/orgs", "repos_url": "https://api.github.com/users/edwardyehuang/repos", "events_url": "https://api.github.com/users/edwardyehuang/events{/privacy}", "received_events_url": "https://api.github.com/users/edwardyehuang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 16, "created_at": "2019-07-25T23:20:43Z", "updated_at": "2020-03-16T11:31:32Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/31049", "html_url": "https://github.com/tensorflow/tensorflow/pull/31049", "diff_url": "https://github.com/tensorflow/tensorflow/pull/31049.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/31049.patch"}, "body": "For example, a model included:\r\n      -Conv2D (keras.layer)\r\n      -BatchNorm (Keras.layer)\r\n      -CustomLayer (keras.layer)\r\n      -CustomModel (keras.Model)\r\n          -Conv2D (keras.layer)\r\n          -Conv2D (keras.layer)\r\n          -etc..\r\n      -Conv2D (keras.layer)\r\n\r\nThis function will extract all the layers included the layers in CustomModel or deeper. This is helpful when load a weights by name from functional model h5 file to subclass model."}]