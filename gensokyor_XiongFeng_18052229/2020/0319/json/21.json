[{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28786", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28786/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28786/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28786/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28786", "id": 445229158, "node_id": "MDU6SXNzdWU0NDUyMjkxNTg=", "number": 28786, "title": "catch keyboard interrupt in tf.function", "user": {"login": "celinew1221", "id": 10788062, "node_id": "MDQ6VXNlcjEwNzg4MDYy", "avatar_url": "https://avatars2.githubusercontent.com/u/10788062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/celinew1221", "html_url": "https://github.com/celinew1221", "followers_url": "https://api.github.com/users/celinew1221/followers", "following_url": "https://api.github.com/users/celinew1221/following{/other_user}", "gists_url": "https://api.github.com/users/celinew1221/gists{/gist_id}", "starred_url": "https://api.github.com/users/celinew1221/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/celinew1221/subscriptions", "organizations_url": "https://api.github.com/users/celinew1221/orgs", "repos_url": "https://api.github.com/users/celinew1221/repos", "events_url": "https://api.github.com/users/celinew1221/events{/privacy}", "received_events_url": "https://api.github.com/users/celinew1221/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-05-17T01:54:05Z", "updated_at": "2019-09-24T23:52:48Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 2.0.0-alpha\r\n- Are you willing to contribute it (Yes/No): Maybe depends on workload\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.** keyboard interrupt in tf.function. Currently I cannot keyboard interrupt or break the loop in tf.function made training function.\r\n\r\n**Will this change the current api? How?** Depends on how tf 2.0 works. Might need to change the way c++ and python interface so that we can kill the threads.\r\n\r\n**Who will benefit with this feature?** Developers. We don't need to pkill a training process, restarts it, load checkpoint and do inference. "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28783", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28783/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28783/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28783/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28783", "id": 445201640, "node_id": "MDU6SXNzdWU0NDUyMDE2NDA=", "number": 28783, "title": "TF Lite select tf ops example linker error: libtensorflow-lite.a missing tflite subgraph", "user": {"login": "futuyao", "id": 10975110, "node_id": "MDQ6VXNlcjEwOTc1MTEw", "avatar_url": "https://avatars1.githubusercontent.com/u/10975110?v=4", "gravatar_id": "", "url": "https://api.github.com/users/futuyao", "html_url": "https://github.com/futuyao", "followers_url": "https://api.github.com/users/futuyao/followers", "following_url": "https://api.github.com/users/futuyao/following{/other_user}", "gists_url": "https://api.github.com/users/futuyao/gists{/gist_id}", "starred_url": "https://api.github.com/users/futuyao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/futuyao/subscriptions", "organizations_url": "https://api.github.com/users/futuyao/orgs", "repos_url": "https://api.github.com/users/futuyao/repos", "events_url": "https://api.github.com/users/futuyao/events{/privacy}", "received_events_url": "https://api.github.com/users/futuyao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-05-16T23:33:09Z", "updated_at": "2019-06-03T23:47:16Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS 10.14.5\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: iPhone 7\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: r1.13\r\n- Python version: 2.7\r\n- Installed using virtualenv? pip? conda?: pip\r\n- Bazel version (if compiling from source): 0.19.2\r\n- GCC/Compiler version (if compiling from source): 4.2.1\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\nFollowed guide on [Select TensorFlow operators to use in TensorFlow Lite](https://www.tensorflow.org/lite/guide/ops_select)\r\n\r\nThen tried to run example project `tensorflow/lite/examples/ios/camera/tflite_camera_example_with_select_tf_ops.xcodeproj`\r\n\r\nGave linker errors as below\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nErrors as below:\r\n\r\n> Undefined symbol: tflite::Subgraph::ModifyGraphWithDelegate(_TfLiteDelegate*)\r\n> \r\n> Undefined symbol: tflite::Subgraph::AddTensors(int, int*)\r\n> \r\n> Undefined symbol: tflite::Subgraph::SetTensorParametersReadOnly(int, TfLiteType, char const*, unsigned long, int const*, TfLiteQuantizationParams, char const*, unsigned long, tflite::Allocation const*)\r\n> \r\n> Undefined symbol: tflite::Subgraph::ResetVariableTensors()\r\n> \r\n> Undefined symbol: tflite::Subgraph::Invoke()\r\n> \r\n> Undefined symbol: tflite::Subgraph::ResizeInputTensor(int, std::__1::vector<int, std::__1::allocator<int> > const&)\r\n> \r\n> Undefined symbol: tflite::Subgraph::SetExecutionPlan(std::__1::vector<int, std::__1::allocator<int> > const&)\r\n> \r\n> Undefined symbol: tflite::Subgraph::SetTensorParametersReadWrite(int, TfLiteType, char const*, unsigned long, int const*, TfLiteQuantizationParams, bool)\r\n> \r\n> Undefined symbol: tflite::Subgraph::SetVariables(std::__1::vector<int, std::__1::allocator<int> >)\r\n> \r\n> Undefined symbol: tflite::Subgraph::AddNodeWithParameters(std::__1::vector<int, std::__1::allocator<int> > const&, std::__1::vector<int, std::__1::allocator<int> > const&, char const*, unsigned long, void*, _TfLiteRegistration const*, int*)\r\n> \r\n> Undefined symbol: tflite::Subgraph::AllocateTensors()\r\n> \r\n> Undefined symbol: tflite::Subgraph::SetInputs(std::__1::vector<int, std::__1::allocator<int> >)\r\n> \r\n> Undefined symbol: tflite::Subgraph::UseNNAPI(bool)\r\n> \r\n> Undefined symbol: tflite::Subgraph::SetExternalContext(TfLiteExternalContextType, TfLiteExternalContext*)\r\n> \r\n> Undefined symbol: tflite::Subgraph::SetOutputs(std::__1::vector<int, std::__1::allocator<int> >)\r\n> \r\n> Undefined symbol: tflite::Subgraph::Subgraph(tflite::ErrorReporter*, TfLiteExternalContext**, std::__1::vector<std::__1::unique_ptr<tflite::Subgraph, std::__1::default_delete<tflite::Subgraph> >, std::__1::allocator<std::__1::unique_ptr<tflite::Subgraph, std::__1::default_delete<tflite::Subgraph> > > >*)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28782", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28782/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28782/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28782/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28782", "id": 445193675, "node_id": "MDU6SXNzdWU0NDUxOTM2NzU=", "number": 28782, "title": "[TF2.0] Can't use tf.data.Dataset::cache with distribution strategy", "user": {"login": "lgeiger", "id": 13285808, "node_id": "MDQ6VXNlcjEzMjg1ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/13285808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lgeiger", "html_url": "https://github.com/lgeiger", "followers_url": "https://api.github.com/users/lgeiger/followers", "following_url": "https://api.github.com/users/lgeiger/following{/other_user}", "gists_url": "https://api.github.com/users/lgeiger/gists{/gist_id}", "starred_url": "https://api.github.com/users/lgeiger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lgeiger/subscriptions", "organizations_url": "https://api.github.com/users/lgeiger/orgs", "repos_url": "https://api.github.com/users/lgeiger/repos", "events_url": "https://api.github.com/users/lgeiger/events{/privacy}", "received_events_url": "https://api.github.com/users/lgeiger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 1345373822, "node_id": "MDU6TGFiZWwxMzQ1MzczODIy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:ds-triaged", "name": "stat:ds-triaged", "color": "f2dea7", "default": false, "description": "Internal label for triaging"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-05-16T22:59:05Z", "updated_at": "2020-01-14T06:35:58Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): pip tf-nightly-gpu-2.0-preview\r\n- TensorFlow version (use command below): 2.0.0.dev20190514\r\n- Python version: 3.7.3\r\n- CUDA/cuDNN version: 10 / 7.4.2.24\r\n- GPU model and memory: V100\r\n\r\n**Describe the current behavior**\r\nUsing `tf.data.Dataset::cache` and `tf.distribute.MirroredStrategy()` will fail with `Cache should only be read after it has been completed. [Op:MultiDeviceIteratorInit]` in TF 2.0 nightly.\r\n\r\n**Describe the expected behavior**\r\nUsing `tf-nightly-gpu==1.14.1.dev20190514` graph mode `tf.data` caching works using distribution strategy and doesn't throw an error.\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport tensorflow as tf\r\nimport tensorflow_datasets as tfds\r\n\r\nmnist_train, mnist_test = tfds.load(name='mnist', split=[tfds.Split.TRAIN, tfds.Split.TEST], as_supervised=True, data_dir=\"gs://plumerai/data\")\r\n\r\nstrategy = tf.distribute.MirroredStrategy()\r\n\r\ndef scale(image, label):\r\n  image = tf.cast(image, tf.float32)\r\n  image /= 255\r\n\r\n  return image, label\r\n\r\ntrain_dataset = mnist_train.cache().repeat().map(scale).shuffle(1000).batch(256)\r\ntest_dataset = mnist_test.cache().repeat().map(scale).batch(256)\r\n\r\nwith strategy.scope():\r\n  model = tf.keras.Sequential([\r\n      tf.keras.layers.Conv2D(32, 3, activation='relu', input_shape=(28, 28, 1)),\r\n      tf.keras.layers.MaxPooling2D(),\r\n      tf.keras.layers.Flatten(),\r\n      tf.keras.layers.Dense(64, activation='relu'),\r\n      tf.keras.layers.Dense(10, activation='softmax')\r\n  ])\r\n\r\n  model.compile(loss='sparse_categorical_crossentropy',\r\n                optimizer=tf.keras.optimizers.Adam(),\r\n                metrics=['accuracy'])\r\n\r\nmodel.fit(train_dataset, validation_data=test_dataset, steps_per_epoch=100, validation_steps=10, epochs=10)\r\n```\r\n\r\n**Other info / logs**\r\n```python\r\nFile \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/keras/engine/training.py\", line 646, in fit validation_freq=validation_freq)\r\nFile \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/keras/engine/training_distributed.py\", line 143, in fit_distributed steps_name='steps_per_epoch')\r\nFile \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/keras/engine/training_arrays.py\", line 194, in model_iteration val_iterator = _get_iterator(val_inputs, model._distribution_strategy)\r\nFile \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/keras/engine/training_arrays.py\", line 512, in _get_iterator inputs, distribution_strategy)\r\nFile \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/keras/distribute/distributed_training_utils.py\", line 529, in get_iterator initialize_iterator(iterator, distribution_strategy)\r\nFile \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/keras/distribute/distributed_training_utils.py\", line 535, in initialize_iterator init_op = control_flow_ops.group(iterator.initialize())\r\nFile \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/distribute/input_lib.py\", line 274, in initialize return super(DistributedIteratorV1, self)._initializer\r\nFile \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/distribute/input_lib.py\", line 259, in _initializer init_ops.extend(it.initialize())\r\nFile \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/distribute/input_lib.py\", line 660, in initialize self._iterator._eager_reset() # pylint: disable=protected-access\r\nFile \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/data/ops/multi_device_iterator_ops.py\", line 333, in _eager_reset max_buffer_size=self._max_buffer_size)\r\nFile \"/usr/local/lib/python3.7/dist-packages/tensorflow/python/ops/gen_dataset_ops.py\", line 3118, in multi_device_iterator_init _six.raise_from(_core._status_to_exception(e.code, message), None)\r\nFile \"<string>\", line 3, in raise_from tensorflow.python.framework.errors_impl.InternalError: Cache should only be read after it has been completed. [Op:MultiDeviceIteratorInit]\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28778", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28778/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28778/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28778/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28778", "id": 445129886, "node_id": "MDU6SXNzdWU0NDUxMjk4ODY=", "number": 28778, "title": "TF Lite can't run example project of select tensorflow operators on iOS", "user": {"login": "futuyao", "id": 10975110, "node_id": "MDQ6VXNlcjEwOTc1MTEw", "avatar_url": "https://avatars1.githubusercontent.com/u/10975110?v=4", "gravatar_id": "", "url": "https://api.github.com/users/futuyao", "html_url": "https://github.com/futuyao", "followers_url": "https://api.github.com/users/futuyao/followers", "following_url": "https://api.github.com/users/futuyao/following{/other_user}", "gists_url": "https://api.github.com/users/futuyao/gists{/gist_id}", "starred_url": "https://api.github.com/users/futuyao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/futuyao/subscriptions", "organizations_url": "https://api.github.com/users/futuyao/orgs", "repos_url": "https://api.github.com/users/futuyao/repos", "events_url": "https://api.github.com/users/futuyao/events{/privacy}", "received_events_url": "https://api.github.com/users/futuyao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-05-16T19:49:16Z", "updated_at": "2019-05-24T19:56:45Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS 10.14.5\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: r1.13\r\n- Python version: 2.7\r\n- Installed using virtualenv? pip? conda?: N/A\r\n- Bazel version (if compiling from source): 0.19.2\r\n- GCC/Compiler version (if compiling from source): 4.2.1\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\nFollowing guide: [Select TensorFlow operators to use in TensorFlow Lite](https://www.tensorflow.org/lite/guide/ops_select)\r\n\r\nBuilt with command\r\n`tensorflow/contrib/makefile/build_all_ios_with_tflite.sh -a arm64`\r\n\r\nRan example project in XCode\r\n`tensorflow/lite/examples/ios/camera/tflite_camera_example_with_select_tf_ops.xcodeproj`\r\n\r\nGot a list of 20 errors in cstring that look like\r\n`No member named 'memcpy' in the global namespace`\r\n`No member named 'memmove' in the global namespace; did you mean 'remove'?`\r\n`No member named 'strcpy' in the global namespace`\r\n`No member named 'strncpy' in the global namespace`\r\n\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28773", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28773/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28773/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28773/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28773", "id": 445053350, "node_id": "MDU6SXNzdWU0NDUwNTMzNTA=", "number": 28773, "title": "TensorFlow 1.14 changes Keras callback order relative to model build", "user": {"login": "smatzek", "id": 13350259, "node_id": "MDQ6VXNlcjEzMzUwMjU5", "avatar_url": "https://avatars1.githubusercontent.com/u/13350259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smatzek", "html_url": "https://github.com/smatzek", "followers_url": "https://api.github.com/users/smatzek/followers", "following_url": "https://api.github.com/users/smatzek/following{/other_user}", "gists_url": "https://api.github.com/users/smatzek/gists{/gist_id}", "starred_url": "https://api.github.com/users/smatzek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smatzek/subscriptions", "organizations_url": "https://api.github.com/users/smatzek/orgs", "repos_url": "https://api.github.com/users/smatzek/repos", "events_url": "https://api.github.com/users/smatzek/events{/privacy}", "received_events_url": "https://api.github.com/users/smatzek/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-05-16T16:35:41Z", "updated_at": "2019-05-24T15:24:54Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): RHEL 7.6\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): r1.14 branch built  from source\r\n- TensorFlow version (use command below): r1.14\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nTensorFlow 1.14 changes the relative call order of building the model and the set_model callback in the tf.keras fit_generator path. (As of commit cd701ec in the r1.14 branch).\r\n\r\nThe keras/engine/training.py `_make_train_function` adds the optimizer update ops / aka, the backward prop phase, and fills out the model's graph. Callbacks that need full graph visibility need their `set_model` function called after the full graph is created.\r\n\r\nThe order of the operations are as follows:\r\n\r\ntf.keras fit():  1. `_make_train_function`  2. `set_model`\r\ntf.keras fit_generator():  1. `set_model` 2. `_make_train_function`\r\nkeras_team Keras fit():  1. `_make_train_function`  2. `set_model`\r\nkeras_team Keras fit_generator():  1. `_make_train_function`  2. `set_model`\r\n\r\nThe tf.keras fit_generator() path stands out as being different from the rest.\r\n\r\nCommit https://github.com/tensorflow/tensorflow/commit/a332fea0be8def4aa5985499ad807ef78d029142 fixed this for the non-eager mode case and added a test case to help prevent future regression.  Commit https://github.com/tensorflow/tensorflow/commit/615182adb3d01fd8357e574bd8920c0995c6bbb8#diff-6561418ac6882a842d78dad52731895b regressed this order, and also removed the test case that was intended to catch regressions.\r\n\r\nAnother side effect of the current code is that the `_make_train_function` is called from `model.train_on_batch` so in the fit_generator path this is now being called on every iteration. While the majority of the `_make_train_function` is guarded by a check that won't do actual work, there are somethings in that method that will run and waste cycles on every iteration.\r\n\r\n**Describe the expected behavior**\r\nThe Keras callback `set_model` method should be called after the whole model is populated. \r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28766", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28766/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28766/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28766/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28766", "id": 444930847, "node_id": "MDU6SXNzdWU0NDQ5MzA4NDc=", "number": 28766, "title": "Statefulness in Text generation using a RNN with eager execution", "user": {"login": "ZhiliangWu", "id": 18686697, "node_id": "MDQ6VXNlcjE4Njg2Njk3", "avatar_url": "https://avatars0.githubusercontent.com/u/18686697?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZhiliangWu", "html_url": "https://github.com/ZhiliangWu", "followers_url": "https://api.github.com/users/ZhiliangWu/followers", "following_url": "https://api.github.com/users/ZhiliangWu/following{/other_user}", "gists_url": "https://api.github.com/users/ZhiliangWu/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZhiliangWu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZhiliangWu/subscriptions", "organizations_url": "https://api.github.com/users/ZhiliangWu/orgs", "repos_url": "https://api.github.com/users/ZhiliangWu/repos", "events_url": "https://api.github.com/users/ZhiliangWu/events{/privacy}", "received_events_url": "https://api.github.com/users/ZhiliangWu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-05-16T12:36:31Z", "updated_at": "2019-06-27T19:08:03Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\n\r\nhttps://www.tensorflow.org/tutorials/sequences/text_generation\r\n\r\n## Description of issue (what needs changing):\r\n\r\n### Clear description\r\n\r\n* Two questions regarding the `stateful` defined in the tutorial. \r\n* The input data was originally a long text. It got cut into sequences with length 100, shuffled, and packed into batches of size 64. However, according to the [documentation](https://www.tensorflow.org/api_docs/python/tf/keras/layers/RNN) for the `statefulness`\r\n> You can set RNN layers to be 'stateful', which means that the states\r\ncomputed for the samples in one batch will be reused as initial states\r\nfor the samples in the next batch. This assumes a one-to-one mapping\r\nbetween samples in different successive batches.\r\n\r\nAfter pre-processing the data as discussed above, there is no such one-to-one mapping is not there, i.e. the samples in different batches are independent instead of related. This is confirmed by running the following code after the code for create training batches, which print out the successive samples with index `0` in the first two batches. \r\n```Python\r\nfor input_example, target_example in  dataset.take(2):\r\n  print ('Input data: ', repr(''.join(idx2char[input_example[0, :].numpy()])))\r\n```\r\noutputs\r\n```Python\r\nInput data:  'n that perished vessel the dowry of his\\nsister. But mark how heavily this befell to the\\npoor gentlew'\r\nInput data:  \"y enrich'd\\nWith politic grave counsel; then the king\\nHad virtuous uncles to protect his grace.\\n\\nFirs\"\r\n```\r\n---\r\n* In addition, if `stateful=True`, it is suggested to set `shuffle=False` in the `model.fit()`, which is also missing in the tutorial. \r\n> specify `shuffle=False` when calling fit().\r\n\r\n* The problems above are really confusing and any discussions are welcome. "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28763", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28763/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28763/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28763/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28763", "id": 444871038, "node_id": "MDU6SXNzdWU0NDQ4NzEwMzg=", "number": 28763, "title": "Name of losses.Reduction.SUM_BY_NONZERO_WEIGHTS is misleading", "user": {"login": "hannagabor", "id": 13706250, "node_id": "MDQ6VXNlcjEzNzA2MjUw", "avatar_url": "https://avatars2.githubusercontent.com/u/13706250?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hannagabor", "html_url": "https://github.com/hannagabor", "followers_url": "https://api.github.com/users/hannagabor/followers", "following_url": "https://api.github.com/users/hannagabor/following{/other_user}", "gists_url": "https://api.github.com/users/hannagabor/gists{/gist_id}", "starred_url": "https://api.github.com/users/hannagabor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hannagabor/subscriptions", "organizations_url": "https://api.github.com/users/hannagabor/orgs", "repos_url": "https://api.github.com/users/hannagabor/repos", "events_url": "https://api.github.com/users/hannagabor/events{/privacy}", "received_events_url": "https://api.github.com/users/hannagabor/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-05-16T10:14:54Z", "updated_at": "2019-05-24T22:01:07Z", "closed_at": null, "author_association": "NONE", "body": "**Describe the current behavior**\r\n`losses.Reduction.SUM_BY_NONZERO_WEIGHTS` calculates the mean, not the sum. (The behavior is in sync with the [docs](https://www.tensorflow.org/api_docs/python/tf/losses/Reduction).)\r\n**Describe the expected behavior**\r\nI would expect `losses.Reduction.SUM_BY_NONZERO_WEIGHTS` to calculate the sum, not the mean.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28762", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28762/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28762/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28762/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28762", "id": 444851597, "node_id": "MDU6SXNzdWU0NDQ4NTE1OTc=", "number": 28762, "title": "[tensorflow/docs]Translate variables.md from English to Chinese.", "user": {"login": "Mr-Nineteen", "id": 47240724, "node_id": "MDQ6VXNlcjQ3MjQwNzI0", "avatar_url": "https://avatars0.githubusercontent.com/u/47240724?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mr-Nineteen", "html_url": "https://github.com/Mr-Nineteen", "followers_url": "https://api.github.com/users/Mr-Nineteen/followers", "following_url": "https://api.github.com/users/Mr-Nineteen/following{/other_user}", "gists_url": "https://api.github.com/users/Mr-Nineteen/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mr-Nineteen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mr-Nineteen/subscriptions", "organizations_url": "https://api.github.com/users/Mr-Nineteen/orgs", "repos_url": "https://api.github.com/users/Mr-Nineteen/repos", "events_url": "https://api.github.com/users/Mr-Nineteen/events{/privacy}", "received_events_url": "https://api.github.com/users/Mr-Nineteen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-05-16T09:33:52Z", "updated_at": "2019-05-20T23:16:47Z", "closed_at": null, "author_association": "NONE", "body": "Thank you for submitting a TensorFlow documentation issue. Per our GitHub\r\npolicy, we only address code/doc bugs, performance issues, feature requests, and\r\nbuild/installation issues on GitHub.\r\n\r\nThe TensorFlow docs are open source! To get involved, read the documentation\r\ncontributor guide: https://www.tensorflow.org/community/contribute/docs\r\n\r\n## URL(s) with the issue:\r\n\r\nPlease provide a link to the documentation entry, for example:\r\nhttps://www.tensorflow.org/versions/r2.0/api_docs/python/tf/MyMethod\r\n\r\n## Description of issue (what needs changing):\r\n\r\n### Clear description\r\n\r\nFor example, why should someone use this method? How is it useful?\r\n\r\n### Correct links\r\n\r\nIs the link to the source code correct?\r\n\r\n### Parameters defined\r\n\r\nAre all parameters defined and formatted correctly?\r\n\r\n### Returns defined\r\n\r\nAre return values defined?\r\n\r\n### Raises listed and defined\r\n\r\nAre the errors defined? For example,\r\nhttps://www.tensorflow.org/versions/r2.0/api_docs/python/tf/feature_column/categorical_column_with_vocabulary_file#raises\r\n\r\n### Usage example\r\n\r\nIs there a usage example?\r\n\r\n### Request visuals, if applicable\r\n\r\nAre there currently visuals? If not, will it clarify the content?\r\n\r\n### Submit a pull request?\r\n\r\nAre you planning to also submit a pull request to fix the issue? See the docs\r\ncontributor guide: https://www.tensorflow.org/community/contribute/docs and the\r\ndocs style guide: https://www.tensorflow.org/community/contribute/docs_style\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28757", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28757/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28757/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28757/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28757", "id": 444743852, "node_id": "MDU6SXNzdWU0NDQ3NDM4NTI=", "number": 28757, "title": "voice activity detection implementation", "user": {"login": "delowarcse", "id": 15137793, "node_id": "MDQ6VXNlcjE1MTM3Nzkz", "avatar_url": "https://avatars1.githubusercontent.com/u/15137793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/delowarcse", "html_url": "https://github.com/delowarcse", "followers_url": "https://api.github.com/users/delowarcse/followers", "following_url": "https://api.github.com/users/delowarcse/following{/other_user}", "gists_url": "https://api.github.com/users/delowarcse/gists{/gist_id}", "starred_url": "https://api.github.com/users/delowarcse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/delowarcse/subscriptions", "organizations_url": "https://api.github.com/users/delowarcse/orgs", "repos_url": "https://api.github.com/users/delowarcse/repos", "events_url": "https://api.github.com/users/delowarcse/events{/privacy}", "received_events_url": "https://api.github.com/users/delowarcse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-05-16T04:02:28Z", "updated_at": "2019-05-24T21:54:36Z", "closed_at": null, "author_association": "NONE", "body": "I found that voice activity detection is implemented in the paper \"Small-Footprint Keyword Spotting Using Deep Neural Networks\". But I did not find anything related to voice activity detection in the paper \"Convolutional Neural Networks for Small-footprint Keyword Spotting\".\r\nMy question is that is voice activity detection implemented in this code or not?\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28746", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28746/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28746/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28746/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/28746", "id": 444630510, "node_id": "MDExOlB1bGxSZXF1ZXN0Mjc5MjUyMTI4", "number": 28746, "title": "Add RoiAlign Op", "user": {"login": "samikama", "id": 10539540, "node_id": "MDQ6VXNlcjEwNTM5NTQw", "avatar_url": "https://avatars0.githubusercontent.com/u/10539540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samikama", "html_url": "https://github.com/samikama", "followers_url": "https://api.github.com/users/samikama/followers", "following_url": "https://api.github.com/users/samikama/following{/other_user}", "gists_url": "https://api.github.com/users/samikama/gists{/gist_id}", "starred_url": "https://api.github.com/users/samikama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samikama/subscriptions", "organizations_url": "https://api.github.com/users/samikama/orgs", "repos_url": "https://api.github.com/users/samikama/repos", "events_url": "https://api.github.com/users/samikama/events{/privacy}", "received_events_url": "https://api.github.com/users/samikama/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 522623856, "node_id": "MDU6TGFiZWw1MjI2MjM4NTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/API%20review", "name": "API review", "color": "d4c5f9", "default": false, "description": null}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 1169365682, "node_id": "MDU6TGFiZWwxMTY5MzY1Njgy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:L", "name": "size:L", "color": "adafea", "default": false, "description": "CL Change Size: Large"}, {"id": 474725938, "node_id": "MDU6TGFiZWw0NzQ3MjU5Mzg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stalled", "name": "stalled", "color": "d4c5f9", "default": false, "description": null}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 17, "created_at": "2019-05-15T20:28:17Z", "updated_at": "2020-03-19T01:16:19Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/28746", "html_url": "https://github.com/tensorflow/tensorflow/pull/28746", "diff_url": "https://github.com/tensorflow/tensorflow/pull/28746.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/28746.patch"}, "body": "This PR adds RoIAlign op that calculates FPN boxes as described in arXiv:1703.06870"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28742", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28742/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28742/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28742/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28742", "id": 444575511, "node_id": "MDU6SXNzdWU0NDQ1NzU1MTE=", "number": 28742, "title": "TFLite only slightly faster with GPU on Helio P22", "user": {"login": "munum", "id": 3453724, "node_id": "MDQ6VXNlcjM0NTM3MjQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/3453724?v=4", "gravatar_id": "", "url": "https://api.github.com/users/munum", "html_url": "https://github.com/munum", "followers_url": "https://api.github.com/users/munum/followers", "following_url": "https://api.github.com/users/munum/following{/other_user}", "gists_url": "https://api.github.com/users/munum/gists{/gist_id}", "starred_url": "https://api.github.com/users/munum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/munum/subscriptions", "organizations_url": "https://api.github.com/users/munum/orgs", "repos_url": "https://api.github.com/users/munum/repos", "events_url": "https://api.github.com/users/munum/events{/privacy}", "received_events_url": "https://api.github.com/users/munum/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-05-15T18:12:10Z", "updated_at": "2019-07-26T20:56:44Z", "closed_at": null, "author_association": "NONE", "body": "- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): n/a\r\n- Mobile device: **Xiaomi Redmi 6**\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): r1.13\r\n- Python version: n/a\r\n- Bazel version (if compiling from source): n/a\r\n- GCC/Compiler version (if compiling from source): n/a\r\n- CUDA/cuDNN version: n/a\r\n- GPU model and memory: **PowerVR GE8320**\r\n\r\n**Describe the current behavior**\r\n\r\nRunning the [TFLite Demo](https://github.com/tensorflow/tensorflow/tree/6d28416/tensorflow/lite/java/demo), average inference time for 1 thread is **480ms**, but it's just **370ms** with GPU. With 4 threads, it's **360ms**.\r\n\r\n**Describe the expected behavior**\r\n\r\nI'd expect GPU performance to be (significantly) better than 4-thread CPU. Granted it's not a great GPU, but I'd expect it to be substantially faster than the CPU.\r\n\r\n**Other info / logs**\r\n\r\nXiaomi Redmi 6:\r\n- OS | Android 8.1 (Oreo), planned upgrade to Android 9.0 (Pie)\r\n- Chipset | Mediatek MT6762 Helio P22 (12 nm)\r\n- CPU | Octa-core 2.0 GHz Cortex-A53\r\n- GPU | PowerVR GE8320\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28739", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28739/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28739/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28739/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28739", "id": 444422775, "node_id": "MDU6SXNzdWU0NDQ0MjI3NzU=", "number": 28739, "title": "Assigning to ressource variables with varying shapes violates the shape information of the tensor of which is assigned from.", "user": {"login": "ChristianReinbold", "id": 32750401, "node_id": "MDQ6VXNlcjMyNzUwNDAx", "avatar_url": "https://avatars0.githubusercontent.com/u/32750401?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChristianReinbold", "html_url": "https://github.com/ChristianReinbold", "followers_url": "https://api.github.com/users/ChristianReinbold/followers", "following_url": "https://api.github.com/users/ChristianReinbold/following{/other_user}", "gists_url": "https://api.github.com/users/ChristianReinbold/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChristianReinbold/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChristianReinbold/subscriptions", "organizations_url": "https://api.github.com/users/ChristianReinbold/orgs", "repos_url": "https://api.github.com/users/ChristianReinbold/repos", "events_url": "https://api.github.com/users/ChristianReinbold/events{/privacy}", "received_events_url": "https://api.github.com/users/ChristianReinbold/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ezhulenev", "id": 1174378, "node_id": "MDQ6VXNlcjExNzQzNzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1174378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezhulenev", "html_url": "https://github.com/ezhulenev", "followers_url": "https://api.github.com/users/ezhulenev/followers", "following_url": "https://api.github.com/users/ezhulenev/following{/other_user}", "gists_url": "https://api.github.com/users/ezhulenev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezhulenev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezhulenev/subscriptions", "organizations_url": "https://api.github.com/users/ezhulenev/orgs", "repos_url": "https://api.github.com/users/ezhulenev/repos", "events_url": "https://api.github.com/users/ezhulenev/events{/privacy}", "received_events_url": "https://api.github.com/users/ezhulenev/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ezhulenev", "id": 1174378, "node_id": "MDQ6VXNlcjExNzQzNzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1174378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezhulenev", "html_url": "https://github.com/ezhulenev", "followers_url": "https://api.github.com/users/ezhulenev/followers", "following_url": "https://api.github.com/users/ezhulenev/following{/other_user}", "gists_url": "https://api.github.com/users/ezhulenev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezhulenev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezhulenev/subscriptions", "organizations_url": "https://api.github.com/users/ezhulenev/orgs", "repos_url": "https://api.github.com/users/ezhulenev/repos", "events_url": "https://api.github.com/users/ezhulenev/events{/privacy}", "received_events_url": "https://api.github.com/users/ezhulenev/received_events", "type": "User", "site_admin": false}, {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-05-15T12:56:02Z", "updated_at": "2019-06-05T06:54:53Z", "closed_at": null, "author_association": "NONE", "body": "Hi,\r\nI ran into problems when assigning to variables from tensors with dynamic shape. In the end, it boiled down to using resource variables and having a strided slice tensor from which to assign from, see the upcoming MWE. When assigning to resource variables from a strided slice tensor, the shape information of the tensor becomes corrupt.\r\n\r\n**System information**\r\n- Unexpected behaviour in custom code (minimum working example see below)\r\n- Windows 10\r\n- TensorFlow installed from pip wheels\r\n- TensorFlow version:\r\n  - tf.version.VERSION = 1.13.1\r\n  - tf.version.GIT_VERSION = b'unknown'\r\n  - tf.version.COMPILER_VERSION = MSVC 190024215\r\n  - Sanity check: array([1])\r\n- Python version: Python 3.6.7 (default, Feb 28 2019, 07:28:18) [MSC v.1900 64 bit (AMD64)] on win32\r\n- also occurs without GPU support\r\n\r\n\r\n**Describe the current behavior**\r\n\r\nOutput is\r\n> *results: [1 2] [array([1]), array([1, 2]), array([2])]\r\n> var_value_before [3]\r\n> var_value_after [1 2]\r\n\r\nNote the contradiction that the tensor with elements [1, 2] has shape [1]\r\n\r\n**Describe the expected behavior**\r\n\r\nExpected output\r\n> *results: [1 2] [array([**2**]), array([1, 2]), array([2])]\r\n> var_value_before [3]\r\n> var_value_after [1 2]\r\n\r\n**Code to reproduce the issue**\r\n\r\n```\r\nimport tensorflow as tf\r\n\r\ndef mwe():\r\n  u = tf.range(3, 4)   # Some tensor of shape (1,)\r\n  v = tf.range(1, 3)   # Some tensor of shape (2,)\r\n\r\n  # Forget about shape of v (Otherwise assign_op will not build with use_resource=True)\r\n  v = tf.placeholder_with_default(v, (None,))\r\n\r\n  # Random stride (leaving this out will not result in error)\r\n  value_to_assign = v[:]\r\n  var = tf.Variable(u, use_resource=True, validate_shape=False)\r\n  assign_op = tf.assign(var, value_to_assign, validate_shape=False)\r\n\r\n  observed_ops = [tf.shape(value_to_assign), value_to_assign, tf.shape(v)]\r\n\r\n  with tf.Session() as sess:\r\n    tf.initializers.global_variables().run()\r\n    var_value_before = sess.run(var)\r\n    results = sess.run([assign_op, observed_ops])\r\n    var_value_after = sess.run(var)\r\n    print('*results:', *results)\r\n    print('var_value_before', var_value_before)\r\n    print('var_value_after', var_value_after)\r\n\r\nimport os\r\nos.environ['CUDA_VISIBLE_DEVICES'] = '-1'\r\nmwe()\r\n```\r\n\r\n**Note**\r\nEither `use_resource=False`, leaving out the assign_op when running the session or leaving out the stride op `v[:]` will yield the expected behaviour. This may be tested with the following routine:\r\n\r\n```\r\ndef mwe_options():\r\n  for use_resource in [0, 1]:\r\n    for additional_stride in [0, 1]:\r\n      u = tf.range(3, 4)   # Some tensor of shape (1,)\r\n      v = tf.range(1, 3)   # Some tensor of shape (2,)\r\n\r\n      # Forget about shape of v (Otherwise assign_op will not build with use_resource=True)\r\n      v = tf.placeholder_with_default(v, (None,))\r\n\r\n      # Random stride (leaving this out will not result in error)\r\n      value_to_assign = v[:] if additional_stride else v\r\n      var = tf.Variable(u, use_resource=use_resource, validate_shape=False)\r\n      assign_op = tf.assign(var, value_to_assign, validate_shape=False)\r\n\r\n      observed_ops = [tf.shape(value_to_assign), value_to_assign]\r\n\r\n      with tf.Session() as sess:\r\n        tf.initializers.global_variables().run()\r\n        for add_assign_op in [0, 1]:\r\n          if add_assign_op:\r\n            _, result = sess.run([assign_op, observed_ops])\r\n          else:\r\n            result = sess.run(observed_ops)\r\n          var_value = sess.run(var)\r\n          print(f'use_resource={use_resource}, additional_stride={additional_stride}, add_assign_op={add_assign_op}: {result}, var = {var_value}')\r\n```\r\nOutput:\r\n\r\n> use_resource=0, additional_stride=0, add_assign_op=0: [array([2]), array([1, 2])], var = [3]\r\n> use_resource=0, additional_stride=0, add_assign_op=1: [array([2]), array([1, 2])], var = [1 2]\r\n> use_resource=0, additional_stride=1, add_assign_op=0: [array([2]), array([1, 2])], var = [3]\r\n> use_resource=0, additional_stride=1, add_assign_op=1: [array([2]), array([1, 2])], var = [1 2]\r\n> use_resource=1, additional_stride=0, add_assign_op=0: [array([2]), array([1, 2])], var = [3]\r\n> use_resource=1, additional_stride=0, add_assign_op=1: [array([2]), array([1, 2])], var = [1 2]\r\n> use_resource=1, additional_stride=1, add_assign_op=0: [array([2]), array([1, 2])], var = [3]\r\n> use_resource=1, additional_stride=1, add_assign_op=1: [array([1]), array([1, 2])], var = [1 2]"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28730", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28730/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28730/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28730/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28730", "id": 444320565, "node_id": "MDU6SXNzdWU0NDQzMjA1NjU=", "number": 28730, "title": "use GradientTape to compute gradient cost all memory", "user": {"login": "jjjjjie", "id": 44559653, "node_id": "MDQ6VXNlcjQ0NTU5NjUz", "avatar_url": "https://avatars0.githubusercontent.com/u/44559653?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jjjjjie", "html_url": "https://github.com/jjjjjie", "followers_url": "https://api.github.com/users/jjjjjie/followers", "following_url": "https://api.github.com/users/jjjjjie/following{/other_user}", "gists_url": "https://api.github.com/users/jjjjjie/gists{/gist_id}", "starred_url": "https://api.github.com/users/jjjjjie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jjjjjie/subscriptions", "organizations_url": "https://api.github.com/users/jjjjjie/orgs", "repos_url": "https://api.github.com/users/jjjjjie/repos", "events_url": "https://api.github.com/users/jjjjjie/events{/privacy}", "received_events_url": "https://api.github.com/users/jjjjjie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jaingaurav", "id": 84372, "node_id": "MDQ6VXNlcjg0Mzcy", "avatar_url": "https://avatars1.githubusercontent.com/u/84372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaingaurav", "html_url": "https://github.com/jaingaurav", "followers_url": "https://api.github.com/users/jaingaurav/followers", "following_url": "https://api.github.com/users/jaingaurav/following{/other_user}", "gists_url": "https://api.github.com/users/jaingaurav/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaingaurav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaingaurav/subscriptions", "organizations_url": "https://api.github.com/users/jaingaurav/orgs", "repos_url": "https://api.github.com/users/jaingaurav/repos", "events_url": "https://api.github.com/users/jaingaurav/events{/privacy}", "received_events_url": "https://api.github.com/users/jaingaurav/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jaingaurav", "id": 84372, "node_id": "MDQ6VXNlcjg0Mzcy", "avatar_url": "https://avatars1.githubusercontent.com/u/84372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaingaurav", "html_url": "https://github.com/jaingaurav", "followers_url": "https://api.github.com/users/jaingaurav/followers", "following_url": "https://api.github.com/users/jaingaurav/following{/other_user}", "gists_url": "https://api.github.com/users/jaingaurav/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaingaurav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaingaurav/subscriptions", "organizations_url": "https://api.github.com/users/jaingaurav/orgs", "repos_url": "https://api.github.com/users/jaingaurav/repos", "events_url": "https://api.github.com/users/jaingaurav/events{/privacy}", "received_events_url": "https://api.github.com/users/jaingaurav/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-05-15T09:06:23Z", "updated_at": "2019-05-31T08:41:16Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):Linux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):pip3\r\n- TensorFlow version (use command below): v1.13.1-0-g6612da8951' 1.13.1\r\n- Python version:3.5.2\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 10.0.130/ 7.5.0\r\n- GPU model and memory: GeForce GTX 1060 5GB\r\n\r\n**Describe the current behavior**\r\n\r\nWhen i use tf.GradientTape to compute gradients, it will use all gpu memory even though I use GPUoption in session.\r\n\r\n**Describe the expected behavior**\r\n\r\nGPU memory should be controled\r\n\r\n**Code to reproduce the issue**\r\n\r\n```\r\nimport tensorflow as tf\r\n\r\ndef mul(x):\r\n    y = tf.layers.dense(x, 3)\r\n    return y\r\n\r\nx = tf.placeholder(tf.float32, [None, 2])\r\n\r\nwith tf.GradientTape() as gg:\r\n    gg.watch(x)\r\n    f_eval = mul(x)\r\n    grad = gg.gradient(f_eval, x)\r\ndel gg\r\n\r\n\r\ngpu_options = tf.GPUOptions(per_process_gpu_memory_fraction=0.2)\r\nsess = tf.InteractiveSession(config=tf.ConfigProto(gpu_options=gpu_options))\r\nsess.run(tf.global_variables_initializer())\r\nimport time\r\ntime.sleep(5)\r\n```\r\n\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n> Observing memory usage, it always use more than 4100MB memory because my GPU only has 5G memory.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28718", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28718/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28718/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28718/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28718", "id": 444167462, "node_id": "MDU6SXNzdWU0NDQxNjc0NjI=", "number": 28718, "title": "Transfer Learning Using Pretrained ConvNets tutorial should use sigmoid activation", "user": {"login": "jasonzhang2022", "id": 6558151, "node_id": "MDQ6VXNlcjY1NTgxNTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/6558151?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasonzhang2022", "html_url": "https://github.com/jasonzhang2022", "followers_url": "https://api.github.com/users/jasonzhang2022/followers", "following_url": "https://api.github.com/users/jasonzhang2022/following{/other_user}", "gists_url": "https://api.github.com/users/jasonzhang2022/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasonzhang2022/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasonzhang2022/subscriptions", "organizations_url": "https://api.github.com/users/jasonzhang2022/orgs", "repos_url": "https://api.github.com/users/jasonzhang2022/repos", "events_url": "https://api.github.com/users/jasonzhang2022/events{/privacy}", "received_events_url": "https://api.github.com/users/jasonzhang2022/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-05-14T23:19:57Z", "updated_at": "2020-01-08T17:58:23Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\nhttps://www.tensorflow.org/alpha/tutorials/images/transfer_learning\r\n\r\n## Description of issue (what needs changing):\r\nclassification head should use sigmoid activation.\r\n### Clear description\r\nThe tutorial has this paragraph:\r\n\r\nYou don't need an activation function here because this prediction will be treated as a logit, or a raw prediciton value. Positive numbers predict class 1, negative numbers predict class 0.\r\n\r\nI think we need sigmoid activation. \r\nLater we use loss=\"binary_crossentropy\" in model.compile. binary_crossentropy by default has from_logits=False and expect a probability as is documented [here ](https://www.tensorflow.org/versions/r2.0/api_docs/python/tf/losses/BinaryCrossentropy) and [here](https://www.tensorflow.org/api_docs/python/tf/keras/losses/BinaryCrossentropy)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28712", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28712/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28712/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28712/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28712", "id": 444015206, "node_id": "MDU6SXNzdWU0NDQwMTUyMDY=", "number": 28712, "title": "tensorflowjs_converter install fails due to tf-nightly-2.0-preview missing from Python 3.7", "user": {"login": "MonarkA", "id": 15193283, "node_id": "MDQ6VXNlcjE1MTkzMjgz", "avatar_url": "https://avatars3.githubusercontent.com/u/15193283?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MonarkA", "html_url": "https://github.com/MonarkA", "followers_url": "https://api.github.com/users/MonarkA/followers", "following_url": "https://api.github.com/users/MonarkA/following{/other_user}", "gists_url": "https://api.github.com/users/MonarkA/gists{/gist_id}", "starred_url": "https://api.github.com/users/MonarkA/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MonarkA/subscriptions", "organizations_url": "https://api.github.com/users/MonarkA/orgs", "repos_url": "https://api.github.com/users/MonarkA/repos", "events_url": "https://api.github.com/users/MonarkA/events{/privacy}", "received_events_url": "https://api.github.com/users/MonarkA/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1093464312, "node_id": "MDU6TGFiZWwxMDkzNDY0MzEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:others", "name": "type:others", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2019-05-14T16:37:28Z", "updated_at": "2019-05-24T13:45:09Z", "closed_at": null, "author_association": "NONE", "body": "**Describe the problem**\r\n\r\nCommand used:\r\ntensorflowjs_converter --input_format=tf_frozen_model --output_node_names=final_result  output/saved_model.pb web_model\r\n\r\nGetting below error:\r\ntensorflowjs_converter: command not found\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28709", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28709/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28709/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28709/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28709", "id": 443991811, "node_id": "MDU6SXNzdWU0NDM5OTE4MTE=", "number": 28709, "title": "defun + random + addition = explode", "user": {"login": "amilsted", "id": 1241345, "node_id": "MDQ6VXNlcjEyNDEzNDU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1241345?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amilsted", "html_url": "https://github.com/amilsted", "followers_url": "https://api.github.com/users/amilsted/followers", "following_url": "https://api.github.com/users/amilsted/following{/other_user}", "gists_url": "https://api.github.com/users/amilsted/gists{/gist_id}", "starred_url": "https://api.github.com/users/amilsted/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amilsted/subscriptions", "organizations_url": "https://api.github.com/users/amilsted/orgs", "repos_url": "https://api.github.com/users/amilsted/repos", "events_url": "https://api.github.com/users/amilsted/events{/privacy}", "received_events_url": "https://api.github.com/users/amilsted/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 736653459, "node_id": "MDU6TGFiZWw3MzY2NTM0NTk=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:eager", "name": "comp:eager", "color": "0052cc", "default": false, "description": ""}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-05-14T15:46:52Z", "updated_at": "2019-06-06T01:56:12Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution: Colab or WSL Ubuntu 18.04\r\n- Mobile device if the issue happens on mobile device:\r\n- TensorFlow installed from: binary\r\n- TensorFlow version: 1.13.1 or 1.14.1-dev20190514\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n**Describe the current behavior**\r\nUsing `defun` in eager mode, this very simple function seems to cause havoc. In particular, the first run takes a *long* time and a *lot* of memory, both scaling seemingly exponentially with the `n_iter` parameter below.\r\n```python\r\nimport time\r\nimport tensorflow as tf\r\ntf.enable_v2_behavior()\r\n\r\ndef f(D, num_iter):\r\n    x = tf.random_uniform((D,))\r\n    for i in range(num_iter):\r\n        x = x + x\r\n    return x\r\n\r\n# DANGER: Increasing this much beyond 20 may use up all your memory...\r\nn_iter = 22\r\n\r\nt0 = time.time()\r\nf(10, n_iter)\r\nprint(time.time() - t0)  # order ms\r\n\r\nf_g = tf.contrib.eager.defun(f)\r\nfor i in range(3):\r\n    t0 = time.time()\r\n    f_g(10, n_iter)\r\n    print(time.time() - t0)  # around 30s first run for n_iter=22! After that it's fast.\r\n```\r\nReplacing `x = tf.random_uniform((D,))` with `x = tf.ones((D,))` eliminates the problem, as does replacing `x = x + x` with `x = 2*x`.\r\nIn graph mode the problem does not occur:\r\n```python\r\nimport time\r\nimport tensorflow as tf\r\n\r\ndef graph_fun(node):\r\n    with tf.Session() as sesh:\r\n        for i in range(3):\r\n            t0 = time.time()\r\n            sesh.run(node)\r\n            print(time.time() - t0)\r\n\r\ndef f(D, num_iter):\r\n    x = tf.random_uniform((D,))\r\n    for i in range(num_iter):\r\n        x = x + x\r\n    return x\r\n\r\nn_iter = 100\r\n\r\ntf.reset_default_graph()\r\nt0 = time.time()\r\nfres = f(10, n_iter)\r\nprint(time.time() - t0)  # around 0.4s\r\n\r\ngraph_fun(fres)  # around 0.6 s first run, then essentially zero.\r\n```\r\n\r\n**Describe the expected behavior**\r\nThis very simple defun'd function should execute quickly, including the graph-building and graph optimization steps.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28705", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28705/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28705/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28705/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28705", "id": 443938913, "node_id": "MDU6SXNzdWU0NDM5Mzg5MTM=", "number": 28705, "title": "How to build Tensorflow C++ API with Visual Studio 2017", "user": {"login": "rounakskm", "id": 31090080, "node_id": "MDQ6VXNlcjMxMDkwMDgw", "avatar_url": "https://avatars2.githubusercontent.com/u/31090080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rounakskm", "html_url": "https://github.com/rounakskm", "followers_url": "https://api.github.com/users/rounakskm/followers", "following_url": "https://api.github.com/users/rounakskm/following{/other_user}", "gists_url": "https://api.github.com/users/rounakskm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rounakskm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rounakskm/subscriptions", "organizations_url": "https://api.github.com/users/rounakskm/orgs", "repos_url": "https://api.github.com/users/rounakskm/repos", "events_url": "https://api.github.com/users/rounakskm/events{/privacy}", "received_events_url": "https://api.github.com/users/rounakskm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "meteorcloudy", "id": 4171702, "node_id": "MDQ6VXNlcjQxNzE3MDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/4171702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meteorcloudy", "html_url": "https://github.com/meteorcloudy", "followers_url": "https://api.github.com/users/meteorcloudy/followers", "following_url": "https://api.github.com/users/meteorcloudy/following{/other_user}", "gists_url": "https://api.github.com/users/meteorcloudy/gists{/gist_id}", "starred_url": "https://api.github.com/users/meteorcloudy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meteorcloudy/subscriptions", "organizations_url": "https://api.github.com/users/meteorcloudy/orgs", "repos_url": "https://api.github.com/users/meteorcloudy/repos", "events_url": "https://api.github.com/users/meteorcloudy/events{/privacy}", "received_events_url": "https://api.github.com/users/meteorcloudy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "meteorcloudy", "id": 4171702, "node_id": "MDQ6VXNlcjQxNzE3MDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/4171702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meteorcloudy", "html_url": "https://github.com/meteorcloudy", "followers_url": "https://api.github.com/users/meteorcloudy/followers", "following_url": "https://api.github.com/users/meteorcloudy/following{/other_user}", "gists_url": "https://api.github.com/users/meteorcloudy/gists{/gist_id}", "starred_url": "https://api.github.com/users/meteorcloudy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meteorcloudy/subscriptions", "organizations_url": "https://api.github.com/users/meteorcloudy/orgs", "repos_url": "https://api.github.com/users/meteorcloudy/repos", "events_url": "https://api.github.com/users/meteorcloudy/events{/privacy}", "received_events_url": "https://api.github.com/users/meteorcloudy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-05-14T14:11:28Z", "updated_at": "2020-02-06T19:46:09Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution : Windows 10 Home \r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 2.0\r\n- Python version: 3.7\r\n- Installed using virtualenv? pip? conda?: N/A\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): Visual C++\r\n- CUDA/cuDNN version: 7.4\r\n- GPU model and memory: RTX 2080 ti\r\n\r\n\r\n\r\n**Description of the problem**\r\nI have created a Mask-RCNN model and need to deploy it inside a C++ application. I could not find any guide to do it for TF 2.0 so after looking around I found that we can save the model as a Tensorflow SavedModel and then load the model to predict (forward pass) using Tensorflow C++ API. \r\nBut the problem is I cannot find a way to get Tensorflow C++ API working with Visual Studio 2017. \r\n\r\nI tried the steps outlined by https://joe-antognini.github.io/machine-learning/build-windows-tf\r\nBut it uses Cmake which is not supported by the Tesnorflow C++ API.\r\n\r\nCould anyone please point me to a guide/resource that can help me solve this problem.\r\n\r\nOr could you suggest any alternative where I could call my python model (forward pass only) from the C++ application. \r\n\r\n\r\n**Using CMake**\r\n\r\nThis is what I got when I used the guide above ->\r\n\r\n[Executed command] ->  cmake .. -A x64 -DCMAKE_BUILD_TYPE=Release -DSWIG_EXECUTABLE=\"C:\\Users\\Soumya Mohanty\\swig\\swigwin-4.0.0\\swig.exe\" -DPYTHON_EXECUTABLE=\"C:\\Anaconda3\\python.exe\" -DPYTHON_LIBRARIES=\"C:\\Anaconda3\\libs\\python3.lib\" -DPYTHON_INCLUDE_DIR=\"C:\\Anaconda3\\include\" -DNUMPY_INCLUDE_DIR=\"C:\\Anaconda3\\Lib\\site-packages\\numpy\"\r\n\r\nError Message:\r\n\r\n-- Building for: Visual Studio 15 2017\r\nCMake Warning at CMakeLists.txt:9 (message):\r\nYour current cmake generator is set to use 32 bit toolset architecture.\r\nThis may cause \"compiler out of heap space\" errors when building. Consider\r\nusing the flag -Thost=x64 when running cmake. Ignore this if you are on\r\nCMake GUI.\r\n-- Selecting Windows SDK version 10.0.17134.0 to target Windows 10.0.14393.\r\n-- The C compiler identification is MSVC 19.22.27706.96\r\n-- The CXX compiler identification is MSVC 19.22.27706.96\r\n-- Check for working C compiler: C:/Program Files (x86)/Microsoft Visual Studio/2017/Enterprise/VC/Tools/MSVC/14.14.26428/bin/Hostx64/x64/cl.exe\r\n-- Check for working C compiler: C:/Program Files (x86)/Microsoft Visual Studio/2017/Enterprise/VC/Tools/MSVC/14.14.26428/bin/Hostx64/x64/cl.exe -- works\r\n-- Detecting C compiler ABI info\r\n-- Detecting C compiler ABI info - done\r\n-- Detecting C compile features\r\n-- Detecting C compile features - done\r\n-- Check for working CXX compiler: C:/Program Files (x86)/Microsoft Visual Studio/2017/Enterprise/VC/Tools/MSVC/14.14.26428/bin/Hostx64/x64/cl.exe\r\n-- Check for working CXX compiler: C:/Program Files (x86)/Microsoft Visual Studio/2017/Enterprise/VC/Tools/MSVC/14.14.26428/bin/Hostx64/x64/cl.exe -- works\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n-- Detecting CXX compile features\r\n-- Detecting CXX compile features - done\r\n-- Performing Test COMPILER_OPT_ARCH_NATIVE_SUPPORTED\r\n-- Performing Test COMPILER_OPT_ARCH_NATIVE_SUPPORTED - Failed\r\n-- Performing Test MSVC_OPENMP_SUPPORT\r\n-- Performing Test MSVC_OPENMP_SUPPORT - Success\r\n-- Performing Test COMPILER_OPT_WIN_CPU_SIMD_SUPPORTED\r\n-- Performing Test COMPILER_OPT_WIN_CPU_SIMD_SUPPORTED - Success\r\n-- D:/Tensorflow/build_x64/abseil_cpp/src/abseil_cpp_build\r\n-- Found PythonInterp: C:/ProgramData/Anaconda3/python.exe (found version \"3.6.5\")\r\n-- Found PythonLibs: C:/ProgramData/Anaconda3/libs/python36.lib (found version \"3.6.5\")\r\nCMake Error at tf_python.cmake:217 (message):\r\nPython module not found: tensorflow/contrib/tpu/ops\r\nCall Stack (most recent call first):\r\nCMakeLists.txt:612 (include)\r\n\r\nThis fails because the new Tensorflow repo doesn't have an \"ops\" file in the  tpu folder. \r\n\r\n**Using Bazel**\r\nI have been trying to build tensorflow.dll using Bazel as explained in #24885 but that too is not working. I am running command :  bazel build --config=opt //tensorflow:tensorflow.dll\r\n\r\nError message:\r\nC:\\tensorflow> bazel build --config=opt //tensorflow:tensorflow.dll\r\nINFO: Build options --copt and --define have changed, discarding analysis cache.\r\nINFO: Analysed target //tensorflow:tensorflow.dll (1 packages loaded, 8366 targets configured).\r\nINFO: Found 1 target...\r\nERROR: C:/users/soumya mohanty/_bazel_soumya mohanty/xv6zejqw/external/gif_archive/BUILD.bazel:45:1: Executing genrule @gif_archive//:windows_unistd_h failed (Exit -1). Note: Remote connection/protocol failed with: execution failed: bin failed: error executing command\r\n  cd C:/users/soumya mohanty/_bazel_soumya mohanty/xv6zejqw/execroot/org_tensorflow\r\n  SET PATH=C:\\msys64\\usr;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.0\\bin;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.0\\libnvvp;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Windows\\System32\\OpenSSH\\;C:\\Program Files\\NVIDIA Corporation\\NVIDIA NGX;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Program Files\\NVIDIA Corporation\\NVIDIA NvDLISR;C:\\Program Files\\Git\\cmd;C:\\cmake\\cmake-3.14.3-win64-x64\\bin;C:\\Anaconda3\\envs\\Deep_Learning;C:\\Anaconda3\\envs\\Deep_Learning\\Scripts;C:\\toolkit\\Bazel-0.24.0;C:\\msys64;C:\\msys64\\usr\\bin;C:\\Anaconda3\\envs\\Deep_Learning\\Scripts;C:\\Users\\Soumya Mohanty\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\Soumya Mohanty\\AppData\\Local\\Programs\\Microsoft VS Code\\bin\r\n    SET PYTHON_BIN_PATH=C:/Anaconda3/envs/Deep_Learning/python.exe\r\n    SET PYTHON_LIB_PATH=C:/Anaconda3/envs/Deep_Learning/lib/site-packages\r\n    SET TF_DOWNLOAD_CLANG=0\r\n    SET TF_NEED_CUDA=0\r\n    SET TF_NEED_OPENCL_SYCL=0\r\n    SET TF_NEED_ROCM=0\r\n  C:/msys64/usr/bin -c source external/bazel_tools/tools/genrule/genrule-setup.sh; touch bazel-out/x64_windows-opt/genfiles/external/gif_archive/windows/unistd.h\r\nExecution platform: @bazel_tools//platforms:host_platform\r\nAction failed to execute: java.io.IOException: ERROR: src/main/native/windows/processes-jni.cc(454): CreateProcessW(\"C:\\msys64\\usr\\bin\" -c \"source external/bazel_tools/tools/genrule/genrule-setup.sh; touch bazel-out/x64_windows-opt/genfiles/external/gif_archive/windows/unistd.h\"): Access is denied.\r\n\r\nTarget //tensorflow:tensorflow.dll failed to build\r\nINFO: Elapsed time: 1.492s, Critical Path: 0.02s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully\r\n\r\nThere is a space in the user name and that is causing the cd C:/users/soumya mohanty/_bazel_soumya mohanty/xv6zejqw/execroot/org_tensorflow command to fail.\r\nBut I am running as Administrator so I dont really know how this user name is coming into play.\r\n\r\n\r\n**Using Bazel with another user(name does not have spaces)**\r\nI tried using another user which does not have a space in the user name but then I get a different error:\r\n\r\nERROR: C:/users/tensorflowuser/_bazel_tensorflowuser/xv6zejqw/external/nsync/BUILD:463:1: C++ compilation of rule '@nsync//:nsync_cpp' failed (Exit 2): cl.exe failed: error executing command\r\n  cd C:/users/tensorflowuser/_bazel_tensorflowuser/xv6zejqw/execroot/org_tensorflow\r\n  SET INCLUDE=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\ucrt;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\shared;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\winrt;\r\n    SET PATH=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\BIN\\amd64;C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319;C:\\Windows\\Microsoft.NET\\Framework64\\;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\x86;;C:\\Windows\\system32\r\n    SET PWD=/proc/self/cwd\r\n    SET PYTHON_BIN_PATH=C:/Anaconda3/envs/Deep_Learning/python.exe\r\n    SET PYTHON_LIB_PATH=C:/Anaconda3/envs/Deep_Learning/lib/site-packages\r\n    SET TEMP=C:\\Users\\TENSOR~1\\AppData\\Local\\Temp\r\n    SET TF_DOWNLOAD_CLANG=0\r\n    SET TF_NEED_CUDA=0\r\n    SET TF_NEED_OPENCL_SYCL=0\r\n    SET TF_NEED_ROCM=0\r\n    SET TMP=C:\\Users\\TENSOR~1\\AppData\\Local\\Temp\r\n  C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/bin/amd64/cl.exe /nologo /DCOMPILER_MSVC /DNOMINMAX /D_WIN32_WINNT=0x0601 /D_CRT_SECURE_NO_DEPRECATE /D_CRT_SECURE_NO_WARNINGS /bigobj /Zm500 /EHsc /wd4351 /wd4291 /wd4250 /wd4996 /Iexternal/nsync /Ibazel-out/x64_windows-opt/genfiles/external/nsync /Ibazel-out/x64_windows-opt/bin/external/nsync /Iexternal/nsync/public /Ibazel-out/x64_windows-opt/genfiles/external/nsync/public /Ibazel-out/x64_windows-opt/bin/external/nsync/public /showIncludes /MD /O2 /Oy- /DNDEBUG /wd4117 -D__DATE__=\"redacted\" -D__TIMESTAMP__=\"redacted\" -D__TIME__=\"redacted\" /Gy /Gw -w -DWIN32_LEAN_AND_MEAN y /TP -DNSYNC_ATOMIC_CPP11 -DNSYNC_USE_CPP11_TIMEPOINT -I./external/nsync//platform/c++11 -I./external/nsync//platform/win32 -I./external/nsync//platform/msvc -I./external/nsync//platform/x86_64 -I./external/nsync//public -I./external/nsync//internal -I./external/nsync//platform/posix /Fobazel-out/x64_windows-opt/bin/external/nsync/_objs/nsync_cpp/nsync_semaphore_mutex.obj /c external/nsync/platform/c++11/src/nsync_semaphore_mutex.cc\r\nExecution platform: @bazel_tools//platforms:host_platform\r\ny\r\nc1xx: fatal error C1083: Cannot open source file: 'y': No such file or directory\r\nGenerating Code...\r\nTarget //tensorflow:tensorflow.dll failed to build\r\nINFO: Elapsed time: 90.347s, Critical Path: 5.10s\r\nINFO: 120 processes: 120 local.\r\nFAILED: Build did NOT complete successfully\r\n\r\n**Update**\r\nbazel build //tensorflow:libtensorflow_cc.so works and builds successfully. \r\n\r\nAnd after running the above command the build for bazel build //tensorflow:tensorflow.dll also works successfully\r\n\r\nBut I have no idea where to find it and how to link it to Visual Studio  2017, so I could write some Tensorflow code in C++ and load my SavedModel \r\n \r\nThank you"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28698", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28698/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28698/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28698/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28698", "id": 443853559, "node_id": "MDU6SXNzdWU0NDM4NTM1NTk=", "number": 28698, "title": "ConvLSTM2D - Include feedback loop from c_tm1 (carry state)", "user": {"login": "cgebbe", "id": 4158176, "node_id": "MDQ6VXNlcjQxNTgxNzY=", "avatar_url": "https://avatars1.githubusercontent.com/u/4158176?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cgebbe", "html_url": "https://github.com/cgebbe", "followers_url": "https://api.github.com/users/cgebbe/followers", "following_url": "https://api.github.com/users/cgebbe/following{/other_user}", "gists_url": "https://api.github.com/users/cgebbe/gists{/gist_id}", "starred_url": "https://api.github.com/users/cgebbe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cgebbe/subscriptions", "organizations_url": "https://api.github.com/users/cgebbe/orgs", "repos_url": "https://api.github.com/users/cgebbe/repos", "events_url": "https://api.github.com/users/cgebbe/events{/privacy}", "received_events_url": "https://api.github.com/users/cgebbe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-05-14T11:10:20Z", "updated_at": "2019-05-29T07:03:28Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.13\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\nCurrently, the ConvLSTM2D layer does not include any feedback from C_tm1 (the carry state from the previous timestamp), see https://github.com/tensorflow/tensorflow/blob/r1.13/tensorflow/python/keras/layers/convolutional_recurrent.py#L717\r\n\r\nThis stands in contrast to the description of the original paper which is cited as a reference: https://arxiv.org/abs/1506.04214v1 .\r\n\r\nThe missing feedback loop is already documented \"The current implementation does not include the feedback loop on the cells output\". However, is there a reason that this feedback was omitted? If not, I don't see why it should be different from the paper....\r\n\r\n**Will this change the current api? How?** \r\nWe might add a boolean flag to either incorporate such feedback or not.\r\n\r\n**Who will benefit with this feature?**\r\nAny researcher looking for an implementation exactly like the original paper.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28673", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28673/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28673/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28673/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28673", "id": 443558526, "node_id": "MDU6SXNzdWU0NDM1NTg1MjY=", "number": 28673, "title": "Unsupported Operation (MEAN) while trying to apply GpuDelegate to tflite ", "user": {"login": "Mr-Grieves", "id": 19175336, "node_id": "MDQ6VXNlcjE5MTc1MzM2", "avatar_url": "https://avatars2.githubusercontent.com/u/19175336?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mr-Grieves", "html_url": "https://github.com/Mr-Grieves", "followers_url": "https://api.github.com/users/Mr-Grieves/followers", "following_url": "https://api.github.com/users/Mr-Grieves/following{/other_user}", "gists_url": "https://api.github.com/users/Mr-Grieves/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mr-Grieves/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mr-Grieves/subscriptions", "organizations_url": "https://api.github.com/users/Mr-Grieves/orgs", "repos_url": "https://api.github.com/users/Mr-Grieves/repos", "events_url": "https://api.github.com/users/Mr-Grieves/events{/privacy}", "received_events_url": "https://api.github.com/users/Mr-Grieves/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-05-13T19:15:56Z", "updated_at": "2019-05-25T06:45:03Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- I am writing a custom Android app, built in Android Studio using the method mentioned [here](https://www.tensorflow.org/lite/performance/gpu#android_with_android_studio)\r\n- Host system: Linux Ubuntu 16.04\r\n- Target Device: Android s8+\r\n- tflite installed from (source or binary): nightly AAR (org.tensorflow:tensorflow-lite:0.0.0-nightly)\r\n- tflite-gpu installed from (source or binary): nightly AAR (org.tensorflow:tensorflow-lite-gpu:0.0.0-nightly)\r\n- GPU model and memory: Adreno 540\r\n\r\n**Describe the current behavior**\r\nWhen I attempt to load my .tflite model on the Android (after applying the GpuDelegate as described [here](https://www.tensorflow.org/lite/performance/gpu#android)), it fails saying that 'MEAN' is an unsupported operation (see traceback below)\r\n\r\n**Describe the expected behavior**\r\nThe net loads and runs fine if I do not attempt to apply the GPU delegate before the attempting to load it. The only difference in the code is the following lines:\r\n```\r\nc.delegate = new GpuDelegate();\r\nc.tfliteOptions.addDelegate(c.delegate);\r\n```\r\n\r\n**Code to reproduce the issue**\r\nUnfortunately I cannot provide my .tflite file, but it obviously contains a 'MEAN' operation. Is there a script anywhere in the tflite repo that prints out all the operations contained in a .tflite file? I looked briefly but was unable to find one.\r\n\r\n**Other info / logs**\r\n```\r\n05-13 12:09:56.101 3348-3348/org.qus.viewqualTFLite E/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: org.qus.viewqualTFLite, PID: 3348\r\n    java.lang.RuntimeException: Unable to start activity ComponentInfo{org.qus.viewqualTFLite/org.qus.viewqualTFLite.ViewQualActivity}: java.lang.IllegalArgumentException: Internal error: Failed to apply delegate: Next operations are not supported by GPU delegate:\r\n    MEAN: Operation is not supported.\r\n    First 43 operations will run on the GPU, and the remaining 7 on the CPU.TfLiteGpuDelegate Prepare: Tensor ref has unsupported number of dimensions: 5Node number 50 (TfLiteGpuDelegate) failed to prepare.\r\n    \r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2955)\r\n        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3030)\r\n        at android.app.ActivityThread.-wrap11(Unknown Source:0)\r\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1696)\r\n        at android.os.Handler.dispatchMessage(Handler.java:105)\r\n        at android.os.Looper.loop(Looper.java:164)\r\n        at android.app.ActivityThread.main(ActivityThread.java:6938)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:327)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1374)\r\n     Caused by: java.lang.IllegalArgumentException: Internal error: Failed to apply delegate: Next operations are not supported by GPU delegate:\r\n    MEAN: Operation is not supported.\r\n    First 43 operations will run on the GPU, and the remaining 7 on the CPU.TfLiteGpuDelegate Prepare: Tensor ref has unsupported number of dimensions: 5Node number 50 (TfLiteGpuDelegate) failed to prepare.\r\n    \r\n        at org.tensorflow.lite.NativeInterpreterWrapper.applyDelegate(Native Method)\r\n        at org.tensorflow.lite.NativeInterpreterWrapper.init(NativeInterpreterWrapper.java:83)\r\n        at org.tensorflow.lite.NativeInterpreterWrapper.<init>(NativeInterpreterWrapper.java:60)\r\n        at org.tensorflow.lite.Interpreter.<init>(Interpreter.java:224)\r\n        at org.qus.viewqualTFLite.TensorFlowQUSRunner.create(TensorFlowQUSRunner.java:154)\r\n        at org.qus.viewqualTFLite.ViewQualActivity.onCreate(ViewQualActivity.java:200)\r\n        at android.app.Activity.performCreate(Activity.java:7183)\r\n        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1220)\r\n        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2908)\r\n            ... 9 more\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28663", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28663/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28663/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28663/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28663", "id": 443316463, "node_id": "MDU6SXNzdWU0NDMzMTY0NjM=", "number": 28663, "title": "meta_optimizer.cc layout failed on frozen_graph", "user": {"login": "sleighsoft", "id": 9438971, "node_id": "MDQ6VXNlcjk0Mzg5NzE=", "avatar_url": "https://avatars3.githubusercontent.com/u/9438971?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sleighsoft", "html_url": "https://github.com/sleighsoft", "followers_url": "https://api.github.com/users/sleighsoft/followers", "following_url": "https://api.github.com/users/sleighsoft/following{/other_user}", "gists_url": "https://api.github.com/users/sleighsoft/gists{/gist_id}", "starred_url": "https://api.github.com/users/sleighsoft/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sleighsoft/subscriptions", "organizations_url": "https://api.github.com/users/sleighsoft/orgs", "repos_url": "https://api.github.com/users/sleighsoft/repos", "events_url": "https://api.github.com/users/sleighsoft/events{/privacy}", "received_events_url": "https://api.github.com/users/sleighsoft/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097545273, "node_id": "MDU6TGFiZWwxMDk3NTQ1Mjcz", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:grappler", "name": "comp:grappler", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-05-13T10:14:31Z", "updated_at": "2019-08-14T18:46:34Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "TF 2.0 preview gpu\r\nPython 3.6.3\r\n\r\nImporting a frozen graph def leads to an error: `... meta_optimizer.cc:486] layout failed: Invalid argument: Invalid graph: Frame ids for node ...`\r\n\r\n**What I did**\r\nCheckpoint: http://download.tensorflow.org/models/inception_v3_2016_08_28.tar.gz\r\n\r\nRun in `research/slim/` found here: https://github.com/tensorflow/models/tree/master/research/slim\r\n1. GraphDef:\r\n```python export_inference_graph.py --model_name=inception_v3 --output_file=MODELS/inception_v3_inf_graph.pb```\r\n2. Obtain a copy of: https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/tools/freeze_graph.py and place it in `research/slim`\r\n3. Create Frozen Graph:\r\n```python freeze_graph.py --input_graph=MODELS/inception_v3_inf_graph.pb --input_checkpoint=MODELS/inception_v3.ckpt --input_binary=true --output_graph=MODELS/frozen_inception_v3.pb --output_node_names=InceptionV3/Predictions/Reshape```\r\n4. Pack into `tar.gz`.\r\n\r\nI then imported the frozen graph with\r\n```python\r\nimport tensorflow as tf\r\nimport tarfile\r\nimport os\r\n\r\nfrom tensorflow.core.framework import graph_pb2\r\nfrom tensorflow.python.framework import importer\r\n\r\nINCEPTION_V3_FILE_NAME = 'frozen_inception_v3.tar.gz'\r\nINCEPTION_V3_FROZEN_GRAPH = 'frozen_inception_v3.pb'\r\n# Shape[None x 299 x 299 x 3]\r\nINCEPTION_V3_INPUT = 'input:0'\r\n# Shape[None x 1 x 1 x 2048]\r\nINCEPTION_V3_OUTPUT = 'InceptionV3/Logits/AvgPool_1a_8x8/AvgPool:0'\r\n\r\n\r\ndef graph_def_from_tarball(filename, tar_filename):\r\n    with tarfile.open(tar_filename, 'r:gz') as tar:\r\n        proto_str = tar.extractfile(filename).read()\r\n    return graph_pb2.GraphDef.FromString(proto_str)\r\n\r\n\r\ngraph_def = graph_def_from_tarball(\r\n    INCEPTION_V3_FROZEN_GRAPH,\r\n    INCEPTION_V3_FILE_NAME\r\n)\r\n\r\n\r\n@tf.function\r\ndef run_classifier(images):\r\n\r\n    def classifier_fn(images):\r\n        input_map = {INCEPTION_V3_INPUT: images}\r\n        output_tensor = [INCEPTION_V3_OUTPUT]\r\n        classifier_outputs = importer.import_graph_def(\r\n            graph_def,\r\n            input_map,\r\n            output_tensor,\r\n            'InceptionV3'\r\n        )\r\n        return classifier_outputs[0]\r\n\r\n    logits = tf.map_fn(\r\n        fn=classifier_fn,\r\n        elems=tf.expand_dims(images, 0),\r\n        parallel_iterations=1,\r\n        back_prop=False,\r\n        swap_memory=True,\r\n        dtype=tf.float32,\r\n        name='RunClassifier')\r\n\r\n    logits = tf.concat(tf.unstack(logits), 0)\r\n    return logits\r\n\r\n\r\nimages = tf.random.normal([1, 299, 299, 3])\r\n\r\nr = run_classifier(images)\r\nprint(r)\r\n\r\n```\r\n\r\nError message (the node it errors on varies):\r\n```\r\nE tensorflow/core/grappler/optimizers/meta_optimizer.cc:486] layout failed: Invalid argument: Invalid graph: Frame ids for node RunClassifier/while/body/_1/InceptionV3/InceptionV3/Mixed_6b/Branch_2/Conv2d_0b_7x1/BatchNorm/moving_mean does not match frame ids for it's fanout RunClassifier/while/body/_1/InceptionV3/InceptionV3/InceptionV3/Mixed_6b/Branch_2/Conv2d_0b_7x1/BatchNorm/FusedBatchNorm/Mul2\r\n```\r\nSometimes it is:\r\n```\r\nE tensorflow/core/grappler/optimizers/meta_optimizer.cc:502] layout failed: Invalid argument: Invalid graph: Frame ids for node RunClassifier/while/body/_1/InceptionV3/InceptionV3/Mixed_6c/Branch_1/Conv2d_0a_1x1/BatchNorm/beta does not match frame ids for it's fanout RunClassifier/while/body/_1/InceptionV3/InceptionV3/InceptionV3/Mixed_6c/Branch_1/Conv2d_0a_1x1/BatchNorm/FusedBatchNorm/Offset\r\n```\r\n\r\n**What I expect**\r\nNo error or some better description of what went wrong.\r\nNote: The imported graph def works, it just throws this error and it is unclear to me if it does the right thing considering the error message."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28601", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28601/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28601/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28601/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28601", "id": 442748619, "node_id": "MDU6SXNzdWU0NDI3NDg2MTk=", "number": 28601, "title": "Request for public APIs or alternatives: TF-Addons", "user": {"login": "seanpmorgan", "id": 18154355, "node_id": "MDQ6VXNlcjE4MTU0MzU1", "avatar_url": "https://avatars3.githubusercontent.com/u/18154355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/seanpmorgan", "html_url": "https://github.com/seanpmorgan", "followers_url": "https://api.github.com/users/seanpmorgan/followers", "following_url": "https://api.github.com/users/seanpmorgan/following{/other_user}", "gists_url": "https://api.github.com/users/seanpmorgan/gists{/gist_id}", "starred_url": "https://api.github.com/users/seanpmorgan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/seanpmorgan/subscriptions", "organizations_url": "https://api.github.com/users/seanpmorgan/orgs", "repos_url": "https://api.github.com/users/seanpmorgan/repos", "events_url": "https://api.github.com/users/seanpmorgan/events{/privacy}", "received_events_url": "https://api.github.com/users/seanpmorgan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 522623856, "node_id": "MDU6TGFiZWw1MjI2MjM4NTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/API%20review", "name": "API review", "color": "d4c5f9", "default": false, "description": null}, {"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}, {"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-05-10T14:30:29Z", "updated_at": "2019-06-24T17:11:54Z", "closed_at": null, "author_association": "MEMBER", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n**System information**\r\n- TensorFlow version (you are using): TF 2.0\r\n\r\nAs part of our effort to make [tensorflow/addons](https://github.com/tensorflow/addons) independent of internal TensorFlow core APIs we've identified several things that we cannot find public API alternatives for; or would like to discuss other options. One such option is to copy the code statically into addons, but for anything that is likely to change in the future this isn't great.\r\n\r\ncc @karmel \r\n\r\n## Testing\r\nWe heavily depend on testing decorators that are not exposed in the public API.\r\n\r\n* [tensorflow.python.framework.test_util.run_all_in_graph_and_eager_modes](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/framework/test_util.py#L893)\r\n* [tensorflow.python.framework.test_util.run_in_graph_and_eager_modes](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/framework/test_util.py#L957)\r\n* [tensorflow.python.keras.keras_parameterized.run_all_keras_modes](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/keras/keras_parameterized.py#L176)\r\n* [tensorflow.python.keras.testing_utils.layer_test](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/keras/testing_utils.py#L71)\r\n    * `layer_test` has been very helpful for catching serialization issues and other problems with our custom layers.\r\n* [tensorflow.python.framework.test_util.run_deprecated_v1](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/framework/test_util.py#L1128)\r\n     * `run_deprecated_v1` can probably be statically copied over? We should be looking to move away from this anyhow.\r\n\r\n## Keras\r\n* [tensorflow.python.keras.losses.LossFunctionWrapper](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/keras/losses.py#L177)\r\n     * `LossFunctionWrapper` is used to convert our loss functions to a Keras Loss. It seems extensively used in core repository, but there is no API. Should we be refactoring our functions to inherit from base Loss? And if so why not do that internally as well?\r\n* [tensorflow.python.keras.engine.base_layer_utils.mark_checked](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/keras/engine/base_layer_utils.py#L414)\r\n     * This looks like we could easily re-create it using tf.nest. Just want to confirm that this isn't expected to used outside of TF often.\r\n \r\n\r\n## RNN Ops\r\n* [tensorflow.python.ops. rnn._transpose_batch_time](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/rnn.py#L43)\r\n* [tensorflow.python.ops. rnn_cell_impl.assert_like_rnncell](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/rnn_cell_impl.py#L75)\r\n* [tensorflow.python.ops. rnn_cell_impl._zero_state_tensors](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/rnn_cell_impl.py#L171)\r\n\r\n## Control Flow\r\n* [tensorflow.python.ops.control_flow_util.GetContainingXLAContext](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/control_flow_util.py#L200)\r\n* [tensorflow.python.ops.control_flow_util.GetContainingWhileContext](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/control_flow_util.py#L178)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28563", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28563/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28563/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28563/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28563", "id": 442369406, "node_id": "MDU6SXNzdWU0NDIzNjk0MDY=", "number": 28563, "title": "TFLite GPU delegate produces very different results", "user": {"login": "hoonkai", "id": 14197204, "node_id": "MDQ6VXNlcjE0MTk3MjA0", "avatar_url": "https://avatars0.githubusercontent.com/u/14197204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hoonkai", "html_url": "https://github.com/hoonkai", "followers_url": "https://api.github.com/users/hoonkai/followers", "following_url": "https://api.github.com/users/hoonkai/following{/other_user}", "gists_url": "https://api.github.com/users/hoonkai/gists{/gist_id}", "starred_url": "https://api.github.com/users/hoonkai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hoonkai/subscriptions", "organizations_url": "https://api.github.com/users/hoonkai/orgs", "repos_url": "https://api.github.com/users/hoonkai/repos", "events_url": "https://api.github.com/users/hoonkai/events{/privacy}", "received_events_url": "https://api.github.com/users/hoonkai/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 16, "created_at": "2019-05-09T18:22:52Z", "updated_at": "2019-07-31T11:45:32Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution: Linux Ubuntu 16.04)\r\n- Mobile device if the issue happens on mobile device: LG V30 Android 8.0.0\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): 0.0.0-gpu-experimental\r\n- Python version: 3.6.5\r\n\r\n**Describe the current behavior**\r\n\r\nWhen DeepLab [mobilenetv2_coco_voc_trainaug](http://download.tensorflow.org/models/deeplabv3_mnv2_pascal_train_aug_2018_01_29.tar.gz) is run on a sample image using GPU delegate, the result is significantly different to that generated using CPU. The TFLite model was converted using:\r\n\r\n```\r\ntflite_convert \\\r\n--output_file= mobilenetv2_coco_voc_trainaug.tflite \\\r\n--graph_def_file=$FROZEN_GRAPH \\\r\n--input_arrays=sub_7 \\\r\n--output_arrays=ResizeBilinear_3 \\\r\n--inference_type=FLOAT \\\r\n--inference_input_type=FLOAT\r\n```\r\nAnd, here's the [TFLite model](https://drive.google.com/file/d/1rlD4uBxKegUuWVPBzllFVTQXlJTNb1g0/view?usp=sharing) used.\r\n\r\nCPU gives the following (using random colours):\r\n\r\n![Screenshot_2019-05-10-13-30-19](https://user-images.githubusercontent.com/14197204/57501503-2438c900-732b-11e9-930d-0f9ba51451fe.png)\r\n\r\n\r\nGPU delegate gives the following (using random colours):\r\n\r\n![Screenshot_2019-05-10-13-29-13](https://user-images.githubusercontent.com/14197204/57501509-2733b980-732b-11e9-824c-bb9c360926ee.png)\r\n\r\nBasically, all pixels here are (wrongly) identified to be of the same class (at index 0) because the scores for class 0 are always the highest.\r\n\r\nSimilarly, if [mobilenetv2_ade20k_train](http://download.tensorflow.org/models/deeplabv3_mnv2_ade20k_train_2018_12_03.tar.gz) is used, the two also give very different results:\r\n\r\nCPU gives the following (using random colours):\r\n\r\n![Screenshot_2019-05-10-04-10-59](https://user-images.githubusercontent.com/14197204/57530071-c4b5da00-7379-11e9-94f1-2d87282eb9eb.png)\r\n\r\n\r\nGPU delegate gives the following (using random colours):\r\n\r\n![Screenshot_2019-05-10-04-09-41](https://user-images.githubusercontent.com/14197204/57530083-cc757e80-7379-11e9-859e-41804569b851.png)\r\n\r\nHere's the [TFLite model](https://drive.google.com/file/d/1RdHs85WPxL1u0TUlPHwCqdY6KOn5XuYe/view?usp=sharing) used.\r\n\r\nIndeed, the models use operations like `SPACE_TO_BATCH`, but as far as I know these operations should only affect speed performance.\r\n\r\n**Describe the expected behavior**\r\n\r\nCPU and GPU delegate should produce the same masks."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28527", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28527/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28527/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28527/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28527", "id": 441859651, "node_id": "MDU6SXNzdWU0NDE4NTk2NTE=", "number": 28527, "title": "tfdbg and tf.data API:  Inconsistency with handling dataset iterators' OutOfRangeError", "user": {"login": "CountingClouds", "id": 6634049, "node_id": "MDQ6VXNlcjY2MzQwNDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/6634049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CountingClouds", "html_url": "https://github.com/CountingClouds", "followers_url": "https://api.github.com/users/CountingClouds/followers", "following_url": "https://api.github.com/users/CountingClouds/following{/other_user}", "gists_url": "https://api.github.com/users/CountingClouds/gists{/gist_id}", "starred_url": "https://api.github.com/users/CountingClouds/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CountingClouds/subscriptions", "organizations_url": "https://api.github.com/users/CountingClouds/orgs", "repos_url": "https://api.github.com/users/CountingClouds/repos", "events_url": "https://api.github.com/users/CountingClouds/events{/privacy}", "received_events_url": "https://api.github.com/users/CountingClouds/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097548274, "node_id": "MDU6TGFiZWwxMDk3NTQ4Mjc0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tfdbg", "name": "comp:tfdbg", "color": "0052cc", "default": false, "description": "tf debugger"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-05-08T18:04:25Z", "updated_at": "2019-05-13T20:03:10Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):  Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):  Mac OS Mojave v10.14.4\r\n- TensorFlow installed from (source or binary):  Binary (PIP)\r\n- TensorFlow version (use command below):  pip install tensorflow==1.13.1\r\n- Python version:  3.6.2\r\n- CUDA/cuDNN version:  N/A (found bug on CPU version)\r\n\r\nprint(tf.GIT_VERSION, tf.VERSION):  ==>  'v1.13.0-rc2-5-g6612da8951' 1.13.1\r\n\r\n\r\n**Describe the current behavior**\r\nDifferent behavior while using tfbdg responding to catching OutOfRangeError required for iteratively looping on dataset iterators from the tf.data API.  Using tfdbg command  'run -t 100', we get execution as normally expected.  Using tfbdg command 'run -f has_inf_or_nan', we get a cascade of errors.\r\n\r\n**Describe the expected behavior**\r\nRunning tfbdg with a filter vs running without a filter produces the same code errors when dealing with catching OutOfRangeErrors.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\nfrom tensorflow.python import debug as tf_debug\r\n\r\ndataset = tf.data.Dataset.range(3)\r\niterator = dataset.make_initializable_iterator()\r\nnext_element = iterator.get_next()\r\nresult = tf.add(next_element, next_element)\r\n\r\nwith tf.Session() as sess:\r\n\r\n  sess = tf_debug.LocalCLIDebugWrapperSession(sess)\r\n\r\n  sess.run(iterator.initializer)\r\n  while(True):\r\n    try:\r\n      output = sess.run(result)\r\n      print(output)\r\n    except tf.errors.OutOfRangeError:\r\n      print(\"End of dataset\")\r\n      break\r\n```\r\n\r\n**Other info / logs**\r\nFYI: This code snippit is a condensed version of a similarly-structured larger project I am working with; in that larger project (which I am unable to condensely reproduce at this time) the difference between running with tfbdg with a filter produces error 'OutOfRangeError is not iterable' and halts execution whereas tfdbg running without a filter does not and executes normally as intended (ie. slightly different than the discrepency displayed in the code snippet above)."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28521", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28521/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28521/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28521/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28521", "id": 441719007, "node_id": "MDU6SXNzdWU0NDE3MTkwMDc=", "number": 28521, "title": "LSTM vs Conv2D, tf-nightly-gpu (CUDNN_STATUS_INTERNAL_ERROR)", "user": {"login": "007fred50", "id": 25218874, "node_id": "MDQ6VXNlcjI1MjE4ODc0", "avatar_url": "https://avatars1.githubusercontent.com/u/25218874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/007fred50", "html_url": "https://github.com/007fred50", "followers_url": "https://api.github.com/users/007fred50/followers", "following_url": "https://api.github.com/users/007fred50/following{/other_user}", "gists_url": "https://api.github.com/users/007fred50/gists{/gist_id}", "starred_url": "https://api.github.com/users/007fred50/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/007fred50/subscriptions", "organizations_url": "https://api.github.com/users/007fred50/orgs", "repos_url": "https://api.github.com/users/007fred50/repos", "events_url": "https://api.github.com/users/007fred50/events{/privacy}", "received_events_url": "https://api.github.com/users/007fred50/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-05-08T12:51:02Z", "updated_at": "2020-01-03T00:40:10Z", "closed_at": null, "author_association": "NONE", "body": "Hello,\r\n\r\ninfo:\r\ntf-nightly-gpu (1.14.1.dev20190508)\r\ncuda 10.0\r\ncuDNN v7.4.1\r\nRTX 2080\r\nubuntu 16.04\r\n\r\nI'm trying to execute some code. (ML)\r\n\r\ni'm useing LSTM and i get no error !\r\n\r\ni'm useing Conv2D and i get this error here:\r\n`2019-05-08 14:45:09.120400: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcublas.so.10.0\r\n2019-05-08 14:45:09.724859: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudnn.so.7\r\n2019-05-08 14:45:10.964612: E tensorflow/stream_executor/cuda/cuda_dnn.cc:329] Could not create cudnn handle: CUDNN_STATUS_INTERNAL_ERROR\r\n2019-05-08 14:45:10.967118: E tensorflow/stream_executor/cuda/cuda_dnn.cc:329] Could not create cudnn handle: CUDNN_STATUS_INTERNAL_ERROR\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 55, in <module>\r\n    model.fit(x, y, epochs=1, batch_size=n_batch)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/engine/training.py\", line 802, in fit\r\n    steps_name='steps_per_epoch')\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/engine/training_arrays.py\", line 357, in model_iteration\r\n    batch_outs = f(ins_batch)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/backend.py\", line 3180, in __call__\r\n    run_metadata=self.run_metadata)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/client/session.py\", line 1456, in __call__\r\n    run_metadata_ptr)\r\ntensorflow.python.framework.errors_impl.UnknownError: 2 root error(s) found.\r\n  (0) Unknown: Failed to get convolution algorithm. This is probably because cuDNN failed to initialize, so try looking to see if a warning log message was printed above.\r\n\t [[{{node conv2d/Conv2D}}]]\r\n\t [[loss/mul/_93]]\r\n  (1) Unknown: Failed to get convolution algorithm. This is probably because cuDNN failed to initialize, so try looking to see if a warning log message was printed above.\r\n\t [[{{node conv2d/Conv2D}}]]\r\n0 successful operations.\r\n0 derived errors ignored.`\r\n\r\ni think there are some problem with Conv2D on GPU.\r\n\r\nCan some one help me ?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28498", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28498/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28498/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28498/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28498", "id": 441522375, "node_id": "MDU6SXNzdWU0NDE1MjIzNzU=", "number": 28498, "title": "cyclic graph is not supported?", "user": {"login": "framsc", "id": 18387040, "node_id": "MDQ6VXNlcjE4Mzg3MDQw", "avatar_url": "https://avatars2.githubusercontent.com/u/18387040?v=4", "gravatar_id": "", "url": "https://api.github.com/users/framsc", "html_url": "https://github.com/framsc", "followers_url": "https://api.github.com/users/framsc/followers", "following_url": "https://api.github.com/users/framsc/following{/other_user}", "gists_url": "https://api.github.com/users/framsc/gists{/gist_id}", "starred_url": "https://api.github.com/users/framsc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/framsc/subscriptions", "organizations_url": "https://api.github.com/users/framsc/orgs", "repos_url": "https://api.github.com/users/framsc/repos", "events_url": "https://api.github.com/users/framsc/events{/privacy}", "received_events_url": "https://api.github.com/users/framsc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097545273, "node_id": "MDU6TGFiZWwxMDk3NTQ1Mjcz", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:grappler", "name": "comp:grappler", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-05-08T02:29:25Z", "updated_at": "2019-09-24T23:57:02Z", "closed_at": null, "author_association": "NONE", "body": "Please correct me if I am wrong.\r\nI am building cyclic graph. However cyclic graph is not supported in tensorflow. \r\n\r\n**System information**\r\n- TensorFlow version: 2.0.0-alpha0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Who will benefit with this feature?**\r\ntf is more expressive with cyclic graph. tf.while can be build with cyclic graph with conditional node.  Recursion, such as https://stackoverflow.com/questions/43129225/python-recursive-tensorflow-fibonacci-number-calculation, can be written easily.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28496", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28496/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28496/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28496/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28496", "id": 441517412, "node_id": "MDU6SXNzdWU0NDE1MTc0MTI=", "number": 28496, "title": "TF_LoadLibrary in c++ when loading resampler.so", "user": {"login": "mwsunshine", "id": 13763085, "node_id": "MDQ6VXNlcjEzNzYzMDg1", "avatar_url": "https://avatars3.githubusercontent.com/u/13763085?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mwsunshine", "html_url": "https://github.com/mwsunshine", "followers_url": "https://api.github.com/users/mwsunshine/followers", "following_url": "https://api.github.com/users/mwsunshine/following{/other_user}", "gists_url": "https://api.github.com/users/mwsunshine/gists{/gist_id}", "starred_url": "https://api.github.com/users/mwsunshine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mwsunshine/subscriptions", "organizations_url": "https://api.github.com/users/mwsunshine/orgs", "repos_url": "https://api.github.com/users/mwsunshine/repos", "events_url": "https://api.github.com/users/mwsunshine/events{/privacy}", "received_events_url": "https://api.github.com/users/mwsunshine/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 1166103538, "node_id": "MDU6TGFiZWwxMTY2MTAzNTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/contrib", "name": "contrib", "color": "5319e7", "default": false, "description": "Anything that comes under contrib directory"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "kayzhu", "id": 1530877, "node_id": "MDQ6VXNlcjE1MzA4Nzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1530877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kayzhu", "html_url": "https://github.com/kayzhu", "followers_url": "https://api.github.com/users/kayzhu/followers", "following_url": "https://api.github.com/users/kayzhu/following{/other_user}", "gists_url": "https://api.github.com/users/kayzhu/gists{/gist_id}", "starred_url": "https://api.github.com/users/kayzhu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kayzhu/subscriptions", "organizations_url": "https://api.github.com/users/kayzhu/orgs", "repos_url": "https://api.github.com/users/kayzhu/repos", "events_url": "https://api.github.com/users/kayzhu/events{/privacy}", "received_events_url": "https://api.github.com/users/kayzhu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "kayzhu", "id": 1530877, "node_id": "MDQ6VXNlcjE1MzA4Nzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1530877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kayzhu", "html_url": "https://github.com/kayzhu", "followers_url": "https://api.github.com/users/kayzhu/followers", "following_url": "https://api.github.com/users/kayzhu/following{/other_user}", "gists_url": "https://api.github.com/users/kayzhu/gists{/gist_id}", "starred_url": "https://api.github.com/users/kayzhu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kayzhu/subscriptions", "organizations_url": "https://api.github.com/users/kayzhu/orgs", "repos_url": "https://api.github.com/users/kayzhu/repos", "events_url": "https://api.github.com/users/kayzhu/events{/privacy}", "received_events_url": "https://api.github.com/users/kayzhu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-05-08T02:04:42Z", "updated_at": "2020-02-13T12:00:20Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source \r\n- TensorFlow version (use command below):1.7.0\r\n- Python version: 3.5\r\n- Bazel version (if compiling from source): 1.10.0\r\n- GCC/Compiler version (if compiling from source): 5.4.0\r\n- CUDA/cuDNN version:n/a\r\n- GPU model and memory:n/a\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nI freeze a ckpt file into a pb file in python and want to load it in C++. Since the pb file includes tf.contrib.resampler, it fails loading the model saying resampler op is not registered.\r\nI would like to load _resampler_ops.so generated by bazel to fix the bug ( I am not sure am I doing the right thing or not, if not, what should I do to fix this bug?). TF_LoadLibrary(\"tensorflow-1.7.0/bazel-bin/tensorflow/contrib/resampler/python/ops/_resampler_ops.so\r\n\")\r\nthe return status is False.\r\nI also tried the path:/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/resampler/python/ops/_resampler_ops.so\r\nthe error is the same: load library fails.\r\nThen I tried to rebuild tensorflow using --config=monolithic\uff0c and load /usr/local/lib/python3.5/dist-packages/tensorflow/contrib/resampler/python/ops/_resampler_ops.so. \r\nthe error is: segmentation fault; core dumped.\r\n\r\n**Describe the expected behavior**\r\nI suppose the TF_LoadLibrary should work and fix the non-registration error.\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\nstring graph_name = argv[1];// name.pb\r\n\tSession *session;\r\n\tStatus status = NewSession(SessionOptions(), &session);\r\n\tif (!status.ok())\r\n\t{\r\n\t\tcout << \"create session wrong: \"<< status.ToString() << endl;\r\n\t\treturn -1;\r\n\t}\r\n\tGraphDef graph_def;\r\n\t//read model:\r\n\tif (!ReadBinaryProto(Env::Default(), graph_name, &graph_def).ok())\r\n\t{\r\n\t\tcout << \"Read model(pb) failed!\" << endl;\r\n\t\treturn -1;\r\n\t}\r\nTF_Status* status_1 = TF_NewStatus();\r\n\tTF_LoadLibrary(\"tensorflow-1.7.0/bazel-bin/tensorflow/contrib/resampler/python/ops/_resampler_ops.so\", status_1);\r\n\tif (TF_GetCode(status_1) != TF_OK) {\r\n\t\tcout << \"load lib wrong\" << endl;\r\n\t}\r\n\tTF_DeleteStatus(status_1);\r\n\tstatus = session->Create(graph_def);\r\n\tif (!status.ok())\r\n\t{\r\n\t\tcout << \"create graph wrong: \" << status.ToString() << endl;\r\n\t\treturn -1;\r\n\t}\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28485", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28485/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28485/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28485/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28485", "id": 441359802, "node_id": "MDU6SXNzdWU0NDEzNTk4MDI=", "number": 28485, "title": "Supporting control flow in TensorFlow Lite", "user": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, {"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 37, "created_at": "2019-05-07T17:53:38Z", "updated_at": "2020-03-04T09:01:28Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "This is a tracking ticket for supporting generalized control flow in TensorFlow Lite. See also the [RFC](https://github.com/tensorflow/community/pull/83). \r\n\r\nAt this moment, if you see missing ops like \"Switch\", \"Merge\", \"Enter\", \"Exit\", \"NextIteration\" when converting a TensorFlow model to TensorFlow Lite, it means the graph contains control flows, and there's no way to convert it. \r\n\r\nWe're working hard to enable this feature. Updates will be posted here. "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28470", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28470/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28470/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28470/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28470", "id": 441157524, "node_id": "MDU6SXNzdWU0NDExNTc1MjQ=", "number": 28470, "title": "[nGraph] mkldnn::relu_forward and mkldnn::relu_backward error: expected type-specifier", "user": {"login": "byronyi", "id": 2613663, "node_id": "MDQ6VXNlcjI2MTM2NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/2613663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/byronyi", "html_url": "https://github.com/byronyi", "followers_url": "https://api.github.com/users/byronyi/followers", "following_url": "https://api.github.com/users/byronyi/following{/other_user}", "gists_url": "https://api.github.com/users/byronyi/gists{/gist_id}", "starred_url": "https://api.github.com/users/byronyi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/byronyi/subscriptions", "organizations_url": "https://api.github.com/users/byronyi/orgs", "repos_url": "https://api.github.com/users/byronyi/repos", "events_url": "https://api.github.com/users/byronyi/events{/privacy}", "received_events_url": "https://api.github.com/users/byronyi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1104829434, "node_id": "MDU6TGFiZWwxMTA0ODI5NDM0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:mkl", "name": "comp:mkl", "color": "0052cc", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "TensorFlow-MKL", "id": 44416303, "node_id": "MDQ6VXNlcjQ0NDE2MzAz", "avatar_url": "https://avatars2.githubusercontent.com/u/44416303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TensorFlow-MKL", "html_url": "https://github.com/TensorFlow-MKL", "followers_url": "https://api.github.com/users/TensorFlow-MKL/followers", "following_url": "https://api.github.com/users/TensorFlow-MKL/following{/other_user}", "gists_url": "https://api.github.com/users/TensorFlow-MKL/gists{/gist_id}", "starred_url": "https://api.github.com/users/TensorFlow-MKL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TensorFlow-MKL/subscriptions", "organizations_url": "https://api.github.com/users/TensorFlow-MKL/orgs", "repos_url": "https://api.github.com/users/TensorFlow-MKL/repos", "events_url": "https://api.github.com/users/TensorFlow-MKL/events{/privacy}", "received_events_url": "https://api.github.com/users/TensorFlow-MKL/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "TensorFlow-MKL", "id": 44416303, "node_id": "MDQ6VXNlcjQ0NDE2MzAz", "avatar_url": "https://avatars2.githubusercontent.com/u/44416303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TensorFlow-MKL", "html_url": "https://github.com/TensorFlow-MKL", "followers_url": "https://api.github.com/users/TensorFlow-MKL/followers", "following_url": "https://api.github.com/users/TensorFlow-MKL/following{/other_user}", "gists_url": "https://api.github.com/users/TensorFlow-MKL/gists{/gist_id}", "starred_url": "https://api.github.com/users/TensorFlow-MKL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TensorFlow-MKL/subscriptions", "organizations_url": "https://api.github.com/users/TensorFlow-MKL/orgs", "repos_url": "https://api.github.com/users/TensorFlow-MKL/repos", "events_url": "https://api.github.com/users/TensorFlow-MKL/events{/privacy}", "received_events_url": "https://api.github.com/users/TensorFlow-MKL/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-05-07T10:24:45Z", "updated_at": "2019-05-15T18:47:05Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Debian 9.4\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy): N/A\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: dc77be8f92fd7b7ac57d69e35c4d0dbd994bf1a0\r\n- Python version: 3.5.3\r\n- Installed using virtualenv? pip? conda?: virtualenv\r\n- Bazel version (if compiling from source): 0.24.1\r\n- GCC/Compiler version (if compiling from source): gcc (Debian 6.3.0-18+deb9u1) 6.3.0 20170516\r\n- CPU model: Intel(R) Xeon(R) Gold 6130 CPU @ 2.10GHz\r\n\r\n\r\n**Describe the problem**\r\n\r\n```\r\nbazel build --config=opt --config=mkl --config=numa --config=ngraph //tensorflow/tools/pip_package:build_pip_package\r\n```\r\n\r\n\r\n**Any other info / logs**\r\n\r\n```\r\nERROR: /root/.cache/bazel/_bazel_root/5f3660b20527c5657e75cad53b138917/external/ngraph/BUILD.bazel:11:1: C++ compilation of rule '@ngraph//:ngraph_cpu_backend' failed (Exit 1) \r\nexternal/ngraph/src/ngraph/runtime/cpu/mkldnn_emitter.cpp: In member function 'size_t ngraph::runtime::cpu::MKLDNNEmitter::build_relu_forward(const mkldnn::memory::desc&, const mkldnn::memory::desc&)': \r\nexternal/ngraph/src/ngraph/runtime/cpu/mkldnn_emitter.cpp:810:51: error: expected type-specifier\r\n      size_t primitive_index = insert_primitive(new mkldnn::relu_forward(\r\n                                                    ^~~~~~\r\nexternal/ngraph/src/ngraph/runtime/cpu/mkldnn_emitter.cpp: In member function 'size_t ngraph::runtime::cpu::MKLDNNEmitter::build_relu_backward(const mkldnn::memory::desc&, const mkldnn::memory::desc&, const mkldnn::memory::desc&)':\r\nexternal/ngraph/src/ngraph/runtime/cpu/mkldnn_emitter.cpp:828:51: error: expected type-specifier\r\n      size_t primitive_index = insert_primitive(new mkldnn::relu_backward(\r\n                                                    ^~~~~~\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build \r\nUse --verbose_failures to see the command lines of failed build steps. \r\nINFO: Elapsed time: 95.354s, Critical Path: 46.01s \r\nINFO: 1419 processes: 1419 local. \r\nFAILED: Build did NOT complete successfully\r\n```\r\n\r\nr1.14 branch:\r\n\r\n```\r\nERROR: /root/.cache/bazel/_bazel_root/5f3660b20527c5657e75cad53b138917/external/ngraph/BUILD.bazel:11:1: C++ compilation of rule '@ngraph//:ngraph_cpu_backend' failed (Exit 1)\r\nexternal/ngraph/src/ngraph/runtime/cpu/mkldnn_utils.cpp: In function 'std::map<mkldnn::memory::format, const std::__cxx11::basic_string<char> >& ngraph::runtime::cpu::mkldnn_utils::get_mkldnn_format_string_map()':\r\nexternal/ngraph/src/ngraph/runtime/cpu/mkldnn_utils.cpp:162:10: error: 'ldigo_p' is not a member of 'mkldnn::memory::format'\r\n         {memory::format::ldigo_p, \"memory::format::ldigo_p\"},\r\n          ^~~~~~\r\nexternal/ngraph/src/ngraph/runtime/cpu/mkldnn_utils.cpp:164:10: error: 'ldgoi_p' is not a member of 'mkldnn::memory::format'\r\n         {memory::format::ldgoi_p, \"memory::format::ldgoi_p\"},\r\n          ^~~~~~\r\nexternal/ngraph/src/ngraph/runtime/cpu/mkldnn_utils.cpp:168:5: error: no matching function for call to 'std::map<mkldnn::memory::format, const std::__cxx11::basic_string<char> >::map(<brace-enclosed initializer list>)'\r\n     };\r\n     ^\r\nIn file included from /usr/include/c++/6/map:61:0,\r\n                 from external/ngraph/src/ngraph/autodiff/adjoints.hpp:19,\r\n                 from external/ngraph/src/ngraph/node.hpp:32,\r\n                 from external/ngraph/src/ngraph/runtime/cpu/mkldnn_utils.cpp:22:\r\n/usr/include/c++/6/bits/stl_map.h:273:9: note: candidate: template<class _InputIterator> std::map<_Key, _Tp, _Compare, _Alloc>::map(_InputIterator, _InputIterator, const _Compare&, const allocator_type&)\r\n         map(_InputIterator __first, _InputIterator __last,\r\n         ^~~\r\n/usr/include/c++/6/bits/stl_map.h:273:9: note:   template argument deduction/substitution failed:\r\nexternal/ngraph/src/ngraph/runtime/cpu/mkldnn_utils.cpp:168:5: note:   candidate expects 4 arguments, 82 provided\r\n     };\r\n     ^\r\nIn file included from /usr/include/c++/6/map:61:0,\r\n                 from external/ngraph/src/ngraph/autodiff/adjoints.hpp:19,\r\n                 from external/ngraph/src/ngraph/node.hpp:32,\r\n                 from external/ngraph/src/ngraph/runtime/cpu/mkldnn_utils.cpp:22:\r\n/usr/include/c++/6/bits/stl_map.h:256:9: note: candidate: template<class _InputIterator> std::map<_Key, _Tp, _Compare, _Alloc>::map(_InputIterator, _InputIterator)\r\n         map(_InputIterator __first, _InputIterator __last)\r\n         ^~~\r\n/usr/include/c++/6/bits/stl_map.h:256:9: note:   template argument deduction/substitution failed:\r\nexternal/ngraph/src/ngraph/runtime/cpu/mkldnn_utils.cpp:168:5: note:   candidate expects 2 arguments, 82 provided\r\n     };\r\n     ^\r\nIn file included from /usr/include/c++/6/map:61:0,\r\n                 from external/ngraph/src/ngraph/autodiff/adjoints.hpp:19,\r\n                 from external/ngraph/src/ngraph/node.hpp:32,\r\n                 from external/ngraph/src/ngraph/runtime/cpu/mkldnn_utils.cpp:22:\r\n/usr/include/c++/6/bits/stl_map.h:239:9: note: candidate: template<class _InputIterator> std::map<_Key, _Tp, _Compare, _Alloc>::map(_InputIterator, _InputIterator, const allocator_type&)\r\n         map(_InputIterator __first, _InputIterator __last,\r\n         ^~~\r\n/usr/include/c++/6/bits/stl_map.h:239:9: note:   template argument deduction/substitution failed:\r\nexternal/ngraph/src/ngraph/runtime/cpu/mkldnn_utils.cpp:168:5: note:   candidate expects 3 arguments, 82 provided\r\n     };\r\n     ^\r\nIn file included from /usr/include/c++/6/map:61:0,\r\n                 from external/ngraph/src/ngraph/autodiff/adjoints.hpp:19,\r\n                 from external/ngraph/src/ngraph/node.hpp:32,\r\n                 from external/ngraph/src/ngraph/runtime/cpu/mkldnn_utils.cpp:22:\r\n/usr/include/c++/6/bits/stl_map.h:233:7: note: candidate: std::map<_Key, _Tp, _Compare, _Alloc>::map(std::initializer_list<std::pair<const _Key, _Tp> >, const allocator_type&) [with _Key = mkldnn::memory::format; _Tp = const std::__cxx11::basic_string<char>; _Compare = std::less<mkldnn::memory::format>; _Alloc = std::allocator<std::pair<const mkldnn::memory::format, const std::__cxx11::basic_string<char> > >; std::map<_Key, _Tp, _Compare, _Alloc>::allocator_type = std::allocator<std::pair<const mkldnn::memory::format, const std::__cxx11::basic_string<char> > >]\r\n       map(initializer_list<value_type> __l, const allocator_type& __a)\r\n       ^~~\r\n/usr/include/c++/6/bits/stl_map.h:233:7: note:   candidate expects 2 arguments, 82 provided\r\n/usr/include/c++/6/bits/stl_map.h:227:7: note: candidate: std::map<_Key, _Tp, _Compare, _Alloc>::map(std::map<_Key, _Tp, _Compare, _Alloc>&&, const allocator_type&) [with _Key = mkldnn::memory::format; _Tp = const std::__cxx11::basic_string<char>; _Compare = std::less<mkldnn::memory::format>; _Alloc = std::allocator<std::pair<const mkldnn::memory::format, const std::__cxx11::basic_string<char> > >; std::map<_Key, _Tp, _Compare, _Alloc>::allocator_type = std::allocator<std::pair<const mkldnn::memory::format, const std::__cxx11::basic_string<char> > >]\r\n       map(map&& __m, const allocator_type& __a)\r\n       ^~~\r\n/usr/include/c++/6/bits/stl_map.h:227:7: note:   candidate expects 2 arguments, 82 provided\r\n/usr/include/c++/6/bits/stl_map.h:223:7: note: candidate: std::map<_Key, _Tp, _Compare, _Alloc>::map(const std::map<_Key, _Tp, _Compare, _Alloc>&, const allocator_type&) [with _Key = mkldnn::memory::format; _Tp = const std::__cxx11::basic_string<char>; _Compare = std::less<mkldnn::memory::format>; _Alloc = std::allocator<std::pair<const mkldnn::memory::format, const std::__cxx11::basic_string<char> > >; std::map<_Key, _Tp, _Compare, _Alloc>::allocator_type = std::allocator<std::pair<const mkldnn::memory::format, const std::__cxx11::basic_string<char> > >]\r\n       map(const map& __m, const allocator_type& __a)\r\n       ^~~\r\n/usr/include/c++/6/bits/stl_map.h:223:7: note:   candidate expects 2 arguments, 82 provided\r\n/usr/include/c++/6/bits/stl_map.h:219:7: note: candidate: std::map<_Key, _Tp, _Compare, _Alloc>::map(const allocator_type&) [with _Key = mkldnn::memory::format; _Tp = const std::__cxx11::basic_string<char>; _Compare = std::less<mkldnn::memory::format>; _Alloc = std::allocator<std::pair<const mkldnn::memory::format, const std::__cxx11::basic_string<char> > >; std::map<_Key, _Tp, _Compare, _Alloc>::allocator_type = std::allocator<std::pair<const mkldnn::memory::format, const std::__cxx11::basic_string<char> > >]\r\n       map(const allocator_type& __a)\r\n       ^~~\r\n/usr/include/c++/6/bits/stl_map.h:219:7: note:   candidate expects 1 argument, 82 provided\r\n/usr/include/c++/6/bits/stl_map.h:211:7: note: candidate: std::map<_Key, _Tp, _Compare, _Alloc>::map(std::initializer_list<std::pair<const _Key, _Tp> >, const _Compare&, const allocator_type&) [with _Key = mkldnn::memory::format; _Tp = const std::__cxx11::basic_string<char>; _Compare = std::less<mkldnn::memory::format>; _Alloc = std::allocator<std::pair<const mkldnn::memory::format, const std::__cxx11::basic_string<char> > >; std::map<_Key, _Tp, _Compare, _Alloc>::allocator_type = std::allocator<std::pair<const mkldnn::memory::format, const std::__cxx11::basic_string<char> > >]\r\n       map(initializer_list<value_type> __l,\r\n       ^~~\r\n/usr/include/c++/6/bits/stl_map.h:211:7: note:   candidate expects 3 arguments, 82 provided\r\n/usr/include/c++/6/bits/stl_map.h:196:7: note: candidate: std::map<_Key, _Tp, _Compare, _Alloc>::map(std::map<_Key, _Tp, _Compare, _Alloc>&&) [with _Key = mkldnn::memory::format; _Tp = const std::__cxx11::basic_string<char>; _Compare = std::less<mkldnn::memory::format>; _Alloc = std::allocator<std::pair<const mkldnn::memory::format, const std::__cxx11::basic_string<char> > >]\r\n       map(map&& __x)\r\n       ^~~\r\n/usr/include/c++/6/bits/stl_map.h:196:7: note:   candidate expects 1 argument, 82 provided\r\n/usr/include/c++/6/bits/stl_map.h:185:7: note: candidate: std::map<_Key, _Tp, _Compare, _Alloc>::map(const std::map<_Key, _Tp, _Compare, _Alloc>&) [with _Key = mkldnn::memory::format; _Tp = const std::__cxx11::basic_string<char>; _Compare = std::less<mkldnn::memory::format>; _Alloc = std::allocator<std::pair<const mkldnn::memory::format, const std::__cxx11::basic_string<char> > >]\r\n       map(const map& __x)\r\n       ^~~\r\n/usr/include/c++/6/bits/stl_map.h:185:7: note:   candidate expects 1 argument, 82 provided\r\n/usr/include/c++/6/bits/stl_map.h:174:7: note: candidate: std::map<_Key, _Tp, _Compare, _Alloc>::map(const _Compare&, const allocator_type&) [with _Key = mkldnn::memory::format; _Tp = const std::__cxx11::basic_string<char>; _Compare = std::less<mkldnn::memory::format>; _Alloc = std::allocator<std::pair<const mkldnn::memory::format, const std::__cxx11::basic_string<char> > >; std::map<_Key, _Tp, _Compare, _Alloc>::allocator_type = std::allocator<std::pair<const mkldnn::memory::format, const std::__cxx11::basic_string<char> > >]\r\n       map(const _Compare& __comp,\r\n       ^~~\r\n/usr/include/c++/6/bits/stl_map.h:174:7: note:   candidate expects 2 arguments, 82 provided\r\n/usr/include/c++/6/bits/stl_map.h:162:7: note: candidate: std::map<_Key, _Tp, _Compare, _Alloc>::map() [with _Key = mkldnn::memory::format; _Tp = const std::__cxx11::basic_string<char>; _Compare = std::less<mkldnn::memory::format>; _Alloc = std::allocator<std::pair<const mkldnn::memory::format, const std::__cxx11::basic_string<char> > >]\r\n       map()\r\n       ^~~\r\n/usr/include/c++/6/bits/stl_map.h:162:7: note:   candidate expects 0 arguments, 82 provided\r\nexternal/ngraph/src/ngraph/runtime/cpu/mkldnn_utils.cpp: In function 'mkldnn::memory::desc ngraph::runtime::cpu::mkldnn_utils::rotate_blocked_md(const mkldnn::memory::desc&, const ngraph::AxisVector&)':\r\nexternal/ngraph/src/ngraph/runtime/cpu/mkldnn_utils.cpp:469:26: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\r\n     for (size_t i = 0; i < in.data.ndims; i++)\r\n                        ~~^~~~~~~~~~~~~~~\r\nexternal/ngraph/src/ngraph/runtime/cpu/mkldnn_utils.cpp: In function 'mkldnn::memory::desc ngraph::runtime::cpu::mkldnn_utils::squeeze_blocked_md(const mkldnn::memory::desc&, ngraph::AxisVector&)':\r\nexternal/ngraph/src/ngraph/runtime/cpu/mkldnn_utils.cpp:492:23: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\r\n     if (in.data.ndims <= axis_list.size())\r\n         ~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~\r\nexternal/ngraph/src/ngraph/runtime/cpu/mkldnn_utils.cpp:513:33: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\r\n     for (size_t i = 0, j = 0; i < in.data.ndims; i++)\r\n                               ~~^~~~~~~~~~~~~~~\r\nexternal/ngraph/src/ngraph/runtime/cpu/mkldnn_utils.cpp: In function 'mkldnn::memory::desc ngraph::runtime::cpu::mkldnn_utils::expand_blocked_md(const mkldnn::memory::desc&, ngraph::AxisVector&)':\r\nexternal/ngraph/src/ngraph/runtime/cpu/mkldnn_utils.cpp:546:33: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\r\n     for (size_t i = 0, j = 0; j < md.ndims; j++)\r\n                               ~~^~~~~~~~~~\r\nexternal/ngraph/src/ngraph/runtime/cpu/mkldnn_utils.cpp:567:42: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\r\n                 for (size_t idx = 0; idx < in.data.ndims; idx++)\r\n                                      ~~~~^~~~~~~~~~~~~~~\r\nexternal/ngraph/src/ngraph/runtime/cpu/mkldnn_utils.cpp: In function 'bool ngraph::runtime::cpu::mkldnn_utils::is_mkldnn_padded_layout(const mkldnn::memory::desc&, const ngraph::AxisVector&)':\r\nexternal/ngraph/src/ngraph/runtime/cpu/mkldnn_utils.cpp:630:26: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\r\n     for (size_t i = 0; i < in.data.ndims; i++)\r\n                        ~~^~~~~~~~~~~~~~~\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nINFO: Elapsed time: 108.907s, Critical Path: 44.36s\r\nINFO: 3128 processes: 3128 local.\r\nFAILED: Build did NOT complete successfully\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28469", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28469/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28469/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28469/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28469", "id": 441152181, "node_id": "MDU6SXNzdWU0NDExNTIxODE=", "number": 28469, "title": "TFLite: please don't force copy outputs", "user": {"login": "alexcohn", "id": 736435, "node_id": "MDQ6VXNlcjczNjQzNQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/736435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcohn", "html_url": "https://github.com/alexcohn", "followers_url": "https://api.github.com/users/alexcohn/followers", "following_url": "https://api.github.com/users/alexcohn/following{/other_user}", "gists_url": "https://api.github.com/users/alexcohn/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcohn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcohn/subscriptions", "organizations_url": "https://api.github.com/users/alexcohn/orgs", "repos_url": "https://api.github.com/users/alexcohn/repos", "events_url": "https://api.github.com/users/alexcohn/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcohn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-05-07T10:11:16Z", "updated_at": "2019-05-21T11:02:45Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): **1.3.1**\r\n- Are you willing to contribute it (Yes/No): **Yes**\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nCurrently, TFLite insistes that the [outputs](https://github.com/alexcohn/tensorflow/blob/master/tensorflow/lite/java/src/main/java/org/tensorflow/lite/NativeInterpreterWrapper.java#L123) must not be empty, and copies the output tensor after each run to the array or ByteBuffer we provide in the *outputs* Map. This copy may come with a significant performance price, and may easily be avoided. \r\n\r\nInstead of providing the output buffer, the app can simply call\r\n\r\n    interpreter.runForMultipleInputsOutputs(arrayOfInputs, null);\r\n    drawResults(interpreter.getOutputTensor(0).buffer());\r\n\r\n**Will this change the current api? How?**\r\n\r\n1. second parameter of [**Interpreter.runForMultipleInputsOutputs()**](https://github.com/alexcohn/tensorflow/blob/master/tensorflow/lite/java/src/main/java/org/tensorflow/lite/Interpreter.java#L273) will become **Nullable**.\r\n2. **NativeInterpreterWrapper.run()** will not [throw](https://github.com/alexcohn/tensorflow/blob/master/tensorflow/lite/java/src/main/java/org/tensorflow/lite/NativeInterpreterWrapper.java#L123) when it gets **null** or empty **output**.\r\n3. The [copy cycle](https://github.com/alexcohn/tensorflow/blob/master/tensorflow/lite/java/src/main/java/org/tensorflow/lite/NativeInterpreterWrapper.java#L160) in the epilogue of **NativeInterpreterWrapper.run()** will not be invoked if **outputs == null**.\r\n4. [Tensor.buffer()](https://github.com/alexcohn/tensorflow/blob/master/tensorflow/lite/java/src/main/java/org/tensorflow/lite/Tensor.java#L303) will become **public**.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nWhen I don't need a persistent copy of inference outputs, and only have some quick things to do with these buffers, this approach can save memory and CPU cycles.\r\n\r\n**Any Other info.**\r\n\r\nI have run tests with mobileNet_v1 on Android arm64 device from the **master** branch with the above patches, and have encountered no problems."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28458", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28458/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28458/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28458/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28458", "id": 440973999, "node_id": "MDU6SXNzdWU0NDA5NzM5OTk=", "number": 28458, "title": "map_fn() missing GPU implementation", "user": {"login": "kwaegel", "id": 433893, "node_id": "MDQ6VXNlcjQzMzg5Mw==", "avatar_url": "https://avatars0.githubusercontent.com/u/433893?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kwaegel", "html_url": "https://github.com/kwaegel", "followers_url": "https://api.github.com/users/kwaegel/followers", "following_url": "https://api.github.com/users/kwaegel/following{/other_user}", "gists_url": "https://api.github.com/users/kwaegel/gists{/gist_id}", "starred_url": "https://api.github.com/users/kwaegel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kwaegel/subscriptions", "organizations_url": "https://api.github.com/users/kwaegel/orgs", "repos_url": "https://api.github.com/users/kwaegel/repos", "events_url": "https://api.github.com/users/kwaegel/events{/privacy}", "received_events_url": "https://api.github.com/users/kwaegel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2019-05-07T00:41:39Z", "updated_at": "2019-06-19T13:03:00Z", "closed_at": null, "author_association": "NONE", "body": "It appears that `map_fn()` does not have a GPU implementation for integer tensors, which seems to be causing performance issues for some networks I'm designing (e.g. excessive data copying).\r\n\r\nThis may be related to #5965, but `map_fn()` isn't explicitly mentioned there.\r\n\r\n**System information**\r\n- Have I written custom code: Yes\r\n- OS Platform and Distribution: Linux Ubuntu 18.04 & Windows 10 x64\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): Ubuntu apt-get repo, WinPython\r\n- TensorFlow version (use command below): b'v1.13.1-0-g6612da8951' 1.13.1\r\n- Python version: 3.6.7\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: CUDA 10.0, cuDNN 7.4.1.5\r\n- GPU model and memory: nVidia K80 & nVidia GTX 1050 Ti\r\n\r\n**Describe the current behavior**\r\n`tf.map_fn()` is located on the CPU when calling with integer tensors. Forcing GPU location results in an error message.\r\n\r\n**Describe the expected behavior**\r\n`tf.map_fn()` should have a GPU implementation to avoid excessive data copying.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\n\r\ninitial_integers = tf.zeros((10,), dtype=tf.int32)\r\ninitial_floats = tf.zeros((10,), dtype=tf.float32)\r\n                \r\nwith tf.Session(config=tf.ConfigProto(allow_soft_placement=False)) as sess:\r\n    with tf.device('/device:GPU:0'):\r\n\r\n        # This works on GPU:\r\n        results1 = tf.map_fn(tf.square, initial_floats)\r\n        output1 = sess.run(results1)\r\n\r\n        # This fails to locate on GPU, and results in an error.\r\n        results2 = tf.map_fn(tf.square, initial_integers)\r\n        output2 = sess.run(results2)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28446", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28446/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28446/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28446/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28446", "id": 440850803, "node_id": "MDU6SXNzdWU0NDA4NTA4MDM=", "number": 28446, "title": "Return better error message when using RefVariables with v2 control flow", "user": {"login": "ppwwyyxx", "id": 1381301, "node_id": "MDQ6VXNlcjEzODEzMDE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1381301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ppwwyyxx", "html_url": "https://github.com/ppwwyyxx", "followers_url": "https://api.github.com/users/ppwwyyxx/followers", "following_url": "https://api.github.com/users/ppwwyyxx/following{/other_user}", "gists_url": "https://api.github.com/users/ppwwyyxx/gists{/gist_id}", "starred_url": "https://api.github.com/users/ppwwyyxx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ppwwyyxx/subscriptions", "organizations_url": "https://api.github.com/users/ppwwyyxx/orgs", "repos_url": "https://api.github.com/users/ppwwyyxx/repos", "events_url": "https://api.github.com/users/ppwwyyxx/events{/privacy}", "received_events_url": "https://api.github.com/users/ppwwyyxx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "saxenasaurabh", "id": 3967488, "node_id": "MDQ6VXNlcjM5Njc0ODg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3967488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saxenasaurabh", "html_url": "https://github.com/saxenasaurabh", "followers_url": "https://api.github.com/users/saxenasaurabh/followers", "following_url": "https://api.github.com/users/saxenasaurabh/following{/other_user}", "gists_url": "https://api.github.com/users/saxenasaurabh/gists{/gist_id}", "starred_url": "https://api.github.com/users/saxenasaurabh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saxenasaurabh/subscriptions", "organizations_url": "https://api.github.com/users/saxenasaurabh/orgs", "repos_url": "https://api.github.com/users/saxenasaurabh/repos", "events_url": "https://api.github.com/users/saxenasaurabh/events{/privacy}", "received_events_url": "https://api.github.com/users/saxenasaurabh/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "saxenasaurabh", "id": 3967488, "node_id": "MDQ6VXNlcjM5Njc0ODg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3967488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saxenasaurabh", "html_url": "https://github.com/saxenasaurabh", "followers_url": "https://api.github.com/users/saxenasaurabh/followers", "following_url": "https://api.github.com/users/saxenasaurabh/following{/other_user}", "gists_url": "https://api.github.com/users/saxenasaurabh/gists{/gist_id}", "starred_url": "https://api.github.com/users/saxenasaurabh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saxenasaurabh/subscriptions", "organizations_url": "https://api.github.com/users/saxenasaurabh/orgs", "repos_url": "https://api.github.com/users/saxenasaurabh/repos", "events_url": "https://api.github.com/users/saxenasaurabh/events{/privacy}", "received_events_url": "https://api.github.com/users/saxenasaurabh/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-05-06T19:30:24Z", "updated_at": "2019-05-09T06:53:18Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):archlinux\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:n/a\r\n- TensorFlow installed from (source or binary):binary\r\n- TensorFlow version (use command below):v1.12.0-12395-g32b84a4 1.14.1-dev20190412  (this is the nightly at 20190412).\r\n- Python version:3.7\r\n- Bazel version (if compiling from source):n/a\r\n- GCC/Compiler version (if compiling from source):n/a\r\n- CUDA/cuDNN version:n/a\r\n- GPU model and memory:n/a\r\n\r\nThe following code:\r\n```python\r\nimport os\r\nos.environ['TF_ENABLE_COND_V2'] = '1'\r\nimport tensorflow as tf\r\n\r\na = tf.get_variable(\"x\", dtype=tf.float32, shape=[3])\r\nloss = tf.reduce_sum(a)\r\nopt = tf.train.GradientDescentOptimizer(0.1)\r\ndef f():\r\n    train_op = opt.minimize(loss)\r\n    return train_op\r\nop = tf.cond(tf.greater(a[0], 0), f, tf.no_op)\r\nprint(op)\r\n```\r\nthrows:\r\n```\r\nWARNING: Logging before flag parsing goes to stderr.\r\nW0506 12:29:26.078263 140364116391744 deprecation.py:506] From /home/XXX/environments/tf1-nightly/lib/python3.7/site-packages/tensorflow/python/ops/init_ops.py:1257: calling VarianceScaling.__init__ (from tensorflow.python.ops.init_ops) with dtype is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nCall initializer instance with the dtype argument instead of passing it to the constructor\r\nTensor(\"x/Initializer/random_uniform/max:0\", shape=(), dtype=float32) Tensor(\"x/Initializer/random_uniform/min:0\", shape=(), dtype=float32)\r\nTensor(\"x/Initializer/random_uniform/RandomUniform:0\", shape=(3,), dtype=float32) Tensor(\"x/Initializer/random_uniform/sub:0\", shape=(), dtype=float32)\r\nTraceback (most recent call last):\r\n  File \"a.py\", line 20, in <module>\r\n    op = tf.cond(tf.greater(a[0], 0), f, tf.no_op)\r\n  File \"/home/XXX/environments/tf1-nightly/lib/python3.7/site-packages/tensorflow/python/util/deprecation.py\", line 507, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/home/XXX/environments/tf1-nightly/lib/python3.7/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 1921, in cond\r\n    return cond_v2.cond_v2(pred, true_fn, false_fn, name)\r\n  File \"/home/XXX/environments/tf1-nightly/lib/python3.7/site-packages/tensorflow/python/ops/cond_v2.py\", line 74, in cond_v2\r\n    op_return_value=pred)\r\n  File \"/home/XXX/environments/tf1-nightly/lib/python3.7/site-packages/tensorflow/python/framework/func_graph.py\", line 710, in func_graph_from_py_func\r\n    func_outputs = python_func(*func_args, **func_kwargs)\r\n  File \"a.py\", line 16, in f\r\n    train_op = opt.minimize(loss)\r\n  File \"/home/XXX/environments/tf1-nightly/lib/python3.7/site-packages/tensorflow/python/training/optimizer.py\", line 412, in minimize\r\n    name=name)\r\n  File \"/home/XXX/environments/tf1-nightly/lib/python3.7/site-packages/tensorflow/python/training/optimizer.py\", line 594, in apply_gradients\r\n    update_ops.append(processor.update_op(self, grad))\r\n  File \"/home/XXX/environments/tf1-nightly/lib/python3.7/site-packages/tensorflow/python/training/optimizer.py\", line 118, in update_op\r\n    update_op = optimizer._apply_dense(g, self._v)  # pylint: disable=protected-access\r\n  File \"/home/XXX/environments/tf1-nightly/lib/python3.7/site-packages/tensorflow/python/training/gradient_descent.py\", line 60, in _apply_dense\r\n    use_locking=self._use_locking).op\r\n  File \"/home/XXX/environments/tf1-nightly/lib/python3.7/site-packages/tensorflow/python/training/gen_training_ops.py\", line 639, in apply_gradient_descent\r\n    use_locking=use_locking, name=name)\r\n  File \"/home/XXX/environments/tf1-nightly/lib/python3.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 788, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"/home/XXX/environments/tf1-nightly/lib/python3.7/site-packages/tensorflow/python/framework/func_graph.py\", line 461, in create_op\r\n    compute_device=compute_device)\r\n  File \"/home/XXX/environments/tf1-nightly/lib/python3.7/site-packages/tensorflow/python/util/deprecation.py\", line 507, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/home/XXX/environments/tf1-nightly/lib/python3.7/site-packages/tensorflow/python/framework/ops.py\", line 3579, in create_op\r\n    op_def=op_def)\r\n  File \"/home/XXX/environments/tf1-nightly/lib/python3.7/site-packages/tensorflow/python/framework/ops.py\", line 1969, in __init__\r\n    input_types))\r\nTypeError: In op 'GradientDescent/update_x/ApplyGradientDescent', input types ([tf.float32, tf.float32, tf.float32]) are not compatible with expected types ([tf.float32_ref, tf.float32, tf.float32])\r\n```\r\n\r\nBut it works without COND_V2. Similar to #24517."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28438", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28438/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28438/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28438/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28438", "id": 440711030, "node_id": "MDU6SXNzdWU0NDA3MTEwMzA=", "number": 28438, "title": "TensorFlow Lite conversion of frozen graph error", "user": {"login": "Dayananda-V", "id": 13178240, "node_id": "MDQ6VXNlcjEzMTc4MjQw", "avatar_url": "https://avatars3.githubusercontent.com/u/13178240?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dayananda-V", "html_url": "https://github.com/Dayananda-V", "followers_url": "https://api.github.com/users/Dayananda-V/followers", "following_url": "https://api.github.com/users/Dayananda-V/following{/other_user}", "gists_url": "https://api.github.com/users/Dayananda-V/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dayananda-V/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dayananda-V/subscriptions", "organizations_url": "https://api.github.com/users/Dayananda-V/orgs", "repos_url": "https://api.github.com/users/Dayananda-V/repos", "events_url": "https://api.github.com/users/Dayananda-V/events{/privacy}", "received_events_url": "https://api.github.com/users/Dayananda-V/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-05-06T13:52:55Z", "updated_at": "2019-05-13T06:17:19Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04.2\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version (or github SHA if from source): 2f9cc84ba3f5d59753d843f167adee2e2534c143\r\n\r\n\r\n**Provide the text output from tflite_convert**\r\nWhile converting [faster_rcnn_nas](http://download.tensorflow.org/models/object_detection/faster_rcnn_nas_coco_2018_01_28.tar.gz) from tensoflow trained model to tensorflow lite found some error.\r\n```\r\nUnsupported Control Flow Ops:\r\n1. Enter\r\n2. Exit\r\n3. Merge\r\n4. Switch\r\n5. LoopCond\r\n\r\nUnsupported Lite Ops:\r\n1. NonMaxSuppressionV2\r\n2. TensorArrayGatherV3\r\n3. TensorArrayReadV3\r\n4. TensorArrayScatterV3\r\n5. TensorArraySizeV3\r\n6. TensorArrayV3\r\n7. TensorArrayWriteV3\r\n\r\nUnsupported Quantize Ops:\r\n1. Div\r\n2. Exp\r\n3. Cast\r\n4. Fill\r\n5. Range\r\n6. Size\r\n7. Tile\r\n8. ZerosLike\r\n9. Unpack \r\n\r\n```\r\n\r\nAlso, please include a link to a GraphDef or the model if possible.\r\n\r\n**Any other info / logs**\r\n\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n[faster_rcnn_nas_lite_error.txt](https://github.com/tensorflow/tensorflow/files/3148187/faster_rcnn_nas_lite_error.txt)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28421", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28421/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28421/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28421/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28421", "id": 440493221, "node_id": "MDU6SXNzdWU0NDA0OTMyMjE=", "number": 28421, "title": "Why we cannot define two networks in the same graph when they are trained independently", "user": {"login": "Firyuza", "id": 5341864, "node_id": "MDQ6VXNlcjUzNDE4NjQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/5341864?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Firyuza", "html_url": "https://github.com/Firyuza", "followers_url": "https://api.github.com/users/Firyuza/followers", "following_url": "https://api.github.com/users/Firyuza/following{/other_user}", "gists_url": "https://api.github.com/users/Firyuza/gists{/gist_id}", "starred_url": "https://api.github.com/users/Firyuza/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Firyuza/subscriptions", "organizations_url": "https://api.github.com/users/Firyuza/orgs", "repos_url": "https://api.github.com/users/Firyuza/repos", "events_url": "https://api.github.com/users/Firyuza/events{/privacy}", "received_events_url": "https://api.github.com/users/Firyuza/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545273, "node_id": "MDU6TGFiZWwxMDk3NTQ1Mjcz", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:grappler", "name": "comp:grappler", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-05-05T21:37:46Z", "updated_at": "2019-05-08T18:13:41Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.4.1\r\n- Are you willing to contribute it (Yes/No): No\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nWhy we cannot define two networks in the same graph when they are trained independently.\r\n\r\nIt can be done only using two different grpahs.\r\n\r\n**Will this change the current api? How?**\r\nNo, just allow to define two networks in the same graph that have to be trained independently.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nDevelopers and production code. Because it's time and memory consuming to create two graphs.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28414", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28414/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28414/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28414/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28414", "id": 440450331, "node_id": "MDU6SXNzdWU0NDA0NTAzMzE=", "number": 28414, "title": "[C API] support for CudnnCompatibleLSTMCell in native code", "user": {"login": "pglushkov", "id": 7735612, "node_id": "MDQ6VXNlcjc3MzU2MTI=", "avatar_url": "https://avatars3.githubusercontent.com/u/7735612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pglushkov", "html_url": "https://github.com/pglushkov", "followers_url": "https://api.github.com/users/pglushkov/followers", "following_url": "https://api.github.com/users/pglushkov/following{/other_user}", "gists_url": "https://api.github.com/users/pglushkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/pglushkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pglushkov/subscriptions", "organizations_url": "https://api.github.com/users/pglushkov/orgs", "repos_url": "https://api.github.com/users/pglushkov/repos", "events_url": "https://api.github.com/users/pglushkov/events{/privacy}", "received_events_url": "https://api.github.com/users/pglushkov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-05-05T14:24:26Z", "updated_at": "2019-05-23T09:51:12Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- Have I written custom code : Yes\r\n- OS Platform and Distribution : Ubuntu 16.04\r\n- TensorFlow installed from : binary\r\n- TensorFlow version : 1.12\r\n- Python version: 3.6\r\n- CUDA/cuDNN version: CUDA 9.0 /  CuDNN 7,1\r\n- GPU model and memory: NVidia p100, 16 gb\r\n\r\n**Bug description**\r\nAfter training the model in Python with CudnnCompatibleLSTMCell used and running the graph-freeze procedure I then try to load this model in my custom inference app that uses C-API. I use pre-compiled version of TF 1.12 for Linux. At the call to TF_GraphImportGraphDef(...) I get error TF_NOT_FOUND in the returned status. For more details please see code bellow. \r\n\r\n**Question**\r\nAfter short look through the code of TF 1.12 I cannot find clear evidence of 'CudnnCompatibleLSTMCell' being supported at all at native level. Could someone confirm that this cell can be used at all from C-API?\r\n\r\n**Code to reproduce the issue**\r\n```c++\r\nTF_Graph* LoadGraphDef(const char* file) {\r\n  TF_Buffer* buffer = ReadBufferFromFile(file);\r\n\r\n  TF_Graph* graph = TF_NewGraph();\r\n  TF_Status* status = TF_NewStatus();\r\n  TF_ImportGraphDefOptions* opts = TF_NewImportGraphDefOptions();\r\n\r\n  TF_GraphImportGraphDef(graph, buffer, opts, status);\r\n  TF_DeleteImportGraphDefOptions(opts);\r\n  TF_DeleteBuffer(buffer);\r\n\r\n  printf(\"STATUS : %d\\n\", TF_GetCode(status));\r\n\r\n  TF_DeleteStatus(status);\r\n\r\n  return graph;\r\n}\r\n\r\nstatic TF_Buffer* ReadBufferFromFile(const char* file) {\r\n  const auto f = std::fopen(file, \"rb\");\r\n  if (f == nullptr) {\r\n    return nullptr;\r\n  }\r\n\r\n  std::fseek(f, 0, SEEK_END);\r\n  const auto fsize = ftell(f);\r\n  std::fseek(f, 0, SEEK_SET);\r\n\r\n  if (fsize < 1) {\r\n    std::fclose(f);\r\n    return nullptr;\r\n  }\r\n\r\n  const auto data = std::malloc(fsize);\r\n  std::fread(data, fsize, 1, f);\r\n  std::fclose(f);\r\n\r\n  TF_Buffer* buf = TF_NewBuffer();\r\n  buf->data = data;\r\n  buf->length = fsize;\r\n  buf->data_deallocator = DeallocateBuffer;\r\n\r\n  return buf;\r\n}\r\n\r\nstatic void DeallocateBuffer(void* data, size_t) {\r\n  std::free(data);\r\n}\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28388", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28388/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28388/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28388/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28388", "id": 440287306, "node_id": "MDU6SXNzdWU0NDAyODczMDY=", "number": 28388, "title": "How to build static libtensorflow_cc.a and libtensorflow_framework.a for Linux and MacOS", "user": {"login": "samhodge", "id": 86946, "node_id": "MDQ6VXNlcjg2OTQ2", "avatar_url": "https://avatars0.githubusercontent.com/u/86946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samhodge", "html_url": "https://github.com/samhodge", "followers_url": "https://api.github.com/users/samhodge/followers", "following_url": "https://api.github.com/users/samhodge/following{/other_user}", "gists_url": "https://api.github.com/users/samhodge/gists{/gist_id}", "starred_url": "https://api.github.com/users/samhodge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samhodge/subscriptions", "organizations_url": "https://api.github.com/users/samhodge/orgs", "repos_url": "https://api.github.com/users/samhodge/repos", "events_url": "https://api.github.com/users/samhodge/events{/privacy}", "received_events_url": "https://api.github.com/users/samhodge/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1205765054, "node_id": "MDU6TGFiZWwxMjA1NzY1MDU0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:macOS", "name": "subtype:macOS", "color": "b619ea", "default": false, "description": "macOS Build/Installation issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 47, "created_at": "2019-05-04T05:35:42Z", "updated_at": "2020-03-19T01:13:56Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): MacOS 10.13\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: v1.13.1\r\n- Python version: 3.6.7\r\n- Installed using virtualenv? pip? conda?: conda\r\n- Bazel version (if compiling from source): 0.19.2\r\n- GCC/Compiler version (if compiling from source): Apple LLVM version 9.1.0 (clang-902.0.39.2)\r\n- CUDA/cuDNN version: 10/7.4.2.24\r\n- GPU model and memory: GTX 1060\r\n\r\n\r\n\r\n**Describe the problem**\r\nI am unable to build a static version of tensorflow as described for a solution to:\r\n\r\nhttps://github.com/tensorflow/tensorflow/issues/22810#issuecomment-433225466\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\nTrying to use tensorflow/contrib/cmake results in a number of errors\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nCan you describe the approach to creating a static version of the libraries needed for the following headers:\r\n\r\n#include <tensorflow/core/platform/init_main.h>\r\n#include <tensorflow/core/public/session.h>\r\n#include <tensorflow/core/framework/tensor_shape.h>\r\n\r\nTo link against my software?\r\n\r\nOr alternatively solve this issue:\r\n\r\nhttps://github.com/tensorflow/tensorflow/issues/22810\r\n\r\nDated in October of last year.\r\n\r\nStatic linking seems to be doable."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28385", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28385/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28385/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28385/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28385", "id": 440251915, "node_id": "MDU6SXNzdWU0NDAyNTE5MTU=", "number": 28385, "title": "[C API] cond op", "user": {"login": "melissagrueter", "id": 12023669, "node_id": "MDQ6VXNlcjEyMDIzNjY5", "avatar_url": "https://avatars1.githubusercontent.com/u/12023669?v=4", "gravatar_id": "", "url": "https://api.github.com/users/melissagrueter", "html_url": "https://github.com/melissagrueter", "followers_url": "https://api.github.com/users/melissagrueter/followers", "following_url": "https://api.github.com/users/melissagrueter/following{/other_user}", "gists_url": "https://api.github.com/users/melissagrueter/gists{/gist_id}", "starred_url": "https://api.github.com/users/melissagrueter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/melissagrueter/subscriptions", "organizations_url": "https://api.github.com/users/melissagrueter/orgs", "repos_url": "https://api.github.com/users/melissagrueter/repos", "events_url": "https://api.github.com/users/melissagrueter/events{/privacy}", "received_events_url": "https://api.github.com/users/melissagrueter/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "saxenasaurabh", "id": 3967488, "node_id": "MDQ6VXNlcjM5Njc0ODg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3967488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saxenasaurabh", "html_url": "https://github.com/saxenasaurabh", "followers_url": "https://api.github.com/users/saxenasaurabh/followers", "following_url": "https://api.github.com/users/saxenasaurabh/following{/other_user}", "gists_url": "https://api.github.com/users/saxenasaurabh/gists{/gist_id}", "starred_url": "https://api.github.com/users/saxenasaurabh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saxenasaurabh/subscriptions", "organizations_url": "https://api.github.com/users/saxenasaurabh/orgs", "repos_url": "https://api.github.com/users/saxenasaurabh/repos", "events_url": "https://api.github.com/users/saxenasaurabh/events{/privacy}", "received_events_url": "https://api.github.com/users/saxenasaurabh/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "saxenasaurabh", "id": 3967488, "node_id": "MDQ6VXNlcjM5Njc0ODg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3967488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saxenasaurabh", "html_url": "https://github.com/saxenasaurabh", "followers_url": "https://api.github.com/users/saxenasaurabh/followers", "following_url": "https://api.github.com/users/saxenasaurabh/following{/other_user}", "gists_url": "https://api.github.com/users/saxenasaurabh/gists{/gist_id}", "starred_url": "https://api.github.com/users/saxenasaurabh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saxenasaurabh/subscriptions", "organizations_url": "https://api.github.com/users/saxenasaurabh/orgs", "repos_url": "https://api.github.com/users/saxenasaurabh/repos", "events_url": "https://api.github.com/users/saxenasaurabh/events{/privacy}", "received_events_url": "https://api.github.com/users/saxenasaurabh/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-05-03T22:59:06Z", "updated_at": "2019-05-08T20:57:45Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- TensorFlow version (you are using): master\r\n- Are you willing to contribute it (Yes/No): yes\r\n\r\n**Describe the feature and the current behavior/state.** \r\nFeature: a cond operator for the C API, similar to [tf.cond](https://www.tensorflow.org/api_docs/python/tf/cond).\r\n\r\nCurrent state: The C API currently includes the control flow primitives needed to implement cond, but it does not include the cond op itself. \r\n\r\n**Will this change the current api? How?**\r\nThe C API would include the cond op\r\n\r\n**Who will benefit with this feature?**\r\nAll language bindings built on top of the C API could use its cond op, rather than having to individually implement their own from control flow primitives. \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28381", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28381/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28381/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28381/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28381", "id": 440209241, "node_id": "MDU6SXNzdWU0NDAyMDkyNDE=", "number": 28381, "title": "TPU Performance Regression 1.12 -> 1.13", "user": {"login": "jschneier", "id": 2245080, "node_id": "MDQ6VXNlcjIyNDUwODA=", "avatar_url": "https://avatars2.githubusercontent.com/u/2245080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jschneier", "html_url": "https://github.com/jschneier", "followers_url": "https://api.github.com/users/jschneier/followers", "following_url": "https://api.github.com/users/jschneier/following{/other_user}", "gists_url": "https://api.github.com/users/jschneier/gists{/gist_id}", "starred_url": "https://api.github.com/users/jschneier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jschneier/subscriptions", "organizations_url": "https://api.github.com/users/jschneier/orgs", "repos_url": "https://api.github.com/users/jschneier/repos", "events_url": "https://api.github.com/users/jschneier/events{/privacy}", "received_events_url": "https://api.github.com/users/jschneier/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 1315098405, "node_id": "MDU6TGFiZWwxMzE1MDk4NDA1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/regression%20issue", "name": "regression issue", "color": "50bcc4", "default": false, "description": "To spot regression issues in TF 2.0"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}, {"login": "Saduf2019", "id": 59822926, "node_id": "MDQ6VXNlcjU5ODIyOTI2", "avatar_url": "https://avatars2.githubusercontent.com/u/59822926?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Saduf2019", "html_url": "https://github.com/Saduf2019", "followers_url": "https://api.github.com/users/Saduf2019/followers", "following_url": "https://api.github.com/users/Saduf2019/following{/other_user}", "gists_url": "https://api.github.com/users/Saduf2019/gists{/gist_id}", "starred_url": "https://api.github.com/users/Saduf2019/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Saduf2019/subscriptions", "organizations_url": "https://api.github.com/users/Saduf2019/orgs", "repos_url": "https://api.github.com/users/Saduf2019/repos", "events_url": "https://api.github.com/users/Saduf2019/events{/privacy}", "received_events_url": "https://api.github.com/users/Saduf2019/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-05-03T20:29:00Z", "updated_at": "2020-03-19T16:39:35Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04 & 18.04\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.12.0 & 1.13.1\r\n- Python version: 3.6.8\r\n- CUDA/cuDNN version: N/A TPU\r\n- GPU model and memory: N/A TPU\r\n\r\n**Describe the current behavior**\r\n\r\nUpgrading from Tensorflow 1.12.0 to 1.13.1 shows a large performance regression. Training goes from 2100 examples/s & 8.2 global steps/s to 860 examples/s & 3.4 global steps/s.\r\n\r\n**Describe the expected behavior**\r\n\r\nI would expect no performance penalty or improved performance for upgrading a library.\r\n\r\n**Other info / logs**\r\nHere are the outputs of `capture_tpu_profile` for the base case & regression case respectively.\r\n![Base Profile](https://user-images.githubusercontent.com/2245080/57163873-35bc2700-6da7-11e9-856a-677a6b021731.png)\r\n![ Regression Profile](https://user-images.githubusercontent.com/2245080/57163877-3785ea80-6da7-11e9-87de-e05dd121be30.png)\r\n\r\nFor reference this profile was captured during training on MobileNet but we have also observed this on other convolutional architectures. We also use quantization."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28371", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28371/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28371/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28371/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28371", "id": 440122591, "node_id": "MDU6SXNzdWU0NDAxMjI1OTE=", "number": 28371, "title": "Suggestion for Neural Machine Translation with Attention tutorial", "user": {"login": "jasonzhang2022", "id": 6558151, "node_id": "MDQ6VXNlcjY1NTgxNTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/6558151?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jasonzhang2022", "html_url": "https://github.com/jasonzhang2022", "followers_url": "https://api.github.com/users/jasonzhang2022/followers", "following_url": "https://api.github.com/users/jasonzhang2022/following{/other_user}", "gists_url": "https://api.github.com/users/jasonzhang2022/gists{/gist_id}", "starred_url": "https://api.github.com/users/jasonzhang2022/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jasonzhang2022/subscriptions", "organizations_url": "https://api.github.com/users/jasonzhang2022/orgs", "repos_url": "https://api.github.com/users/jasonzhang2022/repos", "events_url": "https://api.github.com/users/jasonzhang2022/events{/privacy}", "received_events_url": "https://api.github.com/users/jasonzhang2022/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yashk2810", "id": 14262417, "node_id": "MDQ6VXNlcjE0MjYyNDE3", "avatar_url": "https://avatars1.githubusercontent.com/u/14262417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yashk2810", "html_url": "https://github.com/yashk2810", "followers_url": "https://api.github.com/users/yashk2810/followers", "following_url": "https://api.github.com/users/yashk2810/following{/other_user}", "gists_url": "https://api.github.com/users/yashk2810/gists{/gist_id}", "starred_url": "https://api.github.com/users/yashk2810/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yashk2810/subscriptions", "organizations_url": "https://api.github.com/users/yashk2810/orgs", "repos_url": "https://api.github.com/users/yashk2810/repos", "events_url": "https://api.github.com/users/yashk2810/events{/privacy}", "received_events_url": "https://api.github.com/users/yashk2810/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yashk2810", "id": 14262417, "node_id": "MDQ6VXNlcjE0MjYyNDE3", "avatar_url": "https://avatars1.githubusercontent.com/u/14262417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yashk2810", "html_url": "https://github.com/yashk2810", "followers_url": "https://api.github.com/users/yashk2810/followers", "following_url": "https://api.github.com/users/yashk2810/following{/other_user}", "gists_url": "https://api.github.com/users/yashk2810/gists{/gist_id}", "starred_url": "https://api.github.com/users/yashk2810/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yashk2810/subscriptions", "organizations_url": "https://api.github.com/users/yashk2810/orgs", "repos_url": "https://api.github.com/users/yashk2810/repos", "events_url": "https://api.github.com/users/yashk2810/events{/privacy}", "received_events_url": "https://api.github.com/users/yashk2810/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-05-03T16:25:45Z", "updated_at": "2020-01-29T00:54:13Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a documentation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:doc_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version:\r\n2.0\r\n- Doc Link:\r\nhttps://www.tensorflow.org/alpha/tutorials/text/nmt_with_attention\r\n\r\n**Describe the documentation issue**\r\n\r\n1. max_length function is not needed. The keras.preprocessing.sequence.pad_sequences already pad the sequence to max length. One can just get max length by input_seqs.shape[1]\r\n2. need to explain why we skip 0 for \"convert\" and \"loss_function\". I think it is because of padding\r\n3. Validation set is not used.  This could be an good example to explain how we evaluate the model.\r\n4.  GRU unit in encoder,  Dense in Attention weight calculation,  GRU unit in decoder all have the same units parameter. This is not necessary.  A note could be added to explain that same unit is used for convenience.\r\n\r\n**We welcome contributions by users. Will you be able to update submit a PR (use the [doc style guide](https://www.tensorflow.org/community/documentation)) to fix the doc Issue?**\r\n\r\nYes\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28363", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28363/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28363/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28363/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28363", "id": 439959171, "node_id": "MDU6SXNzdWU0Mzk5NTkxNzE=", "number": 28363, "title": "tf.image.resize_image_with_pad(image, 108, 56) gives 109 by 56 output for some images", "user": {"login": "dmus", "id": 464378, "node_id": "MDQ6VXNlcjQ2NDM3OA==", "avatar_url": "https://avatars1.githubusercontent.com/u/464378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmus", "html_url": "https://github.com/dmus", "followers_url": "https://api.github.com/users/dmus/followers", "following_url": "https://api.github.com/users/dmus/following{/other_user}", "gists_url": "https://api.github.com/users/dmus/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmus/subscriptions", "organizations_url": "https://api.github.com/users/dmus/orgs", "repos_url": "https://api.github.com/users/dmus/repos", "events_url": "https://api.github.com/users/dmus/events{/privacy}", "received_events_url": "https://api.github.com/users/dmus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 736653459, "node_id": "MDU6TGFiZWw3MzY2NTM0NTk=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:eager", "name": "comp:eager", "color": "0052cc", "default": false, "description": ""}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yhliang2018", "id": 36285763, "node_id": "MDQ6VXNlcjM2Mjg1NzYz", "avatar_url": "https://avatars1.githubusercontent.com/u/36285763?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yhliang2018", "html_url": "https://github.com/yhliang2018", "followers_url": "https://api.github.com/users/yhliang2018/followers", "following_url": "https://api.github.com/users/yhliang2018/following{/other_user}", "gists_url": "https://api.github.com/users/yhliang2018/gists{/gist_id}", "starred_url": "https://api.github.com/users/yhliang2018/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yhliang2018/subscriptions", "organizations_url": "https://api.github.com/users/yhliang2018/orgs", "repos_url": "https://api.github.com/users/yhliang2018/repos", "events_url": "https://api.github.com/users/yhliang2018/events{/privacy}", "received_events_url": "https://api.github.com/users/yhliang2018/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yhliang2018", "id": 36285763, "node_id": "MDQ6VXNlcjM2Mjg1NzYz", "avatar_url": "https://avatars1.githubusercontent.com/u/36285763?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yhliang2018", "html_url": "https://github.com/yhliang2018", "followers_url": "https://api.github.com/users/yhliang2018/followers", "following_url": "https://api.github.com/users/yhliang2018/following{/other_user}", "gists_url": "https://api.github.com/users/yhliang2018/gists{/gist_id}", "starred_url": "https://api.github.com/users/yhliang2018/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yhliang2018/subscriptions", "organizations_url": "https://api.github.com/users/yhliang2018/orgs", "repos_url": "https://api.github.com/users/yhliang2018/repos", "events_url": "https://api.github.com/users/yhliang2018/events{/privacy}", "received_events_url": "https://api.github.com/users/yhliang2018/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-05-03T09:19:51Z", "updated_at": "2019-07-11T16:24:28Z", "closed_at": null, "author_association": "NONE", "body": "[7953_4_3337_294_54_110.txt](https://github.com/tensorflow/tensorflow/files/3141289/7953_4_3337_294_54_110.txt)\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): tf 1.12, tf 1.13, tf-nightly\r\n- Python version: 3.6.7\r\n- CUDA/cuDNN version: not applicable\r\n- GPU model and memory: not applicable\r\n\r\n**Describe the current behavior**\r\nFor some images, not for all tf.image.resize_image_with_pad(image, 108, 56) gives an output size of 109 by 56\r\n\r\n**Describe the expected behavior**\r\n tf.image.resize_image_with_pad(image, 108, 56) should always give an output of 108 by 56\r\n\r\n**Code to reproduce the issue**\r\n    `import tensorflow as tf \r\n    import pdb\r\n    import cv2\r\n    import base64\r\n\r\n    #tf.enable_eager_execution()\r\n\r\n    with tf.Session() as sess:\r\n        img_path = '7953_4_3337_294_54_110.txt'\r\n    \r\n        with open(img_path, 'r') as the_file:\r\n            image_string_base64 = the_file.read()\r\n\r\n        image_string = tf.decode_base64(image_string_base64)\r\n\r\n        image = tf.image.decode_png(image_string)\r\n        image = tf.image.resize_image_with_pad(image, 108, 56)\r\n\r\n        print(image)\r\n\r\n        img_array = sess.run(image)\r\n        print(img_array.shape)\r\n    \r\n        cv2.imwrite('test.png', cv2.cvtColor(img_array, cv2.COLOR_BGR2RGB))`\r\n\r\n**Other info / logs**\r\nWith eager execution it works correctly\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28345", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28345/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28345/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28345/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28345", "id": 439792868, "node_id": "MDU6SXNzdWU0Mzk3OTI4Njg=", "number": 28345, "title": "Segmentation fault in  tflite::ops::builtin::BuiltinOpResolver when using libtensorflowlite.so via CMake", "user": {"login": "aphalak", "id": 43224314, "node_id": "MDQ6VXNlcjQzMjI0MzE0", "avatar_url": "https://avatars3.githubusercontent.com/u/43224314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aphalak", "html_url": "https://github.com/aphalak", "followers_url": "https://api.github.com/users/aphalak/followers", "following_url": "https://api.github.com/users/aphalak/following{/other_user}", "gists_url": "https://api.github.com/users/aphalak/gists{/gist_id}", "starred_url": "https://api.github.com/users/aphalak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aphalak/subscriptions", "organizations_url": "https://api.github.com/users/aphalak/orgs", "repos_url": "https://api.github.com/users/aphalak/repos", "events_url": "https://api.github.com/users/aphalak/events{/privacy}", "received_events_url": "https://api.github.com/users/aphalak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-05-02T21:18:03Z", "updated_at": "2019-06-08T06:49:22Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 14.04.6 LTS, Trusty Tahr\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): 1.4.0\r\n- Python version: 3.4.3\r\n- Bazel version (if compiling from source): 0.23.0\r\n- GCC/Compiler version (if compiling from source):c++ (Ubuntu 4.8.5-4ubuntu8~14.04.2) 4.8.5\r\n\r\nMy goal is to build and run the examples in tensorflow/lite/ by using CMake on my Ubuntu 14.04 workstation\r\n\r\nI am able to build and run the stock examples without any issues using bazel like this : \r\nbazel build --config opt --cxxopt=-std=c++11 //tensorflow/lite/examples/minimal:minimal\r\n\r\nHowever, when I build **libtensorflowlite.so** like this : \r\nbazel build --config opt --cxxopt=-std=c++11 tensorflow/lite:libtensorflowlite.so\r\nand then link the shared object in my CMakeLists.txt to run the same program, I am seeing a segmentation fault when the program exits. I have narrowed the minimal example down to this : \r\n```\r\n#include <iostream>\r\n#include \"tensorflow/lite/kernels/register.h\"\r\n\r\n// This is an example that is minimal to read a model\r\n// from disk and perform inference. There is no data being loaded\r\n// that is up to you to add as a user.\r\n//\r\n// NOTE: Do not add any dependencies to this that cannot be built with\r\n// the minimal makefile. This example must remain trivial to build with\r\n// the minimal build tool.\r\n//\r\n// Usage: minimal <tflite model>\r\n\r\nusing namespace tflite;\r\n\r\nint main(int argc, char* argv[]) {\r\n\r\n  tflite::ops::builtin::BuiltinOpResolver resolver;\r\n  std::cout << \"DONE\" << std::endl;\r\n  return 0;\r\n}\r\n```\r\nGDB trace : \r\n```\r\nProgram received signal SIGSEGV, Segmentation fault.\r\nstd::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<std::pair<std::string, int> const, _TfLiteRegistration>, true> > >::_M_deallocate_nodes (this=0x7fffffffdb70, __n=0x5)\r\n    at /usr/include/c++/6/bits/hashtable_policy.h:1984\r\n1984\t\t  _M_deallocate_node(__tmp);\r\n(gdb) bt\r\n#0  std::__detail::_Hashtable_alloc<std::allocator<std::__detail::_Hash_node<std::pair<std::pair<std::string, int> const, _TfLiteRegistration>, true> > >::_M_deallocate_nodes (this=0x7fffffffdb70, __n=0x5)\r\n    at /usr/include/c++/6/bits/hashtable_policy.h:1984\r\n#1  std::_Hashtable<std::pair<std::string, int>, std::pair<std::pair<std::string, int> const, _TfLiteRegistration>, std::allocator<std::pair<std::pair<std::string, int> const, _TfLiteRegistration> >, std::__detail::_Select1st, std::equal_to<std::pair<std::string, int> >, tflite::op_resolver_hasher::OperatorKeyHasher<std::pair<std::string, int> >, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<true, false, true> >::clear (this=0x7fffffffdb70) at /usr/include/c++/6/bits/hashtable.h:1892\r\n#2  std::_Hashtable<std::pair<std::string, int>, std::pair<std::pair<std::string, int> const, _TfLiteRegistration>, std::allocator<std::pair<std::pair<std::string, int> const, _TfLiteRegistration> >, std::__detail::_Select1st, std::equal_to<std::pair<std::string, int> >, tflite::op_resolver_hasher::OperatorKeyHasher<std::pair<std::string, int> >, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits<true, false, true> >::~_Hashtable (this=0x7fffffffdb70, __in_chrg=<optimized out>)\r\n    at /usr/include/c++/6/bits/hashtable.h:1218\r\n#3  0x00000000004012d0 in std::unordered_map<std::pair<std::string, int>, _TfLiteRegistration, tflite::op_resolver_hasher::OperatorKeyHasher<std::pair<std::string, int> >, std::equal_to<std::pair<std::string, int> >, std::allocator<std::pair<std::pair<std::string, int> const, _TfLiteRegistration> > >::~unordered_map (this=0x7fffffffdb70, \r\n    __in_chrg=<optimized out>) at /usr/include/c++/6/bits/unordered_map.h:98\r\n#4  tflite::MutableOpResolver::~MutableOpResolver (this=0x7fffffffdb30, __in_chrg=<optimized out>)\r\n    at ${PATH}/tensorflow/tensorflow/lite/mutable_op_resolver.h:55\r\n#5  tflite::ops::builtin::BuiltinOpResolver::~BuiltinOpResolver (this=0x7fffffffdb30, __in_chrg=<optimized out>)\r\n    at ${PATH}//tensorflow/tensorflow/lite/kernels/register.h:26\r\n#6  main (argc=<optimized out>, argv=<optimized out>)\r\n    at ${PATH}//applications/tflite/sample_minimal/impl/main_tflite_sample_minimal.cpp:134\r\n```\r\nThis line : tflite::ops::builtin::BuiltinOpResolver resolver; is the cause of the segmentation fault when the function exits. Any ideas on what might be causing the segmentation fault"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28324", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28324/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28324/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28324/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28324", "id": 439361781, "node_id": "MDU6SXNzdWU0MzkzNjE3ODE=", "number": 28324, "title": "Random Uniform Not Supported for TFlite Conversion", "user": {"login": "futuyao", "id": 10975110, "node_id": "MDQ6VXNlcjEwOTc1MTEw", "avatar_url": "https://avatars1.githubusercontent.com/u/10975110?v=4", "gravatar_id": "", "url": "https://api.github.com/users/futuyao", "html_url": "https://github.com/futuyao", "followers_url": "https://api.github.com/users/futuyao/followers", "following_url": "https://api.github.com/users/futuyao/following{/other_user}", "gists_url": "https://api.github.com/users/futuyao/gists{/gist_id}", "starred_url": "https://api.github.com/users/futuyao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/futuyao/subscriptions", "organizations_url": "https://api.github.com/users/futuyao/orgs", "repos_url": "https://api.github.com/users/futuyao/repos", "events_url": "https://api.github.com/users/futuyao/events{/privacy}", "received_events_url": "https://api.github.com/users/futuyao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jaeyoo", "id": 40815393, "node_id": "MDQ6VXNlcjQwODE1Mzkz", "avatar_url": "https://avatars1.githubusercontent.com/u/40815393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaeyoo", "html_url": "https://github.com/jaeyoo", "followers_url": "https://api.github.com/users/jaeyoo/followers", "following_url": "https://api.github.com/users/jaeyoo/following{/other_user}", "gists_url": "https://api.github.com/users/jaeyoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaeyoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaeyoo/subscriptions", "organizations_url": "https://api.github.com/users/jaeyoo/orgs", "repos_url": "https://api.github.com/users/jaeyoo/repos", "events_url": "https://api.github.com/users/jaeyoo/events{/privacy}", "received_events_url": "https://api.github.com/users/jaeyoo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jaeyoo", "id": 40815393, "node_id": "MDQ6VXNlcjQwODE1Mzkz", "avatar_url": "https://avatars1.githubusercontent.com/u/40815393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaeyoo", "html_url": "https://github.com/jaeyoo", "followers_url": "https://api.github.com/users/jaeyoo/followers", "following_url": "https://api.github.com/users/jaeyoo/following{/other_user}", "gists_url": "https://api.github.com/users/jaeyoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaeyoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaeyoo/subscriptions", "organizations_url": "https://api.github.com/users/jaeyoo/orgs", "repos_url": "https://api.github.com/users/jaeyoo/repos", "events_url": "https://api.github.com/users/jaeyoo/events{/privacy}", "received_events_url": "https://api.github.com/users/jaeyoo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-05-01T23:04:56Z", "updated_at": "2020-01-31T23:43:47Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (or github SHA if from source): tf-nightly 1.14.0-rc0\r\n\r\n\r\n**Provide the text output from tflite_convert**\r\n\r\n```\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime and are not recognized by TensorFlow. If you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: ADD, AVERAGE_POOL_2D, BATCH_TO_SPACE_ND, CAST, CONCATENATION, CONV_2D, FULLY_CONNECTED, GREATER_EQUAL, MUL, RESHAPE, RESIZE_BILINEAR, SPACE_TO_BATCH_ND. Here is a list of operators for which you will need custom implementations: RandomUniform.\r\n```\r\n\r\nAlso, please include a link to a GraphDef or the model if possible.\r\n\r\n**Any other info / logs**\r\n\r\nI followed [#26300](https://github.com/tensorflow/tensorflow/issues/26300) by using\r\n```\r\nconverter.target_ops = [tf.lite.OpsSet.TFLITE_BUILTINS,\r\n                        tf.lite.OpsSet.SELECT_TF_OPS]\r\n```\r\nBut I still can't create .tflite file correctly."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28314", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28314/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28314/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28314/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28314", "id": 439229984, "node_id": "MDU6SXNzdWU0MzkyMjk5ODQ=", "number": 28314, "title": "[TF 2.0 API Docs] tf.image.extract_image_patches", "user": {"login": "hendercine", "id": 18515724, "node_id": "MDQ6VXNlcjE4NTE1NzI0", "avatar_url": "https://avatars0.githubusercontent.com/u/18515724?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hendercine", "html_url": "https://github.com/hendercine", "followers_url": "https://api.github.com/users/hendercine/followers", "following_url": "https://api.github.com/users/hendercine/following{/other_user}", "gists_url": "https://api.github.com/users/hendercine/gists{/gist_id}", "starred_url": "https://api.github.com/users/hendercine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hendercine/subscriptions", "organizations_url": "https://api.github.com/users/hendercine/orgs", "repos_url": "https://api.github.com/users/hendercine/repos", "events_url": "https://api.github.com/users/hendercine/events{/privacy}", "received_events_url": "https://api.github.com/users/hendercine/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-05-01T16:37:27Z", "updated_at": "2019-09-24T23:47:45Z", "closed_at": null, "author_association": "NONE", "body": "### Existing URLs containing the issue:\r\nhttps://www.tensorflow.org/versions/r2.0/api_docs/python/tf/image/extract_image_patches\r\n\r\n### Description of issue (what needs changing):\r\n\r\n- #### Clear Description\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Only a single sentence description is provided.\r\n\r\n- #### Usage Example\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No usage example is provided.\r\n\r\n- #### Raises Listed and Defined\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Errors are not defined.\r\n\r\n- #### Visuals, if Applicable\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No visuals are included.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28313", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28313/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28313/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28313/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28313", "id": 439216805, "node_id": "MDU6SXNzdWU0MzkyMTY4MDU=", "number": 28313, "title": "3D CNN with tf.nn.conv3d_transpose on CPU: 50-100 GB RAM free but segfault + \"terminate called after throwing an instance of 'std::bad_alloc' what(): std::bad_alloc\"", "user": {"login": "TeoZosa", "id": 13070236, "node_id": "MDQ6VXNlcjEzMDcwMjM2", "avatar_url": "https://avatars0.githubusercontent.com/u/13070236?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TeoZosa", "html_url": "https://github.com/TeoZosa", "followers_url": "https://api.github.com/users/TeoZosa/followers", "following_url": "https://api.github.com/users/TeoZosa/following{/other_user}", "gists_url": "https://api.github.com/users/TeoZosa/gists{/gist_id}", "starred_url": "https://api.github.com/users/TeoZosa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TeoZosa/subscriptions", "organizations_url": "https://api.github.com/users/TeoZosa/orgs", "repos_url": "https://api.github.com/users/TeoZosa/repos", "events_url": "https://api.github.com/users/TeoZosa/events{/privacy}", "received_events_url": "https://api.github.com/users/TeoZosa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1501014628, "node_id": "MDU6TGFiZWwxNTAxMDE0NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0-rc0", "name": "TF 2.0-rc0", "color": "12ce7d", "default": false, "description": "Issues related to TF 2.0-rc0"}, {"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 9, "created_at": "2019-05-01T15:59:24Z", "updated_at": "2019-10-01T21:55:57Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): **YES**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): **Linux Ubuntu 18.04 (three machines) & Windows 10 Pro (two machines)**\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: **N/A**\r\n- TensorFlow installed from (source or binary): **binary; tensorflow-gpu2.0.0alpha0 (Windows machines), tensorflow/tensorflow:2.0.0a0-py3-jupyter docker image (Ubuntu 18.04 machines)**\r\n- TensorFlow version (use command below): **v1.12.0-9492-g2c319fb415 2.0.0-alpha0 (Windows)**\r\n- Python version: **3.6.4 (Windows)**\r\n- Bazel version (if compiling from source): **N/A**\r\n- GCC/Compiler version (if compiling from source): **N/A**\r\n- CUDA/cuDNN version: **10/7.4.1 (Windows); N/A (Ubuntu 18.04)**\r\n- GPU model and memory: **Titan RTX (Windows machine 1); GTX 1080 (Windows machine 2); CPU-only (Ubuntu 18.04 machines 1-3)**\r\n\r\nAll machines specs:\r\n- CPUs: **Dual socket, 8 cores each CPU (Xeon E5-2670, E5-2687w on the machine with the Titan RTX), 32 total logical processors.** \r\n- RAM: **128 GB**  \r\n\r\n**Describe the current behavior**\r\n\r\n3D CNN with deconvolution (tf.nn.conv3d_transpose) to upsample 1 channel volumes x2 in all three dimensions. Training on GPU and using 64^3 image patches works fine. For inference I moved ops to the CPU in order to handle large volumes that wouldn't otherwise fit in GPU memory. But now I have run into the below errors:\r\n\r\n1. Frequent crashes when using more than 50% of available CPU cores. On Ubuntu 18.04 it completely kills the node and I have to physically power cycle the machine. On Windows, I'm lucky if it doesn't freeze indefinitely at a blue screen. \r\n\r\n2. Visual bug for inputs >~130^3 (generally whenever it gives me a warning that I'm allocating >10% of system memory) where the last slices of the volume converge to intensity ~ 0.39 (coincidentally, very close to a constant that the model adds to the output to correct for grayscale intensity). This get progressively worse with larger volumes (~130^3 < dims < ~175^3)\r\n\r\n3. Segfault for inputs > ~175^3. \r\nExample output: \r\n\r\n**On Windows:** \r\n2019-04-26 14:56:19.461143: W tensorflow/core/framework/allocator.cc:124] Allocation of 20320616448 exceeds 10% of system memory.\r\n2019-04-26 14:58:23.532021: W tensorflow/core/framework/allocator.cc:124] Allocation of 20320616448 exceeds 10% of system memory.\r\n2019-04-26 14:58:23.532021: W tensorflow/core/framework/allocator.cc:124] Allocation of 20320616448 exceeds 10% of system memory.\r\nSegmentation Fault\r\n\r\nNote: It once gave me a popup with an error of the form, \"Instruction at 0xDED referenced memory at 0XBEEF. The memory could not be read\".   \r\n\r\n**On Ubuntu 18.04: ** \r\n2019-05-01 02:29:47.571830: W tensorflow/core/framework/allocator.cc:116] Allocation of 26311577600 exceeds 10% of system memory.\r\nterminate called after throwing an instance of 'std::bad_alloc' what(): std::bad_alloc\r\n\r\n**Note:** I generally still have 50-100 GB of free memory when these errors occur so it's not for lack of memory. \r\n**Note:**: I have replicated this phenomenon across all machines using just CPU. On the Windows machines, I get the same results when I have attempted to move all ops to the GPU save for deconvolution (which will not fit on the GPU).\r\n\r\n**Describe the expected behavior**\r\nNo crashing, processing large inputs if available resources allow. \r\n\r\n\r\n**Code to reproduce the issue**\r\nN/A\r\n\r\n**Other info / logs**\r\nN/A\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28310", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28310/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28310/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28310/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28310", "id": 439190809, "node_id": "MDU6SXNzdWU0MzkxOTA4MDk=", "number": 28310, "title": "tf.hessians fails when applied to the output of a RNN", "user": {"login": "csejourne", "id": 20618617, "node_id": "MDQ6VXNlcjIwNjE4NjE3", "avatar_url": "https://avatars1.githubusercontent.com/u/20618617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/csejourne", "html_url": "https://github.com/csejourne", "followers_url": "https://api.github.com/users/csejourne/followers", "following_url": "https://api.github.com/users/csejourne/following{/other_user}", "gists_url": "https://api.github.com/users/csejourne/gists{/gist_id}", "starred_url": "https://api.github.com/users/csejourne/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/csejourne/subscriptions", "organizations_url": "https://api.github.com/users/csejourne/orgs", "repos_url": "https://api.github.com/users/csejourne/repos", "events_url": "https://api.github.com/users/csejourne/events{/privacy}", "received_events_url": "https://api.github.com/users/csejourne/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-05-01T14:49:27Z", "updated_at": "2019-05-13T23:52:28Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Windows 10 and Ubuntu 18.04\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: No\r\n- **TensorFlow installed from (source or binary)**: binary: conda install tensorflow\r\n- **TensorFlow version (use command below)**: 1.13.1\r\n- **Python version**: both 3.6.8 and 3.7.3\r\n- **Bazel version (if compiling from source)**: None\r\n- **GCC/Compiler version (if compiling from source)**: None\r\n- **CUDA/cuDNN version**: None\r\n- **GPU model and memory**: Not used\r\n- **Exact command to reproduce**: none\r\n\r\n### Describe the problem\r\nI need to compute the hessians of a **tensor** output from a **RNN** structure w.r.t to its inputs. However, this leads to an error reported in the joint file. I think it is a bug as just replacing ``tf.hessians`` by ``tf.gradients`` leads to a working code.\r\n\r\nI think it may be due to an low-level implementation of RNN cells with ``tf.while_loop``s, as indicated by the error.\r\n\r\n### Source code / logs\r\n```\r\nimport tensorflow as tf\r\nfrom tensorflow.keras.layers import RNN, GRUCell, Dense\r\n\r\n# Define size of variable. TODO: adapt to data\r\ninp_dim = 2\r\nnum_units = 50\r\nbatch_size = 100\r\ntimesteps = 10\r\n\r\n# Reset the graph, so as to avoid errors\r\ntf.reset_default_graph()\r\n\r\ninputs = tf.ones(shape=(timesteps, batch_size, inp_dim))\r\n\r\n### Building the model\r\ncells = [GRUCell(num_units), GRUCell(num_units)]\r\nrnn = RNN(cells, time_major=True, return_sequences=True)\r\nfinal_layer = Dense(1, input_shape=(num_units,))\r\n\r\n# Apply to inputs\r\nlast_state = rnn(inputs)\r\nf = final_layer(last_state)\r\n\r\n[derivs] = tf.hessians(f, inputs)\r\n\r\nwith tf.Session() as sess:\r\n    sess.run(tf.global_variables_initializer())\r\n    grads = sess.run(derivs)\r\n```\r\n[stacktrace.log](https://github.com/tensorflow/tensorflow/files/3134827/stacktrace.log)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28309", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28309/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28309/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28309/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28309", "id": 439190111, "node_id": "MDU6SXNzdWU0MzkxOTAxMTE=", "number": 28309, "title": "Errors in tensorflow/stream_executor/gpu/gpu_timer.cc while compiling on Windows with XLA enabled", "user": {"login": "Stepiii", "id": 9701284, "node_id": "MDQ6VXNlcjk3MDEyODQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/9701284?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Stepiii", "html_url": "https://github.com/Stepiii", "followers_url": "https://api.github.com/users/Stepiii/followers", "following_url": "https://api.github.com/users/Stepiii/following{/other_user}", "gists_url": "https://api.github.com/users/Stepiii/gists{/gist_id}", "starred_url": "https://api.github.com/users/Stepiii/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Stepiii/subscriptions", "organizations_url": "https://api.github.com/users/Stepiii/orgs", "repos_url": "https://api.github.com/users/Stepiii/repos", "events_url": "https://api.github.com/users/Stepiii/events{/privacy}", "received_events_url": "https://api.github.com/users/Stepiii/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133285679, "node_id": "MDU6TGFiZWwxMTMzMjg1Njc5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:xla", "name": "comp:xla", "color": "0052cc", "default": false, "description": ""}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-05-01T14:47:21Z", "updated_at": "2019-10-18T17:22:27Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10 64 bit\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: checkout from `master` branch\r\n- Python version: Python 3.6.8 :: Anaconda, Inc.\r\n- Installed using virtualenv? pip? conda?: conda 4.6.14\r\n- Bazel version (if compiling from source): 0.24.1\r\n- GCC/Compiler version (if compiling from source): cl.exe C/C++ Optimizing Compiler Version 19.16.27030.1 for x64, Visual Studio Build Tools 2017\r\n- CUDA/cuDNN version: CUDA Toolkit V10.0.130, cuDNN 7.5.0\r\n- GPU model and memory: GTX 1060 6GB\r\n\r\n**Describe the problem**\r\n```\r\ntensorflow/stream_executor/gpu/gpu_timer.cc(29): error C2039: 'CreateEventA': is not a member of 'stream_executor::gpu::GpuDriver'\r\ntensorflow/stream_executor/gpu/gpu_timer.cc(29): error C2660: 'CreateEventA': function does not take 3 arguments\r\ntensorflow/stream_executor/gpu/gpu_timer.cc(36): error C2039: 'CreateEventA': is not a member of 'stream_executor::gpu::GpuDriver'\r\ntensorflow/stream_executor/gpu/gpu_timer.cc(36): error C2660: 'CreateEventA': function does not take 3 arguments\r\n```\r\n\r\nIn tensorflow/stream_executor/gpu/gpu_timer.cc(29) the function is `CreateEvent`:\r\n\r\n```c++\r\n29  port::Status status = GpuDriver::CreateEvent(context, &start_event_,\r\n30                                               GpuDriver::EventFlags::kDefault);\r\n```\r\n\r\nBut compiler looks for `CreateEventA`. Maybe there is a Windows macro conflicting with that symbol.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n```bash\r\n(neural) Stepii@STEPII D:\\Neural\\tensorflow\r\n$ python configure.py\r\nWARNING: --batch mode is deprecated. Please instead explicitly shut down your Bazel server using the command \"bazel shutdown\".\r\nYou have bazel 0.24.1 installed.\r\nPlease specify the location of python. [Default is D:\\Programs\\Anaconda3\\envs\\neural\\python.exe]:\r\n\r\n\r\nFound possible Python library paths:\r\n  D:\\Programs\\Anaconda3\\envs\\neural\\lib\\site-packages\r\nPlease input the desired Python library path to use.  Default is [D:\\Programs\\Anaconda3\\envs\\neural\\lib\\site-packages]\r\n\r\nDo you wish to build TensorFlow with XLA JIT support? [y/N]: y\r\nXLA JIT support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with ROCm support? [y/N]:\r\nNo ROCm support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with CUDA support? [y/N]: y\r\nCUDA support will be enabled for TensorFlow.\r\n\r\nFound CUDA 10.0 in:\r\n    C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.0/lib/x64\r\n    C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.0/include\r\nFound cuDNN 7 in:\r\n    C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.0/lib/x64\r\n    C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.0/include\r\n\r\n\r\nPlease specify a list of comma-separated CUDA compute capabilities you want to build with.\r\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\r\nPlease note that each additional compute capability significantly increases your build time and binary size, and that TensorFlow only supports compute capabilities >= 3.5 [Default is: 3.5,7.0]: 6.1\r\n\r\n\r\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is /arch:AVX]: /arch:AVX2\r\n\r\n\r\nWould you like to override eigen strong inline for some C++ compilation to reduce the compilation time? [Y/n]:\r\nEigen strong inline overridden.\r\n\r\nPreconfigured Bazel build configs. You can use any of the below by adding \"--config=<>\" to your build command. See .bazelrc for more details.\r\n        --config=mkl            # Build with MKL support.\r\n        --config=monolithic     # Config for mostly static monolithic build.\r\n        --config=gdr            # Build with GDR support.\r\n        --config=verbs          # Build with libverbs support.\r\n        --config=ngraph         # Build with Intel nGraph support.\r\n        --config=numa           # Build with NUMA support.\r\n        --config=dynamic_kernels        # (Experimental) Build kernels into separate shared objects.\r\nPreconfigured Bazel build configs to DISABLE default on features:\r\n        --config=noaws          # Disable AWS S3 filesystem support.\r\n        --config=nogcp          # Disable GCP support.\r\n        --config=nohdfs         # Disable HDFS support.\r\n        --config=noignite       # Disable Apache Ignite support.\r\n        --config=nokafka        # Disable Apache Kafka support.\r\n        --config=nonccl         # Disable NVIDIA NCCL support.\r\n\r\n(neural) Stepii@STEPII D:\\Neural\\tensorflow\r\n$ bazel build --config=opt --define=no_tensorflow_py_deps=true //tensorflow/tools/pip_package:build_pip_package -j 12\r\n\r\n[...]\r\n\r\nERROR: D:/neural/tensorflow/tensorflow/stream_executor/gpu/BUILD:168:1: C++ compilation of rule '//tensorflow/stream_executor/gpu:gpu_timer' failed (Exit 2): python.exe failed: error executing command\r\n  cd C:/users/stepii/_bazel_stepii/5mniti2w/execroot/org_tensorflow\r\n  SET CUDA_TOOLKIT_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.0\r\n    SET INCLUDE=C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\ATLMFC\\include;C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\include;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\ucrt;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\shared;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\winrt;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\cppwinrt\r\n    SET LIB=C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\ATLMFC\\lib\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\lib\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.17763.0\\ucrt\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.17763.0\\um\\x64;\r\n    SET PATH=C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.16.27023\\bin\\HostX64\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019A26nPRjStR25RPVWFZL5iMn5PgXYVtDTages;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019A26nPRe3js3W69CrGF8kKXvvmYtT4zNGqicXRjvuAnmmbvPZXu5yRJVindow;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019A26nPRe3js3W69CrGF8kKXvvmYtT4zNGqicXRjvuAnmmbvPZXu5yRJVx9R2xvWau\\Team Explorer;C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\MSBuild\\15.0\\bin\\Roslyn;C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\Team Tools\\Performance Tools\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\Team Tools\\Performance Tools;C:\\Program Files (x86)\\Microsoft Visual SXgi164MCGG3u5RKXaBGVBabmxQTVRAAVE5tDTools\\\\x64;C:\\Program Files (x86)\\Microsoft Visual SXgi164MCGG3u5RKXaBGVBabmxQTVRAAVE5tDTools\\;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\10.0.17763.0\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\\\MSBuild\\15.0\\bin;C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319;C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\Common7\\IDE\\;C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\Common7\\Tools\\;;C:\\Windows\\system32;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019A26nPRe3js3W69CrGF8kKXvvmYtT4zNGqicXRjvuAnmmbvPZXu5yRJVx9R2xvWaun;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019A26nPRe3js3W69CrGF8kKXvvmYtT4zNGqicXRjvuAnmmbvPZXu5yRJV\\Ninja\r\n    SET PWD=/proc/self/cwd\r\n    SET PYTHON_BIN_PATH=D:/Programs/Anaconda3/envs/neural/python.exe\r\n    SET PYTHON_LIB_PATH=D:/Programs/Anaconda3/envs/neural/lib/site-packages\r\n    SET TEMP=C:\\Users\\Stepii\\AppData\\Local\\Temp\r\n    SET TF_CONFIGURE_IOS=0\r\n    SET TF_CUDA_CLANG=0\r\n    SET TF_CUDA_COMPUTE_CAPABILITIES=6.1\r\n    SET TF_NEED_CUDA=1\r\n    SET TF_NEED_OPENCL_SYCL=0\r\n    SET TF_NEED_ROCM=0\r\n    SET TF_NEED_TENSORRT=0\r\n    SET TMP=C:\\Users\\Stepii\\AppData\\Local\\Temp\r\n  D:/Programs/Anaconda3/envs/neural/python.exe -B external/local_config_cuda/crosstool/windows/msvc_wrapper_for_nvcc.py /nologo /DCOMPILER_MSVC /DNOMINMAX /D_WIN32_WINNT=0x0600 /D_CRT_SECURE_NO_DEPRECATE /D_CRT_SECURE_NO_WARNINGS /D_SXgi164MCGG3u5RKXaBGVBabmxQTVRAAVE5tDTGS /bigobj /Zm500 /J /Gy /GF /EHsc /wd4351 /wd4291 /wd4250 /wd4996 /I. /Ibazel-out/x64_windows-opt/genfiles /Ibazel-out/x64_windows-opt/bin /Iexternal/com_google_absl /Ibazel-out/x64_windows-opt/genfiles/external/com_google_absl /Ibazel-out/x64_windows-opt/bin/external/com_google_absl /Iexternal/nsync /Ibazel-out/x64_windows-opt/genfiles/external/nsync /Ibazel-out/x64_windows-opt/bin/external/nsync /Iexternal/eigen_archive /Ibazel-out/x64_windows-opt/genfiles/external/eigen_archive /Ibazel-out/x64_windows-opt/bin/external/eigen_archive /Iexternal/local_config_sycl /Ibazel-out/x64_windows-opt/genfiles/external/local_config_sycl /Ibazel-out/x64_windows-opt/bin/external/local_config_sycl /Iexternal/gif_archive /Ibazel-out/x64_windows-opt/genfiles/external/gif_archive /Ibazel-out/x64_windows-opt/bin/external/gif_archive /Iexternal/jpeg /Ibazel-out/x64_windows-opt/genfiles/external/jpeg /Ibazel-out/x64_windows-opt/bin/external/jpeg /Iexternal/protobuf_archive /Ibazel-out/x64_windows-opt/genfiles/external/protobuf_archive /Ibazel-out/x64_windows-opt/bin/external/protobuf_archive /Iexternal/com_googlesource_code_re2 /Ibazel-out/x64_windows-opt/genfiles/external/com_googlesource_code_re2 /Ibazel-out/x64_windows-opt/bin/external/com_googlesource_code_re2 /Iexternal/farmhash_archive /Ibazel-out/x64_windows-opt/genfiles/external/farmhash_archive /Ibazel-out/x64_windows-opt/bin/external/farmhash_archive /Iexternal/fft2d /Ibazel-out/x64_windows-opt/genfiles/external/fft2d /Ibazel-out/x64_windows-opt/bin/external/fft2d /Iexternal/highwayhash /Ibazel-out/x64_windows-opt/genfiles/external/highwayhash /Ibazel-out/x64_windows-opt/bin/external/highwayhash /Iexternal/zlib_archive /Ibazel-out/x64_windows-opt/genfiles/external/zlib_archive /Ibazel-out/x64_windows-opt/bin/external/zlib_archive /Iexternal/double_conversion /Ibazel-out/x64_windows-opt/genfiles/external/double_conversion /Ibazel-out/x64_windows-opt/bin/external/double_conversion /Iexternal/snappy /Ibazel-out/x64_windows-opt/genfiles/external/snappy /Ibazel-out/x64_windows-opt/bin/external/snappy /Iexternal/local_config_cuda /Ibazel-out/x64_windows-opt/genfiles/external/local_config_cuda /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda /Iexternal/nsync/public /Ibazel-out/x64_windows-opt/genfiles/external/nsync/public /Ibazel-out/x64_windows-opt/bin/external/nsync/public /Iexternal/eigen_archive /Ibazel-out/x64_windows-opt/genfiles/external/eigen_archive /Ibazel-out/x64_windows-opt/bin/external/eigen_archive /Iexternal/gif_archive/lib /Ibazel-out/x64_windows-opt/genfiles/external/gif_archive/lib /Ibazel-out/x64_windows-opt/bin/external/gif_archive/lib /Iexternal/gif_archive/windows /Ibazel-out/x64_windows-opt/genfiles/external/gif_archive/windows /Ibazel-out/x64_windows-opt/bin/external/gif_archive/windows /Iexternal/protobuf_archive/src /Ibazel-out/x64_windows-opt/genfiles/external/protobuf_archive/src /Ibazel-out/x64_windows-opt/bin/external/protobuf_archive/src /Iexternal/farmhash_archive/src /Ibazel-out/x64_windows-opt/genfiles/external/farmhash_archive/src /Ibazel-out/x64_windows-opt/bin/external/farmhash_archive/src /Iexternal/zlib_archive /Ibazel-out/x64_windows-opt/genfiles/external/zlib_archive /Ibazel-out/x64_windows-opt/bin/external/zlib_archive /Iexternal/double_conversion /Ibazel-out/x64_windows-opt/genfiles/external/double_conversion /Ibazel-out/x64_windows-opt/bin/external/double_conversion /Iexternal/local_config_cuda/cuda /Ibazel-out/x64_windows-opt/genfiles/external/local_config_cuda/cuda /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda/cuda /Iexternal/local_config_cuda/cuda/cuda/include /Ibazel-out/x64_windows-opt/genfiles/external/local_config_cuda/cuda/cuda/include /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda/cuda/cuda/include /Iexternal/local_config_cuda/cuda/cuda/include/crt /Ibazel-out/x64_windows-opt/genfiles/external/local_config_cuda/cuda/cuda/include/crt /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda/cuda/cuda/include/crt /D__CLANG_SUPPORT_DYN_ANNOTATION__ /DEIGEN_MPL2_ONLY /DEIGEN_MAX_ALIGN_BYTES=64 /DEIGEN_HAS_TYPE_TRAITS=0 /DTF_USE_SNAPPY /showIncludes /MD /O2 /DNDEBUG -w -DWIN32_LEAN_AND_MEAN -DNOGDI /arch:AVX2 /Fobazel-out/x64_windows-opt/bin/tensorflow/stream_executor/gpu/_objs/gpu_timer/gpu_timer.o /c tensorflow/stream_executor/gpu/gpu_timer.cc\r\nExecution platform: @bazel_tools//platforms:host_platform\r\ntensorflow/stream_executor/gpu/gpu_timer.cc(29): error C2039: 'CreateEventA': is not a member of 'stream_executor::gpu::GpuDriver'\r\n.\\tensorflow/stream_executor/gpu/gpu_driver.h(60): note: see declaration of 'stream_executor::gpu::GpuDriver'\r\ntensorflow/stream_executor/gpu/gpu_timer.cc(29): error C2660: 'CreateEventA': function does not take 3 arguments\r\nC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\um\\synchapi.h(469): note: see declaration of 'CreateEventA'\r\ntensorflow/stream_executor/gpu/gpu_timer.cc(36): error C2039: 'CreateEventA': is not a member of 'stream_executor::gpu::GpuDriver'\r\n.\\tensorflow/stream_executor/gpu/gpu_driver.h(60): note: see declaration of 'stream_executor::gpu::GpuDriver'\r\ntensorflow/stream_executor/gpu/gpu_timer.cc(36): error C2660: 'CreateEventA': function does not take 3 arguments\r\nC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\um\\synchapi.h(469): note: see declaration of 'CreateEventA'\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nINFO: Elapsed time: 679.504s, Critical Path: 262.52s\r\nINFO: 1869 processes: 1869 local.\r\nFAILED: Build did NOT complete successfully\r\n```\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n[FullLog.txt](https://github.com/tensorflow/tensorflow/files/3134823/FullLog.txt)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28306", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28306/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28306/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28306/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28306", "id": 439145849, "node_id": "MDU6SXNzdWU0MzkxNDU4NDk=", "number": 28306, "title": "[tflite] CONV_2D with bias tensor index -1 causes type-mismatch RuntimeError", "user": {"login": "syoyo", "id": 18676, "node_id": "MDQ6VXNlcjE4Njc2", "avatar_url": "https://avatars2.githubusercontent.com/u/18676?v=4", "gravatar_id": "", "url": "https://api.github.com/users/syoyo", "html_url": "https://github.com/syoyo", "followers_url": "https://api.github.com/users/syoyo/followers", "following_url": "https://api.github.com/users/syoyo/following{/other_user}", "gists_url": "https://api.github.com/users/syoyo/gists{/gist_id}", "starred_url": "https://api.github.com/users/syoyo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/syoyo/subscriptions", "organizations_url": "https://api.github.com/users/syoyo/orgs", "repos_url": "https://api.github.com/users/syoyo/repos", "events_url": "https://api.github.com/users/syoyo/events{/privacy}", "received_events_url": "https://api.github.com/users/syoyo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-05-01T12:15:03Z", "updated_at": "2019-05-06T20:50:39Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): no\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): r1.13.1\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\nI have created `.tflite` with single `CONV_2D` op with bias tensor index `-1`(= optional).\r\n\r\n\r\nWhen supplying bias tensor `-1`(for making bias optional), it raises RuntimeError when running it in Python interpreter as shown the below(or seg fault/asan error in C++ interpreter) \r\n\r\nSupplying zero-valued bias tensor(i.e. use valid tensor id for bias) passes `AllocateTensors` and `Invoke` without any problem.\r\n\r\nFYI, we cannot omit bias tensor(i.e, `len(inputs) = 2`) since in such case we'll hit another assertion:\r\n\r\nhttps://github.com/tensorflow/tensorflow/blob/r1.13/tensorflow/lite/kernels/conv.cc#L237 \r\n\r\n \r\n**Describe the expected behavior**\r\n\r\nAs described in tflite document:\r\n\r\nhttps://www.tensorflow.org/lite/guide/ops_compatibility\r\n\r\n`CONV_2D` should accept optional bias tensor and does not raise RuntimeError.\r\n\r\n**Code to reproduce the issue**\r\n\r\nSimply run python interepreter with attached `.tfite` file.\r\n\r\n```\r\nimport sys\r\n\r\nimport numpy as np\r\n\r\nimport tensorflow\r\nprint(tensorflow.__version__)\r\nfrom tensorflow.lite.python import interpreter as interpreter_wrapper\r\n\r\ninterpreter = interpreter_wrapper.Interpreter(model_path=sys.argv[1])\r\ninterpreter.allocate_tensors()\r\n\r\ninput_details = interpreter.get_input_details()\r\noutput_details = interpreter.get_output_details()\r\n\r\nprint(input_details)\r\nprint(output_details)\r\n```\r\n\r\n[conv2d_bias_optional.tflite.zip](https://github.com/tensorflow/tensorflow/files/3134449/conv2d_bias_optional.tflite.zip)\r\n\r\n**Other info / logs**\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"bora.py\", line 10, in <module>\r\n    interpreter.allocate_tensors()\r\n  File \"/home/syoyo/miniconda3/envs/onnx-chainer/lib/python3.6/site-packages/tensorflow/lite/python/interpreter.py\", line 73, in allocate_tensors\r\n    return self._interpreter.AllocateTensors()\r\n  File \"/home/syoyo/miniconda3/envs/onnx-chainer/lib/python3.6/site-packages/tensorflow/lite/python/interpreter_wrapper/tensorflow_wrap_interpreter_wrapper.py\", line 106, in AllocateTensors\r\n    return _tensorflow_wrap_interpreter_wrapper.InterpreterWrapper_AllocateTensors(self)\r\nRuntimeError: tensorflow/lite/kernels/conv.cc:247 bias->type != input_type (0 != 1)Node number 0 (CONV_2D) failed to prepare.\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28276", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28276/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28276/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28276/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28276", "id": 438602483, "node_id": "MDU6SXNzdWU0Mzg2MDI0ODM=", "number": 28276, "title": "Graph transform tool  Node Quantization gives error ", "user": {"login": "alexcpn", "id": 1157251, "node_id": "MDQ6VXNlcjExNTcyNTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1157251?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcpn", "html_url": "https://github.com/alexcpn", "followers_url": "https://api.github.com/users/alexcpn/followers", "following_url": "https://api.github.com/users/alexcpn/following{/other_user}", "gists_url": "https://api.github.com/users/alexcpn/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcpn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcpn/subscriptions", "organizations_url": "https://api.github.com/users/alexcpn/orgs", "repos_url": "https://api.github.com/users/alexcpn/repos", "events_url": "https://api.github.com/users/alexcpn/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcpn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545273, "node_id": "MDU6TGFiZWwxMDk3NTQ1Mjcz", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:grappler", "name": "comp:grappler", "color": "0052cc", "default": false, "description": ""}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-04-30T04:48:30Z", "updated_at": "2019-07-02T22:03:19Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- TensorFlow installed from (source or binary): Via Docker tensorflow/serving:1.13.0-gpu \r\n- TensorFlow version (use command below): 1.13\r\n- CUDA/cuDNN version: From Docker  tensorflow/serving:1.13.0-gpu\r\n- GPU model and memory: NVIDIA V100 32 GB\r\n\r\n\r\n**Describe the current behaviour**\r\nAfter Quantizing Weights and Nodes using the Graph transform tool on the SSD model from TF model zoo I get the following error\r\n\r\n**Code snippet**\r\n\r\n```\r\ntransforms = ['add_default_attributes', \\\r\n  'strip_unused_nodes', \\\r\n  'remove_nodes(op=Identity, op=CheckNumerics)',\\\r\n  'fold_constants(ignore_errors=true)',\r\n  'fold_batch_norms',\r\n  'fold_old_batch_norms',\r\n  'quantize_weights',\r\n  'quantize_nodes',\r\n  'strip_unused_nodes',\r\n  'sort_by_execution_order']\r\n\r\noptimize_graph('/coding/ssd_inception_v2_coco_2018_01_28', 'frozen_inference_graph.pb' ,\r\n               transforms, output_node_names,outname='optimized_model_weight_quant.pb')\r\n```\r\n**Error Snippet**\r\n\r\n`details = \"input_max_range must be larger than input_min_range.`\r\n\r\n**Describe the expected behaviour**\r\nShould work\r\n\r\n**Code to reproduce the issue**\r\n\r\nAll details are logged here \r\nhttps://medium.com/@alexcpn/optimizing-any-tensorflow-model-using-tensorflow-transform-tools-and-using-tensorrt-1cc190cafe1f\r\n+ colab here\r\nhttps://colab.research.google.com/drive/1wQpWoc40kf__WSjfTqDaReMx6fFjUn48\r\nClient \r\n\r\n**Other info / logs**\r\nDocker container used for the optimization is : tensorflow/tensorflow:1.13.0rc1-gpu-jupyter\r\nDocker used for serving : tensorflow/serving:1.13.0-gpu \r\nModel used  *ssd_resnet_50_fpn_coco* form TF model zoo -https://github.com/tensorflow/models/blob/master/research/object_detection/g3doc/detection_model_zoo.md\r\n\r\n```\r\n(Got an error, <_Rendezvous of RPC that terminated with:\r\n\tstatus = StatusCode.INVALID_ARGUMENT\r\n\tdetails = \"input_max_range must be larger than input_min_range.\r\n\t [[{{node Postprocessor/BatchMultiClassNonMaxSuppression/map/while/MultiClassNonMaxSuppression/ClipToWindow_87/Area/mul_eightbit/Postprocessor/BatchMultiClassNonMaxSuppression/map/while/MultiClassNonMaxSuppression/ClipToWindow_87/Area/sub_1/quantize}}]]\r\n\t [[{{node Postprocessor/BatchMultiClassNonMaxSuppression/map/while/MultiClassNonMaxSuppression/zeros_like_83}}]]\"\r\n\tdebug_error_string = \"{\"created\":\"@1555723203.356344655\",\"description\":\"Error received from peer\",\"file\":\"src/core/lib/surface/call.cc\",\"file_line\":1036,\"grpc_message\":\"input_max_range must be larger than input_min_range.\\n\\t [[{{node Postprocessor/BatchMultiClassNonMaxSuppression/map/while/MultiClassNonMaxSuppression/ClipToWindow_87/Area/mul_eightbit/Postprocessor/BatchMultiClassNonMaxSuppression/map/while/MultiClassNonMaxSuppression/ClipToWindow_87/Area/sub_1/quantize}}]]\\n\\t [[{{node Postprocessor/BatchMultiClassNonMaxSuppression/map/while/MultiClassNonMaxSuppression/zeros_like_83}}]]\",\"grpc_status\":3}\"\r\n>)\r\n\r\n```\r\n\r\nAlso I tried before running a model that was converted from Keras to tensorflow - Retinanet.(CNN) Again QunatizeNodes did not work with the following error. Colab for that here \r\nhttps://colab.research.google.com/drive/1u79vDN4MZuq6gYIOkPmWsbghjunbDq6m\r\n\r\n```\r\n_Rendezvous: <_Rendezvous of RPC that terminated with:\r\n\tstatus = StatusCode.UNIMPLEMENTED\r\n\tdetails = \"Broadcast between [1,9,4] and [221,1,4] is not supported yet.\r\n\t [[{{node anchors_3/add_2/eightbit}}]]\r\n\t [[{{node filtered_detections/map/while/non_max_suppression_17/NonMaxSuppressionV3}}]]\"\r\n\tdebug_error_string = \"{\"created\":\"@1552348256.140400062\",\"description\":\"Error received from peer\",\"file\":\"src/core/lib/surface/call.cc\",\"file_line\":1017,\"grpc_message\":\"Broadcast between [1,9,4] and [221,1,4] is not supported yet.\\n\\t [[{{node anchors_3/add_2/eightbit}}]]\\n\\t [[{{node filtered_detections/map/while/non_max_suppression_17/NonMaxSuppressionV3}}]]\",\"grpc_status\":12}\"\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28275", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28275/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28275/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28275/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28275", "id": 438574761, "node_id": "MDU6SXNzdWU0Mzg1NzQ3NjE=", "number": 28275, "title": "Add `saving_listeners` arg to `TrainSpec`", "user": {"login": "jschneier", "id": 2245080, "node_id": "MDQ6VXNlcjIyNDUwODA=", "avatar_url": "https://avatars2.githubusercontent.com/u/2245080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jschneier", "html_url": "https://github.com/jschneier", "followers_url": "https://api.github.com/users/jschneier/followers", "following_url": "https://api.github.com/users/jschneier/following{/other_user}", "gists_url": "https://api.github.com/users/jschneier/gists{/gist_id}", "starred_url": "https://api.github.com/users/jschneier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jschneier/subscriptions", "organizations_url": "https://api.github.com/users/jschneier/orgs", "repos_url": "https://api.github.com/users/jschneier/repos", "events_url": "https://api.github.com/users/jschneier/events{/privacy}", "received_events_url": "https://api.github.com/users/jschneier/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "saeta", "id": 1284535, "node_id": "MDQ6VXNlcjEyODQ1MzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1284535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saeta", "html_url": "https://github.com/saeta", "followers_url": "https://api.github.com/users/saeta/followers", "following_url": "https://api.github.com/users/saeta/following{/other_user}", "gists_url": "https://api.github.com/users/saeta/gists{/gist_id}", "starred_url": "https://api.github.com/users/saeta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saeta/subscriptions", "organizations_url": "https://api.github.com/users/saeta/orgs", "repos_url": "https://api.github.com/users/saeta/repos", "events_url": "https://api.github.com/users/saeta/events{/privacy}", "received_events_url": "https://api.github.com/users/saeta/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "saeta", "id": 1284535, "node_id": "MDQ6VXNlcjEyODQ1MzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1284535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saeta", "html_url": "https://github.com/saeta", "followers_url": "https://api.github.com/users/saeta/followers", "following_url": "https://api.github.com/users/saeta/following{/other_user}", "gists_url": "https://api.github.com/users/saeta/gists{/gist_id}", "starred_url": "https://api.github.com/users/saeta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saeta/subscriptions", "organizations_url": "https://api.github.com/users/saeta/orgs", "repos_url": "https://api.github.com/users/saeta/repos", "events_url": "https://api.github.com/users/saeta/events{/privacy}", "received_events_url": "https://api.github.com/users/saeta/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-04-30T01:53:09Z", "updated_at": "2019-05-01T17:41:01Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 1.12.0 but this feature does not exist on 1.13.x either nor 2.0.\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\n`(Estimator|TPUEstimator).train()` accepts a `saving_listeners` kwarg.  `TrainSpec` does not. It's strange because `TrainSpec` can be configured with every other argument to `.train`.\r\n\r\n**Will this change the current api? How?**\r\n\r\nYes, it will add a `saving_listeners` arg to `TrainSpec` that can be passed down to `.train`.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nAnyone expecting a consistent interface and a single place to configure training.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28264", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28264/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28264/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28264/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28264", "id": 438407535, "node_id": "MDU6SXNzdWU0Mzg0MDc1MzU=", "number": 28264, "title": "CPU support for dilation rates larger than 1", "user": {"login": "bugie", "id": 711929, "node_id": "MDQ6VXNlcjcxMTkyOQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/711929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bugie", "html_url": "https://github.com/bugie", "followers_url": "https://api.github.com/users/bugie/followers", "following_url": "https://api.github.com/users/bugie/following{/other_user}", "gists_url": "https://api.github.com/users/bugie/gists{/gist_id}", "starred_url": "https://api.github.com/users/bugie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bugie/subscriptions", "organizations_url": "https://api.github.com/users/bugie/orgs", "repos_url": "https://api.github.com/users/bugie/repos", "events_url": "https://api.github.com/users/bugie/events{/privacy}", "received_events_url": "https://api.github.com/users/bugie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "timshen91", "id": 1157432, "node_id": "MDQ6VXNlcjExNTc0MzI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1157432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timshen91", "html_url": "https://github.com/timshen91", "followers_url": "https://api.github.com/users/timshen91/followers", "following_url": "https://api.github.com/users/timshen91/following{/other_user}", "gists_url": "https://api.github.com/users/timshen91/gists{/gist_id}", "starred_url": "https://api.github.com/users/timshen91/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timshen91/subscriptions", "organizations_url": "https://api.github.com/users/timshen91/orgs", "repos_url": "https://api.github.com/users/timshen91/repos", "events_url": "https://api.github.com/users/timshen91/events{/privacy}", "received_events_url": "https://api.github.com/users/timshen91/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "timshen91", "id": 1157432, "node_id": "MDQ6VXNlcjExNTc0MzI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1157432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timshen91", "html_url": "https://github.com/timshen91", "followers_url": "https://api.github.com/users/timshen91/followers", "following_url": "https://api.github.com/users/timshen91/following{/other_user}", "gists_url": "https://api.github.com/users/timshen91/gists{/gist_id}", "starred_url": "https://api.github.com/users/timshen91/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timshen91/subscriptions", "organizations_url": "https://api.github.com/users/timshen91/orgs", "repos_url": "https://api.github.com/users/timshen91/repos", "events_url": "https://api.github.com/users/timshen91/events{/privacy}", "received_events_url": "https://api.github.com/users/timshen91/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-04-29T16:44:24Z", "updated_at": "2020-03-05T15:33:30Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- TensorFlow version (you are using): 1.13.1\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nCurrent behavior for a model we are training is that CPU training yields errors:\r\n`tensorflow/core/common_runtime/executor.cc:624] Executor failed to create kernel. Invalid argument: Current libxsmm and customized CPU implementations do not yet support dilation rates larger than 1.\r\n         [[{{node Train_1/Optimizer/TrainOperation/gradients/Conv2D_72_grad/Conv2DBackpropFilter}}]]\r\n`\r\n\r\nGPU training is successful. We would like to have parity between CPU and GPU train as not all developers have a local GPU host. This appears to be a documented issue but I could not find any mention of when it may be fixed or what may be blocking this issue. \r\n\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/conv_grad_filter_ops.cc#L223\r\n\r\nThis is a feature request to complete the TODO mentioned in the above link. \r\n\r\n**Will this change the current api? How?**\r\n\r\n**Who will benefit with this feature?**\r\nAnyone that is trying to train on CPU for dilated convolutions\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28238", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28238/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28238/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28238/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28238", "id": 438088426, "node_id": "MDU6SXNzdWU0MzgwODg0MjY=", "number": 28238, "title": "[TF 2.0 API Docs] tf.audio.encode_wav", "user": {"login": "missaugustina", "id": 101733, "node_id": "MDQ6VXNlcjEwMTczMw==", "avatar_url": "https://avatars3.githubusercontent.com/u/101733?v=4", "gravatar_id": "", "url": "https://api.github.com/users/missaugustina", "html_url": "https://github.com/missaugustina", "followers_url": "https://api.github.com/users/missaugustina/followers", "following_url": "https://api.github.com/users/missaugustina/following{/other_user}", "gists_url": "https://api.github.com/users/missaugustina/gists{/gist_id}", "starred_url": "https://api.github.com/users/missaugustina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/missaugustina/subscriptions", "organizations_url": "https://api.github.com/users/missaugustina/orgs", "repos_url": "https://api.github.com/users/missaugustina/repos", "events_url": "https://api.github.com/users/missaugustina/events{/privacy}", "received_events_url": "https://api.github.com/users/missaugustina/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-04-28T18:58:48Z", "updated_at": "2019-05-08T13:20:39Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "API Doc update for https://www.tensorflow.org/versions/r2.0/api_docs/python/tf/audio/encode_wav\r\n\r\nCorrect links? No\r\nClear Description? No\r\nUsage Example?\r\nParameters Defined? Yes, not verified against current code\r\nReturns defined? Yes, not verified against current code\r\nRaises listed and defined? No\r\nVisuals, if applicable? No\r\n\r\nI will submit a PR, please assign this bug to me.\r\n\r\nPart of Issue #28237 & Issue #28236 "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28237", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28237/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28237/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28237/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28237", "id": 438088367, "node_id": "MDU6SXNzdWU0MzgwODgzNjc=", "number": 28237, "title": "[TF 2.0 API Docs] tf.audio.decode_wav", "user": {"login": "missaugustina", "id": 101733, "node_id": "MDQ6VXNlcjEwMTczMw==", "avatar_url": "https://avatars3.githubusercontent.com/u/101733?v=4", "gravatar_id": "", "url": "https://api.github.com/users/missaugustina", "html_url": "https://github.com/missaugustina", "followers_url": "https://api.github.com/users/missaugustina/followers", "following_url": "https://api.github.com/users/missaugustina/following{/other_user}", "gists_url": "https://api.github.com/users/missaugustina/gists{/gist_id}", "starred_url": "https://api.github.com/users/missaugustina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/missaugustina/subscriptions", "organizations_url": "https://api.github.com/users/missaugustina/orgs", "repos_url": "https://api.github.com/users/missaugustina/repos", "events_url": "https://api.github.com/users/missaugustina/events{/privacy}", "received_events_url": "https://api.github.com/users/missaugustina/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-04-28T18:58:13Z", "updated_at": "2019-09-25T12:20:39Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "API doc update for https://www.tensorflow.org/versions/r2.0/api_docs/python/tf/audio/decode_wav\r\n\r\nCorrect links? No\r\nClear Description? No\r\nUsage Example?\r\nParameters Defined? Yes, not verified against current code\r\nReturns defined? Yes, not verified against current code\r\nRaises listed and defined? No\r\nVisuals, if applicable? No\r\n\r\nI will submit a PR, please assign this bug to me.\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28236", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28236/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28236/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28236/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28236", "id": 438087827, "node_id": "MDU6SXNzdWU0MzgwODc4Mjc=", "number": 28236, "title": "[TF 2.0 API Docs] tf.audio", "user": {"login": "missaugustina", "id": 101733, "node_id": "MDQ6VXNlcjEwMTczMw==", "avatar_url": "https://avatars3.githubusercontent.com/u/101733?v=4", "gravatar_id": "", "url": "https://api.github.com/users/missaugustina", "html_url": "https://github.com/missaugustina", "followers_url": "https://api.github.com/users/missaugustina/followers", "following_url": "https://api.github.com/users/missaugustina/following{/other_user}", "gists_url": "https://api.github.com/users/missaugustina/gists{/gist_id}", "starred_url": "https://api.github.com/users/missaugustina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/missaugustina/subscriptions", "organizations_url": "https://api.github.com/users/missaugustina/orgs", "repos_url": "https://api.github.com/users/missaugustina/repos", "events_url": "https://api.github.com/users/missaugustina/events{/privacy}", "received_events_url": "https://api.github.com/users/missaugustina/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-04-28T18:52:01Z", "updated_at": "2019-05-06T23:29:54Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "Docs update for https://www.tensorflow.org/versions/r2.0/api_docs/python/tf/audio\r\n\r\nNeeds high level description & usage example\r\n\r\nI plan to submit a PR for this issue, please assign to me"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28230", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28230/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28230/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28230/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28230", "id": 438058230, "node_id": "MDU6SXNzdWU0MzgwNTgyMzA=", "number": 28230, "title": "[tf.keras.layers.ReLU] Layer returns 0 if threshold is negative and max_value is set", "user": {"login": "pwasows", "id": 9303779, "node_id": "MDQ6VXNlcjkzMDM3Nzk=", "avatar_url": "https://avatars1.githubusercontent.com/u/9303779?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pwasows", "html_url": "https://github.com/pwasows", "followers_url": "https://api.github.com/users/pwasows/followers", "following_url": "https://api.github.com/users/pwasows/following{/other_user}", "gists_url": "https://api.github.com/users/pwasows/gists{/gist_id}", "starred_url": "https://api.github.com/users/pwasows/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pwasows/subscriptions", "organizations_url": "https://api.github.com/users/pwasows/orgs", "repos_url": "https://api.github.com/users/pwasows/repos", "events_url": "https://api.github.com/users/pwasows/events{/privacy}", "received_events_url": "https://api.github.com/users/pwasows/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-04-28T13:45:58Z", "updated_at": "2019-05-09T19:00:03Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): **yes**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): **Ubuntu 18.04.2 LTS**\r\n- TensorFlow installed from (source or binary): **source**\r\n- TensorFlow version (use command below): **1.12.2**\r\n- Python version: **3.6.7**\r\n- Bazel version (if compiling from source): **0.17.2**\r\n- GCC/Compiler version (if compiling from source): **gcc version 7.3.0 (Ubuntu 7.3.0-27ubuntu1~18.04)** \r\n- CUDA/cuDNN version:  **no gpu**\r\n- GPU model and memory: **no gpu**\r\n\r\n**The expected behavior**\r\nAccording to the [documentation](https://www.tensorflow.org/api_docs/python/tf/keras/layers/ReLU#class_relu) of _tf.keras.layers.ReLU_ (formatted for readability): \r\n\r\n> With default values, it returns element-wise max(x, 0).\r\n> \r\n> Otherwise, it follows: \r\n> f(x) = max_value for x >= max_value\r\n> f(x) = x for threshold <= x < max_value\r\n> f(x) = negative_slope * (x - threshold) otherwise\r\n\r\n**Current behavior**\r\n_tf.keras.layers.ReLU()_ returns 0 when:\r\n\r\n1. threshold is set to xt < 0\r\n2. max_value is set\r\n3. the layer is fed with a value between xt and 0\r\n\r\nFor example, evaluating:\r\n```\r\nt1 = tf.Variable(-0.5, dtype=tf.float32)\r\ntf.keras.layers.ReLU(max_value=1.0, threshold=-1.0)(t1)\r\n```\r\n\r\nresults in 0, although I think, it should return -0.5.\r\n\r\n**Code to reproduce the issue**\r\n\r\nYou can run the following script to see the problem (you'll need to install matplotlib).\r\n`test_relu`  computes ReLU values in the manner described in the documentation.\r\n\r\n```\r\nfrom matplotlib import pyplot as plt\r\nimport numpy as np\r\n\r\nimport tensorflow as tf\r\n\r\nsession = tf.Session()\r\nxs = np.linspace(-3, 3, 100)\r\n\r\nt1 = tf.Variable(0, dtype=tf.float32)\r\ntf_ys = [session.run(tf.keras.layers.ReLU(max_value=1.0, threshold=-1.0)(t1), feed_dict={t1: x})\r\n         for x in xs]\r\n\r\n\r\ndef test_relu(x, max_value, threshold, negative_slope):\r\n    if x >= max_value:\r\n        return max_value\r\n    elif threshold <= x and x < max_value:\r\n        return x\r\n    else:\r\n        return negative_slope * (x - threshold)\r\n\r\n\r\ntest_ys = [test_relu(x, 1, -1, 0) for x in xs]\r\nplt.subplot(2, 1, 1)\r\nplt.plot(xs, tf_ys)\r\nplt.ylabel('tf.keras.layers.ReLU')\r\nplt.subplot(2, 1, 2)\r\nplt.plot(xs, test_ys)\r\nplt.ylabel('test_relu')\r\nplt.xlabel('x')\r\nplt.show()\r\n```\r\nThe script shows the following plots. You can see the difference between expected _test_relu_ and actual ReLU values.\r\n![relu](https://user-images.githubusercontent.com/9303779/56865174-2fa30080-69cb-11e9-9d0e-b6b49e3b0530.png)\r\n\r\nI guess, the problem might be caused by [this line](https://github.com/tensorflow/tensorflow/blob/6b634657d8ff1355132c3838271e4f569d1ffaba/tensorflow/python/keras/backend.py#L3491) of TensorFlow source code, where output is clipped to 0 regardless of the threshold."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28225", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28225/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28225/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28225/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28225", "id": 438041311, "node_id": "MDU6SXNzdWU0MzgwNDEzMTE=", "number": 28225, "title": "matmul gives different results for tensor based on shape", "user": {"login": "fast-reflexes", "id": 2438128, "node_id": "MDQ6VXNlcjI0MzgxMjg=", "avatar_url": "https://avatars2.githubusercontent.com/u/2438128?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fast-reflexes", "html_url": "https://github.com/fast-reflexes", "followers_url": "https://api.github.com/users/fast-reflexes/followers", "following_url": "https://api.github.com/users/fast-reflexes/following{/other_user}", "gists_url": "https://api.github.com/users/fast-reflexes/gists{/gist_id}", "starred_url": "https://api.github.com/users/fast-reflexes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fast-reflexes/subscriptions", "organizations_url": "https://api.github.com/users/fast-reflexes/orgs", "repos_url": "https://api.github.com/users/fast-reflexes/repos", "events_url": "https://api.github.com/users/fast-reflexes/events{/privacy}", "received_events_url": "https://api.github.com/users/fast-reflexes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-04-28T10:30:36Z", "updated_at": "2020-03-17T17:37:40Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10 Pro N, 64-bit\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: -\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.13.1\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source): -\r\n- GCC/Compiler version (if compiling from source): -\r\n- CUDA/cuDNN version: -\r\n- GPU model and memory: No GPU\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\nGiven a tensor X with shape (1, 1, 256), matmul gives slightly different output for matmul(X, W) and matmul(tf.tile(X, [1, 2, 1]), W)\r\n\r\n**Describe the expected behavior**\r\n\r\nThe 60 elements of the output of matmul(X, W) should match exactly the first 60 outputs of matmul(tf.tile(X, [1, 2, 1]), W)\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\nimport platform\r\n\r\nprint(\"Python version\", platform.python_version())\r\nprint(\"Tensorflow version\", tf.__version__)\r\nprint(\"Numpy version\", np.version.version)\r\n\r\nX = tf.random.normal((1, 1, 256), dtype = tf.float32, stddev = 0.0001, seed = 1)\r\nW = tf.random.normal((1, 256, 60), dtype = tf.float32, stddev = 0.0001, seed = 1)\r\n\r\ns = tf.Session()\r\na = tf.matmul(X, W)\r\nb = tf.matmul(tf.tile(X, [1, 2, 1]), W)\r\na, b = s.run([a, b])\r\nprint(a[0][0][0], b[0][0][0])\r\n```\r\n\r\nFor me, the output is:\r\n\r\nPython version 3.6.8\r\nTensorflow version 1.13.1\r\nNumpy version 1.16.2\r\n2019-04-28 12:27:37.641095: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2\r\n5.1921496e-08 5.1921518e-08\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nI understand that floating point approximation might play a role here but should the output depend on the shape like this?\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28215", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28215/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28215/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28215/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28215", "id": 437953771, "node_id": "MDU6SXNzdWU0Mzc5NTM3NzE=", "number": 28215, "title": "The Nadam optimizer is non-deterministic due to a race condition related to inter_op_parallelism_threads", "user": {"login": "koute", "id": 246574, "node_id": "MDQ6VXNlcjI0NjU3NA==", "avatar_url": "https://avatars2.githubusercontent.com/u/246574?v=4", "gravatar_id": "", "url": "https://api.github.com/users/koute", "html_url": "https://github.com/koute", "followers_url": "https://api.github.com/users/koute/followers", "following_url": "https://api.github.com/users/koute/following{/other_user}", "gists_url": "https://api.github.com/users/koute/gists{/gist_id}", "starred_url": "https://api.github.com/users/koute/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/koute/subscriptions", "organizations_url": "https://api.github.com/users/koute/orgs", "repos_url": "https://api.github.com/users/koute/repos", "events_url": "https://api.github.com/users/koute/events{/privacy}", "received_events_url": "https://api.github.com/users/koute/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-04-27T15:20:44Z", "updated_at": "2019-05-09T19:10:16Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes.\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Arch Linux\r\n- TensorFlow installed from (source or binary): Arch Linux repositories\r\n- TensorFlow version (use command below): 'unknown' 1.13.1\r\n- Python version: 3.7.3\r\n- GPU model and memory: None. I'm running on CPU.\r\n\r\n**Describe the current behavior**\r\n\r\nWhen `inter_op_parallelism_threads` is set to `1` the `iterations` variable in Nadam optimizer from `tensorflow/python/keras/optimizers.py` always starts at `1` when the optimizer is executed; when `inter_op_parallelism_threads` is higher than `1` then `iterations` sometimes starts as `0`. The higher the `inter_op_parallelism_threads` is set to the higher the chance that `iterations` will start at `0` instead of at `1`.\r\n\r\n(I know this because I `tf.Print`'d everything inside of the Nadam optimizer.)\r\n\r\nThis makes the training results non-deterministic since the Nadam optimizer depends on the current iteration number when calculating the weight updates.\r\n\r\n**Describe the expected behavior**\r\n\r\nThe Nadam optimizer will be deterministic.\r\n\r\n**Code to reproduce the issue**\r\n\r\n```python\r\n#!/usr/bin/python\r\n\r\nimport tensorflow as tf;\r\nimport numpy as np;\r\n\r\nconstant = tf.keras.initializers.constant;\r\n\r\ninter_op_parallelism_threads = 1\r\n# inter_op_parallelism_threads = 20\r\n\r\nsession_conf = tf.ConfigProto(intra_op_parallelism_threads=1, inter_op_parallelism_threads=inter_op_parallelism_threads)\r\ngraph = tf.get_default_graph()\r\nsession = tf.Session(graph=graph, config=session_conf)\r\ntf.keras.backend.set_session(session)\r\n\r\noptimizer = tf.keras.optimizers.Nadam(lr=1.0, beta_1=0.9, beta_2=0.999, epsilon=1e-7)\r\n\r\nbias = constant(np.array([1.0]))\r\nweights = constant(np.array([1.0]))\r\nlayer = tf.keras.layers.Dense(1, bias_initializer=bias, kernel_initializer=weights, input_shape=(1,))\r\n\r\nmodel = tf.keras.Sequential()\r\nmodel.add(layer)\r\nmodel.compile(optimizer=optimizer, metrics=[\"accuracy\"], loss=[\"mean_squared_error\"])\r\n\r\ninput = np.array([1.0])\r\noutput = np.array([1.0])\r\nmodel.train_on_batch(input, output)\r\n\r\nw = layer.get_weights()\r\nprint(w)\r\n```\r\n\r\nOutput when `inter_op_parallelism_threads` is set to 20 (so `iterations` starts at `0`):\r\n\r\n```\r\n[array([[-0.0564518]], dtype=float32), array([-0.0564518], dtype=float32)]\r\n```\r\n\r\nOutput when `inter_op_parallelism_threads` is set to 1 (so `iterations` starts at `1`):\r\n\r\n```\r\n[array([[-0.49368942]], dtype=float32), array([-0.49368942], dtype=float32)]\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28214", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28214/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28214/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28214/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28214", "id": 437949744, "node_id": "MDU6SXNzdWU0Mzc5NDk3NDQ=", "number": 28214, "title": "Inspecting the Tensorflow 2.0 python package: unable to find or import modules", "user": {"login": "galeone", "id": 8427788, "node_id": "MDQ6VXNlcjg0Mjc3ODg=", "avatar_url": "https://avatars1.githubusercontent.com/u/8427788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/galeone", "html_url": "https://github.com/galeone", "followers_url": "https://api.github.com/users/galeone/followers", "following_url": "https://api.github.com/users/galeone/following{/other_user}", "gists_url": "https://api.github.com/users/galeone/gists{/gist_id}", "starred_url": "https://api.github.com/users/galeone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/galeone/subscriptions", "organizations_url": "https://api.github.com/users/galeone/orgs", "repos_url": "https://api.github.com/users/galeone/repos", "events_url": "https://api.github.com/users/galeone/events{/privacy}", "received_events_url": "https://api.github.com/users/galeone/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, {"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 15, "created_at": "2019-04-27T14:36:36Z", "updated_at": "2019-07-17T09:52:58Z", "closed_at": null, "author_association": "NONE", "body": "I'm analyzing the Tensorflow 2.0 Python package using `importlib` to loop through the symbols of the tensorflow package (see: https://github.com/galeone/rtf/blob/master/rtf/generators/base.py#L72 ).\r\n\r\nThere are certain modules that `importlib` is not able to load or find, e.g. the `tf.losses` `tf.keras.losses`, `tf.optmizers` (and all the module alias) etc. So far, recursively using `importlib.import_module` I get this structure\r\n\r\n```\r\n.\r\n\u251c\u2500\u2500 autograph\r\n\u251c\u2500\u2500 compat\r\n\u2502   \u251c\u2500\u2500 v1\r\n\u2502   \u2502   \u251c\u2500\u2500 autograph\r\n\u2502   \u2502   \u251c\u2500\u2500 config\r\n\u2502   \u2502   \u251c\u2500\u2500 data\r\n\u2502   \u2502   \u251c\u2500\u2500 distribute\r\n\u2502   \u2502   \u251c\u2500\u2500 estimator\r\n\u2502   \u2502   \u251c\u2500\u2500 io\r\n\u2502   \u2502   \u251c\u2500\u2500 keras\r\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 applications\r\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 datasets\r\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 mixed_precision\r\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 optimizers\r\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 preprocessing\r\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 wrappers\r\n\u2502   \u2502   \u251c\u2500\u2500 layers\r\n\u2502   \u2502   \u251c\u2500\u2500 lite\r\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 experimental\r\n\u2502   \u2502   \u251c\u2500\u2500 lookup\r\n\u2502   \u2502   \u251c\u2500\u2500 nn\r\n\u2502   \u2502   \u251c\u2500\u2500 random\r\n\u2502   \u2502   \u251c\u2500\u2500 saved_model\r\n\u2502   \u2502   \u251c\u2500\u2500 tpu\r\n\u2502   \u2502   \u251c\u2500\u2500 train\r\n\u2502   \u2502   \u2514\u2500\u2500 xla\r\n\u2502   \u2514\u2500\u2500 v2\r\n\u2502       \u251c\u2500\u2500 autograph\r\n\u2502       \u251c\u2500\u2500 config\r\n\u2502       \u251c\u2500\u2500 data\r\n\u2502       \u251c\u2500\u2500 distribute\r\n\u2502       \u251c\u2500\u2500 estimator\r\n\u2502       \u251c\u2500\u2500 io\r\n\u2502       \u251c\u2500\u2500 keras\r\n\u2502       \u2502   \u251c\u2500\u2500 applications\r\n\u2502       \u2502   \u251c\u2500\u2500 datasets\r\n\u2502       \u2502   \u251c\u2500\u2500 mixed_precision\r\n\u2502       \u2502   \u251c\u2500\u2500 optimizers\r\n\u2502       \u2502   \u251c\u2500\u2500 preprocessing\r\n\u2502       \u2502   \u2514\u2500\u2500 wrappers\r\n\u2502       \u251c\u2500\u2500 lookup\r\n\u2502       \u251c\u2500\u2500 random\r\n\u2502       \u251c\u2500\u2500 tpu\r\n\u2502       \u251c\u2500\u2500 train\r\n\u2502       \u2514\u2500\u2500 xla\r\n\u251c\u2500\u2500 config\r\n\u251c\u2500\u2500 data\r\n\u251c\u2500\u2500 distribute\r\n\u251c\u2500\u2500 estimator\r\n\u251c\u2500\u2500 io\r\n\u251c\u2500\u2500 keras\r\n\u2502   \u251c\u2500\u2500 applications\r\n\u2502   \u251c\u2500\u2500 datasets\r\n\u2502   \u251c\u2500\u2500 mixed_precision\r\n\u2502   \u251c\u2500\u2500 optimizers\r\n\u2502   \u251c\u2500\u2500 preprocessing\r\n\u2502   \u2514\u2500\u2500 wrappers\r\n\u251c\u2500\u2500 lite\r\n\u2502   \u251c\u2500\u2500 experimental\r\n\u2502   \u2502   \u2514\u2500\u2500 examples\r\n\u2502   \u2502       \u2514\u2500\u2500 lstm\r\n\u2502   \u251c\u2500\u2500 python\r\n\u2502   \u2502   \u2514\u2500\u2500 optimize\r\n\u2502   \u2514\u2500\u2500 toco\r\n\u251c\u2500\u2500 lookup\r\n\u251c\u2500\u2500 random\r\n\u251c\u2500\u2500 tools\r\n\u2502   \u2514\u2500\u2500 docs\r\n\u251c\u2500\u2500 tpu\r\n\u251c\u2500\u2500 train\r\n\u2514\u2500\u2500 xla\r\n```\r\n\r\nthat is incomplete.\r\n\r\nIs there a way to use the `importlib` module to get the complete structure of the tensorflow package and to successfully load the module?\r\n\r\nHere's a minimum reproducible example:\r\n\r\n## Install\r\n\r\n```\r\npip install --upgrade tf-nightly-2.0-preview\r\n```\r\n\r\n## Loading losses\r\n\r\n```python\r\nimport importlib \r\nimportlib.import_module(\"tensorflow.losses\")\r\n```\r\n\r\nProduces the error: \"ModuleNotFoundError: No module named 'tensorflow.losses'\"\r\n\r\nThis happens only in Tensorflow 2.0, if I install Tensorflow 1.14 I can inspect more or less every package without any failure (haven't tested in depth).\r\n\r\nDisclosure: this is a crosspost from https://groups.google.com/a/tensorflow.org/forum/#!topic/developers/jibh60HPGA0\r\n\r\nGreetings"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28195", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28195/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28195/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28195/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28195", "id": 437834741, "node_id": "MDU6SXNzdWU0Mzc4MzQ3NDE=", "number": 28195, "title": "[C API] while loop: unable to access operations defined outside of the loop from within the loop", "user": {"login": "melissagrueter", "id": 12023669, "node_id": "MDQ6VXNlcjEyMDIzNjY5", "avatar_url": "https://avatars1.githubusercontent.com/u/12023669?v=4", "gravatar_id": "", "url": "https://api.github.com/users/melissagrueter", "html_url": "https://github.com/melissagrueter", "followers_url": "https://api.github.com/users/melissagrueter/followers", "following_url": "https://api.github.com/users/melissagrueter/following{/other_user}", "gists_url": "https://api.github.com/users/melissagrueter/gists{/gist_id}", "starred_url": "https://api.github.com/users/melissagrueter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/melissagrueter/subscriptions", "organizations_url": "https://api.github.com/users/melissagrueter/orgs", "repos_url": "https://api.github.com/users/melissagrueter/repos", "events_url": "https://api.github.com/users/melissagrueter/events{/privacy}", "received_events_url": "https://api.github.com/users/melissagrueter/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "saxenasaurabh", "id": 3967488, "node_id": "MDQ6VXNlcjM5Njc0ODg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3967488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saxenasaurabh", "html_url": "https://github.com/saxenasaurabh", "followers_url": "https://api.github.com/users/saxenasaurabh/followers", "following_url": "https://api.github.com/users/saxenasaurabh/following{/other_user}", "gists_url": "https://api.github.com/users/saxenasaurabh/gists{/gist_id}", "starred_url": "https://api.github.com/users/saxenasaurabh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saxenasaurabh/subscriptions", "organizations_url": "https://api.github.com/users/saxenasaurabh/orgs", "repos_url": "https://api.github.com/users/saxenasaurabh/repos", "events_url": "https://api.github.com/users/saxenasaurabh/events{/privacy}", "received_events_url": "https://api.github.com/users/saxenasaurabh/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "saxenasaurabh", "id": 3967488, "node_id": "MDQ6VXNlcjM5Njc0ODg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3967488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saxenasaurabh", "html_url": "https://github.com/saxenasaurabh", "followers_url": "https://api.github.com/users/saxenasaurabh/followers", "following_url": "https://api.github.com/users/saxenasaurabh/following{/other_user}", "gists_url": "https://api.github.com/users/saxenasaurabh/gists{/gist_id}", "starred_url": "https://api.github.com/users/saxenasaurabh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saxenasaurabh/subscriptions", "organizations_url": "https://api.github.com/users/saxenasaurabh/orgs", "repos_url": "https://api.github.com/users/saxenasaurabh/repos", "events_url": "https://api.github.com/users/saxenasaurabh/events{/privacy}", "received_events_url": "https://api.github.com/users/saxenasaurabh/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 21, "created_at": "2019-04-26T20:31:24Z", "updated_at": "2019-08-05T16:16:18Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "*System information*\r\n\r\n* Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n* OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS Mojave 10.14.4\r\n* Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n* TensorFlow installed from (source or binary): source\r\n* TensorFlow version (use command below): master\r\n* Python version: Python 3.7.3\r\n* Bazel version (if compiling from source): 0.24.1\r\n* GCC/Compiler version (if compiling from source): \r\n* CUDA/cuDNN version: N/A\r\n* GPU model and memory: N/A\r\n\r\n*Describe the current behavior*\r\n\r\nI am unable to access operations defined outside of the while loop from within the loop. \r\n\r\nThe C API while loop creates separate conditional and body graphs, so an error is thrown when we try to use operations defined in the outer graph within the body graph. See earlier discussion with @skye [here](https://github.com/tensorflow/tensorflow/issues/26371#issuecomment-482358762).\r\n\r\n*Describe the expected behavior*\r\n\r\nI would expect the behavior of the C API while loop to match the Python API while loop, where accessing operations defined outside the while loop works. \r\n\r\nI've included a minimal working example in Python that demonstrates the expected behavior below. In this example, we are able to use \u201cincrement\u201d in the loop body even though it's defined outside the loop.\r\n\r\n```\r\nimport tensorflow as tf\r\n\r\nincrement = tf.constant(1, name='one')\r\n\r\ndef loop_cond(loop_var):\r\n    return tf.math.less(loop_var, 10)\r\n\r\ndef loop_body(loop_var):\r\n    return loop_var + increment\r\n\r\nloop_input = tf.Variable(0, name='loop_input')\r\n\r\nloop_output = tf.while_loop(loop_cond, loop_body, [loop_input])\r\n\r\nwith tf.Session() as sess:\r\n    sess.run(tf.global_variables_initializer())\r\n    print(sess.run(loop_input)) // should be 0\r\n    print(sess.run(loop_output)) // should be 10 \r\n```\r\n\r\n\r\n*Code to reproduce the issue*\r\n\r\nI replicated the example above as a unit test in while_loop_test.cc. Once again, we try to use \u201cincrement\u201d within the loop body, but here we get an error since it's not part of the body graph. The error message is \u201cNode 'add': Unknown input node 'scalar'\u201d. \r\n\r\n```\r\nTEST_F(CApiWhileLoopTest, AccessOuterOp) {\r\n  Init(1);\r\n  // increment = 1\r\n  // while (i < 10) {\r\n  //   i = i + increment\r\n  // }\r\n\r\n  // Create increment *in the outer graph*\r\n  TF_Operation* increment = ScalarConst(1, graph_, s_);\r\n\r\n  // Create cond graph: i < 10 \r\n  TF_Operation* ten = ScalarConst(10, params_->cond_graph, s_);\r\n  TF_Operation* less_than = LessThan(params_->cond_inputs[0], {ten, 0}, params_->cond_graph, s_);\r\n  DCHECK_EQ(TF_OK, TF_GetCode(s_)) << TF_Message(s_);\r\n  params_->cond_output = {less_than, 0};\r\n\r\n  // Create body graph: i = i + increment\r\n  TF_Operation* add = Add(params_->body_inputs[0], {increment, 0}, params_->body_graph, s_);\r\n  ASSERT_EQ(TF_OK, TF_GetCode(s_)) << TF_Message(s_);\r\n  params_->body_outputs[0] = {add, 0};\r\n\r\n  ExpectOK();\r\n}\r\n```\r\nThis test can be copy-pasted into while_loop_test.cc and run with the following command:\r\n bazel run //tensorflow/c:while_loop_test. \r\n\r\n\r\n*Other info / logs*\r\nThe above examples are intended to be as minimal as possible, so they're not practical. However, accessing outside operations would be important when updating external variables, for example when training within a loop (we would need to update external weights and biases).\r\n\r\nWe discovered this issue while using TF Java, after exposing the C API while loop to Java in [this commit](https://github.com/tensorflow/tensorflow/commit/6799f6e990f856452c467f31448c211fce94bbc1).\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28185", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28185/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28185/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28185/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28185", "id": 437692500, "node_id": "MDU6SXNzdWU0Mzc2OTI1MDA=", "number": 28185, "title": "PhasedLSTMCell only accepts 1-dimensional time input", "user": {"login": "newey01c", "id": 29257724, "node_id": "MDQ6VXNlcjI5MjU3NzI0", "avatar_url": "https://avatars0.githubusercontent.com/u/29257724?v=4", "gravatar_id": "", "url": "https://api.github.com/users/newey01c", "html_url": "https://github.com/newey01c", "followers_url": "https://api.github.com/users/newey01c/followers", "following_url": "https://api.github.com/users/newey01c/following{/other_user}", "gists_url": "https://api.github.com/users/newey01c/gists{/gist_id}", "starred_url": "https://api.github.com/users/newey01c/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/newey01c/subscriptions", "organizations_url": "https://api.github.com/users/newey01c/orgs", "repos_url": "https://api.github.com/users/newey01c/repos", "events_url": "https://api.github.com/users/newey01c/events{/privacy}", "received_events_url": "https://api.github.com/users/newey01c/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1166103538, "node_id": "MDU6TGFiZWwxMTY2MTAzNTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/contrib", "name": "contrib", "color": "5319e7", "default": false, "description": "Anything that comes under contrib directory"}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-04-26T14:11:36Z", "updated_at": "2019-05-10T15:43:06Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n\r\nYes\r\n\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n\r\nDocker image, details below;\r\n```\r\nREPOSITORY              TAG                      IMAGE ID            CREATED             SIZE\r\ntensorflow/tensorflow   latest-gpu-py3-jupyter   8c77abe6b462        8 weeks ago         3.57GB\r\n```\r\n\r\n- TensorFlow installed from (source or binary):\r\nBinary\r\n\r\n- TensorFlow version (use command below):\r\nGit Version: v1.13.1-0-g6612da8951\r\nVersion: 1.13.1\r\n\r\n- Python version:\r\n3.5.2\r\n\r\n- CUDA/cuDNN version:\r\n\r\n```\r\nnvcc: NVIDIA (R) Cuda compiler driver\r\nCopyright (c) 2005-2018 NVIDIA Corporation\r\nBuilt on Sat_Aug_25_21:08:01_CDT_2018\r\nCuda compilation tools, release 10.0, V10.0.130\r\n```\r\n\r\n- GPU model and memory:\r\nNVIDIA GTX 1050 Ti\r\n\r\n**Describe the current behavior**\r\n\r\nWhen passing multi-dimensional time input into a Phased LSTM Cell, I am presented with an arithmetic error;\r\n\r\n```\r\nValueError: Dimensions must be equal, but are 6 and 256 for 'test/rnn/sub' (op: 'Sub') with input shapes: [?,6], [256].\r\n```\r\n\r\nThis appears to be caused by the following line in `rnn_cell.py`, which seems to make the assumption that `time` has one dimension;\r\n\r\n```\r\n~usr/local/lib/python3.5/dist-packages/tensorflow/contrib/rnn/python/ops/rnn_cell.py in _get_cycle_ratio(self, time, phase, period)\r\n   1965     phase_casted = math_ops.cast(phase, dtype=time.dtype)\r\n   1966     period_casted = math_ops.cast(period, dtype=time.dtype)\r\n-> 1967     shifted_time = time - phase_casted\r\n   1968     cycle_ratio = self._mod(shifted_time, period_casted) / period_casted\r\n   1969     return math_ops.cast(cycle_ratio, dtype=dtypes.float32)\r\n```\r\n\r\n**Describe the expected behavior**\r\n\r\nLSTM computes phases and `shifted_time` for *each* parameter separately (in this case, this would require `shifted_time` and other relevant variables to be the same size as the number of features in the input - e.g. 6 input features implies that `shifted_time` should be a 6-dimensional vector)\r\n\r\n\r\n**Code to reproduce the issue**\r\n\r\n```python\r\nimport tensorflow as tf\r\n\r\nfrom tensorflow.keras import backend as K\r\nfrom tensorflow.keras.models import Model\r\nfrom tensorflow.keras.utils import Sequence\r\n\r\nfrom tensorflow.keras.layers import (\r\n    RNN,\r\n    Input,\r\n    Dense\r\n)\r\n\r\nfrom tensorflow.contrib.rnn import PhasedLSTMCell\r\n\r\nK.clear_session()\r\n\r\nwith tf.variable_scope('test', reuse=tf.AUTO_REUSE):\r\n    t_series_dim = 6\r\n    output_dim = 1\r\n\r\n    # Inputs here\r\n    timestamps = Input(shape=(None, t_series_dim,), name='t_input')\r\n    feature_signals = Input(shape=(None, t_series_dim,), name='ts_input')\r\n\r\n    # Layer configuration\r\n    ## Time-series input\r\n    time_input = (timestamps, feature_signals)\r\n    \r\n    cell = PhasedLSTMCell(256)\r\n    ts_x = RNN(cell, return_sequences=False)(time_input)\r\n    \r\n    # Output layer\r\n    logits = Dense(output_dim, name='logits', activation='sigmoid')(ts_x)\r\n\r\n    # Stick it all together inside a model...\r\n    model = Model(\r\n        inputs=[timestamps, feature_signals],\r\n        outputs=[logits]\r\n    )\r\n\r\n    # Define an optimiser and metrics, and compile the model\r\n    model.compile(\r\n        optimizer='adam',\r\n        loss=['binary_crossentropy'],\r\n        metrics=['binary_accuracy']\r\n    )\r\n```\r\n\r\n**Other info / logs**\r\n\r\nTo give you some context, I have several sensors generating signals at uneven sample rates. For example, \"sensor 1\" reports at a frequency of 2Hz, while others may range up to 16Hz. Each of these features has their own time stamps (e.g. the first 5 time stamps for \"sensor 1\" at 2Hz would be something like [0.0, 0.5, 1.0, 1.5, 2.0] - while \"sensor 2\" at 8Hz would be something like [0.0, 0.125, 0.25, 0.375, 0.5]) so it's more helpful to provide each individual feature's timestamps alongside the feature.\r\n\r\nI'm not sure if I am describing this adequately. Please ask for clarification if required!"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28179", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28179/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28179/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28179/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/28179", "id": 437636575, "node_id": "MDExOlB1bGxSZXF1ZXN0MjczODY4NTAw", "number": 28179, "title": "Lite: Batch_to_space-ND support", "user": {"login": "ANSHUMAN87", "id": 32511895, "node_id": "MDQ6VXNlcjMyNTExODk1", "avatar_url": "https://avatars3.githubusercontent.com/u/32511895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ANSHUMAN87", "html_url": "https://github.com/ANSHUMAN87", "followers_url": "https://api.github.com/users/ANSHUMAN87/followers", "following_url": "https://api.github.com/users/ANSHUMAN87/following{/other_user}", "gists_url": "https://api.github.com/users/ANSHUMAN87/gists{/gist_id}", "starred_url": "https://api.github.com/users/ANSHUMAN87/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ANSHUMAN87/subscriptions", "organizations_url": "https://api.github.com/users/ANSHUMAN87/orgs", "repos_url": "https://api.github.com/users/ANSHUMAN87/repos", "events_url": "https://api.github.com/users/ANSHUMAN87/events{/privacy}", "received_events_url": "https://api.github.com/users/ANSHUMAN87/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1169365682, "node_id": "MDU6TGFiZWwxMTY5MzY1Njgy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:L", "name": "size:L", "color": "adafea", "default": false, "description": "CL Change Size: Large"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2019-04-26T11:52:17Z", "updated_at": "2020-03-16T11:29:02Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/28179", "html_url": "https://github.com/tensorflow/tensorflow/pull/28179", "diff_url": "https://github.com/tensorflow/tensorflow/pull/28179.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/28179.patch"}, "body": "Arbitrary dimension support added.\r\n\r\nAdd ref: #21526"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28176", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28176/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28176/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28176/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28176", "id": 437592291, "node_id": "MDU6SXNzdWU0Mzc1OTIyOTE=", "number": 28176, "title": "TPU + Keras doesn't support multiple input layers", "user": {"login": "garnele007", "id": 9914734, "node_id": "MDQ6VXNlcjk5MTQ3MzQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/9914734?v=4", "gravatar_id": "", "url": "https://api.github.com/users/garnele007", "html_url": "https://github.com/garnele007", "followers_url": "https://api.github.com/users/garnele007/followers", "following_url": "https://api.github.com/users/garnele007/following{/other_user}", "gists_url": "https://api.github.com/users/garnele007/gists{/gist_id}", "starred_url": "https://api.github.com/users/garnele007/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/garnele007/subscriptions", "organizations_url": "https://api.github.com/users/garnele007/orgs", "repos_url": "https://api.github.com/users/garnele007/repos", "events_url": "https://api.github.com/users/garnele007/events{/privacy}", "received_events_url": "https://api.github.com/users/garnele007/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-04-26T09:50:03Z", "updated_at": "2019-06-08T06:49:17Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution: Google Colab\r\n\r\n**Describe the current behavior**\r\nWhen trying to train a model that has multiple input layers using Keras (eg. CTC) on a TPU, Tensorflow throws an InvalidArgumentError claiming that I didn't feed a value for a placeholder tensor. \r\n\r\n**Describe the expected behavior**\r\nIf I run the exact same model on a GPU, everything works as expected (eg. the model trains).\r\n\r\n**Code to reproduce the issue**\r\nAll code required to reproduce this but can be found on Google Colab:\r\nhttps://colab.research.google.com/drive/1rxKwCfDPS_2GPNN9yWAyQlQZy8Fg3deV\r\n\r\n**Other info / logs**\r\nPossibly related issue: https://github.com/tensorflow/tensorflow/issues/23659\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nInvalidArgumentError                      Traceback (most recent call last)\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py in _do_call(self, fn, *args)\r\n   1333     try:\r\n-> 1334       return fn(*args)\r\n   1335     except errors.OpError as e:\r\n\r\n13 frames\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py in _run_fn(feed_dict, fetch_list, target_list, options, run_metadata)\r\n   1318       return self._call_tf_sessionrun(\r\n-> 1319           options, feed_dict, fetch_list, target_list, run_metadata)\r\n   1320 \r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py in _call_tf_sessionrun(self, options, feed_dict, fetch_list, target_list, run_metadata)\r\n   1406         self._session, options, feed_dict, fetch_list, target_list,\r\n-> 1407         run_metadata)\r\n   1408 \r\n\r\nInvalidArgumentError: Combined status information from 9 operations:\r\n\r\nStatus code: Invalid argument [2x]\r\n  You must feed a value for placeholder tensor 'label' with dtype int32 and shape [256,12]\r\n  \t [[{{node label}}]] [1x]\r\n  You must feed a value for placeholder tensor 'label' with dtype int32 and shape [256,12]\r\n  \t [[{{node label}}]]\r\n  \t [[{{node GroupCrossDeviceControlEdges_0/TPUReplicate/_compile/_11823778269055837323/_17}}]] [1x]\r\n(7 successful operations.)\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nInvalidArgumentError                      Traceback (most recent call last)\r\n<ipython-input-5-6495be1fe4ea> in <module>()\r\n      3     x = feed_dict_x,\r\n      4     y = feed_dict_y,\r\n----> 5     batch_size = BATCH_SIZE\r\n      6 )\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/contrib/tpu/python/tpu/keras_support.py in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, **kwargs)\r\n   1530                                   validation_split, validation_data, shuffle,\r\n   1531                                   class_weight, sample_weight, initial_epoch,\r\n-> 1532                                   steps_per_epoch, validation_steps, **kwargs)\r\n   1533       finally:\r\n   1534         self._numpy_to_infeed_manager_list = []\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/contrib/tpu/python/tpu/keras_support.py in _pipeline_fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, **kwargs)\r\n   1631         initial_epoch=initial_epoch,\r\n   1632         steps_per_epoch=steps_per_epoch,\r\n-> 1633         validation_steps=validation_steps)\r\n   1634 \r\n   1635   def _pipeline_fit_loop(self,\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/contrib/tpu/python/tpu/keras_support.py in _pipeline_fit_loop(self, inputs, targets, sample_weights, batch_size, epochs, verbose, callbacks, val_inputs, val_targets, val_sample_weights, shuffle, initial_epoch, steps_per_epoch, validation_steps)\r\n   1730             val_sample_weights=val_sample_weights,\r\n   1731             validation_steps=validation_steps,\r\n-> 1732             epoch_logs=epoch_logs)\r\n   1733 \r\n   1734       callbacks.on_epoch_end(epoch, epoch_logs)\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/contrib/tpu/python/tpu/keras_support.py in _pipeline_fit_loop_sample_wise(self, ins, callbacks, index_array, shuffle, batch_size, num_training_samples, indices_for_conversion_to_dense, do_validation, val_inputs, val_targets, val_sample_weights, validation_steps, epoch_logs)\r\n   1786 \r\n   1787       outs = f.pipeline_run(\r\n-> 1788           cur_step_inputs=ins_last_batch, next_step_inputs=ins_batch)\r\n   1789       ins_last_batch = ins_batch\r\n   1790 \r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/contrib/tpu/python/tpu/keras_support.py in pipeline_run(***failed resolving arguments***)\r\n   1334           next_input_tensors)\r\n   1335       next_tpu_model_ops = self._tpu_model_ops_for_input_specs(\r\n-> 1336           next_input_specs, next_step_infeed_manager)\r\n   1337       infeed_dict = next_infeed_instance.make_feed_dict(next_tpu_model_ops)\r\n   1338 \r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/contrib/tpu/python/tpu/keras_support.py in _tpu_model_ops_for_input_specs(self, input_specs, infeed_manager)\r\n   1169                                                  infeed_manager)\r\n   1170       self._compilation_cache[shape_key] = new_tpu_model_ops\r\n-> 1171       self._test_model_compiles(new_tpu_model_ops)\r\n   1172 \r\n   1173     return self._compilation_cache[shape_key]\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/contrib/tpu/python/tpu/keras_support.py in _test_model_compiles(self, tpu_model_ops)\r\n   1107     start_time = time.time()\r\n   1108 \r\n-> 1109     result = K.get_session().run(tpu_model_ops.compile_op)\r\n   1110     proto = tpu_compilation_result.CompilationResultProto()\r\n   1111     proto.ParseFromString(result)\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py in run(self, fetches, feed_dict, options, run_metadata)\r\n    927     try:\r\n    928       result = self._run(None, fetches, feed_dict, options_ptr,\r\n--> 929                          run_metadata_ptr)\r\n    930       if run_metadata:\r\n    931         proto_data = tf_session.TF_GetBuffer(run_metadata_ptr)\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py in _run(self, handle, fetches, feed_dict, options, run_metadata)\r\n   1150     if final_fetches or final_targets or (handle and feed_dict_tensor):\r\n   1151       results = self._do_run(handle, final_targets, final_fetches,\r\n-> 1152                              feed_dict_tensor, options, run_metadata)\r\n   1153     else:\r\n   1154       results = []\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py in _do_run(self, handle, target_list, fetch_list, feed_dict, options, run_metadata)\r\n   1326     if handle is None:\r\n   1327       return self._do_call(_run_fn, feeds, fetches, targets, options,\r\n-> 1328                            run_metadata)\r\n   1329     else:\r\n   1330       return self._do_call(_prun_fn, handle, feeds, fetches)\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py in _do_call(self, fn, *args)\r\n   1346           pass\r\n   1347       message = error_interpolation.interpolate(message, self._graph)\r\n-> 1348       raise type(e)(node_def, op, message)\r\n   1349 \r\n   1350   def _extend_graph(self):\r\n\r\nInvalidArgumentError: Combined status information from 9 operations:\r\n\r\nStatus code: Invalid argument [2x]\r\n  You must feed a value for placeholder tensor 'label' with dtype int32 and shape [256,12]\r\n  \t [[node label (defined at <ipython-input-2-85a234430d50>:9) ]] [1x]\r\n  You must feed a value for placeholder tensor 'label' with dtype int32 and shape [256,12]\r\n  \t [[node label (defined at <ipython-input-2-85a234430d50>:9) ]]\r\n  \t [[{{node GroupCrossDeviceControlEdges_0/TPUReplicate/_compile/_11823778269055837323/_17}}]] [1x]\r\n(7 successful operations.)\r\n\r\nCaused by op 'label', defined at:\r\n  File \"/usr/lib/python3.6/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/usr/lib/python3.6/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/usr/local/lib/python3.6/dist-packages/ipykernel_launcher.py\", line 16, in <module>\r\n    app.launch_new_instance()\r\n  File \"/usr/local/lib/python3.6/dist-packages/traitlets/config/application.py\", line 658, in launch_instance\r\n    app.start()\r\n  File \"/usr/local/lib/python3.6/dist-packages/ipykernel/kernelapp.py\", line 477, in start\r\n    ioloop.IOLoop.instance().start()\r\n  File \"/usr/local/lib/python3.6/dist-packages/tornado/ioloop.py\", line 832, in start\r\n    self._run_callback(self._callbacks.popleft())\r\n  File \"/usr/local/lib/python3.6/dist-packages/tornado/ioloop.py\", line 605, in _run_callback\r\n    ret = callback()\r\n  File \"/usr/local/lib/python3.6/dist-packages/tornado/stack_context.py\", line 277, in null_wrapper\r\n    return fn(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/zmq/eventloop/zmqstream.py\", line 536, in <lambda>\r\n    self.io_loop.add_callback(lambda : self._handle_events(self.socket, 0))\r\n  File \"/usr/local/lib/python3.6/dist-packages/zmq/eventloop/zmqstream.py\", line 450, in _handle_events\r\n    self._handle_recv()\r\n  File \"/usr/local/lib/python3.6/dist-packages/zmq/eventloop/zmqstream.py\", line 480, in _handle_recv\r\n    self._run_callback(callback, msg)\r\n  File \"/usr/local/lib/python3.6/dist-packages/zmq/eventloop/zmqstream.py\", line 432, in _run_callback\r\n    callback(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tornado/stack_context.py\", line 277, in null_wrapper\r\n    return fn(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/ipykernel/kernelbase.py\", line 283, in dispatcher\r\n    return self.dispatch_shell(stream, msg)\r\n  File \"/usr/local/lib/python3.6/dist-packages/ipykernel/kernelbase.py\", line 235, in dispatch_shell\r\n    handler(stream, idents, msg)\r\n  File \"/usr/local/lib/python3.6/dist-packages/ipykernel/kernelbase.py\", line 399, in execute_request\r\n    user_expressions, allow_stdin)\r\n  File \"/usr/local/lib/python3.6/dist-packages/ipykernel/ipkernel.py\", line 196, in do_execute\r\n    res = shell.run_cell(code, store_history=store_history, silent=silent)\r\n  File \"/usr/local/lib/python3.6/dist-packages/ipykernel/zmqshell.py\", line 533, in run_cell\r\n    return super(ZMQInteractiveShell, self).run_cell(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/IPython/core/interactiveshell.py\", line 2718, in run_cell\r\n    interactivity=interactivity, compiler=compiler, result=result)\r\n  File \"/usr/local/lib/python3.6/dist-packages/IPython/core/interactiveshell.py\", line 2822, in run_ast_nodes\r\n    if self.run_code(code, result):\r\n  File \"/usr/local/lib/python3.6/dist-packages/IPython/core/interactiveshell.py\", line 2882, in run_code\r\n    exec(code_obj, self.user_global_ns, self.user_ns)\r\n  File \"<ipython-input-3-18d98e7a13ff>\", line 4, in <module>\r\n    model = build_training_model(graph)\r\n  File \"<ipython-input-2-85a234430d50>\", line 9, in build_training_model\r\n    label        = Input(name = 'label',        batch_shape = [BATCH_SIZE, MAX_LABEL_LENGTH], dtype = 'int32')\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/engine/input_layer.py\", line 231, in Input\r\n    input_tensor=tensor)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/engine/input_layer.py\", line 107, in __init__\r\n    name=self.name)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/backend.py\", line 876, in placeholder\r\n    x = array_ops.placeholder(dtype, shape=shape, name=name)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/array_ops.py\", line 2077, in placeholder\r\n    return gen_array_ops.placeholder(dtype=dtype, shape=shape, name=name)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/gen_array_ops.py\", line 5791, in placeholder\r\n    \"Placeholder\", dtype=dtype, shape=shape, name=name)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/op_def_library.py\", line 788, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/util/deprecation.py\", line 507, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/ops.py\", line 3300, in create_op\r\n    op_def=op_def)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/ops.py\", line 1801, in __init__\r\n    self._traceback = tf_stack.extract_stack()\r\n\r\nInvalidArgumentError (see above for traceback): Combined status information from 9 operations:\r\n\r\nStatus code: Invalid argument [2x]\r\n  You must feed a value for placeholder tensor 'label' with dtype int32 and shape [256,12]\r\n  \t [[node label (defined at <ipython-input-2-85a234430d50>:9) ]] [1x]\r\n  You must feed a value for placeholder tensor 'label' with dtype int32 and shape [256,12]\r\n  \t [[node label (defined at <ipython-input-2-85a234430d50>:9) ]]\r\n  \t [[{{node GroupCrossDeviceControlEdges_0/TPUReplicate/_compile/_11823778269055837323/_17}}]] [1x]\r\n(7 successful operations.)\r\n```\r\n\r\nI also tried training the model using `model.fit_generator(...)` and `tf.keras.utils.Sequence`, but the same exception gets thrown."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28174", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28174/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28174/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28174/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28174", "id": 437562326, "node_id": "MDU6SXNzdWU0Mzc1NjIzMjY=", "number": 28174, "title": "Tensorflowlite build error for Raspberry pi", "user": {"login": "Kishwar", "id": 2483596, "node_id": "MDQ6VXNlcjI0ODM1OTY=", "avatar_url": "https://avatars0.githubusercontent.com/u/2483596?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kishwar", "html_url": "https://github.com/Kishwar", "followers_url": "https://api.github.com/users/Kishwar/followers", "following_url": "https://api.github.com/users/Kishwar/following{/other_user}", "gists_url": "https://api.github.com/users/Kishwar/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kishwar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kishwar/subscriptions", "organizations_url": "https://api.github.com/users/Kishwar/orgs", "repos_url": "https://api.github.com/users/Kishwar/repos", "events_url": "https://api.github.com/users/Kishwar/events{/privacy}", "received_events_url": "https://api.github.com/users/Kishwar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1194756584, "node_id": "MDU6TGFiZWwxMTk0NzU2NTg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20raspberry%20pi", "name": "subtype: raspberry pi", "color": "b619ea", "default": false, "description": "Raspberry Pi Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-04-26T08:38:52Z", "updated_at": "2019-08-07T17:46:05Z", "closed_at": null, "author_association": "NONE", "body": "I am trying to build Tensorflow Lite using instructions https://www.tensorflow.org/lite/guide/build_rpi but getting following error.\r\n\r\n**Describe the problem**\r\n**benchmark_tflite_model.cc:(.text+0x53a0): undefined reference to `tflite::evaluation::CreateGPUDelegate(tflite::FlatBufferModel*)'\r\nbenchmark_tflite_model.cc:(.text+0x551e): undefined reference to `tflite::evaluation::CreateNNAPIDelegate()'**\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Docker image **tensorflow/tensorflow:nightly-devel**\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: Building for Raspberry Pi using Docker\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: r2.0/Latest\r\n- Python version: Python 2.7.15rc1\r\n- Installed using virtualenv? pip? conda?:\r\n- Bazel version (if compiling from source): bazel release 0.15.0\r\n- GCC/Compiler version (if compiling from source): gcc (Ubuntu 7.3.0-27ubuntu1~18.04) 7.3.0\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nCommands defined on https://www.tensorflow.org/lite/guide/build_rpi\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28154", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28154/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28154/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28154/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28154", "id": 437273633, "node_id": "MDU6SXNzdWU0MzcyNzM2MzM=", "number": 28154, "title": "[TF2.0] Bug or Feature? Keras model.summary() does not provide useful information for nested models", "user": {"login": "thuyen", "id": 4015328, "node_id": "MDQ6VXNlcjQwMTUzMjg=", "avatar_url": "https://avatars1.githubusercontent.com/u/4015328?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thuyen", "html_url": "https://github.com/thuyen", "followers_url": "https://api.github.com/users/thuyen/followers", "following_url": "https://api.github.com/users/thuyen/following{/other_user}", "gists_url": "https://api.github.com/users/thuyen/gists{/gist_id}", "starred_url": "https://api.github.com/users/thuyen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thuyen/subscriptions", "organizations_url": "https://api.github.com/users/thuyen/orgs", "repos_url": "https://api.github.com/users/thuyen/repos", "events_url": "https://api.github.com/users/thuyen/events{/privacy}", "received_events_url": "https://api.github.com/users/thuyen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-04-25T15:51:04Z", "updated_at": "2019-11-28T11:40:00Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): pip\r\n- TensorFlow version (use command below): 2.0.0-dev20190424\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 10.0/7.5\r\n- GPU model and memory:\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nFor the script below\r\n```\r\nimport tensorflow as tf\r\nimport tensorflow.keras.layers as nn\r\nfrom tensorflow.python.keras.backend import get_graph\r\nfrom tensorflow.python.keras.utils.generic_utils import to_snake_case\r\nfrom tensorflow.python.keras.engine.base_layer_utils import unique_layer_name\r\n\r\nModule = tf.keras.models.Model \r\n\r\n# class Module(tf.Module):\r\n#     def __init__(self, name=None, **kwargs):\r\n#         super(Module, self).__init__(name='dummy', **kwargs)\r\n#         name = name or to_snake_case(self.__class__.__name__)\r\n#         self._name = unique_layer_name(name, zero_based=True)\r\n#\r\n#     def __call__(self, *args, **kwargs):\r\n#         with get_graph().as_default(), tf.name_scope(self.name):\r\n#             return self.call(*args, **kwargs)\r\n\r\nclass Sequential(Module):\r\n    def __init__(self, *args):\r\n        super(Sequential, self).__init__()\r\n        self.module_list = list(args) if args else []\r\n\r\n    def call(self, x):\r\n        for module in self.module_list:\r\n            x = module(x)\r\n        return x\r\n\r\nclass Block(Module):\r\n    def __init__(self):\r\n        super(Block, self).__init__()\r\n        self.module = Sequential(\r\n                nn.Dense(10),\r\n                nn.Dense(10),)\r\n\r\n    def call(self, input_tensor):\r\n        x = self.module(input_tensor)\r\n        return x\r\n\r\nclass Base(Module):\r\n    def __init__(self):\r\n        super(Base, self).__init__()\r\n        self.module = Sequential(\r\n                Block(),\r\n                Block())\r\n\r\n    def call(self, input_tensor):\r\n        x = self.module(input_tensor)\r\n        y = self.module(x)\r\n        return x, y\r\n\r\nclass Network(Module):\r\n    def __init__(self):\r\n        super(Network, self).__init__()\r\n        self.child = Base()\r\n\r\n    def call(self, inputs):\r\n        return self.child(inputs)\r\n\r\nnet = Network()\r\n\r\ninputs = tf.keras.Input(shape=(10, ))\r\noutputs = net(inputs)\r\nmodel = tf.keras.models.Model(inputs=inputs, outputs=outputs)\r\n\r\nprint(model.summary(150))\r\n```\r\nThe current output, probably doesn't provide any useful information: \r\n```\r\nModel: \"model\"\r\n______________________________________________________________________________________________________________________________________________________\r\nLayer (type)                                                       Output Shape                                                Param #\r\n======================================================================================================================================================\r\ninput_1 (InputLayer)                                               [(None, 10)]                                                0\r\n______________________________________________________________________________________________________________________________________________________\r\nnetwork (Network)                                                  ((None, 10), (None, 10))                                    440\r\n======================================================================================================================================================\r\nTotal params: 440\r\nTrainable params: 440\r\nNon-trainable params: 0\r\n______________________________________________________________________________________________________________________________________________________\r\n\r\n```\r\n**Describe the expected behavior**\r\nIf we uncomment the new `Module` class, the output is much more informative. I think this should be the expected behavior:\r\n```\r\nModel: \"model\"\r\n______________________________________________________________________________________________________________________________________________________\r\nLayer (type)                                     Output Shape                     Param #           Connected to\r\n======================================================================================================================================================\r\ninput_1 (InputLayer)                             [(None, 10)]                     0\r\n______________________________________________________________________________________________________________________________________________________\r\ndense (Dense)                                    (None, 10)                       110               input_1[0][0]\r\n                                                                                                    dense_3[0][0]\r\n______________________________________________________________________________________________________________________________________________________\r\ndense_1 (Dense)                                  (None, 10)                       110               dense[0][0]\r\n                                                                                                    dense[1][0]\r\n______________________________________________________________________________________________________________________________________________________\r\ndense_2 (Dense)                                  (None, 10)                       110               dense_1[0][0]\r\n                                                                                                    dense_1[1][0]\r\n______________________________________________________________________________________________________________________________________________________\r\ndense_3 (Dense)                                  (None, 10)                       110               dense_2[0][0]\r\n                                                                                                    dense_2[1][0]\r\n======================================================================================================================================================\r\nTotal params: 440\r\nTrainable params: 440\r\nNon-trainable params: 0\r\n______________________________________________________________________________________________________________________________________________________\r\n```\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28146", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28146/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28146/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28146/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28146", "id": 437094285, "node_id": "MDU6SXNzdWU0MzcwOTQyODU=", "number": 28146, "title": "Float 16 for training ,storage,and running on tflite CPU and GPU", "user": {"login": "holyhao", "id": 16329474, "node_id": "MDQ6VXNlcjE2MzI5NDc0", "avatar_url": "https://avatars1.githubusercontent.com/u/16329474?v=4", "gravatar_id": "", "url": "https://api.github.com/users/holyhao", "html_url": "https://github.com/holyhao", "followers_url": "https://api.github.com/users/holyhao/followers", "following_url": "https://api.github.com/users/holyhao/following{/other_user}", "gists_url": "https://api.github.com/users/holyhao/gists{/gist_id}", "starred_url": "https://api.github.com/users/holyhao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/holyhao/subscriptions", "organizations_url": "https://api.github.com/users/holyhao/orgs", "repos_url": "https://api.github.com/users/holyhao/repos", "events_url": "https://api.github.com/users/holyhao/events{/privacy}", "received_events_url": "https://api.github.com/users/holyhao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-04-25T09:21:34Z", "updated_at": "2019-04-27T06:46:38Z", "closed_at": null, "author_association": "NONE", "body": "Since the tensorflow lite supports the GPU on mobile phone. But, it only supports float32 and float 16, the model size with float32 is too large. So, will the float16 be available for training and storage, and for converting to .tflite."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28143", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28143/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28143/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28143/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28143", "id": 437065834, "node_id": "MDU6SXNzdWU0MzcwNjU4MzQ=", "number": 28143, "title": "[TF 2.0] Tf.keras.layers.Lambda does not fail if it does not support masking, but mask is passed", "user": {"login": "foxik", "id": 560016, "node_id": "MDQ6VXNlcjU2MDAxNg==", "avatar_url": "https://avatars0.githubusercontent.com/u/560016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/foxik", "html_url": "https://github.com/foxik", "followers_url": "https://api.github.com/users/foxik/followers", "following_url": "https://api.github.com/users/foxik/following{/other_user}", "gists_url": "https://api.github.com/users/foxik/gists{/gist_id}", "starred_url": "https://api.github.com/users/foxik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/foxik/subscriptions", "organizations_url": "https://api.github.com/users/foxik/orgs", "repos_url": "https://api.github.com/users/foxik/repos", "events_url": "https://api.github.com/users/foxik/events{/privacy}", "received_events_url": "https://api.github.com/users/foxik/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-04-25T08:16:10Z", "updated_at": "2020-02-29T16:36:54Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): **YES**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): **Linux Debian Stable**\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: **N/A**\r\n- TensorFlow installed from (source or binary): **binary**\r\n- TensorFlow version (use command below): **CPU, both TF-2.0.0a0 and tf-nightly-2.0-preview-2.0.0.dev20190315**\r\n- Python version: **3.5.3**\r\n- Bazel version (if compiling from source): **N/A**\r\n- GCC/Compiler version (if compiling from source): **N/A**\r\n- CUDA/cuDNN version: **N/A**\r\n- GPU model and memory: **N/A**\r\n\r\n**Describe the current behavior**\r\n\r\nWhen `tf.keras.layers.Lambda` is created without `mask` argument, it does not support masking (https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/keras/layers/core.py#L733). However, when a mask is passed, it is silently ignored and `None` is returned as the output mask (https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/keras/layers/core.py#L797).\r\n\r\n**Describe the expected behavior**\r\n\r\nWhen `tf.keras.layers.Lambda` is created without `mask` argument, it does not support masking. Therefore, when a mask is passed, it should raise an exception similarly to what `Layer.compute_mask` does (https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/keras/engine/base_layer.py#L494).\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport numpy as np\r\nimport tensorflow as tf\r\nm = tf.keras.Sequential([\r\n    tf.keras.layers.Masking(.0),\r\n    tf.keras.layers.Lambda(tf.nn.sigmoid)])\r\n#     tf.keras.layers.GlobalMaxPool1D()])\r\nm(np.array([[[0.]]]))\r\n```\r\n\r\nThe above code does not fail and produces empty output mask. If the `Lambda` layer is replaced by `GlobalMaxPool1D` (which does not support masking), the model fails during construction.\r\n\r\n**Other info / logs**\r\n\r\nA fix is simple -- the `Lambda.compute_mask` should include the test present in `Layer.compute_mask`, namely: https://github.com/tensorflow/tensorflow/blob/9fc8d696b7019ad09d408933de0e4a4e7b81976f/tensorflow/python/keras/engine/base_layer.py#L505-L510\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28140", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28140/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28140/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28140/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28140", "id": 437054542, "node_id": "MDU6SXNzdWU0MzcwNTQ1NDI=", "number": 28140, "title": "Error running TFLite Quantized model on NNAPI", "user": {"login": "tamamachi", "id": 3690310, "node_id": "MDQ6VXNlcjM2OTAzMTA=", "avatar_url": "https://avatars2.githubusercontent.com/u/3690310?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tamamachi", "html_url": "https://github.com/tamamachi", "followers_url": "https://api.github.com/users/tamamachi/followers", "following_url": "https://api.github.com/users/tamamachi/following{/other_user}", "gists_url": "https://api.github.com/users/tamamachi/gists{/gist_id}", "starred_url": "https://api.github.com/users/tamamachi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tamamachi/subscriptions", "organizations_url": "https://api.github.com/users/tamamachi/orgs", "repos_url": "https://api.github.com/users/tamamachi/repos", "events_url": "https://api.github.com/users/tamamachi/events{/privacy}", "received_events_url": "https://api.github.com/users/tamamachi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-04-25T07:46:35Z", "updated_at": "2019-06-13T07:05:58Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Android 9 PQ2A.190205.001\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: Pixel 3\r\n- TensorFlow installed from (source or binary):TensorFlow Lite from AAR\r\n- TensorFlow version (use command below):tensorflow-lite:0.0.0-nightly\r\n\r\n\r\n**Describe the current behavior**\r\nWe have an image classification model trained from scratch in frozen graph format and:\r\n\r\n1. .tflite model converted without post-training quantization works well on CPU and NNAPI.\r\n2. .tflite model converted with post-training quantization works well on CPU.\r\n3. .tflite model converted with post-training quantization fails on NNAPI with following error message:\r\n\r\n```\r\nE/Utils: Invalid input tensor type TENSOR_QUANT8_ASYMM for input 1, expected TENSOR_FLOAT32\r\nE/tflite: Returning error since NNAPI returned failure nnapi_delegate.cc:696.\r\n    Returning error since TFLite returned failure nnapi_delegate.cc:739.\r\n    Failed to build graph for NNAPI\r\n```\r\n\r\nWe share the same code across all cases.\r\n\r\n**Describe the expected behavior**\r\nthe quantized model should work on NNAPI\r\n\r\n**Code to reproduce the issue**\r\nAlmost same as example below:\r\nhttps://github.com/tensorflow/tensorflow/tree/eae92e9d58846f559561ae1c8934a025e740aeb2/tensorflow/lite/examples/android/app\r\n\r\nWe'd happy to attach our tflite model but GitHub says it's too large \ud83d\ude22 \r\nThe beginning of our model is like this:\r\n\r\n<img width=\"1136\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2019-04-25 16 43 52\" src=\"https://user-images.githubusercontent.com/3690310/56718223-58cc5280-6779-11e9-8573-222d7a156313.png\">\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28115", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28115/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28115/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28115/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28115", "id": 436824985, "node_id": "MDU6SXNzdWU0MzY4MjQ5ODU=", "number": 28115, "title": "compute_output_shape may return incorrect results due to broken cache implementation", "user": {"login": "jjnaude", "id": 23322377, "node_id": "MDQ6VXNlcjIzMzIyMzc3", "avatar_url": "https://avatars3.githubusercontent.com/u/23322377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jjnaude", "html_url": "https://github.com/jjnaude", "followers_url": "https://api.github.com/users/jjnaude/followers", "following_url": "https://api.github.com/users/jjnaude/following{/other_user}", "gists_url": "https://api.github.com/users/jjnaude/gists{/gist_id}", "starred_url": "https://api.github.com/users/jjnaude/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jjnaude/subscriptions", "organizations_url": "https://api.github.com/users/jjnaude/orgs", "repos_url": "https://api.github.com/users/jjnaude/repos", "events_url": "https://api.github.com/users/jjnaude/events{/privacy}", "received_events_url": "https://api.github.com/users/jjnaude/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-04-24T17:40:36Z", "updated_at": "2019-06-06T20:06:49Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nYes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nDocker image tensorflow/tensorflow:1.12.0-gpu-py3 running under Host on Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):\r\nDocker image tensorflow/tensorflow:1.12.0-gpu-py3\r\n- TensorFlow version (use command below):\r\ntensorflow-gpu      1.12.0   \r\n- Python version:\r\n3.5.2\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n9.0 / 7\r\n- GPU model and memory:\r\nGTX 1080\r\n\r\n**Describe the current behavior**\r\nWhen called repeatedly, compute_output_shape may return incorrect results due to a faulty caching implementation in keras.Network\r\n\r\n**Describe the expected behavior**\r\ncompute_output_shape should always return correct results\r\n\r\n**Code to reproduce the issue**\r\nThe issue is traced to [this](https://github.com/tensorflow/tensorflow/blob/d7cd03f1398cd33fc8579ce336b602350ac99259/tensorflow/python/keras/engine/network.py#L902) line, where the function generic_utils.object_list_uid is used to generate a cache key. This function just generates a unique identifier for a tuple by taking the object ids of all the components, converting them to strings and concatenating. Firstly, this will not generate cache hits if the function is called twice with the same parameter values, because the object ids will not be the same even though their values are. Far more seriously though, it is possible for the function to sporadically generate  false hits, since object ids are only guaranteed to be unique for objects existing at the same time. \r\n\r\nThe bug is hidden when all dimensions are 256 or lower, because of the [special way](https://docs.python.org/3.5/c-api/long.html) that Python treats integer objects between -5 and 256. \r\n\r\nThe code below causes this to happen reliably on my machine. \r\n\r\nIf the maintainers agree with my diagnosis, I'll happily provide a pull request to fix it. Personally I think the cache should just be removed as it won't save a significant amount of computation in any sane code and has unbounded memory requirements in broken code, but if there are good reasons to retain it we can just key on the values of the tuple components, rather than their object ids.\r\n```\r\nimport tensorflow as tf\r\n\r\ninput = tf.keras.layers.Input(shape = [None,None,3])\r\noutput = tf.keras.layers.Conv2D(filters=1,kernel_size=[1,1])(input)\r\nmodel = tf.keras.Model(inputs=input,outputs=output)\r\n# The model consists of a single 1x1 convolution. Therefore the spatial extent of the output is always trivially equal to\r\n# the spatial extent of the input.\r\n\r\n# We must start from 257 because, when creating ints between -5 and 256 Python returns references to singletons.\r\n# Therefore there is a one-to-one mapping between int value and object-id in this range and the cache works as\r\n# intended. Outside this range, no such guarantee is possible and the cache fails.\r\nfor x in range(257,300):\r\n    shape=model.compute_output_shape([[1,x,x,3]])\r\n    assert (shape[1]==x)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28109", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28109/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28109/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28109/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28109", "id": 436668410, "node_id": "MDU6SXNzdWU0MzY2Njg0MTA=", "number": 28109, "title": "matmul for RaggedTensors / tf.ragged.ragged_dense_matmul", "user": {"login": "danielegrattarola", "id": 11634240, "node_id": "MDQ6VXNlcjExNjM0MjQw", "avatar_url": "https://avatars0.githubusercontent.com/u/11634240?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danielegrattarola", "html_url": "https://github.com/danielegrattarola", "followers_url": "https://api.github.com/users/danielegrattarola/followers", "following_url": "https://api.github.com/users/danielegrattarola/following{/other_user}", "gists_url": "https://api.github.com/users/danielegrattarola/gists{/gist_id}", "starred_url": "https://api.github.com/users/danielegrattarola/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danielegrattarola/subscriptions", "organizations_url": "https://api.github.com/users/danielegrattarola/orgs", "repos_url": "https://api.github.com/users/danielegrattarola/repos", "events_url": "https://api.github.com/users/danielegrattarola/events{/privacy}", "received_events_url": "https://api.github.com/users/danielegrattarola/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-04-24T12:29:12Z", "updated_at": "2019-12-19T23:31:15Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 2.0.0a0\r\n\r\n**Describe the feature and the current behavior/state.**\r\nAllow to compute a matrix multiplication between a `RaggedTensor` and a standard dense tensor, returning a `RaggedTensor`.  \r\nThe behavior would be similar to `tf.sparse.sparse_dense_matmul`. \r\n\r\nFor instance, given a `RaggedTensor` of shape `(batch, None, channels_in)`, and a dense tensor of shape `(channels_in, channels_out)`, the operation would return a `RaggedTensor` of shape `(batch, None, channels_out)`, where all entries along the ragged dimension have been multiplied by the dense tensor. \r\n\r\n**Will this change the current api? How?**\r\nIt could be implemented as a standalone operation like `tf.sparse.sparse_dense_matmul`, or it could be part of the existing API (for instance, `tf.math.sum` supports `RaggedTensors` as is). \r\n\r\n**Who will benefit with this feature?**\r\nAnybody working with irregular data, with applications ranging from computer vision (irregular images) to deep learning on graphs.  \r\nGiven the possibility to have `matmul` and `add` on `RaggedTensors`, one could implement dense, convolutional, and recurrent layers operating directly on irregular data. \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28105", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28105/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28105/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28105/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28105", "id": 436557278, "node_id": "MDU6SXNzdWU0MzY1NTcyNzg=", "number": 28105, "title": "libtensorflowlite.so usage is not documented", "user": {"login": "imnotkind", "id": 22850304, "node_id": "MDQ6VXNlcjIyODUwMzA0", "avatar_url": "https://avatars0.githubusercontent.com/u/22850304?v=4", "gravatar_id": "", "url": "https://api.github.com/users/imnotkind", "html_url": "https://github.com/imnotkind", "followers_url": "https://api.github.com/users/imnotkind/followers", "following_url": "https://api.github.com/users/imnotkind/following{/other_user}", "gists_url": "https://api.github.com/users/imnotkind/gists{/gist_id}", "starred_url": "https://api.github.com/users/imnotkind/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/imnotkind/subscriptions", "organizations_url": "https://api.github.com/users/imnotkind/orgs", "repos_url": "https://api.github.com/users/imnotkind/repos", "events_url": "https://api.github.com/users/imnotkind/events{/privacy}", "received_events_url": "https://api.github.com/users/imnotkind/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-04-24T08:14:17Z", "updated_at": "2019-11-25T18:23:44Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: Nexus 5X API 28 (android studio)\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: master, r1.14\r\n- Python version: 3.7\r\n- Installed using virtualenv? pip? conda?: virtualenv pip\r\n- Bazel version (if compiling from source): 0.24.1\r\n- GCC/Compiler version (if compiling from source): MSVC 14.1\r\n- CUDA/cuDNN version: 10.0 / 7.4\r\n- GPU model and memory: RTX 2080 / 8GB\r\n\r\n\r\n\r\n**Describe the problem**\r\nI am in windows, but `libtensorflow_cc.so` build succeeded in windows for me.\r\nBut I cannot build libtensorflowlite.so, it says not all outputs were created or valid.\r\nI don't know how to look into further build error details with bazel.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\npython configure.py\r\n- no XLA JIT\r\n- no ROCm\r\n- yes CUDA (or no CUDA, both fails)\r\n- yes Eigen Strong Inline\r\n\r\n`bazel build --config opt //tensorflow/lite:libtensorflowlite.so`\r\n```\r\nINFO: From Linking tensorflow/lite/libtensorflowlite.so:\r\nLINK : warning LNK4044: unrecognized option '/s'; ignored\r\nERROR: D:/myusers/haebin/program/tensorflow-master/tensorflow/lite/BUILD:426:1: output 'tensorflow/lite/libtensorflowlite.so.if.lib' was not created\r\nERROR: D:/myusers/haebin/program/tensorflow-master/tensorflow/lite/BUILD:426:1: not all outputs were created or valid\r\nTarget //tensorflow/lite:libtensorflowlite.so failed to build\r\nINFO: Elapsed time: 90.626s, Critical Path: 28.46s\r\nINFO: 182 processes: 182 local.\r\nFAILED: Build did NOT complete successfully\r\n```\r\n\r\n**Any other info / logs**\r\nI'm just curious, but is it possible to run tensorflow lite source codes (C++) in Windows 10 x86-64, if I successfully build this libtensorflowlite.so and include some libraries? I already succeeded in running tensorflow C++ codes with libtensorflow_cc.so in Windows.\r\nI have read the docs and it seems like you guys offer a C++ api, but only in mobile environments?? Is tensorflow lite impossible to run in normal desktops?\r\n\r\n\r\n**Additionally what I tried later (also didn't work)**\r\nOk, so I just gave up on native Windows tf lite, and tried to build android c++ shared lib with bazel. I used `bazel build //tensorflow/lite:libtensorflowlite.so --config=android --cpu\r\n=x86 --cxxopt='--std=c++11' -c opt` in linux, because it seemed like building on windows bazel fails. I successfully built `libtensorflowlite.so` and tried these instructions : https://stackoverflow.com/questions/49834875/problems-with-using-tensorflow-lite-c-api-in-android-studio-project\r\nSo I built shared lib on linux, and tried to use it in windows android studio. I thought that it's eventually for android, so it would be ok to do that. (is it?)\r\nBut I got an error : incompatible target.\r\n\r\n```\r\nBuild command failed.\r\nError while executing process C:\\Users\\poins\\AppData\\Local\\Android\\Sdk\\cmake\\3.6.4111459\\bin\\cmake.exe with arguments {--build D:\\MyUsers\\Haebin\\repo\\androidtflite\\app\\.externalNativeBuild\\cmake\\debug\\x86 --target native-lib}\r\n[1/1] Linking CXX shared library D:\\MyUsers\\Haebin\\repo\\androidtflite\\app\\build\\intermediates\\cmake\\debug\\obj\\x86\\libnative-lib.so\r\nFAILED: cmd.exe /C \"cd . && C:\\Users\\poins\\AppData\\Local\\Android\\Sdk\\ndk-bundle\\toolchains\\llvm\\prebuilt\\windows-x86_64\\bin\\clang++.exe  --target=i686-none-linux-android --gcc-toolchain=C:/Users/poins/AppData/Local/Android/Sdk/ndk-bundle/toolchains/x86-4.9/prebuilt/windows-x86_64 --sysroot=C:/Users/poins/AppData/Local/Android/Sdk/ndk-bundle/sysroot -fPIC -isystem C:/Users/poins/AppData/Local/Android/Sdk/ndk-bundle/sysroot/usr/include/i686-linux-android -D__ANDROID_API__=15 -g -DANDROID -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -mstackrealign -Wa,--noexecstack -Wformat -Werror=format-security -std=c++11  -O0 -fno-limit-debug-info  -Wl,--exclude-libs,libgcc.a -Wl,--exclude-libs,libatomic.a -nostdlib++ --sysroot C:/Users/poins/AppData/Local/Android/Sdk/ndk-bundle/platforms/android-15/arch-x86 -Wl,--build-id -Wl,--warn-shared-textrel -Wl,--fatal-warnings -LC:/Users/poins/AppData/Local/Android/Sdk/ndk-bundle/sources/cxx-stl/llvm-libc++/libs/x86 -Wl,--no-undefined -Wl,-z,noexecstack -Qunused-arguments -Wl,-z,relro -Wl,-z,now -shared -Wl,-soname,libnative-lib.so -o D:\\MyUsers\\Haebin\\repo\\androidtflite\\app\\build\\intermediates\\cmake\\debug\\obj\\x86\\libnative-lib.so CMakeFiles/native-lib.dir/native-lib.cpp.o  D:/MyUsers/Haebin/repo/androidtflite/app/src/main/cpp/distribution/lib/libtensorflowlite_x86.so -llog -latomic -lm \"C:/Users/poins/AppData/Local/Android/Sdk/ndk-bundle/sources/cxx-stl/llvm-libc++/libs/x86/libc++_static.a\" \"C:/Users/poins/AppData/Local/Android/Sdk/ndk-bundle/sources/cxx-stl/llvm-libc++/libs/x86/libc++abi.a\" \"C:/Users/poins/AppData/Local/Android/Sdk/ndk-bundle/sources/cxx-stl/llvm-libc++/libs/x86/libandroid_support.a\" && cd .\"\r\nC:/Users/poins/AppData/Local/Android/Sdk/ndk-bundle/toolchains/x86-4.9/prebuilt/windows-x86_64/lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin\\ld: error: D:/MyUsers/Haebin/repo/androidtflite/app/src/main/cpp/distribution/lib/libtensorflowlite_x86.so: incompatible target\r\n\r\nclang++.exe: error: linker command failed with exit code 1 (use -v to see invocation)\r\n\r\nninja: build stopped: subcommand failed.\r\n```\r\nwhy is it incompatible? am I even right in using this C++ api this way? why is there no guide in tensorflow?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28099", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28099/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28099/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28099/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/28099", "id": 436453389, "node_id": "MDExOlB1bGxSZXF1ZXN0MjcyOTQyNjQ1", "number": 28099, "title": "Initial implementation of SavedModel I/O for Graph Transform Tool", "user": {"login": "frreiss", "id": 12436991, "node_id": "MDQ6VXNlcjEyNDM2OTkx", "avatar_url": "https://avatars1.githubusercontent.com/u/12436991?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frreiss", "html_url": "https://github.com/frreiss", "followers_url": "https://api.github.com/users/frreiss/followers", "following_url": "https://api.github.com/users/frreiss/following{/other_user}", "gists_url": "https://api.github.com/users/frreiss/gists{/gist_id}", "starred_url": "https://api.github.com/users/frreiss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frreiss/subscriptions", "organizations_url": "https://api.github.com/users/frreiss/orgs", "repos_url": "https://api.github.com/users/frreiss/repos", "events_url": "https://api.github.com/users/frreiss/events{/privacy}", "received_events_url": "https://api.github.com/users/frreiss/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1178505529, "node_id": "MDU6TGFiZWwxMTc4NTA1NTI5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/prtype:bugfix", "name": "prtype:bugfix", "color": "159b2e", "default": false, "description": "PR to fix a bug"}, {"id": 1169365682, "node_id": "MDU6TGFiZWwxMTY5MzY1Njgy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:L", "name": "size:L", "color": "adafea", "default": false, "description": "CL Change Size: Large"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2019-04-24T01:14:40Z", "updated_at": "2020-03-18T13:18:22Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/28099", "html_url": "https://github.com/tensorflow/tensorflow/pull/28099", "diff_url": "https://github.com/tensorflow/tensorflow/pull/28099.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/28099.patch"}, "body": "This PR adds a Python utility for reading SavedModels into the Graph Transform Tool, as requested in #20519.\r\n\r\nThe change set adds a function `tensorflow.tools.graph_transforms.TransformSavedModel`. This function takes as input the location of a SavedModel, some parameters for extracting a single inference function from the SavedModel, and a list of transforms to run. `TransformSavedModel` loads the SavedModel, extracts the graph for the specified function, runs this graph through the Graph Transform Tool, and writes out a new SavedModel containing the output of the tool.\r\n\r\n`TransformSavedModel` works on both V1 (graph-based) and V2 (function-based) SavedModel formats. Regardless of the format of the input SavedModel, the output of `TransformSavedModel` is always in the newer V2 format.\r\n\r\nHere's some example usage:\r\n```python\r\nimport tensorflow as tf\r\nfrom tensorflow.tools import graph_transforms\r\n\r\ntf.enable_eager_execution()\r\n\r\n# Define a simple model with an extra op\r\nclass MyTrackable(tf.train.Checkpoint):\r\n    @tf.function(input_signature=[tf.TensorSpec(shape=None, dtype=tf.int32),\r\n                                  tf.TensorSpec(shape=None, dtype=tf.int32)])\r\n    def test_func(self, first_arg, second_arg):\r\n        result1 = first_arg + second_arg\r\n        result2 = first_arg - second_arg\r\n        tf.constant(42., name=\"dead_code\")\r\n        return {\"sum\": result1, \"difference\": result2}\r\n    \r\nbefore_dir = \"./model_before\"\r\nafter_dir = \"./model_after\"\r\n\r\ntf.saved_model.save(MyTrackable(), before_dir)\r\n\r\none = tf.constant(1, dtype=tf.int32)\r\ntwo = tf.constant(2, dtype=tf.int32)\r\nmodel_before = tf.saved_model.load_v2(before_dir)\r\nprint(\"Result before: {}\".format(\r\n    model_before.signatures[\"serving_default\"](first_arg=two, second_arg=one)))\r\nprint(\"Contains dead code before: {}\".format( \r\n    str(\"dead_code\" in str(model_before.signatures[\"serving_default\"].graph.as_graph_def()))))\r\n\r\ngraph_transforms.TransformSavedModel(before_dir, after_dir, [\"strip_unused_nodes(type=float32)\"])\r\nmodel_after = tf.saved_model.load_v2(after_dir)\r\nprint(\"Result after: {}\".format(\r\n    model_after.signatures[\"serving_default\"](first_arg=two, second_arg=one)))\r\nprint(\"Contains dead code after: {}\".format( \r\n    str(\"dead_code\" in str(model_after.signatures[\"serving_default\"].graph.as_graph_def()))))\r\n```\r\nThe above code produces the following output:\r\n```\r\nResult before: {'sum': <tf.Tensor: id=2042, shape=(), dtype=int32, numpy=3>, 'difference': <tf.Tensor: id=2041, shape=(), dtype=int32, numpy=1>}\r\nContains dead code before: True\r\nResult after: {'sum': <tf.Tensor: id=2368, shape=(), dtype=int32, numpy=3>, 'difference': <tf.Tensor: id=2367, shape=(), dtype=int32, numpy=1>}\r\nContains dead code after: False\r\n```\r\n\r\nTo keep this change set (relatively) small, I have limited the scope of this version of `TransformSavedModel`. Specifically, the current implementation:\r\n* does not support SavedModels that contain variables\r\n* does not support V2 SavedModels in which the inference code is spread across multiple TensorFlow functions\r\n* does not pass through auxiliary fields and alternate entry points of the `Trackable` object in a V2 SavedModel; only the user's selected signature is retained in the output SavedModel file.\r\n\r\nThis implementation **does** support V2 SavedModels consisting of a single \"core\" inference function that is called from a chain of one or more \"wrapper\" functions; where the \"wrapper\" functions only translate the format of input and output arguments. The example Python code above produces such a SavedModel.\r\n\r\nThe implementation of `TransformSavedModel` is in the file `tensorflow/tools/graph_transforms/transform_saved_model.py`. I also added automated regression tests to `tensorflow/tools/graph_transforms/python/transform_graph_test.py`. I also moved the existing `TransformGraph` function to its own Python file.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28073", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28073/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28073/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28073/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28073", "id": 436107652, "node_id": "MDU6SXNzdWU0MzYxMDc2NTI=", "number": 28073, "title": "TensorFlow 2.0: Allow simple tensorboard summary usage", "user": {"login": "andreas-eberle", "id": 9267365, "node_id": "MDQ6VXNlcjkyNjczNjU=", "avatar_url": "https://avatars0.githubusercontent.com/u/9267365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andreas-eberle", "html_url": "https://github.com/andreas-eberle", "followers_url": "https://api.github.com/users/andreas-eberle/followers", "following_url": "https://api.github.com/users/andreas-eberle/following{/other_user}", "gists_url": "https://api.github.com/users/andreas-eberle/gists{/gist_id}", "starred_url": "https://api.github.com/users/andreas-eberle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andreas-eberle/subscriptions", "organizations_url": "https://api.github.com/users/andreas-eberle/orgs", "repos_url": "https://api.github.com/users/andreas-eberle/repos", "events_url": "https://api.github.com/users/andreas-eberle/events{/privacy}", "received_events_url": "https://api.github.com/users/andreas-eberle/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 284285184, "node_id": "MDU6TGFiZWwyODQyODUxODQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tensorboard", "name": "comp:tensorboard", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-04-23T10:12:53Z", "updated_at": "2019-09-24T23:57:34Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- TensorFlow version (you are using): 2.0 alpha 0\r\n- Are you willing to contribute it (Yes/No): willing yes, but I don't have enough experience with the TF internals.\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nAs to my current research and a [stackoverflow question on writing image summaries](https://stackoverflow.com/questions/55421290/tensorflow-2-0-keras-how-to-write-image-summaries-for-tensorboard), I think there is no user friendly way of writing arbitrary summaries from a TensorFlow 2.0 Keras model.\r\n\r\nIn more complex models, a developer might want to write scalars, histograms or simply images generated from tensors which are created in the middle of the network. With tf.layers and estimators, I could easily take such a tensor and write it to TensorBoard with tf.summary. At the moment there does not seem to be an equally easily usable way to do this with the Keras API.\r\n\r\nFrom the user perspective, I imagine a special TensorBoard logging layer, that can be chained into the model. This layer would then handle creating the summary writer and getting/maintaining the current model step. \r\nE.g. when using `Sequential`, it could look like:\r\n```\r\nmodel = keras.models.Sequential([\r\n\tkeras.layers.Flatten(input_shape=(28, 28), name=\"flatten\"),\r\n\tkeras.layers.Dense(128, activation='relu', name=\"dense1\"),\r\n\tTensorBoardLoggingLayer(\"my-logging-dir\", lambda input: tf.summary.scalar(\"first-value\", input[0]))\r\n\tkeras.layers.Dense(10, activation='softmax', name=\"dense2\")\r\n])\r\n```\r\n\r\nFurthermore, if the user creates a custom layer they could extend from this `TensorBoardLoggingLayer` and use its handling of the summary writer to easily write summaries of internal parts of their layer.\r\n\r\n**Will this change the current api? How?**\r\nIt would add a new layer but not effect other, existing API.\r\n\r\n**Who will benefit with this feature?**\r\nEverybody that wants to debug a model or get more insights into it. This is especially important when you create custom layers (e.g. implementing new stuff from/for papers) or if you want to debug e.g. images of inner results of your network.\r\n\r\n**Any Other info.**\r\nI think it is crucial to have an easy to use possibility to debug and track our networks with TensorFlow. This was/is possible with the tf.layers / tf.estimtators APIs. In my view it is a must to have this in the TF 2.0 ecosystem."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28072", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28072/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28072/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28072/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28072", "id": 436106268, "node_id": "MDU6SXNzdWU0MzYxMDYyNjg=", "number": 28072, "title": "[TF 2.0] Inconsistency when timing operations", "user": {"login": "ub216", "id": 33667085, "node_id": "MDQ6VXNlcjMzNjY3MDg1", "avatar_url": "https://avatars0.githubusercontent.com/u/33667085?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ub216", "html_url": "https://github.com/ub216", "followers_url": "https://api.github.com/users/ub216/followers", "following_url": "https://api.github.com/users/ub216/following{/other_user}", "gists_url": "https://api.github.com/users/ub216/gists{/gist_id}", "starred_url": "https://api.github.com/users/ub216/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ub216/subscriptions", "organizations_url": "https://api.github.com/users/ub216/orgs", "repos_url": "https://api.github.com/users/ub216/repos", "events_url": "https://api.github.com/users/ub216/events{/privacy}", "received_events_url": "https://api.github.com/users/ub216/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-04-23T10:09:34Z", "updated_at": "2019-05-01T21:41:47Z", "closed_at": null, "author_association": "NONE", "body": "I have been trying to benchmark performance of the convolutions operations with speed-up such as depth-separable convolutions[1] and rank-separable convolutions[2]. I'm using the code pasted below:\r\n```\r\nimport time\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\n# Define a scenario\r\nIMAGE_SIZE = 320\r\nCHANNELS_BATCH_SIZE = 2048  # channels * batch_size\r\nREPEATS = 200\r\nSKIP = 10        \r\n\r\n#Build various operations        \r\nclass build_normal_ops(tf.keras.Model):\r\n    def __init__(self, KERNEL_SIZE, channels):\r\n        super(build_normal_ops, self).__init__()\r\n        self.normal = tf.keras.layers.Conv2D(channels,KERNEL_SIZE,padding=\"same\")\r\n        \r\n    def call(self,x):\r\n        out = self.normal(x)\r\n        return out\r\n    \r\nclass build_rank_ops(tf.keras.Model):\r\n    def __init__(self, KERNEL_SIZE, channels):\r\n        super(build_rank_ops, self).__init__()\r\n        self.rs1 = tf.keras.layers.Conv2D(channels,(KERNEL_SIZE,1),padding=\"same\")\r\n        self.rs2 = tf.keras.layers.Conv2D(channels,(1,KERNEL_SIZE),padding=\"same\")\r\n        \r\n    def call(self,x):\r\n        out = self.rs1(x)\r\n        out = self.rs2(out)\r\n        return out    \r\n    \r\nclass build_depth_ops(tf.keras.Model):\r\n    def __init__(self, KERNEL_SIZE, channels):\r\n        super(build_depth_ops, self).__init__()\r\n        self.depthwise = tf.keras.layers.DepthwiseConv2D(KERNEL_SIZE,padding=\"same\")\r\n        self.pointwise = tf.keras.layers.Conv2D(channels,1,padding=\"same\")\r\n        \r\n    def call(self,x):\r\n        out = self.depthwise(x)\r\n        out = self.pointwise(out)        \r\n        return out\r\n       \r\ndef build_ops_all(channels, kernel_size):    \r\n    normal = build_normal_ops(kernel_size,channels)\r\n    rank = build_rank_ops(kernel_size,channels)\r\n    depth = build_depth_ops(kernel_size,channels)    \r\n    return normal, rank, depth \r\n\r\ndef time_ops(ops: tf.Operation):\r\n    # Benchmark operation\r\n    with tf.device(\"GPU\"):\r\n        image = tf.random.normal(shape=[batch_size, IMAGE_SIZE, IMAGE_SIZE, channels], dtype=tf.float32)\r\n        for i in range(REPEATS+SKIP):\r\n            if i == SKIP:\r\n                start = time.time() #Don't time initial runs\r\n            _ = ops(image)\r\n        end = time.time()\r\n        chk = np.round((end - start) / REPEATS * 1000,2)\r\n    return chk \r\n\r\nif __name__ == '__main__':\r\n    #Benchmark with various channel sizes\r\n    for channels in [64,128,256,512]:\r\n        # adjust batch_size so gpu doesn't run out of memory\r\n        batch_size = CHANNELS_BATCH_SIZE // channels        \r\n\r\n        #Benchmark with various kernel sizes\r\n        for param in [3,5,7]:                \r\n            normal, rank_separable, depth_separable = build_ops_all(channels, param)\r\n            print('Channels:', channels, 'kernel_size:', param)                   \r\n            \r\n            time_normal = time_ops(normal)\r\n            time_rank = time_ops(rank_separable)\r\n            time_depth = time_ops(depth_separable)\r\n\r\n            print(\"Normal method: {}ms \\t Rank-separable method: {}ms \\t Depth-separable method: {}ms \\n\".format(time_normal, time_rank, time_depth))\r\n        print('\\n')\r\n```\r\n\r\nThis results in the following output:\r\n```\r\nChannels: 64 kernel_size: 3\r\nNormal method: 5.31ms \t Rank-separable method: 22.44ms \t Depth-separable method: 0.59ms \r\n\r\nChannels: 64 kernel_size: 5\r\nNormal method: 35.56ms \t Rank-separable method: 27.95ms \t Depth-separable method: 0.65ms \r\n\r\nChannels: 64 kernel_size: 7\r\nNormal method: 39.56ms \t Rank-separable method: 33.5ms \t Depth-separable method: 0.63ms \r\n\r\n\r\n\r\nChannels: 128 kernel_size: 3\r\nNormal method: 13.7ms \t Rank-separable method: 30.75ms \t Depth-separable method: 0.6ms \r\n\r\nChannels: 128 kernel_size: 5\r\nNormal method: 16.85ms \t Rank-separable method: 41.63ms \t Depth-separable method: 0.54ms \r\n\r\nChannels: 128 kernel_size: 7\r\nNormal method: 61.79ms \t Rank-separable method: 46.81ms \t Depth-separable method: 0.58ms \r\n\r\n\r\n\r\nChannels: 256 kernel_size: 3\r\nNormal method: 12.75ms \t Rank-separable method: 47.77ms \t Depth-separable method: 0.56ms \r\n\r\nChannels: 256 kernel_size: 5\r\nNormal method: 137.72ms \t Rank-separable method: 64.87ms \t Depth-separable method: 0.57ms \r\n\r\nChannels: 256 kernel_size: 7\r\nNormal method: 159.38ms \t Rank-separable method: 64.92ms \t Depth-separable method: 0.61ms \r\n\r\n\r\n\r\nChannels: 512 kernel_size: 3\r\nNormal method: 23.17ms \t Rank-separable method: 93.72ms \t Depth-separable method: 0.57ms \r\n\r\nChannels: 512 kernel_size: 5\r\nNormal method: 86.4ms \t Rank-separable method: 119.05ms \t Depth-separable method: 0.55ms \r\n\r\nChannels: 512 kernel_size: 7\r\nNormal method: 537.36ms \t Rank-separable method: 130.35ms \t Depth-separable method: 0.55ms\r\n```\r\n\r\nMy concerns are\r\n1) Inconsistent running times with kernel size 5 and increasing channel size. \r\n2) Constant running times with depth-separable method.\r\nIn pytorch2 there are certain flags that need to be called/set to true to time operations. Has Tensorflow2 also introduced such flags?\r\n\r\nAlso, have TF developers managed to achieve the theoretical speedups claimed in [1] for depth-wise convolution?\r\n\r\n[1] MobileNets: Efficient Convolutional Neural Networks for Mobile VisionApplications. A. Howard et. al\r\n[2] Decomposeme: Simplifying convnets forend-to-end learning. J. Alvarez & L. Petersson"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28063", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28063/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28063/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28063/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28063", "id": 435982244, "node_id": "MDU6SXNzdWU0MzU5ODIyNDQ=", "number": 28063, "title": "keras ModelCheckpoint support period save by time or step, not only epoch.", "user": {"login": "zh794390558", "id": 3038472, "node_id": "MDQ6VXNlcjMwMzg0NzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/3038472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zh794390558", "html_url": "https://github.com/zh794390558", "followers_url": "https://api.github.com/users/zh794390558/followers", "following_url": "https://api.github.com/users/zh794390558/following{/other_user}", "gists_url": "https://api.github.com/users/zh794390558/gists{/gist_id}", "starred_url": "https://api.github.com/users/zh794390558/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zh794390558/subscriptions", "organizations_url": "https://api.github.com/users/zh794390558/orgs", "repos_url": "https://api.github.com/users/zh794390558/repos", "events_url": "https://api.github.com/users/zh794390558/events{/privacy}", "received_events_url": "https://api.github.com/users/zh794390558/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-04-23T03:29:33Z", "updated_at": "2019-04-26T18:27:36Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**Describe the feature and the current behavior/state.**\r\nnow  ModelCheckpoint only save checkpoint after `period` epoch, which is not good for large data training.\r\n\r\n**Will this change the current api? How?**\r\nadd `period_type` for step, time, epoch\r\n\r\n**Who will benefit with this feature?**\r\ncan fine-grained control the checkpoint save behavior.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28058", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28058/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28058/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28058/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28058", "id": 435946524, "node_id": "MDU6SXNzdWU0MzU5NDY1MjQ=", "number": 28058, "title": "Where is the legacy_seq2seq of the tensorflow 2.0 version?", "user": {"login": "longer008", "id": 37037470, "node_id": "MDQ6VXNlcjM3MDM3NDcw", "avatar_url": "https://avatars0.githubusercontent.com/u/37037470?v=4", "gravatar_id": "", "url": "https://api.github.com/users/longer008", "html_url": "https://github.com/longer008", "followers_url": "https://api.github.com/users/longer008/followers", "following_url": "https://api.github.com/users/longer008/following{/other_user}", "gists_url": "https://api.github.com/users/longer008/gists{/gist_id}", "starred_url": "https://api.github.com/users/longer008/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/longer008/subscriptions", "organizations_url": "https://api.github.com/users/longer008/orgs", "repos_url": "https://api.github.com/users/longer008/repos", "events_url": "https://api.github.com/users/longer008/events{/privacy}", "received_events_url": "https://api.github.com/users/longer008/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 1166103538, "node_id": "MDU6TGFiZWwxMTY2MTAzNTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/contrib", "name": "contrib", "color": "5319e7", "default": false, "description": "Anything that comes under contrib directory"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-04-23T00:30:53Z", "updated_at": "2019-05-02T03:56:08Z", "closed_at": null, "author_association": "NONE", "body": "Where is the legacy_seq2seq of the tensorflow 2.0 version?\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28053", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28053/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28053/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28053/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28053", "id": 435927777, "node_id": "MDU6SXNzdWU0MzU5Mjc3Nzc=", "number": 28053, "title": "Failed to get device properties, error code: 30", "user": {"login": "stevehawley", "id": 45400123, "node_id": "MDQ6VXNlcjQ1NDAwMTIz", "avatar_url": "https://avatars0.githubusercontent.com/u/45400123?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stevehawley", "html_url": "https://github.com/stevehawley", "followers_url": "https://api.github.com/users/stevehawley/followers", "following_url": "https://api.github.com/users/stevehawley/following{/other_user}", "gists_url": "https://api.github.com/users/stevehawley/gists{/gist_id}", "starred_url": "https://api.github.com/users/stevehawley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stevehawley/subscriptions", "organizations_url": "https://api.github.com/users/stevehawley/orgs", "repos_url": "https://api.github.com/users/stevehawley/repos", "events_url": "https://api.github.com/users/stevehawley/events{/privacy}", "received_events_url": "https://api.github.com/users/stevehawley/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "andyly", "id": 9406351, "node_id": "MDQ6VXNlcjk0MDYzNTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/9406351?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andyly", "html_url": "https://github.com/andyly", "followers_url": "https://api.github.com/users/andyly/followers", "following_url": "https://api.github.com/users/andyly/following{/other_user}", "gists_url": "https://api.github.com/users/andyly/gists{/gist_id}", "starred_url": "https://api.github.com/users/andyly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andyly/subscriptions", "organizations_url": "https://api.github.com/users/andyly/orgs", "repos_url": "https://api.github.com/users/andyly/repos", "events_url": "https://api.github.com/users/andyly/events{/privacy}", "received_events_url": "https://api.github.com/users/andyly/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "andyly", "id": 9406351, "node_id": "MDQ6VXNlcjk0MDYzNTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/9406351?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andyly", "html_url": "https://github.com/andyly", "followers_url": "https://api.github.com/users/andyly/followers", "following_url": "https://api.github.com/users/andyly/following{/other_user}", "gists_url": "https://api.github.com/users/andyly/gists{/gist_id}", "starred_url": "https://api.github.com/users/andyly/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andyly/subscriptions", "organizations_url": "https://api.github.com/users/andyly/orgs", "repos_url": "https://api.github.com/users/andyly/repos", "events_url": "https://api.github.com/users/andyly/events{/privacy}", "received_events_url": "https://api.github.com/users/andyly/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 27, "created_at": "2019-04-22T23:03:26Z", "updated_at": "2020-01-13T16:41:17Z", "closed_at": null, "author_association": "NONE", "body": "**Describe the current behavior**\r\nI commented under issue #26255 but the original poster closed the issue as his problem was solved by updating to tensorflow 2.\r\n\r\nI am opening a new issue because updating to the pre-release is not an option and I have no way to even trap this error to try to handle it, plus it is an unknown error code so no hint as to how to proceed.\r\n\r\nUnknown error and failure to initialize GPU. \r\n```\r\n2019-04-19 13:16:22.838705: E tensorflow/core/grappler/clusters/utils.cc:83] Failed to get device properties, error code: 30\r\nFailed to initialize GPU device #0: unknown error\r\n```\r\nMy configuration:\r\nWindows 10 Home\r\nTensorflow 1.13.1\r\nPython 3.5\r\nGTX 1060 Mobile Max-Q\r\n\r\nIt doesn't happen every time I run my program. I have localized it to running load_model from keras, before reaching that point I have imported tensorflow and verified that gpu is available.\r\n```python\r\n  if tf.test.is_gpu_available():\r\n        logger.debug(\"GPU is available\")\r\n```\r\nIs there a way to catch this error or check for it and recover/attempt to reinitialize?\r\n\r\nThanks\r\n**Describe the expected behavior**\r\nReport the actual error, provide mechanism to catch the exception and handle it.\r\n\r\n**Code to reproduce the issue**\r\nThe failure is intermittent\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28049", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28049/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28049/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28049/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/28049", "id": 435828950, "node_id": "MDExOlB1bGxSZXF1ZXN0MjcyNDUzMzE0", "number": 28049, "title": "Added an argument to control the padding for flatten_atrous", "user": {"login": "yuzhang-deepmap", "id": 39389695, "node_id": "MDQ6VXNlcjM5Mzg5Njk1", "avatar_url": "https://avatars3.githubusercontent.com/u/39389695?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuzhang-deepmap", "html_url": "https://github.com/yuzhang-deepmap", "followers_url": "https://api.github.com/users/yuzhang-deepmap/followers", "following_url": "https://api.github.com/users/yuzhang-deepmap/following{/other_user}", "gists_url": "https://api.github.com/users/yuzhang-deepmap/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuzhang-deepmap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuzhang-deepmap/subscriptions", "organizations_url": "https://api.github.com/users/yuzhang-deepmap/orgs", "repos_url": "https://api.github.com/users/yuzhang-deepmap/repos", "events_url": "https://api.github.com/users/yuzhang-deepmap/events{/privacy}", "received_events_url": "https://api.github.com/users/yuzhang-deepmap/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-04-22T18:18:21Z", "updated_at": "2020-02-19T21:21:36Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/28049", "html_url": "https://github.com/tensorflow/tensorflow/pull/28049", "diff_url": "https://github.com/tensorflow/tensorflow/pull/28049.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/28049.patch"}, "body": ""}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28036", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28036/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28036/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28036/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28036", "id": 435672053, "node_id": "MDU6SXNzdWU0MzU2NzIwNTM=", "number": 28036, "title": "AUTHORS references non-existent file", "user": {"login": "pocc", "id": 10995145, "node_id": "MDQ6VXNlcjEwOTk1MTQ1", "avatar_url": "https://avatars0.githubusercontent.com/u/10995145?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pocc", "html_url": "https://github.com/pocc", "followers_url": "https://api.github.com/users/pocc/followers", "following_url": "https://api.github.com/users/pocc/following{/other_user}", "gists_url": "https://api.github.com/users/pocc/gists{/gist_id}", "starred_url": "https://api.github.com/users/pocc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pocc/subscriptions", "organizations_url": "https://api.github.com/users/pocc/orgs", "repos_url": "https://api.github.com/users/pocc/repos", "events_url": "https://api.github.com/users/pocc/events{/privacy}", "received_events_url": "https://api.github.com/users/pocc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-04-22T09:53:46Z", "updated_at": "2019-04-29T17:24:02Z", "closed_at": null, "author_association": "NONE", "body": "**Describe the documentation issue**\r\n\r\nThe [AUTHORS](https://github.com/tensorflow/tensorflow/blob/master/AUTHORS) file references a CONTRIBUTORS files, but no `CONTRIBUTORS` or `CONTRIBUTORS.md` file exists:\r\n\r\n```\r\n# This file is distinct from the CONTRIBUTORS files.\r\n# See the latter for an explanation.\r\n```\r\n\r\nIf CONTRIBUTORS is some where else, this should be made explicit in AUTHORS.\r\n\r\n**We welcome contributions by users. Can you submit a PR?**\r\n\r\nThis is a question for maintainers and a PR is not yet appropriate."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28018", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28018/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28018/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28018/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28018", "id": 435498206, "node_id": "MDU6SXNzdWU0MzU0OTgyMDY=", "number": 28018, "title": "AttributeError: 'PerReplica' object has no attribute 'begin'", "user": {"login": "TanUkkii007", "id": 2936722, "node_id": "MDQ6VXNlcjI5MzY3MjI=", "avatar_url": "https://avatars3.githubusercontent.com/u/2936722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TanUkkii007", "html_url": "https://github.com/TanUkkii007", "followers_url": "https://api.github.com/users/TanUkkii007/followers", "following_url": "https://api.github.com/users/TanUkkii007/following{/other_user}", "gists_url": "https://api.github.com/users/TanUkkii007/gists{/gist_id}", "starred_url": "https://api.github.com/users/TanUkkii007/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TanUkkii007/subscriptions", "organizations_url": "https://api.github.com/users/TanUkkii007/orgs", "repos_url": "https://api.github.com/users/TanUkkii007/repos", "events_url": "https://api.github.com/users/TanUkkii007/events{/privacy}", "received_events_url": "https://api.github.com/users/TanUkkii007/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 15, "created_at": "2019-04-21T10:59:14Z", "updated_at": "2020-02-18T04:05:14Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): b'unknown' 1.13.1 (installed with conda)\r\n- Python version: Python 3.6.8 :: Anaconda, Inc.\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: cuda/9.0.176, cudnn/7.3\r\n- GPU model and memory: Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 15190 MB memory) -> physical GPU (device: 0, name: Tesla P100-SXM2-16GB, pci bus id: 0000:85:00.0, compute capability: 6.0)\r\n2019-04-21 19:03:25.539522: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:1 with 15190 MB memory) -> physical GPU (device: 1, name: Tesla P100-SXM2-16GB, pci bus id: 0000:87:00.0, compute capability: 6.0)\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\nWhen running `tf.estimator.Estimator` model that registers `tf.train.SessionRunHook` to `evaluation_hooks` of `tf.estimator.EstimatorSpec` in distributed environment, an error `AttributeError: 'PerReplica' object has no attribute 'begin'` occurs at the beggining of evaluation. This error does not happen if I do not register SessionRunHook to evaluation_hooks. Registering SessionRunHook to `training_hooks` does not trigger the error even if it is in distributed mode.\r\n\r\nI ran my Estimator with `tf.estimator.train_and_evaluate`.\r\n\r\nThe distribution configuration I used is `tf.contrib.distribute.MirroredStrategy`.\r\n\r\nThe whole error log is attatched at the end.\r\n\r\n**Describe the expected behavior**\r\n\r\nSomehow SessionRunHook turned into PerReplica at some point in evaluation code of Estimator. It should remain SessionRunHook's interface in distribution mode.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\nThis is not a runnable code, but introducing the modification below to some estimator examples might work as a reproducer.\r\n\r\n```\r\ndistribution = tf.contrib.distribute.MirroredStrategy()\r\nrun_config = tf.estimator.RunConfig(train_distribute=distribution,\r\n                                                           eval_distribute=distribution)\r\n\r\nhook = tf.train.ProfilerHook(output_dir=model_dir)  # example hook\r\ndef model_fn(features, labels, mode, params):\r\n            if mode == tf.estimator.ModeKeys.EVAL:\r\n                return tf.estimator.EstimatorSpec(mode, loss,\r\n                                                      evaluation_hooks=[hook])\r\n\r\nestimator = tf.estimator.Estimator(params, model_dir, run_config)\r\n\r\ntf.estimator.train_and_evaluate(estimator, train_spec, eval_spec)\r\n```\r\n\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n```\r\nINFO:tensorflow:Calling model_fn.\r\nWARNING:tensorflow:Efficient allreduce is not supported for IndexedSlices.\r\nWARNING:tensorflow:Efficient allreduce is not supported for IndexedSlices.\r\nINFO:tensorflow:batch_all_reduce invoked for batches size = 1 with algorithm = nccl, num_packs = 1, agg_small_grads_max_bytes = 0 and agg_small_grads_max_group = 10\r\nINFO:tensorflow:batch_all_reduce invoked for batches size = 1 with algorithm = nccl, num_packs = 1, agg_small_grads_max_bytes = 0 and agg_small_grads_max_group = 10\r\nINFO:tensorflow:batch_all_reduce invoked for batches size = 1 with algorithm = nccl, num_packs = 1, agg_small_grads_max_bytes = 0 and agg_small_grads_max_group = 10\r\nINFO:tensorflow:batch_all_reduce invoked for batches size = 1 with algorithm = nccl, num_packs = 1, agg_small_grads_max_bytes = 0 and agg_small_grads_max_group = 10\r\nINFO:tensorflow:batch_all_reduce invoked for batches size = 1 with algorithm = nccl, num_packs = 1, agg_small_grads_max_bytes = 0 and agg_small_grads_max_group = 10\r\nINFO:tensorflow:batch_all_reduce invoked for batches size = 1 with algorithm = nccl, num_packs = 1, agg_small_grads_max_bytes = 0 and agg_small_grads_max_group = 10\r\nINFO:tensorflow:batch_all_reduce invoked for batches size = 1 with algorithm = nccl, num_packs = 1, agg_small_grads_max_bytes = 0 and agg_small_grads_max_group = 10\r\nINFO:tensorflow:batch_all_reduce invoked for batches size = 1 with algorithm = nccl, num_packs = 1, agg_small_grads_max_bytes = 0 and agg_small_grads_max_group = 10\r\nINFO:tensorflow:Done calling model_fn.\r\nINFO:tensorflow:Done calling model_fn.\r\nINFO:tensorflow:Create CheckpointSaverHook.\r\nINFO:tensorflow:Graph was finalized.\r\n2019-04-21 18:41:17.901359: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1512] Adding visible gpu devices: 0, 1\r\n2019-04-21 18:41:17.901414: I tensorflow/core/common_runtime/gpu/gpu_device.cc:984] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-04-21 18:41:17.901425: I tensorflow/core/common_runtime/gpu/gpu_device.cc:990]      0 1 \r\n2019-04-21 18:41:17.901432: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1003] 0:   N Y \r\n2019-04-21 18:41:17.901439: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1003] 1:   Y N \r\n2019-04-21 18:41:17.902038: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 15190 MB memory) -> physical GPU (device: 0, name: Tesla P100-SXM2-16GB, pci bus id: 0000:85:00.0, compute capability: 6.0)\r\n2019-04-21 18:41:17.902219: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:1 with 15190 MB memory) -> physical GPU (device: 1, name: Tesla P100-SXM2-16GB, pci bus id: 0000:87:00.0, compute capability: 6.0)\r\nWARNING:tensorflow:From /home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow/python/training/saver.py:1266: checkpoint_exists (from tensorflow.python.training.checkpoint_management) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse standard file APIs to check for files with this prefix.\r\nINFO:tensorflow:Restoring parameters from /tmp/model.ckpt-0\r\nWARNING:tensorflow:From /home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow/python/training/saver.py:1070: get_checkpoint_mtimes (from tensorflow.python.training.checkpoint_management) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse standard file utilities to get mtimes.\r\nINFO:tensorflow:Running local_init_op.\r\nINFO:tensorflow:Done running local_init_op.\r\nINFO:tensorflow:Saving checkpoints for 0 into /tmp/model.ckpt.\r\nINFO:tensorflow:Initialize strategy\r\n2019-04-21 18:42:04.023667: I tensorflow/stream_executor/dso_loader.cc:152] successfully opened CUDA library libcublas.so.10.0 locally\r\n2019-04-21 18:42:05.162460: I tensorflow/core/kernels/cuda_solvers.cc:159] Creating CudaSolver handles for stream 0x555559b95370\r\n2019-04-21 18:42:05.970327: I tensorflow/core/kernels/cuda_solvers.cc:159] Creating CudaSolver handles for stream 0x555559ba9960\r\nINFO:tensorflow:loss = 52170.477, step = 0\r\nINFO:tensorflow:global_step/sec: 0.0334123\r\nINFO:tensorflow:loss = 54870.64, step = 1 (29.929 sec)\r\nINFO:tensorflow:Saving checkpoints for 3 into /tmp/model.ckpt.\r\nINFO:tensorflow:Calling model_fn.\r\nINFO:tensorflow:Calling model_fn.\r\nINFO:tensorflow:Done calling model_fn.\r\nINFO:tensorflow:Done calling model_fn.\r\nINFO:tensorflow:Starting evaluation at 2019-04-21T09:43:02Z\r\nTraceback (most recent call last):\r\n  File \"train.py\", line 146, in <module>\r\n    main()\r\n  File \"train.py\", line 142, in main\r\n    use_multi_gpu)\r\n  File \"train.py\", line 83, in train_and_evaluate\r\n    tf.estimator.train_and_evaluate(estimator, train_spec, eval_spec)\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/training.py\", line 471, in train_and_evaluate\r\n    return executor.run()\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/training.py\", line 611, in run\r\n    return self.run_local()\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/training.py\", line 712, in run_local\r\n    saving_listeners=saving_listeners)\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/estimator.py\", line 358, in train\r\n    loss = self._train_model(input_fn, hooks, saving_listeners)\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/estimator.py\", line 1122, in _train_model\r\n    return self._train_model_distributed(input_fn, hooks, saving_listeners)\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/estimator.py\", line 1185, in _train_model_distributed\r\n    self._config._train_distribute, input_fn, hooks, saving_listeners)\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/estimator.py\", line 1287, in _actual_train_model_distributed\r\n    saving_listeners)\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/estimator.py\", line 1407, in _train_with_estimator_spec\r\n    _, loss = mon_sess.run([estimator_spec.train_op, estimator_spec.loss])\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow/python/training/monitored_session.py\", line 676, in run\r\n    run_metadata=run_metadata)\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow/python/training/monitored_session.py\", line 1171, in run\r\n    run_metadata=run_metadata)\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow/python/training/monitored_session.py\", line 1270, in run\r\n    raise six.reraise(*original_exc_info)\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/six.py\", line 693, in reraise\r\n    raise value\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow/python/training/monitored_session.py\", line 1255, in run\r\n    return self._sess.run(*args, **kwargs)\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow/python/training/monitored_session.py\", line 1335, in run\r\n    run_metadata=run_metadata))\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow/python/training/basic_session_run_hooks.py\", line 582, in after_run\r\n    if self._save(run_context.session, global_step):\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow/python/training/basic_session_run_hooks.py\", line 607, in _save\r\n    if l.after_save(session, step):\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/training.py\", line 517, in after_save\r\n    self._evaluate(global_step_value)  # updates self.eval_result\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/training.py\", line 537, in _evaluate\r\n    self._evaluator.evaluate_and_export())\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/training.py\", line 913, in evaluate_and_export\r\n    hooks=self._eval_spec.hooks)\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/estimator.py\", line 469, in evaluate\r\n    name=name)\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/estimator.py\", line 509, in _actual_eval\r\n    return _evaluate()\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/estimator.py\", line 500, in _evaluate\r\n    output_dir=self.eval_dir(name))\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/estimator.py\", line 1537, in _evaluate_run\r\n    config=self._session_config)\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow/python/training/evaluation.py\", line 271, in _evaluate_once\r\n    session_creator=session_creator, hooks=hooks) as session:\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow/python/training/monitored_session.py\", line 934, in __init__\r\n    stop_grace_period_secs=stop_grace_period_secs)\r\n  File \"/home/8/18IA1142/miniconda3/envs/tacotron2-tf-1.13/lib/python3.6/site-packages/tensorflow/python/training/monitored_session.py\", line 636, in __init__\r\n    h.begin()\r\nAttributeError: 'PerReplica' object has no attribute 'begin'\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28007", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28007/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28007/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28007/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28007", "id": 435444841, "node_id": "MDU6SXNzdWU0MzU0NDQ4NDE=", "number": 28007, "title": "InvalidArgumentError when running map_fn on strings inside a tf.function", "user": {"login": "ipod825", "id": 1246394, "node_id": "MDQ6VXNlcjEyNDYzOTQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/1246394?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ipod825", "html_url": "https://github.com/ipod825", "followers_url": "https://api.github.com/users/ipod825/followers", "following_url": "https://api.github.com/users/ipod825/following{/other_user}", "gists_url": "https://api.github.com/users/ipod825/gists{/gist_id}", "starred_url": "https://api.github.com/users/ipod825/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ipod825/subscriptions", "organizations_url": "https://api.github.com/users/ipod825/orgs", "repos_url": "https://api.github.com/users/ipod825/repos", "events_url": "https://api.github.com/users/ipod825/events{/privacy}", "received_events_url": "https://api.github.com/users/ipod825/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1478826728, "node_id": "MDU6TGFiZWwxNDc4ODI2NzI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:core", "name": "comp:core", "color": "024391", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jaingaurav", "id": 84372, "node_id": "MDQ6VXNlcjg0Mzcy", "avatar_url": "https://avatars1.githubusercontent.com/u/84372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaingaurav", "html_url": "https://github.com/jaingaurav", "followers_url": "https://api.github.com/users/jaingaurav/followers", "following_url": "https://api.github.com/users/jaingaurav/following{/other_user}", "gists_url": "https://api.github.com/users/jaingaurav/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaingaurav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaingaurav/subscriptions", "organizations_url": "https://api.github.com/users/jaingaurav/orgs", "repos_url": "https://api.github.com/users/jaingaurav/repos", "events_url": "https://api.github.com/users/jaingaurav/events{/privacy}", "received_events_url": "https://api.github.com/users/jaingaurav/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jaingaurav", "id": 84372, "node_id": "MDQ6VXNlcjg0Mzcy", "avatar_url": "https://avatars1.githubusercontent.com/u/84372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaingaurav", "html_url": "https://github.com/jaingaurav", "followers_url": "https://api.github.com/users/jaingaurav/followers", "following_url": "https://api.github.com/users/jaingaurav/following{/other_user}", "gists_url": "https://api.github.com/users/jaingaurav/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaingaurav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaingaurav/subscriptions", "organizations_url": "https://api.github.com/users/jaingaurav/orgs", "repos_url": "https://api.github.com/users/jaingaurav/repos", "events_url": "https://api.github.com/users/jaingaurav/events{/privacy}", "received_events_url": "https://api.github.com/users/jaingaurav/received_events", "type": "User", "site_admin": false}, {"login": "ezhulenev", "id": 1174378, "node_id": "MDQ6VXNlcjExNzQzNzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1174378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezhulenev", "html_url": "https://github.com/ezhulenev", "followers_url": "https://api.github.com/users/ezhulenev/followers", "following_url": "https://api.github.com/users/ezhulenev/following{/other_user}", "gists_url": "https://api.github.com/users/ezhulenev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezhulenev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezhulenev/subscriptions", "organizations_url": "https://api.github.com/users/ezhulenev/orgs", "repos_url": "https://api.github.com/users/ezhulenev/repos", "events_url": "https://api.github.com/users/ezhulenev/events{/privacy}", "received_events_url": "https://api.github.com/users/ezhulenev/received_events", "type": "User", "site_admin": false}, {"login": "saxenasaurabh", "id": 3967488, "node_id": "MDQ6VXNlcjM5Njc0ODg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3967488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saxenasaurabh", "html_url": "https://github.com/saxenasaurabh", "followers_url": "https://api.github.com/users/saxenasaurabh/followers", "following_url": "https://api.github.com/users/saxenasaurabh/following{/other_user}", "gists_url": "https://api.github.com/users/saxenasaurabh/gists{/gist_id}", "starred_url": "https://api.github.com/users/saxenasaurabh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saxenasaurabh/subscriptions", "organizations_url": "https://api.github.com/users/saxenasaurabh/orgs", "repos_url": "https://api.github.com/users/saxenasaurabh/repos", "events_url": "https://api.github.com/users/saxenasaurabh/events{/privacy}", "received_events_url": "https://api.github.com/users/saxenasaurabh/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 29, "created_at": "2019-04-20T21:45:58Z", "updated_at": "2020-03-18T20:20:19Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): no\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version (use command below):\r\n```bash\r\nconda install tensorflow-gpu==2.0-alpha\r\n```\r\n- Python version:\r\n3.7.1\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n  cudatoolkit-10.0.130-0                                                                                                  \r\n  cudnn-7.3.1-cuda10.0_0\r\n- GPU model and memory:\r\nGeForce RTX 2080 Ti\r\n\r\n**Describe the current behavior**\r\nRunning the provided code on GPUs leads to error message `tensorflow.python.framework.errors_impl.InvalidArgumentError: During Variant Host->Device Copy: non-DMA-copy attempted of tensor type: string`\r\nWithout feeding the tensor to the convolution layer, `summary.image` would succeed.\r\n\r\n**Describe the expected behavior**\r\nShould run smoothly.\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport tensorflow as tf\r\nfrom tensorflow.keras import layers\r\n\r\nH, W, C = 10, 10, 3\r\nimgs = tf.zeros([10, H, W, C])\r\nds = tf.data.Dataset.from_tensor_slices(imgs)\r\nds = ds.batch(2)\r\nconv = layers.Conv2D(32, (4, 4), strides=(2, 2), padding='same')\r\n\r\n\r\n@tf.function\r\ndef run(img, i):\r\n    conv(img)\r\n    tf.summary.image('img', img, i)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    train_summary_writer = tf.summary.create_file_writer('/tmp/testsummary')\r\n    with train_summary_writer.as_default():\r\n        for i, img in enumerate(ds):\r\n            run(img, i)\r\n```\r\n\r\n**Other info / logs**\r\n```2019-04-20 14:44:30.775146: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this\r\nTensorFlow binary was not compiled to use: AVX2 AVX512F FMA\r\n2019-04-20 14:44:30.818841: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 1700000000 Hz\r\n2019-04-20 14:44:30.819976: I tensorflow/compiler/xla/service/service.cc:162] XLA service 0x55b6fa788f50 executing computa\r\ntions on platform Host. Devices:\r\n2019-04-20 14:44:30.820029: I tensorflow/compiler/xla/service/service.cc:169]   StreamExecutor device (0): <undefined>, <u\r\nndefined>\r\n2019-04-20 14:44:30.825689: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic li\r\nbrary libcuda.so.1\r\n2019-04-20 14:44:31.062487: I tensorflow/compiler/xla/service/service.cc:162] XLA service 0x55b6fc634120 executing computa\r\ntions on platform CUDA. Devices:\r\n2019-04-20 14:44:31.062554: I tensorflow/compiler/xla/service/service.cc:169]   StreamExecutor device (0): GeForce RTX 208\r\n0 Ti, Compute Capability 7.5\r\n2019-04-20 14:44:31.063894: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1467] Found device 0 with properties:\r\nname: GeForce RTX 2080 Ti major: 7 minor: 5 memoryClockRate(GHz): 1.635\r\npciBusID: 0000:19:00.0\r\ntotalMemory: 10.73GiB freeMemory: 10.57GiB\r\n2019-04-20 14:44:31.063942: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1546] Adding visible gpu devices: 0\r\n2019-04-20 14:44:31.064034: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic li\r\nbrary libcudart.so.10.0\r\n2019-04-20 14:44:31.067082: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1015] Device interconnect StreamExecutor wi\r\nth strength 1 edge matrix:\r\n2019-04-20 14:44:31.067114: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1021]      0\r\n2019-04-20 14:44:31.067130: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1034] 0:   N\r\n2019-04-20 14:44:31.068283: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1149] Created TensorFlow device (/job:local\r\nhost/replica:0/task:0/device:GPU:0 with 10284 MB memory) -> physical GPU (device: 0, name: GeForce RTX 2080 Ti, pci bus id\r\n: 0000:19:00.0, compute capability: 7.5)\r\n2019-04-20 14:44:33.628228: W tensorflow/core/common_runtime/base_collective_executor.cc:214] BaseCollectiveExecutor::Star\r\ntAbort Invalid argument: During Variant Host->Device Copy: non-DMA-copy attempted of tensor type: string\r\n         [[{{node img_1/encode_each_image/while/body/_1/TensorArrayV2Write/TensorListSetItem/_54}}]]\r\n         [[img_1/encode_each_image/while/loop_body_control/_19/_33]]\r\n2019-04-20 14:44:33.628374: W tensorflow/core/common_runtime/base_collective_executor.cc:214] BaseCollectiveExecutor::Star\r\ntAbort Invalid argument: During Variant Host->Device Copy: non-DMA-copy attempted of tensor type: string\r\n         [[{{node img_1/encode_each_image/while/body/_1/TensorArrayV2Write/TensorListSetItem/_54}}]]\r\n2019-04-20 14:44:33.628468: E tensorflow/core/common_runtime/process_function_library_runtime.cc:764] Component function e\r\nxecution failed: Invalid argument: During Variant Host->Device Copy: non-DMA-copy attempted of tensor type: string\r\n         [[{{node img_1/encode_each_image/while/body/_1/TensorArrayV2Write/TensorListSetItem/_54}}]]\r\n         [[img_1/encode_each_image/while/loop_body_control/_19/_33]]\r\n2019-04-20 14:44:33.628456: E tensorflow/core/common_runtime/process_function_library_runtime.cc:764] Component function e\r\nxecution failed: Invalid argument: During Variant Host->Device Copy: non-DMA-copy attempted of tensor type: string\r\n         [[{{node img_1/encode_each_image/while/body/_1/TensorArrayV2Write/TensorListSetItem/_54}}]]\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 21, in <module>\r\n    run(img, i)\r\n  File \"/home/swang150/.pyenv/versions/miniconda3-latest/lib/python3.7/site-packages/tensorflow/python/eager/def_function.\r\npy\", line 438, in __call__\r\n    return self._stateless_fn(*args, **kwds)\r\n  File \"/home/swang150/.pyenv/versions/miniconda3-latest/lib/python3.7/site-packages/tensorflow/python/eager/function.py\",\r\n line 1288, in __call__\r\n    return graph_function._filtered_call(args, kwargs)  # pylint: disable=protected-access\r\n  File \"/home/swang150/.pyenv/versions/miniconda3-latest/lib/python3.7/site-packages/tensorflow/python/eager/function.py\",\r\n line 574, in _filtered_call\r\n    (t for t in nest.flatten((args, kwargs))\r\n  File \"/home/swang150/.pyenv/versions/miniconda3-latest/lib/python3.7/site-packages/tensorflow/python/eager/function.py\",\r\n line 627, in _call_flat\r\n    outputs = self._inference_function.call(ctx, args)\r\n  File \"/home/swang150/.pyenv/versions/miniconda3-latest/lib/python3.7/site-packages/tensorflow/python/eager/function.py\",\r\n line 415, in call\r\n    ctx=ctx)\r\n  File \"/home/swang150/.pyenv/versions/miniconda3-latest/lib/python3.7/site-packages/tensorflow/python/eager/execute.py\",\r\nline 66, in quick_execute\r\n    six.raise_from(core._status_to_exception(e.code, message), None)\r\n  File \"<string>\", line 3, in raise_from\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: During Variant Host->Device Copy: non-DMA-copy attempted of\r\ntensor type: string\r\n         [[{{node img_1/encode_each_image/while/body/_1/TensorArrayV2Write/TensorListSetItem/_54}}]]\r\n         [[img_1/encode_each_image/while/loop_body_control/_19/_33]] [Op:__inference_run_343]\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28004", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28004/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28004/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28004/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28004", "id": 435389160, "node_id": "MDU6SXNzdWU0MzUzODkxNjA=", "number": 28004, "title": "New weight initialisation when using dropout and ReLU", "user": {"login": "arnupretorius", "id": 10938674, "node_id": "MDQ6VXNlcjEwOTM4Njc0", "avatar_url": "https://avatars3.githubusercontent.com/u/10938674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arnupretorius", "html_url": "https://github.com/arnupretorius", "followers_url": "https://api.github.com/users/arnupretorius/followers", "following_url": "https://api.github.com/users/arnupretorius/following{/other_user}", "gists_url": "https://api.github.com/users/arnupretorius/gists{/gist_id}", "starred_url": "https://api.github.com/users/arnupretorius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arnupretorius/subscriptions", "organizations_url": "https://api.github.com/users/arnupretorius/orgs", "repos_url": "https://api.github.com/users/arnupretorius/repos", "events_url": "https://api.github.com/users/arnupretorius/events{/privacy}", "received_events_url": "https://api.github.com/users/arnupretorius/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-04-20T11:44:13Z", "updated_at": "2019-05-02T18:38:27Z", "closed_at": null, "author_association": "NONE", "body": "- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature**\r\nIn a recent NeurIPS paper ([Pretorius et al. 2018](https://arxiv.org/pdf/1811.00293.pdf)), we derived a new weight initialisation strategy for deep ReLU networks that use dropout. This new initialisation ensures stable variance propagation for ReLU activations travelling through a dropout layer. The go-to initialisation for dense ReLU layers is the He initialisation, but in the above paper, we showed that if a dropout layer is applied after a dense ReLU layer the variances are longer preserved in the forward pass. This can lead to unstable signal propagation in deep ReLU networks that use dropout. We fix this with the new initialisation and thought it might be useful to the community if there was a Tensorfow implementation.  \r\n\r\n**Will this change the current api? How?**\r\nIt should not require the current api to change.\r\n\r\n**Proposed implementation**\r\nIn short, the initialisation samples from a normal distribution with zero mean and `stddev = \\sqrt{2*(1-p)/fan_in}`, where `p is the probability of an element to be zeroed` when passing through the dropout layer following the dense layer being initialised. To implement the initialisation in Tensorflow, I was thinking perhaps something along these lines of code being added to the `init_ops.py`? This init should be applied to dense ReLU layers preceding a dropout layer.\r\n\r\n```python\r\ndef dropout(rate, seed=None):\r\n  \"\"\"Dropout initializer.\r\n  It draws samples from a normal distribution centred on 0\r\n  with standard deviation given by\r\n  `stddev = sqrt(2*(1-rate) / fan_in)` where `fan_in` is the number of\r\n  input units in the weight tensor and `rate` is the probability of an \r\n  element to be zeroed as set in the dropout layer applied after this dense layer.\r\n  Arguments:\r\n      rate: The dropout rate, between 0 and 1. This should be set equal to the dropout rate in the subsequent dropout layer.\r\n      seed: A Python integer. Used to seed the random generator.\r\n  Returns:\r\n      An initializer.\r\n  References:\r\n      [Pretorius et al., 2018]\r\n      (https://papers.nips.cc/paper/7814-critical-initialisation-for-deep-signal-propagation-in-noisy-rectifier-neural-networks)\r\n      # pylint: disable=line-too-long\r\n      ([pdf](https://papers.nips.cc/paper/7814-critical-initialisation-for-deep-signal-propagation-in-noisy-rectifier-neural-networks.pdf))\r\n  \"\"\"\r\n  if not (rate >= 0 and rate < 1):\r\n        raise ValueError(\"rate must be a scalar tensor or a float in the \"\r\n                         \"range [0, 1), got %g\" % rate)\r\n  return VarianceScaling(\r\n      scale=2.0*(1.0-rate), mode=\"fan_in\", distribution=\"normal\", seed=seed)\r\n```\r\n\r\n**Who will benefit with this feature?**\r\nHopefully, anyone applying dropout in a deep ReLU network. :)\r\n\r\n*Side note: We do not sample from a truncated normal since in our experiments we noticed that when sampling from a truncated normal (which is currently the default), the signal propagation dynamics did not fit with the theory predicting variance preservation during the forward pass. This was the case for both the He init and our dropout init. Therefore, we would also suggest a  (non-truncated) normal as the default for the standard initialisers currently implemented (e.g. He and Xavier etc.).\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28000", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28000/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28000/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/28000/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/28000", "id": 435361886, "node_id": "MDU6SXNzdWU0MzUzNjE4ODY=", "number": 28000, "title": "first_bn/FusedBatchNorm_mul_0, which is an input to the Add operator producing the output array kws_model/KWS_Model/tower_0/CNN_V1/Relu, is lacking min/max data, which is necessary for quantization. Either target a non-quantized output format, or change the input graph to contain min/max information, or pass --default_ranges_min= and --default_ranges_max= if you do not care about the accuracy of results.\\nAborted (core dumped)\"", "user": {"login": "hahadashi", "id": 7497649, "node_id": "MDQ6VXNlcjc0OTc2NDk=", "avatar_url": "https://avatars1.githubusercontent.com/u/7497649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hahadashi", "html_url": "https://github.com/hahadashi", "followers_url": "https://api.github.com/users/hahadashi/followers", "following_url": "https://api.github.com/users/hahadashi/following{/other_user}", "gists_url": "https://api.github.com/users/hahadashi/gists{/gist_id}", "starred_url": "https://api.github.com/users/hahadashi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hahadashi/subscriptions", "organizations_url": "https://api.github.com/users/hahadashi/orgs", "repos_url": "https://api.github.com/users/hahadashi/repos", "events_url": "https://api.github.com/users/hahadashi/events{/privacy}", "received_events_url": "https://api.github.com/users/hahadashi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jianlijianli", "id": 43797323, "node_id": "MDQ6VXNlcjQzNzk3MzIz", "avatar_url": "https://avatars3.githubusercontent.com/u/43797323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jianlijianli", "html_url": "https://github.com/jianlijianli", "followers_url": "https://api.github.com/users/jianlijianli/followers", "following_url": "https://api.github.com/users/jianlijianli/following{/other_user}", "gists_url": "https://api.github.com/users/jianlijianli/gists{/gist_id}", "starred_url": "https://api.github.com/users/jianlijianli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jianlijianli/subscriptions", "organizations_url": "https://api.github.com/users/jianlijianli/orgs", "repos_url": "https://api.github.com/users/jianlijianli/repos", "events_url": "https://api.github.com/users/jianlijianli/events{/privacy}", "received_events_url": "https://api.github.com/users/jianlijianli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jianlijianli", "id": 43797323, "node_id": "MDQ6VXNlcjQzNzk3MzIz", "avatar_url": "https://avatars3.githubusercontent.com/u/43797323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jianlijianli", "html_url": "https://github.com/jianlijianli", "followers_url": "https://api.github.com/users/jianlijianli/followers", "following_url": "https://api.github.com/users/jianlijianli/following{/other_user}", "gists_url": "https://api.github.com/users/jianlijianli/gists{/gist_id}", "starred_url": "https://api.github.com/users/jianlijianli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jianlijianli/subscriptions", "organizations_url": "https://api.github.com/users/jianlijianli/orgs", "repos_url": "https://api.github.com/users/jianlijianli/repos", "events_url": "https://api.github.com/users/jianlijianli/events{/privacy}", "received_events_url": "https://api.github.com/users/jianlijianli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2019-04-20T06:17:21Z", "updated_at": "2020-02-20T16:49:30Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n-Centos\r\n- TensorFlow 1.9:\r\n\r\n\r\n**change the pb model to tflite *\r\nmy network include batch_normalization layer, \r\nwhen I change the the pb model to tflite , there is always return a error message.\r\n```\r\nfirst_bn/FusedBatchNorm_mul_0, which is an input to the Add operator producing the output array kws_model/KWS_Model/tower_0/CNN_V1/Relu, is lacking min/max data, which is necessary for quantization. Either target a non-quantized output format, or change the input graph to contain min/max information, or pass --default_ranges_min= and --default_ranges_max= if you do not care about the accuracy of results.\\nAborted (core dumped)\"\r\n```\r\n\r\nI tried  lots of methods, like add  converter.default_ranges_stats=(0, 6) or remove bn layers. but  I know its not the expected ways. hope other friends can give me some suggestions. thanks\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27999", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27999/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27999/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27999/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27999", "id": 435358071, "node_id": "MDU6SXNzdWU0MzUzNTgwNzE=", "number": 27999, "title": "I understand that java should be faster than Python. But not like this.", "user": {"login": "whaozl", "id": 6327360, "node_id": "MDQ6VXNlcjYzMjczNjA=", "avatar_url": "https://avatars0.githubusercontent.com/u/6327360?v=4", "gravatar_id": "", "url": "https://api.github.com/users/whaozl", "html_url": "https://github.com/whaozl", "followers_url": "https://api.github.com/users/whaozl/followers", "following_url": "https://api.github.com/users/whaozl/following{/other_user}", "gists_url": "https://api.github.com/users/whaozl/gists{/gist_id}", "starred_url": "https://api.github.com/users/whaozl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/whaozl/subscriptions", "organizations_url": "https://api.github.com/users/whaozl/orgs", "repos_url": "https://api.github.com/users/whaozl/repos", "events_url": "https://api.github.com/users/whaozl/events{/privacy}", "received_events_url": "https://api.github.com/users/whaozl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ezhulenev", "id": 1174378, "node_id": "MDQ6VXNlcjExNzQzNzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1174378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezhulenev", "html_url": "https://github.com/ezhulenev", "followers_url": "https://api.github.com/users/ezhulenev/followers", "following_url": "https://api.github.com/users/ezhulenev/following{/other_user}", "gists_url": "https://api.github.com/users/ezhulenev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezhulenev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezhulenev/subscriptions", "organizations_url": "https://api.github.com/users/ezhulenev/orgs", "repos_url": "https://api.github.com/users/ezhulenev/repos", "events_url": "https://api.github.com/users/ezhulenev/events{/privacy}", "received_events_url": "https://api.github.com/users/ezhulenev/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ezhulenev", "id": 1174378, "node_id": "MDQ6VXNlcjExNzQzNzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1174378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezhulenev", "html_url": "https://github.com/ezhulenev", "followers_url": "https://api.github.com/users/ezhulenev/followers", "following_url": "https://api.github.com/users/ezhulenev/following{/other_user}", "gists_url": "https://api.github.com/users/ezhulenev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezhulenev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezhulenev/subscriptions", "organizations_url": "https://api.github.com/users/ezhulenev/orgs", "repos_url": "https://api.github.com/users/ezhulenev/repos", "events_url": "https://api.github.com/users/ezhulenev/events{/privacy}", "received_events_url": "https://api.github.com/users/ezhulenev/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 31, "created_at": "2019-04-20T05:11:08Z", "updated_at": "2019-11-13T02:15:05Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): \r\n```java\r\n//create session, this pb come from python\r\n        ConfigProto config=ConfigProto.newBuilder()\r\n                .setAllowSoftPlacement(true)\r\n                .setLogDevicePlacement(false)\r\n                .clearLogDevicePlacement()\r\n                //.setGpuOptions(GPUOptions.newBuilder().setAllowGrowth(true))\r\n                //.setInterOpParallelismThreads(1)\r\n                .build();\r\n        sess=new Session( graph, config.toByteArray() );\r\n```\r\n```java\r\n        AnjosLog log=new AnjosLog();\r\n        log.begin();\r\n        log.begin2Series(\"create data\");\r\n        float[][][] X=new float[1][this.audio_len][this.audio_feat_len];\r\n        X[0]=data;\r\n        log.stop2Series();\r\n        log.begin2Series(\"create tensor\");\r\n        Tensor x= Tensor.create(X);\r\n        log.stop2Series();\r\n        log.begin2Series(\"use model\");\r\n        Tensor  y = sess.runner().feed(input_var, x).fetch(label_var).run().get(0);\r\n        log.stop2Series();\r\n        log.begin2Series(\"take result\");\r\n        float[][][] result = new float[ (int)y.shape()[0] ][ (int)y.shape()[1] ][ (int)y.shape()[2] ];\r\n        y.copyTo(result);\r\n        log.stop2Series();\r\n        log.stop();\r\n```\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): win7 CPU\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version (use command below):1.8.0 java\r\n- Python version: 3.5.6\r\n- Bazel version (if compiling from source): none\r\n- GCC/Compiler version (if compiling from source): none\r\n- CUDA/cuDNN version: none\r\n- GPU model and memory: none\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\n\r\nI use python3.5 predict the same one sample speed:\r\n```\r\nseries start\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000 2019-04-20 13:06:18\r\nseries end\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000 2019-04-20 13:06:18\r\ntotal time\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000 0.24s       0.00min      2019-04-20 13:06:18\r\n````\r\nI use java1.8 predict the same one sample speed:\r\n```\r\nstart time\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u30002019-04-20 12:57:43 924\r\n series start\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000 create data 2019-04-20 12:57:43 925\r\n series end\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000         0.00s         0.00min\r\n series start\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000 create tensor 2019-04-20 12:57:43 927\r\n series end\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000         0.09s         0.00min\r\n series start\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000 use model 2019-04-20 12:57:44 015\r\n  series end\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000         0.69s         0.01min\r\n series start\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000 take result 2019-04-20 12:57:44 710\r\n  series end\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000         0.03s         0.00min\r\n end time\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000 2019-04-20 12:57:44 738\r\n total time\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000         0.81s         0.01min\r\n```\r\n\r\n**Describe the expected behavior**\r\n**I understand that java should be faster than Python. But not like this.**\r\n\r\n\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27977", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27977/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27977/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27977/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27977", "id": 435075491, "node_id": "MDU6SXNzdWU0MzUwNzU0OTE=", "number": 27977, "title": "increase throughput for `ResizeBilinearKernel`", "user": {"login": "ThisIsIsaac", "id": 49523965, "node_id": "MDQ6VXNlcjQ5NTIzOTY1", "avatar_url": "https://avatars1.githubusercontent.com/u/49523965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThisIsIsaac", "html_url": "https://github.com/ThisIsIsaac", "followers_url": "https://api.github.com/users/ThisIsIsaac/followers", "following_url": "https://api.github.com/users/ThisIsIsaac/following{/other_user}", "gists_url": "https://api.github.com/users/ThisIsIsaac/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThisIsIsaac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThisIsIsaac/subscriptions", "organizations_url": "https://api.github.com/users/ThisIsIsaac/orgs", "repos_url": "https://api.github.com/users/ThisIsIsaac/repos", "events_url": "https://api.github.com/users/ThisIsIsaac/events{/privacy}", "received_events_url": "https://api.github.com/users/ThisIsIsaac/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-04-19T07:12:06Z", "updated_at": "2019-04-22T23:34:54Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "`ResizeBilinearKernel` in [cuda file](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/resize_bilinear_op_gpu.cu.cc) there are 3 major changes for improvement:\r\n\r\n1. `images` is `NHWC` which makes reads and writes to global memory uncoalesced. By changing the input and output to `NCHW`, we can increase the overall speed by a few folds\r\n2. instead of spawning each thread for every element, spawn only as many threads as `output_height * output_width`, and have each thread iterate over `channel ` and `batch` dimension. this has two benefits: it increases throughput roughly 30%, and it allows smaller kernel launches which allows more number of concurrent kernels to be present on the device.\r\n3. use `__restrict__` modifier for both input and output. This alone increase throughput 2~4%\r\n\r\nThe above improvements is something that can be applied to general kernels that perform element-wise operation to a vector. I have a working code of `ResizeBilinearKernel` with increased throughput which I can push in a couple days as soon as I get a few uncertainties straightened out. I would really appreciate your help.\r\n\r\nThanks :)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27952", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27952/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27952/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27952/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27952", "id": 434722097, "node_id": "MDU6SXNzdWU0MzQ3MjIwOTc=", "number": 27952, "title": "Array conv_23/Conv_1/BatchNorm/FusedBatchNorm, which is an input to the Conv operator producing the output array conv_3//0/Conv/Relu6, is lacking min/max data, which is necessary for quantization. ", "user": {"login": "sxsxsx", "id": 16790259, "node_id": "MDQ6VXNlcjE2NzkwMjU5", "avatar_url": "https://avatars1.githubusercontent.com/u/16790259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sxsxsx", "html_url": "https://github.com/sxsxsx", "followers_url": "https://api.github.com/users/sxsxsx/followers", "following_url": "https://api.github.com/users/sxsxsx/following{/other_user}", "gists_url": "https://api.github.com/users/sxsxsx/gists{/gist_id}", "starred_url": "https://api.github.com/users/sxsxsx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sxsxsx/subscriptions", "organizations_url": "https://api.github.com/users/sxsxsx/orgs", "repos_url": "https://api.github.com/users/sxsxsx/repos", "events_url": "https://api.github.com/users/sxsxsx/events{/privacy}", "received_events_url": "https://api.github.com/users/sxsxsx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "nutsiepully", "id": 1307460, "node_id": "MDQ6VXNlcjEzMDc0NjA=", "avatar_url": "https://avatars3.githubusercontent.com/u/1307460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nutsiepully", "html_url": "https://github.com/nutsiepully", "followers_url": "https://api.github.com/users/nutsiepully/followers", "following_url": "https://api.github.com/users/nutsiepully/following{/other_user}", "gists_url": "https://api.github.com/users/nutsiepully/gists{/gist_id}", "starred_url": "https://api.github.com/users/nutsiepully/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nutsiepully/subscriptions", "organizations_url": "https://api.github.com/users/nutsiepully/orgs", "repos_url": "https://api.github.com/users/nutsiepully/repos", "events_url": "https://api.github.com/users/nutsiepully/events{/privacy}", "received_events_url": "https://api.github.com/users/nutsiepully/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nutsiepully", "id": 1307460, "node_id": "MDQ6VXNlcjEzMDc0NjA=", "avatar_url": "https://avatars3.githubusercontent.com/u/1307460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nutsiepully", "html_url": "https://github.com/nutsiepully", "followers_url": "https://api.github.com/users/nutsiepully/followers", "following_url": "https://api.github.com/users/nutsiepully/following{/other_user}", "gists_url": "https://api.github.com/users/nutsiepully/gists{/gist_id}", "starred_url": "https://api.github.com/users/nutsiepully/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nutsiepully/subscriptions", "organizations_url": "https://api.github.com/users/nutsiepully/orgs", "repos_url": "https://api.github.com/users/nutsiepully/repos", "events_url": "https://api.github.com/users/nutsiepully/events{/privacy}", "received_events_url": "https://api.github.com/users/nutsiepully/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-04-18T11:27:37Z", "updated_at": "2019-05-05T03:45:08Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):NO\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):win10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):conda install tensorflow-gpu==1.13\r\n- TensorFlow version (use command below):1.13\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source):NO\r\n- GCC/Compiler version (if compiling from source):NO\r\n- CUDA/cuDNN version: CUDA9.0 cuDNN7.1\r\n- GPU model and memory: p40\r\n\r\n\r\n**Describe the current behavior**\r\nI quantized training mobilefacenet,   and want to conver pb file to tflite file but failed\r\n\r\ntoco --output_file=face_freeze.tflite --graph_def_file=face_freeze.pb --input_arrays=x_i\r\nnput  --output_arrays=BatchNorm/Reshape_1 --output_format=TFLITE --inference_typ\r\ne=QUANTIZED_UINT8 --mean_values=127  --std_dev_values=128\r\n\r\n**Code to reproduce the issue**\r\n`def model(is_training , x, y, is_quantize ):\r\n\r\n    with slim.arg_scope([slim.conv2d, slim.fully_connected],\r\n                        activation_fn = tf.nn.relu6,\r\n                        weights_initializer=slim.variance_scaling_initializer(factor=3.0, mode='FAN_IN', uniform=True),\t\t\t\t\t\r\n                        biases_initializer = tf.constant_initializer(0.0), \t\t\t\t\t\t\r\n                        normalizer_fn=slim.batch_norm,    \r\n                        normalizer_params={'is_training': is_training, 'epsilon':0.001, 'scale': True, 'decay':0.9, 'updates_collections': tf.GraphKeys.UPDATE_OPS}):\r\n\r\n        print('x',x.get_shape())        \r\n        # conv_1        \r\n        conv_1 = slim.conv2d(x, 64, [3, 3], stride=2, padding='SAME',  scope='conv_1')\r\n        print('conv_1',conv_1.get_shape())\r\n\r\n        # conv_2\r\n        conv_2 = Residual(conv_1, num_block=2, num_out=64, _kernel=3,  _stride=1, pad='SAME', num_group=64, name='conv_2')         \r\n        print('conv_2',conv_2.get_shape())\r\n\r\n       # conv_23\r\n        conv_23 = DResidual(conv_2, num_out=128, _kernel=3 , _stride=2, pad='SAME', num_group=128, name='conv_23')\r\n        print('conv_23',conv_23.get_shape())\r\n\r\n       # conv_3\r\n        conv_3 = Residual(conv_23, num_block=6, num_out=128, _kernel=3, _stride=1, pad='SAME', num_group=128, name='conv_3')\r\n        print('conv_3',conv_3.get_shape())\r\n        .....\r\n        .....\r\n\t\t\r\n        #softmax loss\r\n            cross_entropy__ = tf.nn.sparse_softmax_cross_entropy_with_logits(\r\n                labels=y, logits=fc7, name='cross_entropy_per_example')\r\n        cross_entropy = tf.reduce_mean(cross_entropy__, name='cross_entropy')\r\n\r\n        all_variable_decay = _all_variables_decapy(weight_decay,1.0)\t\t\r\n        total_loss = cross_entropy + all_variable_decay \r\n\t\t\t\r\n        tf.contrib.quantize.create_training_graph()`\r\n\r\nI use tf.contrib.quantize.create_eval_graph() to create eval graph pb file\r\n\r\n\r\n**Other info / logs**\r\n2019-04-18 19:21:14.747016: F tensorflow/lite/toco/tooling_util.cc:1702] Array c\r\nonv_23/Conv_1/BatchNorm/FusedBatchNorm, which is an input to the Conv operator p\r\nroducing the output array conv_3//0/Conv/Relu6, is lacking min/max data, which i\r\ns necessary for quantization. If accuracy matters, either target a non-quantized\r\n output format, or run quantized training with your model from a floating point\r\ncheckpoint to change the input graph to contain min/max information. If you don'\r\nt care about accuracy, you can pass --default_ranges_min= and --default_ranges_m\r\nax= for easy experimentation.\r\n\r\nLooking forward to receive your reply,  thanks very much"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27941", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27941/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27941/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27941/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27941", "id": 434580709, "node_id": "MDU6SXNzdWU0MzQ1ODA3MDk=", "number": 27941, "title": "RNN compatibility issue on unknown batch_size", "user": {"login": "kotritrona", "id": 33683286, "node_id": "MDQ6VXNlcjMzNjgzMjg2", "avatar_url": "https://avatars1.githubusercontent.com/u/33683286?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kotritrona", "html_url": "https://github.com/kotritrona", "followers_url": "https://api.github.com/users/kotritrona/followers", "following_url": "https://api.github.com/users/kotritrona/following{/other_user}", "gists_url": "https://api.github.com/users/kotritrona/gists{/gist_id}", "starred_url": "https://api.github.com/users/kotritrona/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kotritrona/subscriptions", "organizations_url": "https://api.github.com/users/kotritrona/orgs", "repos_url": "https://api.github.com/users/kotritrona/repos", "events_url": "https://api.github.com/users/kotritrona/events{/privacy}", "received_events_url": "https://api.github.com/users/kotritrona/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-04-18T04:05:47Z", "updated_at": "2019-05-09T22:46:31Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): google colaboratory\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): pip\r\n- TensorFlow version (use command below): 2.0.0-alpha0 or 1.13.1\r\n- Python version: 3.6.7\r\n- Bazel version (if compiling from source): -\r\n- GCC/Compiler version (if compiling from source): -\r\n- CUDA/cuDNN version: not using GPU\r\n- GPU model and memory: not using GPU\r\n\r\n**Describe the current behavior**\r\n\r\nI sent some data from one model's loss function to another model. The other model starts with a RNN layer.\r\nin tensorflow 1.12.0 and before, the variable y_pred is shape (32, 10, 10) or (20, 10, 10) as first dimension is batch_size, and the model trained normally\r\nin tensorflow 1.13.1 and 2.0.0-alpha0, it shows that the shape is (None, 10, 10) then throws this exception\r\n\r\n```\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/backend.py in <listcomp>(.0)\r\n   3217     outputs = self._graph_fn(*converted_inputs)\r\n   3218     return nest.pack_sequence_as(self._outputs_structure,\r\n-> 3219                                  [x.numpy() for x in outputs])\r\n   3220 \r\n   3221 \r\n\r\nAttributeError: 'Tensor' object has no attribute 'numpy'\r\n```\r\n\r\nprobably because it changed the behavior to use a dynamic batch size tensor, then tensors of unknown batch size don't have the numpy method?\r\n\r\nIf the RNN layer is not present, and the data is 2d (like (None, 10) ), the model can train normally.\r\nCNN and Flatten seem to also have the problem.\r\n\r\n**Describe the expected behavior**\r\nI think it should not use $.numpy() there in the backend, probably(?)\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport tensorflow as tf\r\nimport numpy as np\r\nfrom tensorflow import keras\r\n\r\n# try-except eager trigger to prevent trouble from ipynb\r\ntry:\r\n    tf.enable_eager_execution();\r\nexcept:\r\n    pass\r\n\r\ndef build_classifier_model():\r\n    model = keras.Sequential([\r\n        keras.layers.SimpleRNN(64, input_shape=(10, 10)),\r\n        keras.layers.Dense(64, activation=tf.nn.relu),\r\n        keras.layers.Dense(1, activation=tf.nn.tanh)\r\n    ])\r\n\r\n    optimizer = tf.optimizers.Adam(0.001) #tf.train.AdamOptimizer(0.001)\r\n\r\n    model.compile(loss='mse',\r\n                optimizer=optimizer,\r\n                metrics=[keras.metrics.mae])\r\n    return model\r\n\r\nsome_model = build_classifier_model();\r\n  \r\ndef build_model():\r\n    def custom_loss(y_true, y_pred):\r\n      # simply tile y_pred as an example\r\n      y_cred = tf.tile(tf.expand_dims(y_pred, axis=2), (1, 1, 10))\r\n      print(y_cred.shape)\r\n      return tf.reduce_sum(some_model(y_cred) ** 2)\r\n    \r\n    model = keras.Sequential([\r\n        keras.layers.Dense(64, input_shape=(12,)),\r\n        keras.layers.Dense(10, activation=tf.nn.tanh)\r\n    ])\r\n\r\n    optimizer = tf.optimizers.Adam(0.001) #tf.train.AdamOptimizer(0.001)\r\n\r\n    model.compile(loss=custom_loss,\r\n                optimizer=optimizer,\r\n                metrics=[keras.metrics.mae])\r\n    return model\r\n        \r\nm = build_model();\r\n# fitting randomness as example\r\nx = np.random.random((500, 12));\r\ny = tf.cast(np.random.randint(0, 2, size=(500,)), tf.float32);\r\nm.fit(x, y, epochs=10);\r\n```\r\n\r\n**Other info / logs**\r\n\r\nfull exception log\r\n```python\r\n(None, 10, 10)\r\n\r\n---------------------------------------------------------------------------\r\n\r\nAttributeError                            Traceback (most recent call last)\r\n\r\n<ipython-input-3-de77aceb3f93> in <module>()\r\n     38     return model\r\n     39 \r\n---> 40 m = build_model();\r\n     41 # fitting randomness as example\r\n     42 x = np.random.random((500, 12));\r\n\r\n<ipython-input-3-de77aceb3f93> in build_model()\r\n     35     model.compile(loss=custom_loss,\r\n     36                 optimizer=optimizer,\r\n---> 37                 metrics=[keras.metrics.mae])\r\n     38     return model\r\n     39 \r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/training/tracking/base.py in _method_wrapper(self, *args, **kwargs)\r\n    454     self._setattr_tracking = False  # pylint: disable=protected-access\r\n    455     try:\r\n--> 456       result = method(self, *args, **kwargs)\r\n    457     finally:\r\n    458       self._setattr_tracking = previous_value  # pylint: disable=protected-access\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/engine/training.py in compile(self, optimizer, loss, metrics, loss_weights, sample_weight_mode, weighted_metrics, target_tensors, distribute, **kwargs)\r\n    428       #                   loss_weight_2 * output_2_loss_fn(...) +\r\n    429       #                   layer losses.\r\n--> 430       self.total_loss = self._prepare_total_loss(skip_target_indices, masks)\r\n    431 \r\n    432       # Functions for train, test and predict will\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/engine/training.py in _prepare_total_loss(self, skip_target_indices, masks)\r\n   1684             loss_fn.reduction = losses_utils.ReductionV2.NONE\r\n   1685             weighted_losses = loss_fn(\r\n-> 1686                 y_true, y_pred, sample_weight=sample_weight)\r\n   1687             loss_fn.reduction = current_loss_reduction\r\n   1688 \r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/losses.py in __call__(self, y_true, y_pred, sample_weight)\r\n     94     with ops.name_scope(scope_name, format(self.__class__.__name__),\r\n     95                         (y_pred, y_true, sample_weight)):\r\n---> 96       losses = self.call(y_true, y_pred)\r\n     97       return losses_utils.compute_weighted_loss(\r\n     98           losses, sample_weight, reduction=self.reduction)\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/losses.py in call(self, y_true, y_pred)\r\n    156       Loss values per sample.\r\n    157     \"\"\"\r\n--> 158     return self.fn(y_true, y_pred, **self._fn_kwargs)\r\n    159 \r\n    160   def get_config(self):\r\n\r\n<ipython-input-3-de77aceb3f93> in custom_loss(y_true, y_pred)\r\n     24       y_cred = tf.tile(tf.expand_dims(y_pred, axis=2), (1, 1, 10))\r\n     25       print(y_cred.shape)\r\n---> 26       return tf.reduce_sum(some_model(y_cred) ** 2)\r\n     27 \r\n     28     model = keras.Sequential([\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/engine/base_layer.py in __call__(self, inputs, *args, **kwargs)\r\n    559       # framework.\r\n    560       if base_layer_utils.needs_keras_history(inputs):\r\n--> 561         base_layer_utils.create_keras_history(inputs)\r\n    562 \r\n    563     # Handle Keras mask propagation from previous layer to current layer.\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/engine/base_layer_utils.py in create_keras_history(tensors)\r\n    249       operations and need to have Keras metadata assigned to them.\r\n    250   \"\"\"\r\n--> 251   _create_keras_history_helper(tensors, set())\r\n    252 \r\n    253 \r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/engine/base_layer_utils.py in _create_keras_history_helper(tensors, processed_ops)\r\n    286           # when originating from an eager context\r\n    287           # so can't be supported.\r\n--> 288           constants[i] = backend.function([], op_input)([])\r\n    289       processed_ops = _create_keras_history_helper(layer_inputs, processed_ops)\r\n    290       name = op.name\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/backend.py in __call__(self, inputs)\r\n   3217     outputs = self._graph_fn(*converted_inputs)\r\n   3218     return nest.pack_sequence_as(self._outputs_structure,\r\n-> 3219                                  [x.numpy() for x in outputs])\r\n   3220 \r\n   3221 \r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/backend.py in <listcomp>(.0)\r\n   3217     outputs = self._graph_fn(*converted_inputs)\r\n   3218     return nest.pack_sequence_as(self._outputs_structure,\r\n-> 3219                                  [x.numpy() for x in outputs])\r\n   3220 \r\n   3221 \r\n\r\nAttributeError: 'Tensor' object has no attribute 'numpy'\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27924", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27924/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27924/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27924/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27924", "id": 434350446, "node_id": "MDU6SXNzdWU0MzQzNTA0NDY=", "number": 27924, "title": "Estimator from Keras Model fails to learn when original keras Model learns fine", "user": {"login": "erbian", "id": 10658783, "node_id": "MDQ6VXNlcjEwNjU4Nzgz", "avatar_url": "https://avatars1.githubusercontent.com/u/10658783?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erbian", "html_url": "https://github.com/erbian", "followers_url": "https://api.github.com/users/erbian/followers", "following_url": "https://api.github.com/users/erbian/following{/other_user}", "gists_url": "https://api.github.com/users/erbian/gists{/gist_id}", "starred_url": "https://api.github.com/users/erbian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erbian/subscriptions", "organizations_url": "https://api.github.com/users/erbian/orgs", "repos_url": "https://api.github.com/users/erbian/repos", "events_url": "https://api.github.com/users/erbian/events{/privacy}", "received_events_url": "https://api.github.com/users/erbian/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-04-17T15:34:59Z", "updated_at": "2019-07-17T00:04:35Z", "closed_at": null, "author_association": "NONE", "body": "I have created a keras `Model` that learns a simple embedding from a deterministic function.  When I convert to an Estimator using ` tf.keras.estimator.model_to_estimator` learning fails to converge and the learned embeddings are incorrect.\r\n  \r\nI would expect that an Estimator constructed from a keras Model would have similar performance to the original keras Model.  However the keras model loss decays to zero quickly:\r\n\r\n![image](https://user-images.githubusercontent.com/10658783/56299648-760e7a80-6102-11e9-92d0-600480fe8659.png)\r\n\r\nBut the Estimator does not learn at all:\r\n![Screenshot from 2019-04-17 11-30-24](https://user-images.githubusercontent.com/10658783/56300844-a820dc00-6104-11e9-8fe8-fd4d7d70cbfa.png)\r\n\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport numpy as np\r\nimport pandas as pd\r\nimport tensorflow as tf\r\n\r\n# Generate Some Data\r\nnp.random.seed(1234)\r\nn_obs = 200\r\nn_sensors = 50\r\nn_sources  = 5\r\n\r\nZ = np.random.randn(n_obs, n_sources)\r\nb = np.random.randn(n_sources, n_sensors)\r\ny = Z.dot(b)\r\n\r\ndata = []\r\nfor t in range(n_obs):\r\n    betas = pd.DataFrame(b).rename(lambda x: 'f_{}'.format(x)).T\r\n    data.append(\r\n        pd.DataFrame({'target': y[t,:], 't': t}).join(betas)\r\n    )\r\n\r\ndata = pd.concat(data)\r\n\r\ndef build_keras_model():\r\n\"\"\"\r\nA model to learn `Z` in f(b, t) = Z[t].dot(b)\r\n\"\"\"\r\n    betas = tf.keras.layers.Input(shape=(n_sources,), name='betas')\r\n    t = tf.keras.layers.Input(shape=(1,), name='t')\r\n\r\n    sources = tf.keras.layers.Embedding(\r\n        input_dim=n_obs,\r\n        output_dim=n_sources,\r\n        name='sources')(t)\r\n\r\n    fitted = tf.keras.layers.Dot(axes=-1)([sources, betas])\r\n    net = tf.keras.Model([betas, t], fitted)\r\n    net.compile(optimizer='adadelta', loss='mse')\r\n    return net\r\n\r\n# Train Keras Model \r\nnet = build_keras_model()\r\nloss = []\r\n\r\nhist = net.fit(\r\n    x=[data.filter(like='f_'), data.t],\r\n    y=data.target,\r\n    batch_size=100,\r\n    epochs=200)\r\nloss += hist.history['loss']\r\n\r\n#  get embedding weights and average squared different to ground truth\r\nZ_hat_keras = net.get_layer('sources').get_weights()\r\nprint ((Z_hat_keras - Z) ** 2).mean()\r\n# Out: 8.794945836110652e-05\r\n\r\n# convert to a Estimator object\r\nestimator = tf.keras.estimator.model_to_estimator(net)\r\n\r\n# construct input functions for Estimator\r\ndef input_fn(data, batch_size, num_epochs, shuffle):\r\n    ds = tf.data.Dataset.from_tensor_slices((\r\n        {'betas': data.filter(like='f_'), 't': data.t}, data.target\r\n    ))\r\n\r\n    if shuffle:\r\n        ds = ds.shuffle(len(data))\r\n\r\n    return ds.repeat(num_epochs).batch(batch_size)\r\n\r\ntrain_fn = lambda: input_fn(data, 100, 200, True)\r\neval_fn = lambda: input_fn(data, 500,1,False)\r\n\r\n# run training on estimator\r\nestimator.train(train_fn)\r\nestimator.evaluate(eval_fn)\r\n# Out: {'global_step': 20001, 'loss': 5.0131807}\r\n\r\n#  get embedding weights and average squared different to ground truth\r\nZ_hat_tensorflow = estimator.get_variable_value('sources/embeddings')\r\nprint ((Z_hat_tensorflow - Z) ** 2).mean()\r\n# Out 0.928678746751657\r\n```\r\n\r\n**Other info / logs**\r\nI have also posted on StackOverflow with a bit more detail:\r\nhttps://stackoverflow.com/questions/55712219/are-keras-embedding-layers-getting-added-regularization-when-converted-to-tensor\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27915", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27915/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27915/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27915/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27915", "id": 434240986, "node_id": "MDU6SXNzdWU0MzQyNDA5ODY=", "number": 27915, "title": "[feature request]check whether a data iterator is initialized", "user": {"login": "passerbyd", "id": 12813325, "node_id": "MDQ6VXNlcjEyODEzMzI1", "avatar_url": "https://avatars0.githubusercontent.com/u/12813325?v=4", "gravatar_id": "", "url": "https://api.github.com/users/passerbyd", "html_url": "https://github.com/passerbyd", "followers_url": "https://api.github.com/users/passerbyd/followers", "following_url": "https://api.github.com/users/passerbyd/following{/other_user}", "gists_url": "https://api.github.com/users/passerbyd/gists{/gist_id}", "starred_url": "https://api.github.com/users/passerbyd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/passerbyd/subscriptions", "organizations_url": "https://api.github.com/users/passerbyd/orgs", "repos_url": "https://api.github.com/users/passerbyd/repos", "events_url": "https://api.github.com/users/passerbyd/events{/privacy}", "received_events_url": "https://api.github.com/users/passerbyd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-04-17T11:52:37Z", "updated_at": "2019-07-15T16:32:40Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): r1.13\r\n- Are you willing to contribute it (Yes/No): yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nWhen a dataset iterator is shared among sessions by \"shared_name\", non-chief sessions need to wait for its initialization on the chief session. And what is the proper way to check the state of iterators currently\uff1f\r\nIdeally, iterators should be initialized by init_ops of monitoredsession, and checked in model_ready function.\r\n\r\n**Will this change the current api? How?**\r\nNo changes on current api. add one new api like \"is_initialized\".\r\n\r\n**Who will benefit with this feature?**\r\nall who use \"shared_name\" feature."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27910", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27910/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27910/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27910/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27910", "id": 434129255, "node_id": "MDU6SXNzdWU0MzQxMjkyNTU=", "number": 27910, "title": "Want to optimize Tensorflow CUDA kernels", "user": {"login": "ThisIsIsaac", "id": 49523965, "node_id": "MDQ6VXNlcjQ5NTIzOTY1", "avatar_url": "https://avatars1.githubusercontent.com/u/49523965?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThisIsIsaac", "html_url": "https://github.com/ThisIsIsaac", "followers_url": "https://api.github.com/users/ThisIsIsaac/followers", "following_url": "https://api.github.com/users/ThisIsIsaac/following{/other_user}", "gists_url": "https://api.github.com/users/ThisIsIsaac/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThisIsIsaac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThisIsIsaac/subscriptions", "organizations_url": "https://api.github.com/users/ThisIsIsaac/orgs", "repos_url": "https://api.github.com/users/ThisIsIsaac/repos", "events_url": "https://api.github.com/users/ThisIsIsaac/events{/privacy}", "received_events_url": "https://api.github.com/users/ThisIsIsaac/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-04-17T07:18:23Z", "updated_at": "2019-07-26T16:56:23Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "I want to go through Tensorflow's CUDA kernels and optimize them.  It seems like all the CUDA kernels are defined in `tensorflow/core/kernels` and `tensorflow/contrib` with some helper functions in `tensorflow/core/util`. \r\n\r\n1. Is it okay for me to optimize kernels in `tensorflow/core/kernels` and send pull request?\r\n2. now that tensorflow is moving to 2.0, are the CUDA kernels going to also change so dramatically that any improvements to them now could be rendered useless?\r\n3. what are some conventions or practices when writing CUDA kernels? I have read the [contrib.md](https://github.com/tensorflow/tensorflow/blob/master/CONTRIBUTING.md), but there was nothing special on CUDA kernels ( ex. \" Do not change kernel launch configurations \" or \" must support devices of compute capability >= 3.0 \" )\r\n4. must I use `CudaGridRangeX` over regular for loops?\r\n5. Is there way to test and profile each .cu file individually, instead of having to rebuild the entire tensorflow or even having to test all kernels?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27909", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27909/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27909/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27909/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27909", "id": 434113941, "node_id": "MDU6SXNzdWU0MzQxMTM5NDE=", "number": 27909, "title": "ModelCheckpoint callback error", "user": {"login": "atomextranova", "id": 18370170, "node_id": "MDQ6VXNlcjE4MzcwMTcw", "avatar_url": "https://avatars0.githubusercontent.com/u/18370170?v=4", "gravatar_id": "", "url": "https://api.github.com/users/atomextranova", "html_url": "https://github.com/atomextranova", "followers_url": "https://api.github.com/users/atomextranova/followers", "following_url": "https://api.github.com/users/atomextranova/following{/other_user}", "gists_url": "https://api.github.com/users/atomextranova/gists{/gist_id}", "starred_url": "https://api.github.com/users/atomextranova/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/atomextranova/subscriptions", "organizations_url": "https://api.github.com/users/atomextranova/orgs", "repos_url": "https://api.github.com/users/atomextranova/repos", "events_url": "https://api.github.com/users/atomextranova/events{/privacy}", "received_events_url": "https://api.github.com/users/atomextranova/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 15, "created_at": "2019-04-17T06:31:23Z", "updated_at": "2019-11-20T02:09:40Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): Anaconda\r\n- TensorFlow version (use command below): 1.13.1\r\n- Python version: 3.5\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 7.3.4\r\n- GPU model and memory: GTX 2080 TI\r\n\r\n**Describe the current behavior**\r\nUsing tf.keras, when I fit the model with train dataset and validation dataset created from the tf.dataset, and use ModelCheckpoint with default policy, an error showed up. The error seemed to happen because the callbacks tried to save the model with the same name twice, one at the end of each training epoch, one at the end of each validation epoch twice(using validation dataset). This should not happen because I think the source code already set overwrite = true, but it still happened.\r\n\r\nThe error information:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"C:/Users/nones/iCloudDrive/Courses/DL/Ass8-CNN-MNIST/eager_tf_keras.py\", line 180, in <module>\r\n    fit_model_and_evaluate(model)\r\n  File \"C:/Users/nones/iCloudDrive/Courses/DL/Ass8-CNN-MNIST/eager_tf_keras.py\", line 172, in fit_model_and_evaluate\r\n    validation_steps=40, verbose=verbose)\r\n  File \"C:\\Users\\nones\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training.py\", line 851, in fit\r\n    initial_epoch=initial_epoch)\r\n  File \"C:\\Users\\nones\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\training_generator.py\", line 232, in model_iteration\r\n    callbacks.on_epoch_end(epoch, epoch_logs, mode=mode)\r\n  File \"C:\\Users\\nones\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\keras\\callbacks.py\", line 251, in on_epoch_end\r\n    callback.on_epoch_end(epoch, logs)\r\n  File \"C:\\Users\\nones\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\keras\\callbacks.py\", line 624, in on_epoch_end\r\n    self.model.save(filepath, overwrite=True)\r\n  File \"C:\\Users\\nones\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\network.py\", line 1334, in save\r\n    save_model(self, filepath, overwrite, include_optimizer)\r\n  File \"C:\\Users\\nones\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\keras\\engine\\saving.py\", line 152, in save_model\r\n    name, val.shape, dtype=val.dtype)\r\n  File \"C:\\Users\\nones\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\h5py\\_hl\\group.py\", line 119, in create_dataset\r\n    self[name] = dset\r\n  File \"C:\\Users\\nones\\Anaconda3\\envs\\tensorflow\\lib\\site-packages\\h5py\\_hl\\group.py\", line 287, in __setitem__\r\n    h5o.link(obj.id, self.id, name, lcpl=lcpl, lapl=self._lapl)\r\n  File \"h5py\\_objects.pyx\", line 54, in h5py._objects.with_phil.wrapper\r\n  File \"h5py\\_objects.pyx\", line 55, in h5py._objects.with_phil.wrapper\r\n  File \"h5py\\h5o.pyx\", line 202, in h5py.h5o.link\r\nRuntimeError: Unable to create link (name already exists)\r\n\r\n```\r\n\r\n**Describe the expected behavior**\r\nAt least the error should not happen when saving model with the same name twice. Better if we can explicitly control when a model is saved.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n```\r\nimport os\r\n\r\nimport matplotlib.pyplot as plt\r\nimport tensorflow as tf\r\nfrom sklearn.model_selection import train_test_split\r\n\r\ntf.enable_eager_execution()\r\n\r\n# Mnist dataset\r\nIMAGE_ROW, IMAGE_COLS = 28, 28\r\nNUM_CLASSES = 10\r\nBATCH_SIZE = 32\r\n\r\ntemp_dir = './temp'\r\n\r\n\r\ndef get_input_datasets(use_bfloat16=False):\r\n    \"\"\"Creates train and test dataset objects for mnist dataset.\r\n    Args:\r\n      use_bfloat16: Boolean, to determine if input should be cast to bfloat16\r\n    Returns:\r\n      Train dataset, test dataset and input shape, and class names.\r\n    \"\"\"\r\n\r\n    cast_dtype = tf.bfloat16 if use_bfloat16 else tf.float32\r\n    class_names = ['T-shirt/top', 'Trouser', 'Pullover', 'Dress', 'Coat',\r\n                   'Sandal', 'Shirt', 'Sneaker', 'Bag', 'Ankle boot']\r\n\r\n    # the data, split between train and test sets\r\n    (x_train, y_train), (x_test, y_test) = tf.keras.datasets.mnist.load_data()\r\n\r\n    if tf.keras.backend.image_data_format() == 'channels_first':\r\n        x_train = x_train.reshape(x_train.shape[0], 1, IMAGE_ROW, IMAGE_COLS)\r\n        x_test = x_test.reshape(x_test.shape[0], 1, IMAGE_ROW, IMAGE_COLS)\r\n        input_shape = (1, IMAGE_ROW, IMAGE_COLS)\r\n    else:\r\n        x_train = x_train.reshape(x_train.shape[0], IMAGE_ROW, IMAGE_COLS, 1)\r\n        x_test = x_test.reshape(x_test.shape[0], IMAGE_ROW, IMAGE_COLS, 1)\r\n        input_shape = (IMAGE_ROW, IMAGE_COLS, 1)\r\n\r\n    # Preprocess\r\n    x_train = x_train.astype('float32')\r\n    x_test = x_test.astype('float32')\r\n    x_train /= 255\r\n    x_test /= 255\r\n\r\n    y_train = tf.keras.utils.to_categorical(y_train, NUM_CLASSES)\r\n    y_test = tf.keras.utils.to_categorical(y_test, NUM_CLASSES)\r\n\r\n    # build dataset\r\n    # ds_train = tf.data.Dataset.from_tensor_slices({'images': x_train, 'labels': y_train})\r\n    # ds_test = tf.data.Dataset.from_tensor_slices({'images': x_test, 'labels': y_test})\r\n\r\n    x_train, x_valid, y_train, y_valid = train_test_split(x_train, y_train, test_size=0.1)\r\n\r\n    ds_train = tf.data.Dataset.from_tensor_slices((x_train, y_train))\r\n    ds_valid = tf.data.Dataset.from_tensor_slices((x_valid, y_valid))\r\n    ds_test = tf.data.Dataset.from_tensor_slices((x_test,y_test))\r\n\r\n    # Preprocess dataset\r\n    ds_train = preprocess_dataset(ds_train, cast_dtype)\r\n    ds_valid = preprocess_dataset(ds_valid, cast_dtype)\r\n    ds_test = preprocess_dataset(ds_test, cast_dtype)\r\n\r\n    return ds_train, ds_valid, ds_test, input_shape, class_names\r\n\r\n\r\ndef preprocess_dataset(dataset, cast_dtype):\r\n    dataset = dataset.map(lambda x, y: (tf.cast(x, cast_dtype), y))\r\n    dataset = dataset.shuffle(buffer_size=6000)\r\n    dataset = dataset.repeat()\r\n    dataset = dataset.batch(BATCH_SIZE)\r\n    dataset = dataset.prefetch(buffer_size=1000)\r\n    return dataset\r\n\r\n\r\ndef plot_image(image):\r\n    plt.figure()\r\n    plt.imshow(image)\r\n    plt.colorbar()\r\n    plt.grid(False)\r\n\r\n\r\ndef test_ds(dataset, fname):\r\n    save_dir = os.path.join(temp_dir, \"%s.png\" % fname)\r\n    os.makedirs(temp_dir, exist_ok=True)\r\n    plt.figure()\r\n    for image, label in dataset.take(1):\r\n        for index in range(4):\r\n            plt.subplot(2, 2, index + 1)\r\n            plt.imshow(image[index].numpy().reshape(28, 28))\r\n            plt.xlabel(label[index].numpy())\r\n            plt.grid(False)\r\n    plt.savefig(save_dir, bbox_inches=\"tight\")\r\n    plt.clf()\r\n\r\ndef get_optimizer(optimizer_choice='SGD', learning_rate=0.01, momentum=0.9):\r\n    return {\r\n        'SGD':tf.keras.optimizers.SGD(lr=learning_rate, momentum=momentum),\r\n        'Adam': tf.keras.optimizers.Adam(lr=learning_rate)\r\n    }.get(optimizer_choice, 'SGD')\r\n    #\r\n    # return {\r\n    #     'SGD':tf.train.MomentumOptimizer(learning_rate=learning_rate, momentum=momentum),\r\n    #     'Adam': tf.train.AdamOptimizer(learning_rate=learning_rate)\r\n    # }.get(optimizer_choice, 'SGD')\r\n\r\n\r\ndef create_model(input_shapes):\r\n    model = tf.keras.Sequential()\r\n    model.add(tf.keras.layers.Conv2D(filters=64, kernel_size=(3, 3), activation='relu', input_shape=input_shapes))\r\n    model.add(tf.keras.layers.Conv2D(filters=64, kernel_size=(3, 3), activation='relu'))\r\n    model.add(tf.keras.layers.MaxPooling2D(pool_size=(2, 2)))\r\n    model.add(tf.keras.layers.Dropout(0.25))\r\n    model.add(tf.keras.layers.Flatten())\r\n    model.add(tf.keras.layers.Dense(128, activation='relu'))\r\n    model.add(tf.keras.layers.Dropout(0.5))\r\n    model.add(tf.keras.layers.Dense(NUM_CLASSES, activation='softmax'))\r\n    return model\r\n\r\n\r\ndef create_model_functional(input_shapes, kernel_size=(3, 3), dropout_rate=0, l2_regularizer=0.1):\r\n    input_tensor = tf.keras.Input(shape=input_shapes)\r\n    layer = tf.keras.layers.Conv2D(filters=64, kernel_size=kernel_size, activation='relu')(input_tensor)\r\n    layer = tf.keras.layers.Conv2D(filters=64, kernel_size=kernel_size, activation='relu')(layer)\r\n    layer = tf.keras.layers.MaxPooling2D(pool_size=(2, 2))(layer)\r\n    layer = tf.keras.layers.Dropout(rate=dropout_rate)(layer)\r\n    layer = tf.keras.layers.Flatten()(layer)\r\n    layer = tf.keras.layers.Dense(128, activation='relu')(layer)\r\n    layer = tf.keras.layers.Dropout(rate=dropout_rate)(layer)\r\n    predictions = tf.keras.layers.Dense(NUM_CLASSES, activation='softmax',\r\n                                        kernel_regularizer=tf.keras.regularizers.l2(l=l2_regularizer))(layer)\r\n    model = tf.keras.models.Model(inputs=input_tensor, outputs=predictions)\r\n    return model\r\n\r\ndef fit_model_and_evaluate(model, optimizer_choice='SGD', learning_rate=0.01, verbose=1):\r\n    optimizer = get_optimizer(optimizer_choice=optimizer_choice, learning_rate=learning_rate)\r\n    os.makedirs('graph', exist_ok=True)\r\n    os.makedirs('checkpoint', exist_ok=True)\r\n    file_path = 'checkpoint/model.{epoch:02d}-{val_loss:.4f}-{val_acc:.4f}.hdf5'\r\n    model_checkpoint = tf.keras.callbacks.ModelCheckpoint(file_path)\r\n    # log_dir = os.path.join()\r\n    board = tf.keras.callbacks.TensorBoard(log_dir='./graph', histogram_freq=0,\r\n                                           write_graph=True, write_images=True)\r\n    model.compile(loss=tf.keras.losses.categorical_crossentropy,\r\n                  optimizer=optimizer,\r\n                  metrics=['accuracy', tf.keras.metrics.Precision(), tf.keras.metrics.Recall()])\r\n    model.fit(x=ds_train, validation_data=ds_valid, epochs=20, steps_per_epoch=468,\r\n              callbacks=[board, model_checkpoint],\r\n              validation_steps=40, verbose=verbose)\r\n    score = model.evaluate(ds_test, steps=10, verbose=0)\r\n    print('Test loss:', score[0])\r\n    print('Test accuracy:', score[1])\r\n\r\nif __name__ == '__main__':\r\n    ds_train, ds_valid, ds_test, input_shapes, class_names = get_input_datasets()\r\n    model = create_model_functional(input_shapes)\r\n    fit_model_and_evaluate(model)\r\n    # test_ds(ds_train, 'train')\r\n    # test_ds(ds_test, 'test')\r\n```\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27903", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27903/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27903/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27903/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27903", "id": 434002355, "node_id": "MDU6SXNzdWU0MzQwMDIzNTU=", "number": 27903, "title": "Pylint checks from ci_sanity.sh `--incremental`", "user": {"login": "lc0", "id": 775466, "node_id": "MDQ6VXNlcjc3NTQ2Ng==", "avatar_url": "https://avatars1.githubusercontent.com/u/775466?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lc0", "html_url": "https://github.com/lc0", "followers_url": "https://api.github.com/users/lc0/followers", "following_url": "https://api.github.com/users/lc0/following{/other_user}", "gists_url": "https://api.github.com/users/lc0/gists{/gist_id}", "starred_url": "https://api.github.com/users/lc0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lc0/subscriptions", "organizations_url": "https://api.github.com/users/lc0/orgs", "repos_url": "https://api.github.com/users/lc0/repos", "events_url": "https://api.github.com/users/lc0/events{/privacy}", "received_events_url": "https://api.github.com/users/lc0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-04-16T21:53:51Z", "updated_at": "2019-11-26T00:32:05Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "Currently we kind of support `--incremental` to run incremental sanity checks. In reality, we still run it for all files:\r\n\r\nhttps://github.com/tensorflow/tensorflow/blob/0e4117f67192a140466ba66513035e24bbd1a474/tensorflow/tools/ci_build/ci_sanity.sh#L137\r\n\r\n```\r\n# For incremental builds, we still check all Python files in cases there\r\n# are function signature changes that affect unchanged Python files.\r\n```\r\n\r\nWould it make sense to just clean it up or what is the current idea? \r\n\r\nI started to add an incremental check for since a specific commit, so one can run checks for changes across multiple commits.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27902", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27902/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27902/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27902/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27902", "id": 433979857, "node_id": "MDU6SXNzdWU0MzM5Nzk4NTc=", "number": 27902, "title": "ResizeBilinear FP16 CUDA Kernel Support", "user": {"login": "mhurliman", "id": 6408603, "node_id": "MDQ6VXNlcjY0MDg2MDM=", "avatar_url": "https://avatars1.githubusercontent.com/u/6408603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mhurliman", "html_url": "https://github.com/mhurliman", "followers_url": "https://api.github.com/users/mhurliman/followers", "following_url": "https://api.github.com/users/mhurliman/following{/other_user}", "gists_url": "https://api.github.com/users/mhurliman/gists{/gist_id}", "starred_url": "https://api.github.com/users/mhurliman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mhurliman/subscriptions", "organizations_url": "https://api.github.com/users/mhurliman/orgs", "repos_url": "https://api.github.com/users/mhurliman/repos", "events_url": "https://api.github.com/users/mhurliman/events{/privacy}", "received_events_url": "https://api.github.com/users/mhurliman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, {"login": "mhurliman", "id": 6408603, "node_id": "MDQ6VXNlcjY0MDg2MDM=", "avatar_url": "https://avatars1.githubusercontent.com/u/6408603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mhurliman", "html_url": "https://github.com/mhurliman", "followers_url": "https://api.github.com/users/mhurliman/followers", "following_url": "https://api.github.com/users/mhurliman/following{/other_user}", "gists_url": "https://api.github.com/users/mhurliman/gists{/gist_id}", "starred_url": "https://api.github.com/users/mhurliman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mhurliman/subscriptions", "organizations_url": "https://api.github.com/users/mhurliman/orgs", "repos_url": "https://api.github.com/users/mhurliman/repos", "events_url": "https://api.github.com/users/mhurliman/events{/privacy}", "received_events_url": "https://api.github.com/users/mhurliman/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-04-16T20:52:55Z", "updated_at": "2019-12-16T01:48:44Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): no\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.13.1\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 10/7.4.1\r\n- GPU model and memory: NVIDIA Titan V\r\n\r\n\r\n**Describe the current behavior**\r\nThe resize bilinear CUDA kernel omits FP16 support. The implementation accepts a templated tensor type, but then internally performs a hard-cast to a float during filtering, which is then written to a float tensor. Couldn't the templated type be propagated to the output as in resize nearest neighbor?\r\n\r\nThis causes a significant and anomalous perf drop when converting from FP32 to FP16 in networks that utilize this operation.\r\n\r\n\r\n**Describe the expected behavior**\r\nAn FP16 variant would be implemented alongside the FP32 CUDA implementation, with performance scaling appropriately between the two.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27899", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27899/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27899/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27899/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27899", "id": 433941335, "node_id": "MDU6SXNzdWU0MzM5NDEzMzU=", "number": 27899, "title": "Can't easily write custom C++ ops which update resource variables", "user": {"login": "girving", "id": 70511, "node_id": "MDQ6VXNlcjcwNTEx", "avatar_url": "https://avatars1.githubusercontent.com/u/70511?v=4", "gravatar_id": "", "url": "https://api.github.com/users/girving", "html_url": "https://github.com/girving", "followers_url": "https://api.github.com/users/girving/followers", "following_url": "https://api.github.com/users/girving/following{/other_user}", "gists_url": "https://api.github.com/users/girving/gists{/gist_id}", "starred_url": "https://api.github.com/users/girving/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/girving/subscriptions", "organizations_url": "https://api.github.com/users/girving/orgs", "repos_url": "https://api.github.com/users/girving/repos", "events_url": "https://api.github.com/users/girving/events{/privacy}", "received_events_url": "https://api.github.com/users/girving/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-16T19:11:38Z", "updated_at": "2019-06-07T20:33:42Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- TensorFlow version (you are using): HEAD\r\n- Are you willing to contribute it (Yes/No): No (moving headers is best done inside Google)\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nWe're trying to update optimizers like the ones at https://github.com/openai/blocksparse/blob/master/blocksparse/optimize.py to support parameters stored as resource variables. Looking at the TensorFlow source code for the built-in optimizer ops, it seems necessary to have relatively complicated locking and copy-on-write logic to handle the different states a resource variable could be in. TensorFlow uses helper functions in [`core/kernels/training_op_helpers.h`](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/training_op_helpers.h) to do this, calling `MaybeLockVariableInputMutexesInOrder` and `GetInputTensorFromVariable`.\r\n\r\nUnfortunately, `training_op_helpers.h` is not in the public TensorFlow headers, so we can't just `#include` it. Worse, it depends on internal functions that `libtensorflow_framework.so` doesn't even export (notably, `tensorflow::functor::DenseUpdate` for the copy-on-write), so copying the headers also doesn't suffice.\r\n\r\nCan we move this file and the relevant dependencies into `framework` or a similarly public location?\r\n\r\n**Will this change the current api? How?**\r\n\r\nYes.  Those helpers would become public.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nPeople writing new C++ optimizers.\r\n\r\n**Any Other info.**\r\n\r\nRelated StackOverflow question (cc @daniel-ziegler): https://stackoverflow.com/questions/55661246/how-to-write-custom-c-ops-which-update-resource-variables"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27896", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27896/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27896/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27896/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27896", "id": 433886596, "node_id": "MDU6SXNzdWU0MzM4ODY1OTY=", "number": 27896, "title": "Changing the tf_random_seed (RunConfig) doesn't change results/parameters for LinearClassifier", "user": {"login": "echo66", "id": 778261, "node_id": "MDQ6VXNlcjc3ODI2MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/778261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/echo66", "html_url": "https://github.com/echo66", "followers_url": "https://api.github.com/users/echo66/followers", "following_url": "https://api.github.com/users/echo66/following{/other_user}", "gists_url": "https://api.github.com/users/echo66/gists{/gist_id}", "starred_url": "https://api.github.com/users/echo66/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/echo66/subscriptions", "organizations_url": "https://api.github.com/users/echo66/orgs", "repos_url": "https://api.github.com/users/echo66/repos", "events_url": "https://api.github.com/users/echo66/events{/privacy}", "received_events_url": "https://api.github.com/users/echo66/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yhliang2018", "id": 36285763, "node_id": "MDQ6VXNlcjM2Mjg1NzYz", "avatar_url": "https://avatars1.githubusercontent.com/u/36285763?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yhliang2018", "html_url": "https://github.com/yhliang2018", "followers_url": "https://api.github.com/users/yhliang2018/followers", "following_url": "https://api.github.com/users/yhliang2018/following{/other_user}", "gists_url": "https://api.github.com/users/yhliang2018/gists{/gist_id}", "starred_url": "https://api.github.com/users/yhliang2018/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yhliang2018/subscriptions", "organizations_url": "https://api.github.com/users/yhliang2018/orgs", "repos_url": "https://api.github.com/users/yhliang2018/repos", "events_url": "https://api.github.com/users/yhliang2018/events{/privacy}", "received_events_url": "https://api.github.com/users/yhliang2018/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yhliang2018", "id": 36285763, "node_id": "MDQ6VXNlcjM2Mjg1NzYz", "avatar_url": "https://avatars1.githubusercontent.com/u/36285763?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yhliang2018", "html_url": "https://github.com/yhliang2018", "followers_url": "https://api.github.com/users/yhliang2018/followers", "following_url": "https://api.github.com/users/yhliang2018/following{/other_user}", "gists_url": "https://api.github.com/users/yhliang2018/gists{/gist_id}", "starred_url": "https://api.github.com/users/yhliang2018/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yhliang2018/subscriptions", "organizations_url": "https://api.github.com/users/yhliang2018/orgs", "repos_url": "https://api.github.com/users/yhliang2018/repos", "events_url": "https://api.github.com/users/yhliang2018/events{/privacy}", "received_events_url": "https://api.github.com/users/yhliang2018/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-04-16T16:54:51Z", "updated_at": "2019-05-08T22:56:48Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04.2 LTS\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): N/A\r\n- TensorFlow version (use command below): v1.13.1-0-g6612da8951\r\n- Python version: 3.6.7\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\nUsing different `tf_random_seed` values for `tf.estimator.RunConfig` produces the same model performance and parameters for `tf.estimator.LinearClassifier`.\r\n\r\n**Describe the expected behavior**\r\nDifferent seeds to produce different performance/parameters, specially if the dataset is small or if the optimizer only takes a step for a small batch size.\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport pandas as pd\r\nimport numpy as np\r\n\r\nfrom sklearn.datasets import make_classification\r\nfrom sklearn.metrics import roc_auc_score\r\n\r\nimport tensorflow as tf\r\nfrom tensorflow.logging import set_verbosity\r\nfrom tensorflow.estimator.inputs import pandas_input_fn\r\nfrom tensorflow.estimator import LinearClassifier\r\nfrom tensorflow.feature_column import numeric_column\r\n\r\n\r\nX, y = make_classification(n_samples=50000, n_classes=2, \r\n                           n_clusters_per_class=4, class_sep=1.0, \r\n                           random_state=10, weights=[0.8, 0.2], \r\n                           n_features=10, n_informative=5)\r\n\r\nX = pd.DataFrame(X, columns=[\"f{}\".format(i) for i in range(10)])\r\ny = pd.Series(y)\r\n\r\ninput_fn = pandas_input_fn(X, y=y, batch_size=5, num_epochs=1, shuffle=False)\r\n\r\nfeature_columns = [numeric_column(key=c) for c in X.columns]\r\n\r\nclassifier = LinearClassifier(feature_columns, config=tf.estimator.RunConfig(tf_random_seed=10))\r\n\r\nclassifier.train(input_fn, steps=1)\r\n\r\nprint('\\n\\n\\n')\r\n\r\nfor c in X.columns:\r\n    print(c, classifier.get_variable_value(\"linear/linear_model/{}/weights\".format(c))[0][0])\r\n\r\nfeature_columns = [numeric_column(key=c) for c in X.columns]\r\n\r\nclassifier = LinearClassifier(feature_columns, config=tf.estimator.RunConfig(tf_random_seed=31231))\r\n\r\nclassifier.train(input_fn, steps=1)\r\n\r\nprint('\\n\\n\\n')\r\n\r\nfor c in X.columns:\r\n    print(c, classifier.get_variable_value(\"linear/linear_model/{}/weights\".format(c))[0][0])\r\n```\r\n\r\n**Other info / logs**\r\n```\r\nf0 -0.1945913\r\nf1 -0.19702944\r\nf2 0.1967695\r\nf3 0.19892408\r\nf4 -0.18479808\r\nf5 -0.19904605\r\nf6 0.1991331\r\nf7 -0.19970222\r\nf8 0.186639\r\nf9 -0.1857145\r\n\r\n\r\n\r\n\r\nf0 -0.1945913\r\nf1 -0.19702944\r\nf2 0.1967695\r\nf3 0.19892408\r\nf4 -0.18479808\r\nf5 -0.19904605\r\nf6 0.1991331\r\nf7 -0.19970222\r\nf8 0.186639\r\nf9 -0.1857145\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27895", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27895/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27895/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27895/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27895", "id": 433863504, "node_id": "MDU6SXNzdWU0MzM4NjM1MDQ=", "number": 27895, "title": "[TF 2.0] documentation in guides for feature columns, in particular `numeric_column`", "user": {"login": "lendle", "id": 815403, "node_id": "MDQ6VXNlcjgxNTQwMw==", "avatar_url": "https://avatars3.githubusercontent.com/u/815403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lendle", "html_url": "https://github.com/lendle", "followers_url": "https://api.github.com/users/lendle/followers", "following_url": "https://api.github.com/users/lendle/following{/other_user}", "gists_url": "https://api.github.com/users/lendle/gists{/gist_id}", "starred_url": "https://api.github.com/users/lendle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lendle/subscriptions", "organizations_url": "https://api.github.com/users/lendle/orgs", "repos_url": "https://api.github.com/users/lendle/repos", "events_url": "https://api.github.com/users/lendle/events{/privacy}", "received_events_url": "https://api.github.com/users/lendle/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "lamberta", "id": 43051, "node_id": "MDQ6VXNlcjQzMDUx", "avatar_url": "https://avatars2.githubusercontent.com/u/43051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lamberta", "html_url": "https://github.com/lamberta", "followers_url": "https://api.github.com/users/lamberta/followers", "following_url": "https://api.github.com/users/lamberta/following{/other_user}", "gists_url": "https://api.github.com/users/lamberta/gists{/gist_id}", "starred_url": "https://api.github.com/users/lamberta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lamberta/subscriptions", "organizations_url": "https://api.github.com/users/lamberta/orgs", "repos_url": "https://api.github.com/users/lamberta/repos", "events_url": "https://api.github.com/users/lamberta/events{/privacy}", "received_events_url": "https://api.github.com/users/lamberta/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lamberta", "id": 43051, "node_id": "MDQ6VXNlcjQzMDUx", "avatar_url": "https://avatars2.githubusercontent.com/u/43051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lamberta", "html_url": "https://github.com/lamberta", "followers_url": "https://api.github.com/users/lamberta/followers", "following_url": "https://api.github.com/users/lamberta/following{/other_user}", "gists_url": "https://api.github.com/users/lamberta/gists{/gist_id}", "starred_url": "https://api.github.com/users/lamberta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lamberta/subscriptions", "organizations_url": "https://api.github.com/users/lamberta/orgs", "repos_url": "https://api.github.com/users/lamberta/repos", "events_url": "https://api.github.com/users/lamberta/events{/privacy}", "received_events_url": "https://api.github.com/users/lamberta/received_events", "type": "User", "site_admin": false}, {"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}, {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, {"login": "adammichaelwood", "id": 1776241, "node_id": "MDQ6VXNlcjE3NzYyNDE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1776241?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adammichaelwood", "html_url": "https://github.com/adammichaelwood", "followers_url": "https://api.github.com/users/adammichaelwood/followers", "following_url": "https://api.github.com/users/adammichaelwood/following{/other_user}", "gists_url": "https://api.github.com/users/adammichaelwood/gists{/gist_id}", "starred_url": "https://api.github.com/users/adammichaelwood/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adammichaelwood/subscriptions", "organizations_url": "https://api.github.com/users/adammichaelwood/orgs", "repos_url": "https://api.github.com/users/adammichaelwood/repos", "events_url": "https://api.github.com/users/adammichaelwood/events{/privacy}", "received_events_url": "https://api.github.com/users/adammichaelwood/received_events", "type": "User", "site_admin": false}, {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, {"login": "yashk2810", "id": 14262417, "node_id": "MDQ6VXNlcjE0MjYyNDE3", "avatar_url": "https://avatars1.githubusercontent.com/u/14262417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yashk2810", "html_url": "https://github.com/yashk2810", "followers_url": "https://api.github.com/users/yashk2810/followers", "following_url": "https://api.github.com/users/yashk2810/following{/other_user}", "gists_url": "https://api.github.com/users/yashk2810/gists{/gist_id}", "starred_url": "https://api.github.com/users/yashk2810/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yashk2810/subscriptions", "organizations_url": "https://api.github.com/users/yashk2810/orgs", "repos_url": "https://api.github.com/users/yashk2810/repos", "events_url": "https://api.github.com/users/yashk2810/events{/privacy}", "received_events_url": "https://api.github.com/users/yashk2810/received_events", "type": "User", "site_admin": false}, {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-04-16T16:04:24Z", "updated_at": "2020-02-19T06:58:24Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- TensorFlow version: 2.0.0-alpha0\r\n- Doc Link: https://www.tensorflow.org/alpha\r\n\r\nGuides/examples that use feature columns follow a bad pattern for numeric features. In particular, the examples in the guides always create a list of scalar `numeric_column`s instead of one `numeric_column` with all numeric features. This results in really bad performance when training. See [this thread](https://groups.google.com/a/tensorflow.org/d/msg/discuss/Vt0JGKF_Bno/S5XXmdaoCQAJ).\r\nLocations in the docs (there may be others I missed): \r\n* https://www.tensorflow.org/alpha/tutorials/estimators/linear#base_feature_columns\r\n* https://www.tensorflow.org/guide/estimators#structure_of_a_pre-made_estimators_program\r\n* https://www.tensorflow.org/alpha/tutorials/keras/feature_columns#choose_which_columns_to_use\r\n* https://www.tensorflow.org/alpha/tutorials/estimators/boosted_trees#create_feature_columns_and_input_functions\r\n* https://www.tensorflow.org/alpha/tutorials/estimators/boosted_trees_model_understanding#create_feature_columns_input_fn_and_the_train_the_estimator\r\n\r\n\r\nThe '[Feature Columns guide](https://www.tensorflow.org/guide/feature_columns)' from TF 1 or anything analogous is not available in the [TF 2 docs](https://www.tensorflow.org/alpha). That guide does mention the shape parameter, but does not discuss performance at all, and also describes creating a separate `numeric_column` for each feature in the Iris dataset in [this section](https://www.tensorflow.org/guide/feature_columns#numeric_column)."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27880", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27880/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27880/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27880/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27880", "id": 433550068, "node_id": "MDU6SXNzdWU0MzM1NTAwNjg=", "number": 27880, "title": "Quantization-Aware Training support in Keras", "user": {"login": "ed-alertedh", "id": 24605895, "node_id": "MDQ6VXNlcjI0NjA1ODk1", "avatar_url": "https://avatars1.githubusercontent.com/u/24605895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ed-alertedh", "html_url": "https://github.com/ed-alertedh", "followers_url": "https://api.github.com/users/ed-alertedh/followers", "following_url": "https://api.github.com/users/ed-alertedh/following{/other_user}", "gists_url": "https://api.github.com/users/ed-alertedh/gists{/gist_id}", "starred_url": "https://api.github.com/users/ed-alertedh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ed-alertedh/subscriptions", "organizations_url": "https://api.github.com/users/ed-alertedh/orgs", "repos_url": "https://api.github.com/users/ed-alertedh/repos", "events_url": "https://api.github.com/users/ed-alertedh/events{/privacy}", "received_events_url": "https://api.github.com/users/ed-alertedh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "alanchiao", "id": 4323109, "node_id": "MDQ6VXNlcjQzMjMxMDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/4323109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alanchiao", "html_url": "https://github.com/alanchiao", "followers_url": "https://api.github.com/users/alanchiao/followers", "following_url": "https://api.github.com/users/alanchiao/following{/other_user}", "gists_url": "https://api.github.com/users/alanchiao/gists{/gist_id}", "starred_url": "https://api.github.com/users/alanchiao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alanchiao/subscriptions", "organizations_url": "https://api.github.com/users/alanchiao/orgs", "repos_url": "https://api.github.com/users/alanchiao/repos", "events_url": "https://api.github.com/users/alanchiao/events{/privacy}", "received_events_url": "https://api.github.com/users/alanchiao/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alanchiao", "id": 4323109, "node_id": "MDQ6VXNlcjQzMjMxMDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/4323109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alanchiao", "html_url": "https://github.com/alanchiao", "followers_url": "https://api.github.com/users/alanchiao/followers", "following_url": "https://api.github.com/users/alanchiao/following{/other_user}", "gists_url": "https://api.github.com/users/alanchiao/gists{/gist_id}", "starred_url": "https://api.github.com/users/alanchiao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alanchiao/subscriptions", "organizations_url": "https://api.github.com/users/alanchiao/orgs", "repos_url": "https://api.github.com/users/alanchiao/repos", "events_url": "https://api.github.com/users/alanchiao/events{/privacy}", "received_events_url": "https://api.github.com/users/alanchiao/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 133, "created_at": "2019-04-16T02:03:39Z", "updated_at": "2020-03-04T22:09:11Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 1.13.1 (but willing to use 2.0.0-alpha0 if there is a good reason)\r\n- Are you willing to contribute it (Yes/No): Yes (given some pointers on how to best go about it)\r\n\r\n**Describe the feature and the current behavior/state.**\r\nCurrently there is no obvious way to apply `tf.contrib.quantize.create_training_graph` to a keras model. The keras API only allows access to the graph after it has already created a session. Attempting to modify the graph at this point does not work:\r\nhttps://stackoverflow.com/questions/55123417/quantization-aware-retraining-a-keras-model\r\nhttps://stackoverflow.com/questions/52259343/quantize-a-keras-neural-network-model\r\n\r\nI have also tried to create a new session after rewriting the graph, without success:\r\n```\r\ntf.contrib.quantize.create_training_graph(input_graph=tf.keras.backend.get_session().graph, quant_delay=0)\r\n# create a new session after rewriting the graph\r\nnew_session = tf.Session()\r\ntf.keras.backend.set_session(new_session)\r\n```\r\n\r\nResults in this error when I try to fit the model:\r\n```\r\ntensorflow.python.framework.errors_impl.FailedPreconditionError: Error while reading resource variable dense_5/bias from Container: localhost. This could mean that the variable was uninitialized. Not found: Resource localhost/dense_5/bias/class tensorflow::Var does not exist.\r\n        [[{{node dense_5/BiasAdd/ReadVariableOp}}]]\r\n```\r\n\r\n**Will this change the current api? How?**\r\nProbably, but in a backwards-compatible way. I imagine some kind of graph rewriting hook would probably be necessary in the tf.keras API.\r\n\r\n**Who will benefit with this feature?** Users of TF Lite / Edge TPU wishing to easily train quantized models using the keras API (which is being pushed as the new \"one true API\" for tensorflow).\r\n\r\n**Any Other info.**\r\nRelated issue on the main keras project https://github.com/keras-team/keras/issues/11105"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27875", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27875/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27875/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27875/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27875", "id": 433504286, "node_id": "MDU6SXNzdWU0MzM1MDQyODY=", "number": 27875, "title": "Second Order derivative of sparse_softmax_cross_entropy_with_logits", "user": {"login": "botev", "id": 1889878, "node_id": "MDQ6VXNlcjE4ODk4Nzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1889878?v=4", "gravatar_id": "", "url": "https://api.github.com/users/botev", "html_url": "https://github.com/botev", "followers_url": "https://api.github.com/users/botev/followers", "following_url": "https://api.github.com/users/botev/following{/other_user}", "gists_url": "https://api.github.com/users/botev/gists{/gist_id}", "starred_url": "https://api.github.com/users/botev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/botev/subscriptions", "organizations_url": "https://api.github.com/users/botev/orgs", "repos_url": "https://api.github.com/users/botev/repos", "events_url": "https://api.github.com/users/botev/events{/privacy}", "received_events_url": "https://api.github.com/users/botev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-04-15T22:26:00Z", "updated_at": "2019-09-25T00:09:33Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Non\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): PyPI\r\n- TensorFlow version (use command below): 2.0-alpha\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behaviour**\r\nCurrently trying to take second order derivatives of `sparse_softmax_cross_entropy_with_logits` leads to the error:\r\n```\r\nLookupError: Gradient explicitly disabled. Reason: b\"Currently there is no way to take the second derivative of sparse_softmax_cross_entropy_with_logits due to the fused implementation's interaction with tf.gradients()\"\r\n```\r\n\r\n**Describe the expected behavior**\r\nThis should work.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27872", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27872/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27872/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27872/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27872", "id": 433460379, "node_id": "MDU6SXNzdWU0MzM0NjAzNzk=", "number": 27872, "title": "examples/get_started/regression/dnn_regression.py failed with ValueError (nightly build)", "user": {"login": "wdirons", "id": 22967383, "node_id": "MDQ6VXNlcjIyOTY3Mzgz", "avatar_url": "https://avatars3.githubusercontent.com/u/22967383?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wdirons", "html_url": "https://github.com/wdirons", "followers_url": "https://api.github.com/users/wdirons/followers", "following_url": "https://api.github.com/users/wdirons/following{/other_user}", "gists_url": "https://api.github.com/users/wdirons/gists{/gist_id}", "starred_url": "https://api.github.com/users/wdirons/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wdirons/subscriptions", "organizations_url": "https://api.github.com/users/wdirons/orgs", "repos_url": "https://api.github.com/users/wdirons/repos", "events_url": "https://api.github.com/users/wdirons/events{/privacy}", "received_events_url": "https://api.github.com/users/wdirons/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-04-15T20:18:19Z", "updated_at": "2019-07-19T10:06:14Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "The above example has not been working for awhile now. (I don't believe it worked with 1.13.1) the code looks valid, what is wrong with the example code?\r\n\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): x86 Linux Ubuntu 18.04 container\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v1.12.0-12503-g5e52b70188 1.14.1-dev20190415\r\n- Python version: 3.6.7\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\nThe example https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/get_started/regression/dnn_regression.py, fails with the following error:\r\nValueError: Tensor(\"buffer_size:0\", shape=(), dtype=int64, device=/device:CPU:0) must be from the same graph as Tensor(\"MapDataset_2:0\", shape=(), dtype=variant).\r\n\r\n(Actually all 3 examples in that folder fail with the same error)\r\n\r\n**Describe the expected behavior**\r\nProvided examples should run without failure\r\n\r\n**Code to reproduce the issue**\r\npip3 install tf-nightly\r\ngit clone http://github.com/tensorflow/tensorflow\r\ncd tensorflow/tensorflow/examples/get_started/regression/\r\npython3 dnn_regression.py\r\n\r\n**Other info / logs**\r\n```\r\nroot@c12a5b5766c5:~/tensorflow/tensorflow/examples/get_started/regression# python3 dnn_regression.py\r\n\r\nWARNING: The TensorFlow contrib module will not be included in TensorFlow 2.0.\r\nFor more information, please see:\r\n  * https://github.com/tensorflow/community/blob/master/rfcs/20180907-contrib-sunset.md\r\n  * https://github.com/tensorflow/addons\r\n  * https://github.com/tensorflow/io (for I/O related ops)\r\nIf you depend on functionality not listed there, please file an issue.\r\n\r\nDownloading data from https://archive.ics.uci.edu/ml/machine-learning-databases/autos/imports-85.data\r\n32768/25936 [=====================================] - 0s 1us/step\r\nW0415 20:14:20.850975 140624720754496 deprecation.py:237] From /root/tensorflow/tensorflow/examples/get_started/regression/imports85.py:123: The name tf.string_to_hash_bucket_fast is deprecated. Please use tf.strings.to_hash_bucket_fast instead.\r\n\r\nI0415 20:14:20.987369 140624720754496 estimator.py:1761] Using default config.\r\nW0415 20:14:20.987863 140624720754496 estimator.py:1782] Using temporary folder as model directory: /tmp/tmpn4983vfs\r\nI0415 20:14:20.988089 140624720754496 estimator.py:203] Using config: {'_model_dir': '/tmp/tmpn4983vfs', '_tf_random_seed': None, '_save_summary_steps': 100, '_save_checkpoints_steps': None, '_save_checkpoints_secs': 600, '_session_config': allow_soft_placement: true\r\ngraph_options {\r\n  rewrite_options {\r\n    meta_optimizer_iterations: ONE\r\n  }\r\n}\r\n, '_keep_checkpoint_max': 5, '_keep_checkpoint_every_n_hours': 10000, '_log_step_count_steps': 100, '_train_distribute': None, '_device_fn': None, '_protocol': None, '_eval_distribute': None, '_experimental_distribute': None, '_experimental_max_worker_delay_secs': None, '_service': None, '_cluster_spec': <tensorflow.python.training.server_lib.ClusterSpec object at 0x7fe593747048>, '_task_type': 'worker', '_task_id': 0, '_global_id_in_cluster': 0, '_master': '', '_evaluation_master': '', '_is_chief': True, '_num_ps_replicas': 0, '_num_worker_replicas': 1}\r\nW0415 20:14:20.993491 140624720754496 deprecation.py:323] From /usr/local/lib/python3.6/dist-packages/tensorflow/python/training/training_util.py:238: Variable.initialized_value (from tensorflow.python.ops.variables) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse Variable.read_value. Variables in 2.X are initialized automatically both in eager and graph (inside tf.defun) contexts.\r\nTraceback (most recent call last):\r\n  File \"dnn_regression.py\", line 105, in <module>\r\n    tf.app.run(main=main)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/platform/app.py\", line 40, in run\r\n    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)\r\n  File \"/usr/local/lib/python3.6/dist-packages/absl/app.py\", line 300, in run\r\n    _run_main(main, args)\r\n  File \"/usr/local/lib/python3.6/dist-packages/absl/app.py\", line 251, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"dnn_regression.py\", line 85, in main\r\n    model.train(input_fn=input_train, steps=STEPS)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_estimator/python/estimator/estimator.py\", line 360, in train\r\n    loss = self._train_model(input_fn, hooks, saving_listeners)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_estimator/python/estimator/estimator.py\", line 1152, in _train_model\r\n    return self._train_model_default(input_fn, hooks, saving_listeners)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_estimator/python/estimator/estimator.py\", line 1179, in _train_model_default\r\n    input_fn, ModeKeys.TRAIN))\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_estimator/python/estimator/estimator.py\", line 1016, in _get_features_and_labels_from_input_fn\r\n    self._call_input_fn(input_fn, mode))\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_estimator/python/estimator/estimator.py\", line 1107, in _call_input_fn\r\n    return input_fn(**kwargs)\r\n  File \"dnn_regression.py\", line 46, in input_train\r\n    train.shuffle(1000).batch(128)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/data/ops/dataset_ops.py\", line 1634, in shuffle\r\n    buffer_size, seed, reshuffle_each_iteration))\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/data/ops/dataset_ops.py\", line 751, in shuffle\r\n    return ShuffleDataset(self, buffer_size, seed, reshuffle_each_iteration)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/data/ops/dataset_ops.py\", line 2743, in __init__\r\n    **flat_structure(self))\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/gen_dataset_ops.py\", line 4976, in shuffle_dataset\r\n    name=name)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/op_def_library.py\", line 366, in _apply_op_helper\r\n    g = ops._get_graph_from_inputs(_Flatten(keywords.values()))\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/ops.py\", line 6098, in _get_graph_from_inputs\r\n    _assert_same_graph(original_graph_element, graph_element)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/ops.py\", line 6034, in _assert_same_graph\r\n    original_item))\r\nValueError: Tensor(\"buffer_size:0\", shape=(), dtype=int64, device=/device:CPU:0) must be from the same graph as Tensor(\"MapDataset_2:0\", shape=(), dtype=variant).\r\nroot@c12a5b5766c5:~/tensorflow/tensorflow/examples/get_started/regression#\r\n\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27867", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27867/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27867/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27867/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/27867", "id": 433397712, "node_id": "MDExOlB1bGxSZXF1ZXN0MjcwNjA3ODk5", "number": 27867, "title": "Lite: Space_to_batch Op N-dim support", "user": {"login": "ANSHUMAN87", "id": 32511895, "node_id": "MDQ6VXNlcjMyNTExODk1", "avatar_url": "https://avatars3.githubusercontent.com/u/32511895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ANSHUMAN87", "html_url": "https://github.com/ANSHUMAN87", "followers_url": "https://api.github.com/users/ANSHUMAN87/followers", "following_url": "https://api.github.com/users/ANSHUMAN87/following{/other_user}", "gists_url": "https://api.github.com/users/ANSHUMAN87/gists{/gist_id}", "starred_url": "https://api.github.com/users/ANSHUMAN87/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ANSHUMAN87/subscriptions", "organizations_url": "https://api.github.com/users/ANSHUMAN87/orgs", "repos_url": "https://api.github.com/users/ANSHUMAN87/repos", "events_url": "https://api.github.com/users/ANSHUMAN87/events{/privacy}", "received_events_url": "https://api.github.com/users/ANSHUMAN87/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1169365494, "node_id": "MDU6TGFiZWwxMTY5MzY1NDk0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:M", "name": "size:M", "color": "adafea", "default": false, "description": "CL Change Size: Medium"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 31, "created_at": "2019-04-15T17:30:21Z", "updated_at": "2020-03-17T11:47:00Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/27867", "html_url": "https://github.com/tensorflow/tensorflow/pull/27867", "diff_url": "https://github.com/tensorflow/tensorflow/pull/27867.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/27867.patch"}, "body": "Arbitrary dimension support added"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27846", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27846/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27846/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27846/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27846", "id": 433081825, "node_id": "MDU6SXNzdWU0MzMwODE4MjU=", "number": 27846, "title": "quantize_graph incompatible shapes", "user": {"login": "haddis3", "id": 21120947, "node_id": "MDQ6VXNlcjIxMTIwOTQ3", "avatar_url": "https://avatars2.githubusercontent.com/u/21120947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haddis3", "html_url": "https://github.com/haddis3", "followers_url": "https://api.github.com/users/haddis3/followers", "following_url": "https://api.github.com/users/haddis3/following{/other_user}", "gists_url": "https://api.github.com/users/haddis3/gists{/gist_id}", "starred_url": "https://api.github.com/users/haddis3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haddis3/subscriptions", "organizations_url": "https://api.github.com/users/haddis3/orgs", "repos_url": "https://api.github.com/users/haddis3/repos", "events_url": "https://api.github.com/users/haddis3/events{/privacy}", "received_events_url": "https://api.github.com/users/haddis3/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "nutsiepully", "id": 1307460, "node_id": "MDQ6VXNlcjEzMDc0NjA=", "avatar_url": "https://avatars3.githubusercontent.com/u/1307460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nutsiepully", "html_url": "https://github.com/nutsiepully", "followers_url": "https://api.github.com/users/nutsiepully/followers", "following_url": "https://api.github.com/users/nutsiepully/following{/other_user}", "gists_url": "https://api.github.com/users/nutsiepully/gists{/gist_id}", "starred_url": "https://api.github.com/users/nutsiepully/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nutsiepully/subscriptions", "organizations_url": "https://api.github.com/users/nutsiepully/orgs", "repos_url": "https://api.github.com/users/nutsiepully/repos", "events_url": "https://api.github.com/users/nutsiepully/events{/privacy}", "received_events_url": "https://api.github.com/users/nutsiepully/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nutsiepully", "id": 1307460, "node_id": "MDQ6VXNlcjEzMDc0NjA=", "avatar_url": "https://avatars3.githubusercontent.com/u/1307460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nutsiepully", "html_url": "https://github.com/nutsiepully", "followers_url": "https://api.github.com/users/nutsiepully/followers", "following_url": "https://api.github.com/users/nutsiepully/following{/other_user}", "gists_url": "https://api.github.com/users/nutsiepully/gists{/gist_id}", "starred_url": "https://api.github.com/users/nutsiepully/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nutsiepully/subscriptions", "organizations_url": "https://api.github.com/users/nutsiepully/orgs", "repos_url": "https://api.github.com/users/nutsiepully/repos", "events_url": "https://api.github.com/users/nutsiepully/events{/privacy}", "received_events_url": "https://api.github.com/users/nutsiepully/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-04-15T03:40:09Z", "updated_at": "2019-07-09T22:32:05Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- TensorFlow installed from (source or binary): pip install tensorflow\r\n- TensorFlow version (use command below): 1.12.0\r\n- Python version: 3.6.5\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: CUDA 9 cuDNN 7.1\r\n- GPU model and memory:GTX 1080ti\r\n\r\n\r\n**Source code:**\r\n\r\n```\r\n if FLAGS.base_architecture not in ['resnet_v2_50', 'resnet_v2_101']:\r\n\u00a0 \u00a0\u00a0 \u00a0\u00a0\u00a0raise ValueError(\"'base_architrecture' must be either 'resnet_v2_50' or 'resnet_v2_101'.\")\r\n\r\n\u00a0 \u00a0 if FLAGS.base_architecture == 'resnet_v2_50':\r\n\u00a0 \u00a0\u00a0 \u00a0\u00a0\u00a0base_model = resnet_v2.resnet_v2_50\r\n\u00a0 \u00a0 else:\r\n\u00a0 \u00a0\u00a0 \u00a0\u00a0\u00a0base_model = resnet_v2.resnet_v2_101\r\n\r\n\u00a0 \u00a0 with tf.contrib.slim.arg_scope(resnet_v2.resnet_arg_scope(batch_norm_decay=_BATCH_NORM_DECAY)):\r\n\u00a0 \u00a0\u00a0 \u00a0\u00a0\u00a0logits, end_points = base_model(inputs,\r\n\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0 num_classes=None,\r\n\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0 is_training=is_train,\r\n\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0 global_pool=False,\r\n\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0\u00a0 \u00a0 output_stride=FLAGS.output_stride) # output_stride=16\r\n\u00a0 \u00a0\u00a0\u00a0inputs_size = tf.shape(inputs)[1:3]\r\n\u00a0 \u00a0 net = end_points[ FLAGS.base_architecture + '/block4']\u00a0\u00a0# [None, 16, 16, 2048]\r\n```\r\n\r\n\r\n**problem description:**\r\nI was trying to use tf.contrib.quantize.experimental_create_training_graph to conduct fake quantize training, then convert to tflite model. Firstly, i load the resnet_v2_101 pre-trained model (output_stride is set to 16), forward-pass is ok, then when i use  tf.contrib.quantize.experimental_create_training_graph to create fake quantize nodes, the error happened:\r\n\r\n**log:**\r\n  File \"D:/tensorflow_project/pocketflow-deeplabv3/nets/deeplabv3_at_pascal2012_run.py\", line 72, in <module>\r\n    tf.app.run()\r\n  File \"D:\\anaconda\\install_path\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 125, in run\r\n    _sys.exit(main(argv))\r\n  File \"D:/tensorflow_project/pocketflow-deeplabv3/nets/deeplabv3_at_pascal2012_run.py\", line 53, in main\r\n    learner = create_learner(sm_writer, model_helper)\r\n  File \"D:\\tensorflow_project\\pocketflow-deeplabv3\\learners\\learner_utils.py\", line 60, in create_learner\r\n    learner = UniformQuantTFLearner(sm_writer, model_helper)\r\n  File \"D:\\tensorflow_project\\pocketflow-deeplabv3\\learners\\uniform_quantization_tf\\learner.py\", line 98, in __init__\r\n    self.__build_train()\r\n  File \"D:\\tensorflow_project\\pocketflow-deeplabv3\\learners\\uniform_quantization_tf\\learner.py\", line 199, in __build_train\r\n    scope=self.model_scope_quan)   # rewrite the graph\r\n  File \"D:\\anaconda\\install_path\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\quantize\\python\\quantize_graph.py\", line 197, in experimental_create_training_graph\r\n    scope=scope)\r\n  File \"D:\\anaconda\\install_path\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\quantize\\python\\quantize_graph.py\", line 70, in _create_graph\r\n    is_training=is_training)\r\n  File \"D:\\anaconda\\install_path\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\quantize\\python\\fold_batch_norms.py\", line 53, in FoldBatchNorms\r\n    graph, is_training, freeze_batch_norm_delay=freeze_batch_norm_delay)\r\n  File \"D:\\anaconda\\install_path\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\quantize\\python\\fold_batch_norms.py\", line 136, in _FoldFusedBatchNorms\r\n    match.output_tensor)\r\n  File \"D:\\anaconda\\install_path\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\contrib\\quantize\\python\\common.py\", line 157, in RerouteTensor\r\n    c._update_input(i, t0)  # pylint: disable=protected-access\r\n  File \"D:\\anaconda\\install_path\\envs\\tensorflow\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 2061, in _update_input\r\n    self._tf_input(index))\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Cannot update edge, incompatible shapes: [?,8,8,512] and [?,16,16,512].\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27831", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27831/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27831/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27831/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27831", "id": 432948295, "node_id": "MDU6SXNzdWU0MzI5NDgyOTU=", "number": 27831, "title": "Add built-in helper functions for _bytes_feature, _float_feature and _int64_feature from \"Using TFRecords and tf.Example\" page", "user": {"login": "terryspitz", "id": 740543, "node_id": "MDQ6VXNlcjc0MDU0Mw==", "avatar_url": "https://avatars3.githubusercontent.com/u/740543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/terryspitz", "html_url": "https://github.com/terryspitz", "followers_url": "https://api.github.com/users/terryspitz/followers", "following_url": "https://api.github.com/users/terryspitz/following{/other_user}", "gists_url": "https://api.github.com/users/terryspitz/gists{/gist_id}", "starred_url": "https://api.github.com/users/terryspitz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/terryspitz/subscriptions", "organizations_url": "https://api.github.com/users/terryspitz/orgs", "repos_url": "https://api.github.com/users/terryspitz/repos", "events_url": "https://api.github.com/users/terryspitz/events{/privacy}", "received_events_url": "https://api.github.com/users/terryspitz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-04-14T08:47:54Z", "updated_at": "2019-07-14T21:45:05Z", "closed_at": null, "author_association": "NONE", "body": "The TF documentation page \"Using TFRecords and tf.Example\" https://www.tensorflow.org/tutorials/load_data/tf_records lists these helper functions:\r\n\r\n```\r\n# The following functions can be used to convert a value to a type compatible\r\n# with tf.Example.\r\n\r\ndef _bytes_feature(value):\r\n  \"\"\"Returns a bytes_list from a string / byte.\"\"\"\r\n  return tf.train.Feature(bytes_list=tf.train.BytesList(value=[value]))\r\n\r\ndef _float_feature(value):\r\n  \"\"\"Returns a float_list from a float / double.\"\"\"\r\n  return tf.train.Feature(float_list=tf.train.FloatList(value=[value]))\r\n\r\ndef _int64_feature(value):\r\n  \"\"\"Returns an int64_list from a bool / enum / int / uint.\"\"\"\r\n  return tf.train.Feature(int64_list=tf.train.Int64List(value=[value]))\r\n```\r\n\r\nSearching github code shows these have been cut and pasted 3453 times into other projects:\r\nhttps://github.com/search?q=_bytes_feature+_float_feature&type=Code\r\nand presumably many more times besides.\r\n\r\nCould TF include helper functions for these and other common tf.train.Features/Examples helpers?\r\n\r\n**System information**\r\n- TensorFlow version: 1.13.1\r\n- Are you willing to contribute it: Yes (at some point)\r\n\r\n**Describe the feature and the current behavior/state.**\r\nExamples and Features are recommended as the canonical way to store TF datasets.  However understanding the protobufs is non-trivial: they are multiple layers deep and have a verbose API.\r\n\r\n**Will this change the current api? How?**\r\nThis will make the API simpler and more pythonic for building usual Features and Examples.\r\n\r\n**Who will benefit with this feature?**\r\nAll users building datasets.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27827", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27827/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27827/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/27827/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/27827", "id": 432905822, "node_id": "MDU6SXNzdWU0MzI5MDU4MjI=", "number": 27827, "title": "Eager: Network with eager execution is not learning and low performance", "user": {"login": "tk2232", "id": 33070559, "node_id": "MDQ6VXNlcjMzMDcwNTU5", "avatar_url": "https://avatars1.githubusercontent.com/u/33070559?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tk2232", "html_url": "https://github.com/tk2232", "followers_url": "https://api.github.com/users/tk2232/followers", "following_url": "https://api.github.com/users/tk2232/following{/other_user}", "gists_url": "https://api.github.com/users/tk2232/gists{/gist_id}", "starred_url": "https://api.github.com/users/tk2232/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tk2232/subscriptions", "organizations_url": "https://api.github.com/users/tk2232/orgs", "repos_url": "https://api.github.com/users/tk2232/repos", "events_url": "https://api.github.com/users/tk2232/events{/privacy}", "received_events_url": "https://api.github.com/users/tk2232/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 736653459, "node_id": "MDU6TGFiZWw3MzY2NTM0NTk=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:eager", "name": "comp:eager", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-04-13T22:04:26Z", "updated_at": "2020-02-08T01:10:47Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform: Win 10\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): b'v1.13.1-0-g6612da8951' 1.13.1\r\n- Python version: 3.6.7\r\n- CUDA/cuDNN version: CUDA V10.0.130, cuDNN 7.5\r\n- GPU model and memory: RTX 2070 8GB\r\n\r\n\r\n**Describe the current behavior**\r\nI've convert my keras network to tensorflow eager and this network dosn't learn anything. The network predicts only the same values. The performance is 2-3 times slower as the keras model.\r\nWith tensorflow graph without eager execution everything works fine.\r\n\r\n**Describe the expected behavior**\r\nI want to predict actions for various input images in reinforcement learning \r\n\r\n**Code to reproduce the issue**\r\n**Keras model**\r\n\r\n```python\r\nfrom keras.layers import *\r\nfrom keras.models import Model\r\nfrom keras.optimizers import Adam\r\nimport tensorflow as tf\r\n\r\n\r\nclass KerasTest:\r\n    def __init__(self, state_space, action_space, lr):\r\n        self.state_space = state_space\r\n        self.action_space = action_space\r\n        self.lr = lr\r\n\r\n        inputs = Input(shape=(84, 84, 4))\r\n        rewards = Input(shape=(1,))\r\n\r\n        x = Conv2D(32, kernel_size=[8, 8], padding='valid', strides=[4, 4], activation=None)(inputs)\r\n        x = BatchNormalization(trainable=True, epsilon=1e-5)(x)\r\n        x = Activation('relu')(x)\r\n        x = Conv2D(64, kernel_size=[4, 4], padding='valid', strides=[2, 2], activation=None)(x)\r\n        x = BatchNormalization(trainable=True, epsilon=1e-5)(x)\r\n        x = Activation('relu')(x)\r\n        x = Conv2D(64, kernel_size=(4, 4), padding='valid', strides=(2, 2), activation=None)(x)\r\n        x = BatchNormalization(trainable=True, epsilon=1e-5)(x)\r\n        x = Activation('relu')(x)\r\n        x = Flatten()(x)\r\n        x = Dense(512, activation='relu')(x)\r\n        x = Dropout(0.5)(x)\r\n        x = Dense(256, activation='relu')(x)\r\n        x = Dropout(0.3)(x)\r\n        x = Dense(128, activation='relu')(x)\r\n        x = Dropout(0.05)(x)\r\n        logits = Dense(self.action_space, activation=None)(x)\r\n\r\n        self.model = Model(inputs=[inputs, rewards], outputs=logits)\r\n\r\n        def policy_loss(r):\r\n            def loss(labels, logits):\r\n                policy = tf.nn.softmax(logits)\r\n                entropy = tf.nn.softmax_cross_entropy_with_logits_v2(labels=policy, logits=logits)\r\n                log = tf.nn.softmax_cross_entropy_with_logits_v2(labels=labels, logits=logits)\r\n                p_loss = log * tf.stop_gradient(r)\r\n                p_loss = p_loss - 0.01 * entropy\r\n                total_loss = tf.reduce_mean(p_loss)\r\n                return total_loss\r\n\r\n            return loss\r\n\r\n        self.model.compile(optimizer=Adam(lr=lr), loss=policy_loss(rewards))\r\n        self.model.summary()\r\n\r\n    def get_probs(self, s):\r\n        s = s[np.newaxis, :]\r\n        probs = self.model.predict([s, np.array([1])])\r\n        probs = probs.squeeze()\r\n        probs = self.softmax(probs)\r\n        return probs\r\n\r\n    def softmax(self, x):\r\n        e_x = np.exp(x - np.max(x))\r\n        return e_x / e_x.sum(axis=0)\r\n\r\n    def update_policy(self, s, r, a):\r\n        self.model.train_on_batch([s, r], a)\r\n```\r\n\r\n**Eager**\r\n```python\r\nimport tensorflow as tf\r\nfrom tensorflow.python.keras.layers import *\r\nimport numpy as np\r\n\r\ntf.enable_eager_execution()\r\nprint(tf.executing_eagerly())\r\n\r\n\r\nclass EagerTest:\r\n    def __init__(self, state_space, action_space, lr):\r\n        self.action_space = action_space\r\n        self.lr = lr\r\n\r\n        inputs = Input(shape=(84, 84, 4))\r\n        rewards = Input(shape=(1,))\r\n\r\n        x = Conv2D(32, kernel_size=[8, 8], padding='valid', strides=[4, 4], activation=None)(inputs)\r\n        x = BatchNormalization(trainable=True, epsilon=1e-5)(x)\r\n        x = Activation('relu')(x)\r\n        x = Conv2D(64, kernel_size=[4, 4], padding='valid', strides=[2, 2], activation=None)(x)\r\n        x = BatchNormalization(trainable=True, epsilon=1e-5)(x)\r\n        x = Activation('relu')(x)\r\n        x = Conv2D(64, kernel_size=(4, 4), padding='valid', strides=(2, 2), activation=None)(x)\r\n        x = BatchNormalization(trainable=True, epsilon=1e-5)(x)\r\n        x = Activation('relu')(x)\r\n        x = Flatten()(x)\r\n        x = Dense(512, activation='relu')(x)\r\n        x = Dropout(0.5)(x)\r\n        x = Dense(256, activation='relu')(x)\r\n        x = Dropout(0.3)(x)\r\n        x = Dense(128, activation='relu')(x)\r\n        x = Dropout(0.05)(x)\r\n        logits = Dense(self.action_space, activation=None)(x)\r\n\r\n        self.model = tf.keras.Model(inputs=[inputs, rewards], outputs=logits)\r\n\r\n        def policy_loss(r):\r\n            def loss(labels, logits):\r\n                policy = tf.nn.softmax(logits)\r\n                entropy = tf.nn.softmax_cross_entropy_with_logits_v2(labels=policy, logits=logits)\r\n                log = tf.nn.softmax_cross_entropy_with_logits_v2(labels=labels, logits=logits)\r\n                p_loss = log * tf.stop_gradient(r)\r\n                p_loss = p_loss - 0.01 * entropy\r\n                total_loss = tf.reduce_mean(p_loss)\r\n                return total_loss\r\n\r\n            return loss\r\n\r\n        self.model.compile(optimizer=tf.train.AdamOptimizer(lr), loss=policy_loss(rewards))\r\n        self.model.summary()\r\n\r\n    def get_probs(self, s):\r\n        s = s[np.newaxis, :]\r\n        probs = self.model([s, np.array([1])]).numpy()\r\n        probs = probs.squeeze()\r\n        probs = self.softmax(probs)\r\n        return probs\r\n\r\n    def softmax(self, x):\r\n        e_x = np.exp(x - np.max(x))\r\n        return e_x / e_x.sum(axis=0)\r\n\r\n    def update_policy(self, s, r, a):\r\n        self.model.train_on_batch([s, r], a)\r\n\r\n```\r\n**And same issue if I try to optimize manually**\r\n```python\r\nimport tensorflow as tf\r\nfrom tensorflow.python.keras.layers import *\r\n\r\nimport numpy as np\r\n\r\ntf.enable_eager_execution()\r\nprint(tf.executing_eagerly())\r\n\r\n\r\nclass EagerSeqTest:\r\n    def __init__(self, state_space, action_space, lr):\r\n        self.state_space = state_space\r\n        self.action_space = action_space\r\n\r\n        self.model = tf.keras.Sequential()\r\n\r\n        self.model.add(InputLayer(input_shape=(84, 84, 4)))\r\n\r\n        # Conv\r\n        self.model.add(Conv2D(filters=32, kernel_size=(8, 8), strides=(4, 4), name='conv1'))\r\n        self.model.add(BatchNormalization(trainable=True, epsilon=1e-5, name='batch_norm1'))\r\n        self.model.add(ReLU(name='conv_1_out'))\r\n\r\n        self.model.add(Conv2D(filters=64, kernel_size=(4, 4), strides=(2, 2), name='conv2'))\r\n        self.model.add(BatchNormalization(trainable=True, epsilon=1e-5, name='batch_norm2'))\r\n        self.model.add(ReLU(name='conv_2_out'))\r\n\r\n        self.model.add(Conv2D(filters=64, kernel_size=(4, 4), strides=(2, 2), name='conv3'))\r\n        self.model.add(BatchNormalization(trainable=True, epsilon=1e-5, name='batch_norm3'))\r\n        self.model.add(ReLU(name='conv_3_out'))\r\n\r\n        self.model.add(Flatten(name='flatten'))\r\n\r\n        # Fully connected\r\n        self.model.add(Dense(units=512, activation='relu', name='fc1'))\r\n        self.model.add(Dropout(rate=0.4, name='dr1'))\r\n        self.model.add(Dense(units=256, activation='relu', name='fc2'))\r\n        self.model.add(Dropout(rate=0.3, name='dr2'))\r\n        self.model.add(Dense(units=64, activation='relu', name='fc3'))\r\n        self.model.add(Dropout(rate=0.03, name='dr3'))\r\n\r\n        # Logits\r\n        self.model.add(Dense(units=self.action_space, activation='linear', name='logits'))\r\n\r\n        self.model.summary()\r\n\r\n        # Optimizer\r\n        self.optimizer = tf.train.AdamOptimizer(learning_rate=lr)\r\n\r\n    def get_probs(self, s):\r\n        s = s[np.newaxis, :]\r\n        logits = self.model(s)\r\n        probs = tf.nn.softmax(logits).numpy().squeeze()\r\n        return probs\r\n\r\n    def update_policy(self, s, r, a):\r\n        with tf.GradientTape() as tape:\r\n            loss = self.calc_loss(s, r, a)\r\n        grads = tape.gradient(loss, self.model.trainable_variables)\r\n        self.optimizer.apply_gradients(zip(grads, self.model.trainable_variables))\r\n\r\n    def calc_loss(self, s, r, a):\r\n        logits = self.model(s)\r\n        policy_loss = tf.nn.softmax_cross_entropy_with_logits_v2(labels=a, logits=logits)\r\n        policy_loss = tf.reduce_mean(policy_loss * tf.stop_gradient(r))\r\n        return policy_loss\r\n```\r\n\r\n\r\n**Other info / logs**\r\n**Keras outputs first episode**\r\n```\r\n[0.33398542 0.32970214 0.33631247]\r\n[0.33452868 0.32947394 0.33599734]\r\n[0.33389196 0.32968676 0.3364213 ]\r\n[0.33383334 0.32978088 0.33638576]\r\n[0.33387497 0.3296482  0.33647686]\r\n[0.33390424 0.32952887 0.33656695]\r\n[0.33359385 0.32956737 0.33683875]\r\n[0.33371714 0.32963908 0.3366438 ]\r\n[0.33354157 0.32960638 0.33685204]\r\n[0.33366755 0.32962722 0.33670527]\r\n            ...\r\n```\r\n**Keras outputs after 10 episodes**\r\n```\r\n[0.2601601  0.31925505 0.42058486]\r\n[0.3081141  0.35050547 0.34138042]\r\n[0.30224514 0.41226208 0.28549278]\r\n[0.2596298  0.4011653  0.33920488]\r\n[0.24976756 0.44619036 0.30404213]\r\n[0.22203408 0.50170064 0.2762653 ]\r\n[0.25094017 0.460491   0.28856885]\r\n[0.25819647 0.44147474 0.30032873]\r\n[0.26891825 0.42985788 0.30122384]\r\n[0.24224553 0.46432737 0.2934271 ]\r\n              ...\r\n```\r\n**Eager outputs first episode**\r\n```\r\n[0.32854515 0.33827797 0.33317688]\r\n[0.3286925  0.33824813 0.3330594 ]\r\n[0.3283261  0.33858737 0.33308655]\r\n[0.328541   0.3381491  0.33330992]\r\n[0.328702   0.33778957 0.3335084 ]\r\n[0.32902354 0.3377183  0.33325812]\r\n[0.32862762 0.33784387 0.3335285 ]\r\n[0.3286057  0.3380287  0.33336568]\r\n[0.32879072 0.33825696 0.33295232]\r\n[0.3287569  0.33825108 0.33299205]\r\n              ...\r\n```\r\n**Eager outputs after 10, 20, 100, .... episodes**\r\n```\r\n[0.3276771  0.33870533 0.33361754]\r\n[0.3276953  0.33861196 0.33369276]\r\n[0.3273576  0.33890665 0.33373576]\r\n[0.32751966 0.3387702  0.33371013]\r\n[0.3276457  0.33878204 0.33357224]\r\n[0.32758534 0.3388276  0.33358708]\r\n[0.3277567  0.3381556  0.33408773]\r\n[0.32765684 0.33842626 0.33391687]\r\n[0.32840943 0.3379219  0.33366865]\r\n[0.32794353 0.33860624 0.33345023]\r\n              ...\r\n```\r\n\r\n\r\n"}]