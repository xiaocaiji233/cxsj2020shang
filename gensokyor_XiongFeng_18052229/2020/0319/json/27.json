[{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23609", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23609/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23609/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23609/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23609", "id": 378929605, "node_id": "MDU6SXNzdWUzNzg5Mjk2MDU=", "number": 23609, "title": "[Cloud TPU] Various issues with uint8 data type", "user": {"login": "Keno", "id": 1291671, "node_id": "MDQ6VXNlcjEyOTE2NzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1291671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Keno", "html_url": "https://github.com/Keno", "followers_url": "https://api.github.com/users/Keno/followers", "following_url": "https://api.github.com/users/Keno/following{/other_user}", "gists_url": "https://api.github.com/users/Keno/gists{/gist_id}", "starred_url": "https://api.github.com/users/Keno/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Keno/subscriptions", "organizations_url": "https://api.github.com/users/Keno/orgs", "repos_url": "https://api.github.com/users/Keno/repos", "events_url": "https://api.github.com/users/Keno/events{/privacy}", "received_events_url": "https://api.github.com/users/Keno/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}], "state": "open", "locked": false, "assignee": {"login": "froystig", "id": 123903, "node_id": "MDQ6VXNlcjEyMzkwMw==", "avatar_url": "https://avatars3.githubusercontent.com/u/123903?v=4", "gravatar_id": "", "url": "https://api.github.com/users/froystig", "html_url": "https://github.com/froystig", "followers_url": "https://api.github.com/users/froystig/followers", "following_url": "https://api.github.com/users/froystig/following{/other_user}", "gists_url": "https://api.github.com/users/froystig/gists{/gist_id}", "starred_url": "https://api.github.com/users/froystig/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/froystig/subscriptions", "organizations_url": "https://api.github.com/users/froystig/orgs", "repos_url": "https://api.github.com/users/froystig/repos", "events_url": "https://api.github.com/users/froystig/events{/privacy}", "received_events_url": "https://api.github.com/users/froystig/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "froystig", "id": 123903, "node_id": "MDQ6VXNlcjEyMzkwMw==", "avatar_url": "https://avatars3.githubusercontent.com/u/123903?v=4", "gravatar_id": "", "url": "https://api.github.com/users/froystig", "html_url": "https://github.com/froystig", "followers_url": "https://api.github.com/users/froystig/followers", "following_url": "https://api.github.com/users/froystig/following{/other_user}", "gists_url": "https://api.github.com/users/froystig/gists{/gist_id}", "starred_url": "https://api.github.com/users/froystig/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/froystig/subscriptions", "organizations_url": "https://api.github.com/users/froystig/orgs", "repos_url": "https://api.github.com/users/froystig/repos", "events_url": "https://api.github.com/users/froystig/events{/privacy}", "received_events_url": "https://api.github.com/users/froystig/received_events", "type": "User", "site_admin": false}, {"login": "jekbradbury", "id": 11729078, "node_id": "MDQ6VXNlcjExNzI5MDc4", "avatar_url": "https://avatars2.githubusercontent.com/u/11729078?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jekbradbury", "html_url": "https://github.com/jekbradbury", "followers_url": "https://api.github.com/users/jekbradbury/followers", "following_url": "https://api.github.com/users/jekbradbury/following{/other_user}", "gists_url": "https://api.github.com/users/jekbradbury/gists{/gist_id}", "starred_url": "https://api.github.com/users/jekbradbury/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jekbradbury/subscriptions", "organizations_url": "https://api.github.com/users/jekbradbury/orgs", "repos_url": "https://api.github.com/users/jekbradbury/repos", "events_url": "https://api.github.com/users/jekbradbury/events{/privacy}", "received_events_url": "https://api.github.com/users/jekbradbury/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-11-08T21:44:39Z", "updated_at": "2018-12-19T18:52:05Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): N/A\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): GCP\r\n- TensorFlow version (use command below): 1.11+\r\n- Python version: N/A\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: TPUv2\r\n\r\n**Describe the current behavior**\r\n\r\nThere's three issues here:\r\n1. Missing propagation of error messages, crashing the TPU host\r\n2. It not compiling for shapes other than `u8[1024]` or multiples thereof\r\n3. It crashing on infeed even for `u8[1024]`\r\n\r\nAt the moment, compiling (via XRTCompile) crashes the TPU host for anything that uses UInt8 datatypes, unless it's one dimensional and the size is a multiple of 1024. Using the julia frontend:\r\n\r\n```\r\njulia> @async @tpu (()->XLA.HloInfeed(Tuple{XRTArray{UInt8, (256,), 1}})(XLA.HloAfterAll()())[1][1])()\r\nERROR: Tensorflow error: Status: Socket closed\r\n\r\n```\r\n\r\n```\r\njulia> @async @tpu (()->XLA.HloInfeed(Tuple{XRTArray{UInt8, (1024,1024), 2}})(XLA.HloAfterAll()())[1][1])()\r\nERROR: Tensorflow error: Status: Socket closed\r\n```\r\n\r\nAnd though compiling succeeds for one dimensional UInt8 vectors of size 1024, trying to infeed crashes:\r\n```\r\njulia> @async @tpu (()->XLA.HloInfeed(Tuple{XRTArray{UInt8, (1024,), 1}})(XLA.HloAfterAll()())[1][1])()\r\nTask (runnable) @0x00007fae07199120\r\n\r\njulia> infeed((zeros(UInt8, 1024),))\r\nERROR: Tensorflow error: Status: Socket closed\r\n```\r\n\r\n**Describe the expected behavior**\r\nIdeally all of these would work. If that takes longer to do, at least exposing the error message to the client, rather than crashing would be desired.\r\n\r\n**Code to reproduce the issue**\r\nSee above (should be reproducible with any frontend that uses xrt to talk to Cloud TPUs though)."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23607", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23607/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23607/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23607/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23607", "id": 378923003, "node_id": "MDU6SXNzdWUzNzg5MjMwMDM=", "number": 23607, "title": "Segmentation Fault on `help(tf.RunMetadata)`", "user": {"login": "Salompas", "id": 7663115, "node_id": "MDQ6VXNlcjc2NjMxMTU=", "avatar_url": "https://avatars3.githubusercontent.com/u/7663115?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Salompas", "html_url": "https://github.com/Salompas", "followers_url": "https://api.github.com/users/Salompas/followers", "following_url": "https://api.github.com/users/Salompas/following{/other_user}", "gists_url": "https://api.github.com/users/Salompas/gists{/gist_id}", "starred_url": "https://api.github.com/users/Salompas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Salompas/subscriptions", "organizations_url": "https://api.github.com/users/Salompas/orgs", "repos_url": "https://api.github.com/users/Salompas/repos", "events_url": "https://api.github.com/users/Salompas/events{/privacy}", "received_events_url": "https://api.github.com/users/Salompas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2018-11-08T21:25:00Z", "updated_at": "2019-03-29T21:05:12Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS Mojave 10.14\r\n- TensorFlow installed from (source or binary): `pip install tensorflow`\r\n- TensorFlow version (use command below): v1.11.0-rc2-4-gc19e29306c 1.11.0\r\n- Python version: 3.6.7\r\n\r\n**Describe the current behavior**\r\n`Segmentation fault: 11` and Python crashes.\r\n**Describe the expected behavior**\r\nPrint the documentation describing `tf.RunMetadata`.\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\nhelp(tf.RunMetadata)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23605", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23605/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23605/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23605/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23605", "id": 378799347, "node_id": "MDU6SXNzdWUzNzg3OTkzNDc=", "number": 23605, "title": "Tensorboard projector visualisation - PCA keeps loading or not working", "user": {"login": "shakthydoss", "id": 1910237, "node_id": "MDQ6VXNlcjE5MTAyMzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1910237?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shakthydoss", "html_url": "https://github.com/shakthydoss", "followers_url": "https://api.github.com/users/shakthydoss/followers", "following_url": "https://api.github.com/users/shakthydoss/following{/other_user}", "gists_url": "https://api.github.com/users/shakthydoss/gists{/gist_id}", "starred_url": "https://api.github.com/users/shakthydoss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shakthydoss/subscriptions", "organizations_url": "https://api.github.com/users/shakthydoss/orgs", "repos_url": "https://api.github.com/users/shakthydoss/repos", "events_url": "https://api.github.com/users/shakthydoss/events{/privacy}", "received_events_url": "https://api.github.com/users/shakthydoss/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 284285184, "node_id": "MDU6TGFiZWwyODQyODUxODQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tensorboard", "name": "comp:tensorboard", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "dsmilkov", "id": 2294279, "node_id": "MDQ6VXNlcjIyOTQyNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/2294279?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dsmilkov", "html_url": "https://github.com/dsmilkov", "followers_url": "https://api.github.com/users/dsmilkov/followers", "following_url": "https://api.github.com/users/dsmilkov/following{/other_user}", "gists_url": "https://api.github.com/users/dsmilkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/dsmilkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dsmilkov/subscriptions", "organizations_url": "https://api.github.com/users/dsmilkov/orgs", "repos_url": "https://api.github.com/users/dsmilkov/repos", "events_url": "https://api.github.com/users/dsmilkov/events{/privacy}", "received_events_url": "https://api.github.com/users/dsmilkov/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dsmilkov", "id": 2294279, "node_id": "MDQ6VXNlcjIyOTQyNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/2294279?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dsmilkov", "html_url": "https://github.com/dsmilkov", "followers_url": "https://api.github.com/users/dsmilkov/followers", "following_url": "https://api.github.com/users/dsmilkov/following{/other_user}", "gists_url": "https://api.github.com/users/dsmilkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/dsmilkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dsmilkov/subscriptions", "organizations_url": "https://api.github.com/users/dsmilkov/orgs", "repos_url": "https://api.github.com/users/dsmilkov/repos", "events_url": "https://api.github.com/users/dsmilkov/events{/privacy}", "received_events_url": "https://api.github.com/users/dsmilkov/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-11-08T16:02:30Z", "updated_at": "2018-12-19T18:52:00Z", "closed_at": null, "author_association": "NONE", "body": "Tensorboard projector visualisation - PCA keeps hanging.\r\nI wrote a simple NN to predict the class type of iris dataset. NN model works fine.\r\n```\r\nimport pandas as pd \r\nimport numpy as np\r\n\r\nfrom sklearn.datasets import load_iris\r\nfrom sklearn.model_selection import train_test_split\r\nfrom sklearn import preprocessing\r\n\r\nimport tensorflow as tf\r\nimport tensorflow as tf\r\nfrom tensorflow import keras\r\n\r\niris_data = load_iris()\r\nx = pd.DataFrame(iris_data.data, columns=iris_data.feature_names)\r\ny = pd.DataFrame(iris_data.target, columns=['class'])\r\n\r\nencoder = preprocessing.OneHotEncoder(categories='auto')\r\nencoder.fit(y)\r\n#Transform\r\ny_enc = encoder.transform(y).toarray()\r\n\r\nx_train, x_test, y_train, y_test = train_test_split(x, y_enc)\r\n\r\n\r\nmodel = keras.Sequential()\r\nmodel.add(keras.layers.Dense(8, name='input_layer', activation=tf.nn.relu, input_shape=(x_train.shape[1],)))\r\nmodel.add(keras.layers.Dense(4, name='hidden_layer', activation=tf.nn.relu, input_shape=(x_train.shape[1],)))\r\nmodel.add(keras.layers.Dense(3, name='out_layer', activation=tf.nn.softmax))\r\n\r\nmodel.compile(optimizer=tf.keras.optimizers.Adam(0.005),\r\n              loss=keras.losses.binary_crossentropy,\r\n              metrics=[keras.metrics.categorical_accuracy])\r\nmodel.fit(x_train, y_train, epochs=50, verbose=0)\r\nresult = model.predict(x_test)\r\n```\r\nNow I am trying to visualise the output of the test set. Below is the code for Tensorboard projector. I don't what I am missing but PCA keeps loading even after starting the Tensorboard several minutes ago.\r\n\r\n```\r\nimport tensorflow as tf\r\nfrom tensorflow.contrib.tensorboard.plugins import projector\r\nimport numpy as np\r\nimport os\r\n\r\nLOG_DIR = 'logs'  # FULL PATH HERE!!!\r\n\r\nmetadata_file = os.path.join(LOG_DIR, 'metadata.tsv')\r\nwith open(metadata_file, 'w') as f:\r\nf.write('{}\\t{}\\n'.format('class_name','class_id'))\r\nwith open(metadata_file, 'a') as f:\r\nfor i in range(len(y_test)):\r\n    c = np.nonzero(y_test[i])[0][0]\r\n    f.write('{}\\t{}\\n'.format(iris_data.target_names[c],c))\r\n\r\n\r\nembedding_var = tf.Variable(result,  name='final_layer_embedding')\r\nsess = tf.Session()\r\nsess.run(embedding_var.initializer)\r\nsummary_writer = tf.summary.FileWriter(LOG_DIR)\r\nconfig = projector.ProjectorConfig()\r\nembedding = config.embeddings.add()\r\nembedding.tensor_name = embedding_var.name\r\n\r\nembedding.metadata_path = 'metadata.tsv'\r\n\r\nprojector.visualize_embeddings(summary_writer, config)\r\nsaver = tf.train.Saver([embedding_var])\r\nsaver.save(sess, os.path.join(LOG_DIR, 'model.ckpt'), 1)\r\n```\r\nI googled to understand what I am doing wrong but I could not fix it. Despite being my model is small very I could not visualise. Any help to resolve this problem would be highly appreciable.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23601", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23601/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23601/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23601/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23601", "id": 378714389, "node_id": "MDU6SXNzdWUzNzg3MTQzODk=", "number": 23601, "title": "Move autograph into a separate package and into a separate repo", "user": {"login": "KOLANICH", "id": 240344, "node_id": "MDQ6VXNlcjI0MDM0NA==", "avatar_url": "https://avatars1.githubusercontent.com/u/240344?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KOLANICH", "html_url": "https://github.com/KOLANICH", "followers_url": "https://api.github.com/users/KOLANICH/followers", "following_url": "https://api.github.com/users/KOLANICH/following{/other_user}", "gists_url": "https://api.github.com/users/KOLANICH/gists{/gist_id}", "starred_url": "https://api.github.com/users/KOLANICH/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KOLANICH/subscriptions", "organizations_url": "https://api.github.com/users/KOLANICH/orgs", "repos_url": "https://api.github.com/users/KOLANICH/repos", "events_url": "https://api.github.com/users/KOLANICH/events{/privacy}", "received_events_url": "https://api.github.com/users/KOLANICH/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 969831806, "node_id": "MDU6TGFiZWw5Njk4MzE4MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/WIP", "name": "WIP", "color": "f4c77f", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "mdanatg", "id": 26628547, "node_id": "MDQ6VXNlcjI2NjI4NTQ3", "avatar_url": "https://avatars1.githubusercontent.com/u/26628547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdanatg", "html_url": "https://github.com/mdanatg", "followers_url": "https://api.github.com/users/mdanatg/followers", "following_url": "https://api.github.com/users/mdanatg/following{/other_user}", "gists_url": "https://api.github.com/users/mdanatg/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdanatg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdanatg/subscriptions", "organizations_url": "https://api.github.com/users/mdanatg/orgs", "repos_url": "https://api.github.com/users/mdanatg/repos", "events_url": "https://api.github.com/users/mdanatg/events{/privacy}", "received_events_url": "https://api.github.com/users/mdanatg/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mdanatg", "id": 26628547, "node_id": "MDQ6VXNlcjI2NjI4NTQ3", "avatar_url": "https://avatars1.githubusercontent.com/u/26628547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdanatg", "html_url": "https://github.com/mdanatg", "followers_url": "https://api.github.com/users/mdanatg/followers", "following_url": "https://api.github.com/users/mdanatg/following{/other_user}", "gists_url": "https://api.github.com/users/mdanatg/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdanatg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdanatg/subscriptions", "organizations_url": "https://api.github.com/users/mdanatg/orgs", "repos_url": "https://api.github.com/users/mdanatg/repos", "events_url": "https://api.github.com/users/mdanatg/events{/privacy}", "received_events_url": "https://api.github.com/users/mdanatg/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-11-08T12:41:18Z", "updated_at": "2018-12-19T18:51:56Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: no\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: any\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: n/a\r\n- **TensorFlow installed from (source or binary)**: any\r\n- **TensorFlow version (use command below)**: any\r\n- **Python version**: any\r\n- **Bazel version (if compiling from source)**: any\r\n- **GCC/Compiler version (if compiling from source)**: any\r\n- **CUDA/cuDNN version**: any\r\n- **GPU model and memory**: any\r\n- **Exact command to reproduce**: n/a\r\n\r\n### Describe the problem\r\n\r\nI guess autograph should be moved into a separate package and repo. Because I guess it may be possible to add support of other computation graph frameworks there.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23590", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23590/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23590/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23590/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23590", "id": 378514672, "node_id": "MDU6SXNzdWUzNzg1MTQ2NzI=", "number": 23590, "title": "tf.manip.roll executes on CPU instead of GPU", "user": {"login": "dhingratul", "id": 4759327, "node_id": "MDQ6VXNlcjQ3NTkzMjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/4759327?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dhingratul", "html_url": "https://github.com/dhingratul", "followers_url": "https://api.github.com/users/dhingratul/followers", "following_url": "https://api.github.com/users/dhingratul/following{/other_user}", "gists_url": "https://api.github.com/users/dhingratul/gists{/gist_id}", "starred_url": "https://api.github.com/users/dhingratul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dhingratul/subscriptions", "organizations_url": "https://api.github.com/users/dhingratul/orgs", "repos_url": "https://api.github.com/users/dhingratul/repos", "events_url": "https://api.github.com/users/dhingratul/events{/privacy}", "received_events_url": "https://api.github.com/users/dhingratul/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 21, "created_at": "2018-11-07T23:32:01Z", "updated_at": "2019-09-04T07:04:48Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):no\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:n/a\r\n- TensorFlow installed from (source or binary):pip\r\n- TensorFlow version (use command below):1.8\r\n- Python version:2.7\r\n- Bazel version (if compiling from source):n/a\r\n- GCC/Compiler version (if compiling from source):n/a\r\n- CUDA/cuDNN version:9/7.1\r\n- GPU model and memory:1080ti/11gb\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\ntf.manip.roll executes on CPU and is very slow\r\n\r\n**Describe the expected behavior**\r\n![image](https://user-images.githubusercontent.com/4759327/48167964-70a43d00-e2e5-11e8-9c7a-59e6bd50e306.png)\r\n\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23566", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23566/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23566/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23566/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23566", "id": 378035401, "node_id": "MDU6SXNzdWUzNzgwMzU0MDE=", "number": 23566, "title": "tf.nn.embedding_lookup_sparse Converting sparse IndexedSlices Warning", "user": {"login": "davidenunes", "id": 5713750, "node_id": "MDQ6VXNlcjU3MTM3NTA=", "avatar_url": "https://avatars1.githubusercontent.com/u/5713750?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidenunes", "html_url": "https://github.com/davidenunes", "followers_url": "https://api.github.com/users/davidenunes/followers", "following_url": "https://api.github.com/users/davidenunes/following{/other_user}", "gists_url": "https://api.github.com/users/davidenunes/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidenunes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidenunes/subscriptions", "organizations_url": "https://api.github.com/users/davidenunes/orgs", "repos_url": "https://api.github.com/users/davidenunes/repos", "events_url": "https://api.github.com/users/davidenunes/events{/privacy}", "received_events_url": "https://api.github.com/users/davidenunes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-11-06T21:13:14Z", "updated_at": "2018-12-04T16:18:06Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): no\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): r1.11\r\n- Python version: 3.6\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 10/7.3\r\n\r\n**Describe the current behavior**\r\nUsing embedding_lookup_sparse raises the following warning:\r\n\r\n> UserWarning: Converting sparse IndexedSlices to a dense Tensor of unknown shape. This may consume a large amount of memory. \"Converting sparse IndexedSlices to a dense Tensor of unknown shape.\"\r\n\r\nLooking at embedding_lookup_sparse implementation, the issue comes from the gather after embedding lookup.\r\n\r\n```\r\n...\r\nids = sp_ids.values\r\nids, idx = array_ops.unique(ids)\r\n\r\nembeddings = embedding_lookup(params,ids,...)\r\n...\r\nembeddings = array_ops.gather(embeddings, idx)\r\n```\r\n\r\n**Describe the expected behavior**\r\nI didn't expect the sparse gradients to be passed to an op that can't back-propagate them inside \r\nembedding lookup sparse.\r\n\r\nIs there a reason this op does not call embedding_lookup on sp_ids.values directly? As opposed to\r\nlooking up the unique ids and calling gather on those rows ?\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23565", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23565/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23565/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23565/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23565", "id": 378031725, "node_id": "MDU6SXNzdWUzNzgwMzE3MjU=", "number": 23565, "title": "//tensorflow/core:util_tensor_slice_set_test fails on 1.12", "user": {"login": "MorganR", "id": 7505708, "node_id": "MDQ6VXNlcjc1MDU3MDg=", "avatar_url": "https://avatars3.githubusercontent.com/u/7505708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MorganR", "html_url": "https://github.com/MorganR", "followers_url": "https://api.github.com/users/MorganR/followers", "following_url": "https://api.github.com/users/MorganR/following{/other_user}", "gists_url": "https://api.github.com/users/MorganR/gists{/gist_id}", "starred_url": "https://api.github.com/users/MorganR/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MorganR/subscriptions", "organizations_url": "https://api.github.com/users/MorganR/orgs", "repos_url": "https://api.github.com/users/MorganR/repos", "events_url": "https://api.github.com/users/MorganR/events{/privacy}", "received_events_url": "https://api.github.com/users/MorganR/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-11-06T21:02:24Z", "updated_at": "2018-12-20T18:51:06Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version: 1.12\r\n- Python version: 3.6\r\n- Installed using virtualenv? pip? conda?: pip\r\n- Bazel version (if compiling from source): 0.19.0\r\n- GCC/Compiler version (if compiling from source): 7.3.0\r\n- CUDA/cuDNN version: Using CPU\r\n- GPU model and memory: Using CPU\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\nWhen running tests from source on r1.12, the test //tensorflow/core:util_tensor_slice_set_test fails.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\nI'm following the steps at https://www.tensorflow.org/install/sourcepip. This error occurs when I run\r\n`bazel test -c opt -- //tensorflow/... -//tensorflow/compiler/... -//tensorflow/contrib/lite/...`\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n[test.log](https://github.com/tensorflow/tensorflow/files/2555024/test.log)\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23564", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23564/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23564/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23564/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23564", "id": 378030945, "node_id": "MDU6SXNzdWUzNzgwMzA5NDU=", "number": 23564, "title": "//tensorflow/contrib/lookup:lookup_ops_test fails on 1.12", "user": {"login": "MorganR", "id": 7505708, "node_id": "MDQ6VXNlcjc1MDU3MDg=", "avatar_url": "https://avatars3.githubusercontent.com/u/7505708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MorganR", "html_url": "https://github.com/MorganR", "followers_url": "https://api.github.com/users/MorganR/followers", "following_url": "https://api.github.com/users/MorganR/following{/other_user}", "gists_url": "https://api.github.com/users/MorganR/gists{/gist_id}", "starred_url": "https://api.github.com/users/MorganR/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MorganR/subscriptions", "organizations_url": "https://api.github.com/users/MorganR/orgs", "repos_url": "https://api.github.com/users/MorganR/repos", "events_url": "https://api.github.com/users/MorganR/events{/privacy}", "received_events_url": "https://api.github.com/users/MorganR/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2018-11-06T21:00:07Z", "updated_at": "2019-10-13T19:26:12Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version: 1.12\r\n- Python version: 3.6\r\n- Installed using virtualenv? pip? conda?: pip\r\n- Bazel version (if compiling from source): 0.19.0\r\n- GCC/Compiler version (if compiling from source): 7.3.0\r\n- CUDA/cuDNN version: Using CPU\r\n- GPU model and memory: Using CPU\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\nWhen running tests from source on r1.12, the test //tensorflow/contrib/lookup:lookup_ops_test fails.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\nI'm following the steps at https://www.tensorflow.org/install/sourcepip. This error occurs when I run\r\n`bazel test -c opt -- //tensorflow/... -//tensorflow/compiler/... -//tensorflow/contrib/lite/...`\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n\r\n[test.log](https://github.com/tensorflow/tensorflow/files/2555016/test.log)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23562", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23562/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23562/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23562/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23562", "id": 377983584, "node_id": "MDU6SXNzdWUzNzc5ODM1ODQ=", "number": 23562, "title": "[xrt] Add \"Free all memory\" op", "user": {"login": "Keno", "id": 1291671, "node_id": "MDQ6VXNlcjEyOTE2NzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1291671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Keno", "html_url": "https://github.com/Keno", "followers_url": "https://api.github.com/users/Keno/followers", "following_url": "https://api.github.com/users/Keno/following{/other_user}", "gists_url": "https://api.github.com/users/Keno/gists{/gist_id}", "starred_url": "https://api.github.com/users/Keno/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Keno/subscriptions", "organizations_url": "https://api.github.com/users/Keno/orgs", "repos_url": "https://api.github.com/users/Keno/repos", "events_url": "https://api.github.com/users/Keno/events{/privacy}", "received_events_url": "https://api.github.com/users/Keno/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "michaelisard", "id": 5376757, "node_id": "MDQ6VXNlcjUzNzY3NTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/5376757?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelisard", "html_url": "https://github.com/michaelisard", "followers_url": "https://api.github.com/users/michaelisard/followers", "following_url": "https://api.github.com/users/michaelisard/following{/other_user}", "gists_url": "https://api.github.com/users/michaelisard/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelisard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelisard/subscriptions", "organizations_url": "https://api.github.com/users/michaelisard/orgs", "repos_url": "https://api.github.com/users/michaelisard/repos", "events_url": "https://api.github.com/users/michaelisard/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelisard/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "michaelisard", "id": 5376757, "node_id": "MDQ6VXNlcjUzNzY3NTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/5376757?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelisard", "html_url": "https://github.com/michaelisard", "followers_url": "https://api.github.com/users/michaelisard/followers", "following_url": "https://api.github.com/users/michaelisard/following{/other_user}", "gists_url": "https://api.github.com/users/michaelisard/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelisard/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelisard/subscriptions", "organizations_url": "https://api.github.com/users/michaelisard/orgs", "repos_url": "https://api.github.com/users/michaelisard/repos", "events_url": "https://api.github.com/users/michaelisard/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelisard/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-11-06T18:46:34Z", "updated_at": "2018-12-19T18:51:38Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- TensorFlow version (you are using): nightly\r\n- Are you willing to contribute it (Yes/No): N/A\r\n\r\n**Describe the feature and the current behavior/state.**\r\nWhen a client loses track of xrt-managed state (e.g. because it errors before it could start tracking it) or because it crashes, or because other errors, the allocation stays around on the device side with no way to free it (other than a hard restart of the device). It would be useful to have an xrt op that drops all memory that xrt knows about (perhaps optionally with a preserve list, so the client can say \"I know about these, so don't free them\").\r\n\r\n**Will this change the current api? How?**\r\nThis will likely be a new xrt op.\r\n\r\n**Who will benefit with this feature?**\r\nUsers of the xrt API.\r\n\r\n**Any Other info.**\r\n@michaelisard requested to be assigned."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23559", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23559/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23559/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23559/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23559", "id": 377929736, "node_id": "MDU6SXNzdWUzNzc5Mjk3MzY=", "number": 23559, "title": "Unenforce StreamHandler in tf_logging", "user": {"login": "harahu", "id": 6145801, "node_id": "MDQ6VXNlcjYxNDU4MDE=", "avatar_url": "https://avatars1.githubusercontent.com/u/6145801?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harahu", "html_url": "https://github.com/harahu", "followers_url": "https://api.github.com/users/harahu/followers", "following_url": "https://api.github.com/users/harahu/following{/other_user}", "gists_url": "https://api.github.com/users/harahu/gists{/gist_id}", "starred_url": "https://api.github.com/users/harahu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harahu/subscriptions", "organizations_url": "https://api.github.com/users/harahu/orgs", "repos_url": "https://api.github.com/users/harahu/repos", "events_url": "https://api.github.com/users/harahu/events{/privacy}", "received_events_url": "https://api.github.com/users/harahu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-11-06T16:32:11Z", "updated_at": "2018-12-09T18:41:25Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- TensorFlow version (you are using): 1.12\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nCurrently the tf_logging API will always add its own StreamHandler to the tensorflow logger (see: https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/platform/tf_logging.py#L121-L124). According to the [Python logging documentation](https://docs.python.org/3/howto/logging.html#configuring-logging-for-a-library) this is discouraged:\r\n\r\n> **Note:** It is strongly advised that you do not add any handlers other than NullHandler to your library\u2019s loggers. This is because the configuration of handlers is the prerogative of the application developer who uses your library. The application developer knows their target audience and what handlers are most appropriate for their application: if you add handlers \u2018under the hood\u2019, you might well interfere with their ability to carry out unit tests and deliver logs which suit their requirements. \r\n\r\n**Will this change the current api? How?**\r\nIf some optional configuration parameter is added to not use the StreamHandler, this does not need to affect how the tf_logging API is used today.\r\n\r\n**Who will benefit with this feature?**\r\nAny developer (like myself) that work on complex projects where tensorflow is not the only component that performs logging. I want to propagate tensorflow LogRecords to a handler at the root logger object, so that I might decide myself how best to print them or save them."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23557", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23557/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23557/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23557/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23557", "id": 377919689, "node_id": "MDU6SXNzdWUzNzc5MTk2ODk=", "number": 23557, "title": "Memmory leak Using tensorflow::NewSession , C++", "user": {"login": "Cameron-Chancey", "id": 44811078, "node_id": "MDQ6VXNlcjQ0ODExMDc4", "avatar_url": "https://avatars1.githubusercontent.com/u/44811078?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Cameron-Chancey", "html_url": "https://github.com/Cameron-Chancey", "followers_url": "https://api.github.com/users/Cameron-Chancey/followers", "following_url": "https://api.github.com/users/Cameron-Chancey/following{/other_user}", "gists_url": "https://api.github.com/users/Cameron-Chancey/gists{/gist_id}", "starred_url": "https://api.github.com/users/Cameron-Chancey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Cameron-Chancey/subscriptions", "organizations_url": "https://api.github.com/users/Cameron-Chancey/orgs", "repos_url": "https://api.github.com/users/Cameron-Chancey/repos", "events_url": "https://api.github.com/users/Cameron-Chancey/events{/privacy}", "received_events_url": "https://api.github.com/users/Cameron-Chancey/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}], "state": "open", "locked": false, "assignee": {"login": "mhong", "id": 969799, "node_id": "MDQ6VXNlcjk2OTc5OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/969799?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mhong", "html_url": "https://github.com/mhong", "followers_url": "https://api.github.com/users/mhong/followers", "following_url": "https://api.github.com/users/mhong/following{/other_user}", "gists_url": "https://api.github.com/users/mhong/gists{/gist_id}", "starred_url": "https://api.github.com/users/mhong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mhong/subscriptions", "organizations_url": "https://api.github.com/users/mhong/orgs", "repos_url": "https://api.github.com/users/mhong/repos", "events_url": "https://api.github.com/users/mhong/events{/privacy}", "received_events_url": "https://api.github.com/users/mhong/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mhong", "id": 969799, "node_id": "MDQ6VXNlcjk2OTc5OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/969799?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mhong", "html_url": "https://github.com/mhong", "followers_url": "https://api.github.com/users/mhong/followers", "following_url": "https://api.github.com/users/mhong/following{/other_user}", "gists_url": "https://api.github.com/users/mhong/gists{/gist_id}", "starred_url": "https://api.github.com/users/mhong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mhong/subscriptions", "organizations_url": "https://api.github.com/users/mhong/orgs", "repos_url": "https://api.github.com/users/mhong/repos", "events_url": "https://api.github.com/users/mhong/events{/privacy}", "received_events_url": "https://api.github.com/users/mhong/received_events", "type": "User", "site_admin": false}, {"login": "cy89", "id": 29663194, "node_id": "MDQ6VXNlcjI5NjYzMTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/29663194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cy89", "html_url": "https://github.com/cy89", "followers_url": "https://api.github.com/users/cy89/followers", "following_url": "https://api.github.com/users/cy89/following{/other_user}", "gists_url": "https://api.github.com/users/cy89/gists{/gist_id}", "starred_url": "https://api.github.com/users/cy89/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cy89/subscriptions", "organizations_url": "https://api.github.com/users/cy89/orgs", "repos_url": "https://api.github.com/users/cy89/repos", "events_url": "https://api.github.com/users/cy89/events{/privacy}", "received_events_url": "https://api.github.com/users/cy89/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-11-06T16:11:13Z", "updated_at": "2019-12-09T18:45:22Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes.\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:Linux Ubuntu 16.04\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:N/A\r\n- **TensorFlow installed from (source or binary)**:Source\r\n- **TensorFlow version (use command below)**: 1.12.0-rc0\r\n- **Python version**: Python 2.7.12\r\n- **Bazel version (if compiling from source)**: 0.18.0\r\n- **GCC/Compiler version (if compiling from source)**: 5.4.0\r\n- **CUDA/cuDNN version**: N/A. Using Cpu Only. \r\n- **GPU model and memory**: N/A. Using Cpu Only. \r\n- **Exact command to reproduce**:\r\n\r\n## Code\r\n```\r\nclass Temp\r\n{\r\n public:\r\n  Temp(){\r\n    std::unique_ptr<tensorflow::Session> session(\r\n      tensorflow::NewSession(tensorflow::SessionOptions()));\r\n    };\r\n};\r\n\r\nint main(int argc, char **argv)\r\n{\r\n  Temp temp;\r\n  return 0;\r\n}\r\n```\r\n\r\n### Describe the problem\r\nWhen creating a unique_ptr to a session using tensorflow::NewSession, a memory leak occurs according to address sanitizer. There is a similar closed issue posted here: [https://github.com/tensorflow/tensorflow/issues/19163](https://github.com/tensorflow/tensorflow/issues/19163) , however I am still having an issue. \r\n\r\n### Source code / logs\r\n\r\n```\r\n==259==ERROR: LeakSanitizer: detected memory leaks\r\n\r\nDirect leak of 24 byte(s) in 1 object(s) allocated from:\r\n    #0 0x7f17c81b7532 in operator new(unsigned long) (/usr/lib/x86_64-linux-gnu/libasan.so.2+0x99532)\r\n    #1 0x7f17c1c1aca7 in tensorflow::RegisterXlaDeviceKernels(char const*, char const*) (/tensorflowincludes/bin/libtensorflow_cc.so+0x1cd2ca7)\r\n    #2 0x7f17c1c0e19a in tensorflow::XlaCpuDeviceFactory::CreateDevices(tensorflow::SessionOptions const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<tensorflow::Device*, std::allocator<tensorflow::Device*> >*) (/tensorflowincludes/bin/libtensorflow_cc.so+0x1cc619a)\r\n    #3 0x7f17bf851fe8 in tensorflow::DeviceFactory::AddDevices(tensorflow::SessionOptions const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<tensorflow::Device*, std::allocator<tensorflow::Device*> >*) (/tensorflowincludes/bin/libtensorflow_framework.so+0x62dfe8)\r\n    #4 0x7f17c61ccea4 in tensorflow::DirectSessionFactory::NewSession(tensorflow::SessionOptions const&, tensorflow::Session**) (/tensorflowincludes/bin/libtensorflow_cc.so+0x6284ea4)\r\n    #5 0x7f17bf8abfe8 in tensorflow::NewSession(tensorflow::SessionOptions const&, tensorflow::Session**) (/tensorflowincludes/bin/libtensorflow_framework.so+0x687fe8)\r\n    #6 0x7f17bf8ac0ac in tensorflow::NewSession(tensorflow::SessionOptions const&) (/tensorflowincludes/bin/libtensorflow_framework.so+0x6880ac)\r\n    #7 0x402bc2 in Temp::Temp() /var/jenkins_home/workspace/tensorflowleaktest_master-FVC6RQR2GX36IO3JBYVHBT3IJH3EQUQFR2B3OPUAPWVP7LOWN2WQ/tests/src/main.cpp:38\r\n    #8 0x402245 in main /var/jenkins_home/workspace/tensorflowleaktest_master-FVC6RQR2GX36IO3JBYVHBT3IJH3EQUQFR2B3OPUAPWVP7LOWN2WQ/tests/src/main.cpp:44\r\n    #9 0x7f17be6c582f in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x2082f)\r\n\r\nIndirect leak of 4096 byte(s) in 1 object(s) allocated from:\r\n    #0 0x7f17c81b7532 in operator new(unsigned long) (/usr/lib/x86_64-linux-gnu/libasan.so.2+0x99532)\r\n    #1 0x7f17c1c1ab50 in void std::vector<std::unique_ptr<tensorflow::kernel_factory::OpKernelRegistrar, std::default_delete<tensorflow::kernel_factory::OpKernelRegistrar> >, std::allocator<std::unique_ptr<tensorflow::kernel_factory::OpKernelRegistrar, std::default_delete<tensorflow::kernel_factory::OpKernelRegistrar> > > >::_M_emplace_back_aux<tensorflow::kernel_factory::OpKernelRegistrar*>(tensorflow::kernel_factory::OpKernelRegistrar*&&) (/tensorflowincludes/bin/libtensorflow_cc.so+0x1cd2b50)\r\n    #2 0x7f17c1c1ae7e in tensorflow::RegisterXlaDeviceKernels(char const*, char const*) (/tensorflowincludes/bin/libtensorflow_cc.so+0x1cd2e7e)\r\n    #3 0x7f17c1c0e19a in tensorflow::XlaCpuDeviceFactory::CreateDevices(tensorflow::SessionOptions const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<tensorflow::Device*, std::allocator<tensorflow::Device*> >*) (/tensorflowincludes/bin/libtensorflow_cc.so+0x1cc619a)\r\n    #4 0x7f17bf851fe8 in tensorflow::DeviceFactory::AddDevices(tensorflow::SessionOptions const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<tensorflow::Device*, std::allocator<tensorflow::Device*> >*) (/tensorflowincludes/bin/libtensorflow_framework.so+0x62dfe8)\r\n    #5 0x7f17c61ccea4 in tensorflow::DirectSessionFactory::NewSession(tensorflow::SessionOptions const&, tensorflow::Session**) (/tensorflowincludes/bin/libtensorflow_cc.so+0x6284ea4)\r\n    #6 0x7f17bf8abfe8 in tensorflow::NewSession(tensorflow::SessionOptions const&, tensorflow::Session**) (/tensorflowincludes/bin/libtensorflow_framework.so+0x687fe8)\r\n    #7 0x7f17bf8ac0ac in tensorflow::NewSession(tensorflow::SessionOptions const&) (/tensorflowincludes/bin/libtensorflow_framework.so+0x6880ac)\r\n    #8 0x402bc2 in Temp::Temp() /var/jenkins_home/workspace/tensorflowleaktest_master-FVC6RQR2GX36IO3JBYVHBT3IJH3EQUQFR2B3OPUAPWVP7LOWN2WQ/tests/src/main.cpp:38\r\n    #9 0x402245 in main /var/jenkins_home/workspace/tensorflowleaktest_master-FVC6RQR2GX36IO3JBYVHBT3IJH3EQUQFR2B3OPUAPWVP7LOWN2WQ/tests/src/main.cpp:44\r\n    #10 0x7f17be6c582f in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x2082f)\r\n\r\nIndirect leak of 323 byte(s) in 323 object(s) allocated from:\r\n    #0 0x7f17c81b7532 in operator new(unsigned long) (/usr/lib/x86_64-linux-gnu/libasan.so.2+0x99532)\r\n    #1 0x7f17c1c1ad87 in tensorflow::RegisterXlaDeviceKernels(char const*, char const*) (/tensorflowincludes/bin/libtensorflow_cc.so+0x1cd2d87)\r\n    #2 0x7f17c1c0e19a in tensorflow::XlaCpuDeviceFactory::CreateDevices(tensorflow::SessionOptions const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<tensorflow::Device*, std::allocator<tensorflow::Device*> >*) (/tensorflowincludes/bin/libtensorflow_cc.so+0x1cc619a)\r\n    #3 0x7f17bf851fe8 in tensorflow::DeviceFactory::AddDevices(tensorflow::SessionOptions const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::vector<tensorflow::Device*, std::allocator<tensorflow::Device*> >*) (/tensorflowincludes/bin/libtensorflow_framework.so+0x62dfe8)\r\n    #4 0x7f17c61ccea4 in tensorflow::DirectSessionFactory::NewSession(tensorflow::SessionOptions const&, tensorflow::Session**) (/tensorflowincludes/bin/libtensorflow_cc.so+0x6284ea4)\r\n    #5 0x7f17bf8abfe8 in tensorflow::NewSession(tensorflow::SessionOptions const&, tensorflow::Session**) (/tensorflowincludes/bin/libtensorflow_framework.so+0x687fe8)\r\n    #6 0x7f17bf8ac0ac in tensorflow::NewSession(tensorflow::SessionOptions const&) (/tensorflowincludes/bin/libtensorflow_framework.so+0x6880ac)\r\n    #7 0x402bc2 in Temp::Temp() /var/jenkins_home/workspace/tensorflowleaktest_master-FVC6RQR2GX36IO3JBYVHBT3IJH3EQUQFR2B3OPUAPWVP7LOWN2WQ/tests/src/main.cpp:38\r\n    #8 0x402245 in main /var/jenkins_home/workspace/tensorflowleaktest_master-FVC6RQR2GX36IO3JBYVHBT3IJH3EQUQFR2B3OPUAPWVP7LOWN2WQ/tests/src/main.cpp:44\r\n    #9 0x7f17be6c582f in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x2082f)\r\n\r\nSUMMARY: AddressSanitizer: 4443 byte(s) leaked in 325 allocation(s).\r\n\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23553", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23553/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23553/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23553/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23553", "id": 377835034, "node_id": "MDU6SXNzdWUzNzc4MzUwMzQ=", "number": 23553, "title": "Relationships between Grappler, GraphOptimizer and GraphOptimizationPass", "user": {"login": "wangsiyu", "id": 5387343, "node_id": "MDQ6VXNlcjUzODczNDM=", "avatar_url": "https://avatars0.githubusercontent.com/u/5387343?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wangsiyu", "html_url": "https://github.com/wangsiyu", "followers_url": "https://api.github.com/users/wangsiyu/followers", "following_url": "https://api.github.com/users/wangsiyu/following{/other_user}", "gists_url": "https://api.github.com/users/wangsiyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/wangsiyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wangsiyu/subscriptions", "organizations_url": "https://api.github.com/users/wangsiyu/orgs", "repos_url": "https://api.github.com/users/wangsiyu/repos", "events_url": "https://api.github.com/users/wangsiyu/events{/privacy}", "received_events_url": "https://api.github.com/users/wangsiyu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545273, "node_id": "MDU6TGFiZWwxMDk3NTQ1Mjcz", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:grappler", "name": "comp:grappler", "color": "0052cc", "default": false, "description": ""}, {"id": 1093464312, "node_id": "MDU6TGFiZWwxMDkzNDY0MzEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:others", "name": "type:others", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-11-06T12:57:39Z", "updated_at": "2018-12-08T18:42:00Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "There are so many graph optimization tools in TensorFlow Runtime such as `Grappler`, `GraphOptimizer` and `GraphOptimizationPass`. This makes me confused.  Is there any plan to unify these interfaces\uff1fCurrently, it seems that these optimizers could not replace with each other.\r\n\r\n`Grappler` is very light weight because it does graph optimization on `GraphDef` .The limitation is that  these `optimizers` can only run after `Placer.run()`.  However,  some optimizers in `Grappler` will rewrite placement information. Therefore,  this will possibly cause some placement errors without the protection of `Placer`(Is it reasonable to  run `Placer` after running grappler?). Another, the `FeedBack` function is not being used in framework.\r\n\r\n`GraphOptimizationPass` does optimization on `Graph` object. The advantage is that these optimizers can be specified with execution stage(PRE_PLACEMENT, POST_PLACEMENT......) .This is necessary. I think the execution stage of graph optimizers should be treated differently. Some optimizers should be done before placement and the other may be suitable for post partitioning and etc. \r\n\r\nAs for `GraphOptimizer`, I heard that it will not be updated in the future. \r\n\r\nIt will be nice to unify them and bring their strength together.  @caisq "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23545", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23545/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23545/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23545/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23545", "id": 377704891, "node_id": "MDU6SXNzdWUzNzc3MDQ4OTE=", "number": 23545, "title": "Unacceptable framework overhead for huge networks", "user": {"login": "IFeelBloated", "id": 10070053, "node_id": "MDQ6VXNlcjEwMDcwMDUz", "avatar_url": "https://avatars1.githubusercontent.com/u/10070053?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IFeelBloated", "html_url": "https://github.com/IFeelBloated", "followers_url": "https://api.github.com/users/IFeelBloated/followers", "following_url": "https://api.github.com/users/IFeelBloated/following{/other_user}", "gists_url": "https://api.github.com/users/IFeelBloated/gists{/gist_id}", "starred_url": "https://api.github.com/users/IFeelBloated/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IFeelBloated/subscriptions", "organizations_url": "https://api.github.com/users/IFeelBloated/orgs", "repos_url": "https://api.github.com/users/IFeelBloated/repos", "events_url": "https://api.github.com/users/IFeelBloated/events{/privacy}", "received_events_url": "https://api.github.com/users/IFeelBloated/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}], "state": "open", "locked": false, "assignee": {"login": "ezhulenev", "id": 1174378, "node_id": "MDQ6VXNlcjExNzQzNzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1174378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezhulenev", "html_url": "https://github.com/ezhulenev", "followers_url": "https://api.github.com/users/ezhulenev/followers", "following_url": "https://api.github.com/users/ezhulenev/following{/other_user}", "gists_url": "https://api.github.com/users/ezhulenev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezhulenev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezhulenev/subscriptions", "organizations_url": "https://api.github.com/users/ezhulenev/orgs", "repos_url": "https://api.github.com/users/ezhulenev/repos", "events_url": "https://api.github.com/users/ezhulenev/events{/privacy}", "received_events_url": "https://api.github.com/users/ezhulenev/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ezhulenev", "id": 1174378, "node_id": "MDQ6VXNlcjExNzQzNzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1174378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezhulenev", "html_url": "https://github.com/ezhulenev", "followers_url": "https://api.github.com/users/ezhulenev/followers", "following_url": "https://api.github.com/users/ezhulenev/following{/other_user}", "gists_url": "https://api.github.com/users/ezhulenev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezhulenev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezhulenev/subscriptions", "organizations_url": "https://api.github.com/users/ezhulenev/orgs", "repos_url": "https://api.github.com/users/ezhulenev/repos", "events_url": "https://api.github.com/users/ezhulenev/events{/privacy}", "received_events_url": "https://api.github.com/users/ezhulenev/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-11-06T06:06:58Z", "updated_at": "2018-12-09T18:41:20Z", "closed_at": null, "author_association": "NONE", "body": "I posted the same issue for Keras [here](https://github.com/keras-team/keras/issues/11592), but I guess it's more of a tensorflow problem in general.\r\nso for a large network with thousands or even more layers (the network might not be that large mathematically since each layer could contain just a small number of parameters, but u get the idea), the overhead of basically anything messing with some graph stuff becomes unacceptable, things like model compilation, XLA optimization, gradient checkpoint, and also the keras \"save_weights\" functions are of ABYSMAL performance and could take literally DAYS!! even longer than the actual training process on GPU, I noticed that every time something like the aforementioned stuff was being executed, the python script just got stuck, one CPU core skyrocketed to 100% usage and the rest 39 cores were just almost 0% usage, then it would take hours and hours before that thing was done and then we could finally move on to the actual training.\r\nIt's honestly just frustrating and unacceptable, any idea to solve this?\r\nsample script to reproduce the performance problem: https://gist.github.com/IFeelBloated/6e85b251f66941b7eb50f987c95ce69b"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23542", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23542/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23542/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23542/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23542", "id": 377679010, "node_id": "MDU6SXNzdWUzNzc2NzkwMTA=", "number": 23542, "title": "No C++ symbols exported after built libtensorflow_cc with bazel on windows", "user": {"login": "dianlujitao", "id": 5774651, "node_id": "MDQ6VXNlcjU3NzQ2NTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/5774651?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dianlujitao", "html_url": "https://github.com/dianlujitao", "followers_url": "https://api.github.com/users/dianlujitao/followers", "following_url": "https://api.github.com/users/dianlujitao/following{/other_user}", "gists_url": "https://api.github.com/users/dianlujitao/gists{/gist_id}", "starred_url": "https://api.github.com/users/dianlujitao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dianlujitao/subscriptions", "organizations_url": "https://api.github.com/users/dianlujitao/orgs", "repos_url": "https://api.github.com/users/dianlujitao/repos", "events_url": "https://api.github.com/users/dianlujitao/events{/privacy}", "received_events_url": "https://api.github.com/users/dianlujitao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 32, "created_at": "2018-11-06T03:34:38Z", "updated_at": "2020-03-08T18:26:33Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):source\r\n- TensorFlow version:v1.11.0\r\n- Python version:\r\n- Installed using virtualenv? pip? conda?:\r\n- Bazel version (if compiling from source):0.18.0 official build\r\n- GCC/Compiler version (if compiling from source):VC++ 2015.3 v14.00 (v140) MSVC\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\nFollowing the official documentation, I use `bazel build -c opt //tensorflow:libtensorflow_cc.so` to build tensorflow with c++ api on windows, since cmake is deprecated now.\r\nEverything goes well, and `libtensorflow_cc.so` is generated in bazel out dir, which can be renamed to .dll, but I didn't find `libtensorflow_cc.lib` which should contain the exported symbols. Furthermore, I use `dumpbin /exports libtensorflow_cc.so` to view all the exported symbols (the output is attached in the next section), only `TFE_*` , `TF_*` and some other symbols are exported. Obviously no **C++** symbols are exported.\r\nI dig into the source code and found that there're extra parameters passed to the compiler which specifying a list of symbols to export on darwin and posix, but windows (https://github.com/tensorflow/tensorflow/blob/master/tensorflow/BUILD#L480-L488). I'm not familiar to Microsoft toolchains, but can similar thing be passed to MSVC if necessary so that we can get a proper libtensorflow_cc with necessary symbols exported on windows?\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nOutput of `dumpbin /exports libtensorflow_cc.so`:\r\n\r\n```\r\nMicrosoft (R) COFF/PE Dumper Version 14.15.26730.0\r\nCopyright (C) Microsoft Corporation.  All rights reserved.\r\n\r\n\r\nDump of file F:\\libtensorflow_cc\\execroot\\org_tensorflow\\bazel-out\\x64_windows-opt\\bin\\tensorflow\\libtensorflow_cc.so\r\n\r\nFile Type: DLL\r\n\r\n  Section contains the following exports for libtensorflow_cc.so\r\n\r\n    00000000 characteristics\r\n    5BDF0174 time date stamp Sun Nov  4 22:25:56 2018\r\n        0.00 version\r\n           1 ordinal base\r\n         233 number of functions\r\n         233 number of names\r\n\r\n    ordinal hint RVA      name\r\n\r\n          1    0 02C79C50 ?DEVICE_CPU@tensorflow@@3QEBDEB\r\n          2    1 02C79C58 ?DEVICE_GPU@tensorflow@@3QEBDEB\r\n          3    2 02C79C60 ?DEVICE_SYCL@tensorflow@@3QEBDEB\r\n          4    3 02618400 ?ThenBlasGemm@Stream@stream_executor@@QEAAAEAV12@W4Transpose@blas@2@0_K11MAEBV?$DeviceMemory@M@2@H2HMPEAV52@H@Z\r\n          5    4 02618CA0 ?ThenBlasGemm@Stream@stream_executor@@QEAAAEAV12@W4Transpose@blas@2@0_K11MAEBV?$DeviceMemory@Uhalf@Eigen@@@2@H2HMPEAV52@H@Z\r\n          6    5 02619540 ?ThenBlasGemm@Stream@stream_executor@@QEAAAEAV12@W4Transpose@blas@2@0_K11NAEBV?$DeviceMemory@N@2@H2HNPEAV52@H@Z\r\n          7    6 02619DE0 ?ThenBlasGemm@Stream@stream_executor@@QEAAAEAV12@W4Transpose@blas@2@0_K11V?$complex@M@std@@AEBV?$DeviceMemory@V?$complex@M@std@@@2@H3H2PEAV72@H@Z\r\n          8    7 0261A670 ?ThenBlasGemm@Stream@stream_executor@@QEAAAEAV12@W4Transpose@blas@2@0_K11V?$complex@N@std@@AEBV?$DeviceMemory@V?$complex@N@std@@@2@H3H2PEAV72@H@Z\r\n          9    8 02C86690 ?kDatasetGraphKey@DatasetBase@tensorflow@@2QBDB\r\n         10    9 02C866A0 ?kDatasetGraphOutputNodeKey@DatasetBase@tensorflow@@2QBDB\r\n         11    A 001C8370 TFE_ContextAddFunction\r\n         12    B 001C83C0 TFE_ContextAddFunctionDef\r\n         13    C 001C8490 TFE_ContextAsyncClearError\r\n         14    D 001C84A0 TFE_ContextAsyncWait\r\n         15    E 001C84F0 TFE_ContextClearCaches\r\n         16    F 001C8500 TFE_ContextDisableRunMetadata\r\n         17   10 001C8510 TFE_ContextEnableRunMetadata\r\n         18   11 001C8520 TFE_ContextEndStep\r\n         19   12 001C8530 TFE_ContextExportRunMetadata\r\n         20   13 001C8620 TFE_ContextGetDevicePlacementPolicy\r\n         21   14 001C8630 TFE_ContextListDevices\r\n         22   15 001C86A0 TFE_ContextOptionsSetAsync\r\n         23   16 001C86B0 TFE_ContextOptionsSetConfig\r\n         24   17 001C86C0 TFE_ContextOptionsSetDevicePlacementPolicy\r\n         25   18 001C86D0 TFE_ContextSetAsyncForThread\r\n         26   19 001C8720 TFE_ContextSetServerDef\r\n         27   1A 001C87E0 TFE_ContextSetThreadLocalDevicePlacementPolicy\r\n         28   1B 001C87F0 TFE_ContextStartStep\r\n         29   1C 001C8800 TFE_DeleteContext\r\n         30   1D 001C8830 TFE_DeleteContextOptions\r\n         31   1E 001C8870 TFE_DeleteOp\r\n         32   1F 001BFB40 TFE_DeleteTensorDebugInfo\r\n         33   20 001C88A0 TFE_DeleteTensorHandle\r\n         34   21 001C88F0 TFE_Execute\r\n         35   22 001C8A50 TFE_NewContext\r\n         36   23 001C8C40 TFE_NewContextOptions\r\n         37   24 001C8C80 TFE_NewOp\r\n         38   25 001C8E70 TFE_NewTensorHandle\r\n         39   26 001C8F60 TFE_OpAddInput\r\n         40   27 001C8F70 TFE_OpGetAttrType\r\n         41   28 001C90E0 TFE_OpGetDevice\r\n         42   29 001C9120 TFE_OpNameGetAttrType\r\n         43   2A 001C91A0 TFE_OpSetAttrBool\r\n         44   2B 001C9200 TFE_OpSetAttrBoolList\r\n         45   2C 001C93B0 TFE_OpSetAttrFloat\r\n         46   2D 001C9430 TFE_OpSetAttrFloatList\r\n         47   2E 001C94B0 TFE_OpSetAttrFunction\r\n         48   2F 001C9640 TFE_OpSetAttrFunctionList\r\n         49   30 001C9850 TFE_OpSetAttrInt\r\n         50   31 001C98D0 TFE_OpSetAttrIntList\r\n         51   32 001C9950 TFE_OpSetAttrShape\r\n         52   33 001C9C30 TFE_OpSetAttrShapeList\r\n         53   34 001C9FF0 TFE_OpSetAttrString\r\n         54   35 001CA070 TFE_OpSetAttrStringList\r\n         55   36 001CA1E0 TFE_OpSetAttrType\r\n         56   37 001CA230 TFE_OpSetAttrTypeList\r\n         57   38 001CA2B0 TFE_OpSetDevice\r\n         58   39 001CA300 TFE_OpSetXLACompilation\r\n         59   3A 001BFB90 TFE_TensorDebugInfoOnDeviceDim\r\n         60   3B 001BFBA0 TFE_TensorDebugInfoOnDeviceNumDims\r\n         61   3C 001CA370 TFE_TensorHandleCopyToDevice\r\n         62   3D 001CA420 TFE_TensorHandleDataType\r\n         63   3E 001CA430 TFE_TensorHandleDeviceName\r\n         64   3F 001CA510 TFE_TensorHandleDim\r\n         65   40 001CA5C0 TFE_TensorHandleNumDims\r\n         66   41 001CA670 TFE_TensorHandleResolve\r\n         67   42 001BFBB0 TFE_TensorHandleTensorDebugInfo\r\n         68   43 00372290 TF_AbortWhile\r\n         69   44 003722A0 TF_AddControlInput\r\n         70   45 003722B0 TF_AddGradients\r\n         71   46 00372300 TF_AddGradientsWithPrefix\r\n         72   47 00372BB0 TF_AddInput\r\n         73   48 00372BC0 TF_AddInputList\r\n         74   49 00372E50 TF_AllocateTensor\r\n         75   4A 00372EC0 TF_ApiDefMapGet\r\n         76   4B 00373070 TF_ApiDefMapPut\r\n         77   4C 00373200 TF_CloseDeprecatedSession\r\n         78   4D 00373200 TF_CloseSession\r\n         79   4E 00373250 TF_ColocateWith\r\n         80   4F 00373380 TF_DataTypeSize\r\n         81   50 00373390 TF_DeleteApiDefMap\r\n         82   51 003733C0 TF_DeleteBuffer\r\n         83   52 00373400 TF_DeleteDeprecatedSession\r\n         84   53 00373480 TF_DeleteDeviceList\r\n         85   54 00366220 TF_DeleteFunction\r\n         86   55 003734B0 TF_DeleteGraph\r\n         87   56 00373520 TF_DeleteImportGraphDefOptions\r\n         88   57 00373570 TF_DeleteImportGraphDefResults\r\n         89   58 003735A0 TF_DeleteLibraryHandle\r\n         90   59 003735D0 TF_DeletePRunHandle\r\n         91   5A 003735E0 TF_DeleteSession\r\n         92   5B 00373720 TF_DeleteSessionOptions\r\n         93   5C 00373760 TF_DeleteStatus\r\n         94   5D 003737B0 TF_DeleteTensor\r\n         95   5E 00373820 TF_DeprecatedSessionListDevices\r\n         96   5F 003738B0 TF_DeviceListCount\r\n         97   60 003738E0 TF_DeviceListIncarnation\r\n         98   61 00373A30 TF_DeviceListMemoryBytes\r\n         99   62 00373B80 TF_DeviceListName\r\n        100   63 00373CD0 TF_DeviceListType\r\n        101   64 00373E20 TF_Dim\r\n        102   65 00373E30 TF_ExtendGraph\r\n        103   66 00373EF0 TF_FinishOperation\r\n        104   67 00374250 TF_FinishWhile\r\n        105   68 00366250 TF_FunctionGetAttrValueProto\r\n        106   69 00366430 TF_FunctionImportFunctionDef\r\n        107   6A 00366540 TF_FunctionName\r\n        108   6B 00366570 TF_FunctionSetAttrValueProto\r\n        109   6C 00366760 TF_FunctionToFunctionDef\r\n        110   6D 00374890 TF_GetAllOpList\r\n        111   6E 00374B60 TF_GetAllRegisteredKernels\r\n        112   6F 00374C40 TF_GetBuffer\r\n        113   70 001E4360 TF_GetCode\r\n        114   71 00374C60 TF_GetOpList\r\n        115   72 00374C80 TF_GetRegisteredKernelsForOp\r\n        116   73 003667B0 TF_GraphCopyFunction\r\n        117   74 003669D0 TF_GraphGetFunctions\r\n        118   75 00374D90 TF_GraphGetOpDef\r\n        119   76 00374F20 TF_GraphGetTensorNumDims\r\n        120   77 00375050 TF_GraphGetTensorShape\r\n        121   78 00375260 TF_GraphImportGraphDef\r\n        122   79 003752A0 TF_GraphImportGraphDefWithResults\r\n        123   7A 003753F0 TF_GraphImportGraphDefWithReturnOutputs\r\n        124   7B 00375610 TF_GraphNextOperation\r\n        125   7C 00366B80 TF_GraphNumFunctions\r\n        126   7D 003756D0 TF_GraphOperationByName\r\n        127   7E 003757F0 TF_GraphSetTensorShape\r\n        128   7F 00366BF0 TF_GraphToFunction\r\n        129   80 00375950 TF_GraphToGraphDef\r\n        130   81 00375A10 TF_GraphVersions\r\n        131   82 00375AD0 TF_ImportGraphDefOptionsAddControlDependency\r\n        132   83 00375B00 TF_ImportGraphDefOptionsAddInputMapping\r\n        133   84 00375CF0 TF_ImportGraphDefOptionsAddReturnOperation\r\n        134   85 00375E70 TF_ImportGraphDefOptionsAddReturnOutput\r\n        135   86 00375FC0 TF_ImportGraphDefOptionsNumReturnOperations\r\n        136   87 00375FD0 TF_ImportGraphDefOptionsNumReturnOutputs\r\n        137   88 00376000 TF_ImportGraphDefOptionsRemapControlDependency\r\n        138   89 00376110 TF_ImportGraphDefOptionsSetPrefix\r\n        139   8A 00376130 TF_ImportGraphDefOptionsSetUniquifyNames\r\n        140   8B 00376140 TF_ImportGraphDefOptionsSetUniquifyPrefix\r\n        141   8C 00376150 TF_ImportGraphDefResultsMissingUnusedInputMappings\r\n        142   8D 00376170 TF_ImportGraphDefResultsReturnOperations\r\n        143   8E 00376190 TF_ImportGraphDefResultsReturnOutputs\r\n        144   8F 003761B0 TF_LoadLibrary\r\n        145   90 00376260 TF_LoadSessionFromSavedModel\r\n        146   91 00376890 TF_Message\r\n        147   92 003768C0 TF_NewApiDefMap\r\n        148   93 003769B0 TF_NewBuffer\r\n        149   94 003769E0 TF_NewBufferFromString\r\n        150   95 00376A40 TF_NewDeprecatedSession\r\n        151   96 00376AD0 TF_NewGraph\r\n        152   97 00376B00 TF_NewImportGraphDefOptions\r\n        153   98 00376B70 TF_NewOperation\r\n        154   99 00376BE0 TF_NewSession\r\n        155   9A 00376D30 TF_NewSessionOptions\r\n        156   9B 00376D60 TF_NewStatus\r\n        157   9C 00376D90 TF_NewTensor\r\n        158   9D 00377010 TF_NewWhile\r\n        159   9E 00377430 TF_NumDims\r\n        160   9F 00377440 TF_OperationDevice\r\n        161   A0 00377460 TF_OperationGetAttrBool\r\n        162   A1 00377500 TF_OperationGetAttrBoolList\r\n        163   A2 003775F0 TF_OperationGetAttrFloat\r\n        164   A3 003776A0 TF_OperationGetAttrFloatList\r\n        165   A4 00377790 TF_OperationGetAttrInt\r\n        166   A5 00377840 TF_OperationGetAttrIntList\r\n        167   A6 00377930 TF_OperationGetAttrMetadata\r\n        168   A7 00377F90 TF_OperationGetAttrShape\r\n        169   A8 003780F0 TF_OperationGetAttrShapeList\r\n        170   A9 003783B0 TF_OperationGetAttrString\r\n        171   AA 00378490 TF_OperationGetAttrStringList\r\n        172   AB 00378640 TF_OperationGetAttrTensor\r\n        173   AC 00378730 TF_OperationGetAttrTensorList\r\n        174   AD 00378910 TF_OperationGetAttrTensorShapeProto\r\n        175   AE 003789B0 TF_OperationGetAttrTensorShapeProtoList\r\n        176   AF 00378B60 TF_OperationGetAttrType\r\n        177   B0 00378C00 TF_OperationGetAttrTypeList\r\n        178   B1 00378CF0 TF_OperationGetAttrValueProto\r\n        179   B2 00378D60 TF_OperationGetControlInputs\r\n        180   B3 00378ED0 TF_OperationGetControlOutputs\r\n        181   B4 00379040 TF_OperationInput\r\n        182   B5 003790D0 TF_OperationInputListLength\r\n        183   B6 00379290 TF_OperationInputType\r\n        184   B7 003792A0 TF_OperationName\r\n        185   B8 003792C0 TF_OperationNumControlInputs\r\n        186   B9 003793F0 TF_OperationNumControlOutputs\r\n        187   BA 00379520 TF_OperationNumInputs\r\n        188   BB 00379530 TF_OperationNumOutputs\r\n        189   BC 00379540 TF_OperationOpType\r\n        190   BD 00379560 TF_OperationOutputConsumers\r\n        191   BE 00379700 TF_OperationOutputListLength\r\n        192   BF 003798C0 TF_OperationOutputNumConsumers\r\n        193   C0 003799F0 TF_OperationOutputType\r\n        194   C1 00379A00 TF_OperationToNodeDef\r\n        195   C2 00379A60 TF_PRun\r\n        196   C3 00379E00 TF_PRunSetup\r\n        197   C4 0037A2E0 TF_Reset\r\n        198   C5 0037A2F0 TF_Run\r\n        199   C6 00373820 TF_SessionListDevices\r\n        200   C7 0037A6A0 TF_SessionPRun\r\n        201   C8 0037AB50 TF_SessionPRunSetup\r\n        202   C9 0037B130 TF_SessionRun\r\n        203   CA 0037B5F0 TF_SetAttrBool\r\n        204   CB 0037B640 TF_SetAttrBoolList\r\n        205   CC 0037B7E0 TF_SetAttrFloat\r\n        206   CD 0037B820 TF_SetAttrFloatList\r\n        207   CE 0037B880 TF_SetAttrFuncName\r\n        208   CF 0037BA10 TF_SetAttrInt\r\n        209   D0 0037BA50 TF_SetAttrIntList\r\n        210   D1 0037BAB0 TF_SetAttrShape\r\n        211   D2 0037BBC0 TF_SetAttrShapeList\r\n        212   D3 0037BE20 TF_SetAttrString\r\n        213   D4 0037BE80 TF_SetAttrStringList\r\n        214   D5 0037C150 TF_SetAttrTensor\r\n        215   D6 0037C230 TF_SetAttrTensorList\r\n        216   D7 0037C590 TF_SetAttrTensorShapeProto\r\n        217   D8 0037C720 TF_SetAttrTensorShapeProtoList\r\n        218   D9 0037C9A0 TF_SetAttrType\r\n        219   DA 0037C9E0 TF_SetAttrTypeList\r\n        220   DB 0037CA40 TF_SetAttrValueProto\r\n        221   DC 0037CC70 TF_SetConfig\r\n        222   DD 0037CCD0 TF_SetDevice\r\n        223   DE 0037CD10 TF_SetStatus\r\n        224   DF 0037CDB0 TF_SetTarget\r\n        225   E0 0037CDE0 TF_StringDecode\r\n        226   E1 0037CF00 TF_StringEncode\r\n        227   E2 0037CFE0 TF_StringEncodedSize\r\n        228   E3 0037D000 TF_TensorByteSize\r\n        229   E4 0037D010 TF_TensorData\r\n        230   E5 0037D020 TF_TensorMaybeMove\r\n        231   E6 0037D080 TF_TensorType\r\n        232   E7 0037D090 TF_TryEvaluateConstant\r\n        233   E8 0037D1F0 TF_Version\r\n\r\n  Summary\r\n\r\n      2D4000 .data\r\n        1000 .gfids\r\n      184000 .pdata\r\n      B36000 .rdata\r\n       53000 .reloc\r\n     2949000 .text\r\n        1000 .tls\r\n       11000 _RDATA\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23536", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23536/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23536/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23536/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23536", "id": 377623837, "node_id": "MDU6SXNzdWUzNzc2MjM4Mzc=", "number": 23536, "title": "Build CMAKE C++/Cuda project with tensorflow in debug mode", "user": {"login": "pnik073", "id": 9438525, "node_id": "MDQ6VXNlcjk0Mzg1MjU=", "avatar_url": "https://avatars0.githubusercontent.com/u/9438525?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnik073", "html_url": "https://github.com/pnik073", "followers_url": "https://api.github.com/users/pnik073/followers", "following_url": "https://api.github.com/users/pnik073/following{/other_user}", "gists_url": "https://api.github.com/users/pnik073/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnik073/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnik073/subscriptions", "organizations_url": "https://api.github.com/users/pnik073/orgs", "repos_url": "https://api.github.com/users/pnik073/repos", "events_url": "https://api.github.com/users/pnik073/events{/privacy}", "received_events_url": "https://api.github.com/users/pnik073/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-11-05T23:14:36Z", "updated_at": "2018-12-12T18:49:26Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution: Ubuntu 18.04\r\n- TensorFlow installed from binary\r\n- TensorFlow version: 1.11.0\r\n- Python version: 3.6.5\r\n- Installed using pip\r\n- CUDA/cuDNN version: 9.0\r\n- GPU model and memory: Tesla K and V series\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\nI am trying to integrate tensorflow in my CMAKE C++/Cuda project. It _works_ when I link tensorflow when I do simply `cmake .`, which is for `RelWithDebInfo` build. However, it fails on `Release` or `Debug` mode. I speculate that the `libtensorflow_framework.so` that I have on my `dist-packages/tensorflow/` is not meant to be for that. Below, I share 2 different ways I try to link tensorflow in debug mode. Both give me the same error as found further below.\r\n\r\n**_Can you hint me what goes wrong?_**\r\n\r\n## Add Tensorflow N.1\r\n```\r\nSET(TF_ROOT \"/usr/local/lib/python3.6/dist-packages/tensorflow/\")\r\ninclude_directories(SYSTEM \"${TF_ROOT}/include/\")\r\nlink_directories(\"${TF_ROOT}\")\r\ntarget_link_libraries(\r\n\tCppLib.Tests\r\n  \tdebug tensorflow_framework\r\n)\r\n```\r\n\r\n## Add Tensorflow N.2\r\n```\r\nSET(TF_ROOT \"/usr/local/lib/python3.6/dist-packages/tensorflow/\")\r\ninclude_directories(SYSTEM \"${TF_ROOT}/include/\")\r\n#link_directories(\"${TF_ROOT}\")\r\n\r\nadd_executable(CppLib.Tests ${SRC} ${GMOCK_SRC} ${GTEST_SRC} ${GTEST_MAIN_SRC})\r\n\r\nadd_library(tensorflow_framework_ SHARED IMPORTED)\r\nset_target_properties(tensorflow_framework_ PROPERTIES\r\n                IMPORTED_LOCATION_DEBUG \"${TF_ROOT}/libtensorflow_framework.so\")\r\nset_target_properties(tensorflow_framework_ PROPERTIES\r\n                IMPORTED_LOCATION_RELEASE \"${TF_ROOT}/libtensorflow_framework.so\")\r\n\r\ntarget_link_libraries(\r\n\tCppLib.Tests\r\n        tensorflow_framework_\r\n)\r\n```\r\n\r\n\r\n\r\n## Error\r\n```\r\n#ERROR\r\nCMakeFiles/CppLib.Tests.dir/TestTensorflow.cpp.o: In function `std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >* tensorflow::internal::MakeCheckOpString<long, int>(long const&, int const&, char const*)':\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/include/tensorflow/core/platform/default/logging.h:187: undefined reference to `tensorflow::internal::CheckOpMessageBuilder::NewString[abi:cxx11]()'\r\ncollect2: error: ld returned 1 exit status\r\ntests/CppLib/CMakeFiles/CppLib.Tests.dir/build.make:799: recipe for target 'bin/Debug/CppLib.Tests' failed\r\nmake[2]: *** [bin/Debug/CppLib.Tests] Error 1\r\nCMakeFiles/Makefile2:1169: recipe for target 'tests/CppLib/CMakeFiles/CppLib.Tests.dir/all' failed\r\nmake[1]: *** [tests/CppLib/CMakeFiles/CppLib.Tests.dir/all] Error 2\r\nMakefile:140: recipe for target 'all' failed\r\nmake: *** [all] Error 2\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23525", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23525/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23525/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23525/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23525", "id": 377432978, "node_id": "MDU6SXNzdWUzNzc0MzI5Nzg=", "number": 23525, "title": "tf.contrib.estimator.InMemoryEvaluatorHook does not work with MirroredStrategy", "user": {"login": "KDMueller", "id": 38278891, "node_id": "MDQ6VXNlcjM4Mjc4ODkx", "avatar_url": "https://avatars3.githubusercontent.com/u/38278891?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KDMueller", "html_url": "https://github.com/KDMueller", "followers_url": "https://api.github.com/users/KDMueller/followers", "following_url": "https://api.github.com/users/KDMueller/following{/other_user}", "gists_url": "https://api.github.com/users/KDMueller/gists{/gist_id}", "starred_url": "https://api.github.com/users/KDMueller/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KDMueller/subscriptions", "organizations_url": "https://api.github.com/users/KDMueller/orgs", "repos_url": "https://api.github.com/users/KDMueller/repos", "events_url": "https://api.github.com/users/KDMueller/events{/privacy}", "received_events_url": "https://api.github.com/users/KDMueller/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-11-05T14:49:54Z", "updated_at": "2019-01-28T23:55:43Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux 3.10.0-862.9.1.el7.x86_64, CentOS 7.5\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): ('v1.9.0-rc2-2836-g05f8ea8', '1.10.0')\r\n- Python version: 2.7\r\n- Bazel version (if compiling from source): 0.16.1\r\n- GCC/Compiler version (if compiling from source): c++ (GCC) 4.8.5 20150623 (Red Hat 4.8.5-28)\r\n- CUDA/cuDNN version: 9.2.148\r\n- GPU model and memory: 8x GTX 1080 Ti, 11178MiB\r\n\r\n**Describe the current behavior**\r\nWhen using tf.contrib.estimator.InMemoryEvaluatorHook together with tf.contrib.distribute.MirroredStrategy on more than 1 GPU I get an error as soon as evaluation starts:\r\nRuntimeError: Graph is finalized and cannot be modified.\r\n\r\nThis does not occur when using OneDeviceStrategy. The documentation of InMemoryEvaluatorHook states: \"It doesn't support multi-node distributed mode.\" However, I am on a single node and multi-GPU\r\n\r\n**Describe the expected behavior**\r\nThe error should not occur. If multi-GPU support is not supported yet, will it be in the future? The documentation should also be updated then.\r\n\r\n**Code to reproduce the issue**\r\ndistribution = tf.contrib.distribute.MirroredStrategy(num_gpus=2)\r\nrun_config = tf.estimator.RunConfig(train_distribute=distribution)\r\nestimator = tf.estimator.Estimator(model.model_fn, config=run_config)\r\nevaluator = tf.contrib.estimator.InMemoryEvaluatorHook(estimator, eval_input_fn, steps=20, every_n_iter=20)\r\nestimator.train(train_input_fn, steps=100, hooks=[evaluator])\r\n\r\n**Other info / logs**\r\nTraceback (most recent call last):\r\n  File \"/home/xxx/.vscode/extensions/ms-python.python-2018.9.2/pythonFiles/experimental/ptvsd_launcher.py\", line 115, in <module>\r\n    vspd.run(filename, port_num, run_as, *sys.argv[1:])\r\n  File \"/home/xxx/.vscode/extensions/ms-python.python-2018.9.2/pythonFiles/experimental/ptvsd/ptvsd/debugger.py\", line 43, in run\r\n    run_main(address, filename, run_as, *args, **kwargs)\r\n  File \"/home/xxx/.vscode/extensions/ms-python.python-2018.9.2/pythonFiles/experimental/ptvsd/ptvsd/_local.py\", line 52, in run_main\r\n    runner(addr, name, kind == 'module', *extra, **kwargs)\r\n  File \"/home/xxx/.vscode/extensions/ms-python.python-2018.9.2/pythonFiles/experimental/ptvsd/ptvsd/runner.py\", line 32, in run\r\n    set_trace=False)\r\n  File \"/home/xxx/.vscode/extensions/ms-python.python-2018.9.2/pythonFiles/experimental/ptvsd/ptvsd/_vendored/pydevd/pydevd.py\", line 1107, in run\r\n    return self._exec(is_module, entry_point_fn, module_name, file, globals, locals)\r\n  File \"/home/xxx/.vscode/extensions/ms-python.python-2018.9.2/pythonFiles/experimental/ptvsd/ptvsd/_vendored/pydevd/pydevd.py\", line 1114, in _exec\r\n    pydev_imports.execfile(file, globals, locals)  # execute the script\r\n  File \"/home/xxx/test/mv_estimator/train.py\", line 91, in <module>\r\n    tf.app.run()\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 125, in run\r\n    _sys.exit(main(argv))\r\n  File \"/home/xxx/test/mv_estimator/train.py\", line 80, in main\r\n    estimator.train(train_input_fn, steps=100, hooks=[evaluator])\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/estimator/estimator.py\", line 354, in train\r\n    loss = self._train_model(input_fn, hooks, saving_listeners)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/estimator/estimator.py\", line 1177, in _train_model\r\n    return self._train_model_distributed(input_fn, hooks, saving_listeners)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/estimator/estimator.py\", line 1320, in _train_model_distributed\r\n    saving_listeners)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/estimator/estimator.py\", line 1400, in _train_with_estimator_spec\r\n    log_step_count_steps=self._config.log_step_count_steps) as mon_sess:\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/training/monitored_session.py\", line 504, in MonitoredTrainingSession\r\n    stop_grace_period_secs=stop_grace_period_secs)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/training/monitored_session.py\", line 920, in __init__\r\n    stop_grace_period_secs=stop_grace_period_secs)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/training/monitored_session.py\", line 643, in __init__\r\n    self._sess = _RecoverableSession(self._coordinated_creator)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/training/monitored_session.py\", line 1106, in __init__\r\n    _WrappedSession.__init__(self, self._create_session())\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/training/monitored_session.py\", line 1111, in _create_session\r\n    return self._sess_creator.create_session()\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/training/monitored_session.py\", line 806, in create_session\r\n    hook.after_create_session(self.tf_sess, self.coord)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/contrib/estimator/python/estimator/hooks.py\", line 178, in after_create_session\r\n    self._evaluate(session)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/contrib/estimator/python/estimator/hooks.py\", line 181, in _evaluate\r\n    var_name_to_value = train_session.run(self._var_name_to_train_var)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 887, in run\r\n    run_metadata_ptr)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 1095, in _run\r\n    self._graph, fetches, feed_dict_tensor, feed_handles=feed_handles)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 429, in __init__\r\n    self._fetch_mapper = _FetchMapper.for_fetch(fetches)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 249, in for_fetch\r\n    return _DictFetchMapper(fetch)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 387, in __init__\r\n    _FetchMapper.for_fetch(fetch) for fetch in fetches.values()\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 255, in for_fetch\r\n    return _ElementFetchMapper(fetches, contraction_fn)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/client/session.py\", line 284, in __init__\r\n    fetch, allow_tensor=True, allow_operation=True))\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 3473, in as_graph_element\r\n    return self._as_graph_element_locked(obj, allow_tensor, allow_operation)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 3496, in _as_graph_element_locked\r\n    temp_obj = _as_graph_element(obj)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 148, in _as_graph_element\r\n    return conv_fn()\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/values.py\", line 513, in _as_graph_element\r\n    return self._get_cross_tower()\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/contrib/distribute/python/values.py\", line 505, in _get_cross_tower\r\n    total = math_ops.add_n(all_components)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/ops/math_ops.py\", line 2145, in add_n\r\n    inputs = ops.convert_n_to_tensor_or_indexed_slices(inputs)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1355, in convert_n_to_tensor_or_indexed_slices\r\n    values=values, dtype=dtype, name=name, as_ref=False)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1326, in internal_convert_n_to_tensor_or_indexed_slices\r\n    value, dtype=dtype, name=n, as_ref=as_ref))\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1285, in internal_convert_to_tensor_or_indexed_slices\r\n    value, dtype=dtype, name=name, as_ref=as_ref)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1124, in internal_convert_to_tensor\r\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/ops/resource_variable_ops.py\", line 1258, in _dense_var_to_tensor\r\n    return var._dense_var_to_tensor(dtype=dtype, name=name, as_ref=as_ref)  # pylint: disable=protected-access\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/ops/resource_variable_ops.py\", line 1213, in _dense_var_to_tensor\r\n    return self.value()\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/ops/resource_variable_ops.py\", line 647, in value\r\n    return self._read_variable_op()\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/ops/resource_variable_ops.py\", line 730, in _read_variable_op\r\n    self._dtype)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/ops/gen_resource_variable_ops.py\", line 508, in read_variable_op\r\n    \"ReadVariableOp\", resource=resource, dtype=dtype, name=name)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/framework/op_def_library.py\", line 787, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/util/deprecation.py\", line 488, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 3232, in create_op\r\n    self._check_not_finalized()\r\n  File \"/home/xxx/.local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 2905, in _check_not_finalized\r\n    raise RuntimeError(\"Graph is finalized and cannot be modified.\")\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23482", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23482/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23482/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23482/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23482", "id": 377181028, "node_id": "MDU6SXNzdWUzNzcxODEwMjg=", "number": 23482, "title": "No such file or directory  #include \"npy_1_7_deprecated_api.h\"", "user": {"login": "ng0177", "id": 34538954, "node_id": "MDQ6VXNlcjM0NTM4OTU0", "avatar_url": "https://avatars2.githubusercontent.com/u/34538954?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ng0177", "html_url": "https://github.com/ng0177", "followers_url": "https://api.github.com/users/ng0177/followers", "following_url": "https://api.github.com/users/ng0177/following{/other_user}", "gists_url": "https://api.github.com/users/ng0177/gists{/gist_id}", "starred_url": "https://api.github.com/users/ng0177/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ng0177/subscriptions", "organizations_url": "https://api.github.com/users/ng0177/orgs", "repos_url": "https://api.github.com/users/ng0177/repos", "events_url": "https://api.github.com/users/ng0177/events{/privacy}", "received_events_url": "https://api.github.com/users/ng0177/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-11-04T18:35:39Z", "updated_at": "2018-12-13T17:17:23Z", "closed_at": null, "author_association": "NONE", "body": "#1243 similar problem re-appears on Centos 7.5 w/ kernel 3.10.0-862.14.4.el7.x86_64 w/ 32 GB of memory after\r\n\r\n`git clone https://github.com/tensorflow/tensorflow.git\r\ncd tensorflow\r\ngit pull\r\ngit checkout v1.11.0\r\n`\r\n\r\nleads to\r\n\r\n`ERROR: /home/user/tensorflow/tensorflow/python/BUILD:5553:1: C++ compilation of rule '//tensorflow/python:framework/fast_tensor_util.so' failed (Exit 1) gcc failed: error executing command /usr/bin/gcc -U_FORTIFY_SOURCE -fstack-protector -Wall -B/usr/bin -B/usr/bin -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 '-D_FORTIFY_SOURCE=1' -DNDEBUG ... (remaining 49 argument(s) skipped)\r\n\r\nUse --sandbox_debug to see verbose messages from the sandbox\r\nIn file included from bazel-out/host/genfiles/external/local_config_python/numpy_include/numpy/ndarrayobject.h:18:0,\r\n                 from bazel-out/host/genfiles/external/local_config_python/numpy_include/numpy/arrayobject.h:4,\r\n                 from bazel-out/host/genfiles/tensorflow/python/framework/fast_tensor_util.cpp:581:\r\nbazel-out/host/genfiles/external/local_config_python/numpy_include/numpy/ndarraytypes.h:1821:36: fatal error: npy_1_7_deprecated_api.h: No such file or directory\r\n #include \"npy_1_7_deprecated_api.h\"\r\n                                    ^\r\ncompilation terminated.\r\nINFO: Elapsed time: 71.255s, Critical Path: 14.15s, Remote (0.00% of the time): [queue: 0.00%, setup: 0.00%, process: 0.00%]\r\nINFO: 545 processes: 545 processwrapper-sandbox.\r\nFAILED: Build did NOT complete successfully\r\n`\r\n\r\n_Originally posted by @ng0177 in https://github.com/tensorflow/tensorflow/issues/1243#issuecomment-435663567_"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23472", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23472/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23472/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23472/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23472", "id": 377019429, "node_id": "MDU6SXNzdWUzNzcwMTk0Mjk=", "number": 23472, "title": "Fail to configure on Windows(CMake3.11.0-rc2, VS2015, python3.5.3, swigwin-3.0.12)", "user": {"login": "zhenngbolun", "id": 23093479, "node_id": "MDQ6VXNlcjIzMDkzNDc5", "avatar_url": "https://avatars0.githubusercontent.com/u/23093479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhenngbolun", "html_url": "https://github.com/zhenngbolun", "followers_url": "https://api.github.com/users/zhenngbolun/followers", "following_url": "https://api.github.com/users/zhenngbolun/following{/other_user}", "gists_url": "https://api.github.com/users/zhenngbolun/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhenngbolun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhenngbolun/subscriptions", "organizations_url": "https://api.github.com/users/zhenngbolun/orgs", "repos_url": "https://api.github.com/users/zhenngbolun/repos", "events_url": "https://api.github.com/users/zhenngbolun/events{/privacy}", "received_events_url": "https://api.github.com/users/zhenngbolun/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-11-03T03:38:33Z", "updated_at": "2019-01-09T02:47:30Z", "closed_at": null, "author_association": "NONE", "body": "CMake Warning at CMakeLists.txt:9 (message):\r\n  Your current cmake generator is set to use 32 bit toolset architecture.\r\n  This may cause \"compiler out of heap space\" errors when building.  Consider\r\n  using the flag -Thost=x64 when running cmake.\r\n\r\n\r\nSelecting Windows SDK version  to target Windows 10.0.17134.\r\nThe C compiler identification is MSVC 19.0.23026.0\r\nThe CXX compiler identification is MSVC 19.0.23026.0\r\nCheck for working C compiler: C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/bin/x86_amd64/cl.exe\r\nCheck for working C compiler: C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/bin/x86_amd64/cl.exe -- works\r\nDetecting C compiler ABI info\r\nDetecting C compiler ABI info - done\r\nCheck for working CXX compiler: C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/bin/x86_amd64/cl.exe\r\nCheck for working CXX compiler: C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/bin/x86_amd64/cl.exe -- works\r\nDetecting CXX compiler ABI info\r\nDetecting CXX compiler ABI info - done\r\nDetecting CXX compile features\r\nDetecting CXX compile features - done\r\nPerforming Test COMPILER_OPT_ARCH_NATIVE_SUPPORTED\r\nPerforming Test COMPILER_OPT_ARCH_NATIVE_SUPPORTED - Failed\r\nPerforming Test GCC_OPENMP_SUPPORT\r\nPerforming Test GCC_OPENMP_SUPPORT - Failed\r\nPerforming Test MSVC_OPENMP_SUPPORT\r\nPerforming Test MSVC_OPENMP_SUPPORT - Success\r\nFound PythonInterp: D:/Anaconda3/envs/tensorflow/python.exe (found version \"3.5.4\") \r\nFound PythonLibs: D:/Anaconda3/envs/tensorflow/libs/python35.lib (found version \"3.5.4\") \r\nFound SWIG: D:/zbl_back/code/swigwin-3.0.12/swig.exe (found version \"3.0.12\") \r\nCMake Error at tf_python.cmake:813 (string):\r\n  string sub-command REPLACE requires at least four arguments.\r\nCall Stack (most recent call first):\r\n  CMakeLists.txt:541 (include)\r\n\r\n\r\nCMake Error at tf_python.cmake:814 (string):\r\n  string sub-command REPLACE requires at least four arguments.\r\nCall Stack (most recent call first):\r\n  CMakeLists.txt:541 (include)\r\n\r\n\r\nCMake Error at tf_python.cmake:815 (string):\r\n  string sub-command REPLACE requires at least four arguments.\r\nCall Stack (most recent call first):\r\n  CMakeLists.txt:541 (include)\r\n\r\nif I use tensorflow_BUILD_PYTHON_BINDINGS=OFF, this error will not happen."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23469", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23469/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23469/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23469/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23469", "id": 377008066, "node_id": "MDU6SXNzdWUzNzcwMDgwNjY=", "number": 23469, "title": "ModelCheckpoint Callback Doesn't Log Validation Accuracy on ML Engine", "user": {"login": "bclayman", "id": 11317232, "node_id": "MDQ6VXNlcjExMzE3MjMy", "avatar_url": "https://avatars1.githubusercontent.com/u/11317232?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bclayman", "html_url": "https://github.com/bclayman", "followers_url": "https://api.github.com/users/bclayman/followers", "following_url": "https://api.github.com/users/bclayman/following{/other_user}", "gists_url": "https://api.github.com/users/bclayman/gists{/gist_id}", "starred_url": "https://api.github.com/users/bclayman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bclayman/subscriptions", "organizations_url": "https://api.github.com/users/bclayman/orgs", "repos_url": "https://api.github.com/users/bclayman/repos", "events_url": "https://api.github.com/users/bclayman/events{/privacy}", "received_events_url": "https://api.github.com/users/bclayman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-11-03T00:52:35Z", "updated_at": "2018-12-21T18:53:40Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): ML Engine Instance (Debian)\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): 1.10.0\r\n- Python version: 2.7.14\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n\r\n**Describe the current behavior**\r\n\r\nI've set up a CNN and have created callbacks for model checkpointing, TensorBoard visualization, and early stopping.  I have ~408K samples in my `tf.data.Dataset`, am using a batch size of 256, and train my model with 1,000 steps per epoch with 1000 epochs.  When I do this, everything trains correctly on ML Engine but I don't get logging like I normally do.\r\n\r\n**Describe the expected behavior**\r\n\r\nI should see logging on ML Engine that indicates validation accuracy for each epoch, like this:\r\n\r\nEpoch 2/2000\r\n1/200 [..............................] - ETA: 2:00 - loss: 5.7345 - acc: 0.1055\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\b\r\n\r\n2/200...\r\n\r\nWhen I set `steps_per_epoch` to be only 200, I *do* see validation accuracy logging as expected.  For what it's worth, the training still works and produces .h5 files.  But it's crucial that I be able to view logging as the model's training.\r\n\r\nI spoke with folks on the ML Engine team and it's not an issue on their end.  They suspect it's a bug with the `tf.keras.callbacks.ModelCheckpoint` callback or me misusing `steps_per_epoch` somehow.  Is there a certain value I shouldn't exceed with `steps_per_epoch`?  I wanted to do one full pass over the data, so that should be: # samples / (steps_per_epoch * batch_size), which would be ~1,593 steps.  Even 1,000 steps_per_epoch causes this issue though.\r\n\r\n**Code to reproduce the issue**\r\n\r\nUnfortunately, I can't share the data I'm using.  I'm using a CNN built with `tf.keras.layers` layers (called `model`) and my compile step, callbacks definitions, and fit step look like this:\r\n\r\n        model.compile(\r\n            loss='sparse_categorical_crossentropy',\r\n            optimizer='adam',\r\n            metrics=['accuracy'],\r\n        )\r\n        callbacks = [\r\n            ModelCheckpoint(\"model_{epoch:04d}_{val_acc:.4f}.h5\",\r\n                            monitor='val_acc',\r\n                            verbose=1,\r\n                            save_best_only=True,\r\n                            mode='max'),\r\n            TensorBoard(),\r\n            EarlyStopping(monitor='val_acc', patience=5, min_delta=0, mode='max')\r\n        ]\r\n\r\n        model.fit(dataset, steps_per_epoch=1000, epochs=1000, validation_data=val_dataset,\r\n                  validation_steps=3, callbacks=callbacks)\r\n\r\n**Other info / logs**\r\n\r\nHere's what I see in the ML Engine logs:\r\n\r\n`14:24 Epoch 1/4`\r\n\r\n`15:00 Starting evaluation`\r\n\r\nWith no logging in between \ud83d\udc4e \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23447", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23447/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23447/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23447/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23447", "id": 376649942, "node_id": "MDU6SXNzdWUzNzY2NDk5NDI=", "number": 23447, "title": "CONV2 occurrence mismatch in timeline", "user": {"login": "benzhang1986", "id": 15809856, "node_id": "MDQ6VXNlcjE1ODA5ODU2", "avatar_url": "https://avatars2.githubusercontent.com/u/15809856?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benzhang1986", "html_url": "https://github.com/benzhang1986", "followers_url": "https://api.github.com/users/benzhang1986/followers", "following_url": "https://api.github.com/users/benzhang1986/following{/other_user}", "gists_url": "https://api.github.com/users/benzhang1986/gists{/gist_id}", "starred_url": "https://api.github.com/users/benzhang1986/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benzhang1986/subscriptions", "organizations_url": "https://api.github.com/users/benzhang1986/orgs", "repos_url": "https://api.github.com/users/benzhang1986/repos", "events_url": "https://api.github.com/users/benzhang1986/events{/privacy}", "received_events_url": "https://api.github.com/users/benzhang1986/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yongtang", "id": 6932348, "node_id": "MDQ6VXNlcjY5MzIzNDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6932348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yongtang", "html_url": "https://github.com/yongtang", "followers_url": "https://api.github.com/users/yongtang/followers", "following_url": "https://api.github.com/users/yongtang/following{/other_user}", "gists_url": "https://api.github.com/users/yongtang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yongtang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yongtang/subscriptions", "organizations_url": "https://api.github.com/users/yongtang/orgs", "repos_url": "https://api.github.com/users/yongtang/repos", "events_url": "https://api.github.com/users/yongtang/events{/privacy}", "received_events_url": "https://api.github.com/users/yongtang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yongtang", "id": 6932348, "node_id": "MDQ6VXNlcjY5MzIzNDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6932348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yongtang", "html_url": "https://github.com/yongtang", "followers_url": "https://api.github.com/users/yongtang/followers", "following_url": "https://api.github.com/users/yongtang/following{/other_user}", "gists_url": "https://api.github.com/users/yongtang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yongtang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yongtang/subscriptions", "organizations_url": "https://api.github.com/users/yongtang/orgs", "repos_url": "https://api.github.com/users/yongtang/repos", "events_url": "https://api.github.com/users/yongtang/events{/privacy}", "received_events_url": "https://api.github.com/users/yongtang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-11-02T02:54:46Z", "updated_at": "2018-12-09T18:41:12Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Linux Ubuntu 16.04\r\n- TensorFlow installed binary\r\n- TensorFlow 1.10 and 1.12 both\r\n- Python 2.7:\r\n- CUDA 9.0\r\n- cuDNN 7.3\r\n- GPU model and memory: NVIDIA V100 (16GB) x 8\r\n\r\n**Describe the current behavior**\r\ndump timeline of benchmark with following command:\r\npython tf_cnn_benchmarks.py --local_parameter_device=gpu --model=resnet50 --data_dir=/home/nvme/dataset/imagenet/tf_records/train/ --variable_update=replicated --all_reduce_spec=nccl --use_fp16=True --batch_size=128 --num_gpus=1 --trace_file=/home/timeline/benchmark_resnet50_imagenet_gpu1.json\r\n\r\nthen the number of CONV2D op send to GPU is 53\r\n![image](https://user-images.githubusercontent.com/15809856/47891157-fc087300-de8c-11e8-81d6-40446b20ec3d.png)\r\n\r\nbut GPU run so many CONV2D:\r\n![image](https://user-images.githubusercontent.com/15809856/47891199-31ad5c00-de8d-11e8-8c89-3823de6d5ecc.png)\r\n\r\nI think they should be 53 both.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23436", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23436/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23436/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23436/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23436", "id": 376575856, "node_id": "MDU6SXNzdWUzNzY1NzU4NTY=", "number": 23436, "title": "Tensorflow crashes on source building!!!", "user": {"login": "PanderBoy18", "id": 26401298, "node_id": "MDQ6VXNlcjI2NDAxMjk4", "avatar_url": "https://avatars0.githubusercontent.com/u/26401298?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PanderBoy18", "html_url": "https://github.com/PanderBoy18", "followers_url": "https://api.github.com/users/PanderBoy18/followers", "following_url": "https://api.github.com/users/PanderBoy18/following{/other_user}", "gists_url": "https://api.github.com/users/PanderBoy18/gists{/gist_id}", "starred_url": "https://api.github.com/users/PanderBoy18/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PanderBoy18/subscriptions", "organizations_url": "https://api.github.com/users/PanderBoy18/orgs", "repos_url": "https://api.github.com/users/PanderBoy18/repos", "events_url": "https://api.github.com/users/PanderBoy18/events{/privacy}", "received_events_url": "https://api.github.com/users/PanderBoy18/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2018-11-01T21:21:25Z", "updated_at": "2020-01-09T10:45:10Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Linux Ubuntu 18.04.1):\r\n- No mobile problem\r\n- https://github.com/tensorflow/tensorflow.git\r\n- TensorFlow version: 1.11.0\r\n- Python version: 2.7.15rc1\r\n- Haven't done any pip installation\r\n- Bazel version: Build label: 0.19.0\r\n- GCC/Compiler version (if compiling from source): 7.3.0\r\n- CUDA/cuDNN version:\r\n- GPU model and memory: Not relevant\r\n\r\n\r\n\r\n**I am trying to install Tensorflow, but I keep getting the same problem when I use this command to build it:\r\n`bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package //tensorflow:libtensorflow_framework.so`**\r\n\r\n**Command sequence:**\r\n````\r\ngit clone https://github.com/tensorflow/tensorflow.git\r\ncd tensorflow\r\n./configure\r\nbazel build --config=opt //tensorflow/tools/pip_package:build_pip_package //tensorflow:libtensorflow_framework.so\r\n````\r\n\r\n**The output I get:**\r\nERROR: /root/tensorflow/tensorflow/python/BUILD:371:1: C++ compilation of rule '//tensorflow/python:ndarray_tensor' failed (Exit 1) gcc failed: error executing command /usr/bin/gcc -U_FORTIFY_SOURCE -fstack-protector -Wall -B/usr/bin -B/usr/bin -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 '-D_FORTIFY_SOURCE=1' -DNDEBUG ... (remaining 338 argument(s) skipped)\r\n\r\nUse --sandbox_debug to see verbose messages from the sandbox\r\nIn file included from ./tensorflow/python/lib/core/ndarray_tensor.h:20:0,\r\n                 from tensorflow/python/lib/core/ndarray_tensor.cc:16:\r\n./tensorflow/python/lib/core/numpy.h:35:10: fatal error: Python.h: No such file or directory\r\n #include <Python.h>\r\n          ^~~~~~~~~~\r\ncompilation terminated.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23393", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23393/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23393/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23393/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23393", "id": 375770530, "node_id": "MDU6SXNzdWUzNzU3NzA1MzA=", "number": 23393, "title": "request implementation of conv1DLSTM, conv3DLSTM in keras", "user": {"login": "zh794390558", "id": 3038472, "node_id": "MDQ6VXNlcjMwMzg0NzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/3038472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zh794390558", "html_url": "https://github.com/zh794390558", "followers_url": "https://api.github.com/users/zh794390558/followers", "following_url": "https://api.github.com/users/zh794390558/following{/other_user}", "gists_url": "https://api.github.com/users/zh794390558/gists{/gist_id}", "starred_url": "https://api.github.com/users/zh794390558/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zh794390558/subscriptions", "organizations_url": "https://api.github.com/users/zh794390558/orgs", "repos_url": "https://api.github.com/users/zh794390558/repos", "events_url": "https://api.github.com/users/zh794390558/events{/privacy}", "received_events_url": "https://api.github.com/users/zh794390558/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-10-31T02:22:08Z", "updated_at": "2018-12-15T18:42:10Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "\r\n**System information**\r\n- 1.12\r\n- No\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nthere is no conv1DLSTM, conv3DLSTM in keras.\r\n\r\n**Will this change the current api? How?**\r\nno\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23374", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23374/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23374/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23374/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23374", "id": 375438098, "node_id": "MDU6SXNzdWUzNzU0MzgwOTg=", "number": 23374, "title": "build libtensorflow_cc.so with debug symbols using bazel", "user": {"login": "eslamahmedkhair", "id": 29451942, "node_id": "MDQ6VXNlcjI5NDUxOTQy", "avatar_url": "https://avatars0.githubusercontent.com/u/29451942?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eslamahmedkhair", "html_url": "https://github.com/eslamahmedkhair", "followers_url": "https://api.github.com/users/eslamahmedkhair/followers", "following_url": "https://api.github.com/users/eslamahmedkhair/following{/other_user}", "gists_url": "https://api.github.com/users/eslamahmedkhair/gists{/gist_id}", "starred_url": "https://api.github.com/users/eslamahmedkhair/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eslamahmedkhair/subscriptions", "organizations_url": "https://api.github.com/users/eslamahmedkhair/orgs", "repos_url": "https://api.github.com/users/eslamahmedkhair/repos", "events_url": "https://api.github.com/users/eslamahmedkhair/events{/privacy}", "received_events_url": "https://api.github.com/users/eslamahmedkhair/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-10-30T11:19:33Z", "updated_at": "2020-02-21T18:42:50Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution: Linux Ubuntu 16.04\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 1.8.0\r\n- Python version: Python 2.7.12\r\n- Installed using virtualenv? pip? conda?: No\r\n- Bazel version (if compiling from source): 0.16.1\r\n- GCC/Compiler version (if compiling from source): gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.10)\r\n- CUDA/cuDNN version: 9.2/7.2.1\r\n- GPU model and memory: Tesla K40c 12 GB VRAM\r\n\r\n**Describe the problem**\r\nI need to debug `libtensorflow_cc.so` to trace some other issue. I learned from `bazel` that I need to pass the following flag `-c dbg` -probably this one too `--strip=never`- while building the library. I noticed a significant increase in the binary size which makes sense! yet I'm still unable to step into the library code. \r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n`bazel build --config=opt --config=cuda --config=monolithic tensorflow:libtensorflow_cc.so`\r\n\r\n**Any other info / logs**\r\n- I passed `--config=monolithic` to resolve OpenCV's `imread` issue always returning a 0x0 mat.\r\n- Furthermore, the binary built with  `-c dbg` and `--strip=never`, failed to load my model that was loaded correctly before passing those flags. but we can discuss it in a different issue if we resolve this one first.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23348", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23348/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23348/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23348/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23348", "id": 374968237, "node_id": "MDU6SXNzdWUzNzQ5NjgyMzc=", "number": 23348, "title": "CPU memory slowly filling, during inference, cannot seem to find the reason", "user": {"login": "StevenPuttemans", "id": 4621239, "node_id": "MDQ6VXNlcjQ2MjEyMzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/4621239?v=4", "gravatar_id": "", "url": "https://api.github.com/users/StevenPuttemans", "html_url": "https://github.com/StevenPuttemans", "followers_url": "https://api.github.com/users/StevenPuttemans/followers", "following_url": "https://api.github.com/users/StevenPuttemans/following{/other_user}", "gists_url": "https://api.github.com/users/StevenPuttemans/gists{/gist_id}", "starred_url": "https://api.github.com/users/StevenPuttemans/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/StevenPuttemans/subscriptions", "organizations_url": "https://api.github.com/users/StevenPuttemans/orgs", "repos_url": "https://api.github.com/users/StevenPuttemans/repos", "events_url": "https://api.github.com/users/StevenPuttemans/events{/privacy}", "received_events_url": "https://api.github.com/users/StevenPuttemans/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "azaks2", "id": 40365382, "node_id": "MDQ6VXNlcjQwMzY1Mzgy", "avatar_url": "https://avatars2.githubusercontent.com/u/40365382?v=4", "gravatar_id": "", "url": "https://api.github.com/users/azaks2", "html_url": "https://github.com/azaks2", "followers_url": "https://api.github.com/users/azaks2/followers", "following_url": "https://api.github.com/users/azaks2/following{/other_user}", "gists_url": "https://api.github.com/users/azaks2/gists{/gist_id}", "starred_url": "https://api.github.com/users/azaks2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/azaks2/subscriptions", "organizations_url": "https://api.github.com/users/azaks2/orgs", "repos_url": "https://api.github.com/users/azaks2/repos", "events_url": "https://api.github.com/users/azaks2/events{/privacy}", "received_events_url": "https://api.github.com/users/azaks2/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "azaks2", "id": 40365382, "node_id": "MDQ6VXNlcjQwMzY1Mzgy", "avatar_url": "https://avatars2.githubusercontent.com/u/40365382?v=4", "gravatar_id": "", "url": "https://api.github.com/users/azaks2", "html_url": "https://github.com/azaks2", "followers_url": "https://api.github.com/users/azaks2/followers", "following_url": "https://api.github.com/users/azaks2/following{/other_user}", "gists_url": "https://api.github.com/users/azaks2/gists{/gist_id}", "starred_url": "https://api.github.com/users/azaks2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/azaks2/subscriptions", "organizations_url": "https://api.github.com/users/azaks2/orgs", "repos_url": "https://api.github.com/users/azaks2/repos", "events_url": "https://api.github.com/users/azaks2/events{/privacy}", "received_events_url": "https://api.github.com/users/azaks2/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-10-29T11:19:04Z", "updated_at": "2018-12-12T18:49:07Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- We have made a specific adaptation of a inference script, that reads in tensorflow records, pushes the data through the network and then stores the result.\r\n- Linux Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): default Ubuntu repositories\r\n- TensorFlow version (use command below): 1.3\r\n- Python version: 2.7\r\n- CUDA/cuDNN version: Cuda 8.0 CuDNN 6.0\r\n- GPU model and memory: NVIDIA P5000 - 16GB\r\n\r\n**Describe the current behavior**\r\n\r\nThe script runs slow but fine. However, CPU memory of the system is slowly clogging up and system will fail.\r\n\r\n**Describe the expected behavior**\r\n\r\nWe expected the code to run through all data parts without issues.\r\n\r\n**Code to reproduce the issue**\r\n\r\n```\r\n\"\"\"Applies model to all examples in a train record.\r\n\r\n\"\"\"\r\n\r\nimport os\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\nimport constants\r\nimport model\r\nimport util\r\n\r\n_RESOLUTIONS = ['5cm', '9cm', '19cm']\r\n_INPUT_FEATURE = 'input_sdf'\r\n_TARGET_FEATURE = 'target_df'\r\n_TARGET_SEM_FEATURE = 'target_sem'\r\n_TRAIN_FEATURE = 'samples'\r\n_TRAIN_SEM_FEATURE = 'samples_sem'\r\n\r\nflags = tf.flags\r\nFLAGS = flags.FLAGS\r\nflags.DEFINE_string('base_dir', '',\r\n                    'Root directory. Expects a directory containing the model.')\r\nflags.DEFINE_string('model_checkpoint', '',\r\n                    'Model checkpoint to use (empty for latest).')\r\nflags.DEFINE_string('data_filepattern', '/tmp/data/train_*.tfrecords',\r\n                    'Training data file pattern.')\r\nflags.DEFINE_string('output_folder', FLAGS.base_dir + '/data/vox5-9-19-dim3D_edited/',\r\n                    'Folder in which to put the new tfrecords.')\r\n\r\n# Parameters for applying model.\r\nflags.DEFINE_integer('height_input', 64, 'Input block y dim.')\r\nflags.DEFINE_integer('hierarchy_level', 1, 'Hierachy level (1: finest level).')\r\nflags.DEFINE_bool('is_base_level', True, 'If base level of hierarchy.')\r\nflags.DEFINE_integer('num_quant_levels', 256, 'Number of quantization bins.')\r\nflags.DEFINE_integer('num_total_hierarchy_levels', 1,\r\n                     'Number of total hierarchy levels.')\r\nflags.DEFINE_integer('stored_dim_block', 64,\r\n                     'Stored data block x/z dim, high-resolution.')\r\nflags.DEFINE_integer('stored_height_block', 64,\r\n                     'Stored data block y dim, high-resolution.')\r\nflags.DEFINE_integer('p_norm', 1, 'P-norm loss (0 to disable).')\r\nflags.DEFINE_bool('predict_semantics', True,\r\n                  'Also predict semantic labels per-voxel.')\r\nflags.DEFINE_float('temperature', 100.0, 'Softmax temperature for sampling.')\r\n\r\n\r\ndef read_record(filename):\r\n    for serialized_example in tf.python_io.tf_record_iterator(filename):\r\n\tsamples_lo = np.zeros([FLAGS.stored_dim_block // 2, FLAGS.stored_height_block // 2,\r\n                               FLAGS.stored_dim_block // 2, 2])\r\n        samples_sem_lo = np.zeros([FLAGS.stored_dim_block // 2, FLAGS.stored_height_block // 2,\r\n                                   FLAGS.stored_dim_block // 2], dtype=np.uint8)\r\n        if not FLAGS.is_base_level:\r\n            key_samples = 'samples_' + _RESOLUTIONS[FLAGS.hierarchy_level]\r\n            key_samples_sem = 'sem_samples_' + _RESOLUTIONS[FLAGS.hierarchy_level]\r\n            spec = {\r\n                'data':\r\n                    tf.FixedLenFeature((), tf.string),\r\n                key_samples:\r\n                    tf.FixedLenFeature((FLAGS.stored_dim_block // 2, FLAGS.stored_height_block // 2,\r\n                                        FLAGS.stored_dim_block // 2, 1), tf.float32),\r\n                key_samples_sem:\r\n                    tf.FixedLenFeature((), tf.string)\r\n            }\r\n            example = tf.parse_single_example(serialized_example, spec)\r\n            samples_lo = example[key_samples]\r\n            samples_sem_lo = example[key_samples_sem]\r\n            samples_sem_lo = tf.decode_raw(samples_sem_lo, tf.uint8)\r\n            samples_sem_lo = tf.reshape(samples_sem_lo, [\r\n                FLAGS.stored_dim_block // 2, FLAGS.stored_height_block // 2, FLAGS.stored_dim_block // 2])\r\n\r\n            serialized_example = example['data']\r\n\t\r\n        # Parse sequence example.\r\n        key_input = _RESOLUTIONS[FLAGS.hierarchy_level - 1] + '_' + _INPUT_FEATURE\r\n        key_target = _RESOLUTIONS[FLAGS.hierarchy_level - 1] + '_' + _TARGET_FEATURE\r\n        key_target_sem = _RESOLUTIONS[FLAGS.hierarchy_level - 1] + '_' + _TARGET_SEM_FEATURE\r\n\t\r\n        sequence_features_spec = {\r\n            key_input:\r\n                tf.FixedLenFeature(\r\n                    (FLAGS.stored_dim_block, FLAGS.stored_height_block, FLAGS.stored_dim_block, 1),\r\n                    tf.float32),\r\n            key_target:\r\n                tf.FixedLenFeature(\r\n                    (FLAGS.stored_dim_block, FLAGS.stored_height_block, FLAGS.stored_dim_block, 1),\r\n                    tf.float32),\r\n            key_target_sem:\r\n                tf.FixedLenFeature((), tf.string)\r\n        }\r\n\tprint \"did it\"\r\n        example = tf.parse_single_example(serialized_example, sequence_features_spec)\r\n\tprint \"did it\"\r\n        input_sdf_tensor = example[key_input]\r\n\t\r\n        input_sdf = input_sdf_tensor.eval()\r\n        input_sdf = np.squeeze(input_sdf, axis = 3)\r\n        input_sdf = util.preprocess_sdf(input_sdf, constants.TRUNCATION)\r\n\r\n        yield input_sdf, samples_lo, samples_sem_lo, serialized_example\r\n\r\n\r\ndef predict_from_model(logit_groups_geometry, logit_groups_semantics,\r\n                       temperature):\r\n    \"\"\"Reconstruct predicted geometry and semantics from model output.\"\"\"\r\n    predictions_geometry_list = []\r\n    for logit_group in logit_groups_geometry:\r\n        if FLAGS.p_norm > 0:\r\n            predictions_geometry_list.append(logit_group[:, :, :, :, 0])\r\n        else:\r\n            logit_group_shape = logit_group.shape_as_list()\r\n            logit_group = tf.reshape(logit_group, [-1, logit_group_shape[-1]])\r\n            samples = tf.multinomial(temperature * logit_group, 1)\r\n            predictions_geometry_list.append(\r\n                tf.reshape(samples, logit_group_shape[:-1]))\r\n    predictions_semantics_list = []\r\n    if FLAGS.predict_semantics:\r\n        for logit_group in logit_groups_semantics:\r\n            predictions_semantics_list.append(tf.argmax(logit_group, 4))\r\n    else:\r\n        predictions_semantics_list = [\r\n                                         tf.zeros(shape=predictions_geometry_list[0].shape, dtype=tf.uint8)\r\n                                     ] * len(predictions_geometry_list)\r\n    return predictions_geometry_list, predictions_semantics_list\r\n\r\n\r\ndef create_dfs_from_output(output_df):\r\n    \"\"\"Rescales model output to distance fields (in voxel units).\"\"\"\r\n    if FLAGS.p_norm > 0:\r\n        output_df = constants.TRUNCATION * (output_df[0, :, :, :, 0] + 1)\r\n    else:\r\n        output_df = (output_df[0, :, :, :, 0] + 1) * 0.5 * (\r\n            FLAGS.num_quant_levels - 1)\r\n        output_df = util.dequantize(output_df, FLAGS.num_quant_levels,\r\n                                    constants.TRUNCATION)\r\n    return output_df\r\n\r\n\r\ndef create_model(scene_dim_x, scene_dim_y, scene_dim_z):\r\n    \"\"\"Init model graph for scene.\"\"\"\r\n    input_placeholder = tf.placeholder(\r\n        tf.float32,\r\n        shape=[1, scene_dim_z, scene_dim_y, scene_dim_x, 2],\r\n        name='pl_scan')\r\n    target_placeholder = tf.placeholder(\r\n        tf.float32,\r\n        shape=[1, scene_dim_z, scene_dim_y, scene_dim_x, 2],\r\n        name='pl_target')\r\n    target_lo_placeholder = tf.placeholder(\r\n        tf.float32,\r\n        shape=[1, scene_dim_z // 2, scene_dim_y // 2, scene_dim_x // 2, 2],\r\n        name='pl_target_lo')\r\n    target_sem_placeholder = tf.placeholder(\r\n        tf.uint8,\r\n        shape=[1, scene_dim_z, scene_dim_y, scene_dim_x],\r\n        name='pl_target_sem')\r\n    target_sem_lo_placeholder = tf.placeholder(\r\n        tf.uint8,\r\n        shape=[1, scene_dim_z // 2, scene_dim_y // 2, scene_dim_x // 2],\r\n        name='pl_target_sem_lo')\r\n    # No previous level input if at base level.\r\n    if FLAGS.is_base_level:\r\n        target_scan_low_resolution = None\r\n        target_semantics_low_resolution = None\r\n    else:\r\n        target_scan_low_resolution = target_lo_placeholder\r\n        target_semantics_low_resolution = target_sem_lo_placeholder\r\n    logits = model.model(\r\n        input_scan=input_placeholder,\r\n        target_scan_low_resolution=target_scan_low_resolution,\r\n        target_scan=target_placeholder,\r\n        target_semantics_low_resolution=target_semantics_low_resolution,\r\n        target_semantics=target_sem_placeholder,\r\n        num_quant_levels=FLAGS.num_quant_levels,\r\n        predict_semantics=FLAGS.predict_semantics,\r\n        use_p_norm=FLAGS.p_norm > 0)\r\n    return (input_placeholder, target_placeholder, target_lo_placeholder,\r\n            target_sem_placeholder, target_sem_lo_placeholder, logits)\r\n\r\n\r\ndef main(_):\r\n    model_path = FLAGS.base_dir\r\n    output_folder = FLAGS.output_folder\r\n    if not os.path.exists(output_folder):\r\n        os.makedirs(output_folder)\r\n\r\n    if FLAGS.model_checkpoint:\r\n        checkpoint_path = os.path.join(model_path, FLAGS.model_checkpoint)\r\n        print \"Used model: \" + str(checkpoint_path)\r\n    else:\r\n        checkpoint_path = tf.train.latest_checkpoint(model_path)\r\n        print \"Used model: \" + str(checkpoint_path)\t\r\n\r\n    # Loop over all tfrecords in training data\r\n    data_filepattern = FLAGS.data_filepattern\r\n    if not isinstance(data_filepattern, list):\r\n        data_filepattern = [data_filepattern]\r\n    # Get filenames matching filespec.\r\n    tf.logging.info('data_filepattern: %s', data_filepattern)\r\n    filenames = []\r\n    for p in data_filepattern:\r\n        filenames.extend(tf.gfile.Glob(p))\r\n    tf.logging.info('filenames: %s', filenames)\r\n\r\n    for filename in filenames:\r\n        tf.reset_default_graph()\r\n\r\n        # Init model.\r\n        (input_placeholder, target_placeholder, target_lo_placeholder,\r\n         target_sem_placeholder, target_sem_lo_placeholder, logits) = create_model(\r\n            FLAGS.stored_dim_block, FLAGS.stored_height_block, FLAGS.stored_dim_block)\r\n        logit_groups_geometry = logits['logits_geometry']\r\n        logit_groups_semantics = logits['logits_semantics']\r\n        feature_groups = logits['features']\r\n\r\n        predictions_geometry_list, predictions_semantics_list = predict_from_model(\r\n            logit_groups_geometry, logit_groups_semantics, FLAGS.temperature)\r\n\r\n\r\n        config = tf.ConfigProto(device_count={'GPU': 0})\r\n        init_op = tf.group(tf.global_variables_initializer(),\r\n                           tf.local_variables_initializer())\r\n\r\n        with tf.Session(config=config) as session:\r\n            session.run(init_op)\r\n\t    \r\n            assign_fn = tf.contrib.framework.assign_from_checkpoint_fn(\r\n                checkpoint_path, tf.contrib.framework.get_variables_to_restore())\r\n            assign_fn(session)\r\n   \r\n            filename_out = os.path.join(output_folder, os.path.basename(filename))\r\n            print(filename_out)\r\n            writer = tf.python_io.TFRecordWriter(filename_out)\r\n\r\n            for input_sdf, samples_lo, samples_sem_lo, serialized_example in read_record(filename):             \r\n\r\n\t\t# Make batch size 1 to input to model.\r\n                input_sdf = input_sdf[np.newaxis, :, :, :, :]\r\n                samples_lo = samples_lo[np.newaxis, :, :, :, :]\r\n                samples_sem_lo = samples_sem_lo[np.newaxis, :, :, :]\r\n                output_df = np.ones(shape=input_sdf.shape)\r\n                output_df[:, :, :, :, 0] *= constants.TRUNCATION  # Fill with truncation, known values.\r\n                output_sem = np.zeros(\r\n                    shape=[1, FLAGS.stored_dim_block, FLAGS.stored_height_block, FLAGS.stored_dim_block],\r\n                    dtype=np.uint8)\r\n\r\n                # First get features.\r\n                feed_dict = {\r\n                    input_placeholder: input_sdf,\r\n                    target_lo_placeholder: samples_lo,\r\n                    target_placeholder: output_df,\r\n                    target_sem_lo_placeholder: samples_sem_lo,\r\n                    target_sem_placeholder: output_sem\r\n                }\r\n\t\t\r\n                # Cache these features.\r\n                feature_groups_ = session.run(feature_groups, feed_dict)\r\n\r\n                for n in range(8):\r\n                    tf.logging.info('Predicting group [%d/%d]', n + 1, 8)\r\n                    # Predict\r\n                    feed_dict[feature_groups[n]] = feature_groups_[n]\r\n                    predictions = session.run(\r\n                        {\r\n                            'prediction_geometry': predictions_geometry_list[n],\r\n                            'prediction_semantics': predictions_semantics_list[n]\r\n                        },\r\n                        feed_dict=feed_dict)\r\n                    prediction_geometry = predictions['prediction_geometry']\r\n                    prediction_semantics = predictions['prediction_semantics']\r\n                    # Put into [-1,1] for next group.\r\n                    if FLAGS.p_norm == 0:\r\n                        prediction_geometry = prediction_geometry.astype(np.float32) / (\r\n                            (FLAGS.num_quant_levels - 1) / 2.0) - 1.0\r\n\r\n                    util.assign_voxel_group(output_df, prediction_geometry,\r\n                                            n + 1)\r\n                    if FLAGS.predict_semantics:\r\n                        util.assign_voxel_group(output_sem,\r\n                                                prediction_semantics, n + 1)\r\n\r\n                # Final outputs.\r\n                output_sem = output_sem[0]\r\n                output_df = create_dfs_from_output(output_df)  # Fill with truncation, known values.\r\n\r\n                # Export predictions\r\n                key_samples = 'samples_' + _RESOLUTIONS[FLAGS.hierarchy_level - 1]\r\n                key_samples_sem = 'sem_samples_' + _RESOLUTIONS[FLAGS.hierarchy_level - 1]\r\n                out_feature = {\r\n                    'data': util.bytes_feature(serialized_example),\r\n                    key_samples: util.float_feature(output_df.flatten().tolist()),\r\n                    key_samples_sem: util.bytes_feature(output_sem.flatten().tobytes())\r\n                }\r\n                example = tf.train.Example(features=tf.train.Features(feature=out_feature))\r\n                writer.write(example.SerializeToString())\r\n        session.close()\r\n\r\nif __name__ == '__main__':\r\n    tf.app.run(main)\r\n```\r\n\r\nThere are no errors reported. Any help welcome."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23342", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23342/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23342/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23342/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23342", "id": 374904455, "node_id": "MDU6SXNzdWUzNzQ5MDQ0NTU=", "number": 23342, "title": "Issue in building Tensorflow library on Windows machine", "user": {"login": "HackersSpirit", "id": 8684346, "node_id": "MDQ6VXNlcjg2ODQzNDY=", "avatar_url": "https://avatars0.githubusercontent.com/u/8684346?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HackersSpirit", "html_url": "https://github.com/HackersSpirit", "followers_url": "https://api.github.com/users/HackersSpirit/followers", "following_url": "https://api.github.com/users/HackersSpirit/following{/other_user}", "gists_url": "https://api.github.com/users/HackersSpirit/gists{/gist_id}", "starred_url": "https://api.github.com/users/HackersSpirit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HackersSpirit/subscriptions", "organizations_url": "https://api.github.com/users/HackersSpirit/orgs", "repos_url": "https://api.github.com/users/HackersSpirit/repos", "events_url": "https://api.github.com/users/HackersSpirit/events{/privacy}", "received_events_url": "https://api.github.com/users/HackersSpirit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "meteorcloudy", "id": 4171702, "node_id": "MDQ6VXNlcjQxNzE3MDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/4171702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meteorcloudy", "html_url": "https://github.com/meteorcloudy", "followers_url": "https://api.github.com/users/meteorcloudy/followers", "following_url": "https://api.github.com/users/meteorcloudy/following{/other_user}", "gists_url": "https://api.github.com/users/meteorcloudy/gists{/gist_id}", "starred_url": "https://api.github.com/users/meteorcloudy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meteorcloudy/subscriptions", "organizations_url": "https://api.github.com/users/meteorcloudy/orgs", "repos_url": "https://api.github.com/users/meteorcloudy/repos", "events_url": "https://api.github.com/users/meteorcloudy/events{/privacy}", "received_events_url": "https://api.github.com/users/meteorcloudy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "meteorcloudy", "id": 4171702, "node_id": "MDQ6VXNlcjQxNzE3MDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/4171702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meteorcloudy", "html_url": "https://github.com/meteorcloudy", "followers_url": "https://api.github.com/users/meteorcloudy/followers", "following_url": "https://api.github.com/users/meteorcloudy/following{/other_user}", "gists_url": "https://api.github.com/users/meteorcloudy/gists{/gist_id}", "starred_url": "https://api.github.com/users/meteorcloudy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meteorcloudy/subscriptions", "organizations_url": "https://api.github.com/users/meteorcloudy/orgs", "repos_url": "https://api.github.com/users/meteorcloudy/repos", "events_url": "https://api.github.com/users/meteorcloudy/events{/privacy}", "received_events_url": "https://api.github.com/users/meteorcloudy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 23, "created_at": "2018-10-29T08:24:30Z", "updated_at": "2019-03-19T14:58:38Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10 (64-bit)\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version:1.11\r\n- Python version:3.6\r\n- Installed using virtualenv? pip? conda?: Git\r\n- Bazel version (if compiling from source):No\r\n- GCC/Compiler version (if compiling from source): CMake : 3.10.1\r\n- CUDA/cuDNN version: No\r\n- GPU model and memory: No\r\n\r\n\r\n\r\n**Describe the problem**\r\nI am trying to build tensorflow in windows. After downloading 1.11 from the git branch, I tried to build it using one of the link avilable online. CMake step was executed successfully and visual studion solution file was also generated.\r\nWhen i tried to build it in visual studion 2017 it started giving me error of file not found.\r\nLink followed to build the library:\r\nhttps://joe-antognini.github.io/machine-learning/build-windows-tf\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n1. Created all the required folder as described in the link.\r\n2. Run the build command:\r\ncmake .. -A x64 -DCMAKE_BUILD_TYPE=Release -DSWIG_EXECUTABLE=C:\\swigwin-3.0.12\\swig.exe -DPYTHON_EXECUTABLE=C:\\Python365\\python.exe  -DPYTHON_LIBRARIES=C:\\Python365\\libs\\python36.lib\r\n3.Open the solution in Visualstudion 2017 and build in release mode.\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n********************************************\r\nVisual Studio 2017 Logs:\r\n********************************************\r\n1>------ Build started: Project: zlib, Configuration: Release x64 ------\r\n2>------ Build started: Project: farmhash, Configuration: Release x64 ------\r\n3>------ Build started: Project: gif, Configuration: Release x64 ------\r\n4>------ Build started: Project: sqlite, Configuration: Release x64 ------\r\n5>------ Build started: Project: highwayhash, Configuration: Release x64 ------\r\n6>------ Build started: Project: jpeg, Configuration: Release x64 ------\r\n7>------ Build started: Project: lmdb, Configuration: Release x64 ------\r\n8>------ Build started: Project: nsync, Configuration: Release x64 ------\r\n1>Performing update step for 'zlib'\r\n9>------ Build started: Project: farmhash_create_destination_dir, Configuration: Release x64 ------\r\n10>------ Build started: Project: gif_create_destination_dir, Configuration: Release x64 ------\r\n11>------ Build started: Project: sqlite_create_destination_dir, Configuration: Release x64 ------\r\n5>Performing update step for 'highwayhash'\r\n12>------ Build started: Project: png, Configuration: Release x64 ------\r\n13>------ Build started: Project: protobuf, Configuration: Release x64 ------\r\n14>------ Build started: Project: zlib_create_destination_dir, Configuration: Release x64 ------\r\n15>------ Build started: Project: eigen, Configuration: Release x64 ------\r\n16>------ Build started: Project: jpeg_create_destination_dir, Configuration: Release x64 ------\r\n17>------ Build started: Project: highwayhash_create_destination_dir, Configuration: Release x64 ------\r\n18>------ Build started: Project: png_create_destination_dir, Configuration: Release x64 ------\r\n19>------ Build started: Project: lmdb_create_destination_dir, Configuration: Release x64 ------\r\n13>Performing update step for 'protobuf'\r\n20>------ Build started: Project: re2, Configuration: Release x64 ------\r\n21>------ Build started: Project: double_conversion, Configuration: Release x64 ------\r\n8>Performing update step for 'nsync'\r\n22>------ Build started: Project: snappy, Configuration: Release x64 ------\r\n23>------ Build started: Project: jpeg_copy_headers_to_destination, Configuration: Release x64 ------\r\n24>------ Build started: Project: cub, Configuration: Release x64 ------\r\n20>Performing update step for 're2'\r\n21>Performing update step for 'double_conversion'\r\n25>------ Build started: Project: nsync_create_destination_dir, Configuration: Release x64 ------\r\n22>Performing update step for 'snappy'\r\n26>------ Build started: Project: highwayhash_copy_headers_to_destination, Configuration: Release x64 ------\r\n27>------ Build started: Project: grpc, Configuration: Release x64 ------\r\n28>------ Build started: Project: jsoncpp, Configuration: Release x64 ------\r\n29>------ Build started: Project: nsync_copy_headers_to_destination, Configuration: Release x64 ------\r\n30>------ Build started: Project: lmdb_copy_headers_to_destination, Configuration: Release x64 ------\r\n31>------ Build started: Project: png_copy_headers_to_destination, Configuration: Release x64 ------\r\n32>------ Build started: Project: gif_copy_headers_to_destination, Configuration: Release x64 ------\r\n27>Performing update step for 'grpc'\r\n28>Performing update step for 'jsoncpp'\r\n33>------ Build started: Project: sqlite_copy_headers_to_destination, Configuration: Release x64 ------\r\n34>------ Build started: Project: gemmlowp, Configuration: Release x64 ------\r\n35>------ Build started: Project: tf_protos_cc, Configuration: Release x64 ------\r\n36>------ Build started: Project: fft2d, Configuration: Release x64 ------\r\n37>------ Build started: Project: farmhash_copy_headers_to_destination, Configuration: Release x64 ------\r\n38>------ Build started: Project: zlib_copy_headers_to_destination, Configuration: Release x64 ------\r\n39>------ Build started: Project: create_cc_ops_header_dir, Configuration: Release x64 ------\r\n40>------ Build started: Project: force_rebuild_target, Configuration: Release x64 ------\r\n41>------ Build started: Project: tf_python_copy_scripts_to_destination, Configuration: Release x64 ------\r\n40>Generating __force_rebuild\r\n40>\r\n40>Generating C:/Users/john/tensorflow/tensorflow/core/util/version_info.cc\r\n35>debug_service.pb.cc\r\n35>debugger_event_metadata.pb.cc\r\n35>example.pb.cc\r\n35>example_parser_configuration.pb.cc\r\n35>feature.pb.cc\r\n35>allocation_description.pb.cc\r\n35>api_def.pb.cc\r\n35>attr_value.pb.cc\r\n40>fatal: Not a git repository: 'C:/Users/john/tensorflow/.git'\r\n35>cost_graph.pb.cc\r\n35>device_attributes.pb.cc\r\n35>function.pb.cc\r\n35>graph.pb.cc\r\n35>graph_transfer_info.pb.cc\r\n35>iterator.pb.cc\r\n35>kernel_def.pb.cc\r\n35>log_memory.pb.cc\r\n35>node_def.pb.cc\r\n35>op_def.pb.cc\r\n35>reader_base.pb.cc\r\n35>remote_fused_graph_execute_info.pb.cc\r\n35>resource_handle.pb.cc\r\n35>step_stats.pb.cc\r\n35>summary.pb.cc\r\n35>tensor.pb.cc\r\n35>tensor_description.pb.cc\r\n35>tensor_shape.pb.cc\r\n35>tensor_slice.pb.cc\r\n35>types.pb.cc\r\n35>variable.pb.cc\r\n35>versions.pb.cc\r\n35>op_performance_data.pb.cc\r\n35>boosted_trees.pb.cc\r\n35>error_codes.pb.cc\r\n35>profile.pb.cc\r\n35>tfprof_log.pb.cc\r\n35>tfprof_options.pb.cc\r\n35>tfprof_output.pb.cc\r\n35>checkpointable_object_graph.pb.cc\r\n35>cluster.pb.cc\r\n35>config.pb.cc\r\n35>control_flow.pb.cc\r\n35>critical_section.pb.cc\r\n35>debug.pb.cc\r\n35>device_properties.pb.cc\r\n35>eager_service.pb.cc\r\n35>master.pb.cc\r\n35>master_service.pb.cc\r\n35>meta_graph.pb.cc\r\n35>named_tensor.pb.cc\r\n35>queue_runner.pb.cc\r\n35>rewriter_config.pb.cc\r\n35>saved_model.pb.cc\r\n35>saver.pb.cc\r\n35>tensor_bundle.pb.cc\r\n35>tensorflow_server.pb.cc\r\n35>transport_options.pb.cc\r\n35>worker.pb.cc\r\n35>worker_service.pb.cc\r\n35>event.pb.cc\r\n35>example_proto_fast_parsing_test.pb.cc\r\n35>memmapped_file_system.pb.cc\r\n35>saved_tensor_slice.pb.cc\r\n35>test_log.pb.cc\r\n35>xla_service.pb.cc\r\n35>backend_configs.pb.cc\r\n35>hlo.pb.cc\r\n35>hlo_profile_printer_data.pb.cc\r\n35>xla.pb.cc\r\n35>xla_data.pb.cc\r\n35>learner.pb.cc\r\n35>quantiles.pb.cc\r\n35>split_info.pb.cc\r\n35>tree_config.pb.cc\r\n35>compilation_result.pb.cc\r\n35>optimization_parameters.pb.cc\r\n35>topology.pb.cc\r\n35>tpu_embedding_config.pb.cc\r\n35>tf_protos_cc.vcxproj -> C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\Release\\tf_protos_cc.lib\r\n42>------ Build started: Project: proto_text, Configuration: Release x64 ------\r\n42>gen_proto_text_functions.cc\r\n42>gen_proto_text_functions_lib.cc\r\n42>path.obj : error LNK2019: unresolved external symbol \"void __cdecl absl::base_internal::ThrowStdOutOfRange(char const *)\" (?ThrowStdOutOfRange@base_internal@absl@@YAXPEBD@Z) referenced in function \"class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl tensorflow::io::internal::JoinPathImpl(class std::initializer_list<class absl::string_view>)\" (?JoinPathImpl@internal@io@tensorflow@@YA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@V?$initializer_list@Vstring_view@absl@@@5@@Z)\r\n42>path.obj : error LNK2019: unresolved external symbol \"public: unsigned __int64 __cdecl absl::string_view::rfind(char,unsigned __int64)const \" (?rfind@string_view@absl@@QEBA_KD_K@Z) referenced in function \"class absl::string_view __cdecl tensorflow::io::Extension(class absl::string_view)\" (?Extension@io@tensorflow@@YA?AVstring_view@absl@@V34@@Z)\r\n42>collection_registry.obj : error LNK2019: unresolved external symbol \"class std::basic_ostream<char,struct std::char_traits<char> > & __cdecl absl::operator<<(class std::basic_ostream<char,struct std::char_traits<char> > &,class absl::string_view)\" (??6absl@@YAAEAV?$basic_ostream@DU?$char_traits@D@std@@@std@@AEAV12@Vstring_view@0@@Z) referenced in function \"public: class std::unique_ptr<class tensorflow::monitoring::CollectionRegistry::RegistrationHandle,struct std::default_delete<class tensorflow::monitoring::CollectionRegistry::RegistrationHandle> > __cdecl tensorflow::monitoring::CollectionRegistry::Register(class tensorflow::monitoring::AbstractMetricDef const *,class std::function<void __cdecl(class tensorflow::monitoring::MetricCollectorGetter)> const &)\" (?Register@CollectionRegistry@monitoring@tensorflow@@QEAA?AV?$unique_ptr@VRegistrationHandle@CollectionRegistry@monitoring@tensorflow@@U?$default_delete@VRegistrationHandle@CollectionRegistry@monitoring@tensorflow@@@std@@@std@@PEBVAbstractMetricDef@23@AEBV?$function@$$A6AXVMetricCollectorGetter@monitoring@tensorflow@@@Z@5@@Z)\r\n42>str_util.obj : error LNK2019: unresolved external symbol \"public: unsigned __int64 __cdecl absl::string_view::find(char,unsigned __int64)const \" (?find@string_view@absl@@QEBA_KD_K@Z) referenced in function \"class std::vector<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::allocator<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > > > __cdecl tensorflow::str_util::Split<struct tensorflow::str_util::AllowEmpty>(class absl::string_view,class absl::string_view,struct tensorflow::str_util::AllowEmpty)\" (??$Split@UAllowEmpty@str_util@tensorflow@@@str_util@tensorflow@@YA?AV?$vector@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@V?$allocator@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@2@@std@@Vstring_view@absl@@0UAllowEmpty@01@@Z)\r\n42>C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\Release\\proto_text.exe : fatal error LNK1120: 4 unresolved externals\r\n42>Done building project \"proto_text.vcxproj\" -- FAILED.\r\n43>------ Build started: Project: tf_core_framework, Configuration: Release x64 ------\r\n43>Generating __force_rebuild\r\n43>\r\n43>Running C++ protocol buffer text compiler (proto_text) on tensorflow/core/example/example.proto\r\n43>'Release\\proto_text.exe' is not recognized as an internal or external command,\r\n43>operable program or batch file.\r\n43>C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Enterprise\\Common7\\IDE\\VC\\VCTargets\\Microsoft.CppCommon.targets(171,5): error MSB6006: \"cmd.exe\" exited with code 9009.\r\n43>Done building project \"tf_core_framework.vcxproj\" -- FAILED.\r\n44>------ Build started: Project: tf_cc_op_gen_main, Configuration: Release x64 ------\r\n45>------ Build started: Project: tf_core_cpu, Configuration: Release x64 ------\r\n46>------ Build started: Project: tf_cc_framework, Configuration: Release x64 ------\r\n47>------ Build started: Project: tf_python_op_gen_main, Configuration: Release x64 ------\r\n44>cc_op_gen.cc\r\n44>cc_op_gen_main.cc\r\n46>ops.cc\r\n46>scope.cc\r\n47>python_op_gen.cc\r\n47>python_op_gen_internal.cc\r\n47>python_op_gen_main.cc\r\n45>loader.cc\r\n45>reader.cc\r\n45>accumulate_n_optimizer.cc\r\n45>allocator_retry.cc\r\n45>base_collective_executor.cc\r\n45>bfc_allocator.cc\r\n45>buf_rendezvous.cc\r\n45>build_graph_options.cc\r\n47>c:\\users\\john\\tensorflow\\tensorflow\\python\\framework\\python_op_gen_internal.cc(24): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/op_def.pb_text.h': No such file or directory\r\n47>c:\\users\\john\\tensorflow\\tensorflow\\python\\framework\\python_op_gen.cc(23): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/op_def.pb_text.h': No such file or directory\r\n45>collective_executor_mgr.cc\r\n44>c:\\users\\john\\tensorflow\\tensorflow\\cc\\framework\\cc_op_gen.cc(28): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/types.pb_text.h': No such file or directory\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\base_collective_executor.cc)\r\n45>collective_param_resolver_local.cc\r\n44>Done building project \"tf_cc_op_gen_main.vcxproj\" -- FAILED.\r\n48>------ Build started: Project: control_flow_ops_gen_cc, Configuration: Release x64 ------\r\n49>------ Build started: Project: ctc_ops_gen_cc, Configuration: Release x64 ------\r\n50>------ Build started: Project: cudnn_rnn_ops_gen_cc, Configuration: Release x64 ------\r\n51>------ Build started: Project: data_flow_ops_gen_cc, Configuration: Release x64 ------\r\n52>------ Build started: Project: image_ops_gen_cc, Configuration: Release x64 ------\r\n45>collective_rma_local.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\accumulate_n_optimizer.cc)\r\n45>collective_util.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\buf_rendezvous.cc)\r\n45>copy_tensor.cc\r\n46>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\cc\\framework\\scope.cc)\r\n45>costmodel_manager.cc\r\n47>Done building project \"tf_python_op_gen_main.vcxproj\" -- FAILED.\r\n53>------ Build started: Project: random_ops_gen_cc, Configuration: Release x64 ------\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\collective_executor_mgr.cc)\r\n45>debugger_state_interface.cc\r\n45>device.cc\r\n46>Done building project \"tf_cc_framework.vcxproj\" -- FAILED.\r\n54>------ Build started: Project: io_ops_gen_cc, Configuration: Release x64 ------\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\collective_param_resolver_local.cc)\r\n45>device_factory.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\collective_rma_local.cc)\r\n45>device_mgr.cc\r\n48>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n51>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n48>Done building project \"control_flow_ops_gen_cc.vcxproj\" -- FAILED.\r\n49>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n55>------ Build started: Project: summary_ops_gen_cc, Configuration: Release x64 ------\r\n52>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n51>Done building project \"data_flow_ops_gen_cc.vcxproj\" -- FAILED.\r\n56>------ Build started: Project: sendrecv_ops_gen_cc, Configuration: Release x64 ------\r\n52>Done building project \"image_ops_gen_cc.vcxproj\" -- FAILED.\r\n49>Done building project \"ctc_ops_gen_cc.vcxproj\" -- FAILED.\r\n57>------ Build started: Project: decode_proto_ops_gen_cc, Configuration: Release x64 ------\r\n50>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n58>------ Build started: Project: remote_fused_graph_ops_gen_cc, Configuration: Release x64 ------\r\n50>Done building project \"cudnn_rnn_ops_gen_cc.vcxproj\" -- FAILED.\r\n59>------ Build started: Project: sdca_ops_gen_cc, Configuration: Release x64 ------\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\collective_util.cc)\r\n45>device_resolver_local.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\copy_tensor.cc)\r\n45>device_set.cc\r\n53>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n58>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n57>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n53>Done building project \"random_ops_gen_cc.vcxproj\" -- FAILED.\r\n60>------ Build started: Project: linalg_ops_gen_cc, Configuration: Release x64 ------\r\n58>Done building project \"remote_fused_graph_ops_gen_cc.vcxproj\" -- FAILED.\r\n61>------ Build started: Project: string_ops_gen_cc, Configuration: Release x64 ------\r\n57>Done building project \"decode_proto_ops_gen_cc.vcxproj\" -- FAILED.\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\debugger_state_interface.cc)\r\n62>------ Build started: Project: list_ops_gen_cc, Configuration: Release x64 ------\r\n45>attr_builder.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.cc)\r\n45>context.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\eager\\attr_builder.cc)\r\n59>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\eager\\attr_builder.cc)\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device_mgr.cc)\r\n45>eager_executor.cc\r\n45>eager_operation.cc\r\n59>Done building project \"sdca_ops_gen_cc.vcxproj\" -- FAILED.\r\n63>------ Build started: Project: stateless_random_ops_gen_cc, Configuration: Release x64 ------\r\n54>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n54>Done building project \"io_ops_gen_cc.vcxproj\" -- FAILED.\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\eager\\eager_operation.cc)\r\n64>------ Build started: Project: resource_variable_ops_gen_cc, Configuration: Release x64 ------\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\eager\\eager_operation.cc)\r\n55>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n62>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n45>execute.cc\r\n60>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n55>Done building project \"summary_ops_gen_cc.vcxproj\" -- FAILED.\r\n62>Done building project \"list_ops_gen_cc.vcxproj\" -- FAILED.\r\n65>------ Build started: Project: encode_proto_ops_gen_cc, Configuration: Release x64 ------\r\n66>------ Build started: Project: script_ops_gen_cc, Configuration: Release x64 ------\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device_set.cc)\r\n45>kernel_and_device.cc\r\n60>Done building project \"linalg_ops_gen_cc.vcxproj\" -- FAILED.\r\n67>------ Build started: Project: logging_ops_gen_cc, Configuration: Release x64 ------\r\n61>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n61>Done building project \"string_ops_gen_cc.vcxproj\" -- FAILED.\r\n68>------ Build started: Project: state_ops_gen_cc, Configuration: Release x64 ------\r\n45>tensor_handle.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device_resolver_local.cc)\r\n45>eval_const_tensor.cc\r\n66>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n56>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\eager\\attr_builder.cc)\r\n66>Done building project \"script_ops_gen_cc.vcxproj\" -- FAILED.\r\n69>------ Build started: Project: lookup_ops_gen_cc, Configuration: Release x64 ------\r\n64>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n45>executor.cc\r\n56>Done building project \"sendrecv_ops_gen_cc.vcxproj\" -- FAILED.\r\n70>------ Build started: Project: array_ops_gen_cc, Configuration: Release x64 ------\r\n64>Done building project \"resource_variable_ops_gen_cc.vcxproj\" -- FAILED.\r\n71>------ Build started: Project: manip_ops_gen_cc, Configuration: Release x64 ------\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\eager\\context.cc)\r\n45>executor_factory.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\eager\\eager_executor.cc)\r\n45>function.cc\r\n67>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n63>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n67>Done building project \"logging_ops_gen_cc.vcxproj\" -- FAILED.\r\n72>------ Build started: Project: rpc_ops_gen_cc, Configuration: Release x64 ------\r\n63>Done building project \"stateless_random_ops_gen_cc.vcxproj\" -- FAILED.\r\n73>------ Build started: Project: math_ops_gen_cc, Configuration: Release x64 ------\r\n70>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\eager\\eager_operation.cc)\r\n70>Done building project \"array_ops_gen_cc.vcxproj\" -- FAILED.\r\n74>------ Build started: Project: audio_ops_gen_cc, Configuration: Release x64 ------\r\n45>gpu_id_manager.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\eager\\execute.cc)\r\n45>graph_execution_state.cc\r\n68>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\eager\\kernel_and_device.cc)\r\n45>graph_optimizer.cc\r\n68>Done building project \"state_ops_gen_cc.vcxproj\" -- FAILED.\r\n75>------ Build started: Project: nn_ops_gen_cc, Configuration: Release x64 ------\r\n65>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n71>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n65>Done building project \"encode_proto_ops_gen_cc.vcxproj\" -- FAILED.\r\n76>------ Build started: Project: spectral_ops_gen_cc, Configuration: Release x64 ------\r\n71>Done building project \"manip_ops_gen_cc.vcxproj\" -- FAILED.\r\n77>------ Build started: Project: no_op_gen_cc, Configuration: Release x64 ------\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\eager\\tensor_handle.cc)\r\n45>graph_runner.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\executor.cc)\r\n45>hierarchical_tree_broadcaster.cc\r\n72>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n72>Done building project \"rpc_ops_gen_cc.vcxproj\" -- FAILED.\r\n78>------ Build started: Project: batch_ops_gen_cc, Configuration: Release x64 ------\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\function.cc)\r\n73>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n45>local_device.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\eval_const_tensor.cc)\r\n45>lower_if_op.cc\r\n73>Done building project \"math_ops_gen_cc.vcxproj\" -- FAILED.\r\n79>------ Build started: Project: user_ops_gen_cc, Configuration: Release x64 ------\r\n45>lower_while_op.cc\r\n74>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n74>Done building project \"audio_ops_gen_cc.vcxproj\" -- FAILED.\r\n80>------ Build started: Project: bitwise_ops_gen_cc, Configuration: Release x64 ------\r\n77>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n77>Done building project \"no_op_gen_cc.vcxproj\" -- FAILED.\r\n81>------ Build started: Project: parsing_ops_gen_cc, Configuration: Release x64 ------\r\n75>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n75>Done building project \"nn_ops_gen_cc.vcxproj\" -- FAILED.\r\n82>------ Build started: Project: sparse_ops_gen_cc, Configuration: Release x64 ------\r\n69>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n69>Done building project \"lookup_ops_gen_cc.vcxproj\" -- FAILED.\r\n83>------ Build started: Project: functional_ops_gen_cc, Configuration: Release x64 ------\r\n76>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n78>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\graph_execution_state.cc)\r\n76>Done building project \"spectral_ops_gen_cc.vcxproj\" -- FAILED.\r\n45>memory_types.cc\r\n84>------ Build started: Project: dataset_ops_gen_cc, Configuration: Release x64 ------\r\n78>Done building project \"batch_ops_gen_cc.vcxproj\" -- FAILED.\r\n85>------ Build started: Project: training_ops_gen_cc, Configuration: Release x64 ------\r\n45>mkl_cpu_allocator.cc\r\n45>optimization_registry.cc\r\n79>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n79>Done building project \"user_ops_gen_cc.vcxproj\" -- FAILED.\r\n86>------ Build started: Project: candidate_sampling_ops_gen_cc, Configuration: Release x64 ------\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\graph_runner.cc)\r\n45>parallel_concat_optimizer.cc\r\n85>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n81>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n82>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n85>Done building project \"training_ops_gen_cc.vcxproj\" -- FAILED.\r\n81>Done building project \"parsing_ops_gen_cc.vcxproj\" -- FAILED.\r\n87>------ Build started: Project: checkpoint_ops_gen_cc, Configuration: Release x64 ------\r\n88>------ Build started: Project: boosted_trees_ops_gen_cc, Configuration: Release x64 ------\r\n82>Done building project \"sparse_ops_gen_cc.vcxproj\" -- FAILED.\r\n80>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n89>------ Build started: Project: set_ops_gen_cc, Configuration: Release x64 ------\r\n80>Done building project \"bitwise_ops_gen_cc.vcxproj\" -- FAILED.\r\n90>------ Build started: Project: remote_fused_graph_ops_gen_python, Configuration: Release x64 ------\r\n83>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\graph_optimizer.cc)\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\local_device.cc)\r\n45>placer.cc\r\n45>pool_allocator.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\hierarchical_tree_broadcaster.cc)\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\lower_if_op.cc)\r\n83>Done building project \"functional_ops_gen_cc.vcxproj\" -- FAILED.\r\n45>process_function_library_runtime.cc\r\n45>process_state.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\lower_while_op.cc)\r\n45>process_util.cc\r\n91>------ Build started: Project: sdca_ops_gen_python, Configuration: Release x64 ------\r\n84>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n84>Done building project \"dataset_ops_gen_cc.vcxproj\" -- FAILED.\r\n92>------ Build started: Project: random_ops_gen_python, Configuration: Release x64 ------\r\n87>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n88>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n86>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n87>Done building project \"checkpoint_ops_gen_cc.vcxproj\" -- FAILED.\r\n93>------ Build started: Project: set_ops_gen_python, Configuration: Release x64 ------\r\n88>Done building project \"boosted_trees_ops_gen_cc.vcxproj\" -- FAILED.\r\n86>Done building project \"candidate_sampling_ops_gen_cc.vcxproj\" -- FAILED.\r\n94>------ Build started: Project: parsing_ops_gen_python, Configuration: Release x64 ------\r\n95>------ Build started: Project: sparse_ops_gen_python, Configuration: Release x64 ------\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\optimization_registry.cc)\r\n45>renamed_device.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\process_function_library_runtime.cc)\r\n45>rendezvous_mgr.cc\r\n90>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n92>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n90>Done building project \"remote_fused_graph_ops_gen_python.vcxproj\" -- FAILED.\r\n95>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n91>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n96>------ Build started: Project: nn_ops_gen_python, Configuration: Release x64 ------\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\placer.cc)\r\n91>Done building project \"sdca_ops_gen_python.vcxproj\" -- FAILED.\r\n97>------ Build started: Project: math_ops_gen_python, Configuration: Release x64 ------\r\n45>rendezvous_util.cc\r\n95>Done building project \"sparse_ops_gen_python.vcxproj\" -- FAILED.\r\n92>Done building project \"random_ops_gen_python.vcxproj\" -- FAILED.\r\n98>------ Build started: Project: manip_ops_gen_python, Configuration: Release x64 ------\r\n99>------ Build started: Project: lookup_ops_gen_python, Configuration: Release x64 ------\r\n94>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n94>Done building project \"parsing_ops_gen_python.vcxproj\" -- FAILED.\r\n100>------ Build started: Project: logging_ops_gen_python, Configuration: Release x64 ------\r\n89>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_op_gen_main.dir\\Release\\cc_op_gen.obj'\r\n89>Done building project \"set_ops_gen_cc.vcxproj\" -- FAILED.\r\n101>------ Build started: Project: tf_cc_ops, Configuration: Release x64 ------\r\n100>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n100>Done building project \"logging_ops_gen_python.vcxproj\" -- FAILED.\r\n102>------ Build started: Project: state_ops_gen_python, Configuration: Release x64 ------\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\parallel_concat_optimizer.cc)\r\n45>ring_reducer.cc\r\n45>scoped_allocator.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\renamed_device.cc)\r\n45>scoped_allocator_mgr.cc\r\n98>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n45>session_ref.cc\r\n45>session_state.cc\r\n102>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n98>Done building project \"manip_ops_gen_python.vcxproj\" -- FAILED.\r\n103>------ Build started: Project: list_ops_gen_python, Configuration: Release x64 ------\r\n102>Done building project \"state_ops_gen_python.vcxproj\" -- FAILED.\r\n104>------ Build started: Project: stateless_random_ops_gen_python, Configuration: Release x64 ------\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\rendezvous_mgr.cc)\r\n45>shape_refiner.cc\r\n93>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n93>Done building project \"set_ops_gen_python.vcxproj\" -- FAILED.\r\n105>------ Build started: Project: linalg_ops_gen_python, Configuration: Release x64 ------\r\n103>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n103>Done building project \"list_ops_gen_python.vcxproj\" -- FAILED.\r\n106>------ Build started: Project: string_ops_gen_python, Configuration: Release x64 ------\r\n99>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n97>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n99>Done building project \"lookup_ops_gen_python.vcxproj\" -- FAILED.\r\n107>------ Build started: Project: io_ops_gen_python, Configuration: Release x64 ------\r\n96>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n97>Done building project \"math_ops_gen_python.vcxproj\" -- FAILED.\r\n104>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n108>------ Build started: Project: summary_ops_gen_python, Configuration: Release x64 ------\r\n45>stats_publisher_interface.cc\r\n96>Done building project \"nn_ops_gen_python.vcxproj\" -- FAILED.\r\n109>------ Build started: Project: image_ops_gen_python, Configuration: Release x64 ------\r\n104>Done building project \"stateless_random_ops_gen_python.vcxproj\" -- FAILED.\r\n110>------ Build started: Project: functional_ops_gen_python, Configuration: Release x64 ------\r\n105>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n105>Done building project \"linalg_ops_gen_python.vcxproj\" -- FAILED.\r\n111>------ Build started: Project: encode_proto_ops_gen_python, Configuration: Release x64 ------\r\n106>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n107>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n106>Done building project \"string_ops_gen_python.vcxproj\" -- FAILED.\r\n112>------ Build started: Project: rpc_ops_gen_python, Configuration: Release x64 ------\r\n107>Done building project \"io_ops_gen_python.vcxproj\" -- FAILED.\r\n113>------ Build started: Project: debug_ops_gen_python, Configuration: Release x64 ------\r\n109>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n109>Done building project \"image_ops_gen_python.vcxproj\" -- FAILED.\r\n114>------ Build started: Project: resource_variable_ops_gen_python, Configuration: Release x64 ------\r\n108>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n112>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n108>Done building project \"summary_ops_gen_python.vcxproj\" -- FAILED.\r\n115>------ Build started: Project: dataset_ops_gen_python, Configuration: Release x64 ------\r\n112>Done building project \"rpc_ops_gen_python.vcxproj\" -- FAILED.\r\n116>------ Build started: Project: spectral_ops_gen_python, Configuration: Release x64 ------\r\n114>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n113>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n114>Done building project \"resource_variable_ops_gen_python.vcxproj\" -- FAILED.\r\n117>------ Build started: Project: data_flow_ops_gen_python, Configuration: Release x64 ------\r\n45>step_stats_collector.cc\r\n113>Done building project \"debug_ops_gen_python.vcxproj\" -- FAILED.\r\n118>------ Build started: Project: cudnn_rnn_ops_gen_python, Configuration: Release x64 ------\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\ring_reducer.cc)\r\n45>sycl_allocator.cc\r\n45>sycl_device.cc\r\n45>sycl_device_context.cc\r\n45>sycl_device_factory.cc\r\n45>threadpool_device.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\shape_refiner.cc)\r\n45>threadpool_device_factory.cc\r\n45>debug.cc\r\n115>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n115>Done building project \"dataset_ops_gen_python.vcxproj\" -- FAILED.\r\n119>------ Build started: Project: script_ops_gen_python, Configuration: Release x64 ------\r\n45>debug_callback_registry.cc\r\n116>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n116>Done building project \"spectral_ops_gen_python.vcxproj\" -- FAILED.\r\n111>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n120>------ Build started: Project: ctc_ops_gen_python, Configuration: Release x64 ------\r\n110>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n111>Done building project \"encode_proto_ops_gen_python.vcxproj\" -- FAILED.\r\n121>------ Build started: Project: control_flow_ops_gen_python, Configuration: Release x64 ------\r\n110>Done building project \"functional_ops_gen_python.vcxproj\" -- FAILED.\r\n122>------ Build started: Project: contrib_text_skip_gram_ops_gen_python, Configuration: Release x64 ------\r\n117>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n119>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n117>Done building project \"data_flow_ops_gen_python.vcxproj\" -- FAILED.\r\n119>Done building project \"script_ops_gen_python.vcxproj\" -- FAILED.\r\n123>------ Build started: Project: contrib_tensor_forest_stats_ops_gen_python, Configuration: Release x64 ------\r\n124>------ Build started: Project: contrib_tensor_forest_ops_gen_python, Configuration: Release x64 ------\r\n45>debug_graph_utils.cc\r\n125>------ Build started: Project: contrib_tensor_forest_model_ops_gen_python, Configuration: Release x64 ------\r\n120>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n122>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n120>Done building project \"ctc_ops_gen_python.vcxproj\" -- FAILED.\r\n126>------ Build started: Project: contrib_tensor_forest_hybrid_ops_gen_python, Configuration: Release x64 ------\r\n122>Done building project \"contrib_text_skip_gram_ops_gen_python.vcxproj\" -- FAILED.\r\n127>------ Build started: Project: contrib_seq2seq_beam_search_ops_gen_python, Configuration: Release x64 ------\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\threadpool_device_factory.cc)\r\n45>debug_io_utils.cc\r\n123>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n45>debug_node_key.cc\r\n45>debugger_state_impl.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\threadpool_device.cc)\r\n45>server_lib.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\debug\\debug.cc)\r\n45>algorithm.cc\r\n45>colors.cc\r\n123>Done building project \"contrib_tensor_forest_stats_ops_gen_python.vcxproj\" -- FAILED.\r\n128>------ Build started: Project: contrib_rnn_lstm_ops_gen_python, Configuration: Release x64 ------\r\n121>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n126>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n127>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n121>Done building project \"control_flow_ops_gen_python.vcxproj\" -- FAILED.\r\n129>------ Build started: Project: contrib_rnn_gru_ops_gen_python, Configuration: Release x64 ------\r\n45>control_flow.cc\r\n126>Done building project \"contrib_tensor_forest_hybrid_ops_gen_python.vcxproj\" -- FAILED.\r\n124>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n130>------ Build started: Project: contrib_resampler_ops_gen_python, Configuration: Release x64 ------\r\n127>Done building project \"contrib_seq2seq_beam_search_ops_gen_python.vcxproj\" -- FAILED.\r\n131>------ Build started: Project: contrib_periodic_resample_ops_gen_python, Configuration: Release x64 ------\r\n124>Done building project \"contrib_tensor_forest_ops_gen_python.vcxproj\" -- FAILED.\r\n132>------ Build started: Project: contrib_nearest_neighbor_ops_gen_python, Configuration: Release x64 ------\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\debug\\debug_graph_utils.cc)\r\n45>costmodel.cc\r\n45>gradients.cc\r\n125>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n125>Done building project \"contrib_tensor_forest_model_ops_gen_python.vcxproj\" -- FAILED.\r\n133>------ Build started: Project: contrib_nccl_ops_gen_python, Configuration: Release x64 ------\r\n131>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n131>Done building project \"contrib_periodic_resample_ops_gen_python.vcxproj\" -- FAILED.\r\n134>------ Build started: Project: contrib_memory_stats_ops_gen_python, Configuration: Release x64 ------\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\debug\\debugger_state_impl.cc)\r\n130>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n130>Done building project \"contrib_resampler_ops_gen_python.vcxproj\" -- FAILED.\r\n45>graph_constructor.cc\r\n135>------ Build started: Project: contrib_layers_sparse_feature_cross_ops_gen_python, Configuration: Release x64 ------\r\n128>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n128>Done building project \"contrib_rnn_lstm_ops_gen_python.vcxproj\" -- FAILED.\r\n136>------ Build started: Project: contrib_input_pipeline_ops_gen_python, Configuration: Release x64 ------\r\n101>Generating tensorflow/cc/ops/audio_ops.h, tensorflow/cc/ops/audio_ops.cc, tensorflow/cc/ops/audio_ops_internal.h, tensorflow/cc/ops/audio_ops_internal.cc\r\n45>graph_def_builder_util.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\graph\\gradients.cc)\r\n45>graph_partition.cc\r\n45>mkl_layout_pass.cc\r\n101>'Release\\audio_ops_gen_cc.exe' is not recognized as an internal or external command,\r\n45>mkl_tfconversion_pass.cc\r\n101>operable program or batch file.\r\n133>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n45>optimizer_cse.cc\r\n133>Done building project \"contrib_nccl_ops_gen_python.vcxproj\" -- FAILED.\r\n137>------ Build started: Project: contrib_image_sirds_ops_gen_python, Configuration: Release x64 ------\r\n45>quantize_training.cc\r\n135>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n101>C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Enterprise\\Common7\\IDE\\VC\\VCTargets\\Microsoft.CppCommon.targets(171,5): error MSB6006: \"cmd.exe\" exited with code 9009.\r\n101>Done building project \"tf_cc_ops.vcxproj\" -- FAILED.\r\n138>------ Build started: Project: tf_cc_while_loop, Configuration: Release x64 ------\r\n135>Done building project \"contrib_layers_sparse_feature_cross_ops_gen_python.vcxproj\" -- FAILED.\r\n139>------ Build started: Project: tf_cc, Configuration: Release x64 ------\r\n132>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n136>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n132>Done building project \"contrib_nearest_neighbor_ops_gen_python.vcxproj\" -- FAILED.\r\n140>------ Build started: Project: contrib_image_ops_gen_python, Configuration: Release x64 ------\r\n136>Done building project \"contrib_input_pipeline_ops_gen_python.vcxproj\" -- FAILED.\r\n134>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n141>------ Build started: Project: contrib_image_distort_image_ops_gen_python, Configuration: Release x64 ------\r\n134>Done building project \"contrib_memory_stats_ops_gen_python.vcxproj\" -- FAILED.\r\n142>------ Build started: Project: contrib_framework_variable_ops_gen_python, Configuration: Release x64 ------\r\n129>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n129>Done building project \"contrib_rnn_gru_ops_gen_python.vcxproj\" -- FAILED.\r\n143>------ Build started: Project: contrib_gcs_config_ops_gen_python, Configuration: Release x64 ------\r\n137>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n137>Done building project \"contrib_image_sirds_ops_gen_python.vcxproj\" -- FAILED.\r\n144>------ Build started: Project: contrib_factorization_factorization_ops_gen_python, Configuration: Release x64 ------\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\graph\\graph_constructor.cc)\r\n45>validate.cc\r\n45>cluster.cc\r\n138>while_loop.cc\r\n45>virtual_cluster.cc\r\n45>analytical_cost_estimator.cc\r\n139>client_session.cc\r\n139>array_grad.cc\r\n139>data_flow_grad.cc\r\n139>c:\\users\\john\\tensorflow\\tensorflow\\cc\\gradients\\data_flow_grad.cc(16): fatal error C1083: Cannot open include file: 'tensorflow/cc/ops/data_flow_ops.h': No such file or directory\r\n139>image_grad.cc\r\n139>math_grad.cc\r\n139>nn_grad.cc\r\n139>c:\\users\\john\\tensorflow\\tensorflow\\cc\\gradients\\nn_grad.cc(16): fatal error C1083: Cannot open include file: 'tensorflow/cc/ops/nn_ops.h': No such file or directory\r\n139>coordinator.cc\r\n139>c:\\users\\john\\tensorflow\\tensorflow\\cc\\gradients\\math_grad.cc(19): fatal error C1083: Cannot open include file: 'tensorflow/cc/ops/array_ops_internal.h': No such file or directory\r\n139>queue_runner.cc\r\n139>grad_op_registry.cc\r\n139>gradient_checker.cc\r\n139>gradients.cc\r\n139>c:\\users\\john\\tensorflow\\tensorflow\\cc\\gradients\\array_grad.cc(18): fatal error C1083: Cannot open include file: 'tensorflow/cc/ops/array_ops_internal.h': No such file or directory\r\n139>while_gradients.cc\r\n142>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\graph\\quantize_training.cc)\r\n45>graph_memory.cc\r\n142>Done building project \"contrib_framework_variable_ops_gen_python.vcxproj\" -- FAILED.\r\n145>------ Build started: Project: contrib_factorization_clustering_ops_gen_python, Configuration: Release x64 ------\r\n45>graph_properties.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\clusters\\cluster.cc)\r\n45>measuring_cost_estimator.cc\r\n141>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n144>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n141>Done building project \"contrib_image_distort_image_ops_gen_python.vcxproj\" -- FAILED.\r\n144>Done building project \"contrib_factorization_factorization_ops_gen_python.vcxproj\" -- FAILED.\r\n146>------ Build started: Project: contrib_data_dataset_ops_gen_python, Configuration: Release x64 ------\r\n147>------ Build started: Project: contrib_coder_ops_gen_python, Configuration: Release x64 ------\r\n140>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n143>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n138>c:\\users\\john\\tensorflow\\tensorflow\\cc\\ops\\while_loop.cc(19): fatal error C1083: Cannot open include file: 'tensorflow/cc/ops/control_flow_ops_internal.h': No such file or directory\r\n140>Done building project \"contrib_image_ops_gen_python.vcxproj\" -- FAILED.\r\n143>Done building project \"contrib_gcs_config_ops_gen_python.vcxproj\" -- FAILED.\r\n148>------ Build started: Project: contrib_boosted_trees_training_ops_gen_python, Configuration: Release x64 ------\r\n149>------ Build started: Project: contrib_boosted_trees_stats_accumulator_ops_gen_python, Configuration: Release x64 ------\r\n139>c:\\users\\john\\tensorflow\\tensorflow\\cc\\gradients\\image_grad.cc(19): fatal error C1083: Cannot open include file: 'tensorflow/cc/ops/image_ops_internal.h': No such file or directory\r\n139>c:\\users\\john\\tensorflow\\tensorflow\\cc\\ops\\standard_ops.h(19): fatal error C1083: Cannot open include file: 'tensorflow/cc/ops/array_ops.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\cc\\framework\\gradients.cc)\r\n139>c:\\users\\john\\tensorflow\\tensorflow\\cc\\framework\\while_gradients.cc(20): fatal error C1083: Cannot open include file: 'tensorflow/cc/ops/control_flow_ops_internal.h': No such file or directory\r\n139>c:\\users\\john\\tensorflow\\tensorflow\\cc\\ops\\standard_ops.h(19): fatal error C1083: Cannot open include file: 'tensorflow/cc/ops/array_ops.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\cc\\framework\\gradient_checker.cc)\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\clusters\\virtual_cluster.cc)\r\n45>op_level_cost_estimator.cc\r\n138>Done building project \"tf_cc_while_loop.vcxproj\" -- FAILED.\r\n150>------ Build started: Project: tf_c, Configuration: Release x64 ------\r\n45>robust_stats.cc\r\n45>virtual_placer.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\costs\\analytical_cost_estimator.cc)\r\n45>virtual_scheduler.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\costs\\graph_memory.cc)\r\n45>devices.cc\r\n45>gen_node.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\costs\\graph_properties.cc)\r\n45>graph_analyzer.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\grappler\\graph_analyzer\\graph_analyzer.cc(20): fatal error C1083: Cannot open include file: 'absl/strings/str_format.h': No such file or directory\r\n45>graph_analyzer_tool.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\costs\\measuring_cost_estimator.cc)\r\n45>sig_node.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\grappler\\graph_analyzer\\gen_node.cc(18): fatal error C1083: Cannot open include file: 'absl/strings/str_format.h': No such file or directory\r\n45>graph_view.cc\r\n150>c_api.cc\r\n147>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n150>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C\r\n150>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams'\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\costs\\virtual_placer.cc)\r\n147>Done building project \"contrib_coder_ops_gen_python.vcxproj\" -- FAILED.\r\n45>grappler_item.cc\r\n151>------ Build started: Project: contrib_boosted_trees_split_handler_ops_gen_python, Configuration: Release x64 ------\r\n45>grappler_item_builder.cc\r\n139>Done building project \"tf_cc.vcxproj\" -- FAILED.\r\n152>------ Build started: Project: decode_proto_ops_gen_python, Configuration: Release x64 ------\r\n151>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n151>Done building project \"contrib_boosted_trees_split_handler_ops_gen_python.vcxproj\" -- FAILED.\r\n146>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n153>------ Build started: Project: contrib_boosted_trees_prediction_ops_gen_python, Configuration: Release x64 ------\r\n146>Done building project \"contrib_data_dataset_ops_gen_python.vcxproj\" -- FAILED.\r\n154>------ Build started: Project: contrib_boosted_trees_model_ops_gen_python, Configuration: Release x64 ------\r\n149>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n149>Done building project \"contrib_boosted_trees_stats_accumulator_ops_gen_python.vcxproj\" -- FAILED.\r\n155>------ Build started: Project: contrib_bigquery_reader_ops_gen_python, Configuration: Release x64 ------\r\n148>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n152>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n148>Done building project \"contrib_boosted_trees_training_ops_gen_python.vcxproj\" -- FAILED.\r\n156>------ Build started: Project: checkpoint_ops_gen_python, Configuration: Release x64 ------\r\n152>Done building project \"decode_proto_ops_gen_python.vcxproj\" -- FAILED.\r\n157>------ Build started: Project: array_ops_gen_python, Configuration: Release x64 ------\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\costs\\virtual_scheduler.cc)\r\n145>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n154>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n150>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory\r\n145>Done building project \"contrib_factorization_clustering_ops_gen_python.vcxproj\" -- FAILED.\r\n45>file_input_yielder.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\grappler\\graph_analyzer\\sig_node.cc(20): fatal error C1083: Cannot open include file: 'absl/strings/str_format.h': No such file or directory\r\n45>mutable_graph_view.cc\r\n45>op_types.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\grappler_item_builder.cc)\r\n45>arithmetic_optimizer.cc\r\n158>------ Build started: Project: candidate_sampling_ops_gen_python, Configuration: Release x64 ------\r\n154>Done building project \"contrib_boosted_trees_model_ops_gen_python.vcxproj\" -- FAILED.\r\n45>auto_parallel.cc\r\n159>------ Build started: Project: boosted_trees_ops_gen_python, Configuration: Release x64 ------\r\n150>Done building project \"tf_c.vcxproj\" -- FAILED.\r\n153>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n160>------ Build started: Project: tf_c_python_api, Configuration: Release x64 ------\r\n153>Done building project \"contrib_boosted_trees_prediction_ops_gen_python.vcxproj\" -- FAILED.\r\n161>------ Build started: Project: bitwise_ops_gen_python, Configuration: Release x64 ------\r\n45>custom_graph_optimizer_registry.cc\r\n158>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n158>Done building project \"candidate_sampling_ops_gen_python.vcxproj\" -- FAILED.\r\n162>------ Build started: Project: training_ops_gen_python, Configuration: Release x64 ------\r\n155>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n159>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n155>Done building project \"contrib_bigquery_reader_ops_gen_python.vcxproj\" -- FAILED.\r\n159>Done building project \"boosted_trees_ops_gen_python.vcxproj\" -- FAILED.\r\n163>------ Build started: Project: user_ops_gen_python, Configuration: Release x64 ------\r\n164>------ Build started: Project: batch_ops_gen_python, Configuration: Release x64 ------\r\n156>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n156>Done building project \"checkpoint_ops_gen_python.vcxproj\" -- FAILED.\r\n165>------ Build started: Project: audio_ops_gen_python, Configuration: Release x64 ------\r\n157>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n161>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n157>Done building project \"array_ops_gen_python.vcxproj\" -- FAILED.\r\n166>------ Build started: Project: contrib_boosted_trees_quantiles_ops_gen_python, Configuration: Release x64 ------\r\n161>Done building project \"bitwise_ops_gen_python.vcxproj\" -- FAILED.\r\n163>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n163>Done building project \"user_ops_gen_python.vcxproj\" -- FAILED.\r\n45>filter_fusion.cc\r\n45>fusion_utils.cc\r\n45>graph_utils.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\optimizers\\arithmetic_optimizer.cc)\r\n45>latency_all_edges.cc\r\n162>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n45>map_and_batch_fusion.cc\r\n162>Done building project \"training_ops_gen_python.vcxproj\" -- FAILED.\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\optimizers\\auto_parallel.cc)\r\n45>map_and_filter_fusion.cc\r\n45>map_fusion.cc\r\n45>map_vectorization.cc\r\n164>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n165>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n164>Done building project \"batch_ops_gen_python.vcxproj\" -- FAILED.\r\n165>Done building project \"audio_ops_gen_python.vcxproj\" -- FAILED.\r\n166>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_python_op_gen_main.dir\\Release\\python_op_gen.obj'\r\n166>Done building project \"contrib_boosted_trees_quantiles_ops_gen_python.vcxproj\" -- FAILED.\r\n167>------ Build started: Project: tf_python_ops, Configuration: Release x64 ------\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\optimizers\\data\\filter_fusion.cc)\r\n45>noop_elimination.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\optimizers\\data\\latency_all_edges.cc)\r\n45>shuffle_and_repeat_fusion.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\optimizers\\data\\map_and_batch_fusion.cc)\r\n45>debug_stripper.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\optimizers\\data\\map_fusion.cc)\r\n45>dependency_optimizer.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\optimizers\\data\\map_and_filter_fusion.cc)\r\n45>evaluation_utils.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\optimizers\\data\\map_vectorization.cc)\r\n45>function_optimizer.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\optimizers\\data\\noop_elimination.cc)\r\n45>gpu_swapping_kernels.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\optimizers\\data\\shuffle_and_repeat_fusion.cc)\r\n45>gpu_swapping_ops.cc\r\n45>graph_optimizer_stage.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\optimizers\\debug_stripper.cc)\r\n45>graph_rewriter.cc\r\n45>layout_optimizer.cc\r\n167>Generating tf_python/tensorflow/python/ops/gen_audio_ops.py\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\optimizers\\dependency_optimizer.cc)\r\n45>loop_optimizer.cc\r\n167>'Release\\audio_ops_gen_python.exe' is not recognized as an internal or external command,\r\n167>operable program or batch file.\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\optimizers\\function_optimizer.cc)\r\n45>memory_optimizer.cc\r\n167>C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Enterprise\\Common7\\IDE\\VC\\VCTargets\\Microsoft.CppCommon.targets(171,5): error MSB6006: \"cmd.exe\" exited with code 9009.\r\n167>Done building project \"tf_python_ops.vcxproj\" -- FAILED.\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\optimizers\\gpu_swapping_kernels.cc)\r\n45>meta_optimizer.cc\r\n45>model_pruner.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\optimizers\\graph_optimizer_stage.cc)\r\n45>remapper.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\optimizers\\loop_optimizer.cc)\r\n45>scoped_allocator_optimizer.cc\r\n45>shape_optimizer.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\optimizers\\layout_optimizer.cc)\r\n45>static_schedule.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\optimizers\\memory_optimizer.cc)\r\n45>symbolic_shapes.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\optimizers\\meta_optimizer.cc)\r\n45>colocation.cc\r\n45>frame.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\optimizers\\shape_optimizer.cc)\r\n45>functions.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\optimizers\\remapper.cc)\r\n45>scc.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\optimizers\\scoped_allocator_optimizer.cc)\r\n45>topological_sort.cc\r\n45>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\optimizers\\static_schedule.cc)\r\n45>traversal.cc\r\n45>Done building project \"tf_core_cpu.vcxproj\" -- FAILED.\r\n168>------ Build started: Project: tf_core_kernels, Configuration: Release x64 ------\r\n169>------ Build started: Project: tf_grappler, Configuration: Release x64 ------\r\n170>------ Build started: Project: tf_core_distributed_runtime, Configuration: Release x64 ------\r\n171>------ Build started: Project: tf_core_direct_session, Configuration: Release x64 ------\r\n171>direct_session.cc\r\n169>single_machine.cc\r\n169>cost_analyzer.cc\r\n169>model_analyzer.cc\r\n170>base_rendezvous_mgr.cc\r\n170>call_options.cc\r\n170>cluster_function_library_runtime.cc\r\n170>collective_param_resolver_distributed.cc\r\n170>collective_rma_distributed.cc\r\n170>device_resolver_distributed.cc\r\n170>eager_service_impl.cc\r\n170>graph_mgr.cc\r\n170>local_master.cc\r\n168>adjust_contrast_op.cc\r\n168>adjust_hue_op.cc\r\n168>adjust_saturation_op.cc\r\n168>aggregate_ops.cc\r\n168>argmax_op.cc\r\n168>as_string_op.cc\r\n168>attention_ops.cc\r\n168>avgpooling_op.cc\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\collective_rma_distributed.cc)\r\n170>master.cc\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\base_rendezvous_mgr.cc)\r\n170>master_session.cc\r\n169>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\grappler\\cost_analyzer.cc)\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\eager\\eager_service_impl.cc)\r\n170>message_wrappers.cc\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\message_wrappers.h(24): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/tensor.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\cluster_function_library_runtime.cc)\r\n170>partial_run_mgr.cc\r\n169>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\grappler\\clusters\\single_machine.cc)\r\n169>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\grappler\\model_analyzer.cc)\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\device_resolver_distributed.cc)\r\n170>recent_request_ids.cc\r\n171>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\graph_mgr.cc)\r\n170>remote_device.cc\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\message_wrappers.h(24): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/tensor.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\collective_param_resolver_distributed.cc)\r\n170>request_id.cc\r\n169>Done building project \"tf_grappler.vcxproj\" -- FAILED.\r\n171>Done building project \"tf_core_direct_session.vcxproj\" -- FAILED.\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\message_wrappers.h(24): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/tensor.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\local_master.cc)\r\n170>grpc_eager_client.cc\r\n170>grpc_eager_service.cc\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\master_session.cc)\r\n170>grpc_eager_service_impl.cc\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\master.cc)\r\n170>grpc_channel.cc\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\message_wrappers.h(24): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/tensor.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\message_wrappers.cc)\r\n170>grpc_master_service.cc\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\remote_device.cc)\r\n170>grpc_master_service_impl.cc\r\n168>barrier_ops.cc\r\n168>base64_ops.cc\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\message_wrappers.h(24): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/tensor.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\partial_run_mgr.cc)\r\n170>grpc_remote_master.cc\r\n168>batch_kernels.cc\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\rpc\\eager\\grpc_eager_service_impl.cc)\r\n170>grpc_remote_worker.cc\r\n170>grpc_rpc_factory.cc\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\rpc\\grpc_master_service.cc)\r\n170>grpc_rpc_factory_registration.cc\r\n170>grpc_server_lib.cc\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\message_wrappers.h(24): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/tensor.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\rpc\\grpc_remote_master.cc)\r\n168>batch_matmul_op_complex.cc\r\n170>grpc_session.cc\r\n168>batch_matmul_op_real.cc\r\n170>grpc_tensor_coding.cc\r\n170>grpc_util.cc\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\message_wrappers.h(24): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/tensor.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\rpc\\grpc_remote_worker.cc)\r\n170>grpc_worker_cache.cc\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\message_wrappers.h(24): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/tensor.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\rpc\\grpc_session.cc)\r\n170>grpc_worker_service.cc\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\message_wrappers.h(24): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/tensor.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\rpc\\grpc_server_lib.cc)\r\n170>grpc_worker_service_impl.cc\r\n168>batch_norm_op.cc\r\n170>rpc_rendezvous_mgr.cc\r\n170>rpc_collective_executor_mgr.cc\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\message_wrappers.h(24): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/tensor.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\rpc\\grpc_worker_cache.cc)\r\n170>scheduler.cc\r\n170>session_mgr.cc\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\rpc\\rpc_rendezvous_mgr.cc)\r\n170>tensor_coding.cc\r\n170>worker.cc\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\rpc\\grpc_worker_service.cc)\r\n170>worker_cache_logger.cc\r\n170>worker_cache_partial.cc\r\n168>fake_clock_env.cc\r\n168>periodic_function.cc\r\n168>batchtospace_op.cc\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\session_mgr.cc)\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\scheduler.cc)\r\n170>worker_session.cc\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\rpc_collective_executor_mgr.cc)\r\n168>bcast_ops.cc\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\tensor_coding.cc)\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\worker.cc)\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\message_wrappers.h(24): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/tensor.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\worker_cache_partial.cc)\r\n168>betainc_op.cc\r\n168>bias_op.cc\r\n170>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\distributed_runtime\\worker_session.cc)\r\n168>c:\\users\\john\\tensorflow\\tensorflow\\core\\kernels\\batchtospace_op.cc(198): warning C4002: too many actual parameters for macro 'TF_BATCHTOSPACE_BLOCK_DIMS_CASE'\r\n170>Done building project \"tf_core_distributed_runtime.vcxproj\" -- FAILED.\r\n168>bincount_op.cc\r\n168>bitcast_op.cc\r\n168>resource_ops.cc\r\n168>resources.cc\r\n168>stats_ops.cc\r\n168>broadcast_to_op.cc\r\n168>bucketize_op.cc\r\n168>candidate_sampler_ops.cc\r\n168>cast_op.cc\r\n168>cast_op_impl_bfloat.cc\r\n168>cast_op_impl_bool.cc\r\n168>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\kernels\\cast_op.cc)\r\n168>cast_op_impl_complex128.cc\r\n168>cast_op_impl_complex64.cc\r\n168>cast_op_impl_double.cc\r\n168>cast_op_impl_float.cc\r\n168>cast_op_impl_half.cc\r\n168>cast_op_impl_int16.cc\r\n168>cast_op_impl_int32.cc\r\n168>cast_op_impl_int64.cc\r\n168>cast_op_impl_int8.cc\r\n168>cast_op_impl_uint16.cc\r\n168>cast_op_impl_uint32.cc\r\n168>cast_op_impl_uint64.cc\r\n168>cast_op_impl_uint8.cc\r\n168>check_numerics_op.cc\r\n168>cholesky_grad.cc\r\n168>cholesky_op.cc\r\n168>collective_ops.cc\r\n168>colorspace_op.cc\r\n168>compare_and_bitpack_op.cc\r\n168>concat_lib_cpu.cc\r\n168>concat_lib_gpu.cc\r\n168>c:\\users\\john\\tensorflow\\tensorflow\\core\\kernels\\compare_and_bitpack_op.cc(99): warning C4805: '|': unsafe mix of type 'int' and type 'bool' in operation\r\n168>c:\\users\\john\\tensorflow\\tensorflow\\core\\kernels\\compare_and_bitpack_op.cc(92): note: while compiling class template member function 'void tensorflow::functor::ComputeShard<T,void,void>::Compute(Eigen::TensorMap<Eigen::Tensor<const T,2,1,IndexType>,16,Eigen::MakePointer>,Eigen::TensorMap<Eigen::Tensor<unsigned char,2,1,IndexType>,16,Eigen::MakePointer>,const T &,tensorflow::int64,tensorflow::int64)'\r\n168>        with\r\n168>        [\r\n168>            T=tensorflow::bfloat16,\r\n168>            IndexType=Eigen::DenseIndex\r\n168>        ]\r\n168>c:\\users\\john\\tensorflow\\tensorflow\\core\\kernels\\compare_and_bitpack_op.cc(149): note: see reference to function template instantiation 'void tensorflow::functor::ComputeShard<T,void,void>::Compute(Eigen::TensorMap<Eigen::Tensor<const T,2,1,IndexType>,16,Eigen::MakePointer>,Eigen::TensorMap<Eigen::Tensor<unsigned char,2,1,IndexType>,16,Eigen::MakePointer>,const T &,tensorflow::int64,tensorflow::int64)' being compiled\r\n168>        with\r\n168>        [\r\n168>            T=tensorflow::bfloat16,\r\n168>            IndexType=Eigen::DenseIndex\r\n168>        ]\r\n168>c:\\users\\john\\tensorflow\\tensorflow\\core\\kernels\\compare_and_bitpack_op.cc(149): note: see reference to class template instantiation 'tensorflow::functor::ComputeShard<T,void,void>' being compiled\r\n168>        with\r\n168>        [\r\n168>            T=tensorflow::bfloat16\r\n168>        ]\r\n168>c:\\users\\john\\tensorflow\\tensorflow\\core\\kernels\\compare_and_bitpack_op.cc(146): note: while compiling class template member function 'void tensorflow::functor::CompareAndBitpack<Device,T>::operator ()(tensorflow::OpKernelContext *,Eigen::TensorMap<Eigen::Tensor<const T,2,1,IndexType>,16,Eigen::MakePointer>,Eigen::TensorMap<Eigen::TensorFixedSize<const T,Eigen::Sizes<>,1,IndexType>,16,Eigen::MakePointer>,Eigen::TensorMap<Eigen::Tensor<unsigned char,2,1,IndexType>,16,Eigen::MakePointer>)'\r\n168>        with\r\n168>        [\r\n168>            Device=tensorflow::CPUDevice,\r\n168>            T=tensorflow::bfloat16,\r\n168>            IndexType=Eigen::DenseIndex\r\n168>        ]\r\n168>c:\\users\\john\\tensorflow\\tensorflow\\core\\kernels\\compare_and_bitpack_op.cc(71): note: see reference to function template instantiation 'void tensorflow::functor::CompareAndBitpack<Device,T>::operator ()(tensorflow::OpKernelContext *,Eigen::TensorMap<Eigen::Tensor<const T,2,1,IndexType>,16,Eigen::MakePointer>,Eigen::TensorMap<Eigen::TensorFixedSize<const T,Eigen::Sizes<>,1,IndexType>,16,Eigen::MakePointer>,Eigen::TensorMap<Eigen::Tensor<unsigned char,2,1,IndexType>,16,Eigen::MakePointer>)' being compiled\r\n168>        with\r\n168>        [\r\n168>            Device=tensorflow::CPUDevice,\r\n168>            T=tensorflow::bfloat16,\r\n168>            IndexType=Eigen::DenseIndex\r\n168>        ]\r\n168>c:\\users\\john\\tensorflow\\tensorflow\\core\\kernels\\compare_and_bitpack_op.cc(70): note: see reference to class template instantiation 'tensorflow::functor::CompareAndBitpack<Device,T>' being compiled\r\n168>        with\r\n168>        [\r\n168>            Device=tensorflow::CPUDevice,\r\n168>            T=tensorflow::bfloat16\r\n168>        ]\r\n168>c:\\users\\john\\tensorflow\\tensorflow\\core\\kernels\\compare_and_bitpack_op.cc(42): note: while compiling class template member function 'void tensorflow::CompareAndBitpackOp<tensorflow::CPUDevice,tensorflow::bfloat16>::Compute(tensorflow::OpKernelContext *)'\r\n168>c:\\users\\john\\tensorflow\\tensorflow\\core\\kernels\\compare_and_bitpack_op.cc(80): note: see reference to class template instantiation 'tensorflow::CompareAndBitpackOp<tensorflow::CPUDevice,tensorflow::bfloat16>' being compiled\r\n168>concat_op.cc\r\n168>conditional_accumulator_base.cc\r\n168>conditional_accumulator_base_op.cc\r\n168>conditional_accumulator_op.cc\r\n168>constant_op.cc\r\n168>control_flow_ops.cc\r\n168>conv_grad_filter_ops.cc\r\n168>conv_grad_input_ops.cc\r\n168>conv_grad_ops.cc\r\n168>conv_grad_ops_3d.cc\r\n168>conv_ops.cc\r\n168>conv_ops_3d.cc\r\n168>conv_ops_fused.cc\r\n168>conv_ops_using_gemm.cc\r\n168>count_up_to_op.cc\r\n168>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\kernels\\conv_ops_fused.cc)\r\n168>crop_and_resize_op.cc\r\n168>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\kernels\\conv_ops_using_gemm.cc)\r\n168>cross_op.cc\r\n168>ctc_decoder_ops.cc\r\n168>ctc_loss_op.cc\r\n168>cuda_solvers.cc\r\n168>cudnn_pooling_gpu.cc\r\n168>cudnn_rnn_ops.cc\r\n168>cwise_op_abs.cc\r\n168>cwise_op_acos.cc\r\n168>cwise_op_acosh.cc\r\n168>cwise_op_add_1.cc\r\n168>cwise_op_add_2.cc\r\n168>cwise_op_arg.cc\r\n168>cwise_op_asin.cc\r\n168>cwise_op_asinh.cc\r\n168>cwise_op_atan.cc\r\n168>cwise_op_atan2.cc\r\n168>cwise_op_atanh.cc\r\n168>cwise_op_bessel.cc\r\n168>cwise_op_bitwise_and.cc\r\n168>cwise_op_bitwise_or.cc\r\n168>cwise_op_bitwise_xor.cc\r\n168>cwise_op_ceil.cc\r\n168>cwise_op_clip.cc\r\n168>cwise_op_complex.cc\r\n168>cwise_op_conj.cc\r\n168>cwise_op_cos.cc\r\n168>cwise_op_cosh.cc\r\n168>cwise_op_digamma.cc\r\n168>cwise_op_div.cc\r\n168>cwise_op_equal_to_1.cc\r\n168>cwise_op_equal_to_2.cc\r\n168>cwise_op_erf.cc\r\n168>cwise_op_erfc.cc\r\n168>cwise_op_exp.cc\r\n168>cwise_op_expm1.cc\r\n168>cwise_op_floor.cc\r\n168>cwise_op_floor_div.cc\r\n168>cwise_op_floor_mod.cc\r\n168>cwise_op_greater.cc\r\n168>cwise_op_greater_equal.cc\r\n168>cwise_op_igammas.cc\r\n168>cwise_op_imag.cc\r\n168>cwise_op_invert.cc\r\n168>cwise_op_isfinite.cc\r\n168>cwise_op_isinf.cc\r\n168>cwise_op_isnan.cc\r\n168>cwise_op_left_shift.cc\r\n168>c:\\users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\external\\eigen_archive\\eigen\\src\\core\\products\\generalblockpanelkernel.h(1902): fatal error C1002: compiler is out of heap space in pass 2\r\n168>cwise_op_less.cc\r\n168>cl : Command line error D8040: error creating or communicating with child process\r\n168>Done building project \"tf_core_kernels.vcxproj\" -- FAILED.\r\n172>------ Build started: Project: tf_tools_transform_graph_lib, Configuration: Release x64 ------\r\n173>------ Build started: Project: tf_label_image_example, Configuration: Release x64 ------\r\n174>------ Build started: Project: grpc_tensorflow_server, Configuration: Release x64 ------\r\n175>------ Build started: Project: tf_tutorials_example_trainer, Configuration: Release x64 ------\r\n176>------ Build started: Project: benchmark_model, Configuration: Release x64 ------\r\n173>main.cc\r\n174>grpc_tensorflow_server.cc\r\n175>example_trainer.cc\r\n176>benchmark_model.cc\r\n172>add_default_attributes.cc\r\n172>backports.cc\r\n172>file_utils.cc\r\n172>flatten_atrous.cc\r\n172>fold_batch_norms.cc\r\n176>benchmark_model_main.cc\r\n172>fold_constants_lib.cc\r\n172>fold_old_batch_norms.cc\r\n172>freeze_requantization_ranges.cc\r\n175>c:\\users\\john\\tensorflow\\tensorflow\\cc\\ops\\standard_ops.h(19): fatal error C1083: Cannot open include file: 'tensorflow/cc/ops/array_ops.h': No such file or directory\r\n175>Done building project \"tf_tutorials_example_trainer.vcxproj\" -- FAILED.\r\n172>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\tools\\graph_transforms\\fold_constants_lib.cc)\r\n172>fuse_convolutions.cc\r\n172>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\tools\\graph_transforms\\backports.cc)\r\n172>insert_logging.cc\r\n172>obfuscate_names.cc\r\n172>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\tools\\graph_transforms\\fold_old_batch_norms.cc)\r\n172>quantize_nodes.cc\r\n172>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\tools\\graph_transforms\\fold_batch_norms.cc)\r\n172>quantize_weights.cc\r\n173>c:\\users\\john\\tensorflow\\tensorflow\\examples\\label_image\\main.cc(42): fatal error C1083: Cannot open include file: 'tensorflow/cc/ops/image_ops.h': No such file or directory\r\n173>Done building project \"tf_label_image_example.vcxproj\" -- FAILED.\r\n172>remove_attribute.cc\r\n172>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\tools\\graph_transforms\\fuse_convolutions.cc)\r\n172>remove_control_dependencies.cc\r\n172>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\tools\\graph_transforms\\insert_logging.cc)\r\n172>remove_device.cc\r\n172>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\tools\\graph_transforms\\obfuscate_names.cc)\r\n172>remove_nodes.cc\r\n172>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\tools\\graph_transforms\\quantize_weights.cc)\r\n172>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\tools\\graph_transforms\\quantize_nodes.cc)\r\n172>rename_attribute.cc\r\n172>rename_op.cc\r\n172>round_weights.cc\r\n172>set_device.cc\r\n172>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\tools\\graph_transforms\\remove_attribute.cc)\r\n172>sort_by_execution_order.cc\r\n174>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_cpu.dir\\Release\\accumulate_n_optimizer.obj'\r\n174>Done building project \"grpc_tensorflow_server.vcxproj\" -- FAILED.\r\n172>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\tools\\graph_transforms\\rename_attribute.cc)\r\n172>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\tools\\graph_transforms\\rename_op.cc)\r\n172>sparsify_gather.cc\r\n172>strip_unused_nodes.cc\r\n172>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\tools\\graph_transforms\\sparsify_gather.cc)\r\n172>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\tools\\graph_transforms\\sparsify_gather.cc)\r\n172>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\tools\\graph_transforms\\remove_device.cc)\r\n172>transform_graph.cc\r\n172>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\tools\\graph_transforms\\remove_nodes.cc)\r\n172>transform_utils.cc\r\n172>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\tools\\graph_transforms\\round_weights.cc)\r\n176>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_cpu.dir\\Release\\accumulate_n_optimizer.obj'\r\n176>Done building project \"benchmark_model.vcxproj\" -- FAILED.\r\n172>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\tools\\graph_transforms\\sort_by_execution_order.cc)\r\n172>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\tools\\graph_transforms\\strip_unused_nodes.cc)\r\n172>Done building project \"tf_tools_transform_graph_lib.vcxproj\" -- FAILED.\r\n177>------ Build started: Project: pywrap_tensorflow_internal_static, Configuration: Release x64 ------\r\n178>------ Build started: Project: summarize_graph, Configuration: Release x64 ------\r\n179>------ Build started: Project: compare_graphs, Configuration: Release x64 ------\r\n180>------ Build started: Project: transform_graph, Configuration: Release x64 ------\r\n179>compare_graphs.cc\r\n178>summarize_graph_main.cc\r\n180>transform_graph_main.cc\r\n177>Generating __force_rebuild\r\n177>\r\n177>Running SWIG to generate Python wrappers\r\n177>print_model_analysis.cc\r\n177>pywrap_tensor.cc\r\n177>pywrap_tfe_src.cc\r\n177>tf_session_helper.cc\r\n177>cpp_shape_inference.cc\r\n177>python_op_gen.cc\r\n177>python_op_gen_internal.cc\r\n177>bfloat16.cc\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\eager\\pywrap_tfe_src.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\eager\\pywrap_tfe_src.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\client\\tf_session_helper.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\client\\tf_session_helper.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\eager\\pywrap_tensor.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\eager\\pywrap_tensor.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\framework\\cpp_shape_inference.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\framework\\cpp_shape_inference.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\bfloat16.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\bfloat16.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\python\\framework\\python_op_gen.cc(23): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/op_def.pb_text.h': No such file or directory\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\python\\framework\\python_op_gen_internal.cc(24): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/op_def.pb_text.h': No such file or directory\r\n177>numpy.cc\r\n177>ndarray_tensor.cc\r\n177>ndarray_tensor_bridge.cc\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\ndarray_tensor.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\ndarray_tensor.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\eager\\pywrap_tfe_src.cc)\r\n177>py_func.cc\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\ndarray_tensor_bridge.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\ndarray_tensor_bridge.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\client\\tf_session_helper.cc)\r\n177>py_exception_registry.cc\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\profiler\\internal\\print_model_analysis.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\profiler\\internal\\print_model_analysis.cc)\r\n177>py_seq_tensor.cc\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\py_exception_registry.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\py_exception_registry.cc)\r\n180>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_tools_transform_graph_lib.dir\\Release\\backports.obj'\r\n179>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_tools_transform_graph_lib.dir\\Release\\backports.obj'\r\n180>Done building project \"transform_graph.vcxproj\" -- FAILED.\r\n177>py_util.cc\r\n179>Done building project \"compare_graphs.vcxproj\" -- FAILED.\r\n177>safe_ptr.cc\r\n177>py_record_reader.cc\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\io\\py_record_reader.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\io\\py_record_reader.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\safe_ptr.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\safe_ptr.cc)\r\n177>py_record_writer.cc\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\io\\py_record_writer.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\io\\py_record_writer.cc)\r\n178>LINK : fatal error LNK1181: cannot open input file 'C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_tools_transform_graph_lib.dir\\Release\\backports.obj'\r\n178>Done building project \"summarize_graph.vcxproj\" -- FAILED.\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\py_func.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\py_func.cc)\r\n177>kernel_registry.cc\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\py_func.cc)\r\n177>util.cc\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\py_seq_tensor.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\py_seq_tensor.cc)\r\n177>ops.cc\r\n177>scope.cc\r\n177>pywrap_tensorflow_internal.cc\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\util\\util.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\util\\util.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\pywrap_tensorflow_internal.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\pywrap_tensorflow_internal.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\cc\\framework\\scope.cc)\r\n177>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\pywrap_tensorflow_internal.cc)\r\n177>Done building project \"pywrap_tensorflow_internal_static.vcxproj\" -- FAILED.\r\n181>------ Build started: Project: pywrap_tensorflow_internal, Configuration: Release x64 ------\r\n181>Generating __force_rebuild\r\n181>\r\n181>Running SWIG to generate Python wrappers\r\n181>print_model_analysis.cc\r\n181>pywrap_tensor.cc\r\n181>pywrap_tfe_src.cc\r\n181>tf_session_helper.cc\r\n181>cpp_shape_inference.cc\r\n181>python_op_gen.cc\r\n181>python_op_gen_internal.cc\r\n181>bfloat16.cc\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\eager\\pywrap_tfe_src.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\eager\\pywrap_tfe_src.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\client\\tf_session_helper.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\client\\tf_session_helper.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\eager\\pywrap_tensor.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\eager\\pywrap_tensor.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\framework\\cpp_shape_inference.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\framework\\cpp_shape_inference.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\python\\framework\\python_op_gen.cc(23): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/op_def.pb_text.h': No such file or directory\r\n181>numpy.cc\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\bfloat16.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\bfloat16.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\python\\framework\\python_op_gen_internal.cc(24): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/op_def.pb_text.h': No such file or directory\r\n181>ndarray_tensor.cc\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\profiler\\internal\\print_model_analysis.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\core\\profiler\\internal\\print_model_analysis.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\ndarray_tensor.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\ndarray_tensor.cc)\r\n181>ndarray_tensor_bridge.cc\r\n181>py_func.cc\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\client\\tf_session_helper.cc)\r\n181>py_exception_registry.cc\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\ndarray_tensor_bridge.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\ndarray_tensor_bridge.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\py_exception_registry.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\py_exception_registry.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\eager\\pywrap_tfe_src.cc)\r\n181>py_seq_tensor.cc\r\n181>py_util.cc\r\n181>safe_ptr.cc\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\safe_ptr.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\safe_ptr.cc)\r\n181>py_record_reader.cc\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\io\\py_record_reader.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\io\\py_record_reader.cc)\r\n181>py_record_writer.cc\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\io\\py_record_writer.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\io\\py_record_writer.cc)\r\n181>kernel_registry.cc\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\py_func.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\py_func.cc)\r\n181>util.cc\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\py_func.cc)\r\n181>ops.cc\r\n181>scope.cc\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\py_seq_tensor.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\lib\\core\\py_seq_tensor.cc)\r\n181>pywrap_tensorflow_internal.cc\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\util\\util.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\python\\util\\util.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1113): warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\pywrap_tensorflow_internal.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\c\\c_api.h(1069): note: see declaration of 'TF_WhileParams' (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\pywrap_tensorflow_internal.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\cc\\framework\\scope.cc)\r\n181>c:\\users\\john\\tensorflow\\tensorflow\\core\\common_runtime\\device.h(37): fatal error C1083: Cannot open include file: 'tensorflow/core/framework/device_attributes.pb_text.h': No such file or directory (compiling source file C:\\Users\\john\\tensorflow\\tensorflow\\contrib\\cmake\\build\\pywrap_tensorflow_internal.cc)\r\n181>Done building project \"pywrap_tensorflow_internal.vcxproj\" -- FAILED.\r\n182>------ Build started: Project: _nearest_neighbor_ops, Configuration: Release x64 ------\r\n183>------ Build started: Project: _gru_ops, Configuration: Release x64 ------\r\n184>------ Build started: Project: _beam_search_ops, Configuration: Release x64 ------\r\n185>------ Build started: Project: _lstm_ops, Configuration: Release x64 ------\r\n186>------ Build started: Project: _periodic_resample_op, Configuration: Release x64 ------\r\n182>cl : Command line warning D9025: overriding '/DTF_COMPILE_LIBRARY' with '/UTF_COMPILE_LIBRARY'\r\n184>cl : Command line warning D9025: overriding '/DTF_COMPILE_LIBRARY' with '/UTF_COMPILE_LIBRARY'\r\n183>cl : Command line warning D9025: overriding '/DTF_COMPILE_LIBRARY' with '/UTF_COMPILE_LIBRARY'\r\n183>blas_gemm.cc\r\n185>cl : Command line warning D9025: overriding '/DTF_COMPILE_LIBRARY' with '/UTF_COMPILE_LIBRARY'\r\n186>cl : Command line warning D9025: overriding '/DTF_COMPILE_LIBRARY' with '/UTF_COMPILE_LIBRARY'\r\n184>beam_search_ops.cc\r\n182>cl : Command line warning D9025: overriding '/DTF_COMPILE_LIBRARY' with '/UTF_COMPILE_LIBRARY'\r\n182>cl : Command line warning D9025: overriding '/DTF_COMPILE_LIBRARY' with '/UTF_COMPILE_LIBRARY'\r\n182>hyperplane_lsh_probes.cc\r\n182>nearest_neighbor_ops.cc\r\n186>cl : Command line warning D9025: overriding '/DTF_COMPILE_LIBRARY' with '/UTF_COMPILE_LIBRARY'\r\n186>periodic_resample_op.cc\r\n186>cl : Command line warning D9025: overriding '/DTF_COMPILE_LIBRARY' with '/UTF_COMPILE_LIBRARY'\r\n185>blas_gemm.cc\r\n186>array_ops.cc\r\n183>cl : Command line warning D9025: overriding '/DTF_COMPILE_LIBRARY' with '/UTF_COMPILE_LIBRARY'\r\n183>gru_ops.cc\r\n185>cl : Command line warning D9025: overriding '/DTF_COMPILE_LIBRARY' with '/UTF_COMPILE_LIBRARY'\r\n185>lstm_ops.cc\r\n184>cl : Command line warning D9025: overriding '/DTF_COMPILE_LIBRARY' with '/UTF_COMPILE_LIBRARY'\r\n184>beam_search_ops.cc\r\n186>LINK : fatal error LNK1181: cannot open input file 'Release\\pywrap_tensorflow_internal.lib'\r\n186>Done building project \"_periodic_resample_op.vcxproj\" -- FAILED.\r\n182>LINK : fatal error LNK1181: cannot open input file 'Release\\pywrap_tensorflow_internal.lib'\r\n182>Done building project \"_nearest_neighbor_ops.vcxproj\" -- FAILED.\r\n184>LINK : fatal error LNK1181: cannot open input file 'Release\\pywrap_tensorflow_internal.lib'\r\n184>Done building project \"_beam_search_ops.vcxproj\" -- FAILED.\r\n183>cl : Command line warning D9025: overriding '/DTF_COMPILE_LIBRARY' with '/UTF_COMPILE_LIBRARY'\r\n183>gru_ops.cc\r\n185>cl : Command line warning D9025: overriding '/DTF_COMPILE_LIBRARY' with '/UTF_COMPILE_LIBRARY'\r\n185>lstm_ops.cc\r\n183>LINK : fatal error LNK1181: cannot open input file 'Release\\pywrap_tensorflow_internal.lib'\r\n183>Done building project \"_gru_ops.vcxproj\" -- FAILED.\r\n185>LINK : fatal error LNK1181: cannot open input file 'Release\\pywrap_tensorflow_internal.lib'\r\n185>Done building project \"_lstm_ops.vcxproj\" -- FAILED.\r\n187>------ Build started: Project: tf_python_api, Configuration: Release x64 ------\r\n188>------ Skipped Build: Project: INSTALL, Configuration: Release x64 ------\r\n188>Project not selected to build for this solution configuration \r\n187>Generating __init__.py files for Python API.\r\n187>The parameter is incorrect\r\n187>C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Enterprise\\Common7\\IDE\\VC\\VCTargets\\Microsoft.CppCommon.targets(171,5): error MSB6006: \"cmd.exe\" exited with code 1.\r\n187>Done building project \"tf_python_api.vcxproj\" -- FAILED.\r\n189>------ Skipped Build: Project: tf_python_build_pip_package, Configuration: Release x64 ------\r\n189>Project not selected to build for this solution configuration \r\n========== Build: 41 succeeded, 146 failed, 84 up-to-date, 2 skipped ==========\r\n\r\nPlease Let me know of any other details required\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23323", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23323/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23323/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23323/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23323", "id": 374717362, "node_id": "MDU6SXNzdWUzNzQ3MTczNjI=", "number": 23323, "title": "i encounter very strange and serious Bug with dataset feeding \uff08Emergency\uff09", "user": {"login": "henryatman", "id": 5210789, "node_id": "MDQ6VXNlcjUyMTA3ODk=", "avatar_url": "https://avatars1.githubusercontent.com/u/5210789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/henryatman", "html_url": "https://github.com/henryatman", "followers_url": "https://api.github.com/users/henryatman/followers", "following_url": "https://api.github.com/users/henryatman/following{/other_user}", "gists_url": "https://api.github.com/users/henryatman/gists{/gist_id}", "starred_url": "https://api.github.com/users/henryatman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/henryatman/subscriptions", "organizations_url": "https://api.github.com/users/henryatman/orgs", "repos_url": "https://api.github.com/users/henryatman/repos", "events_url": "https://api.github.com/users/henryatman/events{/privacy}", "received_events_url": "https://api.github.com/users/henryatman/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-10-28T04:55:10Z", "updated_at": "2018-12-07T18:53:56Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n**System information** MAC OS 10.14 And Ubuntu 18 either\r\n- TensorFlow version (you are using): 1.11.0\r\n\r\nMy model is LSTM + DNN, dataset structure is:\r\n\r\n[\r\n    [ [1,2,3],4,5,6 ],\r\n    [ [11,22,33],44,55,66 ],\r\n    [ [4,5,6],7,8,9 ],\r\n]\r\n\r\nconvert to Dict is\r\n\r\n{\r\n    a: [ [1,2,3], [11,22,33], [4,5,6] ]\r\n    b: [4,44,7]\r\n    c: [5,55,8]\r\n    d: [6,66,9]\r\n}\r\n\r\nit's work well but when LSTM exceed 31 step, i will reshape feature \"a\" to (time_step, columns) for LSTM input, when time_step more than 31, like 32, 33..., software will crash, and show bug info below:\r\n\r\n`Retval[0] does not have value`\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1295, in _do_call\r\n    return fn(*args)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1277, in _run_fn\r\n    options, feed_dict, fetch_list, target_list, run_metadata)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1375, in _call_tf_sessionrun\r\n    run_metadata)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Retval[0] does not have value\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"estimator.py\", line 340, in <module>\r\n    tf.app.run(main)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/platform/app.py\", line 125, in run\r\n    _sys.exit(main(argv))\r\n  File \"estimator.py\", line 275, in main\r\n    steps=args.train_steps\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py\", line 356, in train\r\n    loss = self._train_model(input_fn, hooks, saving_listeners)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py\", line 1181, in _train_model\r\n    return self._train_model_default(input_fn, hooks, saving_listeners)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py\", line 1215, in _train_model_default\r\n    saving_listeners)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/estimator/estimator.py\", line 1409, in _train_with_estimator_spec\r\n    _, loss = mon_sess.run([estimator_spec.train_op, estimator_spec.loss])\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/training/monitored_session.py\", line 671, in run\r\n    run_metadata=run_metadata)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/training/monitored_session.py\", line 1148, in run\r\n    run_metadata=run_metadata)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/training/monitored_session.py\", line 1239, in run\r\n    raise six.reraise(*original_exc_info)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/six.py\", line 693, in reraise\r\n    raise value\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/training/monitored_session.py\", line 1224, in run\r\n    return self._sess.run(*args, **kwargs)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/training/monitored_session.py\", line 1296, in run\r\n    run_metadata=run_metadata)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/training/monitored_session.py\", line 1076, in run\r\n    return self._sess.run(*args, **kwargs)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 887, in run\r\n    run_metadata_ptr)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1110, in _run\r\n    feed_dict_tensor, options, run_metadata)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1286, in _do_run\r\n    run_metadata)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1314, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Retval[0] does not have value\r\n``` \r\n\r\ni'm first think reason is data too long\uff0cso i change and reduce columns (32, 50) to (32, 30), (32, 10), (32, 1), it's can't work, but i change and reduce shape to (31, 50), (31, 30), (31, 60), (32, 1), (16, 60), (2, 16) it's work well, just say, when LSTM time step exceed 31, Tensorflow can't work,\r\n\r\n**Who will benefit with this fix?**\r\n\r\nevery one\r\n\r\n**Any Other info.**\r\n\r\ni use tech beblow:\r\n\r\n1. tensorflow estimator + dataset,\r\n2. RNN ( LSTM + MUILTI + Dynamic),\r\n3. DNN( fully connected layer )\r\n\r\nit's strange Bug and important Bug, even cause i can't running completely now\uff0chope official can fix Bug as soon as possible\uff0cvery thanks\r\n\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23320", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23320/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23320/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23320/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23320", "id": 374700585, "node_id": "MDU6SXNzdWUzNzQ3MDA1ODU=", "number": 23320, "title": "[Feature Request] Addition of new operation to Tensorflow Lite for \"ENet\"", "user": {"login": "PINTO0309", "id": 33194443, "node_id": "MDQ6VXNlcjMzMTk0NDQz", "avatar_url": "https://avatars3.githubusercontent.com/u/33194443?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PINTO0309", "html_url": "https://github.com/PINTO0309", "followers_url": "https://api.github.com/users/PINTO0309/followers", "following_url": "https://api.github.com/users/PINTO0309/following{/other_user}", "gists_url": "https://api.github.com/users/PINTO0309/gists{/gist_id}", "starred_url": "https://api.github.com/users/PINTO0309/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PINTO0309/subscriptions", "organizations_url": "https://api.github.com/users/PINTO0309/orgs", "repos_url": "https://api.github.com/users/PINTO0309/repos", "events_url": "https://api.github.com/users/PINTO0309/events{/privacy}", "received_events_url": "https://api.github.com/users/PINTO0309/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-10-27T23:36:56Z", "updated_at": "2019-12-29T13:41:13Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n**System information**\r\n- TensorFlow version (you are using): **[Tensorflow Lite v1.11.0 (Self-Build)](https://github.com/PINTO0309/Tensorflow-bin.git)**\r\n- Hardware: RaspberryPi3\r\n- OS: Raspbian Stretch\r\n- Are you willing to contribute it (Yes/No): No (Because, There are few Custom Operation tutorials, and I can not write C++ programs.)\r\n\r\n**Describe the feature and the current behavior/state.**\r\nIf I implement \"semantic segmentation\" model \"ENet\", I can not do it unless you support various behaviors of the unpooling layer.\r\n\r\n- **Layer that I would like to support with Tensorflow Lite**\r\n    - ~FloorMod~\r\n    - ~Range~\r\n    - ~Rank~\r\n    - Abs\r\n    - MaxPoolWithArgmax\r\n    - ~ScatterNd~\r\n    - SparseTensor\r\n    - sparse_add\r\n    - ~gather_nd~\r\n\r\n- **Sample message of Unsupport Error**\r\n```Python\r\nTraceback (most recent call last):\r\n  File \"main.py\", line 5, in <module>\r\n    interpreter = tf.contrib.lite.Interpreter(model_path=\"semanticsegmentation_enet_non_quantized.tflite\")\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/lite/python/interpreter.py\", line 53, in __init__\r\n    model_path))\r\nValueError: Didn't find custom op for name 'FloorMod' with version 1\r\nDidn't find custom op for name 'Range' with version 1\r\nDidn't find custom op for name 'Rank' with version 1\r\nDidn't find custom op for name 'Abs' with version 1\r\nDidn't find custom op for name 'MaxPoolWithArgmax' with version 1\r\nDidn't find custom op for name 'ScatterNd' with version 1\r\nRegistration failed.\r\n```\r\n\r\n**Will this change the current api? How?**\r\nYes.\r\nCustom Operation must be officially implemented.\r\n\r\n**Who will benefit with this feature?**\r\n- Engineers who study automatic driving technology in general\r\n- Engineer who studies fast inference using lightweight mobile\r\n- Engineers to study lightweight models\r\n\r\n**Any Other info.**\r\nMy repository and sample program are below.  \r\nFor Python2.x / Python3.x.\r\n  \r\n**https://github.com/PINTO0309/TensorFlow-ENet.git**  \r\n**https://github.com/PINTO0309/TensorflowLite-UNet.git**  \r\n  \r\n<details><summary>\u3010Reference\u3011 Model Logic</summary><div>\r\n\r\n```Python\r\nimport tensorflow as tf\r\nfrom tensorflow.contrib.layers.python.layers import initializers\r\nslim = tf.contrib.slim\r\n\r\n@slim.add_arg_scope\r\ndef prelu(x, scope, decoder=False):\r\n\r\n    #If decoder, then perform relu and just return the output\r\n    if decoder:\r\n        return tf.nn.relu(x, name=scope)\r\n\r\n    alpha= tf.get_variable(scope + 'alpha', x.get_shape()[-1],\r\n                       initializer=tf.constant_initializer(0.0),\r\n                        dtype=tf.float32)\r\n    pos = tf.nn.relu(x)\r\n    neg = alpha * (x - abs(x)) * 0.5\r\n    return pos + neg\r\n\r\ndef spatial_dropout(x, p, seed, scope, is_training=True):\r\n\r\n    if is_training:\r\n        keep_prob = 1.0 - p\r\n        input_shape = x.get_shape().as_list()\r\n        noise_shape = tf.constant(value=[input_shape[0], 1, 1, input_shape[3]])\r\n        output = tf.nn.dropout(x, keep_prob, noise_shape, seed=seed, name=scope)\r\n\r\n        return output\r\n\r\n    return x\r\n\r\ndef unpool(updates, mask, k_size=[1, 2, 2, 1], output_shape=None, scope=''):\r\n\r\n    with tf.variable_scope(scope):\r\n        mask = tf.cast(mask, tf.int32)\r\n        input_shape = tf.shape(updates, out_type=tf.int32)\r\n        #  calculation new shape\r\n        if output_shape is None:\r\n            output_shape = (input_shape[0], input_shape[1] * ksize[1], input_shape[2] * ksize[2], input_shape[3])\r\n\r\n        # calculation indices for batch, height, width and feature maps\r\n        one_like_mask = tf.ones_like(mask, dtype=tf.int32)\r\n        batch_shape = tf.concat([[input_shape[0]], [1], [1], [1]], 0)\r\n        batch_range = tf.reshape(tf.range(output_shape[0], dtype=tf.int32), shape=batch_shape)\r\n        b = one_like_mask * batch_range\r\n        y = mask // (output_shape[2] * output_shape[3])\r\n        x = (mask // output_shape[3]) % output_shape[2] #mask % (output_shape[2] * output_shape[3]) // output_shape[3]\r\n        feature_range = tf.range(output_shape[3], dtype=tf.int32)\r\n        f = one_like_mask * feature_range\r\n\r\n        # transpose indices & reshape update values to one dimension\r\n        updates_size = tf.size(updates)\r\n        indices = tf.transpose(tf.reshape(tf.stack([b, y, x, f]), [4, updates_size]))\r\n        values = tf.reshape(updates, [updates_size])\r\n        ret = tf.scatter_nd(indices, values, output_shape)\r\n        return ret\r\n\r\n@slim.add_arg_scope\r\ndef initial_block(inputs, is_training=True, scope='initial_block'):\r\n\r\n    #Convolutional branch\r\n    net_conv = slim.conv2d(inputs, 13, [3,3], stride=2, activation_fn=None, scope=scope+'_conv')\r\n    net_conv = slim.batch_norm(net_conv, is_training=is_training, fused=True, scope=scope+'_batchnorm')\r\n    net_conv = prelu(net_conv, scope=scope+'_prelu')\r\n\r\n    #Max pool branch\r\n    net_pool = slim.max_pool2d(inputs, [2,2], stride=2, scope=scope+'_max_pool')\r\n\r\n    #Concatenated output - does it matter max pool comes first or conv comes first? probably not.\r\n    net_concatenated = tf.concat([net_conv, net_pool], axis=3, name=scope+'_concat')\r\n    return net_concatenated\r\n\r\n@slim.add_arg_scope\r\ndef bottleneck(inputs,\r\n               output_depth,\r\n               filter_size,\r\n               regularizer_prob,\r\n               projection_ratio=4,\r\n               seed=0,\r\n               is_training=True,\r\n               downsampling=False,\r\n               upsampling=False,\r\n               pooling_indices=None,\r\n               output_shape=None,\r\n               dilated=False,\r\n               dilation_rate=None,\r\n               asymmetric=False,\r\n               decoder=False,\r\n               scope='bottleneck'):\r\n\r\n    #Calculate the depth reduction based on the projection ratio used in 1x1 convolution.\r\n    reduced_depth = int(inputs.get_shape().as_list()[3] / projection_ratio)\r\n\r\n    with slim.arg_scope([prelu], decoder=decoder):\r\n\r\n        #=============DOWNSAMPLING BOTTLENECK====================\r\n        if downsampling:\r\n            #=============MAIN BRANCH=============\r\n            #Just perform a max pooling\r\n            net_main, pooling_indices = tf.nn.max_pool_with_argmax(inputs,\r\n                                                                   ksize=[1,2,2,1],\r\n                                                                   strides=[1,2,2,1],\r\n                                                                   padding='SAME',\r\n                                                                   name=scope+'_main_max_pool')\r\n\r\n            #First get the difference in depth to pad, then pad with zeros only on the last dimension.\r\n            inputs_shape = inputs.get_shape().as_list()\r\n            depth_to_pad = abs(inputs_shape[3] - output_depth)\r\n            paddings = tf.convert_to_tensor([[0,0], [0,0], [0,0], [0, depth_to_pad]])\r\n            net_main = tf.pad(net_main, paddings=paddings, name=scope+'_main_padding')\r\n\r\n            #=============SUB BRANCH==============\r\n            #First projection that has a 2x2 kernel and stride 2\r\n            net = slim.conv2d(inputs, reduced_depth, [2,2], stride=2, scope=scope+'_conv1')\r\n            net = slim.batch_norm(net, is_training=is_training, scope=scope+'_batch_norm1')\r\n            net = prelu(net, scope=scope+'_prelu1')\r\n\r\n            #Second conv block\r\n            net = slim.conv2d(net, reduced_depth, [filter_size, filter_size], scope=scope+'_conv2')\r\n            net = slim.batch_norm(net, is_training=is_training, scope=scope+'_batch_norm2')\r\n            net = prelu(net, scope=scope+'_prelu2')\r\n\r\n            #Final projection with 1x1 kernel\r\n            net = slim.conv2d(net, output_depth, [1,1], scope=scope+'_conv3')\r\n            net = slim.batch_norm(net, is_training=is_training, scope=scope+'_batch_norm3')\r\n            net = prelu(net, scope=scope+'_prelu3')\r\n\r\n            #Regularizer\r\n            net = spatial_dropout(net, p=regularizer_prob, seed=seed, scope=scope+'_spatial_dropout')\r\n\r\n            #Finally, combine the two branches together via an element-wise addition\r\n            net = tf.add(net, net_main, name=scope+'_add')\r\n            net = prelu(net, scope=scope+'_last_prelu')\r\n\r\n            #also return inputs shape for convenience later\r\n            return net, pooling_indices, inputs_shape\r\n\r\n        #============DILATION CONVOLUTION BOTTLENECK====================\r\n        #Everything is the same as a regular bottleneck except for the dilation rate argument\r\n        elif dilated:\r\n            #Check if dilation rate is given\r\n            if not dilation_rate:\r\n                raise ValueError('Dilation rate is not given.')\r\n\r\n            #Save the main branch for addition later\r\n            net_main = inputs\r\n\r\n            #First projection with 1x1 kernel (dimensionality reduction)\r\n            net = slim.conv2d(inputs, reduced_depth, [1,1], scope=scope+'_conv1')\r\n            net = slim.batch_norm(net, is_training=is_training, scope=scope+'_batch_norm1')\r\n            net = prelu(net, scope=scope+'_prelu1')\r\n\r\n            #Second conv block --- apply dilated convolution here\r\n            net = slim.conv2d(net, reduced_depth, [filter_size, filter_size], rate=dilation_rate, scope=scope+'_dilated_conv2')\r\n            net = slim.batch_norm(net, is_training=is_training, scope=scope+'_batch_norm2')\r\n            net = prelu(net, scope=scope+'_prelu2')\r\n\r\n            #Final projection with 1x1 kernel (Expansion)\r\n            net = slim.conv2d(net, output_depth, [1,1], scope=scope+'_conv3')\r\n            net = slim.batch_norm(net, is_training=is_training, scope=scope+'_batch_norm3')\r\n            net = prelu(net, scope=scope+'_prelu3')\r\n\r\n            #Regularizer\r\n            net = spatial_dropout(net, p=regularizer_prob, seed=seed, scope=scope+'_spatial_dropout')\r\n            net = prelu(net, scope=scope+'_prelu4')\r\n\r\n            #Add the main branch\r\n            net = tf.add(net_main, net, name=scope+'_add_dilated')\r\n            net = prelu(net, scope=scope+'_last_prelu')\r\n\r\n            return net\r\n\r\n        #===========ASYMMETRIC CONVOLUTION BOTTLENECK==============\r\n        #Everything is the same as a regular bottleneck except for a [5,5] kernel decomposed into two [5,1] then [1,5]\r\n        elif asymmetric:\r\n            #Save the main branch for addition later\r\n            net_main = inputs\r\n\r\n            #First projection with 1x1 kernel (dimensionality reduction)\r\n            net = slim.conv2d(inputs, reduced_depth, [1,1], scope=scope+'_conv1')\r\n            net = slim.batch_norm(net, is_training=is_training, scope=scope+'_batch_norm1')\r\n            net = prelu(net, scope=scope+'_prelu1')\r\n\r\n            #Second conv block --- apply asymmetric conv here\r\n            net = slim.conv2d(net, reduced_depth, [filter_size, 1], scope=scope+'_asymmetric_conv2a')\r\n            net = slim.conv2d(net, reduced_depth, [1, filter_size], scope=scope+'_asymmetric_conv2b')\r\n            net = slim.batch_norm(net, is_training=is_training, scope=scope+'_batch_norm2')\r\n            net = prelu(net, scope=scope+'_prelu2')\r\n\r\n            #Final projection with 1x1 kernel\r\n            net = slim.conv2d(net, output_depth, [1,1], scope=scope+'_conv3')\r\n            net = slim.batch_norm(net, is_training=is_training, scope=scope+'_batch_norm3')\r\n            net = prelu(net, scope=scope+'_prelu3')\r\n\r\n            #Regularizer\r\n            net = spatial_dropout(net, p=regularizer_prob, seed=seed, scope=scope+'_spatial_dropout')\r\n            net = prelu(net, scope=scope+'_prelu4')\r\n\r\n            #Add the main branch\r\n            net = tf.add(net_main, net, name=scope+'_add_asymmetric')\r\n            net = prelu(net, scope=scope+'_last_prelu')\r\n\r\n            return net\r\n\r\n        #============UPSAMPLING BOTTLENECK================\r\n        #Everything is the same as a regular one, except convolution becomes transposed.\r\n        elif upsampling:\r\n            #Check if pooling indices is given\r\n            if pooling_indices == None:\r\n                raise ValueError('Pooling indices are not given.')\r\n\r\n            #Check output_shape given or not\r\n            if output_shape == None:\r\n                raise ValueError('Output depth is not given')\r\n\r\n            #=======MAIN BRANCH=======\r\n            #Main branch to upsample. output shape must match with the shape of the layer that was pooled initially, in order\r\n            #for the pooling indices to work correctly. However, the initial pooled layer was padded, so need to reduce dimension\r\n            #before unpooling. In the paper, padding is replaced with convolution for this purpose of reducing the depth!\r\n            net_unpool = slim.conv2d(inputs, output_depth, [1,1], scope=scope+'_main_conv1')\r\n            net_unpool = slim.batch_norm(net_unpool, is_training=is_training, scope=scope+'batch_norm1')\r\n            net_unpool = unpool(net_unpool, pooling_indices, output_shape=output_shape, scope='unpool')\r\n\r\n            #======SUB BRANCH=======\r\n            #First 1x1 projection to reduce depth\r\n            net = slim.conv2d(inputs, reduced_depth, [1,1], scope=scope+'_conv1')\r\n            net = slim.batch_norm(net, is_training=is_training, scope=scope+'_batch_norm2')\r\n            net = prelu(net, scope=scope+'_prelu1')\r\n\r\n            #Second conv block -----------------------------> NOTE: using tf.nn.conv2d_transpose for variable input shape.\r\n            net_unpool_shape = net_unpool.get_shape().as_list()\r\n            output_shape = [net_unpool_shape[0], net_unpool_shape[1], net_unpool_shape[2], reduced_depth]\r\n            output_shape = tf.convert_to_tensor(output_shape)\r\n            filter_size = [filter_size, filter_size, reduced_depth, reduced_depth]\r\n            filters = tf.get_variable(shape=filter_size, initializer=initializers.xavier_initializer(), dtype=tf.float32, name=scope+'_transposed_conv2_filters')\r\n\r\n            # net = slim.conv2d_transpose(net, reduced_depth, [filter_size, filter_size], stride=2, scope=scope+'_transposed_conv2')\r\n            net = tf.nn.conv2d_transpose(net, filter=filters, strides=[1,2,2,1], output_shape=output_shape, name=scope+'_transposed_conv2')\r\n            net = slim.batch_norm(net, is_training=is_training, scope=scope+'_batch_norm3')\r\n            net = prelu(net, scope=scope+'_prelu2')\r\n\r\n            #Final projection with 1x1 kernel\r\n            net = slim.conv2d(net, output_depth, [1,1], scope=scope+'_conv3')\r\n            net = slim.batch_norm(net, is_training=is_training, scope=scope+'_batch_norm4')\r\n            net = prelu(net, scope=scope+'_prelu3')\r\n\r\n            #Regularizer\r\n            net = spatial_dropout(net, p=regularizer_prob, seed=seed, scope=scope+'_spatial_dropout')\r\n            net = prelu(net, scope=scope+'_prelu4')\r\n\r\n            #Finally, add the unpooling layer and the sub branch together\r\n            net = tf.add(net, net_unpool, name=scope+'_add_upsample')\r\n            net = prelu(net, scope=scope+'_last_prelu')\r\n\r\n            return net\r\n\r\n        #OTHERWISE, just perform a regular bottleneck!\r\n        #==============REGULAR BOTTLENECK==================\r\n        #Save the main branch for addition later\r\n        net_main = inputs\r\n\r\n        #First projection with 1x1 kernel\r\n        net = slim.conv2d(inputs, reduced_depth, [1,1], scope=scope+'_conv1')\r\n        net = slim.batch_norm(net, is_training=is_training, scope=scope+'_batch_norm1')\r\n        net = prelu(net, scope=scope+'_prelu1')\r\n\r\n        #Second conv block\r\n        net = slim.conv2d(net, reduced_depth, [filter_size, filter_size], scope=scope+'_conv2')\r\n        net = slim.batch_norm(net, is_training=is_training, scope=scope+'_batch_norm2')\r\n        net = prelu(net, scope=scope+'_prelu2')\r\n\r\n        #Final projection with 1x1 kernel\r\n        net = slim.conv2d(net, output_depth, [1,1], scope=scope+'_conv3')\r\n        net = slim.batch_norm(net, is_training=is_training, scope=scope+'_batch_norm3')\r\n        net = prelu(net, scope=scope+'_prelu3')\r\n\r\n        #Regularizer\r\n        net = spatial_dropout(net, p=regularizer_prob, seed=seed, scope=scope+'_spatial_dropout')\r\n        net = prelu(net, scope=scope+'_prelu4')\r\n\r\n        #Add the main branch\r\n        net = tf.add(net_main, net, name=scope+'_add_regular')\r\n        net = prelu(net, scope=scope+'_last_prelu')\r\n\r\n        return net\r\n\r\n#Now actually start building the network\r\ndef ENet(inputs,\r\n         num_classes,\r\n         batch_size,\r\n         num_initial_blocks=1,\r\n         stage_two_repeat=2,\r\n         skip_connections=True,\r\n         reuse=None,\r\n         is_training=True,\r\n         scope='ENet'):\r\n\r\n    #Set the shape of the inputs first to get the batch_size information\r\n    inputs_shape = inputs.get_shape().as_list()\r\n    inputs.set_shape(shape=(batch_size, inputs_shape[1], inputs_shape[2], inputs_shape[3]))\r\n\r\n    with tf.variable_scope(scope, reuse=reuse):\r\n        #Set the primary arg scopes. Fused batch_norm is faster than normal batch norm.\r\n        with slim.arg_scope([initial_block, bottleneck], is_training=is_training),\\\r\n             slim.arg_scope([slim.batch_norm], fused=True), \\\r\n             slim.arg_scope([slim.conv2d, slim.conv2d_transpose], activation_fn=None): \r\n            #=================INITIAL BLOCK=================\r\n            net = initial_block(inputs, scope='initial_block_1')\r\n            for i in xrange(2, max(num_initial_blocks, 1) + 1):\r\n                net = initial_block(net, scope='initial_block_' + str(i))\r\n\r\n            #Save for skip connection later\r\n            if skip_connections:\r\n                net_one = net\r\n\r\n            #===================STAGE ONE=======================\r\n            net, pooling_indices_1, inputs_shape_1 = bottleneck(net, output_depth=64, filter_size=3, regularizer_prob=0.01, downsampling=True, scope='bottleneck1_0')\r\n            net = bottleneck(net, output_depth=64, filter_size=3, regularizer_prob=0.01, scope='bottleneck1_1')\r\n            net = bottleneck(net, output_depth=64, filter_size=3, regularizer_prob=0.01, scope='bottleneck1_2')\r\n            net = bottleneck(net, output_depth=64, filter_size=3, regularizer_prob=0.01, scope='bottleneck1_3')\r\n            net = bottleneck(net, output_depth=64, filter_size=3, regularizer_prob=0.01, scope='bottleneck1_4')\r\n\r\n            #Save for skip connection later\r\n            if skip_connections:\r\n                net_two = net\r\n\r\n            #regularization prob is 0.1 from bottleneck 2.0 onwards\r\n            with slim.arg_scope([bottleneck], regularizer_prob=0.1):\r\n                net, pooling_indices_2, inputs_shape_2 = bottleneck(net, output_depth=128, filter_size=3, downsampling=True, scope='bottleneck2_0')\r\n                \r\n                #Repeat the stage two at least twice to get stage 2 and 3:\r\n                for i in xrange(2, max(stage_two_repeat, 2) + 2):\r\n                    net = bottleneck(net, output_depth=128, filter_size=3, scope='bottleneck'+str(i)+'_1')\r\n                    net = bottleneck(net, output_depth=128, filter_size=3, dilated=True, dilation_rate=2, scope='bottleneck'+str(i)+'_2')\r\n                    net = bottleneck(net, output_depth=128, filter_size=5, asymmetric=True, scope='bottleneck'+str(i)+'_3')\r\n                    net = bottleneck(net, output_depth=128, filter_size=3, dilated=True, dilation_rate=4, scope='bottleneck'+str(i)+'_4')\r\n                    net = bottleneck(net, output_depth=128, filter_size=3, scope='bottleneck'+str(i)+'_5')\r\n                    net = bottleneck(net, output_depth=128, filter_size=3, dilated=True, dilation_rate=8, scope='bottleneck'+str(i)+'_6')\r\n                    net = bottleneck(net, output_depth=128, filter_size=5, asymmetric=True, scope='bottleneck'+str(i)+'_7')\r\n                    net = bottleneck(net, output_depth=128, filter_size=3, dilated=True, dilation_rate=16, scope='bottleneck'+str(i)+'_8')\r\n\r\n            with slim.arg_scope([bottleneck], regularizer_prob=0.1, decoder=True):\r\n                #===================STAGE FOUR========================\r\n                bottleneck_scope_name = \"bottleneck\" + str(i + 1)\r\n\r\n                #The decoder section, so start to upsample.\r\n                net = bottleneck(net, output_depth=64, filter_size=3, upsampling=True,\r\n                                 pooling_indices=pooling_indices_2, output_shape=inputs_shape_2, scope=bottleneck_scope_name+'_0')\r\n\r\n                #Perform skip connections here\r\n                if skip_connections:\r\n                    net = tf.add(net, net_two, name=bottleneck_scope_name+'_skip_connection')\r\n\r\n                net = bottleneck(net, output_depth=64, filter_size=3, scope=bottleneck_scope_name+'_1')\r\n                net = bottleneck(net, output_depth=64, filter_size=3, scope=bottleneck_scope_name+'_2')\r\n\r\n                #===================STAGE FIVE========================\r\n                bottleneck_scope_name = \"bottleneck\" + str(i + 2)\r\n\r\n                net = bottleneck(net, output_depth=16, filter_size=3, upsampling=True,\r\n                                 pooling_indices=pooling_indices_1, output_shape=inputs_shape_1, scope=bottleneck_scope_name+'_0')\r\n\r\n                #perform skip connections here\r\n                if skip_connections:\r\n                    net = tf.add(net, net_one, name=bottleneck_scope_name+'_skip_connection')\r\n\r\n                net = bottleneck(net, output_depth=16, filter_size=3, scope=bottleneck_scope_name+'_1')\r\n\r\n            #=============FINAL CONVOLUTION=============\r\n            logits = slim.conv2d_transpose(net, num_classes, [2,2], stride=2, scope='fullconv')\r\n            probabilities = tf.nn.softmax(logits, name='logits_to_softmax')\r\n\r\n        return logits, probabilities\r\n\r\n\r\ndef ENet_arg_scope(weight_decay=2e-4,\r\n                   batch_norm_decay=0.1,\r\n                   batch_norm_epsilon=0.001):\r\n\r\n  # Set weight_decay for weights in conv2d and separable_conv2d layers.\r\n  with slim.arg_scope([slim.conv2d],\r\n                      weights_regularizer=slim.l2_regularizer(weight_decay),\r\n                      biases_regularizer=slim.l2_regularizer(weight_decay)):\r\n\r\n    # Set parameters for batch_norm.\r\n    with slim.arg_scope([slim.batch_norm],\r\n                        decay=batch_norm_decay,\r\n                        epsilon=batch_norm_epsilon) as scope:\r\n      return scope\r\n```\r\n</div></details><br>"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23316", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23316/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23316/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23316/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23316", "id": 374643723, "node_id": "MDU6SXNzdWUzNzQ2NDM3MjM=", "number": 23316, "title": "Wrong gradients in combination with placeholders.", "user": {"login": "pesser", "id": 2175508, "node_id": "MDQ6VXNlcjIxNzU1MDg=", "avatar_url": "https://avatars3.githubusercontent.com/u/2175508?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pesser", "html_url": "https://github.com/pesser", "followers_url": "https://api.github.com/users/pesser/followers", "following_url": "https://api.github.com/users/pesser/following{/other_user}", "gists_url": "https://api.github.com/users/pesser/gists{/gist_id}", "starred_url": "https://api.github.com/users/pesser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pesser/subscriptions", "organizations_url": "https://api.github.com/users/pesser/orgs", "repos_url": "https://api.github.com/users/pesser/repos", "events_url": "https://api.github.com/users/pesser/events{/privacy}", "received_events_url": "https://api.github.com/users/pesser/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-10-27T13:11:31Z", "updated_at": "2018-12-21T18:53:23Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): `Ubuntu 14.04.5 LTS`, `Debian 4.18.10-2`, `Archlinux`\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): `v1.4.0-19-ga52c8d9 1.4.1`, `v1.10.1-0-g4dcfddc5d1 1.10.1`, `1.10.0`, \r\n- Python version: `3.6.0`, `3.4.3`, `3.7.0`\r\n- CUDA/cuDNN version: `9.0/7.1.2`, `8.0.61/6.0.21`, `CPU only`\r\n- GPU model and memory: Titan 12GB\r\n\r\n**Describe the current behavior**\r\nIncorrect gradient computation when placeholder weights are involved. In a situation where two variables are involved, optimization of one of the variables leads to wrong gradients for the other variable when placeholders weights are used.\r\n\r\n**Describe the expected behavior**\r\nGradients should be correct and there should be no difference in gradients whether a placeholder or another variable is used.\r\n\r\n**Code to reproduce the issue**\r\nHere is a minimal example to reproduce the issue (the case of `indirect = True` can be used as a workaround and shows the expected output in contrast of `indirect = False`):\r\n\r\n```\r\nimport tensorflow as tf                                                                                   \r\n                                                                                                          \r\ndef test(indirect):                                                                                       \r\n    print(\"indirect:\", indirect)                                                                          \r\n    a = tf.Variable(1.0)                                                                                  \r\n    b = tf.Variable(2.0)                                                                                  \r\n    weight_var = tf.Variable(3.0, trainable = False)                                                      \r\n                                                                                                          \r\n    weight_placeholder = tf.placeholder(tf.float32)                                                       \r\n    if indirect:                                                                                          \r\n        weight = tf.assign(weight_var, weight_placeholder)                                                \r\n    else:                                                                                                 \r\n        weight = weight_placeholder                                                                       \r\n                                                                                                          \r\n    common_loss = tf.square(a*b)                                                                          \r\n    b_only_loss = tf.square(b)                                                                            \r\n                                                                                                          \r\n    common_grads = tf.gradients(                                                                          \r\n            common_loss,                                                                                  \r\n            [b])                                                                                          \r\n    b_only_grads = tf.gradients(                                                                          \r\n            weight*b_only_loss,                                                                           \r\n            [b])                                                                                          \r\n    summed_grads = tf.gradients(                                                                          \r\n            common_loss + weight*b_only_loss,                                                             \r\n            [b])                                                                                          \r\n    grad_diff = tf.abs(common_grads[0] + b_only_grads[0] - summed_grads[0])                               \r\n                                                                                                          \r\n    optimizer = tf.train.GradientDescentOptimizer(learning_rate=1.0)                                      \r\n    opt_a = optimizer.minimize(common_loss, var_list=[a])                                                 \r\n                                                                                                          \r\n    feed={weight_placeholder: 0.0}                                                                        \r\n    fetch={\"common_grads\": common_grads, \"b_only_grads\": b_only_grads,                                    \r\n           \"summed_grads\": summed_grads, \"grad_diff\": grad_diff,                                          \r\n           \"opt_a\": opt_a}                                                                                \r\n    s = tf.Session()                                                                                      \r\n    s.run(tf.global_variables_initializer())                                                              \r\n    r = s.run(fetch, feed)                                                                                \r\n    for k in sorted(r):                                                                                   \r\n        print(\"{:16}\".format(k), r[k])                                                                    \r\n    assert r[\"grad_diff\"] < 1e-11, r[\"grad_diff\"]\r\n                                                                                                          \r\n                                                                                                          \r\nif __name__ == \"__main__\":                                                                                \r\n    print(\"tensorflow\", tf.GIT_VERSION, tf.VERSION)                                                       \r\n    test(True)                                                                                            \r\n    test(False)\r\n```\r\n\r\nExample output:\r\n\r\n```\r\ntensorflow b'unknown' 1.10.0\r\nindirect: True\r\nb_only_grads     [0.0]\r\ncommon_grads     [4.0]\r\ngrad_diff        0.0\r\nopt_a            None\r\nsummed_grads     [4.0]\r\nindirect: False\r\nb_only_grads     [0.0]\r\ncommon_grads     [4.0]\r\ngrad_diff        32.0\r\nopt_a            None\r\nsummed_grads     [-28.0]\r\nTraceback (most recent call last):\r\n  File \"minimal_example.py\", line 47, in <module>\r\n    test(False)\r\n  File \"minimal_example.py\", line 41, in test\r\n    assert r[\"grad_diff\"] < 1e-11, r[\"grad_diff\"]\r\nAssertionError: 32.0\r\n```\r\n\r\n**Other info / logs**\r\nThe output is not deterministic and sometimes produces correct results so the code might have to be run multiple times. The code also works fine without the `opt_a` call. Constant values for the weight also work fine, just in combination with a placeholder it seems to be problematic. The problem remains the same for other values of the weight and thus in general violates commutativity of the gradient but the case of a weight of zero illustrates the problem best because the zero weighted summand really should not have any influence on the gradients. Finally, the gradients are not just reported falsely but optimization of `b`, e.g. `optimizer.minimize(common_loss + weight*b_only_loss, var_list=[b])`, produces wrong results (i.e. gradient descent uses wrong gradients).\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23294", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23294/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23294/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23294/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23294", "id": 374338326, "node_id": "MDU6SXNzdWUzNzQzMzgzMjY=", "number": 23294, "title": "Dataset shard index automatic change in Estimator DistributionStrategy", "user": {"login": "wangsiyu", "id": 5387343, "node_id": "MDQ6VXNlcjUzODczNDM=", "avatar_url": "https://avatars0.githubusercontent.com/u/5387343?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wangsiyu", "html_url": "https://github.com/wangsiyu", "followers_url": "https://api.github.com/users/wangsiyu/followers", "following_url": "https://api.github.com/users/wangsiyu/following{/other_user}", "gists_url": "https://api.github.com/users/wangsiyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/wangsiyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wangsiyu/subscriptions", "organizations_url": "https://api.github.com/users/wangsiyu/orgs", "repos_url": "https://api.github.com/users/wangsiyu/repos", "events_url": "https://api.github.com/users/wangsiyu/events{/privacy}", "received_events_url": "https://api.github.com/users/wangsiyu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}], "state": "open", "locked": false, "assignee": {"login": "yuefengz", "id": 1647833, "node_id": "MDQ6VXNlcjE2NDc4MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1647833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuefengz", "html_url": "https://github.com/yuefengz", "followers_url": "https://api.github.com/users/yuefengz/followers", "following_url": "https://api.github.com/users/yuefengz/following{/other_user}", "gists_url": "https://api.github.com/users/yuefengz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuefengz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuefengz/subscriptions", "organizations_url": "https://api.github.com/users/yuefengz/orgs", "repos_url": "https://api.github.com/users/yuefengz/repos", "events_url": "https://api.github.com/users/yuefengz/events{/privacy}", "received_events_url": "https://api.github.com/users/yuefengz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yuefengz", "id": 1647833, "node_id": "MDQ6VXNlcjE2NDc4MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1647833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuefengz", "html_url": "https://github.com/yuefengz", "followers_url": "https://api.github.com/users/yuefengz/followers", "following_url": "https://api.github.com/users/yuefengz/following{/other_user}", "gists_url": "https://api.github.com/users/yuefengz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuefengz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuefengz/subscriptions", "organizations_url": "https://api.github.com/users/yuefengz/orgs", "repos_url": "https://api.github.com/users/yuefengz/repos", "events_url": "https://api.github.com/users/yuefengz/events{/privacy}", "received_events_url": "https://api.github.com/users/yuefengz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-10-26T11:15:41Z", "updated_at": "2018-12-14T19:00:49Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- TensorFlow version (you are using): 1.10\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nAccording to the cluster role defined in `Estimator`, the task index of `chief` and `worker` both start from 0. This brings trouble usage for reading data shard under distributed environment. Users should either change code to distinguish the task index between `chief` and `worker_0` or modify the `TF_CONFIG` environment to read different data shards.\r\n\r\n```\r\nd = tf.data.TFRecordDataset(FLAGS.input_file)\r\nd = d.shard(FLAGS.num_workers, FLAGS.worker_index)\r\n```\r\n\r\nThe propose of `DistributionStrategy` is to make distribution easy writing with minimal changes to model function and input function. However, we currently cannot avoid the problems described above. \r\n\r\nIs there any solutions for this problem? I am very willing to contribute for this but want to have more discussion for the design. \r\n\r\n**Will this change the current api? How?**\r\nMaybe yes.\r\n\r\n**Who will benefit with this feature?**\r\nDistributionStrategy users.\r\n\r\n**Any Other info.**\r\nAny  discussion is appreciated."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23265", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23265/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23265/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23265/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23265", "id": 374108780, "node_id": "MDU6SXNzdWUzNzQxMDg3ODA=", "number": 23265, "title": "No example exporting a model from an Estimator on TensorFlow.org", "user": {"login": "hanmeng31", "id": 9387543, "node_id": "MDQ6VXNlcjkzODc1NDM=", "avatar_url": "https://avatars1.githubusercontent.com/u/9387543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hanmeng31", "html_url": "https://github.com/hanmeng31", "followers_url": "https://api.github.com/users/hanmeng31/followers", "following_url": "https://api.github.com/users/hanmeng31/following{/other_user}", "gists_url": "https://api.github.com/users/hanmeng31/gists{/gist_id}", "starred_url": "https://api.github.com/users/hanmeng31/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hanmeng31/subscriptions", "organizations_url": "https://api.github.com/users/hanmeng31/orgs", "repos_url": "https://api.github.com/users/hanmeng31/repos", "events_url": "https://api.github.com/users/hanmeng31/events{/privacy}", "received_events_url": "https://api.github.com/users/hanmeng31/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}, {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-10-25T20:00:47Z", "updated_at": "2020-02-21T18:42:48Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a documentation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:doc_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version: 1.9\r\n- Doc Link: https://www.tensorflow.org/tutorials/estimators/cnn\r\n\r\n\r\n**Describe the documentation issue**\r\nIn this CNN tutorial example, there is no exporting savedmodel example. For users that need to save the trained model for future usage, it will be better to add exporting savedmodel part in the tutorial.\r\n\r\n**We welcome contributions by users. Will you be able to update submit a PR (use the [doc style guide](https://www.tensorflow.org/community/documentation)) to fix the doc Issue?**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23253", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23253/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23253/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23253/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23253", "id": 373878443, "node_id": "MDU6SXNzdWUzNzM4Nzg0NDM=", "number": 23253, "title": "TOCO failed  Batch normalization resolution requires that mean, multiplier and offset arrays be constant.", "user": {"login": "sxsxsx", "id": 16790259, "node_id": "MDQ6VXNlcjE2NzkwMjU5", "avatar_url": "https://avatars1.githubusercontent.com/u/16790259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sxsxsx", "html_url": "https://github.com/sxsxsx", "followers_url": "https://api.github.com/users/sxsxsx/followers", "following_url": "https://api.github.com/users/sxsxsx/following{/other_user}", "gists_url": "https://api.github.com/users/sxsxsx/gists{/gist_id}", "starred_url": "https://api.github.com/users/sxsxsx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sxsxsx/subscriptions", "organizations_url": "https://api.github.com/users/sxsxsx/orgs", "repos_url": "https://api.github.com/users/sxsxsx/repos", "events_url": "https://api.github.com/users/sxsxsx/events{/privacy}", "received_events_url": "https://api.github.com/users/sxsxsx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 17, "created_at": "2018-10-25T10:26:56Z", "updated_at": "2019-07-24T07:31:09Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: None\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.9 gpu\r\n- Python version: 27\r\n- Bazel version (if compiling from source): no use\r\n- GCC/Compiler version (if compiling from source): no use\r\n- CUDA/cuDNN version: CUDA9.1    CuDNN7.0\r\n- GPU model and memory: GTX1070 8G\r\n\r\n\r\n**Describe the current behavior**\r\n`toco --output_file=test.tflite --graph_def_file=freeze.pb --input_arrays=Placeholder --output_arrays=logits/BatchNorm/Reshape_1 --output_format=TFLITE --inference_type=FLOAT --std_dev_values=1 --mean_values=0`\r\n\r\nfailed\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/icare/.local/bin/toco\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/home/icare/.local/lib/python2.7/site-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 320, in main\r\n    app.run(main=run_main, argv=sys.argv[:1])\r\n  File \"/home/icare/.local/lib/python2.7/site-packages/tensorflow/python/platform/app.py\", line 125, in run\r\n    _sys.exit(main(argv))\r\n  File \"/home/icare/.local/lib/python2.7/site-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 316, in run_main\r\n    _convert_model(tflite_flags)\r\n  File \"/home/icare/.local/lib/python2.7/site-packages/tensorflow/contrib/lite/python/tflite_convert.py\", line 121, in _convert_model\r\n    output_data = converter.convert()\r\n  File \"/home/icare/.local/lib/python2.7/site-packages/tensorflow/contrib/lite/python/lite.py\", line 309, in convert\r\n    allow_custom_ops=self.allow_custom_ops)\r\n  File \"/home/icare/.local/lib/python2.7/site-packages/tensorflow/contrib/lite/python/convert.py\", line 225, in toco_convert\r\n    input_data.SerializeToString())\r\n  File \"/home/icare/.local/lib/python2.7/site-packages/tensorflow/contrib/lite/python/convert.py\", line 107, in toco_convert_protos\r\n    (stdout, stderr))\r\nRuntimeError: TOCO failed see console for info.\r\n2018-10-25 17:33:59.010229: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 135 operators, 224 arrays (0 quantized)\r\n2018-10-25 17:33:59.011116: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After Removing unused ops pass 1: 127 operators, 212 arrays (0 quantized)\r\n2018-10-25 17:33:59.012209: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 127 operators, 212 arrays (0 quantized)\r\n2018-10-25 17:33:59.012368: F tensorflow/contrib/lite/toco/graph_transformations/resolve_batch_normalization.cc:42] Check failed: IsConstantParameterArray(*model, bn_op->inputs[1]) && IsConstantParameterArray(*model, bn_op->inputs[2]) && IsConstantParameterArray(*model, bn_op->inputs[3]) Batch normalization resolution requires that mean, multiplier and offset arrays be constant.\r\nAborted (core dumped)\r\n\r\nNone\r\n\r\n**Describe the expected behavior**\r\n\r\n I want to use toco to transform the pb file to the tflite file\r\n\r\n**Code to reproduce the issue**\r\n\r\nI use the code below to generate graph.pb and ckpy file\r\n`g = tf.get_default_graph()\r\n graph_def = g.as_graph_def()\r\n tf.train.write_graph(graph_def, \"./model\", 'graph.pb', as_text=False) \r\n saver = tf.train.Saver()\r\n saver.save(sess, os.path.join(FLAGS.checkpoint_dir, 'mnist-conv-slim.ckpt'))`\r\n\r\n  \r\n\r\nand then I freezed the graph.pb successfullly\r\n\r\n python freeze_graph.py --input_graph=/payh/to/graph.pb --input_checkpoint=/payh/tpo/mnist-conv-slim.ckpt --output_graph=/payh/to/mobile_face/model/freeze.pb --output_node_names=logits/BatchNorm/Reshape_1 --input_binary=True\r\n\r\n\r\n\r\n**Other info / logs**\r\nI use the code below to watch the nodes of each layer\r\n\r\n`import tensorflow as tf\r\ngf = tf.GraphDef()\r\n#gf.ParseFromString(open('/tmp/inception_v3_quantized.pb','rb').read())\r\ngf.ParseFromString(open('./model/freeze.pb','rb').read())\r\nfor n in gf.node:\r\n    print ( n.name +' ===> '+n.op )  `\r\n\r\nresult:\r\n\r\n\r\nPlaceholder ===> Placeholder\r\nPlaceholder_1 ===> Placeholder\r\nPlaceholder_3 ===> Placeholder\r\nReshape/shape ===> Const\r\nReshape ===> Reshape\r\nconv1/weights ===> Const\r\nconv1/weights/read ===> Identity\r\nconv1/Conv2D ===> Conv2D\r\nconv1/BatchNorm/Const ===> Const\r\nconv1/BatchNorm/beta ===> Const\r\nconv1/BatchNorm/beta/read ===> Identity\r\nconv1/BatchNorm/moving_mean ===> Const\r\nconv1/BatchNorm/moving_mean/read ===> Identity\r\nconv1/BatchNorm/moving_variance ===> Const\r\nconv1/BatchNorm/moving_variance/read ===> Identity\r\nconv1/BatchNorm/cond/Switch ===> Switch\r\nconv1/BatchNorm/cond/switch_t ===> Identity\r\nconv1/BatchNorm/cond/pred_id ===> Identity\r\nconv1/BatchNorm/cond/Const ===> Const\r\nconv1/BatchNorm/cond/Const_1 ===> Const\r\nconv1/BatchNorm/cond/FusedBatchNorm ===> FusedBatchNorm\r\nconv1/BatchNorm/cond/FusedBatchNorm/Switch ===> Switch\r\nconv1/BatchNorm/cond/FusedBatchNorm/Switch_1 ===> Switch\r\nconv1/BatchNorm/cond/FusedBatchNorm/Switch_2 ===> Switch\r\nconv1/BatchNorm/cond/FusedBatchNorm_1 ===> FusedBatchNorm\r\nconv1/BatchNorm/cond/FusedBatchNorm_1/Switch ===> Switch\r\nconv1/BatchNorm/cond/FusedBatchNorm_1/Switch_1 ===> Switch\r\nconv1/BatchNorm/cond/FusedBatchNorm_1/Switch_2 ===> Switch\r\nconv1/BatchNorm/cond/FusedBatchNorm_1/Switch_3 ===> Switch\r\nconv1/BatchNorm/cond/FusedBatchNorm_1/Switch_4 ===> Switch\r\nconv1/BatchNorm/cond/Merge ===> Merge\r\nconv1/CRelu/Neg ===> Neg\r\nconv1/CRelu/axis ===> Const\r\nconv1/CRelu ===> ConcatV2\r\nconv1/CRelu/Relu ===> Relu\r\npool1/MaxPool ===> MaxPool\r\nconv2/weights ===> Const\r\nconv2/weights/read ===> Identity\r\nconv2/Conv2D ===> Conv2D\r\nconv2/BatchNorm/Const ===> Const\r\nconv2/BatchNorm/beta ===> Const\r\nconv2/BatchNorm/beta/read ===> Identity\r\nconv2/BatchNorm/moving_mean ===> Const\r\nconv2/BatchNorm/moving_mean/read ===> Identity\r\nconv2/BatchNorm/moving_variance ===> Const\r\nconv2/BatchNorm/moving_variance/read ===> Identity\r\nconv2/BatchNorm/cond/Switch ===> Switch\r\nconv2/BatchNorm/cond/switch_t ===> Identity\r\nconv2/BatchNorm/cond/pred_id ===> Identity\r\nconv2/BatchNorm/cond/Const ===> Const\r\nconv2/BatchNorm/cond/Const_1 ===> Const\r\nconv2/BatchNorm/cond/FusedBatchNorm ===> FusedBatchNorm\r\nconv2/BatchNorm/cond/FusedBatchNorm/Switch ===> Switch\r\nconv2/BatchNorm/cond/FusedBatchNorm/Switch_1 ===> Switch\r\nconv2/BatchNorm/cond/FusedBatchNorm/Switch_2 ===> Switch\r\nconv2/BatchNorm/cond/FusedBatchNorm_1 ===> FusedBatchNorm\r\nconv2/BatchNorm/cond/FusedBatchNorm_1/Switch ===> Switch\r\nconv2/BatchNorm/cond/FusedBatchNorm_1/Switch_1 ===> Switch\r\nconv2/BatchNorm/cond/FusedBatchNorm_1/Switch_2 ===> Switch\r\nconv2/BatchNorm/cond/FusedBatchNorm_1/Switch_3 ===> Switch\r\nconv2/BatchNorm/cond/FusedBatchNorm_1/Switch_4 ===> Switch\r\nconv2/BatchNorm/cond/Merge ===> Merge\r\nconv2/CRelu/Neg ===> Neg\r\nconv2/CRelu/axis ===> Const\r\nconv2/CRelu ===> ConcatV2\r\nconv2/CRelu/Relu ===> Relu\r\npool2/MaxPool ===> MaxPool\r\nFlatten/flatten/Shape ===> Shape\r\nFlatten/flatten/strided_slice/stack ===> Const\r\nFlatten/flatten/strided_slice/stack_1 ===> Const\r\nFlatten/flatten/strided_slice/stack_2 ===> Const\r\nFlatten/flatten/strided_slice ===> StridedSlice\r\nFlatten/flatten/Reshape/shape/1 ===> Const\r\nFlatten/flatten/Reshape/shape ===> Pack\r\nFlatten/flatten/Reshape ===> Reshape\r\nfc1/weights ===> Const\r\nfc1/weights/read ===> Identity\r\nfc1/MatMul ===> MatMul\r\nfc1/BatchNorm/Reshape/shape ===> Const\r\nfc1/BatchNorm/Reshape ===> Reshape\r\nfc1/BatchNorm/beta ===> Const\r\nfc1/BatchNorm/beta/read ===> Identity\r\nfc1/BatchNorm/Const ===> Const\r\nfc1/BatchNorm/moving_mean ===> Const\r\nfc1/BatchNorm/moving_mean/read ===> Identity\r\nfc1/BatchNorm/moving_variance ===> Const\r\nfc1/BatchNorm/moving_variance/read ===> Identity\r\nfc1/BatchNorm/cond/Switch ===> Switch\r\nfc1/BatchNorm/cond/switch_t ===> Identity\r\nfc1/BatchNorm/cond/pred_id ===> Identity\r\nfc1/BatchNorm/cond/Const ===> Const\r\nfc1/BatchNorm/cond/Const_1 ===> Const\r\nfc1/BatchNorm/cond/FusedBatchNorm ===> FusedBatchNorm\r\nfc1/BatchNorm/cond/FusedBatchNorm/Switch ===> Switch\r\nfc1/BatchNorm/cond/FusedBatchNorm/Switch_1 ===> Switch\r\nfc1/BatchNorm/cond/FusedBatchNorm/Switch_2 ===> Switch\r\nfc1/BatchNorm/cond/FusedBatchNorm_1 ===> FusedBatchNorm\r\nfc1/BatchNorm/cond/FusedBatchNorm_1/Switch ===> Switch\r\nfc1/BatchNorm/cond/FusedBatchNorm_1/Switch_1 ===> Switch\r\nfc1/BatchNorm/cond/FusedBatchNorm_1/Switch_2 ===> Switch\r\nfc1/BatchNorm/cond/FusedBatchNorm_1/Switch_3 ===> Switch\r\nfc1/BatchNorm/cond/FusedBatchNorm_1/Switch_4 ===> Switch\r\nfc1/BatchNorm/cond/Merge ===> Merge\r\nfc1/BatchNorm/Shape ===> Shape\r\nfc1/BatchNorm/Reshape_1 ===> Reshape\r\nfc1/CRelu/Neg ===> Neg\r\nfc1/CRelu/axis ===> Const\r\nfc1/CRelu ===> ConcatV2\r\nfc1/CRelu/Relu ===> Relu\r\nDropout/sub/x ===> Const\r\nDropout/sub ===> Sub\r\nDropout/sub_1/x ===> Const\r\nDropout/sub_1 ===> Sub\r\nDropout/dropout_1/Shape ===> Shape\r\nDropout/dropout_1/random_uniform/min ===> Const\r\nDropout/dropout_1/random_uniform/max ===> Const\r\nDropout/dropout_1/random_uniform/RandomUniform ===> RandomUniform\r\nDropout/dropout_1/random_uniform/sub ===> Sub\r\nDropout/dropout_1/random_uniform/mul ===> Mul\r\nDropout/dropout_1/random_uniform ===> Add\r\nDropout/dropout_1/add ===> Add\r\nDropout/dropout_1/Floor ===> Floor\r\nDropout/dropout_1/div ===> RealDiv\r\nDropout/dropout_1/mul ===> Mul\r\nlogits/weights ===> Const\r\nlogits/weights/read ===> Identity\r\nlogits/MatMul ===> MatMul\r\nlogits/BatchNorm/Reshape/shape ===> Const\r\nlogits/BatchNorm/Reshape ===> Reshape\r\nlogits/BatchNorm/beta ===> Const\r\nlogits/BatchNorm/beta/read ===> Identity\r\nlogits/BatchNorm/Const ===> Const\r\nlogits/BatchNorm/moving_mean ===> Const\r\nlogits/BatchNorm/moving_mean/read ===> Identity\r\nlogits/BatchNorm/moving_variance ===> Const\r\nlogits/BatchNorm/moving_variance/read ===> Identity\r\nlogits/BatchNorm/cond/Switch ===> Switch\r\nlogits/BatchNorm/cond/switch_t ===> Identity\r\nlogits/BatchNorm/cond/pred_id ===> Identity\r\nlogits/BatchNorm/cond/Const ===> Const\r\nlogits/BatchNorm/cond/Const_1 ===> Const\r\nlogits/BatchNorm/cond/FusedBatchNorm ===> FusedBatchNorm\r\nlogits/BatchNorm/cond/FusedBatchNorm/Switch ===> Switch\r\nlogits/BatchNorm/cond/FusedBatchNorm/Switch_1 ===> Switch\r\nlogits/BatchNorm/cond/FusedBatchNorm/Switch_2 ===> Switch\r\nlogits/BatchNorm/cond/FusedBatchNorm_1 ===> FusedBatchNorm\r\nlogits/BatchNorm/cond/FusedBatchNorm_1/Switch ===> Switch\r\nlogits/BatchNorm/cond/FusedBatchNorm_1/Switch_1 ===> Switch\r\nlogits/BatchNorm/cond/FusedBatchNorm_1/Switch_2 ===> Switch\r\nlogits/BatchNorm/cond/FusedBatchNorm_1/Switch_3 ===> Switch\r\nlogits/BatchNorm/cond/FusedBatchNorm_1/Switch_4 ===> Switch\r\nlogits/BatchNorm/cond/Merge ===> Merge\r\nlogits/BatchNorm/Shape ===> Shape\r\nlogits/BatchNorm/Reshape_1 ===> Reshape\r\n\r\nIt seems that the BN para are already constant\r\n\r\nwhat should I do to solver the problem?\r\n\r\ngood luck to you thanks\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23238", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23238/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23238/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23238/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23238", "id": 373745102, "node_id": "MDU6SXNzdWUzNzM3NDUxMDI=", "number": 23238, "title": "intel mkl optimized tensorflow performance degradation", "user": {"login": "patelprateek", "id": 22586349, "node_id": "MDQ6VXNlcjIyNTg2MzQ5", "avatar_url": "https://avatars3.githubusercontent.com/u/22586349?v=4", "gravatar_id": "", "url": "https://api.github.com/users/patelprateek", "html_url": "https://github.com/patelprateek", "followers_url": "https://api.github.com/users/patelprateek/followers", "following_url": "https://api.github.com/users/patelprateek/following{/other_user}", "gists_url": "https://api.github.com/users/patelprateek/gists{/gist_id}", "starred_url": "https://api.github.com/users/patelprateek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/patelprateek/subscriptions", "organizations_url": "https://api.github.com/users/patelprateek/orgs", "repos_url": "https://api.github.com/users/patelprateek/repos", "events_url": "https://api.github.com/users/patelprateek/events{/privacy}", "received_events_url": "https://api.github.com/users/patelprateek/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1104829434, "node_id": "MDU6TGFiZWwxMTA0ODI5NDM0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:mkl", "name": "comp:mkl", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "TensorFlow-MKL", "id": 44416303, "node_id": "MDQ6VXNlcjQ0NDE2MzAz", "avatar_url": "https://avatars2.githubusercontent.com/u/44416303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TensorFlow-MKL", "html_url": "https://github.com/TensorFlow-MKL", "followers_url": "https://api.github.com/users/TensorFlow-MKL/followers", "following_url": "https://api.github.com/users/TensorFlow-MKL/following{/other_user}", "gists_url": "https://api.github.com/users/TensorFlow-MKL/gists{/gist_id}", "starred_url": "https://api.github.com/users/TensorFlow-MKL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TensorFlow-MKL/subscriptions", "organizations_url": "https://api.github.com/users/TensorFlow-MKL/orgs", "repos_url": "https://api.github.com/users/TensorFlow-MKL/repos", "events_url": "https://api.github.com/users/TensorFlow-MKL/events{/privacy}", "received_events_url": "https://api.github.com/users/TensorFlow-MKL/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "TensorFlow-MKL", "id": 44416303, "node_id": "MDQ6VXNlcjQ0NDE2MzAz", "avatar_url": "https://avatars2.githubusercontent.com/u/44416303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TensorFlow-MKL", "html_url": "https://github.com/TensorFlow-MKL", "followers_url": "https://api.github.com/users/TensorFlow-MKL/followers", "following_url": "https://api.github.com/users/TensorFlow-MKL/following{/other_user}", "gists_url": "https://api.github.com/users/TensorFlow-MKL/gists{/gist_id}", "starred_url": "https://api.github.com/users/TensorFlow-MKL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TensorFlow-MKL/subscriptions", "organizations_url": "https://api.github.com/users/TensorFlow-MKL/orgs", "repos_url": "https://api.github.com/users/TensorFlow-MKL/repos", "events_url": "https://api.github.com/users/TensorFlow-MKL/events{/privacy}", "received_events_url": "https://api.github.com/users/TensorFlow-MKL/received_events", "type": "User", "site_admin": false}], "milestone": {"url": "https://api.github.com/repos/tensorflow/tensorflow/milestones/6", "html_url": "https://github.com/tensorflow/tensorflow/milestone/6", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/milestones/6/labels", "id": 3982395, "node_id": "MDk6TWlsZXN0b25lMzk4MjM5NQ==", "number": 6, "title": "assigned Nathan Greeneltch (intel)", "description": null, "creator": {"login": "TensorFlow-MKL", "id": 44416303, "node_id": "MDQ6VXNlcjQ0NDE2MzAz", "avatar_url": "https://avatars2.githubusercontent.com/u/44416303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TensorFlow-MKL", "html_url": "https://github.com/TensorFlow-MKL", "followers_url": "https://api.github.com/users/TensorFlow-MKL/followers", "following_url": "https://api.github.com/users/TensorFlow-MKL/following{/other_user}", "gists_url": "https://api.github.com/users/TensorFlow-MKL/gists{/gist_id}", "starred_url": "https://api.github.com/users/TensorFlow-MKL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TensorFlow-MKL/subscriptions", "organizations_url": "https://api.github.com/users/TensorFlow-MKL/orgs", "repos_url": "https://api.github.com/users/TensorFlow-MKL/repos", "events_url": "https://api.github.com/users/TensorFlow-MKL/events{/privacy}", "received_events_url": "https://api.github.com/users/TensorFlow-MKL/received_events", "type": "User", "site_admin": false}, "open_issues": 1, "closed_issues": 7, "state": "open", "created_at": "2019-01-17T19:21:55Z", "updated_at": "2019-11-19T17:40:45Z", "due_on": null, "closed_at": null}, "comments": 23, "created_at": "2018-10-25T02:12:40Z", "updated_at": "2019-10-09T07:12:41Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Google Deep Learning VM\r\nVersion: m10\r\nBased on: Debian GNU/Linux 9.5 (stretch) (GNU/Linux 4.9.0-8-amd64 x86_64\\n)\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): deep-learning image  \r\n- TensorFlow version (use command below): 1.11\r\n- Python version: 2.7\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory: N/A \r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\nRunning deep model and some wide linear models. Inference performance is very bad. 2-4x slower relative to running inference without MKL\r\n**Describe the expected behavior**\r\nPerformance should actually improve with intel mkl instruction set .\r\n\r\n**Code to reproduce the issue**\r\ncode for deep and wide linear model. or logistic regression example code from tensorflow example\r\n\r\n**Other info / logs**\r\nWhen running using google deep learning image version M9 on gpu machine  (image : tf-latest-cu92, version M9) . Note : the inference is only running on cpu as i turn off the visibility for cuda devices, So the tensorflow code runs only runs on cpu. The image family says they are intel optimized packages but when i rung the benchmarks with verbosity on , i do not observe any mkl related stuff.\r\n\r\nI start another deep learning image (tf-latest-cpu , version M10): Running exact same code on this machine with environment variable (export MKL_VERBOSE=1): I can observe a lot of openMP thread settings , KMP_xxx settings and mkl instructions logged with some timing information. I didn't observe any such thing in the M9 gpu image , even though in both place when i execute command   i observe following logs: \r\nM9 gpu image \r\nNumpy + Intel(R) MKL: THREADING LAYER: (null)\r\nNumpy + Intel(R) MKL: setting Intel(R) MKL to use INTEL OpenMP runtime\r\nNumpy + Intel(R) MKL: preloading libiomp5.so runtime\r\nMKL_VERBOSE Intel(R) MKL 2019.0 Product build 20180829 for Intel(R) 64 architecture Intel(R) Advanced Vector Extensions 2 (Intel(R) AVX2) enabled processors, Lnx 2.20GHz lp64 intel_thread\r\nMKL_VERBOSE SDOT(2,0x55fd25117d40,1,0x55fd25117d40,1) 1.61ms CNR:OFF Dyn:1 FastMM:1 TID:0  NThr:16\r\n1.11.0\r\n\r\nM10 cpu image : \r\nNumpy + Intel(R) MKL: THREADING LAYER: (null)\r\nNumpy + Intel(R) MKL: setting Intel(R) MKL to use INTEL OpenMP runtime\r\nNumpy + Intel(R) MKL: preloading libiomp5.so runtime\r\n\r\nUser settings:\r\n\r\n   KMP_AFFINITY=granularity=fine,verbose,compact,1,0\r\n   KMP_BLOCKTIME=0\r\n   KMP_SETTINGS=1\r\n   OMP_NUM_THREADS=32\r\n\r\nEffective settings:\r\n\r\n   KMP_ABORT_DELAY=0\r\n   KMP_ADAPTIVE_LOCK_PROPS='1,1024'\r\n   KMP_ALIGN_ALLOC=64\r\n   KMP_ALL_THREADPRIVATE=128\r\n   KMP_ATOMIC_MODE=2\r\n   KMP_BLOCKTIME=0\r\n   KMP_CPUINFO_FILE: value is not defined\r\n   KMP_DETERMINISTIC_REDUCTION=false\r\n   KMP_DEVICE_THREAD_LIMIT=2147483647\r\n   KMP_DISP_HAND_THREAD=false\r\n   KMP_DISP_NUM_BUFFERS=7\r\n   KMP_DUPLICATE_LIB_OK=false\r\n   KMP_FORCE_REDUCTION: value is not defined\r\n   KMP_FOREIGN_THREADS_THREADPRIVATE=true\r\n   KMP_FORKJOIN_BARRIER='2,2'\r\n   KMP_FORKJOIN_BARRIER_PATTERN='hyper,hyper'\r\n   KMP_FORKJOIN_FRAMES=true\r\n   KMP_FORKJOIN_FRAMES_MODE=3\r\n   KMP_GTID_MODE=3\r\n   KMP_HANDLE_SIGNALS=false\r\n   KMP_HOT_TEAMS_MAX_LEVEL=1\r\n   KMP_HOT_TEAMS_MODE=0\r\n   KMP_INIT_AT_FORK=true\r\n   KMP_INIT_WAIT=2048\r\n   KMP_ITT_PREPARE_DELAY=0\r\n   KMP_LIBRARY=throughput\r\n   KMP_LOCK_KIND=queuing\r\n   KMP_MALLOC_POOL_INCR=1M\r\n   KMP_NEXT_WAIT=1024\r\n   KMP_NUM_LOCKS_IN_BLOCK=1\r\n   KMP_PLAIN_BARRIER='2,2'\r\n   KMP_PLAIN_BARRIER_PATTERN='hyper,hyper'\r\n   KMP_REDUCTION_BARRIER='1,1'\r\n   KMP_REDUCTION_BARRIER_PATTERN='hyper,hyper'\r\n   KMP_SCHEDULE='static,balanced;guided,iterative'\r\n   KMP_SETTINGS=true\r\n   KMP_SPIN_BACKOFF_PARAMS='4096,100'\r\n   KMP_STACKOFFSET=64\r\n   KMP_STACKPAD=0\r\n   KMP_STACKSIZE=4M\r\n   KMP_STORAGE_MAP=false\r\n   KMP_TASKING=2\r\n   KMP_TASKLOOP_MIN_TASKS=0\r\n   KMP_TASK_STEALING_CONSTRAINT=1\r\n   KMP_TEAMS_THREAD_LIMIT=32\r\n   KMP_TOPOLOGY_METHOD=all\r\n   KMP_USER_LEVEL_MWAIT=false\r\n   KMP_VERSION=false\r\n   KMP_WARNINGS=true\r\n   OMP_AFFINITY_FORMAT='OMP: pid %P tid %T thread %n bound to OS proc set {%a}'\r\n   OMP_ALLOCATOR=omp_default_mem_alloc\r\n   OMP_CANCELLATION=false\r\n   OMP_DEBUG=disabled\r\n   OMP_DEFAULT_DEVICE=0\r\n   OMP_DISPLAY_AFFINITY=false\r\n   OMP_DISPLAY_ENV=false\r\n   OMP_DYNAMIC=false\r\n   OMP_MAX_ACTIVE_LEVELS=2147483647\r\n   OMP_MAX_TASK_PRIORITY=0\r\n   OMP_NESTED=false\r\n   OMP_NUM_THREADS='32'\r\n   OMP_PLACES: value is not defined\r\n   OMP_PROC_BIND='intel'\r\n   OMP_SCHEDULE='static'\r\n   OMP_STACKSIZE=4M\r\n   OMP_TARGET_OFFLOAD=DEFAULT\r\n   OMP_THREAD_LIMIT=2147483647\r\n   OMP_TOOL=enabled\r\n   OMP_TOOL_LIBRARIES: value is not defined\r\n   OMP_WAIT_POLICY=PASSIVE\r\n   KMP_AFFINITY='verbose,warnings,respect,granularity=fine,compact,1,0'\r\n\r\nOMP: Info #212: KMP_AFFINITY: decoding x2APIC ids.\r\nOMP: Info #210: KMP_AFFINITY: Affinity capable, using global cpuid leaf 11 info\r\nOMP: Info #154: KMP_AFFINITY: Initial OS proc set respected: 0-31\r\nOMP: Info #156: KMP_AFFINITY: 32 available OS procs\r\nOMP: Info #157: KMP_AFFINITY: Uniform topology\r\nOMP: Info #179: KMP_AFFINITY: 1 packages x 16 cores/pkg x 2 threads/core (16 total cores)\r\nOMP: Info #214: KMP_AFFINITY: OS proc to physical thread map:\r\nOMP: Info #171: KMP_AFFINITY: OS proc 0 maps to package 0 core 0 thread 0\r\nOMP: Info #171: KMP_AFFINITY: OS proc 16 maps to package 0 core 0 thread 1\r\nOMP: Info #171: KMP_AFFINITY: OS proc 1 maps to package 0 core 1 thread 0\r\nOMP: Info #171: KMP_AFFINITY: OS proc 17 maps to package 0 core 1 thread 1\r\nOMP: Info #171: KMP_AFFINITY: OS proc 2 maps to package 0 core 2 thread 0\r\nOMP: Info #171: KMP_AFFINITY: OS proc 18 maps to package 0 core 2 thread 1\r\nOMP: Info #171: KMP_AFFINITY: OS proc 3 maps to package 0 core 3 thread 0\r\nOMP: Info #171: KMP_AFFINITY: OS proc 19 maps to package 0 core 3 thread 1\r\nOMP: Info #171: KMP_AFFINITY: OS proc 4 maps to package 0 core 4 thread 0\r\nOMP: Info #171: KMP_AFFINITY: OS proc 20 maps to package 0 core 4 thread 1\r\n\r\nOMP: Info #250: KMP_AFFINITY: pid 8331 tid 8331 thread 0 bound to OS proc set 0\r\nMKL_VERBOSE Intel(R) MKL 2019.0 Product build 20180829 for Intel(R) 64 architecture Intel(R) Advanced Vector Extensions 2 (Intel(R) AVX2) enabled processors, Lnx 2.20GHz lp64 intel_thread\r\nMKL_VERBOSE SDOT(2,0x5622b7736500,1,0x5622b7736500,1) 2.54ms CNR:OFF Dyn:1 FastMM:1 TID:0  NThr:16\r\n1.11.0\r\n\r\nSo i assume intel mkl is being used in M10 image where as mkl is not being used in the M9 image (Note: i have turned off visibility for cuda devices so only cpu inference is being compared) . I observe 2-4x performance degradation with intel mkl.\r\nThe mkl suggested flags are appropriate: \r\nKMP_AFFINITY=granularity=fine,verbose,compact,1,0\r\n   KMP_BLOCKTIME=0\r\n   KMP_SETTINGS=1\r\n   OMP_NUM_THREADS=32\r\n\r\nAny ideas on how to debug the root cause and get the maximum performance for my models.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23231", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23231/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23231/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23231/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23231", "id": 373707231, "node_id": "MDU6SXNzdWUzNzM3MDcyMzE=", "number": 23231, "title": "TFProf is unable to parse the profile generated by profileContext.", "user": {"login": "rahul003", "id": 3457240, "node_id": "MDQ6VXNlcjM0NTcyNDA=", "avatar_url": "https://avatars1.githubusercontent.com/u/3457240?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rahul003", "html_url": "https://github.com/rahul003", "followers_url": "https://api.github.com/users/rahul003/followers", "following_url": "https://api.github.com/users/rahul003/following{/other_user}", "gists_url": "https://api.github.com/users/rahul003/gists{/gist_id}", "starred_url": "https://api.github.com/users/rahul003/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rahul003/subscriptions", "organizations_url": "https://api.github.com/users/rahul003/orgs", "repos_url": "https://api.github.com/users/rahul003/repos", "events_url": "https://api.github.com/users/rahul003/events{/privacy}", "received_events_url": "https://api.github.com/users/rahul003/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1093464312, "node_id": "MDU6TGFiZWwxMDkzNDY0MzEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:others", "name": "type:others", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "qqfish", "id": 1269299, "node_id": "MDQ6VXNlcjEyNjkyOTk=", "avatar_url": "https://avatars3.githubusercontent.com/u/1269299?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qqfish", "html_url": "https://github.com/qqfish", "followers_url": "https://api.github.com/users/qqfish/followers", "following_url": "https://api.github.com/users/qqfish/following{/other_user}", "gists_url": "https://api.github.com/users/qqfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/qqfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qqfish/subscriptions", "organizations_url": "https://api.github.com/users/qqfish/orgs", "repos_url": "https://api.github.com/users/qqfish/repos", "events_url": "https://api.github.com/users/qqfish/events{/privacy}", "received_events_url": "https://api.github.com/users/qqfish/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "qqfish", "id": 1269299, "node_id": "MDQ6VXNlcjEyNjkyOTk=", "avatar_url": "https://avatars3.githubusercontent.com/u/1269299?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qqfish", "html_url": "https://github.com/qqfish", "followers_url": "https://api.github.com/users/qqfish/followers", "following_url": "https://api.github.com/users/qqfish/following{/other_user}", "gists_url": "https://api.github.com/users/qqfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/qqfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qqfish/subscriptions", "organizations_url": "https://api.github.com/users/qqfish/orgs", "repos_url": "https://api.github.com/users/qqfish/repos", "events_url": "https://api.github.com/users/qqfish/events{/privacy}", "received_events_url": "https://api.github.com/users/qqfish/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-10-24T22:49:20Z", "updated_at": "2019-12-09T18:46:00Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "TFProf is unable to parse the profile generated by profileContext.\r\n\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution : Linux Ubuntu 18.04: \r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): 1.11\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source): 0.16.1\r\n- GCC/Compiler version (if compiling from source): 7.3\r\n- CUDA/cuDNN version: 10.0\r\n- GPU model and memory: V100, 16GB\r\n\r\n**Describe the current behavior**\r\nTFProf unable to parse the profile generated by profileContext. \r\n\r\n**Describe the expected behavior**\r\nWhen I generate the profile file by using the low level approach of runOptions, runMetadata, and then writing the string generated by profiler.serialize_to_string(), I can load it with tfprof and analyze it just fine. This should happen even when using ProfileContext.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nwith tf.contrib.tfprof.ProfileContext('./profiles', trace_steps=range(50,100), dump_steps=[100]) as pctx:\r\n\r\n ... Regular session.run\r\n\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23216", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23216/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23216/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23216/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23216", "id": 373564714, "node_id": "MDU6SXNzdWUzNzM1NjQ3MTQ=", "number": 23216, "title": "Failing isinstance check in tensorflow.python.keras.models._clone_functional_model", "user": {"login": "sytham", "id": 5081109, "node_id": "MDQ6VXNlcjUwODExMDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/5081109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sytham", "html_url": "https://github.com/sytham", "followers_url": "https://api.github.com/users/sytham/followers", "following_url": "https://api.github.com/users/sytham/following{/other_user}", "gists_url": "https://api.github.com/users/sytham/gists{/gist_id}", "starred_url": "https://api.github.com/users/sytham/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sytham/subscriptions", "organizations_url": "https://api.github.com/users/sytham/orgs", "repos_url": "https://api.github.com/users/sytham/repos", "events_url": "https://api.github.com/users/sytham/events{/privacy}", "received_events_url": "https://api.github.com/users/sytham/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-10-24T16:17:29Z", "updated_at": "2018-12-21T18:53:14Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nCentOS, specifically\r\nLinux 3.10.0-693.5.2.el7.x86_64 #1 SMP Fri Oct 20 20:32:50 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n- TensorFlow installed from (source or binary): Through conda\r\n- TensorFlow version (use command below): 1.11.0\r\n- Python version:\r\nPython 2.7.15 |Anaconda, Inc.| (default, Oct 10 2018, 21:32:13)\r\n[GCC 7.3.0] on linux2\r\n-Bazel version: NA\r\n-CUDA/cuDNN version: NA\r\n-GPU model and memory: NA\r\n-Exact command to reproduce: NA\r\n-Mobile device: NA\r\n\r\n**Describe the current behavior**\r\n`tensorflow.python.keras.models._clone_functional_model `raises a `ValueError `because the model passed to it is supposedly not an instance of `Model`, even though it is.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nfrom tensorflow import keras\r\nfrom keras.models import Model\r\nfrom tensorflow.python.keras.engine import training\r\nModel2 = training.Model\r\nisinstance(Model(), Model2)\r\n```\r\nThis returns False. Even though `keras.models.Model` should just be an alias for `tensorflow.python.keras.engine.training.Model`.\r\n\r\n**Other info / logs**\r\nI run into this issue when calling` tensorflow.python.keras.estimator.model_to_estimator`.\r\nI can work around it by importing all my keras imports using the full `tensorflow.python.keras...., `but I'm not sure why that should be necessary.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23207", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23207/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23207/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23207/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23207", "id": 373333625, "node_id": "MDU6SXNzdWUzNzMzMzM2MjU=", "number": 23207, "title": "Add an option to apply SavedModel via command line ", "user": {"login": "gautamkmr", "id": 3092152, "node_id": "MDQ6VXNlcjMwOTIxNTI=", "avatar_url": "https://avatars3.githubusercontent.com/u/3092152?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gautamkmr", "html_url": "https://github.com/gautamkmr", "followers_url": "https://api.github.com/users/gautamkmr/followers", "following_url": "https://api.github.com/users/gautamkmr/following{/other_user}", "gists_url": "https://api.github.com/users/gautamkmr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gautamkmr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gautamkmr/subscriptions", "organizations_url": "https://api.github.com/users/gautamkmr/orgs", "repos_url": "https://api.github.com/users/gautamkmr/repos", "events_url": "https://api.github.com/users/gautamkmr/events{/privacy}", "received_events_url": "https://api.github.com/users/gautamkmr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "reedwm", "id": 6510203, "node_id": "MDQ6VXNlcjY1MTAyMDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6510203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reedwm", "html_url": "https://github.com/reedwm", "followers_url": "https://api.github.com/users/reedwm/followers", "following_url": "https://api.github.com/users/reedwm/following{/other_user}", "gists_url": "https://api.github.com/users/reedwm/gists{/gist_id}", "starred_url": "https://api.github.com/users/reedwm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reedwm/subscriptions", "organizations_url": "https://api.github.com/users/reedwm/orgs", "repos_url": "https://api.github.com/users/reedwm/repos", "events_url": "https://api.github.com/users/reedwm/events{/privacy}", "received_events_url": "https://api.github.com/users/reedwm/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "reedwm", "id": 6510203, "node_id": "MDQ6VXNlcjY1MTAyMDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6510203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reedwm", "html_url": "https://github.com/reedwm", "followers_url": "https://api.github.com/users/reedwm/followers", "following_url": "https://api.github.com/users/reedwm/following{/other_user}", "gists_url": "https://api.github.com/users/reedwm/gists{/gist_id}", "starred_url": "https://api.github.com/users/reedwm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reedwm/subscriptions", "organizations_url": "https://api.github.com/users/reedwm/orgs", "repos_url": "https://api.github.com/users/reedwm/repos", "events_url": "https://api.github.com/users/reedwm/events{/privacy}", "received_events_url": "https://api.github.com/users/reedwm/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2018-10-24T07:03:18Z", "updated_at": "2019-02-09T18:40:53Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): TF-1.11\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nBy default TensorFlow has an option to store checkpoint by adding '--train_dir'. However this is good when we want to continue training, but if we want to perform inference using TensorFlowServing it becomes a challenge.  Is it possible to add some flag which will store the variables, graph, in/output signature by just providing an option similar to '--train_dir'?\r\n\r\n\r\n**Will this change the current api? How?**\r\nYes, but nothing will break \r\n\r\nfor e.g. **Old API** will store only checkpoints\r\ntf_cnn_benchmarks.py --model resnet50 --num_epochs=2 --batch_size 64 --data_name=imagenet  --data_dir=/mnt/data **--train_dir=/mnt/checkpoint**  --variable_update horovod --horovod_device gpu --weight_decay=1e-4 --use_fp16\r\n\r\n**New API** should store using SaveModel\r\ntf_cnn_benchmarks.py --model resnet50 --num_epochs=2 --batch_size 64 --data_name=imagenet  --data_dir=/mnt/data **--train_dir_save_model=/mnt/checkpoint**  --variable_update horovod --horovod_device gpu --weight_decay=1e-4 --use_fp16\r\n\r\n\r\n**Who will benefit with this feature?**\r\nBy having such option, deploying the model to production will be super fast, even for the people who doesn't know anything about training code. Currently we have to either change the training code to use SaveModel or figure out a way to export graph along with variables. \r\n\r\n**Any Other info.**\r\nN/A"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23200", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23200/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23200/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23200/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23200", "id": 373231177, "node_id": "MDU6SXNzdWUzNzMyMzExNzc=", "number": 23200, "title": "r1.12: \"No module named enum\"", "user": {"login": "amcphail", "id": 1313959, "node_id": "MDQ6VXNlcjEzMTM5NTk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1313959?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amcphail", "html_url": "https://github.com/amcphail", "followers_url": "https://api.github.com/users/amcphail/followers", "following_url": "https://api.github.com/users/amcphail/following{/other_user}", "gists_url": "https://api.github.com/users/amcphail/gists{/gist_id}", "starred_url": "https://api.github.com/users/amcphail/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amcphail/subscriptions", "organizations_url": "https://api.github.com/users/amcphail/orgs", "repos_url": "https://api.github.com/users/amcphail/repos", "events_url": "https://api.github.com/users/amcphail/events{/privacy}", "received_events_url": "https://api.github.com/users/amcphail/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 15, "created_at": "2018-10-23T22:35:58Z", "updated_at": "2020-02-19T08:12:53Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- Linux Ubuntu 16.04.1\r\n- no mobile device\r\n- TensorFlow installed from github\r\n- TensorFlow version: r1.12\r\n- Python version: 2.7\r\n- Installed using virtualenv? pip? conda?: apt-get\r\n- Bazel version (if compiling from source): 0.17.1\r\n- GCC/Compiler version (if compiling from source): 5.4.0\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n\r\n\r\n**Describe the problem**\r\n File \"/home/amcp011/.cache/bazel/_bazel_amcp011/2a4bcc1a1f556f9e46df7e271eeaa164/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/ops/variables.py\", line 20, in <module>\r\n    import enum  # pylint: disable=g-bad-import-order\r\nImportError: No module named enum\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nbazel build --config=opt //tensorflow/tools/pip_package:build_pip_package\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nERROR: /home/amcp011/local/tensorflow/tensorflow/BUILD:533:1: Executing genrule //tensorflow:tf_python_api_gen_v1 failed (Exit 1)\r\nTraceback (most recent call last):\r\n  File \"/home/amcp011/.cache/bazel/_bazel_amcp011/2a4bcc1a1f556f9e46df7e271eeaa164/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 27, in <module>\r\n    from tensorflow.python.tools.api.generator import doc_srcs\r\n  File \"/home/amcp011/.cache/bazel/_bazel_amcp011/2a4bcc1a1f556f9e46df7e271eeaa164/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/__init__.py\", line 70, in <module>\r\n    from tensorflow.python.framework.framework_lib import *  # pylint: disable=redefined-builtin\r\n  File \"/home/amcp011/.cache/bazel/_bazel_amcp011/2a4bcc1a1f556f9e46df7e271eeaa164/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/framework/framework_lib.py\", line 52, in <module>\r\n    from tensorflow.python.framework.importer import import_graph_def\r\n  File \"/home/amcp011/.cache/bazel/_bazel_amcp011/2a4bcc1a1f556f9e46df7e271eeaa164/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/framework/importer.py\", line 27, in <module>\r\n    from tensorflow.python.framework import function\r\n  File \"/home/amcp011/.cache/bazel/_bazel_amcp011/2a4bcc1a1f556f9e46df7e271eeaa164/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/framework/function.py\", line 36, in <module>\r\n    from tensorflow.python.ops import resource_variable_ops\r\n  File \"/home/amcp011/.cache/bazel/_bazel_amcp011/2a4bcc1a1f556f9e46df7e271eeaa164/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/ops/resource_variable_ops.py\", line 38, in <module>\r\n    from tensorflow.python.ops import variables\r\n  File \"/home/amcp011/.cache/bazel/_bazel_amcp011/2a4bcc1a1f556f9e46df7e271eeaa164/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1.runfiles/org_tensorflow/tensorflow/python/ops/variables.py\", line 20, in <module>\r\n    import enum  # pylint: disable=g-bad-import-order\r\nImportError: No module named enum\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nINFO: Elapsed time: 128.659s, Critical Path: 101.44s\r\nINFO: 72 processes: 72 local.\r\nFAILED: Build did NOT complete successfully\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23192", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23192/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23192/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23192/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23192", "id": 373113103, "node_id": "MDU6SXNzdWUzNzMxMTMxMDM=", "number": 23192, "title": "Prevent Empty Checkpointable Data Structure Restores", "user": {"login": "sleighsoft", "id": 9438971, "node_id": "MDQ6VXNlcjk0Mzg5NzE=", "avatar_url": "https://avatars3.githubusercontent.com/u/9438971?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sleighsoft", "html_url": "https://github.com/sleighsoft", "followers_url": "https://api.github.com/users/sleighsoft/followers", "following_url": "https://api.github.com/users/sleighsoft/following{/other_user}", "gists_url": "https://api.github.com/users/sleighsoft/gists{/gist_id}", "starred_url": "https://api.github.com/users/sleighsoft/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sleighsoft/subscriptions", "organizations_url": "https://api.github.com/users/sleighsoft/orgs", "repos_url": "https://api.github.com/users/sleighsoft/repos", "events_url": "https://api.github.com/users/sleighsoft/events{/privacy}", "received_events_url": "https://api.github.com/users/sleighsoft/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}, {"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-10-23T17:29:42Z", "updated_at": "2018-12-16T18:37:34Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "@allenlavoie\r\n\r\nIssue tracking the \"bug\" that is caused when restoring a checkpoint where the Checkpointable object has new checkpointable data structures that do not contain any checkpointable objects themselves and therefore prevent restoration when using `load_status.assert_consumed()`.\r\n\r\n*Example Code:*\r\n```python\r\nimport tensorflow as tf\r\nfrom tensorflow.python.training.checkpointable.tracking import Checkpointable\r\n\r\n\r\nclass Model(Checkpointable):\r\n\r\n  def __init__(self):\r\n    self.variable = tf.get_variable(\"variable\", [2, 2])\r\n    self.dict = {\r\n        \"test\": 1,\r\n        \"test2\": 2,\r\n    }\r\n    self.dict_var = {\r\n        \"test\": 1,\r\n        \"test2\": tf.get_variable(\"dict_var\", [2, 2])\r\n    }\r\n    self.dict_nested_var = {\r\n        \"test\": 1,\r\n        \"test2\": {\r\n            \"var\": tf.get_variable(\"dict_nested_var\", [2, 2])\r\n        }\r\n    }\r\n    self.list_var = [tf.get_variable(\"list_var\", [2, 2])]\r\n\r\n\r\nprint('SAVE')\r\nwith tf.Graph().as_default():\r\n\r\n  s = tf.Session()\r\n\r\n  m = Model()\r\n\r\n  s.run(tf.global_variables_initializer())\r\n\r\n  c = tf.train.Checkpoint(model=m)\r\n\r\n  c.save('checkpoints/', session=s)\r\n\r\nprint('RESTORE')\r\nwith tf.Graph().as_default():\r\n\r\n  s = tf.Session()\r\n\r\n  m = Model()\r\n\r\n  m.dict_new = {\r\n      \"test\": 1,\r\n      \"test2\": 2\r\n  }\r\n\r\n  c = tf.train.Checkpoint(model=m)\r\n\r\n  status = c.restore('checkpoints/-1')\r\n\r\n  status.assert_consumed().run_restore_ops(s)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23185", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23185/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23185/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23185/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23185", "id": 372850159, "node_id": "MDU6SXNzdWUzNzI4NTAxNTk=", "number": 23185, "title": "Eager execution: variables can't be iterated (unlike Tensor)", "user": {"login": "arogozhnikov", "id": 6318811, "node_id": "MDQ6VXNlcjYzMTg4MTE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6318811?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arogozhnikov", "html_url": "https://github.com/arogozhnikov", "followers_url": "https://api.github.com/users/arogozhnikov/followers", "following_url": "https://api.github.com/users/arogozhnikov/following{/other_user}", "gists_url": "https://api.github.com/users/arogozhnikov/gists{/gist_id}", "starred_url": "https://api.github.com/users/arogozhnikov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arogozhnikov/subscriptions", "organizations_url": "https://api.github.com/users/arogozhnikov/orgs", "repos_url": "https://api.github.com/users/arogozhnikov/repos", "events_url": "https://api.github.com/users/arogozhnikov/events{/privacy}", "received_events_url": "https://api.github.com/users/arogozhnikov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 736653459, "node_id": "MDU6TGFiZWw3MzY2NTM0NTk=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:eager", "name": "comp:eager", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-10-23T07:36:43Z", "updated_at": "2018-12-09T18:40:59Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: NA\r\n- TensorFlow installed from (source or binary): pip binary\r\n- TensorFlow version (use command below): v1.10.0-0-g656e7a2b34 1.10.0\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source): NA\r\n- GCC/Compiler version (if compiling from source): NA\r\n- CUDA/cuDNN version: NA\r\n- GPU model and memory: NA\r\n\r\n\r\n**Describe the current behavior**\r\n**Describe the expected behavior**\r\n\r\nVariable is expected to be iterable, just as EagerTensor, but right now it raises TypeErrors\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport tensorflow as tf\r\nimport numpy\r\ntf.enable_eager_execution()\r\nx = tf.contrib.eager.Variable(numpy.zeros([3, 4, 5]))\r\nprint(type(x + 0))\r\nlist(x + 0) # ok\r\nprint(type(x))\r\nlist(x) # TypeError: 'Variable' object is not iterable.\r\n```\r\n\r\nOutput:\r\n```\r\n<class 'EagerTensor'>\r\n<class 'tensorflow.python.ops.resource_variable_ops.ResourceVariable'>\r\n```\r\n\r\nExact command to reproduce: \r\n```\r\npython script.py\r\n```\r\n(to please tensorflowbuttler)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23176", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23176/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23176/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23176/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23176", "id": 372758478, "node_id": "MDU6SXNzdWUzNzI3NTg0Nzg=", "number": 23176, "title": "keras.layers.Concatenate could support list inputs with length 1", "user": {"login": "hartikainen", "id": 2308543, "node_id": "MDQ6VXNlcjIzMDg1NDM=", "avatar_url": "https://avatars1.githubusercontent.com/u/2308543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hartikainen", "html_url": "https://github.com/hartikainen", "followers_url": "https://api.github.com/users/hartikainen/followers", "following_url": "https://api.github.com/users/hartikainen/following{/other_user}", "gists_url": "https://api.github.com/users/hartikainen/gists{/gist_id}", "starred_url": "https://api.github.com/users/hartikainen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hartikainen/subscriptions", "organizations_url": "https://api.github.com/users/hartikainen/orgs", "repos_url": "https://api.github.com/users/hartikainen/repos", "events_url": "https://api.github.com/users/hartikainen/events{/privacy}", "received_events_url": "https://api.github.com/users/hartikainen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-10-23T00:56:01Z", "updated_at": "2018-12-07T18:53:43Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using):\r\n```\r\n$ pip freeze | grep tensorflow\r\ntensorflow==1.12.0rc1\r\ntensorflow-estimator==1.10.12\r\n```\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nCurrently, the `tf.keras.layers.Concatenate` only supports [list inputs with length >= 2](https://github.com/tensorflow/tensorflow/blob/e5c17aef836f8b85591cdcae31fbb66ddcf8185a/tensorflow/python/keras/layers/merge.py#L378).\r\n\r\nConsidering that the vanilla `tf.concat` works with inputs of length 1, it would be nice if the keras layers implemented the same behavior.\r\n\r\n```python\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\n\r\ndef test_tensorflow_concatenate(inputs):\r\n    tf.concat(inputs, axis=-1)\r\n\r\n    print(\"tf.concat works with {} inputs\".format(len(inputs)))\r\n\r\n\r\ndef test_concatenate_layer_with_inputs(inputs):\r\n    model = tf.keras.Sequential((\r\n        tf.keras.layers.Concatenate(axis=-1),\r\n        tf.keras.layers.Dense(32)))\r\n\r\n    feed_dict = {\r\n        input_: np.random.uniform(\r\n            0, 1, (3, *input_.shape[1:].as_list()))\r\n        for input_ in inputs\r\n    }\r\n    output = model(inputs)\r\n    output_eval = tf.keras.backend.get_session().run(\r\n        output, feed_dict=feed_dict)\r\n    output_np = model.predict([feed_dict[key] for key in inputs])\r\n\r\n    assert np.allclose(output_eval, output_np)\r\n\r\n    print(\"tf.keras.layers.Concatenate with {} inputs\".format(len(inputs)))\r\n\r\n\r\ndef main():\r\n    input1 = tf.keras.layers.Input((1, ))\r\n    input2 = tf.keras.layers.Input((2, ))\r\n\r\n    test_tensorflow_concatenate([input1, input2])\r\n    test_tensorflow_concatenate([input1])\r\n\r\n    test_concatenate_layer_with_inputs([input1, input2])\r\n    test_concatenate_layer_with_inputs([input1])\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\n\r\n\r\n**Will this change the current api? How?**\r\nNo ValueErrors would be raised when calling the `tf.keras.layers.Concatenate` with input list of length 1.\r\n\r\n**Who will benefit with this feature?**\r\nAnyone who dynamically creates multi-input/-output keras models.\r\n\r\n**Any Other info.**\r\nn/a"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23166", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23166/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23166/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23166/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23166", "id": 372616818, "node_id": "MDU6SXNzdWUzNzI2MTY4MTg=", "number": 23166, "title": "\"Invalid loop structure. Mismatched parent frames\"", "user": {"login": "carlini", "id": 1269300, "node_id": "MDQ6VXNlcjEyNjkzMDA=", "avatar_url": "https://avatars2.githubusercontent.com/u/1269300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carlini", "html_url": "https://github.com/carlini", "followers_url": "https://api.github.com/users/carlini/followers", "following_url": "https://api.github.com/users/carlini/following{/other_user}", "gists_url": "https://api.github.com/users/carlini/gists{/gist_id}", "starred_url": "https://api.github.com/users/carlini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carlini/subscriptions", "organizations_url": "https://api.github.com/users/carlini/orgs", "repos_url": "https://api.github.com/users/carlini/repos", "events_url": "https://api.github.com/users/carlini/events{/privacy}", "received_events_url": "https://api.github.com/users/carlini/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}], "state": "open", "locked": false, "assignee": {"login": "saxenasaurabh", "id": 3967488, "node_id": "MDQ6VXNlcjM5Njc0ODg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3967488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saxenasaurabh", "html_url": "https://github.com/saxenasaurabh", "followers_url": "https://api.github.com/users/saxenasaurabh/followers", "following_url": "https://api.github.com/users/saxenasaurabh/following{/other_user}", "gists_url": "https://api.github.com/users/saxenasaurabh/gists{/gist_id}", "starred_url": "https://api.github.com/users/saxenasaurabh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saxenasaurabh/subscriptions", "organizations_url": "https://api.github.com/users/saxenasaurabh/orgs", "repos_url": "https://api.github.com/users/saxenasaurabh/repos", "events_url": "https://api.github.com/users/saxenasaurabh/events{/privacy}", "received_events_url": "https://api.github.com/users/saxenasaurabh/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "saxenasaurabh", "id": 3967488, "node_id": "MDQ6VXNlcjM5Njc0ODg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3967488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saxenasaurabh", "html_url": "https://github.com/saxenasaurabh", "followers_url": "https://api.github.com/users/saxenasaurabh/followers", "following_url": "https://api.github.com/users/saxenasaurabh/following{/other_user}", "gists_url": "https://api.github.com/users/saxenasaurabh/gists{/gist_id}", "starred_url": "https://api.github.com/users/saxenasaurabh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saxenasaurabh/subscriptions", "organizations_url": "https://api.github.com/users/saxenasaurabh/orgs", "repos_url": "https://api.github.com/users/saxenasaurabh/repos", "events_url": "https://api.github.com/users/saxenasaurabh/events{/privacy}", "received_events_url": "https://api.github.com/users/saxenasaurabh/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 16, "created_at": "2018-10-22T17:27:24Z", "updated_at": "2020-01-31T17:31:40Z", "closed_at": null, "author_association": "NONE", "body": "Computing the gradient through a batch normalization layer as implemented in keras with a batch size of None while in a tf.while loop can cause the following error:\r\n\r\n\"tensorflow.python.framework.errors_impl.InvalidArgumentError: Invalid loop structure: Mismatched parent frames for \"while/while_context\": \"while/while_context\" vs \"\". This is an internal bug, please file a bug report with instructions on how to reproduce the error\"\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution: Ubuntu 16.04\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): Reproducible using the latest release [v1.12.0-rc1-0-g7b08198113 1.12.0-rc1] through back to at least 1.10.0.\r\n- Python version: 3.5.2\r\n- CUDA/cuDNN version: Reproducible without CUDA.\r\n- GPU model and memory: Reproducible without any GPUs.\r\n\r\nCurrent Behavior: running the below script throws a really bad error.\r\n\r\nExpected Behavior: it crashes, but not with this error.\r\n\r\n**Code to reproduce the issue**\r\n\r\nThis is the minimal example that I can get to cause a crash. It isn't \"correct\" code in that it shouldn't work, but it shouldn't crash because of mismatched parent frames. Code that I believe is actually correct also causes the crash, but is much longer.\r\n\r\n```python\r\nimport numpy as np\r\nimport tensorflow as tf\r\n### MUST be keras, not from tensorflow import keras\r\nimport keras\r\n\r\nif __name__ == \"__main__\":\r\n  sess = keras.backend.get_session()\r\n\r\n  ### I can't reproduce this with tf.layers.batch_normalization\r\n  model = keras.models.Sequential([keras.layers.BatchNormalization(input_shape=(1,))])\r\n  ### This next line MUST have the None, otherwise it doesn't crash\r\n  x = tf.placeholder(tf.float32, (None, 1))\r\n\r\n  eta = tf.zeros(tf.shape(x))\r\n  def cond(i, _):\r\n    return tf.less(i, 10)\r\n  def body(i, e):\r\n    preds = model(x+e)\r\n    return i + 1, tf.gradients(preds, x)[0]\r\n\r\n  _, eta = tf.while_loop(cond, body, [tf.zeros([]), eta])\r\n\r\n  sess.run(eta, {x: np.zeros((128,1))})\r\n```\r\n\r\n**Other info / logs**\r\n\r\n```\r\n2018-10-22 17:21:30.132455: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\nTraceback (most recent call last):\r\n  File \"/home/ncarlini/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1334, in _do_call\r\n    return fn(*args)\r\n  File \"/home/ncarlini/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1319, in _run_fn\r\n    options, feed_dict, fetch_list, target_list, run_metadata)\r\n  File \"/home/ncarlini/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1407, in _call_tf_sessionrun\r\n    run_metadata)\r\ntensorflow.python.framework.errors_impl.InternalError: Invalid loop structure: Mismatched parent frames for \"while/while_context\": \"while/while_context\" vs \"\". The node giving this error: {{node while/gradients/while/sequential_1/batch_normalization_1/cond/batchnorm/mul_1_grad/Shape/Enter}}This is an internal bug, please file a bug report with instructions on how to reproduce the error.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"bug.py\", line 26, in <module>\r\n    sess.run(eta, {x: np.zeros((128,1))})\r\n  File \"/home/ncarlini/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 929, in run\r\n    run_metadata_ptr)\r\n  File \"/home/ncarlini/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1152, in _run\r\n    feed_dict_tensor, options, run_metadata)\r\n  File \"/home/ncarlini/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1328, in _do_run\r\n    run_metadata)\r\n  File \"/home/ncarlini/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1348, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.InternalError: Invalid loop structure: Mismatched parent frames for \"while/while_context\": \"while/while_context\" vs \"\". The node giving this error: node while/gradients/while/sequential_1/batch_normalization_1/cond/batchnorm/mul_1_grad/Shape/Enter (defined at bug.py:22) This is an internal bug, please file a bug report with instructions on how to reproduce the error.\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23156", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23156/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23156/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23156/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23156", "id": 372425622, "node_id": "MDU6SXNzdWUzNzI0MjU2MjI=", "number": 23156, "title": "axis argument for FFT ops (tf.signal.fft, tf.signal.fft2d, etc.)", "user": {"login": "hsgkim", "id": 34839382, "node_id": "MDQ6VXNlcjM0ODM5Mzgy", "avatar_url": "https://avatars0.githubusercontent.com/u/34839382?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hsgkim", "html_url": "https://github.com/hsgkim", "followers_url": "https://api.github.com/users/hsgkim/followers", "following_url": "https://api.github.com/users/hsgkim/following{/other_user}", "gists_url": "https://api.github.com/users/hsgkim/gists{/gist_id}", "starred_url": "https://api.github.com/users/hsgkim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hsgkim/subscriptions", "organizations_url": "https://api.github.com/users/hsgkim/orgs", "repos_url": "https://api.github.com/users/hsgkim/repos", "events_url": "https://api.github.com/users/hsgkim/events{/privacy}", "received_events_url": "https://api.github.com/users/hsgkim/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 1566679705, "node_id": "MDU6TGFiZWwxNTY2Njc5NzA1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:signal", "name": "comp:signal", "color": "0052cc", "default": false, "description": "tf.signal related issues"}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2018-10-22T07:56:26Z", "updated_at": "2019-09-25T23:03:24Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.11\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n`tf.spectral.fft3d` as of now is restricted to apply FFT to the last 3 dimensions of the input, while the majority of the operations, e.g. `tf.nn.conv3d`, handle data in NDHWC format by default. In order to circumvent this limitation, users have to permute (transpose) the data just for the FFT operation, then permute them back for other operations that follow thereafter. This not only makes the code less readable, but more importantly incurs extra overhead.\r\n\r\n**Will this change the current api? How?**\r\nThis will add another argument `data_format` to `tf.spectral.fft3d` which lets users decide which dimensions should be used for FFT. `data_format` should be either `\"NDHWC\"` or `\"NCDHW\"`, and defaults to `\"NCDHW\"` for backward compatibility. If `\"NDHWC\"` is chosen as the `data_format`, the second, third and fourth dimensions will be used instead. \r\n\r\n**Who will benefit with this feature?**\r\nAny users using `fft3d` are expected to benefit from this, especially when they use FFT with other convolutional layers that accept inputs in NDHWC format.\r\n\r\n**Any Other info.**\r\nOther operations such as `tf.spectral.fft2d` may also be modified for consistency.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23154", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23154/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23154/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23154/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23154", "id": 372407766, "node_id": "MDU6SXNzdWUzNzI0MDc3NjY=", "number": 23154, "title": "Support for Truncated Backpropagation Through Time with tf.data.TFRecordDataset API", "user": {"login": "ghost", "id": 10137, "node_id": "MDQ6VXNlcjEwMTM3", "avatar_url": "https://avatars3.githubusercontent.com/u/10137?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghost", "html_url": "https://github.com/ghost", "followers_url": "https://api.github.com/users/ghost/followers", "following_url": "https://api.github.com/users/ghost/following{/other_user}", "gists_url": "https://api.github.com/users/ghost/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghost/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghost/subscriptions", "organizations_url": "https://api.github.com/users/ghost/orgs", "repos_url": "https://api.github.com/users/ghost/repos", "events_url": "https://api.github.com/users/ghost/events{/privacy}", "received_events_url": "https://api.github.com/users/ghost/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-10-22T06:32:56Z", "updated_at": "2018-12-27T18:40:49Z", "closed_at": null, "author_association": "NONE", "body": "I am aware that there is support on Tensorflow for truncated backpropagation through time with the tf.contrib.training.batch_sequences_with_states method and the state saving RNN. However this requires the conventional method using the queue runners. I am using the new tf.data.TFRecordDataset API for my my work which does not require the developer to explicitly call queue runners. But apparently there is no support for truncated backpropagation through time when I use this API.\r\n\r\nTensorflow Version: 1.11.0  "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23147", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23147/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23147/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23147/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23147", "id": 372298262, "node_id": "MDU6SXNzdWUzNzIyOTgyNjI=", "number": 23147, "title": "Trying to connect from process to Tensorflow Server, cannot use frozen graph", "user": {"login": "hcl14", "id": 2828322, "node_id": "MDQ6VXNlcjI4MjgzMjI=", "avatar_url": "https://avatars3.githubusercontent.com/u/2828322?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hcl14", "html_url": "https://github.com/hcl14", "followers_url": "https://api.github.com/users/hcl14/followers", "following_url": "https://api.github.com/users/hcl14/following{/other_user}", "gists_url": "https://api.github.com/users/hcl14/gists{/gist_id}", "starred_url": "https://api.github.com/users/hcl14/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hcl14/subscriptions", "organizations_url": "https://api.github.com/users/hcl14/orgs", "repos_url": "https://api.github.com/users/hcl14/repos", "events_url": "https://api.github.com/users/hcl14/events{/privacy}", "received_events_url": "https://api.github.com/users/hcl14/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-10-21T10:00:25Z", "updated_at": "2018-12-11T18:54:39Z", "closed_at": null, "author_association": "NONE", "body": "Hi everyone, I have an issue which can possibly be a bug, for which I am trying to find solution for quite some time:\r\n\r\nStack Overflow:\r\nhttps://stackoverflow.com/questions/52700621/tensorflow-server-i-dont-want-to-initialize-global-variables-for-every-session\r\n\r\nDiscuss:\r\nhttps://groups.google.com/a/tensorflow.org/forum/#!topic/discuss/rARPP1_ilNA\r\n\r\nMy story in short is that I create processes dynamically in Python and do model predictions using a session for Tensorflow Server `tf.train.Server`. Graph is saved in global scope, as I hope that default python 'fork' mode will not create any overhead as long as data in RAM is not changed (\"copy-on-change\" policy). Anyway, it's too long and expensive for me to reload model for each new process. Perhaps there might be a more efficient way to define model on server side, but I don't know it.\r\n\r\nThe problem is that somewhy I need to run initialization of global variables (`sess.run(tf.global_variables_initializer())`) each time I create new process and open new session. I tried to do dummy sun of the model before locking graph so that all the variables must be initialized, but no success - I still get the uninitialized variable error. Can anyone help me with that?\r\n\r\nI have a small reproducible example of the problem compatible with Tensorflow 1.11:\r\n\r\nhttps://github.com/hcl14/Tensorflow-server-launched-from-child-process\r\n\r\nThe places in the code are marked with `\"PROBLEM\"` comment.\r\n\r\nAlso, maybe I am doing everything wrong and there is a better way to quickly do model predictions from dynamically created processes?\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23146", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23146/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23146/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23146/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23146", "id": 372292323, "node_id": "MDU6SXNzdWUzNzIyOTIzMjM=", "number": 23146, "title": "The same code which is fine on Android 6.0.1, but an error(\"The model is not a valid Flatbuffer file\") is reported on Android 8.0.0", "user": {"login": "TXQGIT", "id": 40796349, "node_id": "MDQ6VXNlcjQwNzk2MzQ5", "avatar_url": "https://avatars0.githubusercontent.com/u/40796349?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TXQGIT", "html_url": "https://github.com/TXQGIT", "followers_url": "https://api.github.com/users/TXQGIT/followers", "following_url": "https://api.github.com/users/TXQGIT/following{/other_user}", "gists_url": "https://api.github.com/users/TXQGIT/gists{/gist_id}", "starred_url": "https://api.github.com/users/TXQGIT/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TXQGIT/subscriptions", "organizations_url": "https://api.github.com/users/TXQGIT/orgs", "repos_url": "https://api.github.com/users/TXQGIT/repos", "events_url": "https://api.github.com/users/TXQGIT/events{/privacy}", "received_events_url": "https://api.github.com/users/TXQGIT/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-10-21T08:39:22Z", "updated_at": "2019-02-08T00:33:45Z", "closed_at": null, "author_association": "NONE", "body": "**OS Platform and Distribution**\r\nWin 10\r\nAndroid Studio 3.0.1\r\nsdk version 26\r\n**TensorFlow installed from**\r\nN/A\r\n**TensorFlow version**\r\nN/A\r\n**Bazel version**\r\nN/A\r\n**CUDA/cuDNN version**\r\nN/A\r\n**GPU model and memory**\r\nN/A\r\n**Exact command to reproduce**\r\nN/A\r\n**Mobile devic**\r\nHuawei Honor 8 & Gome K1\r\n\r\n**Describe the problem**\r\nI am using the TFLite demo for Android. Since there are two ways to initialize an Interpreter with a model file:\r\nThe Interpreter can be initialized with a model file using the constructor:\r\n`public Interpreter(@NotNull File modelFile);`\r\nor with a MappedByteBuffer:\r\n`public Interpreter(@NotNull MappedByteBuffer mappedByteBuffer);`\r\nThe official TFLite demo uses the second way(MappedByteBuffer) to initialize an Interpreter. I change it to the first way(using File) and The modified code is as follows(the constructor of ImageClassifier):\r\n```\r\n//tflite = new Interpreter(loadModelFile(activity));  //official code. The second way to initialize.\r\nFile modelFile = new File(\"/storage/emulated/0/DCIM/\" + getModelPath());   //the first way\r\ntflite = new Interpreter(modelFile);            //the first way\r\n```\r\nWhen I run it on Gome K1 mobile phone(Android 6.0.1), it works fine. However, when I run it on Huawei Honor 8(Android 8.0.0), an error occurred:\r\n`java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.tflite_pure/com.example.tflite_pure.MainActivity}: java.lang.IllegalArgumentException: Contents of /storage/emulated/0/DCIM/mobilenet_v1_1.0_224.tflite does not encode a valid TensorFlowLite model: Could not open '/storage/emulated/0/DCIM/mobilenet_v1_1.0_224.tflite'.The model is not a valid Flatbuffer file`\r\n\r\nI am not sure if this problem is caused by different versions of Android(6.0.1 vs 8.0.0). So any help would grateful. Thanks.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23143", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23143/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23143/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23143/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23143", "id": 372286511, "node_id": "MDU6SXNzdWUzNzIyODY1MTE=", "number": 23143, "title": "Remove output tensors 1 - 4 from FusedBatchNorm", "user": {"login": "santoshchilkunda", "id": 24641339, "node_id": "MDQ6VXNlcjI0NjQxMzM5", "avatar_url": "https://avatars2.githubusercontent.com/u/24641339?v=4", "gravatar_id": "", "url": "https://api.github.com/users/santoshchilkunda", "html_url": "https://github.com/santoshchilkunda", "followers_url": "https://api.github.com/users/santoshchilkunda/followers", "following_url": "https://api.github.com/users/santoshchilkunda/following{/other_user}", "gists_url": "https://api.github.com/users/santoshchilkunda/gists{/gist_id}", "starred_url": "https://api.github.com/users/santoshchilkunda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/santoshchilkunda/subscriptions", "organizations_url": "https://api.github.com/users/santoshchilkunda/orgs", "repos_url": "https://api.github.com/users/santoshchilkunda/repos", "events_url": "https://api.github.com/users/santoshchilkunda/events{/privacy}", "received_events_url": "https://api.github.com/users/santoshchilkunda/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-10-21T07:08:23Z", "updated_at": "2018-12-11T18:54:35Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.10.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nDownloaded frozen inference model MobileNet_v1_1.0_224 from https://github.com/tensorflow/models/blob/master/research/slim/nets/mobilenet_v1.md\r\n\r\nFusedBatchNorm has five outputs. 1-4 seem to be related to training. How do I remove them?\r\n\r\nI tried the following code:\r\n\r\n\t\t\tif op.type == 'FusedBatchNorm':\r\n\t\t\t\tnew_node = node_def_pb2.NodeDef()\r\n\t\t\t\tnew_node.name = op.node_def.name\r\n\t\t\t\tnew_node.op = op.node_def.op\r\n\t\t\t\tfor i in op.node_def.input:\r\n\t\t\t\t\tnew_node.input.extend([i])\r\n\t\t\t\tfor a in op.node_def.attr:\r\n\t\t\t\t\tnew_node.attr[a].CopyFrom(op.node_def.attr[a])\r\n\t\t\t\toutput_graph.node.extend([new_node])\r\n\r\n\t\t\telse:\r\n\t\t\t\tnew_node = node_def_pb2.NodeDef()\r\n\t\t\t\tnew_node.CopyFrom(op.node_def)\r\n\t\t\t\toutput_graph.node.extend([new_node])\r\n\r\nIt still has the output tensors 1 - 4.\r\n\r\nCan this feature be added to Graph Transform tool?\r\n\r\n**Will this change the current api? How?**\r\nIt won't. It's a new transformation in Graph Transformation tool.\r\n\r\n**Who will benefit with this feature?**\r\nMobilenet users\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23142", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23142/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23142/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23142/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23142", "id": 372269170, "node_id": "MDU6SXNzdWUzNzIyNjkxNzA=", "number": 23142, "title": "CAN'T BUILD TENSORFLOW", "user": {"login": "WagnerCaetano", "id": 40742874, "node_id": "MDQ6VXNlcjQwNzQyODc0", "avatar_url": "https://avatars0.githubusercontent.com/u/40742874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WagnerCaetano", "html_url": "https://github.com/WagnerCaetano", "followers_url": "https://api.github.com/users/WagnerCaetano/followers", "following_url": "https://api.github.com/users/WagnerCaetano/following{/other_user}", "gists_url": "https://api.github.com/users/WagnerCaetano/gists{/gist_id}", "starred_url": "https://api.github.com/users/WagnerCaetano/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WagnerCaetano/subscriptions", "organizations_url": "https://api.github.com/users/WagnerCaetano/orgs", "repos_url": "https://api.github.com/users/WagnerCaetano/repos", "events_url": "https://api.github.com/users/WagnerCaetano/events{/privacy}", "received_events_url": "https://api.github.com/users/WagnerCaetano/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "meteorcloudy", "id": 4171702, "node_id": "MDQ6VXNlcjQxNzE3MDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/4171702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meteorcloudy", "html_url": "https://github.com/meteorcloudy", "followers_url": "https://api.github.com/users/meteorcloudy/followers", "following_url": "https://api.github.com/users/meteorcloudy/following{/other_user}", "gists_url": "https://api.github.com/users/meteorcloudy/gists{/gist_id}", "starred_url": "https://api.github.com/users/meteorcloudy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meteorcloudy/subscriptions", "organizations_url": "https://api.github.com/users/meteorcloudy/orgs", "repos_url": "https://api.github.com/users/meteorcloudy/repos", "events_url": "https://api.github.com/users/meteorcloudy/events{/privacy}", "received_events_url": "https://api.github.com/users/meteorcloudy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "meteorcloudy", "id": 4171702, "node_id": "MDQ6VXNlcjQxNzE3MDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/4171702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meteorcloudy", "html_url": "https://github.com/meteorcloudy", "followers_url": "https://api.github.com/users/meteorcloudy/followers", "following_url": "https://api.github.com/users/meteorcloudy/following{/other_user}", "gists_url": "https://api.github.com/users/meteorcloudy/gists{/gist_id}", "starred_url": "https://api.github.com/users/meteorcloudy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meteorcloudy/subscriptions", "organizations_url": "https://api.github.com/users/meteorcloudy/orgs", "repos_url": "https://api.github.com/users/meteorcloudy/repos", "events_url": "https://api.github.com/users/meteorcloudy/events{/privacy}", "received_events_url": "https://api.github.com/users/meteorcloudy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2018-10-21T01:31:40Z", "updated_at": "2018-12-11T18:54:31Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):WINDOWS 7 64\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: r1.11\r\n- Python version: 3.7\r\n- Installed using virtualenv? pip? conda?: PIP\r\n- Bazel version (if compiling from source): 0.18.0\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:  not using\r\n- GPU model and memory:\r\n\r\n\r\n\r\nI cant build tensorflow because happens some error about@png_archive\r\n\r\n`C:\\Users\\00\\tensorflow>bazel build --config=opt //tensorflow/tools/pip_package:\r\nuild_pip_package\r\nWARNING: Processed legacy workspace file c:\\users\\00\\tensorflow/tools/bazel.rc.\r\nThis file will not be processed in the next release of Bazel. Please read https\r\n//github.com/bazelbuild/bazel/issues/6319 for further information, including ho\r\n to upgrade.\r\nWARNING: Option 'experimental_shortened_obj_file_path' is deprecated\r\nLoading:\r\nLoading: 0 packages loaded\r\nINFO: Build options have changed, discarding analysis cache.\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (0 packages\r\noaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (0 packages\r\noaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (0 packages\r\noaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (0 packages\r\noaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (0 packages\r\noaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (0 packages\r\noaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (0 packages\r\noaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (0 packages\r\noaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (0 packages\r\noaded)\r\nERROR: C:/users/00/tensorflow/tensorflow/core/platform/default/build_config/BUI\r\nD:188:1: no such package '@png_archive//': Traceback (most recent call last):\r\n        File \"C:/users/00/tensorflow/third_party/repo.bzl\", line 106\r\n                _apply_patch(ctx, ctx.attr.patch_file)\r\n        File \"C:/users/00/tensorflow/third_party/repo.bzl\", line 73, in _apply_\r\natch\r\n                _execute_and_check_ret_code(ctx, cmd)\r\n        File \"C:/users/00/tensorflow/third_party/repo.bzl\", line 52, in _execut\r\n_and_check_ret_code\r\n                fail(\"Non-zero return code({1}) when ...))\r\nNon-zero return code(127) when executing 'E:\\MSYS2\\usr\\bin\\bash.exe -l -c patch\r\n-p1 -d C:/users/00/_bazel_00/xjibpket/external/png_archive -i C:/users/00/tenso\r\nflow/third_party/png_fix_rpi.patch':\r\nStdout:\r\nStderr: /usr/bin/bash: patch: comando n\u251c\u00fao encontrado\r\n and referenced by '//tensorflow/core/platform/default/build_config:png'\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (0 packages\r\noaded)\r\nERROR: C:/users/00/tensorflow/tensorflow/core/platform/default/build_config/BUI\r\nD:188:1: no such package '@png_archive//': Traceback (most recent call last):\r\n        File \"C:/users/00/tensorflow/third_party/repo.bzl\", line 106\r\n                _apply_patch(ctx, ctx.attr.patch_file)\r\n        File \"C:/users/00/tensorflow/third_party/repo.bzl\", line 73, in _apply_\r\natch\r\n                _execute_and_check_ret_code(ctx, cmd)\r\n        File \"C:/users/00/tensorflow/third_party/repo.bzl\", line 52, in _execut\r\n_and_check_ret_code\r\n                fail(\"Non-zero return code({1}) when ...))\r\nNon-zero return code(127) when executing 'E:\\MSYS2\\usr\\bin\\bash.exe -l -c patch\r\n-p1 -d C:/users/00/_bazel_00/xjibpket/external/png_archive -i C:/users/00/tenso\r\nflow/third_party/png_fix_rpi.patch':\r\nStdout:\r\nStderr: /usr/bin/bash: patch: comando n\u251c\u00fao encontrado\r\n and referenced by '//tensorflow/core/platform/default/build_config:png'\r\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' fa\r\nled; build aborted: Analysis failed\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (0 packages\r\noaded)\r\nERROR: C:/users/00/tensorflow/tensorflow/core/platform/default/build_config/BUI\r\nD:188:1: no such package '@png_archive//': Traceback (most recent call last):\r\n        File \"C:/users/00/tensorflow/third_party/repo.bzl\", line 106\r\n                _apply_patch(ctx, ctx.attr.patch_file)\r\n        File \"C:/users/00/tensorflow/third_party/repo.bzl\", line 73, in _apply_\r\natch\r\n                _execute_and_check_ret_code(ctx, cmd)\r\n        File \"C:/users/00/tensorflow/third_party/repo.bzl\", line 52, in _execut\r\n_and_check_ret_code\r\n                fail(\"Non-zero return code({1}) when ...))\r\nNon-zero return code(127) when executing 'E:\\MSYS2\\usr\\bin\\bash.exe -l -c patch\r\n-p1 -d C:/users/00/_bazel_00/xjibpket/external/png_archive -i C:/users/00/tenso\r\nflow/third_party/png_fix_rpi.patch':\r\nStdout:\r\nStderr: /usr/bin/bash: patch: comando n\u251c\u00fao encontrado\r\n and referenced by '//tensorflow/core/platform/default/build_config:png'\r\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' fa\r\nled; build aborted: Analysis failed\r\nINFO: Elapsed time: 9,864s\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (0 packages\r\noaded)\r\nERROR: C:/users/00/tensorflow/tensorflow/core/platform/default/build_config/BUI\r\nD:188:1: no such package '@png_archive//': Traceback (most recent call last):\r\n        File \"C:/users/00/tensorflow/third_party/repo.bzl\", line 106\r\n                _apply_patch(ctx, ctx.attr.patch_file)\r\n        File \"C:/users/00/tensorflow/third_party/repo.bzl\", line 73, in _apply_\r\natch\r\n                _execute_and_check_ret_code(ctx, cmd)\r\n        File \"C:/users/00/tensorflow/third_party/repo.bzl\", line 52, in _execut\r\n_and_check_ret_code\r\n                fail(\"Non-zero return code({1}) when ...))\r\nNon-zero return code(127) when executing 'E:\\MSYS2\\usr\\bin\\bash.exe -l -c patch\r\n-p1 -d C:/users/00/_bazel_00/xjibpket/external/png_archive -i C:/users/00/tenso\r\nflow/third_party/png_fix_rpi.patch':\r\nStdout:\r\nStderr: /usr/bin/bash: patch: comando n\u251c\u00fao encontrado\r\n and referenced by '//tensorflow/core/platform/default/build_config:png'\r\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' fa\r\nled; build aborted: Analysis failed\r\nINFO: Elapsed time: 9,864s\r\nINFO: 0 processes.\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (0 packages\r\noaded)\r\nERROR: C:/users/00/tensorflow/tensorflow/core/platform/default/build_config/BUI\r\nD:188:1: no such package '@png_archive//': Traceback (most recent call last):\r\n        File \"C:/users/00/tensorflow/third_party/repo.bzl\", line 106\r\n                _apply_patch(ctx, ctx.attr.patch_file)\r\n        File \"C:/users/00/tensorflow/third_party/repo.bzl\", line 73, in _apply_\r\natch\r\n                _execute_and_check_ret_code(ctx, cmd)\r\n        File \"C:/users/00/tensorflow/third_party/repo.bzl\", line 52, in _execut\r\n_and_check_ret_code\r\n                fail(\"Non-zero return code({1}) when ...))\r\nNon-zero return code(127) when executing 'E:\\MSYS2\\usr\\bin\\bash.exe -l -c patch\r\n-p1 -d C:/users/00/_bazel_00/xjibpket/external/png_archive -i C:/users/00/tenso\r\nflow/third_party/png_fix_rpi.patch':\r\nStdout:\r\nStderr: /usr/bin/bash: patch: command not found\r\n and referenced by '//tensorflow/core/platform/default/build_config:png'\r\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' fa\r\nled; build aborted: Analysis failed\r\nINFO: Elapsed time: 9,864s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (0 packages loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (0 packages\r\noaded)\r\nERROR: C:/users/00/tensorflow/tensorflow/core/platform/default/build_config/BUI\r\nD:188:1: no such package '@png_archive//': Traceback (most recent call last):\r\n        File \"C:/users/00/tensorflow/third_party/repo.bzl\", line 106\r\n                _apply_patch(ctx, ctx.attr.patch_file)\r\n        File \"C:/users/00/tensorflow/third_party/repo.bzl\", line 73, in _apply_\r\natch\r\n                _execute_and_check_ret_code(ctx, cmd)\r\n        File \"C:/users/00/tensorflow/third_party/repo.bzl\", line 52, in _execut\r\n_and_check_ret_code\r\n                fail(\"Non-zero return code({1}) when ...))\r\nNon-zero return code(127) when executing 'E:\\MSYS2\\usr\\bin\\bash.exe -l -c patch\r\n-p1 -d C:/users/00/_bazel_00/xjibpket/external/png_archive -i C:/users/00/tenso\r\nflow/third_party/png_fix_rpi.patch':\r\nStdout:\r\nStderr: /usr/bin/bash: patch: command not found\r\n and referenced by '//tensorflow/core/platform/default/build_config:png'\r\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' fa\r\nled; build aborted: Analysis failed\r\nINFO: Elapsed time: 9,864s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (0 packages loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (0 packages\r\noaded)\r\nERROR: C:/users/00/tensorflow/tensorflow/core/platform/default/build_config/BUI\r\nD:188:1: no such package '@png_archive//': Traceback (most recent call last):\r\n        File \"C:/users/00/tensorflow/third_party/repo.bzl\", line 106\r\n                _apply_patch(ctx, ctx.attr.patch_file)\r\n        File \"C:/users/00/tensorflow/third_party/repo.bzl\", line 73, in _apply_\r\natch\r\n                _execute_and_check_ret_code(ctx, cmd)\r\n        File \"C:/users/00/tensorflow/third_party/repo.bzl\", line 52, in _execut\r\n_and_check_ret_code\r\n                fail(\"Non-zero return code({1}) when ...))\r\nNon-zero return code(127) when executing 'E:\\MSYS2\\usr\\bin\\bash.exe -l -c patch\r\n-p1 -d C:/users/00/_bazel_00/xjibpket/external/png_archive -i C:/users/00/tenso\r\nflow/third_party/png_fix_rpi.patch':\r\nStdout:\r\nStderr: /usr/bin/bash: patch: command not found\r\n and referenced by '//tensorflow/core/platform/default/build_config:png'\r\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' fa\r\nled; build aborted: Analysis failed\r\nINFO: Elapsed time: 9,864s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (0 packages loaded)\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (0 packages\r\noaded)\r\nERROR: C:/users/00/tensorflow/tensorflow/core/platform/default/build_config/BUI\r\nD:188:1: no such package '@png_archive//': Traceback (most recent call last):\r\n        File \"C:/users/00/tensorflow/third_party/repo.bzl\", line 106\r\n                _apply_patch(ctx, ctx.attr.patch_file)\r\n        File \"C:/users/00/tensorflow/third_party/repo.bzl\", line 73, in _apply_\r\natch\r\n                _execute_and_check_ret_code(ctx, cmd)\r\n        File \"C:/users/00/tensorflow/third_party/repo.bzl\", line 52, in _execut\r\n_and_check_ret_code\r\n                fail(\"Non-zero return code({1}) when ...))\r\nNon-zero return code(127) when executing 'E:\\MSYS2\\usr\\bin\\bash.exe -l -c patch\r\n-p1 -d C:/users/00/_bazel_00/xjibpket/external/png_archive -i C:/users/00/tenso\r\nflow/third_party/png_fix_rpi.patch':\r\nStdout:\r\nStderr: /usr/bin/bash: patch: command not found\r\n and referenced by '//tensorflow/core/platform/default/build_config:png'\r\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' fa\r\nled; build aborted: Analysis failed\r\nINFO: Elapsed time: 9,864s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (0 packages loaded)\r\n`\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23132", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23132/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23132/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23132/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23132", "id": 372250026, "node_id": "MDU6SXNzdWUzNzIyNTAwMjY=", "number": 23132, "title": "multiplication of IndexedSlices with Dense Tensors", "user": {"login": "yifannieudem", "id": 25521604, "node_id": "MDQ6VXNlcjI1NTIxNjA0", "avatar_url": "https://avatars3.githubusercontent.com/u/25521604?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifannieudem", "html_url": "https://github.com/yifannieudem", "followers_url": "https://api.github.com/users/yifannieudem/followers", "following_url": "https://api.github.com/users/yifannieudem/following{/other_user}", "gists_url": "https://api.github.com/users/yifannieudem/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifannieudem/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifannieudem/subscriptions", "organizations_url": "https://api.github.com/users/yifannieudem/orgs", "repos_url": "https://api.github.com/users/yifannieudem/repos", "events_url": "https://api.github.com/users/yifannieudem/events{/privacy}", "received_events_url": "https://api.github.com/users/yifannieudem/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-10-20T20:31:06Z", "updated_at": "2019-01-18T18:48:14Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using):v1.3.0-rc2-20-g0787eee 1.3.0\r\n- Are you willing to contribute it (Yes/No):\r\nNo\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nI wanted to implement LambdaRank algorithm which requires a point-wise multiplication of \\lambda (dense tensor) with grads obtained by tf.gradients.  In tf, the grads of embeddings extraction will be IndexedSlices. It could be fed into optimizer's apply_grad() directly which is good but not for customized operations. Here I want to multiply dense tensor with IndexedSlices, but in vain. I have to convert IndexedSlices into dense and then multiply, which resulted in OOM  \r\n**Will this change the current api? How?**\r\nNo\r\n**Who will benefit with this feature?**\r\nPeople interested in Learning-to-rank algorithm, and more generally whoever wants to tweak the sparse grads\r\n**Any Other info.**\r\nNone\r\n\r\nHave I written custom code: No, I only call tf API functions\r\nOS Platform and Distribution: Debian 8.11\r\nTensorFlow installed from: anaconda \r\nBazel version: N/A\r\nCUDA/cuDNN version: CUDA 8.0.44, cuDNN 6.0.21\r\nGPU model and memory: Nvidia Titan Xp\r\nExact command to reproduce: N/A\r\nMobile device: N/A"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23104", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23104/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23104/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23104/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23104", "id": 371958398, "node_id": "MDU6SXNzdWUzNzE5NTgzOTg=", "number": 23104, "title": "Bazel will not compile under Windows when the user folder has spaces", "user": {"login": "waltermaldonado", "id": 8573950, "node_id": "MDQ6VXNlcjg1NzM5NTA=", "avatar_url": "https://avatars0.githubusercontent.com/u/8573950?v=4", "gravatar_id": "", "url": "https://api.github.com/users/waltermaldonado", "html_url": "https://github.com/waltermaldonado", "followers_url": "https://api.github.com/users/waltermaldonado/followers", "following_url": "https://api.github.com/users/waltermaldonado/following{/other_user}", "gists_url": "https://api.github.com/users/waltermaldonado/gists{/gist_id}", "starred_url": "https://api.github.com/users/waltermaldonado/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/waltermaldonado/subscriptions", "organizations_url": "https://api.github.com/users/waltermaldonado/orgs", "repos_url": "https://api.github.com/users/waltermaldonado/repos", "events_url": "https://api.github.com/users/waltermaldonado/events{/privacy}", "received_events_url": "https://api.github.com/users/waltermaldonado/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-10-19T13:29:55Z", "updated_at": "2020-02-18T08:54:47Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: master\r\n- Python version: 3.6\r\n- Installed using virtualenv? pip? conda?: no\r\n- Bazel version (if compiling from source): 0.18.0\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 7\r\n- GPU model and memory: GTX 1080 Ti 11Gb\r\n- Have I written custom code: no\r\n- Exact command to reproduce: bazel build\r\n\r\nThe initial state build files usually call a _wrap_bash_cmd function, which does not handle spaces in the paths. I changed line 71 of repo.bzl from:\r\n`[\"patch\", \"-p1\", \"-d\", ctx.path(\".\"), \"-i\", ctx.path(patch_file)]`\r\nto\r\n`[\"patch\", \"-p1\", \"-d\", '\"' + str(ctx.path(\".\")) + '\"', \"-i\", ctx.path(patch_file)]`\r\n\r\nand it helped, but there are a lot of other files where this also happens and the build keeps failing."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23101", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23101/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23101/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23101/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23101", "id": 371868146, "node_id": "MDU6SXNzdWUzNzE4NjgxNDY=", "number": 23101, "title": "Possible bug in the design of `tf.keras.layers.Conv`", "user": {"login": "fabio12345", "id": 33119878, "node_id": "MDQ6VXNlcjMzMTE5ODc4", "avatar_url": "https://avatars1.githubusercontent.com/u/33119878?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fabio12345", "html_url": "https://github.com/fabio12345", "followers_url": "https://api.github.com/users/fabio12345/followers", "following_url": "https://api.github.com/users/fabio12345/following{/other_user}", "gists_url": "https://api.github.com/users/fabio12345/gists{/gist_id}", "starred_url": "https://api.github.com/users/fabio12345/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fabio12345/subscriptions", "organizations_url": "https://api.github.com/users/fabio12345/orgs", "repos_url": "https://api.github.com/users/fabio12345/repos", "events_url": "https://api.github.com/users/fabio12345/events{/privacy}", "received_events_url": "https://api.github.com/users/fabio12345/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-10-19T09:03:22Z", "updated_at": "2019-07-19T20:28:07Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 1.10\r\n- Are you willing to contribute it (Yes/No): No (Don't know tf's code base well enough.)\r\n\r\n**Describe the feature and the current behavior/state.**\r\nCurrent behaviour of `tf.layers.Conv2D` is that\r\n```\r\nimport tensorflow as tf\r\n\r\nexample = tf.zeros([1, 32, 32, 1])\r\nexample2 = tf.zeros([1, 41, 41, 1])\r\n\r\n# Using a dilated convolution layer\r\nconvolution_op = tf.layers.Conv2D(4, 3, padding=\"SAME\", dilation_rate=4)\r\n\r\nprint(convolution_op( example ))\r\nprint(convolution_op( example2 ))\r\n```\r\ncauses the following exception\r\n```\r\nValueError: Dimension size must be evenly divisible by 4 but is 49 for 'conv2d_2/SpaceToBatchND_1' (op: 'SpaceToBatchND') with input shapes: [1,41,41,1], [2], [2,2] and with computed input tensors: input[1] = <4 4>, input[2] = <[4 4][4 4]>.\r\n```\r\nThe reason for this is that in the `build` function for `tf.keras.layers.Conv` (https://github.com/tensorflow/tensorflow/blob/r1.11/tensorflow/python/keras/layers/convolutional.py) the convolution operation is created - however, the *dilated* convolution operation also contains padding dependent on the size of the first input to `call`.\r\nThere's no reason for this, as the padding operation (i.e. the call to `tf.nn.conv2d`) could simply be different for each of the two `call`s.\r\nNote that with the functional layer API it is still possible to do the reuse of the layers:\r\n```\r\nconv1 = tf.layers.conv2d(example, 4, 3, padding=\"SAME\", dilation_rate=4, name=\"test\")\r\nconv2 = tf.layers.conv2d(example2, 4, 3, padding=\"SAME\", dilation_rate=4, name=\"test\", reuse=True)\r\n```\r\nbecause this causes two separate layer creations. I am proposing that the behaviour should be similar to this.\r\n\r\nThe consequence of this is that at the moment, to my knowledge, there is no good way of doing weight reuse of dilated convolution weights using `tf.keras.layers`. I think that the above is possibly a bug in the implementation - the convolution operation should maybe be create in the `call` function of `tf.keras.layers.Conv`?\r\n\r\n\r\n\r\n\r\n**Will this change the current api? How?**\r\nThis should not raise an error:\r\n```\r\nimport tensorflow as tf\r\n\r\nexample = tf.zeros([1, 32, 32, 1])\r\nexample2 = tf.zeros([1, 41, 41, 1])\r\n\r\nconvolution_op = tf.layers.Conv2D(4, 3, padding=\"SAME\", dilation_rate=4)\r\n\r\nprint(convolution_op( example ))\r\nprint(convolution_op( example2 ))\r\n\r\n```\r\n**Who will benefit with this feature?**\r\nEveryone, as this would be a more consistent behavior of the API, and would allow things that right now are not possible.\r\n\r\n**Any Other info.**\r\nMore information is also in https://github.com/tensorflow/tensorflow/issues/23019 - I had raised it but it was closed without a relevant reply.\r\n\r\nHave I written custom code \r\nas above.\r\nOS Platform and Distribution\r\nN/A\r\nTensorFlow installed from\r\npip3\r\nBazel version\r\nN/A\r\nCUDA/cuDNN version\r\nN/A\r\nGPU model and memory\r\nN/A\r\nExact command to reproduce\r\nas above\r\nMobile device\r\nN/A\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23091", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23091/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23091/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23091/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23091", "id": 371774797, "node_id": "MDU6SXNzdWUzNzE3NzQ3OTc=", "number": 23091, "title": "latest cpu version tensorflow report error when run slim model", "user": {"login": "guizili0", "id": 40055917, "node_id": "MDQ6VXNlcjQwMDU1OTE3", "avatar_url": "https://avatars2.githubusercontent.com/u/40055917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guizili0", "html_url": "https://github.com/guizili0", "followers_url": "https://api.github.com/users/guizili0/followers", "following_url": "https://api.github.com/users/guizili0/following{/other_user}", "gists_url": "https://api.github.com/users/guizili0/gists{/gist_id}", "starred_url": "https://api.github.com/users/guizili0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guizili0/subscriptions", "organizations_url": "https://api.github.com/users/guizili0/orgs", "repos_url": "https://api.github.com/users/guizili0/repos", "events_url": "https://api.github.com/users/guizili0/events{/privacy}", "received_events_url": "https://api.github.com/users/guizili0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-10-19T01:40:41Z", "updated_at": "2018-12-11T18:54:22Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- use tensorlow master branch commit 0918aa74153664dbc61604af3cf0d66eb334c7ce build the code, build command is : bazel build -c opt --copt=-L/home/guizili/tool/gcc6.3/lib64 //tensorflow/tools/pip_package:build_pip_package\r\n- OS Platform and Distribution (CentOS Linux release 7.4.1708 (Core)):\r\n- Python version 2.7.5:\r\n- Bazel version (0.15.0):\r\n- GCC/Compiler version (6.3.0):\r\n- CUDA/cuDNN version: NA\r\n- GPU model and memory: NA\r\n\r\nrun train command in tensorlfow model: https://github.com/tensorflow/models\r\ncommand is:\r\ntrain_dir=\"./train_dir\"\r\n    rm -rf $train_dir\r\n    mkdir -p $train_dir\r\n    python research/slim/train_image_classifier.py \\\r\n    --dataset_name=imagenet \\\r\n    --train_dir=$train_dir \\\r\n    --dataset_dir=/lustre/dataset/tensorflow/imagenet \\\r\n    --dataset_split_name=train \\\r\n    --model_name=inception_v3 \\\r\n    --batch_size=64 \\\r\n    --max_number_of_steps=220 \\\r\n    --clone_on_cpu=True\r\n\r\nerror log:\r\n2018-10-19 09:29:57.155023: E tensorflow/core/framework/node_def_util.cc:110] Error in the node: {{node InceptionV3/InceptionV3/Mixed_7c/Branch_1/Conv2d_0b_1x3/Conv2D}} = Conv2D[T=DT_FLOAT, data_format=\"NHWC\", dilations=[1, 1, 1, 1], padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true](InceptionV3/InceptionV3/Mixed_7c/Branch_1/Conv2d_0a_1x1/Relu, InceptionV3/Mixed_7c/Branch_1/Conv2d_0b_1x3/weights/read)\r\n2018-10-19 09:29:57.179106: E tensorflow/core/framework/node_def_util.cc:110] Error in the node: {{node InceptionV3/InceptionV3/Mixed_7c/Branch_1/Conv2d_0c_3x1/Conv2D}} = Conv2D[T=DT_FLOAT, data_format=\"NHWC\", dilations=[1, 1, 1, 1], padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true](InceptionV3/InceptionV3/Mixed_7c/Branch_1/Conv2d_0a_1x1/Relu, InceptionV3/Mixed_7c/Branch_1/Conv2d_0c_3x1/weights/read)\r\n2018-10-19 09:29:57.204720: E tensorflow/core/framework/node_def_util.cc:110] Error in the node: {{node InceptionV3/InceptionV3/Mixed_7c/Branch_2/Conv2d_0a_1x1/Conv2D}} = Conv2D[T=DT_FLOAT, data_format=\"NHWC\", dilations=[1, 1, 1, 1], padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true](InceptionV3/InceptionV3/Mixed_7b/concat, InceptionV3/Mixed_7c/Branch_2/Conv2d_0a_1x1/weights/read)\r\n2018-10-19 09:29:57.228912: E tensorflow/core/framework/node_def_util.cc:110] Error in the node: {{node InceptionV3/InceptionV3/Mixed_7c/Branch_2/Conv2d_0b_3x3/Conv2D}} = Conv2D[T=DT_FLOAT, data_format=\"NHWC\", dilations=[1, 1, 1, 1], padding=\"SAME\", strides=[1, 1, 1, 1], use_cudnn_on_gpu=true](InceptionV3/InceptionV3/Mixed_7c/Branch_2/Conv2d_0a_1x1/Relu, InceptionV3/Mixed_7c/Branch_2/Conv2d_0b_3x3/weights/read)\r\n\r\nattach the log while run mobilenet.\r\n[log.txt](https://github.com/tensorflow/tensorflow/files/2494158/log.txt)\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23086", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23086/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23086/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23086/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23086", "id": 371737044, "node_id": "MDU6SXNzdWUzNzE3MzcwNDQ=", "number": 23086, "title": "Float16 support for log_uniform_candidate_sampler/uniform_candidate_sampler", "user": {"login": "Santosh-Gupta", "id": 5524261, "node_id": "MDQ6VXNlcjU1MjQyNjE=", "avatar_url": "https://avatars1.githubusercontent.com/u/5524261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Santosh-Gupta", "html_url": "https://github.com/Santosh-Gupta", "followers_url": "https://api.github.com/users/Santosh-Gupta/followers", "following_url": "https://api.github.com/users/Santosh-Gupta/following{/other_user}", "gists_url": "https://api.github.com/users/Santosh-Gupta/gists{/gist_id}", "starred_url": "https://api.github.com/users/Santosh-Gupta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Santosh-Gupta/subscriptions", "organizations_url": "https://api.github.com/users/Santosh-Gupta/orgs", "repos_url": "https://api.github.com/users/Santosh-Gupta/repos", "events_url": "https://api.github.com/users/Santosh-Gupta/events{/privacy}", "received_events_url": "https://api.github.com/users/Santosh-Gupta/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-10-18T22:23:43Z", "updated_at": "2018-12-20T18:50:30Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.11.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nFloat16 architectures are promising for significantly increase the model size / training speed using the same amount of memory. So I am requesting Float16 support for `log_uniform_candidate_sampler` and `uniform_candidate_sampler`. Currently, in the returned tuple,  `true_expected_count` and `sampled_expected_count` as returned as float32. This causes issues when using `sampled_softmax_loss` since everything needs to be in the same datatype. \r\n\r\nI was able to find a hack work around\r\n\r\nhttps://stackoverflow.com/questions/52711895/how-to-run-define-tensorflow-graph-were-all-variables-are-in-float16-instead-ins\r\n\r\nHowever, this actually increases the training speed; I am not sure why (more details below)\r\n\r\nI have tried to develop a replacement function, however, I was unable to interpret the machine generated code where `log_uniform_candidate_sampler` and `uniform_candidate_sampler` are defined. I describe my attempt to interpret the code here\r\n\r\nhttps://stackoverflow.com/questions/52734709/how-to-interpret-this-machine-generated-python-code\r\n\r\n**Will this change the current api? How?**\r\n\r\nYes, most likely the best way is to have an optional arg for what datatype the user would like use, ie datatype=tf.float16. Otherwise defaults to float32\r\n\r\n**Who will benefit with this feature?**\r\n\r\nThose who are developing embedding items (ie Word2Vec) using float16 embeddings. \r\n\r\n**Any Other info.**\r\n\r\n>Have I written custom code\r\n\r\nHere is the code I used, for convenience it's in a Google Colab notebook so you can just run the code in the notebook. \r\n\r\nhttps://drive.google.com/open?id=1bnlSfezPqtwapvURRTAqGR4mkcCl9QZl\r\n\r\nI wrote a custom function to replace `true_expected_count` and `sampled_expected_count` generated from `uniform_candidate_sampler` because I wanted to isolate the issue if the slow-down is due to using float16 instead of float32. The specific code to replace those variables is  \r\n\r\n```\r\n    LogUniformCandidateSampler = namedtuple(\"namedtuple\", [\"sampled_candidates\", \"true_expected_count\", \"sampled_expected_count\"]) \r\n    sampled_values = tf.nn.uniform_candidate_sampler(\r\n          true_classes=tf.cast(train_labels, tf.int64), num_sampled=num_sampled,\r\n          num_true=1,\r\n          unique=True,\r\n          range_max=vocabulary_size,\r\n          seed=None)\r\n    \r\n    ray= tf.fill( dims =[num_sampled] ,  value= (num_sampled/vocabulary_size)   ) \r\n    fillvalue2 = tf.cast(ray, testDataType)\r\n\r\n    jay= tf.fill( dims =[ batch_size  ,1] ,  value= (num_sampled/vocabulary_size)   ) \r\n    fillvalue = tf.cast(jay, testDataType)\r\n\r\n    true_expected_count2 = tf.get_variable( 'this1' ,dtype=testDataType, initializer = fillvalue  )\r\n    sampled_expected_count2 = tf.get_variable( 'this2' , dtype=testDataType, initializer = fillvalue2   )\r\n\r\n    sampled_value_16 = LogUniformCandidateSampler(\r\n        sampled_values.sampled_candidates,\r\n        true_expected_count2,\r\n        sampled_expected_count2 )\r\n```\r\n\r\nYou can switch between float16 and float32 by changing the `testDataType` variable at the top. You can also change the embedding size at the top by changing the `embedding_size` variable, which I recommend for switching between TPU mode and GPU mode in Google Colab. \r\n\r\nAfter you select which datatype and embedding size you want to use, select 'Runtime' -> 'Run all', and you can check the time it takes between steps at the training code at the bottom. \r\n\r\nIn GPU mode, 100 steps takes about 11 seconds for float32, but takes 15 seconds for float16. I imagine float16 would have been faster. For GPU mode I used an embedding size of 52 (highest embedding size I could use before the system would crash during training for float32).\r\n\r\nIn TPU mode, 100 steps takes about 10 seconds for float32, but takes 6 minutes 5 seconds for float16. So 36x slower for float16 than float32. For TPU mode I used an embedding size of 154 (highest embedding size I could use before the system would crash during training for float32).\r\n\r\n>OS Platform and Distribution\r\n\r\nPython 3. Not sure about the rest, whatever Google Colab uses. \r\n\r\n>TensorFlow installed from\r\n\r\nNot sure, whatever Google Colab uses. \r\n\r\n>CUDA/cuDNN version\r\n\r\nNot sure, whatever Google Colab uses. \r\n\r\n>GPU model and memory\r\n\r\nI believe Colab for GPU uses a Tesla k80, and for TPU they are using V2. \r\n\r\n>Exact command to reproduce\r\n\r\nSame code as linked above \r\n\r\nhttps://drive.google.com/open?id=1bnlSfezPqtwapvURRTAqGR4mkcCl9QZl\r\n\r\n>Mobile device\r\n\r\nN/A"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23085", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23085/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23085/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23085/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23085", "id": 371734751, "node_id": "MDU6SXNzdWUzNzE3MzQ3NTE=", "number": 23085, "title": "Problem when try to decode some bmp images with tf.image.decode_bmp", "user": {"login": "VenkateshSatagopan", "id": 43298706, "node_id": "MDQ6VXNlcjQzMjk4NzA2", "avatar_url": "https://avatars3.githubusercontent.com/u/43298706?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VenkateshSatagopan", "html_url": "https://github.com/VenkateshSatagopan", "followers_url": "https://api.github.com/users/VenkateshSatagopan/followers", "following_url": "https://api.github.com/users/VenkateshSatagopan/following{/other_user}", "gists_url": "https://api.github.com/users/VenkateshSatagopan/gists{/gist_id}", "starred_url": "https://api.github.com/users/VenkateshSatagopan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VenkateshSatagopan/subscriptions", "organizations_url": "https://api.github.com/users/VenkateshSatagopan/orgs", "repos_url": "https://api.github.com/users/VenkateshSatagopan/repos", "events_url": "https://api.github.com/users/VenkateshSatagopan/events{/privacy}", "received_events_url": "https://api.github.com/users/VenkateshSatagopan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-10-18T22:14:56Z", "updated_at": "2018-12-10T18:57:40Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:NA\r\n- TensorFlow installed from (source or binary): PIP\r\n- TensorFlow version (use command below):1.12\r\n- Python version:3.6\r\n- Bazel version (if compiling from source):No\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version NO\r\n- GPU model and memory: Not using GPU\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\nHi,\r\nI have written a python script to read bmp image from local drive using tensorflow and trying to display the image. \r\n\r\nFirst case:\r\nI am getting error when i try to use the \r\nbelow command - tf.image.decode_bmp(image_string,channels=3)\r\n\r\nThe error is as below:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/venkatesh/anaconda3/envs/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1334, in _do_call\r\n    return fn(*args)\r\n  File \"/home/venkatesh/anaconda3/envs/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1319, in _run_fn\r\n    options, feed_dict, fetch_list, target_list, run_metadata)\r\n  File \"/home/venkatesh/anaconda3/envs/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1407, in _call_tf_sessionrun\r\n    run_metadata)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: channels attribute 3 does not match bits per pixel from file 4\r\n\t [[{{node DecodeBmp}} = DecodeBmp[channels=3](ReadFile)]]\r\n\t [[{{node IteratorGetNext}} = IteratorGetNext[output_shapes=[[?,?,3]], output_types=[DT_FLOAT], _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](OneShotIterator)]]\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/venkatesh/Desktop/Image_processing_thesis/Thesis_deep_learning/problem_tensorfile.py\", line 38, in <module>\r\n    res = sess.run(patches)\r\n  File \"/home/venkatesh/anaconda3/envs/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 929, in run\r\n    run_metadata_ptr)\r\n  File \"/home/venkatesh/anaconda3/envs/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1152, in _run\r\n    feed_dict_tensor, options, run_metadata)\r\n  File \"/home/venkatesh/anaconda3/envs/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1328, in _do_run\r\n    run_metadata)\r\n  File \"/home/venkatesh/anaconda3/envs/lib/python3.6/site-packages/tensorflow/python/client/session.py\", line 1348, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: channels attribute 3 does not match bits per pixel from file 4\r\n\t [[{{node DecodeBmp}} = DecodeBmp[channels=3](ReadFile)]]\r\n\t [[node IteratorGetNext (defined at /home/venkatesh/Desktop/Image_processing_thesis/Thesis_deep_learning/problem_tensorfile.py:35)  = IteratorGetNext[output_shapes=[[?,?,3]], output_types=[DT_FLOAT], _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](OneShotIterator)]]\r\n\r\nProcess finished with exit code 1\r\n\r\nSecond case:\r\nIf i use the command tf.image.decode_bmp(image_string) instead of tf.image.decode_bmp(image_string,channels=3) \r\n\r\nI am not getting error but when i see the shape , it's showing the no of channels =4 and not 3.  I want to know why I am getting shape =4 for the second case and why getting error for some images for the first case.\r\n\r\nFor example consider 00001.bmp Image(attached in attachments) size:\r\nHeight=351\r\nWidth=572\r\nchannels=3\r\nis getting shape(351,572,4) for the second case.\r\n\r\nAdditionally\r\nAll the images works fine without tensorflow\r\nFor example: I used scipy to read the image and try to print the shapes of all images in which the no of channels are 3 and not 4.\r\n\r\nThe image which i used is one of the images form waterloo exploratory dataset. In the first 50 images i have faced the above issue for 5 images and tf.image.decode_bmp works for remaining 45 images.\r\n\r\nPlease use the below link if you like to download the waterloo exploratory dataset :\r\n[https://ece.uwaterloo.ca/~k29ma/exploration/](url)\r\n**Describe the expected behavior**\r\nRequires information about why the above error is getting displayed for some of bmp images.\r\n\r\n**Code to reproduce the issue**\r\nimport tensorflow as tf\r\nimport numpy as np\r\nfrom scipy import misc\r\nimport glob\r\nimport os\r\n#Command to extract all file names\r\nlist_ground_truth=glob.glob(\"Truth_Images/*.bmp\")  \r\n\r\nnum_parallel_calls=4\r\n\r\ndef parse_fn(filename):\r\n    \"\"\"Decode the jpeg image from the filename and convert to [0, 1].\"\"\"\r\n    image_string = tf.read_file(filename)\r\n    image_decoded = tf.image.decode_bmp(image_string,channels=3)\r\n    #print(image_decoded.get_shape().dims)\r\n    # This will convert to float values in [0, 1]\r\n    image = tf.image.convert_image_dtype(image_decoded, tf.float32)\r\n    return image\r\n\r\n\r\n# Create a dataset\r\ndataset = (tf.data.Dataset.from_tensor_slices(list_ground_truth)\r\n           .map(parse_fn, num_parallel_calls=num_parallel_calls)\r\n           .prefetch(1))\r\n\r\n\r\niterator = dataset.make_one_shot_iterator()\r\npatches = iterator.get_next()\r\nsess = tf.Session()\r\nres = sess.run(patches)\r\nprint(res.shape)\r\nmisc.imshow(res)\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n1. Load the above script. \r\n2. Change the location in the below command to where the image file which i have attached \r\nlist_ground_truth=glob.glob(\"Truth_Images/*.bmp\")  \r\n3.Run the script and if it runs without error.\r\n\r\n[problem_files.zip](https://github.com/tensorflow/tensorflow/files/2493751/problem_files.zip)\r\n\r\n**Other info / logs**\r\nAdditional information:\r\nI am trying the process as part of initial data preparation for training a convolutional network. To make it simple i have removed the unnecessary steps for recreating the issue.\r\n\r\nThanks,\r\nVenkatesh.S\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23082", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23082/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23082/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23082/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23082", "id": 371695440, "node_id": "MDU6SXNzdWUzNzE2OTU0NDA=", "number": 23082, "title": "Error while calling TFLite interpreter (Similar to #21574)", "user": {"login": "saurabh-kachhia", "id": 39469626, "node_id": "MDQ6VXNlcjM5NDY5NjI2", "avatar_url": "https://avatars3.githubusercontent.com/u/39469626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saurabh-kachhia", "html_url": "https://github.com/saurabh-kachhia", "followers_url": "https://api.github.com/users/saurabh-kachhia/followers", "following_url": "https://api.github.com/users/saurabh-kachhia/following{/other_user}", "gists_url": "https://api.github.com/users/saurabh-kachhia/gists{/gist_id}", "starred_url": "https://api.github.com/users/saurabh-kachhia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saurabh-kachhia/subscriptions", "organizations_url": "https://api.github.com/users/saurabh-kachhia/orgs", "repos_url": "https://api.github.com/users/saurabh-kachhia/repos", "events_url": "https://api.github.com/users/saurabh-kachhia/events{/privacy}", "received_events_url": "https://api.github.com/users/saurabh-kachhia/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 24, "created_at": "2018-10-18T20:18:43Z", "updated_at": "2019-05-14T23:06:59Z", "closed_at": null, "author_association": "NONE", "body": "**Tensorflow Version: 1.11.0\r\nPython Version: 3.4 (Also tried with 2.7)**\r\n\r\nI tried to install Tensorflow **using PIP install** on my Raspberry Pi3 B+ (Raspbian Stretch - June 2018 Version) and when I tried to run the sample [label_image.py ](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/examples/python/label_image.py)example with TFLite model file I am getting this error -\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"label_image.py\", line 37, in <module>\r\n    interpreter = tf.contrib.lite.Interpreter(model_path=args.model_file)\r\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/contrib/lite/python/interpreter.py\", line 52, in __init__\r\n    _interpreter_wrapper.InterpreterWrapper_CreateWrapperCPPFromFile(\r\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/util/lazy_loader.py\", line 53, in __getattr__\r\n    module = self._load()\r\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/util/lazy_loader.py\", line 42, in _load\r\n    module = importlib.import_module(self.__name__)\r\n  File \"/usr/lib/python3.4/importlib/__init__.py\", line 109, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 2254, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 2237, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 2226, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 1200, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 1129, in _exec\r\n  File \"<frozen importlib._bootstrap>\", line 1471, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 321, in _call_with_frames_removed\r\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/contrib/lite/python/interpreter_wrapper/tensorflow_wrap_interpreter_wrapper.py\", line 28, in <module>\r\n    _tensorflow_wrap_interpreter_wrapper = swig_import_helper()\r\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/contrib/lite/python/interpreter_wrapper/tensorflow_wrap_interpreter_wrapper.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_tensorflow_wrap_interpreter_wrapper', fp, pathname, description)\r\n  File \"/usr/lib/python3.4/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\nImportError: /usr/local/lib/python3.4/dist-packages/tensorflow/contrib/lite/python/interpreter_wrapper/_tensorflow_wrap_interpreter_wrapper.so: undefined symbol: _ZN6tflite12tensor_utils24NeonVectorScalarMultiplyEPKaifPf\r\n\r\n```\r\n\r\nI also tried another way and build the **Cross Compile Package** using latest Tensorflow code from master branch and install the package on pi. After running the [same example](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/lite/examples/python/label_image.py) I am facing this error -\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"label_image.py\", line 37, in <module>\r\n    interpreter = tf.contrib.lite.Interpreter(model_path=args.model_file)\r\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/util/lazy_loader.py\", line 53, in __getattr__\r\n    module = self._load()\r\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/util/lazy_loader.py\", line 42, in _load\r\n    module = importlib.import_module(self.__name__)\r\n  File \"/usr/lib/python3.4/importlib/__init__.py\", line 109, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 2254, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 2237, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 2226, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 1200, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 1129, in _exec\r\n  File \"<frozen importlib._bootstrap>\", line 1471, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 321, in _call_with_frames_removed\r\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/contrib/__init__.py\", line 48, in <module>\r\n    from tensorflow.contrib import distribute\r\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/contrib/distribute/__init__.py\", line 34, in <module>\r\n    from tensorflow.contrib.distribute.python.tpu_strategy import TPUStrategy\r\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/contrib/distribute/python/tpu_strategy.py\", line 27, in <module>\r\n    from tensorflow.contrib.tpu.python.ops import tpu_ops\r\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/contrib/tpu/__init__.py\", line 69, in <module>\r\n    from tensorflow.contrib.tpu.python.ops.tpu_ops import *\r\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/contrib/tpu/python/ops/tpu_ops.py\", line 39, in <module>\r\n    resource_loader.get_path_to_datafile(\"_tpu_ops.so\"))\r\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/contrib/util/loader.py\", line 56, in load_op_library\r\n    ret = load_library.load_op_library(path)\r\n  File \"/usr/local/lib/python3.4/dist-packages/tensorflow/python/framework/load_library.py\", line 60, in load_op_library\r\n    lib_handle = py_tf.TF_LoadLibrary(library_filename)\r\n\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Invalid name: \r\n\r\nAn op that loads optimization parameters into HBM for embedding. Must be\r\npreceded by a ConfigureTPUEmbeddingHost op that sets up the correct\r\nembedding table configuration. For example, this op is used to install\r\nparameters that are loaded from a checkpoint before a training loop is\r\nexecuted.\r\n```\r\nSo none of the provided methods are working for me."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23061", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23061/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23061/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23061/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23061", "id": 371340030, "node_id": "MDU6SXNzdWUzNzEzNDAwMzA=", "number": 23061, "title": "Xla and Ignite support always true from configure.py", "user": {"login": "bjascob", "id": 22728060, "node_id": "MDQ6VXNlcjIyNzI4MDYw", "avatar_url": "https://avatars1.githubusercontent.com/u/22728060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjascob", "html_url": "https://github.com/bjascob", "followers_url": "https://api.github.com/users/bjascob/followers", "following_url": "https://api.github.com/users/bjascob/following{/other_user}", "gists_url": "https://api.github.com/users/bjascob/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjascob/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjascob/subscriptions", "organizations_url": "https://api.github.com/users/bjascob/orgs", "repos_url": "https://api.github.com/users/bjascob/repos", "events_url": "https://api.github.com/users/bjascob/events{/privacy}", "received_events_url": "https://api.github.com/users/bjascob/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tatatodd", "id": 5453737, "node_id": "MDQ6VXNlcjU0NTM3Mzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/5453737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatatodd", "html_url": "https://github.com/tatatodd", "followers_url": "https://api.github.com/users/tatatodd/followers", "following_url": "https://api.github.com/users/tatatodd/following{/other_user}", "gists_url": "https://api.github.com/users/tatatodd/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatatodd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatatodd/subscriptions", "organizations_url": "https://api.github.com/users/tatatodd/orgs", "repos_url": "https://api.github.com/users/tatatodd/repos", "events_url": "https://api.github.com/users/tatatodd/events{/privacy}", "received_events_url": "https://api.github.com/users/tatatodd/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tatatodd", "id": 5453737, "node_id": "MDQ6VXNlcjU0NTM3Mzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/5453737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatatodd", "html_url": "https://github.com/tatatodd", "followers_url": "https://api.github.com/users/tatatodd/followers", "following_url": "https://api.github.com/users/tatatodd/following{/other_user}", "gists_url": "https://api.github.com/users/tatatodd/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatatodd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatatodd/subscriptions", "organizations_url": "https://api.github.com/users/tatatodd/orgs", "repos_url": "https://api.github.com/users/tatatodd/repos", "events_url": "https://api.github.com/users/tatatodd/events{/privacy}", "received_events_url": "https://api.github.com/users/tatatodd/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-10-18T02:47:30Z", "updated_at": "2018-12-11T18:54:17Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution: Ubuntu 18.04\r\n- TensorFlow installed from source\r\n- TensorFlow version: 1.12.0rc-1\r\n- Python version: 3.6\r\n- Installed using pip3\r\n- Bazel version 0.18.0\r\n- GCC/Compiler version 7.3.0\r\n- CUDA/cuDNN version 7.3.1\r\n- GPU model and memory: GTX Titan X (Maxwell w/12GB)\r\n- Have I written custom code: No\r\n- Mobile device: None\r\n- Exact command to reproduce: ./configure  (see below)\r\n\r\n\r\n**Describe the problem**\r\nIt looks as if the configure.py script is always setting ignite and xla support true.  \r\nTo see this, run configure and answer N to the options for ignite and xla...\r\n```\r\nDo you wish to build TensorFlow with Apache Ignite support? [Y/n]: n\r\nNo Apache Ignite support will be enabled for TensorFlow.\r\nDo you wish to build TensorFlow with XLA JIT support? [Y/n]: n\r\nNo XLA JIT support will be enabled for TensorFlow.\r\n```\r\nAfterwards .tf_configure.bazelrc has the following lines:\r\n```\r\nbuild:ignite --define with_ignite_support=true\r\nbuild:xla --define with_xla_support=true\r\n```\r\n\r\n\r\n**Code**\r\nIt looks to me like the following lines in configure.py are the issue:\r\nUnder def set_build_var (line 368)\r\n```\r\n  if var == '1':\r\n    write_to_bazelrc('build --define %s=true' % option_name)\r\n  elif bazel_config_name is not None:\r\n    write_to_bazelrc(\r\n        'build:%s --define %s=true' % (bazel_config_name, option_name))\r\n```\r\nIn the above, if var is 0 and there's a bazel_config_name, the option still gets set to true.  That doesn't seem like the behavior we want.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23056", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23056/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23056/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23056/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23056", "id": 371285554, "node_id": "MDU6SXNzdWUzNzEyODU1NTQ=", "number": 23056, "title": "Losses collection is not thread local so it can't be used inside model_fn call when using MirroredStrategy", "user": {"login": "antifriz", "id": 6382271, "node_id": "MDQ6VXNlcjYzODIyNzE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6382271?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antifriz", "html_url": "https://github.com/antifriz", "followers_url": "https://api.github.com/users/antifriz/followers", "following_url": "https://api.github.com/users/antifriz/following{/other_user}", "gists_url": "https://api.github.com/users/antifriz/gists{/gist_id}", "starred_url": "https://api.github.com/users/antifriz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antifriz/subscriptions", "organizations_url": "https://api.github.com/users/antifriz/orgs", "repos_url": "https://api.github.com/users/antifriz/repos", "events_url": "https://api.github.com/users/antifriz/events{/privacy}", "received_events_url": "https://api.github.com/users/antifriz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-10-17T22:06:01Z", "updated_at": "2019-08-06T16:43:01Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: no\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): 'v1.12.0-rc0-0-g1a6dea3' 1.12.0-rc0\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source): 0.18.0\r\n- GCC/Compiler version (if compiling from source): gcc-6 (Ubuntu 6.4.0-17ubuntu1) 6.4.0 20180424\r\n- CUDA/cuDNN version: 10.0/7.3.1.20\r\n- GPU model and memory: GeForce GTX 1080 Ti (11GB)\r\n\r\n**Describe the current behavior**\r\n\r\nWhen calling `tf.losses.add_loss` inside model_fn in Estimator API, it is added to the `tf.GraphKeys.LOSSES` collection. `tf.losses.get_total_loss` is aggregating all the losses from the `tf.GraphKeys.LOSSES` collection.\r\n\r\nUnfortunately, when using `tf.contrib.distribute.MirroredStrategy` as a distribute strategy, collection is updated from all concurrent `model_fn` calls. This leads to tower losses being aggregated to total loss in other towers as well.\r\n\r\nSo if we have 4 GPUs with losses L1, L2, L3, L4, Estimator will report total loss as `a * L1 + b * L2 + c * L3 + d* L4` where a,b,c,d depends on the races encountered.\r\n\r\n**Describe the expected behavior**\r\n\r\nI would expect total loss to be `L1 + L2 + L3 + L4`.\r\n\r\n**Code to reproduce the issue**\r\n\r\nWhen running this code, second call to `model_fn` causes assertion that losses collection is empty to fail.\r\n\r\n```python\r\nimport tensorflow as tf\r\n\r\n\r\ndef model_fn(features, labels, mode):\r\n    loss = tf.abs(features + tf.get_variable('foo', shape=()) - labels)\r\n\r\n    assert len(tf.get_collection(tf.GraphKeys.LOSSES)) == 0\r\n    tf.losses.add_loss(loss)\r\n\r\n    loss = tf.losses.get_total_loss()\r\n    train_op = tf.train.GradientDescentOptimizer(0.0).minimize(loss)\r\n    return tf.estimator.EstimatorSpec(mode, loss=loss, train_op=train_op)\r\n\r\n\r\ndef input_fn():\r\n    return tf.data.Dataset.zip((\r\n        tf.data.Dataset.from_tensors(0.).repeat(100),\r\n        tf.data.Dataset.from_tensors(0.).repeat(100)\r\n    ))\r\n\r\n\r\ndistribution = tf.contrib.distribute.MirroredStrategy(num_gpus=2)\r\nconfig = tf.estimator.RunConfig(train_distribute=distribution)\r\nestimator = tf.estimator.Estimator(model_fn=model_fn, config=config)\r\nestimator.train(input_fn=input_fn)\r\n```\r\n\r\n\r\n**Other info / logs**\r\n\r\nScript output:\r\n\r\n```\r\nINFO:tensorflow:Initializing RunConfig with distribution strategies.\r\nINFO:tensorflow:Not using Distribute Coordinator.\r\nWARNING:tensorflow:Using temporary folder as model directory: /tmp/tmpq6v9w4nh\r\nINFO:tensorflow:Using config: {'_model_dir': '/tmp/tmpq6v9w4nh', '_tf_random_seed': None, '_save_summary_steps': 100, '_save_checkpoints_steps': None, '_save_checkpoints_secs': 600, '_session_config': allow_soft_placement: true\r\ngraph_options {\r\n  rewrite_options {\r\n    meta_optimizer_iterations: ONE\r\n  }\r\n}\r\n, '_keep_checkpoint_max': 5, '_keep_checkpoint_every_n_hours': 10000, '_log_step_count_steps': 100, '_train_distribute': <tensorflow.contrib.distribute.python.mirrored_strategy.MirroredStrategy object at 0x7f27bd939240>, '_device_fn': None, '_protocol': None, '_eval_distribute': None, '_experimental_distribute': None, '_service': None, '_cluster_spec': <tensorflow.python.training.server_lib.ClusterSpec object at 0x7f27bd939f60>, '_task_type': 'worker', '_task_id': 0, '_global_id_in_cluster': 0, '_master': '', '_evaluation_master': '', '_is_chief': True, '_num_ps_replicas': 0, '_num_worker_replicas': 1, '_distribute_coordinator_mode': None}\r\nINFO:tensorflow:Device is available but not used by distribute strategy: /device:CPU:0\r\nINFO:tensorflow:Device is available but not used by distribute strategy: /device:GPU:2\r\nINFO:tensorflow:Device is available but not used by distribute strategy: /device:GPU:3\r\nINFO:tensorflow:Configured nccl all-reduce.\r\nINFO:tensorflow:Calling model_fn.\r\nINFO:tensorflow:Calling model_fn.\r\nINFO:tensorflow:Error reported to Coordinator: \r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/training/coordinator.py\", line 297, in stop_on_exception\r\n    yield\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 795, in run\r\n    self.main_result = self.main_fn(*self.main_args, **self.main_kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/estimator/estimator.py\", line 1195, in _call_model_fn\r\n    model_fn_results = self._model_fn(features=features, **kwargs)\r\n  File \"<ipython-input-9-57173fdb3adc>\", line 7, in model_fn\r\n    assert len(tf.get_collection(tf.GraphKeys.LOSSES)) == 0\r\nAssertionError\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23054", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23054/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23054/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23054/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23054", "id": 371276304, "node_id": "MDU6SXNzdWUzNzEyNzYzMDQ=", "number": 23054, "title": "tanh on CPU exceeds range (and is inconsistent)", "user": {"login": "CamdenCU", "id": 23249050, "node_id": "MDQ6VXNlcjIzMjQ5MDUw", "avatar_url": "https://avatars3.githubusercontent.com/u/23249050?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CamdenCU", "html_url": "https://github.com/CamdenCU", "followers_url": "https://api.github.com/users/CamdenCU/followers", "following_url": "https://api.github.com/users/CamdenCU/following{/other_user}", "gists_url": "https://api.github.com/users/CamdenCU/gists{/gist_id}", "starred_url": "https://api.github.com/users/CamdenCU/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CamdenCU/subscriptions", "organizations_url": "https://api.github.com/users/CamdenCU/orgs", "repos_url": "https://api.github.com/users/CamdenCU/repos", "events_url": "https://api.github.com/users/CamdenCU/events{/privacy}", "received_events_url": "https://api.github.com/users/CamdenCU/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, {"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-10-17T21:34:41Z", "updated_at": "2018-12-11T18:54:13Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 18.04.1 LTS\r\n- **TensorFlow installed from (source or binary)**: binary (or source)\r\n- **TensorFlow version (use command below)**: ('v1.10.0-0-g656e7a2b34', '1.10.0')\r\n- **Python version**: Python 2.7.15rc1\r\n- **CUDA/cuDNN version**: N/A, CPU problem\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**: \r\n```\r\nimport numpy\r\nimport tensorflow\r\nsess = tensorflow.Session()\r\nsess.run(tensorflow.tanh(numpy.arange(8.8,9.0,0.01,dtype=numpy.float32)))\r\n```\r\n\r\n### Describe the problem\r\ntanh on float32s can return values outside of the range [-1,1] when run on a CPU, which suggests a bug in its implementation.  This occurs across multiple machines and builds (but does not seem to occur for me when running on a GPU, or when using numpy instead of tensorflow).  On the system specs given above, the commands produce two instances of 1.0000001:\r\n```\r\n>>> sess.run(tensorflow.tanh(numpy.arange(8.8,9.0,0.01,dtype=numpy.float32)))\r\narray([1.        , 1.        , 0.99999994, 1.0000001 , 1.        ,\r\n       0.99999994, 0.9999998 , 0.99999994, 0.9999998 , 1.        ,\r\n       1.0000001 , 0.9999998 , 1.        , 0.99999994, 0.9999998 ,\r\n       0.99999994, 1.        , 1.        , 0.9999998 , 1.        ],\r\n      dtype=float32)\r\n```\r\n\r\nOf lesser concern, return values also differ on the same system when specifying overlapping ranges (here 8.8 changed to 8.9 does not match second half of above):\r\n```\r\n>>> sess.run(tensorflow.tanh(numpy.arange(8.9,9.0,0.01,dtype=numpy.float32)))\r\narray([1.        , 0.99999994, 1.        , 0.99999994, 1.0000001 ,\r\n       0.9999998 , 1.        , 1.0000001 , 1.        , 1.        ],\r\n      dtype=float32)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23050", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23050/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23050/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23050/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23050", "id": 371151334, "node_id": "MDU6SXNzdWUzNzExNTEzMzQ=", "number": 23050, "title": "Batch Normalization with virtual_batch_size not equal to None not implemented correctly for inference time", "user": {"login": "ccurro", "id": 44445, "node_id": "MDQ6VXNlcjQ0NDQ1", "avatar_url": "https://avatars1.githubusercontent.com/u/44445?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ccurro", "html_url": "https://github.com/ccurro", "followers_url": "https://api.github.com/users/ccurro/followers", "following_url": "https://api.github.com/users/ccurro/following{/other_user}", "gists_url": "https://api.github.com/users/ccurro/gists{/gist_id}", "starred_url": "https://api.github.com/users/ccurro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ccurro/subscriptions", "organizations_url": "https://api.github.com/users/ccurro/orgs", "repos_url": "https://api.github.com/users/ccurro/repos", "events_url": "https://api.github.com/users/ccurro/events{/privacy}", "received_events_url": "https://api.github.com/users/ccurro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 16, "created_at": "2018-10-17T15:59:51Z", "updated_at": "2020-03-03T15:21:59Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 16.04\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**: v1.10.1-0-g4dcfddc5d1 1.10.1\r\n- **Python version**: Python 3.6.2\r\n- **Exact command to reproduce**: python main.py\r\n- **CUDA/cuDNN version**: N/A\r\n- **GPU model and memory**: N/A\r\n- **Mobile device**: N/A\r\n- **Bazel version**: N/A\r\n\r\n### Describe the problem\r\nThe batch normalization implementation respects the virtual_batch_size parameter in both train and inference modes. As such you are unable to do inference with batch sizes that are not multiples of the virtual_batch_size. Algorithm 1 in the [ghost batch norm paper](https://arxiv.org/pdf/1705.08741.pdf) makes it clear that virtual_batch_size should only be respected in train mode.\r\n\r\nRelevant tf source code: https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/keras/layers/normalization.py\r\n\r\n### Source code / logs\r\n\r\n```python\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\nvirtual_batch_size = 32\r\n\r\ntraining = tf.placeholder(tf.bool, shape=[])\r\nx = tf.placeholder(tf.float32, shape=[None, 28, 28, 1])\r\nx_norm = tf.layers.batch_normalization(x, training=training, virtual_batch_size=virtual_batch_size)\r\nupdate_ops = tf.get_collection(tf.GraphKeys.UPDATE_OPS)\r\n\r\nsess = tf.Session()\r\n\r\nsess.run(tf.global_variables_initializer())\r\n\r\n\r\nfor _ in range(10):\r\n    sess.run([update_ops, x_norm], feed_dict={x : np.random.random(size=[4*virtual_batch_size, 28, 28, 1]), training : True})\r\n\r\nsess.run(x_norm, feed_dict={x : np.random.random(size=[virtual_batch_size, 28, 28, 1]), training : False})\r\n\r\n# fails after this line\r\nsess.run(x_norm, feed_dict={x : np.random.random(size=[1, 28, 28, 1]), training : False})    \r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23049", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23049/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23049/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23049/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23049", "id": 371149844, "node_id": "MDU6SXNzdWUzNzExNDk4NDQ=", "number": 23049, "title": "Ghost Batch Normalization performance", "user": {"login": "MustafaMustafa", "id": 1043083, "node_id": "MDQ6VXNlcjEwNDMwODM=", "avatar_url": "https://avatars1.githubusercontent.com/u/1043083?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MustafaMustafa", "html_url": "https://github.com/MustafaMustafa", "followers_url": "https://api.github.com/users/MustafaMustafa/followers", "following_url": "https://api.github.com/users/MustafaMustafa/following{/other_user}", "gists_url": "https://api.github.com/users/MustafaMustafa/gists{/gist_id}", "starred_url": "https://api.github.com/users/MustafaMustafa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MustafaMustafa/subscriptions", "organizations_url": "https://api.github.com/users/MustafaMustafa/orgs", "repos_url": "https://api.github.com/users/MustafaMustafa/repos", "events_url": "https://api.github.com/users/MustafaMustafa/events{/privacy}", "received_events_url": "https://api.github.com/users/MustafaMustafa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-10-17T15:56:31Z", "updated_at": "2020-02-08T01:11:18Z", "closed_at": null, "author_association": "NONE", "body": "GBN seems to be at least twice as slow as regular BN. This is the case even when using the full batch for normalization in GBN mode (`virtual_batch_size=batch_size`).\r\n\r\nYou can reproduce that with tensorflow/models cifar10 example by running the script below, also available at (https://gist.github.com/MustafaMustafa/a12485746e4c877620a818d227982e1c):\r\n\r\n```bash\r\n\r\ngit clone git@github.com:tensorflow/models.git slow_GBN_issue\r\ncd slow_GBN_issue/tutorials/image/cifar10_estimator\r\n\r\n# use tf.layer.batch_normalization\r\nsed -i  's/tf.contrib.layers.batch_norm/tf.layers.batch_normalization/' model_base.py\r\nsed -i  's/decay=/momentum=/' model_base.py\r\nsed -i  's/is_training=/training=/' model_base.py\r\nsed -i  '/data_format=data_format)/c\\axis=-1 if data_format==\"NHWC\" else 1)' model_base.py\r\n\r\n# make val dataset a multiple of batchsize (multiple of 128)\r\nsed -i  's/return 1000/return 9984/' cifar10.py\r\n\r\npython generate_cifar10_tfrecords.py --data-dir=${PWD}/cifar-10-data\r\nif [ -d ./cifar10_logs ]\r\nthen\r\n  rm -rf ./cifar10_logs\r\nfi\r\npython3 cifar10_main.py --data-dir=${PWD}/cifar-10-data --job-dir=./cifar10_logs --num-gpus=1 --eval-batch-size 128 --train-steps=500 2>&1 | tee bn.log\r\n\r\n# use virtual_batch_size\r\nsed -i '/fused/a virtual_batch_size=128,' model_base.py\r\nif [ -d ./cifar10_logs ]\r\nthen\r\n  rm -rf ./cifar10_logs\r\nfi\r\npython3 cifar10_main.py --data-dir=${PWD}/cifar-10-data --job-dir=./cifar10_logs --num-gpus=1 --eval-batch-size 128 --train-steps=500 2>&1 | tee gbn.log\r\n\r\n# show samples of timing prints\r\necho \"BN:\"\r\ngrep \"sec)\" bn.log | tail -1\r\necho \"GBN:\"\r\ngrep \"sec)\" gbn.log | tail -1\r\n```\r\n\r\nOutput:\r\n```\r\nBN:\r\nINFO:tensorflow:learning_rate = 0.1, loss = 2.09511 (4.351 sec)\r\nGBN:\r\nINFO:tensorflow:learning_rate = 0.1, loss = 2.37345 (9.071 sec)\r\n```\r\n------------------------\r\n\r\n### System information\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 16.04\r\n- **TensorFlow version (use command below)**: v1.12.0-rc0-0-g1a6dea3 1.12.0-rc0\r\n- **Python version**: 3.5.2\r\n- **Bazel version (if compiling from source)**: 0.16.0\r\n- **GCC/Compiler version (if compiling from source)**: 7.1.0\r\n- **CUDA/cuDNN version**: 9.2/7.1.4\r\n- **GPU model and memory**: Titan X Pascal 12GB\r\n- **Have I written custom code**: No\r\n- **TensorFlow installed from**: Compiled from source\r\n- **Exact command to reproduce**: bash script for how to reproduce provided in the description.\r\n- **Mobile device**: N/A"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23048", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23048/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23048/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23048/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23048", "id": 371141862, "node_id": "MDU6SXNzdWUzNzExNDE4NjI=", "number": 23048, "title": "Bug in function: MutableGraphView::ReplaceInput(..) ?", "user": {"login": "yehenrytian", "id": 4379480, "node_id": "MDQ6VXNlcjQzNzk0ODA=", "avatar_url": "https://avatars2.githubusercontent.com/u/4379480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yehenrytian", "html_url": "https://github.com/yehenrytian", "followers_url": "https://api.github.com/users/yehenrytian/followers", "following_url": "https://api.github.com/users/yehenrytian/following{/other_user}", "gists_url": "https://api.github.com/users/yehenrytian/gists{/gist_id}", "starred_url": "https://api.github.com/users/yehenrytian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yehenrytian/subscriptions", "organizations_url": "https://api.github.com/users/yehenrytian/orgs", "repos_url": "https://api.github.com/users/yehenrytian/repos", "events_url": "https://api.github.com/users/yehenrytian/events{/privacy}", "received_events_url": "https://api.github.com/users/yehenrytian/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "shivaniag", "id": 16565716, "node_id": "MDQ6VXNlcjE2NTY1NzE2", "avatar_url": "https://avatars1.githubusercontent.com/u/16565716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shivaniag", "html_url": "https://github.com/shivaniag", "followers_url": "https://api.github.com/users/shivaniag/followers", "following_url": "https://api.github.com/users/shivaniag/following{/other_user}", "gists_url": "https://api.github.com/users/shivaniag/gists{/gist_id}", "starred_url": "https://api.github.com/users/shivaniag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shivaniag/subscriptions", "organizations_url": "https://api.github.com/users/shivaniag/orgs", "repos_url": "https://api.github.com/users/shivaniag/repos", "events_url": "https://api.github.com/users/shivaniag/events{/privacy}", "received_events_url": "https://api.github.com/users/shivaniag/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "shivaniag", "id": 16565716, "node_id": "MDQ6VXNlcjE2NTY1NzE2", "avatar_url": "https://avatars1.githubusercontent.com/u/16565716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shivaniag", "html_url": "https://github.com/shivaniag", "followers_url": "https://api.github.com/users/shivaniag/followers", "following_url": "https://api.github.com/users/shivaniag/following{/other_user}", "gists_url": "https://api.github.com/users/shivaniag/gists{/gist_id}", "starred_url": "https://api.github.com/users/shivaniag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shivaniag/subscriptions", "organizations_url": "https://api.github.com/users/shivaniag/orgs", "repos_url": "https://api.github.com/users/shivaniag/repos", "events_url": "https://api.github.com/users/shivaniag/events{/privacy}", "received_events_url": "https://api.github.com/users/shivaniag/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-10-17T15:39:03Z", "updated_at": "2018-12-11T18:54:03Z", "closed_at": null, "author_association": "NONE", "body": "------------------------\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 16.04.10\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: N/A\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: v1.11\r\n- **Python version**: 3.5\r\n- **Bazel version (if compiling from source)**: 0.16\r\n- **GCC/Compiler version (if compiling from source)**: 5.4.0 20160609\r\n- **CUDA/cuDNN version**:  N/A\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**:\r\n\r\n\r\n### Describe the problem\r\nI am modifying the Tensorflow source to add a new `tensorflow::grappler::CustomGraphOptimizer` pass, and I am having a hard time of using the fuction: `MutableGraphView::ReplaceInput(..)`. I think there is a bug inside this function, (the master branch version is the same as the r1.11 version), in that the new input is not specified with the `output_port_id`:\r\n\r\n### Source code / logs\r\nThe description of the function seems pretty clear in the header file:\r\n```c++\r\n  // Replaces the input for the output nodes of 'old_input' with a port\r\n  // `output_port_id` with 'new_input'.\r\n  //\r\n  // E.g: We have 2 nodes that use 'bar' node outputs as inputs:\r\n  // foo(bar:0, bar:1),  foo2(other:0, bar:0)\r\n  // Calling ReplaceInput(bar, new, 0) changes every occurrence of bar:0 for\r\n  // new:0.  Result:\r\n  // foo(new:0, bar:1),  foo2(other:0, new:0)\r\n  void ReplaceInput(const NodeDef& old_input, const NodeDef& new_input,\r\n                    int output_port_id = 0);\r\n\r\n```\r\nHowever in the .cc code of the function body, I don't see where we set the output port index to the new_input:\r\n```c++\r\nvoid MutableGraphView::ReplaceInput(const NodeDef& old_input,\r\n                                    const NodeDef& new_input,\r\n                                    const int output_port_id) {\r\n  GraphView::OutputPort output_port =\r\n      GetOutputPort(old_input.name(), output_port_id);\r\n  auto fanout = GetFanout(output_port);\r\n  for (auto& input_port : fanout) {\r\n    // Isn't that here we should have something like: strings::StrCat(new_input.name(), \":\", output_port_id); \r\n   // instead of just put the new_input.name() below!?\r\n    input_port.node->set_input(input_port.port_id, new_input.name());  \r\n    AddFanouts(input_port.node);\r\n  }\r\n}\r\n```\r\n\r\nAlso I have a related question, if the output port indexes are different between the new and old input, how can I properly replace the input? e.g. something like\r\n```c++\r\n  // foo(bar:0, bar:1),  foo2(other:0, bar:0)\r\n  // Calling ReplaceInput(bar, 0, new, 2) changes every occurrence of bar:0 for\r\n  // new:2.  Result:\r\n  // foo(new:2, bar:1),  foo2(other:0, new:2)\r\n```\r\n\r\nThanks a lot!\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23041", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23041/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23041/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23041/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23041", "id": 371057664, "node_id": "MDU6SXNzdWUzNzEwNTc2NjQ=", "number": 23041, "title": "[Feature Request] tf.keras expose align_corners", "user": {"login": "bhack", "id": 1710528, "node_id": "MDQ6VXNlcjE3MTA1Mjg=", "avatar_url": "https://avatars0.githubusercontent.com/u/1710528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bhack", "html_url": "https://github.com/bhack", "followers_url": "https://api.github.com/users/bhack/followers", "following_url": "https://api.github.com/users/bhack/following{/other_user}", "gists_url": "https://api.github.com/users/bhack/gists{/gist_id}", "starred_url": "https://api.github.com/users/bhack/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bhack/subscriptions", "organizations_url": "https://api.github.com/users/bhack/orgs", "repos_url": "https://api.github.com/users/bhack/repos", "events_url": "https://api.github.com/users/bhack/events{/privacy}", "received_events_url": "https://api.github.com/users/bhack/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2018-10-17T12:51:36Z", "updated_at": "2018-12-13T18:59:45Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "----------------------\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nNo\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nN/A\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\nN/A\r\n- **TensorFlow installed from (source or binary)**:\r\nN/A\r\n- **TensorFlow version (use command below)**:\r\nN/A\r\n- **Python version**:\r\nN/A\r\n- **Bazel version (if compiling from source)**:\r\nN/A\r\n- **GCC/Compiler version (if compiling from source)**:\r\nN/A\r\n- **CUDA/cuDNN version**:\r\nN/A\r\n- **GPU model and memory**:\r\nN/A\r\n- **Exact command to reproduce**:\r\nN/A\r\n\r\n### Describe the problem\r\nWe need to expose `align_corners` in this Keras upsample\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/keras/layers/convolutional.py#L1935\r\n\r\nSee also https://github.com/keras-team/keras/pull/10994#issuecomment-430305648\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23030", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23030/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23030/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23030/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23030", "id": 370831199, "node_id": "MDU6SXNzdWUzNzA4MzExOTk=", "number": 23030, "title": "Error using kernel_regularizer with tf.layers.Dense and tf.contrib.distribute.MirroredStrategy TF v1.12.0rc0 regression", "user": {"login": "Matt-Hicks-Bose", "id": 38144321, "node_id": "MDQ6VXNlcjM4MTQ0MzIx", "avatar_url": "https://avatars3.githubusercontent.com/u/38144321?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Matt-Hicks-Bose", "html_url": "https://github.com/Matt-Hicks-Bose", "followers_url": "https://api.github.com/users/Matt-Hicks-Bose/followers", "following_url": "https://api.github.com/users/Matt-Hicks-Bose/following{/other_user}", "gists_url": "https://api.github.com/users/Matt-Hicks-Bose/gists{/gist_id}", "starred_url": "https://api.github.com/users/Matt-Hicks-Bose/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Matt-Hicks-Bose/subscriptions", "organizations_url": "https://api.github.com/users/Matt-Hicks-Bose/orgs", "repos_url": "https://api.github.com/users/Matt-Hicks-Bose/repos", "events_url": "https://api.github.com/users/Matt-Hicks-Bose/events{/privacy}", "received_events_url": "https://api.github.com/users/Matt-Hicks-Bose/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}], "state": "open", "locked": false, "assignee": {"login": "anj-s", "id": 32556631, "node_id": "MDQ6VXNlcjMyNTU2NjMx", "avatar_url": "https://avatars1.githubusercontent.com/u/32556631?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anj-s", "html_url": "https://github.com/anj-s", "followers_url": "https://api.github.com/users/anj-s/followers", "following_url": "https://api.github.com/users/anj-s/following{/other_user}", "gists_url": "https://api.github.com/users/anj-s/gists{/gist_id}", "starred_url": "https://api.github.com/users/anj-s/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anj-s/subscriptions", "organizations_url": "https://api.github.com/users/anj-s/orgs", "repos_url": "https://api.github.com/users/anj-s/repos", "events_url": "https://api.github.com/users/anj-s/events{/privacy}", "received_events_url": "https://api.github.com/users/anj-s/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "anj-s", "id": 32556631, "node_id": "MDQ6VXNlcjMyNTU2NjMx", "avatar_url": "https://avatars1.githubusercontent.com/u/32556631?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anj-s", "html_url": "https://github.com/anj-s", "followers_url": "https://api.github.com/users/anj-s/followers", "following_url": "https://api.github.com/users/anj-s/following{/other_user}", "gists_url": "https://api.github.com/users/anj-s/gists{/gist_id}", "starred_url": "https://api.github.com/users/anj-s/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anj-s/subscriptions", "organizations_url": "https://api.github.com/users/anj-s/orgs", "repos_url": "https://api.github.com/users/anj-s/repos", "events_url": "https://api.github.com/users/anj-s/events{/privacy}", "received_events_url": "https://api.github.com/users/anj-s/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-10-16T22:51:50Z", "updated_at": "2019-03-08T15:35:15Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 16.04\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: N/A\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**: ('v1.12.0-rc0-0-g1a6dea36de', '1.12.0-rc0')\r\n- **Python version**: 2.7.12\r\n- **Bazel version (if compiling from source)**: N/A\r\n- **GCC/Compiler version (if compiling from source)**: N/A\r\n- **CUDA/cuDNN version**: 9.0.176/7.2.1.38\r\n- **GPU model and memory**: Nvidia V100 16GB\r\n- **Exact command to reproduce**: See below\r\n\r\n### Describe the problem\r\nAttempting to use a `tf.contrib.layers.l2_regularizer` for the `kernel_regularizer` param of `tf.layers.Dense` causes an `AssertionError` when using with `tf.contrib.distribute.MirroredStrategy` under Tensorflow v1.12.0rc0, but not under Tensorflow v1.11.0. This also occurs with several other layers including `tf.layers.dense` and `tf.layers.conv2d`.\r\n\r\n### Source code / logs\r\nSource of test.py:\r\n```python\r\nimport tensorflow as tf\r\n\r\nDO_L2_REG = False\r\n\r\ntf.logging.set_verbosity(tf.logging.INFO)\r\n\r\ndef model_fn(features, labels, mode):\r\n    regularizer = tf.contrib.layers.l2_regularizer(0.001) if DO_L2_REG else None\r\n    layer = tf.layers.Dense(1, kernel_regularizer=regularizer)\r\n    logits = layer(features)\r\n\r\n    if mode == tf.estimator.ModeKeys.PREDICT:\r\n        predictions = {\"logits\": logits}\r\n        return tf.estimator.EstimatorSpec(mode, predictions=predictions)\r\n\r\n    loss = tf.losses.mean_squared_error(\r\n        labels=labels, predictions=tf.reshape(logits, []))\r\n\r\n    loss += tf.losses.get_regularization_loss()\r\n\r\n    if mode == tf.estimator.ModeKeys.EVAL:\r\n        return tf.estimator.EstimatorSpec(mode, loss=loss)\r\n\r\n    if mode == tf.estimator.ModeKeys.TRAIN:\r\n        train_op = tf.train.GradientDescentOptimizer(0.2).minimize(loss, global_step=tf.train.get_global_step())#loss_fn())\r\n        return tf.estimator.EstimatorSpec(mode, loss=loss, train_op=train_op)\r\n\r\ndef input_fn():\r\n    features = tf.data.Dataset.from_tensors([[1.]]).repeat()\r\n    labels = tf.data.Dataset.from_tensors(1.).repeat()\r\n    return tf.data.Dataset.zip((features, labels))\r\n\r\ndistribution = tf.contrib.distribute.MirroredStrategy()\r\nconfig = tf.estimator.RunConfig(train_distribute=distribution)\r\nclassifier = tf.estimator.Estimator(model_fn=model_fn, config=config, model_dir='out_test')\r\nprint('********* start train **********')\r\nclassifier.train(input_fn=input_fn, steps=1000)\r\nprint('********* end train/start eval **********')\r\nclassifier.evaluate(input_fn=input_fn, steps=1000)\r\nprint('********* end eval **********')\r\n```\r\n\r\n### Results of testing this code with different version of Tensorflow and `DO_L2_REG` values:\r\n* Calling this with Tensorflow v1.11.0 with `DO_L2_REG` set to either `True` or `False` works as expected, both training and evaluation run successfully.\r\n* Calling this with Tensorflow v1.12.0rc0 with `DO_L2_REG` set to `False` works as expected, both training and evaluation run successfully.\r\n* Calling this with Tensorflow v1.12.0rc0 with `DO_L2_REG` set to `True` results in the following error when the `classifier.train` is called:\r\n```\r\nINFO:tensorflow:Calling model_fn.\r\nINFO:tensorflow:Error reported to Coordinator:\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/coordinator.py\", line 297, in stop_on_exception\r\n    yield\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 795, in run\r\n    self.main_result = self.main_fn(*self.main_args, **self.main_kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/estimator/estimator.py\", line 1195, in _call_model_fn\r\n    model_fn_results = self._model_fn(features=features, **kwargs)\r\n  File \"test.py\", line 10, in model_fn\r\n    logits = layer(features)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/layers/base.py\", line 374, in __call__\r\n    outputs = super(Layer, self).__call__(inputs, *args, **kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/engine/base_layer.py\", line 746, in __call__\r\n    self.build(input_shapes)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/layers/core.py\", line 944, in build\r\n    trainable=True)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/layers/base.py\", line 293, in add_weight\r\n    self._handle_weight_regularization(name, variable, regularizer)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/engine/base_layer.py\", line 638, in _handle_weight_regularization\r\n    self.add_loss(functools.partial(_loss_for_variable, variable))\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/layers/base.py\", line 142, in add_loss\r\n    loss_tensor = regularizer()\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/engine/base_layer.py\", line 434, in _tag_unconditional\r\n    loss = loss()\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/engine/base_layer.py\", line 629, in _loss_for_variable\r\n    with ops.colocate_with(v):\r\n  File \"/usr/lib/python2.7/contextlib.py\", line 17, in __enter__\r\n    return self.gen.next()\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 4094, in _colocate_with_for_gradient\r\n    with self.colocate_with(op, ignore_existing):\r\n  File \"/usr/lib/python2.7/contextlib.py\", line 17, in __enter__\r\n    return self.gen.next()\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 4146, in colocate_with\r\n    op = internal_convert_to_tensor_or_indexed_slices(op, as_ref=True).op\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1307, in internal_convert_to_tensor_or_indexed_slices\r\n    value, dtype=dtype, name=name, as_ref=as_ref)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1146, in internal_convert_to_tensor\r\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/distribute/python/values.py\", line 439, in _tensor_conversion_mirrored\r\n    assert not as_ref\r\nAssertionError\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 35, in <module>\r\n    classifier.train(input_fn=input_fn, steps=1000)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/estimator/estimator.py\", line 354, in train\r\n    loss = self._train_model(input_fn, hooks, saving_listeners)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/estimator/estimator.py\", line 1205, in _train_model\r\n    return self._train_model_distributed(input_fn, hooks, saving_listeners)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/estimator/estimator.py\", line 1316, in _train_model_distributed\r\n    self.config)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/distribute.py\", line 721, in call_for_each_tower\r\n    return self._call_for_each_tower(fn, *args, **kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 556, in _call_for_each_tower\r\n    return _call_for_each_tower(self, fn, *args, **kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 183, in _call_for_each_tower\r\n    coord.join(threads)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/coordinator.py\", line 389, in join\r\n    six.reraise(*self._exc_info_to_raise)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/coordinator.py\", line 297, in stop_on_exception\r\n    yield\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/distribute/python/mirrored_strategy.py\", line 795, in run\r\n    self.main_result = self.main_fn(*self.main_args, **self.main_kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/estimator/estimator.py\", line 1195, in _call_model_fn\r\n    model_fn_results = self._model_fn(features=features, **kwargs)\r\n  File \"test.py\", line 10, in model_fn\r\n    logits = layer(features)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/layers/base.py\", line 374, in __call__\r\n    outputs = super(Layer, self).__call__(inputs, *args, **kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/engine/base_layer.py\", line 746, in __call__\r\n    self.build(input_shapes)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/layers/core.py\", line 944, in build\r\n    trainable=True)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/layers/base.py\", line 293, in add_weight\r\n    self._handle_weight_regularization(name, variable, regularizer)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/engine/base_layer.py\", line 638, in _handle_weight_regularization\r\n    self.add_loss(functools.partial(_loss_for_variable, variable))\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/layers/base.py\", line 142, in add_loss\r\n    loss_tensor = regularizer()\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/engine/base_layer.py\", line 434, in _tag_unconditional\r\n    loss = loss()\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/keras/engine/base_layer.py\", line 629, in _loss_for_variable\r\n    with ops.colocate_with(v):\r\n  File \"/usr/lib/python2.7/contextlib.py\", line 17, in __enter__\r\n    return self.gen.next()\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 4094, in _colocate_with_for_gradient\r\n    with self.colocate_with(op, ignore_existing):\r\n  File \"/usr/lib/python2.7/contextlib.py\", line 17, in __enter__\r\n    return self.gen.next()\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 4146, in colocate_with\r\n    op = internal_convert_to_tensor_or_indexed_slices(op, as_ref=True).op\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1307, in internal_convert_to_tensor_or_indexed_slices\r\n    value, dtype=dtype, name=name, as_ref=as_ref)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1146, in internal_convert_to_tensor\r\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/contrib/distribute/python/values.py\", line 439, in _tensor_conversion_mirrored\r\n    assert not as_ref\r\nAssertionError\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23025", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23025/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23025/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23025/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23025", "id": 370617776, "node_id": "MDU6SXNzdWUzNzA2MTc3NzY=", "number": 23025, "title": "Keras saved_model.simple_save model bigger and bigger", "user": {"login": "Coac", "id": 7363034, "node_id": "MDQ6VXNlcjczNjMwMzQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/7363034?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Coac", "html_url": "https://github.com/Coac", "followers_url": "https://api.github.com/users/Coac/followers", "following_url": "https://api.github.com/users/Coac/following{/other_user}", "gists_url": "https://api.github.com/users/Coac/gists{/gist_id}", "starred_url": "https://api.github.com/users/Coac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Coac/subscriptions", "organizations_url": "https://api.github.com/users/Coac/orgs", "repos_url": "https://api.github.com/users/Coac/repos", "events_url": "https://api.github.com/users/Coac/events{/privacy}", "received_events_url": "https://api.github.com/users/Coac/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-10-16T13:40:26Z", "updated_at": "2018-11-22T16:28:12Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:  Custom code\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Mint 19 Tara\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**: 1.10.1\r\n- **Python version**: 3.6.5\r\n- **Bazel version (if compiling from source)**:\r\n- **GCC/Compiler version (if compiling from source)**:\r\n- **CUDA/cuDNN version**:\r\n- **GPU model and memory**:\r\n- **Exact command to reproduce**: python script.py\r\n\r\n\r\n### Describe the problem\r\nWhen saving successively a keras model using `tf.get_default_graph()`, the size of `saved_model.pb` increase.\r\n\r\n![image](https://user-images.githubusercontent.com/7363034/47020409-982a3e80-d159-11e8-80db-e39f47278f03.png)\r\n\r\n\r\n### Source code / logs\r\nscript.py\r\n```\r\nimport time\r\n\r\nimport numpy as np\r\nimport tensorflow as tf\r\nfrom tensorflow.keras.layers import *\r\nfrom tensorflow.keras.models import Sequential\r\nfrom tensorflow.keras.optimizers import *\r\n\r\nif __name__ == '__main__':\r\n\r\n    sess = tf.keras.backend.get_session()\r\n\r\n    model = Sequential()\r\n\r\n    model.add(Dense(units=64, activation='relu', input_dim=4))\r\n    model.add(Dense(units=4, activation='linear'))\r\n\r\n    opt = RMSprop(lr=0.1)\r\n    model.compile(loss='mse', optimizer=opt)\r\n\r\n    graph = tf.get_default_graph()  # Use the same graph as global thread\r\n\r\n    model.predict(np.array([[1, 1, 1, 1], [1, 1, 1, 1]]))\r\n\r\n    for _ in range(100):\r\n        time.sleep(1)\r\n        temp_export_path = '/tmp/models/' + str(time.time()).split(\".\")[0]\r\n\r\n        with graph.as_default():\r\n            tf.saved_model.simple_save(\r\n                sess,\r\n                temp_export_path,\r\n                inputs={'state': model.input},\r\n                outputs={t.name: t for t in model.outputs})\r\n\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23017", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23017/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23017/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23017/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23017", "id": 370529592, "node_id": "MDU6SXNzdWUzNzA1Mjk1OTI=", "number": 23017, "title": "tf.estimator.train's incompatibility with distributed training on Cloud ML Engine is not well-documented", "user": {"login": "logicchains", "id": 5073813, "node_id": "MDQ6VXNlcjUwNzM4MTM=", "avatar_url": "https://avatars1.githubusercontent.com/u/5073813?v=4", "gravatar_id": "", "url": "https://api.github.com/users/logicchains", "html_url": "https://github.com/logicchains", "followers_url": "https://api.github.com/users/logicchains/followers", "following_url": "https://api.github.com/users/logicchains/following{/other_user}", "gists_url": "https://api.github.com/users/logicchains/gists{/gist_id}", "starred_url": "https://api.github.com/users/logicchains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/logicchains/subscriptions", "organizations_url": "https://api.github.com/users/logicchains/orgs", "repos_url": "https://api.github.com/users/logicchains/repos", "events_url": "https://api.github.com/users/logicchains/events{/privacy}", "received_events_url": "https://api.github.com/users/logicchains/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-10-16T09:51:09Z", "updated_at": "2018-12-04T21:50:55Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Fedora 28\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**: 1.11.0\r\n- **Python version**: 3.5.0\r\n- **Bazel version (if compiling from source)**:\r\n- **GCC/Compiler version (if compiling from source)**:\r\n- **CUDA/cuDNN version**:\r\n- **GPU model and memory**:\r\n- **Exact command to reproduce**:\r\n\r\nThe page https://cloud.google.com/ml-engine/docs/tensorflow/distributed-training-details#tensorflow-config notes that \"The tf.estimator.train method doesn't work with distributed training on Cloud ML Engine. Please use train_and_evaluate instead.\". This is not documented on the Estimator page (https://www.tensorflow.org/api_docs/python/tf/estimator/Estimator) or anywhere else I've seen. I believe it would be helpful to document it more prominently, as I can't be the only one who didn't read the \"Using TF_CONFIG for Distributed Training Details\" page and wasted time debugging why a model wouldn't work when distributed.\r\n\r\nIf possible, it would be even more helpful to make tf.estimator.train raise an exception when run in a distributed ML Engine context, or log a warning. It's unreasonable to expect the user to figure this out themselves as from an API perspective there's no reason to expect `train_and_evaluate` would work where `train` fails (one might reasonably assume `train_and_evaluate` calls `train`)."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23012", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23012/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23012/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/23012/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/23012", "id": 370500557, "node_id": "MDU6SXNzdWUzNzA1MDA1NTc=", "number": 23012, "title": "tf.make_tensor_proto doesn't work as expected", "user": {"login": "KineticCookie", "id": 2300703, "node_id": "MDQ6VXNlcjIzMDA3MDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/2300703?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KineticCookie", "html_url": "https://github.com/KineticCookie", "followers_url": "https://api.github.com/users/KineticCookie/followers", "following_url": "https://api.github.com/users/KineticCookie/following{/other_user}", "gists_url": "https://api.github.com/users/KineticCookie/gists{/gist_id}", "starred_url": "https://api.github.com/users/KineticCookie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KineticCookie/subscriptions", "organizations_url": "https://api.github.com/users/KineticCookie/orgs", "repos_url": "https://api.github.com/users/KineticCookie/repos", "events_url": "https://api.github.com/users/KineticCookie/events{/privacy}", "received_events_url": "https://api.github.com/users/KineticCookie/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-10-16T08:41:44Z", "updated_at": "2018-12-11T18:53:54Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Mac OS X 10.13.6\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: none\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**: v1.11.0-rc2-4-gc19e29306c 1.11.0\r\n- **Python version**: Python 3.6.4\r\n- **Bazel version (if compiling from source)**: none\r\n- **GCC/Compiler version (if compiling from source)**: none\r\n- **CUDA/cuDNN version**: none\r\n- **GPU model and memory**: none\r\n- **Exact command to reproduce**:\r\n`print(tf.make_tensor_proto([1,2,3,4], dtype=tf.uint32))`\r\n\r\n\r\n### Describe the problem\r\n\r\nAccording to TensorProto message definition there are specific fields for different DataType e.g. for DT_UINT32 (https://github.com/tensorflow/tensorflow/blob/903a6399aab19b549fefd0ead836af644f3d00f8/tensorflow/core/framework/tensor.proto#L79-L80) \r\nHowever, `make_tensor_proto` puts content for most numeric types into `tensor_content` field.\r\n\r\nIn addition to that there is same inconsistency in `tf.make_ndarray` function: it tries to deserealize tensor_content and then it searches for correct fields with DataType. https://github.com/tensorflow/tensorflow/blob/903a6399aab19b549fefd0ead836af644f3d00f8/tensorflow/python/framework/tensor_util.py#L548\r\n\r\n### Source code / logs\r\n\r\n```python\r\nimport tensorflow as tf\r\nfrom tensorflow.core.framework import tensor_pb2\r\nfrom tensorflow.python.framework import dtypes\r\n\r\ncurrent = tf.make_tensor_proto([1,2,3,4], dtype=tf.uint32)\r\nprint(current)\r\n#dtype: DT_UINT32\r\n#tensor_shape {\r\n#  dim {\r\n#    size: 4\r\n#  }\r\n#}\r\n#tensor_content: \"\\001\\000\\000\\000\\002\\000\\000\\000\\003\\000\\000\\000\\004\\000\\000\\000\"\r\n\r\nexpected = tensor_pb2.TensorProto(dtype=dtypes.uint32.as_datatype_enum, uint32_val=[1,2,3,4])\r\nprint(expected)\r\n#dtype: DT_UINT32\r\n#uint32_val: 1\r\n#uint32_val: 2\r\n#uint32_val: 3\r\n#uint32_val: 4\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22994", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22994/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22994/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22994/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22994", "id": 370280000, "node_id": "MDU6SXNzdWUzNzAyODAwMDA=", "number": 22994, "title": "Tensorflow freeze_graph.py: NodeDef mentions attr 'Truncate' not in Op", "user": {"login": "personableduck", "id": 29447845, "node_id": "MDQ6VXNlcjI5NDQ3ODQ1", "avatar_url": "https://avatars0.githubusercontent.com/u/29447845?v=4", "gravatar_id": "", "url": "https://api.github.com/users/personableduck", "html_url": "https://github.com/personableduck", "followers_url": "https://api.github.com/users/personableduck/followers", "following_url": "https://api.github.com/users/personableduck/following{/other_user}", "gists_url": "https://api.github.com/users/personableduck/gists{/gist_id}", "starred_url": "https://api.github.com/users/personableduck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/personableduck/subscriptions", "organizations_url": "https://api.github.com/users/personableduck/orgs", "repos_url": "https://api.github.com/users/personableduck/repos", "events_url": "https://api.github.com/users/personableduck/events{/privacy}", "received_events_url": "https://api.github.com/users/personableduck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 24, "created_at": "2018-10-15T18:05:50Z", "updated_at": "2019-10-14T23:51:03Z", "closed_at": null, "author_association": "NONE", "body": "Please go to Stack Overflow for help and support:\r\n\r\nhttps://stackoverflow.com/questions/tagged/tensorflow\r\n\r\nIf you open a GitHub issue, here is our policy:\r\n\r\n1. It must be a bug, a feature request, or a significant problem with documentation (for small docs fixes please send a PR instead).\r\n2. The form below must be filled out.\r\n3. It shouldn't be a TensorBoard issue. Those go [here](https://github.com/tensorflow/tensorboard/issues).\r\n\r\n**Here's why we have that policy**: TensorFlow developers respond to issues. We want to focus on work that benefits the whole community, e.g., fixing bugs and adding features. Support only helps individuals. GitHub also notifies thousands of people when issues are filed. We want them to see you communicating an interesting problem, rather than being redirected to Stack Overflow.\r\n\r\n------------------------\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: MacOs High Sierra, MacBook Pro, 3.1 GHz Intel Core i5, 8 GB 2133 MHz LPDDR3, Intel Iris Plus Graphics 650 1536 MB\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\n- **TensorFlow installed from (source or binary)**: pip install tensorflow==1.10\r\n- **TensorFlow version (use command below)**: v1.10.0-rc1-19-g656e7a2b34 1.10.0\r\n- **Python version**: python 3.6\r\n- **Bazel version (if compiling from source)**: N/A\r\n- **GCC/Compiler version (if compiling from source)**: N/A\r\n- **CUDA/cuDNN version**: N/A\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**: \r\npython3 /Users/duckhahwang/anaconda3/lib/python3.6/site-packages/tensorflow/python/tools/freeze_graph.py --input_graph=/Users/duckhahwang/Downloads/resnet_imagenet_v2_20180928/graph.pbtxt --input_binary=false --input_checkpoint=/Users/duckhahwang/Downloads/resnet_imagenet_v2_20180928/model.ckpt-56286 --input_binary=false --output_graph=/Users/duckhahwang/Downloads/frozen_graph.pb --output_node_names=softmax\r\n\r\n\r\nYou can collect some of this information using our environment capture script:\r\n\r\nhttps://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh\r\n\r\nYou can obtain the TensorFlow version with\r\n\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n### Describe the problem\r\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\r\n\r\nI downloaded the pre-trained tensorflow model (ResNet-50 v2 (fp32)) from the below link\r\n\r\nhttp://download.tensorflow.org/models/official/20181001_resnet/checkpoints/resnet_imagenet_v2_fp32_20181001.tar.gz\r\n\r\nAnd using freeze_graph.py to freeze the pre-trained model. but I received the error message and not working. \r\n\r\n### Source code / logs\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\nDUCKHAs-MacBook-Pro:site-packages duckhahwang$ python3 /Users/duckhahwang/anaconda3/lib/python3.6/site-packages/tensorflow/python/tools/freeze_graph.py --input_graph=/Users/duckhahwang/Downloads/resnet_imagenet_v2_20180928/graph.pbtxt --input_binary=false --input_checkpoint=/Users/duckhahwang/Downloads/resnet_imagenet_v2_20180928/model.ckpt-56286 --input_binary=false --output_graph=/Users/duckhahwang/Downloads/frozen_graph.pb --output_node_names=softmax\r\n\r\n/Users/duckhahwang/anaconda3/lib/python3.6/site-packages/h5py/__init__.py:36: FutureWarning: Conversion of the second argument of issubdtype from `float` to `np.floating` is deprecated. In future, it will be treated as `np.float64 == np.dtype(float).type`.\r\n  from ._conv import register_converters as _register_converters\r\n/Users/duckhahwang/anaconda3/lib/python3.6/site-packages/requests/__init__.py:80: RequestsDependencyWarning: urllib3 (1.23) or chardet (3.0.4) doesn't match a supported version!\r\n  RequestsDependencyWarning)\r\nTraceback (most recent call last):\r\n  File \"/Users/duckhahwang/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/importer.py\", line 418, in import_graph_def\r\n    graph._c_graph, serialized, options)  # pylint: disable=protected-access\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: NodeDef mentions attr 'Truncate' not in Op<name=Cast; signature=x:SrcT -> y:DstT; attr=SrcT:type; attr=DstT:type>; NodeDef: resnet_model/conv2d/kernel_cast = Cast[DstT=DT_HALF, SrcT=DT_FLOAT, Truncate=false, _output_shapes=[[7,7,3,64]]](resnet_model/conv2d/kernel_cast/ReadVariableOp). (Check whether your GraphDef-interpreting binary is up to date with your GraphDef-generating binary.).\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/duckhahwang/anaconda3/lib/python3.6/site-packages/tensorflow/python/tools/freeze_graph.py\", line 382, in <module>\r\n    run_main()\r\n  File \"/Users/duckhahwang/anaconda3/lib/python3.6/site-packages/tensorflow/python/tools/freeze_graph.py\", line 379, in run_main\r\n    app.run(main=my_main, argv=[sys.argv[0]] + unparsed)\r\n  File \"/Users/duckhahwang/anaconda3/lib/python3.6/site-packages/tensorflow/python/platform/app.py\", line 125, in run\r\n    _sys.exit(main(argv))\r\n  File \"/Users/duckhahwang/anaconda3/lib/python3.6/site-packages/tensorflow/python/tools/freeze_graph.py\", line 378, in <lambda>\r\n    my_main = lambda unused_args: main(unused_args, flags)\r\n  File \"/Users/duckhahwang/anaconda3/lib/python3.6/site-packages/tensorflow/python/tools/freeze_graph.py\", line 272, in main\r\n    flags.saved_model_tags, checkpoint_version)\r\n  File \"/Users/duckhahwang/anaconda3/lib/python3.6/site-packages/tensorflow/python/tools/freeze_graph.py\", line 254, in freeze_graph\r\n    checkpoint_version=checkpoint_version)\r\n  File \"/Users/duckhahwang/anaconda3/lib/python3.6/site-packages/tensorflow/python/tools/freeze_graph.py\", line 99, in freeze_graph_with_def_protos\r\n    _ = importer.import_graph_def(input_graph_def, name=\"\")\r\n  File \"/Users/duckhahwang/anaconda3/lib/python3.6/site-packages/tensorflow/python/util/deprecation.py\", line 454, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/Users/duckhahwang/anaconda3/lib/python3.6/site-packages/tensorflow/python/framework/importer.py\", line 422, in import_graph_def\r\n    raise ValueError(str(e))\r\nValueError: NodeDef mentions attr 'Truncate' not in Op<name=Cast; signature=x:SrcT -> y:DstT; attr=SrcT:type; attr=DstT:type>; NodeDef: resnet_model/conv2d/kernel_cast = Cast[DstT=DT_HALF, SrcT=DT_FLOAT, Truncate=false, _output_shapes=[[7,7,3,64]]](resnet_model/conv2d/kernel_cast/ReadVariableOp). (Check whether your GraphDef-interpreting binary is up to date with your GraphDef-generating binary.)."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22977", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22977/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22977/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22977/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22977", "id": 369982133, "node_id": "MDU6SXNzdWUzNjk5ODIxMzM=", "number": 22977, "title": "gradients of tf.fake_quant_with_min_max_vars function.", "user": {"login": "sicnarf1a", "id": 25295124, "node_id": "MDQ6VXNlcjI1Mjk1MTI0", "avatar_url": "https://avatars0.githubusercontent.com/u/25295124?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sicnarf1a", "html_url": "https://github.com/sicnarf1a", "followers_url": "https://api.github.com/users/sicnarf1a/followers", "following_url": "https://api.github.com/users/sicnarf1a/following{/other_user}", "gists_url": "https://api.github.com/users/sicnarf1a/gists{/gist_id}", "starred_url": "https://api.github.com/users/sicnarf1a/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sicnarf1a/subscriptions", "organizations_url": "https://api.github.com/users/sicnarf1a/orgs", "repos_url": "https://api.github.com/users/sicnarf1a/repos", "events_url": "https://api.github.com/users/sicnarf1a/events{/privacy}", "received_events_url": "https://api.github.com/users/sicnarf1a/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2018-10-15T03:08:01Z", "updated_at": "2020-02-14T06:27:08Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **OS Platform and Distribution : Linux Ubuntu 16.04**\r\n- **TensorFlow version : 1.6.0**\r\n- **Python version : 3.6**\r\n- **CUDA/cuDNN version : CUDA Version 9.0.176/ CUDNN 7.0.5**:\r\n- **GPU model and memory : TITAN Xp/12196MiB**\r\n\r\n### Describe the problem\r\nI assume that **tf.fake_quant_with_min_max_vars function** can not be differentiable due to the fact that quantization should be working based on threshold, such as round, or sign function. And it means that we can not get the gradient of variables due to the nature of chain rule.\r\n\r\nIn these days, several tricks are researched, and one of the most popular method is called **'straight-through-estimator'**, literally passing through the gradient itself.\r\n\r\nSo I tested **tf.fake_quant_with_min_max_vars** to apply **'straight-through-estimator'** functionality. Most results get a gradient 1. This means it works well. Sometimes, however, the result is incorrect. More detailed errors are described below.\r\n\r\n### Source code / logs\r\nHere's some snippet code\r\n`x = tf.cast(np.random.normal(0, 1, (10), tf.float32)`\r\n`x_q = tf.fake_quant_with_min_max_vars(x, min=tf.reduce_min(x), max=tf.reduce_max(x), num_bits=3)`\r\n`grad = tf.gradients(x_q, x)`\r\n\r\nIn that case, sometimes **grad** get weird results:\r\n`[array([1., 1., 1., 0., 1., 1., 2., 1., 1., 1.], dtype=float32)]`\r\nAnd non-zero gradient values have a common quantization value. In this case, the **x_q** is:\r\n`array([0., 0., 0., -2.289673, 2.289673, 0., -2.289673, 0., 4.570346, 0.], dtype=float32)`"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22975", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22975/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22975/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22975/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22975", "id": 369959912, "node_id": "MDU6SXNzdWUzNjk5NTk5MTI=", "number": 22975, "title": "Intermittent very long latency in XRT operations", "user": {"login": "Keno", "id": 1291671, "node_id": "MDQ6VXNlcjEyOTE2NzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1291671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Keno", "html_url": "https://github.com/Keno", "followers_url": "https://api.github.com/users/Keno/followers", "following_url": "https://api.github.com/users/Keno/following{/other_user}", "gists_url": "https://api.github.com/users/Keno/gists{/gist_id}", "starred_url": "https://api.github.com/users/Keno/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Keno/subscriptions", "organizations_url": "https://api.github.com/users/Keno/orgs", "repos_url": "https://api.github.com/users/Keno/repos", "events_url": "https://api.github.com/users/Keno/events{/privacy}", "received_events_url": "https://api.github.com/users/Keno/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tatatodd", "id": 5453737, "node_id": "MDQ6VXNlcjU0NTM3Mzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/5453737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatatodd", "html_url": "https://github.com/tatatodd", "followers_url": "https://api.github.com/users/tatatodd/followers", "following_url": "https://api.github.com/users/tatatodd/following{/other_user}", "gists_url": "https://api.github.com/users/tatatodd/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatatodd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatatodd/subscriptions", "organizations_url": "https://api.github.com/users/tatatodd/orgs", "repos_url": "https://api.github.com/users/tatatodd/repos", "events_url": "https://api.github.com/users/tatatodd/events{/privacy}", "received_events_url": "https://api.github.com/users/tatatodd/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tatatodd", "id": 5453737, "node_id": "MDQ6VXNlcjU0NTM3Mzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/5453737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatatodd", "html_url": "https://github.com/tatatodd", "followers_url": "https://api.github.com/users/tatatodd/followers", "following_url": "https://api.github.com/users/tatatodd/following{/other_user}", "gists_url": "https://api.github.com/users/tatatodd/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatatodd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatatodd/subscriptions", "organizations_url": "https://api.github.com/users/tatatodd/orgs", "repos_url": "https://api.github.com/users/tatatodd/repos", "events_url": "https://api.github.com/users/tatatodd/events{/privacy}", "received_events_url": "https://api.github.com/users/tatatodd/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2018-10-15T00:19:26Z", "updated_at": "2018-12-11T18:53:50Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 18.04\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: mater\r\n- **Python version**: N/A\r\n- **Bazel version (if compiling from source)**: 0.16.1\r\n- **GCC/Compiler version (if compiling from source)**: 7.2.0\r\n- **CUDA/cuDNN version**: N/A\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**: N/A\r\n\r\n### Describe the problem\r\n\r\nOn occasion, I've seen XRT operations take significantly longer than I'd expect and then they usually do (into the 10s of seconds). Attaching GDB while this is happening reveals that it is spending most of its time in TF Graph level optimization passes, particularly EncapsulateXlaComputations (which don't really make any sense in conjunction with XRT ops). I don't have an exact reproducer for when this happens, but it appears that it's more likely to happen upon the first XRTAllocate after reconnecting after a client crashed. I believe, I managed to capture a log  at VLOG level 2 while this was happening (see gist at https://gist.github.com/Keno/3a5e0dc86d3829f5712c5e1a5f65161b). Hopefully that should aid in figuring out what's going on. At the end of the gist, it tried to dump the serialized representation of the ~500MB sized model into the log, so I interrupted it there. I can try to reproduce it again, letting it finish dumping the serialized model if that would be helpful.\r\n\r\ncc @michaelisard"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22939", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22939/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22939/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22939/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22939", "id": 369577291, "node_id": "MDU6SXNzdWUzNjk1NzcyOTE=", "number": 22939, "title": "LSTMBlockFusedCell not supported by optimize_for_inference?", "user": {"login": "lissyx", "id": 1645737, "node_id": "MDQ6VXNlcjE2NDU3Mzc=", "avatar_url": "https://avatars0.githubusercontent.com/u/1645737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lissyx", "html_url": "https://github.com/lissyx", "followers_url": "https://api.github.com/users/lissyx/followers", "following_url": "https://api.github.com/users/lissyx/following{/other_user}", "gists_url": "https://api.github.com/users/lissyx/gists{/gist_id}", "starred_url": "https://api.github.com/users/lissyx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lissyx/subscriptions", "organizations_url": "https://api.github.com/users/lissyx/orgs", "repos_url": "https://api.github.com/users/lissyx/repos", "events_url": "https://api.github.com/users/lissyx/events{/privacy}", "received_events_url": "https://api.github.com/users/lissyx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2018-10-12T14:31:33Z", "updated_at": "2018-12-11T18:53:45Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: yes, https://github.com/mozilla/DeepSpeech/blob/963edc12deeaa9d2307c3c352d7471a97057e6f2/DeepSpeech.py#L385-L480 and https://github.com/mozilla/DeepSpeech/blob/963edc12deeaa9d2307c3c352d7471a97057e6f2/DeepSpeech.py#L1786-L1824\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Debian/Sid\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: N/A\r\n- **TensorFlow installed from (source or binary)**: binary and source\r\n- **TensorFlow version (use command below)**: r1.11 and current master (9e0fa9578638f9147c0b180e6ea89d67d5c0bae3)\r\n- **Python version**: 3.6\r\n- **Bazel version (if compiling from source)**: 0.15.2\r\n- **GCC/Compiler version (if compiling from source)**: 8.2 (Debian Sid)\r\n- **CUDA/cuDNN version**: N/A\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**: \r\n\r\n### Describe the problem\r\n - Train a model using DeepSpeech\r\n - Optimize with: `python tensorflow/python/tools/optimize_for_inference.py --frozen_graph true --input ~/tmp/deepspeech-fr/model/output_graph.pb --input_names input_node,input_lengths,previous_state_c,\r\nprevious_state_h --output_names logits --output ~/tmp/deepspeech-fr/model/output_graph_opt.pb`\r\n - `optimize_for_inference.py` runs without any issue\r\n - Load and run the model for inference results in `Invalid argument: Input 0 of node lstm_fused_cell/Max was passed float from input_lengths:0 incompatible with expected int32.`"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22926", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22926/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22926/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22926/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22926", "id": 369400171, "node_id": "MDU6SXNzdWUzNjk0MDAxNzE=", "number": 22926, "title": "Feature Request: GPUOptions for Go binding", "user": {"login": "mattn", "id": 10111, "node_id": "MDQ6VXNlcjEwMTEx", "avatar_url": "https://avatars0.githubusercontent.com/u/10111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattn", "html_url": "https://github.com/mattn", "followers_url": "https://api.github.com/users/mattn/followers", "following_url": "https://api.github.com/users/mattn/following{/other_user}", "gists_url": "https://api.github.com/users/mattn/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattn/subscriptions", "organizations_url": "https://api.github.com/users/mattn/orgs", "repos_url": "https://api.github.com/users/mattn/repos", "events_url": "https://api.github.com/users/mattn/events{/privacy}", "received_events_url": "https://api.github.com/users/mattn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1256103877, "node_id": "MDU6TGFiZWwxMjU2MTAzODc3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/good%20first%20issue", "name": "good first issue", "color": "c4ef8b", "default": true, "description": "Good first issue for newcomers."}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-10-12T05:02:11Z", "updated_at": "2019-04-05T17:15:05Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "Current implementation of Go binding can not specify options.\r\n\r\nGPUOptions struct is in internal package. And `go generate` doesn't work for protobuf directory. So we can't specify GPUOptions for `NewSession`.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22902", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22902/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22902/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22902/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22902", "id": 369239608, "node_id": "MDU6SXNzdWUzNjkyMzk2MDg=", "number": 22902, "title": "Linker error when compiling from head of master on MacOS", "user": {"login": "georgepaw", "id": 6642663, "node_id": "MDQ6VXNlcjY2NDI2NjM=", "avatar_url": "https://avatars1.githubusercontent.com/u/6642663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/georgepaw", "html_url": "https://github.com/georgepaw", "followers_url": "https://api.github.com/users/georgepaw/followers", "following_url": "https://api.github.com/users/georgepaw/following{/other_user}", "gists_url": "https://api.github.com/users/georgepaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/georgepaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/georgepaw/subscriptions", "organizations_url": "https://api.github.com/users/georgepaw/orgs", "repos_url": "https://api.github.com/users/georgepaw/repos", "events_url": "https://api.github.com/users/georgepaw/events{/privacy}", "received_events_url": "https://api.github.com/users/georgepaw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "meteorcloudy", "id": 4171702, "node_id": "MDQ6VXNlcjQxNzE3MDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/4171702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meteorcloudy", "html_url": "https://github.com/meteorcloudy", "followers_url": "https://api.github.com/users/meteorcloudy/followers", "following_url": "https://api.github.com/users/meteorcloudy/following{/other_user}", "gists_url": "https://api.github.com/users/meteorcloudy/gists{/gist_id}", "starred_url": "https://api.github.com/users/meteorcloudy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meteorcloudy/subscriptions", "organizations_url": "https://api.github.com/users/meteorcloudy/orgs", "repos_url": "https://api.github.com/users/meteorcloudy/repos", "events_url": "https://api.github.com/users/meteorcloudy/events{/privacy}", "received_events_url": "https://api.github.com/users/meteorcloudy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "meteorcloudy", "id": 4171702, "node_id": "MDQ6VXNlcjQxNzE3MDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/4171702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meteorcloudy", "html_url": "https://github.com/meteorcloudy", "followers_url": "https://api.github.com/users/meteorcloudy/followers", "following_url": "https://api.github.com/users/meteorcloudy/following{/other_user}", "gists_url": "https://api.github.com/users/meteorcloudy/gists{/gist_id}", "starred_url": "https://api.github.com/users/meteorcloudy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meteorcloudy/subscriptions", "organizations_url": "https://api.github.com/users/meteorcloudy/orgs", "repos_url": "https://api.github.com/users/meteorcloudy/repos", "events_url": "https://api.github.com/users/meteorcloudy/events{/privacy}", "received_events_url": "https://api.github.com/users/meteorcloudy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 20, "created_at": "2018-10-11T18:03:01Z", "updated_at": "2019-02-12T13:12:53Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: MacOS Mojave and High Sierra\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: N/A\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: master\r\n- **Python version**: 2.7\r\n- **Bazel version (if compiling from source)**: 0.17..2-homebrew\r\n- **GCC/Compiler version (if compiling from source)**: \r\n```\r\nclang -v\r\nApple LLVM version 10.0.0 (clang-1000.11.45.2)\r\n```\r\n- **CUDA/cuDNN version**: N/A\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**: \r\n```\r\nbazel test --test_output=all --nocache_test_results --config=opt tensorflow/compiler/tests:cpu_tests\r\n```\r\n(Configured with XLA support enabled)\r\n### Describe the problem\r\nWhen trying to run the above command I get:\r\n```\r\nld: can't open -exported_symbols_list file: -filelist\r\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\r\n```\r\n\r\n### Source code / logs\r\nAfter applying this diff:\r\n```diff --git a/tensorflow/tensorflow.bzl b/tensorflow/tensorflow.bzl\r\nindex df15914233..8de9c7cfdd 100644\r\n--- a/tensorflow/tensorflow.bzl\r\n+++ b/tensorflow/tensorflow.bzl\r\n@@ -1636,8 +1636,7 @@ def tf_py_wrap_cc(\r\n     )\r\n     extra_linkopts = select({\r\n         \"@local_config_cuda//cuda:darwin\": [\r\n-            \"-Wl,-exported_symbols_list\",\r\n-            \"$(location %s.lds)\" % vscriptname,\r\n+            \"-Wl,-exported_symbols_list,$(location %s.lds)\" % vscriptname,\r\n         ],\r\n         clean_dep(\"//tensorflow:windows\"): [],\r\n         \"//conditions:default\": [\r\n```\r\n\r\nand running `bazel test --test_output=all --nocache_test_results --config=opt tensorflow/compiler/tests:cpu_tests`\r\n\r\nI get lots of warnings during linking:\r\n```\r\nld: warning: cannot export hidden symbol std::__1::shared_ptr<tensorflow::AWSSha256HMACOpenSSLImpl>::__enable_weak_this(...) from bazel-out/darwin-opt/bin/tensorflow/core/platform/s3/libaws_crypto.lo(aws_crypto.o)\r\nld: warning: cannot export hidden symbol std::__1::shared_ptr<tensorflow::AWSLogSystem>::__enable_weak_this(...) from bazel-out/darwin-opt/bin/tensorflow/core/platform/s3/libaws_logging.lo(aws_logging.o)\r\nld: warning: cannot export hidden symbol std::__1::shared_ptr<tensorflow::Notification>::__enable_weak_this(...) from bazel-out/darwin-opt/bin/tensorflow/core/grappler/libutils.a(utils.o)\r\n```\r\n\r\nAnd then when the tests are ran I get errors such as:\r\n\r\n```\r\n2018-10-11 13:02:47.136859: I tensorflow/compiler/xla/service/service.cc:157]   StreamExecutor device (0): <undefined>, <undefined>\r\n*** Received signal 10 ***\r\n*** BEGIN MANGLED STACK TRACE ***\r\n0   libtensorflow_framework.so          0x00000001200870a7 _ZN10tensorflow7testingL17StacktraceHandlerEiP9__siginfoPv + 183\r\n1   libsystem_platform.dylib            0x00007fff66049b3d _sigtramp + 29\r\n2   ???                                 0x0000000000000000 0x0 + 0\r\n3   _pywrap_tensorflow_internal.so      0x00000001143583a9 _ZNSt3__110__function6__funcIZN3xla3cpu13CpuExecutable24ExecuteAsyncOnStreamImplEPKNS2_27ServiceExecutableRunOptionsEN4absl4SpanIKPKNS2_12ShapedBufferEEEPNS2_19HloExecutionProfileEE12AsyncRunTaskNS_9allocatorISH_EEFvvEEclEv + 73\r\n4   libtensorflow_framework.so          0x000000012032bd09 _ZNSt3__110__function6__funcIZN15stream_executor4host10HostStream11EnqueueTaskENS_8functionIFvvEEEE12NotifiedTaskNS_9allocatorIS8_EES6_EclEv + 25\r\n5   libtensorflow_framework.so          0x00000001200641da _ZN5Eigen26NonBlockingThreadPoolTemplIN10tensorflow6thread16EigenEnvironmentEE10WorkerLoopEi + 618\r\n6   libtensorflow_framework.so          0x0000000120063e6f _ZNSt3__110__function6__funcIZN10tensorflow6thread16EigenEnvironment12CreateThreadENS_8functionIFvvEEEEUlvE_NS_9allocatorIS8_EES6_EclEv + 47\r\n7   libtensorflow_framework.so          0x0000000120088a30 _ZNSt3__114__thread_proxyINS_5tupleIJNS_10unique_ptrINS_15__thread_structENS_14default_deleteIS3_EEEENS_8functionIFvvEEEEEEEEPvSB_ + 48\r\n8   libsystem_pthread.dylib             0x00007fff6605233d _pthread_body + 126\r\n9   libsystem_pthread.dylib             0x00007fff660552a7 _pthread_start + 70\r\n10  libsystem_pthread.dylib             0x00007fff66051425 thread_start + 13\r\n*** END MANGLED STACK TRACE ***\r\n\r\n*** Begin stack trace ***\r\n\ttensorflow::CurrentStackTrace()\r\n\ttensorflow::testing::StacktraceHandler(int, __siginfo*, void*)\r\n\t_sigtramp\r\n\r\n\tstd::__1::__function::__func<xla::cpu::CpuExecutable::ExecuteAsyncOnStreamImpl(xla::ServiceExecutableRunOptions const*, absl::Span<xla::ShapedBuffer const* const>, xla::HloExecutionProfile*)::AsyncRunTask, std::__1::allocator<xla::cpu::CpuExecutable::ExecuteAsyncOnStreamImpl(xla::ServiceExecutableRunOptions const*, absl::Span<xla::ShapedBuffer const* const>, xla::HloExecutionProfile*)::AsyncRunTask>, void ()>::operator()()\r\n\tstd::__1::__function::__func<stream_executor::host::HostStream::EnqueueTask(std::__1::function<void ()>)::NotifiedTask, std::__1::allocator<stream_executor::host::HostStream::EnqueueTask(std::__1::function<void ()>)::NotifiedTask>, void ()>::operator()()\r\n\tEigen::NonBlockingThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WorkerLoop(int)\r\n\tstd::__1::__function::__func<tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function<void ()>)::'lambda'(), std::__1::allocator<tensorflow::thread::EigenEnvironment::CreateThread(std::__1::function<void ()>)::'lambda'()>, void ()>::operator()()\r\n\tvoid* std::__1::__thread_proxy<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, std::__1::function<void ()> > >(void*)\r\n\t_pthread_body\r\n\t_pthread_start\r\n\tthread_start\r\n*** End stack trace ***\r\n```\r\n\r\nNote that `cc_wrapper.sh` calls `gcc` however I haven't changed it so it still points at Apple LLVM.\r\n\r\nNote that there is an issue #22759 however that one uses custom code, where as this is HEAD of master."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22894", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22894/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22894/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22894/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22894", "id": 369088508, "node_id": "MDU6SXNzdWUzNjkwODg1MDg=", "number": 22894, "title": "Can't use CTCBeamSearchDecoder in c++, LINK ERROR occur,BUG in CTCBeamSearchDecoder 's source code", "user": {"login": "yjcn", "id": 8858803, "node_id": "MDQ6VXNlcjg4NTg4MDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/8858803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yjcn", "html_url": "https://github.com/yjcn", "followers_url": "https://api.github.com/users/yjcn/followers", "following_url": "https://api.github.com/users/yjcn/following{/other_user}", "gists_url": "https://api.github.com/users/yjcn/gists{/gist_id}", "starred_url": "https://api.github.com/users/yjcn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yjcn/subscriptions", "organizations_url": "https://api.github.com/users/yjcn/orgs", "repos_url": "https://api.github.com/users/yjcn/repos", "events_url": "https://api.github.com/users/yjcn/events{/privacy}", "received_events_url": "https://api.github.com/users/yjcn/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-10-11T12:04:02Z", "updated_at": "2018-12-18T18:49:51Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:NO\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Windows 10 Pro 1803\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:N/A\r\n- **TensorFlow installed from (source or binary)**: from source\r\n- **TensorFlow version (use command below)**: r1.4  and r1.10\r\n- **Python version**: 3.6\r\n- **Bazel version (if compiling from source)**: cmake 3.12.2\r\n- **GCC/Compiler version (if compiling from source)**: VS 2015\r\n- **CUDA/cuDNN version**: N/A\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**:N/A\r\n\r\n### Describe the problem\r\n I want to use [CTCBeamSearchDecoder ](https://github.com/tensorflow/tensorflow/blob/r1.10/tensorflow/core/util/ctc/ctc_beam_search.h), but there is a link error when I call CTCBeamSearchDecoder  constructor  function(`CTCBeamSearchDecoder<> decoder(num_classes, 10 * top_paths, &default_scorer);`).  And I comment the constructor  function, the error disappear.  I test the r1.4 tensorflow.lib complied by myself with cmake and r1.10 [download from github](https://github.com/fo40225/tensorflow-windows-wheel/tree/master/1.10.0/cpp) . **So I think there might be a bug in CTCBeamSearchDecoder  's source code.**\t\r\n### Source code / logs\r\nThis is the test code which is from [ctc_beam_search_test.cc](https://github.com/tensorflow/tensorflow/blob/r1.10/tensorflow/core/util/ctc/ctc_beam_search_test.cc). The code is very simple.\r\n```\r\n#include \"third_party/eigen3/Eigen/Core\"\r\n//#include \"tensorflow/core/platform/env.h\"\r\n#include \"tensorflow/core/util/ctc/ctc_beam_search.h\"\r\n#include <vector>\r\nvoid test()\r\n{\r\n\tusing tensorflow::ctc::CTCBeamSearchDecoder;\r\n\tusing tensorflow::ctc::CTCDecoder;\r\n\tconst int batch_size = 1;\r\n\tconst int timesteps = 5;\r\n\tconst int top_paths = 3;\r\n\tconst int num_classes = 6;\r\n\r\n\t// Plain decoder using hibernating beam search algorithm.\r\n\tCTCBeamSearchDecoder<>::DefaultBeamScorer default_scorer;\r\n        //COMMENT AND NO ERROR\r\n\tCTCBeamSearchDecoder<> decoder(num_classes, 10 * top_paths, &default_scorer);\r\n\r\n\t// Dictionary decoder, allowing only two dictionary words : {3}, {3, 1}.\r\n\t//DictionaryBeamScorer dictionary_scorer;\r\n\t//CTCBeamSearchDecoder<HistoryBeamState> dictionary_decoder(num_classes, top_paths, &dictionary_scorer);\r\n\r\n\t// Raw data containers (arrays of floats, ints, etc.).\r\n\tint sequence_lengths[batch_size] = { timesteps };\r\n\tfloat input_data_mat[timesteps][batch_size][num_classes] = {\r\n\t\t{ { 0, 0.6, 0, 0.4, 0, 0 } },\r\n\t\t{ { 0, 0.5, 0, 0.5, 0, 0 } },\r\n\t\t{ { 0, 0.4, 0, 0.6, 0, 0 } },\r\n\t\t{ { 0, 0.4, 0, 0.6, 0, 0 } },\r\n\t\t{ { 0, 0.4, 0, 0.6, 0, 0 } } };\r\n\r\n\t// The CTCDecoder works with log-probs.\r\n\tfor (int t = 0; t < timesteps; ++t) {\r\n\t\tfor (int b = 0; b < batch_size; ++b) {\r\n\t\t\tfor (int c = 0; c < num_classes; ++c) {\r\n\t\t\t\tinput_data_mat[t][b][c] = std::log(input_data_mat[t][b][c]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Plain output, without any additional scoring.\r\n\tstd::vector<CTCDecoder::Output> expected_output = {\r\n\t\t{ { 1, 3 },{ 1, 3, 1 },{ 3, 1, 3 } },\r\n\t};\r\n\r\n\t// Dictionary outputs: preference for dictionary candidates. The\r\n\t// second-candidate is there, despite it not being a dictionary word, due to\r\n\t// stronger probability in the input to the decoder.\r\n\tstd::vector<CTCDecoder::Output> expected_dict_output = {\r\n\t\t{ { 3 },{ 1, 3 },{ 3, 1 } },\r\n\t};\r\n\r\n\t// Convert data containers to the format accepted by the decoder, simply\r\n\t// mapping the memory from the container to an Eigen::ArrayXi,::MatrixXf,\r\n\t// using Eigen::Map.\r\n\tEigen::Map<const Eigen::ArrayXi> seq_len(&sequence_lengths[0], batch_size);\r\n\tstd::vector<Eigen::Map<const Eigen::MatrixXf>> inputs;\r\n\tinputs.reserve(timesteps);\r\n\tfor (int t = 0; t < timesteps; ++t) {\r\n\t\tinputs.emplace_back(&input_data_mat[t][0][0], batch_size, num_classes);\r\n\t}\r\n\r\n\t// Prepare containers for output and scores.\r\n\tstd::vector<CTCDecoder::Output> outputs(top_paths);\r\n\tfor (CTCDecoder::Output& output : outputs) {\r\n\t\toutput.resize(batch_size);\r\n\t}\r\n\tfloat score[batch_size][top_paths] = { { 0.0 } };\r\n\tEigen::Map<Eigen::MatrixXf> scores(&score[0][0], batch_size, top_paths);\r\n}\r\nint main()\r\n{\r\n\ttest();\r\n\treturn 0;\r\n}\r\n\r\n```\r\nThis is complier 's error log.\r\n```\r\nerror LNK2001 unresolved external symbol  \"void __cdecl tensorflow::internal::MakeCheckOpValueString<unsigned char>(class std::basic_ostream<char,struct std::char_traits<char> > *,unsigned char const &)\" (??$MakeCheckOpValueString@E@internal@tensorflow@@YAXPEAV?$basic_ostream@DU?$char_traits@D@std@@@std@@AEBE@Z)\ttest1\tC:\\Users\\46099\\Desktop\\testtf\\test1\\test1\\main.obj\t1\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22891", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22891/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22891/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22891/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22891", "id": 369031053, "node_id": "MDU6SXNzdWUzNjkwMzEwNTM=", "number": 22891, "title": "Cannot obtain the output feature map value of certain tensor in tensorflow-lite", "user": {"login": "pcub", "id": 7065417, "node_id": "MDQ6VXNlcjcwNjU0MTc=", "avatar_url": "https://avatars0.githubusercontent.com/u/7065417?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcub", "html_url": "https://github.com/pcub", "followers_url": "https://api.github.com/users/pcub/followers", "following_url": "https://api.github.com/users/pcub/following{/other_user}", "gists_url": "https://api.github.com/users/pcub/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcub/subscriptions", "organizations_url": "https://api.github.com/users/pcub/orgs", "repos_url": "https://api.github.com/users/pcub/repos", "events_url": "https://api.github.com/users/pcub/events{/privacy}", "received_events_url": "https://api.github.com/users/pcub/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "achowdhery", "id": 4723042, "node_id": "MDQ6VXNlcjQ3MjMwNDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4723042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/achowdhery", "html_url": "https://github.com/achowdhery", "followers_url": "https://api.github.com/users/achowdhery/followers", "following_url": "https://api.github.com/users/achowdhery/following{/other_user}", "gists_url": "https://api.github.com/users/achowdhery/gists{/gist_id}", "starred_url": "https://api.github.com/users/achowdhery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/achowdhery/subscriptions", "organizations_url": "https://api.github.com/users/achowdhery/orgs", "repos_url": "https://api.github.com/users/achowdhery/repos", "events_url": "https://api.github.com/users/achowdhery/events{/privacy}", "received_events_url": "https://api.github.com/users/achowdhery/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "achowdhery", "id": 4723042, "node_id": "MDQ6VXNlcjQ3MjMwNDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4723042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/achowdhery", "html_url": "https://github.com/achowdhery", "followers_url": "https://api.github.com/users/achowdhery/followers", "following_url": "https://api.github.com/users/achowdhery/following{/other_user}", "gists_url": "https://api.github.com/users/achowdhery/gists{/gist_id}", "starred_url": "https://api.github.com/users/achowdhery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/achowdhery/subscriptions", "organizations_url": "https://api.github.com/users/achowdhery/orgs", "repos_url": "https://api.github.com/users/achowdhery/repos", "events_url": "https://api.github.com/users/achowdhery/events{/privacy}", "received_events_url": "https://api.github.com/users/achowdhery/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-10-11T09:27:47Z", "updated_at": "2018-12-11T18:53:36Z", "closed_at": null, "author_association": "NONE", "body": "Hello, I am analysing each layer of mobilenet-ssd in tensorflow-lite. I am using python interpreter.\r\nhere is the sample of python script for accessing certain tensor of detect.tflite.\r\n\r\n```\r\ninterpreter = interpreter_wrapper.Interpreter(model_path=resource_loader.get_path_to_datafile(\"detect.tflite\"))\r\ninterpreter.allocate_tensors()\r\ninput_details = interpreter.get_input_details()\r\noutput_details = interpreter.get_output_details()\r\ninterpreter.set_tensor(input_details[0]['index'], input_data)\r\ninterpreter.invoke()\r\ntensorIndex  = 173\r\ntmpTensor = interpreter._get_tensor_details(tensorIndex)\r\nvalue = interpreter.get_tensor(tensorIndex)\r\nvalueShape = value.shape\r\ntensorName = interpreter._get_tensor_details(tensorIndex)\r\nLayerNames = tensorName['name']\r\nplt.imshow(value)\r\nplt.show()\r\n```\r\nin this way I want to check the output feature map of certain tensor. However, the output feature map seems show trash values all the time.\r\n\r\n> Note: given python script can show the image_tensor (input image) and cannot obtain any detection results\r\n\r\nHow to check the other output feature map of certain tensor in tensorflow lite?\r\n\r\nThank you."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22889", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22889/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22889/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22889/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22889", "id": 369009531, "node_id": "MDU6SXNzdWUzNjkwMDk1MzE=", "number": 22889, "title": "train with multi-gpu with MirroredStrategy will hang-up", "user": {"login": "honeytidy", "id": 1021165, "node_id": "MDQ6VXNlcjEwMjExNjU=", "avatar_url": "https://avatars2.githubusercontent.com/u/1021165?v=4", "gravatar_id": "", "url": "https://api.github.com/users/honeytidy", "html_url": "https://github.com/honeytidy", "followers_url": "https://api.github.com/users/honeytidy/followers", "following_url": "https://api.github.com/users/honeytidy/following{/other_user}", "gists_url": "https://api.github.com/users/honeytidy/gists{/gist_id}", "starred_url": "https://api.github.com/users/honeytidy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/honeytidy/subscriptions", "organizations_url": "https://api.github.com/users/honeytidy/orgs", "repos_url": "https://api.github.com/users/honeytidy/repos", "events_url": "https://api.github.com/users/honeytidy/events{/privacy}", "received_events_url": "https://api.github.com/users/honeytidy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}], "state": "open", "locked": false, "assignee": {"login": "seemuch", "id": 2233625, "node_id": "MDQ6VXNlcjIyMzM2MjU=", "avatar_url": "https://avatars0.githubusercontent.com/u/2233625?v=4", "gravatar_id": "", "url": "https://api.github.com/users/seemuch", "html_url": "https://github.com/seemuch", "followers_url": "https://api.github.com/users/seemuch/followers", "following_url": "https://api.github.com/users/seemuch/following{/other_user}", "gists_url": "https://api.github.com/users/seemuch/gists{/gist_id}", "starred_url": "https://api.github.com/users/seemuch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/seemuch/subscriptions", "organizations_url": "https://api.github.com/users/seemuch/orgs", "repos_url": "https://api.github.com/users/seemuch/repos", "events_url": "https://api.github.com/users/seemuch/events{/privacy}", "received_events_url": "https://api.github.com/users/seemuch/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "seemuch", "id": 2233625, "node_id": "MDQ6VXNlcjIyMzM2MjU=", "avatar_url": "https://avatars0.githubusercontent.com/u/2233625?v=4", "gravatar_id": "", "url": "https://api.github.com/users/seemuch", "html_url": "https://github.com/seemuch", "followers_url": "https://api.github.com/users/seemuch/followers", "following_url": "https://api.github.com/users/seemuch/following{/other_user}", "gists_url": "https://api.github.com/users/seemuch/gists{/gist_id}", "starred_url": "https://api.github.com/users/seemuch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/seemuch/subscriptions", "organizations_url": "https://api.github.com/users/seemuch/orgs", "repos_url": "https://api.github.com/users/seemuch/repos", "events_url": "https://api.github.com/users/seemuch/events{/privacy}", "received_events_url": "https://api.github.com/users/seemuch/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2018-10-11T08:33:40Z", "updated_at": "2019-03-01T06:43:45Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\nHave I written custom code: N/A\r\nOS Platform and Distribution: CentOS Linux release 7.3.1611\r\nTensorFlow installed from:  (pip install tf-nightly-gpu)\r\nTensorFlow version: Tensorflow('v1.9.0-rc2-5345-g57d31aa599', '1.12.0-dev20181005')\r\nBazel version: N/A\r\nGPU model and memory: Tesla P40 24G\r\nExact command to reproduce: N/A\r\nMobile device: N/A\r\nCUDA/cuDNN version: cuda 9.0 with cudnn7.1.4\r\n\r\nI train with tensorflow for multi-gpu with MirroredStrategy and estimator. I got the problem:\r\nwhen I set the distribute mode with the following code it will got stuck after runing some training steps:\r\n```\r\ndistribution = tf.contrib.distribute.MirroredStrategy()\r\nconfig = tf.estimator.RunConfig(train_distribute=distribution)\r\nestimator = tf.estimator.Estimator(model_fn=mymodel_fn, model_dir='logs',\r\n        config=config)\r\n```\r\nbug when I run without distribute mode like this:\r\n```\r\ndistribution = tf.contrib.distribute.MirroredStrategy()\r\nconfig = tf.estimator.RunConfig()\r\nestimator = tf.estimator.Estimator(model_fn=mymodel_fn, model_dir='logs',\r\n        config=config)\r\n```\r\nIt runs ok. Why? \r\nIs that a bug of MirroredStrategy?\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22869", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22869/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22869/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22869/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22869", "id": 368716616, "node_id": "MDU6SXNzdWUzNjg3MTY2MTY=", "number": 22869, "title": "Tensorflow C API: SessionRun batch size (how to properly set)", "user": {"login": "EnricoGiordano1992", "id": 3462634, "node_id": "MDQ6VXNlcjM0NjI2MzQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/3462634?v=4", "gravatar_id": "", "url": "https://api.github.com/users/EnricoGiordano1992", "html_url": "https://github.com/EnricoGiordano1992", "followers_url": "https://api.github.com/users/EnricoGiordano1992/followers", "following_url": "https://api.github.com/users/EnricoGiordano1992/following{/other_user}", "gists_url": "https://api.github.com/users/EnricoGiordano1992/gists{/gist_id}", "starred_url": "https://api.github.com/users/EnricoGiordano1992/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/EnricoGiordano1992/subscriptions", "organizations_url": "https://api.github.com/users/EnricoGiordano1992/orgs", "repos_url": "https://api.github.com/users/EnricoGiordano1992/repos", "events_url": "https://api.github.com/users/EnricoGiordano1992/events{/privacy}", "received_events_url": "https://api.github.com/users/EnricoGiordano1992/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2018-10-10T15:14:15Z", "updated_at": "2020-01-14T22:53:10Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 18.04\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: no\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: 1.10\r\n- **Python version**: 3.6\r\n- **Bazel version (if compiling from source)**: 0.16.1\r\n- **GCC/Compiler version (if compiling from source)**: 7.3.0\r\n- **CUDA/cuDNN version**: 9.2 / 7.3\r\n- **GPU model and memory**: Nvidia GTX 1070ti\r\n\r\n\r\nDear sirs,\r\nI am struggling to find the correct way to properly set the batch size for a SessionRun call in the C API. \r\nWhat I am trying to do is passing multiple images in a single SessionRun to a CNN (VGG16).\r\nI am wondering which is the correct way to do so and to retrieve the appropriate correlated output values.\r\nI have also come to believe that a single SessionRun call can only accept a single image as an input, so a proper batched input could only be achieved by having multiple SessionRun calls (for an example inside a \"for\" loop) with a single image each. Am I correct? Is there not a way to batch multiple images inside a single SessionRun call for a single-input CNN?\r\n\r\nI have searched thoroughly your documentation but I could not find any evidence of a proper indication on how to do it.\r\n\r\nBest regards"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22854", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22854/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22854/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22854/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22854", "id": 368421855, "node_id": "MDU6SXNzdWUzNjg0MjE4NTU=", "number": 22854, "title": "TensorRT INT8 calibration doesn't work with TF r1.12 and TRT 5RC", "user": {"login": "dhingratul", "id": 4759327, "node_id": "MDQ6VXNlcjQ3NTkzMjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/4759327?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dhingratul", "html_url": "https://github.com/dhingratul", "followers_url": "https://api.github.com/users/dhingratul/followers", "following_url": "https://api.github.com/users/dhingratul/following{/other_user}", "gists_url": "https://api.github.com/users/dhingratul/gists{/gist_id}", "starred_url": "https://api.github.com/users/dhingratul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dhingratul/subscriptions", "organizations_url": "https://api.github.com/users/dhingratul/orgs", "repos_url": "https://api.github.com/users/dhingratul/repos", "events_url": "https://api.github.com/users/dhingratul/events{/privacy}", "received_events_url": "https://api.github.com/users/dhingratul/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1754777628, "node_id": "MDU6TGFiZWwxNzU0Nzc3NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu:tensorrt", "name": "comp:gpu:tensorrt", "color": "ea98ba", "default": false, "description": "Issues specific to TensorRT"}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 17, "created_at": "2018-10-09T22:22:21Z", "updated_at": "2020-02-13T08:34:24Z", "closed_at": null, "author_association": "NONE", "body": "Please go to Stack Overflow for help and support:\r\n\r\nhttps://stackoverflow.com/questions/tagged/tensorflow\r\n\r\nIf you open a GitHub issue, here is our policy:\r\n\r\n1. It must be a bug, a feature request, or a significant problem with documentation (for small docs fixes please send a PR instead).\r\n2. The form below must be filled out.\r\n3. It shouldn't be a TensorBoard issue. Those go [here](https://github.com/tensorflow/tensorboard/issues).\r\n\r\n**Here's why we have that policy**: TensorFlow developers respond to issues. We want to focus on work that benefits the whole community, e.g., fixing bugs and adding features. Support only helps individuals. GitHub also notifies thousands of people when issues are filed. We want them to see you communicating an interesting problem, rather than being redirected to Stack Overflow.\r\n\r\n------------------------\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:n/a\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 16.04\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: n/a\r\n- **TensorFlow installed from (source or binary)**: source \r\n- **TensorFlow version (use command below)**: r1.12\r\n- **Python version**: 3.5\r\n- **Bazel version (if compiling from source)**: 0.16.1\r\n- **GCC/Compiler version (if compiling from source)**: 5.4.0\r\n- **CUDA/cuDNN version**:9/7.1\r\n- **GPU model and memory**:1080ti\r\n- **Exact command to reproduce**:\r\n\r\nFollow workflow from here,  https://devblogs.nvidia.com/tensorrt-integration-speeds-tensorflow-inference/\r\nError at the following piece of code\r\n`trt_graph=trt.calib_graph_to_infer_graph(calibGraph)\r\n`\r\nLog:\r\nFile \"/home/dhingratul/.virtualenvs/tf_trt_source_trt5rc_tf1_12/local/lib/python3.5/site-packages/tensorflow/contrib/tensorrt/python/trt_convert.py\", line 349, in calib_graph_to_infer_graph\r\nfor n in calibration_graph_def.node:\r\nAttributeError: 'Graph' object has no attribute 'node'\r\n\r\n\r\nYou can collect some of this information using our environment capture script:\r\n\r\nhttps://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh\r\n\r\nYou can obtain the TensorFlow version with\r\n\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n### Describe the problem\r\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\r\n\r\n### Source code / logs\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22843", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22843/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22843/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22843/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22843", "id": 368308473, "node_id": "MDU6SXNzdWUzNjgzMDg0NzM=", "number": 22843, "title": "Error with transform_graph tool:  \"Failed to parse --transform argument\"", "user": {"login": "aejaex", "id": 7286405, "node_id": "MDQ6VXNlcjcyODY0MDU=", "avatar_url": "https://avatars1.githubusercontent.com/u/7286405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aejaex", "html_url": "https://github.com/aejaex", "followers_url": "https://api.github.com/users/aejaex/followers", "following_url": "https://api.github.com/users/aejaex/following{/other_user}", "gists_url": "https://api.github.com/users/aejaex/gists{/gist_id}", "starred_url": "https://api.github.com/users/aejaex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aejaex/subscriptions", "organizations_url": "https://api.github.com/users/aejaex/orgs", "repos_url": "https://api.github.com/users/aejaex/repos", "events_url": "https://api.github.com/users/aejaex/events{/privacy}", "received_events_url": "https://api.github.com/users/aejaex/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jch1", "id": 1811449, "node_id": "MDQ6VXNlcjE4MTE0NDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1811449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jch1", "html_url": "https://github.com/jch1", "followers_url": "https://api.github.com/users/jch1/followers", "following_url": "https://api.github.com/users/jch1/following{/other_user}", "gists_url": "https://api.github.com/users/jch1/gists{/gist_id}", "starred_url": "https://api.github.com/users/jch1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jch1/subscriptions", "organizations_url": "https://api.github.com/users/jch1/orgs", "repos_url": "https://api.github.com/users/jch1/repos", "events_url": "https://api.github.com/users/jch1/events{/privacy}", "received_events_url": "https://api.github.com/users/jch1/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jch1", "id": 1811449, "node_id": "MDQ6VXNlcjE4MTE0NDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1811449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jch1", "html_url": "https://github.com/jch1", "followers_url": "https://api.github.com/users/jch1/followers", "following_url": "https://api.github.com/users/jch1/following{/other_user}", "gists_url": "https://api.github.com/users/jch1/gists{/gist_id}", "starred_url": "https://api.github.com/users/jch1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jch1/subscriptions", "organizations_url": "https://api.github.com/users/jch1/orgs", "repos_url": "https://api.github.com/users/jch1/repos", "events_url": "https://api.github.com/users/jch1/events{/privacy}", "received_events_url": "https://api.github.com/users/jch1/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-10-09T17:04:15Z", "updated_at": "2019-08-21T00:39:53Z", "closed_at": null, "author_association": "NONE", "body": "\r\n------------------------\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: NO\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Mac OS X High Sierra\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: - \r\n- **TensorFlow installed from (source or binary)**: PIP INSTALLED\r\n- **TensorFlow version (use command below)**: 1.10.1\r\n- **Python version**: 2.7.12\r\n- **Bazel version (if compiling from source)**: - \r\n- **GCC/Compiler version (if compiling from source)**: -\r\n- **CUDA/cuDNN version**: - \r\n- **GPU model and memory**: - \r\n- **Exact command to reproduce**: \r\nbazel run transform_graph -- --in_graph=/Users/Documents/modelsmaster/research/object_detection/inference_graphX/frozen_inference_graph.pb --out_graph=/Users/Documents/modelsmaster/research/object_detection/inference_graphX/out_graph.pb --inputs='image_tensor' --outputs='detection_boxes,detection_scores,detection_classes,num_detections' --transforms='\r\nstrip_unused_nodes(type=float,shape=\u201c1,299,299,3\u201d)\r\nfold_constants(ignore_errors=true)\r\nfold_batch_norms\r\nfold_old_batch_norms'\r\n\r\n### Describe the problem\r\n\r\nI have used the Object Detection API to create a transfer learning model based upon MobileNet-V2-Coco. I have used \"export_for_inference.py\" on my checkpoint files to create a frozen model.\r\n\r\nI am now trying to optimise the frozen model as described here:\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/graph_transforms/README.md#introduction\r\n\r\nHowever, I am receiving an error:\r\n\r\ntensorflow/tools/graph_transforms/transform_graph.cc:241] **Failed to parse --transform argument, error was Looking for parameter name, but found \u201c1,299,299,3\u201d)\r\nfold_constants(ignore_errors=true)\r\nfold_batch_norms\r\nfold_old_batch_norms**\r\n\r\n\r\n### Source code / logs\r\n\r\nTRACEBACK\r\n\r\nMac-Air:graph_transforms mac$ bazel run transform_graph -- --in_graph=/Users/Documents/modelsmaster/research/object_detection/inference_graphX/frozen_inference_graph.pb --out_graph=/Users/Documents/modelsmaster/research/object_detection/inference_graphX/out_graph.pb --inputs='image_tensor' --outputs='detection_boxes,detection_scores,detection_classes,num_detections' --transforms='\r\nstrip_unused_nodes(type=float,shape=\u201c1,299,299,3\u201d)\r\nfold_constants(ignore_errors=true)\r\nfold_batch_norms\r\nfold_old_batch_norms'\r\nINFO: Analysed target //tensorflow/tools/graph_transforms:transform_graph (0 packages loaded).\r\nINFO: Found 1 target...\r\nTarget //tensorflow/tools/graph_transforms:transform_graph up-to-date:\r\n  bazel-bin/tensorflow/tools/graph_transforms/transform_graph\r\nINFO: Elapsed time: 0.554s, Critical Path: 0.00s\r\nINFO: 0 processes.\r\nINFO: Build completed successfully, 1 total action\r\nINFO: Running command line: bazel-bin/tensorflow/tools/graph_transforms/transform_graph '--in_graph=/Users/Documents/modelsmaster/research/object_detection/inference_graphX/frozen_inference_graph.pb' '--out_graph=/Users/Documents/modelsmaster/research/object_detection/inference_graphX/out_graph.pb' '--inputs=image_tensor' '--outputs=detection_boxes,detection_scores,detection_classes,num_detections' '--transforms=\r\nstrip_unused_nodes(type=float,shape=\u201c1,299,299,3\u201d)\r\nfold_constants(ignore_errors=true)\r\nfold_batch_norms\r\nINFO: Build completed successfully, 1 total action\r\n2018-10-09 22:25:41.764013: E tensorflow/tools/graph_transforms/transform_graph.cc:241] Failed to parse --transform argument, error was Looking for parameter name, but found \u201c1,299,299,3\u201d)\r\nfold_constants(ignore_errors=true)\r\nfold_batch_norms\r\nfold_old_batch_norms\r\n\r\n\r\nPlease help me in sorting out this issue.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22838", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22838/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22838/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22838/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22838", "id": 368214704, "node_id": "MDU6SXNzdWUzNjgyMTQ3MDQ=", "number": 22838, "title": "Wav to Spectogram wrong expected height", "user": {"login": "rychnal", "id": 28668511, "node_id": "MDQ6VXNlcjI4NjY4NTEx", "avatar_url": "https://avatars0.githubusercontent.com/u/28668511?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rychnal", "html_url": "https://github.com/rychnal", "followers_url": "https://api.github.com/users/rychnal/followers", "following_url": "https://api.github.com/users/rychnal/following{/other_user}", "gists_url": "https://api.github.com/users/rychnal/gists{/gist_id}", "starred_url": "https://api.github.com/users/rychnal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rychnal/subscriptions", "organizations_url": "https://api.github.com/users/rychnal/orgs", "repos_url": "https://api.github.com/users/rychnal/repos", "events_url": "https://api.github.com/users/rychnal/events{/privacy}", "received_events_url": "https://api.github.com/users/rychnal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 8, "created_at": "2018-10-09T13:37:39Z", "updated_at": "2019-05-13T14:26:51Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 18.04\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: No\r\n- **TensorFlow installed from (source or binary)**: pip install tensorflow\r\n- **TensorFlow version (use command below)**:1.11.0\r\n- **Python version**: 2.7.15rc1\r\n- **Bazel version (if compiling from source)**: 0.17.2\r\n- **GCC/Compiler version (if compiling from source)**:\r\n- **CUDA/cuDNN version**:\r\n- **GPU model and memory**:\r\n- **Exact command to reproduce**: bazel run tensorflow/examples/wav_to_spectrogram:wav_to_spectrogram -- --input_wav=/home/lukas/Downloads/music.wav --output_image=/home/lukas/Downloads/spectrogram.png\r\n\r\n\r\n\r\n### Describe the problem\r\nHi I have problem with build this example from tensorflow guide.\r\n bazel run tensorflow/examples/wav_to_spectrogram:wav_to_spectrogram \r\nI get error \"Expected height 18711 but got 18712\" \r\nI tried three differenr wav files and got same error with different height. \"Expected height x but got x + 1\"\r\nWhen I tried with default image spectrogram_test_data/short_test_segment.wav so it works good \r\n\r\n### Source code / logs\r\nbazel run tensorflow/examples/wav_to_spectrogram:wav_to_spectrogram -- --input_wav=/home/lukas/Downloads/music.wav --output_image=/home/lukas/Downloads/spectrogram.png\r\nINFO: Analysed target //tensorflow/examples/wav_to_spectrogram:wav_to_spectrogram (65 packages loaded).\r\nINFO: Found 1 target...\r\nTarget //tensorflow/examples/wav_to_spectrogram:wav_to_spectrogram up-to-date:\r\n  bazel-bin/tensorflow/examples/wav_to_spectrogram/wav_to_spectrogram\r\nINFO: Elapsed time: 149.081s, Critical Path: 4.61s\r\nINFO: 0 processes.\r\nINFO: Build completed successfully, 1 total action\r\nINFO: Running command line: bazel-bin/tensorflow/examples/wav_to_spectrogram/wav_to_spectrogram '--input_wav=/home/lukas/Downloads/music.wav' INFO: Build completed successfully, 1 total action\r\n2018-10-09 17:44:25.818539: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX\r\n2018-10-09 17:44:26.909131: E tensorflow/examples/wav_to_spectrogram/main.cc:61] WavToSpectrogram failed with Invalid argument: Spectrogram size calculation failed: Expected height 18711 but got 18712\r\n   [[Node: spectrogram = AudioSpectrogram[magnitude_squared=false, stride=128, window_size=256, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](wav_decoder)]]\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22825", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22825/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22825/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22825/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22825", "id": 368024621, "node_id": "MDU6SXNzdWUzNjgwMjQ2MjE=", "number": 22825, "title": "Second order derivative not supported for LRN (tf.nn.lrn)", "user": {"login": "vipinpillai", "id": 1018780, "node_id": "MDQ6VXNlcjEwMTg3ODA=", "avatar_url": "https://avatars2.githubusercontent.com/u/1018780?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vipinpillai", "html_url": "https://github.com/vipinpillai", "followers_url": "https://api.github.com/users/vipinpillai/followers", "following_url": "https://api.github.com/users/vipinpillai/following{/other_user}", "gists_url": "https://api.github.com/users/vipinpillai/gists{/gist_id}", "starred_url": "https://api.github.com/users/vipinpillai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vipinpillai/subscriptions", "organizations_url": "https://api.github.com/users/vipinpillai/orgs", "repos_url": "https://api.github.com/users/vipinpillai/repos", "events_url": "https://api.github.com/users/vipinpillai/events{/privacy}", "received_events_url": "https://api.github.com/users/vipinpillai/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 17, "created_at": "2018-10-09T03:13:36Z", "updated_at": "2019-12-19T13:37:24Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 16.04\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: No\r\n- **TensorFlow installed from (source or binary)**: binary \r\n- **TensorFlow version (use command below)**: 1.11.0\r\n- **Python version**: 3.6\r\n- **Bazel version (if compiling from source)**:\r\n- **GCC/Compiler version (if compiling from source)**:\r\n- **CUDA/cuDNN version**:  CUDA 9.0, cuDNN - 7\r\n- **GPU model and memory**: Titan X\r\n- **Exact command to reproduce**:\r\n\r\n### Describe the problem\r\nI have a network architecture which has a LRN layer (tf.nn.lrn). I am using the same network definition from the CIFAR 10 tutorial: https://github.com/tensorflow/models/blob/master/tutorials/image/cifar10/cifar10.py .\r\nI have a loss term which involves the gradient of the cross entropy loss with respect to the input. This throws an error during graph construction:\r\nLookupError: No gradient defined for operation 'gradients/norm1_grad/LRNGrad' (op type: LRNGrad)\r\n\r\n\r\n### Source code\r\nI have reused the same code from the CIFAR10 tutorial with minimal change to the loss function.\r\nI have modified the loss function to have an additional term which penalizes the L2 norm of the gradient of the cross entropy loss with respect to the input.\r\nFollowing is the change to the loss function made to the cifar10.py from the tutorial.\r\n```python\r\ndef loss(images, logits, labels):\r\n  \"\"\"Please note that the caller needs to feed the input images as well.\r\n  Args:\r\n    images: Input images to be used for gradient computation\r\n    logits: Logits from inference().\r\n    labels: Labels from distorted_inputs or inputs(). 1-D tensor\r\n            of shape [batch_size]\r\n  Returns:\r\n    Loss tensor of type float.\r\n  \"\"\"\r\n  labels_onehot = tf.one_hot(labels, depth=10, off_value=0.0, on_value=1.0, dtype=tf.float32)\r\n  cross_entropy = tf.nn.softmax_cross_entropy_with_logits(\r\n      labels=labels_onehot, logits=logits, name='cross_entropy_per_example')\r\n  cross_entropy_mean = tf.reduce_mean(cross_entropy, name='cross_entropy')\r\n  \r\n  cross_entropy_grads, = tf.gradients(cross_entropy_mean, images)\r\n  xent_grad_norm = tf.nn.l2_loss(cross_entropy_grads)\r\n\r\n  tf.add_to_collection('losses', cross_entropy_mean)\r\n  tf.add_to_collection('losses', xent_grad_norm)\r\n\r\n  return tf.add_n(tf.get_collection('losses'), name='total_loss')\r\n```\r\n### Logs:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/vipin/anaconda3/envs/py36-tf1.11.0-test/lib/python3.6/site-packages/tensorflow/python/ops/gradients_impl.py\", line 730, in _GradientsHelper\r\n    grad_fn = ops.get_gradient_function(op)\r\n  File \"/home/vipin/anaconda3/envs/py36-tf1.11.0-test/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 2460, in get_gradient_function\r\n    return _gradient_registry.lookup(op_type)\r\n  File \"/home/vipin/anaconda3/envs/py36-tf1.11.0-test/lib/python3.6/site-packages/tensorflow/python/framework/registry.py\", line 93, in lookup\r\n    \"%s registry has no entry for: %s\" % (self._name, name))\r\nLookupError: gradient registry has no entry for: LRNGrad\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n..............................................\r\n..............................................\r\n  File \"/home/vipin/anaconda3/envs/py36-tf1.11.0-test/lib/python3.6/site-packages/tensorflow/python/ops/gradients_impl.py\", line 596, in gradients\r\n    gate_gradients, aggregation_method, stop_gradients)\r\n  File \"/home/vipin/anaconda3/envs/py36-tf1.11.0-test/lib/python3.6/site-packages/tensorflow/python/ops/gradients_impl.py\", line 734, in _GradientsHelper\r\n    (op.name, op.type))\r\nLookupError: No gradient defined for operation 'gradients/norm1_grad/LRNGrad' (op type: LRNGrad)\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22815", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22815/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22815/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22815/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22815", "id": 367707563, "node_id": "MDU6SXNzdWUzNjc3MDc1NjM=", "number": 22815, "title": "Object detection api training issue", "user": {"login": "dabasmoti", "id": 38852155, "node_id": "MDQ6VXNlcjM4ODUyMTU1", "avatar_url": "https://avatars0.githubusercontent.com/u/38852155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dabasmoti", "html_url": "https://github.com/dabasmoti", "followers_url": "https://api.github.com/users/dabasmoti/followers", "following_url": "https://api.github.com/users/dabasmoti/following{/other_user}", "gists_url": "https://api.github.com/users/dabasmoti/gists{/gist_id}", "starred_url": "https://api.github.com/users/dabasmoti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dabasmoti/subscriptions", "organizations_url": "https://api.github.com/users/dabasmoti/orgs", "repos_url": "https://api.github.com/users/dabasmoti/repos", "events_url": "https://api.github.com/users/dabasmoti/events{/privacy}", "received_events_url": "https://api.github.com/users/dabasmoti/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jch1", "id": 1811449, "node_id": "MDQ6VXNlcjE4MTE0NDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1811449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jch1", "html_url": "https://github.com/jch1", "followers_url": "https://api.github.com/users/jch1/followers", "following_url": "https://api.github.com/users/jch1/following{/other_user}", "gists_url": "https://api.github.com/users/jch1/gists{/gist_id}", "starred_url": "https://api.github.com/users/jch1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jch1/subscriptions", "organizations_url": "https://api.github.com/users/jch1/orgs", "repos_url": "https://api.github.com/users/jch1/repos", "events_url": "https://api.github.com/users/jch1/events{/privacy}", "received_events_url": "https://api.github.com/users/jch1/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jch1", "id": 1811449, "node_id": "MDQ6VXNlcjE4MTE0NDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1811449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jch1", "html_url": "https://github.com/jch1", "followers_url": "https://api.github.com/users/jch1/followers", "following_url": "https://api.github.com/users/jch1/following{/other_user}", "gists_url": "https://api.github.com/users/jch1/gists{/gist_id}", "starred_url": "https://api.github.com/users/jch1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jch1/subscriptions", "organizations_url": "https://api.github.com/users/jch1/orgs", "repos_url": "https://api.github.com/users/jch1/repos", "events_url": "https://api.github.com/users/jch1/events{/privacy}", "received_events_url": "https://api.github.com/users/jch1/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-10-08T09:34:35Z", "updated_at": "2018-12-07T18:53:21Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\nOS WIN 10\r\nProcessor : i5-4440 3.10GHz\r\nRAM 8\r\n\r\n- **TensorFlow installed from (source or binary)**: pip install\r\n- **TensorFlow version (use command below)**: b'v1.10.0-rc1-19-g656e7a2b34' 1.10.0\r\n- **Python version**: 3.6.6\r\n\r\n### Describe the problem\r\nI am trying to train object detection api using (faster_rcnn_inception_v2_coco_2018_01_28)\r\n\r\nconfiguration file\r\n[config.docx](https://github.com/tensorflow/tensorflow/files/2455380/config.docx)\r\n - \r\nI am facing with issue with object detection training\r\nafter 400~ steps the training is stop because a path problem while the script create the path\r\nthe path - C:\\Users\\z\\Anaconda3\\envs\\tensorflow\\Lib\\site-packages\\tensorflow\\models\\research\\object_detection\\training_dataturk\\models\\model\\export\\Servo\\temp-b'1538897129'\r\n----the error screen shot that happend twice before stopped\r\n![1](https://user-images.githubusercontent.com/38852155/46601079-f6dc2200-caa0-11e8-8c11-e3af22ff602d.PNG)\r\n\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22814", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22814/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22814/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22814/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22814", "id": 367676240, "node_id": "MDU6SXNzdWUzNjc2NzYyNDA=", "number": 22814, "title": "PYTHON_LIB_PATH not set during compilation of tensorflow_python_api_gen from source", "user": {"login": "cristianomalossi", "id": 5037986, "node_id": "MDQ6VXNlcjUwMzc5ODY=", "avatar_url": "https://avatars3.githubusercontent.com/u/5037986?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cristianomalossi", "html_url": "https://github.com/cristianomalossi", "followers_url": "https://api.github.com/users/cristianomalossi/followers", "following_url": "https://api.github.com/users/cristianomalossi/following{/other_user}", "gists_url": "https://api.github.com/users/cristianomalossi/gists{/gist_id}", "starred_url": "https://api.github.com/users/cristianomalossi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cristianomalossi/subscriptions", "organizations_url": "https://api.github.com/users/cristianomalossi/orgs", "repos_url": "https://api.github.com/users/cristianomalossi/repos", "events_url": "https://api.github.com/users/cristianomalossi/events{/privacy}", "received_events_url": "https://api.github.com/users/cristianomalossi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "annarev", "id": 22060313, "node_id": "MDQ6VXNlcjIyMDYwMzEz", "avatar_url": "https://avatars0.githubusercontent.com/u/22060313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/annarev", "html_url": "https://github.com/annarev", "followers_url": "https://api.github.com/users/annarev/followers", "following_url": "https://api.github.com/users/annarev/following{/other_user}", "gists_url": "https://api.github.com/users/annarev/gists{/gist_id}", "starred_url": "https://api.github.com/users/annarev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/annarev/subscriptions", "organizations_url": "https://api.github.com/users/annarev/orgs", "repos_url": "https://api.github.com/users/annarev/repos", "events_url": "https://api.github.com/users/annarev/events{/privacy}", "received_events_url": "https://api.github.com/users/annarev/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "annarev", "id": 22060313, "node_id": "MDQ6VXNlcjIyMDYwMzEz", "avatar_url": "https://avatars0.githubusercontent.com/u/22060313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/annarev", "html_url": "https://github.com/annarev", "followers_url": "https://api.github.com/users/annarev/followers", "following_url": "https://api.github.com/users/annarev/following{/other_user}", "gists_url": "https://api.github.com/users/annarev/gists{/gist_id}", "starred_url": "https://api.github.com/users/annarev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/annarev/subscriptions", "organizations_url": "https://api.github.com/users/annarev/orgs", "repos_url": "https://api.github.com/users/annarev/repos", "events_url": "https://api.github.com/users/annarev/events{/privacy}", "received_events_url": "https://api.github.com/users/annarev/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-10-08T08:05:11Z", "updated_at": "2019-11-12T17:46:12Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: NO\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: RHEL 7.5\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: NO\r\n- **TensorFlow installed from (source or binary)**: YES\r\n- **TensorFlow version (use command below)**: 1.11\r\n- **Python version**: 3.5\r\n- **Bazel version (if compiling from source)**:1.17.2\r\n- **GCC/Compiler version (if compiling from source)**: gcc version 6.4.1 20170720 (Advance-Toolchain-at10.0) IBM AT 10 branch, based on subversion id 250395. (GCC)\r\n- **CUDA/cuDNN version**: CUDA 9.2, CUDNN 7.2.1\r\n- **GPU model and memory**: V100\r\n- **Exact command to reproduce**: Installation of Tensorflow - see below\r\n\r\n### Describe the problem\r\nDuring installation from source, env variables are not loaded for the  compilation of:\r\n\r\n```//tensorflow:tensorflow_python_api_gen```\r\n\r\nThese are the variables that are missing:\r\n\r\n```\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda-9.2 \\\r\n    CUDNN_INSTALL_PATH=/usr/local/cudnn-9.2-v7.2.1 \\\r\n    GCC_HOST_COMPILER_PATH=/opt/at10.0/bin/gcc \\\r\n    NCCL_INSTALL_PATH=/usr/local/nccl-9.2-v2.2.13 \\\r\n    OMP_NUM_THREADS=1 \\\r\n    PATH=/hpc_modules/at10.0-based/deeplearning/tensorflow/tensorflow-v1.11.0_openmpi-3.1.2/bin:/hpc_modules/os-based/deeplearning/tensorflow/bazel-0.17.2/bin:/hpc_modules/at10.0-based/python-packages-3.5-mpi4py-3.0.0_openmpi-3.1.2/bin:/hpc_modules/at10.0-based/mpi/openmpi-3.1.2/bin:/hpc_modules/at10.0-based/python-packages-3.5/bin:/opt/at10.0/bin:/usr/local/cuda-9.2/nvvm/bin:/usr/local/cuda-9.2/bin:/usr/lib/jvm/java-openjdk/bin:/shared/lsf/10.1/linux3.10-glibc2.17-ppc64le/etc:/shared/lsf/10.1/linux3.10-glibc2.17-ppc64le/bin:/u/acm/bin:/usr/lib64/qt-3.3/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/ibutils/bin:/afs/zurich.ibm.com/usr/bin \\\r\n    PYTHONPATH=/hpc_modules/at10.0-based/deeplearning/tensorflow/tensorflow-v1.11.0_openmpi-3.1.2/lib64/python3.5/site-packages:/hpc_modules/at10.0-based/python-packages-3.5-mpi4py-3.0.0_openmpi-3.1.2/lib64/python3.5/site-packages:/hpc_modules/at10.0-based/python-packages-3.5-mpi4py-3.0.0_openmpi-3.1.2/lib/python3.5/site-packages:/hpc_modules/at10.0-based/python-packages-3.5/lib64/python3.5/site-packages:/hpc_modules/at10.0-based/python-packages-3.5/lib/python3.5/site-packages:/hpc_modules/at10.0-based/python-packages-3.5/lib64/python3.5/site-packages \\\r\n    PYTHON_BIN_PATH=/opt/at10.0/bin/python3.5 \\\r\n    PYTHON_LIB_PATH=/opt/at10.0/lib64/python3.5/site-packages \\\r\n    TF_CUDA_CLANG=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=7.0 \\\r\n    TF_CUDA_VERSION=9.2 \\\r\n    TF_CUDNN_VERSION=7 \\\r\n    TF_NCCL_VERSION=2 \\\r\n    TF_NEED_CUDA=1 \\\r\n    TF_NEED_OPENCL_SYCL=0 \\\r\n```\r\n\r\nIn my case, the lack of `PYTHON_LIB_PATH` caused the issue with numpy. A manual execution of the command with those env variable set solve the problem - however I cannot continue installation.\r\n\r\n### Source code / logs\r\n```\r\nSUBCOMMAND: # //tensorflow:tensorflow_python_api_gen [action 'Executing genrule //tensorflow:tensorflow_python_api_gen']\r\n(cd /ibm/gpfs-dataP/hpc_modules/rhel7-P9-2018-09-14/at10.0-based/deeplearning/tensorflow/tensorflow-v1.11.0_openmpi-3.1.2/bazel_tmp/_bazel_acm/89da28a486992b186bd01e39111a422f/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    CUDA_TOOLKIT_PATH=/usr/local/cuda-9.2 \\\r\n    CUDNN_INSTALL_PATH=/usr/local/cudnn-9.2-v7.2.1 \\\r\n    GCC_HOST_COMPILER_PATH=/opt/at10.0/bin/gcc \\\r\n    LD_LIBRARY_PATH=/usr/local/nccl-9.2-v2.2.13/lib:/opt/ibm/xlmass/9.1.0/lib:/usr/lib64/libibverbs:/hpc_modules/at10.0-based/mpi/openmpi-3.1.2/lib:/opt/at10.0/lib:/usr/local/cudnn-9.2-v7.2.1/lib64:/usr/local/cuda-9.2/extras/CUPTI/lib64:/usr/local/cuda-9.2/nvvm/lib64:/usr/lib64/nvidia:/usr/local/cuda-9.2/lib64:/usr/lib64/jna:/shared/lsf/10.1/linux3.10-glibc2.17-ppc64le/lib \\\r\n    NCCL_INSTALL_PATH=/usr/local/nccl-9.2-v2.2.13 \\\r\n    OMP_NUM_THREADS=1 \\\r\n    PATH=/hpc_modules/at10.0-based/deeplearning/tensorflow/tensorflow-v1.11.0_openmpi-3.1.2/bin:/hpc_modules/os-based/deeplearning/tensorflow/bazel-0.17.2/bin:/hpc_modules/at10.0-based/python-packages-3.5-mpi4py-3.0.0_openmpi-3.1.2/bin:/hpc_modules/at10.0-based/mpi/openmpi-3.1.2/bin:/hpc_modules/at10.0-based/python-packages-3.5/bin:/opt/at10.0/bin:/usr/local/cuda-9.2/nvvm/bin:/usr/local/cuda-9.2/bin:/usr/lib/jvm/java-openjdk/bin:/shared/lsf/10.1/linux3.10-glibc2.17-ppc64le/etc:/shared/lsf/10.1/linux3.10-glibc2.17-ppc64le/bin:/u/acm/bin:/usr/lib64/qt-3.3/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/ibutils/bin:/afs/zurich.ibm.com/usr/bin \\\r\n    PYTHONPATH=/hpc_modules/at10.0-based/deeplearning/tensorflow/tensorflow-v1.11.0_openmpi-3.1.2/lib64/python3.5/site-packages:/hpc_modules/at10.0-based/python-packages-3.5-mpi4py-3.0.0_openmpi-3.1.2/lib64/python3.5/site-packages:/hpc_modules/at10.0-based/python-packages-3.5-mpi4py-3.0.0_openmpi-3.1.2/lib/python3.5/site-packages:/hpc_modules/at10.0-based/python-packages-3.5/lib64/python3.5/site-packages:/hpc_modules/at10.0-based/python-packages-3.5/lib/python3.5/site-packages:/hpc_modules/at10.0-based/python-packages-3.5/lib64/python3.5/site-packages \\\r\n    PYTHON_BIN_PATH=/opt/at10.0/bin/python3.5 \\\r\n    PYTHON_LIB_PATH=/opt/at10.0/lib64/python3.5/site-packages \\\r\n    TF_CUDA_CLANG=0 \\\r\n    TF_CUDA_COMPUTE_CAPABILITIES=7.0 \\\r\n    TF_CUDA_VERSION=9.2 \\\r\n    TF_CUDNN_VERSION=7 \\\r\n    TF_NCCL_VERSION=2 \\\r\n    TF_NEED_CUDA=1 \\\r\n    TF_NEED_OPENCL_SYCL=0 \\\r\n  /bin/bash -c 'source external/bazel_tools/tools/genrule/genrule-setup.sh; bazel-out/host/bin/tensorflow/create_tensorflow.python_api --root_init_template=tensorflow/api_template.__init__.py --apidir=bazel-out/ppc-opt/genfiles/tensorflow --apiname=tensorflow --apiversion=1 --package=tensorflow.python --output_package=tensorflow bazel-out/ppc-opt/genfiles/tensorflow/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/app/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/bitwise/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/compat/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/data/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/debugging/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/distributions/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/dtypes/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/errors/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/feature_column/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/gfile/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/graph_util/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/image/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/io/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/initializers/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/activations/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/applications/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/applications/densenet/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/applications/inception_resnet_v2/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/applications/inception_v3/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/applications/mobilenet/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/applications/mobilenet_v2/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/applications/nasnet/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/applications/resnet50/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/applications/vgg16/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/applications/vgg19/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/applications/xception/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/backend/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/callbacks/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/constraints/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/datasets/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/datasets/boston_housing/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/datasets/cifar10/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/datasets/cifar100/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/datasets/fashion_mnist/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/datasets/imdb/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/datasets/mnist/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/datasets/reuters/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/estimator/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/initializers/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/layers/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/losses/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/metrics/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/models/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/optimizers/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/preprocessing/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/preprocessing/image/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/preprocessing/sequence/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/preprocessing/text/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/regularizers/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/utils/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/wrappers/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/keras/wrappers/scikit_learn/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/layers/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/linalg/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/logging/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/losses/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/manip/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/math/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/metrics/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/nn/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/nn/rnn_cell/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/profiler/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/python_io/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/quantization/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/resource_loader/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/strings/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/saved_model/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/saved_model/builder/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/saved_model/constants/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/saved_model/loader/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/saved_model/main_op/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/saved_model/signature_constants/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/saved_model/signature_def_utils/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/saved_model/tag_constants/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/saved_model/utils/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/sets/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/sparse/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/spectral/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/summary/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/sysconfig/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/test/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/train/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/train/queue_runner/__init__.py bazel-out/ppc-opt/genfiles/tensorflow/user_ops/__init__.py')\r\nSUBCOMMAND: # //tensorflow:tensorflow_python_api_gen [action 'Executing genrule //tensorflow:tensorflow_python_api_gen [for host]']\r\n(cd /ibm/gpfs-dataP/hpc_modules/rhel7-P9-2018-09-14/at10.0-based/deeplearning/tensorflow/tensorflow-v1.11.0_openmpi-3.1.2/bazel_tmp/_bazel_acm/89da28a486992b186bd01e39111a422f/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    LD_LIBRARY_PATH=/usr/local/nccl-9.2-v2.2.13/lib:/opt/ibm/xlmass/9.1.0/lib:/usr/lib64/libibverbs:/hpc_modules/at10.0-based/mpi/openmpi-3.1.2/lib:/opt/at10.0/lib:/usr/local/cudnn-9.2-v7.2.1/lib64:/usr/local/cuda-9.2/extras/CUPTI/lib64:/usr/local/cuda-9.2/nvvm/lib64:/usr/lib64/nvidia:/usr/local/cuda-9.2/lib64:/usr/lib64/jna:/shared/lsf/10.1/linux3.10-glibc2.17-ppc64le/lib \\\r\n    PATH=/hpc_modules/at10.0-based/deeplearning/tensorflow/tensorflow-v1.11.0_openmpi-3.1.2/bin:/hpc_modules/os-based/deeplearning/tensorflow/bazel-0.17.2/bin:/hpc_modules/at10.0-based/python-packages-3.5-mpi4py-3.0.0_openmpi-3.1.2/bin:/hpc_modules/at10.0-based/mpi/openmpi-3.1.2/bin:/hpc_modules/at10.0-based/python-packages-3.5/bin:/opt/at10.0/bin:/usr/local/cuda-9.2/nvvm/bin:/usr/local/cuda-9.2/bin:/usr/lib/jvm/java-openjdk/bin:/shared/lsf/10.1/linux3.10-glibc2.17-ppc64le/etc:/shared/lsf/10.1/linux3.10-glibc2.17-ppc64le/bin:/u/acm/bin:/usr/lib64/qt-3.3/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/ibutils/bin:/afs/zurich.ibm.com/usr/bin \\\r\n  /bin/bash -c 'source external/bazel_tools/tools/genrule/genrule-setup.sh; bazel-out/host/bin/tensorflow/create_tensorflow.python_api --root_init_template=tensorflow/api_template.__init__.py --apidir=bazel-out/host/genfiles/tensorflow --apiname=tensorflow --apiversion=1 --package=tensorflow.python --output_package=tensorflow bazel-out/host/genfiles/tensorflow/__init__.py bazel-out/host/genfiles/tensorflow/app/__init__.py bazel-out/host/genfiles/tensorflow/bitwise/__init__.py bazel-out/host/genfiles/tensorflow/compat/__init__.py bazel-out/host/genfiles/tensorflow/data/__init__.py bazel-out/host/genfiles/tensorflow/debugging/__init__.py bazel-out/host/genfiles/tensorflow/distributions/__init__.py bazel-out/host/genfiles/tensorflow/dtypes/__init__.py bazel-out/host/genfiles/tensorflow/errors/__init__.py bazel-out/host/genfiles/tensorflow/feature_column/__init__.py bazel-out/host/genfiles/tensorflow/gfile/__init__.py bazel-out/host/genfiles/tensorflow/graph_util/__init__.py bazel-out/host/genfiles/tensorflow/image/__init__.py bazel-out/host/genfiles/tensorflow/io/__init__.py bazel-out/host/genfiles/tensorflow/initializers/__init__.py bazel-out/host/genfiles/tensorflow/keras/__init__.py bazel-out/host/genfiles/tensorflow/keras/activations/__init__.py bazel-out/host/genfiles/tensorflow/keras/applications/__init__.py bazel-out/host/genfiles/tensorflow/keras/applications/densenet/__init__.py bazel-out/host/genfiles/tensorflow/keras/applications/inception_resnet_v2/__init__.py bazel-out/host/genfiles/tensorflow/keras/applications/inception_v3/__init__.py bazel-out/host/genfiles/tensorflow/keras/applications/mobilenet/__init__.py bazel-out/host/genfiles/tensorflow/keras/applications/mobilenet_v2/__init__.py bazel-out/host/genfiles/tensorflow/keras/applications/nasnet/__init__.py bazel-out/host/genfiles/tensorflow/keras/applications/resnet50/__init__.py bazel-out/host/genfiles/tensorflow/keras/applications/vgg16/__init__.py bazel-out/host/genfiles/tensorflow/keras/applications/vgg19/__init__.py bazel-out/host/genfiles/tensorflow/keras/applications/xception/__init__.py bazel-out/host/genfiles/tensorflow/keras/backend/__init__.py bazel-out/host/genfiles/tensorflow/keras/callbacks/__init__.py bazel-out/host/genfiles/tensorflow/keras/constraints/__init__.py bazel-out/host/genfiles/tensorflow/keras/datasets/__init__.py bazel-out/host/genfiles/tensorflow/keras/datasets/boston_housing/__init__.py bazel-out/host/genfiles/tensorflow/keras/datasets/cifar10/__init__.py bazel-out/host/genfiles/tensorflow/keras/datasets/cifar100/__init__.py bazel-out/host/genfiles/tensorflow/keras/datasets/fashion_mnist/__init__.py bazel-out/host/genfiles/tensorflow/keras/datasets/imdb/__init__.py bazel-out/host/genfiles/tensorflow/keras/datasets/mnist/__init__.py bazel-out/host/genfiles/tensorflow/keras/datasets/reuters/__init__.py bazel-out/host/genfiles/tensorflow/keras/estimator/__init__.py bazel-out/host/genfiles/tensorflow/keras/initializers/__init__.py bazel-out/host/genfiles/tensorflow/keras/layers/__init__.py bazel-out/host/genfiles/tensorflow/keras/losses/__init__.py bazel-out/host/genfiles/tensorflow/keras/metrics/__init__.py bazel-out/host/genfiles/tensorflow/keras/models/__init__.py bazel-out/host/genfiles/tensorflow/keras/optimizers/__init__.py bazel-out/host/genfiles/tensorflow/keras/preprocessing/__init__.py bazel-out/host/genfiles/tensorflow/keras/preprocessing/image/__init__.py bazel-out/host/genfiles/tensorflow/keras/preprocessing/sequence/__init__.py bazel-out/host/genfiles/tensorflow/keras/preprocessing/text/__init__.py bazel-out/host/genfiles/tensorflow/keras/regularizers/__init__.py bazel-out/host/genfiles/tensorflow/keras/utils/__init__.py bazel-out/host/genfiles/tensorflow/keras/wrappers/__init__.py bazel-out/host/genfiles/tensorflow/keras/wrappers/scikit_learn/__init__.py bazel-out/host/genfiles/tensorflow/layers/__init__.py bazel-out/host/genfiles/tensorflow/linalg/__init__.py bazel-out/host/genfiles/tensorflow/logging/__init__.py bazel-out/host/genfiles/tensorflow/losses/__init__.py bazel-out/host/genfiles/tensorflow/manip/__init__.py bazel-out/host/genfiles/tensorflow/math/__init__.py bazel-out/host/genfiles/tensorflow/metrics/__init__.py bazel-out/host/genfiles/tensorflow/nn/__init__.py bazel-out/host/genfiles/tensorflow/nn/rnn_cell/__init__.py bazel-out/host/genfiles/tensorflow/profiler/__init__.py bazel-out/host/genfiles/tensorflow/python_io/__init__.py bazel-out/host/genfiles/tensorflow/quantization/__init__.py bazel-out/host/genfiles/tensorflow/resource_loader/__init__.py bazel-out/host/genfiles/tensorflow/strings/__init__.py bazel-out/host/genfiles/tensorflow/saved_model/__init__.py bazel-out/host/genfiles/tensorflow/saved_model/builder/__init__.py bazel-out/host/genfiles/tensorflow/saved_model/constants/__init__.py bazel-out/host/genfiles/tensorflow/saved_model/loader/__init__.py bazel-out/host/genfiles/tensorflow/saved_model/main_op/__init__.py bazel-out/host/genfiles/tensorflow/saved_model/signature_constants/__init__.py bazel-out/host/genfiles/tensorflow/saved_model/signature_def_utils/__init__.py bazel-out/host/genfiles/tensorflow/saved_model/tag_constants/__init__.py bazel-out/host/genfiles/tensorflow/saved_model/utils/__init__.py bazel-out/host/genfiles/tensorflow/sets/__init__.py bazel-out/host/genfiles/tensorflow/sparse/__init__.py bazel-out/host/genfiles/tensorflow/spectral/__init__.py bazel-out/host/genfiles/tensorflow/summary/__init__.py bazel-out/host/genfiles/tensorflow/sysconfig/__init__.py bazel-out/host/genfiles/tensorflow/test/__init__.py bazel-out/host/genfiles/tensorflow/train/__init__.py bazel-out/host/genfiles/tensorflow/train/queue_runner/__init__.py bazel-out/host/genfiles/tensorflow/user_ops/__init__.py')\r\nERROR: /ibm/gpfs-dataP/hpc_modules/rhel7-P9-2018-09-14/at10.0-based/deeplearning/tensorflow/tensorflow-v1.11.0_openmpi-3.1.2/tensorflow-git/tensorflow/BUILD:592:1: Executing genrule //tensorflow:tensorflow_python_api_gen failed (Exit 1): bash failed: error executing command\r\n  (cd /ibm/gpfs-dataP/hpc_modules/rhel7-P9-2018-09-14/at10.0-based/deeplearning/tensorflow/tensorflow-v1.11.0_openmpi-3.1.2/bazel_tmp/_bazel_acm/89da28a486992b186bd01e39111a422f/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    LD_LIBRARY_PATH=/usr/local/nccl-9.2-v2.2.13/lib:/opt/ibm/xlmass/9.1.0/lib:/usr/lib64/libibverbs:/hpc_modules/at10.0-based/mpi/openmpi-3.1.2/lib:/opt/at10.0/lib:/usr/local/cudnn-9.2-v7.2.1/lib64:/usr/local/cuda-9.2/extras/CUPTI/lib64:/usr/local/cuda-9.2/nvvm/lib64:/usr/lib64/nvidia:/usr/local/cuda-9.2/lib64:/usr/lib64/jna:/shared/lsf/10.1/linux3.10-glibc2.17-ppc64le/lib \\\r\n    PATH=/hpc_modules/at10.0-based/deeplearning/tensorflow/tensorflow-v1.11.0_openmpi-3.1.2/bin:/hpc_modules/os-based/deeplearning/tensorflow/bazel-0.17.2/bin:/hpc_modules/at10.0-based/python-packages-3.5-mpi4py-3.0.0_openmpi-3.1.2/bin:/hpc_modules/at10.0-based/mpi/openmpi-3.1.2/bin:/hpc_modules/at10.0-based/python-packages-3.5/bin:/opt/at10.0/bin:/usr/local/cuda-9.2/nvvm/bin:/usr/local/cuda-9.2/bin:/usr/lib/jvm/java-openjdk/bin:/shared/lsf/10.1/linux3.10-glibc2.17-ppc64le/etc:/shared/lsf/10.1/linux3.10-glibc2.17-ppc64le/bin:/u/acm/bin:/usr/lib64/qt-3.3/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/opt/ibutils/bin:/afs/zurich.ibm.com/usr/bin \\\r\n  /bin/bash -c 'source external/bazel_tools/tools/genrule/genrule-setup.sh; bazel-out/host/bin/tensorflow/create_tensorflow.python_api --root_init_template=tensorflow/api_template.__init__.py --apidir=bazel-out/host/genfiles/tensorflow --apiname=tensorflow --apiversion=1 --package=tensorflow.python --output_package=tensorflow bazel-out/host/genfiles/tensorflow/__init__.py bazel-out/host/genfiles/tensorflow/app/__init__.py bazel-out/host/genfiles/tensorflow/bitwise/__init__.py bazel-out/host/genfiles/tensorflow/compat/__init__.py bazel-out/host/genfiles/tensorflow/data/__init__.py bazel-out/host/genfiles/tensorflow/debugging/__init__.py bazel-out/host/genfiles/tensorflow/distributions/__init__.py bazel-out/host/genfiles/tensorflow/dtypes/__init__.py bazel-out/host/genfiles/tensorflow/errors/__init__.py bazel-out/host/genfiles/tensorflow/feature_column/__init__.py bazel-out/host/genfiles/tensorflow/gfile/__init__.py bazel-out/host/genfiles/tensorflow/graph_util/__init__.py bazel-out/host/genfiles/tensorflow/image/__init__.py bazel-out/host/genfiles/tensorflow/io/__init__.py bazel-out/host/genfiles/tensorflow/initializers/__init__.py bazel-out/host/genfiles/tensorflow/keras/__init__.py bazel-out/host/genfiles/tensorflow/keras/activations/__init__.py bazel-out/host/genfiles/tensorflow/keras/applications/__init__.py bazel-out/host/genfiles/tensorflow/keras/applications/densenet/__init__.py bazel-out/host/genfiles/tensorflow/keras/applications/inception_resnet_v2/__init__.py bazel-out/host/genfiles/tensorflow/keras/applications/inception_v3/__init__.py bazel-out/host/genfiles/tensorflow/keras/applications/mobilenet/__init__.py bazel-out/host/genfiles/tensorflow/keras/applications/mobilenet_v2/__init__.py bazel-out/host/genfiles/tensorflow/keras/applications/nasnet/__init__.py bazel-out/host/genfiles/tensorflow/keras/applications/resnet50/__init__.py bazel-out/host/genfiles/tensorflow/keras/applications/vgg16/__init__.py bazel-out/host/genfiles/tensorflow/keras/applications/vgg19/__init__.py bazel-out/host/genfiles/tensorflow/keras/applications/xception/__init__.py bazel-out/host/genfiles/tensorflow/keras/backend/__init__.py bazel-out/host/genfiles/tensorflow/keras/callbacks/__init__.py bazel-out/host/genfiles/tensorflow/keras/constraints/__init__.py bazel-out/host/genfiles/tensorflow/keras/datasets/__init__.py bazel-out/host/genfiles/tensorflow/keras/datasets/boston_housing/__init__.py bazel-out/host/genfiles/tensorflow/keras/datasets/cifar10/__init__.py bazel-out/host/genfiles/tensorflow/keras/datasets/cifar100/__init__.py bazel-out/host/genfiles/tensorflow/keras/datasets/fashion_mnist/__init__.py bazel-out/host/genfiles/tensorflow/keras/datasets/imdb/__init__.py bazel-out/host/genfiles/tensorflow/keras/datasets/mnist/__init__.py bazel-out/host/genfiles/tensorflow/keras/datasets/reuters/__init__.py bazel-out/host/genfiles/tensorflow/keras/estimator/__init__.py bazel-out/host/genfiles/tensorflow/keras/initializers/__init__.py bazel-out/host/genfiles/tensorflow/keras/layers/__init__.py bazel-out/host/genfiles/tensorflow/keras/losses/__init__.py bazel-out/host/genfiles/tensorflow/keras/metrics/__init__.py bazel-out/host/genfiles/tensorflow/keras/models/__init__.py bazel-out/host/genfiles/tensorflow/keras/optimizers/__init__.py bazel-out/host/genfiles/tensorflow/keras/preprocessing/__init__.py bazel-out/host/genfiles/tensorflow/keras/preprocessing/image/__init__.py bazel-out/host/genfiles/tensorflow/keras/preprocessing/sequence/__init__.py bazel-out/host/genfiles/tensorflow/keras/preprocessing/text/__init__.py bazel-out/host/genfiles/tensorflow/keras/regularizers/__init__.py bazel-out/host/genfiles/tensorflow/keras/utils/__init__.py bazel-out/host/genfiles/tensorflow/keras/wrappers/__init__.py bazel-out/host/genfiles/tensorflow/keras/wrappers/scikit_learn/__init__.py bazel-out/host/genfiles/tensorflow/layers/__init__.py bazel-out/host/genfiles/tensorflow/linalg/__init__.py bazel-out/host/genfiles/tensorflow/logging/__init__.py bazel-out/host/genfiles/tensorflow/losses/__init__.py bazel-out/host/genfiles/tensorflow/manip/__init__.py bazel-out/host/genfiles/tensorflow/math/__init__.py bazel-out/host/genfiles/tensorflow/metrics/__init__.py bazel-out/host/genfiles/tensorflow/nn/__init__.py bazel-out/host/genfiles/tensorflow/nn/rnn_cell/__init__.py bazel-out/host/genfiles/tensorflow/profiler/__init__.py bazel-out/host/genfiles/tensorflow/python_io/__init__.py bazel-out/host/genfiles/tensorflow/quantization/__init__.py bazel-out/host/genfiles/tensorflow/resource_loader/__init__.py bazel-out/host/genfiles/tensorflow/strings/__init__.py bazel-out/host/genfiles/tensorflow/saved_model/__init__.py bazel-out/host/genfiles/tensorflow/saved_model/builder/__init__.py bazel-out/host/genfiles/tensorflow/saved_model/constants/__init__.py bazel-out/host/genfiles/tensorflow/saved_model/loader/__init__.py bazel-out/host/genfiles/tensorflow/saved_model/main_op/__init__.py bazel-out/host/genfiles/tensorflow/saved_model/signature_constants/__init__.py bazel-out/host/genfiles/tensorflow/saved_model/signature_def_utils/__init__.py bazel-out/host/genfiles/tensorflow/saved_model/tag_constants/__init__.py bazel-out/host/genfiles/tensorflow/saved_model/utils/__init__.py bazel-out/host/genfiles/tensorflow/sets/__init__.py bazel-out/host/genfiles/tensorflow/sparse/__init__.py bazel-out/host/genfiles/tensorflow/spectral/__init__.py bazel-out/host/genfiles/tensorflow/summary/__init__.py bazel-out/host/genfiles/tensorflow/sysconfig/__init__.py bazel-out/host/genfiles/tensorflow/test/__init__.py bazel-out/host/genfiles/tensorflow/train/__init__.py bazel-out/host/genfiles/tensorflow/train/queue_runner/__init__.py bazel-out/host/genfiles/tensorflow/user_ops/__init__.py')\r\nTraceback (most recent call last):\r\n  File \"/ibm/gpfs-dataP/hpc_modules/rhel7-P9-2018-09-14/at10.0-based/deeplearning/tensorflow/tensorflow-v1.11.0_openmpi-3.1.2/bazel_tmp/_bazel_acm/89da28a486992b186bd01e39111a422f/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 27, in <module>\r\n    from tensorflow.python.tools.api.generator import doc_srcs\r\n  File \"/ibm/gpfs-dataP/hpc_modules/rhel7-P9-2018-09-14/at10.0-based/deeplearning/tensorflow/tensorflow-v1.11.0_openmpi-3.1.2/bazel_tmp/_bazel_acm/89da28a486992b186bd01e39111a422f/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api.runfiles/org_tensorflow/tensorflow/python/__init__.py\", line 47, in <module>\r\n    import numpy as np\r\nImportError: No module named 'numpy'```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22810", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22810/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22810/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22810/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22810", "id": 367620400, "node_id": "MDU6SXNzdWUzNjc2MjA0MDA=", "number": 22810, "title": "Segfault when loading libtensorflow_cc.so for a second time", "user": {"login": "samhodge", "id": 86946, "node_id": "MDQ6VXNlcjg2OTQ2", "avatar_url": "https://avatars0.githubusercontent.com/u/86946?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samhodge", "html_url": "https://github.com/samhodge", "followers_url": "https://api.github.com/users/samhodge/followers", "following_url": "https://api.github.com/users/samhodge/following{/other_user}", "gists_url": "https://api.github.com/users/samhodge/gists{/gist_id}", "starred_url": "https://api.github.com/users/samhodge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samhodge/subscriptions", "organizations_url": "https://api.github.com/users/samhodge/orgs", "repos_url": "https://api.github.com/users/samhodge/repos", "events_url": "https://api.github.com/users/samhodge/events{/privacy}", "received_events_url": "https://api.github.com/users/samhodge/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2018-10-08T02:20:23Z", "updated_at": "2019-05-02T09:33:27Z", "closed_at": null, "author_association": "NONE", "body": "\r\n\r\nSee\r\n\r\nhttps://stackoverflow.com/questions/52683649/libtensorflow-cc-so-initialised-a-second-time-causes-segfault\r\n\r\n### Source code / logs\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\nPlease go to Stack Overflow for help and support:\r\n\r\nhttps://stackoverflow.com/questions/tagged/tensorflow\r\n\r\nIf you open a GitHub issue, here is our policy:\r\n\r\n1. It must be a bug, a feature request, or a significant problem with documentation (for small docs fixes please send a PR instead).\r\n2. The form below must be filled out.\r\n3. It shouldn't be a TensorBoard issue. Those go [here](https://github.com/tensorflow/tensorboard/issues).\r\n\r\n**Here's why we have that policy**: TensorFlow developers respond to issues. We want to focus on work that benefits the whole community, e.g., fixing bugs and adding features. Support only helps individuals. GitHub also notifies thousands of people when issues are filed. We want them to see you communicating an interesting problem, rather than being redirected to Stack Overflow.\r\n\r\n------------------------\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\n- **TensorFlow installed from (source or binary)**:\r\n- **TensorFlow version (use command below)**:\r\n- **Python version**:\r\n- **Bazel version (if compiling from source)**:\r\n- **GCC/Compiler version (if compiling from source)**:\r\n- **CUDA/cuDNN version**:\r\n- **GPU model and memory**:\r\n- **Exact command to reproduce**:\r\n\r\nYou can collect some of this information using our environment capture script:\r\n\r\nhttps://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh\r\n\r\nYou can obtain the TensorFlow version with\r\n\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n### Describe the problem\r\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\r\n\r\n### Source code / logs\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22803", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22803/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22803/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22803/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22803", "id": 367556139, "node_id": "MDU6SXNzdWUzNjc1NTYxMzk=", "number": 22803, "title": "Model converted to TFLite always returns NaN as output.", "user": {"login": "sercant", "id": 6319501, "node_id": "MDQ6VXNlcjYzMTk1MDE=", "avatar_url": "https://avatars0.githubusercontent.com/u/6319501?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sercant", "html_url": "https://github.com/sercant", "followers_url": "https://api.github.com/users/sercant/followers", "following_url": "https://api.github.com/users/sercant/following{/other_user}", "gists_url": "https://api.github.com/users/sercant/gists{/gist_id}", "starred_url": "https://api.github.com/users/sercant/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sercant/subscriptions", "organizations_url": "https://api.github.com/users/sercant/orgs", "repos_url": "https://api.github.com/users/sercant/repos", "events_url": "https://api.github.com/users/sercant/events{/privacy}", "received_events_url": "https://api.github.com/users/sercant/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "karimnosseir", "id": 44206880, "node_id": "MDQ6VXNlcjQ0MjA2ODgw", "avatar_url": "https://avatars1.githubusercontent.com/u/44206880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karimnosseir", "html_url": "https://github.com/karimnosseir", "followers_url": "https://api.github.com/users/karimnosseir/followers", "following_url": "https://api.github.com/users/karimnosseir/following{/other_user}", "gists_url": "https://api.github.com/users/karimnosseir/gists{/gist_id}", "starred_url": "https://api.github.com/users/karimnosseir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karimnosseir/subscriptions", "organizations_url": "https://api.github.com/users/karimnosseir/orgs", "repos_url": "https://api.github.com/users/karimnosseir/repos", "events_url": "https://api.github.com/users/karimnosseir/events{/privacy}", "received_events_url": "https://api.github.com/users/karimnosseir/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "karimnosseir", "id": 44206880, "node_id": "MDQ6VXNlcjQ0MjA2ODgw", "avatar_url": "https://avatars1.githubusercontent.com/u/44206880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karimnosseir", "html_url": "https://github.com/karimnosseir", "followers_url": "https://api.github.com/users/karimnosseir/followers", "following_url": "https://api.github.com/users/karimnosseir/following{/other_user}", "gists_url": "https://api.github.com/users/karimnosseir/gists{/gist_id}", "starred_url": "https://api.github.com/users/karimnosseir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karimnosseir/subscriptions", "organizations_url": "https://api.github.com/users/karimnosseir/orgs", "repos_url": "https://api.github.com/users/karimnosseir/repos", "events_url": "https://api.github.com/users/karimnosseir/events{/privacy}", "received_events_url": "https://api.github.com/users/karimnosseir/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 16, "created_at": "2018-10-07T13:47:34Z", "updated_at": "2020-03-05T12:44:20Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: MacOS 10.13.6\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: --\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**:  v1.10.0-12-g4dcfddc5d1 1.10.1\r\n- **Python version**: 3.6.5\r\n- **Bazel version (if compiling from source)**: --\r\n- **GCC/Compiler version (if compiling from source)**: --\r\n- **CUDA/cuDNN version**: --\r\n- **GPU model and memory**: Intel Iris Plus Graphics 650 1536 MB\r\n- **Exact command to reproduce**: `python3 test.py`\r\n\r\n### Describe the problem\r\nI have been trying to convert a frozen graph trained using [this repo](https://github.com/GeorgeSeif/Semantic-Segmentation-Suite) for using on android with TFLite. Trained model uses MobileNetV2 as frontend and [Mobile UNet for Semantic Segmentation](https://arxiv.org/abs/1704.04861) as the model. The problem I am facing is: the frozen pb graph segments the image correctly but TFLite converted model returns all `nan` for the output. To try the problem I wrote the following script. The model is converted without any errors or warnings, but the output is not correct. Do you have any idea what might be causing this?\r\n\r\nNote: converted model is also returning NaNs on android device.\r\n\r\n**Frozen graph**: [output_graph.pb](https://drive.google.com/file/d/1qGwD8h5ub0HjtO-Cc8Zd-HU6Uv-t9apF/view?usp=sharing)\r\n\r\n### Source code / logs\r\n\r\n**test.py**\r\n```python\r\nimport tensorflow as tf\r\nimport numpy as np\r\nimport cv2\r\nfrom tensorflow.python.platform import gfile\r\nfrom tensorflow.contrib.lite.python.convert_saved_model import set_tensor_shapes\r\n\r\nsess = tf.Session()\r\n\r\n# load graph\r\nwith gfile.FastGFile('output_graph.pb', 'rb') as f:\r\n    graph_def = tf.GraphDef()\r\ngraph_def.ParseFromString(f.read())\r\nsess.graph.as_default()\r\ntf.import_graph_def(graph_def, name='')\r\n\r\n# get tensors\r\ninput_tensor = sess.graph.get_tensor_by_name('Placeholder:0')\r\noutput_tensor = sess.graph.get_tensor_by_name('logits/Conv2D:0')\r\n\r\n# generate random image\r\ninput_image = np.array(np.random.random_sample(\r\n    [1, 128, 128, 3]), dtype=np.float32)\r\n\r\n# run the model with tf\r\noutput_image = sess.run(output_tensor, feed_dict={input_tensor: input_image})\r\n\r\n# print tf output\r\nprint('--- Tensorflow output ---')\r\nprint(output_image)\r\nprint('-------------------------')\r\n\r\n# set shapes\r\ninput_tensor.set_shape([1, 128, 128, 3])\r\noutput_tensor.set_shape([1, 128, 128, 32])\r\n\r\n# convert model\r\nconverter = tf.contrib.lite.TocoConverter.from_session(\r\n    sess, [input_tensor], [output_tensor])\r\ntflite_model = converter.convert()\r\n\r\n# Prepare interpreter\r\ninterpreter = tf.contrib.lite.Interpreter(model_content=tflite_model)\r\ninterpreter.allocate_tensors()\r\n\r\ninput_details = interpreter.get_input_details()\r\noutput_details = interpreter.get_output_details()\r\n\r\n# set input data\r\ninterpreter.set_tensor(input_details[0]['index'], input_image)\r\n\r\n# run model on interpreter\r\ninterpreter.invoke()\r\n\r\n# retrive output\r\noutput_data = interpreter.get_tensor(output_details[0]['index'])\r\n\r\n# print tflite output\r\nprint('--- TFLite output ---')\r\nprint(output_data)\r\nprint('---------------------')\r\n```\r\n\r\n**output**\r\n```shell\r\n--- Tensorflow output ---\r\n[[[[-14.484754   -14.454916    -3.9344878  ... -10.294399\r\n     -2.837898    -8.190185  ]\r\n   [-14.120294   -10.590508    -4.032942   ...  -6.7745924\r\n     -0.4497184   -9.78646   ]\r\n   [-14.561665   -10.49988     -8.065053   ...  -7.422716\r\n     -0.7991432  -10.160792  ]\r\n   ...\r\n   [-13.12197     -7.3976164   -7.1669674  ...  -9.533363\r\n     -2.0361094  -10.951963  ]\r\n   [-15.041047    -7.3879066   -6.724542   ... -11.897878\r\n     -2.1202648  -13.670592  ]\r\n   [-14.483544   -10.037312    -6.356632   ... -12.075281\r\n     -2.2860763  -10.284541  ]]\r\n\r\n  [[-10.372202   -13.09114     -3.6517806  ...  -7.623592\r\n     -1.8009435   -6.817739  ]\r\n   [-10.72727    -10.886565    -5.621975   ...  -7.8185344\r\n     -1.4768337  -10.389865  ]\r\n   [-11.611484   -10.158413    -7.931344   ...  -4.938987\r\n     -0.23626254  -8.830031  ]\r\n   ...\r\n   [-12.590868    -6.102834   -10.619679   ...  -9.990441\r\n     -1.0927511  -10.764243  ]\r\n   [-12.30341     -4.7649236   -6.600345   ...  -9.458132\r\n     -0.8608778  -12.198781  ]\r\n   [-11.649162    -6.2056537   -5.922945   ... -10.207803\r\n     -1.5887291   -9.819743  ]]\r\n\r\n  [[-11.40545    -13.755798    -6.9160714  ... -11.7735195\r\n     -3.3357754  -11.139454  ]\r\n   [-11.398698   -11.785369    -6.5561953  ...  -9.794318\r\n     -2.8272014  -11.654141  ]\r\n   [ -9.548821    -7.3276024   -8.640192   ...  -4.349879\r\n      0.14261375  -7.0007625 ]\r\n   ...\r\n   [-12.497658    -5.8748426   -9.083981   ...  -9.841493\r\n     -1.4732579  -11.357761  ]\r\n   [-14.517144    -5.2391934   -8.496638   ... -10.834668\r\n     -2.6033173  -13.944796  ]\r\n   [-14.292226    -7.0837607   -6.3621516  ... -10.551426\r\n     -3.6190045  -12.224428  ]]\r\n\r\n  ...\r\n\r\n  [[ -6.1242228  -14.730902    -6.034355   ...  -5.2220926\r\n     -1.1160429   -2.2097938 ]\r\n   [ -5.003286   -16.216772    -5.28262    ...  -5.2270694\r\n     -1.7447093   -4.245701  ]\r\n   [ -5.595118   -15.978978    -4.214302   ...  -5.4203877\r\n     -1.8398296   -4.396698  ]\r\n   ...\r\n   [-13.178917   -13.012176   -10.450902   ... -15.064126\r\n     -1.9914117   -9.5184765 ]\r\n   [-10.992667    -8.671063    -6.456934   ... -14.054223\r\n     -1.4051182   -9.887496  ]\r\n   [ -9.728466   -10.335494    -7.3331285  ... -10.754501\r\n     -1.7173084   -4.671226  ]]\r\n\r\n  [[ -5.4983754  -15.449182    -5.7204423  ...  -4.4113154\r\n     -1.0589103   -2.6990566 ]\r\n   [ -5.384841   -16.741693    -5.5674496  ...  -5.684756\r\n     -1.8891927   -4.65452   ]\r\n   [ -5.7909193  -16.244637    -4.5293765  ...  -6.4048567\r\n     -2.3706574   -4.982708  ]\r\n   ...\r\n   [-10.004818   -11.296059    -7.158481   ... -10.9329\r\n     -2.0753372   -8.129092  ]\r\n   [ -7.942011    -8.787835    -2.8869028  ... -10.7461605\r\n     -1.7351687   -7.8243003 ]\r\n   [ -9.368582   -11.195904    -5.3443894  ...  -8.967132\r\n     -1.5083878   -5.205722  ]]\r\n\r\n  [[ -7.6940765  -15.492795    -4.6488175  ...  -5.7006836\r\n     -1.3711176   -3.7699785 ]\r\n   [ -5.243174   -15.9268875   -5.07713    ...  -3.642994\r\n     -1.4748344   -4.1258245 ]\r\n   [ -4.8627806  -13.911514    -4.372596   ...  -2.4015875\r\n     -1.4164882   -3.6560988 ]\r\n   ...\r\n   [ -9.049875   -12.410313    -5.53057    ...  -8.292001\r\n     -2.442209    -4.6609883 ]\r\n   [ -7.18582    -11.061987    -3.3339026  ...  -7.413499\r\n     -2.0413182   -5.4470387 ]\r\n   [ -9.58725    -13.576278    -5.9882216  ...  -8.204617\r\n     -2.0788593   -5.216848  ]]]]\r\n-------------------------\r\n--- TFLite output ---\r\n[[[[nan nan nan ... nan nan nan]\r\n   [nan nan nan ... nan nan nan]\r\n   [nan nan nan ... nan nan nan]\r\n   ...\r\n   [nan nan nan ... nan nan nan]\r\n   [nan nan nan ... nan nan nan]\r\n   [nan nan nan ... nan nan nan]]\r\n\r\n  [[nan nan nan ... nan nan nan]\r\n   [nan nan nan ... nan nan nan]\r\n   [nan nan nan ... nan nan nan]\r\n   ...\r\n   [nan nan nan ... nan nan nan]\r\n   [nan nan nan ... nan nan nan]\r\n   [nan nan nan ... nan nan nan]]\r\n\r\n  [[nan nan nan ... nan nan nan]\r\n   [nan nan nan ... nan nan nan]\r\n   [nan nan nan ... nan nan nan]\r\n   ...\r\n   [nan nan nan ... nan nan nan]\r\n   [nan nan nan ... nan nan nan]\r\n   [nan nan nan ... nan nan nan]]\r\n\r\n  ...\r\n\r\n  [[nan nan nan ... nan nan nan]\r\n   [nan nan nan ... nan nan nan]\r\n   [nan nan nan ... nan nan nan]\r\n   ...\r\n   [nan nan nan ... nan nan nan]\r\n   [nan nan nan ... nan nan nan]\r\n   [nan nan nan ... nan nan nan]]\r\n\r\n  [[nan nan nan ... nan nan nan]\r\n   [nan nan nan ... nan nan nan]\r\n   [nan nan nan ... nan nan nan]\r\n   ...\r\n   [nan nan nan ... nan nan nan]\r\n   [nan nan nan ... nan nan nan]\r\n   [nan nan nan ... nan nan nan]]\r\n\r\n  [[nan nan nan ... nan nan nan]\r\n   [nan nan nan ... nan nan nan]\r\n   [nan nan nan ... nan nan nan]\r\n   ...\r\n   [nan nan nan ... nan nan nan]\r\n   [nan nan nan ... nan nan nan]\r\n   [nan nan nan ... nan nan nan]]]]\r\n---------------------\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22770", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22770/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22770/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22770/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22770", "id": 367280602, "node_id": "MDU6SXNzdWUzNjcyODA2MDI=", "number": 22770, "title": "crash via tf_should_use format_stack", "user": {"login": "albertz", "id": 59132, "node_id": "MDQ6VXNlcjU5MTMy", "avatar_url": "https://avatars0.githubusercontent.com/u/59132?v=4", "gravatar_id": "", "url": "https://api.github.com/users/albertz", "html_url": "https://github.com/albertz", "followers_url": "https://api.github.com/users/albertz/followers", "following_url": "https://api.github.com/users/albertz/following{/other_user}", "gists_url": "https://api.github.com/users/albertz/gists{/gist_id}", "starred_url": "https://api.github.com/users/albertz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/albertz/subscriptions", "organizations_url": "https://api.github.com/users/albertz/orgs", "repos_url": "https://api.github.com/users/albertz/repos", "events_url": "https://api.github.com/users/albertz/events{/privacy}", "received_events_url": "https://api.github.com/users/albertz/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 17, "created_at": "2018-10-05T16:22:08Z", "updated_at": "2018-12-11T18:53:27Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: no\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 16.04\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: -\r\n- **TensorFlow installed from (source or binary)**: binary (pip)\r\n- **TensorFlow version (use command below)**: v1.11.0-0-gc19e29306c 1.11.0\r\n- **Python version**: 3.6.3\r\n- **Bazel version (if compiling from source)**: -\r\n- **GCC/Compiler version (if compiling from source)**: -\r\n- **CUDA/cuDNN version**: 8.0\r\n- **GPU model and memory**: GTX 680 (will not be used)\r\n- **Exact command to reproduce**: -\r\n\r\n\r\n### Describe the problem\r\nWhen `__repr__` is called on some TF objects at the wrong time, this can lead to a crash (seg fault; see below). There can be various reasons why this can happen, e.g. when a debugger shows the locals of all threads. My case was this, but I think this doesn't matter:\r\n\r\n- Via [better_exchook](https://github.com/albertz/py_better_exchook), I extended the output of `sys.excepthook` and some `traceback` functions to print out some local vars and their `__repr__` output. There is something similar for IPython.\r\n- I created some `tf.TensorArray` and called `unstack` and I did not use the result value. That `unstack` method is wrapped via `should_use_result`.\r\n- The Python GC called the `_TFShouldUseHelper.__del__` function at some random point, and this triggered the stack formating and then the call some some `__repr__` of some TF objects.\r\n\r\nOriginally, this happened at exit, and I thought that probably it's just not safe at exit to touch any existing TF objects. So I fixed that case in better_exchook: It will not print any vars at exit. A test case to reproduce exactly that case is [here](https://github.com/albertz/playground/blob/master/test-tf111-tfshoulduse-crash.py).\r\n\r\nHowever, now I get the same crash also not at exit but at another random point (see stack below). It will be hard to come up with a test case for this, as it is very non-deterministic when exactly the GC runs and calls the `__del__` function.\r\n\r\n\r\n\r\n### Source code / logs\r\n\r\n```\r\nCurrent thread 0x00007f14209e8700 (most recent call first):\r\n  File \"/u/zeyer/py-envs/py36-tf111/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1897 in name\r\n  File \"/u/zeyer/py-envs/py36-tf111/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 352 in name\r\n  File \"/u/zeyer/py-envs/py36-tf111/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 614 in __repr__\r\n  File \"/u/zeyer/setups/librispeech/2018-02-26--att/returnn/tests/../better_exchook.py\", line 250 in pretty_print\r\n  File \"/u/zeyer/setups/librispeech/2018-02-26--att/returnn/tests/../better_exchook.py\", line 487 in format_py_obj\r\n  File \"/u/zeyer/setups/librispeech/2018-02-26--att/returnn/tests/../better_exchook.py\", line 571 in <lambda>\r\n  File \"/u/zeyer/setups/librispeech/2018-02-26--att/returnn/tests/../better_exchook.py\", line 522 in _trySet\r\n  File \"/u/zeyer/setups/librispeech/2018-02-26--att/returnn/tests/../better_exchook.py\", line 571 in format_tb\r\n  File \"/u/zeyer/.linuxbrew/opt/python3/lib/python3.6/traceback.py\", line 37 in format_list\r\n  File \"/u/zeyer/.linuxbrew/opt/python3/lib/python3.6/traceback.py\", line 193 in format_stack\r\n  File \"/u/zeyer/py-envs/py36-tf111/lib/python3.6/site-packages/tensorflow/python/util/tf_should_use.py\", line 60 in __del__\r\n  File \"/u/zeyer/py-envs/py36-tf111/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 81 in __init__\r\n  File \"/u/zeyer/py-envs/py36-tf111/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 4181 in _add_device_to_stack\r\n  File \"/u/zeyer/py-envs/py36-tf111/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 4243 in device\r\n  File \"/u/zeyer/.linuxbrew/opt/python3/lib/python3.6/contextlib.py\", line 81 in __enter__\r\n  File \"/u/zeyer/py-envs/py36-tf111/lib/python3.6/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 3366 in _GroupControlDeps\r\n  File \"/u/zeyer/py-envs/py36-tf111/lib/python3.6/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 3415 in group\r\n  File \"/u/zeyer/py-envs/py36-tf111/lib/python3.6/site-packages/tensorflow/python/ops/control_flow_ops.py\", line 3486 in tuple\r\n  File \"/u/zeyer/py-envs/py36-tf111/lib/python3.6/site-packages/tensorflow/python/ops/gradients_impl.py\", line 791 in _GradientsHelper\r\n  File \"/u/zeyer/py-envs/py36-tf111/lib/python3.6/site-packages/tensorflow/python/ops/gradients_impl.py\", line 596 in gradients\r\n  File \"/u/zeyer/py-envs/py36-tf111/lib/python3.6/site-packages/tensorflow/python/training/optimizer.py\", line 517 in compute_gradients\r\n  File \"/u/zeyer/py-envs/py36-tf111/lib/python3.6/site-packages/tensorflow/python/training/optimizer.py\", line 401 in minimize\r\n  File \"tests/test_TFNetworkRecLayer.py\", line 219 in test_rhn_nan\r\n  File \"tests/test_TFNetworkRecLayer.py\", line 2175 in <module>\r\n```\r\n\r\n\"ops.py\", line 1897 in name, that is this code:\r\n\r\n```\r\n  @property\r\n  def name(self):\r\n    \"\"\"The full name of this operation.\"\"\"\r\n    return c_api.TF_OperationName(self._c_op)\r\n```\r\n\r\nI often also see this just before the crash:\r\n\r\n    pure virtual method called\r\n\r\nA Travis log with this crash can also be seen [here](https://travis-ci.org/rwth-i6/returnn/jobs/437693971), or [here](https://travis-ci.org/rwth-i6/returnn/jobs/437716636).\r\n\r\nThe C backtrace is this:\r\n\r\n```\r\n/lib/x86_64-linux-gnu/libpthread.so.0(raise+0x29)[0x7f7e8df1a269]\r\n/lib/x86_64-linux-gnu/libpthread.so.0(+0x11390)[0x7f7e8df1a390]\r\n/u/zeyer/py-envs/py36-tf111/lib/python3.6/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so(TF_OperationName+0xa)[0x7f7e5ccc0eca]\r\n/u/zeyer/py-envs/py36-tf111/lib/python3.6/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so(+0x1982264)[0x7f7e5ca78264]\r\n/u/zeyer/.linuxbrew/Cellar/python3/3.6.3/lib/libpython3.6m.so.1.0(_PyCFunction_FastCallDict+0x209)[0x7f7e8e1f61c9]\r\n...\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22766", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22766/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22766/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22766/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22766", "id": 367220746, "node_id": "MDU6SXNzdWUzNjcyMjA3NDY=", "number": 22766, "title": "nvcc error: string_view.h: constexpr function return is non-constant", "user": {"login": "albertz", "id": 59132, "node_id": "MDQ6VXNlcjU5MTMy", "avatar_url": "https://avatars0.githubusercontent.com/u/59132?v=4", "gravatar_id": "", "url": "https://api.github.com/users/albertz", "html_url": "https://github.com/albertz", "followers_url": "https://api.github.com/users/albertz/followers", "following_url": "https://api.github.com/users/albertz/following{/other_user}", "gists_url": "https://api.github.com/users/albertz/gists{/gist_id}", "starred_url": "https://api.github.com/users/albertz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/albertz/subscriptions", "organizations_url": "https://api.github.com/users/albertz/orgs", "repos_url": "https://api.github.com/users/albertz/repos", "events_url": "https://api.github.com/users/albertz/events{/privacy}", "received_events_url": "https://api.github.com/users/albertz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2018-10-05T13:50:59Z", "updated_at": "2019-12-25T18:23:49Z", "closed_at": null, "author_association": "NONE", "body": "\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: This is what the bug is about, see below.\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 16.04\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: no\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**: v1.11.0-0-gc19e29306c 1.11.0\r\n- **Python version**: 3.6.3\r\n- **Bazel version (if compiling from source)**: none\r\n- **GCC/Compiler version (if compiling from source)**: 5.4.0\r\n- **CUDA/cuDNN version**: 8.0, 9.0, 9.1\r\n- **GPU model and memory**: doesn't matter\r\n- **Exact command to reproduce**: See below.\r\n\r\n### Describe the problem\r\n\r\nCompiling some custom native op with `nvcc` fails, with basically this error:\r\n\r\n    absl/strings/string_view.h(501): error: constexpr function return is non-constant\r\n\r\nCompiling the same code with `g++` does not have this issue. This seems specifically related to the CUDA frontent `cudafe`.\r\n\r\n### Source code / logs\r\n\r\nExample code `test.cpp`:\r\n\r\n```\r\n// For Eigen::GpuDevice.\r\n#define EIGEN_USE_GPU 1\r\n\r\n// For Eigen::ThreadPoolDevice.\r\n#define EIGEN_USE_THREADS 1\r\n\r\n#include \"tensorflow/core/framework/op.h\"\r\n#include \"tensorflow/core/framework/shape_inference.h\"\r\n#include \"tensorflow/core/framework/op_kernel.h\"\r\n#include \"tensorflow/core/common_runtime/device.h\"\r\n\r\n#include <cuda.h>\r\n#include <cuda_runtime.h>\r\n#include <cublas_v2.h>\r\n#include <math_constants.h>\r\n\r\n#include \"tensorflow/core/platform/stream_executor.h\"\r\n```\r\n\r\nCompile command:\r\n`/usr/local/cuda-8.0/bin/nvcc -shared -O2 -std=c++11 -I /u/zeyer/py-envs/py36-tf111/lib/python3.6/site-packages/tensorflow/include -I /u/zeyer/py-envs/py36-tf111/lib/python3.6/site-packages/tensorflow/include/external/nsync/public -I /usr/local/cuda-8.0/include -L /usr/local/cuda-8.0/lib64 -x cu -DGOOGLE_CUDA=1 -Xcompiler -fPIC -D_GLIBCXX_USE_CXX11_ABI=0 -g test.cpp -o test.so -lblas -lf77blas -L/u/zeyer/py-envs/py36-tf111/lib/python3.6/site-packages/numpy/.libs -lopenblasp-r0-8dca6697.3.0.dev -L/u/zeyer/py-envs/py36-tf111/lib/python3.6/site-packages/tensorflow -ltensorflow_framework -v -Xcompiler -v`\r\n\r\nThe full compile output (including some more warnings) can be seen [here in the StackOverflow question](https://stackoverflow.com/questions/52665441/nvcc-error-string-view-h-constexpr-function-return-is-non-constant).\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22763", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22763/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22763/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22763/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22763", "id": 367155870, "node_id": "MDU6SXNzdWUzNjcxNTU4NzA=", "number": 22763, "title": "AdamWOptimizer and learning rate decay", "user": {"login": "benleetownsend", "id": 11413338, "node_id": "MDQ6VXNlcjExNDEzMzM4", "avatar_url": "https://avatars3.githubusercontent.com/u/11413338?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benleetownsend", "html_url": "https://github.com/benleetownsend", "followers_url": "https://api.github.com/users/benleetownsend/followers", "following_url": "https://api.github.com/users/benleetownsend/following{/other_user}", "gists_url": "https://api.github.com/users/benleetownsend/gists{/gist_id}", "starred_url": "https://api.github.com/users/benleetownsend/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benleetownsend/subscriptions", "organizations_url": "https://api.github.com/users/benleetownsend/orgs", "repos_url": "https://api.github.com/users/benleetownsend/repos", "events_url": "https://api.github.com/users/benleetownsend/events{/privacy}", "received_events_url": "https://api.github.com/users/benleetownsend/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 11, "created_at": "2018-10-05T10:41:44Z", "updated_at": "2020-01-17T00:00:25Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:Linux Ubuntu 16.04 \r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\n- **TensorFlow installed from (source or binary)**: Source\r\n- **TensorFlow version (use command below)**1.11:\r\n- **Python version**:3.6\r\n- **Bazel version (if compiling from source)**:\r\n- **GCC/Compiler version (if compiling from source)**:\r\n- **CUDA/cuDNN version**:\r\n- **GPU model and memory**:\r\n- **Exact command to reproduce**:\r\n\r\n### Describe the problem\r\nI think I have found that the contrib.opt.AdamWOptimizer and associated decoupled weight decay optimizers do not function correctly when using learning rate decay without explicitly applying the decay to the weight_decay parameter. \r\n\r\nIn the original paper, as seen in algorithm 2, the schedule multiplier is factored out and applied to the whole expression, the current interface means you have to do `AdamWOptimizer(weight_decay=wd*decay, learning_rate=lr*decay)` to achieve parity with the paper, this is not in its self an issue, but I think the documentation should reflect this difference. Alternatively the API could give a schedule multiplier parameter and then fixed lr and wd parameters used. \r\n\r\nHappy to submit a PR if someone can advise whether a documentation or interface update is the desired approach.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22710", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22710/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22710/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22710/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22710", "id": 366579915, "node_id": "MDU6SXNzdWUzNjY1Nzk5MTU=", "number": 22710, "title": "[Cloud TPU] Intermittent freezes requiring reset of the TPU", "user": {"login": "Keno", "id": 1291671, "node_id": "MDQ6VXNlcjEyOTE2NzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1291671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Keno", "html_url": "https://github.com/Keno", "followers_url": "https://api.github.com/users/Keno/followers", "following_url": "https://api.github.com/users/Keno/following{/other_user}", "gists_url": "https://api.github.com/users/Keno/gists{/gist_id}", "starred_url": "https://api.github.com/users/Keno/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Keno/subscriptions", "organizations_url": "https://api.github.com/users/Keno/orgs", "repos_url": "https://api.github.com/users/Keno/repos", "events_url": "https://api.github.com/users/Keno/events{/privacy}", "received_events_url": "https://api.github.com/users/Keno/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "fdxmw", "id": 30300826, "node_id": "MDQ6VXNlcjMwMzAwODI2", "avatar_url": "https://avatars3.githubusercontent.com/u/30300826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fdxmw", "html_url": "https://github.com/fdxmw", "followers_url": "https://api.github.com/users/fdxmw/followers", "following_url": "https://api.github.com/users/fdxmw/following{/other_user}", "gists_url": "https://api.github.com/users/fdxmw/gists{/gist_id}", "starred_url": "https://api.github.com/users/fdxmw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fdxmw/subscriptions", "organizations_url": "https://api.github.com/users/fdxmw/orgs", "repos_url": "https://api.github.com/users/fdxmw/repos", "events_url": "https://api.github.com/users/fdxmw/events{/privacy}", "received_events_url": "https://api.github.com/users/fdxmw/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fdxmw", "id": 30300826, "node_id": "MDQ6VXNlcjMwMzAwODI2", "avatar_url": "https://avatars3.githubusercontent.com/u/30300826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fdxmw", "html_url": "https://github.com/fdxmw", "followers_url": "https://api.github.com/users/fdxmw/followers", "following_url": "https://api.github.com/users/fdxmw/following{/other_user}", "gists_url": "https://api.github.com/users/fdxmw/gists{/gist_id}", "starred_url": "https://api.github.com/users/fdxmw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fdxmw/subscriptions", "organizations_url": "https://api.github.com/users/fdxmw/orgs", "repos_url": "https://api.github.com/users/fdxmw/repos", "events_url": "https://api.github.com/users/fdxmw/events{/privacy}", "received_events_url": "https://api.github.com/users/fdxmw/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-10-04T00:35:51Z", "updated_at": "2019-08-05T02:46:54Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 18.04\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: N/A\r\n- **TensorFlow installed from (source or binary)**: Source\r\n- **TensorFlow version (use command below)**: r1.11\r\n- **Python version**: N/A\r\n- **Bazel version (if compiling from source)**: 0.16.1\r\n- **GCC/Compiler version (if compiling from source)**: 7.2.0\r\n- **CUDA/cuDNN version**: N/A\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**: N/A\r\n\r\n### Describe the problem\r\n\r\nWe are seeing intermittent freezes of the Cloud TPU when running VGG19 inference from the Julia frontend via xrt (do note that we're also seeing incorrect answers, which is filed as #22709 and may or may not be related). If the Cloud TPU freezes, the `TF_SessionRun` call never returns. An aggravating, but non-essential factor is the concurrent execution of the TPU profiler via `capture_tpu_profile`. In that situation both the main program and the `capture_tpu_profile` invocation never exit. If the profiler is running, we usually see only 2-3 successful runs until things start hanging. If I manually disconnect and forcefully kill the session (by severing the socket) and then reconnect, I see either continued freezes or errors of the form\r\n\r\n```\r\nERROR: Tensorflow error: Status: Unable to enqueue when not opened, queue: [0000:00:04.0 PE0 C0 MC0 TN0 Queue HBM_WRITE]. State is: CLOSED\r\n\t [[{{node XRTAllocate}} = XRTAllocate[_device=\"/job:tpu_worker/replica:0/task:0/device:TPU:0\"](XRTAllocate/Const_G1)]]\r\n```\r\n\r\nmy standard protocol to recover from this has been the following:\r\n- Reconnect the session\r\n- Run the `ShutdownDistributedTPU` op (Remote session closes)\r\n- Reconnect the session\r\n- Run the `ShutdownDistributedTPU` op (Causes a non-fatal error, but the next step hangs if not done)\r\n- Run the `ConfigureDistributedTPU` op (works)\r\n\r\nafterwards I can usually use the TPU again.\r\n\r\n### Source code / logs\r\nXLA dump (batch size N=1, but the same happens for at least N=10 and N=100): https://gist.github.com/Keno/b54e4be146096daf4d464c1319639404\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22694", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22694/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22694/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22694/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22694", "id": 366278755, "node_id": "MDU6SXNzdWUzNjYyNzg3NTU=", "number": 22694, "title": "r1.11 failed to build on debian", "user": {"login": "theedge456", "id": 41722387, "node_id": "MDQ6VXNlcjQxNzIyMzg3", "avatar_url": "https://avatars1.githubusercontent.com/u/41722387?v=4", "gravatar_id": "", "url": "https://api.github.com/users/theedge456", "html_url": "https://github.com/theedge456", "followers_url": "https://api.github.com/users/theedge456/followers", "following_url": "https://api.github.com/users/theedge456/following{/other_user}", "gists_url": "https://api.github.com/users/theedge456/gists{/gist_id}", "starred_url": "https://api.github.com/users/theedge456/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/theedge456/subscriptions", "organizations_url": "https://api.github.com/users/theedge456/orgs", "repos_url": "https://api.github.com/users/theedge456/repos", "events_url": "https://api.github.com/users/theedge456/events{/privacy}", "received_events_url": "https://api.github.com/users/theedge456/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-10-03T10:48:52Z", "updated_at": "2018-10-10T18:19:17Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:debian stretch\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\n- **TensorFlow installed from (source or binary)**:source\r\n- **TensorFlow version (use command below)**:r1.11\r\n- **Python version**:2.7.13\r\n- **Bazel version (if compiling from source)**:0.17.2\r\n- **GCC/Compiler version (if compiling from source)**:6.3.0 20170516 (Debian 6.3.0-18+deb9u1)\r\n- **CUDA/cuDNN version**:N/A\r\n- **GPU model and memory**: radeon RV370 256Mo\r\n- CPU : Ryzen 5-1600 with 8Gb\r\n- **Exact command to reproduce**: bazel build //tensorflow/tools/pip_package:build_pip_package\r\n\r\n### Describe the problem\r\ncompilation fails.\r\nIs there a specific version of protobuf to use  ?\r\n\r\n### Source code / logs\r\nINFO: Analysed target //tensorflow/tools/pip_package:build_pip_package (0 packages loaded).\r\nINFO: Found 1 target...\r\nERROR: /media/travail/tensorflow/tensorflow/contrib/tensorrt/BUILD:124:1: Executing genrule //tensorflow/contrib/tensorrt:trt_engine_op_pygenrule failed (Exit 127)\r\nbazel-out/host/bin/tensorflow/contrib/tensorrt/gen_trt_engine_op_py_wrappers_cc: symbol lookup error: bazel-out/host/bin/tensorflow/contrib/tensorrt/gen_trt_engine_op_py_wrappers_cc: undefined symbol: _ZN6google8protobuf8internal26fixed_address_empty_stringB5cxx11E\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nINFO: Elapsed time: 231.846s, Critical Path: 52.14s\r\nINFO: 38 processes: 38 local.\r\nFAILED: Build did NOT complete successfully\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22655", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22655/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22655/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22655/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22655", "id": 365614956, "node_id": "MDU6SXNzdWUzNjU2MTQ5NTY=", "number": 22655, "title": "C++ low level API documentation", "user": {"login": "oregonduckman", "id": 20778340, "node_id": "MDQ6VXNlcjIwNzc4MzQw", "avatar_url": "https://avatars1.githubusercontent.com/u/20778340?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oregonduckman", "html_url": "https://github.com/oregonduckman", "followers_url": "https://api.github.com/users/oregonduckman/followers", "following_url": "https://api.github.com/users/oregonduckman/following{/other_user}", "gists_url": "https://api.github.com/users/oregonduckman/gists{/gist_id}", "starred_url": "https://api.github.com/users/oregonduckman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oregonduckman/subscriptions", "organizations_url": "https://api.github.com/users/oregonduckman/orgs", "repos_url": "https://api.github.com/users/oregonduckman/repos", "events_url": "https://api.github.com/users/oregonduckman/events{/privacy}", "received_events_url": "https://api.github.com/users/oregonduckman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "wolffg", "id": 874510, "node_id": "MDQ6VXNlcjg3NDUxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/874510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wolffg", "html_url": "https://github.com/wolffg", "followers_url": "https://api.github.com/users/wolffg/followers", "following_url": "https://api.github.com/users/wolffg/following{/other_user}", "gists_url": "https://api.github.com/users/wolffg/gists{/gist_id}", "starred_url": "https://api.github.com/users/wolffg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wolffg/subscriptions", "organizations_url": "https://api.github.com/users/wolffg/orgs", "repos_url": "https://api.github.com/users/wolffg/repos", "events_url": "https://api.github.com/users/wolffg/events{/privacy}", "received_events_url": "https://api.github.com/users/wolffg/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wolffg", "id": 874510, "node_id": "MDQ6VXNlcjg3NDUxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/874510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wolffg", "html_url": "https://github.com/wolffg", "followers_url": "https://api.github.com/users/wolffg/followers", "following_url": "https://api.github.com/users/wolffg/following{/other_user}", "gists_url": "https://api.github.com/users/wolffg/gists{/gist_id}", "starred_url": "https://api.github.com/users/wolffg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wolffg/subscriptions", "organizations_url": "https://api.github.com/users/wolffg/orgs", "repos_url": "https://api.github.com/users/wolffg/repos", "events_url": "https://api.github.com/users/wolffg/events{/privacy}", "received_events_url": "https://api.github.com/users/wolffg/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-10-01T19:48:39Z", "updated_at": "2018-12-12T18:48:49Z", "closed_at": null, "author_association": "NONE", "body": "I am unable to find the C++ low level API documentation, please advise."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22646", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22646/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22646/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22646/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22646", "id": 365406529, "node_id": "MDU6SXNzdWUzNjU0MDY1Mjk=", "number": 22646, "title": "Tensorflow 1.10 C++ project errors : logging.h error in line 229", "user": {"login": "EdwardVincentMa", "id": 39480728, "node_id": "MDQ6VXNlcjM5NDgwNzI4", "avatar_url": "https://avatars3.githubusercontent.com/u/39480728?v=4", "gravatar_id": "", "url": "https://api.github.com/users/EdwardVincentMa", "html_url": "https://github.com/EdwardVincentMa", "followers_url": "https://api.github.com/users/EdwardVincentMa/followers", "following_url": "https://api.github.com/users/EdwardVincentMa/following{/other_user}", "gists_url": "https://api.github.com/users/EdwardVincentMa/gists{/gist_id}", "starred_url": "https://api.github.com/users/EdwardVincentMa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/EdwardVincentMa/subscriptions", "organizations_url": "https://api.github.com/users/EdwardVincentMa/orgs", "repos_url": "https://api.github.com/users/EdwardVincentMa/repos", "events_url": "https://api.github.com/users/EdwardVincentMa/events{/privacy}", "received_events_url": "https://api.github.com/users/EdwardVincentMa/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2018-10-01T10:50:32Z", "updated_at": "2019-01-29T09:39:36Z", "closed_at": null, "author_association": "NONE", "body": "I have generated ` libtensorflow_cc.so`(V1.9, V1.10 and V1.11) file successully with bazel in Win10 enviroment,  but when I use this TensorFlow API in VS2017, there are errors as bellow:\r\n\r\n\r\n![image](https://user-images.githubusercontent.com/39480728/46284482-96ce1300-c5aa-11e8-90f1-48f6384eb254.png)\r\n\r\n![image](https://user-images.githubusercontent.com/39480728/46296842-dc500780-c5cd-11e8-8ba6-718c2535f5ea.png)\r\n\r\nI also build TensorFlow1.8 C++ version API, and it used  OK without these errors in VS2017.\r\n\r\nC:\\tf\\tensorflow1.10\\bazel-tensorflow1.10\\tensorflow\\core\\platform\\default\\logging.h\r\nI don not know why it occur these errors. Tensorflow1.8 did not have these errors.\r\nI build tensorflow1.10 by bazel with Windows10-gpu version."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22631", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22631/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22631/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22631/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22631", "id": 365196975, "node_id": "MDU6SXNzdWUzNjUxOTY5NzU=", "number": 22631, "title": "\"Not found: Resource does not exist\" exception thrown in runtime", "user": {"login": "mutiann", "id": 13358837, "node_id": "MDQ6VXNlcjEzMzU4ODM3", "avatar_url": "https://avatars2.githubusercontent.com/u/13358837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mutiann", "html_url": "https://github.com/mutiann", "followers_url": "https://api.github.com/users/mutiann/followers", "following_url": "https://api.github.com/users/mutiann/following{/other_user}", "gists_url": "https://api.github.com/users/mutiann/gists{/gist_id}", "starred_url": "https://api.github.com/users/mutiann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mutiann/subscriptions", "organizations_url": "https://api.github.com/users/mutiann/orgs", "repos_url": "https://api.github.com/users/mutiann/repos", "events_url": "https://api.github.com/users/mutiann/events{/privacy}", "received_events_url": "https://api.github.com/users/mutiann/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2018-09-30T06:26:07Z", "updated_at": "2019-07-21T22:12:43Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 16.04\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: .\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**: 1.9.0\r\n- **Python version**: 3.5.0\r\n- **Bazel version (if compiling from source)**: /\r\n- **GCC/Compiler version (if compiling from source)**: /\r\n- **CUDA/cuDNN version**: 9.1\r\n- **GPU model and memory**: Tesla M40 24GB, Tesla P100 16GB\r\n- **Exact command to reproduce**: /\r\n\r\n### Describe the problem\r\nAn exception is produced when I try to run a slightly modified version of a implementation of Tacotron-2(https://github.com/Rayhane-mamah/Tacotron-2.git). The problem can be reproduced with batch size=32 or 48, but not with batch size=64, either on single or multiple GPUs.\r\nExact the same exception may occur on another model of my own, when the batch size is large enough.\r\nIn my implementation variables (VariableV2 ops) are placed on CPU0, while other ops are placed on GPU towers.\r\nThe problem looks similar with https://github.com/tensorflow/tensorflow/issues/22094\r\n\r\n**Update**\r\nThe problems only occurs when colocate_gradients_with_ops=True in gradients computation.\r\n### Source code / logs\r\n2018-09-29 05:10:28.440837: W tensorflow/core/framework/op_kernel.cc:1318] OP_REQUIRES failed at tensor_array_ops.cc:121 : Not found: Resource __per_step_11/_tensor_arraysmodel/tower_2/tacotron/decoder/TensorArray_3/N10tensorflow11TensorArrayE does not exist.\r\nExiting due to exception: Resource __per_step_11/_tensor_arraysmodel/tower_2/tacotron/decoder/TensorArray_3/N10tensorflow11TensorArrayE does not exist.\r\n\t [[Node: model/tower_2/gradients/model/tower_2/tacotron/decoder/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayGrad/TensorArrayGradV3 = TensorArrayGradV3[_class=[\"loc:@model...yScatterV3\"], source=\"model/tower_2/gradients\", _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](model/tower_2/tacotron/decoder/TensorArray/_231, model/tower_2/tacotron/decoder/while/Exit_1/_1161)]]\r\n\t [[Node: model/tower_1/gradients/model/tower_1/tacotron/postnet_conv/conv1d_3/batch_normalization/moments/mean_grad/DynamicStitch/_1982 = _Send[T=DT_INT32, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:GPU:1\", send_device=\"/job:localhost/replica:0/task:0/device:GPU:1\", send_device_incarnation=1, tensor_name=\"edge_14621...amicStitch\", _device=\"/job:localhost/replica:0/task:0/device:GPU:1\"](model/tower_1/gradients/model/tower_1/tacotron/postnet_conv/conv1d_3/batch_normalization/moments/mean_grad/DynamicStitch)]]\r\n\r\nCaused by op 'model/tower_2/gradients/model/tower_2/tacotron/decoder/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayGrad/TensorArrayGradV3', defined at:\r\n  File \"/tmp/apprunner/.working/runtime/app/train.py\", line 369, in <module>\r\n    main()\r\n  File \"/tmp/apprunner/.working/runtime/app/train.py\", line 365, in main\r\n    train(log_dir, args)\r\n  File \"/tmp/apprunner/.working/runtime/app/train.py\", line 231, in train\r\n    model.add_gradients()\r\n  File \"/tmp/apprunner/.working/runtime/app/models/tacotron.py\", line 256, in add_gradients\r\n    grad_vars = optimizer.compute_gradients(self.loss, colocate_gradients_with_ops=True)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/training/optimizer.py\", line 511, in compute_gradients\r\n    colocate_gradients_with_ops=colocate_gradients_with_ops)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/ops/gradients_impl.py\", line 532, in gradients\r\n    gate_gradients, aggregation_method, stop_gradients)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/ops/gradients_impl.py\", line 701, in _GradientsHelper\r\n    lambda: grad_fn(op, *out_grads))\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/ops/gradients_impl.py\", line 396, in _MaybeCompile\r\n    return grad_fn()  # Exit early\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/ops/gradients_impl.py\", line 701, in <lambda>\r\n    lambda: grad_fn(op, *out_grads))\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/ops/tensor_array_grad.py\", line 161, in _TensorArrayGatherGrad\r\n    .grad(source=grad_source, flow=flow))\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/ops/tensor_array_ops.py\", line 812, in grad\r\n    return self._implementation.grad(source, flow=flow, name=name)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/ops/tensor_array_ops.py\", line 239, in grad\r\n    handle=self._handle, source=source, flow_in=flow, name=name)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/ops/gen_data_flow_ops.py\", line 6229, in tensor_array_grad_v3\r\n    name=name)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/framework/op_def_library.py\", line 787, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 3414, in create_op\r\n    op_def=op_def)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 1740, in __init__\r\n    self._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\r\n\r\n...which was originally created as op 'model/tower_2/tacotron/decoder/TensorArrayStack/TensorArrayGatherV3', defined at:\r\n  File \"/tmp/apprunner/.working/runtime/app/train.py\", line 369, in <module>\r\n    main()\r\n[elided 0 identical lines from previous traceback]\r\n  File \"/tmp/apprunner/.working/runtime/app/train.py\", line 365, in main\r\n    train(log_dir, args)\r\n  File \"/tmp/apprunner/.working/runtime/app/train.py\", line 229, in train\r\n    feeder.target_lengths, global_step=global_step)\r\n  File \"/tmp/apprunner/.working/runtime/app/models/tacotron.py\", line 115, in initialize\r\n    maximum_iterations=max_iters)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/contrib/seq2seq/python/ops/decoder.py\", line 329, in dynamic_decode\r\n    final_outputs = nest.map_structure(lambda ta: ta.stack(), final_outputs_ta)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/util/nest.py\", line 374, in map_structure\r\n    structure[0], [func(*x) for x in entries])\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/util/nest.py\", line 374, in <listcomp>\r\n    structure[0], [func(*x) for x in entries])\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/contrib/seq2seq/python/ops/decoder.py\", line 329, in <lambda>\r\n    final_outputs = nest.map_structure(lambda ta: ta.stack(), final_outputs_ta)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/ops/tensor_array_ops.py\", line 856, in stack\r\n    return self._implementation.stack(name=name)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/ops/tensor_array_ops.py\", line 289, in stack\r\n    return self.gather(math_ops.range(0, self.size()), name=name)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/ops/tensor_array_ops.py\", line 303, in gather\r\n    element_shape=element_shape)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/ops/gen_data_flow_ops.py\", line 6018, in tensor_array_gather_v3\r\n    flow_in=flow_in, dtype=dtype, element_shape=element_shape, name=name)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/framework/op_def_library.py\", line 787, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 3414, in create_op\r\n    op_def=op_def)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 1740, in __init__\r\n    self._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\r\n\r\nNotFoundError (see above for traceback): Resource __per_step_11/_tensor_arraysmodel/tower_2/tacotron/decoder/TensorArray_3/N10tensorflow11TensorArrayE does not exist.\r\n\t [[Node: model/tower_2/gradients/model/tower_2/tacotron/decoder/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayGrad/TensorArrayGradV3 = TensorArrayGradV3[_class=[\"loc:@model...yScatterV3\"], source=\"model/tower_2/gradients\", _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](model/tower_2/tacotron/decoder/TensorArray/_231, model/tower_2/tacotron/decoder/while/Exit_1/_1161)]]\r\n\t [[Node: model/tower_1/gradients/model/tower_1/tacotron/postnet_conv/conv1d_3/batch_normalization/moments/mean_grad/DynamicStitch/_1982 = _Send[T=DT_INT32, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:GPU:1\", send_device=\"/job:localhost/replica:0/task:0/device:GPU:1\", send_device_incarnation=1, tensor_name=\"edge_14621...amicStitch\", _device=\"/job:localhost/replica:0/task:0/device:GPU:1\"](model/tower_1/gradients/model/tower_1/tacotron/postnet_conv/conv1d_3/batch_normalization/moments/mean_grad/DynamicStitch)]]\r\n\r\nTraceback (most recent call last):\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1322, in _do_call\r\n    return fn(*args)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1307, in _run_fn\r\n    options, feed_dict, fetch_list, target_list, run_metadata)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1409, in _call_tf_sessionrun\r\n    run_metadata)\r\ntensorflow.python.framework.errors_impl.NotFoundError: Resource __per_step_11/_tensor_arraysmodel/tower_2/tacotron/decoder/TensorArray_3/N10tensorflow11TensorArrayE does not exist.\r\n\t [[Node: model/tower_2/gradients/model/tower_2/tacotron/decoder/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayGrad/TensorArrayGradV3 = TensorArrayGradV3[_class=[\"loc:@model...yScatterV3\"], source=\"model/tower_2/gradients\", _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](model/tower_2/tacotron/decoder/TensorArray/_231, model/tower_2/tacotron/decoder/while/Exit_1/_1161)]]\r\n\t [[Node: model/tower_1/gradients/model/tower_1/tacotron/postnet_conv/conv1d_3/batch_normalization/moments/mean_grad/DynamicStitch/_1982 = _Send[T=DT_INT32, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:GPU:1\", send_device=\"/job:localhost/replica:0/task:0/device:GPU:1\", send_device_incarnation=1, tensor_name=\"edge_14621...amicStitch\", _device=\"/job:localhost/replica:0/task:0/device:GPU:1\"](model/tower_1/gradients/model/tower_1/tacotron/postnet_conv/conv1d_3/batch_normalization/moments/mean_grad/DynamicStitch)]]\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/tmp/apprunner/.working/runtime/app/train.py\", line 283, in train\r\n    step, loss, _, target_lengths = sess.run([global_step, avg_loss, train_op, feeder.target_lengths])\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 900, in run\r\n    run_metadata_ptr)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1135, in _run\r\n    feed_dict_tensor, options, run_metadata)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1316, in _do_run\r\n    run_metadata)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1335, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.NotFoundError: Resource __per_step_11/_tensor_arraysmodel/tower_2/tacotron/decoder/TensorArray_3/N10tensorflow11TensorArrayE does not exist.\r\n\t [[Node: model/tower_2/gradients/model/tower_2/tacotron/decoder/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayGrad/TensorArrayGradV3 = TensorArrayGradV3[_class=[\"loc:@model...yScatterV3\"], source=\"model/tower_2/gradients\", _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](model/tower_2/tacotron/decoder/TensorArray/_231, model/tower_2/tacotron/decoder/while/Exit_1/_1161)]]\r\n\t [[Node: model/tower_1/gradients/model/tower_1/tacotron/postnet_conv/conv1d_3/batch_normalization/moments/mean_grad/DynamicStitch/_1982 = _Send[T=DT_INT32, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:GPU:1\", send_device=\"/job:localhost/replica:0/task:0/device:GPU:1\", send_device_incarnation=1, tensor_name=\"edge_14621...amicStitch\", _device=\"/job:localhost/replica:0/task:0/device:GPU:1\"](model/tower_1/gradients/model/tower_1/tacotron/postnet_conv/conv1d_3/batch_normalization/moments/mean_grad/DynamicStitch)]]\r\n\r\nCaused by op 'model/tower_2/gradients/model/tower_2/tacotron/decoder/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayGrad/TensorArrayGradV3', defined at:\r\n  File \"/tmp/apprunner/.working/runtime/app/train.py\", line 369, in <module>\r\n    main()\r\n  File \"/tmp/apprunner/.working/runtime/app/train.py\", line 365, in main\r\n    train(log_dir, args)\r\n  File \"/tmp/apprunner/.working/runtime/app/train.py\", line 231, in train\r\n    model.add_gradients()\r\n  File \"/tmp/apprunner/.working/runtime/app/models/tacotron.py\", line 256, in add_gradients\r\n    grad_vars = optimizer.compute_gradients(self.loss, colocate_gradients_with_ops=True)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/training/optimizer.py\", line 511, in compute_gradients\r\n    colocate_gradients_with_ops=colocate_gradients_with_ops)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/ops/gradients_impl.py\", line 532, in gradients\r\n    gate_gradients, aggregation_method, stop_gradients)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/ops/gradients_impl.py\", line 701, in _GradientsHelper\r\n    lambda: grad_fn(op, *out_grads))\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/ops/gradients_impl.py\", line 396, in _MaybeCompile\r\n    return grad_fn()  # Exit early\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/ops/gradients_impl.py\", line 701, in <lambda>\r\n    lambda: grad_fn(op, *out_grads))\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/ops/tensor_array_grad.py\", line 161, in _TensorArrayGatherGrad\r\n    .grad(source=grad_source, flow=flow))\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/ops/tensor_array_ops.py\", line 812, in grad\r\n    return self._implementation.grad(source, flow=flow, name=name)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/ops/tensor_array_ops.py\", line 239, in grad\r\n    handle=self._handle, source=source, flow_in=flow, name=name)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/ops/gen_data_flow_ops.py\", line 6229, in tensor_array_grad_v3\r\n    name=name)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/framework/op_def_library.py\", line 787, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 3414, in create_op\r\n    op_def=op_def)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 1740, in __init__\r\n    self._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\r\n\r\n...which was originally created as op 'model/tower_2/tacotron/decoder/TensorArrayStack/TensorArrayGatherV3', defined at:\r\n  File \"/tmp/apprunner/.working/runtime/app/train.py\", line 369, in <module>\r\n    main()\r\n[elided 0 identical lines from previous traceback]\r\n  File \"/tmp/apprunner/.working/runtime/app/train.py\", line 365, in main\r\n    train(log_dir, args)\r\n  File \"/tmp/apprunner/.working/runtime/app/train.py\", line 229, in train\r\n    feeder.target_lengths, global_step=global_step)\r\n  File \"/tmp/apprunner/.working/runtime/app/models/tacotron.py\", line 115, in initialize\r\n    maximum_iterations=max_iters)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/contrib/seq2seq/python/ops/decoder.py\", line 329, in dynamic_decode\r\n    final_outputs = nest.map_structure(lambda ta: ta.stack(), final_outputs_ta)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/util/nest.py\", line 374, in map_structure\r\n    structure[0], [func(*x) for x in entries])\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/util/nest.py\", line 374, in <listcomp>\r\n    structure[0], [func(*x) for x in entries])\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/contrib/seq2seq/python/ops/decoder.py\", line 329, in <lambda>\r\n    final_outputs = nest.map_structure(lambda ta: ta.stack(), final_outputs_ta)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/ops/tensor_array_ops.py\", line 856, in stack\r\n    return self._implementation.stack(name=name)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/ops/tensor_array_ops.py\", line 289, in stack\r\n    return self.gather(math_ops.range(0, self.size()), name=name)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/ops/tensor_array_ops.py\", line 303, in gather\r\n    element_shape=element_shape)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/ops/gen_data_flow_ops.py\", line 6018, in tensor_array_gather_v3\r\n    flow_in=flow_in, dtype=dtype, element_shape=element_shape, name=name)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/framework/op_def_library.py\", line 787, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 3414, in create_op\r\n    op_def=op_def)\r\n  File \"/tmp/apprunner/.working/runtime/env/lib/python3.5/site-packages/tensorflow/python/framework/ops.py\", line 1740, in __init__\r\n    self._traceback = self._graph._extract_stack()  # pylint: disable=protected-access\r\n\r\nNotFoundError (see above for traceback): Resource __per_step_11/_tensor_arraysmodel/tower_2/tacotron/decoder/TensorArray_3/N10tensorflow11TensorArrayE does not exist.\r\n\t [[Node: model/tower_2/gradients/model/tower_2/tacotron/decoder/TensorArrayStack/TensorArrayGatherV3_grad/TensorArrayGrad/TensorArrayGradV3 = TensorArrayGradV3[_class=[\"loc:@model...yScatterV3\"], source=\"model/tower_2/gradients\", _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"](model/tower_2/tacotron/decoder/TensorArray/_231, model/tower_2/tacotron/decoder/while/Exit_1/_1161)]]\r\n\t [[Node: model/tower_1/gradients/model/tower_1/tacotron/postnet_conv/conv1d_3/batch_normalization/moments/mean_grad/DynamicStitch/_1982 = _Send[T=DT_INT32, client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:GPU:1\", send_device=\"/job:localhost/replica:0/task:0/device:GPU:1\", send_device_incarnation=1, tensor_name=\"edge_14621...amicStitch\", _device=\"/job:localhost/replica:0/task:0/device:GPU:1\"](model/tower_1/gradients/model/tower_1/tacotron/postnet_conv/conv1d_3/batch_normalization/moments/mean_grad/DynamicStitch)]]\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22598", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22598/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22598/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22598/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22598", "id": 364953924, "node_id": "MDU6SXNzdWUzNjQ5NTM5MjQ=", "number": 22598, "title": "Empty tfrecord in gcs would fail the TFRecordDataset.read", "user": {"login": "yupbank", "id": 741544, "node_id": "MDQ6VXNlcjc0MTU0NA==", "avatar_url": "https://avatars1.githubusercontent.com/u/741544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yupbank", "html_url": "https://github.com/yupbank", "followers_url": "https://api.github.com/users/yupbank/followers", "following_url": "https://api.github.com/users/yupbank/following{/other_user}", "gists_url": "https://api.github.com/users/yupbank/gists{/gist_id}", "starred_url": "https://api.github.com/users/yupbank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yupbank/subscriptions", "organizations_url": "https://api.github.com/users/yupbank/orgs", "repos_url": "https://api.github.com/users/yupbank/repos", "events_url": "https://api.github.com/users/yupbank/events{/privacy}", "received_events_url": "https://api.github.com/users/yupbank/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "rxsang", "id": 6399870, "node_id": "MDQ6VXNlcjYzOTk4NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/6399870?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rxsang", "html_url": "https://github.com/rxsang", "followers_url": "https://api.github.com/users/rxsang/followers", "following_url": "https://api.github.com/users/rxsang/following{/other_user}", "gists_url": "https://api.github.com/users/rxsang/gists{/gist_id}", "starred_url": "https://api.github.com/users/rxsang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rxsang/subscriptions", "organizations_url": "https://api.github.com/users/rxsang/orgs", "repos_url": "https://api.github.com/users/rxsang/repos", "events_url": "https://api.github.com/users/rxsang/events{/privacy}", "received_events_url": "https://api.github.com/users/rxsang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rxsang", "id": 6399870, "node_id": "MDQ6VXNlcjYzOTk4NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/6399870?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rxsang", "html_url": "https://github.com/rxsang", "followers_url": "https://api.github.com/users/rxsang/followers", "following_url": "https://api.github.com/users/rxsang/following{/other_user}", "gists_url": "https://api.github.com/users/rxsang/gists{/gist_id}", "starred_url": "https://api.github.com/users/rxsang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rxsang/subscriptions", "organizations_url": "https://api.github.com/users/rxsang/orgs", "repos_url": "https://api.github.com/users/rxsang/repos", "events_url": "https://api.github.com/users/rxsang/events{/privacy}", "received_events_url": "https://api.github.com/users/rxsang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-09-28T16:12:45Z", "updated_at": "2019-04-04T22:41:24Z", "closed_at": null, "author_association": "MEMBER", "body": "The behaviour of gcs(google cloud file storage) file system is different than local file system. \r\n\r\nas `tf.gfile.Open('local_empty.tfrecord').read(100000000) == ''`\r\nwhile `tf.gfile.Open('gcs_empty_file.tfrecord').read(1000000)=='Out[11]: \"<?xml version='1.0' encoding='UTF-8'?><Error><Code>InvalidRange</Code><Message>The requested range cannot be satisfied.</Message><Details>bytes=some number</Details></Error>\"'`\r\n\r\nso when we use `tf.data.TFRecordDataset` to process the tfrecord in the gcs, there would be \r\n`DataLossError`\r\n\r\nsuch as here https://github.com/tensorflow/tensorflow/issues/13463\r\n---\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22597", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22597/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22597/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22597/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22597", "id": 364920418, "node_id": "MDU6SXNzdWUzNjQ5MjA0MTg=", "number": 22597, "title": "Feature request: Documentation tf.keras.applications missing for TF 1.11", "user": {"login": "sibyjackgrove", "id": 25213730, "node_id": "MDQ6VXNlcjI1MjEzNzMw", "avatar_url": "https://avatars0.githubusercontent.com/u/25213730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sibyjackgrove", "html_url": "https://github.com/sibyjackgrove", "followers_url": "https://api.github.com/users/sibyjackgrove/followers", "following_url": "https://api.github.com/users/sibyjackgrove/following{/other_user}", "gists_url": "https://api.github.com/users/sibyjackgrove/gists{/gist_id}", "starred_url": "https://api.github.com/users/sibyjackgrove/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sibyjackgrove/subscriptions", "organizations_url": "https://api.github.com/users/sibyjackgrove/orgs", "repos_url": "https://api.github.com/users/sibyjackgrove/repos", "events_url": "https://api.github.com/users/sibyjackgrove/events{/privacy}", "received_events_url": "https://api.github.com/users/sibyjackgrove/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2018-09-28T14:45:06Z", "updated_at": "2018-12-15T18:41:40Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "\r\n### Describe the problem\r\nThe documentation for tf.keras.applications is missing for version 1.11 and I am getting a page not found error (see below image). Documentation is available for 1.10. While both have the same documentation, 1.11 comes with `mobilenet_V2` which was not available in 1.10.\r\n\r\n### Source code / logs\r\n![image](https://user-images.githubusercontent.com/25213730/46215172-50ef2180-c302-11e8-9cd4-8e12ba62c1e1.png)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22565", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22565/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22565/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22565/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22565", "id": 364516083, "node_id": "MDU6SXNzdWUzNjQ1MTYwODM=", "number": 22565, "title": "Tensorflow example, Object Detection: Failed to find input Node 'image_tensor", "user": {"login": "digital-prime", "id": 13558483, "node_id": "MDQ6VXNlcjEzNTU4NDgz", "avatar_url": "https://avatars2.githubusercontent.com/u/13558483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/digital-prime", "html_url": "https://github.com/digital-prime", "followers_url": "https://api.github.com/users/digital-prime/followers", "following_url": "https://api.github.com/users/digital-prime/following{/other_user}", "gists_url": "https://api.github.com/users/digital-prime/gists{/gist_id}", "starred_url": "https://api.github.com/users/digital-prime/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/digital-prime/subscriptions", "organizations_url": "https://api.github.com/users/digital-prime/orgs", "repos_url": "https://api.github.com/users/digital-prime/repos", "events_url": "https://api.github.com/users/digital-prime/events{/privacy}", "received_events_url": "https://api.github.com/users/digital-prime/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "jch1", "id": 1811449, "node_id": "MDQ6VXNlcjE4MTE0NDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1811449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jch1", "html_url": "https://github.com/jch1", "followers_url": "https://api.github.com/users/jch1/followers", "following_url": "https://api.github.com/users/jch1/following{/other_user}", "gists_url": "https://api.github.com/users/jch1/gists{/gist_id}", "starred_url": "https://api.github.com/users/jch1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jch1/subscriptions", "organizations_url": "https://api.github.com/users/jch1/orgs", "repos_url": "https://api.github.com/users/jch1/repos", "events_url": "https://api.github.com/users/jch1/events{/privacy}", "received_events_url": "https://api.github.com/users/jch1/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jch1", "id": 1811449, "node_id": "MDQ6VXNlcjE4MTE0NDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1811449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jch1", "html_url": "https://github.com/jch1", "followers_url": "https://api.github.com/users/jch1/followers", "following_url": "https://api.github.com/users/jch1/following{/other_user}", "gists_url": "https://api.github.com/users/jch1/gists{/gist_id}", "starred_url": "https://api.github.com/users/jch1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jch1/subscriptions", "organizations_url": "https://api.github.com/users/jch1/orgs", "repos_url": "https://api.github.com/users/jch1/repos", "events_url": "https://api.github.com/users/jch1/events{/privacy}", "received_events_url": "https://api.github.com/users/jch1/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2018-09-27T14:53:16Z", "updated_at": "2019-01-23T16:31:11Z", "closed_at": null, "author_association": "NONE", "body": "I try to run tensorflow object Detection example on android with my own '.pb' file.\r\nI change `TF_OD_API_MODEL_FILE` and `TF_OD_API_LABELS_FILE` to my own files.\r\nWhen I run it I've got the error:\r\n\r\n```\r\njava.lang.RuntimeException: Failed to find input Node 'image_tensor'\r\n        at org.tensorflow.demo.TensorFlowObjectDetectionAPIModel.create(TensorFlowObjectDetectionAPIModel.java:102)\r\n```\r\nBut by graph HAS input node name 'image_tensor'!! To check it, I open it with tensorboard and check it.\r\n\r\nI don't know what versions and libraries should i write here, maybe someone has same issue? \r\n \r\nPS - maybe some error got because I have only one class (and label) to detect? Or it doesn't mean?\r\n\r\n_________\r\n\r\nEDIT: answer on questions from @tensorflowbutler \r\n\r\n**Have I written custom code**\r\nI'm using only code example from [`official page`](https://github.com/tensorflow/tensorflow/tree/master/tensorflow/examples/android)\r\nI only change name's of files to my own pb - `TF_OD_API_MODEL_FILE` and `TF_OD_API_LABELS_FILE`.\r\n\r\n**OS Platform and Distribution**\r\nMAC OS High Sierra 10.13.6\r\n\r\n**TensorFlow installed from**\r\nTensorflow installed from pip\r\n\r\n**TensorFlow version**\r\n1.10.1\r\n\r\n**Bazel version**\r\nBuild label: 0.16.1\r\nBuild target: bazel-out/darwin-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Mon Aug 13 13:42:50 2018 (1534167770)\r\nBuild timestamp: 1534167770\r\nBuild timestamp as int: 1534167770\r\n\r\n**CUDA/cuDNN version**\r\nno\r\n\r\n**GPU model and memory**\r\nno\r\n\r\n**Exact command to reproduce**\r\nRun app in android studio, start application 'TF Detect', crash on starting.\r\n\r\n**Mobile device**\r\ngoogle Nexus 5, api23"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22541", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22541/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22541/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22541/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22541", "id": 364081287, "node_id": "MDU6SXNzdWUzNjQwODEyODc=", "number": 22541, "title": "Java process crashes during model loading", "user": {"login": "sam701", "id": 7078566, "node_id": "MDQ6VXNlcjcwNzg1NjY=", "avatar_url": "https://avatars2.githubusercontent.com/u/7078566?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sam701", "html_url": "https://github.com/sam701", "followers_url": "https://api.github.com/users/sam701/followers", "following_url": "https://api.github.com/users/sam701/following{/other_user}", "gists_url": "https://api.github.com/users/sam701/gists{/gist_id}", "starred_url": "https://api.github.com/users/sam701/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sam701/subscriptions", "organizations_url": "https://api.github.com/users/sam701/orgs", "repos_url": "https://api.github.com/users/sam701/repos", "events_url": "https://api.github.com/users/sam701/events{/privacy}", "received_events_url": "https://api.github.com/users/sam701/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-09-26T15:12:08Z", "updated_at": "2018-12-12T18:48:36Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: AWS c5.xlarge, Amazon Linux\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\n- **TensorFlow installed from (source or binary)**: java binary\r\n- **TensorFlow version (use command below)**: java org.tensorflow:tensorflow:1.11.0-rc2\r\n- **Python version**:\r\n- **Bazel version (if compiling from source)**:\r\n- **GCC/Compiler version (if compiling from source)**:\r\n- **CUDA/cuDNN version**:\r\n- **GPU model and memory**:\r\n- **Exact command to reproduce**:\r\n\r\n\r\n### Describe the problem\r\nI run the following program on `c5.xlarge` (CPU only, no GPU) with 8GB RAM and 12GB swap memory.\r\n```java\r\npublic class TryOut {\r\n    public static void main(String[] args) {\r\n        SavedModelBundle[] loadedModels = new SavedModelBundle[15];\r\n        for (int i = 0; i < 15; i++) {\r\n            System.out.println(\"loading model \" + i);\r\n            loadedModels[i] = SavedModelBundle.load(\"models/0\", \"serve\");\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n`models/0` contains the model [faster_rcnn_resnet101_coco](http://download.tensorflow.org/models/object_detection/faster_rcnn_resnet101_coco_2018_01_28.tar.gz) from the [model zoo](https://github.com/tensorflow/models/blob/master/research/object_detection/g3doc/detection_model_zoo.md).\r\nHere is the directory structure:\r\n```sh\r\nmodels/0/\r\n\u2514\u2500\u2500 saved_model.pb\r\n```\r\n\r\nI run the program as `java -jar mem-test.jar`.\r\n\r\n\r\n#### Problem\r\nProcess crashes during model loading when the free memory becomes low (see `output.txt`).\r\nThe process does not try to utilize available swap memory.\r\n\r\nThis behavior is reproducible with other models from the model zoo.\r\n\r\nOn the other hand, `tensorflow-serving` can download multiple models into memory, utilizes swap and runs inferences without crashing as long as there is swap memory available.\r\n\r\n### Source code / logs\r\n\r\nSee also the attached files:\r\n* [output.txt](https://github.com/tensorflow/tensorflow/files/2420367/output.txt)\r\n* [hs_err_pid31150.log](https://github.com/tensorflow/tensorflow/files/2420368/hs_err_pid31150.log)\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22531", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22531/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22531/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22531/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22531", "id": 364001476, "node_id": "MDU6SXNzdWUzNjQwMDE0NzY=", "number": 22531, "title": "Android tfLite Shared STL support ", "user": {"login": "curtpm", "id": 323740, "node_id": "MDQ6VXNlcjMyMzc0MA==", "avatar_url": "https://avatars1.githubusercontent.com/u/323740?v=4", "gravatar_id": "", "url": "https://api.github.com/users/curtpm", "html_url": "https://github.com/curtpm", "followers_url": "https://api.github.com/users/curtpm/followers", "following_url": "https://api.github.com/users/curtpm/following{/other_user}", "gists_url": "https://api.github.com/users/curtpm/gists{/gist_id}", "starred_url": "https://api.github.com/users/curtpm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/curtpm/subscriptions", "organizations_url": "https://api.github.com/users/curtpm/orgs", "repos_url": "https://api.github.com/users/curtpm/repos", "events_url": "https://api.github.com/users/curtpm/events{/privacy}", "received_events_url": "https://api.github.com/users/curtpm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-09-26T12:22:56Z", "updated_at": "2018-12-12T18:48:31Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nN/A\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nAndroid\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\nAndroid\r\n- **TensorFlow installed from (source or binary)**:\r\nN/A\r\n- **TensorFlow version (use command below)**:\r\nAll version of TFlite\r\n- **Python version**:\r\nN/A\r\n- **Bazel version (if compiling from source)**:\r\nN/A\r\n- **GCC/Compiler version (if compiling from source)**:\r\nN/A\r\n- **CUDA/cuDNN version**:\r\nN/A\r\n- **GPU model and memory**:\r\nN/A\r\n- **Exact command to reproduce**:\r\nN/A\r\n\r\nCurrently the final .so files from the android build are produced linking against the libc++_static.a library, this has the effect of compiling a large amount of code into the tfLite shared library.\r\n\r\nAndroid also supports linking against a libc++_shared.so version of the STL (as of NDK 18 libc++ is the ONLY supported version of the stl). \r\n\r\nThe main reason for this is that we also have a few other native modules that currently link against libc++_shared.so so it would be handy to reduce the size of the tflite.so library we have to package into the final APK.\r\n\r\nIt would be VERY handy to have two versions of the AAR tfLite package produced, the current version with a static version of libc++ and another version linking against libc++_shared.so \r\n\r\nNDK Docs for libc++:\r\nhttps://developer.android.com/ndk/guides/cpp-support#libc\r\n\r\nCurrent tfLite AAR package: \r\nhttps://bintray.com/google/tensorflow/tensorflow-lite/1.10.0\r\n\r\nmaybe a new package could be something like: \r\norg.tensorflow:tensorflow-lite-shared:1.10.0"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22530", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22530/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22530/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22530/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22530", "id": 363968060, "node_id": "MDU6SXNzdWUzNjM5NjgwNjA=", "number": 22530, "title": "Inconsistent behaviour of tf.range", "user": {"login": "AlessioTonioni", "id": 6823414, "node_id": "MDQ6VXNlcjY4MjM0MTQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/6823414?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlessioTonioni", "html_url": "https://github.com/AlessioTonioni", "followers_url": "https://api.github.com/users/AlessioTonioni/followers", "following_url": "https://api.github.com/users/AlessioTonioni/following{/other_user}", "gists_url": "https://api.github.com/users/AlessioTonioni/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlessioTonioni/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlessioTonioni/subscriptions", "organizations_url": "https://api.github.com/users/AlessioTonioni/orgs", "repos_url": "https://api.github.com/users/AlessioTonioni/repos", "events_url": "https://api.github.com/users/AlessioTonioni/events{/privacy}", "received_events_url": "https://api.github.com/users/AlessioTonioni/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2018-09-26T10:49:36Z", "updated_at": "2019-11-14T13:33:55Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 16.04\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: No\r\n- **TensorFlow installed from (source or binary)**: Binary\r\n- **TensorFlow version (use command below)**: v1.10.0-0-g656e7a2b34 1.10.0\r\n- **Python version**: 3.5.2\r\n- **CUDA/cuDNN version**: V9.0.176\r\n- **GPU model and memory**: GTX Titan X + 2xGTX Titan Black\r\n\r\n\r\n### Describe the problem\r\nthe tensor produced by tf.range exceeds the limit with the configuration of parameters below.\r\n\r\n### Source code / logs\r\n```\r\nimport tensorflow as tf\r\n\r\nwith tf.Session() as sess:\r\n\tmax_value=379.0\r\n\tdelta=379.0/94.0\r\n\r\n\trange_tensor = tf.range(max_value,delta=delta,dtype=tf.float32)\r\n\r\n\tprint(sess.run(range_tensor))\r\n```\r\nResult:\r\n\r\n> [  0.          4.0319147   8.063829   12.095744   16.127659   20.159573\r\n  24.191486   28.2234     32.255314   36.287228   40.31914    44.351055\r\n  48.38297    52.414883   56.446796   60.47871    64.51063    68.54254\r\n  72.574455   76.60637    80.63828    84.6702     88.70211    92.734024\r\n  96.76594   100.79785   104.829765  108.86168   112.89359   116.92551\r\n 120.95742   124.989334  129.02126   133.05318   137.0851    141.11702\r\n 145.14894   149.18086   153.21278   157.2447    161.27663   165.30855\r\n 169.34047   173.37239   177.40431   181.43623   185.46815   189.50008\r\n 193.532     197.56392   201.59584   205.62776   209.65968   213.6916\r\n 217.72353   221.75545   225.78737   229.81929   233.85121   237.88313\r\n 241.91505   245.94698   249.9789    254.01082   258.04272   262.07465\r\n 266.10657   270.1385    274.1704    278.20233   282.23425   286.26617\r\n 290.2981    294.33002   298.36194   302.39386   306.42578   310.4577\r\n 314.48962   318.52155   322.55347   326.5854    330.6173    334.64923\r\n 338.68115   342.71307   346.745     350.77692   354.80884   358.84076\r\n 362.87268   366.9046    370.93652   374.96844   379.00037  ]\r\n\r\n379.00037 should not be there!\r\n\r\nEquivalent numpy code\r\n```\r\nimport numpy as np\r\nmax_value=379.0\r\ndelta=379.0/94.0\r\nprint(np.arange(0,max_value,delta))\r\n```\r\nResult:\r\n> [  0.           4.03191489   8.06382979  12.09574468  16.12765957\r\n  20.15957447  24.19148936  28.22340426  32.25531915  36.28723404\r\n  40.31914894  44.35106383  48.38297872  52.41489362  56.44680851\r\n  60.4787234   64.5106383   68.54255319  72.57446809  76.60638298\r\n  80.63829787  84.67021277  88.70212766  92.73404255  96.76595745\r\n 100.79787234 104.82978723 108.86170213 112.89361702 116.92553191\r\n 120.95744681 124.9893617  129.0212766  133.05319149 137.08510638\r\n 141.11702128 145.14893617 149.18085106 153.21276596 157.24468085\r\n 161.27659574 165.30851064 169.34042553 173.37234043 177.40425532\r\n 181.43617021 185.46808511 189.5        193.53191489 197.56382979\r\n 201.59574468 205.62765957 209.65957447 213.69148936 217.72340426\r\n 221.75531915 225.78723404 229.81914894 233.85106383 237.88297872\r\n 241.91489362 245.94680851 249.9787234  254.0106383  258.04255319\r\n 262.07446809 266.10638298 270.13829787 274.17021277 278.20212766\r\n 282.23404255 286.26595745 290.29787234 294.32978723 298.36170213\r\n 302.39361702 306.42553191 310.45744681 314.4893617  318.5212766\r\n 322.55319149 326.58510638 330.61702128 334.64893617 338.68085106\r\n 342.71276596 346.74468085 350.77659574 354.80851064 358.84042553\r\n 362.87234043 366.90425532 370.93617021 374.96808511]\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22524", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22524/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22524/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22524/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22524", "id": 363898595, "node_id": "MDU6SXNzdWUzNjM4OTg1OTU=", "number": 22524, "title": "assign_add seems giving wrong and random results in broadcasting", "user": {"login": "David-Mao", "id": 12476624, "node_id": "MDQ6VXNlcjEyNDc2NjI0", "avatar_url": "https://avatars3.githubusercontent.com/u/12476624?v=4", "gravatar_id": "", "url": "https://api.github.com/users/David-Mao", "html_url": "https://github.com/David-Mao", "followers_url": "https://api.github.com/users/David-Mao/followers", "following_url": "https://api.github.com/users/David-Mao/following{/other_user}", "gists_url": "https://api.github.com/users/David-Mao/gists{/gist_id}", "starred_url": "https://api.github.com/users/David-Mao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/David-Mao/subscriptions", "organizations_url": "https://api.github.com/users/David-Mao/orgs", "repos_url": "https://api.github.com/users/David-Mao/repos", "events_url": "https://api.github.com/users/David-Mao/events{/privacy}", "received_events_url": "https://api.github.com/users/David-Mao/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-09-26T07:48:25Z", "updated_at": "2018-12-19T18:50:09Z", "closed_at": null, "author_association": "NONE", "body": "------------------------\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\nYes\r\n\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nDarwin localhost 17.5.0 Darwin Kernel Version 17.5.0: Fri Apr 13 19:32:32 PDT 2018; root:xnu-4570.51.2~1/RELEASE_X86_64 x86_64\r\nMac OS X 10.13.4\r\n- **TensorFlow installed from (source or binary)**:\r\nbinary\r\n\r\n- **TensorFlow version (use command below)**:\r\nv1.10.0-12-g4dcfddc5d1 1.10.1\r\n\r\n- **Python version**:\r\n2.7 & 3.7\r\n\r\n- **Bazel version**:\r\nN/A\r\n- **CUDA/cuDNN version**:\r\nN/A\r\n- **GPU model and memory**:\r\nN/A\r\n- **Exact command to reproduce**:\r\nSee below\r\n- **Mobile device**:\r\nN/A\r\n\r\n\r\n### Describe the problem\r\n\r\nI ran the very simple code below and I've got random meaningless results. The first element of the result is always correct. So it seems that the broadcasting is not working, i.e. only the first element has been correctly processed. But I think people would assume `assign_add` works in simple case like `assign_add(_, 0.0)` (or it should complain rather than silently give wrong results). \r\n\r\n### Source code / logs\r\n\r\n```\r\nimport tensorflow as tf\r\nimport tensorflow.contrib.eager as tfe\r\ntf.enable_eager_execution()\r\n\r\nZ = tfe.Variable([[1.0, 2.0, 3.0], [4.0, 5.0, 6.0]])\r\nprint(Z.numpy())\r\ntf.assign_add(Z, 0.0)\r\nprint(Z.numpy())\r\n```\r\n\r\nOne sample result:\r\n\r\n```\r\n[[1. 2. 3.]\r\n [4. 5. 6.]]\r\n[[1.00000000e+00 6.55319777e+13 2.69145827e+20]\r\n [3.84908544e+09 1.23657954e+33 6.00000000e+00]]\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22498", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22498/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22498/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22498/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22498", "id": 363487896, "node_id": "MDU6SXNzdWUzNjM0ODc4OTY=", "number": 22498, "title": "Writing a SavedModel on Windows with long file path fails", "user": {"login": "HedgehogCode", "id": 6631116, "node_id": "MDQ6VXNlcjY2MzExMTY=", "avatar_url": "https://avatars1.githubusercontent.com/u/6631116?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HedgehogCode", "html_url": "https://github.com/HedgehogCode", "followers_url": "https://api.github.com/users/HedgehogCode/followers", "following_url": "https://api.github.com/users/HedgehogCode/following{/other_user}", "gists_url": "https://api.github.com/users/HedgehogCode/gists{/gist_id}", "starred_url": "https://api.github.com/users/HedgehogCode/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HedgehogCode/subscriptions", "organizations_url": "https://api.github.com/users/HedgehogCode/orgs", "repos_url": "https://api.github.com/users/HedgehogCode/repos", "events_url": "https://api.github.com/users/HedgehogCode/events{/privacy}", "received_events_url": "https://api.github.com/users/HedgehogCode/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wt-huang", "id": 42785337, "node_id": "MDQ6VXNlcjQyNzg1MzM3", "avatar_url": "https://avatars0.githubusercontent.com/u/42785337?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wt-huang", "html_url": "https://github.com/wt-huang", "followers_url": "https://api.github.com/users/wt-huang/followers", "following_url": "https://api.github.com/users/wt-huang/following{/other_user}", "gists_url": "https://api.github.com/users/wt-huang/gists{/gist_id}", "starred_url": "https://api.github.com/users/wt-huang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wt-huang/subscriptions", "organizations_url": "https://api.github.com/users/wt-huang/orgs", "repos_url": "https://api.github.com/users/wt-huang/repos", "events_url": "https://api.github.com/users/wt-huang/events{/privacy}", "received_events_url": "https://api.github.com/users/wt-huang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2018-09-25T09:30:26Z", "updated_at": "2018-12-16T18:37:25Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code**: Yes, see below.\r\n- **OS Platform and Distribution**: Windows 10 Enterprise 64Bit (10.0.16299)\r\n- **Mobile device**: N/A\r\n- **TensorFlow installed from**: Binary\r\n- **TensorFlow version**: b'v1.10.0-rc1-19-g656e7a2b34' 1.10.0\r\n- **Python version**: 3.5.5\r\n- **Bazel version**: N/A\r\n- **GCC/Compiler version**: N/A\r\n- **CUDA/cuDNN version**: N/A\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**: Run the provided script on Windows\r\n\r\n\r\n### Describe the problem\r\nWhen exporting a SavedModel to a directory with a rather long path the maximum file path length of Windows (260 chars) gets exceeded while creating temporary variable files and the process fails because it can't find the file (See attachments for the full log):\r\n```\r\nNotFoundError (see above for traceback): Failed to create a NewWriteableFile: C:\\reallylongpath\\barfoobarfoobarfoobarfoobarfoobarfoo\\barfoobarfoobarfoobarfoobarfoobarfoo\\barfoobarfoobarfoobarfoobarfoobarfoo\\barfoobarfoo\\variables\\variables_temp_cbd5fe79f07a4790a08e7c2adf1ed95b/part-00000-of-00001.data-00000-of-00001.tempstate12448200021531902965 : The system cannot find the path specified.\r\n```\r\nThe usual workaround to prepend `'\\\\\\\\?\\\\'` to the path (like described [here](https://stackoverflow.com/a/3557977)) doesn't work (See attachments).\r\n\r\n### Source code / logs\r\n\r\n__Code to reproduce:__\r\n```python\r\nimport tensorflow as tf\r\n\r\n# Long export path (should be at least 140 chars long)\r\nexport_dir = r'C:\\reallylongpath\\barfoobarfoobarfoobarfoobarfoobarfoo\\barfoobarfoobarfoobarfoobarfoobarfoo\\barfoobarfoobarfoobarfoobarfoobarfoo\\barfoobarfoo'\r\nprint('Export dir lenght: {}'.format(len(export_dir)))\r\n\r\n# Build an easy graph with variables\r\nx = tf.constant(2)\r\nw = tf.Variable(3)\r\ny = tf.multiply(x, w)\r\n\r\nwith tf.Session() as sess:\r\n    # Initialize the variable\r\n    sess.run(w.initializer)\r\n\r\n    # Save as a SavedModel\r\n    tf.saved_model.simple_save(sess,\r\n                               export_dir,\r\n                               inputs={'x': x },\r\n                               outputs={'y': y })\r\n```\r\n\r\n__Logs:__\r\nFull log:\r\n[log.txt](https://github.com/tensorflow/tensorflow/files/2414582/log.txt)\r\n\r\nFull log with `'\\\\\\\\?\\\\'` prefix:\r\n[log_prefix_0.txt](https://github.com/tensorflow/tensorflow/files/2414583/log_prefix_0.txt)\r\n\r\nFull log with `'\\\\?\\'` prefix:\r\n[log_prefix_1.txt](https://github.com/tensorflow/tensorflow/files/2414584/log_prefix_1.txt)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22484", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22484/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22484/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22484/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22484", "id": 363173430, "node_id": "MDU6SXNzdWUzNjMxNzM0MzA=", "number": 22484, "title": "CollectiveAllReduceStrategy \"Out of range: End of sequence\" warnings", "user": {"login": "nvcastet", "id": 26874160, "node_id": "MDQ6VXNlcjI2ODc0MTYw", "avatar_url": "https://avatars2.githubusercontent.com/u/26874160?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nvcastet", "html_url": "https://github.com/nvcastet", "followers_url": "https://api.github.com/users/nvcastet/followers", "following_url": "https://api.github.com/users/nvcastet/following{/other_user}", "gists_url": "https://api.github.com/users/nvcastet/gists{/gist_id}", "starred_url": "https://api.github.com/users/nvcastet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nvcastet/subscriptions", "organizations_url": "https://api.github.com/users/nvcastet/orgs", "repos_url": "https://api.github.com/users/nvcastet/repos", "events_url": "https://api.github.com/users/nvcastet/events{/privacy}", "received_events_url": "https://api.github.com/users/nvcastet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}], "state": "open", "locked": false, "assignee": {"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, {"login": "yuefengz", "id": 1647833, "node_id": "MDQ6VXNlcjE2NDc4MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1647833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuefengz", "html_url": "https://github.com/yuefengz", "followers_url": "https://api.github.com/users/yuefengz/followers", "following_url": "https://api.github.com/users/yuefengz/following{/other_user}", "gists_url": "https://api.github.com/users/yuefengz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuefengz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuefengz/subscriptions", "organizations_url": "https://api.github.com/users/yuefengz/orgs", "repos_url": "https://api.github.com/users/yuefengz/repos", "events_url": "https://api.github.com/users/yuefengz/events{/privacy}", "received_events_url": "https://api.github.com/users/yuefengz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2018-09-24T14:32:52Z", "updated_at": "2020-02-21T17:55:53Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nNo\r\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nUbuntu 16.04.4 ppc64le\r\nTensorFlow installed from (source or binary):\r\nsource\r\nTensorFlow version (use command below):\r\n1.11\r\nPython version: Python 2.7.15\r\nCUDA/cuDNN version: Cuda 9.2 CuDNN 7.2.1\r\nGPU model and memory: V100 16GB\r\nExact command to reproduce: python keras_model_to_estimator.py /tmp/tfkeras_example\r\n\r\n### Describe the problem\r\nRunning the [ecosystem CollectiveAllReduceStrategy estimator example ](https://github.com/tensorflow/ecosystem/blob/master/distribution_strategy/keras_model_to_estimator.py) on a box with 2GPUs, we get those warning constantly after the last step of an epoch:\r\n```\r\nINFO:tensorflow:loss = 0.6660614, step = 1500 (0.288 sec)\r\n2018-09-21 19:23:01.075834: W tensorflow/core/common_runtime/base_collective_executor.cc:203] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext}} = IteratorGetNext[output_shapes=[[?,10], [?,1]], output_types=[DT_FLOAT, DT_INT64]](IteratorFromStringHandleV2)]]\r\n\t [[{{node FunctionBufferingResourceGetNext_1}} = FunctionBufferingResourceGetNext[output_types=[DT_FLOAT, DT_INT64], _device=\"/job:localhost/replica:0/task:0/device:GPU:1\"](FunctionBufferingResource_1)]]\r\n2018-09-21 19:23:01.075843: W tensorflow/core/common_runtime/base_collective_executor.cc:203] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext}} = IteratorGetNext[output_shapes=[[?,10], [?,1]], output_types=[DT_FLOAT, DT_INT64]](IteratorFromStringHandleV2)]]\r\n\t [[{{node FunctionBufferingResourceGetNext}} = FunctionBufferingResourceGetNext[output_types=[DT_FLOAT, DT_INT64], _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"](FunctionBufferingResource)]]\r\n\t [[{{node global_step/Read/ReadVariableOp/_171}} = _Recv[client_terminated=false, recv_device=\"/job:localhost/replica:0/task:0/device:CPU:0\", send_device=\"/job:localhost/replica:0/task:0/device:GPU:0\", send_device_incarnation=1, tensor_name=\"edge_550_global_step/Read/ReadVariableOp\", tensor_type=DT_INT64, _device=\"/job:localhost/replica:0/task:0/device:CPU:0\"]()]]\r\n2018-09-21 19:23:01.076090: W tensorflow/core/common_runtime/base_collective_executor.cc:203] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext}} = IteratorGetNext[output_shapes=[[?,10], [?,1]], output_types=[DT_FLOAT, DT_INT64]](IteratorFromStringHandleV2)]]\r\n\t [[{{node FunctionBufferingResourceGetNext}} = FunctionBufferingResourceGetNext[output_types=[DT_FLOAT, DT_INT64], _device=\"/job:localhost/replica:0/task:0/device:GPU:0\"](FunctionBufferingResource)]]\r\n```\r\n@yuefengz: Do you also see the same warnings in your test logs?\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22465", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22465/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22465/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/22465/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/22465", "id": 362867493, "node_id": "MDU6SXNzdWUzNjI4Njc0OTM=", "number": 22465, "title": "[Feature Request]: tf.data.Dataset.map parallelism autotune enhancement", "user": {"login": "fanshiqing", "id": 3927162, "node_id": "MDQ6VXNlcjM5MjcxNjI=", "avatar_url": "https://avatars2.githubusercontent.com/u/3927162?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fanshiqing", "html_url": "https://github.com/fanshiqing", "followers_url": "https://api.github.com/users/fanshiqing/followers", "following_url": "https://api.github.com/users/fanshiqing/following{/other_user}", "gists_url": "https://api.github.com/users/fanshiqing/gists{/gist_id}", "starred_url": "https://api.github.com/users/fanshiqing/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fanshiqing/subscriptions", "organizations_url": "https://api.github.com/users/fanshiqing/orgs", "repos_url": "https://api.github.com/users/fanshiqing/repos", "events_url": "https://api.github.com/users/fanshiqing/events{/privacy}", "received_events_url": "https://api.github.com/users/fanshiqing/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2018-09-22T15:48:37Z", "updated_at": "2018-10-14T02:41:34Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes.\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Cent OS\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: N/A\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**: 1.4\r\n- **Python version**: 2.7.5\r\n- **Bazel version (if compiling from source)**: NA\r\n- **GCC/Compiler version (if compiling from source)**: NA\r\n- **CUDA/cuDNN version**: NA\r\n- **GPU model and memory**: NA\r\n- **Exact command to reproduce**: NA\r\n\r\n\r\n### Describe the problem\r\nRecently this [PR](https://github.com/tensorflow/tensorflow/commit/c8a0dfc741736a59f8fd1776b71f38619d66da56#diff-df634c8243713c0afd2e05c1689412e2) which leverages the underlying  performance model to find the optimal values for the parallelism knobs, this seems intuitive and really useful for me. While after carefully going through the relevant codebase, there are two problems that have been bothering me.\r\n\r\n(1) Currently dataset.map's num_parallel_calls autotune (as well as [dataset.prefetch buffer size autotune](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/data/prefetch_autotuner.cc#L36-L55)) only works in the scenario when `kAutotune` guard is set and then start a one-way increment. On the one hand, in actual production environment, careless setting of parameters like `map.num_parllel_calls` or `prefetch.buffer_size` is somewhat common, which may result in inefficient  or even wore resource utilization.  On the other hand, even a carefully-tuned parameter which leverages underlying system info and works good in environment may turn out to be incompatible when we transfer into another environment. Therefore it's nature that our AUTOTUNE logic can support our auto_tune params's autotune based on runtime system info **as well as user's initial params passed in**, in which case the autotune_params' adjustment should be two-way.\r\n\r\n(2) At the specific code implementation level, this PR leverages `port::NumSchedulableCPUs()` to get the number of cores available in the process, and calculate the idealized acceleration brought by parallelism's increment(e.g. [PARALLEL_MAP](https://github.com/tensorflow/tensorflow/blob/c8a0dfc741736a59f8fd1776b71f38619d66da56/tensorflow/core/framework/model.cc#L214-L221)). This should be tuned carefully as in complicated distributed environment the increase of map parallelism perhaps results in invalid scheduling of resources, and eventually **brings in negative optimization**.\r\n\r\nFor the above two points I have figured out some workaround, and the first draft of the code is also being developed. Any comments from you side is hight welcome and much appreciated. @jsimsa \r\n\r\nThanks\r\n\r\n\r\n"}]