[{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37144", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37144/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37144/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37144/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37144", "id": 572358966, "node_id": "MDU6SXNzdWU1NzIzNTg5NjY=", "number": 37144, "title": "WARNING:tensorflow:AutoGraph could not transform and will run it as-is. Please report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.", "user": {"login": "nsssss", "id": 54051537, "node_id": "MDQ6VXNlcjU0MDUxNTM3", "avatar_url": "https://avatars2.githubusercontent.com/u/54051537?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nsssss", "html_url": "https://github.com/nsssss", "followers_url": "https://api.github.com/users/nsssss/followers", "following_url": "https://api.github.com/users/nsssss/following{/other_user}", "gists_url": "https://api.github.com/users/nsssss/gists{/gist_id}", "starred_url": "https://api.github.com/users/nsssss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nsssss/subscriptions", "organizations_url": "https://api.github.com/users/nsssss/orgs", "repos_url": "https://api.github.com/users/nsssss/repos", "events_url": "https://api.github.com/users/nsssss/events{/privacy}", "received_events_url": "https://api.github.com/users/nsssss/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1190546177, "node_id": "MDU6TGFiZWwxMTkwNTQ2MTc3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:autograph", "name": "comp:autograph", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-02-27T21:05:26Z", "updated_at": "2020-03-17T23:34:53Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code: Yes\r\n- OS Platform and Distribution : Windows 10\r\n- TensorFlow installed from (source or binary): Anaconda\r\n- TensorFlow version (use command below): 2.1.0\r\n- Python version: 3.7.4\r\n\r\n**Describe the current behavior**\r\nI'm using anaconda tensorflow, Spyder. When run my custom layers, it shows warning as below: \r\n```\r\nWARNING:tensorflow:AutoGraph could not transform <bound method GroupSoftmax.call of <__main__.GroupSoftmax object at 0x000002A957B843C8>> and will run it as-is.\r\nPlease report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.\r\nCause: \r\nWARNING: AutoGraph could not transform <bound method GroupSoftmax.call of <__main__.GroupSoftmax object at 0x000002A957B843C8>> and will run it as-is.\r\nPlease report this to the TensorFlow team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output.\r\n```\r\n**Describe the method I tried**\r\nI have already tried the solution which others provided: pip install gast==0.2.2\r\nI also re-installed all of the softwares (anaconda, tensorflow, spyder). \r\nHowever, these methods doesn't solve my problem.  \r\nIs there any other solution? \r\n\r\n**Standalone code to reproduce the issue** \r\n```\r\nclass GroupSoftmax(layers.Layer):\r\n    def __init__(self, axis=-1, **kwargs):\r\n        super(GroupSoftmax, self).__init__(**kwargs)\r\n        self.supports_masking = True\r\n        self.axis = axis\r\n\r\n    def call(self, inputs):\r\n        return tf.divide(inputs, tf.reduce_sum(inputs, axis=self.axis))\r\n\r\n    def get_config(self):\r\n        config = {'axis': self.axis}\r\n        base_config = super(GroupSoftmax, self).get_config()\r\n        return dict(list(base_config.items()) + list(config.items()))\r\n    \r\n    @tf_utils.shape_type_conversion\r\n    def compute_output_shape(self, input_shape):\r\n        return input_shape\r\n\r\n'''\r\n-----------------network of g-----------------\r\n'''\r\ngModel = tf.keras.Sequential([\r\n# \u6dfb\u52a0\u4e00\u4e2a\u6709Nodes\u4e2a\u795e\u7ecf\u5143\u7684\u5168\u8fde\u63a5\u5c42\uff0c\u201cinput_shape\u201d\u4e3a\u8be5\u5c42\u63a5\u53d7\u7684\u8f93\u5165\u6570\u636e\u7684\u7ef4\u5ea6\uff0c\u201cactivation\u201d\u6307\u5b9a\u8be5\u5c42\u6240\u7528\u7684\u6fc0\u6d3b\u51fd\u6570\r\nlayers.Dense(Nodes, activation='sigmoid', input_shape=(60,), use_bias = False),#\u5c01\u88c5\u6570\u636e\u5e94\u8be5\u4e3a\uff083000\uff0c10\uff0c6\uff09\r\n# \u6dfb\u52a0\u7b2c\u4e8c\u4e2a\u7f51\u7edc\u5c42\r\nlayers.Dense(Nodes, activation='sigmoid', use_bias = False),\r\n# \u6dfb\u52a0\u7b2c3\u4e2a\u7f51\u7edc\u5c42\r\nlayers.Dense(Nodes, activation='sigmoid', use_bias = False),\r\n# \u6dfb\u52a0\u7b2c4\u4e2a\u7f51\u7edc\u5c42\r\nlayers.Dense(Nodes, activation='sigmoid', use_bias = False),\r\n# \u6dfb\u52a0\u7b2c5\u4e2a\u7f51\u7edc\u5c42\r\nlayers.Dense(Nodes, activation='sigmoid', use_bias = False),\r\n# \u6dfb\u52a0\u7b2c6\u4e2a\u7f51\u7edc\u5c42,\u6539\u53d8\u8282\u70b9\u6570\u76ee\r\nlayers.Dense(66, activation='sigmoid', use_bias = False),\r\n# \u6dfb\u52a0\u7b2c7\u4e2a\u7f51\u7edc\u5c42,\u6539\u53d8shape\r\nlayers.Reshape((11, 6)),\r\n# \u6dfb\u52a0output\u7f51\u7edc\u5c42,\u5206\u7ec4softmax\r\n#layers.Dense(6, activation=layers.Softmax(axis=0),input_shape=(11,6), use_bias = False), # [11,6]\r\n#layers.Softmax(axis=0)\r\nGroupSoftmax(axis=0)\r\n])\r\n\r\ngModel.summary()   \r\n```\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37140", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37140/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37140/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37140/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37140", "id": 572273338, "node_id": "MDU6SXNzdWU1NzIyNzMzMzg=", "number": 37140, "title": "Micro_speech example with a different microphone bitrate", "user": {"login": "MiLeG", "id": 19146713, "node_id": "MDQ6VXNlcjE5MTQ2NzEz", "avatar_url": "https://avatars0.githubusercontent.com/u/19146713?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MiLeG", "html_url": "https://github.com/MiLeG", "followers_url": "https://api.github.com/users/MiLeG/followers", "following_url": "https://api.github.com/users/MiLeG/following{/other_user}", "gists_url": "https://api.github.com/users/MiLeG/gists{/gist_id}", "starred_url": "https://api.github.com/users/MiLeG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MiLeG/subscriptions", "organizations_url": "https://api.github.com/users/MiLeG/orgs", "repos_url": "https://api.github.com/users/MiLeG/repos", "events_url": "https://api.github.com/users/MiLeG/events{/privacy}", "received_events_url": "https://api.github.com/users/MiLeG/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1589976566, "node_id": "MDU6TGFiZWwxNTg5OTc2NTY2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:micro", "name": "comp:micro", "color": "3e2eea", "default": false, "description": "Related to TensorFlow Lite Microcontrollers"}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-27T18:31:57Z", "updated_at": "2020-02-28T11:04:31Z", "closed_at": null, "author_association": "NONE", "body": "@tensorflow/micro\r\n\r\n**System information**\r\n- Windows 10\r\n- TensorFlow installed from Arduino library\r\n- 1.15.0-ALPHA precompiled\r\n- ESP32, Arduino\r\n\r\nFollowing the micro_speech example in the Arduino_TensorFlowLite library, I tried to modify the code so that it could run with my 32 bits per sample I2S microphone.\r\nHowever, this proved to be a challenge since the audio_provider files require a certain number of samples of a certain size.\r\nWhat happened, in the end, is that the code was stuck in a loop gathering data.\r\n\r\nI'm not sure where to even begin debugging this, but I'm guessing the capture buffer needs to be adjusted in order to accommodate the larger sample size\r\n\r\nSo far I've modified the arduino_audio_provider.cpp file to be the following\r\n````\r\n#include \"audio_provider.h\"\r\n#include <Arduino.h>\r\n#include <driver/i2s.h>\r\n#include \"micro_features_micro_model_settings.h\"\r\nconst i2s_port_t I2S_PORT = I2S_NUM_0;\r\n#define BUFFER_SIZE 1024\r\nTaskHandle_t audioInputTaskHandle;\r\nnamespace {\r\nbool g_is_audio_initialized = false;\r\n// An internal buffer able to fit 16x our sample size\r\nconstexpr int kAudioCaptureBufferSize = BUFFER_SIZE * 32;\r\nint32_t g_audio_capture_buffer[BUFFER_SIZE];\r\n// A buffer that holds our output\r\nint16_t g_audio_output_buffer[kMaxAudioSampleSize];\r\n// Mark as volatile so we can check in a while loop to see if\r\n// any samples have arrived yet.\r\nvolatile int32_t g_latest_audio_timestamp = 0;\r\n}  // namespace\r\nvolatile uint32_t testerino = 0;\r\nvolatile bool audioCaptureFlag = 0;\r\nvoid CaptureSamples( void *) {\r\n  while(1)\r\n  {\r\n    if(audioCaptureFlag)\r\n    {\r\n      // Determine the index, in the history of all samples, of the last sample\r\n      const int32_t start_sample_offset =\r\n          g_latest_audio_timestamp * (kAudioSampleFrequency / 1000);//0\r\n      // Determine the index of this sample in our ring buffer\r\n      const int capture_index = start_sample_offset % kAudioCaptureBufferSize;//0\r\n      size_t bytesRead;\r\n      i2s_read(I2S_PORT, (void*) g_audio_capture_buffer + capture_index, BUFFER_SIZE, &bytesRead, portMAX_DELAY);\r\n      // This is how many bytes of new data we have each time this is called\r\n      const int number_of_samples = bytesRead / 8;\r\n      // Calculate what timestamp the last audio sample represents\r\n      const int32_t time_in_ms =\r\n          g_latest_audio_timestamp +\r\n          (number_of_samples / (kAudioSampleFrequency / 1000)); //6,12\r\n      \r\n      // Read the data to the correct place in our buffer\r\n      // Serial.println(g_latest_audio_timestamp);\r\n      // Serial.println(start_sample_offset);\r\n      Serial.println(capture_index);\r\n      delay(1);\r\n      // for(uint16_t i = 0; i < bytesRead; i++)\r\n        // Serial.printf(\"%d, %ld\\n\", i, g_audio_capture_buffer[i]);\r\n        // Serial.println(g_audio_capture_buffer[i]);\r\n      \r\n      // PDM.read(g_audio_capture_buffer + capture_index, DEFAULT_PDM_BUFFER_SIZE);\r\n      // This is how we let the outside world know that new audio data has arrived.\r\n      // Serial.print(\"latest timestamp: \");\r\n      // Serial.println(bytesRead);\r\n      // Serial.flush();\r\n      // delay(1);\r\n      testerino++;\r\n\r\n      g_latest_audio_timestamp = time_in_ms;\r\n    }\r\n    vTaskDelay(1);\r\n  }\r\n}\r\n\r\nTfLiteStatus InitAudioRecording(tflite::ErrorReporter* error_reporter) {\r\n    Serial.println(\"init audio recording\");\r\n    delay(10);\r\n\r\n  // Hook up the callback that will be called with each sample\r\n  // PDM.onReceive(CaptureSamples);\r\n  // Start listening for audio: MONO @ 16KHz with gain at 20\r\n  // PDM.begin(1, kAudioSampleFrequency);\r\n  // PDM.setGain(20);\r\n   // The I2S config as per the example\r\n  const i2s_config_t i2s_config = {\r\n      .mode = i2s_mode_t(I2S_MODE_MASTER | I2S_MODE_RX), // Receive, not transfer\r\n      .sample_rate = 16000,                         // 16KHz\r\n      .bits_per_sample = I2S_BITS_PER_SAMPLE_32BIT, // could only get it to work with 32bits\r\n      .channel_format = I2S_CHANNEL_FMT_ONLY_RIGHT, // although the SEL config should be left, it seems to transmit on right\r\n      .communication_format = i2s_comm_format_t(I2S_COMM_FORMAT_I2S | I2S_COMM_FORMAT_I2S_MSB),\r\n      .intr_alloc_flags = ESP_INTR_FLAG_LEVEL1,     // Interrupt level 1\r\n      .dma_buf_count = 8,                           // number of buffers\r\n      .dma_buf_len = BUFFER_SIZE                              // 32 samples per buffer (minimum)\r\n  };\r\n\r\n  // The pin config as per the setup\r\n  const i2s_pin_config_t pin_config = {\r\n      .bck_io_num = 13,   // BCKL\r\n      .ws_io_num = 15,    // LRCL\r\n      .data_out_num = -1, // not used (only for speakers)\r\n      .data_in_num = 32   // DOUT\r\n  };\r\n  esp_err_t err;\r\n  // Configuring the I2S driver and pins.\r\n  // This function must be called before any I2S driver read/write operations.\r\n  err = i2s_driver_install(I2S_PORT, &i2s_config, 0, NULL);\r\n  if (err != ESP_OK) {\r\n    Serial.printf(\"Failed installing driver: %d\\n\", err);\r\n    while (true);\r\n  }\r\n  err = i2s_set_pin(I2S_PORT, &pin_config);\r\n  if (err != ESP_OK) {\r\n    Serial.printf(\"Failed setting pin: %d\\n\", err);\r\n    while (true);\r\n  }\r\n  Serial.println(\"I2S driver installed.\");\r\n  delay(1);\r\n  // uint32_t samples[8];\r\n  // int bytes_read = i2s_pop_sample(I2S_PORT, (char *)&sample, portMAX_DELAY); // no timeout\r\n  // size_t bytes_read;\r\n  // esp_err_t error = i2s_read(I2S_PORT, (char *)samples, 8, &bytes_read, portMAX_DELAY);\r\n  // Serial.println(error == ESP_OK);\r\n  // delay(1);\r\n  // if (bytes_read > 0) {\r\n  //   float mean = 0;\r\n  //   for (int i = 0; i < bytes_read; ++i) {\r\n  //     mean += samples[i];\r\n  //   }\r\n  //   Serial.println(mean);\r\n  // }\r\n  // delay(10);\r\n  // Block until we have our first audio sample\r\n  xTaskCreate(CaptureSamples, \"adc_read_task\", kAudioCaptureBufferSize, NULL, 5, &audioInputTaskHandle);\r\n  audioCaptureFlag = 1;\r\n\r\n  while (!g_latest_audio_timestamp) {\r\n  }\r\n\r\n  return kTfLiteOk;\r\n}\r\n\r\nTfLiteStatus GetAudioSamples(tflite::ErrorReporter* error_reporter,\r\n                             int start_ms, int duration_ms,\r\n                             int* audio_samples_size, int16_t** audio_samples) {\r\n  // Set everything up to start receiving audio\r\n  if (!g_is_audio_initialized) {\r\n    TfLiteStatus init_status = InitAudioRecording(error_reporter);\r\n    if (init_status != kTfLiteOk) {\r\n      return init_status;\r\n    }\r\n    g_is_audio_initialized = true;\r\n  }\r\n  else\r\n  {\r\n    // Serial.println(\"task resumed\");\r\n    // Serial.flush();\r\n    // delay(10);\r\n    // xTaskCreate(CaptureSamples, \"adc_read_task\", kAudioCaptureBufferSize, NULL, 1, &audioInputTaskHandle);\r\n    audioCaptureFlag = 1;\r\n    // vTaskResume(audioInputTaskHandle);\r\n  }\r\n\r\n\r\n  // This next part should only be called when the main thread notices that the\r\n  // latest audio sample data timestamp has changed, so that there's new data\r\n  // in the capture ring buffer. The ring buffer will eventually wrap around and\r\n  // overwrite the data, but the assumption is that the main thread is checking\r\n  // often enough and the buffer is large enough that this call will be made\r\n  // before that happens.\r\n\r\n  // Determine the index, in the history of all samples, of the first\r\n  // sample we want\r\n  const int start_offset = start_ms * (kAudioSampleFrequency / 1000);\r\n  // Determine how many samples we want in total\r\n  const int duration_sample_count =\r\n      duration_ms * (kAudioSampleFrequency / 1000);\r\n  // Serial.println(duration_sample_count);\r\n  // delay(10);\r\n  for (int i = 0; i < duration_sample_count; ++i) {\r\n    \r\n    // delay(1);\r\n    // For each sample, transform its index in the history of all samples into\r\n    // its index in g_audio_capture_buffer\r\n    const int capture_index = (start_offset + i) % kAudioCaptureBufferSize;\r\n    \r\n    // Write the sample to the output buffer\r\n    g_audio_output_buffer[i] = ((int16_t*)g_audio_capture_buffer)[capture_index];\r\n    // Serial.printf(\"inside loop %d\\n\", i);\r\n    // delay(1);\r\n  }\r\n  \r\n  // Serial.printf(\"got samples\\n\");\r\n  audioCaptureFlag = 0;\r\n  // Serial.println(testerino);\r\n  // delay(10);\r\n  // testerino = 0;\r\n  // vTaskDelete(audioInputTaskHandle);\r\n  \r\n  // Serial.println(\"task deleted\");\r\n  // delay(10);\r\n\r\n\r\n  // Set pointers to provide access to the audio\r\n  *audio_samples_size = kMaxAudioSampleSize;\r\n  *audio_samples = g_audio_output_buffer;\r\n\r\n  return kTfLiteOk;\r\n}\r\n\r\nint32_t LatestAudioTimestamp() { return g_latest_audio_timestamp; }\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37135", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37135/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37135/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37135/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37135", "id": 572190314, "node_id": "MDU6SXNzdWU1NzIxOTAzMTQ=", "number": 37135, "title": "Save and load model neural network", "user": {"login": "AlturRang", "id": 61554142, "node_id": "MDQ6VXNlcjYxNTU0MTQy", "avatar_url": "https://avatars3.githubusercontent.com/u/61554142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AlturRang", "html_url": "https://github.com/AlturRang", "followers_url": "https://api.github.com/users/AlturRang/followers", "following_url": "https://api.github.com/users/AlturRang/following{/other_user}", "gists_url": "https://api.github.com/users/AlturRang/gists{/gist_id}", "starred_url": "https://api.github.com/users/AlturRang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AlturRang/subscriptions", "organizations_url": "https://api.github.com/users/AlturRang/orgs", "repos_url": "https://api.github.com/users/AlturRang/repos", "events_url": "https://api.github.com/users/AlturRang/events{/privacy}", "received_events_url": "https://api.github.com/users/AlturRang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2020-02-27T16:16:18Z", "updated_at": "2020-03-19T15:28:31Z", "closed_at": null, "author_association": "NONE", "body": "Hi,\r\nI am a beginner in neural network, I follow a tutorial (https://www.datacamp.com/community/tutorials/cnn-tensorflow-python) for create it.\r\n[tuto.py.tar.gz](https://github.com/tensorflow/tensorflow/files/4262620/tuto.py.tar.gz)\r\n-> It is my soft.\r\n\r\nI add some lines to save a model of my network. I have \".meta\" file.\r\nMy problem is, how I can use this model on an other soft for predict if I have shirt, coat, ... in my image.\r\n\r\n\r\n\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37134", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37134/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37134/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37134/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37134", "id": 572183326, "node_id": "MDU6SXNzdWU1NzIxODMzMjY=", "number": 37134, "title": "list of operators for which you will need custom implementations: StatelessWhile, TensorListFromTensor, TensorListReserve, TensorListStack, While.", "user": {"login": "xuexuanyu", "id": 12272668, "node_id": "MDQ6VXNlcjEyMjcyNjY4", "avatar_url": "https://avatars1.githubusercontent.com/u/12272668?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xuexuanyu", "html_url": "https://github.com/xuexuanyu", "followers_url": "https://api.github.com/users/xuexuanyu/followers", "following_url": "https://api.github.com/users/xuexuanyu/following{/other_user}", "gists_url": "https://api.github.com/users/xuexuanyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/xuexuanyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xuexuanyu/subscriptions", "organizations_url": "https://api.github.com/users/xuexuanyu/orgs", "repos_url": "https://api.github.com/users/xuexuanyu/repos", "events_url": "https://api.github.com/users/xuexuanyu/events{/privacy}", "received_events_url": "https://api.github.com/users/xuexuanyu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1661751498, "node_id": "MDU6TGFiZWwxNjYxNzUxNDk4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TFLiteConverter", "name": "TFLiteConverter", "color": "bfdadc", "default": false, "description": "For issues related to TFLite converter"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}, {"login": "ravikyram", "id": 51902062, "node_id": "MDQ6VXNlcjUxOTAyMDYy", "avatar_url": "https://avatars2.githubusercontent.com/u/51902062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ravikyram", "html_url": "https://github.com/ravikyram", "followers_url": "https://api.github.com/users/ravikyram/followers", "following_url": "https://api.github.com/users/ravikyram/following{/other_user}", "gists_url": "https://api.github.com/users/ravikyram/gists{/gist_id}", "starred_url": "https://api.github.com/users/ravikyram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ravikyram/subscriptions", "organizations_url": "https://api.github.com/users/ravikyram/orgs", "repos_url": "https://api.github.com/users/ravikyram/repos", "events_url": "https://api.github.com/users/ravikyram/events{/privacy}", "received_events_url": "https://api.github.com/users/ravikyram/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2020-02-27T16:06:02Z", "updated_at": "2020-03-08T00:45:32Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):16.04\r\n- TensorFlow installed from (source or binary):pip3 install\r\n- TensorFlow version (or github SHA if from source):2.1.0\r\n\r\nI  want to convert an RNN model to tflite. The code I used is :\r\n` converter = tf.lite.TFLiteConverter.from_saved_model(fd_path)\r\n    converter.target_spec.supported_ops = [tf.lite.OpsSet.SELECT_TF_OPS]\r\n    tflite_quant_model = converter.convert()`\r\n\r\nbut I got :\r\n\r\n`Some of the operators in the model are not supported by the standard TensorFlow Lite runtime and are not recognized by TensorFlow. If you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: . Here is a list of operators for which you will need custom implementations: StatelessWhile, TensorListFromTensor, TensorListReserve, TensorListStack, While.`\r\n\r\n\r\nI guess this error may be because I used `tfa.seq2seq.dynamic_decode` in my model. So I try to set:\r\n\r\n`converter.experimental_new_converter = True`\r\n\r\nand convert it again, but I got a new error:\r\n\r\n`Exception: <unknown>:0: error: loc(\"TensorArrayV2Write/cond@__inference_Tacotron_model_inference_decoder_while_body_1121_661_frozen\"): failed to legalize operation 'tf.If'\r\n`\r\n\r\n\r\nI can't find any way to resolve this issue, and I want to know does TFlite support convert `dynamic_decode`? can this issue be resolved if I custom implementations: StatelessWhile, TensorListFromTensor, TensorListReserve, TensorListStack, While?\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37132", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37132/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37132/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37132/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37132", "id": 572156906, "node_id": "MDU6SXNzdWU1NzIxNTY5MDY=", "number": 37132, "title": "\"Could not append to the internal temporary file\" when writing checkpoints to GCP during TPU training", "user": {"login": "mathemakitten", "id": 31600291, "node_id": "MDQ6VXNlcjMxNjAwMjkx", "avatar_url": "https://avatars2.githubusercontent.com/u/31600291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mathemakitten", "html_url": "https://github.com/mathemakitten", "followers_url": "https://api.github.com/users/mathemakitten/followers", "following_url": "https://api.github.com/users/mathemakitten/following{/other_user}", "gists_url": "https://api.github.com/users/mathemakitten/gists{/gist_id}", "starred_url": "https://api.github.com/users/mathemakitten/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mathemakitten/subscriptions", "organizations_url": "https://api.github.com/users/mathemakitten/orgs", "repos_url": "https://api.github.com/users/mathemakitten/repos", "events_url": "https://api.github.com/users/mathemakitten/events{/privacy}", "received_events_url": "https://api.github.com/users/mathemakitten/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-02-27T15:25:30Z", "updated_at": "2020-03-18T00:53:34Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04): Debian GNU/Linux 9.11 \r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if\r\nthe issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or\r\nbinary): binary\r\n - TensorFlow version (use command below): 2.2.0.dev20200119\r\n- Python version: Python 3.7.6\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from\r\nsource): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nWhen training a model for 2 days+ on a TPU pod and saving checkpoints to a GCP bucket, I run into `tensorflow.python.framework.errors_impl.InternalError: Could not append to the internal temporary file. [Op:ReadVariableOp]` when writing checkpoints. This has happened a couple of times and is fixed by acquiring a new pod, so I suspect it is due to running out of space (on the TPU host it seems)? If this is the case, is it possible to diagnose when this is happening and delete old checkpoints to avoid training crashing?\r\n\r\n**Describe the expected behavior**\r\nDetect that space on the (TPU host?) is close to full and delete old checkpoints.\r\n\r\n**Standalone code to reproduce the issue** \r\nStandard model run on TPU; wouldn't be reproducible without running a model for > 2 days.\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n\r\n```\r\nFile \"/home/helen/.../estimator.py\", line 233, in train_and_evaluate\r\n    checkpoint.save(os.path.join(output_dir, \"ckpt\"))\r\n  File \"/home/helen/anaconda3/envs/.../python3.7/site-packages/tensorflow_core/python/training/tracking/util.py\", line 1927, in save\r\n    file_path = self.write(\"%s-%d\" % (file_prefix, checkpoint_number))\r\n  File \"/home/helen/anaconda3/envs/.../python3.7/site-packages/tensorflow_core/python/training/tracking/util.py\", line 1857, in write\r\n    output = self._saver.save(file_prefix=file_prefix)\r\n  File \"/home/helen/anaconda3/envs/.../python3.7/site-packages/tensorflow_core/python/training/tracking/util.py\", line 1187, in save\r\n    file_prefix=file_prefix_tensor, object_graph_tensor=object_graph_tensor)\r\n  File \"/home/helen/anaconda3/envs/.../python3.7/site-packages/tensorflow_core/python/training/tracking/util.py\", line 1135, in _save_cached_when_graph_building\r\n    save_op = saver.save(file_prefix)\r\n  File \"/home/helen/anaconda3/envs/.../python3.7/site-packages/tensorflow_core/python/training/saving/functional_saver.py\", line 250, in save\r\n    sharded_saves.append(saver.save(shard_prefix))\r\n  File \"/home/helen/anaconda3/envs/.../python3.7/site-packages/tensorflow_core/python/training/saving/functional_saver.py\", line 70, in save\r\n    tensors.append(spec.tensor)\r\n  File \"/home/helen/anaconda3/envs/.../python3.7/site-packages/tensorflow_core/python/training/saving/saveable_object.py\", line 55, in tensor\r\n    return self._tensor() if callable(self._tensor) else self._tensor\r\n  File \"/home/helen/anaconda3/envs/.../python3.7/site-packages/tensorflow_core/python/training/saving/saveable_object_util.py\", line 91, in f\r\n    x = v.read_value()\r\n  File \"/home/helen/anaconda3/envs/.../python3.7/site-packages/tensorflow_core/python/ops/resource_variable_ops.py\", line 638, in read_value\r\n    value = self._read_variable_op()\r\n  File \"/home/helen/anaconda3/envs/.../python3.7/site-packages/tensorflow_core/python/ops/resource_variable_ops.py\", line 616, in _read_variable_op\r\n    self._dtype)\r\n  File \"/home/helen/anaconda3/envs/.../python3.7/site-packages/tensorflow_core/python/ops/gen_resource_variable_ops.py\", line 479, in read_variable_op\r\n    _ops.raise_from_not_ok_status(e, name)\r\n  File \"/home/helen/anaconda3/envs/.../python3.7/site-packages/tensorflow_core/python/framework/ops.py\", line 6625, in raise_from_not_ok_status\r\n    six.raise_from(core._status_to_exception(e.code, message), None)\r\n  File \"<string>\", line 3, in raise_from\r\ntensorflow.python.framework.errors_impl.InternalError: Could not append to the internal temporary file. [Op:ReadVariableOp]\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37131", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37131/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37131/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37131/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37131", "id": 572146449, "node_id": "MDU6SXNzdWU1NzIxNDY0NDk=", "number": 37131, "title": "TensorRT 6/7 converter crash with tf 2.1.0", "user": {"login": "bioothod", "id": 1847575, "node_id": "MDQ6VXNlcjE4NDc1NzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1847575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bioothod", "html_url": "https://github.com/bioothod", "followers_url": "https://api.github.com/users/bioothod/followers", "following_url": "https://api.github.com/users/bioothod/following{/other_user}", "gists_url": "https://api.github.com/users/bioothod/gists{/gist_id}", "starred_url": "https://api.github.com/users/bioothod/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bioothod/subscriptions", "organizations_url": "https://api.github.com/users/bioothod/orgs", "repos_url": "https://api.github.com/users/bioothod/repos", "events_url": "https://api.github.com/users/bioothod/events{/privacy}", "received_events_url": "https://api.github.com/users/bioothod/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1754777628, "node_id": "MDU6TGFiZWwxNzU0Nzc3NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu:tensorrt", "name": "comp:gpu:tensorrt", "color": "ea98ba", "default": false, "description": "Issues specific to TensorRT"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-02-27T15:08:52Z", "updated_at": "2020-03-10T00:14:38Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "Test code and steps to reproduce: https://github.com/bioothod/trt_crash_efficientnet\r\nHappens both with `nvcr.io/nvidia/tensorflow:20.02-tf2-py3` and `tensorflow/tensorflow:2.1.0-gpu-py3`.\r\n\r\nStack trace:\r\n```\r\n(gdb) bt\r\n#0  0x00007fff60219560 in tensorflow::Node::name() const () from /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/../libtensorflow_framework.so.2\r\n#1  0x00007fff6796af66 in tensorflow::tensorrt::convert::UpdateToEngineNode(std::vector<tensorflow::tensorrt::convert::EngineInfo, std::allocator<tensorflow::tensorrt::convert::EngineInfo> > const&, unsigned long, std::vector<tensorflow::Node*, std::allocator<tensorflow::Node*> > const&, bool, std::string const&, tensorflow::Node**, int*) ()\r\n   from /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n#2  0x00007fff6796cfc5 in tensorflow::tensorrt::convert::CreateTRTNode(tensorflow::tensorrt::convert::ConversionParams const&, std::vector<tensorflow::tensorrt::convert::EngineInfo, std::allocator<tensorflow::tensorrt::convert::EngineInfo> > const&, int, int, tensorflow::Graph*, nvinfer1::IGpuAllocator*, std::vector<tensorflow::Node*, std::allocator<tensorflow::Node*> >*) ()\r\n   from /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n#3  0x00007fff67972041 in tensorflow::tensorrt::convert::ConvertAfterShapes(tensorflow::tensorrt::convert::ConversionParams const&) ()\r\n   from /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n#4  0x00007fff679ac34b in tensorflow::tensorrt::convert::TRTOptimizationPass::Optimize(tensorflow::grappler::Cluster*, tensorflow::grappler::GrapplerItem const&, tensorflow::GraphDef*) ()\r\n   from /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n#5  0x00007fff6a31f937 in tensorflow::grappler::MetaOptimizer::RunOptimizer(tensorflow::grappler::GraphOptimizer*, tensorflow::grappler::Cluster*, tensorflow::grappler::GrapplerItem*, tensorflow::GraphDef*, tensorflow::grappler::MetaOptimizer::GraphOptimizationResult*) () from /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n#6  0x00007fff6a320ccd in tensorflow::grappler::MetaOptimizer::OptimizeGraph(tensorflow::grappler::Cluster*, tensorflow::grappler::GrapplerItem const&, tensorflow::GraphDef*) ()\r\n   from /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n#7  0x00007fff6a322714 in tensorflow::grappler::MetaOptimizer::Optimize(tensorflow::grappler::Cluster*, tensorflow::grappler::GrapplerItem const&, tensorflow::GraphDef*) ()\r\n   from /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n#8  0x00007fff6371cc07 in TF_OptimizeGraph(GCluster, tensorflow::ConfigProto const&, tensorflow::MetaGraphDef const&, bool, std::string const&, bool, TF_Status*) ()\r\n   from /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n#9  0x00007fff637217d6 in _wrap_TF_OptimizeGraph () from /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n#10 0x000000000050a8af in ?? ()\r\n#11 0x000000000050c5b9 in _PyEval_EvalFrameDefault ()\r\n#12 0x0000000000508245 in ?? ()\r\n#13 0x000000000050a080 in ?? ()\r\n#14 0x000000000050aa7d in ?? ()\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37124", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37124/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37124/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37124/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37124", "id": 571963707, "node_id": "MDExOlB1bGxSZXF1ZXN0MzgwNzUxMDkw", "number": 37124, "title": "Optimized fashion-mnist dataset download sourses for developers in China", "user": {"login": "Dynmi", "id": 43609816, "node_id": "MDQ6VXNlcjQzNjA5ODE2", "avatar_url": "https://avatars0.githubusercontent.com/u/43609816?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dynmi", "html_url": "https://github.com/Dynmi", "followers_url": "https://api.github.com/users/Dynmi/followers", "following_url": "https://api.github.com/users/Dynmi/following{/other_user}", "gists_url": "https://api.github.com/users/Dynmi/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dynmi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dynmi/subscriptions", "organizations_url": "https://api.github.com/users/Dynmi/orgs", "repos_url": "https://api.github.com/users/Dynmi/repos", "events_url": "https://api.github.com/users/Dynmi/events{/privacy}", "received_events_url": "https://api.github.com/users/Dynmi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-02-27T10:14:27Z", "updated_at": "2020-03-19T06:17:52Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37124", "html_url": "https://github.com/tensorflow/tensorflow/pull/37124", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37124.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37124.patch"}, "body": "make the fashion-mnist dataset accessable for those developer who can't visit storage.googleapis.com "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37109", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37109/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37109/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37109/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37109", "id": 571750028, "node_id": "MDU6SXNzdWU1NzE3NTAwMjg=", "number": 37109, "title": "Build from source(python2.7 ubuntu 16.04) has error:  AttributeError: attribute '__doc__' of 'type' objects is not writable", "user": {"login": "gms2009", "id": 41393593, "node_id": "MDQ6VXNlcjQxMzkzNTkz", "avatar_url": "https://avatars3.githubusercontent.com/u/41393593?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gms2009", "html_url": "https://github.com/gms2009", "followers_url": "https://api.github.com/users/gms2009/followers", "following_url": "https://api.github.com/users/gms2009/following{/other_user}", "gists_url": "https://api.github.com/users/gms2009/gists{/gist_id}", "starred_url": "https://api.github.com/users/gms2009/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gms2009/subscriptions", "organizations_url": "https://api.github.com/users/gms2009/orgs", "repos_url": "https://api.github.com/users/gms2009/repos", "events_url": "https://api.github.com/users/gms2009/events{/privacy}", "received_events_url": "https://api.github.com/users/gms2009/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ravikyram", "id": 51902062, "node_id": "MDQ6VXNlcjUxOTAyMDYy", "avatar_url": "https://avatars2.githubusercontent.com/u/51902062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ravikyram", "html_url": "https://github.com/ravikyram", "followers_url": "https://api.github.com/users/ravikyram/followers", "following_url": "https://api.github.com/users/ravikyram/following{/other_user}", "gists_url": "https://api.github.com/users/ravikyram/gists{/gist_id}", "starred_url": "https://api.github.com/users/ravikyram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ravikyram/subscriptions", "organizations_url": "https://api.github.com/users/ravikyram/orgs", "repos_url": "https://api.github.com/users/ravikyram/repos", "events_url": "https://api.github.com/users/ravikyram/events{/privacy}", "received_events_url": "https://api.github.com/users/ravikyram/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ravikyram", "id": 51902062, "node_id": "MDQ6VXNlcjUxOTAyMDYy", "avatar_url": "https://avatars2.githubusercontent.com/u/51902062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ravikyram", "html_url": "https://github.com/ravikyram", "followers_url": "https://api.github.com/users/ravikyram/followers", "following_url": "https://api.github.com/users/ravikyram/following{/other_user}", "gists_url": "https://api.github.com/users/ravikyram/gists{/gist_id}", "starred_url": "https://api.github.com/users/ravikyram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ravikyram/subscriptions", "organizations_url": "https://api.github.com/users/ravikyram/orgs", "repos_url": "https://api.github.com/users/ravikyram/repos", "events_url": "https://api.github.com/users/ravikyram/events{/privacy}", "received_events_url": "https://api.github.com/users/ravikyram/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-02-27T00:51:16Z", "updated_at": "2020-03-09T09:41:37Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\nLinux Ubuntu 16.04): \r\n\r\n- TensorFlow installed from (source or\r\nbinary): - TensorFlow version 1.13.2\r\n- Python version: 2.7.12\r\n- Bazel version 0.22.0\r\n- GCC  5.4.0\r\n- CUDA/cuDNN version: - 10.0/7.6.4\r\ncuda-repo-ubuntu1604-10-0-local-10.0.130-410.48_1.0-1_amd64.deb\r\ncuda-repo-ubuntu1604-10-0-local-nvjpeg-update-1_1.0-1_amd64.deb\r\n\r\nlibcudnn7_7.6.4.38-1+cuda10.0_amd64.deb\r\nlibcudnn7-dev_7.6.4.38-1+cuda10.0_amd64.deb\r\nlibnvinfer5_5.0.2-1+cuda10.0_amd64.deb\r\nlibnvinfer-dev_5.0.2-1+cuda10.0_amd64.deb\r\nlibnvinfer-samples_5.0.2-1+cuda10.0_all.deb\r\ntensorrt_5.0.2.6-1+cuda10.0_amd64.deb\r\n./configure    cuda  yes    tensorrt yes\r\n\r\nalso tried on ubuntu 18.04  \r\ntensorflow 1.15.2\r\nbazel 0.24.1\r\ncuda/cudnn   10.2/7.6.5 same problem\r\ntensorrt  nv-tensorrt-repo-cuda10.2-trt6.0.1.8-ga-20191108\r\n--------------------------------\r\n     return *(float*)&ilane;\r\n                      ^\r\ntensorflow/lite/toco/tflite/import.cc: At global scope:\r\ntensorflow/lite/toco/tflite/import.cc:195:6: warning: 'bool toco::tflite::{anonymous}::Verify(const void*, size_t)' defined but not used [-Wunused-function]\r\n bool Verify(const void* buf, size_t len) {\r\n      ^\r\nERROR: /home/weilo/tensorflow-1.13.2/tensorflow/BUILD:579:1: Executing genrule //tensorflow:tf_python_api_gen_v1 failed (Exit 1)\r\nTraceback (most recent call last):\r\n  File \"/home/weilo/.cache/bazel/_bazel_weilo/5dc966cf5c885efffef93d319484bf56/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1_tf_python_api_gen_v1.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 27, in <module>\r\n    from tensorflow.python.tools.api.generator import doc_srcs\r\n  File \"/home/weilo/.cache/bazel/_bazel_weilo/5dc966cf5c885efffef93d319484bf56/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1_tf_python_api_gen_v1.runfiles/org_tensorflow/tensorflow/python/__init__.py\", line 63, in <module>\r\n    from tensorflow.python.framework.framework_lib import *  # pylint: disable=redefined-builtin\r\n  File \"/home/weilo/.cache/bazel/_bazel_weilo/5dc966cf5c885efffef93d319484bf56/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1_tf_python_api_gen_v1.runfiles/org_tensorflow/tensorflow/python/framework/framework_lib.py\", line 52, in <module>\r\n    from tensorflow.python.framework.importer import import_graph_def\r\n  File \"/home/weilo/.cache/bazel/_bazel_weilo/5dc966cf5c885efffef93d319484bf56/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1_tf_python_api_gen_v1.runfiles/org_tensorflow/tensorflow/python/framework/importer.py\", line 28, in <module>\r\n    from tensorflow.python.framework import function\r\n  File \"/home/weilo/.cache/bazel/_bazel_weilo/5dc966cf5c885efffef93d319484bf56/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1_tf_python_api_gen_v1.runfiles/org_tensorflow/tensorflow/python/framework/function.py\", line 36, in <module>\r\n    from tensorflow.python.ops import resource_variable_ops\r\n  File \"/home/weilo/.cache/bazel/_bazel_weilo/5dc966cf5c885efffef93d319484bf56/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1_tf_python_api_gen_v1.runfiles/org_tensorflow/tensorflow/python/ops/resource_variable_ops.py\", line 39, in <module>\r\n    from tensorflow.python.ops import variables\r\n  File \"/home/weilo/.cache/bazel/_bazel_weilo/5dc966cf5c885efffef93d319484bf56/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1_tf_python_api_gen_v1.runfiles/org_tensorflow/tensorflow/python/ops/variables.py\", line 133, in <module>\r\n    \"* `ONLY_FIRST_TOWER`: Deprecated alias for `ONLY_FIRST_REPLICA`.\\n  \")\r\nAttributeError: attribute '__doc__' of 'type' objects is not writable\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nINFO: Elapsed time: 16309.185s, Critical Path: 310.76s\r\nINFO: 15104 processes: 15104 local.\r\nFAILED: Build did NOT complete successfully\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37104", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37104/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37104/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37104/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37104", "id": 571676025, "node_id": "MDU6SXNzdWU1NzE2NzYwMjU=", "number": 37104, "title": "Using Precison metric in compile method raises shape mismatch error", "user": {"login": "aniketbote", "id": 38111546, "node_id": "MDQ6VXNlcjM4MTExNTQ2", "avatar_url": "https://avatars3.githubusercontent.com/u/38111546?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aniketbote", "html_url": "https://github.com/aniketbote", "followers_url": "https://api.github.com/users/aniketbote/followers", "following_url": "https://api.github.com/users/aniketbote/following{/other_user}", "gists_url": "https://api.github.com/users/aniketbote/gists{/gist_id}", "starred_url": "https://api.github.com/users/aniketbote/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aniketbote/subscriptions", "organizations_url": "https://api.github.com/users/aniketbote/orgs", "repos_url": "https://api.github.com/users/aniketbote/repos", "events_url": "https://api.github.com/users/aniketbote/events{/privacy}", "received_events_url": "https://api.github.com/users/aniketbote/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2020-02-26T21:37:21Z", "updated_at": "2020-03-18T23:16:03Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:  Windows 10 Home\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: No mobile device\r\n- **TensorFlow installed from (source or binary)**: Installed using Pip command\r\n- **TensorFlow version (use command below)**: 2.1.0\r\n- **Python version**: 3.6.8\r\n- **Bazel version (if compiling from source)**: No\r\n- **GCC/Compiler version (if compiling from source)**: No\r\n- **CUDA/cuDNN version**: No\r\n- **GPU model and memory**: No\r\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\r\n\r\nI am trying o implement different training metrics for keras sequential API. However when I try to implement precision method I get an error of shape mismatch. The same thing works when I use sigmoid as activation function instead of softmax. \r\n\r\nI am trying to solve binary classification problem.\r\n\r\nCode to create model:\r\n```\r\ndef create_model():\r\n    model = tf.keras.Sequential([\r\n    feature_layer,\r\n    tf.keras.layers.Dense(units = 12, activation='relu', use_bias = True, kernel_initializer= 'glorot_normal', bias_initializer = 'zeros', name = 'd1'),\r\n    tf.keras.layers.Dense(units = 6, activation='relu', use_bias = True, kernel_initializer= 'glorot_normal', bias_initializer = 'zeros', name = 'd2'),\r\n    tf.keras.layers.Dense(units = 2, activation='softmax', name = 'out')\r\n    ])\r\n    model.compile(optimizer='adam',\r\n                  loss='sparse_categorical_crossentropy',\r\n                  metrics=[tf.keras.metrics.Precision()])\r\n    return model\r\n```\r\nThe same code runs when I try to run with sigmoid activation fuction with 1 output unit and Binary Crossentropy as my loss. \r\n\r\n### Source code / logs\r\n```\r\nTraceback (most recent call last):\r\n  File \"4.py\", line 217, in <module>\r\n    callbacks = ALL_CALLBACKS)\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training.py\", line 819, in fit\r\n    use_multiprocessing=use_multiprocessing)\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_v2.py\", line 342, in fit\r\n    total_epochs=epochs)\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_v2.py\", line 128, in run_one_epoch\r\n    batch_outs = execution_function(iterator)\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_v2_utils.py\", line 98, in execution_function\r\n    distributed_function(input_fn))\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\eager\\def_function.py\", line 568, in __call__\r\n    result = self._call(*args, **kwds)\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\eager\\def_function.py\", line 615, in _call\r\n    self._initialize(args, kwds, add_initializers_to=initializers)\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\eager\\def_function.py\", line 497, in _initialize\r\n    *args, **kwds))\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\eager\\function.py\", line 2389, in _get_concrete_function_internal_garbage_collected\r\n    graph_function, _, _ = self._maybe_define_function(args, kwargs)\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\eager\\function.py\", line 2703, in _maybe_define_function\r\n    graph_function = self._create_graph_function(args, kwargs)\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\eager\\function.py\", line 2593, in _create_graph_function\r\n    capture_by_value=self._capture_by_value),\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\framework\\func_graph.py\", line 978, in func_graph_from_py_func\r\n    func_outputs = python_func(*func_args, **func_kwargs)\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\eager\\def_function.py\", line 439, in wrapped_fn\r\n    return weak_wrapped_fn().__wrapped__(*args, **kwds)\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_v2_utils.py\", line 85, in distributed_function\r\n    per_replica_function, args=args)\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\distribute\\distribute_lib.py\", line 763, in experimental_run_v2\r\n    return self._extended.call_for_each_replica(fn, args=args, kwargs=kwargs)\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\distribute\\distribute_lib.py\", line 1819, in call_for_each_replica\r\n    return self._call_for_each_replica(fn, args, kwargs)\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\distribute\\distribute_lib.py\", line 2164, in _call_for_each_replica\r\n    return fn(*args, **kwargs)\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\autograph\\impl\\api.py\", line 292, in wrapper\r\n    return func(*args, **kwargs)\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_v2_utils.py\", line 433, in train_on_batch\r\n    output_loss_metrics=model._output_loss_metrics)\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_eager.py\", line 316, in train_on_batch\r\n    model, outs, targets, sample_weights=sample_weights, masks=masks)\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_eager.py\", line 74, in _eager_metrics_fn\r\n    skip_target_masks=model._prepare_skip_target_masks())\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training.py\", line 2004, in _handle_metrics\r\n    target, output, output_mask))\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training.py\", line 1955, in _handle_per_output_metrics\r\n    metric_fn, y_true, y_pred, weights=weights, mask=mask)\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_utils.py\", line 1155, in call_metric_function\r\n    return metric_fn(y_true, y_pred, sample_weight=weights)\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\keras\\metrics.py\", line 196, in __call__\r\n    replica_local_fn, *args, **kwargs)\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\keras\\distribute\\distributed_training_utils.py\", line 1135, in call_replica_local_fn\r\n    return fn(*args, **kwargs)\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\keras\\metrics.py\", line 179, in replica_local_fn\r\n    update_op = self.update_state(*args, **kwargs)  # pylint: disable=not-callable\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\keras\\utils\\metrics_utils.py\", line 76, in decorated\r\n    update_op = update_state_fn(*args, **kwargs)\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\keras\\metrics.py\", line 1216, in update_state\r\n    sample_weight=sample_weight)\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\keras\\utils\\metrics_utils.py\", line 303, in update_confusion_matrix_variables\r\n    y_pred.shape.assert_is_compatible_with(y_true.shape)\r\n  File \"C:\\Users\\Aniket\\Desktop\\Class\\class_env\\lib\\site-packages\\tensorflow_core\\python\\framework\\tensor_shape.py\", line 1110, in assert_is_compatible_with\r\n    raise ValueError(\"Shapes %s and %s are incompatible\" % (self, other))\r\nValueError: Shapes (None, 2) and (None, 1) are incompatible\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37103", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37103/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37103/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37103/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37103", "id": 571652904, "node_id": "MDU6SXNzdWU1NzE2NTI5MDQ=", "number": 37103, "title": "Add support for more keras.metrics.* to accept from_logits argument.", "user": {"login": "MeghnaNatraj", "id": 8790823, "node_id": "MDQ6VXNlcjg3OTA4MjM=", "avatar_url": "https://avatars0.githubusercontent.com/u/8790823?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MeghnaNatraj", "html_url": "https://github.com/MeghnaNatraj", "followers_url": "https://api.github.com/users/MeghnaNatraj/followers", "following_url": "https://api.github.com/users/MeghnaNatraj/following{/other_user}", "gists_url": "https://api.github.com/users/MeghnaNatraj/gists{/gist_id}", "starred_url": "https://api.github.com/users/MeghnaNatraj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MeghnaNatraj/subscriptions", "organizations_url": "https://api.github.com/users/MeghnaNatraj/orgs", "repos_url": "https://api.github.com/users/MeghnaNatraj/repos", "events_url": "https://api.github.com/users/MeghnaNatraj/events{/privacy}", "received_events_url": "https://api.github.com/users/MeghnaNatraj/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-02-26T20:53:08Z", "updated_at": "2020-03-06T12:28:41Z", "closed_at": null, "author_association": "MEMBER", "body": "**System information** \r\n- Have I written custom code: Yes\r\n- OS Platform and Distribution: Linux\r\n- CUDA/cuDNN version: CUDA Version: 10.1\r\n- GPU model and memory: GeForce GTX 1080\r\n\r\n**Describe the current behavior**\r\nCurrently, in [keras.metrics](https://www.tensorflow.org/api_docs/python/tf/keras/metrics/), all the metrics for binary classification only accept values in the range [0, 1]. This is an issue as all the models in TF2.x tutorials output logits (ranges from [-inf, +inf]) and AVOID using an activation in the last layer such as `sigmoid` (ranges from [0, 1])\r\n\r\nCurrent (preferred way): `keras.layers.Dense(1)                                  # Output range is [-inf, +inf]`\r\nBefore (deprecated):      `keras.layers.Dense(1, activation='sigmoid') # Output range is [0,1]`\r\n\r\nNow, if my model outputs values in the range [-inf, +inf] as per the current preferred way, I CANNOT use any of the following metrics as they all expect values in the range [0, 1]\r\n\r\n```\r\n1. keras.metrics.Precision(name='precision')\r\n2. keras.metrics.BinaryAccuracy(name='accuracy')\r\n3. keras.metrics.Recall(name='recall')\r\n4. keras.metrics.AUC(name='auc')\r\n5. keras.metrics.TruePositives(name='tp')\r\n6. keras.metrics.FalsePositives(name='fp')\r\n7. keras.metrics.TrueNegatives(name='tn')\r\n8. keras.metrics.FalseNegatives(name='fn')\r\n```\r\n\r\nHowever, `tf.keras.metrics.BinaryCrossentropy` is the only metric that accepts both range [-inf, inf] and range[0,1] and this is used in all tutorials. \r\n\r\nThe issue is that I want to use all the 8 metrics mentioned above during training, but I cannot. \r\n\r\n**Describe the expected behavior**\r\nProvide an option to have a `from_logits=True` argument in the 8 metrics given above (and other metrics as well)\r\n\r\n**Standalone code to reproduce the issue** \r\n\r\nPip Install: TensorFlow 2.x and Numpy\r\n```\r\n! pip install tensorflow numpy\r\n```\r\n\r\n**Code**\r\n\r\n```\r\n# INITIALIZE\r\n\r\nimport tensorflow as tf\r\nimport numpy as np\r\n# define dataset\r\ndataset = np.array([[6,148,72,35,0,33.6,0.627,50,1],\r\n[1,85,66,29,0,26.6,0.351,31,0],\r\n[8,183,64,0,0,23.3,0.672,32,1],\r\n[1,89,66,23,94,28.1,0.167,21,0],\r\n[0,137,40,35,168,43.1,2.288,33,1]])\r\n# split into input (X) and output (y) variables\r\nX = dataset[:,0:8]\r\ny = dataset[:,8]\r\n```\r\n\r\n```\r\n# WORKS: Model output is in range [0, 1]\r\n# define the keras model\r\nmodel = tf.keras.models.Sequential([tf.keras.layers.Dense(12, input_dim=8, activation='relu'),\r\n                                    tf.keras.layers.Dense(1, activation='sigmoid')])\r\n# compile the keras model\r\nmodel.compile(loss=tf.keras.losses.BinaryCrossentropy(),\r\n              optimizer=tf.keras.optimizers.RMSprop(),\r\n              metrics=[tf.keras.metrics.Accuracy(name='accuracy'),\r\n                       tf.keras.metrics.Precision(name='precision'),\r\n                       tf.keras.metrics.TruePositives(name='tp')])\r\n# fit the keras model on the dataset\r\nmodel.fit(X, y, epochs=10, batch_size=10, verbose=0)\r\n```\r\n\r\n```\r\n# DOES NOT WORK: Model output is in range [-inf, inf]\r\n# define the keras model\r\nmodel = tf.keras.models.Sequential([tf.keras.layers.Dense(12, input_dim=8, activation='relu'),\r\n                                    tf.keras.layers.Dense(1)])\r\n# compile the keras model\r\nmodel.compile(loss=tf.keras.losses.BinaryCrossentropy(from_logits=True),\r\n              optimizer=tf.keras.optimizers.RMSprop(),\r\n              metrics=[tf.keras.metrics.Accuracy(name='accuracy'),\r\n                       tf.keras.metrics.Precision(name='precision'),\r\n                       tf.keras.metrics.TruePositives(name='tp')])\r\n# fit the keras model on the dataset\r\nmodel.fit(X, y, epochs=10, batch_size=10, verbose=0)\r\n.\r\n.\r\n.\r\n.\r\n.\r\n.\r\n.\r\nInvalidArgumentError: 2 root error(s) found.\r\n  (0) Invalid argument:  assertion failed: [predictions must be <= 1] [Condition x <= y did not hold element-wise:] [x (sequential_8/dense_17/BiasAdd:0) = ] [[22.0911655][62.7297783][35.2793274]...] [y (metrics/precision/Cast_3/x:0) = ] [1]\r\n\t [[{{node metrics/precision/assert_less_equal/Assert/AssertGuard/else/_11/Assert}}]]\r\n\t [[metrics/tp/assert_greater_equal/Assert/AssertGuard/pivot_f/_31/_61]]\r\n  (1) Invalid argument:  assertion failed: [predictions must be <= 1] [Condition x <= y did not hold element-wise:] [x (sequential_8/dense_17/BiasAdd:0) = ] [[22.0911655][62.7297783][35.2793274]...] [y (metrics/precision/Cast_3/x:0) = ] [1]\r\n\t [[{{node metrics/precision/assert_less_equal/Assert/AssertGuard/else/_11/Assert}}]]\r\n0 successful operations.\r\n0 derived errors ignored. [Op:__inference_distributed_function_12253]\r\n\r\nFunction call stack:\r\ndistributed_function -> distributed_function\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37102", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37102/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37102/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37102/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37102", "id": 571645646, "node_id": "MDU6SXNzdWU1NzE2NDU2NDY=", "number": 37102, "title": "MUL doesn't work on gpu delegate with error: Dimension can not be reduced to linear", "user": {"login": "Richard-Yang-Bose", "id": 39103878, "node_id": "MDQ6VXNlcjM5MTAzODc4", "avatar_url": "https://avatars2.githubusercontent.com/u/39103878?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Richard-Yang-Bose", "html_url": "https://github.com/Richard-Yang-Bose", "followers_url": "https://api.github.com/users/Richard-Yang-Bose/followers", "following_url": "https://api.github.com/users/Richard-Yang-Bose/following{/other_user}", "gists_url": "https://api.github.com/users/Richard-Yang-Bose/gists{/gist_id}", "starred_url": "https://api.github.com/users/Richard-Yang-Bose/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Richard-Yang-Bose/subscriptions", "organizations_url": "https://api.github.com/users/Richard-Yang-Bose/orgs", "repos_url": "https://api.github.com/users/Richard-Yang-Bose/repos", "events_url": "https://api.github.com/users/Richard-Yang-Bose/events{/privacy}", "received_events_url": "https://api.github.com/users/Richard-Yang-Bose/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2020-02-26T20:39:52Z", "updated_at": "2020-03-09T18:47:44Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n\r\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Mac OS 10.14.6\r\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: iPhone XR, iPhone Xs\r\nTensorFlow installed from (source or binary): installed from source.\r\nTensorFlow version (use command below): 1.14.0\r\nPython version: 3.6\r\nBazel version (if compiling from source): 1.2.1\r\nGCC/Compiler version (if compiling from source): 4.2.1\r\n\r\n**Describe the current behavior**\r\n`Mul` doesn't work with multiple axis while using gpu delegate. (no issue while using cpu).\r\n\r\nTried to create a dummy tflite graph with simply a multiply operation on input of shape of `[1, 1, n, m]` and variable with the same shape. While verifying with TFLite iOS benchmark app with GPU delegate, the benchmark app reports \"failed to apply GPU delegate\" on the mul operation. Note that the model runs fine without gpu delegate.\r\n\r\n**Describe the expected behavior**\r\n\r\nMul operation works on gpu delegate and supports multiple axis.\r\n\r\n**Code to reproduce the issue**\r\nHere's the dummy model that should reproduce the issue in the TFLite ios benchmark app:\r\n[dummy_model.tflite](https://drive.google.com/file/d/1383fCIA0-Uhlmbo8zR16KW3C6FYDX5un/view?usp=sharing)\r\n\r\n**Other info / logs**\r\n```\r\nGraph: [/private/var/containers/Bundle/Application/DD8D26F4-6BC1-4EFB-A444-EA2FB7F411D9/TFLiteBenchmark.app/dummy_model_2.tflite]\r\nInput layers: [input_feature_placeholder]\r\nInput shapes: [1,1,2,80]\r\nInput value ranges: []\r\nAllow fp16 : [0]\r\nRequire full delegation : [0]\r\nEnable op profiling: [0]\r\nMax profiling buffer entries: [1024]\r\nCSV File to export profiling data to: []\r\nUse gpu : [1]\r\nAllow lower precision in gpu : [1]\r\nGPU delegate wait type : [aggressive]\r\nLoaded model /private/var/containers/Bundle/Application/DD8D26F4-6BC1-4EFB-A444-EA2FB7F411D9/TFLiteBenchmark.app/dummy_model_2.tflite\r\n2020-02-26 15:16:14.857526-0500 TFLiteBenchmark[444:628154] Initialized TensorFlow Lite runtime.\r\n2020-02-26 15:16:14.857843-0500 TFLiteBenchmark[444:628154] Created TensorFlow Lite delegate for Metal.\r\n2020-02-26 15:16:14.858337-0500 TFLiteBenchmark[444:628154] Metal GPU Frame Capture Enabled\r\n2020-02-26 15:16:14.859181-0500 TFLiteBenchmark[444:628154] Metal API Validation Enabled\r\n2020-02-26 15:16:14.932455-0500 TFLiteBenchmark[444:628154] TfLiteGpuDelegate Prepare: MUL: Dimension can not be reduced to linear.\r\n2020-02-26 15:16:14.932670-0500 TFLiteBenchmark[444:628154] Node number 2 (TfLiteMetalDelegate) failed to prepare.\r\n2020-02-26 15:16:14.932800-0500 TFLiteBenchmark[444:628154] tensorflow/lite/kernels/mul.cc:74 input1->type != input2->type (1 != 10)\r\n2020-02-26 15:16:14.932891-0500 TFLiteBenchmark[444:628154] Node number 1 (MUL) failed to prepare.\r\nFailed to apply GPU delegate.\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37099", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37099/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37099/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37099/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37099", "id": 571578378, "node_id": "MDU6SXNzdWU1NzE1NzgzNzg=", "number": 37099, "title": "RuntimeError: Inputs and outputs not all float|uint8|int16 types.Node number 2 (ADD) failed to invoke.", "user": {"login": "stev3", "id": 11080702, "node_id": "MDQ6VXNlcjExMDgwNzAy", "avatar_url": "https://avatars1.githubusercontent.com/u/11080702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stev3", "html_url": "https://github.com/stev3", "followers_url": "https://api.github.com/users/stev3/followers", "following_url": "https://api.github.com/users/stev3/following{/other_user}", "gists_url": "https://api.github.com/users/stev3/gists{/gist_id}", "starred_url": "https://api.github.com/users/stev3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stev3/subscriptions", "organizations_url": "https://api.github.com/users/stev3/orgs", "repos_url": "https://api.github.com/users/stev3/repos", "events_url": "https://api.github.com/users/stev3/events{/privacy}", "received_events_url": "https://api.github.com/users/stev3/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1661751498, "node_id": "MDU6TGFiZWwxNjYxNzUxNDk4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TFLiteConverter", "name": "TFLiteConverter", "color": "bfdadc", "default": false, "description": "For issues related to TFLite converter"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2020-02-26T18:37:52Z", "updated_at": "2020-03-09T19:07:49Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (or github SHA if from source): 1.15\r\n\r\n\r\n**Command used to run the converter or code if you\u2019re using the Python API**\r\nIf possible, please share a link to Colab/Jupyter/any notebook.\r\n\r\n```\r\nimport numpy as np\r\nimport tensorflow as tf\r\nfrom PIL import Image\r\n\r\ninterpreter = tf.lite.Interpreter(model_path=\"out.tflite\")\r\ninterpreter.allocate_tensors()\r\ninput_details = interpreter.get_input_details()\r\noutput_details = interpreter.get_output_details()\r\nprint(input_details)\r\n[{'name': 'image', 'index': 21904, 'shape': array([  3, 270, 480], dtype=int32), 'dtype': <class 'numpy.float32'>, 'quantization': (0.0, 0)}]\r\nprint(output_details)\r\n[{'name': 'action', 'index': 7204, 'shape': array([], dtype=int32), 'dtype': <class 'numpy.float32'>, 'quantization': (0.0, 0)}]\r\ninput_shape = input_details[0]['shape']\r\ninput_data = np.array(np.random.random_sample(input_shape), dtype=np.float32)\r\ninterpreter.set_tensor(input_details[0]['index'], input_data)\r\ninterpreter.invoke()\r\noutput_data = interpreter.get_tensor(output_details[0]['index'])\r\nprint(output_data)\r\n```\r\n\r\n**The output from the converter invocation**\r\n\r\n```\r\nRuntimeError: Inputs and outputs not all float|uint8|int16 types.Node number 2 (ADD) failed to invoke.\r\n```\r\n\r\n**Also, please include a link to the saved model or GraphDef**\r\n\r\n```\r\nhttps://we.tl/t-lWH3XmYihS <-- .pb\r\nhttps://we.tl/t-Bkid4ThzN1 <-- .tflite\r\n```\r\n\r\n**Failure details**\r\nThe conversion is successful and I can run inference on the .pb, but I get the following error when I run inference on the tflite file.\r\n\r\n```\r\nRuntimeError: Inputs and outputs not all float|uint8|int16 types.Node number 2 (ADD) failed to invoke.\r\n```\r\n\r\n\r\n**Any other info / logs**\r\n\r\nModel trained on pytorch mobilenetV2 arch, converted to onnx, and converted to tensorflow."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37097", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37097/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37097/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37097/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37097", "id": 571520528, "node_id": "MDExOlB1bGxSZXF1ZXN0MzgwMzkyNzgx", "number": 37097, "title": "Upgrade nanopb to latest release.", "user": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1918510949, "node_id": "MDU6TGFiZWwxOTE4NTEwOTQ5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/waiting%20for%20patch%20release", "name": "waiting for patch release", "color": "e8c25c", "default": false, "description": "PR will be reviewed and merged only if we do a patch release since PR is not on master branch"}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2020-02-26T16:49:14Z", "updated_at": "2020-03-18T17:14:41Z", "closed_at": null, "author_association": "COLLABORATOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37097", "html_url": "https://github.com/tensorflow/tensorflow/pull/37097", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37097.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37097.patch"}, "body": "Fixes security vulnerability reported in #37011\r\n\r\nPiperOrigin-RevId: 297248686\r\nChange-Id: Ib24b109c8a36b8673842b2f2ebb771406e5fa022"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37096", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37096/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37096/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37096/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37096", "id": 571520511, "node_id": "MDExOlB1bGxSZXF1ZXN0MzgwMzkyNzY3", "number": 37096, "title": "Upgrade nanopb to latest release.", "user": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1918510949, "node_id": "MDU6TGFiZWwxOTE4NTEwOTQ5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/waiting%20for%20patch%20release", "name": "waiting for patch release", "color": "e8c25c", "default": false, "description": "PR will be reviewed and merged only if we do a patch release since PR is not on master branch"}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-26T16:49:12Z", "updated_at": "2020-03-18T17:14:41Z", "closed_at": null, "author_association": "COLLABORATOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37096", "html_url": "https://github.com/tensorflow/tensorflow/pull/37096", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37096.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37096.patch"}, "body": "Fixes security vulnerability reported in #37011\r\n\r\nPiperOrigin-RevId: 297248686\r\nChange-Id: Ib24b109c8a36b8673842b2f2ebb771406e5fa022"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37095", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37095/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37095/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37095/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37095", "id": 571520482, "node_id": "MDExOlB1bGxSZXF1ZXN0MzgwMzkyNzQy", "number": 37095, "title": "Upgrade nanopb to latest release.", "user": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1918510949, "node_id": "MDU6TGFiZWwxOTE4NTEwOTQ5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/waiting%20for%20patch%20release", "name": "waiting for patch release", "color": "e8c25c", "default": false, "description": "PR will be reviewed and merged only if we do a patch release since PR is not on master branch"}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-26T16:49:10Z", "updated_at": "2020-03-18T17:14:41Z", "closed_at": null, "author_association": "COLLABORATOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37095", "html_url": "https://github.com/tensorflow/tensorflow/pull/37095", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37095.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37095.patch"}, "body": "Fixes security vulnerability reported in #37011\r\n\r\nPiperOrigin-RevId: 297248686\r\nChange-Id: Ib24b109c8a36b8673842b2f2ebb771406e5fa022"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37094", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37094/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37094/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37094/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37094", "id": 571395366, "node_id": "MDU6SXNzdWU1NzEzOTUzNjY=", "number": 37094, "title": "I have to install TF 1.8!", "user": {"login": "FB43", "id": 61505722, "node_id": "MDQ6VXNlcjYxNTA1NzIy", "avatar_url": "https://avatars1.githubusercontent.com/u/61505722?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FB43", "html_url": "https://github.com/FB43", "followers_url": "https://api.github.com/users/FB43/followers", "following_url": "https://api.github.com/users/FB43/following{/other_user}", "gists_url": "https://api.github.com/users/FB43/gists{/gist_id}", "starred_url": "https://api.github.com/users/FB43/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FB43/subscriptions", "organizations_url": "https://api.github.com/users/FB43/orgs", "repos_url": "https://api.github.com/users/FB43/repos", "events_url": "https://api.github.com/users/FB43/events{/privacy}", "received_events_url": "https://api.github.com/users/FB43/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2020-02-26T14:02:37Z", "updated_at": "2020-03-01T15:34:05Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows (10 or 8.1)\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version:1.8\r\n- Python version:3.6\r\n- Installed using virtualenv? pip? conda?:both\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:9.1\r\n- GPU model and memory:NVIDIA GeForce GTX 760\r\n\r\n\r\n\r\n**Describe the problem**\r\nHello, the computing capabilities of my GPU is 3.0 and TF doesn't work in this case. I've read that it's possible to run the 1.8 version here https://medium.com/@naarkie/using-tensorflow-gpu-on-a-compute-3-0-graphics-card-in-windows-4184f4228fe9\r\nBut impossible to find the good package.\r\nI need it to use the Visions of Chaos software (fractal art).\r\nMay somebody help me?\r\nThanks for all.\r\nBest regards,\r\nFran\u00e7ois\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37093", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37093/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37093/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37093/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37093", "id": 571381229, "node_id": "MDU6SXNzdWU1NzEzODEyMjk=", "number": 37093, "title": "Reading TFRecord through tf.data extremely slow in comparison to Pandas (MWE)", "user": {"login": "mimxrt", "id": 53339396, "node_id": "MDQ6VXNlcjUzMzM5Mzk2", "avatar_url": "https://avatars1.githubusercontent.com/u/53339396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mimxrt", "html_url": "https://github.com/mimxrt", "followers_url": "https://api.github.com/users/mimxrt/followers", "following_url": "https://api.github.com/users/mimxrt/following{/other_user}", "gists_url": "https://api.github.com/users/mimxrt/gists{/gist_id}", "starred_url": "https://api.github.com/users/mimxrt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mimxrt/subscriptions", "organizations_url": "https://api.github.com/users/mimxrt/orgs", "repos_url": "https://api.github.com/users/mimxrt/repos", "events_url": "https://api.github.com/users/mimxrt/events{/privacy}", "received_events_url": "https://api.github.com/users/mimxrt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-02-26T13:47:10Z", "updated_at": "2020-02-27T18:24:54Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04.3 LTS\r\n- TensorFlow installed from (source or binary): binary pip\r\n- TensorFlow version (use command below): v2.1.0-rc2-17-ge5bf8de 2.1.0\r\n- Python version: Python 3.7.6\r\n- CUDA/cuDNN version: 7.6.4.38-1\r\n- GPU model and memory: Quadro RTX 6000 22752 MB\r\n\r\n**Describe the current behavior**\r\n\r\nIn the example below, first `tf.Data` is used to read data from dummy `TFRecord` files. Then pandas is used to read the same data from serialized `pandas.DataFrame` pickle-files. Both pipelines read chunks of `batch_size=512` elements from the data to the end (in the example, 10 files of 210083x135 floats).\r\n\r\nIn comparison, the performance of the `tf.Dataset` is very slow. Pandas reads the data  in ~**1.86 s** (~4.52 MB/s) vs `tf.data` in ~**51.3 s** (~0.16 MB/s).\r\n\r\nThe pipeline (in my understanding) does nothing more than to read the files from disk into batched junks in memory. Please help me understand and resolve this performance gap. \r\n\r\nThis issue induces a huge performance hit in my model training, which uses a slightly more complicated pipeline.\r\n\r\n**Describe the expected behavior**\r\n\r\nProcessing TFRecord files should be equally fast if not faster than processing pickle-files with pandas.\r\n\r\n**Standalone code to reproduce the issue** \r\n\r\n```\r\nimport math\r\nimport time\r\nimport pandas\r\nimport random\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\nprint(\"TensorFlow {}\".format(tf.__version__))\r\n\r\nnum_features = 130\r\nnum_labels = 5\r\nbatch_size = 512\r\nwin_size = 2048\r\nlen_max = 210083\r\n\r\n#########################################\r\n# dummy data\r\n#########################################\r\n\r\nl1 = len_max\r\nX1, Y1 = (np.ones((l1, num_features), dtype=np.float32), np.zeros((l1, num_labels), dtype=np.float32))\r\n\r\nk = 10\r\n\r\n#########################################\r\n# create dummy tfrecord file(s)\r\n#########################################\r\n\r\ndef write_tfrecord(X, Y, fn):\r\n    with tf.Graph().as_default():\r\n        ds = tf.data.Dataset.from_tensor_slices((X, Y))\r\n\r\n        sstring = ds.map(lambda *x: \r\n           tf.reshape(tf.py_function(lambda *v:\r\n               tf.train.Example(features=tf.train.Features(feature={\r\n                   \"features\": tf.train.Feature(float_list=tf.train.FloatList(value=v[0].numpy())),\r\n                   \"label\": tf.train.Feature(float_list=tf.train.FloatList(value=v[1].numpy())),\r\n               })).SerializeToString(), x, tf.string\r\n           ), ())\r\n        )\r\n\r\n        writer = tf.data.experimental.TFRecordWriter(fn)\r\n        writer_op = writer.write(sstring)\r\n\r\n        sess = tf.compat.v1.Session()\r\n        sess.run(tf.compat.v1.global_variables_initializer())\r\n        sess.run(writer_op)\r\n        sess.close()\r\n\r\nfiles_base_tf = [\"./temp3.tfrecord\"]\r\n\r\nwrite_tfrecord(X1, Y1, files_base_tf[0])\r\n\r\n#########################################\r\n# create dummy pandas pickle file(s)\r\n#########################################\r\n\r\ndf = pandas.DataFrame(np.concatenate((X1, Y1), axis=1))\r\n\r\nfiles_base_pd = [\"./temp3.pkl\"]\r\n\r\ndf.to_pickle(files_base_pd[0])\r\n\r\n#########################################\r\n# take k random files as tf.Dataset\r\n#########################################\r\n\r\n_files = random.choices(files_base_tf, k=k)\r\n\r\nds_fs = tf.data.Dataset.list_files(_files, shuffle=False, seed=1)\r\nfs_len = 0\r\nfor f in ds_fs:\r\n    fs_len += 1\r\nprint(\"Reading {} tfrecord files...\".format(fs_len))\r\n\r\n# prepare the tf.Dataset\r\n\r\ndef prep_ds_file(file):\r\n    _ds = tf.data.TFRecordDataset(file)\r\n    _ds = _ds.map(lambda x: tf.io.parse_single_example(x, {\r\n        \"features\": tf.io.FixedLenFeature([num_features], tf.float32),\r\n        \"label\": tf.io.FixedLenFeature([num_labels], tf.float32),\r\n    #}), num_parallel_calls=tf.data.experimental.AUTOTUNE)\r\n    }), num_parallel_calls=1)\r\n    #print(_ds)\r\n    \r\n    _ds = _ds.flat_map(lambda v: tf.data.Dataset.from_tensors((v[\"features\"], v[\"label\"])))\r\n    #print(_ds)\r\n\r\n    _ds = _ds.batch(batch_size, drop_remainder=False)\r\n    print(_ds)\r\n    \r\n    return _ds\r\n\r\n\r\ndef prep_ds(fs):\r\n    _ds = fs.interleave(prep_ds_file, num_parallel_calls=tf.data.experimental.AUTOTUNE)\r\n    print(_ds)\r\n\r\n    return _ds\r\n\r\n\r\nds = prep_ds(ds_fs)\r\n\r\n#########################################\r\n# read/use the tf.Dataset\r\n#########################################\r\n\r\nshapes_tf = []\r\n\r\nts = time.perf_counter()\r\ni = 0\r\nfor e in ds:\r\n    v = (lambda: [x.numpy() for x in e])()\r\n    #shapes_tf.append([x.shape for x in v])\r\n    i += 1\r\nte = time.perf_counter()\r\nprint(\"Duration TFRecord ({} rounds): {} s\".format(i, (te - ts)))\r\nprint(\"Speed: {} MB/s\".format((k*l1*4/1000/1000/(te - ts))))\r\n\r\n#########################################\r\n# take k random files as pandas DataFrame\r\n#########################################\r\n\r\n_files = random.choices(files_base_pd, k=k)\r\n\r\n#########################################\r\n# read/use the pandas DataFrame\r\n#########################################\r\n\r\nshapes_pd = []\r\n\r\nts = time.perf_counter()\r\ni = 0\r\nfor f in _files:\r\n    df = pandas.read_pickle(f)\r\n    n = math.ceil(len(df.index) / batch_size)\r\n    for b in range(n):\r\n        #print(df.iloc[(b*batch_size):((b+1)*batch_size)].shape)\r\n        v = (lambda: df.iloc[(b*batch_size):((b+1)*batch_size)].to_numpy())()\r\n        #shapes_pd.append(v.shape)\r\n        i += 1\r\nte = time.perf_counter()\r\nprint(\"Duration Pandas ({} rounds): {} s\".format(i, (te - ts)))\r\nprint(\"Speed: {} MB/s\".format((k*l1*4/1000/1000/(te - ts))))\r\n```\r\n\r\n**Other info / logs**\r\n\r\nOutput:\r\n```\r\nTensorFlow 2.1.0\r\nReading 10 tfrecord files...\r\n<BatchDataset shapes: ((None, 130), (None, 5)), types: (tf.float32, tf.float32)>\r\n<ParallelInterleaveDataset shapes: ((None, 130), (None, 5)), types: (tf.float32, tf.float32)>\r\nDuration TFRecord (4110 rounds): 51.2759778869804 s\r\nSpeed: 0.1638841489970629 MB/s\r\nDuration Pandas (4110 rounds): 1.8584379029925913 s\r\nSpeed: 4.521711479554074 MB/s\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37088", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37088/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37088/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37088/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37088", "id": 571239904, "node_id": "MDU6SXNzdWU1NzEyMzk5MDQ=", "number": 37088, "title": "network_tester test failed with NN with 28x28 px input image but succeded with NN with 14x14 px input", "user": {"login": "mr-goldhands", "id": 3122202, "node_id": "MDQ6VXNlcjMxMjIyMDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/3122202?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mr-goldhands", "html_url": "https://github.com/mr-goldhands", "followers_url": "https://api.github.com/users/mr-goldhands/followers", "following_url": "https://api.github.com/users/mr-goldhands/following{/other_user}", "gists_url": "https://api.github.com/users/mr-goldhands/gists{/gist_id}", "starred_url": "https://api.github.com/users/mr-goldhands/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mr-goldhands/subscriptions", "organizations_url": "https://api.github.com/users/mr-goldhands/orgs", "repos_url": "https://api.github.com/users/mr-goldhands/repos", "events_url": "https://api.github.com/users/mr-goldhands/events{/privacy}", "received_events_url": "https://api.github.com/users/mr-goldhands/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1589976566, "node_id": "MDU6TGFiZWwxNTg5OTc2NTY2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:micro", "name": "comp:micro", "color": "3e2eea", "default": false, "description": "Related to TensorFlow Lite Microcontrollers"}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, {"login": "MeghnaNatraj", "id": 8790823, "node_id": "MDQ6VXNlcjg3OTA4MjM=", "avatar_url": "https://avatars0.githubusercontent.com/u/8790823?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MeghnaNatraj", "html_url": "https://github.com/MeghnaNatraj", "followers_url": "https://api.github.com/users/MeghnaNatraj/followers", "following_url": "https://api.github.com/users/MeghnaNatraj/following{/other_user}", "gists_url": "https://api.github.com/users/MeghnaNatraj/gists{/gist_id}", "starred_url": "https://api.github.com/users/MeghnaNatraj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MeghnaNatraj/subscriptions", "organizations_url": "https://api.github.com/users/MeghnaNatraj/orgs", "repos_url": "https://api.github.com/users/MeghnaNatraj/repos", "events_url": "https://api.github.com/users/MeghnaNatraj/events{/privacy}", "received_events_url": "https://api.github.com/users/MeghnaNatraj/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-02-26T10:45:38Z", "updated_at": "2020-03-05T19:25:35Z", "closed_at": null, "author_association": "NONE", "body": "@tensorflow/micro\r\n\r\n**System information**\r\n- Host OS Platform and Distribution (e.g., Linux Ubuntu 16.04):  Ubuntu 16.04\r\n- TensorFlow installed from (source or binary):  source\r\n- Tensorflow version (commit SHA if source): 1881d32ef8e998e6f1a403856dd44acbba2aad7c\r\n- Target platform (e.g. Arm Mbed OS, Arduino Nano 33 etc.): ESP32, x86\r\n\r\n**Describe the problem**\r\nI am implementing the Fashion MNIST classification project on ESP32.\r\nI have successfully implemented NN with input image size 14x14 pixels.\r\nThen I changed only the Input image size to 28x28 in NN without changing the structure of NN and was not able to obtain correct predictions with TFL Micro.\r\nThen I found [network_tester example](https://github.com/tensorflow/tensorflow/tree/master/tensorflow/lite/micro/examples/network_tester) in the TF repository and decided to use it to test my NN with TFL Micro on x86.\r\n\r\nI have refactored original **network_tester example** to:\r\n1. feed the input image to NN as a 2-dimensional array.\r\n2. be able to compare float-type predictions.\r\n\r\nI have attached here both .tflite trained models and sources with output results.\r\n\r\n\r\n**Please provide the exact sequence of commands/steps when you ran into the problem**\r\n\r\n1. Be sure all TFL Micro unit tests are succeeded. Run command `make -f tensorflow/lite/micro/tools/make/Makefile test`. Expected result: all tests passed successfully.\r\n\r\n2. Unzip `network_tester.zip` file.\r\n\r\n3. Replace original `network_tester_test.cc` file in TensorFlow source directory `tensorflow/tensorflow/lite/micro/examples/network_tester/` by file contained in archive.\r\n\r\n4. Build a test with 14x14 input NN. See parameters to build in `make_14x14.sh` file.\r\n\r\n5. Run test from `tensorflow/lite/micro/tools/make/gen/linux_x86_64/bin` directory. See success.\r\n\r\n6. Build a test with 28x28 input NN. See parameters to build in `make_28x28.sh` file.\r\n\r\n7. Run test from `tensorflow/lite/micro/tools/make/gen/linux_x86_64/bin` directory. **Test failed**.\r\n\r\nAll source files added to provided archive.\r\n\r\n[network_tester.zip](https://github.com/tensorflow/tensorflow/files/4255010/network_tester.zip)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37087", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37087/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37087/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37087/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37087", "id": 571236242, "node_id": "MDExOlB1bGxSZXF1ZXN0MzgwMTQ1ODIy", "number": 37087, "title": "docs: add tip to prefer tf.shape(x) over x.shape in custom layers/models", "user": {"login": "janosh", "id": 30958850, "node_id": "MDQ6VXNlcjMwOTU4ODUw", "avatar_url": "https://avatars0.githubusercontent.com/u/30958850?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janosh", "html_url": "https://github.com/janosh", "followers_url": "https://api.github.com/users/janosh/followers", "following_url": "https://api.github.com/users/janosh/following{/other_user}", "gists_url": "https://api.github.com/users/janosh/gists{/gist_id}", "starred_url": "https://api.github.com/users/janosh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janosh/subscriptions", "organizations_url": "https://api.github.com/users/janosh/orgs", "repos_url": "https://api.github.com/users/janosh/repos", "events_url": "https://api.github.com/users/janosh/events{/privacy}", "received_events_url": "https://api.github.com/users/janosh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-26T10:39:56Z", "updated_at": "2020-03-03T10:39:42Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37087", "html_url": "https://github.com/tensorflow/tensorflow/pull/37087", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37087.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37087.patch"}, "body": "See #36991 for details."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37086", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37086/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37086/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37086/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37086", "id": 571232829, "node_id": "MDU6SXNzdWU1NzEyMzI4Mjk=", "number": 37086, "title": "Misleading convert error when no concrete functions are given", "user": {"login": "PRDrum5", "id": 30151730, "node_id": "MDQ6VXNlcjMwMTUxNzMw", "avatar_url": "https://avatars3.githubusercontent.com/u/30151730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PRDrum5", "html_url": "https://github.com/PRDrum5", "followers_url": "https://api.github.com/users/PRDrum5/followers", "following_url": "https://api.github.com/users/PRDrum5/following{/other_user}", "gists_url": "https://api.github.com/users/PRDrum5/gists{/gist_id}", "starred_url": "https://api.github.com/users/PRDrum5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PRDrum5/subscriptions", "organizations_url": "https://api.github.com/users/PRDrum5/orgs", "repos_url": "https://api.github.com/users/PRDrum5/repos", "events_url": "https://api.github.com/users/PRDrum5/events{/privacy}", "received_events_url": "https://api.github.com/users/PRDrum5/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1661751498, "node_id": "MDU6TGFiZWwxNjYxNzUxNDk4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TFLiteConverter", "name": "TFLiteConverter", "color": "bfdadc", "default": false, "description": "For issues related to TFLite converter"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-02-26T10:34:32Z", "updated_at": "2020-03-18T21:17:14Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 18.04):\r\n- TensorFlow installed from source:\r\n- TensorFlow version 2.1.0:\r\n\r\n\r\n**Command used to run the converter or code if you\u2019re using the Python API**\r\nIf possible, please share a link to Colab/Jupyter/any notebook.\r\n\r\n```\r\nconverter = tf.lite.TFLiteConverter.from_saved_model(model_path)\r\ntflite_model = converter.convert()\r\n```\r\n\r\n**The output from the converter invocation**\r\n\r\n```\r\nValueError: This converter can only convert a single ConcreteFunction. Converting multiple functions is under development.\r\n```\r\n\r\n**Failure details**\r\nWhen attempting to convert a model in which no ConcreteFunctions have been defined, the error message implies that there are multiple.\r\n\r\nAs someone new coming to TF and TFLite, I found this very confusing as to where my concrete functions were being defined. \r\n\r\nInspecting the code from https://github.com/tensorflow/tensorflow/blob/v2.1.0/tensorflow/lite/python/lite.py in the ```convert``` method at line 417 the Value Error is thrown when anything but 1 concrete function is defined in the model (rightly so) but the error message implies that more than one have been defined.\r\n\r\n```\r\nif len(self._funcs) != 1:\r\n      raise ValueError(\"This converter can only convert a single \"\r\n                       \"ConcreteFunction. Converting multiple functions is \"\r\n                       \"under development.\")\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37080", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37080/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37080/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37080/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37080", "id": 571091227, "node_id": "MDExOlB1bGxSZXF1ZXN0MzgwMDI1NzY2", "number": 37080, "title": "Update docstring for Conv3DTranspose", "user": {"login": "jaketae", "id": 25360440, "node_id": "MDQ6VXNlcjI1MzYwNDQw", "avatar_url": "https://avatars1.githubusercontent.com/u/25360440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaketae", "html_url": "https://github.com/jaketae", "followers_url": "https://api.github.com/users/jaketae/followers", "following_url": "https://api.github.com/users/jaketae/following{/other_user}", "gists_url": "https://api.github.com/users/jaketae/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaketae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaketae/subscriptions", "organizations_url": "https://api.github.com/users/jaketae/orgs", "repos_url": "https://api.github.com/users/jaketae/repos", "events_url": "https://api.github.com/users/jaketae/events{/privacy}", "received_events_url": "https://api.github.com/users/jaketae/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1178505529, "node_id": "MDU6TGFiZWwxMTc4NTA1NTI5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/prtype:bugfix", "name": "prtype:bugfix", "color": "159b2e", "default": false, "description": "PR to fix a bug"}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-26T06:03:56Z", "updated_at": "2020-02-28T11:55:11Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37080", "html_url": "https://github.com/tensorflow/tensorflow/pull/37080", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37080.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37080.patch"}, "body": "As mentioned in #29841, `dillation_rate` is not a supported feature for `Conv3DTranspose` as of yet. Until this feature is supported, it is misleading to show `dilation_rate` as an available parameter in the docstring."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37077", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37077/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37077/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37077/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37077", "id": 571067796, "node_id": "MDU6SXNzdWU1NzEwNjc3OTY=", "number": 37077, "title": "Tensorflow Workspace not configured for android build", "user": {"login": "t-niroc", "id": 60914901, "node_id": "MDQ6VXNlcjYwOTE0OTAx", "avatar_url": "https://avatars0.githubusercontent.com/u/60914901?v=4", "gravatar_id": "", "url": "https://api.github.com/users/t-niroc", "html_url": "https://github.com/t-niroc", "followers_url": "https://api.github.com/users/t-niroc/followers", "following_url": "https://api.github.com/users/t-niroc/following{/other_user}", "gists_url": "https://api.github.com/users/t-niroc/gists{/gist_id}", "starred_url": "https://api.github.com/users/t-niroc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/t-niroc/subscriptions", "organizations_url": "https://api.github.com/users/t-niroc/orgs", "repos_url": "https://api.github.com/users/t-niroc/repos", "events_url": "https://api.github.com/users/t-niroc/events{/privacy}", "received_events_url": "https://api.github.com/users/t-niroc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-02-26T04:50:50Z", "updated_at": "2020-02-28T00:10:48Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: NA\r\n- TensorFlow installed from (source or binary): \r\n- TensorFlow version: \r\n- Python version: 3.7\r\n- Installed using virtualenv? pip? conda?:\r\n- Bazel version (if compiling from source): 1.2.1\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n\r\n\r\n**Describe the problem**\r\nI am trying to build tensorflow lite locally. I am following the steps mentioned here : https://www.tensorflow.org/lite/guide/android\r\nWhen I run ./configure script in root directory, there should be an option for interactively configuring the ./workspace for android builds. But I don't get that option and I am facing a lot of errors during build time. Is there any way I can know the variables that are required to be set? Or any way to fix this ? \r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\nC:\\Users\\nikhil\\tensorflow>.\\configure                                                                                                                                   Extracting Bazel installation...                                                                                                                                                                           \r\nYou have bazel 1.2.1 installed.                                                                                                                                           Please specify the location of python. [Default is C:\\Users\\nikhil\\AppData\\Local\\Programs\\Python\\Python37\\python.exe]:                                                                                                                                                                                                                                                                                                                                                                                                       Found possible Python library paths:                                                                                                                                        C:\\Users\\nikhil\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages                                                                                               Please input the desired Python library path to use.  Default is [C:\\Users\\nikhil\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages]                                                                                                                                                                                                        Do you wish to build TensorFlow with XLA JIT support? [y/N]:                                                                                                              No XLA JIT support will be enabled for TensorFlow.                                                                                                                                                                                                                                                                                                  Do you wish to build TensorFlow with ROCm support? [y/N]:                                                                                                                 No ROCm support will be enabled for TensorFlow.                                                                                                                                                                                                                                                                                                     Do you wish to build TensorFlow with CUDA support? [y/N]:                                                                                                                 No CUDA support will be enabled for TensorFlow.                                                                                                                                                                                                                                                                                                     Please specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is /arch:AVX]:                                                                                                                                                                                                                                                                                                                                                                                             Would you like to override eigen strong inline for some C++ compilation to reduce the compilation time? [Y/n]:                                                            \r\nEigen strong inline overridden.                                                                                                                                                                                                                                                                                                                     Preconfigured Bazel build configs. You can use any of the below by adding \"--config=<>\" to your build command. See .bazelrc for more details.                                     \r\n--config=mkl            # Build with MKL support.                                                                                                                         --config=monolithic     # Config for mostly static monolithic build.                                                                                                      --config=ngraph         # Build with Intel nGraph support.                                                                                                                --config=numa           # Build with NUMA support.                                                                                                                        --config=dynamic_kernels        # (Experimental) Build kernels into separate shared objects.                                                                              --config=v2             # Build TensorFlow 2.x instead of 1.x.                                                                                                    Preconfigured Bazel build configs to DISABLE default on features:                                                                                                                 --config=noaws          # Disable AWS S3 filesystem support.                                                                                                              --config=nogcp          # Disable GCP support.                                                                                                                            --config=nohdfs         # Disable HDFS support.                                                                                                                           --config=nonccl         # Disable NVIDIA NCCL support.                                                                                                            Configuration finished\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37076", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37076/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37076/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37076/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37076", "id": 571053484, "node_id": "MDU6SXNzdWU1NzEwNTM0ODQ=", "number": 37076, "title": "v2.1.0 build fails with TensorRT 6 and 7", "user": {"login": "eugeneswalker", "id": 38933153, "node_id": "MDQ6VXNlcjM4OTMzMTUz", "avatar_url": "https://avatars2.githubusercontent.com/u/38933153?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eugeneswalker", "html_url": "https://github.com/eugeneswalker", "followers_url": "https://api.github.com/users/eugeneswalker/followers", "following_url": "https://api.github.com/users/eugeneswalker/following{/other_user}", "gists_url": "https://api.github.com/users/eugeneswalker/gists{/gist_id}", "starred_url": "https://api.github.com/users/eugeneswalker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eugeneswalker/subscriptions", "organizations_url": "https://api.github.com/users/eugeneswalker/orgs", "repos_url": "https://api.github.com/users/eugeneswalker/repos", "events_url": "https://api.github.com/users/eugeneswalker/events{/privacy}", "received_events_url": "https://api.github.com/users/eugeneswalker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-02-26T03:59:50Z", "updated_at": "2020-03-12T02:14:23Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Inside Docker container, base image `ubuntu:bionic`\r\n- Ubuntu 18.04, x86_64\r\n- TensorFlow from-source build, checked out @ tag `v2.1.0`\r\n- Python 3.7.5\r\n- Bazel 0.29.1\r\n- GCC 7.4.0\r\n- CUDA 10.1.243, CuDNN 7\r\n- TensorRT-6.0.1.5\r\n- Quadro GV100 32gb\r\n\r\nTrying to build TensorFlow 2.1.0 in the above environment is failing consistently. I have tried TensorRT 6 and 7, CUDA 10.1.243 and 10.2.89, and it always fails with the message below. <em>**If I try the build without TensorRT, it succeeds**</em>.\r\n\r\n<b>Build invocation</b>\r\n```\r\nbazel build --jobs=36 --config=opt --config=cuda --config=v2 //tensorflow/tools/pip_package:build_pip_package\r\n```\r\n\r\n<b>Error output</b>\r\n```\r\nERROR: /tensorflow/tensorflow/python/keras/api/BUILD:115:1: Executing genrule //tensorflow/python/keras/api:keras_python_api_gen_compat_v1 failed (Exit 1)\r\nTraceback (most recent call last):\r\n  File \"/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_1_keras_python_api_gen_compat_v1.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 27, in <module>\r\n    from tensorflow.python.tools.api.generator import doc_srcs\r\n  File \"/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_1_keras_python_api_gen_compat_v1.runfiles/org_tensorflow/tensorflow/python/__init__.py\", line 85, in <module>\r\n    from tensorflow.python.ops.standard_ops import *\r\n  File \"/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_1_keras_python_api_gen_compat_v1.runfiles/org_tensorflow/tensorflow/python/ops/standard_ops.py\", line 117, in <module>\r\n    from tensorflow.python.compiler.tensorrt import trt_convert as trt\r\n  File \"/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_1_keras_python_api_gen_compat_v1.runfiles/org_tensorflow/tensorflow/python/compiler/tensorrt/__init__.py\", line 22, in <module>\r\n    from tensorflow.python.compiler.tensorrt import trt_convert as trt\r\n  File \"/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_1_keras_python_api_gen_compat_v1.runfiles/org_tensorflow/tensorflow/python/compiler/tensorrt/trt_convert.py\", line 28, in <module>\r\n    from tensorflow.compiler.tf2tensorrt import wrap_py_utils\r\n  File \"/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_1_keras_python_api_gen_compat_v1.runfiles/org_tensorflow/tensorflow/compiler/tf2tensorrt/wrap_py_utils.py\", line 28, in <module>\r\n    _wrap_py_utils = swig_import_helper()\r\n  File \"/root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_1_keras_python_api_gen_compat_v1.runfiles/org_tensorflow/tensorflow/compiler/tf2tensorrt/wrap_py_utils.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_wrap_py_utils', fp, pathname, description)\r\n  File \"/usr/lib/python3.7/imp.py\", line 242, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/usr/lib/python3.7/imp.py\", line 342, in load_dynamic\r\n    return _load(spec)\r\nImportError: /root/.cache/bazel/_bazel_root/68a62076e91007a7908bc42a32e4cff9/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_1_keras_python_api_gen_compat_v1.runfiles/org_tensorflow/tensorflow/compiler/tf2tensorrt/_wrap_py_utils.so: undefined symbol: _ZN15stream_executor14StreamExecutor18EnablePeerAccessToEPS0_\r\n----------------\r\nNote: The failure of target //tensorflow/python/keras/api:create_tensorflow.python_api_1_keras_python_api_gen_compat_v1 (with exit code 1) may have been caused by the fact that it is a Python 2 program that was built in the host configuration, which uses Python 3. You can change the host configuration (for the entire build) to instead use Python 2 by setting --host_force_python=PY2.\r\n\r\nIf this error started occurring in Bazel 0.27 and later, it may be because the Python toolchain now enforces that targets analyzed as PY2 and PY3 run under a Python 2 and Python 3 interpreter, respectively. See https://github.com/bazelbuild/bazel/issues/7899 for more information.\r\n----------------\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nERROR: /tensorflow/tensorflow/python/tools/BUILD:80:1 Executing genrule //tensorflow/python/keras/api:keras_python_api_gen failed (Exit 1)\r\nINFO: Elapsed time: 3470.734s, Critical Path: 462.21s\r\nINFO: 26665 processes: 26665 local.\r\nFAILED: Build did NOT complete successfully\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37074", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37074/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37074/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37074/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37074", "id": 571035457, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc5OTgwNDg0", "number": 37074, "title": "Add different pattern to show op in timeline", "user": {"login": "zhuzilin", "id": 10428324, "node_id": "MDQ6VXNlcjEwNDI4MzI0", "avatar_url": "https://avatars0.githubusercontent.com/u/10428324?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhuzilin", "html_url": "https://github.com/zhuzilin", "followers_url": "https://api.github.com/users/zhuzilin/followers", "following_url": "https://api.github.com/users/zhuzilin/following{/other_user}", "gists_url": "https://api.github.com/users/zhuzilin/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhuzilin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhuzilin/subscriptions", "organizations_url": "https://api.github.com/users/zhuzilin/orgs", "repos_url": "https://api.github.com/users/zhuzilin/repos", "events_url": "https://api.github.com/users/zhuzilin/events{/privacy}", "received_events_url": "https://api.github.com/users/zhuzilin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1169365494, "node_id": "MDU6TGFiZWwxMTY5MzY1NDk0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:M", "name": "size:M", "color": "adafea", "default": false, "description": "CL Change Size: Medium"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2020-02-26T03:00:28Z", "updated_at": "2020-03-19T16:01:19Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37074", "html_url": "https://github.com/tensorflow/tensorflow/pull/37074", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37074.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37074.patch"}, "body": "This is a PR from JIZHI, the AI platform in Tencent.\r\n\r\nWhen using timeline in tensorflow, we often observe large blanks in the \"/job\" row, which should be showing the consecutive execution of operators. \r\n\r\nThe following are timelines for transformer and transformer using XLA:\r\nTransformer:\r\n![transformer](https://i.ibb.co/NVPV5W6/transformer-before.png)\r\nXLA:\r\n![XLA](https://user-images.githubusercontent.com/10428324/75305719-e0935980-5881-11ea-81a4-f1dda66c2767.png)\r\nThe timeline is somehow confusing and those blanks may leads to misunderstanding that  there are gpus hanging freely.\r\n\r\nThe reason for this issue is that the \"/job\" row only shows the scheduling time for each op. As a result, the async kernels may not start to compute by the time the scheduling of its op is over. For the transformer example, the matmul in embedding takes long and blocks other kernels, which results in the large blank in the middle. And for XLA, those fused kernels are scheduled early but have to wait for execution, which results in the large gap between the ending in \"/job\" and \"/stream:all\".\r\n\r\nTherefore, we propose 2 new pattern to show the op execution time.\r\n- `\"gpu\"` pattern will align op with the execution span of all its kernels\r\n- `\"all\"` pattern will only change the ending time of the op to  the ending of its last kernel. \r\n\r\nwe added a new argument `op_time` to function `generate_chrome_trace_format` to let user select how op execution time will be shown. The default value is `\"schedule\"` which behaves the same as before. And other possible values are `\"gpu\"` and `\"all\"` as explained above.\r\n\r\n```python\r\n  def generate_chrome_trace_format(self, show_dataflow=True, show_memory=False, op_time=\"schedule\"):\r\n```\r\n\r\nThe result of \"gpu\" pattern is:\r\nTransformer:\r\n![transformer](https://i.ibb.co/m4ztqsm/transformer-gpu.png)\r\nXLA:\r\n![XLA](https://i.ibb.co/Tgf2wC6/xla-gpu.png)\r\n\r\nAnd the result of \"all\" pattern is\r\nTransformer:\r\n![transformer](https://i.ibb.co/4Jpfkg9/transformer-all.png)\r\nXLA: \r\n![XLA](https://i.ibb.co/71FxsmF/XLA-all.png)\r\nNotice that the above illustrations have only shown part of the \"all\" pattern since it may induce large parallel (many op are waiting to be executed at the same time.)\r\n\r\nAdditionally, the kernel name of an XLA fusion kernel is not parsed correctly, and because we do not have plans on changing the C++ part of the profiler, we reparsed it using the timeline_label attribute provided in RunMetadata.\r\n\r\nThank you for your time on this review."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37072", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37072/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37072/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37072/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37072", "id": 571016478, "node_id": "MDU6SXNzdWU1NzEwMTY0Nzg=", "number": 37072, "title": "Custom object detection API for tensorflow 2.0 not working", "user": {"login": "sreeni5493", "id": 15212113, "node_id": "MDQ6VXNlcjE1MjEyMTEz", "avatar_url": "https://avatars3.githubusercontent.com/u/15212113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sreeni5493", "html_url": "https://github.com/sreeni5493", "followers_url": "https://api.github.com/users/sreeni5493/followers", "following_url": "https://api.github.com/users/sreeni5493/following{/other_user}", "gists_url": "https://api.github.com/users/sreeni5493/gists{/gist_id}", "starred_url": "https://api.github.com/users/sreeni5493/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sreeni5493/subscriptions", "organizations_url": "https://api.github.com/users/sreeni5493/orgs", "repos_url": "https://api.github.com/users/sreeni5493/repos", "events_url": "https://api.github.com/users/sreeni5493/events{/privacy}", "received_events_url": "https://api.github.com/users/sreeni5493/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jch1", "id": 1811449, "node_id": "MDQ6VXNlcjE4MTE0NDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1811449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jch1", "html_url": "https://github.com/jch1", "followers_url": "https://api.github.com/users/jch1/followers", "following_url": "https://api.github.com/users/jch1/following{/other_user}", "gists_url": "https://api.github.com/users/jch1/gists{/gist_id}", "starred_url": "https://api.github.com/users/jch1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jch1/subscriptions", "organizations_url": "https://api.github.com/users/jch1/orgs", "repos_url": "https://api.github.com/users/jch1/repos", "events_url": "https://api.github.com/users/jch1/events{/privacy}", "received_events_url": "https://api.github.com/users/jch1/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jch1", "id": 1811449, "node_id": "MDQ6VXNlcjE4MTE0NDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1811449?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jch1", "html_url": "https://github.com/jch1", "followers_url": "https://api.github.com/users/jch1/followers", "following_url": "https://api.github.com/users/jch1/following{/other_user}", "gists_url": "https://api.github.com/users/jch1/gists{/gist_id}", "starred_url": "https://api.github.com/users/jch1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jch1/subscriptions", "organizations_url": "https://api.github.com/users/jch1/orgs", "repos_url": "https://api.github.com/users/jch1/repos", "events_url": "https://api.github.com/users/jch1/events{/privacy}", "received_events_url": "https://api.github.com/users/jch1/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-26T02:10:17Z", "updated_at": "2020-02-27T22:55:27Z", "closed_at": null, "author_association": "NONE", "body": "The current Object detection API still has graphs and many code structures which are working only until version 1.15\r\n\r\nEverywhere including colab it says support will only be for 2.0\r\n\r\nIs there a timeline for the object detection API to be useful for tensorflow 2.0 for us to do custom object detection on our own datasets?\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37068", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37068/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37068/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37068/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37068", "id": 570894101, "node_id": "MDU6SXNzdWU1NzA4OTQxMDE=", "number": 37068, "title": "Can't load Keras model with multiple MetaGraphs, can't pass tags", "user": {"login": "uchua", "id": 11432284, "node_id": "MDQ6VXNlcjExNDMyMjg0", "avatar_url": "https://avatars1.githubusercontent.com/u/11432284?v=4", "gravatar_id": "", "url": "https://api.github.com/users/uchua", "html_url": "https://github.com/uchua", "followers_url": "https://api.github.com/users/uchua/followers", "following_url": "https://api.github.com/users/uchua/following{/other_user}", "gists_url": "https://api.github.com/users/uchua/gists{/gist_id}", "starred_url": "https://api.github.com/users/uchua/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/uchua/subscriptions", "organizations_url": "https://api.github.com/users/uchua/orgs", "repos_url": "https://api.github.com/users/uchua/repos", "events_url": "https://api.github.com/users/uchua/events{/privacy}", "received_events_url": "https://api.github.com/users/uchua/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2020-02-25T22:53:25Z", "updated_at": "2020-03-06T15:47:31Z", "closed_at": null, "author_association": "NONE", "body": "- Have I written custom code: Yes\r\n- OS Platform and Distribution: Amazon Linux AMI 2018.03\r\n- TensorFlow installed from: Preinstalled by Amazon\r\n- TensorFlow version: 1.15.0\r\n- Python version: 3.6\r\n- CUDA/cuDNN version: \r\n- GPU model and memory: Nvidia Tesla V100\r\n\r\n**Describe the current behavior**\r\nWhen trying to load a saved model using `keras.models.load_model`, an error occurs stating that `tf.saved_model.load requires a 'tags='`. There is also no way to pass tags through the `load_model` function.\r\n\r\n**Describe the expected behavior**\r\nModel should load.\r\n\r\n**Standalone code to reproduce the issue** \r\nWith `\"albert/\"` being a path to this model locally: https://tfhub.dev/google/albert_xlarge/3:\r\n\r\n```python3\r\nfrom tensorflow import keras\r\n\r\nmodel = keras.models.load_model(\"albert/\")\r\n```\r\n\r\nError:\r\n```\r\nValueError: Importing a SavedModel with tf.saved_model.load requires a 'tags=' argument if there is more than one MetaGraph. Got 'tags=None', but there are 2 MetaGraphs in the SavedModel with tag sets [['train'], []]. Pass a 'tags=' argument to load this SavedModel.\r\n```\r\n\r\n\r\n**Other info / logs**\r\n```\r\nFile \"albert_entrypoint.py\", line 50, in <module>\r\n    model = keras.models.load_model(MODEL_EXTRACT_DIR)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/keras/saving/save.py\", line 147, in load_model\r\n    return saved_model_load.load(filepath, compile)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/keras/saving/saved_model/load.py\", line 86, in load\r\n    model = tf_load.load_internal(path, loader_cls=KerasObjectLoader)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/saved_model/load.py\", line 550, in load_internal\r\n    root = load_v1_in_v2.load(export_dir, tags)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/saved_model/load_v1_in_v2.py\", line 239, in load\r\n    return loader.load(tags=tags)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/saved_model/load_v1_in_v2.py\", line 168, in load\r\n    meta_graph_def = self.get_meta_graph_def_from_tags(tags)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/saved_model/load_v1_in_v2.py\", line 80, in get_meta_graph_def_from_tags\r\n    .format(len(self._saved_model.meta_graphs), tag_sets))\r\n\r\nValueError: Importing a SavedModel with tf.saved_model.load requires a 'tags=' argument if there is more than one MetaGraph. Got 'tags=None', but there are 2 MetaGraphs in the SavedModel with tag sets [['train'], []]. Pass a 'tags=' argument to load this SavedModel.\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37067", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37067/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37067/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37067/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37067", "id": 570888964, "node_id": "MDU6SXNzdWU1NzA4ODg5NjQ=", "number": 37067, "title": "Usage Documentation Needed for tf.image.yuv_to_rgb", "user": {"login": "alexdwu13", "id": 20094729, "node_id": "MDQ6VXNlcjIwMDk0NzI5", "avatar_url": "https://avatars2.githubusercontent.com/u/20094729?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexdwu13", "html_url": "https://github.com/alexdwu13", "followers_url": "https://api.github.com/users/alexdwu13/followers", "following_url": "https://api.github.com/users/alexdwu13/following{/other_user}", "gists_url": "https://api.github.com/users/alexdwu13/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexdwu13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexdwu13/subscriptions", "organizations_url": "https://api.github.com/users/alexdwu13/orgs", "repos_url": "https://api.github.com/users/alexdwu13/repos", "events_url": "https://api.github.com/users/alexdwu13/events{/privacy}", "received_events_url": "https://api.github.com/users/alexdwu13/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "lamberta", "id": 43051, "node_id": "MDQ6VXNlcjQzMDUx", "avatar_url": "https://avatars2.githubusercontent.com/u/43051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lamberta", "html_url": "https://github.com/lamberta", "followers_url": "https://api.github.com/users/lamberta/followers", "following_url": "https://api.github.com/users/lamberta/following{/other_user}", "gists_url": "https://api.github.com/users/lamberta/gists{/gist_id}", "starred_url": "https://api.github.com/users/lamberta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lamberta/subscriptions", "organizations_url": "https://api.github.com/users/lamberta/orgs", "repos_url": "https://api.github.com/users/lamberta/repos", "events_url": "https://api.github.com/users/lamberta/events{/privacy}", "received_events_url": "https://api.github.com/users/lamberta/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lamberta", "id": 43051, "node_id": "MDQ6VXNlcjQzMDUx", "avatar_url": "https://avatars2.githubusercontent.com/u/43051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lamberta", "html_url": "https://github.com/lamberta", "followers_url": "https://api.github.com/users/lamberta/followers", "following_url": "https://api.github.com/users/lamberta/following{/other_user}", "gists_url": "https://api.github.com/users/lamberta/gists{/gist_id}", "starred_url": "https://api.github.com/users/lamberta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lamberta/subscriptions", "organizations_url": "https://api.github.com/users/lamberta/orgs", "repos_url": "https://api.github.com/users/lamberta/repos", "events_url": "https://api.github.com/users/lamberta/events{/privacy}", "received_events_url": "https://api.github.com/users/lamberta/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-25T22:45:27Z", "updated_at": "2020-02-27T00:04:02Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\n\r\nhttps://www.tensorflow.org/api_docs/python/tf/image/yuv_to_rgb\r\n\r\n## Description of issue (what needs changing):\r\n\r\nThe tf.image.yuv_to_rgb method specifies a YUV input of shape (H,W,3) and an RGB output of the same shape. It also notes:\r\n\r\n> The output is only well defined if the Y value in images are in [0,1], U and V value are in [-0.5,0.5].\r\n\r\nHowever YUV is natively encoded in HxWx1.5 Bytes, with values ranging from 0-255. Considering that multiple YUV-RGB conversion standards exist, it is unclear what pre-processing steps need to be done by a user who wants to pass YUV inputs to his network (https://en.wikipedia.org/wiki/YCbCr#JPEG_conversion).\r\n\r\n### Usage example\r\n\r\nMore documentation on the proper usage of this method would be highly helpful. Specifically:\r\n\r\n- An example showing how to pre-process a raw YUV image of size HxWx1.5B to the expected shape of (H,W,3) with normalized values Y: [0,1], UV: [-0.5,0.5].\r\n- An example of how one might append this method to an RGB-trained model to enable it to accept YUV inputs during inference. A likely scenario might be exporting a frozen model to an Android device that natively captures in YUV."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37064", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37064/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37064/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37064/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37064", "id": 570824509, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc5Nzk0Mzgw", "number": 37064, "title": "[Intel Mkl] Upgrade Sqlite3 to fix CVE-2019-19880 CVE-2019-19244 and \u2026", "user": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136613, "node_id": "MDU6TGFiZWwzMDAxMzY2MTM=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20no", "name": "cla: no", "color": "eb6420", "default": false, "description": null}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}, {"id": 1918510949, "node_id": "MDU6TGFiZWwxOTE4NTEwOTQ5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/waiting%20for%20patch%20release", "name": "waiting for patch release", "color": "e8c25c", "default": false, "description": "PR will be reviewed and merged only if we do a patch release since PR is not on master branch"}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-02-25T20:51:27Z", "updated_at": "2020-03-18T17:14:40Z", "closed_at": null, "author_association": "COLLABORATOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37064", "html_url": "https://github.com/tensorflow/tensorflow/pull/37064", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37064.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37064.patch"}, "body": "\u2026CVE-2019-19645\r\n\r\n(Just so we don't forget these when we do a new patch release)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37063", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37063/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37063/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37063/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37063", "id": 570824376, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc5Nzk0MjY2", "number": 37063, "title": "[Intel Mkl] Upgrade Sqlite3 to fix CVE-2019-19880 CVE-2019-19244 and \u2026", "user": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136613, "node_id": "MDU6TGFiZWwzMDAxMzY2MTM=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20no", "name": "cla: no", "color": "eb6420", "default": false, "description": null}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}, {"id": 1918510949, "node_id": "MDU6TGFiZWwxOTE4NTEwOTQ5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/waiting%20for%20patch%20release", "name": "waiting for patch release", "color": "e8c25c", "default": false, "description": "PR will be reviewed and merged only if we do a patch release since PR is not on master branch"}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-02-25T20:51:10Z", "updated_at": "2020-03-18T17:14:40Z", "closed_at": null, "author_association": "COLLABORATOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37063", "html_url": "https://github.com/tensorflow/tensorflow/pull/37063", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37063.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37063.patch"}, "body": "\u2026CVE-2019-19645\r\n\r\n(Just so we don't forget these when we do a new patch release)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37062", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37062/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37062/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37062/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37062", "id": 570824174, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc5Nzk0MDgx", "number": 37062, "title": "[Intel Mkl] Upgrade Sqlite3 to fix CVE-2019-19880 CVE-2019-19244 and \u2026", "user": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136613, "node_id": "MDU6TGFiZWwzMDAxMzY2MTM=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20no", "name": "cla: no", "color": "eb6420", "default": false, "description": null}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}, {"id": 1918510949, "node_id": "MDU6TGFiZWwxOTE4NTEwOTQ5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/waiting%20for%20patch%20release", "name": "waiting for patch release", "color": "e8c25c", "default": false, "description": "PR will be reviewed and merged only if we do a patch release since PR is not on master branch"}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-02-25T20:50:47Z", "updated_at": "2020-03-18T17:14:40Z", "closed_at": null, "author_association": "COLLABORATOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37062", "html_url": "https://github.com/tensorflow/tensorflow/pull/37062", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37062.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37062.patch"}, "body": "\u2026CVE-2019-19645\r\n\r\n(Just so we don't forget these when we do a new patch release)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37059", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37059/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37059/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37059/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37059", "id": 570764518, "node_id": "MDU6SXNzdWU1NzA3NjQ1MTg=", "number": 37059, "title": "TensorFlow 1.8 Issues with GPU availability always returns false", "user": {"login": "rajkpammi", "id": 32424190, "node_id": "MDQ6VXNlcjMyNDI0MTkw", "avatar_url": "https://avatars3.githubusercontent.com/u/32424190?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rajkpammi", "html_url": "https://github.com/rajkpammi", "followers_url": "https://api.github.com/users/rajkpammi/followers", "following_url": "https://api.github.com/users/rajkpammi/following{/other_user}", "gists_url": "https://api.github.com/users/rajkpammi/gists{/gist_id}", "starred_url": "https://api.github.com/users/rajkpammi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rajkpammi/subscriptions", "organizations_url": "https://api.github.com/users/rajkpammi/orgs", "repos_url": "https://api.github.com/users/rajkpammi/repos", "events_url": "https://api.github.com/users/rajkpammi/events{/privacy}", "received_events_url": "https://api.github.com/users/rajkpammi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 1093464312, "node_id": "MDU6TGFiZWwxMDkzNDY0MzEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:others", "name": "type:others", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gadagashwini", "id": 48476109, "node_id": "MDQ6VXNlcjQ4NDc2MTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/48476109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadagashwini", "html_url": "https://github.com/gadagashwini", "followers_url": "https://api.github.com/users/gadagashwini/followers", "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}", "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions", "organizations_url": "https://api.github.com/users/gadagashwini/orgs", "repos_url": "https://api.github.com/users/gadagashwini/repos", "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}", "received_events_url": "https://api.github.com/users/gadagashwini/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gadagashwini", "id": 48476109, "node_id": "MDQ6VXNlcjQ4NDc2MTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/48476109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadagashwini", "html_url": "https://github.com/gadagashwini", "followers_url": "https://api.github.com/users/gadagashwini/followers", "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}", "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions", "organizations_url": "https://api.github.com/users/gadagashwini/orgs", "repos_url": "https://api.github.com/users/gadagashwini/repos", "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}", "received_events_url": "https://api.github.com/users/gadagashwini/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-25T18:56:15Z", "updated_at": "2020-03-09T09:30:57Z", "closed_at": null, "author_association": "NONE", "body": "Hi,\r\n\r\nI have been facing issues lately with getting tensorflow to use GPU, I have setup a jupyterhub application on AWS cloud with a P3 type Instance which has cuda and drivers installed also tensorflow python packages, but whenever i check the gpu availability tensorflow returns False\r\n![tensorflow jupyterhub](https://user-images.githubusercontent.com/32424190/75277684-770a4100-57d6-11ea-985c-87b12ba6a645.png)\r\n![nvidia smi](https://user-images.githubusercontent.com/32424190/75277713-89847a80-57d6-11ea-87e1-55718b4602d0.png)\r\n![tensorflow jupyterhub](https://user-images.githubusercontent.com/32424190/75277710-88534d80-57d6-11ea-96ce-dc9b471bbf7b.png)\r\n![Uploading nvidia smi.png\u2026]()\r\n\r\nHere is the version information  below:\r\n\r\nNvidia Driver Version: 396.26\r\nCUDA Version 9.2.88\r\nCUDNN_VERSION 7.1.4\r\nTensorflow : 1.8.0\r\nTensorflow_gpu : 1.8.0\r\n\r\nHere is the compatibility list from Tensorflow website which doesn't point out the cuda and cudnn minor versions only major version https://www.tensorflow.org/install/source#linux\r\n\r\nCan someone please help me with this issue, Thanks in advance!\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37058", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37058/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37058/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37058/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37058", "id": 570764289, "node_id": "MDU6SXNzdWU1NzA3NjQyODk=", "number": 37058, "title": "TensorFlow 1.8 Issues with GPU availability always returns false", "user": {"login": "rajkpammi", "id": 32424190, "node_id": "MDQ6VXNlcjMyNDI0MTkw", "avatar_url": "https://avatars3.githubusercontent.com/u/32424190?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rajkpammi", "html_url": "https://github.com/rajkpammi", "followers_url": "https://api.github.com/users/rajkpammi/followers", "following_url": "https://api.github.com/users/rajkpammi/following{/other_user}", "gists_url": "https://api.github.com/users/rajkpammi/gists{/gist_id}", "starred_url": "https://api.github.com/users/rajkpammi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rajkpammi/subscriptions", "organizations_url": "https://api.github.com/users/rajkpammi/orgs", "repos_url": "https://api.github.com/users/rajkpammi/repos", "events_url": "https://api.github.com/users/rajkpammi/events{/privacy}", "received_events_url": "https://api.github.com/users/rajkpammi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 1093464312, "node_id": "MDU6TGFiZWwxMDkzNDY0MzEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:others", "name": "type:others", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ravikyram", "id": 51902062, "node_id": "MDQ6VXNlcjUxOTAyMDYy", "avatar_url": "https://avatars2.githubusercontent.com/u/51902062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ravikyram", "html_url": "https://github.com/ravikyram", "followers_url": "https://api.github.com/users/ravikyram/followers", "following_url": "https://api.github.com/users/ravikyram/following{/other_user}", "gists_url": "https://api.github.com/users/ravikyram/gists{/gist_id}", "starred_url": "https://api.github.com/users/ravikyram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ravikyram/subscriptions", "organizations_url": "https://api.github.com/users/ravikyram/orgs", "repos_url": "https://api.github.com/users/ravikyram/repos", "events_url": "https://api.github.com/users/ravikyram/events{/privacy}", "received_events_url": "https://api.github.com/users/ravikyram/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ravikyram", "id": 51902062, "node_id": "MDQ6VXNlcjUxOTAyMDYy", "avatar_url": "https://avatars2.githubusercontent.com/u/51902062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ravikyram", "html_url": "https://github.com/ravikyram", "followers_url": "https://api.github.com/users/ravikyram/followers", "following_url": "https://api.github.com/users/ravikyram/following{/other_user}", "gists_url": "https://api.github.com/users/ravikyram/gists{/gist_id}", "starred_url": "https://api.github.com/users/ravikyram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ravikyram/subscriptions", "organizations_url": "https://api.github.com/users/ravikyram/orgs", "repos_url": "https://api.github.com/users/ravikyram/repos", "events_url": "https://api.github.com/users/ravikyram/events{/privacy}", "received_events_url": "https://api.github.com/users/ravikyram/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-25T18:55:52Z", "updated_at": "2020-03-06T10:33:13Z", "closed_at": null, "author_association": "NONE", "body": "Hi,\r\n\r\nI have been facing issues lately with getting tensorflow to use GPU, I have setup a jupyterhub application on AWS cloud with a P3 type Instance which has cuda and drivers installed also tensorflow python packages, but whenever i check the gpu availability tensorflow returns False\r\n\r\nHere is the version information  below:\r\n\r\nNvidia Driver Version: 396.26\r\nCUDA Version 9.2.88\r\nCUDNN_VERSION 7.1.4\r\nTensorflow : 1.8.0\r\nTensorflow_gpu : 1.8.0\r\n\r\nHere is the compatibility list from Tensorflow website which doesn't point out the cuda and cudnn minor versions only major version https://www.tensorflow.org/install/source#linux\r\n\r\nCan someone please help me with this issue, Thanks in advance!\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37057", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37057/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37057/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37057/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37057", "id": 570753476, "node_id": "MDU6SXNzdWU1NzA3NTM0NzY=", "number": 37057, "title": "MultiWorkerMirroredStrategy OOM - Ubuntu 18.04 ", "user": {"login": "maximsmol", "id": 1472826, "node_id": "MDQ6VXNlcjE0NzI4MjY=", "avatar_url": "https://avatars1.githubusercontent.com/u/1472826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maximsmol", "html_url": "https://github.com/maximsmol", "followers_url": "https://api.github.com/users/maximsmol/followers", "following_url": "https://api.github.com/users/maximsmol/following{/other_user}", "gists_url": "https://api.github.com/users/maximsmol/gists{/gist_id}", "starred_url": "https://api.github.com/users/maximsmol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maximsmol/subscriptions", "organizations_url": "https://api.github.com/users/maximsmol/orgs", "repos_url": "https://api.github.com/users/maximsmol/repos", "events_url": "https://api.github.com/users/maximsmol/events{/privacy}", "received_events_url": "https://api.github.com/users/maximsmol/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-02-25T18:34:53Z", "updated_at": "2020-03-10T03:19:07Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow): **yes**\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04): **Linux Ubuntu 18.04**\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if\r\nthe issue happens on mobile device: \r\n- TensorFlow installed from (source or\r\nbinary): **pip install tensorflow==2.1.0** - TensorFlow version (use command below): \r\n- Python version: **python=3.6.9** - Bazel\r\nversion (if compiling from source):\r\n- GCC/Compiler version (if compiling from\r\nsource): \r\n- CUDA/cuDNN version: **10.2** - GPU model and memory: **NVIDIA T4 16GB (g4dn.xlarge) (REPRODUCABLE ON CPU)**\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nWhen training a trivial model with `MultiWorkerMirroredStrategy` over `cifar10` the memory consumption of all workers grows over time until eventually the system runs out of memory.\r\n\r\nMemory consumption grows while `model.fit` is running.\r\n\r\nI ran into this issue on the AWS Deep Learning AMI, but was also able to reproduce it with a manually configured AWS Ubuntu 18.04 AMI. Could not reproduce on a Mac laptop.\r\n\r\nNote: A more complicated model will run out of memory a lot faster, the toy example I provide for reproduction was deliberately downscaled for simplicity, but takes a few minutes to double RAM consumption.\r\n\r\nCluster setup:\r\n- 4 CPU workers (`CUDA_AVAILABLE_DEVICES=''`) on a **single** g4dn.xlarge instance (was able to reproduce with multiple instances, and with GPU training)\r\n- Using `ray` to run the processes for convenience, not using any of its distributed features\r\n\r\n**Describe the expected behavior**\r\nMemory consumption is stable/the system does not run out of memory.\r\n\r\n**Standalone code to reproduce the issue** \r\nProvide a reproducible test case that is the bare minimum necessary to generate\r\nthe problem. If possible, please share a link to Colab/Jupyter/any notebook.\r\n\r\nhttps://gist.github.com/maximsmol/ac2aeb5582600cd8b3fc6952cfd040a1\r\n^ the issue requires a multi-worker setup (ips+ports) so it's not possible to provide a notebook\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n\r\nThe way I track the memory consumption is openning `top` and watch the RES RAM column for the workers. It very visibly grows."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37053", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37053/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37053/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37053/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37053", "id": 570721650, "node_id": "MDU6SXNzdWU1NzA3MjE2NTA=", "number": 37053, "title": "Cannot wrap GradientTape.batch_jacobian with tf.function on tf.keras model with LSTM cells", "user": {"login": "henry-prior", "id": 39593219, "node_id": "MDQ6VXNlcjM5NTkzMjE5", "avatar_url": "https://avatars0.githubusercontent.com/u/39593219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/henry-prior", "html_url": "https://github.com/henry-prior", "followers_url": "https://api.github.com/users/henry-prior/followers", "following_url": "https://api.github.com/users/henry-prior/following{/other_user}", "gists_url": "https://api.github.com/users/henry-prior/gists{/gist_id}", "starred_url": "https://api.github.com/users/henry-prior/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/henry-prior/subscriptions", "organizations_url": "https://api.github.com/users/henry-prior/orgs", "repos_url": "https://api.github.com/users/henry-prior/repos", "events_url": "https://api.github.com/users/henry-prior/events{/privacy}", "received_events_url": "https://api.github.com/users/henry-prior/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-02-25T17:23:13Z", "updated_at": "2020-03-19T17:21:03Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow):  Yes\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04):  macOS Mojave\r\n- TensorFlow installed from (source or\r\nbinary): binary\r\n- TensorFlow version (use command below): 2.1.0\r\n- Python version: 3.7.4\r\n\r\n**Describe the current behavior**\r\n\r\nThe @tf.function wrapper is not able to convert LSTM cells correctly for use in the `batch_jacobian` function (or `jacobian`, tested both). These functions work correctly without the decorator.\r\n```\r\n    ValueError: No converter defined for VariableShape\r\n    name: \"loop_body/VariableShape_2\"\r\n    op: \"VariableShape\"\r\n    input: \"binary_classification_lstm/lstm/while:10\"\r\n    attr {\r\n      key: \"out_type\"\r\n      value {\r\n        type: DT_INT32\r\n      }\r\n    } \r\n```\r\n\r\n**Describe the expected behavior**\r\n\r\nThis should run without throwing an error\r\n\r\n**Standalone code to reproduce the issue** \r\n```\r\nimport tensorflow as tf\r\n\r\nclass BinaryClassificationLSTM(tf.keras.Model):\r\n    def __init__(self, units, name=None):\r\n        super(BinaryClassificationLSTM, self).__init__(name=name)\r\n        self.lstm_layer = tf.keras.layers.LSTM(units, activation='softsign')\r\n        self.dense = tf.keras.layers.Dense(1)\r\n        self.sigmoid = tf.keras.layers.Activation('sigmoid')\r\n\r\n    def call(self, x):\r\n        sequence = self.lstm_layer(x)\r\n        logit = self.dense(sequence)\r\n        prob = self.sigmoid(logit)\r\n\r\n        return prob\r\n    \r\n\r\n@tf.function\r\ndef get_jacobian(model, tensor_in):\r\n    with tf.GradientTape() as tape:\r\n        tape.watch(tensor_in)\r\n        predictions = model(tensor_in)\r\n    \r\n    return tape.batch_jacobian(predictions, tensor_in)\r\n\r\ninp = tf.zeros((1, 10, 5))\r\nlstm = BinaryClassificationLSTM(10)\r\njacobian = get_jacobian(lstm, inp)\r\n```\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 29, in <module>\r\n    jacobian = get_jacobian(lstm, inp)\r\n  File \"/Users/henryprior/anaconda3/envs/test/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 568, in __call__\r\n    result = self._call(*args, **kwds)\r\n  File \"/Users/henryprior/anaconda3/envs/test/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 615, in _call\r\n    self._initialize(args, kwds, add_initializers_to=initializers)\r\n  File \"/Users/henryprior/anaconda3/envs/test/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 497, in _initialize\r\n    *args, **kwds))\r\n  File \"/Users/henryprior/anaconda3/envs/test/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 2389, in _get_concrete_function_internal_garbage_collected\r\n    graph_function, _, _ = self._maybe_define_function(args, kwargs)\r\n  File \"/Users/henryprior/anaconda3/envs/test/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 2703, in _maybe_define_function\r\n    graph_function = self._create_graph_function(args, kwargs)\r\n  File \"/Users/henryprior/anaconda3/envs/test/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 2593, in _create_graph_function\r\n    capture_by_value=self._capture_by_value),\r\n  File \"/Users/henryprior/anaconda3/envs/test/lib/python3.7/site-packages/tensorflow_core/python/framework/func_graph.py\", line 978, in func_graph_from_py_func\r\n    func_outputs = python_func(*func_args, **func_kwargs)\r\n  File \"/Users/henryprior/anaconda3/envs/test/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 439, in wrapped_fn\r\n    return weak_wrapped_fn().__wrapped__(*args, **kwds)\r\n  File \"/Users/henryprior/anaconda3/envs/test/lib/python3.7/site-packages/tensorflow_core/python/framework/func_graph.py\", line 968, in wrapper\r\n    raise e.ag_error_metadata.to_exception(e)\r\nValueError: in converted code:\r\n\r\n    test.py:24 get_jacobian  *\r\n        return tape.batch_jacobian(predictions, tensor_in)\r\n    /Users/henryprior/anaconda3/envs/test/lib/python3.7/site-packages/tensorflow_core/python/eager/backprop.py:1246 batch_jacobian\r\n        sys.exc_info()[2])\r\n    /Users/henryprior/anaconda3/envs/test/lib/python3.7/site-packages/six.py:702 reraise\r\n        raise value.with_traceback(tb)\r\n    /Users/henryprior/anaconda3/envs/test/lib/python3.7/site-packages/tensorflow_core/python/eager/backprop.py:1238 batch_jacobian\r\n        parallel_iterations=parallel_iterations)\r\n    /Users/henryprior/anaconda3/envs/test/lib/python3.7/site-packages/tensorflow_core/python/ops/parallel_for/control_flow_ops.py:189 pfor\r\n        return f()\r\n    /Users/henryprior/anaconda3/envs/test/lib/python3.7/site-packages/tensorflow_core/python/ops/parallel_for/control_flow_ops.py:183 f\r\n        return _pfor_impl(loop_fn, iters, parallel_iterations=parallel_iterations)\r\n    /Users/henryprior/anaconda3/envs/test/lib/python3.7/site-packages/tensorflow_core/python/ops/parallel_for/control_flow_ops.py:256 _pfor_impl\r\n        outputs.append(converter.convert(loop_fn_output))\r\n    /Users/henryprior/anaconda3/envs/test/lib/python3.7/site-packages/tensorflow_core/python/ops/parallel_for/pfor.py:1280 convert\r\n        output = self._convert_helper(y)\r\n    /Users/henryprior/anaconda3/envs/test/lib/python3.7/site-packages/tensorflow_core/python/ops/parallel_for/pfor.py:1460 _convert_helper\r\n        (y_op.type, y_op, converted_inputs))\r\n\r\n    ValueError: No converter defined for VariableShape\r\n    name: \"loop_body/VariableShape_2\"\r\n    op: \"VariableShape\"\r\n    input: \"binary_classification_lstm/lstm/while:10\"\r\n    attr {\r\n      key: \"out_type\"\r\n      value {\r\n        type: DT_INT32\r\n      }\r\n    }\r\n\r\n    inputs: [WrappedTensor(t=<tf.Tensor 'binary_classification_lstm/lstm/while:10' shape=() dtype=resource>, is_stacked=False, is_sparse_stacked=False)].\r\n    Either add a converter or set --op_conversion_fallback_to_while_loop=True, which may run slower\r\n    Encountered an exception while vectorizing the batch_jacobian computation. Vectorization can be disabled by setting experimental_use_pfor to False.\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37052", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37052/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37052/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37052/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37052", "id": 570688398, "node_id": "MDU6SXNzdWU1NzA2ODgzOTg=", "number": 37052, "title": "Can't convert the model into \".tflite\". I've tried every possible way from APIs to command lines. I tried to change layers as per tflite, but I couldn't understand the working and ended up with errors.", "user": {"login": "Kiranendra", "id": 47424842, "node_id": "MDQ6VXNlcjQ3NDI0ODQy", "avatar_url": "https://avatars3.githubusercontent.com/u/47424842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kiranendra", "html_url": "https://github.com/Kiranendra", "followers_url": "https://api.github.com/users/Kiranendra/followers", "following_url": "https://api.github.com/users/Kiranendra/following{/other_user}", "gists_url": "https://api.github.com/users/Kiranendra/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kiranendra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kiranendra/subscriptions", "organizations_url": "https://api.github.com/users/Kiranendra/orgs", "repos_url": "https://api.github.com/users/Kiranendra/repos", "events_url": "https://api.github.com/users/Kiranendra/events{/privacy}", "received_events_url": "https://api.github.com/users/Kiranendra/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1661751498, "node_id": "MDU6TGFiZWwxNjYxNzUxNDk4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TFLiteConverter", "name": "TFLiteConverter", "color": "bfdadc", "default": false, "description": "For issues related to TFLite converter"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2020-02-25T16:20:49Z", "updated_at": "2020-03-09T00:35:27Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Google Colab\r\n- TensorFlow: 1.15 \r\n\r\n**Code link with dataset**\r\nhttps://github.com/Kiranendra/Project\r\n\r\nBy trying different types of conversion like from saved model, from Keras model, freeze graphs, I am facing errors like with \"input shape\"( is none),  embedding layer. If I change the layer GRU to LSTM then input errors with the decoder output and it goes."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37048", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37048/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37048/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37048/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37048", "id": 570524054, "node_id": "MDU6SXNzdWU1NzA1MjQwNTQ=", "number": 37048, "title": "The output of the Conv2D layer in backend TensorFlow is different from that in Theano and CNTK", "user": {"login": "Justobe", "id": 15032308, "node_id": "MDQ6VXNlcjE1MDMyMzA4", "avatar_url": "https://avatars1.githubusercontent.com/u/15032308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Justobe", "html_url": "https://github.com/Justobe", "followers_url": "https://api.github.com/users/Justobe/followers", "following_url": "https://api.github.com/users/Justobe/following{/other_user}", "gists_url": "https://api.github.com/users/Justobe/gists{/gist_id}", "starred_url": "https://api.github.com/users/Justobe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Justobe/subscriptions", "organizations_url": "https://api.github.com/users/Justobe/orgs", "repos_url": "https://api.github.com/users/Justobe/repos", "events_url": "https://api.github.com/users/Justobe/events{/privacy}", "received_events_url": "https://api.github.com/users/Justobe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-25T12:07:04Z", "updated_at": "2020-02-29T10:37:17Z", "closed_at": null, "author_association": "NONE", "body": "## System Information\r\n\r\n- CUDA Version 10.1.168\r\n- Python==3.6.8\r\n- numpy==1.14.6\r\n- tensorflow-gpu==1.14.0\r\n- theano==1.0.4\r\n- cntk-gpu==2.7\r\n- gcc== 5.4.0\r\n- Linux version 4.15.0-52-generic\r\n\r\n## Description\r\n\r\nHi, I encountered a problem when I used a variant of the AlexNet model for image classification task. The prediction result of backend TensorFlow is different from backend Theano and backend CNTK in  Keras. The input picture is sampled from the CIFAR10 DataSet. \r\n\r\nThe outputs ( Top-1 prediction) of three backends are shown below\uff08Prediction label id and  Probability \uff09:\r\n\r\n**TensorFlow**: 2, 0.9999998807907104\r\n\r\n**CNTK**:  6,1.0\r\n\r\n**Theano**: 6,1.0\r\n\r\nIt seems that there is something wrong with Tensorflow. Then I put image into the model and recorded the ouputs of each layers to see how this happens. It seems that the outputs on CNTK and Theano are very close, but for Tensorflow, the outputs of a conv2d layer and all the layers after this layer are very different from CNTK and Theano.\r\n\r\nThe results are attached below.\r\n\r\nTheano vs CNTK\r\n![image-20200225181539716](https://user-images.githubusercontent.com/15032308/75246315-7d1a1500-580a-11ea-978e-93224948d974.png)\r\n\r\n\r\nTensorFlow vs Theano\r\n\r\n![image-20200225181451774](https://user-images.githubusercontent.com/15032308/75246369-94f19900-580a-11ea-871e-a401d652fbc4.png)\r\n\r\nTensorFlow vs CNTK\r\n![image-20200225181519926](https://user-images.githubusercontent.com/15032308/75246356-8efbb800-580a-11ea-9efe-a8c29708465f.png)\r\n\r\n\r\nThe delta column shows the discrepancy, which is calculated as:\r\n![MAD](https://user-images.githubusercontent.com/15032308/75246389-9f139780-580a-11ea-8c41-ae22458272f7.png)\r\n\r\n\r\nBased on the results, the deviation seems to be caused by conv2d of tensorflow backend.\r\n\r\n## To Reproduce\r\nThe code of getting prediction result of each backend  is really simple. \r\n\r\nget_prediction.py :\r\n\r\n```python\r\nimport os\r\nimport sys\r\nimport numpy as np\r\nfrom PIL import Image\r\nbk = sys.argv[1]\r\nos.environ['KERAS_BACKEND'] = bk\r\nos.environ[\"CUDA_DEVICE_ORDER\"] = \"PCI_BUS_ID\"\r\nos.environ[\"CUDA_VISIBLE_DEVICES\"] = \"0\"\r\n\r\nimport keras\r\nfrom keras import backend as K\r\nprint(\"Using backend :{}\".format(K.backend()))\r\n\r\n\r\ndef custom_objects():\r\n\r\n    def no_activation(x):\r\n        return x\r\n\r\n    def leakyrelu(x):\r\n        import keras.backend as K\r\n        return K.relu(x, alpha=0.01)\r\n\r\n    objects = {}\r\n    objects['no_activation'] = no_activation\r\n    objects['leakyrelu'] = leakyrelu\r\n    return objects\r\n\r\n\r\ndef image_resize(x, shape):\r\n    x_return = []\r\n    for x_test in x:\r\n        tmp = np.copy(x_test)\r\n        img = Image.fromarray(tmp.astype('uint8')).convert('RGB')\r\n        img = img.resize(shape, Image.ANTIALIAS)\r\n        x_return.append(np.array(img))\r\n    return np.array(x_return)\r\n\r\n\r\nbase_model = keras.models.load_model(\"alexnet-cifar10_origin0-ARep4-ARep6-ARem1-LC6.h5\",custom_objects=custom_objects())\r\nadam = keras.optimizers.Adagrad(lr=0.01, epsilon=None, decay=0.0)\r\nbase_model.compile(loss='categorical_crossentropy', optimizer=adam, metrics=['accuracy'])\r\n\r\n\r\nimagename = 'cifar10-1042.png'\r\nimg = Image.open(imagename)\r\nimg = img.resize((32,32), Image.ANTIALIAS)\r\nx_test = np.array(img)\r\nselect_data = np.expand_dims(x_test, axis=0)\r\n\r\nprediction = base_model.predict(select_data)\r\npred = np.argsort(prediction[0])\r\nprint(pred)\r\nprint(f\"Prediction of {bk}: {pred[-1]},{prediction[0][pred[-1]]}\")\r\n```\r\n\r\nYou can run the script like this ():\r\n\r\n> python get_prediction.py tensorflow\r\n\r\nChange tensorflow to 'theano' and 'cntk'\r\n\r\nI provide scripts to get outputs of the middle layers and calculate the difference:\r\n[tensorflow-conv2d.zip](https://github.com/tensorflow/tensorflow/files/4256311/tensorflow-conv2d.zip)\r\n\r\nThe model used in scripts can be downloads from\uff1ahttps://send.firefox.com/download/c01db9a2b4773d8b/#ME176P7KQp4J6DmB46xBBg\r\nThanks in advance.\r\n\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37045", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37045/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37045/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37045/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37045", "id": 570475724, "node_id": "MDU6SXNzdWU1NzA0NzU3MjQ=", "number": 37045, "title": "reshuffle_each_iteration=False ignored on validation (tf.dataset + Keras)", "user": {"login": "Kerybas", "id": 42703200, "node_id": "MDQ6VXNlcjQyNzAzMjAw", "avatar_url": "https://avatars1.githubusercontent.com/u/42703200?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kerybas", "html_url": "https://github.com/Kerybas", "followers_url": "https://api.github.com/users/Kerybas/followers", "following_url": "https://api.github.com/users/Kerybas/following{/other_user}", "gists_url": "https://api.github.com/users/Kerybas/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kerybas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kerybas/subscriptions", "organizations_url": "https://api.github.com/users/Kerybas/orgs", "repos_url": "https://api.github.com/users/Kerybas/repos", "events_url": "https://api.github.com/users/Kerybas/events{/privacy}", "received_events_url": "https://api.github.com/users/Kerybas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-25T10:42:06Z", "updated_at": "2020-02-26T19:19:56Z", "closed_at": null, "author_association": "NONE", "body": "When using .shuffle on some `tf.Dataset.from_generator`, it appears that the `reshuffle_each_iteration=False` is ignored by Keras.  \r\nIf you run the following example, you would expect to see the train_set and val_set buffer filling at the start of the session, and then you would no longer see it between each epoch. The buffers are large enough to cover more than one epoch and can be refilled in parallel during the epoch.    \r\n\r\nHowever, what seems to happen is that the val_set shuffle buffer is filled at the end of each epoch.  \r\nThe terminal shows \"Filling shuffle buffer\" at the end of each epoch.  \r\nYou can see that it is specifically the val_set buffer by removing the shuffle on val_set. Doing so, you will no longer see a \"Filling shuffle\" at each epoch, only at the start of the session.  \r\n\r\nAdditionally, [issue 35100](https://github.com/tensorflow/tensorflow/issues/35100 ) will spam the terminal on this example, with or without shuffle.  \r\n\r\nSeen on Win10, with tensorflow 2.10.  \r\nCode to reproduce the problem:  \r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\nimport time\r\n\r\ndef random_gen():\r\n    while True:\r\n        time.sleep(0.01)\r\n        yield (np.random.rand(1,), np.random.rand(1,))\r\n\r\ndataset = tf.data.Dataset.from_generator(\r\n        random_gen,\r\n        (tf.float32, tf.float32),\r\n        (tf.TensorShape((None,)), tf.TensorShape((None,))),\r\n    )\r\n\r\ntrain_set =   (dataset\r\n               .shuffle(2000, reshuffle_each_iteration=False)\r\n               .batch(32))\r\nval_set =    (dataset\r\n               .shuffle(2000, reshuffle_each_iteration=False) # Problem is here\r\n               .batch(32))\r\n\r\nmodel = tf.keras.models.Sequential()\r\nmodel.add(tf.keras.layers.Dense(3))\r\nmodel.compile(loss='mse', optimizer='adam')\r\n\r\nmodel.fit(x=train_set,\r\n          epochs= 5,\r\n          steps_per_epoch= 10,\r\n          validation_data= val_set,\r\n          validation_steps= 5,\r\n)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37044", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37044/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37044/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37044/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37044", "id": 570457612, "node_id": "MDU6SXNzdWU1NzA0NTc2MTI=", "number": 37044, "title": "Deep Training with Tensorflow", "user": {"login": "javipa1995", "id": 11060663, "node_id": "MDQ6VXNlcjExMDYwNjYz", "avatar_url": "https://avatars2.githubusercontent.com/u/11060663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/javipa1995", "html_url": "https://github.com/javipa1995", "followers_url": "https://api.github.com/users/javipa1995/followers", "following_url": "https://api.github.com/users/javipa1995/following{/other_user}", "gists_url": "https://api.github.com/users/javipa1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/javipa1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/javipa1995/subscriptions", "organizations_url": "https://api.github.com/users/javipa1995/orgs", "repos_url": "https://api.github.com/users/javipa1995/repos", "events_url": "https://api.github.com/users/javipa1995/events{/privacy}", "received_events_url": "https://api.github.com/users/javipa1995/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-02-25T10:14:07Z", "updated_at": "2020-03-11T01:26:29Z", "closed_at": null, "author_association": "NONE", "body": "Hello,\r\n\r\ni'm trying to make an experiment about performance with Keras and Tensorflow. I'm interested in training some parts of the networks. In my case, my objective is training some connections (neurons) of certains layers. Is it possible to do that experiment? I know that re-training layers is possible with trainable=True, but I would like to do it in a deeper way, going to the connections (fully connected phase) and filters (convolutional phase)\r\n\r\nThanks,\r\n\r\nJavier\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37041", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37041/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37041/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37041/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37041", "id": 570400372, "node_id": "MDU6SXNzdWU1NzA0MDAzNzI=", "number": 37041, "title": "Feature suggestion: Ability to add copyright notice to saved model", "user": {"login": "juliangall", "id": 11220541, "node_id": "MDQ6VXNlcjExMjIwNTQx", "avatar_url": "https://avatars1.githubusercontent.com/u/11220541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/juliangall", "html_url": "https://github.com/juliangall", "followers_url": "https://api.github.com/users/juliangall/followers", "following_url": "https://api.github.com/users/juliangall/following{/other_user}", "gists_url": "https://api.github.com/users/juliangall/gists{/gist_id}", "starred_url": "https://api.github.com/users/juliangall/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/juliangall/subscriptions", "organizations_url": "https://api.github.com/users/juliangall/orgs", "repos_url": "https://api.github.com/users/juliangall/repos", "events_url": "https://api.github.com/users/juliangall/events{/privacy}", "received_events_url": "https://api.github.com/users/juliangall/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-25T08:39:15Z", "updated_at": "2020-02-26T18:19:04Z", "closed_at": null, "author_association": "NONE", "body": "A trained TensorFlow model can represent valuable intellectual property, and may sometimes be distributed as a saved model, rather than python code etc. Is there any way of including a copyright notice in a saved model file?\r\n\r\nIf this is not yet possible, perhaps a comments= argument could be added to model.save().\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37039", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37039/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37039/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37039/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37039", "id": 570327020, "node_id": "MDU6SXNzdWU1NzAzMjcwMjA=", "number": 37039, "title": "Shape information is lost with DepthwiseConv2D", "user": {"login": "jnd77", "id": 3433639, "node_id": "MDQ6VXNlcjM0MzM2Mzk=", "avatar_url": "https://avatars3.githubusercontent.com/u/3433639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnd77", "html_url": "https://github.com/jnd77", "followers_url": "https://api.github.com/users/jnd77/followers", "following_url": "https://api.github.com/users/jnd77/following{/other_user}", "gists_url": "https://api.github.com/users/jnd77/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnd77/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnd77/subscriptions", "organizations_url": "https://api.github.com/users/jnd77/orgs", "repos_url": "https://api.github.com/users/jnd77/repos", "events_url": "https://api.github.com/users/jnd77/events{/privacy}", "received_events_url": "https://api.github.com/users/jnd77/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-02-25T05:44:26Z", "updated_at": "2020-02-25T22:40:47Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow): Yes \r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04): Ubuntu 18.04\r\n- TensorFlow installed from (source or\r\nbinary): source \r\n- TensorFlow version (use command below): 1.15 \r\n- CUDA/cuDNN version: 10.2\r\n- GPU model and memory: RTX 2060\r\n\r\n\r\n**Describe the current behavior**\r\n\r\nIn some cases (use_bias=False, dilation_rate > 1, data_format='channels_first'), the shape information is lost after DepthwiseConv2D. \r\n\r\n**Describe the expected behavior**\r\n\r\nIt should behave the same way for channels_last and channels_first.\r\nWhen running the code below, channels_last prints `shape=(?, ?, ?, 32)` and channels_first prints `shape=(?, ?, ?, ?)`. It should be `shape=(?, 32, ?, ?)`\r\n\r\n**Standalone code to reproduce the issue** \r\n\r\n[Here for the gist](https://colab.research.google.com/gist/jnd77/84932ac25671f8b5b59acdcb2f0e5afd/untitled1.ipynb) \r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37035", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37035/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37035/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37035/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37035", "id": 570295931, "node_id": "MDU6SXNzdWU1NzAyOTU5MzE=", "number": 37035, "title": "absl.flags._exceptions.UnparsedFlagAccessError if used flags in tf.TensorSpec", "user": {"login": "songs18", "id": 47944452, "node_id": "MDQ6VXNlcjQ3OTQ0NDUy", "avatar_url": "https://avatars0.githubusercontent.com/u/47944452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/songs18", "html_url": "https://github.com/songs18", "followers_url": "https://api.github.com/users/songs18/followers", "following_url": "https://api.github.com/users/songs18/following{/other_user}", "gists_url": "https://api.github.com/users/songs18/gists{/gist_id}", "starred_url": "https://api.github.com/users/songs18/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/songs18/subscriptions", "organizations_url": "https://api.github.com/users/songs18/orgs", "repos_url": "https://api.github.com/users/songs18/repos", "events_url": "https://api.github.com/users/songs18/events{/privacy}", "received_events_url": "https://api.github.com/users/songs18/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-02-25T04:00:51Z", "updated_at": "2020-03-02T12:14:30Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code \r\nYes: \r\n- OS Platform and Distribution \r\nWin10: \r\n- Mobile device\r\nNo: \r\n- TensorFlow installed from (source or\r\nbinary): - TensorFlow version (use command below): \r\n- Python version: 2.1.0\r\n\r\n**Standalone code to reproduce the issue** \r\ncode snippets url: https://gitee.com/songhaohao2018/codes/cmunjs6zqbe895y7h0gpa21"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37034", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37034/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37034/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37034/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37034", "id": 570273662, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc5MzM1MDY3", "number": 37034, "title": "Feature: add utils for keras saving/loading format detection", "user": {"login": "howl-anderson", "id": 1263428, "node_id": "MDQ6VXNlcjEyNjM0Mjg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1263428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/howl-anderson", "html_url": "https://github.com/howl-anderson", "followers_url": "https://api.github.com/users/howl-anderson/followers", "following_url": "https://api.github.com/users/howl-anderson/following{/other_user}", "gists_url": "https://api.github.com/users/howl-anderson/gists{/gist_id}", "starred_url": "https://api.github.com/users/howl-anderson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/howl-anderson/subscriptions", "organizations_url": "https://api.github.com/users/howl-anderson/orgs", "repos_url": "https://api.github.com/users/howl-anderson/repos", "events_url": "https://api.github.com/users/howl-anderson/events{/privacy}", "received_events_url": "https://api.github.com/users/howl-anderson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-02-25T02:47:06Z", "updated_at": "2020-03-03T04:38:14Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37034", "html_url": "https://github.com/tensorflow/tensorflow/pull/37034", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37034.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37034.patch"}, "body": "Add utils for Keras saving/loading format detection\r\n\r\nfix `TODO(b/130258301): add utility method for detecting model type.`"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37029", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37029/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37029/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37029/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37029", "id": 570135926, "node_id": "MDU6SXNzdWU1NzAxMzU5MjY=", "number": 37029, "title": "Hang on out of memory error", "user": {"login": "smatzek", "id": 13350259, "node_id": "MDQ6VXNlcjEzMzUwMjU5", "avatar_url": "https://avatars1.githubusercontent.com/u/13350259?v=4", "gravatar_id": "", "url": "https://api.github.com/users/smatzek", "html_url": "https://github.com/smatzek", "followers_url": "https://api.github.com/users/smatzek/followers", "following_url": "https://api.github.com/users/smatzek/following{/other_user}", "gists_url": "https://api.github.com/users/smatzek/gists{/gist_id}", "starred_url": "https://api.github.com/users/smatzek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/smatzek/subscriptions", "organizations_url": "https://api.github.com/users/smatzek/orgs", "repos_url": "https://api.github.com/users/smatzek/repos", "events_url": "https://api.github.com/users/smatzek/events{/privacy}", "received_events_url": "https://api.github.com/users/smatzek/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aaudiber", "id": 3455177, "node_id": "MDQ6VXNlcjM0NTUxNzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/3455177?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaudiber", "html_url": "https://github.com/aaudiber", "followers_url": "https://api.github.com/users/aaudiber/followers", "following_url": "https://api.github.com/users/aaudiber/following{/other_user}", "gists_url": "https://api.github.com/users/aaudiber/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaudiber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaudiber/subscriptions", "organizations_url": "https://api.github.com/users/aaudiber/orgs", "repos_url": "https://api.github.com/users/aaudiber/repos", "events_url": "https://api.github.com/users/aaudiber/events{/privacy}", "received_events_url": "https://api.github.com/users/aaudiber/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aaudiber", "id": 3455177, "node_id": "MDQ6VXNlcjM0NTUxNzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/3455177?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaudiber", "html_url": "https://github.com/aaudiber", "followers_url": "https://api.github.com/users/aaudiber/followers", "following_url": "https://api.github.com/users/aaudiber/following{/other_user}", "gists_url": "https://api.github.com/users/aaudiber/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaudiber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaudiber/subscriptions", "organizations_url": "https://api.github.com/users/aaudiber/orgs", "repos_url": "https://api.github.com/users/aaudiber/repos", "events_url": "https://api.github.com/users/aaudiber/events{/privacy}", "received_events_url": "https://api.github.com/users/aaudiber/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2020-02-24T20:43:48Z", "updated_at": "2020-03-02T19:03:25Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow):  No\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04): Ubuntu 18.04.3 LTS\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if\r\nthe issue happens on mobile device: \r\n- TensorFlow installed from (source or\r\nbinary): - TensorFlow version (use command below): 2.1.0 and nightly, used `tensorflow/tensorflow:2.1.0-gpu-py3` and `tensorflow/tensorflow:nightly-gpu-py3 `\r\n- Python version: - Bazel\r\nversion (if compiling from source):\r\n- GCC/Compiler version (if compiling from\r\nsource): \r\n- CUDA/cuDNN version: - GPU model and memory:  P100 and V100\r\nDriver: 440.33.01 \r\nCUDA 10.1 in container\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nTensorFlow hangs when it hits out of memory after it dumps the out of memory message.\r\n\r\n**Describe the expected behavior**\r\nTensorFlow should exit on non-zero return code on OOM.\r\n\r\n**Standalone code to reproduce the issue** \r\nProvide a reproducible test case that is the bare minimum necessary to generate\r\nthe problem. If possible, please share a link to Colab/Jupyter/any notebook.\r\n```python\r\nimport tensorflow as tf\r\nfrom tensorflow.keras import backend as K\r\n\r\nimport numpy as np\r\n\r\n\r\ndef random_image_generator(batch_size, num_classes, input_shape):\r\n    templates = 2 * num_classes * np.random.random((num_classes,) + input_shape)\r\n    random_data = np.random.normal(loc=0, scale=1., size=input_shape)\r\n    while True:\r\n        y = np.random.randint(0, num_classes, size=(batch_size,))\r\n        x = np.zeros((batch_size,) + input_shape, dtype=np.float32)\r\n        for i in range(batch_size):\r\n            x[i] = templates[y[i]] + random_data\r\n        x_array = np.array(x)\r\n        y_array = tf.keras.utils.to_categorical(y, num_classes)\r\n        yield(x_array, y_array)\r\n\r\ndef run_model():\r\n    K.set_image_data_format('channels_first')\r\n    image_dim = 5000\r\n    input_shape = (3, image_dim, image_dim)\r\n\r\n    num_classes = 15\r\n    batch_size = 1\r\n    model_class = tf.keras.applications.ResNet50\r\n    model = model_class(weights=None, include_top=True, input_shape=input_shape,\r\n                        classes=num_classes)\r\n\r\n    model.compile(optimizer='rmsprop', loss='categorical_crossentropy')\r\n\r\n    random_generator = random_image_generator(batch_size, num_classes,\r\n                                              input_shape)\r\n    model.fit(random_generator, steps_per_epoch=10,\r\n              epochs=1)\r\n\r\nrun_model()\r\n```\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n\r\n\r\nThis program hangs after dumping the out of memory error on 16GB and 32GB GPUs (P100 and V100 tested). The program use to exit on TensorFlow 1.15. This happens on both the 2.1.0 and nightly containers on Intel x86 systems.\r\n\r\nI originally hit this on built-from-source TensorFlow 2.1.0 on ppc64le. On that system, I attached gdb and dumped the stacks. It seems the code is hanging on the three thread stacks noted in the attachment.\r\n[threeThreadStacks.txt](https://github.com/tensorflow/tensorflow/files/4246783/threeThreadStacks.txt)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37028", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37028/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37028/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37028/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37028", "id": 570085314, "node_id": "MDU6SXNzdWU1NzAwODUzMTQ=", "number": 37028, "title": "jupyter notebook kernel dies when running a UNet with tensorflow=2.1.0", "user": {"login": "rzaratx", "id": 47995021, "node_id": "MDQ6VXNlcjQ3OTk1MDIx", "avatar_url": "https://avatars2.githubusercontent.com/u/47995021?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rzaratx", "html_url": "https://github.com/rzaratx", "followers_url": "https://api.github.com/users/rzaratx/followers", "following_url": "https://api.github.com/users/rzaratx/following{/other_user}", "gists_url": "https://api.github.com/users/rzaratx/gists{/gist_id}", "starred_url": "https://api.github.com/users/rzaratx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rzaratx/subscriptions", "organizations_url": "https://api.github.com/users/rzaratx/orgs", "repos_url": "https://api.github.com/users/rzaratx/repos", "events_url": "https://api.github.com/users/rzaratx/events{/privacy}", "received_events_url": "https://api.github.com/users/rzaratx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-24T19:32:55Z", "updated_at": "2020-02-25T10:03:20Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- OS - Linux RedHat 8\r\n- conda install tensorflow-gpu - tensorflow version = 2.1.0\r\n- Python version: 3.7.4\r\n- Jupyter Notebook \r\n- CUDA/cuDNN version: - 10.2\r\n- CPU: AMD Threadripper 3960x\r\n- GPU: 2x RTX Titans\r\n- Memory: 128 GB Corsair 3200MHz\r\n\r\nI recently upgraded to tensorflow=2.1.0 from tensorflow=2.0.0 and now my code will not run. Before the first epoch ends I get a message saying 'The kernel appears to have died. It will restart automatically.'. The code is using MirroredStrategy() to distribute the UNet to the GPUs. I don't get this error when I remove MirroredStrategy() and run on a single-gpu. \r\nOriginally I was running my code with tensorflow=2.0.0 using jupyter notebook and it would worked fine except that when I would try to load my model and make a prediction I get an error at `model.predict()` saying `AttributeError: 'Model' object has no attribute 'loss'`. I called `model.summary()` after loading the model and it showed the model was empty. So I upgraded to tensorflow=2.1.0 and called `model.summary()` this time it showed a readout. However I still get the same error `AttributeError: 'Model' object has no attribute 'loss'`\r\nIs there currently an incompatibility with MirroredStrategy() and tensorflow=2.1.0?\r\n\r\n```\r\ndef get_model(optimizer, loss_metric, metrics, lr=1e-4):\r\n    with tf.device('/job:localhost/replica:0/task:0/device:GPU:0'):\r\n        inputs = Input((sample_width, sample_height, sample_depth, 1))\r\n        conv1 = Conv3D(32, (3, 3, 3), activation='relu', padding='same')(inputs)\r\n        conv1 = Conv3D(32, (3, 3, 3), activation='relu', padding='same')(conv1)\r\n        pool1 = MaxPooling3D(pool_size=(2, 2, 2))(conv1)\r\n        drop1 = Dropout(0.5)(pool1)\r\n        conv2 = Conv3D(64, (3, 3, 3), activation='relu', padding='same')(drop1)\r\n        conv2 = Conv3D(64, (3, 3, 3), activation='relu', padding='same')(conv2)\r\n        pool2 = MaxPooling3D(pool_size=(2, 2, 2))(conv2)\r\n        drop2 = Dropout(0.5)(pool2)\r\n        conv3 = Conv3D(128, (3, 3, 3), activation='relu', padding='same')(drop2)\r\n        conv3 = Conv3D(128, (3, 3, 3), activation='relu', padding='same')(conv3)\r\n        pool3 = MaxPooling3D(pool_size=(2, 2, 2))(conv3)\r\n        drop3 = Dropout(0.3)(pool3)\r\n        conv4 = Conv3D(256, (3, 3, 3), activation='relu', padding='same')(drop3)\r\n        conv4 = Conv3D(256, (3, 3, 3), activation='relu', padding='same')(conv4)\r\n        pool4 = MaxPooling3D(pool_size=(2, 2, 2))(conv4)\r\n        drop4 = Dropout(0.3)(pool4)\r\n        conv5 = Conv3D(512, (3, 3, 3), activation='relu', padding='same')(drop4)\r\n        conv5 = Conv3D(512, (3, 3, 3), activation='relu', padding='same')(conv5)\r\n    with tf.device('/job:localhost/replica:0/task:0/device:GPU:1'): \r\n        up6 = concatenate([Conv3DTranspose(256, (2, 2, 2), strides=(2, 2, 2), padding='same')(conv5), conv4], axis=4)\r\n        conv6 = Conv3D(256, (3, 3, 3), activation='relu', padding='same')(up6)\r\n        conv6 = Conv3D(256, (3, 3, 3), activation='relu', padding='same')(conv6)\r\n        up7 = concatenate([Conv3DTranspose(128, (2, 2, 2), strides=(2, 2, 2), padding='same')(conv6), conv3], axis=4)\r\n        conv7 = Conv3D(128, (3, 3, 3), activation='relu', padding='same')(up7)\r\n        conv7 = Conv3D(128, (3, 3, 3), activation='relu', padding='same')(conv7)\r\n        up8 = concatenate([Conv3DTranspose(64, (2, 2, 2), strides=(2, 2, 2), padding='same')(conv7), conv2], axis=4)\r\n        conv8 = Conv3D(64, (3, 3, 3), activation='relu', padding='same')(up8)\r\n        conv8 = Conv3D(64, (3, 3, 3), activation='relu', padding='same')(conv8)\r\n        up9 = concatenate([Conv3DTranspose(32, (2, 2, 2), strides=(2, 2, 2), padding='same')(conv8), conv1], axis=4)\r\n        conv9 = Conv3D(32, (3, 3, 3), activation='relu', padding='same')(up9)\r\n        conv9 = Conv3D(32, (3, 3, 3), activation='relu', padding='same')(conv9)\r\n        conv10 = Conv3D(1, (1, 1, 1), activation='sigmoid')(conv9)\r\n        model = Model(inputs=[inputs], outputs=[conv10])\r\n        model.compile(optimizer=optimizer(lr=lr), loss=loss_metric, metrics=metrics)\r\n        return model\r\n\r\nsmooth = 1.\r\ndef dice_coef(y_true, y_pred):\r\n    y_true_f = K.flatten(y_true)\r\n    y_pred_f = K.flatten(y_pred)\r\n    intersection = K.sum(y_true_f * y_pred_f)\r\n    return (2. * intersection + smooth) / (K.sum(y_true_f) + K.sum(y_pred_f) + smooth)\r\ndef dice_coef_loss(y_true, y_pred):\r\n    return -dice_coef(y_true, y_pred)\r\n\r\nmirrored_strategy = tf.distribute.MirroredStrategy()\r\nwith mirrored_strategy.scope():\r\n    model = get_model(optimizer=Adam, loss_metric=dice_coef_loss, metrics=[dice_coef], lr=1e-4)\r\nobserve_var = 'dice_coef'\r\nstrategy = 'max' # greater dice_coef is better\r\nmodel_checkpoint = ModelCheckpoint('{epoch:04}model', monitor=observe_var, save_best_only=True)\r\nmodel.fit(train_x, train_y, batch_size = 2, epochs= 1000, verbose=1, shuffle=True, validation_split=.2, callbacks=[model_checkpoint])\r\nmodel.save( 'finalmodel')\r\n```\r\nmodel.summary():\r\n```\r\nModel: \"model\"\r\n_________________________________________________________________\r\nLayer (type)                 Output Shape              Param #   \r\n=================================================================\r\ninput_1 (InputLayer)         multiple                  0         \r\n_________________________________________________________________\r\nconv3d (Conv3D)              multiple                  896       \r\n_________________________________________________________________\r\nconv3d_1 (Conv3D)            multiple                  27680     \r\n_________________________________________________________________\r\nmax_pooling3d (MaxPooling3D) multiple                  0         \r\n_________________________________________________________________\r\ndropout (Dropout)            multiple                  0         \r\n_________________________________________________________________\r\nconv3d_2 (Conv3D)            multiple                  55360     \r\n_________________________________________________________________\r\nconv3d_3 (Conv3D)            multiple                  110656    \r\n_________________________________________________________________\r\nmax_pooling3d_1 (MaxPooling3 multiple                  0         \r\n_________________________________________________________________\r\ndropout_1 (Dropout)          multiple                  0         \r\n_________________________________________________________________\r\nconv3d_4 (Conv3D)            multiple                  221312    \r\n_________________________________________________________________\r\nconv3d_5 (Conv3D)            multiple                  442496    \r\n_________________________________________________________________\r\nmax_pooling3d_2 (MaxPooling3 multiple                  0         \r\n_________________________________________________________________\r\ndropout_2 (Dropout)          multiple                  0         \r\n_________________________________________________________________\r\nconv3d_6 (Conv3D)            multiple                  884992    \r\n_________________________________________________________________\r\nconv3d_7 (Conv3D)            multiple                  1769728   \r\n_________________________________________________________________\r\nmax_pooling3d_3 (MaxPooling3 multiple                  0         \r\n_________________________________________________________________\r\ndropout_3 (Dropout)          multiple                  0         \r\n_________________________________________________________________\r\nconv3d_8 (Conv3D)            multiple                  3539456   \r\n_________________________________________________________________\r\nconv3d_9 (Conv3D)            multiple                  7078400   \r\n_________________________________________________________________\r\nconv3d_transpose (Conv3DTran multiple                  1048832   \r\n_________________________________________________________________\r\nconcatenate (Concatenate)    multiple                  0         \r\n_________________________________________________________________\r\nconv3d_10 (Conv3D)           multiple                  3539200   \r\n_________________________________________________________________\r\nconv3d_11 (Conv3D)           multiple                  1769728   \r\n_________________________________________________________________\r\nconv3d_transpose_1 (Conv3DTr multiple                  262272    \r\n_________________________________________________________________\r\nconcatenate_1 (Concatenate)  multiple                  0         \r\n_________________________________________________________________\r\nconv3d_12 (Conv3D)           multiple                  884864    \r\n_________________________________________________________________\r\nconv3d_13 (Conv3D)           multiple                  442496    \r\n_________________________________________________________________\r\nconv3d_transpose_2 (Conv3DTr multiple                  65600     \r\n_________________________________________________________________\r\nconcatenate_2 (Concatenate)  multiple                  0         \r\n_________________________________________________________________\r\nconv3d_14 (Conv3D)           multiple                  221248    \r\n_________________________________________________________________\r\nconv3d_15 (Conv3D)           multiple                  110656    \r\n_________________________________________________________________\r\nconv3d_transpose_3 (Conv3DTr multiple                  16416     \r\n_________________________________________________________________\r\nconcatenate_3 (Concatenate)  multiple                  0         \r\n_________________________________________________________________\r\nconv3d_16 (Conv3D)           multiple                  55328     \r\n_________________________________________________________________\r\nconv3d_17 (Conv3D)           multiple                  27680     \r\n_________________________________________________________________\r\nconv3d_18 (Conv3D)           multiple                  33        \r\n=================================================================\r\nTotal params: 22,575,329\r\nTrainable params: 22,575,329\r\nNon-trainable params: 0\r\n```\r\nPrediction Code:\r\n```\r\nnorm_images='imagedata\\'\r\nmodel = load_model('finalmodel',compile = False)\r\nprint(model.summary())\r\nprediction = model.predict(norm_images, verbose = 1)\r\n```\r\nAttribute Error:\r\n```\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-2-06140bdcec2b> in <module>\r\n     75 \r\n     76 print('Predicting the labels')\r\n---> 77 prediction = model.predict(norm_images, verbose = 1)\r\n     78 # prediction = tf.keras.Model.predict(norm_images)\r\n     79 \r\n\r\n~\\.conda\\envs\\gputest\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training.py in predict(self, x, batch_size, verbose, steps, callbacks, max_queue_size, workers, use_multiprocessing)\r\n   1011         max_queue_size=max_queue_size,\r\n   1012         workers=workers,\r\n-> 1013         use_multiprocessing=use_multiprocessing)\r\n   1014 \r\n   1015   def reset_metrics(self):\r\n\r\n~\\.conda\\envs\\gputest\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_v2.py in predict(self, model, x, batch_size, verbose, steps, callbacks, max_queue_size, workers, use_multiprocessing, **kwargs)\r\n    496         model, ModeKeys.PREDICT, x=x, batch_size=batch_size, verbose=verbose,\r\n    497         steps=steps, callbacks=callbacks, max_queue_size=max_queue_size,\r\n--> 498         workers=workers, use_multiprocessing=use_multiprocessing, **kwargs)\r\n    499 \r\n    500 \r\n\r\n~\\.conda\\envs\\gputest\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_v2.py in _model_iteration(self, model, mode, x, y, batch_size, verbose, sample_weight, steps, callbacks, max_queue_size, workers, use_multiprocessing, **kwargs)\r\n    424           max_queue_size=max_queue_size,\r\n    425           workers=workers,\r\n--> 426           use_multiprocessing=use_multiprocessing)\r\n    427       total_samples = _get_total_number_of_samples(adapter)\r\n    428       use_sample = total_samples is not None\r\n\r\n~\\.conda\\envs\\gputest\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_v2.py in _process_inputs(model, mode, x, y, batch_size, epochs, sample_weights, class_weights, shuffle, steps, distribution_strategy, max_queue_size, workers, use_multiprocessing)\r\n    644     standardize_function = None\r\n    645     x, y, sample_weights = standardize(\r\n--> 646         x, y, sample_weight=sample_weights)\r\n    647   elif adapter_cls is data_adapter.ListsOfScalarsDataAdapter:\r\n    648     standardize_function = standardize\r\n\r\n~\\.conda\\envs\\gputest\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training.py in _standardize_user_data(self, x, y, sample_weight, class_weight, batch_size, check_steps, steps_name, steps, validation_split, shuffle, extract_tensors_from_dataset)\r\n   2358     is_compile_called = False\r\n   2359     if not self._is_compiled and self.optimizer:\r\n-> 2360       self._compile_from_inputs(all_inputs, y_input, x, y)\r\n   2361       is_compile_called = True\r\n   2362 \r\n\r\n~\\.conda\\envs\\gputest\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training.py in _compile_from_inputs(self, all_inputs, target, orig_inputs, orig_target)\r\n   2609     self.compile(\r\n   2610         optimizer=self.optimizer,\r\n-> 2611         loss=self.loss,\r\n   2612         metrics=self._compile_metrics,\r\n   2613         weighted_metrics=self._compile_weighted_metrics,\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37025", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37025/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37025/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37025/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37025", "id": 569999757, "node_id": "MDU6SXNzdWU1Njk5OTk3NTc=", "number": 37025, "title": "Stateful LSTMLite conversion", "user": {"login": "razor1179", "id": 19917580, "node_id": "MDQ6VXNlcjE5OTE3NTgw", "avatar_url": "https://avatars0.githubusercontent.com/u/19917580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/razor1179", "html_url": "https://github.com/razor1179", "followers_url": "https://api.github.com/users/razor1179/followers", "following_url": "https://api.github.com/users/razor1179/following{/other_user}", "gists_url": "https://api.github.com/users/razor1179/gists{/gist_id}", "starred_url": "https://api.github.com/users/razor1179/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/razor1179/subscriptions", "organizations_url": "https://api.github.com/users/razor1179/orgs", "repos_url": "https://api.github.com/users/razor1179/repos", "events_url": "https://api.github.com/users/razor1179/events{/privacy}", "received_events_url": "https://api.github.com/users/razor1179/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1661751498, "node_id": "MDU6TGFiZWwxNjYxNzUxNDk4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TFLiteConverter", "name": "TFLiteConverter", "color": "bfdadc", "default": false, "description": "For issues related to TFLite converter"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2020-02-24T17:15:51Z", "updated_at": "2020-03-18T16:46:53Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Red Hat Enterprise Linux Server release 7.7:\r\n- TensorFlow installed from binary:\r\n- TensorFlow version 1.15:\r\n\r\n\r\n**Provide the text output from tflite_convert**\r\n\r\n```\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime. If those are native TensorFlow operators, you might be able to use the extended runtime by passing --enable_select_tf_ops, or by setting target_ops=TFLITE_BUILTINS,SELECT_TF_OPS when calling tf.lite.TFLiteConverter(). Otherwise, if you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: FULLY_CONNECTED, LOGISTIC, UNIDIRECTIONAL_SEQUENCE_LSTM, UNPACK. Here is a list of operators for which you will need custom implementations: Assign.\r\nTraceback (most recent call last):\r\n  File \"/home/xyz/anaconda3/envs/tf15/bin/toco_from_protos\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/home/xyz/anaconda3/envs/tf15/lib/python3.7/site-packages/tensorflow_core/lite/toco/python/toco_from_protos.py\", line 89, in main\r\n    app.run(main=execute, argv=[sys.argv[0]] + unparsed)\r\n  File \"/home/xyz/anaconda3/envs/tf15/lib/python3.7/site-packages/tensorflow_core/python/platform/app.py\", line 40, in run\r\n    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)\r\n  File \"/home/xyz/anaconda3/envs/tf15/lib/python3.7/site-packages/absl/app.py\", line 299, in run\r\n    _run_main(main, args)\r\n  File \"/home/xyz/anaconda3/envs/tf15/lib/python3.7/site-packages/absl/app.py\", line 250, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"/home/xyz/anaconda3/envs/tf15/lib/python3.7/site-packages/tensorflow_core/lite/toco/python/toco_from_protos.py\", line 52, in execute\r\n    enable_mlir_converter)\r\nException: We are continually in the process of adding support to TensorFlow Lite for more ops. It would be helpful if you could inform us of how this conversion went by opening a github issue at https://github.com/tensorflow/tensorflow/issues/new?template=40-tflite-op-request.md\r\n and pasting the following:\r\n\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime. If those are native TensorFlow operators, you might be able to use the extended runtime by passing --enable_select_tf_ops, or by setting target_ops=TFLITE_BUILTINS,SELECT_TF_OPS when calling tf.lite.TFLiteConverter(). Otherwise, if you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: FULLY_CONNECTED, LOGISTIC, UNIDIRECTIONAL_SEQUENCE_LSTM, UNPACK. Here is a list of operators for which you will need custom implementations: Assign.\r\n```\r\n\r\n**Standalone code to reproduce the issue** \r\n```python\r\nimport os\r\nos.environ['TF_ENABLE_CONTROL_FLOW_V2'] = '1'\r\nimport tensorflow as tf\r\nfrom tensorflow_core.python.keras.models import Model, Sequential\r\nfrom tensorflow_core.python.keras.layers.core import Dense, Activation, Lambda, Reshape\r\nfrom tensorflow_core.python.keras.engine.input_layer import Input\r\nfrom tensorflow_core.python.keras.layers.recurrent import RNN, StackedRNNCells\r\nfrom tensorflow_core.lite.experimental.examples.lstm.rnn_cell import TFLiteLSTMCell, TfLiteRNNCell\r\nfrom tensorflow_core.lite.experimental.examples.lstm.rnn import dynamic_rnn\r\nfrom tensorflow_core.python.ops.rnn_cell_impl import LSTMStateTuple\r\nfrom tensorflow_core.lite.python.interpreter import Interpreter\r\nfrom tensorflow_core.python.ops.rnn_cell_impl import MultiRNNCell\r\n\r\ndef get_state_variables(batch_size, cell):\r\n    # For each layer, get the initial state and make a variable out of it\r\n    # to enable updating its value.\r\n    state_variables = []\r\n    for state_c, state_h in cell.zero_state(batch_size, tf.float32):\r\n        state_variables.append(tf.contrib.rnn.LSTMStateTuple(\r\n            tf.Variable(state_c, trainable=False),\r\n            tf.Variable(state_h, trainable=False)))\r\n    # Return as a tuple, so that it can be fed to dynamic_rnn as an initial state\r\n    return tuple(state_variables)\r\n\r\n\r\ndef get_state_update_op(state_variables, new_states):\r\n    # Add an operation to update the train states with the last state tensors\r\n    update_ops = []\r\n    for state_variable, new_state in zip(state_variables, new_states):\r\n        # Assign the new state to the state variables on this layer\r\n        update_ops.extend([state_variable[0].assign(new_state[0]),\r\n                           state_variable[1].assign(new_state[1])])\r\n    # Return a tuple in order to combine all update_ops into a single operation.\r\n    # The tuple's actual value should not be used.\r\n    return tf.tuple(update_ops)\r\n\r\n\r\ndef buildMultiCell(cells):\r\n    return MultiRNNCell(cells)\r\n\r\n\r\ndef buildRNNLayer(inputs, rnn_cells, initial_state=None):\r\n  \"\"\"Build the lstm layer.\r\n\r\n  Args:\r\n    inputs: The input data.\r\n    num_layers: How many LSTM layers do we want.\r\n    num_units: The unmber of hidden units in the LSTM cell.\r\n  \"\"\"\r\n  # Assume the input is sized as [batch, time, input_size], then we're going\r\n  # to transpose to be time-majored.\r\n  transposed_inputs = tf.transpose(inputs, perm=[1, 0, 2])\r\n  outputs, new_state = dynamic_rnn(\r\n      rnn_cells,\r\n      transposed_inputs,\r\n      initial_state=initial_state,\r\n      dtype='float32',\r\n      time_major=True)\r\n  unstacked_outputs = tf.unstack(outputs, axis=0)\r\n  # update_op = get_state_update_op(initial_state, new_state)\r\n  return unstacked_outputs[-1], new_state\r\n\r\n\r\ndef build_rnn_lite(model, state=False):\r\n    tf.reset_default_graph()\r\n    # Construct RNN\r\n    cells = []\r\n    for layer in range(3):\r\n        if model == 'LSTMLite':\r\n            cells.append(TFLiteLSTMCell(192, name='lstm{}'.format(layer)))\r\n        else:\r\n            cells.append(TfLiteRNNCell(192, name='rnn{}'.format(layer)))\r\n\r\n    rnn_cells = Lambda(buildMultiCell, name='multicell')(cells)\r\n    states = get_state_variables(1, rnn_cells)\r\n    if state:\r\n        spec_input = Input(shape=(5, 64,), name='rnn_in', batch_size=1)\r\n        x, new_states = Lambda(buildRNNLayer, arguments={'rnn_cells': rnn_cells, 'initial_state': states}, name=model.lower())(spec_input)\r\n        updated_states = Lambda(get_state_update_op, arguments={'new_states': new_states}, name='update_state')(states)\r\n    else:\r\n        spec_input = Input(shape=(5, 64,), name='rnn_in')\r\n        x, new_states = Lambda(buildRNNLayer, arguments={'rnn_cells': rnn_cells}, name=model.lower())(spec_input)\r\n        updated_states = Lambda(get_state_update_op, arguments={'new_states': states}, name='update_state')(states)\r\n\r\n    out = Dense(64, activation='sigmoid', name='fin_dense')(x)\r\n    return Model(inputs=spec_input, outputs=[out, updated_states])\r\n\r\nmodel = build_rnn_lite('LSTMLite', True)\r\n```\r\nThis now creates a stateful LSTM model which returns the updated states of the LSTM.\r\n```python\r\n###### TF LITE CONVERSION\r\nsess = tf.keras.backend.get_session()\r\ninput_tensor = sess.graph.get_tensor_by_name('rnn_in:0')\r\noutput_tensor = []\r\noutput_tensor.append(sess.graph.get_tensor_by_name('fin_dense/Sigmoid:0'))\r\nall_tensors = [tensor for op in tf.get_default_graph().get_operations() for tensor in op.values()]\r\n# output_tensor = sess.graph.get_tensor_by_name('fin_dense/Sigmoid:0')\r\n\r\n# imp_tensor = []\r\nfor ten in all_tensors:\r\n    if 'update_state/Assign' in ten.name:\r\n        output_tensor.append(ten)\r\n\r\nconverter = tf.lite.TFLiteConverter.from_session(sess, [input_tensor], output_tensor)\r\n# Note: It will NOT work without enabling the experimental converter!\r\n# `experimental_new_converter` flag.\r\nconverter.experimental_new_converter = True\r\ntflite_seg = converter.convert()\r\n```\r\nThe output tensor list throws an error, if only the `fin_dense/Sigmoid:0` tensor is used the model does get converted but behaves as a stateless model therefore the `update_state` needs to be included in the output tensor list.\r\nI am trying to create a stateful LSTMLite model, I was able to get the model to behave as a stateful model as described here [https://stackoverflow.com/questions/59962348/how-to-create-a-stateful-tensorflowlite-rnn-model-in-tf1-15](url) but am unable to convert the model to TFLite.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37024", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37024/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37024/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37024/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37024", "id": 569984103, "node_id": "MDU6SXNzdWU1Njk5ODQxMDM=", "number": 37024, "title": "Convolution operations (such as Conv2d) does not detect corner case 'kernel_size = 0', which leads to an unexpected result.", "user": {"login": "Jup11ter", "id": 61384431, "node_id": "MDQ6VXNlcjYxMzg0NDMx", "avatar_url": "https://avatars0.githubusercontent.com/u/61384431?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jup11ter", "html_url": "https://github.com/Jup11ter", "followers_url": "https://api.github.com/users/Jup11ter/followers", "following_url": "https://api.github.com/users/Jup11ter/following{/other_user}", "gists_url": "https://api.github.com/users/Jup11ter/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jup11ter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jup11ter/subscriptions", "organizations_url": "https://api.github.com/users/Jup11ter/orgs", "repos_url": "https://api.github.com/users/Jup11ter/repos", "events_url": "https://api.github.com/users/Jup11ter/events{/privacy}", "received_events_url": "https://api.github.com/users/Jup11ter/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-02-24T16:49:51Z", "updated_at": "2020-03-12T02:54:20Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow): \r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if\r\nthe issue happens on mobile device: -\r\n- TensorFlow installed from (source or\r\nbinary):Binary\r\n- TensorFlow version (use command below): 1.15.0 -cpu\r\n- Python version: 3.6.9\r\n- Bazel version (if compiling from source):-\r\n- GCC/Compiler version (if compiling from\r\nsource): -\r\n- CUDA/cuDNN version: -\r\n- GPU model and memory:-\r\n\r\n**Describe the current behavior**\r\nWhen I use convolution-related operations, Tensorflow doesn't seem to handle the corner case  'kernel_size = 0' well. The problem can be divided into two parts: \r\n\r\n1) When 'padding = same' is set, **SeparableConv2D \\ DepthwiseConv2D\\Conv2D \\ Conv2DTranspose** takes kernel_size = 0 as a normal value to calculate the padding/crop shape, and finally reports an **Negative-shape error** . For example,  `Conv2DTranspos` reports a  `ValueError: crops cannot be negative for 'conv2d_transpose_1/atrous_conv2d_transpose/BatchToSpaceND' (op: 'BatchToSpaceND') with input shapes: [9,10,10,2], [2], [2,2] and with computed input tensors: input[1] = <3 3>, input[2] = <[-2 0][-2 0]>.`  at `tensorflow_core\\python\\framework\\ops.py line 1610`. The negative value is actually created  in `tensorflow_core\\python\\ops\\nn_ops.py`. For example, the negative value which leads to the padding error of `DepthwiseConv2D` is calculated around line 619 of nn_ops.py). See the following snapshot of `nn_ops.py`. \r\n\r\n![pic1](https://user-images.githubusercontent.com/61384431/75172507-573c3400-5768-11ea-9747-dcd52835118a.jpg)\r\n\r\n\r\n2) When  'padding=valid' is set, the situation is even worse. **`DepthwiseConv2D` and `SeparableConv2D` can build the model and  even predict. But the outputs are the all-zero matrices. `Conv2D` can also build and save the model, but it seems to get stuck in an infinite loop when predicting. It takes a lot of time and eventually gets no result. **Only `Conv2DTranspose` behaves normally and  reports the following error in `tensorflow_core\\python\\client\\session.py line1470`\r\n\r\n``` yaml\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Conv2DCustomBackpropInput: Size of out_backprop doesn't match computed: actual = 16, computed = 17 spatial_dim: 1 input: 16 filter: 0 output: 16 stride: 1 dilation: 1\r\n\t [[{{node conv2d_transpose_1_1/atrous_conv2d_transpose/Conv2DBackpropInput}}]]\r\n```\r\n\r\nFrom the description above, we conclude that **Tensorflow seems to lack a critical check whether `kernel_size` is  0 when conducting convolution-related operations, which is a dangerous corner case. This illegal parameter should not be brought into the calculation**, but Tensorflow uses it to build a layer and even uses this layer to process the input and get all zero matrices as output. This should be a logical bug.\r\n\r\n**Standalone code to reproduce the issue** \r\n\r\n``` python\r\nimport os\r\nimport numpy as np\r\nimport keras.layers as L\r\nimport keras.backend as K\r\nimport importlib\r\nfrom keras.engine import Model, Input\r\n\r\n## Using TensorFlow as Keras backend.\r\n## Input dtype default is float32\r\n\r\n'''kwargs={'filters': 8, \r\n  'kernel_size': 0,\r\n  'padding': 'same',\r\n  'strides': 2, \r\n  'dilation_rate': 1,\r\n  'data_format': 'channels_last'}'''# Conv2d/SeparableConv2D\r\n\r\nkwargs={'kernel_size': 0,\r\n  'padding': 'same',\r\n  'strides': 2, \r\n  'dilation_rate': 1,\r\n  'data_format': 'channels_last'}# DepthwiseConv2d\r\ninput = (10 * np.random.random((1,32,32,16)))\r\nlayer = L.convolutional.DepthwiseConv2D(**kwargs)# you can use Conv2D\\SeparableConv2D\\Conv2DTranspose instead of DepthwisConv2D\r\n#layer = L.convolutional.SeparableConv2D(**kwargs)\r\n#layer=L.convolutional.Conv2D(**kwargs)\r\nx = Input(batch_shape=input.shape)\r\ny = layer(x)\r\nbk_model = Model(x, y)\r\nmodel_path = os.path.join('./', 'model.h5')\r\nbk_model.save(model_path, bk_model)\r\n'''from keras.models import load_model\r\nmodel = load_model(model_path)\r\noutput = model.predict(input)'''\r\nprint('finish')\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37023", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37023/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37023/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37023/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37023", "id": 569961817, "node_id": "MDU6SXNzdWU1Njk5NjE4MTc=", "number": 37023, "title": "RNN unrolled, wrong quantization graph", "user": {"login": "wwwind", "id": 1513336, "node_id": "MDQ6VXNlcjE1MTMzMzY=", "avatar_url": "https://avatars0.githubusercontent.com/u/1513336?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wwwind", "html_url": "https://github.com/wwwind", "followers_url": "https://api.github.com/users/wwwind/followers", "following_url": "https://api.github.com/users/wwwind/following{/other_user}", "gists_url": "https://api.github.com/users/wwwind/gists{/gist_id}", "starred_url": "https://api.github.com/users/wwwind/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wwwind/subscriptions", "organizations_url": "https://api.github.com/users/wwwind/orgs", "repos_url": "https://api.github.com/users/wwwind/repos", "events_url": "https://api.github.com/users/wwwind/events{/privacy}", "received_events_url": "https://api.github.com/users/wwwind/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1661751498, "node_id": "MDU6TGFiZWwxNjYxNzUxNDk4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TFLiteConverter", "name": "TFLiteConverter", "color": "bfdadc", "default": false, "description": "For issues related to TFLite converter"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jianlijianli", "id": 43797323, "node_id": "MDQ6VXNlcjQzNzk3MzIz", "avatar_url": "https://avatars3.githubusercontent.com/u/43797323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jianlijianli", "html_url": "https://github.com/jianlijianli", "followers_url": "https://api.github.com/users/jianlijianli/followers", "following_url": "https://api.github.com/users/jianlijianli/following{/other_user}", "gists_url": "https://api.github.com/users/jianlijianli/gists{/gist_id}", "starred_url": "https://api.github.com/users/jianlijianli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jianlijianli/subscriptions", "organizations_url": "https://api.github.com/users/jianlijianli/orgs", "repos_url": "https://api.github.com/users/jianlijianli/repos", "events_url": "https://api.github.com/users/jianlijianli/events{/privacy}", "received_events_url": "https://api.github.com/users/jianlijianli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jianlijianli", "id": 43797323, "node_id": "MDQ6VXNlcjQzNzk3MzIz", "avatar_url": "https://avatars3.githubusercontent.com/u/43797323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jianlijianli", "html_url": "https://github.com/jianlijianli", "followers_url": "https://api.github.com/users/jianlijianli/followers", "following_url": "https://api.github.com/users/jianlijianli/following{/other_user}", "gists_url": "https://api.github.com/users/jianlijianli/gists{/gist_id}", "starred_url": "https://api.github.com/users/jianlijianli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jianlijianli/subscriptions", "organizations_url": "https://api.github.com/users/jianlijianli/orgs", "repos_url": "https://api.github.com/users/jianlijianli/repos", "events_url": "https://api.github.com/users/jianlijianli/events{/privacy}", "received_events_url": "https://api.github.com/users/jianlijianli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-02-24T16:13:47Z", "updated_at": "2020-03-13T18:35:31Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (or github SHA if from source):\r\nversion is 2.2.0-dev20200218, git version is v1.12.1-25080-gca585e7\r\n\r\n**Command used to run the converter or code if you\u2019re using the Python API**\r\nIf possible, please share a link to Colab/Jupyter/any notebook.\r\n\r\nThe problem has appeared on much bigger model, but I can demonstrate it on the MNIST example.\r\n```\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\nprint(\"version is {}, git version is {}\".format(tf.version.VERSION, tf.version.GIT_VERSION))\r\n\r\n\r\nfrom model import Model\r\n\r\nclass SimpleModel(Model):\r\n    def __init__(self):\r\n        super().__init__()\r\n        self.model_name = \"mnist\"\r\n        self.train_data = None\r\n        self.test_data = None\r\n        self.calib_data = None\r\n        self.num_calib = 1000\r\n        # (data preprocessing) Normalize the input image so that\r\n        # each pixel value is between 0 to 1.\r\n        self.pre_process = lambda x: x / 255.0\r\n\r\n        self._load_data()\r\n        self._set_path()\r\n\r\n    def _load_data(self):\r\n        # Load MNIST dataset\r\n        mnist = tf.keras.datasets.mnist\r\n\r\n        # _data: (images, labels)\r\n        self.train_data, self.test_data = mnist.load_data()\r\n        self.calib_data = self.pre_process(\r\n            self.train_data[0][0 : self.num_calib].astype(np.float32)\r\n        )\r\n\r\n    def train(self):\r\n        cell = tf.keras.layers.GRUCell(3)\r\n\r\n        model = tf.keras.models.Sequential([\r\n            tf.keras.layers.Input(shape=(28, 28), name='input'),\r\n            #tf.keras.layers.LSTM(32),\r\n            tf.keras.layers.RNN(cell, unroll=True),\r\n            tf.keras.layers.Flatten(),\r\n            tf.keras.layers.Dense(10, activation=tf.nn.softmax, name='output')\r\n        ])\r\n        model.summary()\r\n\r\n        train_images = self.pre_process(self.train_data[0])\r\n        train_labels = self.train_data[1]\r\n        test_images = self.pre_process(self.test_data[0])\r\n        test_labels = self.test_data[1]\r\n        # Train the digit classification model\r\n        model.compile(\r\n            optimizer=\"adam\",\r\n            loss=\"sparse_categorical_crossentropy\",\r\n            metrics=[\"accuracy\"],\r\n        )\r\n        model.fit(\r\n            train_images,\r\n            train_labels,\r\n            epochs=1,\r\n            validation_data=(test_images, test_labels),\r\n        )\r\n        # dump SavedModel - ANOTHER BUG HERE!\r\n        #model.save(str(self.savedModel_dir))\r\n\r\n        return model\r\n\r\n    def eval(self, tflite_model_path: str):\r\n        interpreter = tf.lite.Interpreter(model_path=str(tflite_model_path))\r\n        interpreter.allocate_tensors()\r\n\r\n        input_index = interpreter.get_input_details()[0][\"index\"]\r\n        output_index = interpreter.get_output_details()[0][\"index\"]\r\n\r\n        # (data preprocessing) Normalize the input image so that\r\n        # each pixel value is between 0 to 1.\r\n        test_images = self.pre_process(self.test_data[0])\r\n        test_labels = self.test_data[1]\r\n        # Run predictions on every image in the \"test\" dataset.\r\n        prediction_digits = []\r\n        for test_image in test_images:\r\n            # Pre-processing: add batch dimension and convert to float32 to match with\r\n            # the model's input data format.\r\n            test_image = np.expand_dims(test_image, axis=0).astype(np.float32)\r\n            interpreter.set_tensor(input_index, test_image)\r\n\r\n            # Run inference.\r\n            interpreter.invoke()\r\n\r\n            # Post-processing: remove batch dimension and find the digit with highest\r\n            # probability.\r\n            output = interpreter.tensor(output_index)\r\n            digit = np.argmax(output()[0])\r\n            prediction_digits.append(digit)\r\n\r\n        # Compare prediction results with ground truth labels to calculate accuracy.\r\n        accurate_count = 0\r\n        for index, _ in enumerate(prediction_digits):\r\n            if prediction_digits[index] == test_labels[index]:\r\n                accurate_count += 1\r\n        accuracy = accurate_count * 1.0 / len(prediction_digits)\r\n\r\n        return accuracy\r\n\r\n    def _get_calib_data_func(self):\r\n        def representative_data_gen():\r\n            for input_value in self.calib_data:\r\n                input_value = np.expand_dims(input_value, axis=0).astype(np.float32)\r\n                yield [input_value]\r\n\r\n        return representative_data_gen\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    temp = SimpleModel()\r\n    model = temp.train()\r\n\r\n    converter = tf.lite.TFLiteConverter.from_keras_model(model)\r\n    converter.optimizations = [tf.lite.Optimize.DEFAULT]\r\n    converter.representative_dataset = temp._get_calib_data_func()\r\n\r\n    # save INT8 tflite\r\n    converter.target_spec.supported_ops = [tf.lite.OpsSet.TFLITE_BUILTINS_INT8,\r\n        tf.lite.OpsSet.SELECT_TF_OPS]\r\n    converter.experimental_new_converter = True\r\n    tflite_model_INT8 = converter.convert()\r\n    open(\"lstm_unrolled_int8.tflite\", \"wb\").write(tflite_model_INT8)\r\n\r\n    print(\"INT8 model eval results: {:f}\".format(temp.eval(\"lstm_unrolled_int8\")))\r\n\r\n```\r\n\r\n**The output from the converter invocation**\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/elezhe01/work/discovery/int16_crosstest/model/SimpleModelLSTM_self.py\", line 132, in <module>\r\n    print(\"INT8 model eval results: {:f}\".format(temp.eval(\"lstm_unrolled_int8\")))\r\n  File \"/home/elezhe01/work/discovery/int16_crosstest/model/SimpleModelLSTM_self.py\", line 69, in eval\r\n    interpreter.allocate_tensors()\r\n  File \"/home/elezhe01/.local/lib/python3.6/site-packages/tensorflow/lite/python/interpreter.py\", line 242, in allocate_tensors\r\n    return self._interpreter.AllocateTensors()\r\n  File \"/home/elezhe01/.local/lib/python3.6/site-packages/tensorflow/lite/python/interpreter_wrapper/tensorflow_wrap_interpreter_wrapper.py\", line 110, in AllocateTensors\r\n    return _tensorflow_wrap_interpreter_wrapper.InterpreterWrapper_AllocateTensors(self)\r\nRuntimeError: tensorflow/lite/kernels/kernel_util.cc:129 std::abs(input_product_scale - bias_scale) <= 1e-6 * std::min(input_product_scale, bias_scale) was not true.Node number 3 (FULLY_CONNECTED) failed to prepare.\r\n```\r\n\r\n**Also, please include a link to the saved model or GraphDef**\r\n\r\n```\r\nAnother bug: The model with unrolled RNN cell can't be saved - see above\r\n```\r\n\r\n**Failure details**\r\n\r\nThe error above means that the scale of bias is not equal to the scale of activations * the scale of weights as it should be. As far as I can see, after unroll operation the bias is shared, but it should be quantized for each layer separately. \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37020", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37020/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37020/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37020/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37020", "id": 569887786, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc5MDE2MTEw", "number": 37020, "title": "Modified metric_utils.py to fix conflicts with floatx and float32", "user": {"login": "ashutosh1919", "id": 20843596, "node_id": "MDQ6VXNlcjIwODQzNTk2", "avatar_url": "https://avatars3.githubusercontent.com/u/20843596?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ashutosh1919", "html_url": "https://github.com/ashutosh1919", "followers_url": "https://api.github.com/users/ashutosh1919/followers", "following_url": "https://api.github.com/users/ashutosh1919/following{/other_user}", "gists_url": "https://api.github.com/users/ashutosh1919/gists{/gist_id}", "starred_url": "https://api.github.com/users/ashutosh1919/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ashutosh1919/subscriptions", "organizations_url": "https://api.github.com/users/ashutosh1919/orgs", "repos_url": "https://api.github.com/users/ashutosh1919/repos", "events_url": "https://api.github.com/users/ashutosh1919/events{/privacy}", "received_events_url": "https://api.github.com/users/ashutosh1919/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1178505529, "node_id": "MDU6TGFiZWwxMTc4NTA1NTI5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/prtype:bugfix", "name": "prtype:bugfix", "color": "159b2e", "default": false, "description": "PR to fix a bug"}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-24T14:20:44Z", "updated_at": "2020-03-05T11:39:35Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37020", "html_url": "https://github.com/tensorflow/tensorflow/pull/37020", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37020.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37020.patch"}, "body": "Fixes #36790. @pavithrasv, @MarkDaoust  Please review this PR."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37019", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37019/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37019/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37019/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37019", "id": 569884685, "node_id": "MDU6SXNzdWU1Njk4ODQ2ODU=", "number": 37019, "title": "Tensorflow 2.1.0 :  TypeError: __new__() got an unexpected keyword argument 'serialized_options'", "user": {"login": "votesappteam", "id": 61419742, "node_id": "MDQ6VXNlcjYxNDE5NzQy", "avatar_url": "https://avatars2.githubusercontent.com/u/61419742?v=4", "gravatar_id": "", "url": "https://api.github.com/users/votesappteam", "html_url": "https://github.com/votesappteam", "followers_url": "https://api.github.com/users/votesappteam/followers", "following_url": "https://api.github.com/users/votesappteam/following{/other_user}", "gists_url": "https://api.github.com/users/votesappteam/gists{/gist_id}", "starred_url": "https://api.github.com/users/votesappteam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/votesappteam/subscriptions", "organizations_url": "https://api.github.com/users/votesappteam/orgs", "repos_url": "https://api.github.com/users/votesappteam/repos", "events_url": "https://api.github.com/users/votesappteam/events{/privacy}", "received_events_url": "https://api.github.com/users/votesappteam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 1093464312, "node_id": "MDU6TGFiZWwxMDkzNDY0MzEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:others", "name": "type:others", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "Saduf2019", "id": 59822926, "node_id": "MDQ6VXNlcjU5ODIyOTI2", "avatar_url": "https://avatars2.githubusercontent.com/u/59822926?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Saduf2019", "html_url": "https://github.com/Saduf2019", "followers_url": "https://api.github.com/users/Saduf2019/followers", "following_url": "https://api.github.com/users/Saduf2019/following{/other_user}", "gists_url": "https://api.github.com/users/Saduf2019/gists{/gist_id}", "starred_url": "https://api.github.com/users/Saduf2019/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Saduf2019/subscriptions", "organizations_url": "https://api.github.com/users/Saduf2019/orgs", "repos_url": "https://api.github.com/users/Saduf2019/repos", "events_url": "https://api.github.com/users/Saduf2019/events{/privacy}", "received_events_url": "https://api.github.com/users/Saduf2019/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Saduf2019", "id": 59822926, "node_id": "MDQ6VXNlcjU5ODIyOTI2", "avatar_url": "https://avatars2.githubusercontent.com/u/59822926?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Saduf2019", "html_url": "https://github.com/Saduf2019", "followers_url": "https://api.github.com/users/Saduf2019/followers", "following_url": "https://api.github.com/users/Saduf2019/following{/other_user}", "gists_url": "https://api.github.com/users/Saduf2019/gists{/gist_id}", "starred_url": "https://api.github.com/users/Saduf2019/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Saduf2019/subscriptions", "organizations_url": "https://api.github.com/users/Saduf2019/orgs", "repos_url": "https://api.github.com/users/Saduf2019/repos", "events_url": "https://api.github.com/users/Saduf2019/events{/privacy}", "received_events_url": "https://api.github.com/users/Saduf2019/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2020-02-24T14:16:10Z", "updated_at": "2020-03-18T07:45:20Z", "closed_at": null, "author_association": "NONE", "body": "I am facing an error while importing tensorflow-2.1.0 (CPU) with Python 3.6 in Ubuntu 18.\r\n protobuf Version: 3.11.3\r\nTried many solutions provided in the same Tensorflow GitHub issue pages..But none were useful. \r\nI dont have any NVIDIA, CUDA etc.. (I dont want to install them as i would like to go with CPU)\r\n\r\nFollowing errors appeared.\r\n---------------------------------\r\n[Mon Feb 24 11:44:52.926212 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote 127.0.0.1:34372] mod_wsgi (pid=5520): Exception occurred processing WSGI script '/var/www/testnig/service.wsgi'.\r\n[Mon Feb 24 11:44:52.927298 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote 127.0.0.1:34372] Traceback (most recent call last):\r\n[Mon Feb 24 11:44:52.927347 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote 127.0.0.1:34372]   File \"/var/www/testnig/service.wsgi\", line 9, in <module>\r\n[Mon Feb 24 11:44:52.927352 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote 127.0.0.1:34372]     from service import app as application\r\n[Mon Feb 24 11:44:52.927358 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote 127.0.0.1:34372]   File \"/var/www/testnig/service.py\", line 11, in <module>\r\n[Mon Feb 24 11:44:52.927362 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote 127.0.0.1:34372]     import classify\r\n[Mon Feb 24 11:44:52.927367 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote 127.0.0.1:34372]   File \"/var/www/testnig/classify.py\", line 3, in <module>\r\n[Mon Feb 24 11:44:52.927370 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote 127.0.0.1:34372]     import tensorflow as tf\r\n[Mon Feb 24 11:44:52.927376 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote 127.0.0.1:34372]   File \"/var/www/testnig/venv/lib/python3.6/site-packages/tensorflow/__init__.py\", line 98, in <module>\r\n[Mon Feb 24 11:44:52.927379 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote 127.0.0.1:34372]     from tensorflow_core import *\r\n[Mon Feb 24 11:44:52.927384 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote 127.0.0.1:34372]   File \"/var/www/testnig/venv/lib/python3.6/site-packages/tensorflow_core/__init__.py\", line 42, in <module>\r\n[Mon Feb 24 11:44:52.927388 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote 127.0.0.1:34372]     from . _api.v2 import audio\r\n[Mon Feb 24 11:44:52.927393 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote 127.0.0.1:34372]   File \"/var/www/testnig/venv/lib/python3.6/site-packages/tensorflow_core/_api/v2/audio/__init__.py\", line 10, in <module>\r\n[Mon Feb 24 11:44:52.927397 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote 127.0.0.1:34372]     from tensorflow.python.ops.gen_audio_ops import decode_wav\r\n[Mon Feb 24 11:44:52.927402 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote 127.0.0.1:34372]   File \"/var/www/testnig/venv/lib/python3.6/site-packages/tensorflow_core/python/ops/gen_audio_ops.py\", line 11, in <module>\r\n[Mon Feb 24 11:44:52.927406 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote 127.0.0.1:34372]     from tensorflow.python.eager import context as _context\r\n[Mon Feb 24 11:44:52.927411 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote 127.0.0.1:34372]   File \"/var/www/testnig/venv/lib/python3.6/site-packages/tensorflow_core/python/eager/context.py\", line 29, in <module>\r\n[Mon Feb 24 11:44:52.927414 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote 127.0.0.1:34372]     from tensorflow.core.protobuf import config_pb2\r\n[Mon Feb 24 11:44:52.927420 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote 127.0.0.1:34372]   File \"/var/www/testnig/venv/lib/python3.6/site-packages/tensorflow_core/core/protobuf/config_pb2.py\", line 16, in <module>\r\n[Mon Feb 24 11:44:52.927423 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote 127.0.0.1:34372]     from tensorflow.core.framework import cost_graph_pb2 as tensorflow_dot_core_dot_framework_dot_cost__graph__pb2\r\n[Mon Feb 24 11:44:52.927436 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote 127.0.0.1:34372]   File \"/var/www/testnig/venv/lib/python3.6/site-packages/tensorflow_core/core/framework/cost_graph_pb2.py\", line 16, in <module>\r\n[Mon Feb 24 11:44:52.927440 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote 127.0.0.1:34372]     from tensorflow.core.framework import tensor_shape_pb2 as tensorflow_dot_core_dot_framework_dot_tensor__shape__pb2\r\n[Mon Feb 24 11:44:52.927445 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote 127.0.0.1:34372]   File \"/var/www/testnig/venv/lib/python3.6/site-packages/tensorflow_core/core/framework/tensor_shape_pb2.py\", line 23, in <module>\r\n[Mon Feb 24 11:44:52.927449 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote 127.0.0.1:34372]     serialized_pb=_b('\\\\n,tensorflow/core/framework/tensor_shape.proto\\\\x12\\\\ntensorflow\\\\\"z\\\\n\\\\x10TensorShapeProto\\\\x12-\\\\n\\\\x03\\\\x64im\\\\x18\\\\x02 \\\\x03(\\\\x0b\\\\x32 .tensorflow.TensorShapeProto.Dim\\\\x12\\\\x14\\\\n\\\\x0cunknown_rank\\\\x18\\\\x03 \\\\x01(\\\\x08\\\\x1a!\\\\n\\\\x03\\\\x44im\\\\x12\\\\x0c\\\\n\\\\x04size\\\\x18\\\\x01 \\\\x01(\\\\x03\\\\x12\\\\x0c\\\\n\\\\x04name\\\\x18\\\\x02 \\\\x01(\\\\tBq\\\\n\\\\x18org.tensorflow.frameworkB\\\\x11TensorShapeProtosP\\\\x01Z=github.com/tensorflow/tensorflow/tensorflow/go/core/framework\\\\xf8\\\\x01\\\\x01\\\\x62\\\\x06proto3')\r\n[Mon Feb 24 11:44:52.927464 2020] [wsgi:error] [pid 5520:tid 140127778391808] [remote **127.0.0.1:34372] **TypeError: __new__() got an unexpected keyword argument *emphasized text*'serialized_options'****\r\n\r\nSteps to reproduce : (I am using Apache2, Flask & python3 for NSFW detection). However following are the simplest ways to reproduce. \r\n 1. In Ubuntu 18, install python 3.6 and create a Virtualenv. Activate Virtualenv\r\n 2. pip3 install tensorflow\r\n 3. Clone or Download GIT --> github.com/minto5050/NSFW-detection \r\n4. python3 classify.py test_image.jpg\r\n\r\nPlease let me know if you need any other information"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37017", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37017/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37017/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37017/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37017", "id": 569827893, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc4OTY2NTgz", "number": 37017, "title": "Added information", "user": {"login": "gavinlive", "id": 22893238, "node_id": "MDQ6VXNlcjIyODkzMjM4", "avatar_url": "https://avatars0.githubusercontent.com/u/22893238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gavinlive", "html_url": "https://github.com/gavinlive", "followers_url": "https://api.github.com/users/gavinlive/followers", "following_url": "https://api.github.com/users/gavinlive/following{/other_user}", "gists_url": "https://api.github.com/users/gavinlive/gists{/gist_id}", "starred_url": "https://api.github.com/users/gavinlive/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gavinlive/subscriptions", "organizations_url": "https://api.github.com/users/gavinlive/orgs", "repos_url": "https://api.github.com/users/gavinlive/repos", "events_url": "https://api.github.com/users/gavinlive/events{/privacy}", "received_events_url": "https://api.github.com/users/gavinlive/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-02-24T12:34:48Z", "updated_at": "2020-03-09T09:14:00Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37017", "html_url": "https://github.com/tensorflow/tensorflow/pull/37017", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37017.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37017.patch"}, "body": "Added information about initial_state for Bidirectional RNNs"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37014", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37014/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37014/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37014/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37014", "id": 569747436, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc4OTAxMDU0", "number": 37014, "title": "Modified reduce_variance for extra optimization", "user": {"login": "ashutosh1919", "id": 20843596, "node_id": "MDQ6VXNlcjIwODQzNTk2", "avatar_url": "https://avatars3.githubusercontent.com/u/20843596?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ashutosh1919", "html_url": "https://github.com/ashutosh1919", "followers_url": "https://api.github.com/users/ashutosh1919/followers", "following_url": "https://api.github.com/users/ashutosh1919/following{/other_user}", "gists_url": "https://api.github.com/users/ashutosh1919/gists{/gist_id}", "starred_url": "https://api.github.com/users/ashutosh1919/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ashutosh1919/subscriptions", "organizations_url": "https://api.github.com/users/ashutosh1919/orgs", "repos_url": "https://api.github.com/users/ashutosh1919/repos", "events_url": "https://api.github.com/users/ashutosh1919/events{/privacy}", "received_events_url": "https://api.github.com/users/ashutosh1919/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 1178505529, "node_id": "MDU6TGFiZWwxMTc4NTA1NTI5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/prtype:bugfix", "name": "prtype:bugfix", "color": "159b2e", "default": false, "description": "PR to fix a bug"}, {"id": 987666414, "node_id": "MDU6TGFiZWw5ODc2NjY0MTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/ready%20to%20pull", "name": "ready to pull", "color": "2cd643", "default": false, "description": ""}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2020-02-24T09:59:46Z", "updated_at": "2020-03-18T03:45:41Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37014", "html_url": "https://github.com/tensorflow/tensorflow/pull/37014", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37014.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37014.patch"}, "body": "Fixes #37000. Please take a look at [this proof](https://math.stackexchange.com/a/755344) for the formula used. So, it is good to modify this if  it's optimization as suggested in the issue."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37013", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37013/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37013/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37013/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37013", "id": 569740780, "node_id": "MDU6SXNzdWU1Njk3NDA3ODA=", "number": 37013, "title": "TensorFlow tf.data.Dataset API extremely slow for 3D-shaped pipeline", "user": {"login": "mimxrt", "id": 53339396, "node_id": "MDQ6VXNlcjUzMzM5Mzk2", "avatar_url": "https://avatars1.githubusercontent.com/u/53339396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mimxrt", "html_url": "https://github.com/mimxrt", "followers_url": "https://api.github.com/users/mimxrt/followers", "following_url": "https://api.github.com/users/mimxrt/following{/other_user}", "gists_url": "https://api.github.com/users/mimxrt/gists{/gist_id}", "starred_url": "https://api.github.com/users/mimxrt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mimxrt/subscriptions", "organizations_url": "https://api.github.com/users/mimxrt/orgs", "repos_url": "https://api.github.com/users/mimxrt/repos", "events_url": "https://api.github.com/users/mimxrt/events{/privacy}", "received_events_url": "https://api.github.com/users/mimxrt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-24T09:47:00Z", "updated_at": "2020-02-25T10:27:05Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04.3 LTS\r\n- TensorFlow installed from (source or binary): binary pip\r\n- TensorFlow version (use command below): v2.1.0-rc2-17-ge5bf8de 2.1.0\r\n- Python version: Python 3.7.6\r\n- CUDA/cuDNN version: 7.6.4.38-1\r\n- GPU model and memory: Quadro RTX 6000 22752 MB\r\n\r\n**Describe the current behavior**\r\nIn the data pipeline given below, the performance is extremely low. The pipeline produces output of the shape `((128, None, 128), (128, None, 5))` and if either dimension 0 (batching) or dimension 1 (windowing) is removed, the performance is much higher. Unfortunately both batching and windowing are required for efficient and meaningful training.\r\n\r\nAdditionally, the iteration of the Dataset does not work as expected with 3D output. The shape of the output tensor (loop body at the end: `print([x.shape for x in e])`) is not printed at all. When removing either windowing or batching, the shape is printed as expected. From this I suspect this issue could also be a bug.\r\n\r\nTimings for comparison (note: number of time steps / dim 1 (`None`) is avg. 312.5 = 40000 / 128):\r\n- 1x Shape `((128, None, 128), (128, None, 5))`:\r\n**546.8976650238037 s**\r\n- 1000x Shape `((128, 128), (128, 5))` (no windowing):\r\n8.29618239402771 s * 312.5 / 1000 = **2.592556998133659375 s**\r\nSpeedup: 210x faster\r\n- 1000x Shape `((None, 128), (None, 5))` (no batching):\r\n65.43172574043274 * 128 / 1000 = **8,37526089477539072 s**\r\nSpeedup: 65x faster\r\n\r\n**Describe the expected behavior**\r\nIt is expected for the performance to scale linearly with the amount of data. The shape of the output data should not have a big negative effect on performance.\r\n\r\n**Standalone code to reproduce the issue** \r\n```\r\nimport time\r\nimport random\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\nprint(\"TensorFlow {}\".format(tf.__version__))\r\n\r\nnum_features = 128\r\nnum_labels = 5\r\nbatch_size = 128\r\nwin_size = 2048\r\nlen_max = 600000\r\n\r\n# create some sample .tfrecord files with different length\r\n\r\nl1 = len_max - 44260\r\nX1, Y1 = (np.ones((l1, num_features + 2)), np.zeros((l1, num_labels)))\r\nl2 = len_max - 121340\r\nX2, Y2 = (np.ones((l2, num_features + 2)), np.zeros((l2, num_labels)))\r\n\r\ndef write_tfrecord(X, Y, fn):\r\n    with tf.Graph().as_default():\r\n        ds = tf.data.Dataset.from_tensor_slices((X, Y))\r\n\r\n        sstring = ds.map(lambda *x: \r\n           tf.reshape(tf.py_function(lambda *v:\r\n               tf.train.Example(features=tf.train.Features(feature={\r\n                   \"features\": tf.train.Feature(float_list=tf.train.FloatList(value=v[0].numpy())),\r\n                   \"label\": tf.train.Feature(float_list=tf.train.FloatList(value=v[1].numpy())),\r\n               })).SerializeToString(), x, tf.string\r\n           ), ())\r\n        )\r\n\r\n        writer = tf.data.experimental.TFRecordWriter(fn)\r\n        writer_op = writer.write(sstring)\r\n\r\n        sess = tf.compat.v1.Session()\r\n        sess.run(tf.compat.v1.global_variables_initializer())\r\n        sess.run(writer_op)\r\n        sess.close()\r\n\r\nfiles_base = [\"./temp1.tfrecord\", \"./temp2.tfrecord\"]\r\n\r\nwrite_tfrecord(X1, Y1, files_base[0])\r\nwrite_tfrecord(X2, Y2, files_base[1])\r\n\r\n# take 200 random files as dataset\r\n\r\nfiles = random.choices(files_base, k=200)\r\n\r\nds_fs = tf.data.Dataset.list_files(files, shuffle=True, seed=1)\r\nfs_len = 0\r\nfor f in ds_fs:\r\n    fs_len += 1\r\nprint(\"Reading {} tfrecord files...\".format(fs_len))\r\n\r\n# create a StaticHashTable holding the length for trimming\r\n\r\nds_f_len_table = tf.lookup.StaticHashTable(tf.lookup.KeyValueTensorInitializer(\r\n        tf.constant(files_base),\r\n        tf.constant([random.randint(30000, 50000), random.randint(30000, 50000)], dtype=tf.int64)\r\n), -1)\r\n\r\n# prepare the Dataset\r\n\r\ndef prep_ds_file(file):\r\n    _ds = tf.data.TFRecordDataset(file)\r\n    _ds = _ds.map(lambda x: tf.io.parse_single_example(x, {\r\n        \"features\": tf.io.FixedLenFeature([num_features + 2], tf.float32),\r\n        \"label\": tf.io.FixedLenFeature([num_labels], tf.float32),\r\n    }), num_parallel_calls=tf.data.experimental.AUTOTUNE)\r\n    print(_ds)\r\n\r\n    _ds = _ds.flat_map(lambda v: tf.data.Dataset.from_tensors((v[\"features\"][2:], v[\"label\"])))\r\n    print(_ds)\r\n\r\n    _trunc = ds_f_len_table.lookup(file)\r\n    _ds = _ds.take(_trunc)\r\n    print(_ds)\r\n    _num_tsteps = _trunc // batch_size\r\n\r\n    ####################################################################################################\r\n    # WINDOWING                                                                                        #\r\n    ####################################################################################################\r\n    _ds = _ds.window(size=_num_tsteps, shift=win_size//2, stride=1, drop_remainder=True)               #\r\n    print(_ds)                                                                                         #\r\n    _ds = _ds.flat_map(lambda x, y: tf.data.Dataset.zip((x.batch(_num_tsteps), y.batch(_num_tsteps)))) #\r\n    print(_ds)                                                                                         #\r\n    ####################################################################################################\r\n\r\n    ##################################################\r\n    # BATCHING                                       #\r\n    ##################################################\r\n    _ds = _ds.batch(batch_size, drop_remainder=True) #\r\n    print(_ds)                                       #\r\n    ##################################################\r\n\r\n    return _ds\r\n\r\n\r\ndef prep_ds(files):\r\n    _ds = files.flat_map(prep_ds_file)\r\n    print(_ds)\r\n    return _ds\r\n\r\n\r\nds = prep_ds(ds_fs)\r\n\r\n# read/use the Dataset\r\n\r\nts = time.time()\r\nfor e in ds.take(1):\r\n    print([x.shape for x in e])\r\nte = time.time()\r\nprint(\"Duration: {} s\".format(te - ts))\r\n```\r\nOutput:\r\n```\r\nTensorFlow 2.1.0\r\nReading 200 tfrecord files...\r\n<ParallelMapDataset shapes: {features: (130,), label: (5,)}, types: {features: tf.float32, label: tf.float32}>\r\n<FlatMapDataset shapes: ((128,), (5,)), types: (tf.float32, tf.float32)>\r\n<TakeDataset shapes: ((128,), (5,)), types: (tf.float32, tf.float32)>\r\n<WindowDataset shapes: (DatasetSpec(TensorSpec(shape=(128,), dtype=tf.float32, name=None), TensorShape([])), DatasetSpec(TensorSpec(shape=(5,), dtype=tf.float32, name=None), TensorShape([]))), types: (DatasetSpec(TensorSpec(shape=(128,), dtype=tf.float32, name=None), TensorShape([])), DatasetSpec(TensorSpec(shape=(5,), dtype=tf.float32, name=None), TensorShape([])))>\r\n<FlatMapDataset shapes: ((None, 128), (None, 5)), types: (tf.float32, tf.float32)>\r\n<BatchDataset shapes: ((128, None, 128), (128, None, 5)), types: (tf.float32, tf.float32)>\r\n<FlatMapDataset shapes: ((128, None, 128), (128, None, 5)), types: (tf.float32, tf.float32)>\r\nDuration: 546.8976650238037 s\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37010", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37010/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37010/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37010/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37010", "id": 569691469, "node_id": "MDU6SXNzdWU1Njk2OTE0Njk=", "number": 37010, "title": "TopK result always sort when k==num_cols", "user": {"login": "guizili0", "id": 40055917, "node_id": "MDQ6VXNlcjQwMDU1OTE3", "avatar_url": "https://avatars2.githubusercontent.com/u/40055917?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guizili0", "html_url": "https://github.com/guizili0", "followers_url": "https://api.github.com/users/guizili0/followers", "following_url": "https://api.github.com/users/guizili0/following{/other_user}", "gists_url": "https://api.github.com/users/guizili0/gists{/gist_id}", "starred_url": "https://api.github.com/users/guizili0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guizili0/subscriptions", "organizations_url": "https://api.github.com/users/guizili0/orgs", "repos_url": "https://api.github.com/users/guizili0/repos", "events_url": "https://api.github.com/users/guizili0/events{/privacy}", "received_events_url": "https://api.github.com/users/guizili0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-24T08:02:58Z", "updated_at": "2020-03-03T21:11:08Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a bug. As per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04): CentOS Linux release 7.5.1804\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if\r\nthe issue happens on mobile device: No\r\n- TensorFlow installed from (source or\r\nbinary): - TensorFlow version (use command below): 2.1.0 using pip install \r\n- Python version: - Bazel\r\nversion (if compiling from source):NA\r\n- GCC/Compiler version (if compiling from\r\nsource): NA\r\n- CUDA/cuDNN version: - GPU model and memory:NA\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\ntop_k op always sort when k == input size\r\n\r\n**Describe the expected behavior**\r\nNo sort when sorted=False\r\n**Standalone code to reproduce the issue** \r\nProvide a reproducible test case that is the bare minimum necessary to generate\r\nthe problem. If possible, please share a link to Colab/Jupyter/any notebook.\r\n```python\r\nimport tensorflow as tf\r\n\r\na = tf.constant([1, 2, 3, 4], dtype=tf.float32)\r\nb = tf.math.top_k(a, k=4, sorted=False)\r\nc = tf.math.top_k(a, k=4, sorted=True)\r\n\r\nprint(b)\r\nprint(c)\r\n```\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n```python\r\nTopKV2(values=<tf.Tensor: shape=(4,), dtype=float32, numpy=array([4., 3., 2., 1.], dtype=float32)>, indices=<tf.Tensor: shape=(4,), dtype=int32, numpy=array([3, 2, 1, 0], dtype=int32)>)\r\nTopKV2(values=<tf.Tensor: shape=(4,), dtype=float32, numpy=array([4., 3., 2., 1.], dtype=float32)>, indices=<tf.Tensor: shape=(4,), dtype=int32, numpy=array([3, 2, 1, 0], dtype=int32)>)\r\n```\r\nThe result show b and c are same with the result has been sorted."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37007", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37007/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37007/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37007/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37007", "id": 569673793, "node_id": "MDU6SXNzdWU1Njk2NzM3OTM=", "number": 37007, "title": "Unable to implement \"Hello_world\" example on esp32", "user": {"login": "kunalkul", "id": 43831364, "node_id": "MDQ6VXNlcjQzODMxMzY0", "avatar_url": "https://avatars1.githubusercontent.com/u/43831364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kunalkul", "html_url": "https://github.com/kunalkul", "followers_url": "https://api.github.com/users/kunalkul/followers", "following_url": "https://api.github.com/users/kunalkul/following{/other_user}", "gists_url": "https://api.github.com/users/kunalkul/gists{/gist_id}", "starred_url": "https://api.github.com/users/kunalkul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kunalkul/subscriptions", "organizations_url": "https://api.github.com/users/kunalkul/orgs", "repos_url": "https://api.github.com/users/kunalkul/repos", "events_url": "https://api.github.com/users/kunalkul/events{/privacy}", "received_events_url": "https://api.github.com/users/kunalkul/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1589976566, "node_id": "MDU6TGFiZWwxNTg5OTc2NTY2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:micro", "name": "comp:micro", "color": "3e2eea", "default": false, "description": "Related to TensorFlow Lite Microcontrollers"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rockyrhodes", "id": 7253968, "node_id": "MDQ6VXNlcjcyNTM5Njg=", "avatar_url": "https://avatars2.githubusercontent.com/u/7253968?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rockyrhodes", "html_url": "https://github.com/rockyrhodes", "followers_url": "https://api.github.com/users/rockyrhodes/followers", "following_url": "https://api.github.com/users/rockyrhodes/following{/other_user}", "gists_url": "https://api.github.com/users/rockyrhodes/gists{/gist_id}", "starred_url": "https://api.github.com/users/rockyrhodes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rockyrhodes/subscriptions", "organizations_url": "https://api.github.com/users/rockyrhodes/orgs", "repos_url": "https://api.github.com/users/rockyrhodes/repos", "events_url": "https://api.github.com/users/rockyrhodes/events{/privacy}", "received_events_url": "https://api.github.com/users/rockyrhodes/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rockyrhodes", "id": 7253968, "node_id": "MDQ6VXNlcjcyNTM5Njg=", "avatar_url": "https://avatars2.githubusercontent.com/u/7253968?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rockyrhodes", "html_url": "https://github.com/rockyrhodes", "followers_url": "https://api.github.com/users/rockyrhodes/followers", "following_url": "https://api.github.com/users/rockyrhodes/following{/other_user}", "gists_url": "https://api.github.com/users/rockyrhodes/gists{/gist_id}", "starred_url": "https://api.github.com/users/rockyrhodes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rockyrhodes/subscriptions", "organizations_url": "https://api.github.com/users/rockyrhodes/orgs", "repos_url": "https://api.github.com/users/rockyrhodes/repos", "events_url": "https://api.github.com/users/rockyrhodes/events{/privacy}", "received_events_url": "https://api.github.com/users/rockyrhodes/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2020-02-24T07:14:08Z", "updated_at": "2020-03-13T05:17:16Z", "closed_at": null, "author_association": "NONE", "body": "@tensorflow/micro\r\n\r\n**System information**\r\n- Host OS Platform and Distribution : Windows 10\r\n- TensorFlow installed from : installed on esp-idf using `pip install tensorflow`\r\n- Tensorflow version (commit SHA if source):\r\n- Target platform : esp32-devKitC-V4\r\n\r\n**Describe the problem**\r\nI have followed [this](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/lite/micro/examples/hello_world/README.md#deploy-to-esp32) guide step-by-step so far\r\nI managed to install the esp-idf and also checked that the env. variables are in PATH (following the guide) but unable to proceed further\r\n\r\n**Exact sequence of commands/steps when you ran into the problem**\r\nafter doing `pip install tensorflow` (on esp-idf cmd prompt), I entered this command:\r\n`make -f tensorflow/lite/micro/tools/make/Makefile TARGET=esp generate_hello_world_esp_project`\r\n\r\nand the output is this:\r\n`'make' is not recognized as an internal or external command,\r\noperable program or batch file.`\r\n\r\nI also tried this command:\r\n`cmake -f tensorflow/lite/micro/tools/make/Makefile TARGET=esp generate_hello_world_esp_project`\r\n\r\nand this was the error:\r\n`CMake Error: The source directory \"C:/Users/kkulk/Desktop/esp-idf/generate_hello_world_esp_project\" does not exist.\r\nSpecify --help for usage, or press the help button on the CMake GUI.`\r\n\r\n**I am a complete newbie to esp32, tensorflow and github as well, please let me know what the problem seems to be and if I am overlooking something completely obvious or did something wrong**"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37004", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37004/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37004/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37004/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37004", "id": 569659502, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc4ODI5MzEx", "number": 37004, "title": "Add checking of kwonlyargs in keras has_arg", "user": {"login": "adriangb", "id": 1755071, "node_id": "MDQ6VXNlcjE3NTUwNzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1755071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adriangb", "html_url": "https://github.com/adriangb", "followers_url": "https://api.github.com/users/adriangb/followers", "following_url": "https://api.github.com/users/adriangb/following{/other_user}", "gists_url": "https://api.github.com/users/adriangb/gists{/gist_id}", "starred_url": "https://api.github.com/users/adriangb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adriangb/subscriptions", "organizations_url": "https://api.github.com/users/adriangb/orgs", "repos_url": "https://api.github.com/users/adriangb/repos", "events_url": "https://api.github.com/users/adriangb/events{/privacy}", "received_events_url": "https://api.github.com/users/adriangb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 987666414, "node_id": "MDU6TGFiZWw5ODc2NjY0MTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/ready%20to%20pull", "name": "ready to pull", "color": "2cd643", "default": false, "description": ""}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-02-24T06:26:30Z", "updated_at": "2020-03-19T11:43:50Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37004", "html_url": "https://github.com/tensorflow/tensorflow/pull/37004", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37004.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37004.patch"}, "body": "I ran into an issue with `tensorflow.keras.utils.generic_utils.has_arg` when using in conjunction with `functools.partial`. Minimum reproducible example:\r\n```python3\r\nfrom functools import partial\r\n\r\nfrom tensorflow.python.keras.utils.generic_utils import has_arg\r\n\r\n\r\ndef f(a, b, c):\r\n      return a + b + c\r\n\r\npartial_f = partial(f, b=1)\r\n\r\nassert has_arg(partial_f, 'c', accept_all=True)\r\n```\r\n\r\nI would expect `c` to be in the args, even though it has been converted to a keyword-only argument by partial due to its position after a keyword argument (`b`). It appears that `has_arg` does not check keyword-only arguments. I'm assuming this is not by design but rather a bug, based on what I see in keras-team/keras#7035. I'm submitting this PR as a tentative fix, and I added the above code snippet to the tests. There are much more extensive tests in `tensorflow/tensorflow/python/util/tf_inspect_test.py`; it might be worth checking some of the edge cases there in `has_arg` tests (for a future PR)."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37003", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37003/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37003/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37003/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37003", "id": 569633708, "node_id": "MDU6SXNzdWU1Njk2MzM3MDg=", "number": 37003, "title": "RuntimeError: Encountered unresolved custom op: TensorListFromTensor.Node number 892 (TensorListFromTensor) failed to prepare.", "user": {"login": "2696120622", "id": 25716027, "node_id": "MDQ6VXNlcjI1NzE2MDI3", "avatar_url": "https://avatars3.githubusercontent.com/u/25716027?v=4", "gravatar_id": "", "url": "https://api.github.com/users/2696120622", "html_url": "https://github.com/2696120622", "followers_url": "https://api.github.com/users/2696120622/followers", "following_url": "https://api.github.com/users/2696120622/following{/other_user}", "gists_url": "https://api.github.com/users/2696120622/gists{/gist_id}", "starred_url": "https://api.github.com/users/2696120622/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/2696120622/subscriptions", "organizations_url": "https://api.github.com/users/2696120622/orgs", "repos_url": "https://api.github.com/users/2696120622/repos", "events_url": "https://api.github.com/users/2696120622/events{/privacy}", "received_events_url": "https://api.github.com/users/2696120622/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1093464312, "node_id": "MDU6TGFiZWwxMDkzNDY0MzEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:others", "name": "type:others", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2020-02-24T04:46:52Z", "updated_at": "2020-03-12T22:37:45Z", "closed_at": null, "author_association": "NONE", "body": "System information\r\n\r\nGoogle Colaboratory   \r\nTensorflow 2.1.0     \r\n\r\nMy tf_keras model can be converted to tf.lite successfully as follows.   \r\n`\r\nefficientdet_model= keras.models.load_model('inference_ckpts/ckpts_B1_image-size- \r\n640/mbconv_head_anchor-extend_1e-6/csv_10_0.7139_0.8459.h5',      \r\n                                            custom_objects=custom_objects,     \r\n                                            compile=False,    \r\n                        )     \r\n\r\nexport_dir = \"tf_save/ckpts_B1_image-size-640/mbconv_head_anchor-extend_1e-6/\"     \r\n\r\ntf.saved_model.save(efficientdet_model, export_dir)      \r\n\r\nmodel_tfsave = tf.saved_model.load(export_dir)     \r\n\r\nconcrete_func = model_tfsave.signatures[tf.saved_model.DEFAULT_SERVING_SIGNATURE_DEF_KEY]\r\n     \r\nconcrete_func.inputs[1].set_shape([None,511500,4])     \r\n\r\nconverter = tf.lite.TFLiteConverter.from_concrete_functions([concrete_func])     \r\n\r\nconverter.optimizations = [tf.lite.Optimize.OPTIMIZE_FOR_SIZE]     \r\n\r\nconverter.target_spec.supported_ops = [tf.lite.OpsSet.TFLITE_BUILTINS,tf.lite.OpsSet.SELECT_TF_OPS]\r\n     \r\nconverter.allow_custom_ops=True     \r\n\r\ntflite_model = converter.convert()     \r\n\r\nopen(\"inference_tflite/ckpts_B1_image-size-640/mbconv_head_anchor-extend_1e-6/csv_10_0.7139_0.8459.tflite\", \"wb\").write(tflite_model)    \r\n\r\n`\r\n\r\nHowever, I encountered a RuntimeError  in inference when running \"interpreter.allocate_tensors()\" as the following.    \r\n`\r\ninterpreter = tf.lite.Interpreter(model_path=\"inference_tflite/ckpts_B1_image-size-640/mbconv_head_anchor-extend_1e-6/csv_10_0.7139_0.8459.tflite\")     \r\n\r\ninterpreter.allocate_tensors()    \r\n`  \r\nError.    \r\n`RuntimeError                              Traceback (most recent call last)\r\n<ipython-input-23-e8f284b41149> in <module>()\r\n----> 1 interpreter.allocate_tensors()\r\n\r\n1 frames\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/lite/python/interpreter.py in allocate_tensors(self)\r\n    245   def allocate_tensors(self):\r\n    246     self._ensure_safe()\r\n--> 247     return self._interpreter.AllocateTensors()\r\n    248 \r\n    249   def _safe_to_run(self):\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/lite/python/interpreter_wrapper/tensorflow_wrap_interpreter_wrapper.py in AllocateTensors(self)\r\n    108 \r\n    109     def AllocateTensors(self):\r\n--> 110         return _tensorflow_wrap_interpreter_wrapper.InterpreterWrapper_AllocateTensors(self)\r\n    111 \r\n    112     def Invoke(self):    \r\n\r\nRuntimeError: Encountered unresolved custom op: TensorListFromTensor.Node number 892 (TensorListFromTensor) failed to prepare.`    \r\n    \r\nWhat should I do for this error?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37002", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37002/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37002/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37002/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37002", "id": 569617854, "node_id": "MDU6SXNzdWU1Njk2MTc4NTQ=", "number": 37002, "title": "[Doc] Laplacian for Deep Dream 2.0", "user": {"login": "Uiuran", "id": 1892703, "node_id": "MDQ6VXNlcjE4OTI3MDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/1892703?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Uiuran", "html_url": "https://github.com/Uiuran", "followers_url": "https://api.github.com/users/Uiuran/followers", "following_url": "https://api.github.com/users/Uiuran/following{/other_user}", "gists_url": "https://api.github.com/users/Uiuran/gists{/gist_id}", "starred_url": "https://api.github.com/users/Uiuran/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Uiuran/subscriptions", "organizations_url": "https://api.github.com/users/Uiuran/orgs", "repos_url": "https://api.github.com/users/Uiuran/repos", "events_url": "https://api.github.com/users/Uiuran/events{/privacy}", "received_events_url": "https://api.github.com/users/Uiuran/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-02-24T03:31:50Z", "updated_at": "2020-02-26T20:45:52Z", "closed_at": null, "author_association": "NONE", "body": "Hi, i will skip the complete description of the issue because it ' s obvious thing. In the original Deep Dream code you managed to do a very complex code of splits and merges, this code tuned for much better the Deep Dream results. I dont see it in the 2.0 version. \r\nAlso, iam aware of Lucid project, the \"laplace pyramid\" present in Lucid does not seems to resemble the old Deep Dream code. \r\n\r\nMy question, Is there anyone who tryied to implement this sucessfully for tf 2.0 ? at last something that can talk with the notebook of Deep Dream for TF 2.0 ? \r\n\r\nThank you."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37000", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37000/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37000/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37000/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37000", "id": 569572048, "node_id": "MDU6SXNzdWU1Njk1NzIwNDg=", "number": 37000, "title": "Proposal: Modify tf.math.reduce_variance so that it is compatible with ragged tensors", "user": {"login": "alexrobomind", "id": 5833672, "node_id": "MDQ6VXNlcjU4MzM2NzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/5833672?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexrobomind", "html_url": "https://github.com/alexrobomind", "followers_url": "https://api.github.com/users/alexrobomind/followers", "following_url": "https://api.github.com/users/alexrobomind/following{/other_user}", "gists_url": "https://api.github.com/users/alexrobomind/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexrobomind/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexrobomind/subscriptions", "organizations_url": "https://api.github.com/users/alexrobomind/orgs", "repos_url": "https://api.github.com/users/alexrobomind/repos", "events_url": "https://api.github.com/users/alexrobomind/events{/privacy}", "received_events_url": "https://api.github.com/users/alexrobomind/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-23T22:43:42Z", "updated_at": "2020-02-24T12:04:56Z", "closed_at": null, "author_association": "NONE", "body": "Sorry for filing this under \"bug\", but the \"feature request\" submission option didn't show up for me. Please correct this if possible (I copied the template by hand from the markdown file).\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 2.1, but applies to master branch as of opening time\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nCurrently the variance in the mentioned op is computed as E[(X - E[X])^2]:\r\n\r\nhttps://github.com/tensorflow/tensorflow/blob/c71db95e184447c0008dc007a27d692cd5496d0e/tensorflow/python/ops/math_ops.py#L2112-L2114\r\n\r\nBecause that requires keepdims == True for the first mean reduction, this is not compatible with ragged tensors. An alternative formulation for the variance could however be E[X**2] - E[X]^2\r\n\r\n```\r\n mean_of_square = reduce_mean(gen_math_ops.square(input_tensor), axis=axis, keepdims=keepdims) \r\n square_of_mean = gen_math_ops.square(reduce_mean(input_tensor, axis=axis, keepdims=keepdims)) \r\n return mean_of_square - square_of_mean\r\n```\r\n\r\n**Will this change the current api? How?**\r\nThis might have a reduced numerical stability for Var << Mean, but it could be used at least for ragged tensors in the keepdims == False case. Checking if the tensor is ragged and choosing the implementation based on that would guarantee API stability, but potentially increase maintenance burden later on.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nUsers who want to aggregate statistics over variable-length sequences encoded in ragged tensors.\r\n\r\n**Any Other info.**\r\n\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36996", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36996/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36996/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36996/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36996", "id": 569538269, "node_id": "MDU6SXNzdWU1Njk1MzgyNjk=", "number": 36996, "title": "[Colab][TF2.x] Socket closed - Error received from peer", "user": {"login": "chn-lee-yumi", "id": 20398519, "node_id": "MDQ6VXNlcjIwMzk4NTE5", "avatar_url": "https://avatars1.githubusercontent.com/u/20398519?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chn-lee-yumi", "html_url": "https://github.com/chn-lee-yumi", "followers_url": "https://api.github.com/users/chn-lee-yumi/followers", "following_url": "https://api.github.com/users/chn-lee-yumi/following{/other_user}", "gists_url": "https://api.github.com/users/chn-lee-yumi/gists{/gist_id}", "starred_url": "https://api.github.com/users/chn-lee-yumi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chn-lee-yumi/subscriptions", "organizations_url": "https://api.github.com/users/chn-lee-yumi/orgs", "repos_url": "https://api.github.com/users/chn-lee-yumi/repos", "events_url": "https://api.github.com/users/chn-lee-yumi/events{/privacy}", "received_events_url": "https://api.github.com/users/chn-lee-yumi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-02-23T18:37:55Z", "updated_at": "2020-02-24T20:14:36Z", "closed_at": null, "author_association": "NONE", "body": "I was trying to train an GAN. Here is the code:\r\n(Full code on Colab: https://colab.research.google.com/drive/1TUKZnOEPT8C8mVJ1iK90n32qT2SiJ6Xo)\r\n\r\n```python\r\nwith strategy.scope():\r\n    # generator_model\r\n    generator_model = tf.keras.models.Sequential([\r\n        tf.keras.layers.Dense(512, activation='relu', input_shape=noise_shape),\r\n        tf.keras.layers.Dropout(0.1),\r\n        tf.keras.layers.Dense(1024, activation='relu'),\r\n        tf.keras.layers.Dense(784, activation='tanh'),\r\n        tf.keras.layers.Reshape(img_shape)\r\n    ])\r\n    generator_model.compile(optimizer=tf.keras.optimizers.Adam(0.0002, 0.5),\r\n                            loss='binary_crossentropy',\r\n                            metrics=['accuracy'])\r\n    generator_model.summary()\r\n\r\n    # discriminator_model\r\n    discriminator_model = tf.keras.models.Sequential([\r\n        tf.keras.layers.Flatten(input_shape=img_shape),\r\n        tf.keras.layers.Dense(1024, activation='relu'),\r\n        tf.keras.layers.Dropout(0.1),\r\n        tf.keras.layers.Dense(512, activation='relu'),\r\n        tf.keras.layers.Dense(1, activation='sigmoid'),\r\n    ])\r\n    discriminator_model.compile(optimizer=tf.keras.optimizers.Adam(0.0002, 0.5),\r\n                                loss='binary_crossentropy')\r\n    discriminator_model.summary()\r\n\r\n    # combined_model\r\n    z = tf.keras.layers.Input(shape=noise_shape)\r\n    discriminator_model.trainable = False \r\n    valid = discriminator_model(generator_model(z)) \r\n    combined_model = tf.keras.models.Model(z, valid) \r\n    combined_model.compile(loss='binary_crossentropy', optimizer=tf.keras.optimizers.Adam(0.0002, 0.5))\r\n    combined_model.summary()\r\n\r\n# train\r\nfor epoch in range(10000):\r\n    idx = np.random.randint(0, x_train.shape[0], batch_size)\r\n    imgs = x_train[idx]\r\n    noise = np.random.normal(0, 1, (batch_size, 100))\r\n    gen_imgs = generator_model.predict(noise.astype(np.float32))\r\n\r\n    # train discriminator_model\r\n    d_loss_real = discriminator_model.fit(imgs.astype(np.float32), np.ones((batch_size, 1)))\r\n    d_loss_fake = discriminator_model.fit(gen_imgs.astype(np.float32), np.zeros((batch_size, 1)))\r\n    d_loss = 0.5 * np.add(d_loss_real, d_loss_fake)\r\n\r\n    # train combined_model\r\n    noise = np.random.normal(0, 1, (batch_size * 2, 100))\r\n    valid_y = np.array([1] * batch_size * 2)  \r\n    g_loss = combined_model.fit(noise.astype(np.float32), valid_y)\r\n```\r\n\r\nWhen I run, it throws out `Socket closed`.\r\n\r\n```python\r\nTrain on 128 samples\r\n 32/128 [======>.......................] - ETA: 7s\r\n---------------------------------------------------------------------------\r\nUnavailableError                          Traceback (most recent call last)\r\n<ipython-input-1-5ba8c95500e1> in <module>()\r\n     82 \r\n     83     # train discriminator_model\r\n---> 84     d_loss_real = discriminator_model.fit(imgs.astype(np.float32), np.ones((batch_size, 1)))\r\n     85     d_loss_fake = discriminator_model.fit(gen_imgs.astype(np.float32), np.zeros((batch_size, 1)))\r\n     86     d_loss = 0.5 * np.add(d_loss_real, d_loss_fake)\r\n\r\n10 frames\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/keras/engine/training.py in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_freq, max_queue_size, workers, use_multiprocessing, **kwargs)\r\n    817         max_queue_size=max_queue_size,\r\n    818         workers=workers,\r\n--> 819         use_multiprocessing=use_multiprocessing)\r\n    820 \r\n    821   def evaluate(self,\r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/keras/engine/training_v2.py in fit(self, model, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_freq, max_queue_size, workers, use_multiprocessing, **kwargs)\r\n    340                 mode=ModeKeys.TRAIN,\r\n    341                 training_context=training_context,\r\n--> 342                 total_epochs=epochs)\r\n    343             cbks.make_logs(model, epoch_logs, training_result, ModeKeys.TRAIN)\r\n    344 \r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/keras/engine/training_v2.py in run_one_epoch(model, iterator, execution_function, dataset_size, batch_size, strategy, steps_per_epoch, num_samples, mode, training_context, total_epochs)\r\n    126         step=step, mode=mode, size=current_batch_size) as batch_logs:\r\n    127       try:\r\n--> 128         batch_outs = execution_function(iterator)\r\n    129       except (StopIteration, errors.OutOfRangeError):\r\n    130         # TODO(kaftan): File bug about tf function and errors.OutOfRangeError?\r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/keras/engine/training_v2_utils.py in execution_function(input_fn)\r\n     96     # `numpy` translates Tensors to values in Eager mode.\r\n     97     return nest.map_structure(_non_none_constant_value,\r\n---> 98                               distributed_function(input_fn))\r\n     99 \r\n    100   return execution_function\r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/util/nest.py in map_structure(func, *structure, **kwargs)\r\n    566 \r\n    567   return pack_sequence_as(\r\n--> 568       structure[0], [func(*x) for x in entries],\r\n    569       expand_composites=expand_composites)\r\n    570 \r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/util/nest.py in <listcomp>(.0)\r\n    566 \r\n    567   return pack_sequence_as(\r\n--> 568       structure[0], [func(*x) for x in entries],\r\n    569       expand_composites=expand_composites)\r\n    570 \r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/keras/engine/training_v2_utils.py in _non_none_constant_value(v)\r\n    128 \r\n    129 def _non_none_constant_value(v):\r\n--> 130   constant_value = tensor_util.constant_value(v)\r\n    131   return constant_value if constant_value is not None else v\r\n    132 \r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/framework/tensor_util.py in constant_value(tensor, partial)\r\n    820   \"\"\"\r\n    821   if isinstance(tensor, ops.EagerTensor):\r\n--> 822     return tensor.numpy()\r\n    823   if not is_tensor(tensor):\r\n    824     return tensor\r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/framework/ops.py in numpy(self)\r\n    940     \"\"\"\r\n    941     # TODO(slebedev): Consider avoiding a copy for non-CPU or remote tensors.\r\n--> 942     maybe_arr = self._numpy()  # pylint: disable=protected-access\r\n    943     return maybe_arr.copy() if isinstance(maybe_arr, np.ndarray) else maybe_arr\r\n    944 \r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/framework/ops.py in _numpy(self)\r\n    908       return self._numpy_internal()\r\n    909     except core._NotOkStatusException as e:\r\n--> 910       six.raise_from(core._status_to_exception(e.code, e.message), None)\r\n    911 \r\n    912   @property\r\n\r\n/usr/local/lib/python3.6/dist-packages/six.py in raise_from(value, from_value)\r\n\r\nUnavailableError: Socket closed\r\nAdditional GRPC error information:\r\n{\"created\":\"@1582482234.677879877\",\"description\":\"Error received from peer\",\"file\":\"external/grpc/src/core/lib/surface/call.cc\",\"file_line\":1039,\"grpc_message\":\"Socket closed\",\"grpc_status\":14}\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36990", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36990/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36990/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36990/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/36990", "id": 569491898, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc4NzAzMTc1", "number": 36990, "title": "Fix label_smoothing in multidimensional CategoricalCrossentropy.", "user": {"login": "foxik", "id": 560016, "node_id": "MDQ6VXNlcjU2MDAxNg==", "avatar_url": "https://avatars0.githubusercontent.com/u/560016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/foxik", "html_url": "https://github.com/foxik", "followers_url": "https://api.github.com/users/foxik/followers", "following_url": "https://api.github.com/users/foxik/following{/other_user}", "gists_url": "https://api.github.com/users/foxik/gists{/gist_id}", "starred_url": "https://api.github.com/users/foxik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/foxik/subscriptions", "organizations_url": "https://api.github.com/users/foxik/orgs", "repos_url": "https://api.github.com/users/foxik/repos", "events_url": "https://api.github.com/users/foxik/events{/privacy}", "received_events_url": "https://api.github.com/users/foxik/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-23T13:02:53Z", "updated_at": "2020-02-25T11:15:04Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/36990", "html_url": "https://github.com/tensorflow/tensorflow/pull/36990", "diff_url": "https://github.com/tensorflow/tensorflow/pull/36990.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/36990.patch"}, "body": "When label smoothing in CategoricalCrossentropy is non-zero, it takes `tf.shape(y_true)[1]` as the number of classes. However, if the true values and predictions are multidimensional (for example when training a POS tagger where batch elements are sentences composed of words), a wrong value is taken and the training does not work.\r\n\r\nThis fix takes the _last_ dimension as the one containing classes."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36988", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36988/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36988/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36988/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36988", "id": 569480808, "node_id": "MDU6SXNzdWU1Njk0ODA4MDg=", "number": 36988, "title": "Rising a memory on every step", "user": {"login": "open-v", "id": 35163153, "node_id": "MDQ6VXNlcjM1MTYzMTUz", "avatar_url": "https://avatars2.githubusercontent.com/u/35163153?v=4", "gravatar_id": "", "url": "https://api.github.com/users/open-v", "html_url": "https://github.com/open-v", "followers_url": "https://api.github.com/users/open-v/followers", "following_url": "https://api.github.com/users/open-v/following{/other_user}", "gists_url": "https://api.github.com/users/open-v/gists{/gist_id}", "starred_url": "https://api.github.com/users/open-v/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/open-v/subscriptions", "organizations_url": "https://api.github.com/users/open-v/orgs", "repos_url": "https://api.github.com/users/open-v/repos", "events_url": "https://api.github.com/users/open-v/events{/privacy}", "received_events_url": "https://api.github.com/users/open-v/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gadagashwini", "id": 48476109, "node_id": "MDQ6VXNlcjQ4NDc2MTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/48476109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadagashwini", "html_url": "https://github.com/gadagashwini", "followers_url": "https://api.github.com/users/gadagashwini/followers", "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}", "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions", "organizations_url": "https://api.github.com/users/gadagashwini/orgs", "repos_url": "https://api.github.com/users/gadagashwini/repos", "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}", "received_events_url": "https://api.github.com/users/gadagashwini/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gadagashwini", "id": 48476109, "node_id": "MDQ6VXNlcjQ4NDc2MTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/48476109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadagashwini", "html_url": "https://github.com/gadagashwini", "followers_url": "https://api.github.com/users/gadagashwini/followers", "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}", "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions", "organizations_url": "https://api.github.com/users/gadagashwini/orgs", "repos_url": "https://api.github.com/users/gadagashwini/repos", "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}", "received_events_url": "https://api.github.com/users/gadagashwini/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2020-02-23T11:28:17Z", "updated_at": "2020-03-13T06:25:35Z", "closed_at": null, "author_association": "NONE", "body": "Hello. I used a MobileNet for Object detection and my model is training by following code:\r\n\r\n```py\r\n@tf.function\r\ndef train(model, dataset, epochs=50, lr=1e-5, checkpoints=None):\r\n  optimizer = tf.keras.optimizers.Adam(lr=lr)\r\n  for i in range(epochs):\r\n    dataset = dataset.shuffle(1000)\r\n    # training\r\n    for images, boxes, labels in tqdm(dataset, desc='Epoch {} of {}'.format(i + 1, epochs)):\r\n      with tf.GradientTape() as tape:\r\n        localization, classification = model(images, training=True)\r\n        smooth = losses.smooth_l1(boxes, localization)\r\n        focal  = losses.focal(labels, classification)\r\n        loss = smooth * 0.6 + focal * 0.4\r\n      gradients = tape.gradient(loss, model.trainable_variables)\r\n      optimizer.apply_gradients(zip(gradients, model.trainable_variables))\r\n    if checkpoints:\r\n      model.save_weights(checkpoints)\r\n```\r\nBut my PC memory is rising on every step.\r\nCan you help me to fix it?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36985", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36985/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36985/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36985/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36985", "id": 569429111, "node_id": "MDU6SXNzdWU1Njk0MjkxMTE=", "number": 36985, "title": "Shape issues in keras.metrics.sparse_top_k_categorical_accuracy with multiple dimensions", "user": {"login": "benbarsdell", "id": 3979096, "node_id": "MDQ6VXNlcjM5NzkwOTY=", "avatar_url": "https://avatars2.githubusercontent.com/u/3979096?v=4", "gravatar_id": "", "url": "https://api.github.com/users/benbarsdell", "html_url": "https://github.com/benbarsdell", "followers_url": "https://api.github.com/users/benbarsdell/followers", "following_url": "https://api.github.com/users/benbarsdell/following{/other_user}", "gists_url": "https://api.github.com/users/benbarsdell/gists{/gist_id}", "starred_url": "https://api.github.com/users/benbarsdell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/benbarsdell/subscriptions", "organizations_url": "https://api.github.com/users/benbarsdell/orgs", "repos_url": "https://api.github.com/users/benbarsdell/repos", "events_url": "https://api.github.com/users/benbarsdell/events{/privacy}", "received_events_url": "https://api.github.com/users/benbarsdell/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-23T03:11:43Z", "updated_at": "2020-02-28T18:52:01Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v1.12.1-24394-gc24d2f9 2.2.0-dev20200210\r\n- Python version: 3.5.2\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\n**Describe the expected behavior**\r\n**Standalone code to reproduce the issue** \r\nWhen there are multiple dimensions (e.g., for image data), the behavior of tf.metrics.sparse_top_k_categorical_accuracy and tf.metrics.top_k_categorical_accuracy differ from both each other and that of their categorical_crossentropy equivalents.\r\n\r\nIn particular, as of https://github.com/tensorflow/tensorflow/commit/ddca4b92b4eb4e187716b03f443362c904bdad7e (which was used to fix https://github.com/tensorflow/tensorflow/issues/33825), tf.metrics.sparse_top_k_categorical_accuracy flattens the extra dims (resulting in a different output shape compared to sparse_categorical_crossentropy), while tf.metrics.top_k_categorical_accuracy raises an error saying there must be only 2 dimensions. The docs don't say much about what should be expected.\r\n\r\nThe flattened shape also causes an error when passing weights to tf.keras.metrics.SparseTopKCategoricalAccuracy.\r\n\r\nSee minimal repro code here:\r\nhttps://colab.research.google.com/drive/1DR7SSoj8cpo0Y35swz-dyOX4DCazidPe"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36981", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36981/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36981/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36981/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36981", "id": 569345648, "node_id": "MDU6SXNzdWU1NjkzNDU2NDg=", "number": 36981, "title": "`recompute_grad` does not save memory and is incompatible with graph mode", "user": {"login": "BinyanHu", "id": 26186061, "node_id": "MDQ6VXNlcjI2MTg2MDYx", "avatar_url": "https://avatars0.githubusercontent.com/u/26186061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BinyanHu", "html_url": "https://github.com/BinyanHu", "followers_url": "https://api.github.com/users/BinyanHu/followers", "following_url": "https://api.github.com/users/BinyanHu/following{/other_user}", "gists_url": "https://api.github.com/users/BinyanHu/gists{/gist_id}", "starred_url": "https://api.github.com/users/BinyanHu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BinyanHu/subscriptions", "organizations_url": "https://api.github.com/users/BinyanHu/orgs", "repos_url": "https://api.github.com/users/BinyanHu/repos", "events_url": "https://api.github.com/users/BinyanHu/events{/privacy}", "received_events_url": "https://api.github.com/users/BinyanHu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-02-22T14:57:53Z", "updated_at": "2020-03-05T11:37:36Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow):  No.\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04):  Linux Ubuntu 16.04 and Windows 10.\r\n- TensorFlow installed from (source or\r\nbinary): from binary (pip install)\r\n- TensorFlow version (use command below): 2.1.0\r\n- Python version: 3.7\r\n- CUDA/cuDNN version: CUDA10.2+CuDNN7.6.5 (Windows), CUDA10.1+CuDNN7.6.5+TensorRT 6 (Ubuntu), \r\n- GPU model and memory: GeForce GTX 1060 with Max-Q Design, 6GB (Windows) and GeForce GTX 1080 Ti, 12GB (Ubuntu)\r\n\r\n**Describe the current behavior**\r\nUsing `tf.recompute_grad` to wrap keras layers does not take any effect. I build a DenseNet model and wrap each \"-bn-relu-conv1x1-bn-relu-conv\" block by the function. But I have not seen any GPU memory reduction on both the Windows and Ubuntu platforms. When eager mode is disabled, it throws \"ValueError: Variable <tf.Variable 'batch_normalization/gamma:0' shape=(32,) dtype=float32> has `None` for gradient.\", indicating that using `compute_grad` blocks the gradient backpropagation in graph mode.\r\n\r\n**Describe the expected behavior**\r\nThe function seems to originate from OpenAI's gradient checkpointing (https://github.com/cybertronai/gradient-checkpointing) and is expected to save GPU memory during training. Recently, a tensorflow implementation of efficient DenseNets (https://github.com/joeyearsley/efficient_densenet_tensorflow) also uses this function to perform the gradient checkpointing (they used `tf.contrib.layers.recompute_grad` in tf1 graph mode, not exactly the same environment as our case.)\r\n\r\nPlease fix the incompatibility bug so that the function can still work with the graph mode. If the function is designed to perform gradient checkpointing, please verify its effectiveness. If it is not supposed to implement efficient DenseNets, please provide the correct and effective implementation.\r\n\r\n\r\n**Standalone code to reproduce the issue** \r\n```PYTHON\r\nimport os\r\n\r\nimport tensorflow as tf\r\nimport tensorflow_datasets as tfds\r\nfrom absl import app, flags\r\nfrom absl.flags import FLAGS\r\nfrom tensorflow import keras\r\n\r\nflags.DEFINE_list(\"gpu\",\r\n                  default=None,\r\n                  help=\"index of GPU\")\r\nflags.DEFINE_bool(\"recompute_grad\",\r\n                  default=False,\r\n                  help=\"whether to recompute gradients to save GPU RAM\")\r\nflags.DEFINE_integer(\"batch_size\",\r\n                     default=1024,\r\n                     help=\"batch size\")\r\nflags.DEFINE_bool(\"graph\",\r\n                  default=False,\r\n                  help=\"use graph mode instead of eager mode\")\r\n\r\n\r\ndef dense_lenet(inputs):\r\n    net = keras.layers.Conv2D(32, 5, strides=2, use_bias=False, padding=\"SAME\")(inputs)\r\n\r\n    for _ in range(5):\r\n        def _block(x):\r\n            x = keras.layers.BatchNormalization()(x)\r\n            x = keras.layers.ReLU()(x)\r\n            x = keras.layers.Conv2D(16, 1, use_bias=False, padding=\"SAME\")(x)\r\n            x = keras.layers.BatchNormalization()(x)\r\n            x = keras.layers.ReLU()(x)\r\n            x = keras.layers.Conv2D(4, 3, use_bias=False, padding=\"SAME\")(x)\r\n            return x\r\n        if FLAGS.recompute_grad:\r\n            _block = tf.recompute_grad(_block)\r\n        net = keras.layers.concatenate([net, _block(net)])\r\n\r\n    net = keras.layers.BatchNormalization()(net)\r\n    net = keras.layers.ReLU()(net)\r\n    net = keras.layers.Conv2D(64, 1, use_bias=False, padding=\"SAME\")(net)\r\n    net = keras.layers.AveragePooling2D()(net)\r\n\r\n    for _ in range(10):\r\n        def _block(x):\r\n            x = keras.layers.BatchNormalization()(x)\r\n            x = keras.layers.ReLU()(x)\r\n            x = keras.layers.Conv2D(32, 1, use_bias=False, padding=\"SAME\")(x)\r\n            x = keras.layers.BatchNormalization()(x)\r\n            x = keras.layers.ReLU()(x)\r\n            x = keras.layers.Conv2D(8, 3, use_bias=False, padding=\"SAME\")(x)\r\n            return x\r\n        if FLAGS.recompute_grad:\r\n            _block = tf.recompute_grad(_block)\r\n        net = keras.layers.concatenate([net, _block(net)])\r\n\r\n    net = keras.layers.BatchNormalization()(net)\r\n    net = keras.layers.ReLU()(net)\r\n    net = keras.layers.Conv2D(128, 1, use_bias=False, padding=\"SAME\")(net)\r\n    net = keras.layers.AveragePooling2D()(net)\r\n\r\n    for _ in range(10):\r\n        def _block(x):\r\n            x = keras.layers.BatchNormalization()(x)\r\n            x = keras.layers.ReLU()(x)\r\n            x = keras.layers.Conv2D(32, 1, use_bias=False, padding=\"SAME\")(x)\r\n            x = keras.layers.BatchNormalization()(x)\r\n            x = keras.layers.ReLU()(x)\r\n            x = keras.layers.Conv2D(8, 3, use_bias=False, padding=\"SAME\")(x)\r\n            return x\r\n        if FLAGS.recompute_grad:\r\n            _block = tf.recompute_grad(_block)\r\n        net = keras.layers.concatenate([net, _block(net)])\r\n\r\n    net = keras.layers.BatchNormalization()(net)\r\n    net = keras.layers.ReLU()(net)\r\n    net = keras.layers.GlobalAveragePooling2D()(net)\r\n\r\n    net = keras.layers.Dense(10)(net)\r\n    net = keras.layers.Softmax()(net)\r\n\r\n    return net\r\n\r\n\r\ndef main(_):\r\n    if FLAGS.gpu:\r\n        os.environ[\"CUDA_VISIBLE_DEVICES\"] = \",\".join(map(str, FLAGS.gpu))\r\n    if FLAGS.graph:\r\n        tf.compat.v1.disable_eager_execution()\r\n        tf.compat.v1.keras.backend.set_session(\r\n            session=tf.compat.v1.Session(\r\n                config=tf.compat.v1.ConfigProto(\r\n                    gpu_options=tf.compat.v1.GPUOptions(\r\n                        allow_growth=True\r\n                    )\r\n                )\r\n            )\r\n        )\r\n    else:\r\n        for gpu in tf.config.experimental.list_physical_devices('GPU'):\r\n            tf.config.experimental.set_memory_growth(gpu, True)\r\n\r\n    tfds.core.constants.DATA_DIR = \"data\"\r\n    dataset_builder = tfds.image.FashionMNIST(version=\"3.*.*\")\r\n    dataset_builder.download_and_prepare()\r\n    dataset = dataset_builder.as_dataset(\r\n        split=\"train\",\r\n        shuffle_files=True,\r\n        as_supervised=True,\r\n    ).repeat().batch(FLAGS.batch_size)\r\n\r\n    inputs = keras.layers.Input((28, 28, 1), batch_size=FLAGS.batch_size)\r\n    model = keras.Model(inputs, dense_lenet(inputs))\r\n\r\n    model.compile(\r\n        optimizer='adam',\r\n        loss=tf.keras.losses.SparseCategoricalCrossentropy(from_logits=True),\r\n        metrics=['accuracy']\r\n    )\r\n    model.summary()\r\n\r\n    model.fit(\r\n        x=dataset,\r\n        epochs=3,\r\n        steps_per_epoch=60000//FLAGS.batch_size,\r\n    )\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    app.run(main)\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36980", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36980/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36980/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36980/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36980", "id": 569341089, "node_id": "MDU6SXNzdWU1NjkzNDEwODk=", "number": 36980, "title": "InternalError: Assigned device '/job:worker/replica:0/task:0/device:TPU:0' does not have registered OpKernel support for _Arg", "user": {"login": "bestpredicts", "id": 12403152, "node_id": "MDQ6VXNlcjEyNDAzMTUy", "avatar_url": "https://avatars0.githubusercontent.com/u/12403152?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bestpredicts", "html_url": "https://github.com/bestpredicts", "followers_url": "https://api.github.com/users/bestpredicts/followers", "following_url": "https://api.github.com/users/bestpredicts/following{/other_user}", "gists_url": "https://api.github.com/users/bestpredicts/gists{/gist_id}", "starred_url": "https://api.github.com/users/bestpredicts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bestpredicts/subscriptions", "organizations_url": "https://api.github.com/users/bestpredicts/orgs", "repos_url": "https://api.github.com/users/bestpredicts/repos", "events_url": "https://api.github.com/users/bestpredicts/events{/privacy}", "received_events_url": "https://api.github.com/users/bestpredicts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rxsang", "id": 6399870, "node_id": "MDQ6VXNlcjYzOTk4NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/6399870?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rxsang", "html_url": "https://github.com/rxsang", "followers_url": "https://api.github.com/users/rxsang/followers", "following_url": "https://api.github.com/users/rxsang/following{/other_user}", "gists_url": "https://api.github.com/users/rxsang/gists{/gist_id}", "starred_url": "https://api.github.com/users/rxsang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rxsang/subscriptions", "organizations_url": "https://api.github.com/users/rxsang/orgs", "repos_url": "https://api.github.com/users/rxsang/repos", "events_url": "https://api.github.com/users/rxsang/events{/privacy}", "received_events_url": "https://api.github.com/users/rxsang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rxsang", "id": 6399870, "node_id": "MDQ6VXNlcjYzOTk4NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/6399870?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rxsang", "html_url": "https://github.com/rxsang", "followers_url": "https://api.github.com/users/rxsang/followers", "following_url": "https://api.github.com/users/rxsang/following{/other_user}", "gists_url": "https://api.github.com/users/rxsang/gists{/gist_id}", "starred_url": "https://api.github.com/users/rxsang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rxsang/subscriptions", "organizations_url": "https://api.github.com/users/rxsang/orgs", "repos_url": "https://api.github.com/users/rxsang/repos", "events_url": "https://api.github.com/users/rxsang/events{/privacy}", "received_events_url": "https://api.github.com/users/rxsang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-02-22T14:21:17Z", "updated_at": "2020-02-25T23:07:14Z", "closed_at": null, "author_association": "NONE", "body": "when run bert tpu on colab get  error info  :  \r\nInternalError: Assigned device '/job:worker/replica:0/task:0/device:TPU:0' does not have registered OpKernel support for _Arg\r\n\r\nhere is [my code on colab ](https://colab.research.google.com/drive/1i9ZhGGv8KDv5-VISbwTdCwDqrhh-67pu#scrollTo=xBggqjKaHU9w) You can reproduce this bug through my code\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36979", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36979/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36979/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36979/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36979", "id": 569333478, "node_id": "MDU6SXNzdWU1NjkzMzM0Nzg=", "number": 36979, "title": "AttributeError: 'Tensor' object has no attribute 'numpy'", "user": {"login": "nscotto", "id": 44670538, "node_id": "MDQ6VXNlcjQ0NjcwNTM4", "avatar_url": "https://avatars3.githubusercontent.com/u/44670538?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nscotto", "html_url": "https://github.com/nscotto", "followers_url": "https://api.github.com/users/nscotto/followers", "following_url": "https://api.github.com/users/nscotto/following{/other_user}", "gists_url": "https://api.github.com/users/nscotto/gists{/gist_id}", "starred_url": "https://api.github.com/users/nscotto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nscotto/subscriptions", "organizations_url": "https://api.github.com/users/nscotto/orgs", "repos_url": "https://api.github.com/users/nscotto/repos", "events_url": "https://api.github.com/users/nscotto/events{/privacy}", "received_events_url": "https://api.github.com/users/nscotto/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-02-22T13:15:49Z", "updated_at": "2020-03-06T04:04:51Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow):  yes\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04): Linux Fedora 31\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if\r\nthe issue happens on mobile device: no\r\n- TensorFlow installed from (source or\r\nbinary): binary (anaconda)\r\n- TensorFlow version (use command below): 2.1 \r\n- Python version: 3.7\r\n- Bazel version (if compiling from source): no\r\n- GCC/Compiler version (if compiling from source): no\r\n- CUDA/cuDNN version: 10.1\r\n- GPU model and memory: nvidia 1050 ti\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nI can't call `numpy()` of `Tensor` arguments passed to the mapping function given to `tf.data.Dataset` even with `tf.executing_eagerly()` returning `True`:\r\n```\r\nAttributeError: 'Tensor' object has no attribute 'numpy'\r\n```\r\n**Describe the expected behavior**\r\nI'd like to be able to access the `numpy()` property of arguments passed to a mapping function passed to `tf.data.Dataset.map`\r\n**Standalone code to reproduce the issue** \r\nProvide a reproducible test case that is the bare minimum necessary to generate\r\nthe problem. If possible, please share a link to Colab/Jupyter/any notebook.\r\n```python\r\nimport tensorflow as tf\r\n\r\ndef transformer(x):\r\n    x.numpy()\r\n    return x\r\n\r\ndataset = tf.data.Dataset.from_tensors([0,1,2])\r\ndataset.map(transformer)\r\n```\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36974", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36974/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36974/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36974/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36974", "id": 569266266, "node_id": "MDU6SXNzdWU1NjkyNjYyNjY=", "number": 36974, "title": "CUDA broken on docker image tensorflow/tensorflow:devel-gpu", "user": {"login": "lezh", "id": 5860422, "node_id": "MDQ6VXNlcjU4NjA0MjI=", "avatar_url": "https://avatars3.githubusercontent.com/u/5860422?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lezh", "html_url": "https://github.com/lezh", "followers_url": "https://api.github.com/users/lezh/followers", "following_url": "https://api.github.com/users/lezh/following{/other_user}", "gists_url": "https://api.github.com/users/lezh/gists{/gist_id}", "starred_url": "https://api.github.com/users/lezh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lezh/subscriptions", "organizations_url": "https://api.github.com/users/lezh/orgs", "repos_url": "https://api.github.com/users/lezh/repos", "events_url": "https://api.github.com/users/lezh/events{/privacy}", "received_events_url": "https://api.github.com/users/lezh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-02-22T02:20:25Z", "updated_at": "2020-03-19T01:45:54Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n\r\n\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Debian GNU/Linux 9\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): Docker Hub\r\n- TensorFlow version: [tensorflow/tensorflow:latest-devel-gpu](https://hub.docker.com/layers/tensorflow/tensorflow/latest-devel-gpu/images/sha256-607098dc1fe31c990b2c54c37bd5c81099cad165232cb0489c35e51689de27c7?context=explore)\r\n- Python version: python3\r\n- Installed using virtualenv? pip? conda?: docker \r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\nCUDA is broken on [tensorflow/tensorflow:devel-gpu](https://hub.docker.com/layers/tensorflow/tensorflow/latest-devel-gpu/images/sha256-607098dc1fe31c990b2c54c37bd5c81099cad165232cb0489c35e51689de27c7?context=explore) image. TensorFlow could not recognize the GPUs.\r\n\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n### Host Server (Debian GNU/Linux 9)\r\n\r\nOn the host server, CUDA is on 10.1. Tensorflow can detect 8 GPUs.\r\n\r\nRun `nvidia-smi` and it shows \r\n```\r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 418.87.01    Driver Version: 418.87.01    CUDA Version: 10.1     |\r\n|-------------------------------+----------------------+----------------------+\r\n```\r\n\r\nVerify that TensorFlow can see the 8 GPUs.\r\n```\r\n$ pip install tensorflow \r\n$ python -c 'import tensorflow as tf; print(\"Num GPUs Available: \", len(tf.config.experimental.list_physical_devices(\"GPU\")))'\r\n\r\n('Num GPUs Available: ', 8)\r\n```\r\n\r\n\r\n\r\n### Inside Container (tensorflow/tensorflow:devel-gpu)\r\n\r\nThen, start the container.\r\n```\r\n$ docker run --gpus=all -it tensorflow/tensorflow:latest-devel-gpu-py3\r\n```\r\n\r\nIn the container, run\r\n```\r\nroot@5f3ceeb2248b:/# nvidia-smi\r\nSat Feb 22 02:06:17 2020\r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 418.87.01    Driver Version: 418.87.01    CUDA Version: ERR!     |\r\n|-------------------------------+----------------------+----------------------+\r\n```\r\nNotice that the CUDA version was **ERR!**. It may indicate that the CUDA version is broken. \r\nRun \r\n```\r\n$ pip install tensorflow \r\n$ python -c 'import tensorflow as tf; print(\"Num GPUs Available: \", len(tf.config.experimental.list_physical_devices(\"GPU\")))'\r\n\r\n2020-02-22 02:11:29.788170: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:200] libcuda reported version is: Not found: was unable to find libcuda.so DSO loaded into this program\r\n2020-02-22 02:11:29.788245: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:204] kernel reported version is: 418.87.1\r\nNum GPUs Available:  0\r\n```\r\n\r\nTensorFlow could not see the GPUs.\r\n\r\n\r\n**Any other info / logs**\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36973", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36973/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36973/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36973/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36973", "id": 569205113, "node_id": "MDU6SXNzdWU1NjkyMDUxMTM=", "number": 36973, "title": "Can't find docs on SSL support for distributed training", "user": {"login": "sarthfrey", "id": 9577559, "node_id": "MDQ6VXNlcjk1Nzc1NTk=", "avatar_url": "https://avatars3.githubusercontent.com/u/9577559?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sarthfrey", "html_url": "https://github.com/sarthfrey", "followers_url": "https://api.github.com/users/sarthfrey/followers", "following_url": "https://api.github.com/users/sarthfrey/following{/other_user}", "gists_url": "https://api.github.com/users/sarthfrey/gists{/gist_id}", "starred_url": "https://api.github.com/users/sarthfrey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sarthfrey/subscriptions", "organizations_url": "https://api.github.com/users/sarthfrey/orgs", "repos_url": "https://api.github.com/users/sarthfrey/repos", "events_url": "https://api.github.com/users/sarthfrey/events{/privacy}", "received_events_url": "https://api.github.com/users/sarthfrey/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "guptapriya", "id": 14104855, "node_id": "MDQ6VXNlcjE0MTA0ODU1", "avatar_url": "https://avatars1.githubusercontent.com/u/14104855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guptapriya", "html_url": "https://github.com/guptapriya", "followers_url": "https://api.github.com/users/guptapriya/followers", "following_url": "https://api.github.com/users/guptapriya/following{/other_user}", "gists_url": "https://api.github.com/users/guptapriya/gists{/gist_id}", "starred_url": "https://api.github.com/users/guptapriya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guptapriya/subscriptions", "organizations_url": "https://api.github.com/users/guptapriya/orgs", "repos_url": "https://api.github.com/users/guptapriya/repos", "events_url": "https://api.github.com/users/guptapriya/events{/privacy}", "received_events_url": "https://api.github.com/users/guptapriya/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "guptapriya", "id": 14104855, "node_id": "MDQ6VXNlcjE0MTA0ODU1", "avatar_url": "https://avatars1.githubusercontent.com/u/14104855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guptapriya", "html_url": "https://github.com/guptapriya", "followers_url": "https://api.github.com/users/guptapriya/followers", "following_url": "https://api.github.com/users/guptapriya/following{/other_user}", "gists_url": "https://api.github.com/users/guptapriya/gists{/gist_id}", "starred_url": "https://api.github.com/users/guptapriya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guptapriya/subscriptions", "organizations_url": "https://api.github.com/users/guptapriya/orgs", "repos_url": "https://api.github.com/users/guptapriya/repos", "events_url": "https://api.github.com/users/guptapriya/events{/privacy}", "received_events_url": "https://api.github.com/users/guptapriya/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-21T21:57:39Z", "updated_at": "2020-02-26T20:25:55Z", "closed_at": null, "author_association": "NONE", "body": "**Describe the current behavior**\r\n\r\nI haven't be able to find documentation on if SSL is used during distributed training with `tf.distribute.Strategy` with gRPC.\r\n\r\n**Describe the expected behavior**\r\n\r\nI should be able to easily find this information in the documentation, and if it's supported, then I should easily be able to turn SSL on/off in distributed training for when I prefer security vs performance."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36971", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36971/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36971/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36971/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/36971", "id": 569163281, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc4NDU1MDM0", "number": 36971, "title": "Dockerfiles to python 3", "user": {"login": "liamwazherealso", "id": 5528631, "node_id": "MDQ6VXNlcjU1Mjg2MzE=", "avatar_url": "https://avatars2.githubusercontent.com/u/5528631?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liamwazherealso", "html_url": "https://github.com/liamwazherealso", "followers_url": "https://api.github.com/users/liamwazherealso/followers", "following_url": "https://api.github.com/users/liamwazherealso/following{/other_user}", "gists_url": "https://api.github.com/users/liamwazherealso/gists{/gist_id}", "starred_url": "https://api.github.com/users/liamwazherealso/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liamwazherealso/subscriptions", "organizations_url": "https://api.github.com/users/liamwazherealso/orgs", "repos_url": "https://api.github.com/users/liamwazherealso/repos", "events_url": "https://api.github.com/users/liamwazherealso/events{/privacy}", "received_events_url": "https://api.github.com/users/liamwazherealso/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1169365682, "node_id": "MDU6TGFiZWwxMTY5MzY1Njgy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:L", "name": "size:L", "color": "adafea", "default": false, "description": "CL Change Size: Large"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-21T20:16:38Z", "updated_at": "2020-03-05T11:32:01Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/36971", "html_url": "https://github.com/tensorflow/tensorflow/pull/36971", "diff_url": "https://github.com/tensorflow/tensorflow/pull/36971.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/36971.patch"}, "body": "This PR removes the Python 2 support for docker images. \r\n\r\nBuild output can be seen here\r\n- nightly: https://gist.github.com/liamwazherealso/6c5f4368120168c461d3ad3eef380731"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36969", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36969/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36969/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36969/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/36969", "id": 569156566, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc4NDQ5NDE1", "number": 36969, "title": "[XLA] Change the number of threads per block for row reduction", "user": {"login": "nouiz", "id": 180987, "node_id": "MDQ6VXNlcjE4MDk4Nw==", "avatar_url": "https://avatars3.githubusercontent.com/u/180987?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nouiz", "html_url": "https://github.com/nouiz", "followers_url": "https://api.github.com/users/nouiz/followers", "following_url": "https://api.github.com/users/nouiz/following{/other_user}", "gists_url": "https://api.github.com/users/nouiz/gists{/gist_id}", "starred_url": "https://api.github.com/users/nouiz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nouiz/subscriptions", "organizations_url": "https://api.github.com/users/nouiz/orgs", "repos_url": "https://api.github.com/users/nouiz/repos", "events_url": "https://api.github.com/users/nouiz/events{/privacy}", "received_events_url": "https://api.github.com/users/nouiz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1133285679, "node_id": "MDU6TGFiZWwxMTMzMjg1Njc5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:xla", "name": "comp:xla", "color": "0052cc", "default": false, "description": ""}, {"id": 1169365494, "node_id": "MDU6TGFiZWwxMTY5MzY1NDk0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:M", "name": "size:M", "color": "adafea", "default": false, "description": "CL Change Size: Medium"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-21T20:01:00Z", "updated_at": "2020-03-17T13:12:08Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/36969", "html_url": "https://github.com/tensorflow/tensorflow/pull/36969", "diff_url": "https://github.com/tensorflow/tensorflow/pull/36969.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/36969.patch"}, "body": "This is a follow up from https://github.com/tensorflow/tensorflow/pull/36752\r\n\r\nThis change the number of blocks per threads. It is only the last commit that is the new feature from this PR. The others are already in 36752.\r\n\r\nI didn't change anything in the code. We can start the discussion on how to fix this and I'll update the code accordingly.\r\n\r\nThe number of threads per blocks must be determined by many factors (taken from the previous PR)\r\n\r\n- More threads per blocks mean less atomic writes (as the total number of threads is constant). This is good.\r\n- One SM can't use the full bandwidth per itself. So you need enough blocks to help saturate the IO. I did very small timing, but discarded those results as the noise was too high. There is 80 SM in V100, so ideally we would like at least 80 blocks.\r\n- The last block strangler effect. If you have 81 blocks and 80 SM, then you have 1 that will cause the computation to be as long as if you had 160 blocks. More blocks mean smaller blocks, help mitigate this, as the smaller block will run faster.\r\n- Also, we need at least 64 threads per blocks if we want full occupancy. We are limited to 0.5 occupancy if we use 32 threads per blocks.\r\n- In theory, we could also add a cost model to know if we have a IO or Compute bound kernel (fusion could create compute bound kernel). And in that case we could need different best configuration, as it could be register bound... I do not want to go there.\r\n\r\nThe problem this PR currently have is that it breaks the deterministic reduction on XLA as it is expect exactly 1024 threads per blocks. Making the tree reduction opt know about the new block size is easy (already tested). But this still cause 2 tree reduction failure as now it request 1 extra reduction. This probably slowing down the current tree reduction.\r\n\r\n- Is slowing down the tree reduction acceptable for this PR? If so, I'll just update the expected answer from those tests.\r\n- One option would be to add an attribute to the XLA reduction that would specify the number of threads (example name biggest_block).\r\n    - This isn't very good as this add an implementation detail as a Reduce attribute.\r\n- Another attribute that we could add is: \"deterministic\". This describe a behavior. I could implement that, by making sure we it generates only 1 blocks per row. If not possible, raise an error. It would be the responsibility of the optimizer to have this possible.\r\n  \r\nI like the last approch. It would also help prevent the AlgebraicOptimizer to interfer with the TreeReductionRewriter optimizer, as it could just not touch those graph.\r\n\r\nIf we choose this options, this open the doors to more optimization later. For example, you could remove the memset and replace the atomic update with a normal write at the end of the kernel.\r\n\r\n@cheshire "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36968", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36968/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36968/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36968/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36968", "id": 569137221, "node_id": "MDU6SXNzdWU1NjkxMzcyMjE=", "number": 36968, "title": "Gradient checkpointing: Wrap `tf.keras.Model` or `tf.keras.layers.Layer` in `tf.recompute_gradients()`", "user": {"login": "jarednielsen", "id": 4564897, "node_id": "MDQ6VXNlcjQ1NjQ4OTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/4564897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jarednielsen", "html_url": "https://github.com/jarednielsen", "followers_url": "https://api.github.com/users/jarednielsen/followers", "following_url": "https://api.github.com/users/jarednielsen/following{/other_user}", "gists_url": "https://api.github.com/users/jarednielsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/jarednielsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jarednielsen/subscriptions", "organizations_url": "https://api.github.com/users/jarednielsen/orgs", "repos_url": "https://api.github.com/users/jarednielsen/repos", "events_url": "https://api.github.com/users/jarednielsen/events{/privacy}", "received_events_url": "https://api.github.com/users/jarednielsen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-21T19:20:05Z", "updated_at": "2020-03-03T21:09:19Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "I'm implementing gradient checkpointing with my Tensorflow 2.1 project, following the doc here: https://www.tensorflow.org/api_docs/python/tf/recompute_grad\r\n\r\nWhen I try\r\n```code\r\nmodel = tf.recompute_grad(model)\r\n```\r\nit fails, and likewise with \r\n```code\r\nmodel.layer = tf.recompute_grad(model.layer)\r\n```\r\n\r\nI see that Keras acts differently because tf.recompute_grad() wraps the function with an inner() call, but what should I do to get it working?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36962", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36962/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36962/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36962/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36962", "id": 569071147, "node_id": "MDU6SXNzdWU1NjkwNzExNDc=", "number": 36962, "title": "Cannot save model when not giving a name in Layer.add_weight call", "user": {"login": "arnomoonens", "id": 1382900, "node_id": "MDQ6VXNlcjEzODI5MDA=", "avatar_url": "https://avatars2.githubusercontent.com/u/1382900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arnomoonens", "html_url": "https://github.com/arnomoonens", "followers_url": "https://api.github.com/users/arnomoonens/followers", "following_url": "https://api.github.com/users/arnomoonens/following{/other_user}", "gists_url": "https://api.github.com/users/arnomoonens/gists{/gist_id}", "starred_url": "https://api.github.com/users/arnomoonens/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arnomoonens/subscriptions", "organizations_url": "https://api.github.com/users/arnomoonens/orgs", "repos_url": "https://api.github.com/users/arnomoonens/repos", "events_url": "https://api.github.com/users/arnomoonens/events{/privacy}", "received_events_url": "https://api.github.com/users/arnomoonens/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-02-21T16:56:45Z", "updated_at": "2020-02-24T22:03:23Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow): Yes\r\n- OS Platform and Distribution: Manjaro 19.0.0 Kyria\r\n- TensorFlow installed from: binary\r\n- TensorFlow version: 2.1.0 \r\n- Python version: 3.7.4\r\n\r\n**Describe the current behavior**\r\nI made a custom `tf.keras.layers.Layer`, where I make my weights in the `build` function using `self.add_weight`. However, I do not pass a name to this function. When I try to save the model that uses the layer, I get an error because the name of the weight is `None` (see traceback below).\r\n\r\n**Describe the expected behavior**\r\nI expected that the weight would either get a default name (possibly only upon saving), that I would get an error when calling `add_weight` or that I would get a more informative error when saving the model.\r\n\r\n**Standalone code to reproduce the issue** \r\n```\r\nimport tensorflow as tf\r\nclass CustomLayer(tf.keras.layers.Layer):\r\n    def build(self, input_shape):\r\n        self.w = self.add_weight(shape=(input_shape[-1], 1))\r\n    def call(self, x):\r\n        return tf.matmul(x, self.w)\r\ninp = tf.keras.Input((5,))\r\nm = tf.keras.Model(inputs=inp, outputs=CustomLayer()(inp))\r\nm.save(\"/tmp/savedmodel\")\r\n```\r\n\r\n**Other info / logs**\r\n```\r\nTraceback (most recent call last):\r\n  File \"tfbug.py\", line 9, in <module>\r\n    m.save(\"/tmp/savedmodel\")\r\n  File \"/home/arno/conda/envs/tf2/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/network.py\", line 1008, in save\r\n    signatures, options)\r\n  File \"/home/arno/conda/envs/tf2/lib/python3.7/site-packages/tensorflow_core/python/keras/saving/save.py\", line 115, in save_model\r\n    signatures, options)\r\n  File \"/home/arno/conda/envs/tf2/lib/python3.7/site-packages/tensorflow_core/python/keras/saving/saved_model/save.py\", line 78, in save \r\n    save_lib.save(model, filepath, signatures, options)\r\n  File \"/home/arno/conda/envs/tf2/lib/python3.7/site-packages/tensorflow_core/python/saved_model/save.py\", line 899, in save\r\n    _ = _SaveableView(checkpoint_graph_view)\r\n  File \"/home/arno/conda/envs/tf2/lib/python3.7/site-packages/tensorflow_core/python/saved_model/save.py\", line 165, in __init__\r\n    self.checkpoint_view.objects_ids_and_slot_variables())\r\n  File \"/home/arno/conda/envs/tf2/lib/python3.7/site-packages/tensorflow_core/python/training/tracking/graph_view.py\", line 418, in objects_ids_and_slot_variables\r\n    object_names[obj] = _object_prefix_from_path(path)\r\n  File \"/home/arno/conda/envs/tf2/lib/python3.7/site-packages/tensorflow_core/python/training/tracking/graph_view.py\", line 64, in _object_prefix_from_path\r\n    for trackable in path_to_root))\r\n  File \"/home/arno/conda/envs/tf2/lib/python3.7/site-packages/tensorflow_core/python/training/tracking/graph_view.py\", line 64, in <genexpr>\r\n    for trackable in path_to_root))\r\n  File \"/home/arno/conda/envs/tf2/lib/python3.7/site-packages/tensorflow_core/python/training/tracking/graph_view.py\", line 57, in _escape_local_name\r\n    return (name.replace(_ESCAPE_CHAR, _ESCAPE_CHAR + _ESCAPE_CHAR)\r\nAttributeError: 'NoneType' object has no attribute 'replace'\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36958", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36958/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36958/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36958/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36958", "id": 568995696, "node_id": "MDU6SXNzdWU1Njg5OTU2OTY=", "number": 36958, "title": "How to optimize a complex phase?", "user": {"login": "ziofil", "id": 8944955, "node_id": "MDQ6VXNlcjg5NDQ5NTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/8944955?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ziofil", "html_url": "https://github.com/ziofil", "followers_url": "https://api.github.com/users/ziofil/followers", "following_url": "https://api.github.com/users/ziofil/following{/other_user}", "gists_url": "https://api.github.com/users/ziofil/gists{/gist_id}", "starred_url": "https://api.github.com/users/ziofil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ziofil/subscriptions", "organizations_url": "https://api.github.com/users/ziofil/orgs", "repos_url": "https://api.github.com/users/ziofil/repos", "events_url": "https://api.github.com/users/ziofil/events{/privacy}", "received_events_url": "https://api.github.com/users/ziofil/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-02-21T14:41:24Z", "updated_at": "2020-03-04T11:44:17Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow): yes\r\n- OS Platform and Distribution: MacOS 10.15.3\r\n- TensorFlow installed from binary: 2.1.0\r\n\r\n**Describe the current behavior**\r\nA real loss function that uses complex numbers internally requires Variables to be complex.\r\nBut this leads to complex gradients, even though they should be real.\r\n\r\n**Describe the expected behavior**\r\nIn TF1.x I used to circumvent this problem by defining my real variables as (e.g.):\r\n```python\r\nx = tf.complex(tf.Variable(1.0, dtype=tf.float32), tf.constant(0.0, dtype=tf.float32))\r\n```\r\nTF2.x cannot compute gradients if I use this trick.\r\n\r\n**Standalone code to reproduce the issue** \r\nFor example, I want to optimize the _real_ angle `x` in the complex phase `exp(1j*x)`:\r\n\r\n```python\r\ndef loss(x):\r\n    return tf.abs(tf.exp(1j*x)-1.0) # minimized by x = 0.0\r\n\r\nx = tf.Variable(1.0, dtype=tf.complex64) # forced to have type tf.complex64\r\nLR = 0.01\r\n\r\nfor n in range(10):\r\n    with tf.GradientTape() as tape:\r\n        L = loss(x)\r\n        grad = tape.gradient(L, x)\r\n        x.assign_sub(LR * grad)\r\n\r\nprint(x)\r\n# <tf.Variable 'Variable:0' shape=() dtype=complex64, numpy=(0.9122518+0.043542963j)>\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36956", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36956/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36956/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36956/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36956", "id": 568936479, "node_id": "MDU6SXNzdWU1Njg5MzY0Nzk=", "number": 36956, "title": "Java.lang.ArrayIndexOutOfBoundsException: length=66049; index=66049", "user": {"login": "Ehtasha", "id": 30791752, "node_id": "MDQ6VXNlcjMwNzkxNzUy", "avatar_url": "https://avatars1.githubusercontent.com/u/30791752?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ehtasha", "html_url": "https://github.com/Ehtasha", "followers_url": "https://api.github.com/users/Ehtasha/followers", "following_url": "https://api.github.com/users/Ehtasha/following{/other_user}", "gists_url": "https://api.github.com/users/Ehtasha/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ehtasha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ehtasha/subscriptions", "organizations_url": "https://api.github.com/users/Ehtasha/orgs", "repos_url": "https://api.github.com/users/Ehtasha/repos", "events_url": "https://api.github.com/users/Ehtasha/events{/privacy}", "received_events_url": "https://api.github.com/users/Ehtasha/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-21T12:49:39Z", "updated_at": "2020-02-25T08:29:39Z", "closed_at": null, "author_association": "NONE", "body": "I'm facing this error while integrating my custom Nails Segmentation Model with the app.\r\n\r\nOther models are working find but whenever I use custom model app crashes and give above mentioned error.\r\n\r\nError in bellow while loop\r\n`while (segmentedImage.hasRemaining()){\r\n             outFrame[i++] = segmentedImage.int\r\n        }`\r\n\r\n**Android App Code to Reproduce this error:**\r\nI have upload the stand alone code on [this ](https://drive.google.com/open?id=1WQ9LmAqJpxMwZIHtzMxRP2j6nq1Ga2lD)link which produce this error.\r\n\r\n**System Information**\r\nOS Platform and Distribution: Windows 10\r\nMobile device: Samsung Galaxy\r\nTensorFlow version: Tensorflow Version installed on system is 1.15.0\r\nTensorflow Dependency using in android gradle file is: `implementation('org.tensorflow:tensorflow-lite:0.0.0-nightly') { changing = true }` \r\nTFlite Nails Detection Model file source: [Nail Detection Model](https://github.com/makeml-app/MakeML-Nails/tree/master/Segmentation%20Nails/Resources)\r\n\r\n\r\n\r\n**Expected Behavior:**\r\nExpected Behavior is showing in this [link](https://github.com/makeml-app/MakeML-Nails). \r\n\r\n**Current Behavior**\r\nCurrently when the camera view is open App crashes when the model start nails detection.\r\nException throw in above while loop.\r\nIf I hide this above while loop then app is not crashing but not detecting nails and place colors on that.\r\n\r\nWhat I need to change to get rid from this error ?\r\n\r\nThanks.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36954", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36954/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36954/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36954/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36954", "id": 568919308, "node_id": "MDU6SXNzdWU1Njg5MTkzMDg=", "number": 36954, "title": "I got This error by upgrading to TensorFlow 2.1: \"AttributeError: 'Operation' object has no attribute '_graph'\" .", "user": {"login": "hu26hase", "id": 38656577, "node_id": "MDQ6VXNlcjM4NjU2NTc3", "avatar_url": "https://avatars1.githubusercontent.com/u/38656577?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hu26hase", "html_url": "https://github.com/hu26hase", "followers_url": "https://api.github.com/users/hu26hase/followers", "following_url": "https://api.github.com/users/hu26hase/following{/other_user}", "gists_url": "https://api.github.com/users/hu26hase/gists{/gist_id}", "starred_url": "https://api.github.com/users/hu26hase/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hu26hase/subscriptions", "organizations_url": "https://api.github.com/users/hu26hase/orgs", "repos_url": "https://api.github.com/users/hu26hase/repos", "events_url": "https://api.github.com/users/hu26hase/events{/privacy}", "received_events_url": "https://api.github.com/users/hu26hase/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gadagashwini", "id": 48476109, "node_id": "MDQ6VXNlcjQ4NDc2MTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/48476109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadagashwini", "html_url": "https://github.com/gadagashwini", "followers_url": "https://api.github.com/users/gadagashwini/followers", "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}", "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions", "organizations_url": "https://api.github.com/users/gadagashwini/orgs", "repos_url": "https://api.github.com/users/gadagashwini/repos", "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}", "received_events_url": "https://api.github.com/users/gadagashwini/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gadagashwini", "id": 48476109, "node_id": "MDQ6VXNlcjQ4NDc2MTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/48476109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadagashwini", "html_url": "https://github.com/gadagashwini", "followers_url": "https://api.github.com/users/gadagashwini/followers", "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}", "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions", "organizations_url": "https://api.github.com/users/gadagashwini/orgs", "repos_url": "https://api.github.com/users/gadagashwini/repos", "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}", "received_events_url": "https://api.github.com/users/gadagashwini/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-02-21T12:11:24Z", "updated_at": "2020-03-17T05:36:20Z", "closed_at": null, "author_association": "NONE", "body": "My code is written under TensorFlow 2.0 and I run it on Ubuntu 18.04.04. The code is perfectly run with TensorFlow 2.0. But I need to use TensorFlow 2.1 because of some functionality of TensorFlow_addones library.  I upgrade the Tensorflow within my virtual environment by the command \" conda install tensorflow-gpu\" and run the code. The code run for the first epoch and save the result but as soon as it starts next epoch, it stop and show this error.\r\nIf I downgrade the TensorFlow to 2.0, again the code run without any problem. Does anybody know what is the issue?\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36953", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36953/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36953/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36953/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36953", "id": 568901742, "node_id": "MDU6SXNzdWU1Njg5MDE3NDI=", "number": 36953, "title": "MultiWorkerMirroredStrategy failed to run after a few batches occasionally", "user": {"login": "372046933", "id": 1251167, "node_id": "MDQ6VXNlcjEyNTExNjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/1251167?v=4", "gravatar_id": "", "url": "https://api.github.com/users/372046933", "html_url": "https://github.com/372046933", "followers_url": "https://api.github.com/users/372046933/followers", "following_url": "https://api.github.com/users/372046933/following{/other_user}", "gists_url": "https://api.github.com/users/372046933/gists{/gist_id}", "starred_url": "https://api.github.com/users/372046933/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/372046933/subscriptions", "organizations_url": "https://api.github.com/users/372046933/orgs", "repos_url": "https://api.github.com/users/372046933/repos", "events_url": "https://api.github.com/users/372046933/events{/privacy}", "received_events_url": "https://api.github.com/users/372046933/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2020-02-21T11:32:00Z", "updated_at": "2020-03-19T17:15:16Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a bug. As per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow): YES\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04): TensorFlow 2.0 Ubuntu 18.04 official image\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if\r\nthe issue happens on mobile device: \r\n- TensorFlow installed from (source or\r\nbinary): - TensorFlow version (use command below): v2.0.0-rc2-26-g64c3d38\r\n- Python version: - Bazel\r\nversion (if compiling from source): 3.6.8\r\n- GCC/Compiler version (if compiling from\r\nsource): \r\n- CUDA/cuDNN version: - GPU model and memory: CUDA 10.1 16GB\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n``` W tensorflow/core/framework/op_kernel.cc:1622] OP_REQUIRES failed at collective_ops:234 : Aborted: The same RecvBuf (GrpcWorker) request was received twice.```\r\n**Describe the expected behavior**\r\nShould be able to train on each run.\r\n**Standalone code to reproduce the issue** \r\nhttps://github.com/calmisential/TensorFlow2.0_ResNet\r\nI modified some code to make it run with different distribute strategy.\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36947", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36947/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36947/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36947/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/36947", "id": 568761740, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc4MTI0NjUw", "number": 36947, "title": "Fix hyperlink to tf.Tensor guide.  ", "user": {"login": "jraman", "id": 157409, "node_id": "MDQ6VXNlcjE1NzQwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/157409?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jraman", "html_url": "https://github.com/jraman", "followers_url": "https://api.github.com/users/jraman/followers", "following_url": "https://api.github.com/users/jraman/following{/other_user}", "gists_url": "https://api.github.com/users/jraman/gists{/gist_id}", "starred_url": "https://api.github.com/users/jraman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jraman/subscriptions", "organizations_url": "https://api.github.com/users/jraman/orgs", "repos_url": "https://api.github.com/users/jraman/repos", "events_url": "https://api.github.com/users/jraman/events{/privacy}", "received_events_url": "https://api.github.com/users/jraman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1178505529, "node_id": "MDU6TGFiZWwxMTc4NTA1NTI5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/prtype:bugfix", "name": "prtype:bugfix", "color": "159b2e", "default": false, "description": "PR to fix a bug"}, {"id": 987666414, "node_id": "MDU6TGFiZWw5ODc2NjY0MTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/ready%20to%20pull", "name": "ready to pull", "color": "2cd643", "default": false, "description": ""}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2020-02-21T06:28:16Z", "updated_at": "2020-03-13T19:25:47Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/36947", "html_url": "https://github.com/tensorflow/tensorflow/pull/36947", "diff_url": "https://github.com/tensorflow/tensorflow/pull/36947.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/36947.patch"}, "body": "cc: @jvishnuvardhan \r\n\r\nFollowup to #36775.\r\n \r\n * Fix hyperlink to tf.Tensor guide. \r\n * Add brief intro of eager and graph modes.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36945", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36945/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36945/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36945/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36945", "id": 568674097, "node_id": "MDU6SXNzdWU1Njg2NzQwOTc=", "number": 36945, "title": "ImportError after installing 2.1.0 on OSX Catalina 10.15.2 (From binary and source)", "user": {"login": "nicholascannon1", "id": 8108396, "node_id": "MDQ6VXNlcjgxMDgzOTY=", "avatar_url": "https://avatars0.githubusercontent.com/u/8108396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nicholascannon1", "html_url": "https://github.com/nicholascannon1", "followers_url": "https://api.github.com/users/nicholascannon1/followers", "following_url": "https://api.github.com/users/nicholascannon1/following{/other_user}", "gists_url": "https://api.github.com/users/nicholascannon1/gists{/gist_id}", "starred_url": "https://api.github.com/users/nicholascannon1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nicholascannon1/subscriptions", "organizations_url": "https://api.github.com/users/nicholascannon1/orgs", "repos_url": "https://api.github.com/users/nicholascannon1/repos", "events_url": "https://api.github.com/users/nicholascannon1/events{/privacy}", "received_events_url": "https://api.github.com/users/nicholascannon1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1205765054, "node_id": "MDU6TGFiZWwxMjA1NzY1MDU0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:macOS", "name": "subtype:macOS", "color": "b619ea", "default": false, "description": "macOS Build/Installation issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2020-02-21T01:04:53Z", "updated_at": "2020-03-12T06:07:27Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Mac OSX Catalina 10.15.2\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): Binary AND source\r\n- TensorFlow version: 2.1.0 (switched to branch r2.1.0)\r\n- Python version: 3.7.6\r\n- Installed using virtualenv? pip? conda?: pip (pip3 on my system)\r\n- Bazel version (if compiling from source): 2.1.0\r\n- GCC/Compiler version (if compiling from source): Apple clang version 11.0.0 (clang-1100.0.33.17)\r\n- CUDA/cuDNN version:\r\n- GPU model and memory: Intel UHD (using MacBookPro GPU not compatible)\r\n\r\n\r\n\r\n**Describe the problem**\r\nAfter successfully installing Tensorflow via pip or compiling Tensorflow from source, importing the Tensorflow2.1.0 package fails with the error below on OSX Catalina 10.15.2 (CPU = 2.6 GHz 6-Core Intel Core i7). Running `pip install tensorflow==2.0.0` works fine. I've tried installing `pywrap` with `pip3 install pywrap` but this does not fix the issue.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nPIP instructions:\r\n1. `pip3 install tensorflow` (Tried `--user`, `--upgrade` and installing with `pip` as well)\r\n2. `python3`\r\n3. `>>> import tensorflow as tf`\r\n\r\nCompilation instructions:\r\n1. `git clone https://github.com/tensorflow/tensorflow.git & cd tensorflow`\r\n2. `git checkout branch_name r2.1.0`\r\n3. `./configure` setting python version as `/usr/local/bin/python3` and everything else as defaults\r\n4.  `bazel build //tensorflow/tools/pip_package:build_pip_package`\r\n5. `./bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg`\r\n6. `pip install /tmp/tensorflow_pkg/tensorflow-2.1.0-cp37-cp37m-macosx_10_15_x86_64.whl`\r\n7. `python3`\r\n8. `>>> import tensorflow`\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nERROR PRODUCED:\r\n```\r\n>>> import tensorflow as tf\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/usr/local/lib/python3.7/site-packages/tensorflow/__init__.py\", line 101, in <module>\r\n    from tensorflow_core import *\r\n  File \"/usr/local/lib/python3.7/site-packages/tensorflow_core/__init__.py\", line 40, in <module>\r\n    from tensorflow.python.tools import module_util as _module_util\r\n  File \"/usr/local/lib/python3.7/site-packages/tensorflow/__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"/usr/local/lib/python3.7/site-packages/tensorflow/__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"/usr/local/Cellar/python/3.7.6_1/Frameworks/Python.framework/Versions/3.7/lib/python3.7/importlib/__init__.py\", line 127, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"/usr/local/lib/python3.7/site-packages/tensorflow_core/python/__init__.py\", line 50, in <module>\r\n    from tensorflow.python import _pywrap_utils\r\nImportError: dlopen(/usr/local/lib/python3.7/site-packages/tensorflow_core/python/_pywrap_utils.so, 2): Symbol not found: __ZN10tensorflow4swig10IsSequenceEP7_object\r\n  Referenced from: /usr/local/lib/python3.7/site-packages/tensorflow_core/python/_pywrap_utils.so\r\n  Expected in: flat namespace\r\n in /usr/local/lib/python3.7/site-packages/tensorflow_core/python/_pywrap_utils.so\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36943", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36943/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36943/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36943/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36943", "id": 568668339, "node_id": "MDU6SXNzdWU1Njg2NjgzMzk=", "number": 36943, "title": "assertion \"exponent <= 31\" failed while executing interpreter->Invoke()", "user": {"login": "GlennWasAlreadyTaken", "id": 20247794, "node_id": "MDQ6VXNlcjIwMjQ3Nzk0", "avatar_url": "https://avatars1.githubusercontent.com/u/20247794?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GlennWasAlreadyTaken", "html_url": "https://github.com/GlennWasAlreadyTaken", "followers_url": "https://api.github.com/users/GlennWasAlreadyTaken/followers", "following_url": "https://api.github.com/users/GlennWasAlreadyTaken/following{/other_user}", "gists_url": "https://api.github.com/users/GlennWasAlreadyTaken/gists{/gist_id}", "starred_url": "https://api.github.com/users/GlennWasAlreadyTaken/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GlennWasAlreadyTaken/subscriptions", "organizations_url": "https://api.github.com/users/GlennWasAlreadyTaken/orgs", "repos_url": "https://api.github.com/users/GlennWasAlreadyTaken/repos", "events_url": "https://api.github.com/users/GlennWasAlreadyTaken/events{/privacy}", "received_events_url": "https://api.github.com/users/GlennWasAlreadyTaken/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1589976566, "node_id": "MDU6TGFiZWwxNTg5OTc2NTY2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:micro", "name": "comp:micro", "color": "3e2eea", "default": false, "description": "Related to TensorFlow Lite Microcontrollers"}], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, {"login": "MeghnaNatraj", "id": 8790823, "node_id": "MDQ6VXNlcjg3OTA4MjM=", "avatar_url": "https://avatars0.githubusercontent.com/u/8790823?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MeghnaNatraj", "html_url": "https://github.com/MeghnaNatraj", "followers_url": "https://api.github.com/users/MeghnaNatraj/followers", "following_url": "https://api.github.com/users/MeghnaNatraj/following{/other_user}", "gists_url": "https://api.github.com/users/MeghnaNatraj/gists{/gist_id}", "starred_url": "https://api.github.com/users/MeghnaNatraj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MeghnaNatraj/subscriptions", "organizations_url": "https://api.github.com/users/MeghnaNatraj/orgs", "repos_url": "https://api.github.com/users/MeghnaNatraj/repos", "events_url": "https://api.github.com/users/MeghnaNatraj/events{/privacy}", "received_events_url": "https://api.github.com/users/MeghnaNatraj/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-02-21T00:45:44Z", "updated_at": "2020-02-25T00:12:49Z", "closed_at": null, "author_association": "NONE", "body": "@tensorflow/micro\r\n\r\n**System information**\r\n- Host OS Platform and Distribution: Windows 10\r\n- TensorFlow installed from binary\r\n- Tensorflow version: TF 2.0.0\r\n- Target platform: M5Stack (ESP32)\r\n\r\n\r\n**Description of the problem:**\r\n\r\nI'm working on a CNN model that tries to detect a situation that occurs to patient with Parkinson disease. Based on accelerometers values, I try to detect the appearance of this situation with a CNN.\r\nI trained a model with the Python version of TF, and I converted the model into a .tflite file that I'm using to put the model on a M5Stack microcontroller.\r\n\r\nWhen I execute a basic program consisting in giving an input to my model on the microcontroller, this error is sent through the serial monitor:\r\n\r\n> assertion \"exponent <= 31\" failed: file \"lib\\tfmicro/fixedpoint/fixedpoint.h\", line 359, function: IntegerType gemmlowp::RoundingDivideByPOT(IntegerType, int) [with IntegerType = int]\r\n\r\nIt seems to happen when the \"interpreter->Invoke()\" part of the code is executed. \r\n\r\n\r\n**How I ran into the problem:**\r\n\r\nThe code in which I'm using the model on the microcontroller is based the the helloworld example. I'm simply just creating a sample user input, loading the model, and trying to invoke the interpreter on the sample data, but I get the \"assertion failed\" error.\r\n\r\nI'm getting the error when the following part of the code is executed:\r\n```cpp\r\nif (interpreter->Invoke() != kTfLiteOk)\r\n{\r\n    M5.Lcd.println(\"There was an error invoking the interpreter!\");\r\n    return;\r\n}\r\n```\r\nOn this code, the message is not even printed, the \"assertion failed\" comes from the execution of *interpreter->Invoke()*.\r\nThis error makes my microcontroller reboot, again and again.\r\n\r\nThe repository https://github.com/GlennWasAlreadyTaken/CNN_M5Stack contains my whole project. \r\nIn the cnn folder, you'll find the Python script I made for the training of the model and conversion to tflite file. You'll also find the weights (.h5), and the converted file (tflite) and the C array (.cc).\r\nThe M5StackCNN folder contains the code for the microcontroller, that should run the model. I use Platformio in order to deploy the program on the M5Stack.\r\nYou'll find the main code for the microcontroller in M5StackCNN/src/main.cpp.\r\n\r\nThank you in advance."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36936", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36936/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36936/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36936/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36936", "id": 568435394, "node_id": "MDU6SXNzdWU1Njg0MzUzOTQ=", "number": 36936, "title": "Does passing 'training' flag to tf.keras.Sequential do anything?", "user": {"login": "milongo", "id": 16996940, "node_id": "MDQ6VXNlcjE2OTk2OTQw", "avatar_url": "https://avatars3.githubusercontent.com/u/16996940?v=4", "gravatar_id": "", "url": "https://api.github.com/users/milongo", "html_url": "https://github.com/milongo", "followers_url": "https://api.github.com/users/milongo/followers", "following_url": "https://api.github.com/users/milongo/following{/other_user}", "gists_url": "https://api.github.com/users/milongo/gists{/gist_id}", "starred_url": "https://api.github.com/users/milongo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/milongo/subscriptions", "organizations_url": "https://api.github.com/users/milongo/orgs", "repos_url": "https://api.github.com/users/milongo/repos", "events_url": "https://api.github.com/users/milongo/events{/privacy}", "received_events_url": "https://api.github.com/users/milongo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2020-02-20T16:52:54Z", "updated_at": "2020-03-18T22:24:15Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\nhttps://www.tensorflow.org/tutorials/customization/custom_training_walkthrough#define_the_loss_and_gradient_function\r\n\r\nPlease provide a link to the documentation entry, for example:\r\nhttps://www.tensorflow.org/api_docs/python/tf/keras/Sequential\r\n\r\nhttps://www.tensorflow.org/api_docs/python/tf/keras/Model\r\n## Description of issue (what needs changing):\r\nIt is unclear whether the Sequential class makes use a 'training' flag fed into it during training/inference, as the tutorial above implies. \r\n\r\n### Clear description\r\nWhen building a custom model subclassing from tf.keras.Model, the standard signature for writing the `call` is as follows: `def call(self, inputs, training=None, mask=None):`\r\n\r\nIf my class includes submodels of the form Sequential, I am able to pass this flag forward but I'm unaware whether it's doing anything, as documentation from the class doesn't mention this flag.\r\nLooking at the customization tutorial above, however, the flag is passed into a Sequential model that does not include layers whose behavior change during training/inference. So I don't know if that flag is doing anything.\r\n\r\n### Correct links\r\n\r\nIs the link to the source code correct?\r\n\r\n### Parameters defined\r\n\r\nAre all parameters defined and formatted correctly?\r\n\r\n### Returns defined\r\n\r\nAre return values defined?\r\n\r\n### Raises listed and defined\r\n\r\nAre the errors defined? For example,\r\nhttps://www.tensorflow.org/versions/r2.0/api_docs/python/tf/feature_column/categorical_column_with_vocabulary_file#raises\r\n\r\n### Usage example\r\n\r\nIs there a usage example?\r\n\r\nSee the API guide: https://www.tensorflow.org/community/contribute/docs_ref\r\non how to write testable usage examples.\r\n\r\n### Request visuals, if applicable\r\n\r\nAre there currently visuals? If not, will it clarify the content?\r\n\r\n### Submit a pull request?\r\n\r\nAre you planning to also submit a pull request to fix the issue? See the docs\r\ncontributor guide: https://www.tensorflow.org/community/contribute/docs,\r\ndocs API guide: https://www.tensorflow.org/community/contribute/docs_ref and the\r\ndocs style guide: https://www.tensorflow.org/community/contribute/docs_style\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36935", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36935/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36935/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36935/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36935", "id": 568417655, "node_id": "MDU6SXNzdWU1Njg0MTc2NTU=", "number": 36935, "title": "DepthwiseConv1D: implementation, check and warning message", "user": {"login": "pj1989", "id": 7668531, "node_id": "MDQ6VXNlcjc2Njg1MzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/7668531?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pj1989", "html_url": "https://github.com/pj1989", "followers_url": "https://api.github.com/users/pj1989/followers", "following_url": "https://api.github.com/users/pj1989/following{/other_user}", "gists_url": "https://api.github.com/users/pj1989/gists{/gist_id}", "starred_url": "https://api.github.com/users/pj1989/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pj1989/subscriptions", "organizations_url": "https://api.github.com/users/pj1989/orgs", "repos_url": "https://api.github.com/users/pj1989/repos", "events_url": "https://api.github.com/users/pj1989/events{/privacy}", "received_events_url": "https://api.github.com/users/pj1989/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-20T16:24:51Z", "updated_at": "2020-02-24T09:35:21Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code:\r\n- OS Platform and Distribution: Windows 10 Enterprise 1803 (build 17134.1246)\r\n- TensorFlow backend: yes\r\n- TensorFlow version: 2.0.0\r\n- Keras version: '2.2.4-tf' (called from tensorflow.keras)\r\n- Python version: 3.7\r\n- CUDA/cuDNN version: -\r\n- GPU model and memory: -\r\n\r\n```\r\nfrom __future__ import absolute_import\r\nfrom __future__ import division\r\nfrom __future__ import print_function\r\n\r\nfrom tensorflow.python.framework import tensor_shape\r\nfrom tensorflow.python.keras import backend\r\nfrom tensorflow.python.keras import constraints\r\nfrom tensorflow.python.keras import initializers\r\nfrom tensorflow.python.keras import regularizers\r\nfrom tensorflow.python.keras.engine.input_spec import InputSpec\r\nfrom tensorflow.python.keras.layers.convolutional import Conv1D\r\n# imports for backwards namespace compatibility\r\n# pylint: disable=unused-import\r\n# pylint: enable=unused-import\r\nfrom tensorflow.python.keras.utils import conv_utils\r\nfrom tensorflow.python.keras.utils import tf_utils\r\nfrom tensorflow.python.ops import array_ops\r\nfrom tensorflow.python.util.tf_export import keras_export\r\n\r\nFor a project I'm working on, I needed a Depthwise Convolutional Layer 1D.\r\nUnfortunately, keras at the moment does not include this layer (despite including `Conv1D`, `SeparableConv1D` and `DepthwiseConv2D`). Merging the codes of these three layers, I developed a version of `DepthwiseConv1D` that you can see below.\r\n\r\n1. I think that keras should have this layer available in its standard library since `DepthwiseConv` is the only convolutional layer missing a 1D version. I'm quite sure of what I did, but I don't know keras code well enough to guarantee this to be 100% bug-free. How can I check this and would someone help me making a pull request with this code?\r\n\r\n2. When using this layer I get the following warning:\r\n```\r\nWARNING:tensorflow:Entity <bound method DepthwiseConv1D.call of <__main__.DepthwiseConv1D object at 0x0000028580FB0D08>> could not be transformed and will be executed as-is. Please report this to the AutoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: \r\nWARNING: Entity <bound method DepthwiseConv1D.call of <__main__.DepthwiseConv1D object at 0x0000028580FB0D08>> could not be transformed and will be executed as-is. Please report this to the AutoGraph team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause:\r\n```\r\nlooking at #32377 and #32319, but I already have `gast` 0.2.2 installed. Should I be concerned? Does \"will be executed as-is\" means that the layer won't be trained?\r\n\r\n3.  `SeparableConv1D` at lines [1681-1684](https://github.com/tensorflow/tensorflow/blob/v2.1.0/tensorflow/python/keras/layers/convolutional.py#L1555-L1702) does\r\n```\r\n    if self.data_format == 'channels_last':\r\n      strides = (1,) + self.strides + (1,)\r\n    else:\r\n      strides = (1, 1) + self.strides\r\n```\r\nsince `self.strides` is a 2-elements tuple, this cause `strides` to be a 4-elements tuple. This was causing me an error in `nn.separable_conv2d` so I changed this to simply `strides = self.strides*2` (note that in a 1D conv, `strides` is a 1-element tuple).\r\nWas this a bug in `SeparableConv1D`? Or is there a reason for this? Or what I did is wrong?\r\n\r\n@keras_export('keras.layers.DepthwiseConv1D')\r\nclass DepthwiseConv1D(Conv1D):\r\n  \"\"\"Depthwise separable 1D convolution.\r\n  Depthwise Separable convolutions consist of performing\r\n  just the first step in a depthwise spatial convolution\r\n  (which acts on each input channel separately).\r\n  The `depth_multiplier` argument controls how many\r\n  output channels are generated per input channel in the depthwise step.\r\n  Arguments:\r\n    kernel_size: A single integer specifying the spatial\r\n      dimensions of the filters.\r\n    strides: A single integer specifying the strides\r\n      of the convolution.\r\n      Specifying any `stride` value != 1 is incompatible with specifying\r\n      any `dilation_rate` value != 1.\r\n    padding: one of `'valid'` or `'same'` (case-insensitive).\r\n    depth_multiplier: The number of depthwise convolution output channels\r\n      for each input channel.\r\n      The total number of depthwise convolution output\r\n      channels will be equal to `filters_in * depth_multiplier`.\r\n    data_format: A string,\r\n      one of `channels_last` (default) or `channels_first`.\r\n      The ordering of the dimensions in the inputs.\r\n      `channels_last` corresponds to inputs with shape\r\n      `(batch, length, channels)` while `channels_first`\r\n      corresponds to inputs with shape\r\n      `(batch, channels, length)`.\r\n      The default is 'channels_last'.\r\n    activation: Activation function to use.\r\n      If you don't specify anything, no activation is applied\r\n      (ie. 'linear' activation: `a(x) = x`).\r\n    use_bias: Boolean, whether the layer uses a bias vector.\r\n    depthwise_initializer: Initializer for the depthwise kernel matrix.\r\n    bias_initializer: Initializer for the bias vector.\r\n    depthwise_regularizer: Regularizer function applied to\r\n      the depthwise kernel matrix.\r\n    bias_regularizer: Regularizer function applied to the bias vector.\r\n    activity_regularizer: Regularizer function applied to\r\n      the output of the layer (its 'activation').\r\n    depthwise_constraint: Constraint function applied to\r\n      the depthwise kernel matrix.\r\n    bias_constraint: Constraint function applied to the bias vector.\r\n  Input shape:\r\n    3D tensor with shape:\r\n    `[batch, channels, length]` if data_format='channels_first'\r\n    or 4D tensor with shape:\r\n    `[batch, length, channels]` if data_format='channels_last'.\r\n  Output shape:\r\n    3D tensor with shape:\r\n    `[batch, filters, new_length]` if data_format='channels_first'\r\n    or 3D tensor with shape:\r\n    `[batch, new_length, filters]` if data_format='channels_last'.\r\n    `length` values might have changed due to padding.\r\n  \"\"\"\r\n\r\n  def __init__(self,\r\n               kernel_size,\r\n               strides=1,\r\n               padding='valid',\r\n               depth_multiplier=1,\r\n               data_format=None,\r\n               activation=None,\r\n               use_bias=True,\r\n               depthwise_initializer='glorot_uniform',\r\n               bias_initializer='zeros',\r\n               depthwise_regularizer=None,\r\n               bias_regularizer=None,\r\n               activity_regularizer=None,\r\n               depthwise_constraint=None,\r\n               bias_constraint=None,\r\n               **kwargs):\r\n    super(DepthwiseConv1D, self).__init__(\r\n        filters=None,\r\n        kernel_size=kernel_size,\r\n        strides=strides,\r\n        padding=padding,\r\n        data_format=data_format,\r\n        activation=activation,\r\n        use_bias=use_bias,\r\n        bias_regularizer=bias_regularizer,\r\n        activity_regularizer=activity_regularizer,\r\n        bias_constraint=bias_constraint,\r\n        # autocast=False,\r\n        **kwargs)\r\n    self.depth_multiplier = depth_multiplier\r\n    self.depthwise_initializer = initializers.get(depthwise_initializer)\r\n    self.depthwise_regularizer = regularizers.get(depthwise_regularizer)\r\n    self.depthwise_constraint = constraints.get(depthwise_constraint)\r\n    self.bias_initializer = initializers.get(bias_initializer)\r\n\r\n  def build(self, input_shape):\r\n    if len(input_shape) < 3:\r\n      raise ValueError('Inputs to `DepthwiseConv1D` should have rank 3. '\r\n                       'Received input shape:', str(input_shape))\r\n    input_shape = tensor_shape.TensorShape(input_shape)\r\n\r\n    #TODO(pj1989): replace with channel_axis = self._get_channel_axis()\r\n    if self.data_format == 'channels_last':\r\n        channel_axis = -1\r\n    elif self.data_format == 'channels_first':\r\n        channel_axis = 1\r\n\r\n    if input_shape.dims[channel_axis].value is None:\r\n      raise ValueError('The channel dimension of the inputs to '\r\n                       '`DepthwiseConv1D` '\r\n                       'should be defined. Found `None`.')\r\n    input_dim = int(input_shape[channel_axis])\r\n    depthwise_kernel_shape = (self.kernel_size[0],\r\n                              input_dim,\r\n                              self.depth_multiplier)\r\n\r\n    self.depthwise_kernel = self.add_weight(\r\n        shape=depthwise_kernel_shape,\r\n        initializer=self.depthwise_initializer,\r\n        name='depthwise_kernel',\r\n        regularizer=self.depthwise_regularizer,\r\n        constraint=self.depthwise_constraint)\r\n\r\n    if self.use_bias:\r\n      self.bias = self.add_weight(shape=(input_dim * self.depth_multiplier,),\r\n                                  initializer=self.bias_initializer,\r\n                                  name='bias',\r\n                                  regularizer=self.bias_regularizer,\r\n                                  constraint=self.bias_constraint)\r\n    else:\r\n      self.bias = None\r\n    # Set input spec.\r\n    self.input_spec = InputSpec(ndim=3, axes={channel_axis: input_dim})\r\n    self.built = True\r\n\r\n  def call(self, inputs):\r\n    if self.padding == 'causal':\r\n      inputs = array_ops.pad(inputs, self._compute_causal_padding())\r\n    if self.data_format == 'channels_last':\r\n      spatial_start_dim = 1\r\n    else:\r\n      spatial_start_dim = 2\r\n\r\n    # Explicitly broadcast inputs and kernels to 4D.\r\n    # TODO(fchollet): refactor when a native depthwise_conv2d op is available.\r\n    strides = self.strides * 2\r\n    inputs = array_ops.expand_dims(inputs, spatial_start_dim)\r\n    depthwise_kernel = array_ops.expand_dims(self.depthwise_kernel, 0)\r\n    dilation_rate = (1,) + self.dilation_rate\r\n\r\n    outputs = backend.depthwise_conv2d(\r\n        inputs,\r\n        depthwise_kernel,\r\n        strides=strides,\r\n        padding=self.padding,\r\n        dilation_rate=dilation_rate,\r\n        data_format=self.data_format)\r\n\r\n    if self.use_bias:\r\n      outputs = backend.bias_add(\r\n          outputs,\r\n          self.bias,\r\n          data_format=self.data_format)\r\n\r\n    outputs = array_ops.squeeze(outputs, [spatial_start_dim])\r\n\r\n    if self.activation is not None:\r\n      return self.activation(outputs)\r\n\r\n    return outputs\r\n\r\n  @tf_utils.shape_type_conversion\r\n  def compute_output_shape(self, input_shape):\r\n    if self.data_format == 'channels_first':\r\n      length = input_shape[2]\r\n      out_filters = input_shape[1] * self.depth_multiplier\r\n    elif self.data_format == 'channels_last':\r\n      length = input_shape[1]\r\n      out_filters = input_shape[2] * self.depth_multiplier\r\n\r\n    length = conv_utils.conv_output_length(length, self.kernel_size,\r\n                                           self.padding,\r\n                                           self.strides)\r\n    if self.data_format == 'channels_first':\r\n      return (input_shape[0], out_filters, length)\r\n    elif self.data_format == 'channels_last':\r\n      return (input_shape[0], length, out_filters)\r\n\r\n  def get_config(self):\r\n    config = super(DepthwiseConv1D, self).get_config()\r\n    config.pop('filters')\r\n    config.pop('kernel_initializer')\r\n    config.pop('kernel_regularizer')\r\n    config.pop('kernel_constraint')\r\n    config['depth_multiplier'] = self.depth_multiplier\r\n    config['depthwise_initializer'] = initializers.serialize(\r\n        self.depthwise_initializer)\r\n    config['depthwise_regularizer'] = regularizers.serialize(\r\n        self.depthwise_regularizer)\r\n    config['depthwise_constraint'] = constraints.serialize(\r\n        self.depthwise_constraint)\r\n    return config\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36933", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36933/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36933/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36933/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36933", "id": 568393990, "node_id": "MDU6SXNzdWU1NjgzOTM5OTA=", "number": 36933, "title": "API break between TF2.0.0 and TF2.1.0 on simple Keras code", "user": {"login": "durandg12", "id": 45902885, "node_id": "MDQ6VXNlcjQ1OTAyODg1", "avatar_url": "https://avatars0.githubusercontent.com/u/45902885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/durandg12", "html_url": "https://github.com/durandg12", "followers_url": "https://api.github.com/users/durandg12/followers", "following_url": "https://api.github.com/users/durandg12/following{/other_user}", "gists_url": "https://api.github.com/users/durandg12/gists{/gist_id}", "starred_url": "https://api.github.com/users/durandg12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/durandg12/subscriptions", "organizations_url": "https://api.github.com/users/durandg12/orgs", "repos_url": "https://api.github.com/users/durandg12/repos", "events_url": "https://api.github.com/users/durandg12/events{/privacy}", "received_events_url": "https://api.github.com/users/durandg12/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-02-20T15:48:08Z", "updated_at": "2020-02-25T10:43:14Z", "closed_at": null, "author_association": "NONE", "body": "- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS 10.13.6\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v2.1.0-rc2-17-ge5bf8de410 2.1.0\r\n- Python version: v3.6.7:6ec5cf24b7, Oct 20 2018, 03:02:14\r\n\r\n**Describe the current behavior**\r\nI have written a piece of code to answer [this stackoverflow question](https://stackoverflow.com/questions/48309322/keras-multiply-layer-in-functional-api) (the code of `make_model`), and it worked well with tf2.0.0. But today I tested it coincidentally on tf2.1.0 and it raised an error. From the error message, the root cause seems to be that I didn't provide a `name` argument on my `tf.keras.Input` calls.\r\n\r\nNote that the second piece of code that I wrote in my stackoverflow answer, `make_model_2`, works with both tf2.0.0 and tf2.1.0.\r\n\r\n**Describe the expected behavior**\r\nThere shouldn't be any backward incompatibility between tf2.1.0 and tf2.0.0.\r\n\r\n**Standalone code to reproduce the issue** \r\n```\r\nimport tensorflow as tf\r\n\r\nprint(tf.version.VERSION)\r\n\r\ntoy_data = {'movie': [[0], [1], [0], [1]], 'user': [[10], [12], [12], [10]]}\r\ndataset = tf.data.Dataset.from_tensor_slices(toy_data).batch(2)\r\n\r\nfor x in dataset:\r\n    print(x)\r\n\r\ndef make_model():\r\n    inp_movie = tf.keras.Input(shape=(1,))\r\n    inp_user = tf.keras.Input(shape=(1,))\r\n    movie_embedding = tf.keras.layers.Dense(\r\n            units=40, activation=tf.keras.layers.Activation(\"relu\"))(inp_movie)\r\n    user_embedding = tf.keras.layers.Dense(\r\n            units=40, activation=tf.keras.layers.Activation(\"relu\"))(inp_user)\r\n    combined = tf.concat([movie_embedding, user_embedding], 1)\r\n    output = tf.keras.layers.Dense(\r\n            units=1, activation=tf.keras.layers.Activation(\"sigmoid\"))(combined)\r\n    model = tf.keras.Model(inputs=[inp_movie, inp_user], outputs=output)\r\n    return model\r\n\r\nmodel = make_model()\r\n\r\nfor x in dataset:\r\n    print(model(x))\r\n```\r\n\r\n**Other info / logs** \r\n```\r\n---------------------------------------------------------------------------\r\nKeyError                                  Traceback (most recent call last)\r\n<ipython-input-1-cf28ddc4e239> in <module>\r\n     25 \r\n     26 for x in dataset:\r\n---> 27     print(model(x))\r\n\r\n~/path/to/python3.6/site-packages/tensorflow_core/python/keras/engine/base_layer.py in __call__(self, inputs, *args, **kwargs)\r\n    820           with base_layer_utils.autocast_context_manager(\r\n    821               self._compute_dtype):\r\n--> 822             outputs = self.call(cast_inputs, *args, **kwargs)\r\n    823           self._handle_activity_regularization(inputs, outputs)\r\n    824           self._set_mask_metadata(inputs, outputs, input_masks)\r\n\r\n~/path/to/python3.6/site-packages/tensorflow_core/python/keras/engine/network.py in call(self, inputs, training, mask)\r\n    715     return self._run_internal_graph(\r\n    716         inputs, training=training, mask=mask,\r\n--> 717         convert_kwargs_to_constants=base_layer_utils.call_context().saving)\r\n    718 \r\n    719   def compute_output_shape(self, input_shape):\r\n\r\n~/path/to/python3.6/site-packages/tensorflow_core/python/keras/engine/network.py in _run_internal_graph(self, inputs, training, mask, convert_kwargs_to_constants)\r\n    820       # list. Matches dict keys to input names.\r\n    821       inputs = [\r\n--> 822           inputs[inp._keras_history.layer.name] for inp in self._nested_inputs\r\n    823       ]\r\n    824     else:\r\n\r\n~/path/to/python3.6/site-packages/tensorflow_core/python/keras/engine/network.py in <listcomp>(.0)\r\n    820       # list. Matches dict keys to input names.\r\n    821       inputs = [\r\n--> 822           inputs[inp._keras_history.layer.name] for inp in self._nested_inputs\r\n    823       ]\r\n    824     else:\r\n\r\nKeyError: 'input_1'\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36932", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36932/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36932/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36932/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36932", "id": 568361539, "node_id": "MDU6SXNzdWU1NjgzNjE1Mzk=", "number": 36932, "title": "Issue while using \"drop_remainder=True\" on validation set with TPU", "user": {"login": "dimitreOliveira", "id": 16668746, "node_id": "MDQ6VXNlcjE2NjY4NzQ2", "avatar_url": "https://avatars0.githubusercontent.com/u/16668746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dimitreOliveira", "html_url": "https://github.com/dimitreOliveira", "followers_url": "https://api.github.com/users/dimitreOliveira/followers", "following_url": "https://api.github.com/users/dimitreOliveira/following{/other_user}", "gists_url": "https://api.github.com/users/dimitreOliveira/gists{/gist_id}", "starred_url": "https://api.github.com/users/dimitreOliveira/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dimitreOliveira/subscriptions", "organizations_url": "https://api.github.com/users/dimitreOliveira/orgs", "repos_url": "https://api.github.com/users/dimitreOliveira/repos", "events_url": "https://api.github.com/users/dimitreOliveira/events{/privacy}", "received_events_url": "https://api.github.com/users/dimitreOliveira/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-20T15:02:42Z", "updated_at": "2020-02-24T09:27:34Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow): Yes\r\n- Tensorflow version: `2.1.0`\r\n\r\nAbout hardware and software system information I'm using Kaggle kernels so more information can be found here: https://github.com/Kaggle/docker-python\r\n\r\n**Describe the current behavior**\r\nI'm getting errors like the ones below, when I use the argument `drop_remainder=True` on the `dataset.batch()` function, but this happens only with the validation set:\r\n![tpu erros](https://user-images.githubusercontent.com/16668746/74946458-18a92100-53d8-11ea-85ad-d9a2aaa1d0bc.PNG)\r\n\r\nThe issue was further discussed in [this thread on the Kaggle forum](https://www.kaggle.com/c/flower-classification-with-tpus/discussion/130717)\r\n\r\n**Describe the expected behavior**\r\nThe model was supposed to train normally like when I don't use the `drop_remainder=True` argument.\r\n\r\n**Standalone code to reproduce the issue** \r\nLink for the Kaggle kernel: https://www.kaggle.com/dimitreoliveira/flower-classification-with-tpus-eda-and-baseline\r\n\r\n**Other info / logs** \r\nHere is a quick summary of the experiments:\r\n- [Version 32](https://www.kaggle.com/dimitreoliveira/flower-classification-with-tpus-eda-and-baseline?scriptVersionId=28912464): I've not used `drop_remainder=True` on any set and got no error.\r\n- [Version 33](https://www.kaggle.com/dimitreoliveira/flower-classification-with-tpus-eda-and-baseline?scriptVersionId=28930091): I've used `drop_remainder=True` on train and validation sets and got error.\r\n- [Version 34](https://www.kaggle.com/dimitreoliveira/flower-classification-with-tpus-eda-and-baseline?scriptVersionId=28931447): I've used `drop_remainder=True` only on train and got no error.\r\n- [Version 35](https://www.kaggle.com/dimitreoliveira/flower-classification-with-tpus-eda-and-baseline/notebook?scriptVersionId=28932681): I've used `drop_remainder=True` only on validation and got error.\r\n\r\nSo it seems the errors are related to using `drop_remainder=True` on the validation set.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36928", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36928/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36928/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36928/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36928", "id": 568243648, "node_id": "MDU6SXNzdWU1NjgyNDM2NDg=", "number": 36928, "title": "if GPU available, raise Exception \"Cholesky decomposition was not successful. The input might not be valid\" ,otherwise, in CPU mode, The Official Unittest is ok", "user": {"login": "gjpicker", "id": 13636269, "node_id": "MDQ6VXNlcjEzNjM2MjY5", "avatar_url": "https://avatars2.githubusercontent.com/u/13636269?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gjpicker", "html_url": "https://github.com/gjpicker", "followers_url": "https://api.github.com/users/gjpicker/followers", "following_url": "https://api.github.com/users/gjpicker/following{/other_user}", "gists_url": "https://api.github.com/users/gjpicker/gists{/gist_id}", "starred_url": "https://api.github.com/users/gjpicker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gjpicker/subscriptions", "organizations_url": "https://api.github.com/users/gjpicker/orgs", "repos_url": "https://api.github.com/users/gjpicker/repos", "events_url": "https://api.github.com/users/gjpicker/events{/privacy}", "received_events_url": "https://api.github.com/users/gjpicker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, {"login": "agarwal-ashish", "id": 19335798, "node_id": "MDQ6VXNlcjE5MzM1Nzk4", "avatar_url": "https://avatars3.githubusercontent.com/u/19335798?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agarwal-ashish", "html_url": "https://github.com/agarwal-ashish", "followers_url": "https://api.github.com/users/agarwal-ashish/followers", "following_url": "https://api.github.com/users/agarwal-ashish/following{/other_user}", "gists_url": "https://api.github.com/users/agarwal-ashish/gists{/gist_id}", "starred_url": "https://api.github.com/users/agarwal-ashish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agarwal-ashish/subscriptions", "organizations_url": "https://api.github.com/users/agarwal-ashish/orgs", "repos_url": "https://api.github.com/users/agarwal-ashish/repos", "events_url": "https://api.github.com/users/agarwal-ashish/events{/privacy}", "received_events_url": "https://api.github.com/users/agarwal-ashish/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-20T11:46:27Z", "updated_at": "2020-03-10T04:02:30Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow):  No\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- TensorFlow installed from (source or\r\nbinary):  pip install tensorflow-gpu==1.15.0\r\n\r\n[tf_env.txt](https://github.com/tensorflow/tensorflow/files/4230518/tf_env.txt)\r\n\r\n```\r\npython -c \"import tensorflow as tf ;print (tf.__version__)\"\r\n1.15.0\r\n```\r\n```\r\npython -c \"import tensorflow as tf ;print ( tf.test.gpu_device_name())\"  \r\n\r\n Found device 0 with properties: \r\nname: Tesla V100-SXM2-32GB major: 7 minor: 0 memoryClockRate(GHz): 1.53\r\n\r\nCreated TensorFlow device (/device:GPU:0 with 30555 MB memory) -> physical GPU (device: 0, name: Tesla V100-SXM2-32GB, pci bus id: 0000:8a:00.0, compute capability: 7.0)\r\n```\r\n\r\n**Describe the current behavior**\r\n```\r\nCUDA_VISIBLE_DEVICES=-1 python gmm_test.py  GMMTest.test_fit\r\nok!\r\n```\r\n```\r\nCUDA_VISIBLE_DEVICES=0 python gmm_test.py  GMMTest.test_fit\r\n\r\nerror:Original stack trace for 'Cholesky': \r\n```\r\n\r\n**Describe the expected behavior**\r\nexpect  The Official code([gem_test.py](https://github.com/tensorflow/tensorflow/blob/r1.15/tensorflow/contrib/factorization/python/ops/gmm_test.py)) should  pass  the Unit-test in GPU mode\r\n```\r\nCUDA_VISIBLE_DEVICES=0 python gmm_test.py  GMMTest.test_fit\r\nok!\r\n```\r\n**Standalone code to reproduce the issue** \r\nProvide a reproducible test case that is the bare minimum necessary to generate\r\nthe problem. If possible, please share a link to Colab/Jupyter/any notebook.\r\n```\r\nwget https://raw.githubusercontent.com/tensorflow/tensorflow/r1.15/tensorflow/contrib/factorization/python/ops/gmm_test.py -O \"gmm_test.py\"\r\n\r\nCUDA_VISIBLE_DEVICES=0 python gmm_test.py  GMMTest.test_fit\r\n\r\n```\r\n\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n[python_trace_err.log ](https://github.com/tensorflow/tensorflow/files/4230533/python_trace_err.log), which is python back_trace info\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36926", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36926/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36926/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36926/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36926", "id": 568218760, "node_id": "MDU6SXNzdWU1NjgyMTg3NjA=", "number": 36926, "title": "Array Relu, which is an input to the Conv operator producing the output array conv2d_1/BiasAdd, is lacking min/max data, which is necessary for quantization", "user": {"login": "shubham894", "id": 14280125, "node_id": "MDQ6VXNlcjE0MjgwMTI1", "avatar_url": "https://avatars3.githubusercontent.com/u/14280125?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shubham894", "html_url": "https://github.com/shubham894", "followers_url": "https://api.github.com/users/shubham894/followers", "following_url": "https://api.github.com/users/shubham894/following{/other_user}", "gists_url": "https://api.github.com/users/shubham894/gists{/gist_id}", "starred_url": "https://api.github.com/users/shubham894/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shubham894/subscriptions", "organizations_url": "https://api.github.com/users/shubham894/orgs", "repos_url": "https://api.github.com/users/shubham894/repos", "events_url": "https://api.github.com/users/shubham894/events{/privacy}", "received_events_url": "https://api.github.com/users/shubham894/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-02-20T11:00:24Z", "updated_at": "2020-03-10T23:48:11Z", "closed_at": null, "author_association": "NONE", "body": "Hi,\r\nI am facing the following issue while converting my Frozen graph(.pb) to tflite \r\n\r\nArray Relu, which is an input to the Conv operator producing the output array conv2d_1/BiasAdd, is lacking min/max data, which is necessary for quantization. If accuracy matters, either target a non-quantized output format, or run quantized training with your model from a floating point checkpoint to change the input graph to contain min/max information. If you don't care about accuracy, you can pass --default_ranges_min= and --default_ranges_max= for easy experimentation.\r\nFatal Python error: Aborted\r\n\r\nCurrent thread 0x00007f637125f740 (most recent call first):\r\n  File \"/home/shubhamsingh/miniconda3/lib/python3.7/site-packages/tensorflow/lite/toco/python/toco_from_protos.py\", line 33 in execute\r\n  File \"/home/shubhamsingh/miniconda3/lib/python3.7/site-packages/absl/app.py\", line 250 in _run_main\r\n  File \"/home/shubhamsingh/miniconda3/lib/python3.7/site-packages/absl/app.py\", line 299 in run\r\n  File \"/home/shubhamsingh/miniconda3/lib/python3.7/site-packages/tensorflow/python/platform/app.py\", line 40 in run\r\n  File \"/home/shubhamsingh/miniconda3/lib/python3.7/site-packages/tensorflow/lite/toco/python/toco_from_protos.py\", line 59 in main\r\n  File \"/home/shubhamsingh/miniconda3/bin/toco_from_protos\", line 8 in <module>\r\nAborted (core dumped)\r\n\r\n\r\nI have used following script to convert the model\r\ntflite_convert --output_file=mode_new_yoyo1.tflite --graph_def_file=frozen_model.pb --inference_type=QUANTIZED_UINT8 --input_arrays=input_1 --output_arrays=Dense1/Softmax,Dense2/Softmax --mean_values=0 --std_dev_values=255\r\n\r\n\r\nI have used WideResnet model with two output node."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36919", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36919/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36919/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36919/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36919", "id": 568114745, "node_id": "MDU6SXNzdWU1NjgxMTQ3NDU=", "number": 36919, "title": "Memory leak in finalizing GeneratorDataset iterator", "user": {"login": "Mauhing", "id": 42713174, "node_id": "MDQ6VXNlcjQyNzEzMTc0", "avatar_url": "https://avatars3.githubusercontent.com/u/42713174?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mauhing", "html_url": "https://github.com/Mauhing", "followers_url": "https://api.github.com/users/Mauhing/followers", "following_url": "https://api.github.com/users/Mauhing/following{/other_user}", "gists_url": "https://api.github.com/users/Mauhing/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mauhing/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mauhing/subscriptions", "organizations_url": "https://api.github.com/users/Mauhing/orgs", "repos_url": "https://api.github.com/users/Mauhing/repos", "events_url": "https://api.github.com/users/Mauhing/events{/privacy}", "received_events_url": "https://api.github.com/users/Mauhing/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-02-20T07:51:45Z", "updated_at": "2020-02-26T07:25:43Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Linux Ubuntu 18.04  \r\n- TensorFlow installed from `pipenv install tensorflow~=2.1  \r\n- TensorFlow version 2.1.0\r\n- Python version: 3.6\r\n- CUDA/cuDNN version: 10.1\r\n- GPU model and memory: 2 x (RTX 2080 Ti 11GB) \r\n\r\n\r\n**Describe the current behavior**\r\n\r\n`tf.keras.preprocessing.image.ImageDataGenerator` output warning message `Error occurred when finalizing GeneratorDataset iterator: Cancelled: Operation was canceled` when I am using `tf.keras.model.fit(..., worker = 10)` start to train to next epoch. The warning is gone when `worker = 1`. However, the warning does not seem to affect the result. \r\n\r\nIn #35100, people tend to mean the warning is superfluous and spurious and the warning has been removed in tf-nightly. But after my usage case, I believe the warning is correct. I have infinite models to be trained one by one (generated by a genetic algorithm). When `tf.keras.model.fit(..., worker = 10)` the error message print out and the memory does not get freed in the next epoch. After training a few models.  All the memory is occupied and the process gets killed. It does not happen when `worker=1` the memory gets freed for each epoch.\r\n\r\nI have try tf-nightly, The error message is removed but the memory problem is still there. \r\n\r\n**Describe the expected behavior**\r\nIt should free the memory for every epoch. \r\n\r\n**Code to reproduce the issue** \r\nI prepare my data in the following way.\r\n`samples` is NumPy array with shape (n, 90, 90, 3). n'th image withe 90 by 90 RGB image.\r\n`labels` is NumPy array with shape (n, 2), which is yes and no. [1, 0] is yes and [0, 1] is no.\r\n\r\nI have to make a pipenv file, data set and small script for you to demonstrate the memory problem. \r\n[Download link from google drive](https://drive.google.com/file/d/1oQ1wQkY1ZXimQNBQljlMbNB4VNYjDAp7/view?usp=sharing)\r\n(300 MB)\r\n\r\nUnzip the link above and run\r\n`pipenv install`\r\n`pipenv shell`\r\n`python main.py`\r\nThen you see the warning\r\n\r\n\r\n``` python\r\ntrain_generator = data_aug.flow(samples, labels, batch_size = 64)\r\nself.model.fit(train_generator, epochs=70, max_queue_size = 64, workers = 10)\r\n```\r\n\r\n**Other info / logs**\r\nDuring these 70 epochs, you can see the memory go up for each epoch and print the error message every time between the epoch. \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36917", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36917/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36917/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36917/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36917", "id": 568100042, "node_id": "MDU6SXNzdWU1NjgxMDAwNDI=", "number": 36917, "title": "input_details shape is mismatching when converting Estimator to tflite", "user": {"login": "gurugaurav", "id": 17391031, "node_id": "MDQ6VXNlcjE3MzkxMDMx", "avatar_url": "https://avatars0.githubusercontent.com/u/17391031?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gurugaurav", "html_url": "https://github.com/gurugaurav", "followers_url": "https://api.github.com/users/gurugaurav/followers", "following_url": "https://api.github.com/users/gurugaurav/following{/other_user}", "gists_url": "https://api.github.com/users/gurugaurav/gists{/gist_id}", "starred_url": "https://api.github.com/users/gurugaurav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gurugaurav/subscriptions", "organizations_url": "https://api.github.com/users/gurugaurav/orgs", "repos_url": "https://api.github.com/users/gurugaurav/repos", "events_url": "https://api.github.com/users/gurugaurav/events{/privacy}", "received_events_url": "https://api.github.com/users/gurugaurav/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1661751498, "node_id": "MDU6TGFiZWwxNjYxNzUxNDk4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TFLiteConverter", "name": "TFLiteConverter", "color": "bfdadc", "default": false, "description": "For issues related to TFLite converter"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-20T07:18:37Z", "updated_at": "2020-03-18T21:12:34Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution :Ubuntu 18.04\r\n- TensorFlow installed from : pip\r\n- TensorFlow version : '2.2.0-dev20200218'\r\n\r\n\r\n**Command used to run the converter or code if you\u2019re using the Python API**\r\nIf possible, please share a link to Colab/Jupyter/any notebook.\r\n```python\r\nimport pandas as pd\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\ndftrain = pd.read_csv('https://storage.googleapis.com/tf-datasets/titanic/train.csv')\r\ndfeval = pd.read_csv('https://storage.googleapis.com/tf-datasets/titanic/eval.csv')\r\ny_train = dftrain.pop('survived')\r\ny_eval = dfeval.pop('survived')\r\n\r\n#create feature columns. For testing I am using only numeric ones\r\nNUMERIC_COLUMNS = ['age', 'fare']\r\nfeature_columns = []\r\nfor feature_name in NUMERIC_COLUMNS:\r\n    feature_columns.append(tf.feature_column.numeric_column(key=feature_name))\r\n\r\n# Use entire batch since this is such a small dataset.\r\nNUM_EXAMPLES = len(y_train)\r\n\r\ndef make_input_fn(X, y, n_epochs=None, shuffle=False):\r\n    def input_fn():\r\n        dataset = tf.data.Dataset.from_tensor_slices((dict(X), y))\r\n        \r\n        if shuffle:\r\n            dataset = dataset.shuffle(NUM_EXAMPLES)\r\n        \r\n        # For training, cycle thru dataset as many times as need (n_epochs=None).\r\n        dataset = dataset.repeat(n_epochs)\r\n        # In memory training doesn't use batching.\r\n        dataset = dataset.batch(NUM_EXAMPLES)\r\n        return dataset\r\n    return input_fn\r\n\r\n# Training and evaluation input functions.\r\ntrain_input_fn = make_input_fn(dftrain[NUMERIC_COLUMNS], y_train)\r\neval_input_fn = make_input_fn(dfeval[NUMERIC_COLUMNS], y_eval, shuffle=False, n_epochs=1)\r\n\r\nlinear_est = tf.estimator.LinearClassifier(feature_columns)\r\n\r\n# Train model.\r\nlinear_est.train(train_input_fn, max_steps=100)\r\n\r\n# Evaluation.\r\nresult = linear_est.evaluate(eval_input_fn)\r\n\r\nserving_input_fn = tf.estimator.export.build_parsing_serving_input_receiver_fn(\r\n  tf.feature_column.make_parse_example_spec(feature_columns))\r\n\r\nmodel_dir = 'model_data'\r\npath = linear_est.export_saved_model(model_dir, serving_input_fn)\r\n\r\nsaved_model_obj = tf.saved_model.load(export_dir=path)\r\nprint(saved_model_obj.signatures.keys())\r\n\r\n# Load the specific concrete function from the SavedModel.\r\nconcrete_func = saved_model_obj.signatures['serving_default']\r\n\r\n\r\n# Convert the model to a TFLite model.\r\nconverter = tf.lite.TFLiteConverter.from_concrete_functions([concrete_func])\r\nconverter.optimizations = [tf.lite.Optimize.DEFAULT]\r\nconverter.experimental_new_converter = True\r\nconverter.target_spec.supported_ops = [tf.lite.OpsSet.TFLITE_BUILTINS,\r\n                               tf.lite.OpsSet.SELECT_TF_OPS]\r\ntflite_model = converter.convert()\r\n\r\nopen(\"converted.tflite\", \"wb\").write(tflite_model)\r\n# Load TFLite model and allocate tensors.\r\ninterpreter = tf.lite.Interpreter(model_path=\"converted.tflite\")\r\n\r\n# Get input and output tensors.\r\ninput_details = interpreter.get_input_details()\r\noutput_details = interpreter.get_output_details()\r\n\r\nprint(input_details)\r\n```\r\n**Output is**\r\n```\r\n[{'name': 'input_example_tensor',\r\n  'index': 0,\r\n  'shape': array([1], dtype=int32),\r\n  'shape_signature': array([], dtype=int32),\r\n  'dtype': numpy.bytes_,\r\n  'quantization': (0.0, 0),\r\n  'quantization_parameters': {'scales': array([], dtype=float32),\r\n   'zero_points': array([], dtype=int32),\r\n   'quantized_dimension': 0},\r\n  'sparsity_parameters': {}}]\r\n```\r\nwhy shape is [1] if I am passing 2 feature column to train. And if it is correct, how can I predict the loaded model\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36916", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36916/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36916/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36916/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36916", "id": 568089910, "node_id": "MDU6SXNzdWU1NjgwODk5MTA=", "number": 36916, "title": "ValueError: Unable to save the object ListWrapper(...) (a list wrapper constructed to track trackable TensorFlow objects) when calling the method tf.keras.Model.save_weights", "user": {"login": "Nimoab", "id": 22731447, "node_id": "MDQ6VXNlcjIyNzMxNDQ3", "avatar_url": "https://avatars1.githubusercontent.com/u/22731447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nimoab", "html_url": "https://github.com/Nimoab", "followers_url": "https://api.github.com/users/Nimoab/followers", "following_url": "https://api.github.com/users/Nimoab/following{/other_user}", "gists_url": "https://api.github.com/users/Nimoab/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nimoab/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nimoab/subscriptions", "organizations_url": "https://api.github.com/users/Nimoab/orgs", "repos_url": "https://api.github.com/users/Nimoab/repos", "events_url": "https://api.github.com/users/Nimoab/events{/privacy}", "received_events_url": "https://api.github.com/users/Nimoab/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-02-20T06:53:53Z", "updated_at": "2020-03-10T08:48:53Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code:  yes\r\n- OS Platform and Distribution: macOS Catalina Version 10.15.3 \r\n- TensorFlow installed from: binary (using pip in conda)\r\n- TensorFlow version (use command below): v2.1.0-rc2-17-ge5bf8de410 2.1.0\r\n- Python version: Python 3.6.10 :: Anaconda, Inc.\r\n\r\nNote: probably related to this closed issue https://github.com/tensorflow/tensorflow/issues/35075\r\n\r\n**Describe the current behavior**\r\nWhile saving a model `tf.keras.Model` with the function `save_weights`, the program raises the following error (full trace in the log section):\r\n\r\n> ValueError: Unable to save the object ListWrapper([ListWrapper([<tf.Variable 'model_32/dense_4/kernel:0' ...)>,  ...]), ListWrapper([<tf.Variable 'model_32/dense_6/kernel:0' ...)>, ...])]) (a list wrapper constructed to track trackable TensorFlow objects). A list element was replaced (\\_\\_setitem__, \\_\\_setslice__), deleted (\\_\\_delitem__, \\_\\_delslice__), or moved (sort). In order to support restoration on object creation, tracking is exclusively for append-only data structures.\r\n>\r\n>If you don't need this list checkpointed, wrap it in a tf.contrib.checkpoint.NoDependency object; it will be automatically un-wrapped and subsequently ignored.\r\n\r\nNote that the model can be saved before updating the model's variables and the update works as expected. However once updated, if I try to save the model, it will crash.\r\n\r\n**Describe the expected behavior**\r\n\r\n1. The model should be saved without raising error\r\n2. There shouldn't be any reference to `tf.contrib.checkpoint.NoDependency` as contrib is not available in TF2.\r\n\r\n**Standalone code to reproduce the issue** \r\n\r\n```python\r\nimport tensorflow as tf\r\n\r\nclass Model(tf.keras.Model):\r\n    \r\n    @property\r\n    def groupedVariables(self):\r\n        if self._var is None:\r\n            self._var = []\r\n            for denses in self._denses:\r\n                self._var.append([])\r\n                for d in denses:\r\n                    self._var[-1] = self._var[-1] + d.trainable_variables                    \r\n        return self._var\r\n    ## ------------------------------------------------------------------------\r\n    def __init__(self, ** kwargs):\r\n        super(Model, self).__init__(** kwargs)\r\n\r\n        self._optimizers = []\r\n        self._denses     = []\r\n        self._var        = None\r\n        for copy in range(2):\r\n            self._optimizers.append(tf.keras.optimizers.Adam())\r\n            self._denses    .append([ tf.keras.layers.Dense(s) for s in [2,1]])\r\n    ## ------------------------------------------------------------------------\r\n    def call(self, x):\r\n        y = []    \r\n        for denses in self._denses:\r\n            yy = x\r\n            for d in denses: yy = d(yy)\r\n            y.append(yy) \r\n        return y\r\n    ## ------------------------------------------------------------------------\r\n    def update(self, x, t):\r\n        loss = []\r\n        with tf.GradientTape() as tape:\r\n            yy   = self(x)\r\n            for y in zip(yy):\r\n                y = y[0]\r\n                l = tf.reduce_mean((t - y) ** 2)\r\n                loss.append(l)\r\n\r\n        var  = self.groupedVariables\r\n        grad = tape.gradient(loss, var) \r\n        for g,v,o in zip(grad, var, self._optimizers):\r\n            o.apply_gradients(zip(g,v))\r\n## ----------------------------------------------------------------------------\r\nm = Model()        \r\nx = tf.zeros(shape = [1, 2], dtype = tf.float32)\r\n\r\nprint(\"Simple run then save ... \", end = \"\")\r\nm(x)\r\nm.save_weights(\"TMP/model\") ## <== This works\r\nprint(\"done\")\r\n\r\nprint(\"Update then save ....... \", end = \"\")\r\nm.update(x, 0)\r\nm.save_weights(\"TMP/model\") ## <== This craches\r\nprint(\"done\")\r\n```\r\n\r\n**Other info / logs**\r\n```\r\nThe full error trace\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-62-6d7f6f1860e7> in <module>\r\n     60 print(\"Update then save ....... \", end = \"\")\r\n     61 m.update(x, 0)\r\n---> 62 m.save_weights(\"TMP/model\") ## <== This craches\r\n     63 print(\"done\")\r\n\r\n~usr/local/lib/python3.6/dist-packages/tensorflow_core/python/keras/engine/network.py in save_weights(self, filepath, overwrite, save_format)\r\n   1121              'saved.\\n\\nConsider using a TensorFlow optimizer from `tf.train`.')\r\n   1122             % (optimizer,))\r\n-> 1123       self._trackable_saver.save(filepath, session=session)\r\n   1124       # Record this checkpoint so it's visible from tf.train.latest_checkpoint.\r\n   1125       checkpoint_management.update_checkpoint_state_internal(\r\n\r\n~usr/local/lib/python3.6/dist-packages/tensorflow_core/python/training/tracking/util.py in save(self, file_prefix, checkpoint_number, session)\r\n   1166     file_io.recursive_create_dir(os.path.dirname(file_prefix))\r\n   1167     save_path, new_feed_additions = self._save_cached_when_graph_building(\r\n-> 1168         file_prefix=file_prefix_tensor, object_graph_tensor=object_graph_tensor)\r\n   1169     if new_feed_additions:\r\n   1170       feed_dict.update(new_feed_additions)\r\n\r\n~usr/local/lib/python3.6/dist-packages/tensorflow_core/python/training/tracking/util.py in _save_cached_when_graph_building(self, file_prefix, object_graph_tensor)\r\n   1106     (named_saveable_objects, graph_proto,\r\n   1107      feed_additions) = self._gather_saveables(\r\n-> 1108          object_graph_tensor=object_graph_tensor)\r\n   1109     if (self._last_save_object_graph != graph_proto\r\n   1110         # When executing eagerly, we need to re-create SaveableObjects each time\r\n\r\n~usr/local/lib/python3.6/dist-packages/tensorflow_core/python/training/tracking/util.py in _gather_saveables(self, object_graph_tensor)\r\n   1074     \"\"\"Wraps _serialize_object_graph to include the object graph proto.\"\"\"\r\n   1075     (named_saveable_objects, graph_proto,\r\n-> 1076      feed_additions) = self._graph_view.serialize_object_graph()\r\n   1077     if object_graph_tensor is None:\r\n   1078       with ops.device(\"/cpu:0\"):\r\n\r\n~usr/local/lib/python3.6/dist-packages/tensorflow_core/python/training/tracking/graph_view.py in serialize_object_graph(self)\r\n    377       ValueError: If there are invalid characters in an optimizer's slot names.\r\n    378     \"\"\"\r\n--> 379     trackable_objects, path_to_root = self._breadth_first_traversal()\r\n    380     return self._serialize_gathered_objects(\r\n    381         trackable_objects, path_to_root)\r\n\r\n~usr/local/lib/python3.6/dist-packages/tensorflow_core/python/training/tracking/graph_view.py in _breadth_first_traversal(self)\r\n    197             % (current_trackable,))\r\n    198       bfs_sorted.append(current_trackable)\r\n--> 199       for name, dependency in self.list_dependencies(current_trackable):\r\n    200         if dependency not in path_to_root:\r\n    201           path_to_root[dependency] = (\r\n\r\n~usr/local/lib/python3.6/dist-packages/tensorflow_core/python/training/tracking/graph_view.py in list_dependencies(self, obj)\r\n    157     # pylint: disable=protected-access\r\n    158     obj._maybe_initialize_trackable()\r\n--> 159     return obj._checkpoint_dependencies\r\n    160     # pylint: enable=protected-access\r\n    161 \r\n\r\n~usr/local/lib/python3.6/dist-packages/tensorflow_core/python/training/tracking/data_structures.py in _checkpoint_dependencies(self)\r\n    507            \"\\n\\nIf you don't need this list checkpointed, wrap it in a \"\r\n    508            \"tf.contrib.checkpoint.NoDependency object; it will be \"\r\n--> 509            \"automatically un-wrapped and subsequently ignored.\" % (self,)))\r\n    510     if self._external_modification:\r\n    511       raise ValueError(\r\n\r\nValueError: Unable to save the object ListWrapper([ListWrapper([<tf.Variable 'model_34/dense_12/kernel:0' shape=(2, 2) dtype=float32, numpy=\r\narray([[ 0.4429444,  1.1044892],\r\n       [ 0.515365 , -1.0957527]], dtype=float32)>, <tf.Variable 'model_34/dense_12/bias:0' shape=(2,) dtype=float32, numpy=array([0., 0.], dtype=float32)>, <tf.Variable 'model_34/dense_13/kernel:0' shape=(2, 1) dtype=float32, numpy=\r\narray([[0.5423187 ],\r\n       [0.27255356]], dtype=float32)>, <tf.Variable 'model_34/dense_13/bias:0' shape=(1,) dtype=float32, numpy=array([0.], dtype=float32)>]), ListWrapper([<tf.Variable 'model_34/dense_14/kernel:0' shape=(2, 2) dtype=float32, numpy=\r\narray([[-0.85178864,  1.0104183 ],\r\n       [ 1.1649271 ,  1.1087018 ]], dtype=float32)>, <tf.Variable 'model_34/dense_14/bias:0' shape=(2,) dtype=float32, numpy=array([0., 0.], dtype=float32)>, <tf.Variable 'model_34/dense_15/kernel:0' shape=(2, 1) dtype=float32, numpy=\r\narray([[-0.2449851 ],\r\n       [ 0.84787834]], dtype=float32)>, <tf.Variable 'model_34/dense_15/bias:0' shape=(1,) dtype=float32, numpy=array([0.], dtype=float32)>])]) (a list wrapper constructed to track trackable TensorFlow objects). A list element was replaced (__setitem__, __setslice__), deleted (__delitem__, __delslice__), or moved (sort). In order to support restoration on object creation, tracking is exclusively for append-only data structures.\r\n\r\nIf you don't need this list checkpointed, wrap it in a tf.contrib.checkpoint.NoDependency object; it will be automatically un-wrapped and subsequently ignored.\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36914", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36914/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36914/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36914/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36914", "id": 567996003, "node_id": "MDU6SXNzdWU1Njc5OTYwMDM=", "number": 36914, "title": "Models with tf.lite.Optimize cause abort() when interpreter->Invoke()", "user": {"login": "vdouet", "id": 24890569, "node_id": "MDQ6VXNlcjI0ODkwNTY5", "avatar_url": "https://avatars1.githubusercontent.com/u/24890569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vdouet", "html_url": "https://github.com/vdouet", "followers_url": "https://api.github.com/users/vdouet/followers", "following_url": "https://api.github.com/users/vdouet/following{/other_user}", "gists_url": "https://api.github.com/users/vdouet/gists{/gist_id}", "starred_url": "https://api.github.com/users/vdouet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vdouet/subscriptions", "organizations_url": "https://api.github.com/users/vdouet/orgs", "repos_url": "https://api.github.com/users/vdouet/repos", "events_url": "https://api.github.com/users/vdouet/events{/privacy}", "received_events_url": "https://api.github.com/users/vdouet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1589976566, "node_id": "MDU6TGFiZWwxNTg5OTc2NTY2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:micro", "name": "comp:micro", "color": "3e2eea", "default": false, "description": "Related to TensorFlow Lite Microcontrollers"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, {"login": "MeghnaNatraj", "id": 8790823, "node_id": "MDQ6VXNlcjg3OTA4MjM=", "avatar_url": "https://avatars0.githubusercontent.com/u/8790823?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MeghnaNatraj", "html_url": "https://github.com/MeghnaNatraj", "followers_url": "https://api.github.com/users/MeghnaNatraj/followers", "following_url": "https://api.github.com/users/MeghnaNatraj/following{/other_user}", "gists_url": "https://api.github.com/users/MeghnaNatraj/gists{/gist_id}", "starred_url": "https://api.github.com/users/MeghnaNatraj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MeghnaNatraj/subscriptions", "organizations_url": "https://api.github.com/users/MeghnaNatraj/orgs", "repos_url": "https://api.github.com/users/MeghnaNatraj/repos", "events_url": "https://api.github.com/users/MeghnaNatraj/events{/privacy}", "received_events_url": "https://api.github.com/users/MeghnaNatraj/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-02-20T01:40:54Z", "updated_at": "2020-03-03T11:36:10Z", "closed_at": null, "author_association": "NONE", "body": "@tensorflow/micro\r\n\r\n**System information**\r\n- Host OS Platform and Distribution (e.g., Linux Ubuntu 16.04): MacOS Catalina 10.15.2\r\n- TensorFlow installed from (source or binary): Installed with pip `pip install --upgrade tensorflow`\r\n- Tensorflow version (commit SHA if source): Version 2.1.0 and TFLITE_SCHEMA_VERSION (3)\r\n- Target platform (e.g. Arm Mbed OS, Arduino Nano 33 etc.): ESP32\r\n\r\n**Describe the problem**\r\n\r\nWhen using a Tensorflow Lite converted model with `tf.lite.Optimize` the ESP32 will reboot (abort()) if `interpreter->Invoke()` is called for inference. \r\n\r\nHowever if we convert the exact same model without using `tf.lite.Optimize` the inference will run just fine.\r\n\r\n**Please provide the exact sequence of commands/steps when you ran into the problem**\r\n\r\nTraining and converting a model:\r\n\r\n```python\r\n#Converting a simple model.\r\nmodel = Sequential()\r\nmodel.add(Conv1D(filters=64, kernel_size=3, activation='relu', input_shape=(10,6)))\r\nmodel.add(Conv1D(filters=64, kernel_size=3, activation='relu'))\r\nmodel.add(Dropout(0.5))\r\nmodel.add(MaxPooling1D(pool_size=2))\r\nmodel.add(Flatten())\r\nmodel.add(Dense(100, activation='relu'))\r\nmodel.add(Dense(y_train.shape[1], activation='softmax'))\r\nmodel.compile(loss='categorical_crossentropy', optimizer='adam', metrics=['accuracy'])\r\nmodel.fit(X_train, y_train, epochs=5, batch_size=32, verbose=2)\r\n\r\nconverter = lite.TFLiteConverter.from_keras_model(model)\r\n\r\n#The problem is caused by the following line\r\nconverter.optimizations = [lite.Optimize.DEFAULT]\r\n\r\ntfmodel = converter.convert()\r\nopen(PATH+'/model.tflite',\"wb\").write(tfmodel)\r\n```\r\n\r\nConverting to C array:\r\n`xxd -i converted_model.tflite > model_data.cc`\r\n\r\nIn ESP32:\r\n\r\n```c\r\n//abort() when:\r\nif(interpreter->Invoke() != kTfLiteOk) {\r\n        Serial.println(\"There was an error invoking the interpreter!\");\r\n        return;\r\n        }\r\n```\r\n\r\nThe inference will run just fine if we convert the same model without `converter.optimizations = [lite.Optimize.DEFAULT]`\r\n\r\nI tried 'DEFAULT', 'OPTIMIZE_FOR_SIZE', and 'OPTIMIZE_FOR_LATENCY' same problem every time.\r\nI also tried using `converter.experimental_new_converter = True` but it did not work.\r\n\r\nHere is the trace from the ESP32:\r\n```\r\nabort() was called at PC 0x400ddd39 on core 1\r\n\r\nBacktrace: 0x4008c49c:0x3ffb1e00 0x4008c6cd:0x3ffb1e20 0x400ddd39:0x3ffb1e40 0x400de09d:0x3ffb1e90 0x400e60ca:0x3ffb1f70 0x400d2a0d:0x3ffb1f90 0x400edf0d:0x3ffb1fb0 0x40088bd9:0x3ffb1fd0\r\n\r\nRebooting...\r\nets Jun  8 2016 00:22:57\r\n\r\nrst:0xc (SW_CPU_RESET),boot:0x13 (SPI_FAST_FLASH_BOOT)\r\nconfigsip: 0, SPIWP:0xee\r\nclk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00\r\nmode:DIO, clock div:1\r\nload:0x3fff0018,len:4\r\nload:0x3fff001c,len:1216\r\nho 0 tail 12 room 4\r\nload:0x40078000,len:9720\r\nho 0 tail 12 room 4\r\nload:0x40080400,len:6352\r\nentry 0x400806b8\r\n```\r\nEdit: Adding decoded stack result\r\n\r\n```\r\nDecoding stack results\r\n0x4008c49c: invoke_abort at /home/runner/work/esp32-arduino-lib-builder/esp32-arduino-lib-builder/esp-idf/components/esp32/panic.c line 155\r\n0x4008c6cd: abort at /home/runner/work/esp32-arduino-lib-builder/esp32-arduino-lib-builder/esp-idf/components/esp32/panic.c line 170\r\n\r\n# Error comes from here:\r\n0x400ddd39: tflite::reference_integer_ops::FullyConnected(tflite::FullyConnectedParams const&, tflite::RuntimeShape const&, signed char const*, tflite::RuntimeShape const&, signed char const*, tflite::RuntimeShape const&, int const*, tflite::RuntimeShape const&, signed char*) at lib/tfmicro/tensorflow/lite/kernels/internal/reference/integer_ops/fully_connected.h line 35\r\n0x400de09d: tflite::ops::micro::fully_connected::Eval(TfLiteContext*, TfLiteNode*) at lib/tfmicro/tensorflow/lite/micro/kernels/fully_connected.cc line 102\r\n0x400e60ca: tflite::MicroInterpreter::Invoke() at lib/tfmicro/tensorflow/lite/micro/micro_interpreter.cc line 190\r\n\r\n0x400d2a0d: loop() at /Users/vdouet/Deep Learning/HAR_ESP32_Tensorflow/Firmware/src/main.ino line 560\r\n0x400edf0d: loopTask(void*) at /Users/vdouet/.platformio/packages/framework-arduinoespressif32/cores/esp32/main.cpp line 17\r\n0x40088bd9: vPortTaskWrapper at /home/runner/work/esp32-arduino-lib-builder/esp32-arduino-lib-builder/esp-idf/components/freertos/port.c line 143\r\n```\r\n\r\nI tried using different models with different input shapes, even the same one from `examples/magic_wand` but every time the ESP32 will abort() when it reaches `interpreter->Invoke()`.\r\n\r\nEdit for completeness:\r\n\r\nThe optimized converted models work absolutely fine using Tensorflow Lite with Python3:\r\n```python\r\ninterpreter = tf.lite.Interpreter(model_path=PATH+\"/model.tflite\")\r\ninterpreter.allocate_tensors()\r\n\r\ninput_details = interpreter.get_input_details()\r\noutput_details = interpreter.get_output_details()\r\n\r\ninput_shape = input_details[0]['shape']\r\ninput_data = np.array(np.random.random_sample(input_shape), dtype=np.float32)\r\n\r\ninterpreter.set_tensor(input_details[0]['index'], input_data)\r\ninterpreter.invoke()\r\n```\r\n\r\nBest regards,\r\nVictor"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36911", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36911/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36911/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36911/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36911", "id": 567943916, "node_id": "MDU6SXNzdWU1Njc5NDM5MTY=", "number": 36911, "title": "tensorflow.python.ops.linalg.sparse.matmul crashes when inputs have different rank, but only if either is a CSRSparseMatrix", "user": {"login": "danielegrattarola", "id": 11634240, "node_id": "MDQ6VXNlcjExNjM0MjQw", "avatar_url": "https://avatars0.githubusercontent.com/u/11634240?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danielegrattarola", "html_url": "https://github.com/danielegrattarola", "followers_url": "https://api.github.com/users/danielegrattarola/followers", "following_url": "https://api.github.com/users/danielegrattarola/following{/other_user}", "gists_url": "https://api.github.com/users/danielegrattarola/gists{/gist_id}", "starred_url": "https://api.github.com/users/danielegrattarola/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danielegrattarola/subscriptions", "organizations_url": "https://api.github.com/users/danielegrattarola/orgs", "repos_url": "https://api.github.com/users/danielegrattarola/repos", "events_url": "https://api.github.com/users/danielegrattarola/events{/privacy}", "received_events_url": "https://api.github.com/users/danielegrattarola/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-20T00:01:33Z", "updated_at": "2020-02-20T11:48:19Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code: yes\r\n- OS Platform and Distribution: Linux Ubuntu 16.04 \r\n- TensorFlow installed from: binary\r\n- TensorFlow version (use command below): v2.1.0-rc2-17-ge5bf8de 2.1.0\r\n- Python version: 3.7.5\r\n- CUDA/cuDNN version: 10.2/7.6.4\r\n- GPU model and memory: Nvidia GeForce GTX 1050 4GB\r\n\r\n**Describe the current behavior**\r\n`tensorflow.python.ops.linalg.sparse.matmul` works for dense inputs of rank 2 and 3, or 3 and 2, but crashes if either of the inputs is a `CSRSparseMatrix`.\r\n\r\n**Describe the expected behavior**\r\n`tensorflow.python.ops.linalg.sparse.matmul` works for inputs of rank 2/3, or 3/2, and for any combination of dense/sparse inputs.\r\n\r\n**Code to reproduce the issue**\r\n\r\n```python\r\nimport numpy as np\r\nfrom tensorflow.python.ops.linalg.sparse import sparse as tfsp\r\n\r\na = np.ones((3, 3))\r\nb = np.ones((5, 3, 3))\r\na_sp = tfsp.CSRSparseMatrix(a)\r\nb_sp = tfsp.CSRSparseMatrix(b)\r\n\r\n# This works fine\r\noutput = tfsp.matmul(a, b)\r\nprint(output.shape)\r\n\r\n# These crash\r\noutput_sp = tfsp.matmul(a_sp, b)\r\noutput_sp = tfsp.matmul(a, b_sp)\r\noutput_sp = tfsp.matmul(a_sp, b_sp)\r\n```\r\n\r\n**Other info / logs** \r\n\r\nIf only one of the two inputs is sparse, the stack trace looks like this: \r\n\r\n```\r\n2020-02-19 18:51:52.547579: W tensorflow/core/framework/op_kernel.cc:1655] OP_REQUIRES failed at mat_mul_op.cc:507 : Invalid argument: Ranks of a and b must match, saw: 0x7ffc085957fc vs. 3.\r\n---------------------------------------------------------------------------\r\nInvalidArgumentError                      Traceback (most recent call last)\r\n<ipython-input-5-256f5bb49d4d> in <module>\r\n----> 1 output_sp = tfsp.matmul(a_sp, b)\r\n\r\n~/dev/tf2/lib/python3.7/site-packages/tensorflow_core/python/ops/linalg/sparse/sparse_csr_matrix_ops.py in matmul(a, b, transpose_a, transpose_b, adjoint_a, adjoint_b, name)\r\n    220           transpose_b=transpose_b,\r\n    221           adjoint_a=adjoint_a,\r\n--> 222           adjoint_b=adjoint_b)\r\n    223     else:\r\n    224       # opA(A) . opB(B) = t(nopB(B) . nopA(A))\r\n\r\n~/dev/tf2/lib/python3.7/site-packages/tensorflow_core/python/ops/linalg/sparse/gen_sparse_csr_matrix_ops.py in sparse_matrix_mat_mul(a, b, transpose_a, transpose_b, adjoint_a, adjoint_b, transpose_output, conjugate_output, name)\r\n    480         raise\r\n    481     except _core._NotOkStatusException as e:\r\n--> 482       _ops.raise_from_not_ok_status(e, name)\r\n    483   # Add nodes to the TensorFlow graph.\r\n    484   if transpose_a is None:\r\n\r\n~/dev/tf2/lib/python3.7/site-packages/tensorflow_core/python/framework/ops.py in raise_from_not_ok_status(e, name)\r\n   6604   message = e.message + (\" name: \" + name if name is not None else \"\")\r\n   6605   # pylint: disable=protected-access\r\n-> 6606   six.raise_from(core._status_to_exception(e.code, message), None)\r\n   6607   # pylint: enable=protected-access\r\n   6608 \r\n\r\n~/dev/tf2/lib/python3.7/site-packages/six.py in raise_from(value, from_value)\r\n\r\nInvalidArgumentError: Ranks of a and b must match, saw: 0x7ffc085957fc vs. 3. [Op:SparseMatrixMatMul]\r\n\r\n```\r\n\r\nIf both inputs are sparse:\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nInvalidArgumentError                      Traceback (most recent call last)\r\n<ipython-input-4-9a25f9aa5868> in <module>\r\n----> 1 output_sp = tfsp.matmul(a_sp, b_sp)\r\n\r\n~/dev/tf2/lib/python3.7/site-packages/tensorflow_core/python/ops/linalg/sparse/sparse_csr_matrix_ops.py in matmul(a, b, transpose_a, transpose_b, adjoint_a, adjoint_b, name)\r\n    204           adjoint_a=adjoint_a,\r\n    205           adjoint_b=adjoint_b,\r\n--> 206           type=a.dtype)\r\n    207 \r\n    208       # In eager mode, shape inference functions are not called, and the output\r\n\r\n~/dev/tf2/lib/python3.7/site-packages/tensorflow_core/python/ops/linalg/sparse/gen_sparse_csr_matrix_ops.py in sparse_matrix_sparse_mat_mul(a, b, type, transpose_a, transpose_b, adjoint_a, adjoint_b, name)\r\n   1281         raise\r\n   1282     except _core._NotOkStatusException as e:\r\n-> 1283       _ops.raise_from_not_ok_status(e, name)\r\n   1284   # Add nodes to the TensorFlow graph.\r\n   1285   type = _execute.make_type(type, \"type\")\r\n\r\n~/dev/tf2/lib/python3.7/site-packages/tensorflow_core/python/framework/ops.py in raise_from_not_ok_status(e, name)\r\n   6604   message = e.message + (\" name: \" + name if name is not None else \"\")\r\n   6605   # pylint: disable=protected-access\r\n-> 6606   six.raise_from(core._status_to_exception(e.code, message), None)\r\n   6607   # pylint: enable=protected-access\r\n   6608 \r\n\r\n~/dev/tf2/lib/python3.7/site-packages/six.py in raise_from(value, from_value)\r\n\r\nInvalidArgumentError: Inner product dimensions of A and B do not agree.  Shapes are: [3,3] vs. [5,3,3] [Op:SparseMatrixSparseMatMul]\r\n\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36909", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36909/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36909/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36909/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36909", "id": 567824374, "node_id": "MDU6SXNzdWU1Njc4MjQzNzQ=", "number": 36909, "title": "Source build of TensorFlow 2.0 with 0.26.1 bazel fails at C++ compilation of rule '@nccl_archive//:device_lib'.", "user": {"login": "harshad16", "id": 14028058, "node_id": "MDQ6VXNlcjE0MDI4MDU4", "avatar_url": "https://avatars0.githubusercontent.com/u/14028058?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harshad16", "html_url": "https://github.com/harshad16", "followers_url": "https://api.github.com/users/harshad16/followers", "following_url": "https://api.github.com/users/harshad16/following{/other_user}", "gists_url": "https://api.github.com/users/harshad16/gists{/gist_id}", "starred_url": "https://api.github.com/users/harshad16/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harshad16/subscriptions", "organizations_url": "https://api.github.com/users/harshad16/orgs", "repos_url": "https://api.github.com/users/harshad16/repos", "events_url": "https://api.github.com/users/harshad16/events{/privacy}", "received_events_url": "https://api.github.com/users/harshad16/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1205657510, "node_id": "MDU6TGFiZWwxMjA1NjU3NTEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:centos", "name": "subtype:centos", "color": "b619ea", "default": false, "description": "Centos Build/Installation issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2020-02-19T20:24:43Z", "updated_at": "2020-02-27T20:14:45Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): centos6\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: NA\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: r2.0\r\n- Python version: py3.6\r\n- Installed using virtualenv? pip? conda?: pip \r\n- Bazel version (if compiling from source): 0.26.1\r\n- GCC/Compiler version (if compiling from source): 7.3.1 (devtoolset-7) \r\n- CUDA/cuDNN version: 10.0 / cudnn 7\r\n- GPU model and memory:\r\n\r\n**Describe the problem**\r\nI m trying to build TensorFlow from source, with TF_CUDA_NEED=1 and TF_CUDA_PATHS set to the `/usr/local/cuda` which points to Cuda 10.0, NO environment variable for nccl were set TF_NCCL_VERSION, NCCL_INSTALL_PATHS. when the bazel build command is run is fails with * C++ compilation of rule '@nccl_archive//:device_lib' failed* error output.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n- Install packages centos-release-scl \r\n- Install devtoolset and python\r\n`yum install -y rh-python36 devtoolset-7`\r\n- install pip packages\r\n- build bazel 0.26.1 from source.\r\n- clone TensorFlow from branch r2.0 and run configure script.\r\n- execute bazel build.\r\n\r\n**Any other info / logs**\r\n```\r\nERROR: /home/default/.cache/bazel/_bazel_root/2c92b5569ddded7b3a6bd5e139451b60/external/nccl_archive/BUILD.bazel:53:1: C++ compilation of rule '@nccl_archive//:device_lib' failed (Exit 1) gcc failed: error executing command \r\n  (cd /home/default/.cache/bazel/_bazel_root/2c92b5569ddded7b3a6bd5e139451b60/sandbox/processwrapper-sandbox/2437/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    LD_LIBRARY_PATH=/usr/local/cuda/extras/CUPTI/lib64:/usr/local/cuda/lib64/stubs:/opt/rh/rh-python36/root/usr/lib64/:/opt/rh/rh-python36/root/usr/include:/opt/rh/rh-python36/root/usr/include/python3.6m/:/usr/local/lib:/opt/rh/devtoolset-7/root/usr/lib64:/opt/rh/devtoolset-7/root/usr/lib:/opt/rh/devtoolset-7/root/usr/lib64/dyninst:/opt/rh/devtoolset-7/root/usr/lib/dyninst:/opt/rh/devtoolset-7/root/usr/lib64:/opt/rh/devtoolset-7/root/usr/lib:/usr/local/lib:/usr/local/nvidia/lib:/usr/local/nvidia/lib64 \\\r\n    PATH=/opt/app-root/output/:/home/default/bin:/opt/rh/rh-python36/root/usr/bin:/opt/rh/devtoolset-7/root/usr/bin:/opt/app-root/bin:/usr/local/bin:/opt/app-root/src/.local/bin/:/usr/local/nvidia/bin:/usr/local/cuda/bin:/opt/app-root/src/bin:/opt/app-root/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/home/default/.local/bin \\\r\n    PWD=/proc/self/cwd \\\r\n  /opt/rh/devtoolset-7/root/usr/bin/gcc -U_FORTIFY_SOURCE -fstack-protector -Wall -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 '-D_FORTIFY_SOURCE=1' -DNDEBUG -ffunction-sections -fdata-sections '-std=c++0x' -MD -MF bazel-out/k8-opt/bin/external/nccl_archive/_objs/device_lib/max_f16_all_gather.cu.d '-frandom-seed=bazel-out/k8-opt/bin/external/nccl_archive/_objs/device_lib/max_f16_all_gather.cu.o' -iquote external/nccl_archive -iquote bazel-out/k8-opt/bin/external/nccl_archive -iquote external/local_config_cuda -iquote bazel-out/k8-opt/bin/external/local_config_cuda -Ibazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs -Ibazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/include_hdrs -Ibazel-out/k8-opt/bin/external/local_config_cuda/cuda/_virtual_includes/cuda_headers_virtual -Ibazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/src_hdrs -isystem external/local_config_cuda/cuda -isystem bazel-out/k8-opt/bin/external/local_config_cuda/cuda -isystem external/local_config_cuda/cuda/cuda/include -isystem bazel-out/k8-opt/bin/external/local_config_cuda/cuda/cuda/include -mavx -mavx512f -mavx2 -mfma '-mfpmath=both' -msse4.2 '-D_GLIBCXX_USE_CXX11_ABI=0' -fno-canonical-system-headers -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -c bazel-out/k8-opt/bin/external/nccl_archive/src/collectives/device/max_f16_all_gather.cu.cc -o bazel-out/k8-opt/bin/external/nccl_archive/_objs/device_lib/max_f16_all_gather.cu.o)\r\nExecution platform: @bazel_tools//platforms:host_platform\r\n\r\nUse --sandbox_debug to see verbose messages from the sandbox: gcc failed: error executing command \r\n  (cd /home/default/.cache/bazel/_bazel_root/2c92b5569ddded7b3a6bd5e139451b60/sandbox/processwrapper-sandbox/2437/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    LD_LIBRARY_PATH=/usr/local/cuda/extras/CUPTI/lib64:/usr/local/cuda/lib64/stubs:/opt/rh/rh-python36/root/usr/lib64/:/opt/rh/rh-python36/root/usr/include:/opt/rh/rh-python36/root/usr/include/python3.6m/:/usr/local/lib:/opt/rh/devtoolset-7/root/usr/lib64:/opt/rh/devtoolset-7/root/usr/lib:/opt/rh/devtoolset-7/root/usr/lib64/dyninst:/opt/rh/devtoolset-7/root/usr/lib/dyninst:/opt/rh/devtoolset-7/root/usr/lib64:/opt/rh/devtoolset-7/root/usr/lib:/usr/local/lib:/usr/local/nvidia/lib:/usr/local/nvidia/lib64 \\\r\n    PATH=/opt/app-root/output/:/home/default/bin:/opt/rh/rh-python36/root/usr/bin:/opt/rh/devtoolset-7/root/usr/bin:/opt/app-root/bin:/usr/local/bin:/opt/app-root/src/.local/bin/:/usr/local/nvidia/bin:/usr/local/cuda/bin:/opt/app-root/src/bin:/opt/app-root/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/home/default/.local/bin \\\r\n    PWD=/proc/self/cwd \\\r\n  /opt/rh/devtoolset-7/root/usr/bin/gcc -U_FORTIFY_SOURCE -fstack-protector -Wall -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 '-D_FORTIFY_SOURCE=1' -DNDEBUG -ffunction-sections -fdata-sections '-std=c++0x' -MD -MF bazel-out/k8-opt/bin/external/nccl_archive/_objs/device_lib/max_f16_all_gather.cu.d '-frandom-seed=bazel-out/k8-opt/bin/external/nccl_archive/_objs/device_lib/max_f16_all_gather.cu.o' -iquote external/nccl_archive -iquote bazel-out/k8-opt/bin/external/nccl_archive -iquote external/local_config_cuda -iquote bazel-out/k8-opt/bin/external/local_config_cuda -Ibazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs -Ibazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/include_hdrs -Ibazel-out/k8-opt/bin/external/local_config_cuda/cuda/_virtual_includes/cuda_headers_virtual -Ibazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/src_hdrs -isystem external/local_config_cuda/cuda -isystem bazel-out/k8-opt/bin/external/local_config_cuda/cuda -isystem external/local_config_cuda/cuda/cuda/include -isystem bazel-out/k8-opt/bin/external/local_config_cuda/cuda/cuda/include -mavx -mavx512f -mavx2 -mfma '-mfpmath=both' -msse4.2 '-D_GLIBCXX_USE_CXX11_ABI=0' -fno-canonical-system-headers -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -c bazel-out/k8-opt/bin/external/nccl_archive/src/collectives/device/max_f16_all_gather.cu.cc -o bazel-out/k8-opt/bin/external/nccl_archive/_objs/device_lib/max_f16_all_gather.cu.o)\r\nExecution platform: @bazel_tools//platforms:host_platform\r\n\r\nUse --sandbox_debug to see verbose messages from the sandbox\r\nIn file included from bazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:11:0,\r\n                 from bazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/primitives.h:11,\r\n                 from bazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/all_gather.h:8,\r\n                 from bazel-out/k8-opt/bin/external/nccl_archive/src/collectives/device/max_f16_all_gather.cu.cc:10:\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/common_kernel.h:254:0: warning: ignoring #pragma unroll  [-Wunknown-pragmas]\r\n     #pragma unroll\r\n \r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/common_kernel.h:256:0: warning: ignoring #pragma unroll  [-Wunknown-pragmas]\r\n     #pragma unroll 1\r\n \r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/common_kernel.h:259:0: warning: ignoring #pragma unroll  [-Wunknown-pragmas]\r\n     #pragma unroll\r\n \r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/common_kernel.h:261:0: warning: ignoring #pragma unroll  [-Wunknown-pragmas]\r\n     #pragma unroll 1\r\n \r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/common_kernel.h:290:0: warning: ignoring #pragma unroll  [-Wunknown-pragmas]\r\n     #pragma unroll 1\r\n \r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/common_kernel.h:301:0: warning: ignoring #pragma unroll  [-Wunknown-pragmas]\r\n     #pragma unroll 1\r\n \r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/common_kernel.h:327:0: warning: ignoring #pragma unroll  [-Wunknown-pragmas]\r\n   #pragma unroll\r\n \r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/common_kernel.h:330:0: warning: ignoring #pragma unroll  [-Wunknown-pragmas]\r\n   #pragma unroll\r\n \r\nIn file included from bazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/all_gather.h:8:0,\r\n                 from bazel-out/k8-opt/bin/external/nccl_archive/src/collectives/device/max_f16_all_gather.cu.cc:10:\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/primitives.h:154:0: warning: ignoring #pragma unroll  [-Wunknown-pragmas]\r\n     #pragma unroll 1\r\n \r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/primitives.h:456:0: warning: ignoring #pragma unroll  [-Wunknown-pragmas]\r\n     #pragma unroll 2\r\n \r\nIn file included from bazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:11:0,\r\n                 from bazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/primitives.h:11,\r\n                 from bazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/all_gather.h:8,\r\n                 from bazel-out/k8-opt/bin/external/nccl_archive/src/collectives/device/max_f16_all_gather.cu.cc:10:\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/common_kernel.h: In member function 'PackType MULTI<FUNC, double>::operator()(PackType, PackType) const':\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/common_kernel.h:170:24: error: there are no arguments to '__longlong_as_double' that depend on a template parameter, so a declaration of '__longlong_as_double' must be available [-fpermissive]\r\n     double rv = FUNC()(__longlong_as_double(x), __longlong_as_double(y));\r\n                        ^~~~~~~~~~~~~~~~~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/common_kernel.h:170:24: note: (if you use '-fpermissive', G++ will accept your code, but allowing the use of an undeclared name is deprecated)\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/common_kernel.h:170:49: error: there are no arguments to '__longlong_as_double' that depend on a template parameter, so a declaration of '__longlong_as_double' must be available [-fpermissive]\r\n     double rv = FUNC()(__longlong_as_double(x), __longlong_as_double(y));\r\n                                                 ^~~~~~~~~~~~~~~~~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/common_kernel.h:171:12: error: there are no arguments to '__double_as_longlong' that depend on a template parameter, so a declaration of '__double_as_longlong' must be available [-fpermissive]\r\n     return __double_as_longlong(rv);\r\n            ^~~~~~~~~~~~~~~~~~~~\r\nIn file included from bazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/primitives.h:11:0,\r\n                 from bazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/all_gather.h:8,\r\n                 from bazel-out/k8-opt/bin/external/nccl_archive/src/collectives/device/max_f16_all_gather.cu.cc:10:\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h: In member function 'uint32_t FuncMax<signed char>::operator()(uint32_t, uint32_t) const':\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:137:14: error: 'max' was not declared in this scope\r\n     cr.a.x = max(cx.a.x, cy.a.x);\r\n              ^~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h: In member function 'uint32_t FuncMax<unsigned char>::operator()(uint32_t, uint32_t) const':\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:160:14: error: 'max' was not declared in this scope\r\n     cr.a.x = max(cx.a.x, cy.a.x);\r\n              ^~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h: In member function 'half2 FuncSum<__half>::operator()(half2, half2) const':\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:226:10: error: '__half22float2' was not declared in this scope\r\n     fx = __half22float2(x);\r\n          ^~~~~~~~~~~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:226:10: note: suggested alternative: '__half2float'\r\n     fx = __half22float2(x);\r\n          ^~~~~~~~~~~~~~\r\n          __half2float\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:230:12: error: '__float22half2_rn' was not declared in this scope\r\n     return __float22half2_rn(fr);\r\n            ^~~~~~~~~~~~~~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:230:12: note: suggested alternative: '__floats2half2_rn'\r\n     return __float22half2_rn(fr);\r\n            ^~~~~~~~~~~~~~~~~\r\n            __floats2half2_rn\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h: In member function 'half2 FuncProd<__half>::operator()(half2, half2) const':\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:249:10: error: '__half22float2' was not declared in this scope\r\n     fx = __half22float2(x);\r\n          ^~~~~~~~~~~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:249:10: note: suggested alternative: '__half2float'\r\n     fx = __half22float2(x);\r\n          ^~~~~~~~~~~~~~\r\n          __half2float\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:253:12: error: '__float22half2_rn' was not declared in this scope\r\n     return __float22half2_rn(fr);\r\n            ^~~~~~~~~~~~~~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:253:12: note: suggested alternative: '__floats2half2_rn'\r\n     return __float22half2_rn(fr);\r\n            ^~~~~~~~~~~~~~~~~\r\n            __floats2half2_rn\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h: In member function 'half2 FuncMax<__half>::operator()(half2, half2) const':\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:269:10: error: '__half22float2' was not declared in this scope\r\n     fx = __half22float2(x);\r\n          ^~~~~~~~~~~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:269:10: note: suggested alternative: '__half2float'\r\n     fx = __half22float2(x);\r\n          ^~~~~~~~~~~~~~\r\n          __half2float\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:271:12: error: 'fmaxf' was not declared in this scope\r\n     fr.x = fmaxf(fx.x, fy.x);\r\n            ^~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:273:12: error: '__float22half2_rn' was not declared in this scope\r\n     return __float22half2_rn(fr);\r\n            ^~~~~~~~~~~~~~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:273:12: note: suggested alternative: '__floats2half2_rn'\r\n     return __float22half2_rn(fr);\r\n            ^~~~~~~~~~~~~~~~~\r\n            __floats2half2_rn\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h: In member function 'half FuncMax<__half>::operator()(half, half) const':\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:279:10: error: 'fmaxf' was not declared in this scope\r\n     fm = fmaxf(fx, fy);\r\n          ^~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h: In member function 'half2 FuncMin<__half>::operator()(half2, half2) const':\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:288:10: error: '__half22float2' was not declared in this scope\r\n     fx = __half22float2(x);\r\n          ^~~~~~~~~~~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:288:10: note: suggested alternative: '__half2float'\r\n     fx = __half22float2(x);\r\n          ^~~~~~~~~~~~~~\r\n          __half2float\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:290:12: error: 'fminf' was not declared in this scope\r\n     fr.x = fminf(fx.x, fy.x);\r\n            ^~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:290:12: note: suggested alternative: 'min'\r\n     fr.x = fminf(fx.x, fy.x);\r\n            ^~~~~\r\n            min\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:292:12: error: '__float22half2_rn' was not declared in this scope\r\n     return __float22half2_rn(fr);\r\n            ^~~~~~~~~~~~~~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:292:12: note: suggested alternative: '__floats2half2_rn'\r\n     return __float22half2_rn(fr);\r\n            ^~~~~~~~~~~~~~~~~\r\n            __floats2half2_rn\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h: In member function 'half FuncMin<__half>::operator()(half, half) const':\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:298:10: error: 'fminf' was not declared in this scope\r\n     fm = fminf(fx, fy);\r\n          ^~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/reduce_kernel.h:298:10: note: suggested alternative: 'min'\r\n     fm = fminf(fx, fy);\r\n          ^~~~~\r\n          min\r\nIn file included from bazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/primitives.h:12:0,\r\n                 from bazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/all_gather.h:8,\r\n                 from bazel-out/k8-opt/bin/external/nccl_archive/src/collectives/device/max_f16_all_gather.cu.cc:10:\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/common.h: In function 'void load_parallel(void*, void*, size_t, int)':\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/common.h:37:23: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\r\n   for (int o = tid; o < (size/sizeof(int)); o += blockDim.x) d[o] = s[o];\r\n                     ~~^~~~~~~~~~~~~~~~~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/common.h:37:50: error: 'blockDim' was not declared in this scope\r\n   for (int o = tid; o < (size/sizeof(int)); o += blockDim.x) d[o] = s[o];\r\n                                                  ^~~~~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/common.h:37:50: note: suggested alternative: 'flockfile'\r\n   for (int o = tid; o < (size/sizeof(int)); o += blockDim.x) d[o] = s[o];\r\n                                                  ^~~~~~~~\r\n                                                  flockfile\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/common.h:38:3: error: '__syncthreads' was not declared in this scope\r\n   __syncthreads();\r\n   ^~~~~~~~~~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/common.h:38:3: note: suggested alternative: '__thread__'\r\n   __syncthreads();\r\n   ^~~~~~~~~~~~~\r\n   __thread__\r\nIn file included from bazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/all_gather.h:8:0,\r\n                 from bazel-out/k8-opt/bin/external/nccl_archive/src/collectives/device/max_f16_all_gather.cu.cc:10:\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/primitives.h: In member function 'void ncclPrimitives<UNROLL, SLICESPERCHUNK, SLICESTEPS, T, NRECV, NSEND, FUNC>::GenericOp(const T*, T*, int, int)':\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/primitives.h:156:22: error: there are no arguments to 'max' that depend on a template parameter, so a declaration of 'max' must be available [-fpermissive]\r\n       int realSize = max(0, min(sliceSize, nelem-offset));\r\n                      ^~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/primitives.h:175:19: error: there are no arguments to '__threadfence_system' that depend on a template parameter, so a declaration of '__threadfence_system' must be available [-fpermissive]\r\n         if (SEND) __threadfence_system();\r\n                   ^~~~~~~~~~~~~~~~~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/primitives.h: In member function 'void ncclPrimitives<UNROLL, SLICESPERCHUNK, SLICESTEPS, T, NRECV, NSEND, FUNC>::loadSendConn(ncclConnInfo*, int, T*)':\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/primitives.h:218:7: error: there are no arguments to '__syncthreads' that depend on a template parameter, so a declaration of '__syncthreads' must be available [-fpermissive]\r\n       __syncthreads();\r\n       ^~~~~~~~~~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/primitives.h: In member function 'void ncclPrimitives<UNROLL, SLICESPERCHUNK, SLICESTEPS, T, NRECV, NSEND, FUNC>::saveRecvConn(int)':\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/primitives.h:227:7: error: there are no arguments to '__threadfence_system' that depend on a template parameter, so a declaration of '__threadfence_system' must be available [-fpermissive]\r\n       __threadfence_system();\r\n       ^~~~~~~~~~~~~~~~~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/primitives.h: In member function 'void ncclPrimitives<UNROLL, SLICESPERCHUNK, SLICESTEPS, T, NRECV, NSEND, FUNC>::saveSendConn(int)':\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/primitives.h:235:7: error: there are no arguments to '__threadfence_system' that depend on a template parameter, so a declaration of '__threadfence_system' must be available [-fpermissive]\r\n       __threadfence_system();\r\n       ^~~~~~~~~~~~~~~~~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/primitives.h: In constructor 'ncclPrimitives<UNROLL, SLICESPERCHUNK, SLICESTEPS, T, NRECV, NSEND, FUNC>::ncclPrimitives(int, int, int*, int*, T*, int, ncclChannel*, ncclDevComm*, uint64_t)':\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/primitives.h:245:5: error: there are no arguments to '__syncthreads' that depend on a template parameter, so a declaration of '__syncthreads' must be available [-fpermissive]\r\n     __syncthreads();\r\n     ^~~~~~~~~~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/primitives.h: In member function 'void ncclLLPrimitives<T, FUNC, NRECV, NSEND>::saveRecvConn(int)':\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/primitives.h:514:7: error: there are no arguments to '__threadfence_block' that depend on a template parameter, so a declaration of '__threadfence_block' must be available [-fpermissive]\r\n       __threadfence_block();\r\n       ^~~~~~~~~~~~~~~~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/primitives.h: In member function 'void ncclLLPrimitives<T, FUNC, NRECV, NSEND>::saveSendConn(int)':\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/primitives.h:522:7: error: there are no arguments to '__threadfence_block' that depend on a template parameter, so a declaration of '__threadfence_block' must be available [-fpermissive]\r\n       __threadfence_block();\r\n       ^~~~~~~~~~~~~~~~~~~\r\nIn file included from bazel-out/k8-opt/bin/external/nccl_archive/src/collectives/device/max_f16_all_gather.cu.cc:10:0:\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/all_gather.h: In function 'void ncclAllGatherRingKernel(CollectiveArgs*)':\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/all_gather.h:13:19: error: 'threadIdx' was not declared in this scope\r\n   const int tid = threadIdx.x;\r\n                   ^~~~~~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/all_gather.h:14:24: error: 'blockDim' was not declared in this scope\r\n   const int nthreads = blockDim.x - 1;\r\n                        ^~~~~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/all_gather.h:14:24: note: suggested alternative: 'flockfile'\r\n   const int nthreads = blockDim.x - 1;\r\n                        ^~~~~~~~\r\n                        flockfile\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/all_gather.h:17:48: error: 'blockIdx' was not declared in this scope\r\n   struct ncclChannel* channel = comm->channels+blockIdx.x;\r\n                                                ^~~~~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/all_gather.h: In function 'void ncclAllGatherRingLLKernel(CollectiveArgs*)':\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/all_gather.h:74:19: error: 'threadIdx' was not declared in this scope\r\n   const int tid = threadIdx.x;\r\n                   ^~~~~~~~~\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/all_gather.h:78:48: error: 'blockIdx' was not declared in this scope\r\n   struct ncclChannel* channel = comm->channels+blockIdx.x;\r\n                                                ^~~~~~~~\r\nIn file included from bazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/primitives.h:12:0,\r\n                 from bazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/all_gather.h:8,\r\n                 from bazel-out/k8-opt/bin/external/nccl_archive/src/collectives/device/max_f16_all_gather.cu.cc:10:\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/common.h: At global scope:\r\nbazel-out/k8-opt/bin/external/nccl_archive/_virtual_includes/device_hdrs/common.h:40:24: warning: 'void load_coll(ncclColl*, ncclColl*, int)' defined but not used [-Wunused-function]\r\n static __device__ void load_coll(struct ncclColl* localColl, struct ncclColl* hostColl, int tid) {\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36901", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36901/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36901/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36901/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36901", "id": 567631126, "node_id": "MDU6SXNzdWU1Njc2MzExMjY=", "number": 36901, "title": "tensorflow/core/grappler/optimizers/meta_optimizer.cc:561] layout failed: Invalid argument: MutableGraphView::SortTopologically error:", "user": {"login": "andreeas26", "id": 6523643, "node_id": "MDQ6VXNlcjY1MjM2NDM=", "avatar_url": "https://avatars1.githubusercontent.com/u/6523643?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andreeas26", "html_url": "https://github.com/andreeas26", "followers_url": "https://api.github.com/users/andreeas26/followers", "following_url": "https://api.github.com/users/andreeas26/following{/other_user}", "gists_url": "https://api.github.com/users/andreeas26/gists{/gist_id}", "starred_url": "https://api.github.com/users/andreeas26/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andreeas26/subscriptions", "organizations_url": "https://api.github.com/users/andreeas26/orgs", "repos_url": "https://api.github.com/users/andreeas26/repos", "events_url": "https://api.github.com/users/andreeas26/events{/privacy}", "received_events_url": "https://api.github.com/users/andreeas26/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097545273, "node_id": "MDU6TGFiZWwxMDk3NTQ1Mjcz", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:grappler", "name": "comp:grappler", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-19T15:01:42Z", "updated_at": "2020-02-21T20:43:05Z", "closed_at": null, "author_association": "NONE", "body": "Hi! I have the following message whenever I train a ConvLSTM with attention, after the samples are loaded in the buffer. The training goes on, but I haven't found anything on the internet related to this. I am not sure if its a bug, or I've made a mistake. \r\n\r\nThe complete code I am using is from [here](https://github.com/dtransposed/Paper-Implementation/tree/master/action_recognition_using_visual_attention). I suspect one of the last 3 lines of the function leads to this error. I tried debugging, but it didn't helped much.\r\n\r\n**System information**\r\nOS: Ubuntu 16.04\r\nTensorflow 2.1 installed from pip\r\nPython 3.6\r\nCUDA 10.2\r\nGPU Tesla K80, 12GB memory\r\n\r\n\r\n    `@tf.function\r\n\r\n    def train_step(self, images, labels):\r\n\r\n        loss = 0\r\n\r\n        with tf.GradientTape() as tape:\r\n\r\n            if self.network_name == 'ALSTM':\r\n                batch_feature_cube_sequence = self.network.get_batch_feature_cube_sequence(images)\r\n                hidden_state, cell_state = self.network.reset_hidden_and_cell_state(batch_feature_cube_sequence)\r\n                self.network.lstm1.initial_state = cell_state\r\n                all_attention_weights = tf.zeros((0,\r\n                                                  self.batch_size,\r\n                                                  batch_feature_cube_sequence.shape[2],\r\n                                                  batch_feature_cube_sequence.shape[2]))\r\n\r\n                for i in range(0, images.shape[1]):\r\n                    input_image = images[:, i, :, :, :]\r\n                    predictions, hidden_state, attention_weights = self.network(input_image, hidden_state)\r\n\r\n                    self.train_accuracy.update_state(labels, predictions)\r\n                    self.train_precision.update_state(labels, predictions)\r\n                    self.train_recall.update_state(labels, predictions)\r\n\r\n                    loss = loss + self.loss_object(labels, predictions)\r\n                    attention_weights = tf.expand_dims(attention_weights, 0)\r\n                    all_attention_weights = tf.concat([all_attention_weights, attention_weights], 0)\r\n\r\n                classification_loss = loss / int(images.shape[1])\r\n                attention_loss = self.attention_penalty(all_attention_weights)/ int(images.shape[1])*self.batch_size\r\n                regularization_term = tf.add_n([tf.nn.l2_loss(v) for v in self.network.trainable_variables if 'bias' not in v.name])\r\n\r\n                total_loss = classification_loss + self.penalty_coefficient*attention_loss + self.weight_decay*regularization_term\r\n\r\n            elif self.network_name == 'ConvALSTM':\r\n\r\n                hidden_state = self.network.get_initial_hidden_state(self.batch_size)\r\n                for i in range(0, images.shape[1]):\r\n                    input_image = images[:, i, :, :, :]\r\n                    predictions, hidden_state, attention_weights = self.network(input_image, hidden_state)\r\n\r\n                    self.train_accuracy.update_state(labels, predictions)\r\n                    self.train_precision.update_state(labels, predictions)\r\n                    self.train_recall.update_state(labels, predictions)\r\n\r\n                    loss = loss + self.loss_object(labels, predictions)\r\n\r\n                classification_loss = loss / int(images.shape[1])\r\n                total_loss = classification_loss\r\n\r\n        gradients = tape.gradient(total_loss, self.network.trainable_variables)\r\n        self.optimizer.apply_gradients(zip(gradients, self.network.trainable_variables))\r\n        self.train_loss.update_state(total_loss)\r\n        return total_loss`\r\n\r\n\r\n`2020-02-19 14:50:31.311596: I tensorflow/core/kernels/data/shuffle_dataset_op.cc:150] Filling up shuffle buffer (this may take a while): 464 of 1000\r\n2020-02-19 14:50:41.318354: I tensorflow/core/kernels/data/shuffle_dataset_op.cc:150] Filling up shuffle buffer (this may take a while): 926 of 1000\r\n2020-02-19 14:50:42.932254: I tensorflow/core/kernels/data/shuffle_dataset_op.cc:199] Shuffle buffer filled.\r\n2020-02-19 14:52:10.425158: E tensorflow/core/grappler/optimizers/meta_optimizer.cc:561] layout failed: Invalid argument: MutableGraphView::SortTopologically error: detected edge(s) creating cycle(s) {'Func/conv_alstm_7/conv_lst_m2d/while_grad/body/_15513/input/_27997' -> 'conv_alstm_7/conv_lst_m2d/while_grad/body/_15513/gradients/AddN', 'Func/conv_alstm_6/conv_lst_m2d/while_grad/body/_15704/input/_28113' -> 'conv_alstm_6/conv_lst_m2d/while_grad/body/_15704/gradients/AddN', 'Func/conv_alstm_5/conv_lst_m2d/while_grad/body/_15895/input/_28229' -> 'conv_alstm_5/conv_lst_m2d/while_grad/body/_15895/gradients/AddN', 'Func/conv_alstm_4/conv_lst_m2d/while_grad/body/_16086/input/_28345' -> 'conv_alstm_4/conv_lst_m2d/while_grad/body/_16086/gradients/AddN', 'Func/conv_alstm_3/conv_lst_m2d/while_grad/body/_16277/input/_28461' -> 'conv_alstm_3/conv_lst_m2d/while_grad/body/_16277/gradients/AddN', 'Func/conv_alstm_2/conv_lst_m2d/while_grad/body/_16468/input/_28577' -> 'conv_alstm_2/conv_lst_m2d/while_grad/body/_16468/gradients/AddN', 'Func/conv_alstm_1/conv_lst_m2d/while_grad/body/_16659/input/_28693' -> 'conv_alstm_1/conv_lst_m2d/while_grad/body/_16659/gradients/AddN', 'conv_alstm/conv_lst_m2d/while_grad/body/_16850/gradients/AddN_2' -> 'conv_alstm/conv_lst_m2d/while_grad/next_iteration/_17007', 'Func/conv_alstm_33/conv_lst_m2d/while_grad/body/_10547/input/_24981' -> 'conv_alstm_33/conv_lst_m2d/while_grad/body/_10547/gradients/AddN', 'Func/conv_alstm_32/conv_lst_m2d/while_grad/body/_10738/input/_25097' -> 'conv_alstm_32/conv_lst_m2d/while_grad/body/_10738/gradients/AddN', 'Func/conv_alstm_31/conv_lst_m2d/while_grad/body/_10929/input/_25213' -> 'conv_alstm_31/conv_lst_m2d/while_grad/body/_10929/gradients/AddN', 'Func/conv_alstm_30/conv_lst_m2d/while_grad/body/_11120/input/_25329' -> 'conv_alstm_30/conv_lst_m2d/while_grad/body/_11120/gradients/AddN', 'Func/conv_alstm_29/conv_lst_m2d/while_grad/body/_11311/input/_25445' -> 'conv_alstm_29/conv_lst_m2d/while_grad/body/_11311/gradients/AddN', 'Func/conv_alstm_28/conv_lst_m2d/while_grad/body/_11502/input/_25561' -> 'conv_alstm_28/conv_lst_m2d/while_grad/body/_11502/gradients/AddN', 'Func/conv_alstm_27/conv_lst_m2d/while_grad/body/_11693/input/_25677' -> 'conv_alstm_27/conv_lst_m2d/while_grad/body/_11693/gradients/AddN', 'Func/conv_alstm_26/conv_lst_m2d/while_grad/body/_11884/input/_25793' -> 'conv_alstm_26/conv_lst_m2d/while_grad/body/_11884/gradients/AddN', 'Func/conv_alstm_25/conv_lst_m2d/while_grad/body/_12075/input/_25909' -> 'conv_alstm_25/conv_lst_m2d/while_grad/body/_12075/gradients/AddN', 'Func/conv_alstm_24/conv_lst_m2d/while_grad/body/_12266/input/_26025' -> 'conv_alstm_24/conv_lst_m2d/while_grad/body/_12266/gradients/AddN', 'Func/conv_alstm_23/conv_lst_m2d/while_grad/body/_12457/input/_26141' -> 'conv_alstm_23/conv_lst_m2d/while_grad/body/_12457/gradients/AddN', 'Func/conv_alstm_21/conv_lst_m2d/while_grad/body/_12839/input/_26373' -> 'conv_alstm_21/conv_lst_m2d/while_grad/body/_12839/gradients/AddN', 'Func/conv_alstm_20/conv_lst_m2d/while_grad/body/_13030/input/_26489' -> 'conv_alstm_20/conv_lst_m2d/while_grad/body/_13030/gradients/AddN', 'Func/conv_alstm_19/conv_lst_m2d/while_grad/body/_13221/input/_26605' -> 'conv_alstm_19/conv_lst_m2d/while_grad/body/_13221/gradients/AddN', 'Func/conv_alstm_18/conv_lst_m2d/while_grad/body/_13412/input/_26721' -> 'conv_alstm_18/conv_lst_m2d/while_grad/body/_13412/gradients/AddN', 'Func/conv_alstm_17/conv_lst_m2d/while_grad/body/_13603/input/_26837' -> 'conv_alstm_17/conv_lst_m2d/while_grad/body/_13603/gradients/AddN', 'Func/conv_alstm_16/conv_lst_m2d/while_grad/body/_13794/input/_26953' -> 'conv_alstm_16/conv_lst_m2d/while_grad/body/_13794/gradients/AddN', 'Func/conv_alstm_15/conv_lst_m2d/while_grad/body/_13985/input/_27069' -> 'conv_alstm_15/conv_lst_m2d/while_grad/body/_13985/gradients/AddN', 'Func/conv_alstm_14/conv_lst_m2d/while_grad/body/_14176/input/_27185' -> 'conv_alstm_14/conv_lst_m2d/while_grad/body/_14176/gradients/AddN', 'Func/conv_alstm_13/conv_lst_m2d/while_grad/body/_14367/input/_27301' -> 'conv_alstm_13/conv_lst_m2d/while_grad/body/_14367/gradients/AddN', 'Func/conv_alstm_12/conv_lst_m2d/while_grad/body/_14558/input/_27417' -> 'conv_alstm_12/conv_lst_m2d/while_grad/body/_14558/gradients/AddN', 'Func/conv_alstm_11/conv_lst_m2d/while_grad/body/_14749/input/_27533' -> 'conv_alstm_11/conv_lst_m2d/while_grad/body/_14749/gradients/AddN', 'Func/conv_alstm_10/conv_lst_m2d/while_grad/body/_14940/input/_27649' -> 'conv_alstm_10/conv_lst_m2d/while_grad/body/_14940/gradients/AddN', 'Func/conv_alstm_9/conv_lst_m2d/while_grad/body/_15131/input/_27765' -> 'conv_alstm_9/conv_lst_m2d/while_grad/body/_15131/gradients/AddN', 'Func/conv_alstm_8/conv_lst_m2d/while_grad/body/_15322/input/_27881' -> 'conv_alstm_8/conv_lst_m2d/while_grad/body/_15322/gradients/AddN', 'conv_alstm_22/conv_lst_m2d/while_grad/body/_12648/gradients/convolution_4_grad/Conv2DBackpropInput' -> 'conv_alstm_22/conv_lst_m2d/while_grad/body/_12648/gradients/AddN_2', 'conv_alstm_22/conv_lst_m2d/while_grad/body/_12648/gradients/convolution_5_grad/Conv2DBackpropInput' -> 'conv_alstm_22/conv_lst_m2d/while_grad/body/_12648/gradients/AddN_2', 'conv_alstm_22/conv_lst_m2d/while_grad/body/_12648/gradients/convolution_6_grad/Conv2DBackpropInput' -> 'conv_alstm_22/conv_lst_m2d/while_grad/body/_12648/gradients/AddN_2', 'conv_alstm_22/conv_lst_m2d/while_grad/body/_12648/gradients/convolution_7_grad/Conv2DBackpropInput-2-TransposeNHWCToNCHW-LayoutOptimizer' -> 'conv_alstm_22/conv_lst_m2d/while_grad/body/_12648/gradients/convolution_7_grad/Conv2DBackpropInput', 'Func/conv_alstm_34/conv_lst_m2d/while_grad/body/_10356/input/_24865' -> 'conv_alstm_34/conv_lst_m2d/while_grad/body/_10356/gradients/AddN', 'Func/conv_alstm_35/conv_lst_m2d/while_grad/body/_10165/input/_24749' -> 'conv_alstm_35/conv_lst_m2d/while_grad/body/_10165/gradients/AddN', 'Func/conv_alstm_36/conv_lst_m2d/while_grad/body/_9974/input/_24633' -> 'conv_alstm_36/conv_lst_m2d/while_grad/body/_9974/gradients/AddN', 'conv_alstm_21/conv_lst_m2d/while/body/_5240/clip_by_value' -> 'conv_alstm_21/conv_lst_m2d/while/body/_5240/mul_3', 'conv_alstm_21/conv_lst_m2d/while/body/_5240/mul_2' -> 'conv_alstm_21/conv_lst_m2d/while/body/_5240/add_5', 'conv_alstm_21/conv_lst_m2d/while/body/_5240/clip_by_value_2' -> 'conv_alstm_21/conv_lst_m2d/while/body/_5240/mul_5', 'conv_alstm_21/conv_lst_m2d/while/body/_5240/convolution_6' -> 'conv_alstm_21/conv_lst_m2d/while/body/_5240/add_4', 'conv_alstm_22/conv_lst_m2d/while/body/_5459/clip_by_value_2' -> 'conv_alstm_22/conv_lst_m2d/while/body/_5459/mul_5', 'conv_alstm_22/conv_lst_m2d/while/body/_5459/convolution_6' -> 'conv_alstm_22/conv_lst_m2d/while/body/_5459/add_4', 'conv_alstm_22/conv_lst_m2d/while/body/_5459/clip_by_value' -> 'conv_alstm_22/conv_lst_m2d/while/body/_5459/mul_3', 'conv_alstm_22/conv_lst_m2d/while/body/_5459/mul_2' -> 'conv_alstm_22/conv_lst_m2d/while/body/_5459/add_5', 'conv_alstm_23/conv_lst_m2d/while/body/_5678/clip_by_value_2' -> 'conv_alstm_23/conv_lst_m2d/while/body/_5678/mul_5', 'conv_alstm_23/conv_lst_m2d/while/body/_5678/convolution_6' -> 'conv_alstm_23/conv_lst_m2d/while/body/_5678/add_4', 'conv_alstm_23/conv_lst_m2d/while/body/_5678/clip_by_value' -> 'conv_alstm_23/conv_lst_m2d/while/body/_5678/mul_3', 'conv_alstm_23/conv_lst_m2d/while/body/_5678/mul_2' -> 'conv_alstm_23/conv_lst_m2d/while/body/_5678/add_5', 'conv_alstm_24/conv_lst_m2d/while/body/_5897/clip_by_value_2' -> 'conv_alstm_24/conv_lst_m2d/while/body/_5897/mul_5', 'conv_alstm_24/conv_lst_m2d/while/body/_5897/convolution_6' -> 'conv_alstm_24/conv_lst_m2d/while/body/_5897/add_4', 'conv_alstm_24/conv_lst_m2d/while/body/_5897/clip_by_value' -> 'conv_alstm_24/conv_lst_m2d/while/body/_5897/mul_3', 'conv_alstm_24/conv_lst_m2d/while/body/_5897/mul_2' -> 'conv_alstm_24/conv_lst_m2d/while/body/_5897/add_5', 'conv_alstm_25/conv_lst_m2d/while/body/_6116/clip_by_value_2' -> 'conv_alstm_25/conv_lst_m2d/while/body/_6116/mul_5', 'conv_alstm_25/conv_lst_m2d/while/body/_6116/convolution_6' -> 'conv_alstm_25/conv_lst_m2d/while/body/_6116/add_4', 'conv_alstm_25/conv_lst_m2d/while/body/_6116/clip_by_value' -> 'conv_alstm_25/conv_lst_m2d/while/body/_6116/mul_3', 'conv_alstm_25/conv_lst_m2d/while/body/_6116/mul_2' -> 'conv_alstm_25/conv_lst_m2d/while/body/_6116/add_5', 'conv_alstm_26/conv_lst_m2d/while/body/_6335/clip_by_value' -> 'conv_alstm_26/conv_lst_m2d/while/body/_6335/mul_3', 'conv_alstm_26/conv_lst_m2d/while/body/_6335/mul_2' -> 'conv_alstm_26/conv_lst_m2d/while/body/_6335/add_5', 'conv_alstm_26/conv_lst_m2d/while/body/_6335/clip_by_value_2' -> 'conv_alstm_26/conv_lst_m2d/while/body/_6335/mul_5', 'conv_alstm_26/conv_lst_m2d/while/body/_6335/convolution_6' -> 'conv_alstm_26/conv_lst_m2d/while/body/_6335/add_4', 'conv_alstm_27/conv_lst_m2d/while/body/_6554/convolution_6' -> 'conv_alstm_27/conv_lst_m2d/while/body/_6554/add_4', 'conv_alstm_27/conv_lst_m2d/while/body/_6554/clip_by_value' -> 'conv_alstm_27/conv_lst_m2d/while/body/_6554/mul_3', 'conv_alstm_27/conv_lst_m2d/while/body/_6554/mul_2' -> 'conv_alstm_27/conv_lst_m2d/while/body/_6554/add_5', 'conv_alstm_27/conv_lst_m2d/while/body/_6554/clip_by_value_2' -> 'conv_alstm_27/conv_lst_m2d/while/body/_6554/mul_5', 'conv_alstm_28/conv_lst_m2d/while/body/_6773/mul_2' -> 'conv_alstm_28/conv_lst_m2d/while/body/_6773/add_5', 'conv_alstm_29/conv_lst_m2d/while/body/_6992/clip_by_value_2' -> 'conv_alstm_29/conv_lst_m2d/while/body/_6992/mul_5', 'conv_alstm_29/conv_lst_m2d/while/body/_6992/convolution_6' -> 'conv_alstm_29/conv_lst_m2d/while/body/_6992/add_4', 'conv_alstm_29/conv_lst_m2d/while/body/_6992/clip_by_value' -> 'conv_alstm_29/conv_lst_m2d/while/body/_6992/mul_3', 'conv_alstm_29/conv_lst_m2d/while/body/_6992/mul_2' -> 'conv_alstm_29/conv_lst_m2d/while/body/_6992/add_5', 'conv_alstm_30/conv_lst_m2d/while/body/_7211/clip_by_value_2' -> 'conv_alstm_30/conv_lst_m2d/while/body/_7211/mul_5', 'conv_alstm_30/conv_lst_m2d/while/body/_7211/convolution_6' -> 'conv_alstm_30/conv_lst_m2d/while/body/_7211/add_4', 'conv_alstm_30/conv_lst_m2d/while/body/_7211/clip_by_value' -> 'conv_alstm_30/conv_lst_m2d/while/body/_7211/mul_3', 'conv_alstm_30/conv_lst_m2d/while/body/_7211/mul_2' -> 'conv_alstm_30/conv_lst_m2d/while/body/_7211/add_5', 'conv_alstm_31/conv_lst_m2d/while/body/_7430/mul_2' -> 'conv_alstm_31/conv_lst_m2d/while/body/_7430/add_5', 'conv_alstm_32/conv_lst_m2d/while/body/_7649/mul_2' -> 'conv_alstm_32/conv_lst_m2d/while/body/_7649/add_5', 'conv_alstm_33/conv_lst_m2d/while/body/_7868/clip_by_value' -> 'conv_alstm_33/conv_lst_m2d/while/body/_7868/mul_3', 'conv_alstm_33/conv_lst_m2d/while/body/_7868/mul_2' -> 'conv_alstm_33/conv_lst_m2d/while/body/_7868/add_5', 'conv_alstm_33/conv_lst_m2d/while/body/_7868/clip_by_value_2' -> 'conv_alstm_33/conv_lst_m2d/while/body/_7868/mul_5', 'conv_alstm_33/conv_lst_m2d/while/body/_7868/convolution_6' -> 'conv_alstm_33/conv_lst_m2d/while/body/_7868/add_4', 'conv_alstm_34/conv_lst_m2d/while/body/_8087/mul_2' -> 'conv_alstm_34/conv_lst_m2d/while/body/_8087/add_5', 'conv_alstm_35/conv_lst_m2d/while/body/_8306/clip_by_value' -> 'conv_alstm_35/conv_lst_m2d/while/body/_8306/mul_3', 'conv_alstm_35/conv_lst_m2d/while/body/_8306/mul_2' -> 'conv_alstm_35/conv_lst_m2d/while/body/_8306/add_5', 'conv_alstm_35/conv_lst_m2d/while/body/_8306/clip_by_value_2' -> 'conv_alstm_35/conv_lst_m2d/while/body/_8306/mul_5', 'conv_alstm_35/conv_lst_m2d/while/body/_8306/convolution_6' -> 'conv_alstm_35/conv_lst_m2d/while/body/_8306/add_4', 'conv_alstm_36/conv_lst_m2d/while/body/_8525/convolution_6' -> 'conv_alstm_36/conv_lst_m2d/while/body/_8525/add_4', 'conv_alstm_36/conv_lst_m2d/while/body/_8525/clip_by_value' -> 'conv_alstm_36/conv_lst_m2d/while/body/_8525/mul_3', 'conv_alstm_36/conv_lst_m2d/while/body/_8525/mul_2' -> 'conv_alstm_36/conv_lst_m2d/while/body/_8525/add_5', 'conv_alstm_36/conv_lst_m2d/while/body/_8525/clip_by_value_2' -> 'conv_alstm_36/conv_lst_m2d/while/body/_8525/mul_5', 'conv_alstm_37/conv_lst_m2d/while/body/_8744/convolution_6' -> 'conv_alstm_37/conv_lst_m2d/while/body/_8744/add_4', 'conv_alstm_37/conv_lst_m2d/while/body/_8744/clip_by_value' -> 'conv_alstm_37/conv_lst_m2d/while/body/_8744/mul_3', 'conv_alstm_37/conv_lst_m2d/while/body/_8744/mul_2' -> 'conv_alstm_37/conv_lst_m2d/while/body/_8744/add_5', 'conv_alstm_37/conv_lst_m2d/while/body/_8744/clip_by_value_2' -> 'conv_alstm_37/conv_lst_m2d/while/body/_8744/mul_5', 'conv_alstm_38/conv_lst_m2d/while/body/_8963/clip_by_value_2' -> 'conv_alstm_38/conv_lst_m2d/while/body/_8963/mul_5', 'conv_alstm_38/conv_lst_m2d/while/body/_8963/convolution_6' -> 'conv_alstm_38/conv_lst_m2d/while/body/_8963/add_4', 'conv_alstm_38/conv_lst_m2d/while/body/_8963/clip_by_value' -> 'conv_alstm_38/conv_lst_m2d/while/body/_8963/mul_3', 'conv_alstm_38/conv_lst_m2d/while/body/_8963/mul_2' -> 'conv_alstm_38/conv_lst_m2d/while/body/_8963/add_5', 'conv_alstm_39/conv_lst_m2d/while/body/_9182/mul_2' -> 'conv_alstm_39/conv_lst_m2d/while/body/_9182/add_5', 'conv_alstm_39/conv_lst_m2d/while/body/_9182/convolution_6' -> 'conv_alstm_39/conv_lst_m2d/while/body/_9182/add_4', 'conv_alstm_39/conv_lst_m2d/while/body/_9182/clip_by_value' -> 'conv_alstm_39/conv_lst_m2d/while/body/_9182/mul_3', 'conv_alstm_39/conv_lst_m2d/while/body/_9182/clip_by_value_2' -> 'conv_alstm_39/conv_lst_m2d/while/body/_9182/mul_5', 'Func/conv_alstm_38/conv_lst_m2d/while_grad/body/_9592/input/_24401' -> 'conv_alstm_38/conv_lst_m2d/while_grad/body/_9592/gradients/AddN', 'Func/conv_alstm_37/conv_lst_m2d/while_grad/body/_9783/input/_24517' -> 'conv_alstm_37/conv_lst_m2d/while_grad/body/_9783/gradients/AddN', 'conv_alstm_39/conv_lst_m2d/while_grad/body/_9401/gradients/AddN_2' -> 'conv_alstm_39/conv_lst_m2d/while_grad/next_iteration/_9558', 'conv_alstm_34/conv_lst_m2d/while/body/_8087/convolution_6' -> 'conv_alstm_34/conv_lst_m2d/while/body/_8087/add_4', 'conv_alstm_34/conv_lst_m2d/while/body/_8087/clip_by_value' -> 'conv_alstm_34/conv_lst_m2d/while/body/_8087/mul_3', 'conv_alstm_34/conv_lst_m2d/while/body/_8087/clip_by_value_2' -> 'conv_alstm_34/conv_lst_m2d/while/body/_8087/mul_5', 'conv_alstm_32/conv_lst_m2d/while/body/_7649/clip_by_value_2' -> 'conv_alstm_32/conv_lst_m2d/while/body/_7649/mul_5', 'conv_alstm_32/conv_lst_m2d/while/body/_7649/convolution_6' -> 'conv_alstm_32/conv_lst_m2d/while/body/_7649/add_4', 'conv_alstm_32/conv_lst_m2d/while/body/_7649/clip_by_value' -> 'conv_alstm_32/conv_lst_m2d/while/body/_7649/mul_3', 'conv_alstm_31/conv_lst_m2d/while/body/_7430/clip_by_value_2' -> 'conv_alstm_31/conv_lst_m2d/while/body/_7430/mul_5', 'conv_alstm_31/conv_lst_m2d/while/body/_7430/convolution_6' -> 'conv_alstm_31/conv_lst_m2d/while/body/_7430/add_4', 'conv_alstm_31/conv_lst_m2d/while/body/_7430/clip_by_value' -> 'conv_alstm_31/conv_lst_m2d/while/body/_7430/mul_3', 'conv_alstm_28/conv_lst_m2d/while/body/_6773/clip_by_value' -> 'conv_alstm_28/conv_lst_m2d/while/body/_6773/mul_3', 'conv_alstm_28/conv_lst_m2d/while/body/_6773/clip_by_value_2' -> 'conv_alstm_28/conv_lst_m2d/while/body/_6773/mul_5', 'conv_alstm_28/conv_lst_m2d/while/body/_6773/convolution_6' -> 'conv_alstm_28/conv_lst_m2d/while/body/_6773/add_4', 'conv_alstm_3/conv_lst_m2d/while/body/_1298/clip_by_value' -> 'conv_alstm_3/conv_lst_m2d/while/body/_1298/mul_3', 'conv_alstm_3/conv_lst_m2d/while/body/_1298/mul_2' -> 'conv_alstm_3/conv_lst_m2d/while/body/_1298/add_5', 'conv_alstm_3/conv_lst_m2d/while/body/_1298/clip_by_value_2' -> 'conv_alstm_3/conv_lst_m2d/while/body/_1298/mul_5', 'conv_alstm_3/conv_lst_m2d/while/body/_1298/convolution_6' -> 'conv_alstm_3/conv_lst_m2d/while/body/_1298/add_4', 'conv_alstm_4/conv_lst_m2d/while/body/_1517/mul_2' -> 'conv_alstm_4/conv_lst_m2d/while/body/_1517/add_5', 'conv_alstm_5/conv_lst_m2d/while/body/_1736/clip_by_value' -> 'conv_alstm_5/conv_lst_m2d/while/body/_1736/mul_3', 'conv_alstm_5/conv_lst_m2d/while/body/_1736/mul_2' -> 'conv_alstm_5/conv_lst_m2d/while/body/_1736/add_5', 'conv_alstm_5/conv_lst_m2d/while/body/_1736/clip_by_value_2' -> 'conv_alstm_5/conv_lst_m2d/while/body/_1736/mul_5', 'conv_alstm_5/conv_lst_m2d/while/body/_1736/convolution_6' -> 'conv_alstm_5/conv_lst_m2d/while/body/_1736/add_4', 'conv_alstm_6/conv_lst_m2d/while/body/_1955/convolution_6' -> 'conv_alstm_6/conv_lst_m2d/while/body/_1955/add_4', 'conv_alstm_6/conv_lst_m2d/while/body/_1955/clip_by_value' -> 'conv_alstm_6/conv_lst_m2d/while/body/_1955/mul_3', 'conv_alstm_6/conv_lst_m2d/while/body/_1955/mul_2' -> 'conv_alstm_6/conv_lst_m2d/while/body/_1955/add_5', 'conv_alstm_6/conv_lst_m2d/while/body/_1955/clip_by_value_2' -> 'conv_alstm_6/conv_lst_m2d/while/body/_1955/mul_5', 'conv_alstm_7/conv_lst_m2d/while/body/_2174/mul_2' -> 'conv_alstm_7/conv_lst_m2d/while/body/_2174/add_5', 'conv_alstm_8/conv_lst_m2d/while/body/_2393/mul_2' -> 'conv_alstm_8/conv_lst_m2d/while/body/_2393/add_5', 'conv_alstm_9/conv_lst_m2d/while/body/_2612/clip_by_value' -> 'conv_alstm_9/conv_lst_m2d/while/body/_2612/mul_3', 'conv_alstm_9/conv_lst_m2d/while/body/_2612/mul_2' -> 'conv_alstm_9/conv_lst_m2d/while/body/_2612/add_5', 'conv_alstm_9/conv_lst_m2d/while/body/_2612/clip_by_value_2' -> 'conv_alstm_9/conv_lst_m2d/while/body/_2612/mul_5', 'conv_alstm_9/conv_lst_m2d/while/body/_2612/convolution_6' -> 'conv_alstm_9/conv_lst_m2d/while/body/_2612/add_4', 'conv_alstm_10/conv_lst_m2d/while/body/_2831/clip_by_value_2' -> 'conv_alstm_10/conv_lst_m2d/while/body/_2831/mul_5', 'conv_alstm_10/conv_lst_m2d/while/body/_2831/convolution_6' -> 'conv_alstm_10/conv_lst_m2d/while/body/_2831/add_4', 'conv_alstm_10/conv_lst_m2d/while/body/_2831/clip_by_value' -> 'conv_alstm_10/conv_lst_m2d/while/body/_2831/mul_3', 'conv_alstm_10/conv_lst_m2d/while/body/_2831/mul_2' -> 'conv_alstm_10/conv_lst_m2d/while/body/_2831/add_5', 'conv_alstm_11/conv_lst_m2d/while/body/_3050/mul_2' -> 'conv_alstm_11/conv_lst_m2d/while/body/_3050/add_5', 'conv_alstm_11/conv_lst_m2d/while/body/_3050/clip_by_value_2' -> 'conv_alstm_11/conv_lst_m2d/while/body/_3050/mul_5', 'conv_alstm_11/conv_lst_m2d/while/body/_3050/convolution_6' -> 'conv_alstm_11/conv_lst_m2d/while/body/_3050/add_4', 'conv_alstm_11/conv_lst_m2d/while/body/_3050/clip_by_value' -> 'conv_alstm_11/conv_lst_m2d/while/body/_3050/mul_3', 'conv_alstm_12/conv_lst_m2d/while/body/_3269/clip_by_value' -> 'conv_alstm_12/conv_lst_m2d/while/body/_3269/mul_3', 'conv_alstm_12/conv_lst_m2d/while/body/_3269/mul_2' -> 'conv_alstm_12/conv_lst_m2d/while/body/_3269/add_5', 'conv_alstm_12/conv_lst_m2d/while/body/_3269/clip_by_value_2' -> 'conv_alstm_12/conv_lst_m2d/while/body/_3269/mul_5', 'conv_alstm_12/conv_lst_m2d/while/body/_3269/convolution_6' -> 'conv_alstm_12/conv_lst_m2d/while/body/_3269/add_4', 'conv_alstm_13/conv_lst_m2d/while/body/_3488/clip_by_value' -> 'conv_alstm_13/conv_lst_m2d/while/body/_3488/mul_3', 'conv_alstm_13/conv_lst_m2d/while/body/_3488/mul_2' -> 'conv_alstm_13/conv_lst_m2d/while/body/_3488/add_5', 'conv_alstm_13/conv_lst_m2d/while/body/_3488/clip_by_value_2' -> 'conv_alstm_13/conv_lst_m2d/while/body/_3488/mul_5', 'conv_alstm_13/conv_lst_m2d/while/body/_3488/convolution_6' -> 'conv_alstm_13/conv_lst_m2d/while/body/_3488/add_4', 'conv_alstm_14/conv_lst_m2d/while/body/_3707/clip_by_value' -> 'conv_alstm_14/conv_lst_m2d/while/body/_3707/mul_3', 'conv_alstm_14/conv_lst_m2d/while/body/_3707/mul_2' -> 'conv_alstm_14/conv_lst_m2d/while/body/_3707/add_5', 'conv_alstm_14/conv_lst_m2d/while/body/_3707/clip_by_value_2' -> 'conv_alstm_14/conv_lst_m2d/while/body/_3707/mul_5', 'conv_alstm_14/conv_lst_m2d/while/body/_3707/convolution_6' -> 'conv_alstm_14/conv_lst_m2d/while/body/_3707/add_4', 'conv_alstm_15/conv_lst_m2d/while/body/_3926/convolution_6' -> 'conv_alstm_15/conv_lst_m2d/while/body/_3926/add_4', 'conv_alstm_15/conv_lst_m2d/while/body/_3926/clip_by_value' -> 'conv_alstm_15/conv_lst_m2d/while/body/_3926/mul_3', 'conv_alstm_15/conv_lst_m2d/while/body/_3926/mul_2' -> 'conv_alstm_15/conv_lst_m2d/while/body/_3926/add_5', 'conv_alstm_15/conv_lst_m2d/while/body/_3926/clip_by_value_2' -> 'conv_alstm_15/conv_lst_m2d/while/body/_3926/mul_5', 'conv_alstm_16/conv_lst_m2d/while/body/_4145/clip_by_value_2' -> 'conv_alstm_16/conv_lst_m2d/while/body/_4145/mul_5', 'conv_alstm_16/conv_lst_m2d/while/body/_4145/convolution_6' -> 'conv_alstm_16/conv_lst_m2d/while/body/_4145/add_4', 'conv_alstm_16/conv_lst_m2d/while/body/_4145/clip_by_value' -> 'conv_alstm_16/conv_lst_m2d/while/body/_4145/mul_3', 'conv_alstm_16/conv_lst_m2d/while/body/_4145/mul_2' -> 'conv_alstm_16/conv_lst_m2d/while/body/_4145/add_5', 'conv_alstm_17/conv_lst_m2d/while/body/_4364/clip_by_value_2' -> 'conv_alstm_17/conv_lst_m2d/while/body/_4364/mul_5', 'conv_alstm_17/conv_lst_m2d/while/body/_4364/convolution_6' -> 'conv_alstm_17/conv_lst_m2d/while/body/_4364/add_4', 'conv_alstm_17/conv_lst_m2d/while/body/_4364/clip_by_value' -> 'conv_alstm_17/conv_lst_m2d/while/body/_4364/mul_3', 'conv_alstm_17/conv_lst_m2d/while/body/_4364/mul_2' -> 'conv_alstm_17/conv_lst_m2d/while/body/_4364/add_5', 'conv_alstm_18/conv_lst_m2d/while/body/_4583/clip_by_value_2' -> 'conv_alstm_18/conv_lst_m2d/while/body/_4583/mul_5', 'conv_alstm_18/conv_lst_m2d/while/body/_4583/convolution_6' -> 'conv_alstm_18/conv_lst_m2d/while/body/_4583/add_4', 'conv_alstm_18/conv_lst_m2d/while/body/_4583/clip_by_value' -> 'conv_alstm_18/conv_lst_m2d/while/body/_4583/mul_3', 'conv_alstm_18/conv_lst_m2d/while/body/_4583/mul_2' -> 'conv_alstm_18/conv_lst_m2d/while/body/_4583/add_5', 'conv_alstm_19/conv_lst_m2d/while/body/_4802/mul_2' -> 'conv_alstm_19/conv_lst_m2d/while/body/_4802/add_5', 'conv_alstm_20/conv_lst_m2d/while/body/_5021/mul_2' -> 'conv_alstm_20/conv_lst_m2d/while/body/_5021/add_5', 'conv_alstm_20/conv_lst_m2d/while/body/_5021/clip_by_value_2' -> 'conv_alstm_20/conv_lst_m2d/while/body/_5021/mul_5', 'conv_alstm_20/conv_lst_m2d/while/body/_5021/convolution_6' -> 'conv_alstm_20/conv_lst_m2d/while/body/_5021/add_4', 'conv_alstm_20/conv_lst_m2d/while/body/_5021/clip_by_value' -> 'conv_alstm_20/conv_lst_m2d/while/body/_5021/mul_3', 'conv_alstm_19/conv_lst_m2d/while/body/_4802/clip_by_value_2' -> 'conv_alstm_19/conv_lst_m2d/while/body/_4802/mul_5', 'conv_alstm_19/conv_lst_m2d/while/body/_4802/convolution_6' -> 'conv_alstm_19/conv_lst_m2d/while/body/_4802/add_4', 'conv_alstm_19/conv_lst_m2d/while/body/_4802/clip_by_value' -> 'conv_alstm_19/conv_lst_m2d/while/body/_4802/mul_3', 'conv_alstm_8/conv_lst_m2d/while/body/_2393/clip_by_value_2' -> 'conv_alstm_8/conv_lst_m2d/while/body/_2393/mul_5', 'conv_alstm_8/conv_lst_m2d/while/body/_2393/convolution_6' -> 'conv_alstm_8/conv_lst_m2d/while/body/_2393/add_4', 'conv_alstm_8/conv_lst_m2d/while/body/_2393/clip_by_value' -> 'conv_alstm_8/conv_lst_m2d/while/body/_2393/mul_3', 'conv_alstm_7/conv_lst_m2d/while/body/_2174/clip_by_value_2' -> 'conv_alstm_7/conv_lst_m2d/while/body/_2174/mul_5', 'conv_alstm_7/conv_lst_m2d/while/body/_2174/convolution_6' -> 'conv_alstm_7/conv_lst_m2d/while/body/_2174/add_4', 'conv_alstm_7/conv_lst_m2d/while/body/_2174/clip_by_value' -> 'conv_alstm_7/conv_lst_m2d/while/body/_2174/mul_3', 'conv_alstm_4/conv_lst_m2d/while/body/_1517/convolution_6' -> 'conv_alstm_4/conv_lst_m2d/while/body/_1517/add_4', 'conv_alstm_4/conv_lst_m2d/while/body/_1517/clip_by_value' -> 'conv_alstm_4/conv_lst_m2d/while/body/_1517/mul_3', 'conv_alstm_4/conv_lst_m2d/while/body/_1517/clip_bdy/_3488/mul_3', 'conv_alstm_13/conv_lst_m2d/while/body/_3488/mul_2' -> 'conv_alstm_13/conv_lst_m2d/while/body/_3488/add_5', 'conv_alstm_13/conv_lst_m2d/while/body/_3488/clip_by_value_2' -> 'conv_alstm_13/conv_lst_m2d/while/body/_3488/mul_5', 'conv_alstm_13/conv_lst_m2d/while/body/_3488/convolution_6' -> 'conv_alstm_13/conv_lst_m2d/while/body/_3488/add_4', 'conv_alstm_14/conv_lst_m2d/while/body/_3707/clip_by_value' -> 'conv_alstm_14/conv_lst_m2d/while/body/_3707/mul_3', 'conv_alstm_14/conv_lst_m2d/while/body/_3707/mul_2' -> 'conv_alstm_14/conv_lst_m2d/while/body/_3707/add_5', 'conv_alstm_14/conv_lst_m2d/while/body/_3707/clip_by_value_2' -> 'conv_alstm_14/conv_lst_m2d/while/body/_3707/mul_5', 'conv_alstm_14/conv_lst_m2d/while/body/_3707/convolution_6' -> 'conv_alstm_14/conv_lst_m2d/while/body/_3707/add_4', 'conv_alstm_15/conv_lst_m2d/while/body/_3926/convolution_6' -> 'conv_alstm_15/conv_lst_m2d/while/body/_3926/add_4', 'conv_alstm_15/conv_lst_m2d/while/body/_3926/clip_by_value' -> 'conv_alstm_15/conv_lst_m2d/while/body/_3926/mul_3', 'conv_alstm_15/conv_lst_m2d/while/body/_3926/mul_2' -> 'conv_alstm_15/conv_lst_m2d/while/body/_3926/add_5', 'conv_alstm_15/conv_lst_m2d/while/body/_3926/clip_by_value_2' -> 'conv_alstm_15/conv_lst_m2d/while/body/_3926/mul_5', 'conv_alstm_16/conv_lst_m2d/while/body/_4145/clip_by_value_2' -> 'conv_alstm_16/conv_lst_m2d/while/body/_4145/mul_5', 'conv_alstm_16/conv_lst_m2d/while/body/_4145/convolution_6' -> 'conv_alstm_16/conv_lst_m2d/while/body/_4145/add_4', 'conv_alstm_16/conv_lst_m2d/while/body/_4145/clip_by_value' -> 'con\r\nv_alstm_16/conv_lst_m2d/while/body/_4145/mul_3', 'conv_alstm_16/conv_lst_m2d/while/body/_4145/mul_2' -> 'conv_alstm_16/conv_lst_m2d/while/body/_4145/add_5', 'conv_alstm_17/conv_lst_m2d/while/body/_\r\n4364/clip_by_value_2' -> 'conv_alstm_17/conv_lst_m2d/while/body/_4364/mul_5', 'conv_alstm_17/conv_lst_m2d/while/body/_4364/convolution_6' -> 'conv_alstm_17/conv_lst_m2d/while/body/_4364/add_4', 'co\r\nnv_alstm_17/conv_lst_m2d/while/body/_4364/clip_by_value' -> 'conv_alstm_17/conv_lst_m2d/while/body/_4364/mul_3', 'conv_alstm_17/conv_lst_m2d/while/body/_4364/mul_2' -> 'conv_alstm_17/conv_lst_m2d/w\r\nhile/body/_4364/add_5', 'conv_alstm_18/conv_lst_m2d/while/body/_4583/clip_by_value_2' -> 'conv_alstm_18/conv_lst_m2d/while/body/_4583/mul_5', 'conv_alstm_18/conv_lst_m2d/while/body/_4583/convolutio\r\nn_6' -> 'conv_alstm_18/conv_lst_m2d/while/body/_4583/add_4', 'conv_alstm_18/conv_lst_m2d/while/body/_4583/clip_by_value' -> 'conv_alstm_18/conv_lst_m2d/while/body/_4583/mul_3', 'conv_alstm_18/conv_\r\nlst_m2d/while/body/_4583/mul_2' -> 'conv_alstm_18/conv_lst_m2d/while/body/_4583/add_5', 'conv_alstm_19/conv_lst_m2d/while/body/_4802/mul_2' -> 'conv_alstm_19/conv_lst_m2d/while/body/_4802/add_5', '\r\nconv_alstm_20/conv_lst_m2d/while/body/_5021/mul_2' -> 'conv_alstm_20/conv_lst_m2d/while/body/_5021/add_5', 'conv_alstm_20/conv_lst_m2d/while/body/_5021/clip_by_value_2' -> 'conv_alstm_20/conv_lst_m\r\n2d/while/body/_5021/mul_5', 'conv_alstm_20/conv_lst_m2d/while/body/_5021/convolution_6' -> 'conv_alstm_20/conv_lst_m2d/while/body/_5021/add_4', 'conv_alstm_20/conv_lst_m2d/while/body/_5021/clip_by_\r\nvalue' -> 'conv_alstm_20/conv_lst_m2d/while/body/_5021/mul_3', 'conv_alstm_19/conv_lst_m2d/while/body/_4802/clip_by_value_2' -> 'conv_alstm_19/conv_lst_m2d/while/body/_4802/mul_5', 'conv_alstm_19/c\r\nonv_lst_m2d/while/body/_4802/convolution_6' -> 'conv_alstm_19/conv_lst_m2d/while/body/_4802/add_4', 'conv_alstm_19/conv_lst_m2d/while/body/_4802/clip_by_value' -> 'conv_alstm_19/conv_lst_m2d/while/\r\nbody/_4802/mul_3', 'conv_alstm_8/conv_lst_m2d/while/body/_2393/clip_by_value_2' -> 'conv_alstm_8/conv_lst_m2d/while/body/_2393/mul_5', 'conv_alstm_8/conv_lst_m2d/while/body/_2393/convolution_6' -> \r\n'conv_alstm_8/conv_lst_m2d/while/body/_2393/add_4', 'conv_alstm_8/conv_lst_m2d/while/body/_2393/clip_by_value' -> 'conv_alstm_8/conv_lst_m2d/while/body/_2393/mul_3', 'conv_alstm_7/conv_lst_m2d/whil\r\ne/body/_2174/clip_by_value_2' -> 'conv_alstm_7/conv_lst_m2d/while/body/_2174/mul_5', 'conv_alstm_7/conv_lst_m2d/while/body/_2174/convolution_6' -> 'conv_alstm_7/conv_lst_m2d/while/body/_2174/add_4'\r\n, 'conv_alstm_7/conv_lst_m2d/while/body/_2174/clip_by_value' -> 'conv_alstm_7/conv_lst_m2d/while/body/_2174/mul_3', 'conv_alstm_4/conv_lst_m2d/while/body/_1517/convolution_6' -> 'conv_alstm_4/conv_\r\nlst_m2d/while/body/_1517/add_4', 'conv_alstm_4/conv_lst_m2d/while/body/_1517/clip_by_value' -> 'conv_alstm_4/conv_lst_m2d/while/body/_1517/mul_3', 'conv_alstm_4/conv_lst_m2d/while/body/_1517/clip_b\r\ny_value_2' -> 'conv_alstm_4/conv_lst_m2d/while/body/_1517/mul_5', 'conv_alstm_1/conv_lst_m2d/while/body/_860/clip_by_value' -> 'conv_alstm_1/conv_lst_m2d/while/body/_860/mul_3', 'conv_alstm_1/conv_\r\nlst_m2d/while/body/_860/mul_2' -> 'conv_alstm_1/conv_lst_m2d/while/body/_860/add_5', 'conv_alstm_1/conv_lst_m2d/while/body/_860/clip_by_value_2' -> 'conv_alstm_1/conv_lst_m2d/while/body/_860/mul_5'\r\n, 'conv_alstm_1/conv_lst_m2d/while/body/_860/convolution_6' -> 'conv_alstm_1/conv_lst_m2d/while/body/_860/add_4', 'conv_alstm_2/conv_lst_m2d/while/body/_1079/clip_by_value' -> 'conv_alstm_2/conv_ls\r\nt_m2d/while/body/_1079/mul_3', 'conv_alstm_2/conv_lst_m2d/while/body/_1079/mul_2' -> 'conv_alstm_2/conv_lst_m2d/while/body/_1079/add_5', 'conv_alstm_2/conv_lst_m2d/while/body/_1079/clip_by_value_2'\r\n -> 'conv_alstm_2/conv_lst_m2d/while/body/_1079/mul_5', 'conv_alstm_2/conv_lst_m2d/while/body/_1079/convolution_6' -> 'conv_alstm_2/conv_lst_m2d/while/body/_1079/add_4', 'conv_alstm/conv_lst_m2d/wh\r\nile/body/_641/mul_2' -> 'conv_alstm/conv_lst_m2d/while/body/_641/add_5', 'conv_alstm/conv_lst_m2d/while/body/_641/clip_by_value' -> 'conv_alstm/conv_lst_m2d/while/body/_641/mul_3', 'conv_alstm/conv\r\n_lst_m2d/while/body/_641/clip_by_value_2' -> 'conv_alstm/conv_lst_m2d/while/body/_641/mul_5', 'conv_alstm/conv_lst_m2d/while/body/_641/convolution_6' -> 'conv_alstm/conv_lst_m2d/while/body/_641/add\r\n_4'}.`\r\n\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36899", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36899/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36899/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36899/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36899", "id": 567583482, "node_id": "MDU6SXNzdWU1Njc1ODM0ODI=", "number": 36899, "title": "Autograd cannot handle if conditions with line brakes when accessing fields", "user": {"login": "MaximusMutschler", "id": 48956579, "node_id": "MDQ6VXNlcjQ4OTU2NTc5", "avatar_url": "https://avatars2.githubusercontent.com/u/48956579?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MaximusMutschler", "html_url": "https://github.com/MaximusMutschler", "followers_url": "https://api.github.com/users/MaximusMutschler/followers", "following_url": "https://api.github.com/users/MaximusMutschler/following{/other_user}", "gists_url": "https://api.github.com/users/MaximusMutschler/gists{/gist_id}", "starred_url": "https://api.github.com/users/MaximusMutschler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MaximusMutschler/subscriptions", "organizations_url": "https://api.github.com/users/MaximusMutschler/orgs", "repos_url": "https://api.github.com/users/MaximusMutschler/repos", "events_url": "https://api.github.com/users/MaximusMutschler/events{/privacy}", "received_events_url": "https://api.github.com/users/MaximusMutschler/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1190546177, "node_id": "MDU6TGFiZWwxMTkwNTQ2MTc3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:autograph", "name": "comp:autograph", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-02-19T13:50:05Z", "updated_at": "2020-02-25T10:31:41Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- custom code:\r\n- Linux Ubuntu 18.04\r\n- TensorFlow installed from binary:\r\n-  tensorflow-gpu 2.1.0:\r\n-  3.6.8:\r\n- cuda 10.0:\r\n- Nvidia Geforce 1080ti 11Gb:\r\n\r\n\r\n### Describe the problem\r\nBUG: Autograd cannot handle if conditions with line brakes when accessing fields.\r\n\r\n### Source code / logs\r\nThis works:\r\n\r\nimport tensorflow as tf\r\nclass Test:\r\n    a = tf.Variable(1.0)\r\n\r\n    @tf.function\r\n    def test_function(self):\r\n        if False or self.a < 1.0:\r\n            pass\r\nt = Test()\r\nt.test_function()\r\n\r\nBut this does not:\r\n\r\nimport tensorflow as tf\r\nclass Test:\r\n    a = tf.Variable(1.0)\r\n\r\n    @tf.function\r\n    def test_function(self):\r\n        if False or\\\r\n                self.a < 1.0:\r\n            pass\r\nt = Test()\r\nt.test_function()\r\n\r\nError Message: \r\ntensorflow.python.framework.errors_impl.OperatorNotAllowedInGraphError: using a `tf.Tensor` as a Python `bool` is not allowed: AutoGraph did not convert this function. Try decorating it directly with @tf.function.\r\n\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36897", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36897/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36897/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36897/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36897", "id": 567558239, "node_id": "MDU6SXNzdWU1Njc1NTgyMzk=", "number": 36897, "title": "Feature Request: Pickle an entire model.", "user": {"login": "NEGU93", "id": 9558385, "node_id": "MDQ6VXNlcjk1NTgzODU=", "avatar_url": "https://avatars0.githubusercontent.com/u/9558385?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NEGU93", "html_url": "https://github.com/NEGU93", "followers_url": "https://api.github.com/users/NEGU93/followers", "following_url": "https://api.github.com/users/NEGU93/following{/other_user}", "gists_url": "https://api.github.com/users/NEGU93/gists{/gist_id}", "starred_url": "https://api.github.com/users/NEGU93/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NEGU93/subscriptions", "organizations_url": "https://api.github.com/users/NEGU93/orgs", "repos_url": "https://api.github.com/users/NEGU93/repos", "events_url": "https://api.github.com/users/NEGU93/events{/privacy}", "received_events_url": "https://api.github.com/users/NEGU93/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-19T13:08:49Z", "updated_at": "2020-02-20T19:42:24Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\nTensorFlow version 2.0.0\r\n\r\n**Describe the current behavior**\r\nThis request follows the issue [#33204](https://github.com/tensorflow/tensorflow/issues/33283).\r\nWhen trying to pickle a model to save its current state I get the error: `TypeError: can't pickle _thread._local objects`. Even when doing a low-level code and just trying to save keras layers it gets the same error message.\r\n\r\n**Describe the expected behavior**\r\nIt would be nice to be able to save models with pickle.\r\nPickling the entire model object is easier than saving just the weights. Especially for complex models with multiple networks involved. It is very convenient as long as it does not introduce performance issues.\r\n\r\nA potential current fix can be [this](https://github.com/tensorflow/tensorflow/issues/33283#issuecomment-561772070) for the moment.\r\n\r\n**Code to reproduce the issue** \r\nThe problem can be reproduced with this [gist](https://colab.research.google.com/gist/gadagashwini/079ecb24dcfb0130a41c4cc8f7a69aba/untitled209.ipynb).\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36895", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36895/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36895/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36895/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36895", "id": 567555894, "node_id": "MDU6SXNzdWU1Njc1NTU4OTQ=", "number": 36895, "title": "Custom implementations for AvgPool3D, Conv3D, MaxPool3D", "user": {"login": "jashshah", "id": 7275517, "node_id": "MDQ6VXNlcjcyNzU1MTc=", "avatar_url": "https://avatars2.githubusercontent.com/u/7275517?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jashshah", "html_url": "https://github.com/jashshah", "followers_url": "https://api.github.com/users/jashshah/followers", "following_url": "https://api.github.com/users/jashshah/following{/other_user}", "gists_url": "https://api.github.com/users/jashshah/gists{/gist_id}", "starred_url": "https://api.github.com/users/jashshah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jashshah/subscriptions", "organizations_url": "https://api.github.com/users/jashshah/orgs", "repos_url": "https://api.github.com/users/jashshah/repos", "events_url": "https://api.github.com/users/jashshah/events{/privacy}", "received_events_url": "https://api.github.com/users/jashshah/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-02-19T13:04:35Z", "updated_at": "2020-03-06T01:13:37Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Debian 9\r\n- TensorFlow installed from (source or binary): Binary\r\n- TensorFlow version (or github SHA if from source): 2.1.0\r\n\r\n\r\n**Provide the text output from tflite_convert**\r\n\r\n```\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime. If those are native TensorFlow operators, you might be able to use the extended runtime by passing --enable_select_tf_ops, or by setting target_ops=TFLITE_BUILTINS,SELECT_TF_OPS when calling tf.lite.TFLiteConverter(). Otherwise, if you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: ADD, CONCATENATION, FULLY_CONNECTED, MUL, RELU6, SOFTMAX. Here is a list of operators for which you will need custom implementations: AvgPool3D, Conv3D, MaxPool3D.\r\n\r\n```\r\n\r\nAlso, please include a link to a GraphDef or the model if possible.\r\n\r\n**Any other info / logs**\r\n\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36894", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36894/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36894/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36894/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36894", "id": 567543304, "node_id": "MDU6SXNzdWU1Njc1NDMzMDQ=", "number": 36894, "title": "tf.keras.layers.ReLU() drops tensor._keras_mask (sample_weight) unintentionally.", "user": {"login": "Rayarrow", "id": 9859475, "node_id": "MDQ6VXNlcjk4NTk0NzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/9859475?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Rayarrow", "html_url": "https://github.com/Rayarrow", "followers_url": "https://api.github.com/users/Rayarrow/followers", "following_url": "https://api.github.com/users/Rayarrow/following{/other_user}", "gists_url": "https://api.github.com/users/Rayarrow/gists{/gist_id}", "starred_url": "https://api.github.com/users/Rayarrow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Rayarrow/subscriptions", "organizations_url": "https://api.github.com/users/Rayarrow/orgs", "repos_url": "https://api.github.com/users/Rayarrow/repos", "events_url": "https://api.github.com/users/Rayarrow/events{/privacy}", "received_events_url": "https://api.github.com/users/Rayarrow/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-02-19T12:41:50Z", "updated_at": "2020-02-25T05:32:49Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information** \r\nWindows 10 1903, TF 2.0 or 2.1, Python 3.7, CUDA10.1, cuDNN 7.6, GTX 1070 8G\r\n\r\n**Describe the current behavior**\r\ntf.keras.layers.ReLU()(x) sets `x._keras_mask` to None.\r\n\r\n`tf.keras.layers.Embedding(mask_zero=True)(x)` and `tf.keras.layers.GRU(mask=self_defined_mask)(x)` set a bool Tensor `mask` to `x._keras_mask`. This mask will be passed on to Loss and Metrics and serves as `sample_weight` when calculating the cross_entropy_loss and metrics.accuracy etc. However, it just disappeared after a ReLU layer.\r\n\r\nI found tf.keras.layers.ReLU() call K.relu() which in turn calls tf.nn.relu(). `tf.nn.relu()`, a legacy of TF 1.x which doesn't support `_keras_mask`, seems to be the cause of the unintentional drop of the mask.\r\n\r\n**Describe the expected behavior**\r\ntf.keras.layers.ReLU()(x) just leaves `x._keras_mask` as it was.\r\n\r\n**Code to reproduce the issue** Provide a reproducible test case that is the\r\nbare minimum necessary to generate the problem.\r\n\r\n```\r\nclass GRU4REC(tf.keras.Model):\r\n    def __init__(self, vocabulary_size, embedding_dim, hidden_units):\r\n        super(GRU4REC, self).__init__()\r\n        self.Embedding = tf.keras.layers.Embedding(vocabulary_size, embedding_dim, mask_zero=True)\r\n        self.FC1 = tf.keras.layers.Dense(hidden_units * 3, tf.nn.relu)\r\n        self.BN1 = tf.keras.layers.BatchNormalization()\r\n        self.RELU = tf.keras.layers.ReLU()\r\n        self.GRU = tf.keras.layers.GRU(hidden_units, return_sequences=True)\r\n        self.FC2 = tf.keras.layers.Dense(vocabulary_size)\r\n        self.BN2 = tf.keras.layers.BatchNormalization()\r\n\r\n    def call(self, inputs, training=None, mask=None):\r\n        x = self.Embedding(inputs)\r\n        x = self.FC1(x)\r\n        x = self.BN1(x)\r\n        print(f'before relu: {x._keras_mask}') # print a Tensor\r\n        x = self.RELU(x)\r\n        print(f'after relu: {x._keras_mask}') # print None\r\n        x = self.GRU(x)\r\n        x = self.FC2(x)\r\n        x = self.BN2(x)\r\n        x = self.RELU(x)\r\n        # pred = tf.argmax(x, -1)\r\n        # tf.print('++++++++++')\r\n        # tf.print(tf.shape(pred))\r\n        # eq = tf.equal(inputs, tf.cast(pred, tf.int32))\r\n        # tf.print(tf.reduce_sum(tf.cast(eq, tf.float32)))\r\n        # tf.print('---------')\r\n        return x\r\n```\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n\r\nOn TF 2.0\r\n\r\n```\r\n2020-02-19 20:24:05.261124: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library nvcuda.dll\r\n2020-02-19 20:24:05.292473: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1555] Found device 0 with properties: \r\npciBusID: 0000:01:00.0 name: GeForce GTX 1070 computeCapability: 6.1\r\ncoreClock: 1.7845GHz coreCount: 15 deviceMemorySize: 8.00GiB deviceMemoryBandwidth: 238.66GiB/s\r\n2020-02-19 20:24:05.292814: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cudart64_101.dll\r\n2020-02-19 20:24:05.425947: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cublas64_10.dll\r\n2020-02-19 20:24:05.503908: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cufft64_10.dll\r\n2020-02-19 20:24:05.538431: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library curand64_10.dll\r\n2020-02-19 20:24:05.660730: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cusolver64_10.dll\r\n2020-02-19 20:24:05.738706: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cusparse64_10.dll\r\n2020-02-19 20:24:05.944062: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cudnn64_7.dll\r\n2020-02-19 20:24:05.945225: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1697] Adding visible gpu devices: 0\r\n2020-02-19 20:24:05.947055: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1555] Found device 0 with properties: \r\npciBusID: 0000:01:00.0 name: GeForce GTX 1070 computeCapability: 6.1\r\ncoreClock: 1.7845GHz coreCount: 15 deviceMemorySize: 8.00GiB deviceMemoryBandwidth: 238.66GiB/s\r\n2020-02-19 20:24:05.947607: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cudart64_101.dll\r\n2020-02-19 20:24:05.947889: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cublas64_10.dll\r\n2020-02-19 20:24:05.948150: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cufft64_10.dll\r\n2020-02-19 20:24:05.948418: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library curand64_10.dll\r\n2020-02-19 20:24:05.948677: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cusolver64_10.dll\r\n2020-02-19 20:24:05.948922: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cusparse64_10.dll\r\n2020-02-19 20:24:05.949206: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cudnn64_7.dll\r\n2020-02-19 20:24:05.950821: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1697] Adding visible gpu devices: 0\r\n2020-02-19 20:24:06.889483: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1096] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2020-02-19 20:24:06.889680: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1102]      0 \r\n2020-02-19 20:24:06.889787: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] 0:   N \r\n2020-02-19 20:24:06.891077: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1241] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 6376 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1070, pci bus id: 0000:01:00.0, compute capability: 6.1)\r\nbefore relu: Tensor(\"gr_u4rec/embedding/NotEqual:0\", shape=(None, None), dtype=bool)\r\nafter relu: None\r\nbefore relu: Tensor(\"model/gr_u4rec/embedding/NotEqual:0\", shape=(None, None), dtype=bool)\r\nafter relu: None\r\n2020-02-19 20:24:08.567321: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cublas64_10.dll\r\n\r\nProcess finished with exit code -1\r\n```\r\n\r\nWhen I was training a lots-of-zero-padded sequences, the loss went down smoothly as expected while the accuracy soared dramatically. However, everything went just right when I removed ReLU. Hope fix it or help point it out if I was wrong. Thanks~\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36893", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36893/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36893/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36893/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36893", "id": 567525632, "node_id": "MDU6SXNzdWU1Njc1MjU2MzI=", "number": 36893, "title": "tf.io.gfile.listdir does not with with S3 buckets", "user": {"login": "orf", "id": 1027207, "node_id": "MDQ6VXNlcjEwMjcyMDc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1027207?v=4", "gravatar_id": "", "url": "https://api.github.com/users/orf", "html_url": "https://github.com/orf", "followers_url": "https://api.github.com/users/orf/followers", "following_url": "https://api.github.com/users/orf/following{/other_user}", "gists_url": "https://api.github.com/users/orf/gists{/gist_id}", "starred_url": "https://api.github.com/users/orf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/orf/subscriptions", "organizations_url": "https://api.github.com/users/orf/orgs", "repos_url": "https://api.github.com/users/orf/repos", "events_url": "https://api.github.com/users/orf/events{/privacy}", "received_events_url": "https://api.github.com/users/orf/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-19T12:09:25Z", "updated_at": "2020-03-05T20:12:56Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information** - MacOS, Tensorflow 2.1, Python 3.7.6\r\n\r\n**Describe the current behavior**\r\n\r\nExecuting `tf.io.gfile.listdir(\"s3://bucket-name/\")` results in:\r\n\r\n```\r\n/private/var/folders/bn/36k9myl51_v23yyxm629ly4w0000gn/T/tmp.PygT1otw/lib/python3.7/site-packages/tensorflow_core/python/lib/io/file_io.py in list_directory_v2(path)\r\n    644   return [\r\n    645       compat.as_str_any(filename)\r\n--> 646       for filename in pywrap_tensorflow.GetChildren(compat.as_bytes(path))\r\n    647   ]\r\n    648\r\n\r\nInvalidArgumentError: S3 path doesn't contain an object name: s3://bucket-name/\r\n```\r\n\r\n**Describe the expected behavior**\r\n\r\nIt should return a list of objects within the bucket.\r\n\r\nS3 is quite limited in features for searching/globbing S3 objects but simple operations like listing objects under a given key (in the case above, `/`), are well supported and it would be good to include in Tensorflow.\r\n\r\nThe error message is also somewhat confusing."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36892", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36892/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36892/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36892/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36892", "id": 567521093, "node_id": "MDU6SXNzdWU1Njc1MjEwOTM=", "number": 36892, "title": "Unable to build r1.15 using gcc 4.8.5-39 because of -std=c++14 argument.", "user": {"login": "odinsbane", "id": 3462801, "node_id": "MDQ6VXNlcjM0NjI4MDE=", "avatar_url": "https://avatars0.githubusercontent.com/u/3462801?v=4", "gravatar_id": "", "url": "https://api.github.com/users/odinsbane", "html_url": "https://github.com/odinsbane", "followers_url": "https://api.github.com/users/odinsbane/followers", "following_url": "https://api.github.com/users/odinsbane/following{/other_user}", "gists_url": "https://api.github.com/users/odinsbane/gists{/gist_id}", "starred_url": "https://api.github.com/users/odinsbane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/odinsbane/subscriptions", "organizations_url": "https://api.github.com/users/odinsbane/orgs", "repos_url": "https://api.github.com/users/odinsbane/repos", "events_url": "https://api.github.com/users/odinsbane/events{/privacy}", "received_events_url": "https://api.github.com/users/odinsbane/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2020-02-19T12:00:40Z", "updated_at": "2020-02-25T11:35:37Z", "closed_at": null, "author_association": "NONE", "body": "The crux of this issue is **Does tensorflow r1.15 compile with gcc 4.8.5** when I check out r1.15, I cannot compile due to an invalid argument \"-std=c++14\" similar to #31760 but I do not understand the resolution from that. \r\n\r\nI am preparing to migrate to version 2.X so I tried to build r1.15. I get two errors. \r\n\r\nThe first error is resolved in #28824\r\n\r\nThe second error I have not gotten around. Everthing seems to build fine then I get.\r\n\r\n>ERROR: /home/username/.cache/bazel/_bazel_smithm3/6bda0689d89415301f8ee7c16fbd66e8/external/local_config_mlir/BUILD:418:1: C++ compilation of rule '@local_config_mlir//:Support' failed (Exit 1)  \r\n>gcc: error: unrecognized command line option '-std=c++14'\r\n\r\n\r\n**System information**\r\n- Centos7\r\n- checkout r1.15 and v1.15.1\r\n- Python 3.8.1\r\n- Bazel version 0.25.2\r\n- GCC/Compiler version 4.8.5-039\r\n- CUDA/cuDNN version 10.1/7\r\n- GPU model and memory Nvidia 1080Ti\r\n\r\nThis appears to be caused by mlir requiring a newer version of gcc, since it requires `-std=c++14` and if you replace it with it with '-std=c++1y' you'lll get an error about `std::make_unique`\r\n\r\nIs tensorflow r1.15 supposed to be compatible with gcc 4.8.5 (default on centos 7)?\r\n\r\n **Reproducing the problem.**\r\n\r\ngit clone https://github.com/tensorflow/tensorflow.git\r\ncd tensorflow\r\ngit checkout r1.15\r\n./configure\r\n**Select default options + CUDA**\r\nbazel build //tensorflow/tools/pip_package:build_pip_package\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36879", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36879/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36879/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36879/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36879", "id": 567377388, "node_id": "MDU6SXNzdWU1NjczNzczODg=", "number": 36879, "title": "Basic LSTM TFLite model created with new experimental converter results in model with incorrect output shape", "user": {"login": "bilalsoomro", "id": 8417115, "node_id": "MDQ6VXNlcjg0MTcxMTU=", "avatar_url": "https://avatars3.githubusercontent.com/u/8417115?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bilalsoomro", "html_url": "https://github.com/bilalsoomro", "followers_url": "https://api.github.com/users/bilalsoomro/followers", "following_url": "https://api.github.com/users/bilalsoomro/following{/other_user}", "gists_url": "https://api.github.com/users/bilalsoomro/gists{/gist_id}", "starred_url": "https://api.github.com/users/bilalsoomro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bilalsoomro/subscriptions", "organizations_url": "https://api.github.com/users/bilalsoomro/orgs", "repos_url": "https://api.github.com/users/bilalsoomro/repos", "events_url": "https://api.github.com/users/bilalsoomro/events{/privacy}", "received_events_url": "https://api.github.com/users/bilalsoomro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}, {"login": "renjie-liu", "id": 36247193, "node_id": "MDQ6VXNlcjM2MjQ3MTkz", "avatar_url": "https://avatars3.githubusercontent.com/u/36247193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/renjie-liu", "html_url": "https://github.com/renjie-liu", "followers_url": "https://api.github.com/users/renjie-liu/followers", "following_url": "https://api.github.com/users/renjie-liu/following{/other_user}", "gists_url": "https://api.github.com/users/renjie-liu/gists{/gist_id}", "starred_url": "https://api.github.com/users/renjie-liu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/renjie-liu/subscriptions", "organizations_url": "https://api.github.com/users/renjie-liu/orgs", "repos_url": "https://api.github.com/users/renjie-liu/repos", "events_url": "https://api.github.com/users/renjie-liu/events{/privacy}", "received_events_url": "https://api.github.com/users/renjie-liu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-19T07:45:03Z", "updated_at": "2020-03-18T21:14:30Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Google Colab\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (or github SHA if from source): 2.2.0-dev20200218\r\n\r\n\r\n**Command used to run the converter or code if you\u2019re using the Python API**\r\n\r\n```\r\nconverter = tf.lite.TFLiteConverter.from_keras_model(model)\r\nconverter.experimental_new_converter = True\r\ntflite_model = converter.convert()\r\nopen(\"mnist_lstm_f32.tflite\", \"wb\").write(tflite_model)\r\n```\r\n\r\n**The output from the converter invocation**\r\n\r\n```\r\nConversion is successful\r\n```\r\n\r\n**Failure details**\r\nI am creating a basic MNIST classification model which includes a single LSTM layer. Using the new experimental converter option, the model can be converted to TFLite format successfully and inferring from the TFLite model using the Python Interpreter API gives correct results.\r\n\r\nHowever, the model's output shape is just an empty array and running the model on Android required the output buffer size to be specified so the model crashes. I expect the output shape to be ```[1, 10]``` however that is not the case as shown below.\r\n```\r\n[{'name': 'Identity', 'index': 52, 'shape': array([], dtype=int32), 'shape_signature': array([], dtype=int32), 'dtype': <class 'numpy.float32'>, 'quantization': (0.0, 0), 'quantization_parameters': {'scales': array([], dtype=float32), 'zero_points': array([], dtype=int32), 'quantized_dimension': 0}, 'sparsity_parameters': {}}]\r\n```\r\n\r\n\r\n**Any other info / logs**\r\n[Colab notebook](https://colab.research.google.com/drive/1X5B2O2aF9HlVX0GHl1IAASPqrz45ujff)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36874", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36874/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36874/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36874/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36874", "id": 567306595, "node_id": "MDU6SXNzdWU1NjczMDY1OTU=", "number": 36874, "title": "time of tensorflow1.14 built from source perfroms worse than tensorflow1.14 from pypi", "user": {"login": "allen-ash", "id": 18231473, "node_id": "MDQ6VXNlcjE4MjMxNDcz", "avatar_url": "https://avatars3.githubusercontent.com/u/18231473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allen-ash", "html_url": "https://github.com/allen-ash", "followers_url": "https://api.github.com/users/allen-ash/followers", "following_url": "https://api.github.com/users/allen-ash/following{/other_user}", "gists_url": "https://api.github.com/users/allen-ash/gists{/gist_id}", "starred_url": "https://api.github.com/users/allen-ash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allen-ash/subscriptions", "organizations_url": "https://api.github.com/users/allen-ash/orgs", "repos_url": "https://api.github.com/users/allen-ash/repos", "events_url": "https://api.github.com/users/allen-ash/events{/privacy}", "received_events_url": "https://api.github.com/users/allen-ash/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-19T04:23:57Z", "updated_at": "2020-02-19T11:55:37Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution : Linux Ubuntu 16.04\r\n- TensorFlow installed from: source\r\n- TensorFlow version:1.14.0\r\n- Python version:3.6.2\r\n- Installed using :pip\r\n- Bazel version: 0.25.2\r\n- GCC/Compiler version: 5.4.0\r\n- CPU: Intel Core i9-9900K\r\n\r\n\r\nI want to speed up CPU inference on trained Mask R-CNN pb model.  So, I followed instructions on tensorflow webpage [here](https://www.tensorflow.org/install/source) and method from intel [here](https://software.intel.com/en-us/articles/intel-optimization-for-tensorflow-installation-guide#linux_B_S).  \r\n\r\n**Here is .tf_configure.bazelrc after running ./configure**\r\n- build --action_env PYTHON_BIN_PATH=\"/home/allen/miniconda3/envs/tf1_mkl/bin/python\"\r\n- build --action_env PYTHON_LIB_PATH=\"/home/allen/miniconda3/envs/tf1_mkl/lib/python3.6/site-packages\"\r\n- build --python_path=\"/home/allen/miniconda3/envs/tf1_mkl/bin/python\"\r\n- build:xla --define with_xla_support=true\r\n- build --config=xla\r\n- build --action_env TF_NEED_OPENCL_SYCL=\"0\"\r\n- build --action_env TF_NEED_ROCM=\"0\"\r\n- build --action_env TF_NEED_CUDA=\"0\"\r\n- build --action_env TF_DOWNLOAD_CLANG=\"0\"\r\n- build:opt --copt=-march=native\r\n- build:opt --copt=-Wno-sign-compare\r\n- build:opt --host_copt=-march=native\r\n- build:opt --define with_default_optimizations=true\r\n- build:v2 --define=tf_api_version=2\r\n- test --flaky_test_attempts=3\r\n- test --test_size_filters=small,medium\r\n- test --test_tag_filters=-benchmark-test,-no_oss,-oss_serial\r\n- test --build_tag_filters=-benchmark-test,-no_oss\r\n- test --test_tag_filters=-gpu\r\n- test --build_tag_filters=-gpu\r\n- build --action_env TF_CONFIGURE_IOS=\"0\"\r\n\r\n**Here is my bazel build command:**\r\n`bazel build --config=mkl --cxxopt=-D_GLIBCXX_USE_CXX11_ABI=0 --copt=-march=sandybridge --copt=-mtune=ivybridge --copt=-O3 //tensorflow/tools/pip_package:build_pip_package\r\n`\r\n**Next, I generated whl and installed successfully.**\r\nBut time of sess.run of Mask R-CNN is about 1s per image, which is worse than tf1.14 installed from pypi.\r\n**Here is the output using tensorflow installed from source **\r\n\r\n> WARNING:tensorflow:\r\n> The TensorFlow contrib module will not be included in TensorFlow 2.0.\r\n> For more information, please see:\r\n>   * https://github.com/tensorflow/community/blob/master/rfcs/20180907-contrib-sunset.md\r\n>   * https://github.com/tensorflow/addons\r\n>   * https://github.com/tensorflow/io (for I/O related ops)\r\n> If you depend on functionality not listed there, please file an issue.\r\n> \r\n> WARNING:tensorflow:From time_compare.py:314: The name tf.app.run is deprecated. Please use tf.compat.v1.app.run instead.\r\n> \r\n> WARNING:tensorflow:From time_compare.py:43: FastGFile.__init__ (from tensorflow.python.platform.gfile) is deprecated and will be removed in a future version.\r\n> Instructions for updating:\r\n> Use tf.gfile.GFile.\r\n> W0219 12:14:37.498566 140296832321280 deprecation.py:323] From time_compare.py:43: FastGFile.__init__ (from tensorflow.python.platform.gfile) is deprecated and will be removed in a future version.\r\n> Instructions for updating:\r\n> Use tf.gfile.GFile.\r\n> WARNING:tensorflow:From time_compare.py:44: The name tf.GraphDef is deprecated. Please use tf.compat.v1.GraphDef instead.\r\n> \r\n> W0219 12:14:37.498702 140296832321280 module_wrapper.py:139] From time_compare.py:44: The name tf.GraphDef is deprecated. Please use tf.compat.v1.GraphDef instead.\r\n> \r\n> Graph loaded.\r\n> WARNING:tensorflow:From time_compare.py:50: The name tf.Session is deprecated. Please use tf.compat.v1.Session instead.\r\n> \r\n> W0219 12:14:38.048038 140296832321280 module_wrapper.py:139] From time_compare.py:50: The name tf.Session is deprecated. Please use tf.compat.v1.Session instead.\r\n> \r\n> 2020-02-19 12:14:38.048334: I tensorflow/core/platform/cpu_feature_guard.cc:145] This TensorFlow binary is optimized with Intel(R) MKL-DNN to use the following CPU instructions in performance critical operations:  AVX2 FMA\r\n> To enable them in non-MKL-DNN operations, rebuild TensorFlow with the appropriate compiler flags.\r\n> 2020-02-19 12:14:38.070567: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 3600000000 Hz\r\n> 2020-02-19 12:14:38.071554: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x55ed8c786280 initialized for platform Host (this does not guarantee that XLA will be used). Devices:\r\n> 2020-02-19 12:14:38.071582: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version\r\n> 2020-02-19 12:14:38.072303: I tensorflow/core/common_runtime/process_util.cc:115] Creating new thread pool with default inter op setting: 2. Tune using inter_op_parallelism_threads for best performance.\r\n> Image No.0 time cost:2.7566s/home/allen/ytzx/dataset/cwfp/v4/val2014/001002_r180_81445.jpg, time:2.756582736968994\r\n> Image No.1 time cost:0.9806s/home/allen/ytzx/dataset/cwfp/v4/val2014/001006_r270_80042.jpg, average time:0.9805862903594971\r\n\r\n**And here is inference output using tensorflow installed from pypi**\r\n\r\n> WARNING:tensorflow:From time_compare.py:314: The name tf.app.run is deprecated. Please use tf.compat.v1.app.run instead.\r\n> \r\n> WARNING:tensorflow:From time_compare.py:43: FastGFile.__init__ (from tensorflow.python.platform.gfile) is deprecated and will be removed in a future version.\r\n> Instructions for updating:\r\n> Use tf.gfile.GFile.\r\n> W0219 12:15:57.491406 139925355824896 deprecation.py:323] From time_compare.py:43: FastGFile.__init__ (from tensorflow.python.platform.gfile) is deprecated and will be removed in a future version.\r\n> Instructions for updating:\r\n> Use tf.gfile.GFile.\r\n> WARNING:tensorflow:From time_compare.py:44: The name tf.GraphDef is deprecated. Please use tf.compat.v1.GraphDef instead.\r\n> \r\n> W0219 12:15:57.491531 139925355824896 deprecation_wrapper.py:119] From time_compare.py:44: The name tf.GraphDef is deprecated. Please use tf.compat.v1.GraphDef instead.\r\n> \r\n> Graph loaded.\r\n> WARNING:tensorflow:From time_compare.py:50: The name tf.Session is deprecated. Please use tf.compat.v1.Session instead.\r\n> \r\n> W0219 12:15:58.086142 139925355824896 deprecation_wrapper.py:119] From time_compare.py:50: The name tf.Session is deprecated. Please use tf.compat.v1.Session instead.\r\n> \r\n> 2020-02-19 12:15:58.086468: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n> 2020-02-19 12:15:58.110562: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 3600000000 Hz\r\n> 2020-02-19 12:15:58.111640: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x56350f20bfb0 executing computations on platform Host. Devices:\r\n> 2020-02-19 12:15:58.111652: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): <undefined>, <undefined>\r\n> 2020-02-19 12:15:58.891970: W tensorflow/compiler/jit/mark_for_compilation_pass.cc:1412] (One-time warning): Not using XLA:CPU for cluster because envvar TF_XLA_FLAGS=--tf_xla_cpu_global_jit was not set.  If you want XLA:CPU, either set that envvar, or use experimental_jit_scope to enable XLA:CPU.  To confirm that XLA is active, pass --vmodule=xla_compilation_cache=1 (as a proper command-line flag, not via TF_XLA_FLAGS) or set the envvar XLA_FLAGS=--xla_hlo_profile.\r\n> Image No.0 time cost:1.2104s/home/allen/ytzx/dataset/cwfp/v4/val2014/001002_r180_81445.jpg, time:1.2104294300079346\r\n> Image No.1 time cost:0.376s/home/allen/ytzx/dataset/cwfp/v4/val2014/001006_r270_80042.jpg, average time:0.3759894371032715\r\n> \r\nAny suggestions or thoughts would be appreciated.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36872", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36872/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36872/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36872/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36872", "id": 567277566, "node_id": "MDU6SXNzdWU1NjcyNzc1NjY=", "number": 36872, "title": "How to quant TFLite model in int8 format", "user": {"login": "rayeh5", "id": 5005947, "node_id": "MDQ6VXNlcjUwMDU5NDc=", "avatar_url": "https://avatars0.githubusercontent.com/u/5005947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rayeh5", "html_url": "https://github.com/rayeh5", "followers_url": "https://api.github.com/users/rayeh5/followers", "following_url": "https://api.github.com/users/rayeh5/following{/other_user}", "gists_url": "https://api.github.com/users/rayeh5/gists{/gist_id}", "starred_url": "https://api.github.com/users/rayeh5/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rayeh5/subscriptions", "organizations_url": "https://api.github.com/users/rayeh5/orgs", "repos_url": "https://api.github.com/users/rayeh5/repos", "events_url": "https://api.github.com/users/rayeh5/events{/privacy}", "received_events_url": "https://api.github.com/users/rayeh5/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1589976566, "node_id": "MDU6TGFiZWwxNTg5OTc2NTY2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:micro", "name": "comp:micro", "color": "3e2eea", "default": false, "description": "Related to TensorFlow Lite Microcontrollers"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jianlijianli", "id": 43797323, "node_id": "MDQ6VXNlcjQzNzk3MzIz", "avatar_url": "https://avatars3.githubusercontent.com/u/43797323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jianlijianli", "html_url": "https://github.com/jianlijianli", "followers_url": "https://api.github.com/users/jianlijianli/followers", "following_url": "https://api.github.com/users/jianlijianli/following{/other_user}", "gists_url": "https://api.github.com/users/jianlijianli/gists{/gist_id}", "starred_url": "https://api.github.com/users/jianlijianli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jianlijianli/subscriptions", "organizations_url": "https://api.github.com/users/jianlijianli/orgs", "repos_url": "https://api.github.com/users/jianlijianli/repos", "events_url": "https://api.github.com/users/jianlijianli/events{/privacy}", "received_events_url": "https://api.github.com/users/jianlijianli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jianlijianli", "id": 43797323, "node_id": "MDQ6VXNlcjQzNzk3MzIz", "avatar_url": "https://avatars3.githubusercontent.com/u/43797323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jianlijianli", "html_url": "https://github.com/jianlijianli", "followers_url": "https://api.github.com/users/jianlijianli/followers", "following_url": "https://api.github.com/users/jianlijianli/following{/other_user}", "gists_url": "https://api.github.com/users/jianlijianli/gists{/gist_id}", "starred_url": "https://api.github.com/users/jianlijianli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jianlijianli/subscriptions", "organizations_url": "https://api.github.com/users/jianlijianli/orgs", "repos_url": "https://api.github.com/users/jianlijianli/repos", "events_url": "https://api.github.com/users/jianlijianli/events{/privacy}", "received_events_url": "https://api.github.com/users/jianlijianli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-02-19T02:38:51Z", "updated_at": "2020-02-26T16:56:02Z", "closed_at": null, "author_association": "NONE", "body": "@tensorflow/micro\r\n\r\n**System information**\r\n- Host OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n   -- x86 Linux Ubuntu 16.04\r\n- TensorFlow installed from (source or binary):\r\n   -- binary\r\n- Tensorflow version (commit SHA if source):\r\n   -- 2.1.0\r\n- Target platform (e.g. Arm Mbed OS, Arduino Nano 33 etc.):\r\n   -- x86 Linux\r\n\r\n**Describe the problem**\r\n   -- How to quant TF model to int8 format so that I can use CMSIS-NN int8 APIs\r\n**Please provide the exact sequence of commands/steps when you ran into the problem**\r\n   -- I try the toco command:\r\n       toco --saved_model_dir /home/swai01/tfl-m_speech_model --output_file=./conv_int8.tflite --input_shapes=1,49,40,1 --input_arrays=Reshape_2 --output_arrays='labels_softmax' --inference_type=QUANTIZED_INT8 --mean_values=0 --std_dev_values=9.8077\r\n      but got the error message:\r\n          ValueError: This converter can only convert a single ConcreteFunction. Converting multiple functions is under development.\r\n   Thanks for your time.\r\n\r\nruey-an\r\n"}]