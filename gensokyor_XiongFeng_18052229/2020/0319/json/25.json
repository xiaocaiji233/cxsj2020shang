[{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25378", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25378/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25378/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25378/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25378", "id": 405095557, "node_id": "MDU6SXNzdWU0MDUwOTU1NTc=", "number": 25378, "title": "how to export tensorrt int8  model with savedmodel format after calibration\uff1f", "user": {"login": "rankeey", "id": 12030652, "node_id": "MDQ6VXNlcjEyMDMwNjUy", "avatar_url": "https://avatars2.githubusercontent.com/u/12030652?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rankeey", "html_url": "https://github.com/rankeey", "followers_url": "https://api.github.com/users/rankeey/followers", "following_url": "https://api.github.com/users/rankeey/following{/other_user}", "gists_url": "https://api.github.com/users/rankeey/gists{/gist_id}", "starred_url": "https://api.github.com/users/rankeey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rankeey/subscriptions", "organizations_url": "https://api.github.com/users/rankeey/orgs", "repos_url": "https://api.github.com/users/rankeey/repos", "events_url": "https://api.github.com/users/rankeey/events{/privacy}", "received_events_url": "https://api.github.com/users/rankeey/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1754777628, "node_id": "MDU6TGFiZWwxNzU0Nzc3NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu:tensorrt", "name": "comp:gpu:tensorrt", "color": "ea98ba", "default": false, "description": "Issues specific to TensorRT"}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "samikama", "id": 10539540, "node_id": "MDQ6VXNlcjEwNTM5NTQw", "avatar_url": "https://avatars0.githubusercontent.com/u/10539540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samikama", "html_url": "https://github.com/samikama", "followers_url": "https://api.github.com/users/samikama/followers", "following_url": "https://api.github.com/users/samikama/following{/other_user}", "gists_url": "https://api.github.com/users/samikama/gists{/gist_id}", "starred_url": "https://api.github.com/users/samikama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samikama/subscriptions", "organizations_url": "https://api.github.com/users/samikama/orgs", "repos_url": "https://api.github.com/users/samikama/repos", "events_url": "https://api.github.com/users/samikama/events{/privacy}", "received_events_url": "https://api.github.com/users/samikama/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "samikama", "id": 10539540, "node_id": "MDQ6VXNlcjEwNTM5NTQw", "avatar_url": "https://avatars0.githubusercontent.com/u/10539540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samikama", "html_url": "https://github.com/samikama", "followers_url": "https://api.github.com/users/samikama/followers", "following_url": "https://api.github.com/users/samikama/following{/other_user}", "gists_url": "https://api.github.com/users/samikama/gists{/gist_id}", "starred_url": "https://api.github.com/users/samikama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samikama/subscriptions", "organizations_url": "https://api.github.com/users/samikama/orgs", "repos_url": "https://api.github.com/users/samikama/repos", "events_url": "https://api.github.com/users/samikama/events{/privacy}", "received_events_url": "https://api.github.com/users/samikama/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2019-01-31T06:07:47Z", "updated_at": "2019-12-26T18:40:19Z", "closed_at": null, "author_association": "NONE", "body": "Is it possible to export a savedModel int8 model after calibration?\r\nIf it is possible, is there any demo could be offered\uff1f\r\nIf it is impossible\uff0cwhen will it maybe possible\uff1f"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25375", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25375/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25375/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25375/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25375", "id": 405083495, "node_id": "MDU6SXNzdWU0MDUwODM0OTU=", "number": 25375, "title": "TF 2.0: API symbol renames design review.", "user": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "annarev", "id": 22060313, "node_id": "MDQ6VXNlcjIyMDYwMzEz", "avatar_url": "https://avatars0.githubusercontent.com/u/22060313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/annarev", "html_url": "https://github.com/annarev", "followers_url": "https://api.github.com/users/annarev/followers", "following_url": "https://api.github.com/users/annarev/following{/other_user}", "gists_url": "https://api.github.com/users/annarev/gists{/gist_id}", "starred_url": "https://api.github.com/users/annarev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/annarev/subscriptions", "organizations_url": "https://api.github.com/users/annarev/orgs", "repos_url": "https://api.github.com/users/annarev/repos", "events_url": "https://api.github.com/users/annarev/events{/privacy}", "received_events_url": "https://api.github.com/users/annarev/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "annarev", "id": 22060313, "node_id": "MDQ6VXNlcjIyMDYwMzEz", "avatar_url": "https://avatars0.githubusercontent.com/u/22060313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/annarev", "html_url": "https://github.com/annarev", "followers_url": "https://api.github.com/users/annarev/followers", "following_url": "https://api.github.com/users/annarev/following{/other_user}", "gists_url": "https://api.github.com/users/annarev/gists{/gist_id}", "starred_url": "https://api.github.com/users/annarev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/annarev/subscriptions", "organizations_url": "https://api.github.com/users/annarev/orgs", "repos_url": "https://api.github.com/users/annarev/repos", "events_url": "https://api.github.com/users/annarev/events{/privacy}", "received_events_url": "https://api.github.com/users/annarev/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-01-31T05:07:32Z", "updated_at": "2019-01-31T05:14:50Z", "closed_at": null, "author_association": "MEMBER", "body": "TensorFlow 1.x has over 2000 endpoints total including over 500 endpoints in the root namespace. As number of symbols grows, it is important to maintain a clear structure to aid discoverability.\r\n\r\nCertain API symbol placements could be improved:\r\n\r\n- Some namespaces were created recently and might not contain all the corresponding symbols. For e.g. `tf.math` namespace was added recently. Symbols such as `tf.round` are not in `tf.math` namespace even though logically they belong in that namespace.\r\n- Some symbols are included in the root namespace even though they are rarely used (for e.g. `tf.zeta`).\r\n- Some symbols currently start with a prefix that could really be replaced by introducing a subnamespace (for e.g. `tf.string_strip` vs `tf.strings.strip`, `tf.sparse_maximum` vs `tf.sparse.maximum`).\r\n- Certain deep hierarchies seem redundant and could be flattened (for e.g. `tf.saved_model.signature_constants.CLASSIFY_INPUTS` could be moved to `tf.saved_model.CLASSIFY_INPUTS`).\r\n- To keep clear structure and reduce duplication, we want to collect all layers, losses and metrics under the `tf.keras` namespace.\r\n- In general, we want to balance flatness and browsability. Flat hierarchies allow for shorter endpoint names that are easy to remember (for e.g. `tf.add` vs `tf.math.add`). At the same time subnamespaces support easier browsability (for e.g. `tf.math` namespace would contain all math functions making it easier to discover available symbols).\r\n\r\nAdditional information about API symbol renames in TensorFlow 2.0 can be found in the RFC [here](https://github.com/tensorflow/community/blob/master/rfcs/20180827-api-names.md)."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25363", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25363/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25363/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25363/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25363", "id": 405067425, "node_id": "MDU6SXNzdWU0MDUwNjc0MjU=", "number": 25363, "title": "Feature: TF Serving compatibility with TF 2.0.", "user": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 6, "created_at": "2019-01-31T03:42:40Z", "updated_at": "2019-12-27T02:21:12Z", "closed_at": null, "author_association": "MEMBER", "body": "**[TensorFlow Serving](https://www.tensorflow.org/serving/)** is a flexible, high-performance serving system for machine learning models, designed for production environments. Serving makes it easy to deploy new algorithms and experiments, while keeping the same server architecture and APIs. TensorFlow Serving provides out-of-the-box integration with TensorFlow models, but can be easily extended to serve other types of models and data.\r\n\r\nThe purpose of this issue is to upgrade Serving to be TF 2.0 compliant. The system must be eager and distribution compatible, with tests, and all associated engineering artifacts.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25360", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25360/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25360/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25360/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25360", "id": 405065111, "node_id": "MDU6SXNzdWU0MDUwNjUxMTE=", "number": 25360, "title": "Feature: TensorFlow.js compatibility with TF 2.0.", "user": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-01-31T03:30:27Z", "updated_at": "2019-01-31T05:22:44Z", "closed_at": null, "author_association": "MEMBER", "body": "- Function inlining issue.\r\n- [SavedModel breaks in TensorFlow.js](https://github.com/tensorflow/tfjs/issues/1123)."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25357", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25357/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25357/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25357/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25357", "id": 405061009, "node_id": "MDU6SXNzdWU0MDUwNjEwMDk=", "number": 25357, "title": "Feature: Unify argument names (~70).", "user": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-01-31T03:10:06Z", "updated_at": "2019-01-31T05:23:19Z", "closed_at": null, "author_association": "MEMBER", "body": ""}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25356", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25356/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25356/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25356/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25356", "id": 405060161, "node_id": "MDU6SXNzdWU0MDUwNjAxNjE=", "number": 25356, "title": "Feature: TensorBoard compatibility with TF 2.0.", "user": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 284285184, "node_id": "MDU6TGFiZWwyODQyODUxODQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tensorboard", "name": "comp:tensorboard", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "nfelt", "id": 710113, "node_id": "MDQ6VXNlcjcxMDExMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/710113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nfelt", "html_url": "https://github.com/nfelt", "followers_url": "https://api.github.com/users/nfelt/followers", "following_url": "https://api.github.com/users/nfelt/following{/other_user}", "gists_url": "https://api.github.com/users/nfelt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nfelt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nfelt/subscriptions", "organizations_url": "https://api.github.com/users/nfelt/orgs", "repos_url": "https://api.github.com/users/nfelt/repos", "events_url": "https://api.github.com/users/nfelt/events{/privacy}", "received_events_url": "https://api.github.com/users/nfelt/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nfelt", "id": 710113, "node_id": "MDQ6VXNlcjcxMDExMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/710113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nfelt", "html_url": "https://github.com/nfelt", "followers_url": "https://api.github.com/users/nfelt/followers", "following_url": "https://api.github.com/users/nfelt/following{/other_user}", "gists_url": "https://api.github.com/users/nfelt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nfelt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nfelt/subscriptions", "organizations_url": "https://api.github.com/users/nfelt/orgs", "repos_url": "https://api.github.com/users/nfelt/repos", "events_url": "https://api.github.com/users/nfelt/events{/privacy}", "received_events_url": "https://api.github.com/users/nfelt/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-01-31T03:05:50Z", "updated_at": "2019-05-31T21:16:25Z", "closed_at": null, "author_association": "MEMBER", "body": "**Overview**\r\nThe `tf.summary` module from TF 1.x will be replaced by a new API that differs as follows:\r\n\r\n1. The **data-format-specific parts** will be defined in `tensorboard.summary`.\r\n2. The **generated summary events** will use a more extensible \"wire format\".\r\n3. The **write-side code** will use the V2 summary-writing API (today's `tf.contrib.summary`).\r\n\r\n**Background**\r\nToday three sets of summary ops exist: `tf.summary`, `tf.contrib.summary`, and `tb.summary` (aka `tensorboard.summary`).  They differ across two main dimensions: the \"summary-writing API\" which determines how user code calls the ops, and the \"wire format\" of how the summary data gets encoded in event files.  Both dimensions have legacy (V1) and new (V2) styles.  The proposed new summary ops fill in the (V2, V2) quadrant of this grid:\r\n\r\n|                                                | V1 (FileWriter, merge_summaries) | V2 (create_file_writer, eager-compatible) |\r\n|------------------------------------------------|----------------------------------|-------------------------------------------|\r\n| V1 (dedicated fields per type in tf.Summary)   | `tf.summary`    | `tf.contrib.summary`                        |\r\n| V2 (extensible tensor format, plugin metadata) | `tb.summary`  | [proposed] `tf.summary`  in TF 2.0, exporting symbols from `tb.summary`  |\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25352", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25352/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25352/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25352/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25352", "id": 405052122, "node_id": "MDU6SXNzdWU0MDUwNTIxMjI=", "number": 25352, "title": "Library Conversion: Tensor2Tensor", "user": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-01-31T02:26:27Z", "updated_at": "2019-02-27T23:25:55Z", "closed_at": null, "author_association": "MEMBER", "body": "**Tensor2Tensor**, or [T2T](https://github.com/tensorflow/tensor2tensor) for short, is a library of deep learning models and datasets designed to make deep learning more accessible and [accelerate ML research](https://research.googleblog.com/2017/06/accelerating-deep-learning-research.html). T2T is actively used and maintained by researchers and engineers within the [Google Brain team](https://research.google.com/teams/brain/) and a community of users. You can chat with the T2T team on [Gitter](https://gitter.im/tensor2tensor/Lobby) and join the [T2T Google Group](https://groups.google.com/forum/#!forum/tensor2tensor).\r\n\r\nThe purpose of this ticket will be to migrate Tensor2Tensor to the TF 2.0 API.\r\n\r\n- Convert all existing Tensor2Tensor code.\r\n- Run unit tests.\r\n- Ensure processes are well understood."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25349", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25349/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25349/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25349/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25349", "id": 405050462, "node_id": "MDU6SXNzdWU0MDUwNTA0NjI=", "number": 25349, "title": "Library Conversion: Open AI Baselines", "user": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tomerk", "id": 676357, "node_id": "MDQ6VXNlcjY3NjM1Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/676357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomerk", "html_url": "https://github.com/tomerk", "followers_url": "https://api.github.com/users/tomerk/followers", "following_url": "https://api.github.com/users/tomerk/following{/other_user}", "gists_url": "https://api.github.com/users/tomerk/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomerk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomerk/subscriptions", "organizations_url": "https://api.github.com/users/tomerk/orgs", "repos_url": "https://api.github.com/users/tomerk/repos", "events_url": "https://api.github.com/users/tomerk/events{/privacy}", "received_events_url": "https://api.github.com/users/tomerk/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tomerk", "id": 676357, "node_id": "MDQ6VXNlcjY3NjM1Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/676357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomerk", "html_url": "https://github.com/tomerk", "followers_url": "https://api.github.com/users/tomerk/followers", "following_url": "https://api.github.com/users/tomerk/following{/other_user}", "gists_url": "https://api.github.com/users/tomerk/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomerk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomerk/subscriptions", "organizations_url": "https://api.github.com/users/tomerk/orgs", "repos_url": "https://api.github.com/users/tomerk/repos", "events_url": "https://api.github.com/users/tomerk/events{/privacy}", "received_events_url": "https://api.github.com/users/tomerk/received_events", "type": "User", "site_admin": false}, {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 29, "created_at": "2019-01-31T02:18:14Z", "updated_at": "2020-02-28T06:53:14Z", "closed_at": null, "author_association": "MEMBER", "body": "**[OpenAI Baselines](https://github.com/openai/baselines)** is a set of high-quality implementations of reinforcement learning algorithms. These algorithms make it easier for the research community to replicate, refine, and identify new ideas, and creates solid baselines to build research on top of.\r\n\r\nThe purpose of this ticket will be to migrate the OpenAI Baselines library to the TF 2.0 API.\r\n\r\n- Convert OpenAI Baselines library.\r\n- Run unit tests.\r\n- Ensure processes are well understood.\r\n\r\nFor more information on OpenAI baselines, check out their blog post [here](https://blog.openai.com/openai-baselines-dqn/) - and be sure to amble around their [website](https://openai.com/), as well as the OpenAI [gym](http://gym.openai.com/)!"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25346", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25346/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25346/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25346/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25346", "id": 405046514, "node_id": "MDU6SXNzdWU0MDUwNDY1MTQ=", "number": 25346, "title": "2.0 Reference Models: NCF Model (TPU with Keras)", "user": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}, {"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-01-31T01:58:40Z", "updated_at": "2020-02-14T07:21:10Z", "closed_at": null, "author_association": "MEMBER", "body": "This is an implementation of the **Neural Collaborative Filtering** (NCF) framework with Neural Matrix Factorization (NeuMF) model as described in the [Neural Collaborative Filtering](https://arxiv.org/abs/1708.05031) paper. Current implementation is based on the code from the authors' [NCF code](https://github.com/hexiangnan/neural_collaborative_filtering) and the Stanford implementation in the [MLPerf Repo](https://github.com/mlperf/reference/tree/master/recommendation/pytorch).\r\n\r\n**Neural Collaborative Filtering** is a general framework for collaborative filtering of recommendations in which a neural network architecture is used to model user-item interactions. Unlike traditional models, NCF does _not_ resort to Matrix Factorization (MF) with an inner product on latent features of users and items. It replaces the inner product with a multi-layer perceptron that can learn an arbitrary function from data.\r\n\r\nFor the TensorFlow 1.x equivalent, please refer [here](https://github.com/tensorflow/models/blob/6518c1c7711ef1fdbe925b3c5c71e62910374e3e/official/recommendation/README.md).\r\n\r\nThe purpose of this issue is to migrate models into the TF 2.0 Keras API. Each migrated model must be eager and distribution compatible, with tests, and all associated engineering artifacts."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25341", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25341/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25341/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25341/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25341", "id": 405039356, "node_id": "MDU6SXNzdWU0MDUwMzkzNTY=", "number": 25341, "title": "2.0 Reference Models: Keras Application Set (1 GPU)", "user": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "lintian06", "id": 8652095, "node_id": "MDQ6VXNlcjg2NTIwOTU=", "avatar_url": "https://avatars3.githubusercontent.com/u/8652095?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lintian06", "html_url": "https://github.com/lintian06", "followers_url": "https://api.github.com/users/lintian06/followers", "following_url": "https://api.github.com/users/lintian06/following{/other_user}", "gists_url": "https://api.github.com/users/lintian06/gists{/gist_id}", "starred_url": "https://api.github.com/users/lintian06/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lintian06/subscriptions", "organizations_url": "https://api.github.com/users/lintian06/orgs", "repos_url": "https://api.github.com/users/lintian06/repos", "events_url": "https://api.github.com/users/lintian06/events{/privacy}", "received_events_url": "https://api.github.com/users/lintian06/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lintian06", "id": 8652095, "node_id": "MDQ6VXNlcjg2NTIwOTU=", "avatar_url": "https://avatars3.githubusercontent.com/u/8652095?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lintian06", "html_url": "https://github.com/lintian06", "followers_url": "https://api.github.com/users/lintian06/followers", "following_url": "https://api.github.com/users/lintian06/following{/other_user}", "gists_url": "https://api.github.com/users/lintian06/gists{/gist_id}", "starred_url": "https://api.github.com/users/lintian06/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lintian06/subscriptions", "organizations_url": "https://api.github.com/users/lintian06/orgs", "repos_url": "https://api.github.com/users/lintian06/repos", "events_url": "https://api.github.com/users/lintian06/events{/privacy}", "received_events_url": "https://api.github.com/users/lintian06/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2019-01-31T01:24:35Z", "updated_at": "2019-04-02T10:31:58Z", "closed_at": null, "author_association": "MEMBER", "body": "Keras Applications is the `applications` module of the Keras deep learning library. It provides model definitions and pre-trained weights for a number of popular architectures, such as VGG16, ResNet50, Xception, MobileNet, and more.\r\n\r\nThe purpose of this issue is to migrate models into the TF 2.0 Keras API. Each migrated model must be eager and distribution compatible, with tests, and all associated engineering artifacts.\r\n\r\nFor more information on tf.keras.applications, check [here](https://www.tensorflow.org/versions/r2.0/api_docs/python/tf/keras/applications)."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25339", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25339/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25339/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25339/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25339", "id": 405028383, "node_id": "MDU6SXNzdWU0MDUwMjgzODM=", "number": 25339, "title": "[BUG] gradients of `tf.cond` with float64 breaks with ResourceVariable", "user": {"login": "mayou36", "id": 17454848, "node_id": "MDQ6VXNlcjE3NDU0ODQ4", "avatar_url": "https://avatars3.githubusercontent.com/u/17454848?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mayou36", "html_url": "https://github.com/mayou36", "followers_url": "https://api.github.com/users/mayou36/followers", "following_url": "https://api.github.com/users/mayou36/following{/other_user}", "gists_url": "https://api.github.com/users/mayou36/gists{/gist_id}", "starred_url": "https://api.github.com/users/mayou36/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mayou36/subscriptions", "organizations_url": "https://api.github.com/users/mayou36/orgs", "repos_url": "https://api.github.com/users/mayou36/repos", "events_url": "https://api.github.com/users/mayou36/events{/privacy}", "received_events_url": "https://api.github.com/users/mayou36/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-01-31T00:34:18Z", "updated_at": "2019-01-31T13:17:47Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): 3 tried: binary and head (w & w/o xla)\r\n- TensorFlow version (use command below): 1.12 resp. head\r\n- Python version:3.6\r\n- Bazel version (if compiling from source):irrelevant\r\n- GCC/Compiler version (if compiling from source):irrelevant\r\n- CUDA/cuDNN version: irrelevant\r\n- GPU model and memory: irrelevant\r\n\r\n**Describe the current behavior**\r\nUsing a (resource!) Variable in tf.cond (and everything in tf.float64) breaks the gradient computation with an error like:\r\n```python\r\nTypeError: Tensors in list passed to 'inputs' of 'Merge' Op have types [float64, float32] that don't all match.\r\n```\r\n\r\nIn gradients_impl.py, _GradientsHelper (line 805) are ZerosLikeOutsideLoop produced with op.This produces in control_flow_ops.py, line 1469, (iff the variable dtype is resource) zeros with \r\n```python\r\narray_ops.zeros(gen_resource_variable_ops.variable_shape(switch_val))\r\n```\r\nThis uses the dtype of the op.outputs. But for a resource dtype, this creates float32 zeros (which then collides with all the other float64 around). Any other type therefore works.\r\n\r\nTried (next to binary 1.12) also against Master/HEAD with and without XLA (on TF compilation). Same error\r\n\r\nSolution: no idea how to get the datatype out there or something. Sorry.\r\n\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport tensorflow as tf\r\n\r\nvar1 = tf.get_variable('var1', initializer=tf.constant(42., dtype=tf.float64), use_resource=True)\r\nwith tf.Session() as sess:\r\n    sess.run(var1.initializer)\r\n    res = tf.constant(0., dtype=tf.float64)\r\n    cond1 = tf.cond(tf.constant(True), lambda: res, lambda: res + var1)\r\n    grad_cond = tf.gradients(cond1, var1)\r\n```\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25316", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25316/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25316/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25316/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25316", "id": 404722484, "node_id": "MDU6SXNzdWU0MDQ3MjI0ODQ=", "number": 25316, "title": "Tensorflow lite logs do not get enabled until any LOG(FATAL) command is not encountered", "user": {"login": "abhajaswal", "id": 25839008, "node_id": "MDQ6VXNlcjI1ODM5MDA4", "avatar_url": "https://avatars2.githubusercontent.com/u/25839008?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abhajaswal", "html_url": "https://github.com/abhajaswal", "followers_url": "https://api.github.com/users/abhajaswal/followers", "following_url": "https://api.github.com/users/abhajaswal/following{/other_user}", "gists_url": "https://api.github.com/users/abhajaswal/gists{/gist_id}", "starred_url": "https://api.github.com/users/abhajaswal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abhajaswal/subscriptions", "organizations_url": "https://api.github.com/users/abhajaswal/orgs", "repos_url": "https://api.github.com/users/abhajaswal/repos", "events_url": "https://api.github.com/users/abhajaswal/events{/privacy}", "received_events_url": "https://api.github.com/users/abhajaswal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, {"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-01-30T11:18:27Z", "updated_at": "2019-02-07T23:48:52Z", "closed_at": null, "author_association": "NONE", "body": "Tensorflow version 1.13.0 rc0 and 1.12.0 cpu version(cuda disable) for Linux ubuntu 16.0\r\n\r\nI am unable to generate any logs on console using toco tool of tensorflow.\r\n_ use export TF_CPP_MIN_LOG_LEVEL=1  , the info logs do not start to appear on console.\r\n\r\nUntil I any error case while using toco is not hit in the source code i,e when LOG(FATAL)  is encountered then all debug logs appear on console.\r\n\r\nLet me know how to enable all the logs"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25299", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25299/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25299/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25299/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25299", "id": 404556539, "node_id": "MDU6SXNzdWU0MDQ1NTY1Mzk=", "number": 25299, "title": "Dictionary as model targets for subclassed Keras models", "user": {"login": "shoyer", "id": 1217238, "node_id": "MDQ6VXNlcjEyMTcyMzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1217238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shoyer", "html_url": "https://github.com/shoyer", "followers_url": "https://api.github.com/users/shoyer/followers", "following_url": "https://api.github.com/users/shoyer/following{/other_user}", "gists_url": "https://api.github.com/users/shoyer/gists{/gist_id}", "starred_url": "https://api.github.com/users/shoyer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shoyer/subscriptions", "organizations_url": "https://api.github.com/users/shoyer/orgs", "repos_url": "https://api.github.com/users/shoyer/repos", "events_url": "https://api.github.com/users/shoyer/events{/privacy}", "received_events_url": "https://api.github.com/users/shoyer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 17, "created_at": "2019-01-30T01:08:06Z", "updated_at": "2019-10-29T17:00:19Z", "closed_at": null, "author_association": "MEMBER", "body": "It is currently possible to build subclassed Keras models with a dict of tensors as inputs, but not as outputs, e.g.,\r\n```python\r\nimport tensorflow as tf\r\n\r\ntf.enable_eager_execution()\r\n\r\nclass MyModel(tf.keras.Model):\r\n  def call(self, inputs):\r\n    return inputs\r\n  \r\nmodel = MyModel()\r\nmodel.compile(tf.keras.optimizers.Adam(), 'mean_squared_error')\r\ninputs = labels = {'a': tf.range(5.0)}\r\nmodel.fit(x=inputs, y=labels)\r\n```\r\nThis results in the error:\r\n```python-stacktrace\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-4-21d4cae99b87> in <module>()\r\n     10 model.compile(tf.keras.optimizers.Adam(), 'mean_squared_error')\r\n     11 inputs = labels = {'a': tf.range(5.0)}\r\n---> 12 model.fit(x=inputs, y=labels)\r\n\r\n/tensorflow/python/keras/engine/training.py in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_freq, max_queue_size, workers, use_multiprocessing, **kwargs)\r\n    900         steps=steps_per_epoch,\r\n    901         validation_split=validation_split,\r\n--> 902         shuffle=shuffle)\r\n    903 \r\n    904     # Prepare validation data.\r\n\r\n/tensorflow/python/keras/engine/training.py in _standardize_user_data(self, x, y, sample_weight, class_weight, batch_size, check_steps, steps_name, steps, validation_split, shuffle, extract_tensors_from_dataset)\r\n   2458           all_inputs += list(y_input)\r\n   2459         elif isinstance(y_input, dict):\r\n-> 2460           raise ValueError('You cannot pass a dictionary as model targets.')\r\n   2461         else:\r\n   2462           if (not isinstance(y_input, np.ndarray) and\r\n\r\nValueError: You cannot pass a dictionary as model targets.\r\n```\r\n\r\nI'd like to build Keras models that receive and output tensors as dictionaries -- would it be reasonable to add support for this? It currently works to specify inputs as a dict, but not labels for training moels.\r\n\r\n**System information**\r\n- TensorFlow version (you are using): development version\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\n**Will this change the current api? How?**\r\nNo, this currently results in an error.\r\n\r\n**Who will benefit with this feature?**\r\nUsers building complex models that want to keep track of multiple tensors by name instead of by position.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25295", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25295/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25295/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25295/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25295", "id": 404527438, "node_id": "MDU6SXNzdWU0MDQ1Mjc0Mzg=", "number": 25295, "title": "Data augmentation on 4-D or 5-D data", "user": {"login": "pldelisle", "id": 22298876, "node_id": "MDQ6VXNlcjIyMjk4ODc2", "avatar_url": "https://avatars2.githubusercontent.com/u/22298876?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pldelisle", "html_url": "https://github.com/pldelisle", "followers_url": "https://api.github.com/users/pldelisle/followers", "following_url": "https://api.github.com/users/pldelisle/following{/other_user}", "gists_url": "https://api.github.com/users/pldelisle/gists{/gist_id}", "starred_url": "https://api.github.com/users/pldelisle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pldelisle/subscriptions", "organizations_url": "https://api.github.com/users/pldelisle/orgs", "repos_url": "https://api.github.com/users/pldelisle/repos", "events_url": "https://api.github.com/users/pldelisle/events{/privacy}", "received_events_url": "https://api.github.com/users/pldelisle/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2019-01-29T23:07:44Z", "updated_at": "2019-03-30T20:32:33Z", "closed_at": null, "author_association": "NONE", "body": "Hi, \r\n\r\nI would like to request a new feature.\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.12, compiled with CUDA 10, NCCL, CuDNN7.\r\n- Are you willing to contribute it (Yes/No): Maybe, but as a student, time is a real constraint.\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nI would like to have data augmentation functions that accept 4-D arrays with shape [width, height, depth, channels] or 5-D Tensor of shape [batch, width, height, depth, channels]. Current supported format is only 4-D [batch, height, width, channels] or 3-D Tensor of shape [height, width, channels]. \r\nHaving functions like random rotation, random shear, and/or random flip for this data shape would be useful.\r\n\r\n**Will this change the current api? How?** \r\nNo.\r\n\r\n**Who will benefit with this feature?** \r\nAny people that works like me in medical imaging and have to deal with 3D data.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25283", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25283/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25283/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25283/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25283", "id": 404304969, "node_id": "MDU6SXNzdWU0MDQzMDQ5Njk=", "number": 25283, "title": "Tensorflow wheel install fails on s390x ", "user": {"login": "Nayana-ibm", "id": 20816038, "node_id": "MDQ6VXNlcjIwODE2MDM4", "avatar_url": "https://avatars0.githubusercontent.com/u/20816038?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nayana-ibm", "html_url": "https://github.com/Nayana-ibm", "followers_url": "https://api.github.com/users/Nayana-ibm/followers", "following_url": "https://api.github.com/users/Nayana-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/Nayana-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nayana-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nayana-ibm/subscriptions", "organizations_url": "https://api.github.com/users/Nayana-ibm/orgs", "repos_url": "https://api.github.com/users/Nayana-ibm/repos", "events_url": "https://api.github.com/users/Nayana-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/Nayana-ibm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "perfinion", "id": 363227, "node_id": "MDQ6VXNlcjM2MzIyNw==", "avatar_url": "https://avatars3.githubusercontent.com/u/363227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/perfinion", "html_url": "https://github.com/perfinion", "followers_url": "https://api.github.com/users/perfinion/followers", "following_url": "https://api.github.com/users/perfinion/following{/other_user}", "gists_url": "https://api.github.com/users/perfinion/gists{/gist_id}", "starred_url": "https://api.github.com/users/perfinion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/perfinion/subscriptions", "organizations_url": "https://api.github.com/users/perfinion/orgs", "repos_url": "https://api.github.com/users/perfinion/repos", "events_url": "https://api.github.com/users/perfinion/events{/privacy}", "received_events_url": "https://api.github.com/users/perfinion/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "perfinion", "id": 363227, "node_id": "MDQ6VXNlcjM2MzIyNw==", "avatar_url": "https://avatars3.githubusercontent.com/u/363227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/perfinion", "html_url": "https://github.com/perfinion", "followers_url": "https://api.github.com/users/perfinion/followers", "following_url": "https://api.github.com/users/perfinion/following{/other_user}", "gists_url": "https://api.github.com/users/perfinion/gists{/gist_id}", "starred_url": "https://api.github.com/users/perfinion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/perfinion/subscriptions", "organizations_url": "https://api.github.com/users/perfinion/orgs", "repos_url": "https://api.github.com/users/perfinion/repos", "events_url": "https://api.github.com/users/perfinion/events{/privacy}", "received_events_url": "https://api.github.com/users/perfinion/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-01-29T14:01:27Z", "updated_at": "2019-11-27T06:15:14Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04, 18.04 s390x\r\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: NA\r\nTensorFlow installed from (source or binary): source\r\nTensorFlow version: v1.12.0\r\nPython version: 2.7.x\r\nInstalled using virtualenv? pip? conda?: Building from source\r\nBazel version (if compiling from source): v0.15.0\r\nGCC/Compiler version (if compiling from source): 7.3.0 (Ubuntu 18.04), 5.4.0 (Ubuntu 16.04)\r\nCUDA/cuDNN version: NA\r\nGPU model and memory: NA\r\n\r\n\r\n\r\n**Describe the problem**\r\nWe have build TensorFlow v1.12.0 from source on Ubuntu 16.04, 18.04 on s390x platform. Observed below failure on installing wheel ( pip install tensorflow_wheel/tensorflow-1.12.0-cp27-cp27mu-linux_s390x.whl )\r\n```\r\nthird_party/boringssl/include/openssl/base.h:118:2: error: #error \"Unknown target CPU\"\r\n     #error \"Unknown target CPU\"\r\n CompileError: command 's390x-linux-gnu-gcc' failed with exit status 1\r\n```\r\n\r\n**Any other info / logs**\r\nLooks like it initiates grpcio installation which is throwing an error on s390x.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25279", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25279/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25279/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25279/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25279", "id": 404187660, "node_id": "MDU6SXNzdWU0MDQxODc2NjA=", "number": 25279, "title": "tf.contrib.opt.ScipyOptimizerInterface error", "user": {"login": "ciprianmihai94", "id": 9088699, "node_id": "MDQ6VXNlcjkwODg2OTk=", "avatar_url": "https://avatars0.githubusercontent.com/u/9088699?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ciprianmihai94", "html_url": "https://github.com/ciprianmihai94", "followers_url": "https://api.github.com/users/ciprianmihai94/followers", "following_url": "https://api.github.com/users/ciprianmihai94/following{/other_user}", "gists_url": "https://api.github.com/users/ciprianmihai94/gists{/gist_id}", "starred_url": "https://api.github.com/users/ciprianmihai94/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ciprianmihai94/subscriptions", "organizations_url": "https://api.github.com/users/ciprianmihai94/orgs", "repos_url": "https://api.github.com/users/ciprianmihai94/repos", "events_url": "https://api.github.com/users/ciprianmihai94/events{/privacy}", "received_events_url": "https://api.github.com/users/ciprianmihai94/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1166103538, "node_id": "MDU6TGFiZWwxMTY2MTAzNTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/contrib", "name": "contrib", "color": "5319e7", "default": false, "description": "Anything that comes under contrib directory"}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-01-29T09:07:32Z", "updated_at": "2019-02-03T14:12:30Z", "closed_at": null, "author_association": "NONE", "body": "Hello.\r\n\r\nI tried to use tf.contrib.opt.ScipyOptimizerInterface with an example code from your documentation.\r\n`vector = tf.Variable([7., 7.], 'vector')`\r\n`loss = tf.reduce_sum(tf.square(vector))`\r\n`optimizer = tf.contrib.opt.ScipyOptimizerInterface(loss, options={'maxiter': 100})`\r\n`with tf.Session() as session:`\r\n`---->optimizer.minimize(session)`.\r\n\r\nI am getting the following error: `Tensors in list passed to 'values' of 'ConcatV2' Op have types [int32, float32, float32, float32, float32, float32, float32, float32, float32, float32, int32, float32, float32, float32, float32, int32, int32, float32, float32, float32, float32] that don't all match.`\r\n\r\nOS Platform and Distribution: Ubuntu 18.04.1\r\nTensorFlow installed from: source\r\nTensorFlow version: 1.12.0\r\nPython version: 3.6\r\nBazel version: 0.21.0\r\nGCC version: 7.3.0\r\nCUDA and GPU: no running on GPU, because I don't have GPU.\r\n\r\nThank you!"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25275", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25275/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25275/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25275/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25275", "id": 404166202, "node_id": "MDU6SXNzdWU0MDQxNjYyMDI=", "number": 25275, "title": "bazel build aot armeabi-v7a so failed", "user": {"login": "sundayxcn", "id": 22168349, "node_id": "MDQ6VXNlcjIyMTY4MzQ5", "avatar_url": "https://avatars1.githubusercontent.com/u/22168349?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sundayxcn", "html_url": "https://github.com/sundayxcn", "followers_url": "https://api.github.com/users/sundayxcn/followers", "following_url": "https://api.github.com/users/sundayxcn/following{/other_user}", "gists_url": "https://api.github.com/users/sundayxcn/gists{/gist_id}", "starred_url": "https://api.github.com/users/sundayxcn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sundayxcn/subscriptions", "organizations_url": "https://api.github.com/users/sundayxcn/orgs", "repos_url": "https://api.github.com/users/sundayxcn/repos", "events_url": "https://api.github.com/users/sundayxcn/events{/privacy}", "received_events_url": "https://api.github.com/users/sundayxcn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2019-01-29T08:02:44Z", "updated_at": "2019-03-12T09:07:51Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nmacOS 10.13.6\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):\r\nbinary\r\n- TensorFlow version:\r\n1.12.0\r\n- Python version:\r\n3.6.2\r\n- Installed using virtualenv? pip? conda?:\r\nconda\r\n- Bazel version (if compiling from source):\r\n0.21.0\r\n- ndk version\r\n14b\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\nno\r\n- GPU model and memory:\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\nI have tried to perform a simple demo in //tensorflow/compiler/aot/test/test_graph_tfmatmul.pb by using this command:\r\nbazel build //tensorflow/compiler/aot/tests:my_library\r\nand have succeeded in the building procedure.\r\n\r\nHowever, when I tried to generate a .so file for an android project I got failed. The command I used is as below:\r\n```text\r\nbazel build --crosstool_top=@androidndk//:default_crosstool  --cpu=armeabi-v7a  --host_crosstool_top=@bazel_tools//tools/cpp:toolchain --cxxopt=\"-std=c++11\" //tensorflow/compiler/aot/tests:my_library\r\n```\r\nI don't know how to fix the problem. Please help.  The error message is as below:\r\n\r\n\r\n```text\r\n/private/var/tmp/_bazel_sunday/7a01d1437f77ea8b21ffc614971e2517/external/mkl_dnn/BUILD.bazel:71:1: C++ compilation of rule '@mkl_dnn//:mkldnn_single_threaded' failed (Exit 1)\r\nIn file included from external/mkl_dnn/src/common/utils.cpp:22:\r\nIn file included from external/androidndk/ndk/toolchains/llvm/prebuilt/darwin-x86_64/bin/../lib64/clang/3.8.275480/include/xmmintrin.h:27:\r\nexternal/androidndk/ndk/toolchains/llvm/prebuilt/darwin-x86_64/bin/../lib64/clang/3.8.275480/include/mmintrin.h:47:5: error: use of undeclared identifier '__builtin_ia32_emms'; did you mean '__builtin_isless'?\r\n    __builtin_ia32_emms();\r\n    ^\r\nexternal/androidndk/ndk/toolchains/llvm/prebuilt/darwin-x86_64/bin/../lib64/clang/3.8.275480/include/mmintrin.h:47:5: note: '__builtin_isless' declared here\r\nexternal/androidndk/ndk/toolchains/llvm/prebuilt/darwin-x86_64/bin/../lib64/clang/3.8.275480/include/mmintrin.h:47:25: error: too few arguments to function call, expected 2, have 0\r\n    __builtin_ia32_emms();\r\n                        ^\r\nexternal/androidndk/ndk/toolchains/llvm/prebuilt/darwin-x86_64/bin/../lib64/clang/3.8.275480/include/mmintrin.h:64:19: error: use of undeclared identifier '__builtin_ia32_vec_init_v2si'\r\n    return (__m64)__builtin_ia32_vec_init_v2si(__i, 0);\r\n                  ^\r\nexternal/androidndk/ndk/toolchains/llvm/prebuilt/darwin-x86_64/bin/../lib64/clang/3.8.275480/include/mmintrin.h:81:12: error: use of undeclared identifier '__builtin_ia32_vec_ext_v2si'\r\n    return __builtin_ia32_vec_ext_v2si((__v2si)__m, 0);\r\n           ^\r\nexternal/androidndk/ndk/toolchains/llvm/prebuilt/darwin-x86_64/bin/../lib64/clang/3.8.275480/include/mmintrin.h:143:19: error: use of undeclared identifier '__builtin_ia32_packsswb'\r\n    return (__m64)__builtin_ia32_packsswb((__v4hi)__m1, (__v4hi)__m2);\r\n                  ^\r\nexternal/androidndk/ndk/toolchains/llvm/prebuilt/darwin-x86_64/bin/../lib64/clang/3.8.275480/include/mmintrin.h:173:19: error: use of undeclared identifier '__builtin_ia32_packssdw'\r\n    return (__m64)__builtin_ia32_packssdw((__v2si)__m1, (__v2si)__m2);\r\n                  ^\r\nexternal/androidndk/ndk/toolchains/llvm/prebuilt/darwin-x86_64/bin/../lib64/clang/3.8.275480/include/mmintrin.h:203:19: error: use of undeclared identifier '__builtin_ia32_packuswb'\r\n    return (__m64)__builtin_ia32_packuswb((__v4hi)__m1, (__v4hi)__m2);\r\n                  ^\r\nexternal/androidndk/ndk/toolchains/llvm/prebuilt/darwin-x86_64/bin/../lib64/clang/3.8.275480/include/mmintrin.h:230:19: error: use of undeclared identifier '__builtin_ia32_punpckhbw'\r\n    return (__m64)__builtin_ia32_punpckhbw((__v8qi)__m1, (__v8qi)__m2);\r\n                  ^\r\nexternal/androidndk/ndk/toolchains/llvm/prebuilt/darwin-x86_64/bin/../lib64/clang/3.8.275480/include/mmintrin.h:253:19: error: use of undeclared identifier '__builtin_ia32_punpckhwd'\r\n    return (__m64)__builtin_ia32_punpckhwd((__v4hi)__m1, (__v4hi)__m2);\r\n                  ^\r\nexternal/androidndk/ndk/toolchains/llvm/prebuilt/darwin-x86_64/bin/../lib64/clang/3.8.275480/include/mmintrin.h:274:19: error: use of undeclared identifier '__builtin_ia32_punpckhdq'\r\n    return (__m64)__builtin_ia32_punpckhdq((__v2si)__m1, (__v2si)__m2);\r\n                  ^\r\nexternal/androidndk/ndk/toolchains/llvm/prebuilt/darwin-x86_64/bin/../lib64/clang/3.8.275480/include/mmintrin.h:301:19: error: use of undeclared identifier '__builtin_ia32_punpcklbw'\r\n    return (__m64)__builtin_ia32_punpcklbw((__v8qi)__m1, (__v8qi)__m2);\r\n                  ^\r\nexternal/androidndk/ndk/toolchains/llvm/prebuilt/darwin-x86_64/bin/../lib64/clang/3.8.275480/include/mmintrin.h:324:19: error: use of undeclared identifier '__builtin_ia32_punpcklwd'\r\n    return (__m64)__builtin_ia32_punpcklwd((__v4hi)__m1, (__v4hi)__m2);\r\n                  ^\r\nexternal/androidndk/ndk/toolchains/llvm/prebuilt/darwin-x86_64/bin/../lib64/clang/3.8.275480/include/mmintrin.h:345:19: error: use of undeclared identifier '__builtin_ia32_punpckldq'\r\n    return (__m64)__builtin_ia32_punpckldq((__v2si)__m1, (__v2si)__m2);\r\n                  ^\r\nexternal/androidndk/ndk/toolchains/llvm/prebuilt/darwin-x86_64/bin/../lib64/clang/3.8.275480/include/mmintrin.h:366:19: error: use of undeclared identifier '__builtin_ia32_paddb'; did you mean '__builtin_arm_qadd'?\r\n    return (__m64)__builtin_ia32_paddb((__v8qi)__m1, (__v8qi)__m2);\r\n                  ^\r\nexternal/androidndk/ndk/toolchains/llvm/prebuilt/darwin-x86_64/bin/../lib64/clang/3.8.275480/include/mmintrin.h:366:19: note: '__builtin_arm_qadd' declared here\r\nexternal/androidndk/ndk/toolchains/llvm/prebuilt/darwin-x86_64/bin/../lib64/clang/3.8.275480/include/mmintrin.h:366:40: error: cannot initialize a parameter of type 'int' with an rvalue of type '__v8qi' (vector of 8 'char' values)\r\n    return (__m64)__builtin_ia32_paddb((__v8qi)__m1, (__v8qi)__m2);\r\n                                       ^~~~~~~~~~~~\r\nexternal/androidndk/ndk/toolchains/llvm/prebuilt/darwin-x86_64/bin/../lib64/clang/3.8.275480/include/mmintrin.h:387:19: error: use of undeclared identifier '__builtin_ia32_paddw'; did you mean '__builtin_arm_qadd'?\r\n    return (__m64)__builtin_ia32_paddw((__v4hi)__m1, (__v4hi)__m2);\r\n                  ^\r\nexternal/androidndk/ndk/toolchains/llvm/prebuilt/darwin-x86_64/bin/../lib64/clang/3.8.275480/include/mmintrin.h:366:19: note: '__builtin_arm_qadd' declared here\r\n    return (__m64)__builtin_ia32_paddb((__v8qi)__m1, (__v8qi)__m2);\r\n                  ^\r\nexternal/androidndk/ndk/toolchains/llvm/prebuilt/darwin-x86_64/bin/../lib64/clang/3.8.275480/include/mmintrin.h:387:40: error: cannot initialize a parameter of type 'int' with an rvalue of type '__v4hi' (vector of 4 'short' values)\r\n    return (__m64)__builtin_ia32_paddw((__v4hi)__m1, (__v4hi)__m2);\r\n                                       ^~~~~~~~~~~~\r\nexternal/androidndk/ndk/toolchains/llvm/prebuilt/darwin-x86_64/bin/../lib64/clang/3.8.275480/include/mmintrin.h:408:19: error: use of undeclared identifier '__builtin_ia32_paddd'; did you mean '__builtin_arm_qadd'?\r\n    return (__m64)__builtin_ia32_paddd((__v2si)__m1, (__v2si)__m2);\r\n                  ^\r\nexternal/androidndk/ndk/toolchains/llvm/prebuilt/darwin-x86_64/bin/../lib64/clang/3.8.275480/include/mmintrin.h:366:19: note: '__builtin_arm_qadd' declared here\r\n    return (__m64)__builtin_ia32_paddb((__v8qi)__m1, (__v8qi)__m2);\r\n                  ^\r\nexternal/androidndk/ndk/toolchains/llvm/prebuilt/darwin-x86_64/bin/../lib64/clang/3.8.275480/include/mmintrin.h:408:40: error: cannot initialize a parameter of type 'int' with an rvalue of type '__v2si' (vector of 2 'int' values)\r\n    return (__m64)__builtin_ia32_paddd((__v2si)__m1, (__v2si)__m2);\r\n                                       ^~~~~~~~~~~~\r\nfatal error: too many errors emitted, stopping now [-ferror-limit=]\r\n20 errors generated.\r\nTarget //tensorflow/compiler/aot/tests:my_library failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nINFO: Elapsed time: 1.407s, Critical Path: 0.28s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully\r\n```\r\nthe content of the bazel BUILD file:\r\n```text\r\nload(\"//tensorflow/compiler/aot:tfcompile.bzl\", \"tf_library\")\r\n\r\ntf_library(\r\n    name = \"test_graph_tfmatmul\",\r\n    cpp_class = \"foo::bar::MatMulComp\",\r\n    graph = \"test_graph_tfmatmul.pb\",\r\n    config = \"test_graph_tfmatmul.config.pbtxt\",\r\n)\r\n\r\ncc_library(\r\n    name = \"my_library\",\r\n    srcs = [\r\n        \"my_code.cc\",  # include test_graph_tfmatmul.h to access the generated header\r\n    ],\r\n    hdrs = [\"my_code.h\"],\r\n    deps = [\r\n        \":test_graph_tfmatmul\",  # link in the generated object file\r\n        \"//third_party/eigen3\",\r\n    ],\r\n    linkopts = [\r\n        \"-lpthread\",\r\n    ]\r\n)\r\n```\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25252", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25252/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25252/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25252/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25252", "id": 403806464, "node_id": "MDU6SXNzdWU0MDM4MDY0NjQ=", "number": 25252, "title": "windows c_api error with tensorflow.dll", "user": {"login": "supermanxxx", "id": 33435887, "node_id": "MDQ6VXNlcjMzNDM1ODg3", "avatar_url": "https://avatars0.githubusercontent.com/u/33435887?v=4", "gravatar_id": "", "url": "https://api.github.com/users/supermanxxx", "html_url": "https://github.com/supermanxxx", "followers_url": "https://api.github.com/users/supermanxxx/followers", "following_url": "https://api.github.com/users/supermanxxx/following{/other_user}", "gists_url": "https://api.github.com/users/supermanxxx/gists{/gist_id}", "starred_url": "https://api.github.com/users/supermanxxx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/supermanxxx/subscriptions", "organizations_url": "https://api.github.com/users/supermanxxx/orgs", "repos_url": "https://api.github.com/users/supermanxxx/repos", "events_url": "https://api.github.com/users/supermanxxx/events{/privacy}", "received_events_url": "https://api.github.com/users/supermanxxx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-01-28T13:11:00Z", "updated_at": "2019-06-11T08:23:11Z", "closed_at": null, "author_association": "NONE", "body": "I tried to compile on windows c program with tenserflow c api and tenserflow.dll from https://storage.googleapis.com/tensorflow/libtensorflow/libtensorflow-cpu-windows-x86_64-1.12.0.zip founded on https://www.tensorflow.org/install/lang_c. \r\nThis example:\r\n#include <stdio.h>\r\n#include <tensorflow/c/c_api.h>\r\n\r\nint main() {\r\n  printf(\"Hello from TensorFlow C library version %s\\n\", TF_Version());\r\n  return 0;\r\n}\r\n\r\nCompiling is success, but when i have run it, i recieved a mistake that libtenserflow.so not found. Its look like that tensorfow,dll from https://storage.googleapis.com/tensorflow/libtensorflow/libtensorflow-cpu-windows-x86_64-1.12.0.zip was builded with some mistakes for windows sistem, becaurse libtensorflow.so is a target for Linux.\r\n\r\nCan you explain or fix this?  \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25239", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25239/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25239/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25239/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25239", "id": 403651248, "node_id": "MDU6SXNzdWU0MDM2NTEyNDg=", "number": 25239, "title": "Build issue of \"cannot find symbol class Fill where T is a type-variable: T extends Object declared in class Zeros\" still persists, when building Bazel. ", "user": {"login": "anamozov", "id": 27653152, "node_id": "MDQ6VXNlcjI3NjUzMTUy", "avatar_url": "https://avatars0.githubusercontent.com/u/27653152?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anamozov", "html_url": "https://github.com/anamozov", "followers_url": "https://api.github.com/users/anamozov/followers", "following_url": "https://api.github.com/users/anamozov/following{/other_user}", "gists_url": "https://api.github.com/users/anamozov/gists{/gist_id}", "starred_url": "https://api.github.com/users/anamozov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anamozov/subscriptions", "organizations_url": "https://api.github.com/users/anamozov/orgs", "repos_url": "https://api.github.com/users/anamozov/repos", "events_url": "https://api.github.com/users/anamozov/events{/privacy}", "received_events_url": "https://api.github.com/users/anamozov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1222092379, "node_id": "MDU6TGFiZWwxMjIyMDkyMzc5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:bazel", "name": "subtype:bazel", "color": "b619ea", "default": false, "description": "Bazel related Build_Installation issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2019-01-28T04:57:45Z", "updated_at": "2019-10-24T16:14:55Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Ubuntu 16.04 LTS:\r\n- TensorFlow installed from source:\r\n- TensorFlow version 1.12:\r\n- Python version 2.7:\r\n- Bazel version 0.21.0:\r\n\r\n**Describe the problem**\r\nI am going to build Tensorflow Object Detection API Android demo using Bazel which is **def nativeBuildSystem = 'bazel'** But got the following error _**error: cannot find symbol class Fill where T is a type-variable: T extends Object declared in class Zeros **_\r\nI followed the instruction given [https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/android/README.md](url). All steps were completed, except this [https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/android/README.md#android-studio-with-bazel](url), which is building the demo using Android Studio and Bazel. This step is important for my project since Object tracking option requires Bazel. \r\n\r\n**Any other info / logs**\r\n _**Android Studio Version: 3.3**_\r\n_**Gradle version: 3.3.0**_\r\nAny of the instructions and suggestions in either [https://github.com/tensorflow/tensorflow/issues/21431](url), or [https://github.com/tensorflow/tensorflow/issues/23457](url) **DID NOT HELP**, however issues were closed. \r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25222", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25222/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25222/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25222/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25222", "id": 403523245, "node_id": "MDU6SXNzdWU0MDM1MjMyNDU=", "number": 25222, "title": "Duplicated Java outer classname", "user": {"login": "YuanWenqing", "id": 12150401, "node_id": "MDQ6VXNlcjEyMTUwNDAx", "avatar_url": "https://avatars0.githubusercontent.com/u/12150401?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YuanWenqing", "html_url": "https://github.com/YuanWenqing", "followers_url": "https://api.github.com/users/YuanWenqing/followers", "following_url": "https://api.github.com/users/YuanWenqing/following{/other_user}", "gists_url": "https://api.github.com/users/YuanWenqing/gists{/gist_id}", "starred_url": "https://api.github.com/users/YuanWenqing/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YuanWenqing/subscriptions", "organizations_url": "https://api.github.com/users/YuanWenqing/orgs", "repos_url": "https://api.github.com/users/YuanWenqing/repos", "events_url": "https://api.github.com/users/YuanWenqing/events{/privacy}", "received_events_url": "https://api.github.com/users/YuanWenqing/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1133285679, "node_id": "MDU6TGFiZWwxMTMzMjg1Njc5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:xla", "name": "comp:xla", "color": "0052cc", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sjamesr", "id": 4641539, "node_id": "MDQ6VXNlcjQ2NDE1Mzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/4641539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjamesr", "html_url": "https://github.com/sjamesr", "followers_url": "https://api.github.com/users/sjamesr/followers", "following_url": "https://api.github.com/users/sjamesr/following{/other_user}", "gists_url": "https://api.github.com/users/sjamesr/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjamesr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjamesr/subscriptions", "organizations_url": "https://api.github.com/users/sjamesr/orgs", "repos_url": "https://api.github.com/users/sjamesr/repos", "events_url": "https://api.github.com/users/sjamesr/events{/privacy}", "received_events_url": "https://api.github.com/users/sjamesr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sjamesr", "id": 4641539, "node_id": "MDQ6VXNlcjQ2NDE1Mzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/4641539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjamesr", "html_url": "https://github.com/sjamesr", "followers_url": "https://api.github.com/users/sjamesr/followers", "following_url": "https://api.github.com/users/sjamesr/following{/other_user}", "gists_url": "https://api.github.com/users/sjamesr/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjamesr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjamesr/subscriptions", "organizations_url": "https://api.github.com/users/sjamesr/orgs", "repos_url": "https://api.github.com/users/sjamesr/repos", "events_url": "https://api.github.com/users/sjamesr/events{/privacy}", "received_events_url": "https://api.github.com/users/sjamesr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-01-27T07:30:10Z", "updated_at": "2020-01-07T01:10:36Z", "closed_at": null, "author_association": "NONE", "body": "**Describe the current behavior**\r\nOption values of `java_outer_classname` in `tensorflow/compiler/tf2xla/host_compute_metadata.proto` and `tensorflow/compiler/tf2xla/tf2xla.proto` are the same, result in protoc failure for Java:\r\n\r\n~~~\r\n> protoc: stdout: . stderr: tensorflow/compiler/xla/rpc/xla_service.proto: warning: Import tensorflow/compiler/xla/xla_data.proto but not used.\r\n  tensorflow/core/protobuf/replay_log.proto: warning: Import tensorflow/core/framework/graph.proto but not used.\r\n  tensorflow/core/protobuf/replay_log.proto: warning: Import tensorflow/core/protobuf/cluster.proto but not used.\r\n  org/tensorflow/tf2xla/Tf2XlaProtos.java: Tried to write the same file twice.\r\n~~~\r\n\r\n**Describe the expected behavior**\r\nprotoc succeeds without error.\r\n`java_outer_classname` in `tensorflow/compiler/tf2xla/host_compute_metadata.proto` may be renamed to `HostComputeMetadataProtos`\r\n\r\n**Code to reproduce the issue**\r\n\r\nJust protoc\r\n\r\n**Other info / logs**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25218", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25218/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25218/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25218/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25218", "id": 403490683, "node_id": "MDU6SXNzdWU0MDM0OTA2ODM=", "number": 25218, "title": "Complex step derivatives", "user": {"login": "proteneer", "id": 2280724, "node_id": "MDQ6VXNlcjIyODA3MjQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/2280724?v=4", "gravatar_id": "", "url": "https://api.github.com/users/proteneer", "html_url": "https://github.com/proteneer", "followers_url": "https://api.github.com/users/proteneer/followers", "following_url": "https://api.github.com/users/proteneer/following{/other_user}", "gists_url": "https://api.github.com/users/proteneer/gists{/gist_id}", "starred_url": "https://api.github.com/users/proteneer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/proteneer/subscriptions", "organizations_url": "https://api.github.com/users/proteneer/orgs", "repos_url": "https://api.github.com/users/proteneer/repos", "events_url": "https://api.github.com/users/proteneer/events{/privacy}", "received_events_url": "https://api.github.com/users/proteneer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-01-26T22:27:56Z", "updated_at": "2019-03-18T20:00:31Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.12\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nIs it possible to implement the complex-step derivative method as a way to compute gradients? This would presumably require a \"fairly simple\" change of traversing the Ops of the graph, copying each one, and modifying its args from Real to Complex numbers and doing a 1e-16 delta in imaginary space. It may allow for easier computation of full Jacobians and Hessians. \r\n\r\n**Will this change the current api? How?**\r\nI'm not sure.\r\n\r\n**Who will benefit with this feature?**\r\nPeople who need full rank Jacobian/Hessians.\r\n\r\n**Any Other info.**\r\nReference paper:\r\n\r\nhttp://mdolab.engin.umich.edu/sites/default/files/Martins2003CSD.pdf\r\n\r\nThe trick is basically to convert real numbers into complex numbers, and doing a small delta in imaginary space. Since many of tensorflow's ops already naturally support complex numbers, this seems like something that's doable.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25215", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25215/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25215/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25215/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25215", "id": 403437425, "node_id": "MDU6SXNzdWU0MDM0Mzc0MjU=", "number": 25215, "title": "lite: non-standard variable-length arrays", "user": {"login": "shibe2", "id": 25643785, "node_id": "MDQ6VXNlcjI1NjQzNzg1", "avatar_url": "https://avatars2.githubusercontent.com/u/25643785?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shibe2", "html_url": "https://github.com/shibe2", "followers_url": "https://api.github.com/users/shibe2/followers", "following_url": "https://api.github.com/users/shibe2/following{/other_user}", "gists_url": "https://api.github.com/users/shibe2/gists{/gist_id}", "starred_url": "https://api.github.com/users/shibe2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shibe2/subscriptions", "organizations_url": "https://api.github.com/users/shibe2/orgs", "repos_url": "https://api.github.com/users/shibe2/repos", "events_url": "https://api.github.com/users/shibe2/events{/privacy}", "received_events_url": "https://api.github.com/users/shibe2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-01-26T12:29:59Z", "updated_at": "2019-01-28T23:55:14Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Arch Linux\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: commit [01dec19](https://github.com/tensorflow/tensorflow/tree/01dec19e827ab46ff7ff5dbd6142ba5a26efc4da)\r\n- GCC/Compiler version (if compiling from source): gcc 8.2.1 20181127\r\n\r\n**Describe the problem**\r\n\r\nStructures `TfLiteIntArray` and `TfLiteFloatArray` have flexible array member `data`, which is not supported by the C++ standard. The header file name \"c_api_internal.h\" suggests that it's \"C API\" and \"internal API\", but it gets indirectly included by user C++ code via \"interpreter.h\". Although in practice it may not cause problems other than compiler warnings, it may still worth rewriting in standard C++ if the fix is easy and doesn't interfere with other code.\r\n\r\nI propose using arrays of length 1:\r\n\r\n    typedef struct {\r\n      int size;\r\n      int data[1];\r\n    } TfLiteIntArray;\r\n\r\n    typedef struct {\r\n      int size;\r\n      float data[1];\r\n    } TfLiteFloatArray;\r\n\r\nThe dynamic size then can be calculated as follows:\r\n\r\n    offsetof(TfLiteIntArray, data) + sizeof(int) * size\r\n\r\nand\r\n\r\n    offsetof(TfLiteFloatArray, data) + sizeof(float) * size\r\n\r\nI checked that the dynamic size is always obtained via the functions `TfLiteIntArrayGetSizeInBytes` and `TfLiteFloatArrayGetSizeInBytes`. So only these functions would need to be changed, and no other code is affected.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\nCompile tensorflow/tensorflow/lite/examples/minimal/minimal.cc with -Wpedantic."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25214", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25214/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25214/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25214/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25214", "id": 403432787, "node_id": "MDU6SXNzdWU0MDM0MzI3ODc=", "number": 25214, "title": "lite: incorrectly written comparison in slice.cc", "user": {"login": "shibe2", "id": 25643785, "node_id": "MDQ6VXNlcjI1NjQzNzg1", "avatar_url": "https://avatars2.githubusercontent.com/u/25643785?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shibe2", "html_url": "https://github.com/shibe2", "followers_url": "https://api.github.com/users/shibe2/followers", "following_url": "https://api.github.com/users/shibe2/following{/other_user}", "gists_url": "https://api.github.com/users/shibe2/gists{/gist_id}", "starred_url": "https://api.github.com/users/shibe2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shibe2/subscriptions", "organizations_url": "https://api.github.com/users/shibe2/orgs", "repos_url": "https://api.github.com/users/shibe2/repos", "events_url": "https://api.github.com/users/shibe2/events{/privacy}", "received_events_url": "https://api.github.com/users/shibe2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "shibe2", "id": 25643785, "node_id": "MDQ6VXNlcjI1NjQzNzg1", "avatar_url": "https://avatars2.githubusercontent.com/u/25643785?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shibe2", "html_url": "https://github.com/shibe2", "followers_url": "https://api.github.com/users/shibe2/followers", "following_url": "https://api.github.com/users/shibe2/following{/other_user}", "gists_url": "https://api.github.com/users/shibe2/gists{/gist_id}", "starred_url": "https://api.github.com/users/shibe2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shibe2/subscriptions", "organizations_url": "https://api.github.com/users/shibe2/orgs", "repos_url": "https://api.github.com/users/shibe2/repos", "events_url": "https://api.github.com/users/shibe2/events{/privacy}", "received_events_url": "https://api.github.com/users/shibe2/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "shibe2", "id": 25643785, "node_id": "MDQ6VXNlcjI1NjQzNzg1", "avatar_url": "https://avatars2.githubusercontent.com/u/25643785?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shibe2", "html_url": "https://github.com/shibe2", "followers_url": "https://api.github.com/users/shibe2/followers", "following_url": "https://api.github.com/users/shibe2/following{/other_user}", "gists_url": "https://api.github.com/users/shibe2/gists{/gist_id}", "starred_url": "https://api.github.com/users/shibe2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shibe2/subscriptions", "organizations_url": "https://api.github.com/users/shibe2/orgs", "repos_url": "https://api.github.com/users/shibe2/repos", "events_url": "https://api.github.com/users/shibe2/events{/privacy}", "received_events_url": "https://api.github.com/users/shibe2/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-01-26T11:26:47Z", "updated_at": "2019-01-28T23:56:13Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Arch Linux\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): commit [01dec19](https://github.com/tensorflow/tensorflow/tree/01dec19e827ab46ff7ff5dbd6142ba5a26efc4da)\r\n- GCC/Compiler version (if compiling from source): gcc 8.2.1 20181127\r\n\r\n**Describe the current behavior**\r\n\r\nAn assertion in [tensorflow/lite/kernels/slice.cc](https://github.com/tensorflow/tensorflow/blob/01dec19e827ab46ff7ff5dbd6142ba5a26efc4da/tensorflow/lite/kernels/slice.cc#L120):\r\n\r\n    TF_LITE_ENSURE(context, NumDimensions(begin) == NumDimensions(size) == 1);\r\n\r\nIt evaluates the first `==` and then compares the result (true or false) with 1. It's probably not what's intended.\r\n\r\n**Describe the expected behavior**\r\n\r\nBased on the description of Slice, I believe, it should be:\r\n\r\n    TF_LITE_ENSURE(context, NumDimensions(begin) == 1 && NumDimensions(size) == 1);"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25198", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25198/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25198/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25198/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25198", "id": 403217034, "node_id": "MDU6SXNzdWU0MDMyMTcwMzQ=", "number": 25198, "title": "Build from source in RelWithDebInfo build type, get a error : LNK 1248 image size (10068FDA8) exceeds maximum allowable size (FFFFFFFF)", "user": {"login": "gyp2448565528", "id": 33481094, "node_id": "MDQ6VXNlcjMzNDgxMDk0", "avatar_url": "https://avatars1.githubusercontent.com/u/33481094?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gyp2448565528", "html_url": "https://github.com/gyp2448565528", "followers_url": "https://api.github.com/users/gyp2448565528/followers", "following_url": "https://api.github.com/users/gyp2448565528/following{/other_user}", "gists_url": "https://api.github.com/users/gyp2448565528/gists{/gist_id}", "starred_url": "https://api.github.com/users/gyp2448565528/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gyp2448565528/subscriptions", "organizations_url": "https://api.github.com/users/gyp2448565528/orgs", "repos_url": "https://api.github.com/users/gyp2448565528/repos", "events_url": "https://api.github.com/users/gyp2448565528/events{/privacy}", "received_events_url": "https://api.github.com/users/gyp2448565528/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false, "description": ""}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-01-25T15:57:47Z", "updated_at": "2019-02-21T21:08:31Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS:  Windows10 64bit pro  32g RAM\r\n- TensorFlow version:  r1.10\r\n- Python version:  3.5.2\r\n- cmake version : 3.6.3\r\n- GCC/Compiler version : VS2015 update3\r\n- CUDA/cuDNN version: CUDA9.0 Cudnn7.0\r\n- GPU model and memory:GTX1080 8G\r\n- sigwin version :3.0.10\r\n\r\n**Describe the problem**\r\nI have built from source in Release build type successfuly.\r\nBut when I try to build it in RelWithDebInfo , many errors occurred :\r\nFatal error LNK1248: image size (10068FDA8) exceeds maximum allowable size (FFFFFFFF) \r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n1. I used cmake-gui 3.6.3 to generate the project with tensorflow_ENABLE_GPU is ON and tensorflow_BUILD_SHARED_LIB is ON\r\n\r\n2. I used the VS2015 x64 x86 cross tools Command Prompt to open the tensorflow.sln\r\n\r\n3. Change build type from Debug to RelWithDebInfo  , Choose Build->ALL_BUILD.\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nFatal error LNK1248: image size (10068FDA8) exceeds maximum allowable size (FFFFFFFF) \r\ntf_core_kernels\tD:\\tensorflow-r1.10\\tensorflow-r1.10\\tensorflow\\contrib\\cmake\\build\\tf_core_kernels.dir\\RelWithDebInfo\\tf_core_kernels.lib\r\n\r\nFatal error LNK1248: image size(100206D1B) exceeds maximum allowable size (FFFFFFFF) tensorflow_static\tD:\\tensorflow-r1.10\\tensorflow-r1.10\\tensorflow\\contrib\\cmake\\build\\RelWithDebInfo\\tensorflow_static.lib\r\n\r\nFatal error LNK1248: image size(100062160)exceeds maximum allowable size(FFFFFFFF)\tpywrap_tensorflow_internal_static\tD:\\tensorflow-r1.10\\tensorflow-r1.10\\tensorflow\\contrib\\cmake\\build\\RelWithDebInfo\\pywrap_tensorflow_internal_static.lib\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25181", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25181/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25181/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25181/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25181", "id": 402945220, "node_id": "MDU6SXNzdWU0MDI5NDUyMjA=", "number": 25181, "title": "Accept h5py.Group in tf.keras save/load functions", "user": {"login": "bolau", "id": 488733, "node_id": "MDQ6VXNlcjQ4ODczMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/488733?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bolau", "html_url": "https://github.com/bolau", "followers_url": "https://api.github.com/users/bolau/followers", "following_url": "https://api.github.com/users/bolau/following{/other_user}", "gists_url": "https://api.github.com/users/bolau/gists{/gist_id}", "starred_url": "https://api.github.com/users/bolau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bolau/subscriptions", "organizations_url": "https://api.github.com/users/bolau/orgs", "repos_url": "https://api.github.com/users/bolau/repos", "events_url": "https://api.github.com/users/bolau/events{/privacy}", "received_events_url": "https://api.github.com/users/bolau/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 4, "created_at": "2019-01-24T23:46:20Z", "updated_at": "2019-03-22T00:15:34Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 1.13\r\n- Are you willing to contribute it (Yes/No): yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nThe save_model function in tf.keras.models currently accepts a filepath or a h5py.File model.\r\nIt would be nice if this was generalized to accepting h5py.Group objects. This makes it possible to store more than one model in one h5py file, or combine it with other objects.\r\nThis change has been implemented in keras.io as well (I'm not the OP), and it would be very nice to see this in TF.keras as well: \r\n* https://github.com/keras-team/keras/issues/10905 \r\n* https://github.com/keras-team/keras/pull/10912\r\n\r\n**Will this change the current api? How?**\r\nsave_model and load_model would accept filepaths and h5py.Group, which is more general.\r\n\r\n**Who will benefit with this feature?**\r\nEverybody using the keras h5py saving/loading options who wants to store complexer models such as ensembles.\r\n\r\nHappy to provide a PR if this has a chance to be merged.\r\n\r\nBest, Boris"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25165", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25165/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25165/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25165/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25165", "id": 402590891, "node_id": "MDU6SXNzdWU0MDI1OTA4OTE=", "number": 25165, "title": "Contrib package initialization is broken in 1.13.0.rc0", "user": {"login": "dmitrievanthony", "id": 1028969, "node_id": "MDQ6VXNlcjEwMjg5Njk=", "avatar_url": "https://avatars3.githubusercontent.com/u/1028969?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmitrievanthony", "html_url": "https://github.com/dmitrievanthony", "followers_url": "https://api.github.com/users/dmitrievanthony/followers", "following_url": "https://api.github.com/users/dmitrievanthony/following{/other_user}", "gists_url": "https://api.github.com/users/dmitrievanthony/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmitrievanthony/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmitrievanthony/subscriptions", "organizations_url": "https://api.github.com/users/dmitrievanthony/orgs", "repos_url": "https://api.github.com/users/dmitrievanthony/repos", "events_url": "https://api.github.com/users/dmitrievanthony/events{/privacy}", "received_events_url": "https://api.github.com/users/dmitrievanthony/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1166103538, "node_id": "MDU6TGFiZWwxMTY2MTAzNTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/contrib", "name": "contrib", "color": "5319e7", "default": false, "description": "Anything that comes under contrib directory"}], "state": "open", "locked": false, "assignee": {"login": "case540", "id": 1299636, "node_id": "MDQ6VXNlcjEyOTk2MzY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1299636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/case540", "html_url": "https://github.com/case540", "followers_url": "https://api.github.com/users/case540/followers", "following_url": "https://api.github.com/users/case540/following{/other_user}", "gists_url": "https://api.github.com/users/case540/gists{/gist_id}", "starred_url": "https://api.github.com/users/case540/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/case540/subscriptions", "organizations_url": "https://api.github.com/users/case540/orgs", "repos_url": "https://api.github.com/users/case540/repos", "events_url": "https://api.github.com/users/case540/events{/privacy}", "received_events_url": "https://api.github.com/users/case540/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "case540", "id": 1299636, "node_id": "MDQ6VXNlcjEyOTk2MzY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1299636?v=4", "gravatar_id": "", "url": "https://api.github.com/users/case540", "html_url": "https://github.com/case540", "followers_url": "https://api.github.com/users/case540/followers", "following_url": "https://api.github.com/users/case540/following{/other_user}", "gists_url": "https://api.github.com/users/case540/gists{/gist_id}", "starred_url": "https://api.github.com/users/case540/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/case540/subscriptions", "organizations_url": "https://api.github.com/users/case540/orgs", "repos_url": "https://api.github.com/users/case540/repos", "events_url": "https://api.github.com/users/case540/events{/privacy}", "received_events_url": "https://api.github.com/users/case540/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-01-24T08:22:34Z", "updated_at": "2019-01-30T18:39:50Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "When I try to use any functionality from `contrib` package I get an exception.\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): **No**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): **Ubuntu 17.04**\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: **-**\r\n- TensorFlow installed from (source or binary): **Binary**\r\n- TensorFlow version (use command below): **b'v1.13.0-rc0-0-g6ce86799c8' 1.13.0-rc0**\r\n- Python version: **3.6.3**\r\n- Bazel version (if compiling from source): **-**\r\n- GCC/Compiler version (if compiling from source): **-**\r\n- CUDA/cuDNN version: **-**\r\n- GPU model and memory: **-**\r\n\r\n**Describe the current behavior**\r\n\r\nWhen I try to run `tensorflow/contrib/ignite/python/tests/ignite_dataset_test.py` (and any other code that imports from `contrib`) I get the following exception:\r\n```\r\nTraceback (most recent call last):\r\n  File \"ignite_dataset_test.py\", line 23, in <module>\r\n    from tensorflow.contrib.ignite import IgniteDataset\r\n  File \"/home/gridgain/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/__init__.py\", line 40, in <module>\r\n    from tensorflow.contrib import distribute\r\n  File \"/home/gridgain/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/distribute/__init__.py\", line 33, in <module>\r\n    from tensorflow.contrib.distribute.python.tpu_strategy import TPUStrategy\r\n  File \"/home/gridgain/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/distribute/python/tpu_strategy.py\", line 27, in <module>\r\n    from tensorflow.contrib.tpu.python.ops import tpu_ops\r\n  File \"/home/gridgain/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/tpu/__init__.py\", line 73, in <module>\r\n    from tensorflow.contrib.tpu.python.tpu.keras_support import tpu_model as keras_to_tpu_model\r\n  File \"/home/gridgain/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/tpu/python/tpu/keras_support.py\", line 62, in <module>\r\n    from tensorflow.contrib.tpu.python.tpu import tpu\r\n  File \"/home/gridgain/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/tpu/python/tpu/tpu.py\", line 24, in <module>\r\n    from tensorflow.contrib.compiler import xla\r\n  File \"/home/gridgain/anaconda3/lib/python3.6/site-packages/tensorflow/contrib/compiler/xla.py\", line 28, in <module>\r\n    from tensorflow.python.estimator import model_fn as model_fn_lib\r\n  File \"/home/gridgain/anaconda3/lib/python3.6/site-packages/tensorflow/python/estimator/__init__.py\", line 26, in <module>\r\n    from tensorflow_estimator.python import estimator\r\n  File \"/home/gridgain/anaconda3/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/__init__.py\", line 25, in <module>\r\n    import tensorflow_estimator.python.estimator.estimator_lib\r\n  File \"/home/gridgain/anaconda3/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/estimator_lib.py\", line 54, in <module>\r\n    from tensorflow_estimator.python.estimator.mode_keys import ModeKeysV2\r\n  File \"/home/gridgain/anaconda3/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/mode_keys.py\", line 22, in <module>\r\n    from tensorflow.python.training.mode_keys import ModeKeys\r\nModuleNotFoundError: No module named 'tensorflow.python.training.mode_keys'\r\n```\r\n\r\n**Describe the expected behavior**\r\nNo exception\r\n\r\n**Code to reproduce the issue**\r\nInstall last released version of TensorFlow, `pip3 install tensorflow=1.13.0rc0`. Then run `tensorflow/contrib/ignite/python/tests/start_ignite.sh` to start server. Then run `python3 tensorflow/contrib/ignite/python/tests/ignite_dataset_test.py` and get an exception.\r\n\r\n**Other info / logs**\r\nSee above.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25154", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25154/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25154/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25154/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25154", "id": 402530233, "node_id": "MDU6SXNzdWU0MDI1MzAyMzM=", "number": 25154, "title": "Is there tf_cuda_cc_binary rule in TF?", "user": {"login": "d0u9", "id": 7038479, "node_id": "MDQ6VXNlcjcwMzg0Nzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/7038479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/d0u9", "html_url": "https://github.com/d0u9", "followers_url": "https://api.github.com/users/d0u9/followers", "following_url": "https://api.github.com/users/d0u9/following{/other_user}", "gists_url": "https://api.github.com/users/d0u9/gists{/gist_id}", "starred_url": "https://api.github.com/users/d0u9/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/d0u9/subscriptions", "organizations_url": "https://api.github.com/users/d0u9/orgs", "repos_url": "https://api.github.com/users/d0u9/repos", "events_url": "https://api.github.com/users/d0u9/events{/privacy}", "received_events_url": "https://api.github.com/users/d0u9/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-01-24T03:47:02Z", "updated_at": "2019-01-29T00:37:45Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):  RHEL 7\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 1.4\r\n- Python version: 2.7\r\n- Installed using virtualenv? pip? conda?: pip\r\n- Bazel version (if compiling from source): 0.9.0\r\n- GCC/Compiler version (if compiling from source): 4.8.5\r\n- CUDA/cuDNN version: 9.0\r\n- GPU model and memory: k40m\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\nI want to put a simple cuda cupti program(Eg, the official CUPTI samples) in TF for some tests. But I can't find any `tf_cuda_cc_binary` rule in TF. So, my question is: how could I put such raw cuda souce in TF, and compile them by bazel?\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25152", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25152/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25152/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25152/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25152", "id": 402505629, "node_id": "MDU6SXNzdWU0MDI1MDU2Mjk=", "number": 25152, "title": "os.environ[\"CUDA_DEVICE_ORDER\"]  not work", "user": {"login": "policeme", "id": 30991932, "node_id": "MDQ6VXNlcjMwOTkxOTMy", "avatar_url": "https://avatars2.githubusercontent.com/u/30991932?v=4", "gravatar_id": "", "url": "https://api.github.com/users/policeme", "html_url": "https://github.com/policeme", "followers_url": "https://api.github.com/users/policeme/followers", "following_url": "https://api.github.com/users/policeme/following{/other_user}", "gists_url": "https://api.github.com/users/policeme/gists{/gist_id}", "starred_url": "https://api.github.com/users/policeme/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/policeme/subscriptions", "organizations_url": "https://api.github.com/users/policeme/orgs", "repos_url": "https://api.github.com/users/policeme/repos", "events_url": "https://api.github.com/users/policeme/events{/privacy}", "received_events_url": "https://api.github.com/users/policeme/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "jaingaurav", "id": 84372, "node_id": "MDQ6VXNlcjg0Mzcy", "avatar_url": "https://avatars1.githubusercontent.com/u/84372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaingaurav", "html_url": "https://github.com/jaingaurav", "followers_url": "https://api.github.com/users/jaingaurav/followers", "following_url": "https://api.github.com/users/jaingaurav/following{/other_user}", "gists_url": "https://api.github.com/users/jaingaurav/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaingaurav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaingaurav/subscriptions", "organizations_url": "https://api.github.com/users/jaingaurav/orgs", "repos_url": "https://api.github.com/users/jaingaurav/repos", "events_url": "https://api.github.com/users/jaingaurav/events{/privacy}", "received_events_url": "https://api.github.com/users/jaingaurav/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jaingaurav", "id": 84372, "node_id": "MDQ6VXNlcjg0Mzcy", "avatar_url": "https://avatars1.githubusercontent.com/u/84372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaingaurav", "html_url": "https://github.com/jaingaurav", "followers_url": "https://api.github.com/users/jaingaurav/followers", "following_url": "https://api.github.com/users/jaingaurav/following{/other_user}", "gists_url": "https://api.github.com/users/jaingaurav/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaingaurav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaingaurav/subscriptions", "organizations_url": "https://api.github.com/users/jaingaurav/orgs", "repos_url": "https://api.github.com/users/jaingaurav/repos", "events_url": "https://api.github.com/users/jaingaurav/events{/privacy}", "received_events_url": "https://api.github.com/users/jaingaurav/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 29, "created_at": "2019-01-24T01:43:17Z", "updated_at": "2019-09-30T02:58:10Z", "closed_at": null, "author_association": "NONE", "body": "I have two GPU, I want to create 2 graph in 2 GPU, first graph in first GPU, second graph in second GPU.\r\n1. when I create first graph in first GPU, I use os.environ[\"CUDA_DEVICE_ORDER\"] ='0'\r\n2.when I create second graph in second GPU, I use os.environ[\"CUDA_DEVICE_ORDER\"] = '1', but second graph still create on first GPU, I try many different ways, but it still not work.\r\n\r\nIt's a bug?\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25148", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25148/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25148/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25148/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25148", "id": 402483573, "node_id": "MDU6SXNzdWU0MDI0ODM1NzM=", "number": 25148, "title": "TypeError when using PReLU activations with TPUs", "user": {"login": "ctmckee", "id": 40606780, "node_id": "MDQ6VXNlcjQwNjA2Nzgw", "avatar_url": "https://avatars0.githubusercontent.com/u/40606780?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ctmckee", "html_url": "https://github.com/ctmckee", "followers_url": "https://api.github.com/users/ctmckee/followers", "following_url": "https://api.github.com/users/ctmckee/following{/other_user}", "gists_url": "https://api.github.com/users/ctmckee/gists{/gist_id}", "starred_url": "https://api.github.com/users/ctmckee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ctmckee/subscriptions", "organizations_url": "https://api.github.com/users/ctmckee/orgs", "repos_url": "https://api.github.com/users/ctmckee/repos", "events_url": "https://api.github.com/users/ctmckee/events{/privacy}", "received_events_url": "https://api.github.com/users/ctmckee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}], "state": "open", "locked": false, "assignee": {"login": "saeta", "id": 1284535, "node_id": "MDQ6VXNlcjEyODQ1MzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1284535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saeta", "html_url": "https://github.com/saeta", "followers_url": "https://api.github.com/users/saeta/followers", "following_url": "https://api.github.com/users/saeta/following{/other_user}", "gists_url": "https://api.github.com/users/saeta/gists{/gist_id}", "starred_url": "https://api.github.com/users/saeta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saeta/subscriptions", "organizations_url": "https://api.github.com/users/saeta/orgs", "repos_url": "https://api.github.com/users/saeta/repos", "events_url": "https://api.github.com/users/saeta/events{/privacy}", "received_events_url": "https://api.github.com/users/saeta/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "saeta", "id": 1284535, "node_id": "MDQ6VXNlcjEyODQ1MzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1284535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saeta", "html_url": "https://github.com/saeta", "followers_url": "https://api.github.com/users/saeta/followers", "following_url": "https://api.github.com/users/saeta/following{/other_user}", "gists_url": "https://api.github.com/users/saeta/gists{/gist_id}", "starred_url": "https://api.github.com/users/saeta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saeta/subscriptions", "organizations_url": "https://api.github.com/users/saeta/orgs", "repos_url": "https://api.github.com/users/saeta/repos", "events_url": "https://api.github.com/users/saeta/events{/privacy}", "received_events_url": "https://api.github.com/users/saeta/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-01-24T00:00:25Z", "updated_at": "2019-01-31T23:22:53Z", "closed_at": null, "author_association": "NONE", "body": "I'm updating a Keras Functional API SRGAN model, so that it will run on a TPU instead of GPU (i'm using colaboratory).\r\nEverything is now OK, with the exception of being able to use PReLU Activation.  When I Fit a model that has a PReLU layer:\r\n\r\n`x = tf.keras.layers.PReLU(alpha_initializer='zeros',alpha_regularizer=None,alpha_constraint=None,shared_axes=[1,2])(x)`\r\n\r\nI get the following error:\r\n\r\n`TypeError: bad operand type for unary -: 'ReplicatedVariable'`\r\n\r\nIf I swap the PReLU with:\r\n\r\n`x = tf.keras.layers.Activation('relu')(x)`\r\n\r\nThe model runs with no error on the TPU.  Has anyone seen this problem?\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25144", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25144/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25144/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25144/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25144", "id": 402414450, "node_id": "MDU6SXNzdWU0MDI0MTQ0NTA=", "number": 25144, "title": "Build of 1.13 //tensorflow/python/eager:pywrap_tfe_lib fails with internal compiler error: unexpected expression \u2018I\u2019 of kind template_parm_index", "user": {"login": "Xaenalt", "id": 8479010, "node_id": "MDQ6VXNlcjg0NzkwMTA=", "avatar_url": "https://avatars3.githubusercontent.com/u/8479010?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Xaenalt", "html_url": "https://github.com/Xaenalt", "followers_url": "https://api.github.com/users/Xaenalt/followers", "following_url": "https://api.github.com/users/Xaenalt/following{/other_user}", "gists_url": "https://api.github.com/users/Xaenalt/gists{/gist_id}", "starred_url": "https://api.github.com/users/Xaenalt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Xaenalt/subscriptions", "organizations_url": "https://api.github.com/users/Xaenalt/orgs", "repos_url": "https://api.github.com/users/Xaenalt/repos", "events_url": "https://api.github.com/users/Xaenalt/events{/privacy}", "received_events_url": "https://api.github.com/users/Xaenalt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-01-23T20:23:04Z", "updated_at": "2019-10-25T23:29:13Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nFedora 28\r\ncuda-cusparse-10.0.130-1.fc28.x86_64\r\ncuda-cufft-devel-10.0.130-1.fc28.x86_64\r\ncuda-nvjpeg-devel-10.0.130-1.fc28.x86_64\r\ncuda-cublas-10.0.130-1.fc28.x86_64\r\ncuda-nvrtc-devel-10.0.130-1.fc28.x86_64\r\ncuda-gcc-c++-7.3.1-2.fc28.x86_64\r\nnvidia-driver-cuda-libs-415.27-1.fc28.x86_64\r\ncuda-cublas-devel-10.0.130-1.fc28.x86_64\r\ncuda-extra-libs-10.0.130-1.fc28.x86_64\r\ncuda-nvtx-10.0.130-1.fc28.x86_64\r\ncuda-cusparse-devel-10.0.130-1.fc28.x86_64\r\ncuda-cupti-10.0.130-1.fc28.x86_64\r\ncuda-gcc-7.3.1-2.fc28.x86_64\r\ncuda-cudart-devel-10.0.130-1.fc28.x86_64\r\ncuda-nvjpeg-10.0.130-1.fc28.x86_64\r\ncuda-curand-10.0.130-1.fc28.x86_64\r\ncuda-npp-devel-10.0.130-1.fc28.x86_64\r\ncuda-cudnn-devel-7.4.2.24-1.fc28.x86_64\r\nbazel-0.21.0-1.fc28.x86_64\r\ncuda-nvgraph-devel-10.0.130-1.fc28.x86_64\r\ncuda-nvgraph-10.0.130-1.fc28.x86_64\r\ncuda-cusolver-devel-10.0.130-1.fc28.x86_64\r\ncuda-npp-10.0.130-1.fc28.x86_64\r\ncuda-cudart-10.0.130-1.fc28.x86_64\r\ncuda-nvml-devel-10.0.130-1.fc28.x86_64\r\nnvidia-driver-cuda-415.27-1.fc28.x86_64\r\ncuda-cusolver-10.0.130-1.fc28.x86_64\r\ncuda-cupti-devel-10.0.130-1.fc28.x86_64\r\ncuda-devel-10.0.130-1.fc28.x86_64\r\ncuda-libs-10.0.130-1.fc28.x86_64\r\ncuda-nvtx-devel-10.0.130-1.fc28.x86_64\r\ncuda-10.0.130-1.fc28.x86_64\r\ncuda-curand-devel-10.0.130-1.fc28.x86_64\r\ncuda-nvrtc-10.0.130-1.fc28.x86_64\r\ncuda-cufft-10.0.130-1.fc28.x86_64\r\ncuda-cudnn-7.4.2.24-1.fc28.x86_64\r\n\r\n- **TensorFlow version (use command below)**: 1.13\r\n- **Python version**: 3.6\r\n- **Bazel version (if compiling from source)**: bazel-0.21.0-1.fc28.x86_64\r\n- **GCC/Compiler version (if compiling from source)**: cuda-gcc-7.3.1-2.fc28.x86_64\r\n- **CUDA/cuDNN version**: cuda-cudnn-7.4.2.24-1.fc28.x86_64\r\n- **GPU model and memory**: NVIDIA Corporation GP102 [GeForce GTX 1080 Ti] 11GB RAM\r\n- **Exact command to reproduce**: \r\n- # ./configure                                                                                           \r\nWARNING: Running Bazel server needs to be killed, because the startup options are different.\r\nWARNING: --batch mode is deprecated. Please instead explicitly shut down your Bazel server using the command \"bazel shutdown\".\r\nINFO: Invocation ID: fdbe3c4d-e72c-4726-a665-e2bc04669f74\r\nYou have bazel 0.21.0- (@non-git) installed.\r\nPlease specify the location of python. [Default is /usr/bin/python]: /usr/bin/python3\r\n\r\n\r\nFound possible Python library paths:\r\n  /usr/local/lib/python3.6/site-packages\r\n  /usr/lib64/python3.6/site-packages\r\n  /usr/lib/python3.6/site-packages\r\nPlease input the desired Python library path to use.  Default is [/usr/local/lib/python3.6/site-packages]\r\n\r\nDo you wish to build TensorFlow with XLA JIT support? [Y/n]: n\r\nNo XLA JIT support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with OpenCL SYCL support? [y/N]: \r\nNo OpenCL SYCL support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with ROCm support? [y/N]: \r\nNo ROCm support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with CUDA support? [y/N]: y\r\nCUDA support will be enabled for TensorFlow.\r\n\r\nPlease specify the CUDA SDK version you want to use. [Leave empty to default to CUDA 10.0]: \r\n\r\n\r\nPlease specify the location where CUDA 10.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: /usr\r\n\r\n\r\nPlease specify the cuDNN version you want to use. [Leave empty to default to cuDNN 7]: \r\n\r\n\r\nPlease specify the location where cuDNN 7 library is installed. Refer to README.md for more details. [Default is /usr]: \r\n\r\n\r\nDo you wish to build TensorFlow with TensorRT support? [y/N]: \r\nNo TensorRT support will be enabled for TensorFlow.\r\n\r\nPlease specify the locally installed NCCL version you want to use. [Default is to use https://github.com/nvidia/nccl]: \r\n\r\n\r\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\r\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\r\nPlease note that each additional compute capability significantly increases your build time and binary size. [Default is: 3.5,7.0]: 6.1\r\n\r\n\r\nDo you want to use clang as CUDA compiler? [y/N]: \r\nnvcc will be used as CUDA compiler.\r\n\r\nPlease specify which gcc should be used by nvcc as the host compiler. [Default is /usr/bin/gcc]: /usr/bin/cuda-gcc\r\n\r\n\r\nDo you wish to build TensorFlow with MPI support? [y/N]: \r\nNo MPI support will be enabled for TensorFlow.\r\n\r\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native -Wno-sign-compare]: \r\n\r\n\r\nWould you like to interactively configure ./WORKSPACE for Android builds? [y/N]: \r\nNot configuring the WORKSPACE for Android builds.\r\n\r\nPreconfigured Bazel build configs. You can use any of the below by adding \"--config=<>\" to your build command. See .bazelrc for more details.\r\n        --config=mkl            # Build with MKL support.\r\n        --config=monolithic     # Config for mostly static monolithic build.\r\n        --config=gdr            # Build with GDR support.\r\n        --config=verbs          # Build with libverbs support.\r\n        --config=ngraph         # Build with Intel nGraph support.\r\n        --config=dynamic_kernels        # (Experimental) Build kernels into separate shared objects.\r\nPreconfigured Bazel build configs to DISABLE default on features:\r\n        --config=noaws          # Disable AWS S3 filesystem support.\r\n        --config=nogcp          # Disable GCP support.\r\n        --config=nohdfs         # Disable HDFS support.\r\n        --config=noignite       # Disable Apacha Ignite support.\r\n        --config=nokafka        # Disable Apache Kafka support.\r\n        --config=nonccl         # Disable NVIDIA NCCL support.\r\nConfiguration finished\r\n\r\n- # bazel build --local_resources 2048,6,1.0 --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\r\n...\r\n...\r\nERROR: /home/spryor/git/tensorflow/tensorflow/python/eager/BUILD:10:1: C++ compilation of rule '//tensorflow/python/eager:pywrap_tfe_lib' failed (Exit 1)\r\ntensorflow/python/eager/pywrap_tfe_src.cc: In function \u2018void TFE_Py_Execute(TFE_Context*, const char*, const char*, TFE_InputTensorHandles*, PyObject*, TFE_OutputTensorHandles*, TF_Status*)\u2019:\r\ntensorflow/python/eager/pywrap_tfe_src.cc:685:23: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\r\n     for (int i = 0; i < inputs->size() && TF_GetCode(out_status) == TF_OK;\r\n                     ~~^~~~~~~~~~~~~~~~\r\nIn file included from tensorflow/python/eager/pywrap_tfe_src.cc:23:0:\r\nexternal/com_google_absl/absl/types/variant.h: In substitution of \u2018template<long unsigned int I, class T> using variant_alternative_t = typename absl::variant_alternative::type [with long unsigned int I = I; T = absl::variant<tensorflow::TensorShape, _object*>]\u2019:\r\nexternal/com_google_absl/absl/types/variant.h:581:7:   required by substitution of \u2018template<class T, long unsigned int I, class Tj, typename std::enable_if<(std::is_assignable<Tj&, T>::value && std::is_constructible<Tj, T>::value), void>::type* <anonymous> > absl::variant<tensorflow::TensorShape, _object*>& absl::variant<tensorflow::TensorShape, _object*>::operator=<T, I, Tj, <enumerator> >(T&&) [with T = const absl::variant<tensorflow::TensorShape, _object*>&; long unsigned int I = <missing>; Tj = <missing>; typename std::enable_if<(std::is_assignable<Tj&, T>::value && std::is_constructible<Tj, T>::value), void>::type* <anonymous> = <missing>]\u2019\r\ntensorflow/python/eager/pywrap_tfe_src.cc:914:20:   required from here\r\nexternal/com_google_absl/absl/types/variant.h:581:7: internal compiler error: unexpected expression \u2018I\u2019 of kind template_parm_index\r\n       class Tj = absl::variant_alternative_t<I, variant>,\r\n       ^~~~~\r\nPlease submit a full bug report,\r\nwith preprocessed source if appropriate.\r\nSee <https://gcc.gnu.org/bugs/> for instructions.\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nINFO: Elapsed time: 600.890s, Critical Path: 104.25s\r\nINFO: 3259 processes: 3259 local.\r\nFAILED: Build did NOT complete successfully\r\n\r\n\r\n### Describe the problem\r\nAttempting to build r1.13 on Fedora 28 with the given packages/etc results in a build error\r\n\r\n\r\n[tensorflow_build.log](https://github.com/tensorflow/tensorflow/files/2789013/tensorflow_build.log)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25133", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25133/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25133/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25133/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25133", "id": 402205565, "node_id": "MDU6SXNzdWU0MDIyMDU1NjU=", "number": 25133, "title": "DNNClassifier estimator train shows unsupported feed type error occasionally ", "user": {"login": "raaaaay-c", "id": 15869421, "node_id": "MDQ6VXNlcjE1ODY5NDIx", "avatar_url": "https://avatars0.githubusercontent.com/u/15869421?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raaaaay-c", "html_url": "https://github.com/raaaaay-c", "followers_url": "https://api.github.com/users/raaaaay-c/followers", "following_url": "https://api.github.com/users/raaaaay-c/following{/other_user}", "gists_url": "https://api.github.com/users/raaaaay-c/gists{/gist_id}", "starred_url": "https://api.github.com/users/raaaaay-c/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raaaaay-c/subscriptions", "organizations_url": "https://api.github.com/users/raaaaay-c/orgs", "repos_url": "https://api.github.com/users/raaaaay-c/repos", "events_url": "https://api.github.com/users/raaaaay-c/events{/privacy}", "received_events_url": "https://api.github.com/users/raaaaay-c/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "xiejw", "id": 1184671, "node_id": "MDQ6VXNlcjExODQ2NzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1184671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xiejw", "html_url": "https://github.com/xiejw", "followers_url": "https://api.github.com/users/xiejw/followers", "following_url": "https://api.github.com/users/xiejw/following{/other_user}", "gists_url": "https://api.github.com/users/xiejw/gists{/gist_id}", "starred_url": "https://api.github.com/users/xiejw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xiejw/subscriptions", "organizations_url": "https://api.github.com/users/xiejw/orgs", "repos_url": "https://api.github.com/users/xiejw/repos", "events_url": "https://api.github.com/users/xiejw/events{/privacy}", "received_events_url": "https://api.github.com/users/xiejw/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "xiejw", "id": 1184671, "node_id": "MDQ6VXNlcjExODQ2NzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1184671?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xiejw", "html_url": "https://github.com/xiejw", "followers_url": "https://api.github.com/users/xiejw/followers", "following_url": "https://api.github.com/users/xiejw/following{/other_user}", "gists_url": "https://api.github.com/users/xiejw/gists{/gist_id}", "starred_url": "https://api.github.com/users/xiejw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xiejw/subscriptions", "organizations_url": "https://api.github.com/users/xiejw/orgs", "repos_url": "https://api.github.com/users/xiejw/repos", "events_url": "https://api.github.com/users/xiejw/events{/privacy}", "received_events_url": "https://api.github.com/users/xiejw/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-01-23T11:58:33Z", "updated_at": "2020-02-27T09:25:34Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10 \r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 'v1.12.0-rc2-3-ga6d8ffae09' 1.12.0\r\n- Python version: 3.7\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:  9.0\r\n- GPU model and memory: GeForce GTX 1070 with Max-Q Design\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\nI have a dataset contains labels with true and false, and a column of English test.\r\nLabels are converted to 1 and 0 as below:\r\n```\r\n      review                                          opinion\r\n0              1  cls late nite music club with shoji tabuchi wh...\r\n1              0  new south valley subdivision taking shape the ...\r\n2              0  celtics visit lakers aim to avoid fourth strai...\r\n3              1  russia signs ceasefire agreement with reservat...\r\n4              1  new j c penney ceo to have limited role report...\r\n\r\n```\r\nThe data are split into train_df and test_df then created an input_fn for training.\r\n\r\n```\r\n train_input_fn = tf.estimator.inputs.pandas_input_fn(\r\n    train_df, train_df['review'],batch_size=40, num_epochs=5, shuffle=True)\r\n```\r\nWhen I reach \r\n```estimator.train(input_fn=train_input_fn, steps=1000)```\r\n\r\nIt shows \r\n\r\n`tensorflow.python.framework.errors_impl.InternalError: Unsupported feed type`\r\n\r\nBut after I change the label to floats by df['review'] = df['review']*1.0 \r\n```\r\n      review                                          opinion\r\n0              1.0  cls late nite music club with shoji tabuchi wh...\r\n1              0.0  new south valley subdivision taking shape the ...\r\n2              0.0  celtics visit lakers aim to avoid fourth strai...\r\n3              1.0  russia signs ceasefire agreement with reservat...\r\n4              1.0  new j c penney ceo to have limited role report...\r\n\r\n```\r\nThe train function works again. \r\n\r\nBut this problem occurs occasionally, estimator.train works well if I have review labels in integer with 0 and 1 as the data in the first table.\r\n\r\n**Describe the expected behavior**\r\n```estimator.train(input_fn=train_input_fn, steps=1000)``` \r\nshould works without showing unsupported type\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25120", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25120/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25120/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25120/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25120", "id": 402094367, "node_id": "MDU6SXNzdWU0MDIwOTQzNjc=", "number": 25120, "title": "TF lite has link error when I try to build with build_rpi_lib.sh", "user": {"login": "adppark", "id": 31211746, "node_id": "MDQ6VXNlcjMxMjExNzQ2", "avatar_url": "https://avatars0.githubusercontent.com/u/31211746?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adppark", "html_url": "https://github.com/adppark", "followers_url": "https://api.github.com/users/adppark/followers", "following_url": "https://api.github.com/users/adppark/following{/other_user}", "gists_url": "https://api.github.com/users/adppark/gists{/gist_id}", "starred_url": "https://api.github.com/users/adppark/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adppark/subscriptions", "organizations_url": "https://api.github.com/users/adppark/orgs", "repos_url": "https://api.github.com/users/adppark/repos", "events_url": "https://api.github.com/users/adppark/events{/privacy}", "received_events_url": "https://api.github.com/users/adppark/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2019-01-23T06:45:56Z", "updated_at": "2019-06-27T10:37:03Z", "closed_at": null, "author_association": "NONE", "body": "When I try to build for Tensorflow lite(in latest version) occur link error like this.\r\n\r\n/tensorflow/tensorflow/lite/tools/make/gen/rpi_armv7l/lib/libtensorflow-lite.a(nnapi_delegate.o): In function `tflite::NNAPIAllocation::~NNAPIAllocation()':\r\nnnapi_delegate.cc:(.text+0x2c): undefined reference to `NnApiImplementation()'\r\n/tensorflow/tensorflow/lite/tools/make/gen/rpi_armv7l/lib/libtensorflow-lite.a(nnapi_delegate.o): In function `tflite::NNAPIAllocation::NNAPIAllocation(char const*, tflite::ErrorReporter*)':\r\nnnapi_delegate.cc:(.text+0x110): undefined reference to `NnApiImplementation()'\r\n/tensorflow/tensorflow/lite/tools/make/gen/rpi_armv7l/lib/libtensorflow-lite.a(nnapi_delegate.o): In function `tflite::NNAPIDelegate::~NNAPIDelegate()':\r\nnnapi_delegate.cc:(.text+0x190): undefined reference to `NnApiImplementation()'\r\nnnapi_delegate.cc:(.text+0x1b4): undefined reference to `NnApiImplementation()'\r\n/tensorflow/tensorflow/lite/tools/make/gen/rpi_armv7l/lib/libtensorflow-lite.a(nnapi_delegate.o): In function `tflite::addTensorOperands(tflite::Subgraph*, ANeuralNetworksModel*, unsigned int*, std::vector<long long, std::allocator<long long> >*)':\r\nnnapi_delegate.cc:(.text+0x214): undefined reference to `NnApiImplementation()'\r\n/tensorflow/tensorflow/lite/tools/make/gen/rpi_armv7l/lib/libtensorflow-lite.a(nnapi_delegate.o):nnapi_delegate.cc:(.text+0x504): more undefined references to `NnApiImplementation()' follow\r\ncollect2: error: ld returned 1 exit status\r\n\r\nhow can I fix it? "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25110", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25110/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25110/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25110/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25110", "id": 401863712, "node_id": "MDU6SXNzdWU0MDE4NjM3MTI=", "number": 25110, "title": "[TF Lite] Add support for dilated convolution with valid padding.", "user": {"login": "ltrottier", "id": 14935326, "node_id": "MDQ6VXNlcjE0OTM1MzI2", "avatar_url": "https://avatars0.githubusercontent.com/u/14935326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ltrottier", "html_url": "https://github.com/ltrottier", "followers_url": "https://api.github.com/users/ltrottier/followers", "following_url": "https://api.github.com/users/ltrottier/following{/other_user}", "gists_url": "https://api.github.com/users/ltrottier/gists{/gist_id}", "starred_url": "https://api.github.com/users/ltrottier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ltrottier/subscriptions", "organizations_url": "https://api.github.com/users/ltrottier/orgs", "repos_url": "https://api.github.com/users/ltrottier/repos", "events_url": "https://api.github.com/users/ltrottier/events{/privacy}", "received_events_url": "https://api.github.com/users/ltrottier/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "srjoglekar246", "id": 2099293, "node_id": "MDQ6VXNlcjIwOTkyOTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/2099293?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srjoglekar246", "html_url": "https://github.com/srjoglekar246", "followers_url": "https://api.github.com/users/srjoglekar246/followers", "following_url": "https://api.github.com/users/srjoglekar246/following{/other_user}", "gists_url": "https://api.github.com/users/srjoglekar246/gists{/gist_id}", "starred_url": "https://api.github.com/users/srjoglekar246/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srjoglekar246/subscriptions", "organizations_url": "https://api.github.com/users/srjoglekar246/orgs", "repos_url": "https://api.github.com/users/srjoglekar246/repos", "events_url": "https://api.github.com/users/srjoglekar246/events{/privacy}", "received_events_url": "https://api.github.com/users/srjoglekar246/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "srjoglekar246", "id": 2099293, "node_id": "MDQ6VXNlcjIwOTkyOTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/2099293?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srjoglekar246", "html_url": "https://github.com/srjoglekar246", "followers_url": "https://api.github.com/users/srjoglekar246/followers", "following_url": "https://api.github.com/users/srjoglekar246/following{/other_user}", "gists_url": "https://api.github.com/users/srjoglekar246/gists{/gist_id}", "starred_url": "https://api.github.com/users/srjoglekar246/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srjoglekar246/subscriptions", "organizations_url": "https://api.github.com/users/srjoglekar246/orgs", "repos_url": "https://api.github.com/users/srjoglekar246/repos", "events_url": "https://api.github.com/users/srjoglekar246/events{/privacy}", "received_events_url": "https://api.github.com/users/srjoglekar246/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-01-22T17:05:18Z", "updated_at": "2019-02-11T17:23:58Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n```\r\nuname -a\r\nLinux archlinux 4.19.2-arch1-1-ARCH #1 SMP PREEMPT Tue Nov 13 21:16:19 UTC 2018 x86_64 GNU/Linux\r\n```\r\n- TensorFlow installed from (source or binary): \r\n```\r\npip install tensorflow\r\n```\r\n- TensorFlow version (or github SHA if from source): \r\n```\r\n1.12.0\r\n```\r\n\r\n**Provide the text output from tflite_convert**\r\n\r\n```\r\nRuntimeError: TOCO failed see console for info.\r\n2019-01-22 11:50:43.257264: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 14 operators, 27 arrays (0 quantized)\r\n2019-01-22 11:50:43.257374: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 14 operators, 27 arrays (0 quantized)\r\n2019-01-22 11:50:43.257409: I tensorflow/contrib/lite/toco/graph_transformations/identify_dilated_conv.cc:217] Replaced sub-network with Dilated Conv2D op outputting \"conv2d/Conv2D\".\r\n2019-01-22 11:50:43.257458: F tensorflow/contrib/lite/toco/graph_transformations/propagate_fixed_sizes.cc:991] Check failed: height_with_paddings % block_height == 0 (12 vs. 0)\r\n```\r\n\r\nAlso, please include a link to a GraphDef or the model if possible: [keras_model.zip](https://github.com/tensorflow/tensorflow/files/2783805/keras_model.zip)\r\n\r\n**Any other info / logs**\r\n\r\nRunning this in jupyter notebook:\r\n```python\r\nimport numpy as np\r\nimport tensorflow as tf\r\ntf.keras.backend.clear_session()\r\nprint(tf.__version__)\r\nprint(tf.keras.__version__)\r\nkeras_model_savepath = '/tmp/keras_model.h5'\r\n\r\nx_input = x = tf.keras.layers.Input(shape=(725, 725, 1))\r\nx = tf.keras.layers.Conv2D(6, 3, padding='valid', dilation_rate=25)(x)\r\nx = tf.keras.layers.Conv2D(6, 3, padding='valid', dilation_rate=19)(x)\r\nkeras_model = tf.keras.models.Model(x_input, x)\r\nprint(keras_model.summary())\r\npred = keras_model.predict(np.ones([1,725,725,1]))\r\nprint(pred[0,0:5,0,0])\r\nkeras_model.save(keras_model_savepath)\r\ntoco = tf.contrib.lite.TFLiteConverter.from_keras_model_file(keras_model_savepath)\r\nmodel_tflite = toco.convert()\r\n```\r\ngives:\r\n```python\r\n1.12.0\r\n2.1.6-tf\r\n_________________________________________________________________\r\nLayer (type)                 Output Shape              Param #   \r\n=================================================================\r\ninput_1 (InputLayer)         (None, 725, 725, 1)       0         \r\n_________________________________________________________________\r\nconv2d (Conv2D)              (None, 675, 675, 6)       60        \r\n_________________________________________________________________\r\nconv2d_1 (Conv2D)            (None, 637, 637, 6)       330       \r\n=================================================================\r\nTotal params: 390\r\nTrainable params: 390\r\nNon-trainable params: 0\r\n_________________________________________________________________\r\nNone\r\n[-1.9924886 -1.9924886 -1.9924886 -1.9924886 -1.9924886]\r\nWARNING:tensorflow:No training configuration found in save file: the model was *not* compiled. Compile it manually.\r\nINFO:tensorflow:Froze 4 variables.\r\nINFO:tensorflow:Converted 4 variables to const ops.\r\n\r\n---------------------------------------------------------------------------\r\nRuntimeError                              Traceback (most recent call last)\r\n<ipython-input-48-0a572848505b> in <module>\r\n     15 keras_model.save(keras_model_savepath)\r\n     16 toco = tf.contrib.lite.TFLiteConverter.from_keras_model_file(keras_model_savepath)\r\n---> 17 model_tflite = toco.convert()\r\n\r\n~/.pyenv/versions/3.6.7/envs/tensorflow-1.12/lib/python3.6/site-packages/tensorflow/contrib/lite/python/lite.py in convert(self)\r\n    451           input_tensors=self._input_tensors,\r\n    452           output_tensors=self._output_tensors,\r\n--> 453           **converter_kwargs)\r\n    454     else:\r\n    455       # Graphs without valid tensors cannot be loaded into tf.Session since they\r\n\r\n~/.pyenv/versions/3.6.7/envs/tensorflow-1.12/lib/python3.6/site-packages/tensorflow/contrib/lite/python/convert.py in toco_convert_impl(input_data, input_tensors, output_tensors, *args, **kwargs)\r\n    340   data = toco_convert_protos(model_flags.SerializeToString(),\r\n    341                              toco_flags.SerializeToString(),\r\n--> 342                              input_data.SerializeToString())\r\n    343   return data\r\n    344 \r\n\r\n~/.pyenv/versions/3.6.7/envs/tensorflow-1.12/lib/python3.6/site-packages/tensorflow/contrib/lite/python/convert.py in toco_convert_protos(model_flags_str, toco_flags_str, input_data_str)\r\n    133     else:\r\n    134       raise RuntimeError(\"TOCO failed see console for info.\\n%s\\n%s\\n\" %\r\n--> 135                          (stdout, stderr))\r\n    136 \r\n    137 \r\n\r\nRuntimeError: TOCO failed see console for info.\r\nb'2019-01-22 11:50:43.257264: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 14 operators, 27 arrays (0 quantized)\\n2019-01-22 11:50:43.257374: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 14 operators, 27 arrays (0 quantized)\\n2019-01-22 11:50:43.257409: I tensorflow/contrib/lite/toco/graph_transformations/identify_dilated_conv.cc:217] Replaced sub-network with Dilated Conv2D op outputting \"conv2d/Conv2D\".\\n2019-01-22 11:50:43.257458: F tensorflow/contrib/lite/toco/graph_transformations/propagate_fixed_sizes.cc:991] Check failed: height_with_paddings % block_height == 0 (12 vs. 0)\\n'\r\nNone\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25104", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25104/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25104/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25104/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25104", "id": 401779974, "node_id": "MDU6SXNzdWU0MDE3Nzk5NzQ=", "number": 25104, "title": "Xcode: How to use an static library (a.framework) which force_load  libtensorflow-core.a?", "user": {"login": "shawn-tian", "id": 12387954, "node_id": "MDQ6VXNlcjEyMzg3OTU0", "avatar_url": "https://avatars0.githubusercontent.com/u/12387954?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shawn-tian", "html_url": "https://github.com/shawn-tian", "followers_url": "https://api.github.com/users/shawn-tian/followers", "following_url": "https://api.github.com/users/shawn-tian/following{/other_user}", "gists_url": "https://api.github.com/users/shawn-tian/gists{/gist_id}", "starred_url": "https://api.github.com/users/shawn-tian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shawn-tian/subscriptions", "organizations_url": "https://api.github.com/users/shawn-tian/orgs", "repos_url": "https://api.github.com/users/shawn-tian/repos", "events_url": "https://api.github.com/users/shawn-tian/events{/privacy}", "received_events_url": "https://api.github.com/users/shawn-tian/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-01-22T14:05:44Z", "updated_at": "2019-01-28T23:44:17Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: iphone 7\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 1.6\r\n- Python version: \r\n- Installed using virtualenv? pip? conda?:\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\nI'm trying to provide an IOS static library as an SDK (named demo.framework) using tensorflow. By tensorflow's instruction, I must link libTensorflow.a with force_load flag in my project. So I link libTensorflow.a with force_load flag in demo.framework's project, and build a library(demo.framework).\r\n\r\nIn a test, I create a sample app project (appXXX), and link my demo.framework to use the SDK. Compiling was success, but when running it gives the error:\r\n\r\nNot found: No session factory registered for the given session options: {target: \"\" config: } Registered factories are {}.\r\n\r\nI try to solve this by link libTensorflow.a with force_load flag for \"other link flags\" in my appXXX's project, it works fine but that is not what I want (In my option, appXXX needn't be care of tensorflow, it just care of demo.framework). How can I provide a \"clean\" demo.framework library without force_load any library in appXXX? \r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25100", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25100/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25100/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25100/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25100", "id": 401677201, "node_id": "MDU6SXNzdWU0MDE2NzcyMDE=", "number": 25100, "title": "xavier_initializer documentations claims use of normal distribution but truncated normal is actually being used", "user": {"login": "nowozin", "id": 7673114, "node_id": "MDQ6VXNlcjc2NzMxMTQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/7673114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nowozin", "html_url": "https://github.com/nowozin", "followers_url": "https://api.github.com/users/nowozin/followers", "following_url": "https://api.github.com/users/nowozin/following{/other_user}", "gists_url": "https://api.github.com/users/nowozin/gists{/gist_id}", "starred_url": "https://api.github.com/users/nowozin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nowozin/subscriptions", "organizations_url": "https://api.github.com/users/nowozin/orgs", "repos_url": "https://api.github.com/users/nowozin/repos", "events_url": "https://api.github.com/users/nowozin/events{/privacy}", "received_events_url": "https://api.github.com/users/nowozin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-01-22T09:42:39Z", "updated_at": "2019-01-23T21:48:01Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version: 1.12\r\n- Doc Link: https://www.tensorflow.org/api_docs/python/tf/contrib/layers/xavier_initializer\r\n\r\n**Describe the documentation issue**\r\n\r\nAccording to the documentation the Xavier initializer allows use of both the uniform distribution and the normal distribution.  However, when passing `uniform=False` to `xavier_initializer`, the code in `variance_scaling_initializer` actually uses a truncated normal distribution instead, [code link](https://github.com/tensorflow/tensorflow/blob/a6d8ffae097d0132989ae4688d224121ec6d8f35/tensorflow/contrib/layers/python/layers/initializers.py#L146).\r\n\r\nThe fix would consist of adjusting the documentation to provide details about the truncated Normal sampling."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25087", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25087/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25087/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25087/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25087", "id": 401579378, "node_id": "MDU6SXNzdWU0MDE1NzkzNzg=", "number": 25087, "title": "Two roundings in MultiplyByQuantizedMultiplier(TFLite) leads to inconsistent result with tensorflow", "user": {"login": "Rasterer", "id": 7001169, "node_id": "MDQ6VXNlcjcwMDExNjk=", "avatar_url": "https://avatars2.githubusercontent.com/u/7001169?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Rasterer", "html_url": "https://github.com/Rasterer", "followers_url": "https://api.github.com/users/Rasterer/followers", "following_url": "https://api.github.com/users/Rasterer/following{/other_user}", "gists_url": "https://api.github.com/users/Rasterer/gists{/gist_id}", "starred_url": "https://api.github.com/users/Rasterer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Rasterer/subscriptions", "organizations_url": "https://api.github.com/users/Rasterer/orgs", "repos_url": "https://api.github.com/users/Rasterer/repos", "events_url": "https://api.github.com/users/Rasterer/events{/privacy}", "received_events_url": "https://api.github.com/users/Rasterer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, {"login": "jianlijianli", "id": 43797323, "node_id": "MDQ6VXNlcjQzNzk3MzIz", "avatar_url": "https://avatars3.githubusercontent.com/u/43797323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jianlijianli", "html_url": "https://github.com/jianlijianli", "followers_url": "https://api.github.com/users/jianlijianli/followers", "following_url": "https://api.github.com/users/jianlijianli/following{/other_user}", "gists_url": "https://api.github.com/users/jianlijianli/gists{/gist_id}", "starred_url": "https://api.github.com/users/jianlijianli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jianlijianli/subscriptions", "organizations_url": "https://api.github.com/users/jianlijianli/orgs", "repos_url": "https://api.github.com/users/jianlijianli/repos", "events_url": "https://api.github.com/users/jianlijianli/events{/privacy}", "received_events_url": "https://api.github.com/users/jianlijianli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-01-22T03:00:01Z", "updated_at": "2020-03-15T13:40:50Z", "closed_at": null, "author_association": "NONE", "body": "https://github.com/tensorflow/tensorflow/blob/ff91cd691027076e6128afbd902d3d38e3672787/tensorflow/lite/kernels/internal/common.h#L105\r\nPer my understanding, `MultiplyByQuantizedMultiplier` is used to simulate floating point multiplication.\r\nBut in some cases, the two roundings in it will cause different result from floating point arithmetic, which will further lead to unpredictable tflite accuracy compared with tensorflow training pipeline.\r\n\r\n`inline int32 MultiplyByQuantizedMultiplier(int32 x, int32 quantized_multiplier, int shift)`\r\nAssume x = 7984, quantized_multiplier = 1583594044, shift = -9 (the simulated floating point arithmetic is `std::round(7984 * 0.0014402703931141053)`). The multiplication of x and quantized_multiplier will be 12643414847296(0xB7FC6402F40), it will undergo two rounding shift(one in `SaturatingRoundingDoublingHighMul` and the other one in `RoundingDivideByPOT`), and results in number 12. But the floating point result is 11. We can find that if we combine these two rounding shifts into one, i.e. do only one rounding shift, the results will be 12, which matches with floating point result."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25086", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25086/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25086/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25086/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25086", "id": 401576944, "node_id": "MDU6SXNzdWU0MDE1NzY5NDQ=", "number": 25086, "title": "tf.keras.layers.UpSampling2D - static shapes for ResizeNearestNeighbor are NOT inferred in GraphDef (with `add_shapes=True`)", "user": {"login": "sjain-stanford", "id": 19234106, "node_id": "MDQ6VXNlcjE5MjM0MTA2", "avatar_url": "https://avatars0.githubusercontent.com/u/19234106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjain-stanford", "html_url": "https://github.com/sjain-stanford", "followers_url": "https://api.github.com/users/sjain-stanford/followers", "following_url": "https://api.github.com/users/sjain-stanford/following{/other_user}", "gists_url": "https://api.github.com/users/sjain-stanford/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjain-stanford/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjain-stanford/subscriptions", "organizations_url": "https://api.github.com/users/sjain-stanford/orgs", "repos_url": "https://api.github.com/users/sjain-stanford/repos", "events_url": "https://api.github.com/users/sjain-stanford/events{/privacy}", "received_events_url": "https://api.github.com/users/sjain-stanford/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-01-22T02:47:24Z", "updated_at": "2019-02-15T22:26:07Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): **No**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): **Linux Ubuntu 16.04**\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: **n/a**\r\n- TensorFlow installed from (source or binary): **binary**\r\n- TensorFlow version (use command below): **1.12**\r\n- Python version: **3.6**\r\n- Bazel version (if compiling from source): **n/a**\r\n- GCC/Compiler version (if compiling from source): **n/a**\r\n- CUDA/cuDNN version: **CUDA 9 / cuDNN 7**\r\n- GPU model and memory:  **n/a**\r\n\r\n### Premise:\r\nAssume we're given a `GraphDef` that was serialized as `graph.as_graph_def()`. To infer static shapes of every node in this graph and store them as `_output_shapes` attr, TensorFlow [provides](https://www.tensorflow.org/api_docs/python/tf/Graph#as_graph_def) the option`add_shapes=True`.\r\n\r\n### Issue:\r\nLet's consider the two APIs that internally use `ResizeNearestNeighbor` kernel:\r\n- `tf.image.resize_nearest_neighbor`\r\n- `tf.keras.layers.UpSampling2D`\r\n\r\nThe static shape attr (`_output_shapes`) for `ResizeNearestNeighbor` node is correctly inferred when created with `tf.image.resize_nearest_neighbor` API. Yet using `tf.keras.layers.UpSampling2D` results in incomplete shape information for height and width dims.\r\n\r\n### Minimal examples:\r\n\r\n**Using `tf.image.resize_nearest_neighbor` static shapes are inferred correctly:**\r\n```python3\r\nimport tensorflow as tf\r\n\r\n# Prepare `GraphDef`\r\ntf.reset_default_graph()\r\ninput = tf.placeholder(tf.float32, shape=[None, 26, 128, 256])\r\noutput = tf.image.resize_nearest_neighbor(input, (52, 256))\r\ngraph_def = tf.get_default_graph().as_graph_def()\r\n\r\n# Import `GraphDef` and restore static shapes\r\ntf.reset_default_graph()\r\nwith tf.Session(graph=tf.Graph()) as sess:\r\n    tf.import_graph_def(graph_def, name='')\r\n    output_graph_def = tf.get_default_graph().as_graph_def(add_shapes=True)\r\n\r\n# Check shapes\r\nfor node in output_graph_def.node:\r\n    if node.op == 'ResizeNearestNeighbor':\r\n        print(node.attr[\"_output_shapes\"])\r\n```\r\n**Output**\r\n```\r\nlist {\r\n  shape {\r\n    dim {\r\n      size: -1\r\n    }\r\n    dim {\r\n      size: 52\r\n    }\r\n    dim {\r\n      size: 256\r\n    }\r\n    dim {\r\n      size: 256\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n**Using `tf.keras.layers.UpSampling2D` static shapes are NOT inferred for H, W:**\r\n```python3\r\nimport tensorflow as tf\r\n\r\n# Prepare `GraphDef`\r\ntf.reset_default_graph()\r\ninput = tf.placeholder(tf.float32, shape=[None, 26, 128, 256])\r\noutput = tf.keras.layers.UpSampling2D((2, 2))(input)\r\ngraph_def = tf.get_default_graph().as_graph_def()\r\n\r\n# Import `GraphDef` and restore static shapes\r\ntf.reset_default_graph()\r\nwith tf.Session(graph=tf.Graph()) as sess:\r\n    tf.import_graph_def(graph_def, name='')\r\n    output_graph_def = tf.get_default_graph().as_graph_def(add_shapes=True)\r\n\r\n# Check shapes\r\nfor node in output_graph_def.node:\r\n    if node.op == 'ResizeNearestNeighbor':\r\n        print(node.attr[\"_output_shapes\"])\r\n```\r\n**Output**\r\n```\r\nlist {\r\n  shape {\r\n    dim {\r\n      size: -1\r\n    }\r\n    dim {\r\n      size: -1\r\n    }\r\n    dim {\r\n      size: -1\r\n    }\r\n    dim {\r\n      size: 256\r\n    }\r\n  }\r\n}\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25077", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25077/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25077/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25077/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25077", "id": 401459645, "node_id": "MDU6SXNzdWU0MDE0NTk2NDU=", "number": 25077, "title": "No code examples for rewriting existing graph using tf.quantization.fake_quant_with_min_max_vars for quantization-aware training", "user": {"login": "ruffles1", "id": 44987232, "node_id": "MDQ6VXNlcjQ0OTg3MjMy", "avatar_url": "https://avatars1.githubusercontent.com/u/44987232?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ruffles1", "html_url": "https://github.com/ruffles1", "followers_url": "https://api.github.com/users/ruffles1/followers", "following_url": "https://api.github.com/users/ruffles1/following{/other_user}", "gists_url": "https://api.github.com/users/ruffles1/gists{/gist_id}", "starred_url": "https://api.github.com/users/ruffles1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ruffles1/subscriptions", "organizations_url": "https://api.github.com/users/ruffles1/orgs", "repos_url": "https://api.github.com/users/ruffles1/repos", "events_url": "https://api.github.com/users/ruffles1/events{/privacy}", "received_events_url": "https://api.github.com/users/ruffles1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "wolffg", "id": 874510, "node_id": "MDQ6VXNlcjg3NDUxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/874510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wolffg", "html_url": "https://github.com/wolffg", "followers_url": "https://api.github.com/users/wolffg/followers", "following_url": "https://api.github.com/users/wolffg/following{/other_user}", "gists_url": "https://api.github.com/users/wolffg/gists{/gist_id}", "starred_url": "https://api.github.com/users/wolffg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wolffg/subscriptions", "organizations_url": "https://api.github.com/users/wolffg/orgs", "repos_url": "https://api.github.com/users/wolffg/repos", "events_url": "https://api.github.com/users/wolffg/events{/privacy}", "received_events_url": "https://api.github.com/users/wolffg/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wolffg", "id": 874510, "node_id": "MDQ6VXNlcjg3NDUxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/874510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wolffg", "html_url": "https://github.com/wolffg", "followers_url": "https://api.github.com/users/wolffg/followers", "following_url": "https://api.github.com/users/wolffg/following{/other_user}", "gists_url": "https://api.github.com/users/wolffg/gists{/gist_id}", "starred_url": "https://api.github.com/users/wolffg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wolffg/subscriptions", "organizations_url": "https://api.github.com/users/wolffg/orgs", "repos_url": "https://api.github.com/users/wolffg/repos", "events_url": "https://api.github.com/users/wolffg/events{/privacy}", "received_events_url": "https://api.github.com/users/wolffg/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-01-21T18:00:13Z", "updated_at": "2019-07-12T18:34:46Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a documentation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:doc_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version: 1.12.0\r\n- Doc Link:\r\n\r\n\r\n**Describe the documentation issue**\r\nIt would be great if code examples or a tutorial can be written up to help with manually inserting fake quant nodes into an existing TensorFlow graph. The current rewriter provided in contrib/quantize doesn't seem to be able to handle complex graphs well.\r\n\r\n**We welcome contributions by users. Will you be able to update submit a PR (use the [doc style guide](https://www.tensorflow.org/community/documentation)) to fix the doc Issue?**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25076", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25076/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25076/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25076/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25076", "id": 401449372, "node_id": "MDU6SXNzdWU0MDE0NDkzNzI=", "number": 25076, "title": "tf.Estimator as checkpointable", "user": {"login": "agniszczotka", "id": 25079800, "node_id": "MDQ6VXNlcjI1MDc5ODAw", "avatar_url": "https://avatars0.githubusercontent.com/u/25079800?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agniszczotka", "html_url": "https://github.com/agniszczotka", "followers_url": "https://api.github.com/users/agniszczotka/followers", "following_url": "https://api.github.com/users/agniszczotka/following{/other_user}", "gists_url": "https://api.github.com/users/agniszczotka/gists{/gist_id}", "starred_url": "https://api.github.com/users/agniszczotka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agniszczotka/subscriptions", "organizations_url": "https://api.github.com/users/agniszczotka/orgs", "repos_url": "https://api.github.com/users/agniszczotka/repos", "events_url": "https://api.github.com/users/agniszczotka/events{/privacy}", "received_events_url": "https://api.github.com/users/agniszczotka/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-01-21T17:27:10Z", "updated_at": "2019-02-01T13:30:49Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution: Linux Ubuntu 16.04\r\n- TensorFlow installed from (source or binary): binary \r\n- TensorFlow version (or github SHA if from source): 1.12\r\n\r\n\r\n**Provide the text output from tflite_convert**\r\n\r\n```\r\nValueError: `Checkpoint` was expecting a checkpointable object (an object derived from `CheckpointableBase`), got <tensorflow.python.estimator.canned.dnn.DNNClassifier object at 0x11b370e48>. If you believe this object should be checkpointable (i.e. it is part of the TensorFlow Python API and manages state), please open an issue.\r\n\r\n```\r\n\r\nModel:\r\n```\r\nself.classifier = tf.estimator.DNNClassifier(\r\n            feature_columns=my_feature_columns,\r\n            # Two hidden layers of 10 nodes each.\r\n            hidden_units=[10, 10],\r\n            # The model must choose between 3 classes.\r\n            n_classes=3)\r\n```\r\nI want to save checkpoints on demand in different directories. I use external optimizer for hyperparameter search ray-tune, which requires implementation of checkpointing which is control by scheduler from ray-tune optimizations and does not interfere into tf.Estimator internal saving procedure.  tf.train.Checkpoint looks like the perfect choice to save checkpoints on demand, yet does not work with tf.estimotor."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25073", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25073/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25073/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25073/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25073", "id": 401398095, "node_id": "MDU6SXNzdWU0MDEzOTgwOTU=", "number": 25073, "title": "fit gets slower on consecutive calls when model is recompiled", "user": {"login": "mshiffer", "id": 589206, "node_id": "MDQ6VXNlcjU4OTIwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/589206?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mshiffer", "html_url": "https://github.com/mshiffer", "followers_url": "https://api.github.com/users/mshiffer/followers", "following_url": "https://api.github.com/users/mshiffer/following{/other_user}", "gists_url": "https://api.github.com/users/mshiffer/gists{/gist_id}", "starred_url": "https://api.github.com/users/mshiffer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mshiffer/subscriptions", "organizations_url": "https://api.github.com/users/mshiffer/orgs", "repos_url": "https://api.github.com/users/mshiffer/repos", "events_url": "https://api.github.com/users/mshiffer/events{/privacy}", "received_events_url": "https://api.github.com/users/mshiffer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-01-21T15:18:10Z", "updated_at": "2019-06-30T11:03:11Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nWindows 10 Home\r\n\r\n- TensorFlow installed from (source or binary):\r\nusing pip3\r\n- TensorFlow version (use command below):\r\nreproduced on both\r\nb'v1.12.0-rc2-3-ga6d8ffae09' 1.12.0\r\nb'v1.11.0-rc2-4-gc19e29306c' 1.11.0\r\n\r\n- Python version:\r\nPython 3.6.7 :: Anaconda, Inc.\r\n\r\n**Describe the current behavior**\r\nOver multiple iterations with a re-compile of model, fit() time continuously increases.  If the re-compile is commented out, fit() time remains constant.  I found a similar bug in the js project but not sure if it's related: https://github.com/tensorflow/tfjs/issues/448\r\n\r\n**Describe the expected behavior**\r\nExpect fit() time to remain constant even with multiple re-compiles\r\n\r\n**Code to reproduce the issue**\r\n`\r\nimport tensorflow as tf\r\nfrom tensorflow.keras.models import Sequential\r\nfrom tensorflow.keras.layers import Dense, Activation, Flatten\r\nimport numpy as np\r\n\r\ninput1 = np.array([[0, 1, 1, 1, 0, 0, 0, 1, 1, 1]])\r\ndOutput1 = np.array([[1, 0, 0, 0, 0, 0, 0, 0, 0, 0]])\r\n\r\nmodel = Sequential()\r\ninitializer = tf.keras.initializers.TruncatedNormal(mean=0.0, stddev=0.05, seed=1)\r\nmodel.add(Dense(25, input_dim=10, kernel_initializer=initializer, bias_initializer='zeros'))\r\nmodel.add(Activation('relu'))\r\ninitializer = tf.keras.initializers.TruncatedNormal(mean=0.0, stddev=0.05, seed=2)\r\nmodel.add(Dense(25, kernel_initializer=initializer, bias_initializer='zeros'))\r\nmodel.add(Activation('relu'))\r\ninitializer = tf.keras.initializers.TruncatedNormal(mean=0.0, stddev=0.05, seed=3)\r\nmodel.add(Dense(10, kernel_initializer=initializer, bias_initializer='zeros'))\r\nmodel.add(Activation('softmax'))\r\n\r\n#loss='categorical_crossentropy'\r\nsgd = tf.keras.optimizers.SGD(lr=0.1, momentum=0.0, decay=0.0, nesterov=False)\r\nmodel.compile(loss='categorical_crossentropy', optimizer=sgd, metrics=['accuracy'])\r\n\r\nfor i in range(100):\r\n    sgd = tf.keras.optimizers.SGD(lr=0.01, momentum=0.0, decay=0.0, nesterov=False)\r\n    model.compile(loss='categorical_crossentropy', optimizer=sgd, metrics=['accuracy'])\r\n    model.fit(input1, dOutput1, epochs=1, batch_size=1)\r\n    output1 = model.predict(input1)\r\n    output1\r\n`\r\n\r\n**Output**\r\n1/1 [==============================] - 0s 155ms/step - loss: 2.2998 - acc: 0.0000e+00\r\nEpoch 1/1\r\n1/1 [==============================] - 0s 131ms/step - loss: 2.2906 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 0s 183ms/step - loss: 2.2815 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 0s 211ms/step - loss: 2.2724 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 0s 235ms/step - loss: 2.2633 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 0s 221ms/step - loss: 2.2543 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 0s 367ms/step - loss: 2.2452 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 0s 324ms/step - loss: 2.2362 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 0s 269ms/step - loss: 2.2271 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 0s 307ms/step - loss: 2.2181 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 0s 316ms/step - loss: 2.2091 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 0s 315ms/step - loss: 2.2002 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 0s 346ms/step - loss: 2.1912 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 0s 404ms/step - loss: 2.1822 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 0s 380ms/step - loss: 2.1732 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 0s 417ms/step - loss: 2.1643 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 0s 421ms/step - loss: 2.1553 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 0s 442ms/step - loss: 2.1464 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 0s 465ms/step - loss: 2.1375 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 0s 486ms/step - loss: 2.1286 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 0s 468ms/step - loss: 2.1197 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 1s 509ms/step - loss: 2.1108 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 1s 544ms/step - loss: 2.1020 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 1s 676ms/step - loss: 2.0932 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 1s 543ms/step - loss: 2.0844 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 1s 584ms/step - loss: 2.0756 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 1s 608ms/step - loss: 2.0668 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 1s 643ms/step - loss: 2.0580 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 1s 651ms/step - loss: 2.0493 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 1s 660ms/step - loss: 2.0406 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 1s 664ms/step - loss: 2.0319 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 1s 702ms/step - loss: 2.0232 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 1s 735ms/step - loss: 2.0145 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 1s 709ms/step - loss: 2.0059 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 1s 773ms/step - loss: 1.9973 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 1s 901ms/step - loss: 1.9887 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 1s 902ms/step - loss: 1.9801 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 1s 948ms/step - loss: 1.9715 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 1s 865ms/step - loss: 1.9629 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 1s 839ms/step - loss: 1.9544 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 1s 987ms/step - loss: 1.9459 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 1s 1s/step - loss: 1.9374 - acc: 1.0000\r\nEpoch 1/1\r\n1/1 [==============================] - 1s 1s/step - loss: 1.9289 - acc: 1.0000\r\nEpoch 1/1"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25066", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25066/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25066/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25066/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25066", "id": 401290285, "node_id": "MDU6SXNzdWU0MDEyOTAyODU=", "number": 25066, "title": "AdamWOptimizer doesn't work with MirroredStrategy and tf.get_variable", "user": {"login": "ytdu", "id": 7380587, "node_id": "MDQ6VXNlcjczODA1ODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/7380587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ytdu", "html_url": "https://github.com/ytdu", "followers_url": "https://api.github.com/users/ytdu/followers", "following_url": "https://api.github.com/users/ytdu/following{/other_user}", "gists_url": "https://api.github.com/users/ytdu/gists{/gist_id}", "starred_url": "https://api.github.com/users/ytdu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ytdu/subscriptions", "organizations_url": "https://api.github.com/users/ytdu/orgs", "repos_url": "https://api.github.com/users/ytdu/repos", "events_url": "https://api.github.com/users/ytdu/events{/privacy}", "received_events_url": "https://api.github.com/users/ytdu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 1166103538, "node_id": "MDU6TGFiZWwxMTY2MTAzNTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/contrib", "name": "contrib", "color": "5319e7", "default": false, "description": "Anything that comes under contrib directory"}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 1345373822, "node_id": "MDU6TGFiZWwxMzQ1MzczODIy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:ds-triaged", "name": "stat:ds-triaged", "color": "f2dea7", "default": false, "description": "Internal label for triaging"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "guptapriya", "id": 14104855, "node_id": "MDQ6VXNlcjE0MTA0ODU1", "avatar_url": "https://avatars1.githubusercontent.com/u/14104855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guptapriya", "html_url": "https://github.com/guptapriya", "followers_url": "https://api.github.com/users/guptapriya/followers", "following_url": "https://api.github.com/users/guptapriya/following{/other_user}", "gists_url": "https://api.github.com/users/guptapriya/gists{/gist_id}", "starred_url": "https://api.github.com/users/guptapriya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guptapriya/subscriptions", "organizations_url": "https://api.github.com/users/guptapriya/orgs", "repos_url": "https://api.github.com/users/guptapriya/repos", "events_url": "https://api.github.com/users/guptapriya/events{/privacy}", "received_events_url": "https://api.github.com/users/guptapriya/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "guptapriya", "id": 14104855, "node_id": "MDQ6VXNlcjE0MTA0ODU1", "avatar_url": "https://avatars1.githubusercontent.com/u/14104855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guptapriya", "html_url": "https://github.com/guptapriya", "followers_url": "https://api.github.com/users/guptapriya/followers", "following_url": "https://api.github.com/users/guptapriya/following{/other_user}", "gists_url": "https://api.github.com/users/guptapriya/gists{/gist_id}", "starred_url": "https://api.github.com/users/guptapriya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guptapriya/subscriptions", "organizations_url": "https://api.github.com/users/guptapriya/orgs", "repos_url": "https://api.github.com/users/guptapriya/repos", "events_url": "https://api.github.com/users/guptapriya/events{/privacy}", "received_events_url": "https://api.github.com/users/guptapriya/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-01-21T10:36:56Z", "updated_at": "2019-05-03T01:00:34Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.12.0\r\n- Python version: 3.5.2\r\n- CUDA/cuDNN version: 9.0.176 / 7.4.1\r\n- GPU model and memory: TITAN X, 12189MiB\r\n\r\n**Describe the current behavior**\r\n`tf.contrib.opt.AdamWOptimizer` does not do weight decay when using `MirroredStrategy` along with `tf.get_variable`\r\n**Describe the expected behavior**\r\n`tf.contrib.opt.AdamWOptimizer` should always do weight decay, regardless of how variables are created.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\n\r\nflags = tf.flags\r\nFLAGS = flags.FLAGS\r\nflags.DEFINE_bool('use_get_variable', False, 'Whether to use tf.get_variable to create variables')\r\n\r\n\r\ndef model_fn(features, labels, mode, params):\r\n    if FLAGS.use_get_variable:\r\n        x = tf.get_variable('x', initializer=[1.])\r\n    else:\r\n        x = tf.Variable([1.], name='x')\r\n    loss = tf.reduce_sum(x * x)  # the original loss is 14.\r\n\r\n    # here we let learning rate be 0 so that the updates come only from weight decay.\r\n    # after 1 step of weight decay, the final loss should be 0.81.\r\n    optimizer = tf.contrib.opt.AdamWOptimizer(learning_rate=0.0, weight_decay=0.1)\r\n\r\n    tvars = tf.trainable_variables()\r\n    tf.logging.info('All variables: {}'.format(tvars))\r\n    grads = tf.gradients(loss, tvars)\r\n    global_step = tf.train.get_or_create_global_step()\r\n    train_op = optimizer.apply_gradients(zip(grads, tvars), global_step=global_step, decay_var_list=tvars)\r\n    output_spec = tf.contrib.tpu.TPUEstimatorSpec(mode=mode, loss=loss, train_op=train_op)\r\n    return output_spec\r\n\r\n\r\ndef input_fn(params):\r\n    return tf.data.Dataset.from_tensors([0.]).repeat()\r\n\r\n\r\ndef main(_):\r\n    tf.logging.set_verbosity(tf.logging.INFO)\r\n\r\n    distribution = tf.contrib.distribute.MirroredStrategy()\r\n    run_config = tf.contrib.tpu.RunConfig(train_distribute=distribution)\r\n    estimator = tf.contrib.tpu.TPUEstimator(use_tpu=False, model_fn=model_fn, config=run_config)\r\n    # here max_steps=2 so that the final loss printed is after 1 step update.\r\n    estimator.train(input_fn=input_fn, max_steps=2)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    tf.app.run()\r\n```\r\n\r\n**Other info / logs**\r\nI ran the above script with 0 or 1 GPU, both producing:\r\n`python test.py --use_get_variable=False`\r\n![image](https://user-images.githubusercontent.com/7380587/51468725-a1efbd80-1daa-11e9-9328-367769a8c19f.png)\r\n\r\n`python test.py --use_get_variable=True`\r\n![image](https://user-images.githubusercontent.com/7380587/51468786-be8bf580-1daa-11e9-8958-d30f1c3dcf19.png)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25064", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25064/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25064/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25064/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25064", "id": 401235249, "node_id": "MDU6SXNzdWU0MDEyMzUyNDk=", "number": 25064, "title": "Example missing for using the field `tensor_content` with Golang grpc client", "user": {"login": "lnshi", "id": 24580114, "node_id": "MDQ6VXNlcjI0NTgwMTE0", "avatar_url": "https://avatars0.githubusercontent.com/u/24580114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lnshi", "html_url": "https://github.com/lnshi", "followers_url": "https://api.github.com/users/lnshi/followers", "following_url": "https://api.github.com/users/lnshi/following{/other_user}", "gists_url": "https://api.github.com/users/lnshi/gists{/gist_id}", "starred_url": "https://api.github.com/users/lnshi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lnshi/subscriptions", "organizations_url": "https://api.github.com/users/lnshi/orgs", "repos_url": "https://api.github.com/users/lnshi/repos", "events_url": "https://api.github.com/users/lnshi/events{/privacy}", "received_events_url": "https://api.github.com/users/lnshi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-01-21T08:06:03Z", "updated_at": "2019-02-05T01:20:33Z", "closed_at": null, "author_association": "NONE", "body": "**Describe the documentation issue**\r\n\r\nWith my python client i can call my model server properly with the code like this:\r\n```\r\nrequest.inputs[\"input\"].CopyFrom(\r\n    tf.contrib.util.make_tensor_proto([165, 60, 35],dtype=dtypes.int32)\r\n)\r\nresponse = stub.Predict(request,30.0)\r\n```\r\n\r\nAnd in python terminal i checked the output of the `make_tensor_proto`, i got something like this:\r\n```\r\n>>> tf.contrib.util.make_tensor_proto([165, 60, 35],dtype=dtypes.int32)\r\ndtype: DT_INT32\r\ntensor_shape {\r\n  dim {\r\n    size: 3\r\n  }\r\n}\r\ntensor_content: \"\\245\\000\\000\\000<\\000\\000\\000#\\000\\000\\000\"\r\n```\r\n**But I cannot make this work with Golang, tried to search with different terms cannot find one example how to fill the `tensor_content` field.**\r\n\r\nAccording to the documentations i got:\r\n```\r\n// Serialized raw tensor content from either Tensor::AsProtoTensorContent or\r\n// memcpy in tensorflow::grpc::EncodeTensorToByteBuffer. This representation\r\n// can be used for all tensor types. The purpose of this representation is to\r\n// reduce serialization overhead during RPC call by avoiding serialization of\r\n// many repeated small items.\r\nTensorContent []byte `protobuf:\"bytes,4,opt,name=tensor_content,json=tensorContent,proto3\" json:\"tensor_content,omitempty\"`\r\n```\r\n(do i need to implement the above mentioned `Tensor::AsProtoTensorContent` and `tensorflow::grpc::EncodeTensorToByteBuffer` by myself?)\r\n\r\nBut tried different ways like:\r\n```\r\npr          tf.PredictRequest\r\n// Construct the `pr` structure properly.\r\n// ...\r\npr.Inputs[\"input\"].TensorContent = []byte{165, 60, 35}\r\n```\r\netc cannot make it work, always resulted in error message:\r\n```\r\npanic: rpc error: code = Internal desc = transport: received the unexpected content-type \"text/plain; charset=utf-8\"\r\n```\r\n\r\n**Also if i want to send such a request in JSON, what should i put in the `tensor_content` field:**\r\n```\r\n{\r\n  \"model_spec\": {\r\n    \"name\": \"gender\",\r\n    \"version\": \"1\"\r\n  },\r\n  \"inputs\": {\r\n    \"input\": {\r\n      \"dtype\": 3,\r\n      \"tensor_shape\": {\r\n        \"dim\": [\r\n          {\r\n            \"size\": 3\r\n          }\r\n        ]\r\n      },\r\n      \"tensor_content\": \"WzEsMl0=\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nPls help to provide a proper example in the corresponding docs, thanks."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25058", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25058/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25058/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25058/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25058", "id": 401128822, "node_id": "MDU6SXNzdWU0MDExMjg4MjI=", "number": 25058, "title": "Failed to build for iOS project using Xcode 10.1: Undefined symbols for architecture x86_64", "user": {"login": "andreapavan", "id": 967512, "node_id": "MDQ6VXNlcjk2NzUxMg==", "avatar_url": "https://avatars0.githubusercontent.com/u/967512?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andreapavan", "html_url": "https://github.com/andreapavan", "followers_url": "https://api.github.com/users/andreapavan/followers", "following_url": "https://api.github.com/users/andreapavan/following{/other_user}", "gists_url": "https://api.github.com/users/andreapavan/gists{/gist_id}", "starred_url": "https://api.github.com/users/andreapavan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andreapavan/subscriptions", "organizations_url": "https://api.github.com/users/andreapavan/orgs", "repos_url": "https://api.github.com/users/andreapavan/repos", "events_url": "https://api.github.com/users/andreapavan/events{/privacy}", "received_events_url": "https://api.github.com/users/andreapavan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 1205765054, "node_id": "MDU6TGFiZWwxMjA1NzY1MDU0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:macOS", "name": "subtype:macOS", "color": "b619ea", "default": false, "description": "macOS Build/Installation issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-01-20T19:09:40Z", "updated_at": "2020-02-21T18:42:54Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Mac OS Mojave 10.14.2\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: n/a\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 1.12.0\r\n- Python version: 2.7.10\r\n- Installed using virtualenv? pip? conda?: pip\r\n- Bazel version (if compiling from source): 0.20.0-homebrew\r\n- GCC/Compiler version (if compiling from source): Apple LLVM version 10.0.0 (clang-1000.11.45.5)\r\nTarget: x86_64-apple-darwin18.2.0\r\n- CUDA/cuDNN version: n/a\r\n- GPU model and memory: n/a\r\n- Xcode: Version 10.1 (10B61)\r\n\r\n**Describe the problem**\r\n\r\nError during compiling iOS app with TF static library. The steps are described below.\r\nAfter compiling TF library from source, importing it in a blank Xcode project I get the following error:\r\n\r\n`ld: symbol(s) not found for architecture x86_64`\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n1. Cloned the TF repo with: `git clone https://github.com/tensorflow/tensorflow -b r1.12`\r\n2. Configuring:\r\n```\r\nYou have bazel 0.20.0-homebrew installed.\r\nPlease specify the location of python. [Default is /usr/bin/python]:\r\n\r\n\r\nFound possible Python library paths:\r\n  /Library/Python/2.7/site-packages\r\nPlease input the desired Python library path to use.  Default is [/Library/Python/2.7/site-packages]\r\n\r\nDo you wish to build TensorFlow with Google Cloud Platform support? [Y/n]: n\r\nNo Google Cloud Platform support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with Hadoop File System support? [Y/n]: n\r\nNo Hadoop File System support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with Amazon AWS Platform support? [Y/n]: n\r\nNo Amazon AWS Platform support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with Apache Kafka Platform support? [Y/n]: n\r\nNo Apache Kafka Platform support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with XLA JIT support? [y/N]: N\r\nNo XLA JIT support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with GDR support? [y/N]: N\r\nNo GDR support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with VERBS support? [y/N]: N\r\nNo VERBS support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with OpenCL SYCL support? [y/N]: N\r\nNo OpenCL SYCL support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with CUDA support? [y/N]: N\r\nNo CUDA support will be enabled for TensorFlow.\r\n\r\nDo you wish to download a fresh release of clang? (Experimental) [y/N]: N\r\nClang will not be downloaded.\r\n\r\nDo you wish to build TensorFlow with MPI support? [y/N]: N\r\nNo MPI support will be enabled for TensorFlow.\r\n\r\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]:\r\n\r\n\r\nWould you like to interactively configure ./WORKSPACE for Android builds? [y/N]: N\r\nNot configuring the WORKSPACE for Android builds.\r\n\r\nPreconfigured Bazel build configs. You can use any of the below by adding \"--config=<>\" to your build command. See tools/bazel.rc for more details.\r\n        --config=mkl            # Build with MKL support.\r\n        --config=monolithic     # Config for mostly static monolithic build.\r\nConfiguration finished \r\n```\r\n3. Updated makefile for iOS as mentioned in https://github.com/tensorflow/tensorflow/issues/18356 and modified `tensorflow/tensorflow/core/util/work_sharder.cc` file as mentioned by https://github.com/tensorflow/tensorflow/issues/18356#issuecomment-422373566\r\n\r\n4. After compiling (successfully) I obtain:\r\n\r\n- `tensorflow/contrib/makefile/gen/lib/libtensorflow-core.a`\r\n- `tensorflow/contrib/makefile/gen/protobuf_ios/lib/libprotobuf.a`\r\n- `tensorflow/contrib/makefile/gen/protobuf_ios/lib/libprotobuf-lite.a`\r\n\r\n5. I created a new blank Xcode project and following https://stackoverflow.com/questions/37769904/how-to-compile-ios-example-in-tensorflow?utm_medium=organic&utm_source=google_rich_qa&utm_campaign=google_rich_qa I linked all the libraries\r\n\r\n6. The compile phase ends with errors show below\r\n\r\n**Any other info / logs**\r\n\r\n`Undefined symbols for architecture x86_64:\r\n  \"std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::at(unsigned long) const\", referenced from:\r\n      google::protobuf::io::Tokenizer::IsIdentifier(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&) in libprotobuf.a(tokenizer.o)\r\n  \"std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__grow_by(unsigned long, unsigned long, unsigned long, unsigned long, unsigned long, unsigned long)\", referenced from:\r\n      std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >& std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__append_forward_unsafe<std::__1::__wrap_iter<char const*> >(std::__1::__wrap_iter<char const*>, std::__1::__wrap_iter<char const*>) in libprotobuf-lite.a(strutil.o)\r\n      std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >& std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::__append_forward_unsafe<char const*>(char const*, char const*) in libprotobuf.a(strtod.o)\r\n  \"std::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l> > >)\", referenced from:\r\n      std::__1::cv_status std::__1::condition_variable::wait_until<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000l> > >(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000l> > > const&) in nsync.a(nsync_semaphore_mutex.o)\r\n  \"std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >::replace(unsigned long, unsigned long, char const*)\", referenced from:\r\n      google::protobuf::EnumDescriptor::DebugString(int, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, google::protobuf::DebugStringOptions const&) const in libprotobuf.a(descriptor.o)\r\n      google::protobuf::Descriptor::DebugString(int, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >*, google::protobuf::DebugStringOptions const&, bool) const in libprotobuf.a(descriptor.o)\r\n  \"std::__1::this_thread::sleep_for(std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l> > const&)\", referenced from:\r\n      nsync::nsync_time_sleep(timespec) in nsync.a(time_rep_timespec.o)\r\n  \"std::__1::basic_ostream<char, std::__1::char_traits<char> >::put(char)\", referenced from:\r\n      tensorflow::StatsCalculator::GetShortSummary() const in libtensorflow-core.a(stats_calculator.o)\r\n      tensorflow::StatsCalculator::HeaderString(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&) const in libtensorflow-core.a(stats_calculator.o)\r\n      tensorflow::StatsCalculator::GetStatsByNodeType() const in libtensorflow-core.a(stats_calculator.o)\r\n      tensorflow::StatsCalculator::GetStatsByMetric(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, tensorflow::StatsCalculator::SortingMetric, int) const in libtensorflow-core.a(stats_calculator.o)\r\n      tensorflow::StatsCalculator::GetOutputString() const in libtensorflow-core.a(stats_calculator.o)\r\n      tensorflow::PrintOp::Compute(tensorflow::OpKernelContext*) in libtensorflow-core.a(logging_ops.o)\r\n      tensorflow::PrintV2Op::Compute(tensorflow::OpKernelContext*) in libtensorflow-core.a(logging_ops.o)`\r\n\r\n      ...\r\n\r\n`  \"std::__1::basic_ostream<char, std::__1::char_traits<char> >::operator<<(long)\", referenced from:\r\n      std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >* tensorflow::internal::MakeCheckOpString<int, long>(int const&, long const&, char const*) in libtensorflow-core.a(ctc_loss_calculator.o)\r\n      std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >* tensorflow::internal::MakeCheckOpString<int, long>(int const&, long const&, char const*) in libtensorflow-core.a(ctc_decoder_ops.o)\r\n      std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >* tensorflow::internal::MakeCheckOpString<int, long>(int const&, long const&, char const*) in libtensorflow-core.a(pad_op.o)\r\n\"operator new(unsigned long)\", referenced from:\r\n protobuf_tensorflow_2fcontrib_2fboosted_5ftrees_2fproto_2flearner_2eproto::protobuf_AssignDescriptors() in libtensorflow-core.a(learner.pb.o)    tensorflow::boosted_trees::learner::LearnerConfig::LearnerConfig(tensorflow::boosted_trees::learner::LearnerConfig const&) in libtensorflow-core.a(learner.pb.o)\r\n      tensorflow::boosted_trees::learner::TreeRegularizationConfig* google::protobuf::Arena::CreateMessage<tensorflow::boosted_trees::learner::TreeRegularizationConfig>(google::protobuf::Arena*) in libtensorflow-core.a(learner.pb.o)\r\n      tensorflow::boosted_trees::learner::TreeConstraintsConfig* google::protobuf::Arena::CreateMessage<tensorflow::boosted_trees::learner::TreeConstraintsConfig>(google::protobuf::Arena*) in libtensorflow-core.a(learner.pb.o)\r\n      tensorflow::boosted_trees::learner::LearningRateConfig* google::protobuf::Arena::CreateMessage<tensorflow::boosted_trees::learner::LearningRateConfig>(google::protobuf::Arena*) in libtensorflow-core.a(learner.pb.o)\r\n      tensorflow::boosted_trees::learner::LearningRateFixedConfig* google::protobuf::Arena::CreateMessage<tensorflow::boosted_trees::learner::LearningRateFixedConfig>(google::protobuf::Arena*) in libtensorflow-core.a(learner.pb.o)\r\n      tensorflow::boosted_trees::learner::LearningRateLineSearchConfig* google::protobuf::Arena::CreateMessage<tensorflow::boosted_trees::learner::LearningRateLineSearchConfig>(google::protobuf::Arena*) in libtensorflow-core.a(learner.pb.o)\r\n      ...\r\nld: symbol(s) not found for architecture x86_64\r\nclang: error: linker command failed with exit code 1 (use -v to see invocation)`\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25050", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25050/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25050/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25050/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25050", "id": 401062260, "node_id": "MDU6SXNzdWU0MDEwNjIyNjA=", "number": 25050, "title": "Error: No gradient defined for operation (op type: CropAndResizeGradImage)", "user": {"login": "john81923", "id": 13913627, "node_id": "MDQ6VXNlcjEzOTEzNjI3", "avatar_url": "https://avatars1.githubusercontent.com/u/13913627?v=4", "gravatar_id": "", "url": "https://api.github.com/users/john81923", "html_url": "https://github.com/john81923", "followers_url": "https://api.github.com/users/john81923/followers", "following_url": "https://api.github.com/users/john81923/following{/other_user}", "gists_url": "https://api.github.com/users/john81923/gists{/gist_id}", "starred_url": "https://api.github.com/users/john81923/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/john81923/subscriptions", "organizations_url": "https://api.github.com/users/john81923/orgs", "repos_url": "https://api.github.com/users/john81923/repos", "events_url": "https://api.github.com/users/john81923/events{/privacy}", "received_events_url": "https://api.github.com/users/john81923/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-01-20T04:40:43Z", "updated_at": "2019-02-06T22:58:54Z", "closed_at": null, "author_association": "NONE", "body": "I'm running FasterRCNN model with second ordered differentiation. \r\nbut an error occur: \r\n`No gradient defined for operation 'tower0/gradients/tower0/roi_align/crop_and_resize/CropAndResize_grad/CropAndResizeGradImage' (op type: CropAndResizeGradImage)` \r\n\r\nI have been looking on the internet and haven't found a solution \r\nplease help\r\nthank you"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25044", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25044/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25044/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25044/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25044", "id": 401010573, "node_id": "MDU6SXNzdWU0MDEwMTA1NzM=", "number": 25044, "title": "[TFLite] Feature request: Add support for DepthToSpace op ", "user": {"login": "stakemura", "id": 1152138, "node_id": "MDQ6VXNlcjExNTIxMzg=", "avatar_url": "https://avatars0.githubusercontent.com/u/1152138?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stakemura", "html_url": "https://github.com/stakemura", "followers_url": "https://api.github.com/users/stakemura/followers", "following_url": "https://api.github.com/users/stakemura/following{/other_user}", "gists_url": "https://api.github.com/users/stakemura/gists{/gist_id}", "starred_url": "https://api.github.com/users/stakemura/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stakemura/subscriptions", "organizations_url": "https://api.github.com/users/stakemura/orgs", "repos_url": "https://api.github.com/users/stakemura/repos", "events_url": "https://api.github.com/users/stakemura/events{/privacy}", "received_events_url": "https://api.github.com/users/stakemura/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-01-19T16:23:55Z", "updated_at": "2019-10-03T00:06:09Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):Ubuntu 16.04\r\n- TensorFlow installed from (source or binary):source\r\n- TensorFlow version (or github SHA if from source):1.13\r\n\r\n\r\n**Provide the text output from tflite_convert**\r\n\r\n```\r\n...  Converting unsupported operation: DepthToSpace\r\n```\r\n\r\n**Any other info / logs**\r\n\r\nDepthToSpace op has been well used for implementing subpixel convolution (aka pixel shuffle) like [this super-resolution task](https://davidreiman.github.io/posts/galaxy-image-super-resolution.html). \r\nI know SELECT_TF_OPS option. But its binary size is too huge for mobile application.\r\nWould you like to add DepthToSpace to built-in ops? "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25040", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25040/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25040/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25040/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25040", "id": 400954709, "node_id": "MDU6SXNzdWU0MDA5NTQ3MDk=", "number": 25040, "title": "tf.hessians vs tf.hessian_vector_product won't give the same result", "user": {"login": "yaserkl", "id": 6896361, "node_id": "MDQ6VXNlcjY4OTYzNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/6896361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yaserkl", "html_url": "https://github.com/yaserkl", "followers_url": "https://api.github.com/users/yaserkl/followers", "following_url": "https://api.github.com/users/yaserkl/following{/other_user}", "gists_url": "https://api.github.com/users/yaserkl/gists{/gist_id}", "starred_url": "https://api.github.com/users/yaserkl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yaserkl/subscriptions", "organizations_url": "https://api.github.com/users/yaserkl/orgs", "repos_url": "https://api.github.com/users/yaserkl/repos", "events_url": "https://api.github.com/users/yaserkl/events{/privacy}", "received_events_url": "https://api.github.com/users/yaserkl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-01-19T03:13:26Z", "updated_at": "2019-02-22T21:47:48Z", "closed_at": null, "author_association": "NONE", "body": "I want to test whether the hessian of an objective loss is equal to the hessian vector product (HVP) of the same loss when we pass a vector of ones to the HVP function.\r\nHere is my simple code to test this idea and surprisingly the result of the two are not the same.\r\nI've put enough comments in the code to follow the problem easier and the hessian_vector_product function is taken from the tensorflow implementation in [here](https://github.com/tensorflow/tensorflow/blob/r1.12/tensorflow/python/ops/gradients_impl.py):\r\n\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\nfrom tensorflow.python.ops import array_ops\r\nfrom tensorflow.python.ops import math_ops\r\nfrom tensorflow import gradients\r\n\r\ndef hessian_vector_product(ys, xs, v):\r\n  \"\"\"Multiply the Hessian of `ys` wrt `xs` by `v`.\r\n  This is an efficient construction that uses a backprop-like approach\r\n  to compute the product between the Hessian and another vector. The\r\n  Hessian is usually too large to be explicitly computed or even\r\n  represented, but this method allows us to at least multiply by it\r\n  for the same big-O cost as backprop.\r\n  Implicit Hessian-vector products are the main practical, scalable way\r\n  of using second derivatives with neural networks. They allow us to\r\n  do things like construct Krylov subspaces and approximate conjugate\r\n  gradient descent.\r\n  Example: if `y` = 1/2 `x`^T A `x`, then `hessian_vector_product(y,\r\n  x, v)` will return an expression that evaluates to the same values\r\n  as (A + A.T) `v`.\r\n  Args:\r\n    ys: A scalar value, or a tensor or list of tensors to be summed to\r\n        yield a scalar.\r\n    xs: A list of tensors that we should construct the Hessian over.\r\n    v: A list of tensors, with the same shapes as xs, that we want to\r\n       multiply by the Hessian.\r\n  Returns:\r\n    A list of tensors (or if the list would be length 1, a single tensor)\r\n    containing the product between the Hessian and `v`.\r\n  Raises:\r\n    ValueError: `xs` and `v` have different length.\r\n  \"\"\" \r\n\r\n  # Validate the input\r\n  length = len(xs)\r\n  if len(v) != length:\r\n    raise ValueError(\"xs and v must have the same length.\")\r\n\r\n  # First backprop\r\n  grads = gradients(ys, xs)\r\n\r\n  # grads = xs\r\n\r\n  assert len(grads) == length\r\n\r\n  elemwise_products = [\r\n      math_ops.multiply(grad_elem, array_ops.stop_gradient(v_elem))\r\n      for grad_elem, v_elem in zip(grads, v) if grad_elem is not None\r\n  ]\r\n\r\n  # Second backprop  \r\n  grads_with_none = gradients(elemwise_products, xs)\r\n  return_grads = [\r\n      grad_elem if grad_elem is not None \\\r\n      else tf.zeros_like(x) \\\r\n      for x, grad_elem in zip(xs, grads_with_none)]\r\n  \r\n  return return_grads\r\n\r\n\r\nk = 1\r\ntf.reset_default_graph()\r\na = tf.get_variable('a', [k])\r\n#b = tf.get_variable('b', [k])\r\nb = tf.multiply(a,a) # b = a^2\r\nc = tf.multiply(tf.multiply(a,a),a) + tf.multiply(b,b) # c = a^3 + b^2\r\n\r\n# Calculate the hessian of c w.r.t. a and b\r\n# This is equivalent to the following matrix:\r\n#    -               -\r\n#   | 6a+12a^2    4a  |\r\n# H=|                 |\r\n#   | 4a          2.0 | \r\n#    -               -\r\n\r\n# However the following line returns this matrix or basically just the diagonal values:\r\n#       -               -\r\n#      | 6a+12a^2     0  |\r\n# hess=|                 |\r\n#      |    0        2.0 | \r\n#       -               -\r\nhess = tf.hessians(c, [a,b])\r\n\r\n# while the following line which calculates Hv or H.1 = H, returns this vector:\r\n#       -                     -\r\n# hvp= | 6a+12a^2+4a    2.0+4a |\r\n#       -                     -\r\n\r\nv = [np.ones((k),dtype=np.float32),np.ones((k),dtype=np.float32)]\r\nhvp = hessian_vector_product(c, [a,b], v)\r\n\r\n# which is basically the summation of derivatives in hessian matrix along the rows.\r\n\r\n# According to this observation (and similar tests), \r\n# the result of tf.hessians always return zero for off-diagonal elements,\r\n# which shouldn't be the case\r\n# On the other hand hessian vector product (HVP) function, only returns the summation of hessians over rows\r\n# and we can't access to off-diagonal elements of the hessian matrix using this function, too.\r\n\r\nsess = tf.Session()\r\nsess.run(tf.global_variables_initializer())\r\n\r\n_a, _hess, _hvp = sess.run([a, hess, hvp])\r\n```\r\n\r\nThis problem will be avoided if the variable `b` is not depended on `a` and thus the hessian matrix only should have values on the diagonals and all the other values will be zero. Therefore, HVP and hessian matrix would have the same values. However, as we all know this is a rare scenario and in most of the real-world applications trainable variables are depended to each other."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24998", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24998/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24998/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24998/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24998", "id": 400282680, "node_id": "MDU6SXNzdWU0MDAyODI2ODA=", "number": 24998, "title": "TPUEstimatorSpec supports hooks or not?", "user": {"login": "patzm", "id": 5219726, "node_id": "MDQ6VXNlcjUyMTk3MjY=", "avatar_url": "https://avatars1.githubusercontent.com/u/5219726?v=4", "gravatar_id": "", "url": "https://api.github.com/users/patzm", "html_url": "https://github.com/patzm", "followers_url": "https://api.github.com/users/patzm/followers", "following_url": "https://api.github.com/users/patzm/following{/other_user}", "gists_url": "https://api.github.com/users/patzm/gists{/gist_id}", "starred_url": "https://api.github.com/users/patzm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/patzm/subscriptions", "organizations_url": "https://api.github.com/users/patzm/orgs", "repos_url": "https://api.github.com/users/patzm/repos", "events_url": "https://api.github.com/users/patzm/events{/privacy}", "received_events_url": "https://api.github.com/users/patzm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "wolffg", "id": 874510, "node_id": "MDQ6VXNlcjg3NDUxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/874510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wolffg", "html_url": "https://github.com/wolffg", "followers_url": "https://api.github.com/users/wolffg/followers", "following_url": "https://api.github.com/users/wolffg/following{/other_user}", "gists_url": "https://api.github.com/users/wolffg/gists{/gist_id}", "starred_url": "https://api.github.com/users/wolffg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wolffg/subscriptions", "organizations_url": "https://api.github.com/users/wolffg/orgs", "repos_url": "https://api.github.com/users/wolffg/repos", "events_url": "https://api.github.com/users/wolffg/events{/privacy}", "received_events_url": "https://api.github.com/users/wolffg/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wolffg", "id": 874510, "node_id": "MDQ6VXNlcjg3NDUxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/874510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wolffg", "html_url": "https://github.com/wolffg", "followers_url": "https://api.github.com/users/wolffg/followers", "following_url": "https://api.github.com/users/wolffg/following{/other_user}", "gists_url": "https://api.github.com/users/wolffg/gists{/gist_id}", "starred_url": "https://api.github.com/users/wolffg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wolffg/subscriptions", "organizations_url": "https://api.github.com/users/wolffg/orgs", "repos_url": "https://api.github.com/users/wolffg/repos", "events_url": "https://api.github.com/users/wolffg/events{/privacy}", "received_events_url": "https://api.github.com/users/wolffg/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-01-17T13:42:48Z", "updated_at": "2019-01-17T23:09:01Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a documentation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:doc_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version: 1.12\r\n- Doc Links:\r\n  - https://www.tensorflow.org/guide/using_tpu\r\n  - https://cloud.google.com/ml-engine/docs/tensorflow/using-tpus\r\n  - https://www.tensorflow.org/api_docs/python/tf/contrib/tpu/TPUEstimatorSpec\r\n\r\n\r\n**Describe the documentation issue**\r\n> The tf.train.SessionRunHook are unsupported, so these fields are omitted\r\n\r\nThe first link from above claims that no hooks are supported whatsover.\r\n> TPUEstimator handles many of the details of running on TPU devices, such as replicating inputs and models for each core, and returning to host periodically to run hooks.\r\n\r\nThe second link from above claims that they are indeed supported.\r\nThe documentation of the `TPUEstimatorSpec` itself does not mention anything about that.\r\n\r\nWhich of the two is now the case? Which hooks are supported (`training_hooks`, `evaluation_hooks`, `prediction_hooks`)?\r\n\r\n**We welcome contributions by users. Will you be able to update submit a PR (use the [doc style guide](https://www.tensorflow.org/community/documentation)) to fix the doc Issue?**\r\nYes absolutely! If you clarify the current level of support, I gladly update the documentation!"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24982", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24982/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24982/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24982/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24982", "id": 400104437, "node_id": "MDU6SXNzdWU0MDAxMDQ0Mzc=", "number": 24982, "title": "Enable reference code of kernels(internal) in TF-Lite", "user": {"login": "babuya7", "id": 17598484, "node_id": "MDQ6VXNlcjE3NTk4NDg0", "avatar_url": "https://avatars0.githubusercontent.com/u/17598484?v=4", "gravatar_id": "", "url": "https://api.github.com/users/babuya7", "html_url": "https://github.com/babuya7", "followers_url": "https://api.github.com/users/babuya7/followers", "following_url": "https://api.github.com/users/babuya7/following{/other_user}", "gists_url": "https://api.github.com/users/babuya7/gists{/gist_id}", "starred_url": "https://api.github.com/users/babuya7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/babuya7/subscriptions", "organizations_url": "https://api.github.com/users/babuya7/orgs", "repos_url": "https://api.github.com/users/babuya7/repos", "events_url": "https://api.github.com/users/babuya7/events{/privacy}", "received_events_url": "https://api.github.com/users/babuya7/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-01-17T04:20:41Z", "updated_at": "2019-01-18T23:54:08Z", "closed_at": null, "author_association": "NONE", "body": "Hi,\r\nI want to benchmark the model based on reference code and Neon optimized code for kernels.So that I  want to enable the reference code implementation while executing the Tensorflow Lite model.\r\n\r\nIs there is any way to run reference code ?\r\nI tried to make changes in build file but there is some compilation issues.\r\nThanks and Regards,\r\nAmar kumar\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24974", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24974/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24974/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24974/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24974", "id": 399973382, "node_id": "MDU6SXNzdWUzOTk5NzMzODI=", "number": 24974, "title": "GetTempFilename is not implemented", "user": {"login": "Oceania2018", "id": 1705364, "node_id": "MDQ6VXNlcjE3MDUzNjQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1705364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Oceania2018", "html_url": "https://github.com/Oceania2018", "followers_url": "https://api.github.com/users/Oceania2018/followers", "following_url": "https://api.github.com/users/Oceania2018/following{/other_user}", "gists_url": "https://api.github.com/users/Oceania2018/gists{/gist_id}", "starred_url": "https://api.github.com/users/Oceania2018/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Oceania2018/subscriptions", "organizations_url": "https://api.github.com/users/Oceania2018/orgs", "repos_url": "https://api.github.com/users/Oceania2018/repos", "events_url": "https://api.github.com/users/Oceania2018/events{/privacy}", "received_events_url": "https://api.github.com/users/Oceania2018/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2019-01-16T20:02:29Z", "updated_at": "2020-03-10T23:43:54Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Windows 10:\r\n- TensorFlow installed from (source or binary):\r\n- master branch:\r\n- python 3.6:\r\n\r\n**tensorflow\\core\\lib\\io\\path.cc(290) : error C4716: 'tensorflow::io::GetTempFilename': must return a value**\r\n\r\n**bazel build --config=opt -c fastbuild //tensorflow:libtensorflow.so**\r\n\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n![image](https://user-images.githubusercontent.com/1705364/51275349-4e8b0300-1997-11e9-9991-5a86eb694e02.png)\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24960", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24960/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24960/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24960/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24960", "id": 399731818, "node_id": "MDU6SXNzdWUzOTk3MzE4MTg=", "number": 24960, "title": "tf.dataset + tf.estimator  slow, starving CPU/GPU", "user": {"login": "mathlf2015", "id": 17539832, "node_id": "MDQ6VXNlcjE3NTM5ODMy", "avatar_url": "https://avatars3.githubusercontent.com/u/17539832?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mathlf2015", "html_url": "https://github.com/mathlf2015", "followers_url": "https://api.github.com/users/mathlf2015/followers", "following_url": "https://api.github.com/users/mathlf2015/following{/other_user}", "gists_url": "https://api.github.com/users/mathlf2015/gists{/gist_id}", "starred_url": "https://api.github.com/users/mathlf2015/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mathlf2015/subscriptions", "organizations_url": "https://api.github.com/users/mathlf2015/orgs", "repos_url": "https://api.github.com/users/mathlf2015/repos", "events_url": "https://api.github.com/users/mathlf2015/events{/privacy}", "received_events_url": "https://api.github.com/users/mathlf2015/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-01-16T10:01:44Z", "updated_at": "2020-01-03T06:28:48Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution  Linux centos\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version (use command below): 1.9.0\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: cudatoolkit   8.0    and cudnn 7.1.3  \r\n- GPU model and memory:  Tesla M40\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\nI used the gpu to train the wide deep model with tf.dataset and tf.estimator .In the case that I have opened 4 gpus with os.environ['CUDA_VISIBLE_DEVICES'] = \"0,1,2,3\", but only one gpu utilization is 15%, the others are 0.Is it because the network structure of the deep network part cannot be parallel. So you can only use one gpu. Is there any other way to speed up the training of the model?\r\n**Describe the expected behavior**\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24957", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24957/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24957/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24957/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24957", "id": 399690173, "node_id": "MDU6SXNzdWUzOTk2OTAxNzM=", "number": 24957, "title": "native tf and tf.keras optimizer and gradient calculation problem", "user": {"login": "cwhuang119", "id": 39117820, "node_id": "MDQ6VXNlcjM5MTE3ODIw", "avatar_url": "https://avatars1.githubusercontent.com/u/39117820?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cwhuang119", "html_url": "https://github.com/cwhuang119", "followers_url": "https://api.github.com/users/cwhuang119/followers", "following_url": "https://api.github.com/users/cwhuang119/following{/other_user}", "gists_url": "https://api.github.com/users/cwhuang119/gists{/gist_id}", "starred_url": "https://api.github.com/users/cwhuang119/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cwhuang119/subscriptions", "organizations_url": "https://api.github.com/users/cwhuang119/orgs", "repos_url": "https://api.github.com/users/cwhuang119/repos", "events_url": "https://api.github.com/users/cwhuang119/events{/privacy}", "received_events_url": "https://api.github.com/users/cwhuang119/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-01-16T08:05:40Z", "updated_at": "2019-01-17T18:04:36Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nyes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nWin 10 \r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\nNo\r\n- TensorFlow installed from (source or binary):\r\npip install \r\n- TensorFlow version (use command below):\r\n1.6 and 1.10\r\n- Python version:\r\n3.6.5\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n9.0/7.05\r\n- GPU model and memory:\r\nGTX 1080 Ti\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\ntrain model using tf and tf.keras\r\n**weights updates** and **gradients** are different\r\n\r\n**test result as following chart:**\r\n![gradients](https://user-images.githubusercontent.com/39117820/51234690-7a62b480-19a8-11e9-8f46-94b247d91273.JPG)\r\n\r\n\r\n**Describe the expected behavior**\r\nSince tf.keras using tf as backend operation, weights updates and gradient calculation should be identical.\r\n**Code to reproduce the issue**\r\n\r\n```\r\n###imports and default settings\r\nimport tensorflow as tf\r\nfrom tensorflow.contrib import keras\r\nimport numpy as np\r\nimport sys,os\r\nimport keras.backend as K\r\nslim = tf.contrib.slim\r\nimg_size=10\r\ndatas = np.array([np.ones((100)),np.zeros((100))])\r\nlabels = np.array([[1.0,0.0],[0.0,1.0]])\r\nlr = 1e-3\r\nbeta_1=0.9\r\nbeta_2=0.999\r\nepsilon=1e-08\r\nseed=10\r\nrelu_function = tf.nn.relu\r\n```\r\n```\r\n##keras model\r\n\r\ntf.reset_default_graph()\r\nwith tf.get_default_graph().as_default() as keras_graph:\r\n    with tf.Session(graph=keras_graph).as_default() as keras_sess:\r\n        init = keras.initializers.RandomNormal(seed=seed)\r\n        inputs = keras.layers.Input(shape=(100,))\r\n        x = keras.layers.Dense(units=2,kernel_initializer=init,bias_initializer=init)(inputs)\r\n        pred = keras.layers.Activation(activation='softmax')(x)\r\n        model = keras.models.Model(inputs,pred)\r\n        \r\n        #tf optimizer\r\n#         optimizer = tf.train.AdamOptimizer(lr,beta1=beta_1,beta2=beta_2,epsilon=epsilon)\r\n\r\n        ###keras optimizer\r\n        optimizer = keras.optimizers.Adam(lr=lr,beta_1=beta_1,beta_2=beta_2,epsilon=epsilon)\r\n\r\n        #use differnet loss \r\n        model.compile(optimizer=optimizer,loss=keras.losses.categorical_crossentropy)\r\n\r\n        #get first cnn layer weights\r\n        keras_variable_name = [x.name for x in tf.trainable_variables()[:2]]\r\n        keras_each_layer_tensors = tf.trainable_variables()[:2]\r\n        keras_weights_list=[]\r\n        keras_gradients_list = []\r\n        ####gradient\r\n        #get gradient tensor\r\n        keras_gradients_tensor = model.optimizer.get_gradients(loss=model.loss(model.targets[0],model.outputs[0]),\r\n                                                        params=keras_each_layer_tensors)\r\n        \r\n        keras_sess = keras.backend.get_session()\r\n        #get layer weights before training\r\n        keras_weights_list.append(keras_sess.run(keras_each_layer_tensors))\r\n        #get gradients before training\r\n        keras_gradients_list.append(keras_sess.run(keras_gradients_tensor,feed_dict={model.inputs[0]:datas,model.targets[0]:labels}))\r\n        #### update weights\r\n        model.fit(x=datas,y=labels,epochs=1,verbose=2)\r\n        #get layer weights after 1 epoch training\r\n        keras_weights_list.append(keras_sess.run(keras_each_layer_tensors))\r\n        #get gradients after 1 epoch training\r\n        keras_gradients_list.append(keras_sess.run(keras_gradients_tensor,feed_dict={model.input:datas,model.targets[0]:labels}))\r\n\r\n        keras_weights_list = np.array(keras_weights_list)\r\n        keras_gradients_list = np.array(keras_gradients_list)\r\n        keras_weights_update = keras_weights_list[1]-keras_weights_list[0]\r\n  ```\r\n```\r\n###### tf model\r\ntf.reset_default_graph()\r\nwith tf.get_default_graph().as_default() as tf_graph:\r\n    with tf.Session(graph=tf_graph).as_default() as tf_sess:\r\n        initializer = tf.initializers.random_normal(seed=seed)\r\n        \r\n        ##placeholders\r\n        tf_input = tf.placeholder(tf.float32, [None, 100],\r\n                    name='input')\r\n        tf_label = tf.placeholder(tf.float32,[None,2],name='label')\r\n        tf_lr = tf.placeholder(tf.float32,[],name='lr')\r\n        #model\r\n        x = tf.layers.dense(inputs=tf_input,units=2,kernel_initializer=initializer,bias_initializer=initializer)\r\n        pred = tf.nn.softmax(x)\r\n        loss = tf.nn.softmax_cross_entropy_with_logits_v2(labels=tf_label,logits=x)\r\n#         loss = keras.losses.categorical_crossentropy(y_pred=pred,y_true=tf_label)\r\n        tf_loss = tf.reduce_mean(loss)\r\n#         tf_optimizer = tf.keras.optimizers.Adam(lr=lr)\r\n        tf_optimizer = tf.train.AdamOptimizer(learning_rate=lr,beta1=beta_1,beta2=beta_2,epsilon=epsilon,name='optimizer')\r\n        train = tf_optimizer.minimize(loss=tf_loss)\r\n        \r\n        #get tensors\r\n        tf_each_layer_tensors = tf.trainable_variables()\r\n        tf_variable_name = [x.name for x in tf.trainable_variables()]\r\n        #get gradient tensor\r\n#         tf_gradient_tensor  = tf.gradients(tf_loss,tf_each_layer_tensors)\r\n        tf_gradient_tensor  = keras.backend.gradients(tf_loss,tf_each_layer_tensors)\r\n        #init\r\n        tf_sess.run(tf.global_variables_initializer())\r\n        \r\n        tf_weights_list=[]\r\n        tf_gradients_list=[]\r\n        #get init weight before training\r\n        tf_weights_list.append(tf_sess.run(tf_each_layer_tensors))\r\n        \r\n        tf_gradients_list.append(tf_sess.run(tf_gradient_tensor,feed_dict={tf_label:labels,tf_input:datas}))\r\n\r\n        loss_value,_ = tf_sess.run([tf_loss,train],feed_dict={tf_input:datas,tf_label:labels})\r\n        print('loss:',loss_value)\r\n        \r\n        tf_weights_list.append(tf_sess.run(tf_each_layer_tensors))\r\n        \r\n        tf_gradients_list.append(tf_sess.run(tf_gradient_tensor,feed_dict={tf_label:labels,tf_input:datas}))\r\n        \r\n        tf_weights_list = np.array(tf_weights_list)\r\n        tf_gradients_list = np.array(tf_gradients_list)\r\n        \r\n        tf_weights_update = tf_weights_list[1]-tf_weights_list[0]\r\n```\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24951", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24951/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24951/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24951/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24951", "id": 399654895, "node_id": "MDU6SXNzdWUzOTk2NTQ4OTU=", "number": 24951, "title": "embedding_lookup return a SparseTensor", "user": {"login": "1049451037", "id": 15194939, "node_id": "MDQ6VXNlcjE1MTk0OTM5", "avatar_url": "https://avatars2.githubusercontent.com/u/15194939?v=4", "gravatar_id": "", "url": "https://api.github.com/users/1049451037", "html_url": "https://github.com/1049451037", "followers_url": "https://api.github.com/users/1049451037/followers", "following_url": "https://api.github.com/users/1049451037/following{/other_user}", "gists_url": "https://api.github.com/users/1049451037/gists{/gist_id}", "starred_url": "https://api.github.com/users/1049451037/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/1049451037/subscriptions", "organizations_url": "https://api.github.com/users/1049451037/orgs", "repos_url": "https://api.github.com/users/1049451037/repos", "events_url": "https://api.github.com/users/1049451037/events{/privacy}", "received_events_url": "https://api.github.com/users/1049451037/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-01-16T05:36:21Z", "updated_at": "2019-01-25T07:23:25Z", "closed_at": null, "author_association": "NONE", "body": "Neither embedding_lookup nor embedding_lookup_sparse can return a sparse tensor. Could you add a feature to support SparseTensor returned?\r\n\r\nI don't mean just convert the dense to sparse. It's **sparse lookup**."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24936", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24936/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24936/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24936/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24936", "id": 399392164, "node_id": "MDU6SXNzdWUzOTkzOTIxNjQ=", "number": 24936, "title": "High memory usage of tensorflow.python.ops.lookup_ops.index_table_from_file compared to vocabulary_file size on disc", "user": {"login": "harrysalmon", "id": 8916657, "node_id": "MDQ6VXNlcjg5MTY2NTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/8916657?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harrysalmon", "html_url": "https://github.com/harrysalmon", "followers_url": "https://api.github.com/users/harrysalmon/followers", "following_url": "https://api.github.com/users/harrysalmon/following{/other_user}", "gists_url": "https://api.github.com/users/harrysalmon/gists{/gist_id}", "starred_url": "https://api.github.com/users/harrysalmon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harrysalmon/subscriptions", "organizations_url": "https://api.github.com/users/harrysalmon/orgs", "repos_url": "https://api.github.com/users/harrysalmon/repos", "events_url": "https://api.github.com/users/harrysalmon/events{/privacy}", "received_events_url": "https://api.github.com/users/harrysalmon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-01-15T15:18:02Z", "updated_at": "2019-01-15T20:54:25Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): \r\n    - OSX Mojave 10.14.2\r\n    - 2.3 GHz Intel Core i5\r\n    - 8 GB 2133 MHz LPDDR3\r\n    - Number of Processors: 1\r\n    - Total Number of Cores: 2\r\n- TensorFlow installed from (source or binary):\r\n    - pip installed into anaconda virtual env \r\n- TensorFlow version (use command below): v1.11.0-rc2-4-gc19e29306c 1.11.0\r\n- Python version: Python 3.6.6 :: Anaconda, Inc.\r\n- Bazel version (if compiling from source): N/A \r\n- GCC/Compiler version (if compiling from source): c++ (GCC) 4.8.5\r\n- CUDA/cuDNN version: N/A \r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\nNote: while the example code is python, this problem also exists once the graph is deserialised and appears to be language independent.\r\n\r\nThis issue originates from trying to serve a Tensorflow model containing tensorflow.python.ops.lookup_ops.index_table_from_file to check the occurrence of a word in a vocabulary. The memory usage of the model when making predictions increases to ~8x the size of the vocabulary on disc (350MB vocab on disc, 3GB+ total memory usage when running).\r\n\r\nThe cause of this seems to be the size of the hash table created when initialising index_table_from_file. Using the debugger, the memory increase occurs on initialisation. \r\n\r\n**Describe the expected behavior**\r\nMemory usage on the same order as it's on disc usage. \r\n\r\n**Code to reproduce the issue**\r\n*This generates and saves an 84MB file*\r\nRunning the following opens a Tensorflow debug session.\r\n\r\n    import tensorflow as tf\r\n    import numpy as np\r\n    import string\r\n    import random\r\n    from tensorflow.python.ops.lookup_ops import index_table_from_file\r\n    from tensorflow.python import debug as tf_debug\r\n\r\n    lookup_table_filename = \"./lookup_table.csv\"\r\n    data_filename = './vocab_feature.npz'\r\n\r\n    def generate_data():\r\n        \"\"\"creates the required datafiles\"\"\"\r\n        letters = [i for i in string.ascii_letters]\r\n        vocab = set([\r\n            i + i + j + j + k + k + l + l\r\n            for i in letters\r\n            for j in letters\r\n            for k in letters\r\n            for l in letters\r\n        ])\r\n        \r\n        positive_vocab = set(random.sample(vocab, 1000000))\r\n        with open(lookup_table_filename, 'w') as f:\r\n            f.write('\\n'.join(positive_vocab))\r\n            f.write('\\n')\r\n            f.write('\\n'.join(map(str, range(10**7))))\r\n            f.write('\\n')\r\n\r\n        vocab_feature = np.random.choice(list(vocab), size=1000, replace=True)\r\n        np.savez(file=data_filename, vocab_feature=vocab_feature)\r\n\r\n    # Run the first time\r\n    generate_data()\r\n\r\n    vocab_feature = np.load(data_filename)['vocab_feature']\r\n    lookup_table = index_table_from_file(\r\n        vocabulary_file=lookup_table_filename,\r\n        default_value=-1,\r\n        num_oov_buckets=0,\r\n        vocab_size=None,\r\n        name='vocab_table',\r\n        key_dtype=tf.string  \r\n    )\r\n    text = tf.placeholder(dtype=tf.string, shape=[None, ])\r\n    index = lookup_table.lookup(text)\r\n    sess = tf.Session()\r\n    sess = tf_debug.LocalCLIDebugWrapperSession(sess)\r\n    sess.run(tf.tables_initializer())\r\n    # sess.run(tf.global_variables_initializer())\r\n    np_index = sess.run(index, feed_dict={text: vocab_feature})\r\n    sess.close()\r\n    print(np_index)\r\n\r\n**Other info / logs**\r\n**Things I've tried**\r\nI have attempted to change the parallelism threads via ConfigProto to see if this reduces the memory usage but without improvement."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24930", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24930/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24930/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24930/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24930", "id": 399329130, "node_id": "MDU6SXNzdWUzOTkzMjkxMzA=", "number": 24930, "title": "Continuously differentiable eigendecomposition", "user": {"login": "Randl", "id": 3028543, "node_id": "MDQ6VXNlcjMwMjg1NDM=", "avatar_url": "https://avatars0.githubusercontent.com/u/3028543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Randl", "html_url": "https://github.com/Randl", "followers_url": "https://api.github.com/users/Randl/followers", "following_url": "https://api.github.com/users/Randl/following{/other_user}", "gists_url": "https://api.github.com/users/Randl/gists{/gist_id}", "starred_url": "https://api.github.com/users/Randl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Randl/subscriptions", "organizations_url": "https://api.github.com/users/Randl/orgs", "repos_url": "https://api.github.com/users/Randl/repos", "events_url": "https://api.github.com/users/Randl/events{/privacy}", "received_events_url": "https://api.github.com/users/Randl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-01-15T12:45:14Z", "updated_at": "2019-03-27T13:08:18Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- TensorFlow version (you are using): 1.12\r\n- Are you willing to contribute it (Yes/No): Yes, but I'd probably need some guidance.\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nCurrently, when any two eigenvalues are equal, the `tf.gradients( tf.self_adjoint_eig(matrix), matrix) ` function returns NaN. \r\nIt was proposed to return a subgradient (https://github.com/tensorflow/tensorflow/issues/12853) in this case, which equals `v_k^T*v_k` for kth eigenvalue. However, there [exists](https://www.win.tue.nl/analysis/reports/rana06-33.pdf) a procedure which allows to generate continuously differentiable eigendecomposition. This allows to have calculate true gradient (of a particluar decomposition) as soon as eigenbasis exists. Intuitively, if we choose a particular consistent way to choose eigenvectors from subspace, the eigendecomposition would be well defined.\r\n\r\nPossibly related issue (same about SVD): https://github.com/tensorflow/tensorflow/issues/13641\r\n**Will this change the current api? How?** The eigendecomposition will probably change in cases it is not unique.\r\n\r\n**Who will benefit with this feature?** People dealing with optimizations based on eigenvalues/eigenvectors."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24910", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24910/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24910/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24910/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24910", "id": 399118901, "node_id": "MDU6SXNzdWUzOTkxMTg5MDE=", "number": 24910, "title": "TFLiteConverter unable to convert object detection model from export_tflite_ssd_graph.py", "user": {"login": "dkashkin", "id": 2325160, "node_id": "MDQ6VXNlcjIzMjUxNjA=", "avatar_url": "https://avatars2.githubusercontent.com/u/2325160?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dkashkin", "html_url": "https://github.com/dkashkin", "followers_url": "https://api.github.com/users/dkashkin/followers", "following_url": "https://api.github.com/users/dkashkin/following{/other_user}", "gists_url": "https://api.github.com/users/dkashkin/gists{/gist_id}", "starred_url": "https://api.github.com/users/dkashkin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dkashkin/subscriptions", "organizations_url": "https://api.github.com/users/dkashkin/orgs", "repos_url": "https://api.github.com/users/dkashkin/repos", "events_url": "https://api.github.com/users/dkashkin/events{/privacy}", "received_events_url": "https://api.github.com/users/dkashkin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, {"login": "achowdhery", "id": 4723042, "node_id": "MDQ6VXNlcjQ3MjMwNDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4723042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/achowdhery", "html_url": "https://github.com/achowdhery", "followers_url": "https://api.github.com/users/achowdhery/followers", "following_url": "https://api.github.com/users/achowdhery/following{/other_user}", "gists_url": "https://api.github.com/users/achowdhery/gists{/gist_id}", "starred_url": "https://api.github.com/users/achowdhery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/achowdhery/subscriptions", "organizations_url": "https://api.github.com/users/achowdhery/orgs", "repos_url": "https://api.github.com/users/achowdhery/repos", "events_url": "https://api.github.com/users/achowdhery/events{/privacy}", "received_events_url": "https://api.github.com/users/achowdhery/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2019-01-14T23:18:17Z", "updated_at": "2019-12-04T21:35:58Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (or github SHA if from source): 1.13.0-dev20190114\r\n\r\n**Provide the text output from tflite_convert**\r\n\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime. If those are native TensorFlow operators, you might be able to use the extended runtime by passing --enable_select_tf_ops, or by setting target_ops=TFLITE_BUILTINS,SELECT_TF_OPS when calling tf.lite.TFLiteConverter(). Otherwise, if you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: ADD, CONCATENATION, CONV_2D, DEPTHWISE_CONV_2D, LOGISTIC, MUL, RESHAPE. Here is a list of operators for which you will need custom implementations: TFLite_Detection_PostProcess.\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/toco_from_protos\", line 11, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/lite/toco/python/toco_from_protos.py\", line 59, in main\r\n    app.run(main=execute, argv=[sys.argv[0]] + unparsed)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/platform/app.py\", line 125, in run\r\n    _sys.exit(main(argv))\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/lite/toco/python/toco_from_protos.py\", line 33, in execute\r\n    output_str = tensorflow_wrap_toco.TocoConvert(model_str, toco_str, input_str)\r\n\r\nAlso, please include a link to a GraphDef or the model if possible.\r\nssd_mobilenet_v1_fpn_shared_box_predictor_640x640_coco14_sync_2018_07_03\r\n\r\n**Any other info / logs**\r\nI trained the above mentioned model on my images, and then exported the graph with the --add_postprocessing_opt option (which I assume adds the TFLite_Detection_PostProcess op):\r\npython /tf/models/research/object_detection/export_tflite_ssd_graph.py \\\r\n    --pipeline_config_path /tf/notebooks/models/ssd_mobilenet_v1_fpn_shared_box_predictor_640x640_coco14_sync_2018_07_03/pipeline.config \\\r\n    --trained_checkpoint_prefix /tf/notebooks/model.ckpt \\\r\n    --output_directory /tf/notebooks/tflite \\\r\n    --add_postprocessing_op=true\r\n\r\nThen I used the following Python code in order to convert the model to TFLite format:\r\n\r\nimport tensorflow as tf\r\ngraph_def_file = \"/tf/notebooks/scripts/both_training/tflite/tflite_graph.pb\"\r\ninput_arrays = [\"normalized_input_image_tensor\"]\r\noutput_arrays = ['TFLite_Detection_PostProcess','TFLite_Detection_PostProcess:1','TFLite_Detection_PostProcess:2','TFLite_Detection_PostProcess:3']\r\ninput_shapes = {\"normalized_input_image_tensor\" : [1, 640, 640, 3]}\r\n\r\nconverter = tf.lite.TFLiteConverter.from_frozen_graph(graph_def_file, input_arrays, output_arrays, input_shapes)\r\nconverter.target_ops = [tf.lite.OpsSet.TFLITE_BUILTINS,tf.lite.OpsSet.SELECT_TF_OPS]\r\ntflite_model = converter.convert()\r\nopen(\"/tf/notebooks/tflite/model.tflite\", \"wb\").write(tflite_model)\r\n\r\nI tried this with and without target_ops=SELECT_TF_OPS and the convert() call always crashes due to TFLite_Detection_PostProcess operation. The TFLite file is not created. Please help!"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24881", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24881/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24881/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24881/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24881", "id": 398695982, "node_id": "MDU6SXNzdWUzOTg2OTU5ODI=", "number": 24881, "title": "Support per channel quantized ops", "user": {"login": "shoubhik", "id": 2293791, "node_id": "MDQ6VXNlcjIyOTM3OTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/2293791?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shoubhik", "html_url": "https://github.com/shoubhik", "followers_url": "https://api.github.com/users/shoubhik/followers", "following_url": "https://api.github.com/users/shoubhik/following{/other_user}", "gists_url": "https://api.github.com/users/shoubhik/gists{/gist_id}", "starred_url": "https://api.github.com/users/shoubhik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shoubhik/subscriptions", "organizations_url": "https://api.github.com/users/shoubhik/orgs", "repos_url": "https://api.github.com/users/shoubhik/repos", "events_url": "https://api.github.com/users/shoubhik/events{/privacy}", "received_events_url": "https://api.github.com/users/shoubhik/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-01-13T20:29:00Z", "updated_at": "2019-11-15T00:39:31Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using):1.12\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nThe current quantization Ops -  [tf.quantization](https://www.tensorflow.org/api_docs/python/tf/quantization), [tf.nn.quantized_conv2d](https://www.tensorflow.org/api_docs/python/tf/quantization) support only per layer quantization. For per channel quantization the `min` and `max` values should be of dimension `[d]`, one for each channel instead of being a single `float` value now.\r\n\r\n**Will this change the current api? How?**\r\nYes. The ops will take `[d]` dimensional `min` and `max` values, one per channel. And the `output_min` and `output_max` would also be  `[d]` dimensional .\r\n**Who will benefit with this feature?**\r\nAnyone who wants to use per channel quantization.\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24823", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24823/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24823/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24823/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24823", "id": 397709167, "node_id": "MDU6SXNzdWUzOTc3MDkxNjc=", "number": 24823, "title": "tf.contrib.integrate.odeint can only accept time points in increasing order", "user": {"login": "breadbread1984", "id": 1930282, "node_id": "MDQ6VXNlcjE5MzAyODI=", "avatar_url": "https://avatars0.githubusercontent.com/u/1930282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/breadbread1984", "html_url": "https://github.com/breadbread1984", "followers_url": "https://api.github.com/users/breadbread1984/followers", "following_url": "https://api.github.com/users/breadbread1984/following{/other_user}", "gists_url": "https://api.github.com/users/breadbread1984/gists{/gist_id}", "starred_url": "https://api.github.com/users/breadbread1984/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/breadbread1984/subscriptions", "organizations_url": "https://api.github.com/users/breadbread1984/orgs", "repos_url": "https://api.github.com/users/breadbread1984/repos", "events_url": "https://api.github.com/users/breadbread1984/events{/privacy}", "received_events_url": "https://api.github.com/users/breadbread1984/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "salehay", "id": 33988982, "node_id": "MDQ6VXNlcjMzOTg4OTgy", "avatar_url": "https://avatars0.githubusercontent.com/u/33988982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/salehay", "html_url": "https://github.com/salehay", "followers_url": "https://api.github.com/users/salehay/followers", "following_url": "https://api.github.com/users/salehay/following{/other_user}", "gists_url": "https://api.github.com/users/salehay/gists{/gist_id}", "starred_url": "https://api.github.com/users/salehay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/salehay/subscriptions", "organizations_url": "https://api.github.com/users/salehay/orgs", "repos_url": "https://api.github.com/users/salehay/repos", "events_url": "https://api.github.com/users/salehay/events{/privacy}", "received_events_url": "https://api.github.com/users/salehay/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "salehay", "id": 33988982, "node_id": "MDQ6VXNlcjMzOTg4OTgy", "avatar_url": "https://avatars0.githubusercontent.com/u/33988982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/salehay", "html_url": "https://github.com/salehay", "followers_url": "https://api.github.com/users/salehay/followers", "following_url": "https://api.github.com/users/salehay/following{/other_user}", "gists_url": "https://api.github.com/users/salehay/gists{/gist_id}", "starred_url": "https://api.github.com/users/salehay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/salehay/subscriptions", "organizations_url": "https://api.github.com/users/salehay/orgs", "repos_url": "https://api.github.com/users/salehay/repos", "events_url": "https://api.github.com/users/salehay/events{/privacy}", "received_events_url": "https://api.github.com/users/salehay/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-01-10T07:48:37Z", "updated_at": "2019-07-20T12:23:06Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.12\r\n- Are you willing to contribute it (Yes/No): No\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\ncurrently, tensorflow support odeint function. but it only supports input time points in ascending order. This restriction make solving back propagation of ODENet(https://arxiv.org/abs/1806.07366) impossible. ODENet requires giving initial condition at latter time point and integrate to get the function value of an earlier time point. besides, odeint function of scipy supports input time points given in any order.\r\n\r\n**Will this change the current api? How?**\r\n\r\nthis change would not change the current api. it just loose the restriction to the input time points.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nresearcher who is doing researches with ODENet will be happy to see it.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24817", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24817/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24817/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24817/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24817", "id": 397641522, "node_id": "MDU6SXNzdWUzOTc2NDE1MjI=", "number": 24817, "title": "TFDBG Segmentation Fault", "user": {"login": "dgboy2000", "id": 284897, "node_id": "MDQ6VXNlcjI4NDg5Nw==", "avatar_url": "https://avatars3.githubusercontent.com/u/284897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dgboy2000", "html_url": "https://github.com/dgboy2000", "followers_url": "https://api.github.com/users/dgboy2000/followers", "following_url": "https://api.github.com/users/dgboy2000/following{/other_user}", "gists_url": "https://api.github.com/users/dgboy2000/gists{/gist_id}", "starred_url": "https://api.github.com/users/dgboy2000/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dgboy2000/subscriptions", "organizations_url": "https://api.github.com/users/dgboy2000/orgs", "repos_url": "https://api.github.com/users/dgboy2000/repos", "events_url": "https://api.github.com/users/dgboy2000/events{/privacy}", "received_events_url": "https://api.github.com/users/dgboy2000/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097548274, "node_id": "MDU6TGFiZWwxMDk3NTQ4Mjc0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tfdbg", "name": "comp:tfdbg", "color": "0052cc", "default": false, "description": "tf debugger"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-01-10T02:04:07Z", "updated_at": "2019-04-04T17:11:35Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "TFDBG encounters a seg fault (see output at bottom) when debugging my TF code. Incidentally this code hangs on a GPU, but code and tfdbg both run without incident on CPU only (setting tf.device). As a side note, is tensorflow ever supposed to produce different execution results on CPU and GPU?\r\n\r\n- OS Platform and Distribution: AWS Deep Learning Base AMI (Ubuntu) Version 14.0 (ami-012b19f1736b6aae8)\r\n- TensorFlow installed from (source or binary): tensorflow-gpu==1.12.0 installed by pip\r\n- Python version: Python 3.6.7\r\n- CUDA/cuDNN version: 9.0/7.3.1\r\n- GPU model and memory: Tesla V100 with 16130MiB\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem. <== It's not clear why or where the seg fault occurs so I can't generate a minimal test case. I'd be happy to share my full code (a single python file) with you (the TF developers, eg via email) but don't want to post it on github at present.\r\n\r\n**Other info / logs**\r\n\r\n// Started tfdbg, called run() once to initialize the variables, then invoke_stepper and:\r\n\r\ntfdbg> step\r\n  -->(1 / 126)  [  H   ] model/transpose/sub/y\r\n     (2 / 126)  [      ] model/transpose/Range/start\r\n     (3 / 126)  [      ] model/TensorArrayStack/range/start\r\n\r\nContinued to model/transpose/sub/y:\r\n\r\nStepper used feeds:\r\n  (No feeds)\r\n\r\nTensor \"model/transpose/sub/y\":\r\n\r\n1\r\n\r\ntfdbg> s\r\n     (1 / 126)  [  H   ] model/transpose/sub/y\r\n  -->(2 / 126)  [  H   ] model/transpose/Range/start\r\n     (3 / 126)  [      ] model/TensorArrayStack/range/start\r\n     (4 / 126)  [      ] model/TensorArrayStack/range/delta\r\n\r\nContinued to model/transpose/Range/start:\r\n\r\nStepper used feeds:\r\n  (No feeds)\r\n\r\nTensor \"model/transpose/Range/start\":\r\n\r\n0\r\n\r\ntfdbg> s\r\n     (1 / 126)  [  H   ] model/transpose/sub/y\r\n     (2 / 126)  [  H   ] model/transpose/Range/start\r\n  -->(3 / 126)  [  H   ] model/TensorArrayStack/range/start\r\n     (4 / 126)  [      ] model/TensorArrayStack/range/delta\r\n     (5 / 126)  [      ] model/transpose/Range/delta\r\n\r\nContinued to model/TensorArrayStack/range/start:\r\n\r\nStepper used feeds:\r\n  (No feeds)\r\n\r\nTensor \"model/TensorArrayStack/range/start\":\r\n\r\n0\r\n\r\ntfdbg> s\r\n     (2 / 126)  [  H   ] model/transpose/Range/start\r\n     (3 / 126)  [  H   ] model/TensorArrayStack/range/start\r\n  -->(4 / 126)  [  H   ] model/TensorArrayStack/range/delta\r\n     (5 / 126)  [      ] model/transpose/Range/delta\r\n     (6 / 126)  [      ] model/TensorArray/size\r\n\r\nContinued to model/TensorArrayStack/range/delta:\r\n\r\nStepper used feeds:\r\n  (No feeds)\r\n\r\nTensor \"model/TensorArrayStack/range/delta\":\r\n\r\n1\r\n\r\ntfdbg> s\r\n     (3 / 126)  [  H   ] model/TensorArrayStack/range/start\r\n     (4 / 126)  [  H   ] model/TensorArrayStack/range/delta\r\n  -->(5 / 126)  [  H   ] model/transpose/Range/delta\r\n     (6 / 126)  [      ] model/TensorArray/size\r\n     (7 / 126)  [      ] model/TensorArray\r\n\r\nContinued to model/transpose/Range/delta:\r\n\r\nStepper used feeds:\r\n  (No feeds)\r\n\r\nTensor \"model/transpose/Range/delta\":\r\n\r\n1\r\n\r\ntfdbg> s\r\n     (4 / 126)  [  H   ] model/TensorArrayStack/range/delta\r\n     (5 / 126)  [  H   ] model/transpose/Range/delta\r\n  -->(6 / 126)  [  H   ] model/TensorArray/size\r\n     (7 / 126)  [      ] model/TensorArray\r\n     (8 / 126)  [      ] model/value/weights\r\n\r\nContinued to model/TensorArray/size:\r\n\r\nStepper used feeds:\r\n  (No feeds)\r\n\r\nTensor \"model/TensorArray/size\":\r\n\r\n1\r\n\r\ntfdbg> s\r\nSegmentation fault (core dumped)\r\nubuntu@ip-10-0-0-9:~$\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24816", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24816/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24816/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24816/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24816", "id": 397640710, "node_id": "MDU6SXNzdWUzOTc2NDA3MTA=", "number": 24816, "title": "Wrong Error Raised: \"The graph couldn't be sorted in topological order\"", "user": {"login": "haoransh", "id": 12680986, "node_id": "MDQ6VXNlcjEyNjgwOTg2", "avatar_url": "https://avatars3.githubusercontent.com/u/12680986?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haoransh", "html_url": "https://github.com/haoransh", "followers_url": "https://api.github.com/users/haoransh/followers", "following_url": "https://api.github.com/users/haoransh/following{/other_user}", "gists_url": "https://api.github.com/users/haoransh/gists{/gist_id}", "starred_url": "https://api.github.com/users/haoransh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haoransh/subscriptions", "organizations_url": "https://api.github.com/users/haoransh/orgs", "repos_url": "https://api.github.com/users/haoransh/repos", "events_url": "https://api.github.com/users/haoransh/events{/privacy}", "received_events_url": "https://api.github.com/users/haoransh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 27, "created_at": "2019-01-10T01:59:37Z", "updated_at": "2020-02-24T08:15:52Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): pip from anaconda\r\n- TensorFlow version (use command below): 1.12.0\r\n- Python version: 3.5.0\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: CUDA 9.0\r\n- GPU model and memory: GeForce GTX 1080Ti / Tesla K80\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\n\r\nThe tensorflow will raise `The graph couldn't be sorted in topological order` Error when executing the optimizer. While The error doesn't occur on tensorflow 1.10.0. This error is also posed [here](https://stackoverflow.com/questions/54088172/why-tensorflow-throws-the-graph-couldnt-be-sorted-in-topological-order/54120941#54120941) by another user.\r\n\r\n**Describe the expected behavior**\r\n\r\nThe error should not be raised because there is no loop in the computation graph.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\nReference: https://stackoverflow.com/questions/54088172/why-tensorflow-throws-the-graph-couldnt-be-sorted-in-topological-order/54120941#54120941\r\n```\r\nimport tensorflow as tf\r\nprint(tf.__version__)\r\nactivation = tf.nn.relu\r\nimg_plh = tf.placeholder(tf.float32, [None, 3, 3, 3])\r\nlabel_plh = tf.placeholder(tf.float32, [None])\r\nlayer = img_plh\r\nbuffer = []\r\nks_list = list(range(1, 10, 1)) + list(range(9, 0, -1))\r\nfor ks in ks_list:\r\n    buffer.append(tf.layers.conv2d(layer, 9, ks, 1, \"same\", activation=activation))\r\nlayer = tf.concat(buffer, 3)\r\nlayer = tf.layers.conv2d(layer, 1, 3, 1, \"valid\", activation=activation)\r\nlayer = tf.squeeze(layer, [1, 2, 3])\r\nloss_op = tf.reduce_mean(tf.abs(label_plh - layer))\r\noptimizer = tf.train.AdamOptimizer()\r\ntrain_op = optimizer.minimize(loss_op)\r\nwith tf.Session() as sess:\r\n    sess.run(tf.global_variables_initializer())\r\n    result = sess.run(train_op, {img_plh: np.zeros([2, 3, 3, 3], np.float32), label_plh: np.zeros([2], np.float32)})\r\n```\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24795", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24795/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24795/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24795/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24795", "id": 397264835, "node_id": "MDU6SXNzdWUzOTcyNjQ4MzU=", "number": 24795, "title": "Recurrent batch normalization : While_loop and control_depenecies bug", "user": {"login": "AzizCode92", "id": 19540527, "node_id": "MDQ6VXNlcjE5NTQwNTI3", "avatar_url": "https://avatars2.githubusercontent.com/u/19540527?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AzizCode92", "html_url": "https://github.com/AzizCode92", "followers_url": "https://api.github.com/users/AzizCode92/followers", "following_url": "https://api.github.com/users/AzizCode92/following{/other_user}", "gists_url": "https://api.github.com/users/AzizCode92/gists{/gist_id}", "starred_url": "https://api.github.com/users/AzizCode92/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AzizCode92/subscriptions", "organizations_url": "https://api.github.com/users/AzizCode92/orgs", "repos_url": "https://api.github.com/users/AzizCode92/repos", "events_url": "https://api.github.com/users/AzizCode92/events{/privacy}", "received_events_url": "https://api.github.com/users/AzizCode92/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-01-09T08:42:36Z", "updated_at": "2019-01-16T01:52:14Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): 1.8.0\r\n- Python version: 2.7\r\n- Bazel version (if compiling from source): compiled from source \r\n- GCC/Compiler version (if compiling from source): c++ (Ubuntu 5.4.0-6ubuntu1~16.04.10) 5.4.0 20160609\r\n- CUDA/cuDNN version: 9.1\r\n- GPU model and memory:  Tesla K80 \r\n\r\n\r\n**Describe the current behavior**\r\nAdding batch normalization to a bidirectional RNN prevent me from updating the moving_mean and moving_variances during training and inference correctly.\r\nThe problem is that both the ```tf.control_dependencies``` and the ``while_loop```  of the dynamic_rnn are executed at the same time. The gradient will find nodes that have input from different frames and will throw errors. \r\n\r\nMy error message is  : \r\n```\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: node train/update (defined at ...)  has inputs from different frames. \r\nThe input node bidirectional_rnn/fw/fw/while/fw/bnlstm_cell/bnlstm_cell/state/batch_normalization/AssignMovingAvg (defined at ... )  is in frame 'train/Listener/features/layer1/BLSTM/bidirectional_rnn/fw/fw/while/while_context'. The input node train/apply_gradients/Assign (defined at ... )  is in frame ''.\r\n```\r\n\r\n**Describe the expected behavior**\r\nThe expected behaviour is being able to add the control_dependencies when we have the while_loop context. \r\nAdding clearer documentation about how to handle the moving_mean and moving_variance in case you have a distributed training.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n```python\r\ndef _update(self, loss, learning_rate, cluster):\r\n    '''\r\n    create the op to update the model\r\n\r\n    args:\r\n        loss: the loss to minimize\r\n        learning_rate: the learning rate\r\n        cluster: the tf cluster\r\n\r\n    returns: the update op\r\n    '''\r\n\r\n    #create the optimizer\r\n    optimizer = tf.train.AdamOptimizer(learning_rate)\r\n\r\n    #create an optimizer that aggregates gradients\r\n    if int(self.conf['numbatches_to_aggregate']) > 0:\r\n        if 'local' in cluster.as_dict():\r\n            num_workers = 1\r\n        else:\r\n            num_workers = len(cluster.as_dict()['worker'])\r\n\r\n        optimizer = tf.train.SyncReplicasOptimizer(\r\n            opt=optimizer,\r\n            replicas_to_aggregate=int(\r\n                self.conf['numbatches_to_aggregate']),\r\n            total_num_replicas=num_workers)\r\n\r\n\r\n    tf.summary.scalar('training_loss', loss,\r\n                      collections=['training_summaries'])\r\n\r\n    #get the list of trainable variables\r\n    trainable = tf.trainable_variables()\r\n\r\n    #get the list of variables to be removed from the trainable\r\n    #variables\r\n    untrainable = tf.get_collection('untrainable')\r\n\r\n    #remove the variables\r\n    trainable = [var for var in trainable\r\n                 if var not in untrainable]\r\n\r\n    #compute the gradients\r\n    grads_and_vars = optimizer.compute_gradients(\r\n        loss=loss,\r\n        var_list=trainable)\r\n\r\n    with tf.variable_scope('clip'):\r\n        #clip the gradients\r\n        grads_and_vars = [(tf.clip_by_value(grad, -1., 1.), var)\r\n                          for grad, var in grads_and_vars]\r\n\r\n\r\n    #opperation to apply the gradients\r\n    apply_gradients_op = optimizer.apply_gradients(\r\n        grads_and_vars=grads_and_vars,\r\n        name='apply_gradients')\r\n\r\n    #all remaining operations with the UPDATE_OPS GraphKeys\r\n    update_ops = tf.get_collection(tf.GraphKeys.UPDATE_OPS)\r\n    print(\"update_ops {}\".format(update_ops))\r\n    print(\"################\")\r\n    #create an operation to update the gradients, the batch_loss\r\n    #and do all other update ops\r\n    update_op = tf.group(\r\n        *([apply_gradients_op] + update_ops),\r\n        name='update')\r\n\r\n    return update_op\r\n\r\n```\r\n**Other info / logs**\r\n\r\nrelated issues : \r\n1) https://github.com/tflearn/tflearn/issues/540#issue-197855026\r\n2) https://github.com/tensorflow/tensorflow/issues/6087#issue-193534788\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24789", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24789/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24789/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24789/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24789", "id": 397207623, "node_id": "MDU6SXNzdWUzOTcyMDc2MjM=", "number": 24789, "title": "TensorRT's create_inference_graph() produced output with too big size", "user": {"login": "sonnguyen64", "id": 26298201, "node_id": "MDQ6VXNlcjI2Mjk4MjAx", "avatar_url": "https://avatars2.githubusercontent.com/u/26298201?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sonnguyen64", "html_url": "https://github.com/sonnguyen64", "followers_url": "https://api.github.com/users/sonnguyen64/followers", "following_url": "https://api.github.com/users/sonnguyen64/following{/other_user}", "gists_url": "https://api.github.com/users/sonnguyen64/gists{/gist_id}", "starred_url": "https://api.github.com/users/sonnguyen64/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sonnguyen64/subscriptions", "organizations_url": "https://api.github.com/users/sonnguyen64/orgs", "repos_url": "https://api.github.com/users/sonnguyen64/repos", "events_url": "https://api.github.com/users/sonnguyen64/events{/privacy}", "received_events_url": "https://api.github.com/users/sonnguyen64/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1754777628, "node_id": "MDU6TGFiZWwxNzU0Nzc3NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu:tensorrt", "name": "comp:gpu:tensorrt", "color": "ea98ba", "default": false, "description": "Issues specific to TensorRT"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "samikama", "id": 10539540, "node_id": "MDQ6VXNlcjEwNTM5NTQw", "avatar_url": "https://avatars0.githubusercontent.com/u/10539540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samikama", "html_url": "https://github.com/samikama", "followers_url": "https://api.github.com/users/samikama/followers", "following_url": "https://api.github.com/users/samikama/following{/other_user}", "gists_url": "https://api.github.com/users/samikama/gists{/gist_id}", "starred_url": "https://api.github.com/users/samikama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samikama/subscriptions", "organizations_url": "https://api.github.com/users/samikama/orgs", "repos_url": "https://api.github.com/users/samikama/repos", "events_url": "https://api.github.com/users/samikama/events{/privacy}", "received_events_url": "https://api.github.com/users/samikama/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "samikama", "id": 10539540, "node_id": "MDQ6VXNlcjEwNTM5NTQw", "avatar_url": "https://avatars0.githubusercontent.com/u/10539540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samikama", "html_url": "https://github.com/samikama", "followers_url": "https://api.github.com/users/samikama/followers", "following_url": "https://api.github.com/users/samikama/following{/other_user}", "gists_url": "https://api.github.com/users/samikama/gists{/gist_id}", "starred_url": "https://api.github.com/users/samikama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samikama/subscriptions", "organizations_url": "https://api.github.com/users/samikama/orgs", "repos_url": "https://api.github.com/users/samikama/repos", "events_url": "https://api.github.com/users/samikama/events{/privacy}", "received_events_url": "https://api.github.com/users/samikama/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-01-09T04:29:42Z", "updated_at": "2019-12-26T18:34:15Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- TensorFlow version (use command below): 1.12.0\r\n- Python version: 3.6.7\r\n- CUDA/cuDNN version: 9.0\r\n- GPU model and memory: Titan V\r\n\r\n**Describe the current behavior**\r\n\r\nI have tried to optimize my custom frozen model to run on TensorRT using `create_inference_graph()`, however, the output was larger than the original model (my model is around 200MB, but after converting it's more than 2GB). When I increased `minimum_segment_size` to 30 or 40, the size was samller but still slightly bigger than the original one.\r\n\r\n**Describe the expected behavior**\r\nSmaller size of output graph\r\n\r\n**Code to reproduce the issue**\r\n\r\n```\r\ntrt_graph = trt.create_inference_graph(\r\n        input_graph_def=frozen_graph,\r\n        outputs,\r\n        max_batch_size=64,\r\n        max_workspace_size_bytes=1 << 25,\r\n        precision_mode='FP16',\r\n        minimum_segment_size=10\r\n)\r\n```\r\n\r\n**Other info / logs**\r\nBecause the model was way too big, I couldn't serialize it to .pb file, so that I had this error:\r\n`[libprotobuf ERROR external/protobuf_archive/src/google/protobuf/message_lite.cc:289] Exceeded maximum protobuf size of 2GB: 2756916500`\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24774", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24774/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24774/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24774/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24774", "id": 397003229, "node_id": "MDU6SXNzdWUzOTcwMDMyMjk=", "number": 24774, "title": "why is tensorflow.map_fn slow, what is wrong with following code?", "user": {"login": "minhhg", "id": 11815787, "node_id": "MDQ6VXNlcjExODE1Nzg3", "avatar_url": "https://avatars3.githubusercontent.com/u/11815787?v=4", "gravatar_id": "", "url": "https://api.github.com/users/minhhg", "html_url": "https://github.com/minhhg", "followers_url": "https://api.github.com/users/minhhg/followers", "following_url": "https://api.github.com/users/minhhg/following{/other_user}", "gists_url": "https://api.github.com/users/minhhg/gists{/gist_id}", "starred_url": "https://api.github.com/users/minhhg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/minhhg/subscriptions", "organizations_url": "https://api.github.com/users/minhhg/orgs", "repos_url": "https://api.github.com/users/minhhg/repos", "events_url": "https://api.github.com/users/minhhg/events{/privacy}", "received_events_url": "https://api.github.com/users/minhhg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 1772672745, "node_id": "MDU6TGFiZWwxNzcyNjcyNzQ1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug/performance", "name": "type:bug/performance", "color": "ededed", "default": false, "description": null}], "state": "open", "locked": false, "assignee": {"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, {"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}, {"login": "ezhulenev", "id": 1174378, "node_id": "MDQ6VXNlcjExNzQzNzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1174378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezhulenev", "html_url": "https://github.com/ezhulenev", "followers_url": "https://api.github.com/users/ezhulenev/followers", "following_url": "https://api.github.com/users/ezhulenev/following{/other_user}", "gists_url": "https://api.github.com/users/ezhulenev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezhulenev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezhulenev/subscriptions", "organizations_url": "https://api.github.com/users/ezhulenev/orgs", "repos_url": "https://api.github.com/users/ezhulenev/repos", "events_url": "https://api.github.com/users/ezhulenev/events{/privacy}", "received_events_url": "https://api.github.com/users/ezhulenev/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 26, "created_at": "2019-01-08T17:13:05Z", "updated_at": "2020-03-08T10:57:44Z", "closed_at": null, "author_association": "NONE", "body": "I am trying to use tensorflow map_fn to do parallel computation. However it seems to me that the performance gain is not significant.\r\n\r\nHere are example code running Python 3.6.5, Tensorflow version 1.12.0 on Ubuntu 14.04 LTS, 28 duo cores (Intel(R) Xeon(R) CPU E5-2697 v3 @ 2.60GHz) = 56 processors\r\n\r\nThese same codes running on Amazon AWS SagerMaker ml-p3-xlarge even took longer time, 227 seconds.\r\n\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\nb'v1.12.0-0-ga6d8ffa' 1.12.0\r\n\r\n\r\nimport tensorflow as tf\r\nimport time\r\n# version 1\r\ntic = time.time()\r\nelems = np.array(range(1,1000000), dtype=np.float64)\r\noutput = tf.map_fn(lambda x: x**6 , elems, dtype=tf.float64,  parallel_iterations=56)\r\nsess = tf.Session()\r\n\r\nres = sess.run(output)\r\ntoc = time.time() - tic\r\nprint(\"elapsed=\", toc)  # 29.47 (seconds)\r\n\r\n# version 2\r\ntic = time.time()\r\nelems = np.array(range(1,1000000), dtype=np.float64)\r\noutput = tf.map_fn(lambda x: x**6 , elems, dtype=tf.float64,   parallel_iterations=56)\r\nn_cpus=28\r\n\r\n\r\nwith  tf.Session(\r\nconfig=tf.ConfigProto(log_device_placement=True, \r\ndevice_count={ \"CPU\": n_cpus },\r\ninter_op_parallelism_threads=n_cpus,\r\nintra_op_parallelism_threads=1,\r\n\r\n)) as sess:\r\nres = sess.run(output)\r\n\r\ntoc = time.time() - tic\r\nprint(\"elapsed=\", toc)  # 29.26 (seconds)\r\n\r\n# version 3\r\ntic = time.time()\r\nelems = np.array(range(1,1000000), dtype=np.float64)\r\nx6 = [ x**6 for x in elems]\r\ntoc = time.time() - tic\r\nprint(\"elapsed time=\", toc) # 0.5 seconds\r\n\r\nWhat is problem with the above codes? without map_fn, sequential execution version 3 only 0.5 (seconds). \r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24770", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24770/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24770/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24770/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24770", "id": 396939055, "node_id": "MDU6SXNzdWUzOTY5MzkwNTU=", "number": 24770, "title": "TOCO can't convert SpaceToBatchND when current tensor is not a multiply of value", "user": {"login": "yuvdar", "id": 19763489, "node_id": "MDQ6VXNlcjE5NzYzNDg5", "avatar_url": "https://avatars1.githubusercontent.com/u/19763489?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuvdar", "html_url": "https://github.com/yuvdar", "followers_url": "https://api.github.com/users/yuvdar/followers", "following_url": "https://api.github.com/users/yuvdar/following{/other_user}", "gists_url": "https://api.github.com/users/yuvdar/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuvdar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuvdar/subscriptions", "organizations_url": "https://api.github.com/users/yuvdar/orgs", "repos_url": "https://api.github.com/users/yuvdar/repos", "events_url": "https://api.github.com/users/yuvdar/events{/privacy}", "received_events_url": "https://api.github.com/users/yuvdar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-01-08T14:47:58Z", "updated_at": "2019-02-12T14:20:39Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): mac\r\n- TensorFlow installed from (source or binary): pip\r\n- TensorFlow version (or github SHA if from source): 1.12\r\n\r\nI have this command working:\r\n'''\r\ntoco --graph_def_file=/Users/yuval/dev/research-serialization/person_production.pb --output_file=person_production.tflite --input_array=input_1 --output_array=results/truediv  --inference_type=FLOAT --input_shape=**1,512,512,3**\r\n'''\r\nwhile this doesn't\r\n'''\r\ntoco --graph_def_file=/Users/yuval/dev/research-serialization/person_production.pb --output_file=person_production.tflite --input_array=input_1 --output_array=results/truediv  --inference_type=FLOAT --input_shape=**1,800,800,3**\r\n'''\r\nI have some downsampling in my graph, and have dilated convolution with dilation 16 on tesor with sepcial dimensions of size 1/8 of the original. (i.e. 100 in the case that doesn't work) could this be fixed? "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24763", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24763/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24763/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24763/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24763", "id": 396866813, "node_id": "MDU6SXNzdWUzOTY4NjY4MTM=", "number": 24763, "title": "tf.estimator support multi saver and train_op for training multi model at the same time", "user": {"login": "zh794390558", "id": 3038472, "node_id": "MDQ6VXNlcjMwMzg0NzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/3038472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zh794390558", "html_url": "https://github.com/zh794390558", "followers_url": "https://api.github.com/users/zh794390558/followers", "following_url": "https://api.github.com/users/zh794390558/following{/other_user}", "gists_url": "https://api.github.com/users/zh794390558/gists{/gist_id}", "starred_url": "https://api.github.com/users/zh794390558/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zh794390558/subscriptions", "organizations_url": "https://api.github.com/users/zh794390558/orgs", "repos_url": "https://api.github.com/users/zh794390558/repos", "events_url": "https://api.github.com/users/zh794390558/events{/privacy}", "received_events_url": "https://api.github.com/users/zh794390558/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "salehay", "id": 33988982, "node_id": "MDQ6VXNlcjMzOTg4OTgy", "avatar_url": "https://avatars0.githubusercontent.com/u/33988982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/salehay", "html_url": "https://github.com/salehay", "followers_url": "https://api.github.com/users/salehay/followers", "following_url": "https://api.github.com/users/salehay/following{/other_user}", "gists_url": "https://api.github.com/users/salehay/gists{/gist_id}", "starred_url": "https://api.github.com/users/salehay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/salehay/subscriptions", "organizations_url": "https://api.github.com/users/salehay/orgs", "repos_url": "https://api.github.com/users/salehay/repos", "events_url": "https://api.github.com/users/salehay/events{/privacy}", "received_events_url": "https://api.github.com/users/salehay/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "salehay", "id": 33988982, "node_id": "MDQ6VXNlcjMzOTg4OTgy", "avatar_url": "https://avatars0.githubusercontent.com/u/33988982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/salehay", "html_url": "https://github.com/salehay", "followers_url": "https://api.github.com/users/salehay/followers", "following_url": "https://api.github.com/users/salehay/following{/other_user}", "gists_url": "https://api.github.com/users/salehay/gists{/gist_id}", "starred_url": "https://api.github.com/users/salehay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/salehay/subscriptions", "organizations_url": "https://api.github.com/users/salehay/orgs", "repos_url": "https://api.github.com/users/salehay/repos", "events_url": "https://api.github.com/users/salehay/events{/privacy}", "received_events_url": "https://api.github.com/users/salehay/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-01-08T11:33:41Z", "updated_at": "2019-01-11T18:34:57Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": ""}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24738", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24738/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24738/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24738/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24738", "id": 396436153, "node_id": "MDU6SXNzdWUzOTY0MzYxNTM=", "number": 24738, "title": "float16 matmul is way slower than float32 matmul on CPU", "user": {"login": "dchatterjee172", "id": 10482742, "node_id": "MDQ6VXNlcjEwNDgyNzQy", "avatar_url": "https://avatars0.githubusercontent.com/u/10482742?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dchatterjee172", "html_url": "https://github.com/dchatterjee172", "followers_url": "https://api.github.com/users/dchatterjee172/followers", "following_url": "https://api.github.com/users/dchatterjee172/following{/other_user}", "gists_url": "https://api.github.com/users/dchatterjee172/gists{/gist_id}", "starred_url": "https://api.github.com/users/dchatterjee172/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dchatterjee172/subscriptions", "organizations_url": "https://api.github.com/users/dchatterjee172/orgs", "repos_url": "https://api.github.com/users/dchatterjee172/repos", "events_url": "https://api.github.com/users/dchatterjee172/events{/privacy}", "received_events_url": "https://api.github.com/users/dchatterjee172/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 1093464312, "node_id": "MDU6TGFiZWwxMDkzNDY0MzEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:others", "name": "type:others", "color": "159b2e", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-01-07T10:44:04Z", "updated_at": "2019-01-09T09:16:02Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): YES\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\r\n- TensorFlow installed from (source or binary): Binary\r\n- TensorFlow version (use command below): 1.12.0\r\n- Python version: 3.5.2\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\nfloat16 matmul is way slower than float32 matmul on CPU\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\nimport time\r\nfrom datetime import timedelta\r\n\r\n\r\na = tf.random.normal(shape=[1, 768, 768], dtype=tf.float16)\r\nb = tf.random.normal(shape=[1, 768, 768], dtype=tf.float16)\r\n\r\nc = tf.random.normal(shape=[1, 768, 768], dtype=tf.float32)\r\nd = tf.random.normal(shape=[1, 768, 768], dtype=tf.float32)\r\n\r\ne = tf.matmul(a, b)\r\nf = tf.matmul(c, d)\r\n\r\nconfig = tf.ConfigProto(\r\n    intra_op_parallelism_threads=24,\r\n    inter_op_parallelism_threads=24,\r\n    allow_soft_placement=True,\r\n    device_count={\"GPU\": 0},\r\n)\r\n\r\nwith tf.Session(config=config) as sess:\r\n    for i in range(100):\r\n        if i % 2:\r\n            print(\"16bit -- \", end=\"\")\r\n            op = e\r\n        else:\r\n            print(\"32bit -- \", end=\"\")\r\n            op = f\r\n        start = time.monotonic()\r\n        sess.run(op)\r\n        end = time.monotonic()\r\n        print(i, timedelta(seconds=end - start))\r\n```       \r\noutput         \r\n```\r\n2019-01-07 16:06:19.698878: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow bi\r\nnary was not compiled to use: AVX512F\r\n32bit -- 0 0:00:00.017297\r\n16bit -- 1 0:00:00.275746\r\n32bit -- 2 0:00:00.002908\r\n16bit -- 3 0:00:00.261320\r\n32bit -- 4 0:00:00.003028\r\n16bit -- 5 0:00:00.253561\r\n32bit -- 6 0:00:00.002849\r\n16bit -- 7 0:00:00.256515\r\n32bit -- 8 0:00:00.006011\r\n16bit -- 9 0:00:00.255613\r\n32bit -- 10 0:00:00.003996\r\n16bit -- 11 0:00:00.242231\r\n32bit -- 12 0:00:00.003338\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24732", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24732/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24732/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24732/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24732", "id": 396343269, "node_id": "MDU6SXNzdWUzOTYzNDMyNjk=", "number": 24732, "title": "ARM6/RPI: Executor failed to create kernel _FusedConv2D", "user": {"login": "sdeoras", "id": 16372009, "node_id": "MDQ6VXNlcjE2MzcyMDA5", "avatar_url": "https://avatars2.githubusercontent.com/u/16372009?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sdeoras", "html_url": "https://github.com/sdeoras", "followers_url": "https://api.github.com/users/sdeoras/followers", "following_url": "https://api.github.com/users/sdeoras/following{/other_user}", "gists_url": "https://api.github.com/users/sdeoras/gists{/gist_id}", "starred_url": "https://api.github.com/users/sdeoras/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sdeoras/subscriptions", "organizations_url": "https://api.github.com/users/sdeoras/orgs", "repos_url": "https://api.github.com/users/sdeoras/repos", "events_url": "https://api.github.com/users/sdeoras/events{/privacy}", "received_events_url": "https://api.github.com/users/sdeoras/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2019-01-07T04:24:30Z", "updated_at": "2020-02-19T13:47:23Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nyes\r\n\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nARM 6 (Raspberry PI Zero W)\r\n\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\nNo\r\n\r\n- TensorFlow installed from (source or binary):\r\nSource at 92b598a32d5f8c636b9eb1cdc7afcb958395500f\r\n\r\n- TensorFlow version (use command below):\r\nn/a\r\n\r\n- Python version:\r\nn/a\r\n\r\n- Bazel version (if compiling from source):\r\nn/a\r\n\r\n- GCC/Compiler version (if compiling from source):\r\nn/a\r\n\r\n- CUDA/cuDNN version:\r\nn/a\r\n\r\n- GPU model and memory:\r\nn/a\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\nn/a\r\n\r\n**Describe the current behavior**\r\nMy use case is running TensorFlow as a C-library using Go interface. I am performing an image inferencing task using a model (`.pb file`). I see that my `libtensorflow.so` build works fine on ARM7 but fails on ARM6 with the following error:\r\n```\r\n2019-01-07 04:07:27.533445: E tensorflow/core/common_runtime/executor.cc:634] Executor failed to create kernel. Not found: No registered '_FusedConv2D' OpKernel for CPU devices compatible with node {{node module_apply_default/InceptionV3/InceptionV3/Conv2d_1a_3x3/Relu}}\r\n\t.  Registered:  <no registered kernels>\r\n\r\n\t [[module_apply_default/InceptionV3/InceptionV3/Conv2d_1a_3x3/Relu]]\r\n2019/01/07 04:07:27 session run:No registered '_FusedConv2D' OpKernel for CPU devices compatible with node {{node module_apply_default/InceptionV3/InceptionV3/Conv2d_1a_3x3/Relu}}\r\n\t.  Registered:  <no registered kernels>\r\n\r\n\t [[module_apply_default/InceptionV3/InceptionV3/Conv2d_1a_3x3/Relu]]\r\n```\r\n\r\n**Describe the expected behavior**\r\nexpecting ARM6 build of `libtensorflow.so` and `libtensorflow_framework.so` to work the same as ARM7 build.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24727", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24727/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24727/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24727/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24727", "id": 396244881, "node_id": "MDU6SXNzdWUzOTYyNDQ4ODE=", "number": 24727, "title": "Run tflite model on self-developed embedded system", "user": {"login": "xiaogangLi", "id": 18588799, "node_id": "MDQ6VXNlcjE4NTg4Nzk5", "avatar_url": "https://avatars0.githubusercontent.com/u/18588799?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xiaogangLi", "html_url": "https://github.com/xiaogangLi", "followers_url": "https://api.github.com/users/xiaogangLi/followers", "following_url": "https://api.github.com/users/xiaogangLi/following{/other_user}", "gists_url": "https://api.github.com/users/xiaogangLi/gists{/gist_id}", "starred_url": "https://api.github.com/users/xiaogangLi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xiaogangLi/subscriptions", "organizations_url": "https://api.github.com/users/xiaogangLi/orgs", "repos_url": "https://api.github.com/users/xiaogangLi/repos", "events_url": "https://api.github.com/users/xiaogangLi/events{/privacy}", "received_events_url": "https://api.github.com/users/xiaogangLi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-01-06T10:07:35Z", "updated_at": "2019-01-07T21:55:00Z", "closed_at": null, "author_association": "NONE", "body": "Hi experts,\r\nI have self-developed an embedded system. I want to run tflite model on this system for detection or classification. But I can't how to do it. Could you please give me advises and instruction of solving this problem? \r\n\r\nThanks."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24720", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24720/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24720/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24720/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24720", "id": 396211388, "node_id": "MDU6SXNzdWUzOTYyMTEzODg=", "number": 24720, "title": "ExtractImagePatches request", "user": {"login": "TheSadRhino", "id": 41446502, "node_id": "MDQ6VXNlcjQxNDQ2NTAy", "avatar_url": "https://avatars1.githubusercontent.com/u/41446502?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TheSadRhino", "html_url": "https://github.com/TheSadRhino", "followers_url": "https://api.github.com/users/TheSadRhino/followers", "following_url": "https://api.github.com/users/TheSadRhino/following{/other_user}", "gists_url": "https://api.github.com/users/TheSadRhino/gists{/gist_id}", "starred_url": "https://api.github.com/users/TheSadRhino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TheSadRhino/subscriptions", "organizations_url": "https://api.github.com/users/TheSadRhino/orgs", "repos_url": "https://api.github.com/users/TheSadRhino/repos", "events_url": "https://api.github.com/users/TheSadRhino/events{/privacy}", "received_events_url": "https://api.github.com/users/TheSadRhino/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-01-05T23:39:17Z", "updated_at": "2019-01-07T06:06:12Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10 \r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (or github SHA if from source): 1.12\r\n\r\n\r\n**Provide the text output from tflite_convert**\r\n\r\n```\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime and are not recognized by TensorFlow. If you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: CONCATENATION, CONV_2D, MAXIMUM, MAX_POOL_2D, MUL, PAD. Here is a list of operators for which you will need custom implementations: ExtractImagePatches.\r\n\r\n```\r\n\r\nAlso, please include a link to a GraphDef or the model if possible.\r\n\r\n**Any other info / logs**\r\n\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24717", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24717/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24717/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24717/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24717", "id": 396189318, "node_id": "MDU6SXNzdWUzOTYxODkzMTg=", "number": 24717, "title": "Deadlock probably with RandomShuffleQueue and FIFOQueue", "user": {"login": "hanayashiki", "id": 26056783, "node_id": "MDQ6VXNlcjI2MDU2Nzgz", "avatar_url": "https://avatars3.githubusercontent.com/u/26056783?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hanayashiki", "html_url": "https://github.com/hanayashiki", "followers_url": "https://api.github.com/users/hanayashiki/followers", "following_url": "https://api.github.com/users/hanayashiki/following{/other_user}", "gists_url": "https://api.github.com/users/hanayashiki/gists{/gist_id}", "starred_url": "https://api.github.com/users/hanayashiki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hanayashiki/subscriptions", "organizations_url": "https://api.github.com/users/hanayashiki/orgs", "repos_url": "https://api.github.com/users/hanayashiki/repos", "events_url": "https://api.github.com/users/hanayashiki/events{/privacy}", "received_events_url": "https://api.github.com/users/hanayashiki/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-01-05T18:37:09Z", "updated_at": "2019-01-16T01:53:40Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04.5 LTS (GNU/Linux 4.17.0-041700-generic x86_64)\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): tensorflow-gpu (1.12.0)\r\n- Python version: Python 3.5.2\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 10.0\r\n- GPU model and memory: 1080Ti 12G\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\n\r\nI used seq2seq to train an RNN model, and during training the process randomly hangs. It seems to be associated with RandomShuffleQueue or FIFOQueue because they seem to create threads.\r\n\r\n```\r\n    for dataset in datasets:\r\n      _, line = parallel_reader.parallel_read( # This creates tf.FIFOQueue\r\n        dataset.data_sources,\r\n        reader_class=dataset.reader,\r\n        num_epochs=num_epochs, # This should be None\r\n        num_readers=1,\r\n        shuffle=False,\r\n        capacity=common_queue_capacity,\r\n        min_after_dequeue=common_queue_min,\r\n        seed=seed\r\n      )\r\n      lines.append(line)\r\n\r\n    if shuffle:\r\n      shuffle_queue = tf.RandomShuffleQueue(\r\n        dtypes=[tf.string for _ in datasets],\r\n        capacity=common_queue_capacity,\r\n        min_after_dequeue=common_queue_min,\r\n        seed=seed\r\n      )\r\n      enqueue_ops = []\r\n      enqueue_ops.append(shuffle_queue.enqueue(lines))\r\n      tf.train.add_queue_runner(\r\n          tf.train.QueueRunner(shuffle_queue, enqueue_ops))\r\n```\r\nTo debug, I start another thread to print the current stacks. When it does not hang, it prints:\r\n```\r\n--------------------------------------------------------------------\r\nthreads: 2019-01-06 02:09:15.317473\r\nThread 0x00007f39da7fc700 (most recent call first):\r\n  File \"/usr/lib/python3.5/threading.py\", line 293 in wait\r\n  File \"/usr/lib/python3.5/threading.py\", line 549 in wait\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/coordinator.py\", line 311 in wait_for_stop\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 293 in _close_on_stop\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f39daffd700 (most recent call first):\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1407 in _call_tf_sessionrun\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1267 in _single_tensor_run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 257 in _run\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f39db7fe700 (most recent call first):\r\n  File \"/usr/lib/python3.5/threading.py\", line 293 in wait\r\n  File \"/usr/lib/python3.5/threading.py\", line 549 in wait\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/coordinator.py\", line 311 in wait_for_stop\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 293 in _close_on_stop\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f39dbfff700 (most recent call first):\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1407 in _call_tf_sessionrun\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1257 in _single_operation_run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 257 in _run\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f39f0ff9700 (most recent call first):\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1407 in _call_tf_sessionrun\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1257 in _single_operation_run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 257 in _run\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f39f17fa700 (most recent call first):\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1407 in _call_tf_sessionrun\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1257 in _single_operation_run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 257 in _run\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f39f1ffb700 (most recent call first):\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1407 in _call_tf_sessionrun\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1257 in _single_operation_run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 257 in _run\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f39f27fc700 (most recent call first):\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1407 in _call_tf_sessionrun\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1257 in _single_operation_run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 257 in _run\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f39f2ffd700 (most recent call first):\r\n  File \"/usr/lib/python3.5/threading.py\", line 293 in wait\r\n  File \"/usr/lib/python3.5/threading.py\", line 549 in wait\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/coordinator.py\", line 311 in wait_for_stop\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 293 in _close_on_stop\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f39f37fe700 (most recent call first):\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1407 in _call_tf_sessionrun\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1257 in _single_operation_run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 257 in _run\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f39f3fff700 (most recent call first):\r\n  File \"/usr/lib/python3.5/threading.py\", line 293 in wait\r\n  File \"/usr/lib/python3.5/threading.py\", line 549 in wait\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/coordinator.py\", line 311 in wait_for_stop\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 293 in _close_on_stop\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f39f8e17700 (most recent call first):\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1407 in _call_tf_sessionrun\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1257 in _single_operation_run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 257 in _run\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f39fc7f8700 (most recent call first):\r\n  File \"/usr/lib/python3.5/threading.py\", line 293 in wait\r\n  File \"/usr/lib/python3.5/threading.py\", line 549 in wait\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/coordinator.py\", line 311 in wait_for_stop\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 293 in _close_on_stop\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f39fcff9700 (most recent call first):\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1407 in _call_tf_sessionrun\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1257 in _single_operation_run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 257 in _run\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f39fd7fa700 (most recent call first):\r\n  File \"/usr/lib/python3.5/threading.py\", line 293 in wait\r\n  File \"/usr/lib/python3.5/threading.py\", line 549 in wait\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/coordinator.py\", line 311 in wait_for_stop\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 293 in _close_on_stop\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f39fdffb700 (most recent call first):\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1407 in _call_tf_sessionrun\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1257 in _single_operation_run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 257 in _run\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f39fe7fc700 (most recent call first):\r\n  File \"/usr/lib/python3.5/threading.py\", line 293 in wait\r\n  File \"/usr/lib/python3.5/threading.py\", line 549 in wait\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/coordinator.py\", line 311 in wait_for_stop\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 293 in _close_on_stop\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f39feffd700 (most recent call first):\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1407 in _call_tf_sessionrun\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1257 in _single_operation_run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 257 in _run\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f3a03ab1700 (most recent call first):\r\n  File \"/usr/lib/python3.5/threading.py\", line 293 in wait\r\n  File \"/usr/lib/python3.5/threading.py\", line 549 in wait\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/coordinator.py\", line 311 in wait_for_stop\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 293 in _close_on_stop\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f3cb8ff9700 (most recent call first):\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1407 in _call_tf_sessionrun\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1257 in _single_operation_run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 257 in _run\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f3cb97fa700 (most recent call first):\r\n  File \"/usr/lib/python3.5/threading.py\", line 293 in wait\r\n  File \"/usr/lib/python3.5/threading.py\", line 549 in wait\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/coordinator.py\", line 311 in wait_for_stop\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 293 in _close_on_stop\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f3cb9ffb700 (most recent call first):\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1407 in _call_tf_sessionrun\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1257 in _single_operation_run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 257 in _run\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f3a032b0700 (most recent call first):\r\n  File \"/usr/lib/python3.5/threading.py\", line 293 in wait\r\n  File \"/usr/lib/python3.5/threading.py\", line 549 in wait\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/coordinator.py\", line 311 in wait_for_stop\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 293 in _close_on_stop\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f3a02aaf700 (most recent call first):\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1407 in _call_tf_sessionrun\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1257 in _single_operation_run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 257 in _run\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f39fffff700 (most recent call first):\r\n  File \"/usr/lib/python3.5/threading.py\", line 293 in wait\r\n  File \"/usr/lib/python3.5/threading.py\", line 549 in wait\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/coordinator.py\", line 311 in wait_for_stop\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 293 in _close_on_stop\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f39ff7fe700 (most recent call first):\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1407 in _call_tf_sessionrun\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1257 in _single_operation_run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/queue_runner_impl.py\", line 257 in _run\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f3d9ffff700 (most recent call first):\r\n  File \"/usr/lib/python3.5/threading.py\", line 293 in wait\r\n  File \"/usr/lib/python3.5/queue.py\", line 164 in get\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/summary/writer/event_file_writer.py\", line 159 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nCurrent thread 0x00007f3f50b37700 (most recent call first):\r\n  File \"/home/yjf/s2s_download/seq2seq/bin/thread_monitor.py\", line 25 in log_threads\r\n  File \"/usr/lib/python3.5/threading.py\", line 862 in run\r\n  File \"/usr/lib/python3.5/threading.py\", line 914 in _bootstrap_inner\r\n  File \"/usr/lib/python3.5/threading.py\", line 882 in _bootstrap\r\n\r\nThread 0x00007f4075bb4700 (most recent call first):\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1407 in _call_tf_sessionrun\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1319 in _run_fn\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1334 in _do_call\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1328 in _do_run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1152 in _run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 929 in run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/monitored_session.py\", line 1076 in run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/monitored_session.py\", line 1312 in run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/monitored_session.py\", line 1240 in run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/monitored_session.py\", line 1156 in run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/monitored_session.py\", line 671 in run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 1095 in _train_model\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 525 in fit\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/util/deprecation.py\", line 488 in new_func\r\n  File \"/home/yjf/s2s_download/seq2seq/seq2seq/contrib/experiment.py\", line 104 in continuous_train_and_eval\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/contrib/learn/python/learn/learn_runner.py\", line 52 in _execute_schedule\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/contrib/learn/python/learn/learn_runner.py\", line 225 in run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/util/deprecation.py\", line 306 in new_func\r\n  File \"/home/yjf/s2s_download/seq2seq/bin/train.py\", line 273 in main\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/platform/app.py\", line 125 in run\r\n  File \"/home/yjf/s2s_download/seq2seq/bin/train.py\", line 280 in <module>\r\n  File \"/usr/lib/python3.5/runpy.py\", line 85 in _run_code\r\n  File \"/usr/lib/python3.5/runpy.py\", line 184 in _run_module_as_main\r\n--------------------------------------------------------------------\r\n```\r\n\r\nWhen the process is hang, seemingly in deadlock, the only change is the main thread's stack,\r\nwith the top of the stack being `join`.\r\n\r\n```\r\nThread 0x00007f4075bb4700 (most recent call first):\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/coordinator.py\", line 373 in join  # <--------------------- HERE\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/monitored_session.py\", line 1229 in close\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/monitored_session.py\", line 1069 in close\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/monitored_session.py\", line 821 in _close_internal\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/training/monitored_session.py\", line 783 in __exit__\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 1095 in _train_model\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/contrib/learn/python/learn/estimators/estimator.py\", line 525 in fit\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/util/deprecation.py\", line 488 in new_func\r\n  File \"/home/yjf/s2s_download/seq2seq/seq2seq/contrib/experiment.py\", line 104 in continuous_train_and_eval\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/contrib/learn/python/learn/learn_runner.py\", line 52 in _execute_schedule\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/contrib/learn/python/learn/learn_runner.py\", line 225 in run\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/util/deprecation.py\", line 306 in new_func\r\n  File \"/home/yjf/s2s_download/seq2seq/bin/train.py\", line 273 in main\r\n  File \"/home/yjf/.local/lib/python3.5/site-packages/tensorflow/python/platform/app.py\", line 125 in run\r\n  File \"/home/yjf/s2s_download/seq2seq/bin/train.py\", line 280 in <module>\r\n  File \"/usr/lib/python3.5/runpy.py\", line 85 in _run_code\r\n  File \"/usr/lib/python3.5/runpy.py\", line 184 in _run_module_as_main\r\n```\r\nI am not quite familiar with python multi-thread. Perhaps due to the GIL, this info was not printed when the process hanged, but when I interrupted the process with ctrl+c. If you have any ideas on these kind of debugging, I will be very grateful to hear.\r\n\r\n**Describe the expected behavior**\r\n\r\nIt should not hang.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\nI am not quite sure which parts lead to the hanging.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nNone."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24709", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24709/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24709/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24709/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24709", "id": 396062249, "node_id": "MDU6SXNzdWUzOTYwNjIyNDk=", "number": 24709, "title": "TFLite c++ code with TFLite binary gives error using BuildFromBuffer()", "user": {"login": "ShariqM", "id": 218036, "node_id": "MDQ6VXNlcjIxODAzNg==", "avatar_url": "https://avatars2.githubusercontent.com/u/218036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShariqM", "html_url": "https://github.com/ShariqM", "followers_url": "https://api.github.com/users/ShariqM/followers", "following_url": "https://api.github.com/users/ShariqM/following{/other_user}", "gists_url": "https://api.github.com/users/ShariqM/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShariqM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShariqM/subscriptions", "organizations_url": "https://api.github.com/users/ShariqM/orgs", "repos_url": "https://api.github.com/users/ShariqM/repos", "events_url": "https://api.github.com/users/ShariqM/events{/privacy}", "received_events_url": "https://api.github.com/users/ShariqM/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-01-04T20:47:22Z", "updated_at": "2019-03-22T20:40:59Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Mac High Sierra 10.13.6\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: Pixel 2\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): r.12\r\n- Python version: 3.5\r\n- Bazel version (if compiling from source): 0.21\r\n- GCC/Compiler version (if compiling from source): Apple LLVM version 9.1.0 (clang-902.0.39.2)\r\n- CUDA/cuDNN version: 10.1\r\n- GPU model and memory: NVIDIA 2080TI\r\n\r\n**Describe the current behavior**\r\nHigh-Level: I'm trying to built a TFLite Interpreter in C++ running on a Pixel 2. I have successfully loaded my model.tflite binary using the BuildFromFile() API. However, I now want to read the model from the assets/ directory. To do this I believe I am supposed to use the  BuildFromBuffer() API.\r\n\r\nI'm using the BuildFromBuffer() API in model.h using a mmapped buffer and not getting a valid model back. Am I supposed to supply some other kind of buffer? See my code below. I get an error about a bad model identifier.\r\n\r\n**Describe the expected behavior**\r\nI expected a valid FlatBufferModel to be returned.\r\n\r\n**Code to reproduce the issue**\r\n`\r\n            Code that errors:\r\n\r\n            AAsset *asset = AAssetManager_open(mgr, tflite_path.c_str(), O_RDONLY);\r\n            off_t start = 0;\r\n            off_t length = AAsset_getLength(asset);\r\n            int mmap_fd_ = AAsset_openFileDescriptor(asset, &start, &length);\r\n            if (mmap_fd_ < 0) {\r\n                LOGE(\"Failed to open file: %s\", tflite_path.c_str());\r\n                AAsset_close(asset);\r\n                return false;\r\n            }\r\n            // MMAP TFLite Binary\r\n            struct stat sb;\r\n            fstat(mmap_fd_, &sb);\r\n            char *mmapped_buffer_ = (char *) mmap(nullptr, sb.st_size, PROT_READ, MAP_SHARED, mmap_fd_,\r\n                                                  0);\r\n            if (mmapped_buffer_ == MAP_FAILED) {\r\n                LOGE(\"Mmap failed on file: %s\", tflite_path.c_str());\r\n                AAsset_close(asset);\r\n                return false;\r\n            }\r\n\r\n            // Build the Model\r\n            using namespace tflite;\r\n            std::unique_ptr<FlatBufferModel> model = FlatBufferModel::BuildFromBuffer(mmapped_buffer_,\r\n                                                                                      strlen(mmapped_buffer_));\r\n            if (!model) {\r\n                LOGE(\"Failed to create FlatBufferModel with file: %s\", tflite_path.c_str()); // My code errors here.\r\n                AAsset_close(asset);\r\n                return false;\r\n            }`\r\n\r\n\r\n`\r\n            Code that runs successfully: \r\n\r\n            const char *external_path = env->GetStringUTFChars(jExternalPath, JNI_FALSE);\r\n            const char *relative_path = \"/Download/tflite/1052model.ckpt-303187.tflite\";\r\n            char tflite_path[strlen(external_path) + strlen(relative_path)];\r\n            strcpy(tflite_path, external_path);\r\n            strcat (tflite_path, relative_path);\r\n\r\n            std::unique_ptr<tflite::FlatBufferModel> model(\r\n                    tflite::FlatBufferModel::BuildFromFile(tflite_path));\r\n\r\n            if(!model){\r\n                printf(\"Failed to mmap model\\n\");\r\n                exit(0);\r\n            }\r\n\r\n            tflite::ops::builtin::BuiltinOpResolver resolver;\r\n            std::unique_ptr<tflite::Interpreter> interpreter;\r\n            if (tflite::InterpreterBuilder(*model, resolver)(&interpreter) == kTfLiteOk) {\r\n                interpreter->Invoke();\r\n                LOGD(\"TFLiteOk!\");\r\n            } else {\r\n                LOGD(\"TFLite -- NOT -- Ok!\");\r\n            }`\r\n**Other info / logs**\r\nError logs:\r\n19-01-04 12:38:14.953 25181-25181/com.google.sample.oboe.hearsight E/tflite: Model provided has model identifier '\u0014\r\n2019-01-04 12:38:14.953 25181-25181/com.google.sample.oboe.hearsight E/AUDIO-APP: Failed to create FlatBufferModel with file: 1052model.ckpt-303187.tflite"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24695", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24695/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24695/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24695/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24695", "id": 395793692, "node_id": "MDU6SXNzdWUzOTU3OTM2OTI=", "number": 24695, "title": "Incompatible checkpoint being restored on estimator with keras model", "user": {"login": "kurka", "id": 585058, "node_id": "MDQ6VXNlcjU4NTA1OA==", "avatar_url": "https://avatars1.githubusercontent.com/u/585058?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kurka", "html_url": "https://github.com/kurka", "followers_url": "https://api.github.com/users/kurka/followers", "following_url": "https://api.github.com/users/kurka/following{/other_user}", "gists_url": "https://api.github.com/users/kurka/gists{/gist_id}", "starred_url": "https://api.github.com/users/kurka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kurka/subscriptions", "organizations_url": "https://api.github.com/users/kurka/orgs", "repos_url": "https://api.github.com/users/kurka/repos", "events_url": "https://api.github.com/users/kurka/events{/privacy}", "received_events_url": "https://api.github.com/users/kurka/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2019-01-04T02:54:07Z", "updated_at": "2020-02-05T21:31:17Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code: yes\r\n- OS Platform and Distribution: Archlinux\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.12.0\r\n- Python version: 3.7.1\r\n- CUDA/cuDNN version: 10.0.130-2/7.4.1.5-2\r\n- GPU model and memory: 11GB GTX 1080 Ti\r\n\r\n**Describe the current behavior**\r\n\r\nI am running a Keras Model within a custom estimator and giving the size of a hidden layer as a parameter.\r\nAfter each run with the estimator, a checkpoint is stored, saving the weights of that run. \r\n\r\nHowever, if the architecture of the model is changed between runs, instead of receiving an error due to incompatible checkpoints, tensorflow is loading the old checkpoint into the new model even though new dimension is being considered.\r\n\r\n**Describe the expected behavior**\r\n\r\nAccording to the [guide](https://www.tensorflow.org/guide/checkpoints#avoiding_a_bad_restoration), \"restoring a model's state from a checkpoint only works if the model and checkpoint are compatible\" and it is given an example of how the described situation (changes in the model architecture) should generate an `InvalidArgumentError`.\r\n\r\nHowever no error is raised, being unclear the behaviour - are the new weights (in case of increased size) initialised and trained? Are they simply ignored?\r\n\r\n**Code to reproduce the issue**\r\n\r\nBelow is a minimum working example to reproduce the problem:\r\n\r\n```python\r\nimport tensorflow as tf\r\nimport numpy as np\r\nfrom tensorflow.keras import layers\r\n\r\n\r\ndef main(argv):\r\n    steps = 1000\r\n    # Generate random data\r\n    train_x = np.random.randn(100, 4).astype('float32')\r\n    train_y = np.random.randint(0, 3, 100).astype('int32')\r\n\r\n    # First estimator, with *10* hidden units\r\n    classifier = tf.estimator.Estimator(\r\n        model_fn=model_fn,\r\n        model_dir=\"tmp\",\r\n        params={'hidden': 10}\r\n    )\r\n\r\n    # train first model and store checkpoints on \"tmp\"\r\n    classifier.train(\r\n        input_fn=lambda: tf.data.Dataset.from_tensors((train_x, train_y)),\r\n        steps=steps)\r\n\r\n    # second estimator, with *20* hidden units and same model_dir output\r\n    # BUG: should break as model_dir is the same as previous estimator!!!\r\n    classifier = tf.estimator.Estimator(\r\n        model_fn=model_fn,\r\n        model_dir=\"tmp\",\r\n        params={'hidden': 20}\r\n    )\r\n\r\n    classifier.train(\r\n        input_fn=lambda: tf.data.Dataset.from_tensors((train_x, train_y)),\r\n        steps=steps)\r\n\r\n\r\ndef model_fn(features, labels, mode, params):\r\n\r\n    # create model with params[hidden] units on hidden layer\r\n    model = tf.keras.Sequential([layers.Dense(params[\"hidden\"], activation='relu'),\r\n                                 layers.Dense(3)])\r\n    logits = model(features)\r\n    loss = tf.losses.sparse_softmax_cross_entropy(labels=labels, logits=logits)\r\n    optimizer = tf.train.AdagradOptimizer(learning_rate=0.1)\r\n    train_op = optimizer.minimize(loss, global_step=tf.train.get_global_step())\r\n\r\n    return tf.estimator.EstimatorSpec(mode, loss=loss, train_op=train_op)\r\n\r\n\r\nif __name__ == '__main__':\r\n    tf.logging.set_verbosity(tf.logging.INFO)\r\n    tf.app.run(main)\r\n```\r\n\r\n\r\n\r\n**Other info / logs**\r\nLog output (abbreviated)\r\n\r\n~~~\r\n# RUN 1\r\n...\r\nINFO:tensorflow:Calling model_fn.\r\nINFO:tensorflow:Done calling model_fn.\r\nINFO:tensorflow:Create CheckpointSaverHook.\r\nINFO:tensorflow:Graph was finalized.\r\nINFO:tensorflow:Running local_init_op.\r\nINFO:tensorflow:Done running local_init_op.\r\nINFO:tensorflow:Saving checkpoints for 0 into tmp/model.ckpt.\r\nINFO:tensorflow:loss = 1.1404053, step = 0\r\nINFO:tensorflow:Saving checkpoints for 1 into tmp/model.ckpt.\r\nINFO:tensorflow:Loss for final step: 1.1404053.\r\n...\r\n# RUN 2\r\nINFO:tensorflow:Calling model_fn.\r\nINFO:tensorflow:Done calling model_fn.\r\nINFO:tensorflow:Create CheckpointSaverHook.\r\nINFO:tensorflow:Graph was finalized.\r\n\r\nINFO:tensorflow:Restoring parameters from tmp/model.ckpt-1\r\nINFO:tensorflow:Running local_init_op.\r\nINFO:tensorflow:Done running local_init_op.\r\nINFO:tensorflow:Saving checkpoints for 1 into tmp/model.ckpt.\r\nINFO:tensorflow:loss = 1.112431, step = 1\r\nINFO:tensorflow:Saving checkpoints for 2 into tmp/model.ckpt.\r\nINFO:tensorflow:Loss for final step: 1.112431.\r\n~~~\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24676", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24676/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24676/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24676/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24676", "id": 395430820, "node_id": "MDU6SXNzdWUzOTU0MzA4MjA=", "number": 24676, "title": "NNAPI doesn't support tensors with rank 0 - LeakyRelu?", "user": {"login": "wosiu", "id": 4964388, "node_id": "MDQ6VXNlcjQ5NjQzODg=", "avatar_url": "https://avatars2.githubusercontent.com/u/4964388?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wosiu", "html_url": "https://github.com/wosiu", "followers_url": "https://api.github.com/users/wosiu/followers", "following_url": "https://api.github.com/users/wosiu/following{/other_user}", "gists_url": "https://api.github.com/users/wosiu/gists{/gist_id}", "starred_url": "https://api.github.com/users/wosiu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wosiu/subscriptions", "organizations_url": "https://api.github.com/users/wosiu/orgs", "repos_url": "https://api.github.com/users/wosiu/repos", "events_url": "https://api.github.com/users/wosiu/events{/privacy}", "received_events_url": "https://api.github.com/users/wosiu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-01-03T01:14:54Z", "updated_at": "2019-02-27T09:14:04Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):  Linux Ubuntu 16.04 + Android 8.1\r\n- TensorFlow installed from (source or binary): Anaconda  \r\n- TensorFlow version (or github SHA if from source): tensorflow 1.12.0 + keras 2.2.4 for converting model using tflite_convert and tensorflow-lite:1.12.0 in Android gradle build config\r\n\r\n**Provide the text output from tflite_convert**\r\n\r\n```\r\n(update_36) m@m-hp:~/repos/keras_ocr_preproc$ tflite_convert --output_file=android/some_name.tflite --keras_model_file=android/some_name.hdf5\r\n2019-01-03 01:45:35.173445: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA\r\n2019-01-03 01:45:35.178794: I tensorflow/core/common_runtime/process_util.cc:69] Creating new thread pool with default inter op setting: 2. Tune using inter_op_parallelism_threads for best performance.\r\nWARNING:tensorflow:No training configuration found in save file: the model was *not* compiled. Compile it manually.\r\n```\r\n..which sounds OK.\r\n\r\n\r\n**Any other info / logs**\r\n\r\nLog from Android 8.1, tensorflow-lite 1.12.0 device: Alcatel 1 dual sim:\r\n```\r\nE/tflite: NNAPI doesn't support tensors with rank 0 (index 16 name class_2/LeakyRelu/alpha)\r\n    Returning error since TFLite returned failure nnapi_delegate.cc:742.\r\n    Failed to build graph for NNAPI\r\nE/AndroidRuntime: FATAL EXCEPTION: DefaultFallbackThread\r\n    Process: eu.yesse.readerdemo.release, PID: 27460\r\n    java.lang.IllegalArgumentException: Internal error: Failed to run on the given Interpreter: @\r\n```\r\n\r\nIt crashes only when setUseNNAPI is set to true (I know - usage is deprecated in tflite:1.12.0). \r\nWhen setUseNNAPI is commented, it seems that fallback to CPU happens and everything works, but slow. \r\nAlso for other Androids <=8.0, it works extremaly slow comparing to evaluation of the same model on iOS devices using CoreML. \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24672", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24672/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24672/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24672/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24672", "id": 395360720, "node_id": "MDU6SXNzdWUzOTUzNjA3MjA=", "number": 24672, "title": "Incorrect relative include paths in include/tensorflow/core/framework/op_def.pb.h when building external c++ files using Windows", "user": {"login": "Usherwood", "id": 15326397, "node_id": "MDQ6VXNlcjE1MzI2Mzk3", "avatar_url": "https://avatars2.githubusercontent.com/u/15326397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Usherwood", "html_url": "https://github.com/Usherwood", "followers_url": "https://api.github.com/users/Usherwood/followers", "following_url": "https://api.github.com/users/Usherwood/following{/other_user}", "gists_url": "https://api.github.com/users/Usherwood/gists{/gist_id}", "starred_url": "https://api.github.com/users/Usherwood/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Usherwood/subscriptions", "organizations_url": "https://api.github.com/users/Usherwood/orgs", "repos_url": "https://api.github.com/users/Usherwood/repos", "events_url": "https://api.github.com/users/Usherwood/events{/privacy}", "received_events_url": "https://api.github.com/users/Usherwood/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "meteorcloudy", "id": 4171702, "node_id": "MDQ6VXNlcjQxNzE3MDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/4171702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meteorcloudy", "html_url": "https://github.com/meteorcloudy", "followers_url": "https://api.github.com/users/meteorcloudy/followers", "following_url": "https://api.github.com/users/meteorcloudy/following{/other_user}", "gists_url": "https://api.github.com/users/meteorcloudy/gists{/gist_id}", "starred_url": "https://api.github.com/users/meteorcloudy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meteorcloudy/subscriptions", "organizations_url": "https://api.github.com/users/meteorcloudy/orgs", "repos_url": "https://api.github.com/users/meteorcloudy/repos", "events_url": "https://api.github.com/users/meteorcloudy/events{/privacy}", "received_events_url": "https://api.github.com/users/meteorcloudy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "meteorcloudy", "id": 4171702, "node_id": "MDQ6VXNlcjQxNzE3MDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/4171702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/meteorcloudy", "html_url": "https://github.com/meteorcloudy", "followers_url": "https://api.github.com/users/meteorcloudy/followers", "following_url": "https://api.github.com/users/meteorcloudy/following{/other_user}", "gists_url": "https://api.github.com/users/meteorcloudy/gists{/gist_id}", "starred_url": "https://api.github.com/users/meteorcloudy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/meteorcloudy/subscriptions", "organizations_url": "https://api.github.com/users/meteorcloudy/orgs", "repos_url": "https://api.github.com/users/meteorcloudy/repos", "events_url": "https://api.github.com/users/meteorcloudy/events{/privacy}", "received_events_url": "https://api.github.com/users/meteorcloudy/received_events", "type": "User", "site_admin": false}, {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-01-02T19:54:54Z", "updated_at": "2019-01-18T22:34:05Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution: Windows 10\r\n- TensorFlow installed from: binary\r\n- TensorFlow version: 1.12.0\r\n- Python version: 3.6.6\r\n- Installed using: pip\r\n- CUDA/cuDNN version: 9.2/7\r\n- GPU model and memory: GeForce GTX 1050 Ti\r\n\r\n\r\n**Describe the problem**\r\nNOTE this error is not in building Tensorflow, but in building an external library that needs to include Tensorflow, and we believe the problem may be internal to Tensorflow. Apologies if this is in the wrong place.\r\n\r\nHello, I am no expert in Tensorflow or C++ but will try to describe the problem as best as I can. When trying to build an external package that contains .cpp files that need to include Tensorflow the C++ compiler (Visual Studio cl.exe) throws an error as the file Anaconda3\\lib\\site-packages\\tensorflow\\include\\tensorflow/core/framework/op_def.pb.h cannot find the relevant files in the include directory. It is looking for:\r\n- google/protobuf/stubs/common.h\r\n- unsupported/Eigen/CXX11/Tensor\r\n- absl/strings/string_view.h\r\n\r\nThe reason I believe this is is that the relative paths have changed on tensorflow 1.12, these files exist but are now stored in different paths. I have tried adding more include paths but then I get further errors and this fix doesn't feel like the correct way to go. \r\n\r\nOn older versions of tensorflow (tested 1.4) these include files are at the correct relative paths (as stated above) to tensorflow's include directory\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n>> D:\\programs_hdd\\visual_studio\\VC\\Tools\\MSVC\\14.13.26128\\bin\\HostX86\\x64\\cl.exe /c /nologo /Ox /W3 /GL /DNDEBUG /MD -IC:\\Users\\peter\\Anaconda3\\lib\\site-packages\\numpy\\core\\include -IC:\\Users\\peter\\Anaconda3\\lib\\site-packages\\tensorflow\\include -ID:\\documents\\work\\bibliotecas_terceiro\\tensorflow_qrnn\\src -ID:\\documents\\work\\bibliotecas_terceiro\\tensorflow_qrnn\\src\\third_party \"-IC:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v9.2\\include\" \"-IC:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v9.2\\include\\cuda\" -IC:\\Users\\peter\\Anaconda3\\Lib\\site-packages\\tensorflow\\include\\third_party\\eigen3 -IC:\\Users\\peter\\Anaconda3\\Lib\\site-packages\\tensorflow\\include\\external\\com_google_absl -IC:\\Users\\peter\\Anaconda3\\include -IC:\\Users\\peter\\Anaconda3\\include -ID:\\programs_hdd\\visual_studio\\VC\\Tools\\MSVC\\14.13.26128\\ATLMFC\\include -ID:\\programs_hdd\\visual_studio\\VC\\Tools\\MSVC\\14.13.26128\\include \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\ucrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\shared\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\um\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\winrt\" \"-IC:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.16299.0\\cppwinrt\" /EHsc /TpD:\\documents\\work\\bibliotecas_terceiro\\tensorflow_qrnn\\src\\fo_pool_op_cpu.cpp /Fobuild\\temp.win-amd64-3.6\\Release\\documents\\work\\bibliotecas_terceiro\\tensorflow_qrnn\\src\\fo_pool_op_cpu.obj\r\n\r\n>> fo_pool_op_cpu.cpp\r\n>> C:\\Users\\peter\\Anaconda3\\lib\\site-packages\\tensorflow\\include\\tensorflow/core/framework/op_def.pb.h(9): fatal error C1083: Cannot open include file: 'google/protobuf/stubs/common.h': No such file or directory\r\nerror: command \r\n>> 'D:\\\\programs_hdd\\\\visual_studio\\\\VC\\\\Tools\\\\MSVC\\\\14.13.26128\\\\bin\\\\HostX86\\\\x64\\\\cl.exe' failed with exit status 2\r\n\r\nThank you\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24653", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24653/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24653/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24653/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24653", "id": 395086143, "node_id": "MDU6SXNzdWUzOTUwODYxNDM=", "number": 24653, "title": "tf.log() is missing although it is still used in many code examples", "user": {"login": "ageron", "id": 76661, "node_id": "MDQ6VXNlcjc2NjYx", "avatar_url": "https://avatars3.githubusercontent.com/u/76661?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ageron", "html_url": "https://github.com/ageron", "followers_url": "https://api.github.com/users/ageron/followers", "following_url": "https://api.github.com/users/ageron/following{/other_user}", "gists_url": "https://api.github.com/users/ageron/gists{/gist_id}", "starred_url": "https://api.github.com/users/ageron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ageron/subscriptions", "organizations_url": "https://api.github.com/users/ageron/orgs", "repos_url": "https://api.github.com/users/ageron/repos", "events_url": "https://api.github.com/users/ageron/events{/privacy}", "received_events_url": "https://api.github.com/users/ageron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-01-01T14:07:07Z", "updated_at": "2020-03-12T13:43:02Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nNo\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nMac OS X 10.13.6\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\nN/A\r\n- TensorFlow installed from (source or binary):\r\nbinary\r\n- TensorFlow version (use command below):\r\nVERSION=\"1.13.0-dev20181226\" (this is the TF 2.0-preview)\r\nGIT_VERSION=\"b'v1.12.0-5133-gc343196842'\"\r\n- Python version:\r\n3.6.6\r\n- Bazel version (if compiling from source):\r\nN/A\r\n- GCC/Compiler version (if compiling from source):\r\nN/A\r\n- CUDA/cuDNN version:\r\nN/A\r\n- GPU model and memory:\r\nN/A\r\n\r\n**Describe the current behavior**\r\n`tf.log()` is missing.  It is only available in `tf.math.log()`.\r\n\r\n**Describe the expected behavior**\r\nThe log function is fundamental and used all the time, it should be available in `tf.log()` (and also in `tf.math.log()`. Especially considering that `tf.exp()` is available. Note that many code examples still show `tf.log()` (try searching for `'tf.log('` in the code base, you will find 12 matches across 8 files).\r\n\r\n**Code to reproduce the issue**\r\n\r\n```python\r\nimport tensorflow as tf\r\ntf.log(42.)\r\n```\r\n\r\n**Other info / logs**\r\nI also checked the changes listed in the API names RFC, and I noticed a few discrepancies (I can file a separate issue if necessary):\r\n\r\n```\r\nNot deleted: tf.Event\r\nNot deleted: tf.losses\r\nNot deleted: tf.space_to_batch\r\n\r\nNot moved: tf.floormod => tf.math.floormod\r\nNot moved: tf.realdiv => tf.math.realdiv\r\nNot moved: tf.SummaryMetadata => tf.summary.SummaryMetadata\r\nNot moved: tf.truncatediv => tf.math.truncatediv\r\nNot moved: tf.truncatemod => math.truncatemod\r\n\r\nNot added: tf.batch_to_space_nd\r\nNot added: tf.debugging.is_finite\r\nNot added: tf.debugging.is_inf\r\nNot added: tf.debugging.is_non_decreasing\r\nNot added: tf.debugging.is_strictly_increasing\r\nNot added: tf.debugging.Print\r\nNot added: tf.debugging.verify_tensor_all_finite\r\nNot added: tf.dtypes.bitcast\r\nNot added: tf.initializers.glorot_normal\r\nNot added: tf.initializers.orthogonal_initializer\r\nNot added: tf.initializers.tables_initializer\r\nNot added: tf.initializers.uniform_unit_scaling\r\nNot added: tf.initializers.variance_scaling\r\nNot added: tf.io.PaddingFIFOQueue\r\nNot added: tf.io.PriorityQueue\r\nNot added: tf.io.QueueBase\r\nNot added: tf.io.RandomShuffleQueue\r\nNot added: tf.io.tf_record_iterator\r\nNot added: tf.linalg.matrix_band_part\r\nNot added: tf.linalg.matrix_inverse\r\nNot added: tf.linalg.matrix_solve_ls\r\nNot added: tf.linalg.self_adjoint_eig\r\nNot added: tf.linalg.self_adjoint_eigvals\r\nNot added: tf.math.mod\r\nNot added: tf.math.reduce_join\r\nNot added: tf.quantization.quantize_v2\r\nNot added: tf.random.get_seed\r\nNot added: tf.random.multinomial\r\nNot added: tf.random.random_gamma\r\nNot added: tf.random.random_poisson\r\nNot added: tf.random.set_random_seed\r\nNot added: tf.saved_model.build_tensor_info\r\nNot added: tf.saved_model.get_tensor_from_tensor_info\r\nNot added: tf.saved_model.LEGACY_INIT_OP_KEY\r\nNot added: tf.saved_model.load\r\nNot added: tf.saved_model.main_op\r\nNot added: tf.saved_model.MAIN_OP_KEY\r\nNot added: tf.saved_model.main_op_with_restore\r\nNot added: tf.saved_model.maybe_saved_model_directory\r\nNot added: tf.saved_model.SavedModelBuilder\r\nNot added: tf.saved_model.TRAINING\r\nNot added: tf.sparse.matmul\r\nNot added: tf.sparse.merge\r\nNot added: tf.sparse.placeholder\r\nNot added: tf.sparse.reduce_max_sparse\r\nNot added: tf.sparse.reduce_sum_sparse\r\nNot added: tf.sparse.SparseTensorValue\r\nNot added: tf.summary.HistogramProto\r\nNot added: tf.train.confusion_matrix\r\n```\r\n\r\nAnd `tf.spectral` is called `tf.signal`."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24641", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24641/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24641/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24641/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24641", "id": 394967624, "node_id": "MDU6SXNzdWUzOTQ5Njc2MjQ=", "number": 24641, "title": "tf.contrib.quantize.create_training_graph with tf.keras.activations.relu quantizes before the relu cliping op", "user": {"login": "fgr1986", "id": 10627849, "node_id": "MDQ6VXNlcjEwNjI3ODQ5", "avatar_url": "https://avatars3.githubusercontent.com/u/10627849?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fgr1986", "html_url": "https://github.com/fgr1986", "followers_url": "https://api.github.com/users/fgr1986/followers", "following_url": "https://api.github.com/users/fgr1986/following{/other_user}", "gists_url": "https://api.github.com/users/fgr1986/gists{/gist_id}", "starred_url": "https://api.github.com/users/fgr1986/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fgr1986/subscriptions", "organizations_url": "https://api.github.com/users/fgr1986/orgs", "repos_url": "https://api.github.com/users/fgr1986/repos", "events_url": "https://api.github.com/users/fgr1986/events{/privacy}", "received_events_url": "https://api.github.com/users/fgr1986/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-12-31T11:33:33Z", "updated_at": "2019-01-16T02:03:37Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): Binary\r\n- TensorFlow version (use command below): 1.12\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\n\r\nThe use of the param 'max_value' in https://www.tensorflow.org/api_docs/python/tf/keras/activations/relu produces the a quantized graph with the FakeQuant op just after the relu op and not after the automatically inserted clip op.\r\n\r\n![Generated graph](https://c2.staticflickr.com/8/7889/31598991447_a5d540f672_b.jpg)\r\n\r\n**Describe the expected behavior**\r\n\r\nThe FakeQuant op should be added after the clip op\r\n\r\n**Code to reproduce the issue**\r\n```\r\n...\r\nnet = tf.layers.dense(inputs=net,\r\n                              units=units,\r\n                              activation=None,\r\n                              name='dense_' + str(ly_idx),\r\n                              )\r\nnet = tf.keras.activations.relu(net,max_value=params['clip_activations'])\r\n...\r\n```\r\n\r\n\r\n\r\nThanks,\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24607", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24607/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24607/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24607/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24607", "id": 394527474, "node_id": "MDU6SXNzdWUzOTQ1Mjc0NzQ=", "number": 24607, "title": "TFLite not support Dynamic input size ", "user": {"login": "WenguoLi", "id": 31765154, "node_id": "MDQ6VXNlcjMxNzY1MTU0", "avatar_url": "https://avatars0.githubusercontent.com/u/31765154?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WenguoLi", "html_url": "https://github.com/WenguoLi", "followers_url": "https://api.github.com/users/WenguoLi/followers", "following_url": "https://api.github.com/users/WenguoLi/following{/other_user}", "gists_url": "https://api.github.com/users/WenguoLi/gists{/gist_id}", "starred_url": "https://api.github.com/users/WenguoLi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WenguoLi/subscriptions", "organizations_url": "https://api.github.com/users/WenguoLi/orgs", "repos_url": "https://api.github.com/users/WenguoLi/repos", "events_url": "https://api.github.com/users/WenguoLi/events{/privacy}", "received_events_url": "https://api.github.com/users/WenguoLi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, {"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 24, "created_at": "2018-12-28T02:04:26Z", "updated_at": "2020-02-21T17:59:59Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 1.12\r\n- Are you willing to contribute it (Yes/No): No\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nTry running tflite_convert again, with --input_shapes=1,none,none,3,  but these conversion cannot be supported.\r\nFor some networks requiring dynamic input, the static input of tflite is too limited, such as Superresolution Neural Network.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24605", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24605/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24605/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24605/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24605", "id": 394495176, "node_id": "MDU6SXNzdWUzOTQ0OTUxNzY=", "number": 24605, "title": "[Feature Request] Indexing an array of functions", "user": {"login": "nunezpaul", "id": 25912420, "node_id": "MDQ6VXNlcjI1OTEyNDIw", "avatar_url": "https://avatars1.githubusercontent.com/u/25912420?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nunezpaul", "html_url": "https://github.com/nunezpaul", "followers_url": "https://api.github.com/users/nunezpaul/followers", "following_url": "https://api.github.com/users/nunezpaul/following{/other_user}", "gists_url": "https://api.github.com/users/nunezpaul/gists{/gist_id}", "starred_url": "https://api.github.com/users/nunezpaul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nunezpaul/subscriptions", "organizations_url": "https://api.github.com/users/nunezpaul/orgs", "repos_url": "https://api.github.com/users/nunezpaul/repos", "events_url": "https://api.github.com/users/nunezpaul/events{/privacy}", "received_events_url": "https://api.github.com/users/nunezpaul/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-12-27T21:51:51Z", "updated_at": "2019-02-07T06:58:49Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.12.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nCurrently using a tensor to index a list of functions is inconsistent. In order to have the same functionality while training I have to chain together a series of tf.cond statements to accomplish the same task. Currently, this can be done in eager execution but not in outside of it.\r\n\r\nExample:\r\n\r\n```\r\nimport tensorflow as tf\r\n\r\ntf.enable_eager_execution()\r\n\r\ndef mul(a):\r\n    return tf.multiply(a, 10)\r\n\r\ndef add(a):\r\n    return tf.add(a, 10)\r\n\r\ndef sub(a):\r\n    return tf.subtract(a, 10)\r\n\r\ndef div(a):\r\n    return tf.divide(a, 10)\r\n\r\nfunctions = [mul, add, sub, div]\r\na = tf.ones(shape=(), dtype=tf.float32) * 10\r\n\r\nfor i in range(10):\r\n    random_op = tf.random_uniform(shape=(), minval=0, maxval=len(functions), dtype=tf.int64)\r\n    result = functions[random_op](a)\r\n    print(random_op, result)\r\n```\r\n\r\nOutput:\r\n```\r\ntf.Tensor(1, shape=(), dtype=int64) tf.Tensor(20.0, shape=(), dtype=float32)\r\ntf.Tensor(1, shape=(), dtype=int64) tf.Tensor(20.0, shape=(), dtype=float32)\r\ntf.Tensor(1, shape=(), dtype=int64) tf.Tensor(20.0, shape=(), dtype=float32)\r\ntf.Tensor(2, shape=(), dtype=int64) tf.Tensor(0.0, shape=(), dtype=float32)\r\ntf.Tensor(0, shape=(), dtype=int64) tf.Tensor(100.0, shape=(), dtype=float32)\r\ntf.Tensor(0, shape=(), dtype=int64) tf.Tensor(100.0, shape=(), dtype=float32)\r\ntf.Tensor(1, shape=(), dtype=int64) tf.Tensor(20.0, shape=(), dtype=float32)\r\ntf.Tensor(1, shape=(), dtype=int64) tf.Tensor(20.0, shape=(), dtype=float32)\r\ntf.Tensor(2, shape=(), dtype=int64) tf.Tensor(0.0, shape=(), dtype=float32)\r\ntf.Tensor(0, shape=(), dtype=int64) tf.Tensor(100.0, shape=(), dtype=float32)\r\n```\r\n\r\n**Will this change the current api? How?**\r\nI suspect this will require the api to detect the output of the indexing the list to be a function as opposed to a new tensor.\r\n**Who will benefit with this feature?**\r\nThis should come as a large benefit to anyone who is performing online data augmentation.\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24595", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24595/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24595/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24595/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24595", "id": 394342878, "node_id": "MDU6SXNzdWUzOTQzNDI4Nzg=", "number": 24595, "title": "Multi-tower support on each GPU in MirroredStrategy and estimator", "user": {"login": "ZhouYuChen", "id": 3125695, "node_id": "MDQ6VXNlcjMxMjU2OTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/3125695?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZhouYuChen", "html_url": "https://github.com/ZhouYuChen", "followers_url": "https://api.github.com/users/ZhouYuChen/followers", "following_url": "https://api.github.com/users/ZhouYuChen/following{/other_user}", "gists_url": "https://api.github.com/users/ZhouYuChen/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZhouYuChen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZhouYuChen/subscriptions", "organizations_url": "https://api.github.com/users/ZhouYuChen/orgs", "repos_url": "https://api.github.com/users/ZhouYuChen/repos", "events_url": "https://api.github.com/users/ZhouYuChen/events{/privacy}", "received_events_url": "https://api.github.com/users/ZhouYuChen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yuefengz", "id": 1647833, "node_id": "MDQ6VXNlcjE2NDc4MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1647833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuefengz", "html_url": "https://github.com/yuefengz", "followers_url": "https://api.github.com/users/yuefengz/followers", "following_url": "https://api.github.com/users/yuefengz/following{/other_user}", "gists_url": "https://api.github.com/users/yuefengz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuefengz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuefengz/subscriptions", "organizations_url": "https://api.github.com/users/yuefengz/orgs", "repos_url": "https://api.github.com/users/yuefengz/repos", "events_url": "https://api.github.com/users/yuefengz/events{/privacy}", "received_events_url": "https://api.github.com/users/yuefengz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yuefengz", "id": 1647833, "node_id": "MDQ6VXNlcjE2NDc4MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1647833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuefengz", "html_url": "https://github.com/yuefengz", "followers_url": "https://api.github.com/users/yuefengz/followers", "following_url": "https://api.github.com/users/yuefengz/following{/other_user}", "gists_url": "https://api.github.com/users/yuefengz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuefengz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuefengz/subscriptions", "organizations_url": "https://api.github.com/users/yuefengz/orgs", "repos_url": "https://api.github.com/users/yuefengz/repos", "events_url": "https://api.github.com/users/yuefengz/events{/privacy}", "received_events_url": "https://api.github.com/users/yuefengz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-12-27T09:27:48Z", "updated_at": "2019-01-29T00:11:06Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- TensorFlow version (you are using): 1.12\r\n- Are you willing to contribute it (Yes/No): No\r\n\r\n**Describe the feature and the current behavior/state.**\r\n*Feature*:\r\nAdd an argument like `num_towers_per_gpu`  in `tf.contrib.distribute.MirroredStrategy` to enable multi-tower computation on each GPU.\r\n*Current state*:\r\nCurrent `tf.contrib.distribute.MirroredStrategy`'s design is one GPU one tower. It does not support mult-tower on one GPU. It has args `devices`, `num_gpus`, `num_gpus_per_worker`, `cross_tower_ops`, `prefetch_on_device`, `auto_shard_dataset`. We can only set the number of GPUs, and the mirrored strategy will assign one tower to each GPU.\r\n\r\n**Will this change the current api? How?**\r\nYes. It will add a new argument like `num_towers_per_gpu` to `tf.contrib.distribute.MirroredStrategy`.\r\n\r\n**Who will benefit with this feature?**\r\nThis feature can make it available to assign multiple towers on each GPU. It can maximize GPU utilization.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24594", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24594/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24594/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24594/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24594", "id": 394327177, "node_id": "MDU6SXNzdWUzOTQzMjcxNzc=", "number": 24594, "title": "tensorflow parameter server start with no worker_hosts specific in  cluster def", "user": {"login": "piaoyats", "id": 20469564, "node_id": "MDQ6VXNlcjIwNDY5NTY0", "avatar_url": "https://avatars2.githubusercontent.com/u/20469564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/piaoyats", "html_url": "https://github.com/piaoyats", "followers_url": "https://api.github.com/users/piaoyats/followers", "following_url": "https://api.github.com/users/piaoyats/following{/other_user}", "gists_url": "https://api.github.com/users/piaoyats/gists{/gist_id}", "starred_url": "https://api.github.com/users/piaoyats/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/piaoyats/subscriptions", "organizations_url": "https://api.github.com/users/piaoyats/orgs", "repos_url": "https://api.github.com/users/piaoyats/repos", "events_url": "https://api.github.com/users/piaoyats/events{/privacy}", "received_events_url": "https://api.github.com/users/piaoyats/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 736653459, "node_id": "MDU6TGFiZWw3MzY2NTM0NTk=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:eager", "name": "comp:eager", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "saeta", "id": 1284535, "node_id": "MDQ6VXNlcjEyODQ1MzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1284535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saeta", "html_url": "https://github.com/saeta", "followers_url": "https://api.github.com/users/saeta/followers", "following_url": "https://api.github.com/users/saeta/following{/other_user}", "gists_url": "https://api.github.com/users/saeta/gists{/gist_id}", "starred_url": "https://api.github.com/users/saeta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saeta/subscriptions", "organizations_url": "https://api.github.com/users/saeta/orgs", "repos_url": "https://api.github.com/users/saeta/repos", "events_url": "https://api.github.com/users/saeta/events{/privacy}", "received_events_url": "https://api.github.com/users/saeta/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "saeta", "id": 1284535, "node_id": "MDQ6VXNlcjEyODQ1MzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1284535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saeta", "html_url": "https://github.com/saeta", "followers_url": "https://api.github.com/users/saeta/followers", "following_url": "https://api.github.com/users/saeta/following{/other_user}", "gists_url": "https://api.github.com/users/saeta/gists{/gist_id}", "starred_url": "https://api.github.com/users/saeta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saeta/subscriptions", "organizations_url": "https://api.github.com/users/saeta/orgs", "repos_url": "https://api.github.com/users/saeta/repos", "events_url": "https://api.github.com/users/saeta/events{/privacy}", "received_events_url": "https://api.github.com/users/saeta/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-12-27T08:15:21Z", "updated_at": "2019-01-31T00:47:02Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (1.8.0):\r\n- Are you willing to contribute it (Yes):\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nI'm setting up a distributed tensorflow with ps and worker. Currently tf.train.Server must accept a ClusterDef to define the total cluster before program start.\r\n\r\nIf I only use ps to store and update variables, use worker to train. Why PS must need to know the worker hosts addrs before it starts.\r\n\r\nSuppose I want to setup 1 ps and 2 worker, the cluster_def shows below\r\n\r\nFor PS:\r\n\r\n```\r\n  cluster = tf.train.ClusterSpec({'ps': {0: 'ps0:2222'}})\r\n```\r\nFor worker0:\r\n\r\n```\r\n  cluster = tf.train.ClusterSpec({'ps': {0: 'ps0:2222'}, 'worker': {0: 'localhost:0'}})\r\n```\r\nFor worker1:\r\n\r\n```\r\n cluster = tf.train.ClusterSpec({'ps': {0: 'ps0:2222'}, 'worker': {1: 'localhost:0'}})\r\n```\r\nI don't need to communicate between worker1 and worker0, If i config this, PS and worker can start, but when call sess.run with train_op ,the following fault will cause:\r\n\r\n```\r\ntensorflow.python.framework.errors_impl.InternalError: No worker known as \r\n/job:worker/replica:0/task:0\r\n     [[Node: gradients/LinearRegression/xw_plus_b_grad/BiasAddGrad_S29 = _Recv[client_terminated=false, recv_device=\"/job:ps/replica:0/task:0/device:CPU:0\", send_device=\"/job:worker/replica:0/task:0/device:CPU:0\", send_device_incarnation=-801089107413104296, tensor_name=\"edge_78_gradients/LinearRegression/xw_plus_b_grad/BiasAddGrad\", tensor_type=DT_FLOAT, _device=\"/job:ps/replica:0/task:0/device:CPU:0\"]()]]\r\n```\r\n\r\nSeem when GrpcServer::Init, PS did not know any worker info, its channel_cache is empty, RpcRemoteRendezvous::RecvFromRemoteAsync can not find Worker channel and throw errors. The interesting is worker can connect to ps to fetch variable for forward computing.\r\n\r\nI don't know if we have any plan to support this usage. I don't know whether the error here is a bug or by-design?\r\n\r\n**Will this change the current api? How?**\r\nNo\r\n**Who will benefit with this feature?**\r\nWe want to when any worker host crash, we can re-launch another worker to continue train, but the new worker may change ip and port. In this case, If we support this feature, we can do worker FO simply\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24582", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24582/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24582/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24582/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24582", "id": 394204299, "node_id": "MDU6SXNzdWUzOTQyMDQyOTk=", "number": 24582, "title": "TF Identity - SparseTensor - Not Working", "user": {"login": "DEKHTIARJonathan", "id": 10923599, "node_id": "MDQ6VXNlcjEwOTIzNTk5", "avatar_url": "https://avatars2.githubusercontent.com/u/10923599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DEKHTIARJonathan", "html_url": "https://github.com/DEKHTIARJonathan", "followers_url": "https://api.github.com/users/DEKHTIARJonathan/followers", "following_url": "https://api.github.com/users/DEKHTIARJonathan/following{/other_user}", "gists_url": "https://api.github.com/users/DEKHTIARJonathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/DEKHTIARJonathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DEKHTIARJonathan/subscriptions", "organizations_url": "https://api.github.com/users/DEKHTIARJonathan/orgs", "repos_url": "https://api.github.com/users/DEKHTIARJonathan/repos", "events_url": "https://api.github.com/users/DEKHTIARJonathan/events{/privacy}", "received_events_url": "https://api.github.com/users/DEKHTIARJonathan/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2018-12-26T16:55:58Z", "updated_at": "2019-11-08T21:17:30Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "`tf.identity` seems to be not working with SparseTensor. This is a problem, because it makes quite impossible to use them with `tf.control_dependencies`.\r\n\r\nBelow a very simple example:\r\n\r\n```python\r\nimport tensorflow as tf\r\n\r\na = tf.SparseTensor([[0,0]], [0], [800, 256])\r\n\r\nprint_op = tf.print(\"Hello world\")\r\n\r\nwith tf.control_dependencies([print_op]):\r\n    a = tf.identity(a)\r\n```\r\n\r\n```python\r\nTypeError: Failed to convert object of type <class 'tensorflow.python.framework.sparse_tensor.SparseTensor'> to Tensor. Contents: SparseTensor(indices=Tensor(\"SparseTensor_5/indices:0\", shape=(1, 2), dtype=int64), values=Tensor(\"SparseTensor_5/values:0\", shape=(1,), dtype=int32), dense_shape=Tensor(\"SparseTensor_5/dense_shape:0\", shape=(2,), dtype=int64)). Consider casting elements to a supported type.\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24575", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24575/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24575/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24575/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24575", "id": 394140048, "node_id": "MDU6SXNzdWUzOTQxNDAwNDg=", "number": 24575, "title": "[Performance] Unnecessary 'memcpy' in Gather Op", "user": {"login": "candyzone", "id": 7778833, "node_id": "MDQ6VXNlcjc3Nzg4MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/7778833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/candyzone", "html_url": "https://github.com/candyzone", "followers_url": "https://api.github.com/users/candyzone/followers", "following_url": "https://api.github.com/users/candyzone/following{/other_user}", "gists_url": "https://api.github.com/users/candyzone/gists{/gist_id}", "starred_url": "https://api.github.com/users/candyzone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/candyzone/subscriptions", "organizations_url": "https://api.github.com/users/candyzone/orgs", "repos_url": "https://api.github.com/users/candyzone/repos", "events_url": "https://api.github.com/users/candyzone/events{/privacy}", "received_events_url": "https://api.github.com/users/candyzone/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}], "state": "open", "locked": false, "assignee": {"login": "saeta", "id": 1284535, "node_id": "MDQ6VXNlcjEyODQ1MzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1284535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saeta", "html_url": "https://github.com/saeta", "followers_url": "https://api.github.com/users/saeta/followers", "following_url": "https://api.github.com/users/saeta/following{/other_user}", "gists_url": "https://api.github.com/users/saeta/gists{/gist_id}", "starred_url": "https://api.github.com/users/saeta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saeta/subscriptions", "organizations_url": "https://api.github.com/users/saeta/orgs", "repos_url": "https://api.github.com/users/saeta/repos", "events_url": "https://api.github.com/users/saeta/events{/privacy}", "received_events_url": "https://api.github.com/users/saeta/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "saeta", "id": 1284535, "node_id": "MDQ6VXNlcjEyODQ1MzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1284535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saeta", "html_url": "https://github.com/saeta", "followers_url": "https://api.github.com/users/saeta/followers", "following_url": "https://api.github.com/users/saeta/following{/other_user}", "gists_url": "https://api.github.com/users/saeta/gists{/gist_id}", "starred_url": "https://api.github.com/users/saeta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saeta/subscriptions", "organizations_url": "https://api.github.com/users/saeta/orgs", "repos_url": "https://api.github.com/users/saeta/repos", "events_url": "https://api.github.com/users/saeta/events{/privacy}", "received_events_url": "https://api.github.com/users/saeta/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-12-26T10:42:55Z", "updated_at": "2019-01-07T03:52:30Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**Describe the current behavior**\r\nIn distributed mode, user define a Graph, 'distribute_runtime' partition graph, register graph, and then run graph, For example as below.\r\n![image](https://user-images.githubusercontent.com/7778833/50445822-3140b700-094c-11e9-8d5e-78418403836f.png)\r\nps: Gather Op generates a new Tensor (allocation and **memcpy**), Send Op put the Tensor to local Rendezvous's table.\r\nworker: Recv Op triggers GRPC RecvTensorResponse method via remote Rendezvous, calls EncodeTensorToByteBuffer(https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/distributed_runtime/rpc/grpc_tensor_coding.cc), if DataTypeCanUseMemcpy==true, encodes tensor with wire format instead of TensorProto serialization. in this case, TensorEncoding doesn't depend on a continuous memory(Gather Op output Tensor)\r\n\r\n**Describe the expected behavior**\r\nWhen Gather Op -> Send Op and Tensor's dtype is simple type, Gather Op's output is a 'IndexedTensor' without memcpy. The 'IndexedTensor' contains some offsets of IDs and a RefCounted TensorBuffer. In GRPC ZeroCopyStream, send the list<pair<pointer, length>> by grpc::Slice.\r\nPerformance: reduce a memcpy\r\nSame optimization can apply to other Op, such as: Concat Op, Slice Op ...\r\n\r\n**Other info**\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24571", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24571/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24571/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24571/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24571", "id": 394129834, "node_id": "MDU6SXNzdWUzOTQxMjk4MzQ=", "number": 24571, "title": "Request for function argument for tf.device in eager mode", "user": {"login": "nikhil-dev", "id": 2402487, "node_id": "MDQ6VXNlcjI0MDI0ODc=", "avatar_url": "https://avatars3.githubusercontent.com/u/2402487?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikhil-dev", "html_url": "https://github.com/nikhil-dev", "followers_url": "https://api.github.com/users/nikhil-dev/followers", "following_url": "https://api.github.com/users/nikhil-dev/following{/other_user}", "gists_url": "https://api.github.com/users/nikhil-dev/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikhil-dev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikhil-dev/subscriptions", "organizations_url": "https://api.github.com/users/nikhil-dev/orgs", "repos_url": "https://api.github.com/users/nikhil-dev/repos", "events_url": "https://api.github.com/users/nikhil-dev/events{/privacy}", "received_events_url": "https://api.github.com/users/nikhil-dev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "asimshankar", "id": 16018, "node_id": "MDQ6VXNlcjE2MDE4", "avatar_url": "https://avatars2.githubusercontent.com/u/16018?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asimshankar", "html_url": "https://github.com/asimshankar", "followers_url": "https://api.github.com/users/asimshankar/followers", "following_url": "https://api.github.com/users/asimshankar/following{/other_user}", "gists_url": "https://api.github.com/users/asimshankar/gists{/gist_id}", "starred_url": "https://api.github.com/users/asimshankar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asimshankar/subscriptions", "organizations_url": "https://api.github.com/users/asimshankar/orgs", "repos_url": "https://api.github.com/users/asimshankar/repos", "events_url": "https://api.github.com/users/asimshankar/events{/privacy}", "received_events_url": "https://api.github.com/users/asimshankar/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2018-12-26T09:50:22Z", "updated_at": "2019-01-15T12:45:38Z", "closed_at": null, "author_association": "NONE", "body": "\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No custom code.\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 16.04\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: N/A\r\n- **TensorFlow installed from (source or binary)**: Using pip install.\r\n- **TensorFlow version (use command below)**: 1.12\r\n- **Python version**: 2.7.6\r\n- **Bazel version (if compiling from source)**: N/A\r\n- **GCC/Compiler version (if compiling from source)**: N/A\r\n- **CUDA/cuDNN version**: N/A\r\n- **GPU model and memory**: N/A\r\n- **Exact command to reproduce**: N/A\r\n\r\n\r\n### Describe the problem\r\nIn graph mode, `tf.device()` accepts either a device specifier or a function that specifies ops that should run on a specific device. However in eager mode, there's no ability to pass in a function.\r\n\r\nIt's marked as a todo in the code base, so might be in the pipeline but I'd love to know if there's a rough time estimate/anything in the works?\r\n### Source code / logs\r\nHere's the place in the codebase where its marked as a TODO:\r\nhttps://github.com/tensorflow/tensorflow/blob/a6d8ffae097d0132989ae4688d224121ec6d8f35/tensorflow/python/framework/ops.py#L4928"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24561", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24561/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24561/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24561/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24561", "id": 394017924, "node_id": "MDU6SXNzdWUzOTQwMTc5MjQ=", "number": 24561, "title": " Tensorflow c++ compile error on linux collect2: error: ld returned 1 exit status", "user": {"login": "95xueqian", "id": 23287686, "node_id": "MDQ6VXNlcjIzMjg3Njg2", "avatar_url": "https://avatars1.githubusercontent.com/u/23287686?v=4", "gravatar_id": "", "url": "https://api.github.com/users/95xueqian", "html_url": "https://github.com/95xueqian", "followers_url": "https://api.github.com/users/95xueqian/followers", "following_url": "https://api.github.com/users/95xueqian/following{/other_user}", "gists_url": "https://api.github.com/users/95xueqian/gists{/gist_id}", "starred_url": "https://api.github.com/users/95xueqian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/95xueqian/subscriptions", "organizations_url": "https://api.github.com/users/95xueqian/orgs", "repos_url": "https://api.github.com/users/95xueqian/repos", "events_url": "https://api.github.com/users/95xueqian/events{/privacy}", "received_events_url": "https://api.github.com/users/95xueqian/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-12-25T12:57:26Z", "updated_at": "2019-02-15T06:53:04Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nLinux Ubuntu 16.04\r\n- TensorFlow installed from (source or binary):\r\nsource\r\n- TensorFlow version:\r\nr1.8\r\n- Installed using :\r\nbazel 0.16.1\r\n- GCC/Compiler version (if compiling from source):\r\n5.4.0\r\n- CUDA/cuDNN version:\r\n9.0 / 7.4.2\r\n- GPU model and memory:\r\nGPU\r\n**Describe the problem**\r\n\r\ncompile TensorFlow C++ \r\nbazel build --config=monolithic tensorflow:libtensorflow_cc.so\r\nuse \r\ng++ -std=c++11 -o tf_example \\\r\n-I/usr/local/include/tf \\\r\n-I/usr/local/include/eigen3 \\\r\n-g -Wall -D_DEBUG -Wshadow -Wno-sign-compare -w  \\\r\n-L/usr/local/lib/libtensorflow_cc \\\r\n`pkg-config --cflags --libs protobuf` -ltensorflow_cc test.cpp\r\n\r\nto run test.cpp \r\nhave error \uff1a\r\n/tmp/ccPa2mDH.o: In function `main':\r\n/usr/Data/newdataset/mask-rcnn/tf_c/tensorflow-1.8.0/test.cpp:9: undefined reference to `tensorflow::Scope::NewRootScope()'\r\n/usr/Data/newdataset/mask-rcnn/tf_c/tensorflow-1.8.0/test.cpp:11: undefined reference to `tensorflow::Input::Initializer::Initializer(std::initializer_list<tensorflow::Input::Initializer> const&)'\r\n/usr/Data/newdataset/mask-rcnn/tf_c/tensorflow-1.8.0/test.cpp:11: undefined reference to `tensorflow::ops::Const(tensorflow::Scope const&, tensorflow::Input::Initializer const&)'\r\n/usr/Data/newdataset/mask-rcnn/tf_c/tensorflow-1.8.0/test.cpp:13: undefined reference to `tensorflow::Input::Initializer::Initializer(std::initializer_list<tensorflow::Input::Initializer> const&)'\r\n/usr/Data/newdataset/mask-rcnn/tf_c/tensorflow-1.8.0/test.cpp:13: undefined reference to `tensorflow::ops::Const(tensorflow::Scope const&, tensorflow::Input::Initializer const&)'\r\n/usr/Data/newdataset/mask-rcnn/tf_c/tensorflow-1.8.0/test.cpp:15: undefined reference to `tensorflow::Scope::WithOpName(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const'\r\n/usr/Data/newdataset/mask-rcnn/tf_c/tensorflow-1.8.0/test.cpp:15: undefined reference to `tensorflow::ops::MatMul::MatMul(tensorflow::Scope const&, tensorflow::Input, tensorflow::Input, tensorflow::ops::MatMul::Attrs const&)'\r\n/usr/Data/newdataset/mask-rcnn/tf_c/tensorflow-1.8.0/test.cpp:15: undefined reference to `tensorflow::Scope::~Scope()'\r\n/usr/Data/newdataset/mask-rcnn/tf_c/tensorflow-1.8.0/test.cpp:17: undefined reference to `tensorflow::ClientSession::ClientSession(tensorflow::Scope const&)'\r\n/usr/Data/newdataset/mask-rcnn/tf_c/tensorflow-1.8.0/test.cpp:19: undefined reference to `tensorflow::ClientSession::Run(std::vector<tensorflow::Output, std::allocator<tensorflow::Output> > const&, std::vector<tensorflow::Tensor, std::allocator<tensorflow::Tensor> >*) const'\r\n/usr/Data/newdataset/mask-rcnn/tf_c/tensorflow-1.8.0/test.cpp:19: undefined reference to `tensorflow::internal::LogMessageFatal::LogMessageFatal(char const*, int)'\r\n/usr/Data/newdataset/mask-rcnn/tf_c/tensorflow-1.8.0/test.cpp:19: undefined reference to `tensorflow::internal::LogMessageFatal::~LogMessageFatal()'\r\n/usr/Data/newdataset/mask-rcnn/tf_c/tensorflow-1.8.0/test.cpp:21: undefined reference to `tensorflow::internal::LogMessage::LogMessage(char const*, int, int)'\r\n/usr/Data/newdataset/mask-rcnn/tf_c/tensorflow-1.8.0/test.cpp:21: undefined reference to `tensorflow::internal::LogMessage::~LogMessage()'\r\n/usr/Data/newdataset/mask-rcnn/tf_c/tensorflow-1.8.0/test.cpp:17: undefined reference to `tensorflow::ClientSession::~ClientSession()'\r\n/usr/Data/newdataset/mask-rcnn/tf_c/tensorflow-1.8.0/test.cpp:9: undefined reference to `tensorflow::Scope::~Scope()'\r\n/usr/Data/newdataset/mask-rcnn/tf_c/tensorflow-1.8.0/test.cpp:13: undefined reference to `tensorflow::Scope::~Scope()'\r\n/usr/Data/newdataset/mask-rcnn/tf_c/tensorflow-1.8.0/test.cpp:19: undefined reference to `tensorflow::internal::LogMessageFatal::~LogMessageFatal()'\r\n/usr/Data/newdataset/mask-rcnn/tf_c/tensorflow-1.8.0/test.cpp:21: undefined reference to `tensorflow::internal::LogMessage::~LogMessage()'\r\n/usr/Data/newdataset/mask-rcnn/tf_c/tensorflow-1.8.0/test.cpp:17: undefined reference to `tensorflow::ClientSession::~ClientSession()'\r\n/usr/Data/newdataset/mask-rcnn/tf_c/tensorflow-1.8.0/test.cpp:9: undefined reference to `tensorflow::Scope::~Scope()'\r\n/tmp/ccPa2mDH.o: In function `tensorflow::TfCheckOpHelper[abi:cxx11](tensorflow::Status, char const*)':\r\n/usr/local/include/tf/tensorflow/core/lib/core/status.h:127: undefined reference to `tensorflow::TfCheckOpHelperOutOfLine[abi:cxx11](tensorflow::Status const&, char const*)'\r\n/tmp/ccPa2mDH.o: In function `tensorflow::TensorShapeRep::~TensorShapeRep()':\r\n/usr/local/include/tf/tensorflow/core/framework/tensor_shape.h:510: undefined reference to `tensorflow::TensorShapeRep::DestructorOutOfLine()'\r\n/tmp/ccPa2mDH.o: In function `tensorflow::core::RefCounted::~RefCounted()':\r\n/usr/local/include/tf/tensorflow/core/lib/core/refcount.h:79: undefined reference to `tensorflow::internal::LogMessageFatal::LogMessageFatal(char const*, int)'\r\n/usr/local/include/tf/tensorflow/core/lib/core/refcount.h:79: undefined reference to `tensorflow::internal::LogMessageFatal::~LogMessageFatal()'\r\n/tmp/ccPa2mDH.o: In function `tensorflow::Tensor::operator=(tensorflow::Tensor const&)':\r\n/usr/local/include/tf/tensorflow/core/framework/tensor.h:170: undefined reference to `tensorflow::Tensor::CopyFromInternal(tensorflow::Tensor const&, tensorflow::TensorShape const&)'\r\n/tmp/ccPa2mDH.o: In function `tensorflow::Input::Input(tensorflow::Output const&)':\r\n/usr/local/include/tf/tensorflow/cc/framework/ops.h:204: undefined reference to `tensorflow::Tensor::Tensor()'\r\n/usr/local/include/tf/tensorflow/cc/framework/ops.h:204: undefined reference to `tensorflow::Tensor::~Tensor()'\r\n/tmp/ccPa2mDH.o: In function `tensorflow::Input::Initializer::~Initializer()':\r\n/usr/local/include/tf/tensorflow/cc/framework/ops.h:105: undefined reference to `tensorflow::Tensor::~Tensor()'\r\n/tmp/ccPa2mDH.o: In function `tensorflow::Input::~Input()':\r\n/usr/local/include/tf/tensorflow/cc/framework/ops.h:97: undefined reference to `tensorflow::Tensor::~Tensor()'\r\n/tmp/ccPa2mDH.o: In function `tensorflow::TensorShape::TensorShape(std::initializer_list<long long>)':\r\n/usr/local/include/tf/tensorflow/core/framework/tensor_shape.h:291: undefined reference to `tensorflow::TensorShapeBase<tensorflow::TensorShape>::TensorShapeBase(std::initializer_list<long long>)'\r\n/tmp/ccPa2mDH.o: In function `tensorflow::Input::Initializer::Initializer<float, void>(std::initializer_list<float> const&)':\r\n/usr/local/include/tf/tensorflow/cc/framework/ops.h:138: undefined reference to `tensorflow::Tensor::Tensor()'\r\n/usr/local/include/tf/tensorflow/cc/framework/ops.h:141: undefined reference to `tensorflow::Tensor::Tensor(tensorflow::DataType, tensorflow::TensorShape const&)'\r\n/usr/local/include/tf/tensorflow/cc/framework/ops.h:141: undefined reference to `tensorflow::Tensor::~Tensor()'\r\n/usr/local/include/tf/tensorflow/cc/framework/ops.h:141: undefined reference to `tensorflow::Tensor::~Tensor()'\r\n/usr/local/include/tf/tensorflow/cc/framework/ops.h:138: undefined reference to `tensorflow::Tensor::~Tensor()'\r\n/tmp/ccPa2mDH.o: In function `std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >* tensorflow::internal::MakeCheckOpString<unsigned long, unsigned long>(unsigned long const&, unsigned long const&, char const*)':\r\n/usr/local/include/tf/tensorflow/core/platform/default/logging.h:184: undefined reference to `tensorflow::internal::CheckOpMessageBuilder::CheckOpMessageBuilder(char const*)'\r\n/usr/local/include/tf/tensorflow/core/platform/default/logging.h:186: undefined reference to `tensorflow::internal::CheckOpMessageBuilder::ForVar2()'\r\n/usr/local/include/tf/tensorflow/core/platform/default/logging.h:187: undefined reference to `tensorflow::internal::CheckOpMessageBuilder::NewString[abi:cxx11]()'\r\n/usr/local/include/tf/tensorflow/core/platform/default/logging.h:184: undefined reference to `tensorflow::internal::CheckOpMessageBuilder::~CheckOpMessageBuilder()'\r\n/usr/local/include/tf/tensorflow/core/platform/default/logging.h:184: undefined reference to `tensorflow::internal::CheckOpMessageBuilder::~CheckOpMessageBuilder()'\r\n/tmp/ccPa2mDH.o: In function `std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >* tensorflow::internal::MakeCheckOpString<long, int>(long const&, int const&, char const*)':\r\n/usr/local/include/tf/tensorflow/core/platform/default/logging.h:184: undefined reference to `tensorflow::internal::CheckOpMessageBuilder::CheckOpMessageBuilder(char const*)'\r\n/usr/local/include/tf/tensorflow/core/platform/default/logging.h:186: undefined reference to `tensorflow::internal::CheckOpMessageBuilder::ForVar2()'\r\n/usr/local/include/tf/tensorflow/core/platform/default/logging.h:187: undefined reference to `tensorflow::internal::CheckOpMessageBuilder::NewString[abi:cxx11]()'\r\n/usr/local/include/tf/tensorflow/core/platform/default/logging.h:184: undefined reference to `tensorflow::internal::CheckOpMessageBuilder::~CheckOpMessageBuilder()'\r\n/usr/local/include/tf/tensorflow/core/platform/default/logging.h:184: undefined reference to `tensorflow::internal::CheckOpMessageBuilder::~CheckOpMessageBuilder()'\r\n/tmp/ccPa2mDH.o: In function `tensorflow::TTypes<float, 2ul, long>::Tensor tensorflow::Tensor::tensor<float, 2ul>()':\r\n/usr/local/include/tf/tensorflow/core/framework/tensor.h:569: undefined reference to `tensorflow::Tensor::CheckTypeAndIsAligned(tensorflow::DataType) const'\r\n/tmp/ccPa2mDH.o: In function `tensorflow::TTypes<float, 1ul, long>::Tensor tensorflow::Tensor::shaped<float, 1ul>(tensorflow::gtl::ArraySlice<long long>)':\r\n/usr/local/include/tf/tensorflow/core/framework/tensor.h:666: undefined reference to `tensorflow::Tensor::CheckTypeAndIsAligned(tensorflow::DataType) const'\r\n/tmp/ccPa2mDH.o: In function `Eigen::DSizes<long, 2> tensorflow::TensorShape::AsEigenDSizes<2>() const':\r\n/usr/local/include/tf/tensorflow/core/framework/tensor_shape.h:463: undefined reference to `tensorflow::TensorShape::CheckDimsEqual(int) const'\r\n/tmp/ccPa2mDH.o: In function `void tensorflow::Tensor::FillDimsAndValidateCompatibleShape<1ul>(tensorflow::gtl::ArraySlice<long long>, std::array<long, 1ul>*) const':\r\n/usr/local/include/tf/tensorflow/core/framework/tensor.h:630: undefined reference to `tensorflow::internal::LogMessageFatal::LogMessageFatal(char const*, int)'\r\n/usr/local/include/tf/tensorflow/core/framework/tensor.h:630: undefined reference to `tensorflow::internal::LogMessageFatal::~LogMessageFatal()'\r\n/usr/local/include/tf/tensorflow/core/framework/tensor.h:636: undefined reference to `tensorflow::internal::LogMessageFatal::LogMessageFatal(char const*, int)'\r\n/usr/local/include/tf/tensorflow/core/framework/tensor.h:636: undefined reference to `tensorflow::internal::LogMessageFatal::~LogMessageFatal()'\r\n/usr/local/include/tf/tensorflow/core/framework/tensor.h:630: undefined reference to `tensorflow::internal::LogMessageFatal::~LogMessageFatal()'\r\n/usr/local/include/tf/tensorflow/core/framework/tensor.h:636: undefined reference to `tensorflow::internal::LogMessageFatal::~LogMessageFatal()'\r\n/tmp/ccPa2mDH.o: In function `Eigen::DSizes<long, 2> tensorflow::TensorShape::AsEigenDSizesWithPadding<2>() const':\r\n/usr/local/include/tf/tensorflow/core/framework/tensor_shape.h:470: undefined reference to `tensorflow::TensorShape::CheckDimsAtLeast(int) const'\r\n/usr/local/include/tf/tensorflow/core/framework/tensor_shape.h:473: undefined reference to `tensorflow::TensorShapeBase<tensorflow::TensorShape>::dims() const'\r\n/usr/local/include/tf/tensorflow/core/framework/tensor_shape.h:474: undefined reference to `tensorflow::TensorShapeBase<tensorflow::TensorShape>::dim_size(int) const'\r\n/usr/local/include/tf/tensorflow/core/framework/tensor_shape.h:476: undefined reference to `tensorflow::TensorShapeBase<tensorflow::TensorShape>::dims() const'\r\n/tmp/ccPa2mDH.o: In function `void std::_Destroy<tensorflow::Tensor>(tensorflow::Tensor*)':\r\n/usr/include/c++/5/bits/stl_construct.h:93: undefined reference to `tensorflow::Tensor::~Tensor()'\r\n/tmp/ccPa2mDH.o: In function `std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >* tensorflow::internal::MakeCheckOpString<long long, long long>(long long const&, long long const&, char const*)':\r\n/usr/local/include/tf/tensorflow/core/platform/default/logging.h:184: undefined reference to `tensorflow::internal::CheckOpMessageBuilder::CheckOpMessageBuilder(char const*)'\r\n/usr/local/include/tf/tensorflow/core/platform/default/logging.h:186: undefined reference to `tensorflow::internal::CheckOpMessageBuilder::ForVar2()'\r\n/usr/local/include/tf/tensorflow/core/platform/default/logging.h:187: undefined reference to `tensorflow::internal::CheckOpMessageBuilder::NewString[abi:cxx11]()'\r\n/usr/local/include/tf/tensorflow/core/platform/default/logging.h:184: undefined reference to `tensorflow::internal::CheckOpMessageBuilder::~CheckOpMessageBuilder()'\r\n/usr/local/include/tf/tensorflow/core/platform/default/logging.h:184: undefined reference to `tensorflow::internal::CheckOpMessageBuilder::~CheckOpMessageBuilder()'\r\ncollect2: error: ld returned 1 exit status\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24559", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24559/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24559/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24559/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24559", "id": 393997973, "node_id": "MDU6SXNzdWUzOTM5OTc5NzM=", "number": 24559, "title": "[Perfomance]Dilated/Atrous Conv implementation with cudnn", "user": {"login": "MlWoo", "id": 20226293, "node_id": "MDQ6VXNlcjIwMjI2Mjkz", "avatar_url": "https://avatars2.githubusercontent.com/u/20226293?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MlWoo", "html_url": "https://github.com/MlWoo", "followers_url": "https://api.github.com/users/MlWoo/followers", "following_url": "https://api.github.com/users/MlWoo/following{/other_user}", "gists_url": "https://api.github.com/users/MlWoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/MlWoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MlWoo/subscriptions", "organizations_url": "https://api.github.com/users/MlWoo/orgs", "repos_url": "https://api.github.com/users/MlWoo/repos", "events_url": "https://api.github.com/users/MlWoo/events{/privacy}", "received_events_url": "https://api.github.com/users/MlWoo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "reedwm", "id": 6510203, "node_id": "MDQ6VXNlcjY1MTAyMDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6510203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reedwm", "html_url": "https://github.com/reedwm", "followers_url": "https://api.github.com/users/reedwm/followers", "following_url": "https://api.github.com/users/reedwm/following{/other_user}", "gists_url": "https://api.github.com/users/reedwm/gists{/gist_id}", "starred_url": "https://api.github.com/users/reedwm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reedwm/subscriptions", "organizations_url": "https://api.github.com/users/reedwm/orgs", "repos_url": "https://api.github.com/users/reedwm/repos", "events_url": "https://api.github.com/users/reedwm/events{/privacy}", "received_events_url": "https://api.github.com/users/reedwm/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "reedwm", "id": 6510203, "node_id": "MDQ6VXNlcjY1MTAyMDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6510203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reedwm", "html_url": "https://github.com/reedwm", "followers_url": "https://api.github.com/users/reedwm/followers", "following_url": "https://api.github.com/users/reedwm/following{/other_user}", "gists_url": "https://api.github.com/users/reedwm/gists{/gist_id}", "starred_url": "https://api.github.com/users/reedwm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reedwm/subscriptions", "organizations_url": "https://api.github.com/users/reedwm/orgs", "repos_url": "https://api.github.com/users/reedwm/repos", "events_url": "https://api.github.com/users/reedwm/events{/privacy}", "received_events_url": "https://api.github.com/users/reedwm/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-12-25T09:56:17Z", "updated_at": "2019-12-09T18:46:19Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (TF 1.12.0):\r\n- Are you willing to contribute it (Yes):\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nThe [doc](https://www.tensorflow.org/api_docs/python/tf/nn/atrous_conv2d) and the [code](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/nn_ops.py#L947) shows that dilated conv is implemented with traival ops(space_to_batch->regular conv->batch_to_space in python level. And the python code does not pass dilations parameters to lower level code. However both the registered [dilated conv ops](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/ops/nn_ops.cc#L265), [gpu code](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/stream_executor/cuda/cuda_dnn.cc#L2901) and [cpu code](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/eigen_spatial_convolutions.h#L1568) are ready to handle with dilatied conv. It is easy to implement dialted conv with cudnn by modifying the python level code.\r\n\r\n**Will this change the current api? How?**\r\nNO.\r\n\r\n**Who will benefit with this feature?**\r\nwho deploy the model which has dilated conv\r\n\r\n**Any Other info.**\r\ntime of my model reduces from 350ms to 216ms on 1080ti.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24539", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24539/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24539/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24539/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24539", "id": 393805371, "node_id": "MDU6SXNzdWUzOTM4MDUzNzE=", "number": 24539, "title": "[feature request] make MutableHashTableOfScalars and MutableHashTableOfTensors trainable", "user": {"login": "shengofsun", "id": 1041832, "node_id": "MDQ6VXNlcjEwNDE4MzI=", "avatar_url": "https://avatars0.githubusercontent.com/u/1041832?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shengofsun", "html_url": "https://github.com/shengofsun", "followers_url": "https://api.github.com/users/shengofsun/followers", "following_url": "https://api.github.com/users/shengofsun/following{/other_user}", "gists_url": "https://api.github.com/users/shengofsun/gists{/gist_id}", "starred_url": "https://api.github.com/users/shengofsun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shengofsun/subscriptions", "organizations_url": "https://api.github.com/users/shengofsun/orgs", "repos_url": "https://api.github.com/users/shengofsun/repos", "events_url": "https://api.github.com/users/shengofsun/events{/privacy}", "received_events_url": "https://api.github.com/users/shengofsun/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2018-12-24T03:55:55Z", "updated_at": "2019-09-01T02:45:28Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- TensorFlow version (you are using): 1.12\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nThis issue is related to issue #19324, in which we need some technique to do embedding on a large sparse hash table, so that we can reduce memory usage and the probability of hash collision.\r\n\r\nAs far as I can see, ops like MutableHashTableOfScalars and MutableHashTableOfTensors in [lookup table ops](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/ops/lookup_ops.cc) can be used to meet this demand. The main problem is that they are not trainable. \r\n\r\nIn other words, what we need may be a feature like this:\r\n```\r\n# define a Hash Table\r\ntable = tf.contrib.lookup.MutableHashTable(\r\n    key_dtype=tf.string,\r\n    value_dtype=tf.float64,\r\n    default_value=-1)\r\nparams = table.lookup([\"w1\", \"w2\", \"b\"])\r\n# define other ops with params\r\n...\r\n# optimize the table\r\ntrain_op = optimizer.minimize(loss, var_list=[table], global_step=global_step)\r\n```\r\n\r\n**Will this change the current api? How?**\r\n\r\nYes, the current API would be changed. \r\n\r\nIn order to implement a feature like this, we may need to:\r\n* do modification on the lookup table ops to make it trainable. This involves several parts of fix like:\r\n   1. some fix in python layer as only variables are trainable now.\r\n   2. several new ops may be add in lookup table so that we can update the gradients. \r\n* modify the api of MutableHashTable, so that we can pass more args, like: \r\n   1. shard it to different parameter servers.\r\n   2. when value for a key doesn't exist, we can initialize it with different initial value.\r\n   3. we can make the KV pairs have TTL.\r\n* add a new API like embedding_lookup_sparse, or do modification on it.\r\n* make sure the checkpoint for hash tables can work properly\r\n\r\n**Who will benefit with this feature?**\r\n\r\nAs a matter of fact, sparse models in recommend system may benefit with this feature a lot.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24528", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24528/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24528/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24528/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24528", "id": 393724898, "node_id": "MDU6SXNzdWUzOTM3MjQ4OTg=", "number": 24528, "title": "matrix_triangular_solve is much slower on GPUs than on CPUs", "user": {"login": "maoshenl", "id": 5102663, "node_id": "MDQ6VXNlcjUxMDI2NjM=", "avatar_url": "https://avatars1.githubusercontent.com/u/5102663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maoshenl", "html_url": "https://github.com/maoshenl", "followers_url": "https://api.github.com/users/maoshenl/followers", "following_url": "https://api.github.com/users/maoshenl/following{/other_user}", "gists_url": "https://api.github.com/users/maoshenl/gists{/gist_id}", "starred_url": "https://api.github.com/users/maoshenl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maoshenl/subscriptions", "organizations_url": "https://api.github.com/users/maoshenl/orgs", "repos_url": "https://api.github.com/users/maoshenl/repos", "events_url": "https://api.github.com/users/maoshenl/events{/privacy}", "received_events_url": "https://api.github.com/users/maoshenl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ezhulenev", "id": 1174378, "node_id": "MDQ6VXNlcjExNzQzNzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1174378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezhulenev", "html_url": "https://github.com/ezhulenev", "followers_url": "https://api.github.com/users/ezhulenev/followers", "following_url": "https://api.github.com/users/ezhulenev/following{/other_user}", "gists_url": "https://api.github.com/users/ezhulenev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezhulenev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezhulenev/subscriptions", "organizations_url": "https://api.github.com/users/ezhulenev/orgs", "repos_url": "https://api.github.com/users/ezhulenev/repos", "events_url": "https://api.github.com/users/ezhulenev/events{/privacy}", "received_events_url": "https://api.github.com/users/ezhulenev/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ezhulenev", "id": 1174378, "node_id": "MDQ6VXNlcjExNzQzNzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1174378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezhulenev", "html_url": "https://github.com/ezhulenev", "followers_url": "https://api.github.com/users/ezhulenev/followers", "following_url": "https://api.github.com/users/ezhulenev/following{/other_user}", "gists_url": "https://api.github.com/users/ezhulenev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezhulenev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezhulenev/subscriptions", "organizations_url": "https://api.github.com/users/ezhulenev/orgs", "repos_url": "https://api.github.com/users/ezhulenev/repos", "events_url": "https://api.github.com/users/ezhulenev/events{/privacy}", "received_events_url": "https://api.github.com/users/ezhulenev/received_events", "type": "User", "site_admin": false}, {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-12-23T05:25:46Z", "updated_at": "2020-01-08T00:33:55Z", "closed_at": null, "author_association": "NONE", "body": "I'm running a fully connected mixture density network. What could be the possible reasons that matrix_triangular_solve routine takes much longer to compute on a GPU than on CPU (27ms vs 0.4ms)? I'm seeing similar behavior across different tensorflow verison (python 2.7), eg.\r\n\r\nCPU: Intel Haswell (E5-2695 v3)\r\nCUDA version: V9.0.176\r\ntenserflow version : 1.7\r\n\r\nGPU: Tesla P100-PCIE-16GB\r\nCUDA version: V10.0.130\r\ntenserflow version: 1.10\r\n\r\n![gpu_timeline](https://user-images.githubusercontent.com/5102663/50380990-de63b880-0648-11e9-82ea-a08051b83a55.png)\r\n![cpu_timeline](https://user-images.githubusercontent.com/5102663/50380991-de63b880-0648-11e9-97f4-6f59249b17e3.png)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24520", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24520/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24520/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24520/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24520", "id": 393686858, "node_id": "MDU6SXNzdWUzOTM2ODY4NTg=", "number": 24520, "title": "\"ValueError: Cannot take the length of Shape with unknown rank\". error when passing tf.data.Dataset tensors to model.fit", "user": {"login": "dineshdharme", "id": 425473, "node_id": "MDQ6VXNlcjQyNTQ3Mw==", "avatar_url": "https://avatars0.githubusercontent.com/u/425473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dineshdharme", "html_url": "https://github.com/dineshdharme", "followers_url": "https://api.github.com/users/dineshdharme/followers", "following_url": "https://api.github.com/users/dineshdharme/following{/other_user}", "gists_url": "https://api.github.com/users/dineshdharme/gists{/gist_id}", "starred_url": "https://api.github.com/users/dineshdharme/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dineshdharme/subscriptions", "organizations_url": "https://api.github.com/users/dineshdharme/orgs", "repos_url": "https://api.github.com/users/dineshdharme/repos", "events_url": "https://api.github.com/users/dineshdharme/events{/privacy}", "received_events_url": "https://api.github.com/users/dineshdharme/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 29, "created_at": "2018-12-22T16:43:03Z", "updated_at": "2020-03-19T12:26:01Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): \"18.04.1 LTS (Bionic Beaver)\"\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: no\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): tf.VERSION = 1.12.0\r\n- Python version: python3.6\r\n- Bazel version (if compiling from source): no\r\n- GCC/Compiler version (if compiling from source): no\r\n- CUDA/cuDNN version: cuda9.0 with cuDNN 7.4.1\r\n- GPU model and memory: GTX 1080 with 8 GB\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\nI am trying to pass the tfrecords read through tf.data.Dataset api into the model.fit .\r\nSince the images could be of different sizes, I am storing the image shapes into tfrecords itself which are \r\nlater on read and applied to the img data using  `tf.reshape` . But the tensorflow.keras is unable to determine the shape of this image data at this stage and throws the error.\r\n\r\n```\r\ndef _parse_function(proto):\r\n    keys_to_features = {\"im_path\": tf.FixedLenSequenceFeature([], tf.string, allow_missing=True),\r\n                        \"im_shape\": tf.FixedLenSequenceFeature([], tf.int64, allow_missing=True),\r\n                        \"im_arr\": tf.FixedLenSequenceFeature([], tf.string, allow_missing=True),\r\n                        \"label\": tf.FixedLenSequenceFeature([], tf.int64, allow_missing=True),\r\n                        }\r\n\r\n    parsed_features = tf.parse_single_example(serialized=proto, features=keys_to_features)\r\n    parsed_features['im_arr'] = parsed_features['im_arr'][0]\r\n    parsed_features['label'] = parsed_features['label'][0]\r\n    parsed_features['im_arr'] = tf.decode_raw(parsed_features['im_arr'], tf.uint8)\r\n    parsed_features['im_arr'] = tf.reshape(parsed_features['im_arr'], parsed_features['im_shape'])\r\n\r\n    return parsed_features['im_arr'], parsed_features['label']\r\n```\r\n\r\n The error thrown is as follows : \r\n\r\n\tTraceback (most recent call last):\r\n\t  File \"issue/IssueScript.py\", line 75, in <module>\r\n\t    verbose=1)\r\n\t  File \"opt/github/example-classification/env/lib/python3.6/site-packages/tensorflow/python/keras/engine/training.py\", line 1536, in fit\r\n\t    validation_split=validation_split)\r\n\t  File \"opt/github/example-classification/env/lib/python3.6/site-packages/tensorflow/python/keras/engine/training.py\", line 992, in _standardize_user_data\r\n\t    class_weight, batch_size)\r\n\t  File \"opt/github/example-classification/env/lib/python3.6/site-packages/tensorflow/python/keras/engine/training.py\", line 1117, in _standardize_weights\r\n\t    exception_prefix='input')\r\n\t  File \"opt/github/example-classification/env/lib/python3.6/site-packages/tensorflow/python/keras/engine/training_utils.py\", line 284, in standardize_input_data\r\n\t    data = [standardize_single_array(x) for x in data]\r\n\t  File \"opt/github/example-classification/env/lib/python3.6/site-packages/tensorflow/python/keras/engine/training_utils.py\", line 284, in <listcomp>\r\n\t    data = [standardize_single_array(x) for x in data]\r\n\t  File \"opt/github/example-classification/env/lib/python3.6/site-packages/tensorflow/python/keras/engine/training_utils.py\", line 218, in standardize_single_array\r\n\t    if x.shape is not None and len(x.shape) == 1:\r\n\t  File \"opt/github/example-classification/env/lib/python3.6/site-packages/tensorflow/python/framework/tensor_shape.py\", line 579, in __len__\r\n\t    raise ValueError(\"Cannot take the length of Shape with unknown rank.\")\r\n\tValueError: Cannot take the length of Shape with unknown rank.\r\n\r\n\r\nSo as a debugging step, I removed the length check present in the `standardize_single_array` function by changing the check as (note the `False and` part which bypasses the length check)\r\n\r\n```def standardize_single_array(x):\r\n  if x is None:\r\n    return None\r\n  if False and (x.shape is not None and len(x.shape) == 1):\r\n    if tensor_util.is_tensor(x):\r\n      return array_ops.expand_dims(x, axis=1)\r\n    else:\r\n      return np.expand_dims(x, 1)\r\n  return x\r\n```\r\nThen I get the following error \r\n\r\n\tTraceback (most recent call last):\r\n\t  File \"issue/IssueScript.py\", line 75, in <module>\r\n\t    verbose=1)\r\n\t  File \"opt/github/example-classification/env/lib/python3.6/site-packages/tensorflow/python/keras/engine/training.py\", line 1536, in fit\r\n\t    validation_split=validation_split)\r\n\t  File \"opt/github/example-classification/env/lib/python3.6/site-packages/tensorflow/python/keras/engine/training.py\", line 992, in _standardize_user_data\r\n\t    class_weight, batch_size)\r\n\t  File \"opt/github/example-classification/env/lib/python3.6/site-packages/tensorflow/python/keras/engine/training.py\", line 1154, in _standardize_weights\r\n\t    exception_prefix='target')\r\n\t  File \"opt/github/example-classification/env/lib/python3.6/site-packages/tensorflow/python/keras/engine/training_utils.py\", line 323, in standardize_input_data\r\n\t    'with shape ' + str(data_shape))\r\n\tValueError: Error when checking target: expected activation_4 to have 2 dimensions, but got array with shape (None,)\r\n\r\n\r\nI did the same with the above error. I removed the check present at line 323 by commenting out the length check as follows.\r\n```\r\n        \"\"\"\r\n        if len(data_shape) != len(shape):\r\n          raise ValueError('Error when checking ' + exception_prefix +\r\n                           ': expected ' + names[i] + ' to have ' +\r\n                           str(len(shape)) + ' dimensions, but got array '\r\n                           'with shape ' + str(data_shape))\r\n        \"\"\"\r\n```\r\nNow the training proceeds smoothly without error. I believe there is issue with tf.reshape when tensors are supplied as a shape to the function.\r\n\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\nCode : https://github.com/dineshdharme/tensorflow-issue1\r\nJust run : `python3 issue/IssueScript.py`\r\n\r\nI have also added a tfrecords generating script `tfrecords_utils.py` which you can call by\r\nTo generate tfrecords file using the image data present in the data folder : \r\n`python3 issue/tfrecords_utils.py`\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24515", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24515/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24515/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24515/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24515", "id": 393636687, "node_id": "MDU6SXNzdWUzOTM2MzY2ODc=", "number": 24515, "title": "tf.count_nonzero not working on TPU", "user": {"login": "kurnianggoro", "id": 4920587, "node_id": "MDQ6VXNlcjQ5MjA1ODc=", "avatar_url": "https://avatars3.githubusercontent.com/u/4920587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kurnianggoro", "html_url": "https://github.com/kurnianggoro", "followers_url": "https://api.github.com/users/kurnianggoro/followers", "following_url": "https://api.github.com/users/kurnianggoro/following{/other_user}", "gists_url": "https://api.github.com/users/kurnianggoro/gists{/gist_id}", "starred_url": "https://api.github.com/users/kurnianggoro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kurnianggoro/subscriptions", "organizations_url": "https://api.github.com/users/kurnianggoro/orgs", "repos_url": "https://api.github.com/users/kurnianggoro/repos", "events_url": "https://api.github.com/users/kurnianggoro/events{/privacy}", "received_events_url": "https://api.github.com/users/kurnianggoro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-12-22T02:49:34Z", "updated_at": "2019-01-28T20:05:20Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): YES\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: Not Tested\r\n- TensorFlow installed from (source or binary): Not sure (google colab)\r\n- TensorFlow version (use command below): 1.12.0\r\n- Python version: 2.7\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 9.2\r\n- GPU model and memory: None (TPU)\r\n\r\n**Describe the current behavior**\r\naccording to the documentation [here](https://cloud.google.com/tpu/docs/tensorflow-ops), tf.count_nonzero is available in TPU, but it returned compilation error when used in TPU.\r\n\r\n```\r\nCompilation failure: While rewriting computation to not contain X64 element types, XLA encountered an HLO for which this rewriting is not implemented: %reduce.124.120 = s64[] reduce(s64[1,4]{1,0} %convert.124.113, s64[] %convert.124.115), dimensions={0,1}, to_apply=%total_example_Sum-reduction119, sharding={maximal device=0}, metadata={op_type=\"Sum\" op_name=\"total_example/Sum\"}\r\n\tTPU compilation failed\r\n```\r\n\r\n**Describe the expected behavior**\r\ntf.count_nonzero is working for TPU\r\n\r\n**Code to reproduce the issue**\r\n[Codes](https://colab.research.google.com/drive/14sja1ttnwgxUlIXqCxuAhSh0L9uSa1te) are available in google colab\r\n```\r\ntf.reset_default_graph()\r\n\r\na = np.random.normal(0,10, [8,4]).astype(np.float32)\r\nb = np.random.normal(0,10, [8,4]).astype(np.float32)\r\n\r\nx = tf.convert_to_tensor(a)\r\ny = tf.convert_to_tensor(b)\r\n\r\n\r\ndef ops(x,y):\r\n    mask =tf.greater(x,y)\r\n    return tf.count_nonzero(mask, name='total_example')\r\n                     \r\ntpu_ops = tf.contrib.tpu.batch_parallel(ops,inputs=[x,y],num_shards=8)\r\n                     \r\nwith tf.Session(tpu_address) as sess:\r\n    sess.run(tf.contrib.tpu.initialize_system())\r\n    out = sess.run(tpu_ops)\r\n    sess.run(tf.contrib.tpu.shutdown_system())\r\n    \r\nprint(np.array(a>b).astype(np.uint8))\r\nprint(out)\r\n```\r\n\r\n**Other info / logs**\r\nThe problem seems to be the XLA compilation, casting to tf.int64 is not working in the current tf.count_nonzero chain.\r\nI made a code that similar but convert to float32 instead of int64, and it's working.\r\n```\r\ndef count_nonzero(x, axis=None, name='nonzero'):\r\n\r\n    count = tf.reduce_sum(\r\n        tf.cast(\r\n            tf.not_equal(x,tf.zeros([],dtype=x.dtype)), \r\n            dtype=tf.float32, # <-- the original tf.count_nonzero function cast to tf.int64\r\n            name='casting'\r\n        ), \r\n        axis=axis,\r\n        name=name\r\n    )\r\n    return count\r\n    #return tf.cast(count, tf.int64)\r\n\r\ndef ops(x,y):\r\n    mask =tf.greater(x,y)\r\n    return count_nonzero(mask, name='total_example')\r\n\r\ntpu_ops = tf.contrib.tpu.batch_parallel(ops,inputs=[x,y],num_shards=8)\r\n```\r\n\r\nFurthermore, simple casting from bool to int64 is working, so i guess this is related to the XLA optimization\r\n\r\n```\r\ndef ops(x,y):\r\n    mask =tf.greater(x,y)\r\n    return tf.cast(mask, tf.int64)\r\n\r\ntpu_ops = tf.contrib.tpu.batch_parallel(ops,inputs=[x,y],num_shards=8)\r\n```\r\n\r\nAll [codes](https://colab.research.google.com/drive/14sja1ttnwgxUlIXqCxuAhSh0L9uSa1te) are available on google colab."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24513", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24513/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24513/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24513/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24513", "id": 393635306, "node_id": "MDU6SXNzdWUzOTM2MzUzMDY=", "number": 24513, "title": "tfdbg memory leak", "user": {"login": "liuchangready", "id": 3291440, "node_id": "MDQ6VXNlcjMyOTE0NDA=", "avatar_url": "https://avatars3.githubusercontent.com/u/3291440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liuchangready", "html_url": "https://github.com/liuchangready", "followers_url": "https://api.github.com/users/liuchangready/followers", "following_url": "https://api.github.com/users/liuchangready/following{/other_user}", "gists_url": "https://api.github.com/users/liuchangready/gists{/gist_id}", "starred_url": "https://api.github.com/users/liuchangready/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liuchangready/subscriptions", "organizations_url": "https://api.github.com/users/liuchangready/orgs", "repos_url": "https://api.github.com/users/liuchangready/repos", "events_url": "https://api.github.com/users/liuchangready/events{/privacy}", "received_events_url": "https://api.github.com/users/liuchangready/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-12-22T02:26:39Z", "updated_at": "2019-01-17T02:15:39Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\nSystem information\r\n\r\nWindows 7, 64\r\nTensorFlow installed from source\r\nTensorFlow version:1.8\r\nPython version:3.6\r\nInstalled using pip\r\nDescribe the problem\r\n\r\n        def get_tfdbg_watch_fn(self):\r\n        assert(len(self.reg_list)!=0),\"reg_list can not be the empty\"\r\n        regex = \"|\"\r\n        regex = regex.join(self.reg_list)\r\n        raw_regex = \"%r\" % regex\r\n        def watch_fn(fetches, feeds):\r\n            del fetches, feeds\r\n            return tfdbg.WatchOptions(\r\n                debug_ops=[\"DebugIdentity\"],\r\n                node_name_regex_whitelist=regex,\r\n                tolerate_debug_op_creation_failures=False)\r\n        return  watch_fn\r\n\r\n    def run(self,output,feed_fit):\r\n        if self.debug_session is None and self.dump_dirs_count()==0:\r\n            watch_fn = self.get_tfdbg_watch_fn()\r\n            self.debug_session = tfdbg.DumpingDebugWrapperSession(sess=self.sess, session_root=self.session_root, watch_fn=watch_fn,\r\n                                                    log_usage=False)\r\n        if self.debug_session is not None and self.debug_session.run_call_count>=self.dump_dirs_count() :\r\n            self.debug_session.run(output,feed_fit)\r\n            #self.sess.run(output,feed_fit)\r\n            del output\r\n            del feed_fit\r\n        return\r\nhi\r\ni run the tfdbg to get the intermediate tensor of the graph,the tfdbg  works,but when i run the self.debug_session.run more times i find the memory usage is grwoing biger and biger and it finally cause the programe aborted. i use the objgraph to check the python obj used,It dosen't grow after the second run,So i guess maybe there are some c obj leak in tfdbg.\r\nthks"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24497", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24497/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24497/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24497/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24497", "id": 393346416, "node_id": "MDU6SXNzdWUzOTMzNDY0MTY=", "number": 24497, "title": "this graph contains an operator of type SquaredDifference for which the quantized form is not yet implemented", "user": {"login": "MrCary", "id": 28701781, "node_id": "MDQ6VXNlcjI4NzAxNzgx", "avatar_url": "https://avatars2.githubusercontent.com/u/28701781?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MrCary", "html_url": "https://github.com/MrCary", "followers_url": "https://api.github.com/users/MrCary/followers", "following_url": "https://api.github.com/users/MrCary/following{/other_user}", "gists_url": "https://api.github.com/users/MrCary/gists{/gist_id}", "starred_url": "https://api.github.com/users/MrCary/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MrCary/subscriptions", "organizations_url": "https://api.github.com/users/MrCary/orgs", "repos_url": "https://api.github.com/users/MrCary/repos", "events_url": "https://api.github.com/users/MrCary/events{/privacy}", "received_events_url": "https://api.github.com/users/MrCary/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2018-12-21T07:19:44Z", "updated_at": "2019-07-03T11:15:58Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):Ubuntu14.04\r\n- TensorFlow installed from (source or binary):pip tf-nightly\r\n- TensorFlow version (or github SHA if from source): tf-nightly1.13.0.dev20181216\r\n\r\n\r\n**Provide the text output from tflite_convert**\r\n\r\n```\r\nI convert pb to lite use the following code:\r\n`import tensorflow as tf\r\nconverter = tf.contrib.lite.TFLiteConverter.from_frozen_graph('tflite_graph.pb',[\"input_image\"],[\"result\"], input_shapes={\"input_image\":[1,626,360,3]})\r\nconverter.allow_custom_ops = True\r\nconverter.inference_type = tf.contrib.lite.constants.QUANTIZED_UINT8\r\nconverter.quantized_input_stats = {\"input_image\" : (0., 2.)}\r\nconverter.default_ranges_stats=(0, 6)\r\ntflite_quantized_model=converter.convert()\r\nopen(\"model.tflite\", \"wb\").write(tflite_quantized_model)`\r\n\r\nI get the following error:\r\n2018-12-21 11:26:06.351171: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2018-12-21 11:26:06.354986: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 3392410000 Hz\r\n2018-12-21 11:26:06.355300: I tensorflow/compiler/xla/service/service.cc:150] XLA service 0x53e0ee0 executing computations on platform Host. Devices:\r\n2018-12-21 11:26:06.355325: I tensorflow/compiler/xla/service/service.cc:158]   StreamExecutor device (0): <undefined>, <undefined>\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 25, in <module>\r\n    tflite_quantized_model=converter.convert()\r\n  File \"/home/zhoushaohuang/Virtualenv/python3.4/lib/python3.4/site-packages/tensorflow/lite/python/lite.py\", line 455, in convert\r\n    **converter_kwargs)\r\n  File \"/home/zhoushaohuang/Virtualenv/python3.4/lib/python3.4/site-packages/tensorflow/lite/python/convert.py\", line 442, in toco_convert_impl\r\n    input_data.SerializeToString())\r\n  File \"/home/zhoushaohuang/Virtualenv/python3.4/lib/python3.4/site-packages/tensorflow/lite/python/convert.py\", line 205, in toco_convert_protos\r\n    \"TOCO failed. See console for info.\\n%s\\n%s\\n\" % (stdout, stderr))\r\ntensorflow.lite.python.convert.ConverterError: TOCO failed. See console for info.\r\n2018-12-21 11:26:07.312638: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 168 operators, 271 arrays (0 quantized)\r\n2018-12-21 11:26:07.314127: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 168 operators, 271 arrays (0 quantized)\r\n2018-12-21 11:26:07.323240: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 102 operators, 183 arrays (1 quantized)\r\n2018-12-21 11:26:07.324611: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 2: 96 operators, 171 arrays (1 quantized)\r\n2018-12-21 11:26:07.325812: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before pre-quantization graph transformations: 96 operators, 171 arrays (1 quantized)\r\n2018-12-21 11:26:07.326413: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After pre-quantization graph transformations pass 1: 90 operators, 165 arrays (1 quantized)\r\n2018-12-21 11:26:07.327324: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before default min-max range propagation graph transformations: 90 operators, 165 arrays (1 quantized)\r\n2018-12-21 11:26:07.327972: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After default min-max range propagation graph transformations pass 1: 90 operators, 165 arrays (1 quantized)\r\n2018-12-21 11:26:07.328720: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before quantization graph transformations: 90 operators, 165 arrays (1 quantized)\r\n2018-12-21 11:26:07.328791: W tensorflow/lite/toco/graph_transformations/quantize.cc:127] Constant array conv1/conv/weight lacks MinMax information. To make up for that, we will now compute the MinMax from actual array elements. That will result in quantization parameters that probably do not match whichever arithmetic was used during training, and thus will probably be a cause of poor inference accuracy.\r\n2018-12-21 11:26:07.328936: F tensorflow/lite/toco/graph_transformations/quantize.cc:491] Unimplemented: this graph contains an operator of type SquaredDifference for which the quantized form is not yet implemented. Sorry, and patches welcome (that's a relatively fun patch to write, mostly providing the actual quantized arithmetic code for this op).\r\nAborted (core dumped)\r\n\r\n```\r\n\r\n\r\nAlso, please include a link to a GraphDef or the model if possible.\r\nI use SquaredDifference in following code:\r\n`def instance_norm(x):\r\n    epsilon = 1e-9\r\n\r\n    mean = tf.reduce_mean(x,[1,2])\r\n    mean = tf.expand_dims(mean,[1])\r\n    mean = tf.expand_dims(mean,[1])\r\n    s = x.get_shape()\r\n    var = tf.reduce_sum(tf.squared_difference(x, mean), [1,2], keep_dims=True)/(s[1].value*s[2].value)\r\n    result = tf.div(tf.subtract(x, mean), tf.sqrt(tf.add(var, epsilon)))\r\n    return result`\r\n![2018-12-21 15 18 10](https://user-images.githubusercontent.com/28701781/50329687-49bb6680-0533-11e9-9672-68c7d451a888.png)\r\n\r\n**Any other info / logs**\r\nI generate pb use the following code:\r\n`input_saver_def = saver.as_saver_def()\r\n frozen_graph_def = freeze_graph.freeze_graph_with_def_protos(input_graph_def=tf.get_default_graph().as_graph_def(),input_saver_def=input_saver_def,input_checkpoint = FLAGS.model_file,output_node_names='result',restore_op_name='save/restore_all', filename_tensor_name='save/Const:0',clear_devices=True,output_graph='',initializer_nodes='')\r\nbinary_graph = 'tflite_graph.pb'\r\nwith tf.gfile.GFile(binary_graph, 'wb') as f:\r\n       f.write(frozen_graph_def.SerializeToString())`\r\n\r\n\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24496", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24496/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24496/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24496/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24496", "id": 393334270, "node_id": "MDU6SXNzdWUzOTMzMzQyNzA=", "number": 24496, "title": "Could not create cudnn handle: CUDNN_STATUS_INTERNAL_ERROR", "user": {"login": "6etacat", "id": 15188392, "node_id": "MDQ6VXNlcjE1MTg4Mzky", "avatar_url": "https://avatars3.githubusercontent.com/u/15188392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/6etacat", "html_url": "https://github.com/6etacat", "followers_url": "https://api.github.com/users/6etacat/followers", "following_url": "https://api.github.com/users/6etacat/following{/other_user}", "gists_url": "https://api.github.com/users/6etacat/gists{/gist_id}", "starred_url": "https://api.github.com/users/6etacat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/6etacat/subscriptions", "organizations_url": "https://api.github.com/users/6etacat/orgs", "repos_url": "https://api.github.com/users/6etacat/repos", "events_url": "https://api.github.com/users/6etacat/events{/privacy}", "received_events_url": "https://api.github.com/users/6etacat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 124, "created_at": "2018-12-21T06:29:31Z", "updated_at": "2020-03-18T20:44:31Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes and No (described below)\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Manjaro\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): tf-nightly-gpu (Dec 19, r1.13)\r\n- TensorFlow version (use command below): 1.13.0-dev20181219\r\n- Python version: 3.7.1\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: CUDA 10 with cuDNN 7.4.1\r\n- GPU model and memory: RTX 2070 8GB\r\n\r\n**Describe the current behavior**\r\nI'm running the CNN model on MNIST. When I'm running with the GPU, I am encountering\r\n```2018-12-20 20:09:13.644176: E tensorflow/stream_executor/cuda/cuda_dnn.cc:334] Could not create cudnn handle: CUDNN_STATUS_INTERNAL_ERROR```\r\n\r\nI did some digging and realized that it is a memory issue (which shouldn't be the case as I have 32GB of RAM and 64GB of swap. I ran htop when running the model and I have 20+GB free, which is more than enough to fit the 8GB vRAM mappings. \r\n\r\nUsing the `gpu_options.allow_growth = True` gets the model to work properly, and setting `os.environ['CUDA_VISIBLE_DEVICES'] = '-1'` also works. This means that I AM facing a memory issue, but I don't see how. \r\n\r\nAlso, using `gpu_options.allow_growth = True` does not fix the same issue when trying to run tensorflow/models/official/mnist/ model, which should have a similar behavior with my code. \r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport os\r\nimport tensorflow as tf\r\nfrom tensorflow.examples.tutorials.mnist import input_data\r\nimport math\r\nimport time\r\n# Killing optional CPU driver warnings\r\nos.environ['TF_CPP_MIN_LOG_LEVEL'] = '2'\r\n# os.environ['CUDA_VISIBLE_DEVICES'] = '-1'\r\ntf.logging.set_verbosity(tf.logging.ERROR)\r\n\r\n\r\nclass Model:\r\n\r\n    def __init__(self, image, label):\r\n        \"\"\"\r\n        A Model class contains a computational graph that classifies images\r\n        to predictions. Each of its methods builds part of the graph\r\n        on Model initialization. Do not modify the constructor, as doing so\r\n        would break the autograder. You may, however, add class variables\r\n        to use in your graph-building. e.g. learning rate, \r\n\r\n        image: the input image to the computational graph as a tensor\r\n        label: the correct label of an image as a tensor\r\n        prediction: the output prediction of the computational graph,\r\n                    produced by self.forward_pass()\r\n        optimize: the model's optimizing tensor produced by self.optimizer()\r\n        loss: the model's loss produced by computing self.loss_function()\r\n        accuracy: the model's prediction accuracy\r\n        \"\"\"\r\n        self.image = image\r\n        self.label = label\r\n\r\n        # TO-DO: Add any class variables you want to use.\r\n\r\n        self.prediction = self.forward_pass()\r\n        self.loss = self.loss_function()\r\n        self.optimize = self.optimizer()\r\n        self.accuracy = self.accuracy_function()\r\n\r\n    def forward_pass(self):\r\n        \"\"\"\r\n        Predicts a label given an image using convolution layers\r\n\r\n        :return: the prediction as a tensor\r\n        \"\"\"\r\n        filter_1 = tf.Variable(tf.truncated_normal([3, 3, 1, 8], stddev=0.1))\r\n        conv_1 = tf.nn.conv2d(self.image, filter_1, [1, 1, 1, 1], \"SAME\")\r\n\r\n        reshaped = tf.reshape(conv_1, shape=[50, -1])\r\n\r\n        L1 = reshaped.shape[1].value\r\n        L2 = 500\r\n        W1 = tf.Variable(tf.random_normal([L1, L2], mean=0, stddev=0.01))\r\n        b1 = tf.Variable(tf.random_normal([L2], mean=0, stddev=0.01))\r\n        relu_1 = tf.nn.relu(tf.matmul(reshaped, W1) + b1)\r\n\r\n        W2 = tf.Variable(tf.random_normal([L2, 10], mean=0, stddev=0.01))\r\n        b2 = tf.Variable(tf.random_normal([10], mean=0, stddev=0.01))\r\n        logits = tf.nn.relu(tf.matmul(relu_1, W2) + b2)\r\n        return logits\r\n\r\n    def loss_function(self):\r\n        \"\"\"\r\n        Calculates the model cross-entropy loss\r\n\r\n        :return: the loss of the model as a tensor\r\n        \"\"\"\r\n        loss = tf.losses.softmax_cross_entropy(onehot_labels=self.label, logits=self.prediction)\r\n        return loss\r\n\r\n    def optimizer(self):\r\n        \"\"\"\r\n        Optimizes the model loss using an Adam Optimizer\r\n\r\n        :return: the optimizer as a tensor\r\n        \"\"\"\r\n        learning_rate = 0.1\r\n        sgd = tf.train.GradientDescentOptimizer(learning_rate)\r\n        train = sgd.minimize(self.loss)\r\n        return train\r\n\r\n    def accuracy_function(self):\r\n        \"\"\"\r\n        Calculates the model's prediction accuracy by comparing\r\n        predictions to correct labels \u2013 no need to modify this\r\n\r\n        :return: the accuracy of the model as a tensor\r\n        \"\"\"\r\n        correct_prediction = tf.equal(tf.argmax(self.prediction, 1),\r\n                                      tf.argmax(self.label, 1))\r\n        return tf.reduce_mean(tf.cast(correct_prediction, tf.float32))\r\n\r\n\r\ndef main():\r\n    t_start = time.time()\r\n\r\n    mnist = input_data.read_data_sets(\"data/mnist/\", one_hot=True)\r\n    batch_sz = 50\r\n    batch = 2000\r\n\r\n    inputs = tf.placeholder(shape=[batch_sz, 28, 28, 1], dtype=tf.float32)\r\n    labels = tf.placeholder(shape=[batch_sz, 10], dtype=tf.float32)\r\n\r\n    model = Model(inputs, labels)\r\n\r\n    session_config = tf.ConfigProto(gpu_options=tf.GPUOptions(allow_growth=True))\r\n    sess = tf.Session(config=session_config)\r\n\r\n    # sess = tf.Session()\r\n\r\n    sess.run(tf.global_variables_initializer())\r\n    for i in range(batch):\r\n        next_image, next_label = mnist.train.next_batch(batch_sz)\r\n        next_image = next_image.reshape((batch_sz, 28, 28, 1))\r\n        sess.run(model.optimize, feed_dict={inputs: next_image, labels: next_label})\r\n\r\n    acc, test_images, test_labels = 0, mnist.test.images, mnist.test.labels\r\n    test_batch = math.ceil(len(test_images) / batch_sz)\r\n    for i in range(test_batch):\r\n        batch_images = test_images[i * batch_sz: (i + 1) * batch_sz]\r\n        batch_images = batch_images.reshape((batch_sz, 28, 28, 1))\r\n        batch_labes = test_labels[i * batch_sz: (i + 1) * batch_sz]\r\n        acc += sess.run(model.accuracy, feed_dict={inputs: batch_images, labels: batch_labes})\r\n    acc /= test_batch\r\n    print(acc)\r\n\r\n    print(time.time() - t_start, 'seconds')\r\n\r\n    return\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24474", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24474/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24474/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24474/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24474", "id": 393128711, "node_id": "MDU6SXNzdWUzOTMxMjg3MTE=", "number": 24474, "title": "How to build from source with hdfs support on. No option in configure?", "user": {"login": "legatoo", "id": 1506580, "node_id": "MDQ6VXNlcjE1MDY1ODA=", "avatar_url": "https://avatars2.githubusercontent.com/u/1506580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/legatoo", "html_url": "https://github.com/legatoo", "followers_url": "https://api.github.com/users/legatoo/followers", "following_url": "https://api.github.com/users/legatoo/following{/other_user}", "gists_url": "https://api.github.com/users/legatoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/legatoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/legatoo/subscriptions", "organizations_url": "https://api.github.com/users/legatoo/orgs", "repos_url": "https://api.github.com/users/legatoo/repos", "events_url": "https://api.github.com/users/legatoo/events{/privacy}", "received_events_url": "https://api.github.com/users/legatoo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2018-12-20T16:51:01Z", "updated_at": "2020-03-18T10:31:04Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution: Mac OS Mojave 10.14.1 (18B75)\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: branch r1.12\r\n- Python version: 3.6.6 \r\n- Installed using virtualenv? pip? conda?: building is in a virtualenv created by `pyenv virtualenv 3.6.6 my_tf_build_env`\r\n- Bazel version (if compiling from source): from source. 0.15.0\r\n- GCC/Compiler version (if compiling from source): Apple LLVM version 10.0.0 (clang-1000.11.45.5)\r\n- CUDA/cuDNN version:  no cuda, build only for cpu\r\n- GPU model and memory: Intel Core i7, 16 GB\r\n\r\n**Describe the problem**\r\nWhen I reading threcord in my local hdfs, I encounter error below:\r\n\r\n```\r\n  File \"/Users/eva/.pyenv/versions/pycharm_v3.6.6/lib/python3.6/site-packages/tensorflow/python/ops/io_ops.py\", line 166, in read\r\n    return gen_io_ops.reader_read_v2(self._reader_ref, queue_ref, name=name)\r\n  File \"/Users/eva/.pyenv/versions/pycharm_v3.6.6/lib/python3.6/site-packages/tensorflow/python/ops/gen_io_ops.py\", line 944, in reader_read_v2\r\n    queue_handle=queue_handle, name=name)\r\n  File \"/Users/eva/.pyenv/versions/pycharm_v3.6.6/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 787, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"/Users/eva/.pyenv/versions/pycharm_v3.6.6/lib/python3.6/site-packages/tensorflow/python/util/deprecation.py\", line 488, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/Users/eva/.pyenv/versions/pycharm_v3.6.6/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 3274, in create_op\r\n    op_def=op_def)\r\n  File \"/Users/eva/.pyenv/versions/pycharm_v3.6.6/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1770, in __init__\r\n    self._traceback = tf_stack.extract_stack()\r\n\r\nNotFoundError (see above for traceback): dlopen(libhdfs.dylib, 6): image not found\r\n```\r\nI fallowed [this guide](https://www.tensorflow.org/deploy/hadoop) to set hadoop pathes, and I'm sure my `libhdfs.dylib` is in my `HADOOP_HDFS_HOME`. (I build hadoop natively for mac)\r\n\r\nI'm not sure if my tensorflow, which is installed via brew, is hdfs enabled. So I just want to build from source with hdfs enable, but when I run `./configure`, there is no option for hdfs?  My questions are:\r\n\r\n1/ is the tensorflow shipped via brew hdfs enabled?\r\n2/ how to build from source with hdfs turn on?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24453", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24453/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24453/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24453/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24453", "id": 392753725, "node_id": "MDU6SXNzdWUzOTI3NTM3MjU=", "number": 24453, "title": "DLPack support in tensorflow", "user": {"login": "jermainewang", "id": 4057701, "node_id": "MDQ6VXNlcjQwNTc3MDE=", "avatar_url": "https://avatars1.githubusercontent.com/u/4057701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jermainewang", "html_url": "https://github.com/jermainewang", "followers_url": "https://api.github.com/users/jermainewang/followers", "following_url": "https://api.github.com/users/jermainewang/following{/other_user}", "gists_url": "https://api.github.com/users/jermainewang/gists{/gist_id}", "starred_url": "https://api.github.com/users/jermainewang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jermainewang/subscriptions", "organizations_url": "https://api.github.com/users/jermainewang/orgs", "repos_url": "https://api.github.com/users/jermainewang/repos", "events_url": "https://api.github.com/users/jermainewang/events{/privacy}", "received_events_url": "https://api.github.com/users/jermainewang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 41, "created_at": "2018-12-19T19:53:10Z", "updated_at": "2019-11-29T16:18:49Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): v1.12.0\r\n- Are you willing to contribute it (Yes/No): I could help but I'm not a Tensorflow expert.\r\n\r\n**Describe the feature and the current behavior/state.**\r\n[DLPack](https://github.com/dmlc/dlpack) is a community effort to define a common tensor data structure that could be shared by different frameworks. Currently, Pytorch and MXNet have adopted this interface. Using DLPack can benefit many projects in the ecosystem: let it be backend compiler like [TVM](https://github.com/dmlc/tvm) or front-end package like [DGL](https://github.com/dmlc/dgl). So it will be really great if Tensorflow can also adopt this interface to help new ideas derived from the mainstream tensor-based frameworks.\r\n\r\n**Will this change the current api? How?**\r\nHere is a draft proposal. Two new APIs to convert `tf.Tensor` from/to dlpack format. Examples in `torch` are `dl = torch.utils.dlpack.to_dlpack(tsor)` and `tsor = torch.utils.dlpack.from_dlpack(dl)`.\r\n\r\n**Who will benefit with this feature?**\r\nMany projects that wish to improve, optimize or be complementary to the mainstream tensor frameworks.\r\n\r\n@tqchen @zzhang-cn"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24445", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24445/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24445/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24445/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24445", "id": 392500035, "node_id": "MDU6SXNzdWUzOTI1MDAwMzU=", "number": 24445, "title": "Bad accuracy on ML Kit with InceptionV3 tflite model", "user": {"login": "padovanl", "id": 26529110, "node_id": "MDQ6VXNlcjI2NTI5MTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/26529110?v=4", "gravatar_id": "", "url": "https://api.github.com/users/padovanl", "html_url": "https://github.com/padovanl", "followers_url": "https://api.github.com/users/padovanl/followers", "following_url": "https://api.github.com/users/padovanl/following{/other_user}", "gists_url": "https://api.github.com/users/padovanl/gists{/gist_id}", "starred_url": "https://api.github.com/users/padovanl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/padovanl/subscriptions", "organizations_url": "https://api.github.com/users/padovanl/orgs", "repos_url": "https://api.github.com/users/padovanl/repos", "events_url": "https://api.github.com/users/padovanl/events{/privacy}", "received_events_url": "https://api.github.com/users/padovanl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "srjoglekar246", "id": 2099293, "node_id": "MDQ6VXNlcjIwOTkyOTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/2099293?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srjoglekar246", "html_url": "https://github.com/srjoglekar246", "followers_url": "https://api.github.com/users/srjoglekar246/followers", "following_url": "https://api.github.com/users/srjoglekar246/following{/other_user}", "gists_url": "https://api.github.com/users/srjoglekar246/gists{/gist_id}", "starred_url": "https://api.github.com/users/srjoglekar246/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srjoglekar246/subscriptions", "organizations_url": "https://api.github.com/users/srjoglekar246/orgs", "repos_url": "https://api.github.com/users/srjoglekar246/repos", "events_url": "https://api.github.com/users/srjoglekar246/events{/privacy}", "received_events_url": "https://api.github.com/users/srjoglekar246/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "srjoglekar246", "id": 2099293, "node_id": "MDQ6VXNlcjIwOTkyOTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/2099293?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srjoglekar246", "html_url": "https://github.com/srjoglekar246", "followers_url": "https://api.github.com/users/srjoglekar246/followers", "following_url": "https://api.github.com/users/srjoglekar246/following{/other_user}", "gists_url": "https://api.github.com/users/srjoglekar246/gists{/gist_id}", "starred_url": "https://api.github.com/users/srjoglekar246/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srjoglekar246/subscriptions", "organizations_url": "https://api.github.com/users/srjoglekar246/orgs", "repos_url": "https://api.github.com/users/srjoglekar246/repos", "events_url": "https://api.github.com/users/srjoglekar246/events{/privacy}", "received_events_url": "https://api.github.com/users/srjoglekar246/received_events", "type": "User", "site_admin": false}, {"login": "achowdhery", "id": 4723042, "node_id": "MDQ6VXNlcjQ3MjMwNDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4723042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/achowdhery", "html_url": "https://github.com/achowdhery", "followers_url": "https://api.github.com/users/achowdhery/followers", "following_url": "https://api.github.com/users/achowdhery/following{/other_user}", "gists_url": "https://api.github.com/users/achowdhery/gists{/gist_id}", "starred_url": "https://api.github.com/users/achowdhery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/achowdhery/subscriptions", "organizations_url": "https://api.github.com/users/achowdhery/orgs", "repos_url": "https://api.github.com/users/achowdhery/repos", "events_url": "https://api.github.com/users/achowdhery/events{/privacy}", "received_events_url": "https://api.github.com/users/achowdhery/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-12-19T08:59:12Z", "updated_at": "2019-07-12T19:28:45Z", "closed_at": null, "author_association": "NONE", "body": "Hi, I have a problem with InceptionV3 tflite model executed on MLKit SDK. I'm not using the ILSVRC Dataset for reasons of storage space and execution time. I'm using the Caltech Dataset , find it [here](http://www.vision.caltech.edu/Image_Datasets/Caltech101/). I have also remove categories that Inception V3 is not able to recognize. I'm doing a comparison of the new Mobile Machine Learning SDKs, and i try to use the new Snapdragon Neural Processing Engine (SNPE) and MLKit. I ran inceptionV3 on both SDKs, and with SNPE I have reached the 82% of correct classifications, and with MLKit the 47%. For MlKit, I have download the tflite float model from [here](https://www.tensorflow.org/lite/models).\r\nI build the network with the following code:\r\n\r\n            long startBuild = SystemClock.elapsedRealtime();\r\n            FirebaseLocalModelSource localSource =\r\n                    new FirebaseLocalModelSource.Builder(\"inception_v3\")  // Assign a name for this model\r\n                            .setAssetFilePath(\"inception_v3.tflite\")\r\n                            .build();\r\n            FirebaseModelManager.getInstance().registerLocalModelSource(localSource);\r\n            FirebaseModelOptions options = new FirebaseModelOptions.Builder()\r\n                    .setLocalModelName(\"inception_v3\")\r\n                    .build();\r\n            FirebaseModelInterpreter firebaseInterpreter =\r\n                    FirebaseModelInterpreter.getInstance(options);\r\n            FirebaseModelInputOutputOptions inputOutputOptions =\r\n                    new FirebaseModelInputOutputOptions.Builder()\r\n                            .setInputFormat(0, FirebaseModelDataType.FLOAT32, new int[]{1, 299, 299, 3})\r\n                            .setOutputFormat(0, FirebaseModelDataType.FLOAT32, new int[]{1, 1001})\r\n                            .build();\r\n            long endBuild = SystemClock.elapsedRealtime();\r\n\r\nAnd then I preprocess image:\r\n\r\n            resized_image =  Bitmap.createScaledBitmap(image, 299,299, false);\r\n            input = new float[1][299][299][3];\r\n            for (int x = 0; x < 299; x++) {\r\n                for (int y = 0; y < 299; y++) {\r\n                    int pixel = resized_image.getPixel(x, y);\r\n                    // Normalize channel values to [0.0, 1.0]. This requirement varies by\r\n                    // model. For example, some models might require values to be normalized\r\n                    // to the range [-1.0, 1.0] instead.\r\n\r\n                    float b = ((pixel)       & 0xFF);\r\n                    float g = ((pixel >>  8) & 0xFF);\r\n                    float r = ((pixel >> 16) & 0xFF);\r\n                    input[batchNum][x][y][0] = (r - 127) / 128.0f;\r\n                    input[batchNum][x][y][1] = (g - 127) / 128.0f;\r\n                    input[batchNum][x][y][2] = (b - 127) / 128.0f;\r\n                    //input[batchNum][x][y][0] = (Color.red(pixel) - 128) / 128.0f;\r\n                    //input[batchNum][x][y][1] = (Color.green(pixel) - 128) / 128.0f;\r\n                    //input[batchNum][x][y][2] = (Color.blue(pixel) - 128) / 128.0f;\r\n                }\r\n            }\r\n\r\n            inputs = new FirebaseModelInputs.Builder()\r\n                    .add(input)  // add() as many input arrays as your model requires\r\n                    .build();\r\n\r\n\r\n\r\n            Task<FirebaseModelOutputs> task = firebaseInterpreter.run(inputs, inputOutputOptions);\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24442", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24442/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24442/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24442/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24442", "id": 392484280, "node_id": "MDU6SXNzdWUzOTI0ODQyODA=", "number": 24442, "title": "tf.contrib.copy_graph.copy_variable_to_graph does not set the shape of copied variable", "user": {"login": "EmanueleGhelfi", "id": 16719271, "node_id": "MDQ6VXNlcjE2NzE5Mjcx", "avatar_url": "https://avatars0.githubusercontent.com/u/16719271?v=4", "gravatar_id": "", "url": "https://api.github.com/users/EmanueleGhelfi", "html_url": "https://github.com/EmanueleGhelfi", "followers_url": "https://api.github.com/users/EmanueleGhelfi/followers", "following_url": "https://api.github.com/users/EmanueleGhelfi/following{/other_user}", "gists_url": "https://api.github.com/users/EmanueleGhelfi/gists{/gist_id}", "starred_url": "https://api.github.com/users/EmanueleGhelfi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/EmanueleGhelfi/subscriptions", "organizations_url": "https://api.github.com/users/EmanueleGhelfi/orgs", "repos_url": "https://api.github.com/users/EmanueleGhelfi/repos", "events_url": "https://api.github.com/users/EmanueleGhelfi/events{/privacy}", "received_events_url": "https://api.github.com/users/EmanueleGhelfi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1166103538, "node_id": "MDU6TGFiZWwxMTY2MTAzNTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/contrib", "name": "contrib", "color": "5319e7", "default": false, "description": "Anything that comes under contrib directory"}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2018-12-19T08:10:39Z", "updated_at": "2019-04-17T02:46:32Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Archlinux\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.10\r\n- Python version: 3.6\r\n- CUDA/cuDNN version: cuda 9.0, cudnn 7.1\r\n- GPU model and memory: GeForce GTX 1060\r\n\r\n**Describe the current behavior**\r\nVariables copied using tf.contrib.copy_graph.copy_variable_to_graph have unknown shape. This make this function unusable and useless. \r\n\r\n**Describe the expected behavior**\r\nVariables copied using tf.contrib.copy_graph.copy_variable_to_graph should have the same shape of original variables in order to make possible restoring from a checkpoint.\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport tensorflow as tf\r\n\r\nx = tf.Variable((), name=\"x\")\r\n\r\ng = tf.get_default_graph()\r\n\r\ng2 = tf.Graph()\r\n\r\nwith g2.as_default():\r\n    x2 = tf.contrib.copy_graph.copy_variable_to_graph(x, g2)\r\n\r\nprint(x.get_shape()) # (0,)\r\nprint(x2.get_shape()) # <unknown>\r\n```\r\n\r\n**Fixing**\r\nThis issue is simply solved by changing lines: \r\nhttps://github.com/tensorflow/tensorflow/blob/a6d8ffae097d0132989ae4688d224121ec6d8f35/tensorflow/contrib/copy_graph/python/util/copy_elements.py#L89-L96\r\n\r\nto:\r\n```python\r\n  #Initialize the new variable\r\n  with to_graph.as_default():\r\n    new_var = Variable(\r\n        init_value,\r\n        trainable,\r\n        name=new_name,\r\n        collections=collections,\r\n        validate_shape=True)\r\n```\r\n\r\nIn my opinion there's no reason to set the field `validate_shape` to False, since in order to create the new variable we need to evaluate the old variable to get the init_value, so we have the actual shape of variables.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24439", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24439/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24439/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24439/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24439", "id": 392431397, "node_id": "MDU6SXNzdWUzOTI0MzEzOTc=", "number": 24439, "title": "TypeError: Can't convert Operation 'MutableHashTable' to Tensor", "user": {"login": "chunyang-wen", "id": 2911134, "node_id": "MDQ6VXNlcjI5MTExMzQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/2911134?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chunyang-wen", "html_url": "https://github.com/chunyang-wen", "followers_url": "https://api.github.com/users/chunyang-wen/followers", "following_url": "https://api.github.com/users/chunyang-wen/following{/other_user}", "gists_url": "https://api.github.com/users/chunyang-wen/gists{/gist_id}", "starred_url": "https://api.github.com/users/chunyang-wen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chunyang-wen/subscriptions", "organizations_url": "https://api.github.com/users/chunyang-wen/orgs", "repos_url": "https://api.github.com/users/chunyang-wen/repos", "events_url": "https://api.github.com/users/chunyang-wen/events{/privacy}", "received_events_url": "https://api.github.com/users/chunyang-wen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2018-12-19T03:58:30Z", "updated_at": "2019-02-15T01:10:10Z", "closed_at": null, "author_association": "NONE", "body": "\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Mac\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): No\r\n- TensorFlow version (use command below): 1.8.0\r\n- Python version: 3.6.3\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n\r\n**Describe the current behavior**\r\n\r\nmeta graph exported by export_meta_graph cannot be imported by import_meta_graph\r\n\r\n**Describe the expected behavior**\r\n\r\nexport_meta_graph and import_meta_graph works.\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport tensorflow as tf\r\nfrom tensorflow.contrib.lookup.lookup_ops import MutableHashTable\r\nfrom tensorflow.contrib.lookup.lookup_ops import MutableDenseHashTable\r\n\r\nexport_dir = 'minimal_saved_model'\r\n#builder = tf.saved_model.builder.SavedModelBuilder(export_dir)\r\n\r\nwith tf.Session(graph=tf.Graph()) as sess:\r\n\r\n    #table = MutableDenseHashTable(key_dtype=tf.int64, \\\r\n    # value_dtype=tf.int64, default_value=-1, empty_key=0)\r\n    table = MutableHashTable(key_dtype=tf.int64, value_dtype=tf.int64, default_value=-1)\r\n    aa = tf.get_variable('xxx', shape=(3,))\r\n\r\n    meta = tf.train.export_meta_graph()\r\n    saver = tf.train.Saver()\r\n\r\n\r\nwith tf.Session(graph=tf.Graph()) as sess1:\r\n    tf.train.import_meta_graph(meta)\r\n```\r\n**Other info / logs**\r\nrelated to #11888 . It seems that SaveableObject is not recreated correctly.\r\n\r\nstack traces:\r\n\r\n```python\r\n  File \"minimal_case.py\", line 22, in <module>\r\n    tf.train.import_meta_graph(meta)\r\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 1970, in import_meta_graph\r\n    return Saver()\r\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 1338, in __init__\r\n    self.build()\r\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 1347, in build\r\n    self._build(self._filename, build_save=True, build_restore=True)\r\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 1384, in _build\r\n    build_save=build_save, build_restore=build_restore)\r\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 813, in _build_internal\r\n    saveables = self._ValidateAndSliceInputs(names_to_saveables)\r\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 661, in _ValidateAndSliceInputs\r\n    names_to_saveables = BaseSaverBuilder.OpListToDict(names_to_saveables)\r\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/training/saver.py\", line 629, in OpListToDict\r\n    var = ops.internal_convert_to_tensor(var, as_ref=True)\r\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 1104, in internal_convert_to_tensor\r\n    ret = conversion_func(value, dtype=dtype, name=name, as_ref=as_ref)\r\n  File \"/usr/local/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 6130, in _operation_conversion_error\r\n    name, as_ref))\r\nTypeError: Can't convert Operation 'MutableHashTable' to Tensor (target dtype=None, name=None, as_ref=True)\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24417", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24417/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24417/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24417/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24417", "id": 392036058, "node_id": "MDU6SXNzdWUzOTIwMzYwNTg=", "number": 24417, "title": "Tensorflow Lite Dockerfile Error", "user": {"login": "gearsmotion789", "id": 35203563, "node_id": "MDQ6VXNlcjM1MjAzNTYz", "avatar_url": "https://avatars2.githubusercontent.com/u/35203563?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gearsmotion789", "html_url": "https://github.com/gearsmotion789", "followers_url": "https://api.github.com/users/gearsmotion789/followers", "following_url": "https://api.github.com/users/gearsmotion789/following{/other_user}", "gists_url": "https://api.github.com/users/gearsmotion789/gists{/gist_id}", "starred_url": "https://api.github.com/users/gearsmotion789/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gearsmotion789/subscriptions", "organizations_url": "https://api.github.com/users/gearsmotion789/orgs", "repos_url": "https://api.github.com/users/gearsmotion789/repos", "events_url": "https://api.github.com/users/gearsmotion789/events{/privacy}", "received_events_url": "https://api.github.com/users/gearsmotion789/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "achowdhery", "id": 4723042, "node_id": "MDQ6VXNlcjQ3MjMwNDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4723042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/achowdhery", "html_url": "https://github.com/achowdhery", "followers_url": "https://api.github.com/users/achowdhery/followers", "following_url": "https://api.github.com/users/achowdhery/following{/other_user}", "gists_url": "https://api.github.com/users/achowdhery/gists{/gist_id}", "starred_url": "https://api.github.com/users/achowdhery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/achowdhery/subscriptions", "organizations_url": "https://api.github.com/users/achowdhery/orgs", "repos_url": "https://api.github.com/users/achowdhery/repos", "events_url": "https://api.github.com/users/achowdhery/events{/privacy}", "received_events_url": "https://api.github.com/users/achowdhery/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "achowdhery", "id": 4723042, "node_id": "MDQ6VXNlcjQ3MjMwNDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4723042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/achowdhery", "html_url": "https://github.com/achowdhery", "followers_url": "https://api.github.com/users/achowdhery/followers", "following_url": "https://api.github.com/users/achowdhery/following{/other_user}", "gists_url": "https://api.github.com/users/achowdhery/gists{/gist_id}", "starred_url": "https://api.github.com/users/achowdhery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/achowdhery/subscriptions", "organizations_url": "https://api.github.com/users/achowdhery/orgs", "repos_url": "https://api.github.com/users/achowdhery/repos", "events_url": "https://api.github.com/users/achowdhery/events{/privacy}", "received_events_url": "https://api.github.com/users/achowdhery/received_events", "type": "User", "site_admin": false}, {"login": "pkulzc", "id": 35853368, "node_id": "MDQ6VXNlcjM1ODUzMzY4", "avatar_url": "https://avatars3.githubusercontent.com/u/35853368?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pkulzc", "html_url": "https://github.com/pkulzc", "followers_url": "https://api.github.com/users/pkulzc/followers", "following_url": "https://api.github.com/users/pkulzc/following{/other_user}", "gists_url": "https://api.github.com/users/pkulzc/gists{/gist_id}", "starred_url": "https://api.github.com/users/pkulzc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pkulzc/subscriptions", "organizations_url": "https://api.github.com/users/pkulzc/orgs", "repos_url": "https://api.github.com/users/pkulzc/repos", "events_url": "https://api.github.com/users/pkulzc/events{/privacy}", "received_events_url": "https://api.github.com/users/pkulzc/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2018-12-18T07:57:10Z", "updated_at": "2019-04-07T11:47:01Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version:\r\n- Python version:\r\n- Installed using virtualenv? pip? conda?:\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\nTensorflow is being installed from the Dockerfile according to https://github.com/tensorflow/models/blob/master/research/object_detection/dockerfiles/android/README.md. I am using CPU - NO GPU. I use Ubuntu 16.04.\r\n\r\n**Describe the problem**\r\nWhen I run \"docker build --tag detect-tf .\", I get the below error in the terminal. How can I fix it?\r\n\r\nStep 3/21 : RUN export CLOUD_SDK_REPO=\"cloud-sdk-$(lsb_release -c -s)\" &&     echo \"deb http://packages.cloud.google.com/apt $CLOUD_SDK_REPO main\" | tee -a /etc/apt/sources.list.d/google-cloud-sdk.list &&     curl https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add - &&     apt-get update -y && apt-get install google-cloud-sdk -y\r\n ---> Running in e985c9945ecd\r\ndeb http://packages.cloud.google.com/apt cloud-sdk-bionic main\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n                                 Dload  Upload   Total   Spent    Left  Speed\r\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0Warning: apt-key output should not be parsed (stdout is not a terminal)\r\n100  1326  100  1326    0     0   5715      0 --:--:-- --:--:-- --:--:--  5715\r\ngpg: failed to start agent '/usr/bin/gpg-agent': No such file or directory\r\ngpg: can't connect to the agent: No such file or directory\r\ngpg: failed to start agent '/usr/bin/gpg-agent': No such file or directory\r\ngpg: can't connect to the agent: No such file or directory\r\nThe command '/bin/sh -c export CLOUD_SDK_REPO=\"cloud-sdk-$(lsb_release -c -s)\" &&     echo \"deb http://packages.cloud.google.com/apt $CLOUD_SDK_REPO main\" | tee -a /etc/apt/sources.list.d/google-cloud-sdk.list &&     curl https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add - &&     apt-get update -y && apt-get install google-cloud-sdk -y' returned a non-zero code: 2\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nI followed the steps from https://github.com/tensorflow/models/blob/master/research/object_detection/dockerfiles/android/README.md.\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24409", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24409/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24409/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24409/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24409", "id": 391960581, "node_id": "MDU6SXNzdWUzOTE5NjA1ODE=", "number": 24409, "title": "Partially-defined shapes and group_norm", "user": {"login": "erfannoury", "id": 1921165, "node_id": "MDQ6VXNlcjE5MjExNjU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1921165?v=4", "gravatar_id": "", "url": "https://api.github.com/users/erfannoury", "html_url": "https://github.com/erfannoury", "followers_url": "https://api.github.com/users/erfannoury/followers", "following_url": "https://api.github.com/users/erfannoury/following{/other_user}", "gists_url": "https://api.github.com/users/erfannoury/gists{/gist_id}", "starred_url": "https://api.github.com/users/erfannoury/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/erfannoury/subscriptions", "organizations_url": "https://api.github.com/users/erfannoury/orgs", "repos_url": "https://api.github.com/users/erfannoury/repos", "events_url": "https://api.github.com/users/erfannoury/events{/privacy}", "received_events_url": "https://api.github.com/users/erfannoury/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "shlens", "id": 13385191, "node_id": "MDQ6VXNlcjEzMzg1MTkx", "avatar_url": "https://avatars1.githubusercontent.com/u/13385191?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shlens", "html_url": "https://github.com/shlens", "followers_url": "https://api.github.com/users/shlens/followers", "following_url": "https://api.github.com/users/shlens/following{/other_user}", "gists_url": "https://api.github.com/users/shlens/gists{/gist_id}", "starred_url": "https://api.github.com/users/shlens/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shlens/subscriptions", "organizations_url": "https://api.github.com/users/shlens/orgs", "repos_url": "https://api.github.com/users/shlens/repos", "events_url": "https://api.github.com/users/shlens/events{/privacy}", "received_events_url": "https://api.github.com/users/shlens/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "shlens", "id": 13385191, "node_id": "MDQ6VXNlcjEzMzg1MTkx", "avatar_url": "https://avatars1.githubusercontent.com/u/13385191?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shlens", "html_url": "https://github.com/shlens", "followers_url": "https://api.github.com/users/shlens/followers", "following_url": "https://api.github.com/users/shlens/following{/other_user}", "gists_url": "https://api.github.com/users/shlens/gists{/gist_id}", "starred_url": "https://api.github.com/users/shlens/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shlens/subscriptions", "organizations_url": "https://api.github.com/users/shlens/orgs", "repos_url": "https://api.github.com/users/shlens/repos", "events_url": "https://api.github.com/users/shlens/events{/privacy}", "received_events_url": "https://api.github.com/users/shlens/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2018-12-18T01:37:59Z", "updated_at": "2019-12-28T23:03:48Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): `v1.12.0-0-ga6d8ffae09 1.12.0`\r\n- Python version: 3.6.5\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: 9.0\r\n- GPU model and memory: 1080 Ti\r\n\r\n**Describe the current behavior**\r\nGiven the following minimal code raises an error:\r\n```python\r\nscan_var = tf.placeholder(tf.float32, [None, 128, 128, 64], name='scan')\r\nnorm = tf.contrib.layers.group_norm(scan_var, groups=16, channels_axis=3, reduction_axes=(1, 2))\r\n```\r\nWhen using `tf.contrib.layers.group_norm` with a Tensor that has partially-defined shape (e.g. `[None, H, W, C]`), the following error is raised:\r\n```\r\nTypeError: Failed to convert object of type <class 'list'> to Tensor. Contents: [None, 128, 128, 16, 4]. Consider casting elements to a supported type.\r\n```\r\nThe error is due to [normalization.py#L303](https://github.com/tensorflow/tensorflow/blob/r1.12/tensorflow/contrib/layers/python/layers/normalization.py#L303), since the value of variable `inputs_shape` is `[None, 128, 128, 16, 4]` which cannot be converted to a Tensor. The correct value should be `[-1, 128, 128, 16, 4]`.\r\nThis error can be fixed (probably addressing this [TODO](https://github.com/tensorflow/tensorflow/blob/r1.12/tensorflow/contrib/layers/python/layers/normalization.py#L250)) with the addition of the two following lines after Line 252 in `normalization.py`:\r\n```python\r\noriginal_shape = [-1 if s.value is None else s for s in original_shape]\r\nif len([s for s in original_shape if s == -1]) > 1:\r\n    raise ValueError('Only one axis dimension can be undefined in the input tensor')\r\n```\r\nand the following line after Line 302:\r\n```python\r\ninputs_shape = [-1 if s is None else s for s in inputs_shape]\r\n```\r\n\r\nIf it seems reasonable I can submit a pull request."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24408", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24408/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24408/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24408/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24408", "id": 391917667, "node_id": "MDU6SXNzdWUzOTE5MTc2Njc=", "number": 24408, "title": "CheckpointInputPipelineHook not restoring the correct iterator state", "user": {"login": "Silb78dg", "id": 34553774, "node_id": "MDQ6VXNlcjM0NTUzNzc0", "avatar_url": "https://avatars0.githubusercontent.com/u/34553774?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Silb78dg", "html_url": "https://github.com/Silb78dg", "followers_url": "https://api.github.com/users/Silb78dg/followers", "following_url": "https://api.github.com/users/Silb78dg/following{/other_user}", "gists_url": "https://api.github.com/users/Silb78dg/gists{/gist_id}", "starred_url": "https://api.github.com/users/Silb78dg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Silb78dg/subscriptions", "organizations_url": "https://api.github.com/users/Silb78dg/orgs", "repos_url": "https://api.github.com/users/Silb78dg/repos", "events_url": "https://api.github.com/users/Silb78dg/events{/privacy}", "received_events_url": "https://api.github.com/users/Silb78dg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2018-12-17T22:32:18Z", "updated_at": "2019-03-13T00:11:24Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): MacOs / Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): pip\r\n- TensorFlow version (use command below): 1.11 / 1.12\r\n- Python version: 3.5\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n\r\n**Describe the current behavior**\r\n1. CheckpointInputPipelineHook is not restoring the input checkpoint if there is multiple \"estimator.train\" method calls. Probably because the restore of the input checkpoint is done during the init of the hook. It restarts from the beginning of the dataset.\r\n2. If both MirroredStrategy and CheckpointInputPipelineHook are used, one step is by passing when the input checkpoint is restored. It restarts from (state step + 1).\r\n\r\n**Describe the expected behavior**\r\nAfter restoring the input checkpoint, the train restart at the right dataset iterator step.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\nIn this sample code, I have one dataset (range between 0 and 7, batch of 1, 1 epoch), I train the model for 4 steps, stop it, restart for 4 steps the training by restoring the checkpoints (model and input).\r\nExpected:\r\nTrain First Run: 4 steps -> features 0 to 3\r\nSave checkpoint model-ckpt and input-ckpt 4\r\nRestore model-ckpt and input-ckpt 4\r\nTrain Second Run: 4 steps -> features 4 to 7\r\nSave checkpoint 8\r\n```\r\nimport tensorflow as tf\r\n\r\nsample_count = 8\r\n\r\n\r\ndef run(model_dir: str, reinit_hook: bool = False, distribution_strategy: bool = False, gpu_count: int = 1):\r\n    # Config\r\n    if distribution_strategy:\r\n        session_config = tf.ConfigProto(allow_soft_placement=True)\r\n        train_distribute = tf.contrib.distribute.MirroredStrategy(num_gpus=gpu_count)\r\n    else:\r\n        session_config = None\r\n        train_distribute = None\r\n\r\n    run_config = tf.estimator.RunConfig(\r\n        model_dir=model_dir,\r\n        session_config=session_config,\r\n        train_distribute=train_distribute)\r\n\r\n    # Estimator\r\n    estimator = tf.estimator.Estimator(model_fn=model_fn, config=run_config)\r\n\r\n    # Hook\r\n    hooks = [tf.contrib.data.CheckpointInputPipelineHook(estimator)]\r\n\r\n    # First Run 1/2\r\n    estimator.train(input_fn=train_input_fn,\r\n                    steps=sample_count // 2 // gpu_count,\r\n                    hooks=hooks)\r\n\r\n    # Reinit Hook\r\n    if reinit_hook:\r\n        hooks = [tf.contrib.data.CheckpointInputPipelineHook(estimator)]\r\n\r\n    # Second Run 1/2\r\n    estimator.train(input_fn=train_input_fn,\r\n                    steps=sample_count // 2 // gpu_count,\r\n                    hooks=hooks)\r\n\r\n\r\ndef train_input_fn():\r\n    return tf.data.Dataset \\\r\n        .range(sample_count) \\\r\n        .map(lambda x: (x, x * 2)) \\\r\n        .batch(1) \\\r\n        .repeat(1)\r\n\r\n\r\ndef model_fn(features, labels, mode):\r\n    input_layer = tf.cast(tf.reshape(features, [-1, 1]), tf.float32)\r\n    expected_output = tf.cast(tf.reshape(labels, [-1, 1]), tf.float32)\r\n\r\n    logit = tf.layers.dense(input_layer, 1, None, False)\r\n    loss = tf.losses.mean_squared_error(expected_output, logit)\r\n\r\n    logging_hook = tf.train.LoggingTensorHook(tensors={\"feature_value\": features.name}, every_n_iter=1)\r\n\r\n    if mode == tf.estimator.ModeKeys.TRAIN:\r\n        optimizer = tf.train.AdamOptimizer(0.001)\r\n        train_op = optimizer.minimize(loss=loss, global_step=tf.train.get_global_step())\r\n        return tf.estimator.EstimatorSpec(mode=mode,\r\n                                          loss=loss,\r\n                                          train_op=train_op,\r\n                                          training_hooks=[logging_hook])\r\n\r\n\r\nif __name__ == '__main__':\r\n    tf.logging.set_verbosity(tf.logging.DEBUG)\r\n\r\n    # Expected:\r\n    # Train First Run: 4 steps -> features 0 to 3\r\n    # Save checkpoint model-ckpt and input-ckpt 4\r\n    # Restore model-ckpt and input-ckpt 4\r\n    # Train Second Run: 4 steps -> features 4 to 7\r\n    # Save checkpoint 8\r\n\r\n    # run_1: 1 gpu / no distribution strategy / Only one init of the hook\r\n    # Actual KO: dataset restarts from 0\r\n    # \r\n    # Train First Run: 4 steps -> features 0 to 3\r\n    # Save checkpoint model-ckpt and input-ckpt 4\r\n    # Restore model-ckpt 4\r\n    # Train Second Run: 4 steps -> features 0 to 3\r\n    # Save checkpoint 8\r\n    run(model_dir='output_run_1', reinit_hook=False, distribution_strategy=False)\r\n\r\n    # run_2: 1 gpu / no distribution strategy / reinit of the hook between two trainings\r\n    # Actual OK\r\n    # Train First Run: 4 steps -> features 0 to 3\r\n    # Save checkpoint model-ckpt and input-ckpt 4\r\n    # Restore model-ckpt and input-ckpt 4\r\n    # Train Second Run: 4 steps -> features 4 to 7\r\n    # Save checkpoint 8\r\n    run(model_dir='output_run_2', reinit_hook=True, distribution_strategy=False)\r\n\r\n    # run_3:\r\n    # Actual KO: dataset restarts from iterator state step + 1\r\n    # Train First Run: 4 steps -> features 0 to 3\r\n    # Save checkpoint model-ckpt and input-ckpt 4\r\n    # Restore model-ckpt and input-ckpt 4\r\n    # Train Second Run: 3 steps -> features 5 to 7\r\n    # Save checkpoint 7\r\n    run(model_dir='output_run_3', reinit_hook=True, distribution_strategy=True)\r\n\r\n    # run_4:\r\n    # Actual KO: dataset restarts from iterator state step + 1\r\n    # Train First Run: 2 steps -> features 0 to 3\r\n    # Save checkpoint model-ckpt and input-ckpt 2\r\n    # Restore model-ckpt and input-ckpt 2\r\n    # Train Second Run: 1 steps -> features 6 to 7\r\n    # Save checkpoint 3\r\n    run(model_dir='output_run_4', reinit_hook=True, distribution_strategy=True, gpu_count=2)\r\n```\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24404", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24404/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24404/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/24404/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/24404", "id": 391801233, "node_id": "MDU6SXNzdWUzOTE4MDEyMzM=", "number": 24404, "title": "Support SparseReduceSum on GPU ", "user": {"login": "sh1ng", "id": 2821871, "node_id": "MDQ6VXNlcjI4MjE4NzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/2821871?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sh1ng", "html_url": "https://github.com/sh1ng", "followers_url": "https://api.github.com/users/sh1ng/followers", "following_url": "https://api.github.com/users/sh1ng/following{/other_user}", "gists_url": "https://api.github.com/users/sh1ng/gists{/gist_id}", "starred_url": "https://api.github.com/users/sh1ng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sh1ng/subscriptions", "organizations_url": "https://api.github.com/users/sh1ng/orgs", "repos_url": "https://api.github.com/users/sh1ng/repos", "events_url": "https://api.github.com/users/sh1ng/events{/privacy}", "received_events_url": "https://api.github.com/users/sh1ng/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2018-12-17T16:52:37Z", "updated_at": "2019-07-17T01:35:01Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 1.12.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nFrom a generated trace I see that tensorflow performs SparseReduceSum on CPU while the rest of computation on GPU. I'm using `tf.sparse.reduce_sum`\r\n\r\n**Will this change the current api? How?**\r\nNo\r\n\r\n**Who will benefit with this feature?**\r\nEveryone, reduction on CPU kills performance completely. \r\n\r\n**Any Other info.**\r\nCould you point to data structures and/or algorithms that you are going to use, if any?\r\n"}]