[{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37584", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37584/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37584/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37584/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37584", "id": 580915898, "node_id": "MDU6SXNzdWU1ODA5MTU4OTg=", "number": 37584, "title": "tf.linalg.triangular_solve segfaults instead of broadcasting", "user": {"login": "st--", "id": 5763727, "node_id": "MDQ6VXNlcjU3NjM3Mjc=", "avatar_url": "https://avatars0.githubusercontent.com/u/5763727?v=4", "gravatar_id": "", "url": "https://api.github.com/users/st--", "html_url": "https://github.com/st--", "followers_url": "https://api.github.com/users/st--/followers", "following_url": "https://api.github.com/users/st--/following{/other_user}", "gists_url": "https://api.github.com/users/st--/gists{/gist_id}", "starred_url": "https://api.github.com/users/st--/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/st--/subscriptions", "organizations_url": "https://api.github.com/users/st--/orgs", "repos_url": "https://api.github.com/users/st--/repos", "events_url": "https://api.github.com/users/st--/events{/privacy}", "received_events_url": "https://api.github.com/users/st--/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "amahendrakar", "id": 57165142, "node_id": "MDQ6VXNlcjU3MTY1MTQy", "avatar_url": "https://avatars1.githubusercontent.com/u/57165142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amahendrakar", "html_url": "https://github.com/amahendrakar", "followers_url": "https://api.github.com/users/amahendrakar/followers", "following_url": "https://api.github.com/users/amahendrakar/following{/other_user}", "gists_url": "https://api.github.com/users/amahendrakar/gists{/gist_id}", "starred_url": "https://api.github.com/users/amahendrakar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amahendrakar/subscriptions", "organizations_url": "https://api.github.com/users/amahendrakar/orgs", "repos_url": "https://api.github.com/users/amahendrakar/repos", "events_url": "https://api.github.com/users/amahendrakar/events{/privacy}", "received_events_url": "https://api.github.com/users/amahendrakar/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "amahendrakar", "id": 57165142, "node_id": "MDQ6VXNlcjU3MTY1MTQy", "avatar_url": "https://avatars1.githubusercontent.com/u/57165142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amahendrakar", "html_url": "https://github.com/amahendrakar", "followers_url": "https://api.github.com/users/amahendrakar/followers", "following_url": "https://api.github.com/users/amahendrakar/following{/other_user}", "gists_url": "https://api.github.com/users/amahendrakar/gists{/gist_id}", "starred_url": "https://api.github.com/users/amahendrakar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amahendrakar/subscriptions", "organizations_url": "https://api.github.com/users/amahendrakar/orgs", "repos_url": "https://api.github.com/users/amahendrakar/repos", "events_url": "https://api.github.com/users/amahendrakar/events{/privacy}", "received_events_url": "https://api.github.com/users/amahendrakar/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-03-13T22:57:34Z", "updated_at": "2020-03-17T06:58:26Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code: no\r\n- OS Platform and Distribution: Linux Ubuntu 18.04\r\n- TensorFlow installed from: pip install tensorflow\r\n- TensorFlow version: v2.1.0-rc2-17-ge5bf8de 2.1.0\r\n- Python version: 3.7.6\r\n\r\n**Describe the current behavior**\r\n\r\n`tf.linalg.triangular_solve` segfaults when the shapes don't match *and* tf.linalg.triangular_solve hasn't been run before (if it has successfully been run before, it raises an InvalidArgumentError instead).\r\n\r\n**Describe the expected behavior**\r\n\r\nNot to segfault. Ideally, to broadcast!\r\n\r\n**Standalone code to reproduce the issue**\r\n\r\n```python\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\nshape1 = (3, 3)\r\nshape2 = (1, 3, 3)\r\n\r\n# works either way around\r\nif np.random.rand() < 0.5: shape1, shape2 = shape2, shape1\r\n\r\nLA = tf.convert_to_tensor(np.tril(np.random.randn(*shape1)))\r\nB = tf.convert_to_tensor(np.random.randn(*shape2))\r\n\r\nsegfault = True\r\nif segfault:\r\n    tf.linalg.triangular_solve(LA, B, lower=True)  # segfaults\r\nelse:\r\n    tf.linalg.triangular_solve(tf.squeeze(LA), tf.squeeze(B), lower=True)  # works fine\r\n    tf.linalg.triangular_solve(LA, B, lower=True)  # raises InvalidArgumentError\r\n```\r\n\r\nMay be related to #25391"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37583", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37583/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37583/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37583/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37583", "id": 580904661, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg4MDM2MDYy", "number": 37583, "title": "Added drop_first feature to to_categorical", "user": {"login": "jaketae", "id": 25360440, "node_id": "MDQ6VXNlcjI1MzYwNDQw", "avatar_url": "https://avatars1.githubusercontent.com/u/25360440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaketae", "html_url": "https://github.com/jaketae", "followers_url": "https://api.github.com/users/jaketae/followers", "following_url": "https://api.github.com/users/jaketae/following{/other_user}", "gists_url": "https://api.github.com/users/jaketae/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaketae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaketae/subscriptions", "organizations_url": "https://api.github.com/users/jaketae/orgs", "repos_url": "https://api.github.com/users/jaketae/repos", "events_url": "https://api.github.com/users/jaketae/events{/privacy}", "received_events_url": "https://api.github.com/users/jaketae/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 522623856, "node_id": "MDU6TGFiZWw1MjI2MjM4NTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/API%20review", "name": "API review", "color": "d4c5f9", "default": false, "description": null}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-03-13T22:34:25Z", "updated_at": "2020-03-18T22:09:53Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37583", "html_url": "https://github.com/tensorflow/tensorflow/pull/37583", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37583.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37583.patch"}, "body": "Pandas offers a `drop_first` argument as part of its [`get_dummies`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.get_dummies.html) function, which is comparable to TensorFlow's `to_categorical`. `drop_first` allows users to drop the first column of their one-hot vectorized binary matrix, since the first dimension can be considered a form of extraneous information. Added this feature into the current version of `to_categorical`, alongside an example in the docstring."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37581", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37581/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37581/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37581/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37581", "id": 580757105, "node_id": "MDU6SXNzdWU1ODA3NTcxMDU=", "number": 37581, "title": "tf.keras.Model.fit() training fails, custom training loop succeeds for identical model, optimizer, and loss function", "user": {"login": "JIMonroe", "id": 7297977, "node_id": "MDQ6VXNlcjcyOTc5Nzc=", "avatar_url": "https://avatars0.githubusercontent.com/u/7297977?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JIMonroe", "html_url": "https://github.com/JIMonroe", "followers_url": "https://api.github.com/users/JIMonroe/followers", "following_url": "https://api.github.com/users/JIMonroe/following{/other_user}", "gists_url": "https://api.github.com/users/JIMonroe/gists{/gist_id}", "starred_url": "https://api.github.com/users/JIMonroe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JIMonroe/subscriptions", "organizations_url": "https://api.github.com/users/JIMonroe/orgs", "repos_url": "https://api.github.com/users/JIMonroe/repos", "events_url": "https://api.github.com/users/JIMonroe/events{/privacy}", "received_events_url": "https://api.github.com/users/JIMonroe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-03-13T17:56:42Z", "updated_at": "2020-03-16T14:01:53Z", "closed_at": null, "author_association": "NONE", "body": "### System information \r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: \r\nYes, but can reproduce with (almost) stock example script\r\n\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\nMacOS Mojave and CentOS 7\r\n\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\nN/A\r\n\r\n- **TensorFlow installed from (source or binary)**:\r\nbinary\r\n\r\n- **TensorFlow version (use command below)**:\r\nv2.1.0-rc2-17-ge5bf8de 2.1.0\r\n\r\n- **Python version**:\r\n3.7.4\r\n\r\n- **Bazel version (if compiling from source)**:\r\nN/A\r\n\r\n- **GCC/Compiler version (if compiling from source)**:\r\nN/A\r\n\r\n- **CUDA/cuDNN version**:\r\n10.1, but have also validated on CPU\r\n\r\n- **GPU model and memory**:\r\nGeForce RTX 2080TI\r\n\r\n- **Exact command to reproduce**:\r\nSee script below.\r\n\r\n### Describe the problem\r\nWhen training the same model with the same data, loss function, and optimizer, significantly different performance is obtained when using the built in training loops from tf.keras.Model.fit() versus implementing the training loop manually. This is clear by comparing the output of these two cases for the VAE example code provided at [Writing custom layers and models](https://www.tensorflow.org/guide/keras/custom_layers_and_models), which is reproduced below with minimal alterations. The issue becomes more clear when using a BinaryCrossentropy loss rather than MSE loss, and I have also reproduced it with custom loss functions. Obviously, the ability of users to detect the bug will depend on the data, loss function, optimizer, and extent of training. However, it should be possible to obtain the same performance between a simple custom training loop and the fit() method, as advertised in the documentation at the link above. Additionally, it is concerning that the recommended option (i.e. the fit() method) performs more poorly to the alternative, even with many more iterations (I have tried many, many iterations). Perhaps the fit() method is implementing additional loss terms not easily exposed to the user that are modifying the optimization landscape and subsequently the convergence behavior? The results are robust across multiple runs and (presumably) different random number seeds.\r\n\r\n### Source code / logs\r\nA script to reproduce is provided, making use of the dsprites data set through tensorflow_datasets. This example is likely not minimal, but it consistently reproduces the bug. Image reproductions with the trained VAE models are also included for the two training cases\r\n\r\n```python\r\n\r\nimport tensorflow as tf\r\nfrom tensorflow.keras import layers\r\nimport tensorflow_datasets as tfds\r\nimport numpy as np\r\nimport matplotlib.pyplot as plt\r\n\r\nclass Sampling(layers.Layer):\r\n  \"\"\"Uses (z_mean, z_log_var) to sample z, the vector encoding a digit.\"\"\"\r\n\r\n  def call(self, inputs):\r\n    z_mean, z_log_var = inputs\r\n    batch = tf.shape(z_mean)[0]\r\n    dim = tf.shape(z_mean)[1]\r\n    epsilon = tf.keras.backend.random_normal(shape=(batch, dim))\r\n    return z_mean + tf.exp(0.5 * z_log_var) * epsilon\r\n\r\n\r\nclass Encoder(layers.Layer):\r\n  \"\"\"Maps MNIST digits to a triplet (z_mean, z_log_var, z).\"\"\"\r\n\r\n  def __init__(self,\r\n               latent_dim=32,\r\n               intermediate_dim=64,\r\n               name='encoder',\r\n               **kwargs):\r\n    super(Encoder, self).__init__(name=name, **kwargs)\r\n    self.dense_proj = layers.Dense(intermediate_dim, activation='relu')\r\n    self.dense_mean = layers.Dense(latent_dim)\r\n    self.dense_log_var = layers.Dense(latent_dim)\r\n    self.sampling = Sampling()\r\n\r\n  def call(self, inputs):\r\n    x = self.dense_proj(inputs)\r\n    z_mean = self.dense_mean(x)\r\n    z_log_var = self.dense_log_var(x)\r\n    z = self.sampling((z_mean, z_log_var))\r\n    return z_mean, z_log_var, z\r\n\r\n\r\nclass Decoder(layers.Layer):\r\n  \"\"\"Converts z, the encoded digit vector, back into a readable digit.\"\"\"\r\n\r\n  def __init__(self,\r\n               original_dim,\r\n               intermediate_dim=64,\r\n               name='decoder',\r\n               **kwargs):\r\n    super(Decoder, self).__init__(name=name, **kwargs)\r\n    self.dense_proj = layers.Dense(intermediate_dim, activation='relu')\r\n    self.dense_output = layers.Dense(original_dim, activation='sigmoid')\r\n\r\n  def call(self, inputs):\r\n    x = self.dense_proj(inputs)\r\n    return self.dense_output(x)\r\n\r\n\r\nclass VariationalAutoEncoder(tf.keras.Model):\r\n  \"\"\"Combines the encoder and decoder into an end-to-end model for training.\"\"\"\r\n\r\n  def __init__(self,\r\n               original_dim,\r\n               intermediate_dim=64,\r\n               latent_dim=32,\r\n               name='autoencoder',\r\n               **kwargs):\r\n    super(VariationalAutoEncoder, self).__init__(name=name, **kwargs)\r\n    self.original_dim = original_dim\r\n    self.encoder = Encoder(latent_dim=latent_dim,\r\n                           intermediate_dim=intermediate_dim)\r\n    self.decoder = Decoder(original_dim, intermediate_dim=intermediate_dim)\r\n\r\n  def call(self, inputs):\r\n    z_mean, z_log_var, z = self.encoder(inputs)\r\n    reconstructed = self.decoder(z)\r\n    # Add KL divergence regularization loss.\r\n    kl_loss = - 0.5 * tf.reduce_mean(\r\n        z_log_var - tf.square(z_mean) - tf.exp(z_log_var) + 1)\r\n    self.add_loss(kl_loss)\r\n    return reconstructed\r\n\r\n\r\ndef plotRecons(model, dat, savePlot=None):\r\n  \"\"\"Plots reconstructions of provided images.\r\n  \"\"\"\r\n  fig, ax = plt.subplots(len(list(dat)), 2)\r\n  for i, im in enumerate(dat):\r\n    ax[i,0].imshow(im[:,:,0], cmap='gray_r', vmin=0.0, vmax=1.0)\r\n    thisrecon = model(tf.cast(tf.reshape(im, (1,4096)), 'float32'))\r\n    thisrecon = np.reshape(thisrecon, (64,64))\r\n    randomIm = np.random.random(thisrecon.shape)\r\n    #thisrecon = np.array((thisrecon > randomIm), dtype=int)\r\n    ax[i,1].imshow(thisrecon, cmap='gray_r', vmin=0.0, vmax=1.0)\r\n    ax[i,0].tick_params(axis='both', which='both',\r\n                        left=False, right=False, bottom=False, top=False,\r\n                        labelleft=False, labelbottom=False,\r\n                        labelright=False, labeltop=False)\r\n    ax[i,1].tick_params(axis='both', which='both',\r\n                        left=False, right=False, bottom=False, top=False,\r\n                        labelleft=False, labelbottom=False,\r\n                        labelright=False, labeltop=False)\r\n\r\n  fig.tight_layout()\r\n  if savePlot is not None:\r\n    fig.savefig(savePlot)\r\n  plt.show()\r\n\r\n\r\ndef trainCustom(train_dataset, epochs=2, original_dim=4096):\r\n  vae = VariationalAutoEncoder(original_dim, 64, 32)\r\n  \r\n  optimizer = tf.keras.optimizers.Adam(learning_rate=1e-3)\r\n  #loss_fn = tf.keras.losses.MeanSquaredError()\r\n  loss_fn = tf.keras.losses.BinaryCrossentropy(from_logits=False,\r\n                                               reduction=tf.keras.losses.Reduction.SUM)\r\n\r\n  # Iterate over epochs.\r\n  for epoch in range(epochs):\r\n    print('Start of epoch %d' % (epoch,))\r\n  \r\n    # Iterate over the batches of the dataset.\r\n    for step, x_batch_train in enumerate(train_dataset):\r\n      with tf.GradientTape() as tape:\r\n        reconstructed = vae(x_batch_train)\r\n        # Compute reconstruction loss\r\n        loss = loss_fn(x_batch_train, reconstructed)\r\n        loss += sum(vae.losses)  # Add KLD regularization loss\r\n  \r\n      grads = tape.gradient(loss, vae.trainable_weights)\r\n      optimizer.apply_gradients(zip(grads, vae.trainable_weights))\r\n  \r\n      if step % 1000 == 0:\r\n        print('step %s: mean loss = %s' % (step, loss))\r\n  \r\n  return vae\r\n\r\n\r\ndef trainBuiltIn(train_dataset, epochs=2, original_dim=4096):\r\n  vae = VariationalAutoEncoder(original_dim, 64, 32)\r\n  \r\n  optimizer = tf.keras.optimizers.Adam(learning_rate=1e-3)\r\n  \r\n  vae.compile(optimizer, #loss=tf.keras.losses.MeanSquaredError())\r\n              loss=tf.keras.losses.BinaryCrossentropy(from_logits=False,\r\n                                                      reduction=tf.keras.losses.Reduction.SUM))\r\n\r\n  zipdata = tf.data.Dataset.zip((train_dataset, train_dataset))\r\n\r\n  vae.fit(zipdata, epochs=epochs)\r\n\r\n  return vae\r\n\r\n\r\ndef main():\r\n\r\n  def flatImFromDict(adict):\r\n    return tf.squeeze(tf.reshape(tf.cast(adict['image'], 'float32'), (-1, 4096)))\r\n\r\n  trainDataRaw = tfds.load(\"dsprites\", split=\"train\")\r\n  trainData = trainDataRaw.map(flatImFromDict)\r\n  trainData = trainData.shuffle(buffer_size=64).batch(64, drop_remainder=True)\r\n  plotData = [tf.cast(adict['image'], 'float32') for i, adict in enumerate(trainDataRaw) if i<5]\r\n\r\n  #First test custom, well-controlled loop\r\n  vaeCustom = trainCustom(trainData, epochs=2)\r\n  plotRecons(vaeCustom, plotData, savePlot='recons_custom.png')\r\n\r\n  #Next look at build in loops with fit function\r\n  vaeBuiltIn = trainBuiltIn(trainData, epochs=2)\r\n  plotRecons(vaeBuiltIn, plotData, savePlot='recons_built-in.png')\r\n\r\n\r\nif __name__==\"__main__\":\r\n  main()\r\n\r\n```\r\n\r\n![recons_built-in_CrossEntropy](https://user-images.githubusercontent.com/7297977/76646659-b7d1bc00-6531-11ea-9e4d-8d280531121a.png)\r\n![recons_custom_CrossEntropy](https://user-images.githubusercontent.com/7297977/76646661-b86a5280-6531-11ea-916a-4ae20c4b78a8.png)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37580", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37580/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37580/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37580/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37580", "id": 580703711, "node_id": "MDU6SXNzdWU1ODA3MDM3MTE=", "number": 37580, "title": "tf.train.FloatList() on a tensor takes too long", "user": {"login": "kpe", "id": 2535923, "node_id": "MDQ6VXNlcjI1MzU5MjM=", "avatar_url": "https://avatars3.githubusercontent.com/u/2535923?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kpe", "html_url": "https://github.com/kpe", "followers_url": "https://api.github.com/users/kpe/followers", "following_url": "https://api.github.com/users/kpe/following{/other_user}", "gists_url": "https://api.github.com/users/kpe/gists{/gist_id}", "starred_url": "https://api.github.com/users/kpe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kpe/subscriptions", "organizations_url": "https://api.github.com/users/kpe/orgs", "repos_url": "https://api.github.com/users/kpe/repos", "events_url": "https://api.github.com/users/kpe/events{/privacy}", "received_events_url": "https://api.github.com/users/kpe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-03-13T16:13:50Z", "updated_at": "2020-03-17T06:32:36Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: any\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: N/A\r\n- **TensorFlow installed from (source or binary)**: source\r\n- **TensorFlow version (use command below)**: 2.1.x, 1.5.x\r\n- **Python version**: 3.7\r\n- **Bazel version (if compiling from source)**: any\r\n- **GCC/Compiler version (if compiling from source)**: any\r\n- **CUDA/cuDNN version**: any\r\n- **GPU model and memory**: any\r\n- **Exact command to reproduce**: `tf.train.FloatList(value=tf.zeros(int(1e6)))`\r\n\r\n### Describe the problem\r\n\r\nCompare the execution time of those two lines:\r\n```\r\nfeature = tf.train.FloatList(value=tf.zeros(int(1e6)).numpy())\r\n```\r\n```\r\nfeature = tf.train.FloatList(value=tf.zeros(int(1e6)))\r\n```\r\n\r\nThe first one runs as it should, the second one takes ages to complete. (I guess something tries iterating over the tensor in the second case)\r\n\r\nN.B. this is not specific to `FloatList` - its rather numpy vs Tensor value, evaluation something (I don't quite grasp the internals).\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37578", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37578/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37578/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37578/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37578", "id": 580690364, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg3ODUxMDY1", "number": 37578, "title": "Fixes to `Wrapper.get_config` and `Wrapper.from_config`.", "user": {"login": "pandrey-fr", "id": 20681218, "node_id": "MDQ6VXNlcjIwNjgxMjE4", "avatar_url": "https://avatars3.githubusercontent.com/u/20681218?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pandrey-fr", "html_url": "https://github.com/pandrey-fr", "followers_url": "https://api.github.com/users/pandrey-fr/followers", "following_url": "https://api.github.com/users/pandrey-fr/following{/other_user}", "gists_url": "https://api.github.com/users/pandrey-fr/gists{/gist_id}", "starred_url": "https://api.github.com/users/pandrey-fr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pandrey-fr/subscriptions", "organizations_url": "https://api.github.com/users/pandrey-fr/orgs", "repos_url": "https://api.github.com/users/pandrey-fr/repos", "events_url": "https://api.github.com/users/pandrey-fr/events{/privacy}", "received_events_url": "https://api.github.com/users/pandrey-fr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-03-13T15:51:48Z", "updated_at": "2020-03-17T13:46:07Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37578", "html_url": "https://github.com/tensorflow/tensorflow/pull/37578", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37578.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37578.patch"}, "body": "This PR aims at solving two light issues I identified with the `tf.keras.layers.Wrapper` class.\r\n\r\nThis has been tested on both TensorFlow 2.1.0 and 2.2.0-rc0 for Python 3.6.9, both installed using `pip` on a Linux 64-bits system.\r\n\r\n#### 1. Serialization through `get_config`.\r\n\r\n**Issue**: The dict output by `Wrapper.get_config()` is designed to contain the config of the wrapped layer, in a format similar to that output by keras serialization utilities. However, the identifier of that layer (its `class_name`) is currently manually gathered within the `get_config`, which results in bugs such as  custom layers set for registration (using `tf.keras.utils.register_keras_serializable`) not being given their proper identifier.\r\n\r\n**Fix**: I propose to replace the manual creation of the `layer` entry within the returned configuration by a direct call to `serialize_keras_object`.\r\n\r\n**Minimal example**:\r\n```python\r\nimport tensorflow as tf\r\n\r\n@tf.keras.utils.register_keras_serializable(package='test')\r\nclass CustomLayer(tf.keras.layers.Layer):\r\n    def call(self, inputs):\r\n        return inputs\r\n\r\nwrapper = tf.keras.layers.Wrapper(CustomLayer())\r\nconfig = wrapper.get_config()\r\ntf.keras.layers.Wrapper.from_config(config)\r\n```\r\nWhen run before the fix, this fails on the last line, raising `ValueError: Unknown layer: CustomLayer`.\r\nWhen run after the fix, this runs successfully.\r\n\r\n#### 2. Instantiation through `from_config`.\r\n\r\n**Issue**: Contrary to what the source code suggests, `Wrapper.from_config` has side effects on the provided config dictionary; in short, it pops out its `layer` sub-dict.\r\n\r\n**Fix**: Instead of calling `config.copy()`, I suggest using `copy.deepcopy(config)` before popping out the `layer` sub-dict of the (deep copy of the) input config dictionary.\r\n\r\n**Minimal example**:\r\n```python\r\nimport tensorflow as tf\r\n\r\ndense = tf.keras.layers.Dense(32)\r\nwrapper = tf.keras.layers.Wrapper(dense)\r\nconfig = wrapper.get_config()\r\nassert 'layer' in config, 'before wrapper instantiation'\r\ntf.keras.layers.Wrapper.from_config(config)\r\nassert 'layer' in config, 'after wrapper instantiation'\r\n```\r\nWhen run before the fix, the second assertion fails due to the side effect.\r\nWhen run after the fix, this runs successfully."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37577", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37577/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37577/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37577/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37577", "id": 580651691, "node_id": "MDU6SXNzdWU1ODA2NTE2OTE=", "number": 37577, "title": "log(diag_part(x)) vs diag_part(log(x)) difference with Cholesky gradients", "user": {"login": "sethnabarro", "id": 16083139, "node_id": "MDQ6VXNlcjE2MDgzMTM5", "avatar_url": "https://avatars0.githubusercontent.com/u/16083139?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sethnabarro", "html_url": "https://github.com/sethnabarro", "followers_url": "https://api.github.com/users/sethnabarro/followers", "following_url": "https://api.github.com/users/sethnabarro/following{/other_user}", "gists_url": "https://api.github.com/users/sethnabarro/gists{/gist_id}", "starred_url": "https://api.github.com/users/sethnabarro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sethnabarro/subscriptions", "organizations_url": "https://api.github.com/users/sethnabarro/orgs", "repos_url": "https://api.github.com/users/sethnabarro/repos", "events_url": "https://api.github.com/users/sethnabarro/events{/privacy}", "received_events_url": "https://api.github.com/users/sethnabarro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-03-13T14:52:31Z", "updated_at": "2020-03-16T07:33:34Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04): Mac OS Mojave 10.14.5\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if\r\nthe issue happens on mobile device: -\r\n- TensorFlow installed from (source or\r\nbinary): binary (by pip)\r\n- TensorFlow version (use command below): 2.1.0\r\n- Python version: 3.6.6\r\n- Bazel\r\nversion (if compiling from source): -\r\n- GCC/Compiler version (if compiling from\r\nsource): -\r\n- CUDA/cuDNN version: - (running on CPU)\r\n- GPU model and memory: - (running on CPU)\r\n\r\n**Describe the current behavior**\r\nGradients of a variable, whose loss depends on the logarithm of the diagonal of its Cholesky decomposition (`tf.linalg.cholesky()`), can fail depending on the ordering of the `tf.math.log()` and `tf.linalg.diag_part()` operations. `tf.linalg.diag_part(tf.math.log(L))` results in NaN gradients, `tf.math.log(tf.linalg.diag_part(L))` runs as expected (where `L` is the Cholesky decomposition). \r\n\r\n**Describe the expected behavior**\r\n`tf.math.log(tf.linalg.diag_part(L))` and `tf.linalg.diag_part(tf.math.log(L))` should both give rise to the same (correct) gradients. the order of these ops shouldn't matter\r\n\r\n**Standalone code to reproduce the issue** \r\n```\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\n\r\nLR = 0.01\r\nX = tf.random.normal([100, 10], 0., 1.)\r\nLOG2PI = 1.8378770664093453\r\nWITH_BUG = True\r\nN_ITERS = 100\r\n\r\n\r\ndef gaussian_pdf(samples, mean, covariance):\r\n    n = tf.cast(tf.shape(samples)[1], tf.float32)\r\n    L = tf.linalg.cholesky(covariance)\r\n    alpha = tf.linalg.cholesky_solve(L, tf.transpose(samples - mean))\r\n    data_fit = -0.5 * tf.reduce_sum(tf.transpose(alpha) * (samples - mean), -1)\r\n    regulariser_bug = -0.5 * tf.reduce_sum(tf.linalg.diag_part(tf.math.log(L)), axis=-1)\r\n    regulariser_fine = -0.5 * tf.reduce_sum(tf.math.log(tf.linalg.diag_part(L)), axis=-1)\r\n    regulariser = regulariser_bug if WITH_BUG else regulariser_fine\r\n    normaliser = -n * 0.5 * LOG2PI\r\n    return data_fit + regulariser + normaliser\r\n\r\n\r\ndef loss(x, mu, sigma):\r\n    ll = gaussian_pdf(x, mu, sigma)\r\n    return -tf.reduce_mean(ll)\r\n\r\n\r\ncov_np = np.random.normal(size=(10, 10), scale=0.001) + np.eye(10) * 2.\r\ncov_var = tf.Variable(cov_np, dtype=tf.float32)\r\nmean_var = tf.Variable([3.] * 10, dtype=tf.float32)\r\n\r\n\r\ndef train(x):\r\n    with tf.GradientTape() as t:\r\n        nll = loss(x, mean_var, cov_var)\r\n    dm, dsig = t.gradient(nll, [mean_var, cov_var])\r\n    dm_avg, dcov_avg = tf.reduce_mean(dm).numpy(), tf.reduce_mean(dsig).numpy()\r\n    print(f'Avg grads: mu: {dm_avg}, cov: {dcov_avg}')\r\n    mean_var.assign_sub(LR * dm)\r\n    cov_var.assign_sub(LR * dsig)\r\n\r\n\r\nfor _ in range(N_ITERS):\r\n    print(f'Negative log-likelihood: {loss(X, mean_var, cov_var).numpy()}')\r\n    train(X)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37576", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37576/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37576/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37576/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37576", "id": 580637283, "node_id": "MDU6SXNzdWU1ODA2MzcyODM=", "number": 37576, "title": "Add Octave Convolution Layers to tensorflow keras layers", "user": {"login": "AchilleMascia", "id": 32501730, "node_id": "MDQ6VXNlcjMyNTAxNzMw", "avatar_url": "https://avatars3.githubusercontent.com/u/32501730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AchilleMascia", "html_url": "https://github.com/AchilleMascia", "followers_url": "https://api.github.com/users/AchilleMascia/followers", "following_url": "https://api.github.com/users/AchilleMascia/following{/other_user}", "gists_url": "https://api.github.com/users/AchilleMascia/gists{/gist_id}", "starred_url": "https://api.github.com/users/AchilleMascia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AchilleMascia/subscriptions", "organizations_url": "https://api.github.com/users/AchilleMascia/orgs", "repos_url": "https://api.github.com/users/AchilleMascia/repos", "events_url": "https://api.github.com/users/AchilleMascia/events{/privacy}", "received_events_url": "https://api.github.com/users/AchilleMascia/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-03-13T14:28:58Z", "updated_at": "2020-03-16T04:29:33Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n**System information**\r\n- TensorFlow version (you are using): TF 2.1\r\n- Are you willing to contribute it (Yes/No): Yes. And the code change is ready.\r\n\r\n**Describe the feature and the current behavior/state.**\r\n_Feature:_\r\n[Drop an Octave: Reducing Spatial Redundancy in Convolutional Neural Networks with Octave Convolution](http://openaccess.thecvf.com/content_ICCV_2019/papers/Chen_Drop_an_Octave_Reducing_Spatial_Redundancy_in_Convolutional_Neural_Networks_ICCV_2019_paper.pdf)\r\n\r\n_Main idea:_\r\nDecompose the feature maps of the convolutional layers into features of different spatial frequencies which will enlarge the receptive field and reduce the FLOPs and memory cost.\r\n\r\nAdd an implementation of octave convolution layers (OctConv1D, OctConv2D, OctConv3D) and octave transposed convolution layers (OctConv2DTranspose, OctConv3DTranspose) that inherit from an abstract OctConv layer which, in turn, inherits from tf.keras.layers.Layer (same hierarchy as the already existing convolutional layers).\r\nAn octave_add function that takes as input the output of an OctConvND layer (list of two tensors one for  high frequencies and the other for low frequencies) and a tf.keras.layer like Dropout, MaxpoolingND, etc which will be applied on the inputs. The output is the list of the two resulting tensors\r\n\r\nThe backbone of the implementation is based on the following [github repository](https://github.com/CyberZHG/keras-octave-conv) (MIT and \"Anti 996\" licensed) by @CyberZHG\r\n\r\nThe original code has been substantially modified:\r\n - migration from keras to tf.keras\r\n - implementation of an abstract OctaveConv layer to emulate the hierarchy of the already existing Conv layers in TensorFlow\r\n - implementation of the 3D octave convolution layer OctConv3D and the transposed octave convolution layers OctConv2DTranspose, OctConv3DTranspose\r\n - bug fixes (for instance, in the original implementation setting the trainable attribute of the octave convolution layers to False wouldn't freeze the learnable weights)\r\n\r\n_Sample use case of the layers OctConvLayers:_\r\n\r\n```\r\nl1 = Input(shape=(28,28, 1))\r\nl2 = OctaveConv2D(32, (3, 3), activation='relu', low_freq_ratio=0.25)(l1_input) # takes a single input tensor and outputs a list of 2 output tensors (low_freq_ratio > 0)\r\nl3 = octave_add(l2, MaxPooling2D(pool_size=(2, 2)))\r\nl4 = octave_add(l3, Dropout(0.2))\r\nl5 = OctaveConv2D(32, (3, 3), activation='relu', low_freq_ratio=0)(l4) # takes a list of 2 tensors and outputs a tensor (low_freq_ratio = 0)\r\nl6 = Flatten()(l5) # l5 is a tensor so no need to use octave_add\r\n```\r\n\r\n_Current Behavior:_\r\nCurrently tensorflow doesn't have any implementation of the octave convolution layers.\r\n\r\n_Why we need this api:_\r\nThe \"vanilla\" ConvND/ConvNDTranpose layers can be directly replaced by the OctConvND/OctConvNDTranspose layers and simple experiments that will be provided show that models using octave convolutions consistently give better performances than their vanilla versions.\r\nAlso, using octave convolutions will reduce the FLOPs and the memory cost.\r\n\r\n**Will this change the current api? How?**\r\nNo, it won't change the current api.\r\nIt will add 6 new classes to tf.keras.layers (1 abstract, 3 OctConvND and 2 OctConvNDTranspose)\r\n\r\n**Who will benefit with this feature?**\r\nTensorFlow users who are seeking to improve the performances and computational costs of their model with a direct replacement of the vanilla convolutions without any adjustments in the network architecture.\r\n\r\n**Any Other info.**"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37575", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37575/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37575/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37575/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37575", "id": 580608486, "node_id": "MDU6SXNzdWU1ODA2MDg0ODY=", "number": 37575, "title": "Keras model fit with class_weight fails on TPU but not on GPU", "user": {"login": "chris-clem", "id": 36116534, "node_id": "MDQ6VXNlcjM2MTE2NTM0", "avatar_url": "https://avatars0.githubusercontent.com/u/36116534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chris-clem", "html_url": "https://github.com/chris-clem", "followers_url": "https://api.github.com/users/chris-clem/followers", "following_url": "https://api.github.com/users/chris-clem/following{/other_user}", "gists_url": "https://api.github.com/users/chris-clem/gists{/gist_id}", "starred_url": "https://api.github.com/users/chris-clem/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chris-clem/subscriptions", "organizations_url": "https://api.github.com/users/chris-clem/orgs", "repos_url": "https://api.github.com/users/chris-clem/repos", "events_url": "https://api.github.com/users/chris-clem/events{/privacy}", "received_events_url": "https://api.github.com/users/chris-clem/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-03-13T13:41:26Z", "updated_at": "2020-03-19T07:31:13Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow):  yes\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04):  Colab\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if\r\nthe issue happens on mobile device: Colab\r\n- TensorFlow installed from (source or\r\nbinary): Colab\r\n- TensorFlow version (use command below): 2.x in Colab\r\n- Python version: Colab\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source): \r\n- CUDA/cuDNN version: Colab\r\n- GPU model and memory: Colab\r\n\r\n**Describe the current behavior**\r\nIf I use the `class_weight` argument during model.fit(...) with a TPU, I get the following error:\r\n![image](https://user-images.githubusercontent.com/36116534/76622564-07b08300-6532-11ea-81a3-2027161014dc.png)\r\n\r\nIf I change the runtime type to GPU, the model fits fine.  \r\n\r\n**Describe the expected behavior**\r\nDefining  `class_weight` on TPU should not fail if it works on the GPU.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37573", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37573/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37573/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37573/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37573", "id": 580586064, "node_id": "MDU6SXNzdWU1ODA1ODYwNjQ=", "number": 37573, "title": "tf.data.experimental.ignore_errors unintuitive behavior", "user": {"login": "Andreas5739738", "id": 35989246, "node_id": "MDQ6VXNlcjM1OTg5MjQ2", "avatar_url": "https://avatars0.githubusercontent.com/u/35989246?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Andreas5739738", "html_url": "https://github.com/Andreas5739738", "followers_url": "https://api.github.com/users/Andreas5739738/followers", "following_url": "https://api.github.com/users/Andreas5739738/following{/other_user}", "gists_url": "https://api.github.com/users/Andreas5739738/gists{/gist_id}", "starred_url": "https://api.github.com/users/Andreas5739738/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Andreas5739738/subscriptions", "organizations_url": "https://api.github.com/users/Andreas5739738/orgs", "repos_url": "https://api.github.com/users/Andreas5739738/repos", "events_url": "https://api.github.com/users/Andreas5739738/events{/privacy}", "received_events_url": "https://api.github.com/users/Andreas5739738/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-03-13T13:00:26Z", "updated_at": "2020-03-17T09:10:22Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04): Mac OS 10.14\r\n- TensorFlow installed from (source or\r\nbinary): pip install tensorflow\r\n- TensorFlow version (use command below): v2.1.0-rc2-17-ge5bf8de410 2.1.0\r\n- Python version: 3.7.4\r\n\r\n**Describe the current behavior**\r\n\r\nWhen applying tf.data.experimental.ignore_errors() to a dataset which has been limited by take(), the error ignoring is applied before the take(). I.e., dataset.map(potential_error_source).take(N).apply(ignore_errors) always returns N elements. This is unintuitive, because according to the documentation \"produce a dataset that contains the same elements as the input, but silently drops any elements that caused an error.\"\r\n\r\n**Describe the expected behavior**\r\n\r\nExpected behavior would be that dataset.map(potential_error_source).take(N).apply(ignore_errors) takes N elements, and then skips those that caused the error, i.e., resulting in <N elements in case there were errors. If that is not intended or cannot be implemented, at least the documentation should be updated to reflect that ignore_errors takes effect already at the point where the errors are raised.\r\n\r\n**Standalone code to reproduce the issue** \r\n\r\n```\r\ndef generate():\r\n         for i in range(1000):\r\n             yield i\r\n\r\ndef map_fn(x):\r\n    # raise assertion error for uneven numbers\r\n    with tf.control_dependencies([tf.debugging.assert_equal(x % 2, 0)]):\r\n         return x\r\n\r\ndataset = tf.data.Dataset.from_generator(generate,output_types=tf.dtypes.int32).take(100)\r\nlen(list(iter(dataset)))\r\nlen(list(iter(dataset)))\r\n# returns 100\r\ndataset = tf.data.Dataset.from_generator(generate,output_types=tf.dtypes.int32).map(map_fn).take(100).apply(tf.data.experimental.ignore_errors())\r\nlen(list(iter(dataset)))\r\n# returns 100\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37572", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37572/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37572/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37572/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37572", "id": 580580410, "node_id": "MDU6SXNzdWU1ODA1ODA0MTA=", "number": 37572, "title": "cc_toolchain_suite '@androidndk//:toolchain-libcpp' does not contain a toolchain for cpu 'k8'", "user": {"login": "kunalgoyal9", "id": 21281457, "node_id": "MDQ6VXNlcjIxMjgxNDU3", "avatar_url": "https://avatars0.githubusercontent.com/u/21281457?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kunalgoyal9", "html_url": "https://github.com/kunalgoyal9", "followers_url": "https://api.github.com/users/kunalgoyal9/followers", "following_url": "https://api.github.com/users/kunalgoyal9/following{/other_user}", "gists_url": "https://api.github.com/users/kunalgoyal9/gists{/gist_id}", "starred_url": "https://api.github.com/users/kunalgoyal9/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kunalgoyal9/subscriptions", "organizations_url": "https://api.github.com/users/kunalgoyal9/orgs", "repos_url": "https://api.github.com/users/kunalgoyal9/repos", "events_url": "https://api.github.com/users/kunalgoyal9/events{/privacy}", "received_events_url": "https://api.github.com/users/kunalgoyal9/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-03-13T12:49:15Z", "updated_at": "2020-03-19T07:29:23Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): Source\r\n- Python version: 3.7\r\n- Bazel version (if compiling from source): 2.0.0\r\n\r\n**Describe the problem**\r\nI was trying to build tensorflow [camera demo](https://github.com/tensorflow/tensorflow/tree/master/tensorflow/examples/android#building-the-demo-with-tensorflow-from-source) application using bazel.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n1.) I cloned the repo using.\r\n`git clone --recurse-submodules https://github.com/tensorflow/tensorflow.git\r\n` \r\n\r\n2.) Downloaded ndk [14b, 20b ](https://developer.android.com/ndk/downloads/older_releases.html#ndk-14b-downloads)(tried both)\r\n\r\n3.) Build android-sdk 26.0.1\r\n\r\n4.) configured `./WORKSPACE` using `./configure` and specified above mentioned ndk and sdk paths. Also, I specified API levels to their default values.\r\n\r\n5.) Then I tried \r\n\r\n`bazel build --cxxopt='--std=c++11' -c opt //tensorflow/examples/android:tensorflow_demo\r\n`\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nERROR: \r\n\r\n`/home/unreal/.cache/bazel/_bazel_unreal/6de5222c143ce19677cab557a9a28cd8/external/androidndk/BUILD.bazel:41:1: in cc_toolchain_suite rule @androidndk//:toolchain-libcpp: cc_toolchain_suite '@androidndk//:toolchain-libcpp' does not contain a toolchain for cpu 'k8'\r\nERROR: Analysis of target '//tensorflow/examples/android:tensorflow_demo' failed; build aborted: Analysis of target '@androidndk//:toolchain-libcpp' failed; build aborted\r\nINFO: Elapsed time: 2.946s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (107 packages loaded, 8813 targets configured)`\r\n\r\nIt seems like I am missing something for ndk bundle that I downloaded. [Here](https://docs.bazel.build/versions/master/android-ndk.html#integration-with-platforms-and-toolchains) there is something `register_toolchains(\"@androidndk//:all\")` in WORKSPACE, but I don't know what I am missing. \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37571", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37571/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37571/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37571/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37571", "id": 580556479, "node_id": "MDU6SXNzdWU1ODA1NTY0Nzk=", "number": 37571, "title": "Two errors were raised when using mirrored strategy.", "user": {"login": "Crispy13", "id": 47196430, "node_id": "MDQ6VXNlcjQ3MTk2NDMw", "avatar_url": "https://avatars3.githubusercontent.com/u/47196430?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Crispy13", "html_url": "https://github.com/Crispy13", "followers_url": "https://api.github.com/users/Crispy13/followers", "following_url": "https://api.github.com/users/Crispy13/following{/other_user}", "gists_url": "https://api.github.com/users/Crispy13/gists{/gist_id}", "starred_url": "https://api.github.com/users/Crispy13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Crispy13/subscriptions", "organizations_url": "https://api.github.com/users/Crispy13/orgs", "repos_url": "https://api.github.com/users/Crispy13/repos", "events_url": "https://api.github.com/users/Crispy13/events{/privacy}", "received_events_url": "https://api.github.com/users/Crispy13/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-03-13T12:00:37Z", "updated_at": "2020-03-16T08:19:26Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow): \r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04): Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if\r\nthe issue happens on mobile device: \r\n- TensorFlow installed from (source or\r\nbinary): using conda\r\n- TensorFlow version (use command below): 2.1.0\r\n- Python version: 3.7.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from\r\nsource): \r\n- CUDA/cuDNN version: 10.1.243 / 7.6.5\r\n- GPU model and memory: Tesla T4 16GB\r\n\r\n\r\n```\r\nTypeError: An op outside of the function building code is being passed\r\na \"Graph\" tensor. It is possible to have Graph tensors\r\nleak out of the function building context by including a\r\ntf.init_scope in your function building code.\r\nFor example, the following function will fail:\r\n  @tf.function\r\n  def has_init_scope():\r\n    my_constant = tf.constant(1.)\r\n    with tf.init_scope():\r\n      added = my_constant * 2\r\nThe graph tensor has name: Dec_VAE_VDraw_Var/Identity:0\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n...\r\n_SymbolicException: Inputs to eager execution function cannot be Keras symbolic tensors, but found [<tf.Tensor 'Dec_VAE_VDraw_Var/Identity:0' shape=(None, 128) dtype=float32>, <tf.Tensor 'Dec_VAE_VDraw_Mean/Identity:0' shape=(None, 128) dtype=float32>]\r\n\r\n```\r\nreproducible notebook files:\r\nhttps://drive.google.com/file/d/1DzES68HT3-7dlrpH6oo13Q9MgybdjcGm/view?usp=sharing\r\n\r\nWhen i didn't use mirrored strategy and added experimental_tf_function = False as an argument to model.compile, the errors were not raised.\r\n\r\nIt would be glad if you would help me to solve this errors.\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37570", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37570/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37570/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37570/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37570", "id": 580540960, "node_id": "MDU6SXNzdWU1ODA1NDA5NjA=", "number": 37570, "title": "Load a TF model from memory, not file (C/C++)", "user": {"login": "MaartenSneepKNMI", "id": 8833439, "node_id": "MDQ6VXNlcjg4MzM0Mzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/8833439?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MaartenSneepKNMI", "html_url": "https://github.com/MaartenSneepKNMI", "followers_url": "https://api.github.com/users/MaartenSneepKNMI/followers", "following_url": "https://api.github.com/users/MaartenSneepKNMI/following{/other_user}", "gists_url": "https://api.github.com/users/MaartenSneepKNMI/gists{/gist_id}", "starred_url": "https://api.github.com/users/MaartenSneepKNMI/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MaartenSneepKNMI/subscriptions", "organizations_url": "https://api.github.com/users/MaartenSneepKNMI/orgs", "repos_url": "https://api.github.com/users/MaartenSneepKNMI/repos", "events_url": "https://api.github.com/users/MaartenSneepKNMI/events{/privacy}", "received_events_url": "https://api.github.com/users/MaartenSneepKNMI/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-03-13T11:27:17Z", "updated_at": "2020-03-16T14:15:03Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 1.12.0\r\n- Are you willing to contribute it (Yes/No): Yes, if possible.\r\n- C/C++ interface.\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nWe'd like to load model data from memory without file access.\r\n\r\nWe're using TF in a satellite data processing system. One of the requirements dictates that file access is not allowed, we can only load from memory. Of course the model is stored somewhere, but that is very much outside the parts we can reach from where we run, we can only receive the bytestream of that file in a memory block.\r\n\r\nTo meet this requirement, we privately patched version 1.12.0 of TF. Because we like living on the edge, we're also using the C++ (unstable) interface, so we're tied rather hard to this version at the moment. We realise that implementation of this feature request will require changes to our code, but will also make it a lot easier to move to the current version, especially now that the C interface seems to be stable (although statements in different parts on the site are inconsistent).\r\n\r\n**Will this change the current api? How?**\r\n\r\nThis would be an _addition_ to the current interface. I don't see how the external interfaces would need to change, although internally the file loaders may want to use this new interface. \r\n\r\n**Who will benefit with this feature?**\r\n\r\nBesides us, this may also be useful for the Java interface, as apache interfaces usually don't like files either. \r\n\r\n**Any Other info.**\r\n\r\nNone."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37569", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37569/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37569/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37569/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37569", "id": 580519085, "node_id": "MDU6SXNzdWU1ODA1MTkwODU=", "number": 37569, "title": "error while converting from custom SSD_mobilenet to TFLITE", "user": {"login": "deep28vish", "id": 47072039, "node_id": "MDQ6VXNlcjQ3MDcyMDM5", "avatar_url": "https://avatars3.githubusercontent.com/u/47072039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deep28vish", "html_url": "https://github.com/deep28vish", "followers_url": "https://api.github.com/users/deep28vish/followers", "following_url": "https://api.github.com/users/deep28vish/following{/other_user}", "gists_url": "https://api.github.com/users/deep28vish/gists{/gist_id}", "starred_url": "https://api.github.com/users/deep28vish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deep28vish/subscriptions", "organizations_url": "https://api.github.com/users/deep28vish/orgs", "repos_url": "https://api.github.com/users/deep28vish/repos", "events_url": "https://api.github.com/users/deep28vish/events{/privacy}", "received_events_url": "https://api.github.com/users/deep28vish/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-03-13T10:47:24Z", "updated_at": "2020-03-17T16:26:34Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform : windows 10\r\n- TensorFlow installed from : anazonda tf-14\r\n\r\n\r\n```\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime. If those are native TensorFlow operators, you might be able to use the extended runtime by passing --enable_select_tf_ops, or by setting target_ops=TFLITE_BUILTINS,SELECT_TF_OPS when calling tf.lite.TFLiteConverter(). Otherwise, if you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: ADD, CONCATENATION, CONV_2D, DEPTHWISE_CONV_2D, LOGISTIC, RESHAPE. Here is a list of operators for which you will need custom implementations: TFLite_Detection_PostProcess.\r\n```\r\n\r\nusing the file : \r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/lite/python/tflite_convert.py\r\n\r\nand command as : python tflite_convert.py --graph_def_file=D:\\models\\research\\object_detection\\ava_tflite\\tflite_graph.pb --output_file=D:\\models\\research\\object_detection\\ava_tflite\\tf_output --output_format=TFLITE --input_arrays=normalized_input_image_tensor --input_shapes=1,600,600,3 --inference_type=FLOAT --output_arrays=\"TFLite_Detection_PostProcess,TFLite_Detection_PostProcess:1,TFLite_Detection_PostProcess:2,TFLite_Detection_PostProcess:3\" --allow_customs_ops=False\r\n\r\n\r\n\r\nERROR OUTPUT: \r\n\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime. If those are native TensorFlow operators, you might be able to use the extended runtime by passing --enable_select_tf_ops, or by setting target_ops=TFLITE_BUILTINS,SELECT_TF_OPS when calling tf.lite.TFLiteConverter(). Otherwise, if you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: ADD, CONCATENATION, CONV_2D, DEPTHWISE_CONV_2D, LOGISTIC, RESHAPE. Here is a list of operators for which you will need custom implementations: TFLite_Detection_PostProcess.\r\nTraceback (most recent call last):\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\tfgpu14\\Scripts\\toco_from_protos-script.py\", line 10, in <module>\r\n    sys.exit(main())\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\tfgpu14\\lib\\site-packages\\tensorflow\\lite\\toco\\python\\toco_from_protos.py\", line 59, in main\r\n    app.run(main=execute, argv=[sys.argv[0]] + unparsed)\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\tfgpu14\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 40, in run\r\n    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\tfgpu14\\lib\\site-packages\\absl\\app.py\", line 299, in run\r\n    _run_main(main, args)\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\tfgpu14\\lib\\site-packages\\absl\\app.py\", line 250, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"C:\\ProgramData\\Anaconda3\\envs\\tfgpu14\\lib\\site-packages\\tensorflow\\lite\\toco\\python\\toco_from_protos.py\", line 33, in execute\r\n    output_str = tensorflow_wrap_toco.TocoConvert(model_str, toco_str, input_str)\r\nException: We are continually in the process of adding support to TensorFlow Lite for more ops. It would be helpful if you could inform us of how this conversion went by opening a github issue at https://github.com/tensorflow/tensorflow/issues/new?template=40-tflite-op-request.md\r\n and pasting the following:\r\n\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime. If those are native TensorFlow operators, you might be able to use the extended runtime by passing --enable_select_tf_ops, or by setting target_ops=TFLITE_BUILTINS,SELECT_TF_OPS when calling tf.lite.TFLiteConverter(). Otherwise, if you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: ADD, CONCATENATION, CONV_2D, DEPTHWISE_CONV_2D, LOGISTIC, RESHAPE. Here is a list of operators for which you will need custom implementations: TFLite_Detection_PostProcess.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37568", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37568/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37568/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37568/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37568", "id": 580509769, "node_id": "MDU6SXNzdWU1ODA1MDk3Njk=", "number": 37568, "title": "ValueError: Cannot use 'loss/head_conv_0_0' as input to 'Merge_2/MergeSummary' because 'loss/head_conv_0_0' is in a while loop", "user": {"login": "Kirill94a", "id": 10575983, "node_id": "MDQ6VXNlcjEwNTc1OTgz", "avatar_url": "https://avatars0.githubusercontent.com/u/10575983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kirill94a", "html_url": "https://github.com/Kirill94a", "followers_url": "https://api.github.com/users/Kirill94a/followers", "following_url": "https://api.github.com/users/Kirill94a/following{/other_user}", "gists_url": "https://api.github.com/users/Kirill94a/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kirill94a/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kirill94a/subscriptions", "organizations_url": "https://api.github.com/users/Kirill94a/orgs", "repos_url": "https://api.github.com/users/Kirill94a/repos", "events_url": "https://api.github.com/users/Kirill94a/events{/privacy}", "received_events_url": "https://api.github.com/users/Kirill94a/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-03-13T10:31:10Z", "updated_at": "2020-03-16T13:37:23Z", "closed_at": null, "author_association": "NONE", "body": "I try to create my own neural network with several outputs (it follows that there are several target vectors); these target vectors dynamically change during training and depend on the predictions of the neural network. I wrote about this neural network earlier in #37468.\r\n\r\n**System information**\r\n\r\n- OS Platform and Distribution: Debian GNU/Linux 9.11 (stretch)\r\n- TensorFlow version: 2.1.0\r\n\r\nThe program works fine when I run it on CPU. But when running on TPU, it prints an error:\r\n`ValueError: Cannot use 'loss/head_conv_0_0' as input to 'Merge_2/MergeSummary' because 'loss/head_conv_0_0' is in a while loop. See info log for more details.`\r\n\r\nWhat could be the reason of the error?\r\n\r\nHere is the complete code:\r\n```\r\nimport tensorflow.compat.v1 as tf\r\nfrom tensorflow.keras.models import Model\r\nfrom tensorflow.keras.layers import Conv2D, Activation, Input, BatchNormalization, Layer\r\nfrom tensorflow.core.protobuf import rewriter_config_pb2\r\nimport numpy as np\r\nimport tensorflow_datasets as tfds\r\n\r\nheight = 5\r\nwidth = 5\r\nuse_tpu = True\r\ntrain_batch_size = 8 * 8 if use_tpu else 1\r\nsteps = 20000\r\nlearning_rate = 1e-4\r\niterations_per_loop = 100\r\nlog_step_count_steps = 100\r\nuse_async_checkpointing = False\r\nif use_async_checkpointing:\r\n    save_checkpoints_steps = None\r\nelse:\r\n    save_checkpoints_steps = max(500, iterations_per_loop)\r\nmodel_dir=\"gs://my_storage/model\"\r\ndata_dir=\"gs://my_storage/datasets\"\r\ntpu = \"grpc://10.3.101.2:8470\"\r\ngcp_project = \"my_project\"\r\ntpu_zone = \"us-central1\"\r\n\r\nif use_tpu:\r\n    tpu_cluster_resolver = tf.distribute.cluster_resolver.TPUClusterResolver(\r\n                                tpu, zone=tpu_zone, project=gcp_project)\r\n    master = tpu_cluster_resolver.get_master()\r\nelse:\r\n    tpu_cluster_resolver = None\r\n    master = None\r\n\r\nclass Conv2d:\r\n    def __init__(self, x, filters, kernel_size, name, strides=(1, 1), padding='same', activation='relu', reuse=True):\r\n        with tf.variable_scope(name, reuse=reuse):\r\n            self.name = name\r\n            self.x = Conv2D(filters, kernel_size, strides=strides, padding=padding, name=name)(x)\r\n            bn_name = name + '_bn'\r\n            self.x = BatchNormalization(scale=False,\r\n                                        name=bn_name)(self.x)\r\n            ac_name = name + '_ac'\r\n            self.x = Activation(activation=activation, name=ac_name)(self.x)\r\n\r\nclass OutputLayer(Layer):\r\n    def __init__(self, name, **kwargs):\r\n        super(OutputLayer, self).__init__(name=name, **kwargs)\r\n\r\n    def call(self, inputs):\r\n        return inputs\r\n\r\ndef make_input_fn(dataset_fn, params):\r\n\r\n    def input_fn(params):\r\n        x_train = dataset_fn()[0][\"train\"]\r\n        batch_size = params[\"batch_size\"]\r\n        y_true = tf.random.uniform(\r\n                    shape=(8*batch_size, 32*32*8,), minval=0.0, maxval=1.0, dtype=tf.dtypes.float32, seed=7777)\r\n\r\n        def preprocess(x, y):\r\n            x = tf.cast(x, tf.float32) * (1. / 255)\r\n            labels_dic = {}\r\n            for h in range(height):\r\n                for w in range(width):\r\n                    labels_dic[\"head_conv_{}_{}\".format(h, w)] = y_true\r\n            return x, labels_dic\r\n\r\n        dataset = (x_train\r\n                    .map(preprocess, num_parallel_calls=tf.data.experimental.AUTOTUNE)\r\n                    .repeat()\r\n                    .shuffle(128, seed=7777, reshuffle_each_iteration=True)\r\n                    .batch(8*batch_size, drop_remainder=True)\r\n                    .prefetch(-1))\r\n        return dataset\r\n\r\n    return input_fn\r\n\r\ndef get_model(features, input_shape, reuse):\r\n    with tf.variable_scope('model', reuse=reuse):\r\n        inputs = Input(shape=input_shape)\r\n        seqs = []\r\n        n_filters = 8\r\n        for h in range(height):\r\n            seq = []\r\n            for w in range(width):\r\n                if seq == []:\r\n                   if h==0 and w==0: \r\n                        seq.append(Conv2d(inputs, n_filters, (3, 3), name=\"conv_{}_{}\".format(h, w), reuse=reuse))\r\n                   else:\r\n                        seq.append(Conv2d(seqs[-1][0].x, n_filters, (3, 3), name=\"conv_{}_{}\".format(h, w), reuse=reuse))\r\n                else:\r\n                    seq.append(Conv2d(seq[-1].x, n_filters, (3, 3), name=\"conv_{}_{}\".format(h, w), reuse=reuse))\r\n            seqs.append(seq)\r\n        tmp = np.array([x for x in [seq for seq in seqs]]).ravel()\r\n        outputs = []\r\n        heads = []\r\n        for x in tmp:\r\n            outputs.append(OutputLayer(name=\"output_\"+x.name)(x.x))\r\n            heads.append(tf.estimator.RegressionHead(label_dimension=32*32*8, name=\"head_\"+x.name))\r\n\r\n        model = Model(inputs=inputs, outputs=outputs)\r\n        head = tf.estimator.MultiHead(heads)\r\n        opt = tf.keras.optimizers.Adam(learning_rate=learning_rate)\r\n        metrics = ['accuracy']\r\n        model.compile(loss='mean_squared_error',\r\n                          optimizer=opt,\r\n                          metrics=metrics)\r\n        model.summary()\r\n    return model, head\r\n\r\ndef model_fn(features, labels, mode, params):\r\n    batch_size = 8 * params['batch_size']\r\n\r\n    model, head = get_model(features, params['input_shape'], reuse=False)\r\n    logits_train = model(features)\r\n    logits_train_dic = {}\r\n    i = 0\r\n    for h in range(height):\r\n        for w in range(width):\r\n            logits_train[i] = tf.reshape(logits_train[i], (batch_size, 32*32*8,))\r\n            logits_train_dic[\"head_conv_{}_{}\".format(h, w)] = logits_train[i]\r\n            i += 1\r\n    pred_classes = tf.argmax(logits_train, axis=1)\r\n    if mode == tf.estimator.ModeKeys.PREDICT:\r\n        return tf.estimator.tpu.TPUEstimatorSpec(mode, predictions=pred_classes)\r\n\r\n    new_labels = {}\r\n    for key in labels:\r\n        new_labels[key] = labels[key][0]\r\n    loss = 0.0\r\n    for key in logits_train_dic:\r\n        logit_train = logits_train_dic[key]\r\n        loss += tf.square(labels[key]-logit_train)\r\n    loss_op = tf.reduce_mean(loss)\r\n    optimizer = tf.train.AdamOptimizer(learning_rate=params['learning_rate'])\r\n    if params['use_tpu']:\r\n        optimizer = tf.tpu.CrossShardOptimizer(optimizer)\r\n    train_op_fn = lambda loss_op: optimizer.minimize(\r\n                                  loss_op,\r\n                                  global_step=tf.train.get_global_step())\r\n                \r\n    estim_specs = head.create_estimator_spec(\r\n                  features={\"x\": features},\r\n                  labels=new_labels,\r\n                  mode=mode,\r\n                  logits=logits_train_dic,\r\n                  train_op_fn=train_op_fn)\r\n    return estim_specs\r\n\r\ntf.logging.set_verbosity(tf.logging.INFO)\r\ntf.disable_v2_behavior()\r\n\r\ndataset_fn = lambda: tfds.load(\r\n            name='cifar10',\r\n            with_info=True,\r\n            as_supervised=True,\r\n            try_gcs=True,\r\n            data_dir=data_dir)\r\ninfo = dataset_fn()[1]\r\nn_samples = info.splits['train'].get_proto().statistics.num_examples\r\nn_classes = info.features['label'].num_classes\r\ntrain_shape = info.features['image'].shape\r\ntf.config.set_soft_device_placement(True)\r\n\r\nconfig = tf.estimator.tpu.RunConfig(\r\n              master=master,\r\n              model_dir=model_dir,\r\n              save_checkpoints_steps=save_checkpoints_steps,\r\n              log_step_count_steps=log_step_count_steps,\r\n              session_config=tf.ConfigProto(\r\n                  graph_options=tf.GraphOptions(\r\n                      rewrite_options=rewriter_config_pb2.RewriterConfig(\r\n                          disable_meta_optimizer=True))),\r\n              tpu_config=tf.estimator.tpu.TPUConfig(\r\n                  iterations_per_loop=iterations_per_loop,\r\n                  per_host_input_for_training=tf.estimator.tpu.InputPipelineConfig\r\n                  .PER_HOST_V2))\r\n\r\nparams = {\r\n    'use_tpu': use_tpu,\r\n    'input_shape': train_shape,\r\n    'learning_rate': learning_rate\r\n}\r\n\r\nmodel = tf.estimator.tpu.TPUEstimator(\r\n          model_fn, use_tpu=use_tpu,\r\n          config=config,\r\n          train_batch_size=train_batch_size,\r\n          params=params)\r\nmodel.train(make_input_fn(dataset_fn, params), steps=steps)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37567", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37567/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37567/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37567/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37567", "id": 580506106, "node_id": "MDU6SXNzdWU1ODA1MDYxMDY=", "number": 37567, "title": "Cumulative decaying sum", "user": {"login": "Dominik1123", "id": 15989985, "node_id": "MDQ6VXNlcjE1OTg5OTg1", "avatar_url": "https://avatars2.githubusercontent.com/u/15989985?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dominik1123", "html_url": "https://github.com/Dominik1123", "followers_url": "https://api.github.com/users/Dominik1123/followers", "following_url": "https://api.github.com/users/Dominik1123/following{/other_user}", "gists_url": "https://api.github.com/users/Dominik1123/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dominik1123/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dominik1123/subscriptions", "organizations_url": "https://api.github.com/users/Dominik1123/orgs", "repos_url": "https://api.github.com/users/Dominik1123/repos", "events_url": "https://api.github.com/users/Dominik1123/events{/privacy}", "received_events_url": "https://api.github.com/users/Dominik1123/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-03-13T10:24:43Z", "updated_at": "2020-03-13T11:29:59Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 2.1.0\r\n- Are you willing to contribute it (Yes/No): Yes (with some guidance)\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nAdd a new function `cumsum_decay` which computes the cumulative sum along an axis while multiplying the previous element with a scalar decay factor `p`:\r\n\r\n    c_i = x_i + p*c_{i-1}    for i >= 1\r\n    c_i = x_i                for i == 0\r\n\r\nExample interface:\r\n\r\n    def cumsum_decay(x, p, axis=0, exclusive=False, reverse=False, name=None):\r\n\r\nwhere\r\n\r\n* `x, axis, exclusive, reverse, name` are similar to [`tf.math.cumsum`](https://www.tensorflow.org/api_docs/python/tf/math/cumsum),\r\n* `p` is a scalar tensor.\r\n\r\n**Will this change the current api? How?**\r\n\r\nIt will add one function `tf.math.cumsum_decay`.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nDoing this sort of computation comes up repeatedly, for example see these StackExchange questions:\r\n\r\n* [Increasing each element of a tensor by the predecessor in Tensorflow 2.0](https://stackoverflow.com/q/60590333/3767239)\r\n* [Can the cumsum function in NumPy decay while adding?](https://stackoverflow.com/q/28915088/3767239)\r\n* [Parallel or efficient computation of value with momentum](https://cs.stackexchange.com/q/73746/23162)\r\n\r\n**Any Other info.**\r\n\r\nSince I'm not familiar with the tensorflow core, I cannot judge whether this feature is easy to implement based on the implementation of `cumsum`."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37565", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37565/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37565/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37565/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37565", "id": 580455584, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg3NjYwMDQz", "number": 37565, "title": "Added code for preprocessing of YUB images before feeding yub_to_rgb", "user": {"login": "ashutosh1919", "id": 20843596, "node_id": "MDQ6VXNlcjIwODQzNTk2", "avatar_url": "https://avatars3.githubusercontent.com/u/20843596?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ashutosh1919", "html_url": "https://github.com/ashutosh1919", "followers_url": "https://api.github.com/users/ashutosh1919/followers", "following_url": "https://api.github.com/users/ashutosh1919/following{/other_user}", "gists_url": "https://api.github.com/users/ashutosh1919/gists{/gist_id}", "starred_url": "https://api.github.com/users/ashutosh1919/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ashutosh1919/subscriptions", "organizations_url": "https://api.github.com/users/ashutosh1919/orgs", "repos_url": "https://api.github.com/users/ashutosh1919/repos", "events_url": "https://api.github.com/users/ashutosh1919/events{/privacy}", "received_events_url": "https://api.github.com/users/ashutosh1919/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 1178505529, "node_id": "MDU6TGFiZWwxMTc4NTA1NTI5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/prtype:bugfix", "name": "prtype:bugfix", "color": "159b2e", "default": false, "description": "PR to fix a bug"}, {"id": 987666414, "node_id": "MDU6TGFiZWw5ODc2NjY0MTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/ready%20to%20pull", "name": "ready to pull", "color": "2cd643", "default": false, "description": ""}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-03-13T08:48:58Z", "updated_at": "2020-03-13T16:42:13Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37565", "html_url": "https://github.com/tensorflow/tensorflow/pull/37565", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37565.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37565.patch"}, "body": "Fixes [#37067](https://github.com/tensorflow/tensorflow/issues/37067).\r\n@lamberta , @mihaimaruseac - Please review this PR."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37564", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37564/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37564/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37564/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37564", "id": 580445526, "node_id": "MDU6SXNzdWU1ODA0NDU1MjY=", "number": 37564, "title": "Dose TensorFlow has tf.sparse.segment_max? how to code it by customer?", "user": {"login": "wangshang19911011", "id": 21189342, "node_id": "MDQ6VXNlcjIxMTg5MzQy", "avatar_url": "https://avatars1.githubusercontent.com/u/21189342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wangshang19911011", "html_url": "https://github.com/wangshang19911011", "followers_url": "https://api.github.com/users/wangshang19911011/followers", "following_url": "https://api.github.com/users/wangshang19911011/following{/other_user}", "gists_url": "https://api.github.com/users/wangshang19911011/gists{/gist_id}", "starred_url": "https://api.github.com/users/wangshang19911011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wangshang19911011/subscriptions", "organizations_url": "https://api.github.com/users/wangshang19911011/orgs", "repos_url": "https://api.github.com/users/wangshang19911011/repos", "events_url": "https://api.github.com/users/wangshang19911011/events{/privacy}", "received_events_url": "https://api.github.com/users/wangshang19911011/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "Saduf2019", "id": 59822926, "node_id": "MDQ6VXNlcjU5ODIyOTI2", "avatar_url": "https://avatars2.githubusercontent.com/u/59822926?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Saduf2019", "html_url": "https://github.com/Saduf2019", "followers_url": "https://api.github.com/users/Saduf2019/followers", "following_url": "https://api.github.com/users/Saduf2019/following{/other_user}", "gists_url": "https://api.github.com/users/Saduf2019/gists{/gist_id}", "starred_url": "https://api.github.com/users/Saduf2019/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Saduf2019/subscriptions", "organizations_url": "https://api.github.com/users/Saduf2019/orgs", "repos_url": "https://api.github.com/users/Saduf2019/repos", "events_url": "https://api.github.com/users/Saduf2019/events{/privacy}", "received_events_url": "https://api.github.com/users/Saduf2019/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Saduf2019", "id": 59822926, "node_id": "MDQ6VXNlcjU5ODIyOTI2", "avatar_url": "https://avatars2.githubusercontent.com/u/59822926?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Saduf2019", "html_url": "https://github.com/Saduf2019", "followers_url": "https://api.github.com/users/Saduf2019/followers", "following_url": "https://api.github.com/users/Saduf2019/following{/other_user}", "gists_url": "https://api.github.com/users/Saduf2019/gists{/gist_id}", "starred_url": "https://api.github.com/users/Saduf2019/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Saduf2019/subscriptions", "organizations_url": "https://api.github.com/users/Saduf2019/orgs", "repos_url": "https://api.github.com/users/Saduf2019/repos", "events_url": "https://api.github.com/users/Saduf2019/events{/privacy}", "received_events_url": "https://api.github.com/users/Saduf2019/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-03-13T08:26:30Z", "updated_at": "2020-03-13T10:36:13Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using):\r\n- Are you willing to contribute it (Yes/No):\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\n**Will this change the current api? How?**\r\n\r\n**Who will benefit with this feature?**\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37563", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37563/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37563/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37563/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37563", "id": 580436982, "node_id": "MDU6SXNzdWU1ODA0MzY5ODI=", "number": 37563, "title": "large model parallelism on gpu causing oom", "user": {"login": "sjtusmartboy", "id": 12267324, "node_id": "MDQ6VXNlcjEyMjY3MzI0", "avatar_url": "https://avatars2.githubusercontent.com/u/12267324?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjtusmartboy", "html_url": "https://github.com/sjtusmartboy", "followers_url": "https://api.github.com/users/sjtusmartboy/followers", "following_url": "https://api.github.com/users/sjtusmartboy/following{/other_user}", "gists_url": "https://api.github.com/users/sjtusmartboy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjtusmartboy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjtusmartboy/subscriptions", "organizations_url": "https://api.github.com/users/sjtusmartboy/orgs", "repos_url": "https://api.github.com/users/sjtusmartboy/repos", "events_url": "https://api.github.com/users/sjtusmartboy/events{/privacy}", "received_events_url": "https://api.github.com/users/sjtusmartboy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2020-03-13T08:07:18Z", "updated_at": "2020-03-19T01:40:40Z", "closed_at": null, "author_association": "NONE", "body": "We are using v100 with gpu memory of 32 gb to train wide and deep model of size 12gb, facing the problem of gpu out of memory. \r\n\r\nSo we are thinking of the model parallelism to distribute the large model on different gpu, however, all of the current available strategies for model parallelism could not meet our demand.\r\n\r\n1. MirroredStrategy \r\n2. MultiWorkerMirroredStrategy\r\n3. CentralStorageStrategy\r\n4. ParameterServerStrategy\r\n5. TPUStrategy\r\n\r\nFor MirroredStrategy  and MultiWorkerMirroredStrategy, each variable in the model is mirrored across all the replicas, which means that gpu memory of each card is still in shortage. CentralStorageStrategy and ParameterServerStrategy have great communication cost among cpus and gpus. So my question is for our large ctr model is there any solutions to realize model parallelism"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37561", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37561/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37561/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37561/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37561", "id": 580398304, "node_id": "MDU6SXNzdWU1ODAzOTgzMDQ=", "number": 37561, "title": "Function optimizer failed, when use MirroredStrategy.", "user": {"login": "FLming", "id": 22290556, "node_id": "MDQ6VXNlcjIyMjkwNTU2", "avatar_url": "https://avatars0.githubusercontent.com/u/22290556?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FLming", "html_url": "https://github.com/FLming", "followers_url": "https://api.github.com/users/FLming/followers", "following_url": "https://api.github.com/users/FLming/following{/other_user}", "gists_url": "https://api.github.com/users/FLming/gists{/gist_id}", "starred_url": "https://api.github.com/users/FLming/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FLming/subscriptions", "organizations_url": "https://api.github.com/users/FLming/orgs", "repos_url": "https://api.github.com/users/FLming/repos", "events_url": "https://api.github.com/users/FLming/events{/privacy}", "received_events_url": "https://api.github.com/users/FLming/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1903591931, "node_id": "MDU6TGFiZWwxOTAzNTkxOTMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.2", "name": "TF 2.2", "color": "0052cc", "default": false, "description": "Issues related to TF 2.2"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-03-13T06:27:27Z", "updated_at": "2020-03-17T01:07:19Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- OS Platform and Distribution: Ubuntu 18.04\r\n- Python version: 3.6.9\r\n- CUDA/cuDNN version: 2x1080 Ti\r\n- Tensorflow version: 2.2.0rc0\r\n\r\n**Describe the current behavior**\r\nI built a CRNN model for recognize the text, a CNN-RNN-CTC model, it work well without tf.distribute.Strategy, but when I follow the guide to move the creation and compiling of Keras model inside strategy.scope, It does not start distributed training like the guide. here is the output:\r\n```\r\n2020-03-13 06:19:04.839700: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcuda.so.1\r\n2020-03-13 06:19:04.874256: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1561] Found device 0 with properties: \r\npciBusID: 0000:01:00.0 name: GeForce GTX 1080 Ti computeCapability: 6.1\r\ncoreClock: 1.582GHz coreCount: 28 deviceMemorySize: 10.91GiB deviceMemoryBandwidth: 451.17GiB/s\r\n2020-03-13 06:19:04.875077: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1561] Found device 1 with properties: \r\npciBusID: 0000:02:00.0 name: GeForce GTX 1080 Ti computeCapability: 6.1\r\ncoreClock: 1.582GHz coreCount: 28 deviceMemorySize: 10.92GiB deviceMemoryBandwidth: 451.17GiB/s\r\n2020-03-13 06:19:04.875273: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.1\r\n2020-03-13 06:19:04.876811: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10\r\n2020-03-13 06:19:04.878155: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcufft.so.10\r\n2020-03-13 06:19:04.878383: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcurand.so.10\r\n2020-03-13 06:19:04.879998: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusolver.so.10\r\n2020-03-13 06:19:04.881014: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusparse.so.10\r\n2020-03-13 06:19:04.884664: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7\r\n2020-03-13 06:19:04.887439: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1703] Adding visible gpu devices: 0, 1\r\n2020-03-13 06:19:04.887722: I tensorflow/core/platform/cpu_feature_guard.cc:143] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2020-03-13 06:19:04.892905: I tensorflow/core/platform/profile_utils/cpu_utils.cc:102] CPU Frequency: 3598110000 Hz\r\n2020-03-13 06:19:04.893743: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x7f1224000b20 initialized for platform Host (this does not guarantee that XLA will be used). Devices:\r\n2020-03-13 06:19:04.893784: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version\r\n2020-03-13 06:19:05.147750: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x59b91e0 initialized for platform CUDA (this does not guarantee that XLA will be used). Devices:\r\n2020-03-13 06:19:05.147778: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): GeForce GTX 1080 Ti, Compute Capability 6.1\r\n2020-03-13 06:19:05.147788: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (1): GeForce GTX 1080 Ti, Compute Capability 6.1\r\n2020-03-13 06:19:05.150073: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1561] Found device 0 with properties: \r\npciBusID: 0000:01:00.0 name: GeForce GTX 1080 Ti computeCapability: 6.1\r\ncoreClock: 1.582GHz coreCount: 28 deviceMemorySize: 10.91GiB deviceMemoryBandwidth: 451.17GiB/s\r\n2020-03-13 06:19:05.150888: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1561] Found device 1 with properties: \r\npciBusID: 0000:02:00.0 name: GeForce GTX 1080 Ti computeCapability: 6.1\r\ncoreClock: 1.582GHz coreCount: 28 deviceMemorySize: 10.92GiB deviceMemoryBandwidth: 451.17GiB/s\r\n2020-03-13 06:19:05.150926: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.1\r\n2020-03-13 06:19:05.150943: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10\r\n2020-03-13 06:19:05.150958: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcufft.so.10\r\n2020-03-13 06:19:05.150972: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcurand.so.10\r\n2020-03-13 06:19:05.150986: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusolver.so.10\r\n2020-03-13 06:19:05.151000: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusparse.so.10\r\n2020-03-13 06:19:05.151015: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7\r\n2020-03-13 06:19:05.154118: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1703] Adding visible gpu devices: 0, 1\r\n2020-03-13 06:19:05.154160: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.1\r\n2020-03-13 06:19:05.156174: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1102] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2020-03-13 06:19:05.156195: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1108]      0 1 \r\n2020-03-13 06:19:05.156206: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1121] 0:   N Y \r\n2020-03-13 06:19:05.156214: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1121] 1:   Y N \r\n2020-03-13 06:19:05.158304: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1247] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 9569 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080 Ti, pci bus id: 0000:01:00.0, compute capability: 6.1)\r\n2020-03-13 06:19:05.159295: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1247] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:1 with 10369 MB memory) -> physical GPU (device: 1, name: GeForce GTX 1080 Ti, pci bus id: 0000:02:00.0, compute capability: 6.1)\r\nEpoch 1/5\r\n2020-03-13 06:19:20.460244: E tensorflow/core/grappler/optimizers/meta_optimizer.cc:563] function_optimizer failed: Invalid argument: Node 'replica_1/CRNN/bidirectional/forward_lstm/StatefulPartitionedCall_replica_1/StatefulPartitionedCall_2_24': Connecting to invalid output 30 of source node replica_1/CRNN/bidirectional/forward_lstm/StatefulPartitionedCall which has 30 outputs.\r\n```\r\nHere is the model summary:\r\n```\r\nModel: \"CRNN\"\r\n_________________________________________________________________\r\nLayer (type)                 Output Shape              Param #   \r\n=================================================================\r\ninput_1 (InputLayer)         [(None, 32, None, 1)]     0         \r\n_________________________________________________________________\r\nconv2d (Conv2D)              (None, 32, None, 64)      640       \r\n_________________________________________________________________\r\nmax_pooling2d (MaxPooling2D) (None, 16, None, 64)      0         \r\n_________________________________________________________________\r\nconv2d_1 (Conv2D)            (None, 16, None, 128)     73856     \r\n_________________________________________________________________\r\nmax_pooling2d_1 (MaxPooling2 (None, 8, None, 128)      0         \r\n_________________________________________________________________\r\nconv2d_2 (Conv2D)            (None, 8, None, 128)      147584    \r\n_________________________________________________________________\r\nbatch_normalization (BatchNo (None, 8, None, 128)      512       \r\n_________________________________________________________________\r\nactivation (Activation)      (None, 8, None, 128)      0         \r\n_________________________________________________________________\r\nconv2d_3 (Conv2D)            (None, 8, None, 256)      295168    \r\n_________________________________________________________________\r\nmax_pooling2d_2 (MaxPooling2 (None, 4, None, 256)      0         \r\n_________________________________________________________________\r\nconv2d_4 (Conv2D)            (None, 4, None, 512)      1180160   \r\n_________________________________________________________________\r\nbatch_normalization_1 (Batch (None, 4, None, 512)      2048      \r\n_________________________________________________________________\r\nactivation_1 (Activation)    (None, 4, None, 512)      0         \r\n_________________________________________________________________\r\nconv2d_5 (Conv2D)            (None, 4, None, 512)      2359808   \r\n_________________________________________________________________\r\nmax_pooling2d_3 (MaxPooling2 (None, 2, None, 512)      0         \r\n_________________________________________________________________\r\nconv2d_6 (Conv2D)            (None, 1, None, 512)      1049088   \r\n_________________________________________________________________\r\nbatch_normalization_2 (Batch (None, 1, None, 512)      2048      \r\n_________________________________________________________________\r\nactivation_2 (Activation)    (None, 1, None, 512)      0         \r\n_________________________________________________________________\r\nreshape (Reshape)            (None, None, 512)         0         \r\n_________________________________________________________________\r\nbidirectional (Bidirectional (None, None, 512)         1574912   \r\n_________________________________________________________________\r\nbidirectional_1 (Bidirection (None, None, 512)         1574912   \r\n_________________________________________________________________\r\ndense (Dense)                (None, None, 10)          5130      \r\n=================================================================\r\nTotal params: 8,265,866\r\nTrainable params: 8,263,562\r\nNon-trainable params: 2,304\r\n_________________________________________________________________\r\n```\r\nThe training process seems to be interrupted without any output, but the program runs out of graphics card memory and the program does not exit.\r\n**Describe the expected behavior**\r\nStart distributed training just like guide.\r\n\r\n**Standalone code to reproduce the issue** \r\nThe full code can be view [here](https://github.com/FLming/CRNN.tf2)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37559", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37559/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37559/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37559/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37559", "id": 580382220, "node_id": "MDU6SXNzdWU1ODAzODIyMjA=", "number": 37559, "title": "TF_FORCE_GPU_ALLOW_GROWTH=false Triggers cuDNN Error", "user": {"login": "6etacat", "id": 15188392, "node_id": "MDQ6VXNlcjE1MTg4Mzky", "avatar_url": "https://avatars3.githubusercontent.com/u/15188392?v=4", "gravatar_id": "", "url": "https://api.github.com/users/6etacat", "html_url": "https://github.com/6etacat", "followers_url": "https://api.github.com/users/6etacat/followers", "following_url": "https://api.github.com/users/6etacat/following{/other_user}", "gists_url": "https://api.github.com/users/6etacat/gists{/gist_id}", "starred_url": "https://api.github.com/users/6etacat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/6etacat/subscriptions", "organizations_url": "https://api.github.com/users/6etacat/orgs", "repos_url": "https://api.github.com/users/6etacat/repos", "events_url": "https://api.github.com/users/6etacat/events{/privacy}", "received_events_url": "https://api.github.com/users/6etacat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-03-13T05:35:16Z", "updated_at": "2020-03-16T20:00:32Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): **No, using tutorial classification example**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): **Manjaro (kernel 5.4.18)**\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: \r\n- TensorFlow installed from (source or binary): **conda binary**\r\n- TensorFlow version (use command below): **2.1.0**\r\n- Python version: **3.7.6**\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from\r\nsource): \r\n- CUDA/cuDNN version: **CUDA 10.1 / cuDNN 7.6.5**\r\n- GPU model and memory: **RTX 2070, 8GB**\r\n\r\n**Describe the current behavior**\r\n\r\nClassification fail to train if `TF_FORCE_GPU_ALLOW_GROWTH` not set to true. It raises: \r\n\r\n`tensorflow.python.framework.errors_impl.UnknownError:  Failed to get convolution algorithm. This is probably because cuDNN failed to initialize, so try looking to see if a warning log message was printed above.`\r\n\r\nI suspect cuDNN is asking for more memory after Tensorflow has already allocated all available memory. An easy but hacky fix is to set `TF_FORCE_GPU_ALLOW_GROWTH` to true by default and asking users to set it to false when they need max performance. It makes sense to ensure that the model would always run rather than ensuring that it would run with max efficiency. However, we should address this issue from the core. \r\n\r\n**Describe the expected behavior**\r\n\r\nModel would train like when `TF_FORCE_GPU_ALLOW_GROWTH` is set to true. \r\n\r\n**Standalone code to reproduce the issue**\r\n\r\nRun classification.ipynb on [the tutorial](https://www.tensorflow.org/tutorials/images/classification) without setting `TF_FORCE_GPU_ALLOW_GROWTH`. \r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\n\r\n[error_log.txt](https://github.com/tensorflow/tensorflow/files/4328031/log.txt)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37556", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37556/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37556/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37556/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37556", "id": 580299663, "node_id": "MDU6SXNzdWU1ODAyOTk2NjM=", "number": 37556, "title": "TF 2 equivalent for report_tensor_allocations_upon_oom", "user": {"login": "sarthfrey-db", "id": 59618644, "node_id": "MDQ6VXNlcjU5NjE4NjQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/59618644?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sarthfrey-db", "html_url": "https://github.com/sarthfrey-db", "followers_url": "https://api.github.com/users/sarthfrey-db/followers", "following_url": "https://api.github.com/users/sarthfrey-db/following{/other_user}", "gists_url": "https://api.github.com/users/sarthfrey-db/gists{/gist_id}", "starred_url": "https://api.github.com/users/sarthfrey-db/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sarthfrey-db/subscriptions", "organizations_url": "https://api.github.com/users/sarthfrey-db/orgs", "repos_url": "https://api.github.com/users/sarthfrey-db/repos", "events_url": "https://api.github.com/users/sarthfrey-db/events{/privacy}", "received_events_url": "https://api.github.com/users/sarthfrey-db/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ravikyram", "id": 51902062, "node_id": "MDQ6VXNlcjUxOTAyMDYy", "avatar_url": "https://avatars2.githubusercontent.com/u/51902062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ravikyram", "html_url": "https://github.com/ravikyram", "followers_url": "https://api.github.com/users/ravikyram/followers", "following_url": "https://api.github.com/users/ravikyram/following{/other_user}", "gists_url": "https://api.github.com/users/ravikyram/gists{/gist_id}", "starred_url": "https://api.github.com/users/ravikyram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ravikyram/subscriptions", "organizations_url": "https://api.github.com/users/ravikyram/orgs", "repos_url": "https://api.github.com/users/ravikyram/repos", "events_url": "https://api.github.com/users/ravikyram/events{/privacy}", "received_events_url": "https://api.github.com/users/ravikyram/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ravikyram", "id": 51902062, "node_id": "MDQ6VXNlcjUxOTAyMDYy", "avatar_url": "https://avatars2.githubusercontent.com/u/51902062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ravikyram", "html_url": "https://github.com/ravikyram", "followers_url": "https://api.github.com/users/ravikyram/followers", "following_url": "https://api.github.com/users/ravikyram/following{/other_user}", "gists_url": "https://api.github.com/users/ravikyram/gists{/gist_id}", "starred_url": "https://api.github.com/users/ravikyram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ravikyram/subscriptions", "organizations_url": "https://api.github.com/users/ravikyram/orgs", "repos_url": "https://api.github.com/users/ravikyram/repos", "events_url": "https://api.github.com/users/ravikyram/events{/privacy}", "received_events_url": "https://api.github.com/users/ravikyram/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-03-13T00:34:43Z", "updated_at": "2020-03-13T09:15:01Z", "closed_at": null, "author_association": "NONE", "body": "What is the TensorFlow 2 equivalent for `report_tensor_allocations_upon_oom` discribed here: https://github.com/tensorflow/tensorflow/issues/17076\r\n\r\nHow would I use this in eager mode with keras?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37555", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37555/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37555/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37555/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37555", "id": 580295534, "node_id": "MDU6SXNzdWU1ODAyOTU1MzQ=", "number": 37555, "title": "Running CI tests locally for Python 3 files", "user": {"login": "adriangb", "id": 1755071, "node_id": "MDQ6VXNlcjE3NTUwNzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1755071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adriangb", "html_url": "https://github.com/adriangb", "followers_url": "https://api.github.com/users/adriangb/followers", "following_url": "https://api.github.com/users/adriangb/following{/other_user}", "gists_url": "https://api.github.com/users/adriangb/gists{/gist_id}", "starred_url": "https://api.github.com/users/adriangb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adriangb/subscriptions", "organizations_url": "https://api.github.com/users/adriangb/orgs", "repos_url": "https://api.github.com/users/adriangb/repos", "events_url": "https://api.github.com/users/adriangb/events{/privacy}", "received_events_url": "https://api.github.com/users/adriangb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "av8ramit", "id": 5588272, "node_id": "MDQ6VXNlcjU1ODgyNzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/5588272?v=4", "gravatar_id": "", "url": "https://api.github.com/users/av8ramit", "html_url": "https://github.com/av8ramit", "followers_url": "https://api.github.com/users/av8ramit/followers", "following_url": "https://api.github.com/users/av8ramit/following{/other_user}", "gists_url": "https://api.github.com/users/av8ramit/gists{/gist_id}", "starred_url": "https://api.github.com/users/av8ramit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/av8ramit/subscriptions", "organizations_url": "https://api.github.com/users/av8ramit/orgs", "repos_url": "https://api.github.com/users/av8ramit/repos", "events_url": "https://api.github.com/users/av8ramit/events{/privacy}", "received_events_url": "https://api.github.com/users/av8ramit/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "av8ramit", "id": 5588272, "node_id": "MDQ6VXNlcjU1ODgyNzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/5588272?v=4", "gravatar_id": "", "url": "https://api.github.com/users/av8ramit", "html_url": "https://github.com/av8ramit", "followers_url": "https://api.github.com/users/av8ramit/followers", "following_url": "https://api.github.com/users/av8ramit/following{/other_user}", "gists_url": "https://api.github.com/users/av8ramit/gists{/gist_id}", "starred_url": "https://api.github.com/users/av8ramit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/av8ramit/subscriptions", "organizations_url": "https://api.github.com/users/av8ramit/orgs", "repos_url": "https://api.github.com/users/av8ramit/repos", "events_url": "https://api.github.com/users/av8ramit/events{/privacy}", "received_events_url": "https://api.github.com/users/av8ramit/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-03-13T00:18:29Z", "updated_at": "2020-03-13T23:14:55Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Platform: Ubuntu 18.04 on WSL2 \r\n- TensorFlow version: source master@f8396d00c2572845774cce4b737858f264e015b6\r\n- Bazel version (if compiling from source): running CPU Docker container, says 2.0\r\n\r\n\r\n\r\n**Describe the problem**\r\nI'm trying to run CI tests locally. I'm having Python 2/3 issues. I'm using `tensorflow/tensorflow/python/autograph/pyct/static_analysis/` for testing since it has tests (ex `liveness_py3_test.py`) that use Python 3 syntax and have a properly configured `BUILD`.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n```\r\ntensorflow/tools/ci_build/ci_build.sh CPU bazel test --jobs=1 --ram_utilization_factor 30 -- //tensorflow/python/autograph/pyct/static_analysis/... \r\n```\r\n```\r\nFile \"tensorflow/bazel-ci_build-cache/.../tensorflow/python/autograph/pyct/static_analysis/liveness_py3_test.runfiles/org_tensorflow/tensorflow/python/autograph/pyct/static_analysis/liveness_py3_test.py\", line 39                                                                                     \r\n\r\nnonlocal nonlocal_a                                                                                                                                                                                                             \r\n                  ^                                                                                                                                                                                       \r\n\r\nSyntaxError: invalid syntax \r\n```\r\n\r\n\r\n**Any other info / logs**\r\n```\r\nTF_BUILD_INFO = {container_type: \"cpu\", command: \"bazel test --jobs=1 --ram_utilization_factor 30 -- //tensorflow/python/autograph/pyct/static_analysis/...\", source_HEAD: \"f8396d00c2572845774cce4b737858f264e015b6\", source_remote_origin: \"https://github.com/adriangb/tensorflow.git\", OS: \"Linux\", kernel: \"4.19.84-microsoft-standard\", architecture: \"x86_64\", Bazel_version: \"Build label: 2.0.0\", Java_version: \"1.8.0_242\", Python_version: \"2.7.12\", gpp_version: \"g++ (Ubuntu 5.4.0-6ubuntu1~16.04.12) 5.4.0 20160609\"}\r\n```\r\n\r\nIt seems to me that running CI tests via Docker as per [`CONTRIBUTING.md`](https://github.com/tensorflow/tensorflow/blob/master/CONTRIBUTING.md) is not choosing the Python version correctly. Looking at CI logs, there are other flags being passed such as `--python_path=/usr/bin/python3`.\r\n\r\nI'm not sure if this is a bug or `CONTRIBUTING.md` has not been updated for Python 3 transition. If the latter, what invocation options are necessary to get local CI via Docker to behave as the online CI does?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37552", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37552/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37552/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37552/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37552", "id": 580266122, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg3NTA5NjY0", "number": 37552, "title": "Log learning rate to TensorBoard when using schedules", "user": {"login": "lgeiger", "id": 13285808, "node_id": "MDQ6VXNlcjEzMjg1ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/13285808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lgeiger", "html_url": "https://github.com/lgeiger", "followers_url": "https://api.github.com/users/lgeiger/followers", "following_url": "https://api.github.com/users/lgeiger/following{/other_user}", "gists_url": "https://api.github.com/users/lgeiger/gists{/gist_id}", "starred_url": "https://api.github.com/users/lgeiger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lgeiger/subscriptions", "organizations_url": "https://api.github.com/users/lgeiger/orgs", "repos_url": "https://api.github.com/users/lgeiger/repos", "events_url": "https://api.github.com/users/lgeiger/events{/privacy}", "received_events_url": "https://api.github.com/users/lgeiger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1169365494, "node_id": "MDU6TGFiZWwxMTY5MzY1NDk0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:M", "name": "size:M", "color": "adafea", "default": false, "description": "CL Change Size: Medium"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-03-12T22:48:43Z", "updated_at": "2020-03-19T13:15:50Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37552", "html_url": "https://github.com/tensorflow/tensorflow/pull/37552", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37552.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37552.patch"}, "body": "`keras.callbacks.LearningRateScheduler` automatically logs the learning rate to TensorBoard.\r\n\r\nHowever, when using `keras.optimizers.schedules.LearningRateSchedule` for step wise learning rate scheduling there is no builtin way of observing the learning rate in TensorBoard which can be crucial for debugging and experimenting with different schedules.\r\n\r\nThis PR adds support for automatic logging of the learning rate of optimizers that use `keras.optimizers.schedules.LearningRateSchedule`."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37548", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37548/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37548/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37548/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37548", "id": 580179357, "node_id": "MDU6SXNzdWU1ODAxNzkzNTc=", "number": 37548, "title": "Keras connectivity metadata is not set correctly in TF 2.2.0rc0", "user": {"login": "drasmuss", "id": 1952220, "node_id": "MDQ6VXNlcjE5NTIyMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/1952220?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drasmuss", "html_url": "https://github.com/drasmuss", "followers_url": "https://api.github.com/users/drasmuss/followers", "following_url": "https://api.github.com/users/drasmuss/following{/other_user}", "gists_url": "https://api.github.com/users/drasmuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/drasmuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drasmuss/subscriptions", "organizations_url": "https://api.github.com/users/drasmuss/orgs", "repos_url": "https://api.github.com/users/drasmuss/repos", "events_url": "https://api.github.com/users/drasmuss/events{/privacy}", "received_events_url": "https://api.github.com/users/drasmuss/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1903591931, "node_id": "MDU6TGFiZWwxOTAzNTkxOTMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.2", "name": "TF 2.2", "color": "0052cc", "default": false, "description": "Issues related to TF 2.2"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-03-12T19:47:01Z", "updated_at": "2020-03-15T11:17:09Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if\r\nthe issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or\r\nbinary): binary\r\n- TensorFlow version (use command below): 2.2.0rc0\r\n- Python version: 3.6.10\r\n- Bazel\r\nversion (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from\r\nsource): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\n\r\nIf a Keras model is applied to inputs with mismatched (but compatible) shape, the model is applied correctly but none of the Keras connectivity metadata (e.g. `inbound/outbound_nodes` or `keras_history`) is updated.\r\n\r\n**Describe the expected behavior**\r\n\r\nThe Keras connectivity metadata should be updated, so after the model is applied there should be new inbound/outbound nodes for that application, and all the Tensors created by that application should have their keras_history set appropriately (this is the behaviour in TF<=2.1.0).\r\n\r\n**Standalone code to reproduce the issue** \r\n\r\n``` python\r\nimport tensorflow as tf\r\n\r\n\r\nfor input_shape in [(1,), (1, 1)]:\r\n    print(\"input_shape\", input_shape)\r\n\r\n    sub_in = tf.keras.Input((1,))\r\n    relu_layer = tf.keras.layers.ReLU()\r\n    sub_out = relu_layer(sub_in)\r\n    submodel = tf.keras.Model(sub_in, sub_out)\r\n\r\n    assert len(relu_layer.inbound_nodes) == 1\r\n\r\n    inp = tf.keras.Input(input_shape)\r\n    out = submodel(inp)\r\n\r\n    assert len(relu_layer.inbound_nodes) == 2\r\n```\r\n\r\nThe `assert len(relu_layer.inbound_nodes) == 2` condition fails when `input_shape=(1, 1)`, indicating that no new inbound nodes were created when `submodel` was applied to `inp`.\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n\r\nThe issue is that when this function is applied https://github.com/tensorflow/tensorflow/blob/v2.2.0-rc0/tensorflow/python/keras/engine/network.py#L926 it creates new tensors, which do not have a keras_history set. Then this condition evaluates to `False` https://github.com/tensorflow/tensorflow/blob/v2.2.0-rc0/tensorflow/python/keras/engine/base_layer.py#L947, so the `set_connectivity_metadata` function is never called here https://github.com/tensorflow/tensorflow/blob/v2.2.0-rc0/tensorflow/python/keras/engine/base_layer.py#L952."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37546", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37546/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37546/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37546/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37546", "id": 580137300, "node_id": "MDU6SXNzdWU1ODAxMzczMDA=", "number": 37546, "title": "Android model personalization crash with keras model", "user": {"login": "PawelFaron", "id": 42373772, "node_id": "MDQ6VXNlcjQyMzczNzcy", "avatar_url": "https://avatars1.githubusercontent.com/u/42373772?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PawelFaron", "html_url": "https://github.com/PawelFaron", "followers_url": "https://api.github.com/users/PawelFaron/followers", "following_url": "https://api.github.com/users/PawelFaron/following{/other_user}", "gists_url": "https://api.github.com/users/PawelFaron/gists{/gist_id}", "starred_url": "https://api.github.com/users/PawelFaron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PawelFaron/subscriptions", "organizations_url": "https://api.github.com/users/PawelFaron/orgs", "repos_url": "https://api.github.com/users/PawelFaron/repos", "events_url": "https://api.github.com/users/PawelFaron/events{/privacy}", "received_events_url": "https://api.github.com/users/PawelFaron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-03-12T18:26:25Z", "updated_at": "2020-03-18T07:47:00Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow):  **- no**\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04): Windows 10/Android\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if\r\nthe issue happens on mobile device: Android Emulator\r\n- TensorFlow installed from (source or\r\nbinary): binary\r\n- TensorFlow version (use command below): **2.0.0rc0** for generating model and  **org.tensorflow:tensorflow-lite:0.0.0-nightly** on the phone\r\n- Python version: - Bazel\r\nversion (if compiling from source): Anaconda version 3.7\r\n\r\nI'm fiddling with the example of model personalization on Android. It works great with model generated with https://github.com/tensorflow/examples/blob/master/lite/examples/model_personalization/converter/tfltransfer/tflite_transfer_convert.py but fails to work with model generated with example code given in decription of model_personnalization repo:\r\n\r\nimport tensorflow as tf\r\nfrom tensorflow.keras import layers\r\nfrom tensorflow.keras.regularizers import l2\r\nfrom tfltransfer import bases\r\nfrom tfltransfer import heads\r\nfrom tfltransfer import optimizers\r\nfrom tfltransfer.tflite_transfer_converter import TFLiteTransferConverter\r\nbase = bases.MobileNetV2Base(image_size=224)\r\nhead = tf.keras.Sequential([\r\n    layers.Flatten(input_shape=(7, 7, 1280)),\r\n    layers.Dense(\r\n        units=32,\r\n        activation='relu',\r\n        kernel_regularizer=l2(0.01),\r\n        bias_regularizer=l2(0.01)),\r\n    layers.Dense(\r\n        units=4,\r\n        activation='softmax',\r\n        kernel_regularizer=l2(0.01),\r\n        bias_regularizer=l2(0.01)),\r\n])\r\nhead.compile(loss='categorical_crossentropy', optimizer='sgd')\r\nconverter = TFLiteTransferConverter(4,\r\n                                    base,\r\n                                    heads.KerasModelHead(head),\r\n                                    optimizers.SGD(3e-2),\r\n                                    train_batch_size=20)\r\nconverter.convert_and_save('custom_keras_model')\r\n\r\nThe error is:\r\n> A/libc: Fatal signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0xfffffff4 in tid 22057 (amples.transfer), pid 22057 (amples.transfer)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37544", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37544/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37544/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37544/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37544", "id": 580073561, "node_id": "MDU6SXNzdWU1ODAwNzM1NjE=", "number": 37544, "title": "Concat op not quantized ", "user": {"login": "ppatrikg", "id": 52700121, "node_id": "MDQ6VXNlcjUyNzAwMTIx", "avatar_url": "https://avatars3.githubusercontent.com/u/52700121?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ppatrikg", "html_url": "https://github.com/ppatrikg", "followers_url": "https://api.github.com/users/ppatrikg/followers", "following_url": "https://api.github.com/users/ppatrikg/following{/other_user}", "gists_url": "https://api.github.com/users/ppatrikg/gists{/gist_id}", "starred_url": "https://api.github.com/users/ppatrikg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ppatrikg/subscriptions", "organizations_url": "https://api.github.com/users/ppatrikg/orgs", "repos_url": "https://api.github.com/users/ppatrikg/repos", "events_url": "https://api.github.com/users/ppatrikg/events{/privacy}", "received_events_url": "https://api.github.com/users/ppatrikg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1589976566, "node_id": "MDU6TGFiZWwxNTg5OTc2NTY2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:micro", "name": "comp:micro", "color": "3e2eea", "default": false, "description": "Related to TensorFlow Lite Microcontrollers"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "nutsiepully", "id": 1307460, "node_id": "MDQ6VXNlcjEzMDc0NjA=", "avatar_url": "https://avatars3.githubusercontent.com/u/1307460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nutsiepully", "html_url": "https://github.com/nutsiepully", "followers_url": "https://api.github.com/users/nutsiepully/followers", "following_url": "https://api.github.com/users/nutsiepully/following{/other_user}", "gists_url": "https://api.github.com/users/nutsiepully/gists{/gist_id}", "starred_url": "https://api.github.com/users/nutsiepully/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nutsiepully/subscriptions", "organizations_url": "https://api.github.com/users/nutsiepully/orgs", "repos_url": "https://api.github.com/users/nutsiepully/repos", "events_url": "https://api.github.com/users/nutsiepully/events{/privacy}", "received_events_url": "https://api.github.com/users/nutsiepully/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nutsiepully", "id": 1307460, "node_id": "MDQ6VXNlcjEzMDc0NjA=", "avatar_url": "https://avatars3.githubusercontent.com/u/1307460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nutsiepully", "html_url": "https://github.com/nutsiepully", "followers_url": "https://api.github.com/users/nutsiepully/followers", "following_url": "https://api.github.com/users/nutsiepully/following{/other_user}", "gists_url": "https://api.github.com/users/nutsiepully/gists{/gist_id}", "starred_url": "https://api.github.com/users/nutsiepully/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nutsiepully/subscriptions", "organizations_url": "https://api.github.com/users/nutsiepully/orgs", "repos_url": "https://api.github.com/users/nutsiepully/repos", "events_url": "https://api.github.com/users/nutsiepully/events{/privacy}", "received_events_url": "https://api.github.com/users/nutsiepully/received_events", "type": "User", "site_admin": false}, {"login": "advaitjain", "id": 2789958, "node_id": "MDQ6VXNlcjI3ODk5NTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/2789958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/advaitjain", "html_url": "https://github.com/advaitjain", "followers_url": "https://api.github.com/users/advaitjain/followers", "following_url": "https://api.github.com/users/advaitjain/following{/other_user}", "gists_url": "https://api.github.com/users/advaitjain/gists{/gist_id}", "starred_url": "https://api.github.com/users/advaitjain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/advaitjain/subscriptions", "organizations_url": "https://api.github.com/users/advaitjain/orgs", "repos_url": "https://api.github.com/users/advaitjain/repos", "events_url": "https://api.github.com/users/advaitjain/events{/privacy}", "received_events_url": "https://api.github.com/users/advaitjain/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-03-12T16:50:04Z", "updated_at": "2020-03-19T13:52:01Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "This issue is related to the concat implementation used for TFlite and TFlite micro.\r\nFor uint8 there are no restrictions on having the same scaling/zeropoint in the Input/Output.\r\n\r\nBut the implementation is not quantized\r\nin concatenation.cc:\r\n// TODO(prabhumk): This is the same as the optimized implementation.\r\n// TODO(prabhumk): The quantized implementation of concatentation isn't fully\r\n// quantized as it takes scale as a floating point value. This should be fixed\r\n// when optimizng this routine further.\r\ninline void ConcatenationWithScaling(const ConcatenationParams& params,\r\n                                     const RuntimeShape* const* input_shapes,\r\n                                     const uint8* const* input_data,\r\n                                     const RuntimeShape& output_shape,\r\n                                     uint8* output_data) {\r\n...\r\n      if (input_zeropoint[i] == output_zeropoint &&\r\n          input_scale[i] == output_scale) {\r\n        memcpy(output_ptr, input_ptr, copy_size);\r\n      } else {\r\n        const float scale = input_scale[i] * inverse_output_scale;\r\n        const float bias = -input_zeropoint[i] * scale;\r\n        for (int j = 0; j < copy_size; ++j) {\r\n          const int32_t value =\r\n              static_cast<int32_t>(std::round(input_ptr[j] * scale + bias)) +\r\n              output_zeropoint;\r\n          output_ptr[j] = static_cast<uint8_t>(\r\n              std::max<int32_t>(std::min<int32_t>(255, value), 0));\r\n        }\r\n      }\r\n\r\n**Standalone code to reproduce the issue** \r\nI have attached a tflite file that includes a concat op with different scaling/zeropoint in the Input/Output.\r\n\r\n[concat_1x1x1x2048_requantize_6.zip](https://github.com/tensorflow/tensorflow/files/4325464/concat_1x1x1x2048_requantize_6.zip)\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37543", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37543/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37543/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37543/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37543", "id": 580056736, "node_id": "MDU6SXNzdWU1ODAwNTY3MzY=", "number": 37543, "title": "\"Another profiler is running\" in TF 2.2.0rc0", "user": {"login": "drasmuss", "id": 1952220, "node_id": "MDQ6VXNlcjE5NTIyMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/1952220?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drasmuss", "html_url": "https://github.com/drasmuss", "followers_url": "https://api.github.com/users/drasmuss/followers", "following_url": "https://api.github.com/users/drasmuss/following{/other_user}", "gists_url": "https://api.github.com/users/drasmuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/drasmuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drasmuss/subscriptions", "organizations_url": "https://api.github.com/users/drasmuss/orgs", "repos_url": "https://api.github.com/users/drasmuss/repos", "events_url": "https://api.github.com/users/drasmuss/events{/privacy}", "received_events_url": "https://api.github.com/users/drasmuss/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1903591931, "node_id": "MDU6TGFiZWwxOTAzNTkxOTMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.2", "name": "TF 2.2", "color": "0052cc", "default": false, "description": "Issues related to TF 2.2"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 284285184, "node_id": "MDU6TGFiZWwyODQyODUxODQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tensorboard", "name": "comp:tensorboard", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "qiuminxu", "id": 3082188, "node_id": "MDQ6VXNlcjMwODIxODg=", "avatar_url": "https://avatars3.githubusercontent.com/u/3082188?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qiuminxu", "html_url": "https://github.com/qiuminxu", "followers_url": "https://api.github.com/users/qiuminxu/followers", "following_url": "https://api.github.com/users/qiuminxu/following{/other_user}", "gists_url": "https://api.github.com/users/qiuminxu/gists{/gist_id}", "starred_url": "https://api.github.com/users/qiuminxu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qiuminxu/subscriptions", "organizations_url": "https://api.github.com/users/qiuminxu/orgs", "repos_url": "https://api.github.com/users/qiuminxu/repos", "events_url": "https://api.github.com/users/qiuminxu/events{/privacy}", "received_events_url": "https://api.github.com/users/qiuminxu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "qiuminxu", "id": 3082188, "node_id": "MDQ6VXNlcjMwODIxODg=", "avatar_url": "https://avatars3.githubusercontent.com/u/3082188?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qiuminxu", "html_url": "https://github.com/qiuminxu", "followers_url": "https://api.github.com/users/qiuminxu/followers", "following_url": "https://api.github.com/users/qiuminxu/following{/other_user}", "gists_url": "https://api.github.com/users/qiuminxu/gists{/gist_id}", "starred_url": "https://api.github.com/users/qiuminxu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qiuminxu/subscriptions", "organizations_url": "https://api.github.com/users/qiuminxu/orgs", "repos_url": "https://api.github.com/users/qiuminxu/repos", "events_url": "https://api.github.com/users/qiuminxu/events{/privacy}", "received_events_url": "https://api.github.com/users/qiuminxu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-03-12T16:22:46Z", "updated_at": "2020-03-16T14:19:43Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if\r\nthe issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or\r\nbinary): binary\r\n- TensorFlow version (use command below): 2.2.0rc0\r\n- Python version: 3.6.10\r\n- Bazel\r\nversion (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from\r\nsource): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\n\r\n\"Another profiler is running\" error when using the TensorBoard callback profiling twice with `profile_batch=1` in non-eager mode.\r\n\r\n**Describe the expected behavior**\r\n\r\nThere should be no error.\r\n\r\n**Standalone code to reproduce the issue** \r\nProvide a reproducible test case that is the bare minimum necessary to generate\r\nthe problem. If possible, please share a link to Colab/Jupyter/any notebook.\r\n``` python\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\ntf.compat.v1.disable_eager_execution()\r\n\r\ninp = tf.keras.Input((1,))\r\nout = tf.keras.layers.Dense(units=1)(inp)\r\nmodel = tf.keras.Model(inp, out)\r\n\r\nmodel.compile(optimizer=tf.optimizers.SGD(1), loss=tf.losses.mse)\r\n\r\nmodel.fit(\r\n    np.zeros((64, 1)),\r\n    np.zeros((64, 1)),\r\n    callbacks=[tf.keras.callbacks.TensorBoard(log_dir=\"tmp\", profile_batch=1)],\r\n)\r\n\r\nmodel.fit(\r\n    np.zeros((64, 1)),\r\n    np.zeros((64, 1)),\r\n    callbacks=[tf.keras.callbacks.TensorBoard(log_dir=\"tmp\", profile_batch=1)],\r\n)\r\n```\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n```\r\nTraceback (most recent call last):\r\n  File \".../tmp.py\", line 21, in <module>\r\n    callbacks=[tf.keras.callbacks.TensorBoard(log_dir=\"tmp\", profile_batch=1)],\r\n  File \"...\\lib\\site-packages\\tensorflow\\python\\keras\\callbacks.py\", line 1736, in __init__\r\n    profiler.warmup()  # Improve the profiling accuracy.\r\n  File \"...\\lib\\site-packages\\tensorflow\\python\\profiler\\profiler_v2.py\", line 124, in warmup\r\n    start('')\r\n  File \"...\\lib\\site-packages\\tensorflow\\python\\profiler\\profiler_v2.py\", line 74, in start\r\n    'Another profiler is running.')\r\ntensorflow.python.framework.errors_impl.AlreadyExistsError: Another profiler is running.\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37542", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37542/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37542/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37542/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37542", "id": 580053909, "node_id": "MDU6SXNzdWU1ODAwNTM5MDk=", "number": 37542, "title": "TFLite Inference Run on Android Issues", "user": {"login": "ramawidrap", "id": 36231029, "node_id": "MDQ6VXNlcjM2MjMxMDI5", "avatar_url": "https://avatars3.githubusercontent.com/u/36231029?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ramawidrap", "html_url": "https://github.com/ramawidrap", "followers_url": "https://api.github.com/users/ramawidrap/followers", "following_url": "https://api.github.com/users/ramawidrap/following{/other_user}", "gists_url": "https://api.github.com/users/ramawidrap/gists{/gist_id}", "starred_url": "https://api.github.com/users/ramawidrap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ramawidrap/subscriptions", "organizations_url": "https://api.github.com/users/ramawidrap/orgs", "repos_url": "https://api.github.com/users/ramawidrap/repos", "events_url": "https://api.github.com/users/ramawidrap/events{/privacy}", "received_events_url": "https://api.github.com/users/ramawidrap/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "Saduf2019", "id": 59822926, "node_id": "MDQ6VXNlcjU5ODIyOTI2", "avatar_url": "https://avatars2.githubusercontent.com/u/59822926?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Saduf2019", "html_url": "https://github.com/Saduf2019", "followers_url": "https://api.github.com/users/Saduf2019/followers", "following_url": "https://api.github.com/users/Saduf2019/following{/other_user}", "gists_url": "https://api.github.com/users/Saduf2019/gists{/gist_id}", "starred_url": "https://api.github.com/users/Saduf2019/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Saduf2019/subscriptions", "organizations_url": "https://api.github.com/users/Saduf2019/orgs", "repos_url": "https://api.github.com/users/Saduf2019/repos", "events_url": "https://api.github.com/users/Saduf2019/events{/privacy}", "received_events_url": "https://api.github.com/users/Saduf2019/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Saduf2019", "id": 59822926, "node_id": "MDQ6VXNlcjU5ODIyOTI2", "avatar_url": "https://avatars2.githubusercontent.com/u/59822926?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Saduf2019", "html_url": "https://github.com/Saduf2019", "followers_url": "https://api.github.com/users/Saduf2019/followers", "following_url": "https://api.github.com/users/Saduf2019/following{/other_user}", "gists_url": "https://api.github.com/users/Saduf2019/gists{/gist_id}", "starred_url": "https://api.github.com/users/Saduf2019/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Saduf2019/subscriptions", "organizations_url": "https://api.github.com/users/Saduf2019/orgs", "repos_url": "https://api.github.com/users/Saduf2019/repos", "events_url": "https://api.github.com/users/Saduf2019/events{/privacy}", "received_events_url": "https://api.github.com/users/Saduf2019/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-03-12T16:18:15Z", "updated_at": "2020-03-16T14:38:06Z", "closed_at": null, "author_association": "NONE", "body": "Please go to Stack Overflow for help and support:\r\n\r\nhttps://stackoverflow.com/questions/tagged/tensorflow\r\n\r\nIf you open a GitHub issue, here is our policy:\r\n\r\n1. It must be a bug, a feature request, or a significant problem with documentation (for small docs fixes please send a PR instead).\r\n2. The form below must be filled out.\r\n3. It shouldn't be a TensorBoard issue. Those go [here](https://github.com/tensorflow/tensorboard/issues).\r\n\r\n**Here's why we have that policy**: TensorFlow developers respond to issues. We want to focus on work that benefits the whole community, e.g., fixing bugs and adding features. Support only helps individuals. GitHub also notifies thousands of people when issues are filed. We want them to see you communicating an interesting problem, rather than being redirected to Stack Overflow.\r\n\r\n------------------------\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\n- **TensorFlow installed from (source or binary)**:\r\n- **TensorFlow version (use command below)**:\r\n- **Python version**:\r\n- **Bazel version (if compiling from source)**:\r\n- **GCC/Compiler version (if compiling from source)**:\r\n- **CUDA/cuDNN version**:\r\n- **GPU model and memory**:\r\n- **Exact command to reproduce**:\r\n\r\n\r\n\r\n### Describe the problem\r\n Hello I'm new on TFlite in Android. I've got issue when i wanna run my inference. i got problem in data types i don't know actually it does. My output model suppose to be array float but i still got that errors please help me!! Thankyou...\r\n\r\n### Errors\r\n![image](https://user-images.githubusercontent.com/36231029/76542439-8d431d00-64b7-11ea-8ee7-dcbba4324ece.png)\r\nE/AndroidRuntime: FATAL EXCEPTION: main\r\n    Process: com.example.katadasartflite, PID: 17681\r\n    java.lang.IllegalArgumentException: DataType error: cannot resolve DataType of kotlin.Unit\r\n        at org.tensorflow.lite.Tensor.dataTypeOf(Tensor.java:319)\r\n        at org.tensorflow.lite.Tensor.throwIfTypeIsIncompatible(Tensor.java:377)\r\n        at org.tensorflow.lite.Tensor.getInputShapeIfDifferent(Tensor.java:282)\r\n        at org.tensorflow.lite.NativeInterpreterWrapper.run(NativeInterpreterWrapper.java:137)\r\n        at org.tensorflow.lite.Interpreter.runForMultipleInputsOutputs(Interpreter.java:314)\r\n        at org.tensorflow.lite.Interpreter.run(Interpreter.java:275)\r\n        at com.example.katadasartflite.Classifier.recognizeWord(Classifier.kt:80)\r\n        at com.example.katadasartflite.InferenceModel$initClassifier$1.onClick(InputFragment.kt:51)\r\n        at android.view.View.performClick(View.java:7352)\r\n        at android.widget.TextView.performClick(TextView.java:14177)\r\n        at android.view.View.performClickInternal(View.java:7318)\r\n        at android.view.View.access$3200(View.java:846)\r\n        at android.view.View$PerformClick.run(View.java:27800)\r\n        at android.os.Handler.handleCallback(Handler.java:873)\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)\r\n        at android.os.Looper.loop(Looper.java:214)\r\n        at android.app.ActivityThread.main(ActivityThread.java:7050)\r\n        at java.lang.reflect.Method.invoke(Native Method)\r\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\r\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:965)\r\nW/System: A resource failed to call close. \r\n\r\n\r\n\r\n### Source code / logs\r\n    fun recognizeWord() {\r\n        Log.d(\"RecognizeWord\",Arrays.toString(tflite.getInputTensor(0).shape()))\r\n        val input = TensorBuffer.createFixedSize(intArrayOf(1,13,4),DataType.FLOAT32).loadArray(inputData)\r\n        Trace.beginSection(\"Start Recogize\")\r\n        var outputInference = TensorBuffer.createDynamic(DataType.FLOAT32)\r\n        Trace.beginSection(\"Feed\")\r\n        val startTimeForLoadImage = SystemClock.uptimeMillis()\r\n        tflite.run(input,outputInference.intArray)\r\n        val endTimeForReference = SystemClock.uptimeMillis()\r\n        Trace.endSection()\r\n\r\n        Log.d(\"RecognizeWord\",outputInference.toString())\r\n\r\n    }\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37537", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37537/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37537/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37537/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37537", "id": 579926626, "node_id": "MDU6SXNzdWU1Nzk5MjY2MjY=", "number": 37537, "title": "Why the loss doesn't decrease in my CNN model?", "user": {"login": "lihongxun945", "id": 1144765, "node_id": "MDQ6VXNlcjExNDQ3NjU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1144765?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lihongxun945", "html_url": "https://github.com/lihongxun945", "followers_url": "https://api.github.com/users/lihongxun945/followers", "following_url": "https://api.github.com/users/lihongxun945/following{/other_user}", "gists_url": "https://api.github.com/users/lihongxun945/gists{/gist_id}", "starred_url": "https://api.github.com/users/lihongxun945/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lihongxun945/subscriptions", "organizations_url": "https://api.github.com/users/lihongxun945/orgs", "repos_url": "https://api.github.com/users/lihongxun945/repos", "events_url": "https://api.github.com/users/lihongxun945/events{/privacy}", "received_events_url": "https://api.github.com/users/lihongxun945/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmothukuru", "id": 48206667, "node_id": "MDQ6VXNlcjQ4MjA2NjY3", "avatar_url": "https://avatars3.githubusercontent.com/u/48206667?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmothukuru", "html_url": "https://github.com/rmothukuru", "followers_url": "https://api.github.com/users/rmothukuru/followers", "following_url": "https://api.github.com/users/rmothukuru/following{/other_user}", "gists_url": "https://api.github.com/users/rmothukuru/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmothukuru/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmothukuru/subscriptions", "organizations_url": "https://api.github.com/users/rmothukuru/orgs", "repos_url": "https://api.github.com/users/rmothukuru/repos", "events_url": "https://api.github.com/users/rmothukuru/events{/privacy}", "received_events_url": "https://api.github.com/users/rmothukuru/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmothukuru", "id": 48206667, "node_id": "MDQ6VXNlcjQ4MjA2NjY3", "avatar_url": "https://avatars3.githubusercontent.com/u/48206667?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmothukuru", "html_url": "https://github.com/rmothukuru", "followers_url": "https://api.github.com/users/rmothukuru/followers", "following_url": "https://api.github.com/users/rmothukuru/following{/other_user}", "gists_url": "https://api.github.com/users/rmothukuru/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmothukuru/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmothukuru/subscriptions", "organizations_url": "https://api.github.com/users/rmothukuru/orgs", "repos_url": "https://api.github.com/users/rmothukuru/repos", "events_url": "https://api.github.com/users/rmothukuru/events{/privacy}", "received_events_url": "https://api.github.com/users/rmothukuru/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2020-03-12T13:08:19Z", "updated_at": "2020-03-13T11:14:02Z", "closed_at": null, "author_association": "NONE", "body": "Hi All,\r\nI am new to tensorflow, and I find the losses doesn't decrease when train a CNN model on Cifar100 dataset.\r\n\r\nHere is the Model code:\r\n\r\n```python\r\nnetwork = Sequential([\r\n    layers.Conv2D(64, kernel_size=[3, 3], padding=\"same\", activation=tf.nn.relu), # 32x32\r\n    layers.Conv2D(64, kernel_size=[3, 3], padding=\"same\", activation=tf.nn.relu),\r\n    layers.MaxPooling2D((2, 2)), # 16x16\r\n\r\n    layers.Conv2D(128, kernel_size=[3, 3], padding=\"same\", activation=tf.nn.relu),\r\n    layers.Conv2D(128, kernel_size=[3, 3], padding=\"same\", activation=tf.nn.relu),\r\n    layers.MaxPooling2D((2, 2)), # 8x8\r\n\r\n    layers.Conv2D(256, kernel_size=[3, 3], padding=\"same\", activation=tf.nn.relu),\r\n    layers.Conv2D(256, kernel_size=[3, 3], padding=\"same\", activation=tf.nn.relu),\r\n    layers.MaxPooling2D((2, 2)), # 4x4\r\n\r\n    layers.Conv2D(512, kernel_size=[3, 3], padding=\"same\", activation=tf.nn.relu),\r\n    layers.Conv2D(512, kernel_size=[3, 3], padding=\"same\", activation=tf.nn.relu),\r\n    layers.MaxPooling2D((2, 2)), # 2x2\r\n\r\n    layers.Conv2D(512, kernel_size=[3, 3], padding=\"same\", activation=tf.nn.relu),\r\n    layers.Conv2D(512, kernel_size=[3, 3], padding=\"same\", activation=tf.nn.relu),\r\n    layers.MaxPooling2D((2, 2)), # 1x1\r\n\r\n    layers.Flatten(),\r\n\r\n    layers.Dense(256, activation=tf.nn.relu),\r\n    layers.Dense(128, activation=tf.nn.relu),\r\n    layers.Dense(100, activation=None),\r\n])\r\n```\r\n\r\nand this is the link for the entire code: https://colab.research.google.com/drive/1kIT_18Z-ymEgzqgG4nh4sZdBkA1bnJdO\r\n\r\nand, It will be OK if I use only one Conv2D layer with maxpooling, like this:\r\n\r\n```python\r\nnetwork = Sequential([\r\n    layers.Conv2D(64, kernel_size=[3, 3], padding=\"same\", activation=tf.nn.relu), # 32x32\r\n    layers.MaxPooling2D((2, 2)), # 16x16\r\n\r\n    layers.Conv2D(128, kernel_size=[3, 3], padding=\"same\", activation=tf.nn.relu),\r\n    layers.MaxPooling2D((2, 2)), # 8x8\r\n\r\n    layers.Conv2D(256, kernel_size=[3, 3], padding=\"same\", activation=tf.nn.relu),\r\n    layers.MaxPooling2D((2, 2)), # 4x4\r\n\r\n    layers.Conv2D(512, kernel_size=[3, 3], padding=\"same\", activation=tf.nn.relu),\r\n    layers.MaxPooling2D((2, 2)), # 2x2\r\n\r\n    layers.Conv2D(512, kernel_size=[3, 3], padding=\"same\", activation=tf.nn.relu),\r\n    layers.MaxPooling2D((2, 2)), # 1x1\r\n\r\n   #xxxxx\r\n])\r\n```\r\n\r\nthanks~"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37536", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37536/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37536/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37536/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37536", "id": 579884285, "node_id": "MDU6SXNzdWU1Nzk4ODQyODU=", "number": 37536, "title": "How to use ApplyAdam(C++API)?", "user": {"login": "minjac", "id": 44050513, "node_id": "MDQ6VXNlcjQ0MDUwNTEz", "avatar_url": "https://avatars0.githubusercontent.com/u/44050513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/minjac", "html_url": "https://github.com/minjac", "followers_url": "https://api.github.com/users/minjac/followers", "following_url": "https://api.github.com/users/minjac/following{/other_user}", "gists_url": "https://api.github.com/users/minjac/gists{/gist_id}", "starred_url": "https://api.github.com/users/minjac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/minjac/subscriptions", "organizations_url": "https://api.github.com/users/minjac/orgs", "repos_url": "https://api.github.com/users/minjac/repos", "events_url": "https://api.github.com/users/minjac/events{/privacy}", "received_events_url": "https://api.github.com/users/minjac/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 1093464312, "node_id": "MDU6TGFiZWwxMDkzNDY0MzEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:others", "name": "type:others", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "Saduf2019", "id": 59822926, "node_id": "MDQ6VXNlcjU5ODIyOTI2", "avatar_url": "https://avatars2.githubusercontent.com/u/59822926?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Saduf2019", "html_url": "https://github.com/Saduf2019", "followers_url": "https://api.github.com/users/Saduf2019/followers", "following_url": "https://api.github.com/users/Saduf2019/following{/other_user}", "gists_url": "https://api.github.com/users/Saduf2019/gists{/gist_id}", "starred_url": "https://api.github.com/users/Saduf2019/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Saduf2019/subscriptions", "organizations_url": "https://api.github.com/users/Saduf2019/orgs", "repos_url": "https://api.github.com/users/Saduf2019/repos", "events_url": "https://api.github.com/users/Saduf2019/events{/privacy}", "received_events_url": "https://api.github.com/users/Saduf2019/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Saduf2019", "id": 59822926, "node_id": "MDQ6VXNlcjU5ODIyOTI2", "avatar_url": "https://avatars2.githubusercontent.com/u/59822926?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Saduf2019", "html_url": "https://github.com/Saduf2019", "followers_url": "https://api.github.com/users/Saduf2019/followers", "following_url": "https://api.github.com/users/Saduf2019/following{/other_user}", "gists_url": "https://api.github.com/users/Saduf2019/gists{/gist_id}", "starred_url": "https://api.github.com/users/Saduf2019/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Saduf2019/subscriptions", "organizations_url": "https://api.github.com/users/Saduf2019/orgs", "repos_url": "https://api.github.com/users/Saduf2019/repos", "events_url": "https://api.github.com/users/Saduf2019/events{/privacy}", "received_events_url": "https://api.github.com/users/Saduf2019/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-03-12T11:49:35Z", "updated_at": "2020-03-16T12:00:01Z", "closed_at": null, "author_association": "NONE", "body": "Hi, I has used C++ API, but I got some problem about ApplyAdam:\r\n  ApplyAdam(const ::tensorflow::Scope& scope, ::tensorflow::Input var,\r\n          ::tensorflow::Input m, ::tensorflow::Input v, ::tensorflow::Input\r\n          beta1_power, ::tensorflow::Input beta2_power, ::tensorflow::Input lr,\r\n          ::tensorflow::Input beta1, ::tensorflow::Input beta2,\r\n          ::tensorflow::Input epsilon, ::tensorflow::Input grad);\r\n\r\nI do not know beta1_power and beta2_power in adam optimizer."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37529", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37529/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37529/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37529/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37529", "id": 579775034, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg3MTA3OTQx", "number": 37529, "title": "docs: update docs for tf.python.tools.import_pb_to_tensorboard", "user": {"login": "howl-anderson", "id": 1263428, "node_id": "MDQ6VXNlcjEyNjM0Mjg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1263428?v=4", "gravatar_id": "", "url": "https://api.github.com/users/howl-anderson", "html_url": "https://github.com/howl-anderson", "followers_url": "https://api.github.com/users/howl-anderson/followers", "following_url": "https://api.github.com/users/howl-anderson/following{/other_user}", "gists_url": "https://api.github.com/users/howl-anderson/gists{/gist_id}", "starred_url": "https://api.github.com/users/howl-anderson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/howl-anderson/subscriptions", "organizations_url": "https://api.github.com/users/howl-anderson/orgs", "repos_url": "https://api.github.com/users/howl-anderson/repos", "events_url": "https://api.github.com/users/howl-anderson/events{/privacy}", "received_events_url": "https://api.github.com/users/howl-anderson/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-03-12T08:34:53Z", "updated_at": "2020-03-17T13:44:30Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37529", "html_url": "https://github.com/tensorflow/tensorflow/pull/37529", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37529.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37529.patch"}, "body": "Using SavedModel instead .pb model"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37526", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37526/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37526/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37526/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37526", "id": 579760855, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg3MDk2Mzc3", "number": 37526, "title": "Micro: Added specific cmsis optimization for convolutions with 1xN fi\u2026", "user": {"login": "jvistrand", "id": 49676198, "node_id": "MDQ6VXNlcjQ5Njc2MTk4", "avatar_url": "https://avatars2.githubusercontent.com/u/49676198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvistrand", "html_url": "https://github.com/jvistrand", "followers_url": "https://api.github.com/users/jvistrand/followers", "following_url": "https://api.github.com/users/jvistrand/following{/other_user}", "gists_url": "https://api.github.com/users/jvistrand/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvistrand/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvistrand/subscriptions", "organizations_url": "https://api.github.com/users/jvistrand/orgs", "repos_url": "https://api.github.com/users/jvistrand/repos", "events_url": "https://api.github.com/users/jvistrand/events{/privacy}", "received_events_url": "https://api.github.com/users/jvistrand/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1589976566, "node_id": "MDU6TGFiZWwxNTg5OTc2NTY2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:micro", "name": "comp:micro", "color": "3e2eea", "default": false, "description": "Related to TensorFlow Lite Microcontrollers"}, {"id": 987666414, "node_id": "MDU6TGFiZWw5ODc2NjY0MTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/ready%20to%20pull", "name": "ready to pull", "color": "2cd643", "default": false, "description": ""}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-03-12T08:04:13Z", "updated_at": "2020-03-19T12:09:27Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37526", "html_url": "https://github.com/tensorflow/tensorflow/pull/37526", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37526.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37526.patch"}, "body": "\u2026lters. Also removed deprecated output depth dependency."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37520", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37520/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37520/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37520/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37520", "id": 579600235, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg2OTY2MTIw", "number": 37520, "title": "Documented tf.keras.preprocessing purpose", "user": {"login": "ManishAradwad", "id": 29497701, "node_id": "MDQ6VXNlcjI5NDk3NzAx", "avatar_url": "https://avatars0.githubusercontent.com/u/29497701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ManishAradwad", "html_url": "https://github.com/ManishAradwad", "followers_url": "https://api.github.com/users/ManishAradwad/followers", "following_url": "https://api.github.com/users/ManishAradwad/following{/other_user}", "gists_url": "https://api.github.com/users/ManishAradwad/gists{/gist_id}", "starred_url": "https://api.github.com/users/ManishAradwad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ManishAradwad/subscriptions", "organizations_url": "https://api.github.com/users/ManishAradwad/orgs", "repos_url": "https://api.github.com/users/ManishAradwad/repos", "events_url": "https://api.github.com/users/ManishAradwad/events{/privacy}", "received_events_url": "https://api.github.com/users/ManishAradwad/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1178505529, "node_id": "MDU6TGFiZWwxMTc4NTA1NTI5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/prtype:bugfix", "name": "prtype:bugfix", "color": "159b2e", "default": false, "description": "PR to fix a bug"}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-03-11T23:24:12Z", "updated_at": "2020-03-19T13:03:09Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37520", "html_url": "https://github.com/tensorflow/tensorflow/pull/37520", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37520.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37520.patch"}, "body": "Fixes : #37445 \r\nDocs about `tf.feature_column` not added yet since I'm not sure about the differences between them. Can someone plz help about that??"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37518", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37518/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37518/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37518/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37518", "id": 579596306, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg2OTYyODkx", "number": 37518, "title": "[ROCm] Fix for broken ROCm CSB - 200311", "user": {"login": "deven-amd", "id": 36858332, "node_id": "MDQ6VXNlcjM2ODU4MzMy", "avatar_url": "https://avatars2.githubusercontent.com/u/36858332?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deven-amd", "html_url": "https://github.com/deven-amd", "followers_url": "https://api.github.com/users/deven-amd/followers", "following_url": "https://api.github.com/users/deven-amd/following{/other_user}", "gists_url": "https://api.github.com/users/deven-amd/gists{/gist_id}", "starred_url": "https://api.github.com/users/deven-amd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deven-amd/subscriptions", "organizations_url": "https://api.github.com/users/deven-amd/orgs", "repos_url": "https://api.github.com/users/deven-amd/repos", "events_url": "https://api.github.com/users/deven-amd/events{/privacy}", "received_events_url": "https://api.github.com/users/deven-amd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-03-11T23:12:48Z", "updated_at": "2020-03-17T13:40:02Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37518", "html_url": "https://github.com/tensorflow/tensorflow/pull/37518", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37518.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37518.patch"}, "body": "This commit fixes regressions introduced in the ROCm CSB by th following commit :\r\n\r\nhttps://github.com/tensorflow/tensorflow/commit/df00d7ebbfb1ac799d1f98dd724fce10cb84329e\r\n\r\nThe above commit classifies puts \"cudnn_rnn_kernels\" under \"if_cuda\" in the tensorflow/core/BUILD file. That target is mis-named (should really be gpu_rnn_kernels) and is required by ROCm too. This commit simply changes the condition from \"if_cuda\" to \"if_cuda_or_rocm\"\r\n\r\n--------------------------\r\n\r\n/cc @whchung @chsigg @nvining-work \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37517", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37517/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37517/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37517/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37517", "id": 579551820, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg2OTI1NTY4", "number": 37517, "title": "[New Feature] tf.data pipeline serialization to json for performance analysis", "user": {"login": "DEKHTIARJonathan", "id": 10923599, "node_id": "MDQ6VXNlcjEwOTIzNTk5", "avatar_url": "https://avatars2.githubusercontent.com/u/10923599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DEKHTIARJonathan", "html_url": "https://github.com/DEKHTIARJonathan", "followers_url": "https://api.github.com/users/DEKHTIARJonathan/followers", "following_url": "https://api.github.com/users/DEKHTIARJonathan/following{/other_user}", "gists_url": "https://api.github.com/users/DEKHTIARJonathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/DEKHTIARJonathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DEKHTIARJonathan/subscriptions", "organizations_url": "https://api.github.com/users/DEKHTIARJonathan/orgs", "repos_url": "https://api.github.com/users/DEKHTIARJonathan/repos", "events_url": "https://api.github.com/users/DEKHTIARJonathan/events{/privacy}", "received_events_url": "https://api.github.com/users/DEKHTIARJonathan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 1169365682, "node_id": "MDU6TGFiZWwxMTY5MzY1Njgy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:L", "name": "size:L", "color": "adafea", "default": false, "description": "CL Change Size: Large"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2020-03-11T21:19:45Z", "updated_at": "2020-03-17T13:39:32Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37517", "html_url": "https://github.com/tensorflow/tensorflow/pull/37517", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37517.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37517.patch"}, "body": "This PR introduces changes to TF Data and aims to generate automatically a full dump of the TF Data API on request for static analysis.\r\n\r\n# Motivations\r\n\r\n## PR Background\r\nData loading remains one of the major pain point for users and one the place where the average users have little (if any) idea on what they are doing right / wrong in terms of performance and what they could do to improve. Given the number of blog articles / youtube just on this topic by Google, I think it's fair to assume that we all understand how critical this topic is.\r\n\r\n## Objective\r\nProvide a simple way (controlled by an env var, and not by a python API call) to dump the configuration of the `tf.data` pipeline requested by the user for a later analysis (aka. sort of a static code analyizer)\r\n\r\nThis PR proposes to _plug_ in the tf.data python in a fully transparent way to the user with no performance cost. And serialize the complete pipeline to a json file at a location determined by an env var: `TF_DATASET_SERIALIZE_OUTPUT_DIR=/path/to/export/dir`\r\n\r\n## Fine, but why would I want to serialize my tf data pipeline ?\r\nOnce the serialization is embedded in Tensorflow, we can follow different routes:\r\n- Provide a Tensorboard plugin that consumes this json file and produce recommendations\r\n- Provide a custom python package that would do the job in a CLI way\r\n- Integrate with already existing DL profiling solution such as DLProf: https://docs.nvidia.com/deeplearning/frameworks/dlprof-user-guide/\r\n\r\n## What can I recommendation shall I expect from this:\r\n\r\nThese are few examples, and are far from a finite list:\r\n- Did the user requested prefetch of CPU ?\r\n- Did the user requested prefetch on device (e.g. GPU) ?\r\n- Did the user process the data in a parallel fashion or still rely on sequential reading ?\r\n- Did the user use any non TF native ops such as `Data.from_generator()` or any `py_func()`\r\n- Did the user exploited any fused operation available (e.g. shuffle and repeat, map and batch, etc.)\r\n- Did the user read from raw data or from TF Records ?\r\n- Did the user use a sufficient number of CPU threads or rely of `tf.data.experimental.AUTOTUNE` ?\r\n\r\n## Is this proposal only benefiting GPU users ?\r\nThis proposal is fully agnostic to the device used as data-loading is critical for any kind of device the user might use.\r\nNonetheless, optimization recommendations could slightly vary from a device to device basis.\r\n\r\n## To be noted\r\nTF Data serialization can't be the one stop solution to maximize tf.data performance, *however*, making sure that user apply best practices in their data loading pipeline and from their fine tune the number of threads or other parameters sounds reasonable. IMHO, if every users would already be following all the \"rules\" cited above that would already be amazing.\r\n\r\n# Important implementation points:\r\n\r\n### Typical Node JSON fomat:\r\n```json\r\n\"00\": {\r\n           \"__class__\": \"ParallelInterleaveDataset\",\r\n            \"block_length\": 8,\r\n            \"calling_context\": {\r\n                \"filename\": \"/path/to/my/project/utils/dataloading.py\",\r\n                \"function\": \"get_dataset\",\r\n                \"line_number\": 81\r\n            },\r\n            \"cycle_length\": \"AUTOTUNE\",\r\n            \"map_func\": \"<function get_dataset.<locals>.fake_data_gen at 0x7fa6b826b488>\",\r\n            \"num_parallel_calls\": \"AUTOTUNE\",\r\n            \"output_dtype\": \"(tf.float32, tf.int32)\",\r\n            \"output_shape\": \"((3, 256, 256), ())\",\r\n            \"variant_tensor_inputs\": \"Tensor(\\\"TensorSliceDataset:0\\\", shape=(), dtype=variant)\",\r\n            \"variant_tensor_outputs\": \"Tensor(\\\"ParallelInterleaveDatasetV2:0\\\", shape=(), dtype=variant)\"\r\n        }\r\n```\r\n### We want to see the following information:\r\n- Trace what python calls (not the CPP OPs) the user requested with which arguments\r\n     - tf.data.DatasetV2 subclass (see `__class__` above)\r\n     - `__init__` arguments\r\n     - optimizations applied: tf.data Options\r\n- Track *where* in the python code did the user do X, Y and Z (see `calling_context` above)\r\n- Track the output dtype, shape and tensors\r\n- Be able to see on what device is the output tensor\r\n- Some datapoint related to runtime environment:\r\n   - number of CPU threads\r\n   - version of tensorflow\r\n   - Is the model using distributed training ? If yes with `tf.distributed` or `horovod`  ?\r\n   - if installed, version of libraries that might have an impact on data loading (NVIDIA DALI, Horovod, etc.)\r\n\r\n\r\n# Example Output:\r\n\r\n```json\r\n{\r\n    \"DISTRIBUTED_MODE\": null,\r\n    \"HOROVOD_VERSION\": \"0.19.0\",\r\n    \"NVIDIA_DALI_VERSION\": \"0.19.0\",\r\n    \"TENSORFLOW_VERSION\": \"1.15.2\",\r\n    \"TF_DATA_PIPELINE\": {\r\n        \"00\": {\r\n            \"__class__\": \"TensorSliceDataset\",\r\n            \"calling_context\": {\r\n                \"filename\": \"/path/to/my/project/utils/dataloading.py\",\r\n                \"function\": \"get_dataset\",\r\n                \"line_number\": 74\r\n            },\r\n            \"output_dtype\": \"tf.int32\",\r\n            \"output_shape\": \"()\",\r\n            \"variant_tensor_outputs\": \"Tensor(\\\"TensorSliceDataset:0\\\", shape=(), dtype=variant)\"\r\n        },\r\n        \"01\": {\r\n            \"__class__\": \"ParallelInterleaveDataset\",\r\n            \"block_length\": 8,\r\n            \"calling_context\": {\r\n                \"filename\": \"/path/to/my/project/utils/dataloading.py\",\r\n                \"function\": \"get_dataset\",\r\n                \"line_number\": 81\r\n            },\r\n            \"cycle_length\": \"AUTOTUNE\",\r\n            \"map_func\": \"<function get_dataset.<locals>.fake_data_gen at 0x7fa6b826b488>\",\r\n            \"num_parallel_calls\": \"AUTOTUNE\",\r\n            \"output_dtype\": \"(tf.float32, tf.int32)\",\r\n            \"output_shape\": \"((3, 256, 256), ())\",\r\n            \"variant_tensor_inputs\": \"Tensor(\\\"TensorSliceDataset:0\\\", shape=(), dtype=variant)\",\r\n            \"variant_tensor_outputs\": \"Tensor(\\\"ParallelInterleaveDatasetV2:0\\\", shape=(), dtype=variant)\"\r\n        },\r\n        \"02\": {\r\n            \"__class__\": \"_ShuffleAndRepeatDataset\",\r\n            \"buffer_size\": 2048,\r\n            \"calling_context\": {\r\n                \"filename\": \"/path/to/my/project/utils/dataloading.py\",\r\n                \"function\": \"get_dataset\",\r\n                \"line_number\": 93\r\n            },\r\n            \"count\": null,\r\n            \"output_dtype\": \"(tf.float32, tf.int32)\",\r\n            \"output_shape\": \"((3, 256, 256), ())\",\r\n            \"seed\": null,\r\n            \"variant_tensor_inputs\": \"Tensor(\\\"ParallelInterleaveDatasetV2:0\\\", shape=(), dtype=variant)\",\r\n            \"variant_tensor_outputs\": \"Tensor(\\\"ShuffleAndRepeatDataset:0\\\", shape=(), dtype=variant)\"\r\n        },\r\n        \"03\": {\r\n            \"__class__\": \"_MapAndBatchDataset\",\r\n            \"batch_size\": 256,\r\n            \"calling_context\": {\r\n                \"filename\": \"/path/to/my/project/utils/dataloading.py\",\r\n                \"function\": \"get_dataset\",\r\n                \"line_number\": 116\r\n            },\r\n            \"drop_remainder\": true,\r\n            \"map_func\": \"<function get_dataset.<locals>.data_mapping_fn at 0x7fa6a37750d0>\",\r\n            \"num_parallel_calls\": \"AUTOTUNE\",\r\n            \"output_dtype\": \"(tf.float32, tf.int32)\",\r\n            \"output_shape\": \"((256, 3, 256, 256), (256,))\",\r\n            \"use_legacy_function\": false,\r\n            \"variant_tensor_inputs\": \"Tensor(\\\"ShuffleAndRepeatDataset:0\\\", shape=(), dtype=variant)\",\r\n            \"variant_tensor_outputs\": \"Tensor(\\\"MapAndBatchDataset:0\\\", shape=(), dtype=variant)\"\r\n        },\r\n        \"04\": {\r\n            \"__class__\": \"PrefetchDataset\",\r\n            \"buffer_size\": \"AUTOTUNE\",\r\n            \"calling_context\": {\r\n                \"filename\": \"/path/to/my/project/utils/dataloading.py\",\r\n                \"function\": \"get_dataset\",\r\n                \"line_number\": 124\r\n            },\r\n            \"output_dtype\": \"(tf.float32, tf.int32)\",\r\n            \"output_shape\": \"((256, 3, 256, 256), (256,))\",\r\n            \"slack_period\": null,\r\n            \"variant_tensor_inputs\": \"Tensor(\\\"MapAndBatchDataset:0\\\", shape=(), dtype=variant)\",\r\n            \"variant_tensor_outputs\": \"Tensor(\\\"PrefetchDataset:0\\\", shape=(), dtype=variant)\"\r\n        },\r\n        \"05\": {\r\n            \"__class__\": \"_OptionsDataset\",\r\n            \"calling_context\": {\r\n                \"filename\": \"/path/to/my/project/utils/dataloading.py\",\r\n                \"function\": \"get_dataset\",\r\n                \"line_number\": 157\r\n            },\r\n            \"options\": {\r\n                \"experimental_deterministic\": false,\r\n                \"experimental_distribute\": {\r\n                    \"auto_shard\": true,\r\n                    \"num_devices\": null\r\n                },\r\n                \"experimental_optimization\": {\r\n                    \"apply_default_optimizations\": false,\r\n                    \"autotune\": true,\r\n                    \"autotune_algorithm\": null,\r\n                    \"autotune_buffers\": true,\r\n                    \"autotune_cpu_budget\": 20,\r\n                    \"filter_fusion\": true,\r\n                    \"filter_with_random_uniform_fusion\": null,\r\n                    \"hoist_random_uniform\": true,\r\n                    \"map_and_batch_fusion\": true,\r\n                    \"map_and_filter_fusion\": true,\r\n                    \"map_fusion\": true,\r\n                    \"map_parallelization\": true,\r\n                    \"map_vectorization\": {\r\n                        \"enabled\": true,\r\n                        \"use_choose_fastest\": true\r\n                    },\r\n                    \"noop_elimination\": true,\r\n                    \"parallel_batch\": true,\r\n                    \"prefetch_to_device\": \"/gpu:0\",\r\n                    \"prefetch_to_device_buffer\": 2,\r\n                    \"shuffle_and_repeat_fusion\": true\r\n                },\r\n                \"experimental_slack\": false,\r\n                \"experimental_stateful_whitelist\": null,\r\n                \"experimental_stats\": {\r\n                    \"aggregator\": null,\r\n                    \"counter_prefix\": \"\",\r\n                    \"latency_all_edges\": null,\r\n                    \"prefix\": \"\"\r\n                },\r\n                \"experimental_threading\": {\r\n                    \"max_intra_op_parallelism\": 20,\r\n                    \"private_threadpool_size\": 20\r\n                }\r\n            },\r\n            \"output_dtype\": \"(tf.float32, tf.int32)\",\r\n            \"output_shape\": \"((256, 3, 256, 256), (256,))\",\r\n            \"variant_tensor_inputs\": \"Tensor(\\\"PrefetchDataset:0\\\", shape=(), dtype=variant)\",\r\n            \"variant_tensor_outputs\": \"Tensor(\\\"PrefetchDataset:0\\\", shape=(), dtype=variant)\"\r\n        },\r\n        \"06\": {\r\n            \"__class__\": \"_MaxIntraOpParallelismDataset\",\r\n            \"calling_context\": {\r\n                \"filename\": \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/data/ops/dataset_ops.py\",\r\n                \"function\": \"_apply_options\",\r\n                \"line_number\": 527\r\n            },\r\n            \"max_intra_op_parallelism\": 20,\r\n            \"output_dtype\": \"(tf.float32, tf.int32)\",\r\n            \"output_shape\": \"((256, 3, 256, 256), (256,))\",\r\n            \"variant_tensor_inputs\": \"Tensor(\\\"PrefetchDataset:0\\\", shape=(), dtype=variant)\",\r\n            \"variant_tensor_outputs\": \"Tensor(\\\"MaxIntraOpParallelismDataset:0\\\", shape=(), dtype=variant)\"\r\n        },\r\n        \"07\": {\r\n            \"__class__\": \"_PrivateThreadPoolDataset\",\r\n            \"calling_context\": {\r\n                \"filename\": \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/data/ops/dataset_ops.py\",\r\n                \"function\": \"_apply_options\",\r\n                \"line_number\": 530\r\n            },\r\n            \"num_threads\": 20,\r\n            \"output_dtype\": \"(tf.float32, tf.int32)\",\r\n            \"output_shape\": \"((256, 3, 256, 256), (256,))\",\r\n            \"variant_tensor_inputs\": \"Tensor(\\\"MaxIntraOpParallelismDataset:0\\\", shape=(), dtype=variant)\",\r\n            \"variant_tensor_outputs\": \"Tensor(\\\"PrivateThreadPoolDataset:0\\\", shape=(), dtype=variant)\"\r\n        },\r\n        \"08\": {\r\n            \"__class__\": \"_OptimizeDataset\",\r\n            \"calling_context\": {\r\n                \"filename\": \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/data/ops/dataset_ops.py\",\r\n                \"function\": \"_apply_options\",\r\n                \"line_number\": 545\r\n            },\r\n            \"optimization_configs\": [\r\n                \"map_vectorization:use_choose_fastest:true\"\r\n            ],\r\n            \"optimizations\": [\r\n                \"filter_fusion\",\r\n                \"hoist_random_uniform\",\r\n                \"inject_prefetch\",\r\n                \"map_and_batch_fusion\",\r\n                \"map_and_filter_fusion\",\r\n                \"map_fusion\",\r\n                \"map_parallelization\",\r\n                \"map_vectorization\",\r\n                \"noop_elimination\",\r\n                \"parallel_batch\",\r\n                \"shuffle_and_repeat_fusion\",\r\n                \"make_sloppy\"\r\n            ],\r\n            \"output_dtype\": \"(tf.float32, tf.int32)\",\r\n            \"output_shape\": \"((256, 3, 256, 256), (256,))\",\r\n            \"variant_tensor_inputs\": \"Tensor(\\\"PrivateThreadPoolDataset:0\\\", shape=(), dtype=variant)\",\r\n            \"variant_tensor_outputs\": \"Tensor(\\\"OptimizeDataset:0\\\", shape=(), dtype=variant)\"\r\n        },\r\n        \"09\": {\r\n            \"__class__\": \"_ModelDataset\",\r\n            \"autotune_algorithm\": \"HILL_CLIMB\",\r\n            \"calling_context\": {\r\n                \"filename\": \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/data/ops/dataset_ops.py\",\r\n                \"function\": \"_apply_options\",\r\n                \"line_number\": 559\r\n            },\r\n            \"cpu_budget\": 20,\r\n            \"output_dtype\": \"(tf.float32, tf.int32)\",\r\n            \"output_shape\": \"((256, 3, 256, 256), (256,))\",\r\n            \"variant_tensor_inputs\": \"Tensor(\\\"OptimizeDataset:0\\\", shape=(), dtype=variant)\",\r\n            \"variant_tensor_outputs\": \"Tensor(\\\"ModelDataset:0\\\", shape=(), dtype=variant)\"\r\n        },\r\n        \"options\": {\r\n            \"experimental_deterministic\": false,\r\n            \"experimental_distribute\": {},\r\n            \"experimental_optimization\": {\r\n                \"apply_default_optimizations\": false,\r\n                \"autotune\": true,\r\n                \"autotune_algorithm\": null,\r\n                \"autotune_buffers\": true,\r\n                \"autotune_cpu_budget\": 20,\r\n                \"filter_fusion\": true,\r\n                \"filter_with_random_uniform_fusion\": null,\r\n                \"hoist_random_uniform\": true,\r\n                \"map_and_batch_fusion\": true,\r\n                \"map_and_filter_fusion\": true,\r\n                \"map_fusion\": true,\r\n                \"map_parallelization\": true,\r\n                \"map_vectorization\": {\r\n                    \"enabled\": true,\r\n                    \"use_choose_fastest\": true\r\n                },\r\n                \"noop_elimination\": true,\r\n                \"parallel_batch\": true,\r\n                \"prefetch_to_device\": \"/gpu:0\",\r\n                \"prefetch_to_device_buffer\": 2,\r\n                \"shuffle_and_repeat_fusion\": true\r\n            },\r\n            \"experimental_slack\": false,\r\n            \"experimental_stateful_whitelist\": null,\r\n            \"experimental_stats\": {},\r\n            \"experimental_threading\": {\r\n                \"max_intra_op_parallelism\": 20,\r\n                \"private_threadpool_size\": 20\r\n            }\r\n        }\r\n    },\r\n    \"TOTAL_CPU_THREADS\": 20\r\n}\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37515", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37515/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37515/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37515/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37515", "id": 579528291, "node_id": "MDU6SXNzdWU1Nzk1MjgyOTE=", "number": 37515, "title": "Tensorflow 2.1 Error \u201cwhen finalizing GeneratorDataset iterator\u201d - a memory leak?", "user": {"login": "Tuxius", "id": 15003710, "node_id": "MDQ6VXNlcjE1MDAzNzEw", "avatar_url": "https://avatars1.githubusercontent.com/u/15003710?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Tuxius", "html_url": "https://github.com/Tuxius", "followers_url": "https://api.github.com/users/Tuxius/followers", "following_url": "https://api.github.com/users/Tuxius/following{/other_user}", "gists_url": "https://api.github.com/users/Tuxius/gists{/gist_id}", "starred_url": "https://api.github.com/users/Tuxius/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Tuxius/subscriptions", "organizations_url": "https://api.github.com/users/Tuxius/orgs", "repos_url": "https://api.github.com/users/Tuxius/repos", "events_url": "https://api.github.com/users/Tuxius/events{/privacy}", "received_events_url": "https://api.github.com/users/Tuxius/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "aaudiber", "id": 3455177, "node_id": "MDQ6VXNlcjM0NTUxNzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/3455177?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaudiber", "html_url": "https://github.com/aaudiber", "followers_url": "https://api.github.com/users/aaudiber/followers", "following_url": "https://api.github.com/users/aaudiber/following{/other_user}", "gists_url": "https://api.github.com/users/aaudiber/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaudiber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaudiber/subscriptions", "organizations_url": "https://api.github.com/users/aaudiber/orgs", "repos_url": "https://api.github.com/users/aaudiber/repos", "events_url": "https://api.github.com/users/aaudiber/events{/privacy}", "received_events_url": "https://api.github.com/users/aaudiber/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aaudiber", "id": 3455177, "node_id": "MDQ6VXNlcjM0NTUxNzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/3455177?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaudiber", "html_url": "https://github.com/aaudiber", "followers_url": "https://api.github.com/users/aaudiber/followers", "following_url": "https://api.github.com/users/aaudiber/following{/other_user}", "gists_url": "https://api.github.com/users/aaudiber/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaudiber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaudiber/subscriptions", "organizations_url": "https://api.github.com/users/aaudiber/orgs", "repos_url": "https://api.github.com/users/aaudiber/repos", "events_url": "https://api.github.com/users/aaudiber/events{/privacy}", "received_events_url": "https://api.github.com/users/aaudiber/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2020-03-11T20:31:18Z", "updated_at": "2020-03-19T17:31:54Z", "closed_at": null, "author_association": "NONE", "body": "**Reopening of issue [#35100](https://github.com/tensorflow/tensorflow/issues/35100),** as more and more people report to still have the same problem:\r\n\r\n**Problem description**\r\n\r\nI am using TensorFlow 2.1.0 for image classification under Centos Linux. As my image training data set is growing, I have to start using a Generator as I do not have enough RAM to hold all pictures. I have coded the Generator based on this tutorial.\r\n\r\nIt seems to work fine, until my program all the sudden gets killed without an error message:\r\n\r\n```\r\nEpoch 6/30\r\n2020-03-08 13:28:11.361785: W tensorflow/core/kernels/data/generator_dataset_op.cc:103] Error occurred when finalizing GeneratorDataset iterator: Cancelled: Operation was cancelled\r\n43/43 [==============================] - 54s 1s/step - loss: 5.6839 - accuracy: 0.4669\r\nEpoch 7/30\r\n2020-03-08 13:29:05.511813: W tensorflow/core/kernels/data/generator_dataset_op.cc:103] Error occurred when finalizing GeneratorDataset iterator: Cancelled: Operation was cancelled\r\n 7/43 [===>..........................] - ETA: 1:04 - loss: 4.3953 - accuracy: 0.5268Killed\r\n```\r\n\r\nLooking at the growing memory consumption with linux's top, I suspect a memory leak?\r\n\r\n**What I have tried**\r\n\r\n- The suggestion to switch to TF nightly build version. For me it did not help, also downgrading to TF2.0.1 did not help\r\n\r\n- There is a discussion suggesting that it is important, that 'steps_per_epoch' and 'batch size' correspond (whatever this exactly means) - I played with it without finding any improvement.\r\n\r\n- Trying to narrow down by looking at the size development of all variables in my Generator\r\n\r\n**Relevant code snippets**\r\n\r\n```\r\nclass DataGenerator(tf.keras.utils.Sequence):\r\n    'Generates data for Keras'\r\n    def __init__(self, list_IDs, labels, dir, n_classes):\r\n        'Initialization'\r\n        config = configparser.ConfigParser()\r\n        config.sections()\r\n        config.read('config.ini')\r\n\r\n        self.dim = (int(config['Basics']['PicHeight']),int(config['Basics']['PicWidth']))\r\n        self.batch_size = int(config['HyperParameter']['batchsize'])\r\n        self.labels = labels\r\n        self.list_IDs = list_IDs\r\n        self.dir = dir\r\n        self.n_channels = 3\r\n        self.n_classes = n_classes\r\n        self.on_epoch_end()        \r\n\r\n\r\n    def __len__(self):\r\n        'Denotes the number of batches per epoch'\r\n        return math.floor(len(self.list_IDs) / self.batch_size)\r\n\r\n    def __getitem__(self, index):\r\n        'Generate one batch of data'\r\n        # Generate indexes of the batch\r\n        indexes = self.indexes[index*self.batch_size:(index+1)*self.batch_size]\r\n\r\n        # Find list of IDs\r\n        list_IDs_temp = [self.list_IDs[k] for k in indexes]\r\n\r\n        # Generate data\r\n        X, y = self.__data_generation(list_IDs_temp)\r\n\r\n        return X, y, [None]\r\n```\r\n\r\nbeing called by\r\n\r\n```\r\n        training_generator = datagenerator.DataGenerator(train_files, labels, dir, len(self.class_names))\r\n        self.model.fit(x=training_generator,\r\n                    use_multiprocessing=False,\r\n                    workers=6, \r\n                    epochs=self._Epochs, \r\n                    steps_per_epoch = len(training_generator),\r\n                    callbacks=[LoggingCallback(self.logger.debug)])\r\n```\r\n\r\nI have tried running the exact same code under Windows 10, which gives me the following error:\r\n\r\n```\r\nEpoch 9/30\r\n2020-03-08 20:49:37.555692: W tensorflow/core/kernels/data/generator_dataset_op.cc:103] Error occurred when finalizing GeneratorDataset iterator: Cancelled: Operation was cancelled\r\n41/41 [==============================] - 75s 2s/step - loss: 2.0167 - accuracy: 0.3133\r\nEpoch 10/30\r\n2020-03-08 20:50:52.986306: W tensorflow/core/kernels/data/generator_dataset_op.cc:103] Error occurred when finalizing GeneratorDataset iterator: Cancelled: Operation was cancelled\r\n 1/41 [..............................] - ETA: 2:36 - loss: 1.6237 - accuracy: 0.39062020-03-08 20:50:57.689373: W tensorflow/core/framework/op_kernel.cc:1655] OP_REQUIRES failed at matmul_op.cc:480 : Resource exhausted: OOM when allocating tensor with shape[1279200,322] and type float on /job:localhost/replica:0/task:0/device:CPU:0 by allocator cpu\r\n2020-03-08 20:50:57.766163: W tensorflow/core/common_runtime/base_collective_executor.cc:217] BaseCollectiveExecutor::StartAbort Resource exhausted: OOM when allocating tensor with shape[1279200,322] and type float on /job:localhost/replica:0/task:0/device:CPU:0 by allocator cpu\r\n         [[{{node MatMul_6}}]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\n\r\n 2/41 [>.............................] - ETA: 2:02 - loss: 1.6237 - accuracy: 0.3906Traceback (most recent call last):\r\n  File \"run.py\", line 83, in <module>\r\n    main()\r\n  File \"run.py\", line 70, in main\r\n    accuracy, num_of_classes = train_Posture(unique_name)\r\n  File \"run.py\", line 31, in train_Posture\r\n    acc = neuro.train(picdb, train_ids, test_ids, \"Posture\")\r\n  File \"A:\\200307 3rd Try\\neuro.py\", line 161, in train\r\n    callbacks=[LoggingCallback(self.logger.debug)])\r\n  File \"C:\\Users\\Frank\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training.py\", line 819, in fit\r\n    use_multiprocessing=use_multiprocessing)\r\n  File \"C:\\Users\\Frank\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_v2.py\", line 342, in fit\r\n    total_epochs=epochs)\r\n  File \"C:\\Users\\Frank\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_v2.py\", line 128, in run_one_epoch\r\n    batch_outs = execution_function(iterator)\r\n  File \"C:\\Users\\Frank\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_v2_utils.py\", line 98, in execution_function\r\n    distributed_function(input_fn))\r\n  File \"C:\\Users\\Frank\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\eager\\def_function.py\", line 568, in __call__\r\n    result = self._call(*args, **kwds)\r\n  File \"C:\\Users\\Frank\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\eager\\def_function.py\", line 599, in _call\r\n    return self._stateless_fn(*args, **kwds)  # pylint: disable=not-callable\r\n  File \"C:\\Users\\Frank\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\eager\\function.py\", line 2363, in __call__\r\n    return graph_function._filtered_call(args, kwargs)  # pylint: disable=protected-access\r\n  File \"C:\\Users\\Frank\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\eager\\function.py\", line 1611, in _filtered_call\r\n    self.captured_inputs)\r\n  File \"C:\\Users\\Frank\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\eager\\function.py\", line 1692, in _call_flat\r\n    ctx, args, cancellation_manager=cancellation_manager))\r\n  File \"C:\\Users\\Frank\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\eager\\function.py\", line 545, in call\r\n    ctx=ctx)\r\n  File \"C:\\Users\\Frank\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\eager\\execute.py\", line 67, in quick_execute\r\n    six.raise_from(core._status_to_exception(e.code, message), None)\r\n  File \"<string>\", line 3, in raise_from\r\ntensorflow.python.framework.errors_impl.ResourceExhaustedError:  OOM when allocating tensor with shape[1279200,322] and type float on /job:localhost/replica:0/task:0/device:CPU:0 by allocator cpu\r\n         [[node MatMul_6 (defined at A:\\200307 3rd Try\\neuro.py:161) ]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\n [Op:__inference_distributed_function_764]\r\n\r\nFunction call stack:\r\ndistributed_function\r\n\r\n2020-03-08 20:51:00.785175: W tensorflow/core/kernels/data/generator_dataset_op.cc:103] Error occurred when finalizing GeneratorDataset iterator: Cancelled: Operation was cancelled\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37513", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37513/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37513/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37513/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37513", "id": 579412459, "node_id": "MDU6SXNzdWU1Nzk0MTI0NTk=", "number": 37513, "title": "\"Segmentation fault\" on Amazon deep learning AMI, gpu-compute instance", "user": {"login": "ben-arnao", "id": 8053809, "node_id": "MDQ6VXNlcjgwNTM4MDk=", "avatar_url": "https://avatars0.githubusercontent.com/u/8053809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ben-arnao", "html_url": "https://github.com/ben-arnao", "followers_url": "https://api.github.com/users/ben-arnao/followers", "following_url": "https://api.github.com/users/ben-arnao/following{/other_user}", "gists_url": "https://api.github.com/users/ben-arnao/gists{/gist_id}", "starred_url": "https://api.github.com/users/ben-arnao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ben-arnao/subscriptions", "organizations_url": "https://api.github.com/users/ben-arnao/orgs", "repos_url": "https://api.github.com/users/ben-arnao/repos", "events_url": "https://api.github.com/users/ben-arnao/events{/privacy}", "received_events_url": "https://api.github.com/users/ben-arnao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, {"login": "ravikyram", "id": 51902062, "node_id": "MDQ6VXNlcjUxOTAyMDYy", "avatar_url": "https://avatars2.githubusercontent.com/u/51902062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ravikyram", "html_url": "https://github.com/ravikyram", "followers_url": "https://api.github.com/users/ravikyram/followers", "following_url": "https://api.github.com/users/ravikyram/following{/other_user}", "gists_url": "https://api.github.com/users/ravikyram/gists{/gist_id}", "starred_url": "https://api.github.com/users/ravikyram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ravikyram/subscriptions", "organizations_url": "https://api.github.com/users/ravikyram/orgs", "repos_url": "https://api.github.com/users/ravikyram/repos", "events_url": "https://api.github.com/users/ravikyram/events{/privacy}", "received_events_url": "https://api.github.com/users/ravikyram/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-03-11T17:00:15Z", "updated_at": "2020-03-13T18:41:03Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04):  Deep Learning AMI (Amazon Linux) Version 27.0 (ami-0e2a8509db267f072)\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if\r\nthe issue happens on mobile device: \r\n- TensorFlow installed from (source or\r\nbinary): - TensorFlow version (use command below): source activate tensorflow2_p36 on AMI\r\n- Python version: - Bazel 3.6\r\nversion (if compiling from source):\r\n- GCC/Compiler version (if compiling from\r\nsource):  None\r\n- CUDA/cuDNN version: - GPU model and memory:\r\np3.2xlarge AWS instance.  NVIDIA Tesla V100 15gb. 10.1 cuda, 7.6 cudnn\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\nmodel.fit() just stops randomly with \"segmentation fault\" no other info\r\n\r\n**Describe the expected behavior**\r\n\r\nNo errors or at least more debugging info\r\n\r\n**Standalone code to reproduce the issue** \r\nProvide a reproducible test case that is the bare minimum necessary to generate\r\nthe problem. If possible, please share a link to Colab/Jupyter/any notebook.\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37511", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37511/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37511/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37511/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37511", "id": 579369374, "node_id": "MDU6SXNzdWU1NzkzNjkzNzQ=", "number": 37511, "title": "Error retrieving regularization losses after adding them to a pretrained model.", "user": {"login": "ujjwal-ai", "id": 60658842, "node_id": "MDQ6VXNlcjYwNjU4ODQy", "avatar_url": "https://avatars0.githubusercontent.com/u/60658842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ujjwal-ai", "html_url": "https://github.com/ujjwal-ai", "followers_url": "https://api.github.com/users/ujjwal-ai/followers", "following_url": "https://api.github.com/users/ujjwal-ai/following{/other_user}", "gists_url": "https://api.github.com/users/ujjwal-ai/gists{/gist_id}", "starred_url": "https://api.github.com/users/ujjwal-ai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ujjwal-ai/subscriptions", "organizations_url": "https://api.github.com/users/ujjwal-ai/orgs", "repos_url": "https://api.github.com/users/ujjwal-ai/repos", "events_url": "https://api.github.com/users/ujjwal-ai/events{/privacy}", "received_events_url": "https://api.github.com/users/ujjwal-ai/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1903591931, "node_id": "MDU6TGFiZWwxOTAzNTkxOTMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.2", "name": "TF 2.2", "color": "0052cc", "default": false, "description": "Issues related to TF 2.2"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-03-11T15:55:07Z", "updated_at": "2020-03-15T06:31:16Z", "closed_at": null, "author_association": "NONE", "body": "It appears that adding regularization losses to a pre-trained model results in some issue which leads to an error when retrieving the losses. I am having this problem with the TensorFlow 2.2.  Its git version is `v1.12.1-26428-gcb73044`.\r\n\r\nThe reproducible code is shown below:\r\n\r\n```\r\nimport tensorflow as tf\r\n\r\nclass Model(tf.keras.Model):\r\n    def __init__(self):\r\n        super(Model, self).__init__()\r\n        self._model = tf.keras.applications.ResNet101(include_top=False, weights='imagenet')\r\n\r\n    def build(self, input_shape=None):\r\n        for layer in self._model.layers:\r\n            if type(layer) == tf.keras.layers.Conv2D:\r\n                layer.add_loss( lambda : tf.keras.regularizers.l2(1e-5)(layer.kernel))\r\n\r\n    def call(self, x):\r\n        return self._net(x)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    m = Model()\r\n    x = tf.random.uniform(shape=(1,3,512,512))\r\n   m.build()\r\n   print(m.losses)\r\n```\r\n   \r\n\r\nThe error message is -\r\n\r\n `AttributeError: 'Activation' object has no attribute 'kernel'`\r\n\r\n    \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37507", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37507/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37507/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37507/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37507", "id": 579166584, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg2NjEwNjk4", "number": 37507, "title": "Fix typo", "user": {"login": "t-ubukata", "id": 29685707, "node_id": "MDQ6VXNlcjI5Njg1NzA3", "avatar_url": "https://avatars3.githubusercontent.com/u/29685707?v=4", "gravatar_id": "", "url": "https://api.github.com/users/t-ubukata", "html_url": "https://github.com/t-ubukata", "followers_url": "https://api.github.com/users/t-ubukata/followers", "following_url": "https://api.github.com/users/t-ubukata/following{/other_user}", "gists_url": "https://api.github.com/users/t-ubukata/gists{/gist_id}", "starred_url": "https://api.github.com/users/t-ubukata/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/t-ubukata/subscriptions", "organizations_url": "https://api.github.com/users/t-ubukata/orgs", "repos_url": "https://api.github.com/users/t-ubukata/repos", "events_url": "https://api.github.com/users/t-ubukata/events{/privacy}", "received_events_url": "https://api.github.com/users/t-ubukata/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 987666414, "node_id": "MDU6TGFiZWw5ODc2NjY0MTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/ready%20to%20pull", "name": "ready to pull", "color": "2cd643", "default": false, "description": ""}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-03-11T10:40:49Z", "updated_at": "2020-03-13T18:45:21Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37507", "html_url": "https://github.com/tensorflow/tensorflow/pull/37507", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37507.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37507.patch"}, "body": "Fix miscellaneous typos and format."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37506", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37506/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37506/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37506/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37506", "id": 579143013, "node_id": "MDU6SXNzdWU1NzkxNDMwMTM=", "number": 37506, "title": "Tensorflow hexagon tflite benchmark fails with quantized mobilenetv2", "user": {"login": "anilsathyan7", "id": 1130185, "node_id": "MDQ6VXNlcjExMzAxODU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1130185?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anilsathyan7", "html_url": "https://github.com/anilsathyan7", "followers_url": "https://api.github.com/users/anilsathyan7/followers", "following_url": "https://api.github.com/users/anilsathyan7/following{/other_user}", "gists_url": "https://api.github.com/users/anilsathyan7/gists{/gist_id}", "starred_url": "https://api.github.com/users/anilsathyan7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anilsathyan7/subscriptions", "organizations_url": "https://api.github.com/users/anilsathyan7/orgs", "repos_url": "https://api.github.com/users/anilsathyan7/repos", "events_url": "https://api.github.com/users/anilsathyan7/events{/privacy}", "received_events_url": "https://api.github.com/users/anilsathyan7/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "karimnosseir", "id": 44206880, "node_id": "MDQ6VXNlcjQ0MjA2ODgw", "avatar_url": "https://avatars1.githubusercontent.com/u/44206880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karimnosseir", "html_url": "https://github.com/karimnosseir", "followers_url": "https://api.github.com/users/karimnosseir/followers", "following_url": "https://api.github.com/users/karimnosseir/following{/other_user}", "gists_url": "https://api.github.com/users/karimnosseir/gists{/gist_id}", "starred_url": "https://api.github.com/users/karimnosseir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karimnosseir/subscriptions", "organizations_url": "https://api.github.com/users/karimnosseir/orgs", "repos_url": "https://api.github.com/users/karimnosseir/repos", "events_url": "https://api.github.com/users/karimnosseir/events{/privacy}", "received_events_url": "https://api.github.com/users/karimnosseir/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "karimnosseir", "id": 44206880, "node_id": "MDQ6VXNlcjQ0MjA2ODgw", "avatar_url": "https://avatars1.githubusercontent.com/u/44206880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karimnosseir", "html_url": "https://github.com/karimnosseir", "followers_url": "https://api.github.com/users/karimnosseir/followers", "following_url": "https://api.github.com/users/karimnosseir/following{/other_user}", "gists_url": "https://api.github.com/users/karimnosseir/gists{/gist_id}", "starred_url": "https://api.github.com/users/karimnosseir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karimnosseir/subscriptions", "organizations_url": "https://api.github.com/users/karimnosseir/orgs", "repos_url": "https://api.github.com/users/karimnosseir/repos", "events_url": "https://api.github.com/users/karimnosseir/events{/privacy}", "received_events_url": "https://api.github.com/users/karimnosseir/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2020-03-11T10:04:41Z", "updated_at": "2020-03-18T01:11:15Z", "closed_at": null, "author_association": "NONE", "body": "\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04.4 LTS\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version:  Build from: git clone --recurse-submodules https://github.com/tensorflow/tensorflow.git\r\n- Python version: 3.6.9\r\n- Bazel version (if compiling from source): 2.0.0\r\n- GCC/Compiler version (if compiling from source):gcc (Ubuntu 7.4.0-1ubuntu1~18.04.1) 7.4.0\r\n- Device: Redmi Note 7 Pro (Hexagon 685 DSP),  Android 10.0; MIUI 11\r\n\r\n**Describe the current behavior**\r\nWhen i try to run the official **quantized mobilenet v2 model** in tflite benchmark  using **hexagon** delegate, it fails with the following error:-\r\n\r\n> adb shell /data/local/tmp/benchmark_model_tf15 --graph=/data/local/tmp/mobilenet_v2_1.0_224_quant.tflite --enable_op_profiling=true --use_hexagon=true\r\n> adb: /opt/intel/intelpython27/lib/libcrypto.so.1.0.0: no version information available (required by adb)\r\n> STARTING!\r\n> Min num runs: [50]\r\n> Min runs duration (seconds): [1]\r\n> Max runs duration (seconds): [150]\r\n> Inter-run delay (seconds): [-1]\r\n> Num threads: [1]\r\n> Benchmark name: []\r\n> Output prefix: []\r\n> Min warmup runs: [1]\r\n> Min warmup runs duration (seconds): [0.5]\r\n> Graph: [/data/local/tmp/mobilenet_v2_1.0_224_quant.tflite]\r\n> Input layers: []\r\n> Input shapes: []\r\n> Input value ranges: []\r\n> Use legacy nnapi : [0]\r\n> Allow fp16 : [0]\r\n> Require full delegation : [0]\r\n> Enable op profiling: [1]\r\n> Max profiling buffer entries: [1024]\r\n> CSV File to export profiling data to: []\r\n> Use gpu : [0]\r\n> Allow lower precision in gpu : [1]\r\n> Use Hexagon : [1]\r\n> Hexagon lib path : [/data/local/tmp]\r\n> Hexagon Profiling : [0]\r\n> Use nnapi : [0]\r\n> Use xnnpack : [0]\r\n> Loaded model /data/local/tmp/mobilenet_v2_1.0_224_quant.tflite\r\n> INFO: Initialized TensorFlow Lite runtime.\r\n> loaded libcdsprpc.so\r\n> INFO: Created TensorFlow Lite delegate for Hexagon.\r\n> INFO: Hexagon delegate: 65 nodes delegated out of 65 nodes.\r\n> \r\n> ----------------\r\n> Timestamp: Wed Mar 11 12:45:53 2020\r\n> \r\n> \r\n> Log\r\n> hexagon/src/newnode.c:413:node 2 (Quantize_int32_ref): bad input count 12\r\n> hexagon/src/newnode.c:763:node id=0x2 ctor fail\r\n> \r\n> ----------------\r\n> ERROR: Failed: Failed to prepare graph.\r\n> . STATE: FAILED_TO_PREPARE_GRAPH\r\n> **ERROR: Node number 65 (TfLiteHexagonDelegate) failed to prepare.**\r\n> \r\n> ERROR: Restored previous execution plan after delegate application failure.\r\n> Failed to apply Hexagon delegate.\r\n> Benchmarking failed.\r\n\r\nAll the '.so' files were initially copied to path: /data/local/tmp on device and the delegate was successfully created. I tried adding 'use_nnapi'= true along with use_hexagon option ; but it does not make any difference. \r\n\r\nI followed the instruction to build the hexagon delegate and libraries from the official documentation\r\n\r\n> bazel build --config=android_arm64 \\\r\n>   tensorflow/lite/experimental/delegates/hexagon/hexagon_nn:libhexagon_interface.so\r\n> adb push bazel-bin/tensorflow/lite/experimental/delegates/hexagon/hexagon_nn/libhexagon_interface.so /data/local/tmp\r\n> adb push libhexagon_nn_skel*.so /data/local/tmp\r\n(32 bit version gave an error, so i used arm64)\r\n\r\nHexagon library: [v1.14](https://storage.cloud.google.com/download.tensorflow.org/tflite/hexagon_nn_skel_v1.14.run)\r\nModel:[ mobilenet_v2_1.0_224_quant](https://storage.googleapis.com/download.tensorflow.org/models/tflite_11_05_08/mobilenet_v2_1.0_224_quant.tgz)\r\n\r\nAlso does the hexagon model execute a tflite generated by **post-training quantization(full INT8)** ?\r\n\r\nWhen  i tried another  **custom quantized** model(post-training quantization) with int8 inputs and outputs, it shows :  **INFO: Hexagon delegate: 0 nodes delegated out of 158 nodes.**  and seems to fall back to CPU.\r\n\r\n**Describe the expected behavior**\r\nThe benchmark model should run the quantized model without any problems.\r\n\r\n**Other info / logs**\r\nAndroid NDK: 20, Benchmark tool built from latest source with bazel 2.0\r\n\r\nHere are the two models that i have tried to benchmark and the corresponding benchmark library files:-\r\n[hexfiles.zip](https://github.com/tensorflow/tensorflow/files/4317362/hexfiles.zip)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37505", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37505/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37505/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37505/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37505", "id": 579138217, "node_id": "MDU6SXNzdWU1NzkxMzgyMTc=", "number": 37505, "title": "Memory leak in model.fit", "user": {"login": "nkoerb", "id": 47297576, "node_id": "MDQ6VXNlcjQ3Mjk3NTc2", "avatar_url": "https://avatars0.githubusercontent.com/u/47297576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nkoerb", "html_url": "https://github.com/nkoerb", "followers_url": "https://api.github.com/users/nkoerb/followers", "following_url": "https://api.github.com/users/nkoerb/following{/other_user}", "gists_url": "https://api.github.com/users/nkoerb/gists{/gist_id}", "starred_url": "https://api.github.com/users/nkoerb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nkoerb/subscriptions", "organizations_url": "https://api.github.com/users/nkoerb/orgs", "repos_url": "https://api.github.com/users/nkoerb/repos", "events_url": "https://api.github.com/users/nkoerb/events{/privacy}", "received_events_url": "https://api.github.com/users/nkoerb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2020-03-11T09:57:12Z", "updated_at": "2020-03-17T08:59:57Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information** \r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): \r\nminimal working example\r\n\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): \r\nwindows-server 2016\r\n- TensorFlow installed from (source or binary): \r\nconda\r\n- TensorFlow version (use command below): \r\ntf 2.1.0\r\n- Python version: \r\n3.7\r\n- CUDA/cuDNN version: \r\nCUDA 10.1\r\n- GPU model and memory:\r\nK80 - 24Gb\r\n\r\n**Describe the current behavior**\r\nmemory use increases with consecutive training runs, probably related to #35524, #33030, #35124, #35835\r\nside note: I do not understand the warning but this seems to be handled in #37500\r\n**Describe the expected behavior**\r\nmemory should stay constant\r\n\r\n**Standalone code to reproduce the issue** \r\nProvide a reproducible test case that is the bare minimum necessary to generate\r\nthe problem. If possible, please share a link to Colab/Jupyter/any notebook.\r\n\r\n```\r\nfrom tensorflow.keras.datasets import cifar10\r\nimport tensorflow.keras.callbacks as callbacks\r\nfrom tensorflow.keras.preprocessing.image import ImageDataGenerator\r\nfrom tensorflow.keras.callbacks import LearningRateScheduler\r\nfrom tensorflow.keras.optimizers import SGD\r\nfrom tensorflow.keras.layers import Input, Conv2D, GlobalAveragePooling2D, Activation, Dense\r\nfrom tensorflow.keras.models import Model\r\nimport tensorflow.keras.utils as kutils\r\nimport numpy as np\r\nimport psutil\r\nimport gc \r\n\r\n\r\nbatch_size = 128\r\nepochs = 5\r\nnum_classes = 10\r\n\r\n\r\ndef buildmodel():\r\n    img_input = Input(shape=(32, 32, 3))\r\n\r\n    x = Conv2D(16, (3, 3), padding='same')(img_input)\r\n    x = Activation(\"relu\")(x)\r\n    x = Conv2D(16, (3, 3), padding='same')(x)\r\n    x = Activation(\"relu\")(x)\r\n    x = GlobalAveragePooling2D()(x)\r\n    prediction = Dense(num_classes,activation='softmax', name = 'classifier') (x)  \r\n    model = Model(inputs=img_input, outputs=prediction)\r\n    return model\r\n\r\n(trainX, trainY), (testX, testY) = cifar10.load_data()\r\nmean = np.mean(trainX, axis=0)\r\nstd = np.std(trainX)\r\n\r\ntrainX = trainX.astype('float32')\r\ntrainX = (trainX - mean) / std\r\ntestX = testX.astype('float32')\r\ntestX = (testX - mean) / std\r\n\r\ntrainY = kutils.to_categorical(trainY)\r\ntestY = kutils.to_categorical(testY)\r\n\r\ngenerator = ImageDataGenerator()\r\ngenerator.fit(trainX)\r\nval_generator = ImageDataGenerator()\r\n\r\nfor i in range(10):\r\n    tf.keras.backend.clear_session()\r\n    model = buildmodel()\r\n    sgd = SGD(lr=0.1, momentum=0.9, nesterov=True)\r\n    model.compile(loss=\"categorical_crossentropy\", optimizer=sgd, metrics=[\"acc\"])\r\n    model.fit(generator.flow(trainX, trainY, batch_size=batch_size), epochs=epochs, validation_data=val_generator.flow(testX, testY, batch_size = batch_size),verbose=0, workers = 20)\r\n    print('memory usesd: ' + str(psutil.virtual_memory().used // 1e6))\r\n    gc.collect()\r\n```\r\n\r\noutput:\r\nWARNING:tensorflow:sample_weight modes were coerced from\r\n  ...\r\n    to  \r\n  ['...']\r\nWARNING:tensorflow:sample_weight modes were coerced from\r\n  ...\r\n    to  \r\n  ['...']\r\nmemory usesd: 38012.0\r\nWARNING:tensorflow:sample_weight modes were coerced from\r\n  ...\r\n    to  \r\n  ['...']\r\nWARNING:tensorflow:sample_weight modes were coerced from\r\n  ...\r\n    to  \r\n  ['...']\r\nmemory usesd: 38563.0\r\nWARNING:tensorflow:sample_weight modes were coerced from\r\n  ...\r\n    to  \r\n  ['...']\r\nWARNING:tensorflow:sample_weight modes were coerced from\r\n  ...\r\n    to  \r\n  ['...']\r\nmemory usesd: 39288.0\r\nWARNING:tensorflow:sample_weight modes were coerced from\r\n  ...\r\n    to  \r\n  ['...']\r\nWARNING:tensorflow:sample_weight modes were coerced from\r\n  ...\r\n    to  \r\n  ['...']\r\nmemory usesd: 40005.0\r\nWARNING:tensorflow:sample_weight modes were coerced from\r\n  ...\r\n    to  \r\n  ['...']\r\nWARNING:tensorflow:sample_weight modes were coerced from\r\n  ...\r\n    to  \r\n  ['...']\r\nmemory usesd: 40730.0\r\nWARNING:tensorflow:sample_weight modes were coerced from\r\n  ...\r\n    to  \r\n  ['...']\r\nWARNING:tensorflow:sample_weight modes were coerced from\r\n  ...\r\n    to  \r\n  ['...']\r\nmemory usesd: 41490.0\r\nWARNING:tensorflow:sample_weight modes were coerced from\r\n  ...\r\n    to  \r\n  ['...']\r\nWARNING:tensorflow:sample_weight modes were coerced from\r\n  ...\r\n    to  \r\n  ['...']\r\nmemory usesd: 42216.0\r\nWARNING:tensorflow:sample_weight modes were coerced from\r\n  ...\r\n    to  \r\n  ['...']\r\nWARNING:tensorflow:sample_weight modes were coerced from\r\n  ...\r\n    to  \r\n  ['...']\r\nmemory usesd: 42937.0\r\nWARNING:tensorflow:sample_weight modes were coerced from\r\n  ...\r\n    to  \r\n  ['...']\r\nWARNING:tensorflow:sample_weight modes were coerced from\r\n  ...\r\n    to  \r\n  ['...']\r\nmemory usesd: 43659.0\r\nWARNING:tensorflow:sample_weight modes were coerced from\r\n  ...\r\n    to  \r\n  ['...']\r\nWARNING:tensorflow:sample_weight modes were coerced from\r\n  ...\r\n    to  \r\n  ['...']\r\nmemory usesd: 44403.0\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37504", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37504/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37504/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37504/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37504", "id": 579136484, "node_id": "MDU6SXNzdWU1NzkxMzY0ODQ=", "number": 37504, "title": "Fit under TPU strategy fails on cardinality", "user": {"login": "jonyvp", "id": 39876179, "node_id": "MDQ6VXNlcjM5ODc2MTc5", "avatar_url": "https://avatars2.githubusercontent.com/u/39876179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonyvp", "html_url": "https://github.com/jonyvp", "followers_url": "https://api.github.com/users/jonyvp/followers", "following_url": "https://api.github.com/users/jonyvp/following{/other_user}", "gists_url": "https://api.github.com/users/jonyvp/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonyvp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonyvp/subscriptions", "organizations_url": "https://api.github.com/users/jonyvp/orgs", "repos_url": "https://api.github.com/users/jonyvp/repos", "events_url": "https://api.github.com/users/jonyvp/events{/privacy}", "received_events_url": "https://api.github.com/users/jonyvp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ravikyram", "id": 51902062, "node_id": "MDQ6VXNlcjUxOTAyMDYy", "avatar_url": "https://avatars2.githubusercontent.com/u/51902062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ravikyram", "html_url": "https://github.com/ravikyram", "followers_url": "https://api.github.com/users/ravikyram/followers", "following_url": "https://api.github.com/users/ravikyram/following{/other_user}", "gists_url": "https://api.github.com/users/ravikyram/gists{/gist_id}", "starred_url": "https://api.github.com/users/ravikyram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ravikyram/subscriptions", "organizations_url": "https://api.github.com/users/ravikyram/orgs", "repos_url": "https://api.github.com/users/ravikyram/repos", "events_url": "https://api.github.com/users/ravikyram/events{/privacy}", "received_events_url": "https://api.github.com/users/ravikyram/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ravikyram", "id": 51902062, "node_id": "MDQ6VXNlcjUxOTAyMDYy", "avatar_url": "https://avatars2.githubusercontent.com/u/51902062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ravikyram", "html_url": "https://github.com/ravikyram", "followers_url": "https://api.github.com/users/ravikyram/followers", "following_url": "https://api.github.com/users/ravikyram/following{/other_user}", "gists_url": "https://api.github.com/users/ravikyram/gists{/gist_id}", "starred_url": "https://api.github.com/users/ravikyram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ravikyram/subscriptions", "organizations_url": "https://api.github.com/users/ravikyram/orgs", "repos_url": "https://api.github.com/users/ravikyram/repos", "events_url": "https://api.github.com/users/ravikyram/events{/privacy}", "received_events_url": "https://api.github.com/users/ravikyram/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-03-11T09:54:21Z", "updated_at": "2020-03-12T06:14:34Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04): Ran on colab\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if\r\nthe issue happens on mobile device: /\r\n- TensorFlow installed from (source or\r\nbinary): - TensorFlow version (use command below): 2.1.0 (Colab)\r\n- Python version: - 3.6.9\r\nversion (if compiling from source): /\r\n- GCC/Compiler version (if compiling from\r\nsource): /\r\n- CUDA/cuDNN version: - GPU model and memory: Using the TPU runtime\r\n\r\nWhen running the `fit` function on a model after compiling the model with the TPUStrategy as in [this post on the colab github](https://github.com/googlecolab/colabtools/issues/1056) the cardinality is implicitely calculated.\r\nA TFRecordDataset is used as Dataset for the fit function. \r\nThe error below is raised:\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nInvalidArgumentError                      Traceback (most recent call last)\r\n<ipython-input-7-db3ea26a4a48> in <module>()\r\n----> 1 mh.start_training()\r\n\r\n8 frames\r\n/content/modelling/NN/ModelHandler.py in start_training(self)\r\n     73                 steps_per_epoch=self.dataloaders[0].amount_of_batches,\r\n     74                 validation_steps=self.dataloaders[1].amount_of_batches,\r\n---> 75                 verbose=1\r\n     76                 )\r\n     77 \r\n\r\n/content/modelling/NN/Model.py in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_freq, max_queue_size, workers, use_multiprocessing, **kwargs)\r\n    312                              validation_steps=validation_steps, validation_freq=validation_freq,\r\n    313                              max_queue_size=max_queue_size, workers=workers,\r\n--> 314                              use_multiprocessing=use_multiprocessing, **kwargs)\r\n    315         return out\r\n    316 \r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/keras/engine/training.py in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_freq, max_queue_size, workers, use_multiprocessing, **kwargs)\r\n    817         max_queue_size=max_queue_size,\r\n    818         workers=workers,\r\n--> 819         use_multiprocessing=use_multiprocessing)\r\n    820 \r\n    821   def evaluate(self,\r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/keras/engine/training_v2.py in fit(self, model, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_freq, max_queue_size, workers, use_multiprocessing, **kwargs)\r\n    258           steps_per_epoch,\r\n    259           steps_name='steps_per_epoch',\r\n--> 260           epochs=0)\r\n    261 \r\n    262       steps_per_epoch = (\r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/keras/engine/training_utils.py in infer_steps_for_dataset(model, dataset, steps, epochs, steps_name)\r\n   1747     return None\r\n   1748 \r\n-> 1749   size = K.get_value(cardinality.cardinality(dataset))\r\n   1750   if size == cardinality.INFINITE and steps is None:\r\n   1751     raise ValueError('When passing an infinitely repeating dataset, you '\r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/data/experimental/ops/cardinality.py in cardinality(dataset)\r\n     49   \"\"\"\r\n     50 \r\n---> 51   return ged_ops.dataset_cardinality(dataset._variant_tensor)  # pylint: disable=protected-access\r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/ops/gen_experimental_dataset_ops.py in dataset_cardinality(input_dataset, name)\r\n    663         pass  # Add nodes to the TensorFlow graph.\r\n    664     except _core._NotOkStatusException as e:\r\n--> 665       _ops.raise_from_not_ok_status(e, name)\r\n    666   # Add nodes to the TensorFlow graph.\r\n    667   _, _, _op, _outputs = _op_def_library._apply_op_helper(\r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/framework/ops.py in raise_from_not_ok_status(e, name)\r\n   6604   message = e.message + (\" name: \" + name if name is not None else \"\")\r\n   6605   # pylint: disable=protected-access\r\n-> 6606   six.raise_from(core._status_to_exception(e.code, message), None)\r\n   6607   # pylint: enable=protected-access\r\n   6608 \r\n\r\n/usr/local/lib/python3.6/dist-packages/six.py in raise_from(value, from_value)\r\n\r\nInvalidArgumentError: Unable to parse tensor proto [Op:DatasetCardinality]\r\n```\r\n\r\nWhen calculating the cardinality without calling the TPUStrategy context as shown below, a value of `-2` is yielded:\r\n```\r\nimport tensorflow.keras.backend as K\r\nK.get_value(tf.data.experimental.cardinality(ds))\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37501", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37501/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37501/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37501/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37501", "id": 579037636, "node_id": "MDU6SXNzdWU1NzkwMzc2MzY=", "number": 37501, "title": "WARNING:tensorflow:Gradients do not exist for variables", "user": {"login": "talhaanwarch", "id": 37379131, "node_id": "MDQ6VXNlcjM3Mzc5MTMx", "avatar_url": "https://avatars0.githubusercontent.com/u/37379131?v=4", "gravatar_id": "", "url": "https://api.github.com/users/talhaanwarch", "html_url": "https://github.com/talhaanwarch", "followers_url": "https://api.github.com/users/talhaanwarch/followers", "following_url": "https://api.github.com/users/talhaanwarch/following{/other_user}", "gists_url": "https://api.github.com/users/talhaanwarch/gists{/gist_id}", "starred_url": "https://api.github.com/users/talhaanwarch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/talhaanwarch/subscriptions", "organizations_url": "https://api.github.com/users/talhaanwarch/orgs", "repos_url": "https://api.github.com/users/talhaanwarch/repos", "events_url": "https://api.github.com/users/talhaanwarch/events{/privacy}", "received_events_url": "https://api.github.com/users/talhaanwarch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-03-11T06:27:11Z", "updated_at": "2020-03-16T13:26:25Z", "closed_at": null, "author_association": "NONE", "body": "While training BERT on TPU i am getting these warnings and my precision and recall is zero while accuracy is 100\r\n\r\n```\r\nTrain for 45205 steps, validate for 206 steps\r\nWARNING:tensorflow:Gradients do not exist for variables ['tf_bert_model_1/bert/pooler/dense/kernel:0', 'tf_bert_model_1/bert/pooler/dense/bias:0'] when minimizing the loss.\r\nWARNING:tensorflow:Gradients do not exist for variables ['tf_bert_model_1/bert/pooler/dense/kernel:0', 'tf_bert_model_1/bert/pooler/dense/bias:0'] when minimizing the loss.\r\nWARNING:tensorflow:Gradients do not exist for variables ['tf_bert_model_1/bert/pooler/dense/kernel:0', 'tf_bert_model_1/bert/pooler/dense/bias:0'] when minimizing the loss.\r\nWARNING:tensorflow:Gradients do not exist for variables ['tf_bert_model_1/bert/pooler/dense/kernel:0', 'tf_bert_model_1/bert/pooler/dense/bias:0'] when minimizing the loss.\r\n\r\n```\r\n\r\nHere is google colab file i am using\r\nhttps://colab.research.google.com/drive/1l0Eoram6vJRK5xQBmnCx-eU1e46higlo\r\n\r\nupdated colab file\r\nhttps://colab.research.google.com/drive/1D-eKgddRHROG39R2iyqE3qR7w0N0OHAB"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37498", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37498/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37498/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37498/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37498", "id": 578963434, "node_id": "MDU6SXNzdWU1Nzg5NjM0MzQ=", "number": 37498, "title": "Master branch failed to build the debug version", "user": {"login": "Leslie-Fang", "id": 16850179, "node_id": "MDQ6VXNlcjE2ODUwMTc5", "avatar_url": "https://avatars2.githubusercontent.com/u/16850179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Leslie-Fang", "html_url": "https://github.com/Leslie-Fang", "followers_url": "https://api.github.com/users/Leslie-Fang/followers", "following_url": "https://api.github.com/users/Leslie-Fang/following{/other_user}", "gists_url": "https://api.github.com/users/Leslie-Fang/gists{/gist_id}", "starred_url": "https://api.github.com/users/Leslie-Fang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Leslie-Fang/subscriptions", "organizations_url": "https://api.github.com/users/Leslie-Fang/orgs", "repos_url": "https://api.github.com/users/Leslie-Fang/repos", "events_url": "https://api.github.com/users/Leslie-Fang/events{/privacy}", "received_events_url": "https://api.github.com/users/Leslie-Fang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-03-11T02:11:21Z", "updated_at": "2020-03-18T21:07:31Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Centos7.6\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source \r\n- TensorFlow version: master, commit-id: b45adaf6efeeb8e4acf8517a01f7dc01bdf21db9\r\n- Python version: 3.6\r\n- Installed using virtualenv? pip? conda?:\r\n- Bazel version (if compiling from source): bazel 2.0.0\r\n- GCC/Compiler version (if compiling from source): 8.3\r\n\r\n\r\n\r\n**Describe the problem**\r\nThe debug version build failed with the command:\r\n```\r\nbazel build -c dbg //tensorflow/tools/pip_package:build_pip_package\r\n```\r\nError:\r\n```\r\nexternal/aws-checksums/source/intel/crc32c_sse42_asm.c: In function 's_crc32c_sse42_clmul_256':\r\nexternal/aws-checksums/source/intel/crc32c_sse42_asm.c:61:5: error: 'asm' operand has impossible constraints\r\n     asm volatile(\"enter_256_%=:\"\r\n     ^~~\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37497", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37497/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37497/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37497/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37497", "id": 578931642, "node_id": "MDU6SXNzdWU1Nzg5MzE2NDI=", "number": 37497, "title": "Confusing behavior of GRUCell", "user": {"login": "xlnwel", "id": 10184153, "node_id": "MDQ6VXNlcjEwMTg0MTUz", "avatar_url": "https://avatars0.githubusercontent.com/u/10184153?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xlnwel", "html_url": "https://github.com/xlnwel", "followers_url": "https://api.github.com/users/xlnwel/followers", "following_url": "https://api.github.com/users/xlnwel/following{/other_user}", "gists_url": "https://api.github.com/users/xlnwel/gists{/gist_id}", "starred_url": "https://api.github.com/users/xlnwel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xlnwel/subscriptions", "organizations_url": "https://api.github.com/users/xlnwel/orgs", "repos_url": "https://api.github.com/users/xlnwel/repos", "events_url": "https://api.github.com/users/xlnwel/events{/privacy}", "received_events_url": "https://api.github.com/users/xlnwel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-03-11T00:11:36Z", "updated_at": "2020-03-17T07:02:00Z", "closed_at": null, "author_association": "NONE", "body": "```python\r\ncell = layers.GRUCell(4)\r\nx = tf.random.normal((2, 2, 3))\r\nprint(cell.get_initial_state(x)) # returns a single tensor\r\ncell(x[:, 0], [cell.get_initial_state(x)]) # requires and returns a list of tensors\r\n```\r\nWhy would `GRUCell.get_initial_state` return a Tensor, while calling `GRUCell` requires a list of Tensor as input? Is this a desired behavior? (code tested in TF2.1)\r\n\r\nFurthermore, while `Cell` returns output and state separately, RNN returns the output and states together in a single list.\r\n\r\n```python\r\ncell = layers.LSTMCell(4)\r\nx = tf.random.normal((2, 2, 3))\r\ns = cell.get_initial_state(x)\r\ncell_output, state = cell(inputs=x[:, 1], states=s)# works fine\r\nprint(cell_output)\r\nprint(state)\r\nrnn = layers.RNN(cell, return_state=True, return_sequences=True)\r\nrnn_output, state = rnn(x, initial_state=s)# error: rnn returns the output and states in a single list\r\n```\r\n\r\nI'm wondering why `rnn` and `cell` behave differently?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37496", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37496/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37496/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37496/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37496", "id": 578906742, "node_id": "MDU6SXNzdWU1Nzg5MDY3NDI=", "number": 37496, "title": "C-API timeline for TensorFlow 2", "user": {"login": "nio1814", "id": 27262304, "node_id": "MDQ6VXNlcjI3MjYyMzA0", "avatar_url": "https://avatars3.githubusercontent.com/u/27262304?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nio1814", "html_url": "https://github.com/nio1814", "followers_url": "https://api.github.com/users/nio1814/followers", "following_url": "https://api.github.com/users/nio1814/following{/other_user}", "gists_url": "https://api.github.com/users/nio1814/gists{/gist_id}", "starred_url": "https://api.github.com/users/nio1814/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nio1814/subscriptions", "organizations_url": "https://api.github.com/users/nio1814/orgs", "repos_url": "https://api.github.com/users/nio1814/repos", "events_url": "https://api.github.com/users/nio1814/events{/privacy}", "received_events_url": "https://api.github.com/users/nio1814/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-03-10T22:52:26Z", "updated_at": "2020-03-11T13:29:10Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "On the Install TensorFlow for C page, it notes that \r\n \"There is no libtensorflow support for TensorFlow 2 yet. It is expected in a future release.\"\r\n\r\nIs there any update on when we can expect the c api for TF2?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37495", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37495/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37495/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37495/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37495", "id": 578898860, "node_id": "MDU6SXNzdWU1Nzg4OTg4NjA=", "number": 37495, "title": "Custom Pearson Correlation Loss Taking Unfeasible Values During Training", "user": {"login": "adamw96", "id": 34133796, "node_id": "MDQ6VXNlcjM0MTMzNzk2", "avatar_url": "https://avatars0.githubusercontent.com/u/34133796?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adamw96", "html_url": "https://github.com/adamw96", "followers_url": "https://api.github.com/users/adamw96/followers", "following_url": "https://api.github.com/users/adamw96/following{/other_user}", "gists_url": "https://api.github.com/users/adamw96/gists{/gist_id}", "starred_url": "https://api.github.com/users/adamw96/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adamw96/subscriptions", "organizations_url": "https://api.github.com/users/adamw96/orgs", "repos_url": "https://api.github.com/users/adamw96/repos", "events_url": "https://api.github.com/users/adamw96/events{/privacy}", "received_events_url": "https://api.github.com/users/adamw96/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-03-10T22:30:11Z", "updated_at": "2020-03-12T02:32:20Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow): **Yes**\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04): **Windows 10**\r\n- TensorFlow installed from (source or\r\nbinary): **Source**\r\n- TensorFlow version (use command below): **TensorFlow 2.1.0**\r\n- Python version: **Python 3.6.10 (Anaconda Distribution)**\r\n- CUDA/cuDNN version: **CUDA 10.1; cuDNN 7.6.5 (Nov 5, 2019)**\r\n- GPU model and memory: **NVIDIA GeForce RTX 2070;  8GB VRAM**\r\n\r\n**Describe the current behavior**\r\nLoss values for a custom loss function that computes sample correlations takes on unfeasible values (i.e. 14-15) with certain model architectures; i.e. if hidden layers are too wide.\r\n\r\n**Describe the expected behavior**\r\nThe correlation function's implementation should bound it to within [-1,1], and the custom loss function takes the negative absolute so it should be within [-1,0].\r\n\r\n**Standalone code to reproduce the issue** \r\nProvide a reproducible test case that is the bare minimum necessary to generate\r\nthe problem. If possible, please share a link to Colab/Jupyter/any notebook.\r\n```\r\nimport tensorflow as tf\r\nfrom tensorflow.keras import regularizers\r\nfrom tensorflow.keras.models import Sequential\r\nfrom tensorflow.keras.layers import Dense, Dropout\r\nfrom tensorflow.keras.initializers import he_normal\r\nimport tensorflow_probability as tfp\r\n\r\n# Data\r\nnp.random.seed(42)\r\ndata_X = np.random.random_sample((100,6))\r\ndata_Y = np.random.random_sample((100,1))\r\n\r\n# Feed-forward NN\r\nmodel = Sequential()\r\n\r\n# Input Layer\r\nmodel.add(Dense(6, activation='linear', input_shape=(6,)))\r\n\r\n# Hidden Layers: Arbitrarily wide\r\nmodel.add(Dense(5000, \r\n                activation='relu', \r\n                kernel_initializer=he_normal(), \r\n                kernel_regularizer=regularizers.l1(10**-3)\r\n                ))\r\nmodel.add(Dropout(0.3))\r\n\r\n# Output Layer; Regression\r\nmodel.add(Dense(1, activation='sigmoid'))\r\n\r\n# Custom Loss Function\r\ndef MaxCorrelation(y_true,y_pred):\r\n    \"\"\"\r\n    Goal is to maximize correlation between y_pred, y_true. Same as minimizing the negative.\r\n    \"\"\"\r\n    return -tf.math.abs(tfp.stats.correlation(y_pred,y_true, sample_axis=None, event_axis=None))\r\n\r\n# Compilation\r\nmodel.compile(\r\n            optimizer='adam', \r\n            loss= MaxCorrelation,\r\n)\r\n\r\n# Train the model\r\nhistory = model.fit(data_X, data_Y,\r\n          epochs=5,\r\n          batch_size = 32,\r\n          verbose=1,\r\n         )\r\n```\r\n**Other info / logs** \r\n```\r\nOUT: Train on 100 samples\r\nEpoch 1/5\r\n100/100 [==============================] - 0s 2ms/sample - loss: 14.1344\r\nEpoch 2/5\r\n100/100 [==============================] - 0s 90us/sample - loss: 14.0880\r\nEpoch 3/5\r\n100/100 [==============================] - 0s 90us/sample - loss: 13.9630\r\n```\r\n\r\nTesting the loss function manually seems to work as intended:\r\n```\r\nimport tensorflow.keras.backend as K\r\nY_Pred = model.predict(data_X).astype(float)\r\nK.eval(MaxCorrelation(data_Y, Y_Pred))\r\n--\r\nOUT: -0.137205319813903\r\n```\r\n\r\nMy understanding is that for each `batch_size=32`, the model returns 32 samples of scalar values from the output layer which is squashed between (0,1) and the loss MaxCorrelation is evaluated on the 32 predictions vs 32 targets. Thus the losses should still be within the bounds unless some aggregation is happening per epoch (i.e. one of the batch losses tending to infinity?), but even when removing the negative sign the loss is still positive. This issue only seems to persist when the hidden layers are wide/deep enough.\r\n\r\nI have also tried replacing the loss function with some of the backend implementations [here](https://stackoverflow.com/questions/46619869/how-to-specify-the-correlation-coefficient-as-the-loss-function-in-keras?rq=1), but similar results."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37489", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37489/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37489/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37489/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37489", "id": 578769701, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg2Mjg4NTU4", "number": 37489, "title": "UK collection", "user": {"login": "kiranchhetri1", "id": 61340468, "node_id": "MDQ6VXNlcjYxMzQwNDY4", "avatar_url": "https://avatars0.githubusercontent.com/u/61340468?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kiranchhetri1", "html_url": "https://github.com/kiranchhetri1", "followers_url": "https://api.github.com/users/kiranchhetri1/followers", "following_url": "https://api.github.com/users/kiranchhetri1/following{/other_user}", "gists_url": "https://api.github.com/users/kiranchhetri1/gists{/gist_id}", "starred_url": "https://api.github.com/users/kiranchhetri1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kiranchhetri1/subscriptions", "organizations_url": "https://api.github.com/users/kiranchhetri1/orgs", "repos_url": "https://api.github.com/users/kiranchhetri1/repos", "events_url": "https://api.github.com/users/kiranchhetri1/events{/privacy}", "received_events_url": "https://api.github.com/users/kiranchhetri1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136613, "node_id": "MDU6TGFiZWwzMDAxMzY2MTM=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20no", "name": "cla: no", "color": "eb6420", "default": false, "description": null}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-03-10T18:11:32Z", "updated_at": "2020-03-11T03:55:50Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37489", "html_url": "https://github.com/tensorflow/tensorflow/pull/37489", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37489.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37489.patch"}, "body": "                         To update or to get new version"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37488", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37488/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37488/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37488/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37488", "id": 578756140, "node_id": "MDU6SXNzdWU1Nzg3NTYxNDA=", "number": 37488, "title": "tf.numpy_function with lambda function is much slower starting from TF 1.15", "user": {"login": "mspinaci", "id": 32176505, "node_id": "MDQ6VXNlcjMyMTc2NTA1", "avatar_url": "https://avatars2.githubusercontent.com/u/32176505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mspinaci", "html_url": "https://github.com/mspinaci", "followers_url": "https://api.github.com/users/mspinaci/followers", "following_url": "https://api.github.com/users/mspinaci/following{/other_user}", "gists_url": "https://api.github.com/users/mspinaci/gists{/gist_id}", "starred_url": "https://api.github.com/users/mspinaci/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mspinaci/subscriptions", "organizations_url": "https://api.github.com/users/mspinaci/orgs", "repos_url": "https://api.github.com/users/mspinaci/repos", "events_url": "https://api.github.com/users/mspinaci/events{/privacy}", "received_events_url": "https://api.github.com/users/mspinaci/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-03-10T17:47:58Z", "updated_at": "2020-03-11T13:25:18Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): **yes**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): **Linux Ubuntu 18.04 (our machine), and also COLAB.**\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: **No**\r\n- TensorFlow installed from (source or binary): **binary**\r\n- TensorFlow version (use command below): **1.14 vs 1.15.2 vs 2.1.0**\r\n- Python version: **3.6.9**\r\n- Bazel version (if compiling from source): **nope**\r\n- GCC/Compiler version (if compiling from source): **nope**\r\n- CUDA/cuDNN version: **10.1 / 7.6.2**\r\n- GPU model and memory: **V100 (our machine) and T4 in COLAB. But the issue is on the CPU side**\r\n\r\n**Describe the current behavior**\r\nWhen using `tf.numpy_function` (or `tf.compat.v1.py_func`) in combination with a lambda function (in order to pass some fixed, non-tensor parameters to it), performance decreased massively from 1.14 to 1.15 onwards. (depending on the problem and the hardware, in my tests between 2x and 8x; the provided code is about 2x slower on a Colab T4 instance, and 4x slower on a V100 machine; some other much more involved code got slowed down up to 8x; but that's mainly because with slower GPUs, the bottleneck may lie elsewhere; I haven't done specific tests using one line only)\r\n\r\n**Describe the expected behavior**\r\nThe invoked function being quite literally the same, the time should be also virtually identical. And more generally, code shouldn't get slower with a new code version...\r\n\r\n**Standalone code to reproduce the issue** \r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem. If possible, please share a link to Colab/Jupyter/any notebook.\r\n\r\nLink to Colab: https://colab.research.google.com/drive/1MZVOBlAY7piqgeKwGzA8goeU3xtPy5gp\r\n\r\nThe code above runs a full \"training\" pipeline using a keras model, estimators framework, and data generation via numpy_function. All data is created randomly, so the model won't learn anything of course. The main difference is between the line:\r\n\r\n`tf.numpy_function(a_slow_numpy_function, [tensor, [x1, y1, x2, y2]], tf.float32)`\r\n\r\nand the line\r\n\r\n`tf.numpy_function(lambda ex: a_slow_numpy_function(ex, [x1, y1, x2, y2]), [tensor], tf.float32`\r\n\r\nHere, tensor is... a tensor, while x1, y1, x2, y2 are integers. Therefore, both lines are valid, in the first one the list is implicitly converted to a tensor (and then to a numpy array), in the second one a temporary function has those parameters as fixed.\r\n\r\nUntil TF 1.14 both lines produced the same runtime, from TF 1.15 on the second one gets much slower (the first one stays the same).\r\n\r\nHowever, unfortunately I wasn't able to obtain reproducible results by only invoking the line above in a standalone session.\r\n\r\n**Other info / logs** \r\n\r\nLogs on the Colab T4 can be seen from the link (for all TF versions 1.14, 1.15, 2.1). The following logs were obtained on our V100 machine:\r\n\r\n**TF 1.14, no lambda:**\r\nINFO:tensorflow:loss = 0.2136189, step = 0\r\nINFO:tensorflow:global_step/sec: 32.7136\r\nINFO:tensorflow:loss = 0.03677105, step = 100 (3.057 sec)\r\nINFO:tensorflow:global_step/sec: 38.7334\r\nINFO:tensorflow:loss = 0.038587682, step = 200 (2.581 sec)\r\nINFO:tensorflow:global_step/sec: 38.3866\r\nINFO:tensorflow:loss = 0.037003815, step = 300 (2.605 sec)\r\nINFO:tensorflow:global_step/sec: 38.1023\r\nINFO:tensorflow:loss = 0.037481233, step = 400 (2.625 sec)\r\nINFO:tensorflow:global_step/sec: 27.7657\r\nINFO:tensorflow:loss = 0.03703531, step = 500 (3.602 sec)\r\nINFO:tensorflow:global_step/sec: 38.0632\r\nINFO:tensorflow:loss = 0.03458761, step = 600 (2.627 sec)\r\nINFO:tensorflow:global_step/sec: 36.4805\r\nINFO:tensorflow:loss = 0.03637625, step = 700 (2.741 sec)\r\nINFO:tensorflow:global_step/sec: 35.7584\r\nINFO:tensorflow:loss = 0.036259696, step = 800 (2.797 sec)\r\nINFO:tensorflow:global_step/sec: 36.7052\r\nINFO:tensorflow:loss = 0.036455855, step = 900 (2.725 sec)\r\n\r\n**TF 1.14, with lambda:**\r\nINFO:tensorflow:loss = 0.23772891, step = 0\r\nINFO:tensorflow:global_step/sec: 32.9305\r\nINFO:tensorflow:loss = 0.03767074, step = 100 (3.037 sec)\r\nINFO:tensorflow:global_step/sec: 37.3223\r\nINFO:tensorflow:loss = 0.03685203, step = 200 (2.679 sec)\r\nINFO:tensorflow:global_step/sec: 36.7882\r\nINFO:tensorflow:loss = 0.038278855, step = 300 (2.718 sec)\r\nINFO:tensorflow:global_step/sec: 37.7637\r\nINFO:tensorflow:loss = 0.03842716, step = 400 (2.648 sec)\r\nINFO:tensorflow:global_step/sec: 27.7136\r\nINFO:tensorflow:loss = 0.036828667, step = 500 (3.608 sec)\r\nINFO:tensorflow:global_step/sec: 35.5345\r\nINFO:tensorflow:loss = 0.03633987, step = 600 (2.814 sec)\r\nINFO:tensorflow:global_step/sec: 37.1818\r\nINFO:tensorflow:loss = 0.037201233, step = 700 (2.690 sec)\r\nINFO:tensorflow:global_step/sec: 37.2266\r\nINFO:tensorflow:loss = 0.036516882, step = 800 (2.686 sec)\r\nINFO:tensorflow:global_step/sec: 38.3496\r\nINFO:tensorflow:loss = 0.039767925, step = 900 (2.608 sec)\r\n\r\n**TF 1.15, no lambda:**\r\nINFO:tensorflow:loss = 0.25934136, step = 0\r\nINFO:tensorflow:global_step/sec: 34.4488\r\nINFO:tensorflow:loss = 0.037474792, step = 100 (2.903 sec)\r\nINFO:tensorflow:global_step/sec: 37.6249\r\nINFO:tensorflow:loss = 0.037868354, step = 200 (2.658 sec)\r\nINFO:tensorflow:global_step/sec: 38.2594\r\nINFO:tensorflow:loss = 0.0373457, step = 300 (2.614 sec)\r\nINFO:tensorflow:global_step/sec: 39.2323\r\nINFO:tensorflow:loss = 0.036336176, step = 400 (2.549 sec)\r\nINFO:tensorflow:global_step/sec: 26.6403\r\nINFO:tensorflow:loss = 0.035495166, step = 500 (3.754 sec)\r\nINFO:tensorflow:global_step/sec: 37.6238\r\nINFO:tensorflow:loss = 0.038571935, step = 600 (2.658 sec)\r\nINFO:tensorflow:global_step/sec: 37.4171\r\nINFO:tensorflow:loss = 0.03556432, step = 700 (2.672 sec)\r\nINFO:tensorflow:global_step/sec: 35.1526\r\nINFO:tensorflow:loss = 0.035202924, step = 800 (2.845 sec)\r\nINFO:tensorflow:global_step/sec: 35.4907\r\nINFO:tensorflow:loss = 0.03740203, step = 900 (2.818 sec)\r\nINFO:tensorflow:Loss for final step: 0.03607688.\r\n\r\n**TF 1.15, with lambda:**\r\nINFO:tensorflow:loss = 0.25370103, step = 0\r\nINFO:tensorflow:global_step/sec: 8.59509\r\nINFO:tensorflow:loss = 0.037242886, step = 100 (11.635 sec)\r\nINFO:tensorflow:global_step/sec: 8.02817\r\nINFO:tensorflow:loss = 0.03554675, step = 200 (12.456 sec)\r\nINFO:tensorflow:global_step/sec: 12.4317\r\nINFO:tensorflow:loss = 0.03646993, step = 300 (8.044 sec)\r\nINFO:tensorflow:global_step/sec: 8.62791\r\nINFO:tensorflow:loss = 0.035594724, step = 400 (11.590 sec)\r\nINFO:tensorflow:global_step/sec: 8.80279\r\nINFO:tensorflow:loss = 0.036044836, step = 500 (11.360 sec)\r\nINFO:tensorflow:global_step/sec: 9.01617\r\nINFO:tensorflow:loss = 0.036771618, step = 600 (11.091 sec)\r\nINFO:tensorflow:global_step/sec: 9.50426\r\nINFO:tensorflow:loss = 0.038547777, step = 700 (10.522 sec)\r\nINFO:tensorflow:global_step/sec: 9.18885\r\nINFO:tensorflow:loss = 0.03686235, step = 800 (10.883 sec)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37485", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37485/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37485/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37485/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37485", "id": 578711378, "node_id": "MDU6SXNzdWU1Nzg3MTEzNzg=", "number": 37485, "title": "AssertionError on using model.fit() in tf.distribute.MirroredStrategy", "user": {"login": "fionapatriciamoss", "id": 8265927, "node_id": "MDQ6VXNlcjgyNjU5Mjc=", "avatar_url": "https://avatars1.githubusercontent.com/u/8265927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fionapatriciamoss", "html_url": "https://github.com/fionapatriciamoss", "followers_url": "https://api.github.com/users/fionapatriciamoss/followers", "following_url": "https://api.github.com/users/fionapatriciamoss/following{/other_user}", "gists_url": "https://api.github.com/users/fionapatriciamoss/gists{/gist_id}", "starred_url": "https://api.github.com/users/fionapatriciamoss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fionapatriciamoss/subscriptions", "organizations_url": "https://api.github.com/users/fionapatriciamoss/orgs", "repos_url": "https://api.github.com/users/fionapatriciamoss/repos", "events_url": "https://api.github.com/users/fionapatriciamoss/events{/privacy}", "received_events_url": "https://api.github.com/users/fionapatriciamoss/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-03-10T16:34:17Z", "updated_at": "2020-03-16T04:46:23Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution: Ubuntu 18.04.4 LTS\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version: 2.2.0-dev20200308\r\n- Python version: 3.7.6\r\n- Installed using virtualenv? pip? conda?: pip\r\n\r\n\r\n**AssertionError on using model.fit() in tf.distribute.MirroredStrategy**\r\n\r\nI'm trying to build an LSTM Autoencoder model to make time series prediction on a large dataset(~30 million rows in train data, 16 million rows each in valid and test data). I've followed the [tutorial](https://www.tensorflow.org/tutorials/distribute/keras) in the Tensorflow documentation to distribute my model across available GPUs using MirroredStrategy with HierarchicalCopyAllReduce as follows:\r\n\r\n```\r\nwith strategy.scope():\r\n    model = tf.keras.Sequential([\r\n        tf.keras.layers.LSTM(32, activation = 'relu', input_shape = (timesteps, features), return_sequences = True),\r\n        tf.keras.layers.LSTM(16, activation = 'relu', return_sequences = False),\r\n        tf.keras.layers.RepeatVector(timesteps),\r\n        tf.keras.layers.LSTM(16, activation = 'relu', return_sequences = True),\r\n        tf.keras.layers.LSTM(32, activation = 'relu', return_sequences = True),\r\n        tf.keras.layers.TimeDistributed(tf.keras.layers.Dense(num_classes, activation = 'softmax'))\r\n    ])\r\n\r\n    model.compile(loss = tf.keras.losses.CategoricalCrossentropy(),\r\n                  optimizer = tf.keras.optimizers.Adam(),\r\n                  metrics = ['accuracy'])\r\n```\r\nWhen I try to fit the model using the following code, I get the following assertion error:\r\n\r\n```\r\nmodel.fit(X_train_tf, y_train_tf, epochs = 12, validation_data = (X_valid_tf, y_valid_tf), verbose = 1, callbacks=callbacks)\r\n\r\n---------------------------------------------------------------------------\r\nAssertionError                            Traceback (most recent call last)\r\n<ipython-input-17-96b3da4e4eff> in <module>\r\n----> 1 model.fit(X_train_tf, y_train_tf, epochs = 12, validation_data = (X_valid_tf, y_valid_tf), verbose = 1, callbacks=callbacks)\r\n\r\n~/.conda/envs/user/lib/python3.7/site-packages/tensorflow/python/keras/engine/training_v1.py in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_freq, max_queue_size, workers, use_multiprocessing, **kwargs)\r\n    783         max_queue_size=max_queue_size,\r\n    784         workers=workers,\r\n--> 785         use_multiprocessing=use_multiprocessing)\r\n    786 \r\n    787   def evaluate(self,\r\n\r\n~/.conda/envs/user/lib/python3.7/site-packages/tensorflow/python/keras/engine/training_distributed.py in fit(self, model, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_freq, **kwargs)\r\n    617         validation_split=validation_split,\r\n    618         shuffle=shuffle,\r\n--> 619         epochs=epochs)\r\n    620     if not dist_utils.is_distributing_by_cloning(model):\r\n    621       with model._distribution_strategy.scope():\r\n\r\n~/.conda/envs/user/lib/python3.7/site-packages/tensorflow/python/keras/engine/training_v1.py in _distribution_standardize_user_data(self, x, y, sample_weight, class_weight, batch_size, validation_split, shuffle, epochs, allow_partial_batch)\r\n   2165         x = ds.batch(batch_size, drop_remainder=drop_remainder)\r\n   2166       else:\r\n-> 2167         assert isinstance(x, dataset_ops.DatasetV2)\r\n   2168         training_utils.validate_dataset_input(x, y, sample_weight,\r\n   2169                                               validation_split)\r\n\r\nAssertionError:\r\n```\r\nHow should I resolve this error? My train, test and validation data are of tensor type.\r\n\r\nThanks in advance!"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37483", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37483/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37483/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37483/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37483", "id": 578679836, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg2MjE0MzY3", "number": 37483, "title": "fix the core_dump in reduce_max with input type tf.complex64  ", "user": {"login": "Leslie-Fang", "id": 16850179, "node_id": "MDQ6VXNlcjE2ODUwMTc5", "avatar_url": "https://avatars2.githubusercontent.com/u/16850179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Leslie-Fang", "html_url": "https://github.com/Leslie-Fang", "followers_url": "https://api.github.com/users/Leslie-Fang/followers", "following_url": "https://api.github.com/users/Leslie-Fang/following{/other_user}", "gists_url": "https://api.github.com/users/Leslie-Fang/gists{/gist_id}", "starred_url": "https://api.github.com/users/Leslie-Fang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Leslie-Fang/subscriptions", "organizations_url": "https://api.github.com/users/Leslie-Fang/orgs", "repos_url": "https://api.github.com/users/Leslie-Fang/repos", "events_url": "https://api.github.com/users/Leslie-Fang/events{/privacy}", "received_events_url": "https://api.github.com/users/Leslie-Fang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1178505529, "node_id": "MDU6TGFiZWwxMTc4NTA1NTI5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/prtype:bugfix", "name": "prtype:bugfix", "color": "159b2e", "default": false, "description": "PR to fix a bug"}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-03-10T15:47:57Z", "updated_at": "2020-03-19T13:02:04Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37483", "html_url": "https://github.com/tensorflow/tensorflow/pull/37483", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37483.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37483.patch"}, "body": "As report in this issue: https://github.com/tensorflow/tensorflow/issues/37446\r\nWhen the input type of tf.complex64 , reduce_max op will core dump.\r\nThis PR add the condition judgement to avoid core-dump directly. "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37482", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37482/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37482/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37482/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37482", "id": 578676441, "node_id": "MDU6SXNzdWU1Nzg2NzY0NDE=", "number": 37482, "title": "Benchmark tool", "user": {"login": "peter197321", "id": 46971586, "node_id": "MDQ6VXNlcjQ2OTcxNTg2", "avatar_url": "https://avatars3.githubusercontent.com/u/46971586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peter197321", "html_url": "https://github.com/peter197321", "followers_url": "https://api.github.com/users/peter197321/followers", "following_url": "https://api.github.com/users/peter197321/following{/other_user}", "gists_url": "https://api.github.com/users/peter197321/gists{/gist_id}", "starred_url": "https://api.github.com/users/peter197321/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peter197321/subscriptions", "organizations_url": "https://api.github.com/users/peter197321/orgs", "repos_url": "https://api.github.com/users/peter197321/repos", "events_url": "https://api.github.com/users/peter197321/events{/privacy}", "received_events_url": "https://api.github.com/users/peter197321/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1589976566, "node_id": "MDU6TGFiZWwxNTg5OTc2NTY2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:micro", "name": "comp:micro", "color": "3e2eea", "default": false, "description": "Related to TensorFlow Lite Microcontrollers"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "njeffrie", "id": 6947391, "node_id": "MDQ6VXNlcjY5NDczOTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/6947391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/njeffrie", "html_url": "https://github.com/njeffrie", "followers_url": "https://api.github.com/users/njeffrie/followers", "following_url": "https://api.github.com/users/njeffrie/following{/other_user}", "gists_url": "https://api.github.com/users/njeffrie/gists{/gist_id}", "starred_url": "https://api.github.com/users/njeffrie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/njeffrie/subscriptions", "organizations_url": "https://api.github.com/users/njeffrie/orgs", "repos_url": "https://api.github.com/users/njeffrie/repos", "events_url": "https://api.github.com/users/njeffrie/events{/privacy}", "received_events_url": "https://api.github.com/users/njeffrie/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "njeffrie", "id": 6947391, "node_id": "MDQ6VXNlcjY5NDczOTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/6947391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/njeffrie", "html_url": "https://github.com/njeffrie", "followers_url": "https://api.github.com/users/njeffrie/followers", "following_url": "https://api.github.com/users/njeffrie/following{/other_user}", "gists_url": "https://api.github.com/users/njeffrie/gists{/gist_id}", "starred_url": "https://api.github.com/users/njeffrie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/njeffrie/subscriptions", "organizations_url": "https://api.github.com/users/njeffrie/orgs", "repos_url": "https://api.github.com/users/njeffrie/repos", "events_url": "https://api.github.com/users/njeffrie/events{/privacy}", "received_events_url": "https://api.github.com/users/njeffrie/received_events", "type": "User", "site_admin": false}, {"login": "wangtz", "id": 34290063, "node_id": "MDQ6VXNlcjM0MjkwMDYz", "avatar_url": "https://avatars1.githubusercontent.com/u/34290063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wangtz", "html_url": "https://github.com/wangtz", "followers_url": "https://api.github.com/users/wangtz/followers", "following_url": "https://api.github.com/users/wangtz/following{/other_user}", "gists_url": "https://api.github.com/users/wangtz/gists{/gist_id}", "starred_url": "https://api.github.com/users/wangtz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wangtz/subscriptions", "organizations_url": "https://api.github.com/users/wangtz/orgs", "repos_url": "https://api.github.com/users/wangtz/repos", "events_url": "https://api.github.com/users/wangtz/events{/privacy}", "received_events_url": "https://api.github.com/users/wangtz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-03-10T15:43:29Z", "updated_at": "2020-03-19T11:10:05Z", "closed_at": null, "author_association": "NONE", "body": "Is there available \"benchmarking tool\" for TensorFlow Lite for Microcontrollers? "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37481", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37481/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37481/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37481/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37481", "id": 578674799, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg2MjEwMzQ3", "number": 37481, "title": "Fix exception causes in session.py", "user": {"login": "cool-RR", "id": 56778, "node_id": "MDQ6VXNlcjU2Nzc4", "avatar_url": "https://avatars1.githubusercontent.com/u/56778?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cool-RR", "html_url": "https://github.com/cool-RR", "followers_url": "https://api.github.com/users/cool-RR/followers", "following_url": "https://api.github.com/users/cool-RR/following{/other_user}", "gists_url": "https://api.github.com/users/cool-RR/gists{/gist_id}", "starred_url": "https://api.github.com/users/cool-RR/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cool-RR/subscriptions", "organizations_url": "https://api.github.com/users/cool-RR/orgs", "repos_url": "https://api.github.com/users/cool-RR/repos", "events_url": "https://api.github.com/users/cool-RR/events{/privacy}", "received_events_url": "https://api.github.com/users/cool-RR/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2020-03-10T15:41:16Z", "updated_at": "2020-03-19T08:01:50Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37481", "html_url": "https://github.com/tensorflow/tensorflow/pull/37481", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37481.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37481.patch"}, "body": "I recently went over [Matplotlib](https://github.com/matplotlib/matplotlib/pull/16706) and [Pandas](https://github.com/pandas-dev/pandas/pull/32322), fixing a small mistake in the way that Python 3's exception chaining is used. If you're interested, I can do it here too. I've done it on just one file right now.\r\n\r\nThe mistake is this: In some parts of the code, an exception is being caught and replaced with a more user-friendly error. In these cases the syntax `raise new_error from old_error` needs to be used.\r\n\r\nPython 3's exception chaining means it shows not only the traceback of the current exception, but that of the original exception (and possibly more.) This is regardless of `raise from`. The usage of `raise from` tells Python to put a more accurate message between the tracebacks. Instead of this:\r\n\r\n```\r\nDuring handling of the above exception, another exception occurred:\r\n```\r\n\r\nYou'll get this:\r\n\r\n```\r\nThe above exception was the direct cause of the following exception:\r\n```\r\n\r\nThe first is inaccurate, because it signifies a bug in the exception-handling code itself, which is a separate situation than wrapping an exception.\r\n\r\nLet me know what you think!\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37480", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37480/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37480/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37480/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37480", "id": 578623449, "node_id": "MDU6SXNzdWU1Nzg2MjM0NDk=", "number": 37480, "title": "'third_party/tensorflow/compiler/aot:codegen_test' No such directory found", "user": {"login": "ayushmankumar7", "id": 41910134, "node_id": "MDQ6VXNlcjQxOTEwMTM0", "avatar_url": "https://avatars0.githubusercontent.com/u/41910134?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ayushmankumar7", "html_url": "https://github.com/ayushmankumar7", "followers_url": "https://api.github.com/users/ayushmankumar7/followers", "following_url": "https://api.github.com/users/ayushmankumar7/following{/other_user}", "gists_url": "https://api.github.com/users/ayushmankumar7/gists{/gist_id}", "starred_url": "https://api.github.com/users/ayushmankumar7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ayushmankumar7/subscriptions", "organizations_url": "https://api.github.com/users/ayushmankumar7/orgs", "repos_url": "https://api.github.com/users/ayushmankumar7/repos", "events_url": "https://api.github.com/users/ayushmankumar7/events{/privacy}", "received_events_url": "https://api.github.com/users/ayushmankumar7/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-03-10T14:31:49Z", "updated_at": "2020-03-15T00:42:12Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "Thank you for submitting a TensorFlow documentation issue. Per our GitHub\r\npolicy, we only address code/doc bugs, performance issues, feature requests, and\r\nbuild/installation issues on GitHub.\r\n\r\nThe TensorFlow docs are open source! To get involved, read the documentation\r\ncontributor guide: https://www.tensorflow.org/community/contribute/docs\r\n\r\n## URL(s) with the issue:\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/compiler/aot/codegen_test.cc\r\n\r\nPlease provide a link to the documentation entry, for example:\r\nhttps://www.tensorflow.org/versions/r2.0/api_docs/python/tf/MyMethod\r\n\r\n## Description of issue (what needs changing):\r\n// To update the golden file, flip update_golden to true and run the\r\n  // following:\r\n  // bazel test --test_strategy=local \\\r\n  //   third_party/tensorflow/compiler/aot:codegen_test\r\n### Clear description\r\n\r\nLine 154\r\n\r\nI wanted to update the golden file, but the given directory is not present in the third_party library.\r\n\r\nFor example, why should someone use this method? How is it useful?\r\n\r\n### Correct links\r\n\r\nIs the link to the source code correct?\r\n\r\n### Parameters defined\r\n\r\nAre all parameters defined and formatted correctly?\r\n\r\n### Returns defined\r\n\r\nAre return values defined?\r\n\r\n### Raises listed and defined\r\n\r\nAre the errors defined? For example,\r\nhttps://www.tensorflow.org/versions/r2.0/api_docs/python/tf/feature_column/categorical_column_with_vocabulary_file#raises\r\n\r\n### Usage example\r\n\r\nIs there a usage example?\r\n\r\nSee the API guide: https://www.tensorflow.org/community/contribute/docs_ref\r\non how to write testable usage examples.\r\n\r\n### Request visuals, if applicable\r\n\r\nAre there currently visuals? If not, will it clarify the content?\r\n\r\n### Submit a pull request?\r\n\r\nAre you planning to also submit a pull request to fix the issue? See the docs\r\ncontributor guide: https://www.tensorflow.org/community/contribute/docs,\r\ndocs API guide: https://www.tensorflow.org/community/contribute/docs_ref and the\r\ndocs style guide: https://www.tensorflow.org/community/contribute/docs_style\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37479", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37479/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37479/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37479/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37479", "id": 578617642, "node_id": "MDU6SXNzdWU1Nzg2MTc2NDI=", "number": 37479, "title": "Excessive memory consumption and preparation runtime of tf.keras.backend.max in custom layer with masking", "user": {"login": "padoremu", "id": 42805615, "node_id": "MDQ6VXNlcjQyODA1NjE1", "avatar_url": "https://avatars1.githubusercontent.com/u/42805615?v=4", "gravatar_id": "", "url": "https://api.github.com/users/padoremu", "html_url": "https://github.com/padoremu", "followers_url": "https://api.github.com/users/padoremu/followers", "following_url": "https://api.github.com/users/padoremu/following{/other_user}", "gists_url": "https://api.github.com/users/padoremu/gists{/gist_id}", "starred_url": "https://api.github.com/users/padoremu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/padoremu/subscriptions", "organizations_url": "https://api.github.com/users/padoremu/orgs", "repos_url": "https://api.github.com/users/padoremu/repos", "events_url": "https://api.github.com/users/padoremu/events{/privacy}", "received_events_url": "https://api.github.com/users/padoremu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-03-10T14:24:06Z", "updated_at": "2020-03-12T22:17:27Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code: yes\r\n- OS Platform and Distribution: Linux Ubuntu 18.04\r\n- Mobile device if the issue happens on mobile device: -\r\n- TensorFlow installed from: binary\r\n- TensorFlow version: 2.2.0-dev20200303\r\n- Python version: 3.6.9\r\n- Bazel version: -\r\n- GCC/Compiler version: -\r\n- CUDA/cuDNN version: CPU only\r\n- GPU model and memory: CPU only\r\n\r\n**Describe the current behavior**\r\nMemory consumption seems to be proportional to `num_iterations` and thus excessive, most likely being a memory leak. Runtime until seeing the first fit result is also extremely slow: 15 seconds until the first fit call, 55 seconds until seeing the result of the first fit, and the other fits run through in less than a second. Apparently, runtime is due to memory management and not due to the actual max function evaluation.\r\n\r\nWhen using `tf.keras.backend.max` for computing a mask with `tf.stack` in a real setup, memory consumption increases steadily until running out of memory at approx. 30 GB. In contrast, without `compute_mask`, memory consumption doesn't go beyond approx 1 GB.\r\n\r\n**Describe the expected behavior**\r\nI would expect memory consumption to be independent of `num_iterations` and thus being much lower, plus preparation runtime being much lower.\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\n\r\nbatch_size = 100\r\ndim_input = 100\r\ndim_output = 1\r\nnum_iterations = 100 # will consume approx. 5 GB RAM when set to 1000\r\n\r\n\r\nclass CustomMask(tf.keras.layers.Layer):\r\n  def __init__(self):\r\n    super(CustomMask, self).__init__()\r\n\r\n  def compute_mask(self, inputs, mask=None):\r\n    batch_size = inputs.shape[0]\r\n\r\n    batch_maxes = tf.keras.backend.max(inputs, axis=1)\r\n\r\n    for batch in range(batch_size):\r\n      for i in range(num_iterations):\r\n        max = tf.keras.backend.max(batch_maxes[batch])\r\n\r\n    return None\r\n\r\n  def call(self, inputs, mask=None):\r\n    return inputs\r\n\r\n\r\nmodel = tf.keras.Sequential()\r\n\r\nmodel.add(tf.keras.layers.Input(batch_input_shape=(batch_size, dim_input)))\r\n\r\nmodel.add(CustomMask())\r\n\r\nmodel.add(tf.keras.layers.Dense(dim_output))\r\n\r\nmodel.compile(loss='categorical_crossentropy', optimizer='adam', metrics=['accuracy'])\r\n\r\ntraining_input = np.zeros([batch_size, dim_input])\r\ntraining_output = np.zeros([batch_size, dim_output])\r\n\r\nmodel.fit(training_input, training_output, batch_size=batch_size)\r\n```\r\n\r\n**Other info / logs**\r\nIf my usage of `tf.keras.backend.max` is wrong with regard to memory consumption and / or runtime, please let me know. I need to call it frequently within `compute_mask` for computing a custom mask in conjunction with `tf.stack`. However, the latter does not seem to be the problem, which is why I left it out in the stripped down code.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37477", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37477/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37477/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37477/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37477", "id": 578573663, "node_id": "MDU6SXNzdWU1Nzg1NzM2NjM=", "number": 37477, "title": "Additional mode for loading of segmentation data in tf.keras.preprocessing.image.ImageDataGenerator.flow_from_dataframe()", "user": {"login": "RobinBaumann", "id": 16244603, "node_id": "MDQ6VXNlcjE2MjQ0NjAz", "avatar_url": "https://avatars1.githubusercontent.com/u/16244603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RobinBaumann", "html_url": "https://github.com/RobinBaumann", "followers_url": "https://api.github.com/users/RobinBaumann/followers", "following_url": "https://api.github.com/users/RobinBaumann/following{/other_user}", "gists_url": "https://api.github.com/users/RobinBaumann/gists{/gist_id}", "starred_url": "https://api.github.com/users/RobinBaumann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RobinBaumann/subscriptions", "organizations_url": "https://api.github.com/users/RobinBaumann/orgs", "repos_url": "https://api.github.com/users/RobinBaumann/repos", "events_url": "https://api.github.com/users/RobinBaumann/events{/privacy}", "received_events_url": "https://api.github.com/users/RobinBaumann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-03-10T13:20:23Z", "updated_at": "2020-03-19T15:13:46Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 2.1.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nAs of now, one has to come around with a workaround to load segmentation data in `tf.keras.preprocessing.image.ImageDataGenerator` to load images and segmentation masks in a generator. A current workaround could look like:\r\n    \r\n    datagen = tf.keras.preprocessing.image.ImageDataGenerator()\r\n    \r\n    df = pd.DataFrame({'images': images,\r\n                       'masks': masks})\r\n    # seed, so that image_generator and mask_generator will rotate and shuffle equivalently\r\n    seed = 42\r\n    image_generator = datagen.flow_from_dataframe(df, \r\n                                          directory='.', \r\n                                          x_col='images', \r\n                                          y_col='masks', \r\n                                          batch_size=1, \r\n                                          class_mode=None, \r\n                                          seed=seed)\r\n    mask_generator = datagen.flow_from_dataframe(df, \r\n                                         directory='.', \r\n                                         x_col='masks', \r\n                                         y_col='images', # Or whatever \r\n                                         batch_size=1, \r\n                                         class_mode=None, \r\n                                         seed=seed)\r\n    \r\n    train_generator = zip(image_generator, mask_generator)\r\n   \r\n    # same for validation data generator\r\n\r\n    model.fit(x=train_generator, epochs=EPOCHS, \r\n                    validation_data=validation_generator, use_multiprocessing=False)\r\n\r\nIt would be much cleaner, if there would be an option for `class_mode` (e.g. `class_mode='mask'`) that allows you to load the files specified by the paths in `y_col` as images. \r\n\r\n**Will this change the current api? How?**\r\n\r\nAn additional option for the argument `class_mode` will be added. \r\n\r\n**Who will benefit with this feature?**\r\nEveryone who looks for a simple way to load images and corresponding segmentation data. \r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37476", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37476/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37476/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37476/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37476", "id": 578502744, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg2MDcwNDA1", "number": 37476, "title": "support tf.Unique legalize throught hlo/lhlo ", "user": {"login": "qqsun8819", "id": 1409644, "node_id": "MDQ6VXNlcjE0MDk2NDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1409644?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qqsun8819", "html_url": "https://github.com/qqsun8819", "followers_url": "https://api.github.com/users/qqsun8819/followers", "following_url": "https://api.github.com/users/qqsun8819/following{/other_user}", "gists_url": "https://api.github.com/users/qqsun8819/gists{/gist_id}", "starred_url": "https://api.github.com/users/qqsun8819/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qqsun8819/subscriptions", "organizations_url": "https://api.github.com/users/qqsun8819/orgs", "repos_url": "https://api.github.com/users/qqsun8819/repos", "events_url": "https://api.github.com/users/qqsun8819/events{/privacy}", "received_events_url": "https://api.github.com/users/qqsun8819/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1169365682, "node_id": "MDU6TGFiZWwxMTY5MzY1Njgy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:L", "name": "size:L", "color": "adafea", "default": false, "description": "CL Change Size: Large"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-03-10T11:09:15Z", "updated_at": "2020-03-18T16:55:06Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37476", "html_url": "https://github.com/tensorflow/tensorflow/pull/37476", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37476.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37476.patch"}, "body": "This pr purposed a way to lower tf.Unqiue down to mlir core dialect, by adding relevant hlo/lhlo op, and a runner_utils which call a external function to actually do the unique thing with a hashmap, any discussion is welcomed for this pr as  we are trying to get things done right .\r\nThe reason why we import a external function to lower the relevant unique logic is that the hashmap type is not supported  currently in mlir core, a discussion is purposed in llvm discussion https://llvm.discourse.group/t/will-mlir-support-hashmap-type-in-near-future/691/2  \r\nSo for code like \r\n```\r\n%1:2 = \"tf.Unique\"(%arg0)  : (tensor<?xi64>) -> (tensor<?xi64>, tensor<?xi64>)\r\n```\r\nwill be first lowered to lhlo code \r\n```\r\n%0 = alloc() {temp = true} : memref<i64>\r\n    \"xla_lhlo.unique_count\"(%arg0, %0) : (memref<?xi64>, memref<i64>) -> ()\r\n    %1 = load %0[] : memref<i64>\r\n    %2 = index_cast %1 : i64 to index\r\n    %3 = alloc(%2) {temp = true} : memref<?xi64>\r\n    %4 = dim %arg0, 0 : memref<?xi64>\r\n    %5 = alloc(%4) {temp = true} : memref<?xi64>\r\n    \"xla_lhlo.unique\"(%arg0, %3, %5) : (memref<?xi64>, memref<?xi64>, memref<?xi64>) -> ()\r\n    dealloc %0 : memref<i64>\r\n    dealloc %3 : memref<?xi64>\r\n    dealloc %5 : memref<?xi64>\r\n```\r\nand then be lowered by newly added -lhlo-legalize-to-std pass to code like\r\n```\r\n%0 = alloc() {temp = true} : memref<i64>\r\n    %1 = dim %arg0, 0 : memref<?xi64>\r\n    %2 = call @_global_get_unique_ids_count(%arg0, %1) : (memref<?xi64>, index) -> i64\r\n    store %2, %0[] : memref<i64>\r\n    %3 = load %0[] : memref<i64>\r\n    %4 = index_cast %3 : i64 to index\r\n    %5 = alloc(%4) {temp = true} : memref<?xi64>\r\n    %6 = dim %arg0, 0 : memref<?xi64>\r\n    %7 = alloc(%6) {temp = true} : memref<?xi64>\r\n    call @_global_unique_i64_i64(%arg0, %5, %7) : (memref<?xi64>, memref<?xi64>, memref<?xi64>) -> ()\r\n    dealloc %0 : memref<i64>\r\n    dealloc %5 : memref<?xi64>\r\n    dealloc %7 : memref<?xi64>\r\n```\r\nso the two external function  _global_get_unique_ids_count and _global_unique_i64_i64 is called to actually do unique , which is now located in runner_utils lib"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37474", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37474/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37474/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37474/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37474", "id": 578485849, "node_id": "MDU6SXNzdWU1Nzg0ODU4NDk=", "number": 37474, "title": "Building bazel on OpenSuSE Leap 15.1 fails due to unrecognized option.", "user": {"login": "jlturriff", "id": 7597215, "node_id": "MDQ6VXNlcjc1OTcyMTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/7597215?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jlturriff", "html_url": "https://github.com/jlturriff", "followers_url": "https://api.github.com/users/jlturriff/followers", "following_url": "https://api.github.com/users/jlturriff/following{/other_user}", "gists_url": "https://api.github.com/users/jlturriff/gists{/gist_id}", "starred_url": "https://api.github.com/users/jlturriff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jlturriff/subscriptions", "organizations_url": "https://api.github.com/users/jlturriff/orgs", "repos_url": "https://api.github.com/users/jlturriff/repos", "events_url": "https://api.github.com/users/jlturriff/events{/privacy}", "received_events_url": "https://api.github.com/users/jlturriff/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "amahendrakar", "id": 57165142, "node_id": "MDQ6VXNlcjU3MTY1MTQy", "avatar_url": "https://avatars1.githubusercontent.com/u/57165142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amahendrakar", "html_url": "https://github.com/amahendrakar", "followers_url": "https://api.github.com/users/amahendrakar/followers", "following_url": "https://api.github.com/users/amahendrakar/following{/other_user}", "gists_url": "https://api.github.com/users/amahendrakar/gists{/gist_id}", "starred_url": "https://api.github.com/users/amahendrakar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amahendrakar/subscriptions", "organizations_url": "https://api.github.com/users/amahendrakar/orgs", "repos_url": "https://api.github.com/users/amahendrakar/repos", "events_url": "https://api.github.com/users/amahendrakar/events{/privacy}", "received_events_url": "https://api.github.com/users/amahendrakar/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "amahendrakar", "id": 57165142, "node_id": "MDQ6VXNlcjU3MTY1MTQy", "avatar_url": "https://avatars1.githubusercontent.com/u/57165142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amahendrakar", "html_url": "https://github.com/amahendrakar", "followers_url": "https://api.github.com/users/amahendrakar/followers", "following_url": "https://api.github.com/users/amahendrakar/following{/other_user}", "gists_url": "https://api.github.com/users/amahendrakar/gists{/gist_id}", "starred_url": "https://api.github.com/users/amahendrakar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amahendrakar/subscriptions", "organizations_url": "https://api.github.com/users/amahendrakar/orgs", "repos_url": "https://api.github.com/users/amahendrakar/repos", "events_url": "https://api.github.com/users/amahendrakar/events{/privacy}", "received_events_url": "https://api.github.com/users/amahendrakar/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-03-10T10:39:47Z", "updated_at": "2020-03-18T09:28:26Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n```\r\n- OS Platform and Distribution:    OpenSuSE Leap 15.1 (x86_64)\r\n- Mobile device                              N/A\r\n- TensorFlow installed from         source\r\n- TensorFlow version:                   0.22.0 (bazel-0.22.0-lp151.2.1.x86_64.rpm, provided in the OpenSuSE repositories)\r\n- Python version:                           2.7.14\r\n- Installed using:                            virtualenv? pip? conda?: Unknown (python is a foreign language for me)\r\n- GPU model and memory:           Intel Corporation HD Graphics 630 (rev 04) (prog-if 00 [VGA controller])\r\n```\r\n\r\n\r\n**Describe the problem**\r\nInstallation fails with the following message:\r\n```\r\nERROR: Unrecognized option: --experimental_repo_remote_exec\r\n```\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n```\r\n- zypper install bazel\r\n- ./configure\r\n```\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n[BazelInstall.log](https://github.com/tensorflow/tensorflow/files/4311797/BazelInstall.log)\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37472", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37472/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37472/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37472/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37472", "id": 578446397, "node_id": "MDU6SXNzdWU1Nzg0NDYzOTc=", "number": 37472, "title": "Configurable attribute \"srcs\" doesn't match this configuration", "user": {"login": "WeiHao97", "id": 37089196, "node_id": "MDQ6VXNlcjM3MDg5MTk2", "avatar_url": "https://avatars0.githubusercontent.com/u/37089196?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WeiHao97", "html_url": "https://github.com/WeiHao97", "followers_url": "https://api.github.com/users/WeiHao97/followers", "following_url": "https://api.github.com/users/WeiHao97/following{/other_user}", "gists_url": "https://api.github.com/users/WeiHao97/gists{/gist_id}", "starred_url": "https://api.github.com/users/WeiHao97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WeiHao97/subscriptions", "organizations_url": "https://api.github.com/users/WeiHao97/orgs", "repos_url": "https://api.github.com/users/WeiHao97/repos", "events_url": "https://api.github.com/users/WeiHao97/events{/privacy}", "received_events_url": "https://api.github.com/users/WeiHao97/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-03-10T09:32:34Z", "updated_at": "2020-03-12T10:37:54Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):  Ubuntu 16.04.2 LTS (GNU/Linux 4.4.0-38-generic aarch64)\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 2.0\r\n- Python version: 2.7\r\n- Installed using virtualenv? pip? conda?: N\r\n- Bazel version (if compiling from source): 2.0.0\r\n- GCC/Compiler version (if compiling from source): 9.1.0\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n\r\n\r\n**Describe the problem**\r\nBazel build failed when I am trying to build the tflite benchmark\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\nbazel build -c opt tensorflow/lite/tools/benchmark:benchmark_model\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n\r\nINFO: Options provided by the client:\r\n  Inherited 'common' options: --isatty=1 --terminal_columns=133\r\nINFO: Reading rc options for 'build' from /users/Wei_Hao/tensorflow/.bazelrc:\r\n  Inherited 'common' options: --experimental_repo_remote_exec\r\nINFO: Reading rc options for 'build' from /users/Wei_Hao/tensorflow/.bazelrc:\r\n  'build' options: --apple_platform_type=macos --define framework_shared_object=true --define open_source_build=true --java_toolchain=//third_party/toolchains/java:tf_java_toolchain --host_java_toolchain=//third_party/toolchains/java:tf_java_toolchain --define=use_fast_cpp_protos=true --define=allow_oversize_protos=true --spawn_strategy=standalone -c opt --announce_rc --define=grpc_no_ares=true --noincompatible_remove_legacy_whole_archive --noincompatible_prohibit_aapt1 --enable_platform_specific_config --config=v2\r\nINFO: Found applicable config definition build:v2 in file /users/Wei_Hao/tensorflow/.bazelrc: --define=tf_api_version=2 --action_env=TF2_BEHAVIOR=1\r\nINFO: Found applicable config definition build:linux in file /users/Wei_Hao/tensorflow/.bazelrc: --copt=-w --define=PREFIX=/usr --define=LIBDIR=$(PREFIX)/lib --define=INCLUDEDIR=$(PREFIX)/include --cxxopt=-std=c++14 --host_cxxopt=-std=c++14 --config=dynamic_kernels\r\nINFO: Found applicable config definition build:dynamic_kernels in file /users/Wei_Hao/tensorflow/.bazelrc: --define=dynamic_loaded_kernels=true --copt=-DAUTOLOAD_DYNAMIC_KERNELS\r\nERROR: /users/Wei_Hao/.cache/bazel/_bazel_Wei_Hao/fcdad47d36a19e877fa240235b3a74d1/external/cpuinfo/BUILD.bazel:101:1: Configurable attribute \"srcs\" doesn't match this configuration (would a default condition help?).\r\nConditions checked:\r\n @cpuinfo//:linux_x86_64\r\n @cpuinfo//:macos_x86_64\r\n @cpuinfo//:android_armv7\r\n @cpuinfo//:android_arm64\r\n @cpuinfo//:android_x86\r\n @cpuinfo//:android_x86_64\r\n @cpuinfo//:ios_x86_64\r\n @cpuinfo//:ios_x86\r\n @cpuinfo//:ios_armv7\r\n @cpuinfo//:ios_arm64\r\n @cpuinfo//:ios_arm64e\r\n @cpuinfo//:watchos_x86_64\r\n @cpuinfo//:watchos_x86\r\n @cpuinfo//:watchos_armv7k\r\n @cpuinfo//:watchos_arm64_32\r\n @cpuinfo//:emscripten_wasm\r\nERROR: Analysis of target '//tensorflow/lite/tools/benchmark:benchmark_model' failed; build aborted:\r\n\r\n/users/Wei_Hao/.cache/bazel/_bazel_Wei_Hao/fcdad47d36a19e877fa240235b3a74d1/external/cpuinfo/BUILD.bazel:101:1: Configurable attribute \"srcs\" doesn't match this configuration (would a default condition help?).\r\nConditions checked:\r\n @cpuinfo//:linux_x86_64\r\n @cpuinfo//:macos_x86_64\r\n @cpuinfo//:android_armv7\r\n @cpuinfo//:android_arm64\r\n @cpuinfo//:android_x86\r\n @cpuinfo//:android_x86_64\r\n @cpuinfo//:ios_x86_64\r\n @cpuinfo//:ios_x86\r\n @cpuinfo//:ios_armv7\r\n @cpuinfo//:ios_arm64\r\n @cpuinfo//:ios_arm64e\r\n @cpuinfo//:watchos_x86_64\r\n @cpuinfo//:watchos_x86\r\n @cpuinfo//:watchos_armv7k\r\n @cpuinfo//:watchos_arm64_32\r\n @cpuinfo//:emscripten_wasm\r\nINFO: Elapsed time: 1.036s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (1 packages loaded, 17 targets configured)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37467", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37467/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37467/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37467/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37467", "id": 578393894, "node_id": "MDU6SXNzdWU1NzgzOTM4OTQ=", "number": 37467, "title": "No gradient defined for op", "user": {"login": "minjac", "id": 44050513, "node_id": "MDQ6VXNlcjQ0MDUwNTEz", "avatar_url": "https://avatars0.githubusercontent.com/u/44050513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/minjac", "html_url": "https://github.com/minjac", "followers_url": "https://api.github.com/users/minjac/followers", "following_url": "https://api.github.com/users/minjac/following{/other_user}", "gists_url": "https://api.github.com/users/minjac/gists{/gist_id}", "starred_url": "https://api.github.com/users/minjac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/minjac/subscriptions", "organizations_url": "https://api.github.com/users/minjac/orgs", "repos_url": "https://api.github.com/users/minjac/repos", "events_url": "https://api.github.com/users/minjac/events{/privacy}", "received_events_url": "https://api.github.com/users/minjac/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-03-10T07:47:01Z", "updated_at": "2020-03-16T04:49:29Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow): \r\nauto entropy_0 = Xlogy(scope_loss.WithOpName(\"xlogy0\"), input_labels_var, out_segmentation);\r\n- OS Platform: Windows7\r\n- VS2015\r\n- Python version: 3.6\r\n- Bazel version: 0.26.0\r\n- TensorFlow version: tensorflow 2.0\r\n- CUDA/cuDNN version: Cuda 10.0 && Cudnn 7.4.1\r\n- GPU : Geforce GTX 1070 8GB:\r\n\r\nHey, I got some error when I using op like Concat and Xlogy, which remind me that I have to add C++ gradient. But as https://github.com/tensorflow/tensorflow/issues/19944#issuecomment-556315768 says, the gradient op is existing, so how should I do to use the gradient op?\r\nThanks !\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37466", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37466/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37466/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37466/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37466", "id": 578362451, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg1OTU3Mjgx", "number": 37466, "title": "Update api_def_Ceil.pbtxt", "user": {"login": "rohanreddych", "id": 43641071, "node_id": "MDQ6VXNlcjQzNjQxMDcx", "avatar_url": "https://avatars3.githubusercontent.com/u/43641071?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohanreddych", "html_url": "https://github.com/rohanreddych", "followers_url": "https://api.github.com/users/rohanreddych/followers", "following_url": "https://api.github.com/users/rohanreddych/following{/other_user}", "gists_url": "https://api.github.com/users/rohanreddych/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohanreddych/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohanreddych/subscriptions", "organizations_url": "https://api.github.com/users/rohanreddych/orgs", "repos_url": "https://api.github.com/users/rohanreddych/repos", "events_url": "https://api.github.com/users/rohanreddych/events{/privacy}", "received_events_url": "https://api.github.com/users/rohanreddych/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-03-10T06:20:39Z", "updated_at": "2020-03-19T01:15:49Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37466", "html_url": "https://github.com/tensorflow/tensorflow/pull/37466", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37466.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37466.patch"}, "body": "tensorflow/core/api_def/base_api/api_def_Ceil.pbtxt"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37462", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37462/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37462/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37462/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37462", "id": 578305608, "node_id": "MDU6SXNzdWU1NzgzMDU2MDg=", "number": 37462, "title": "Custom rnn migration to tensorflow 2.x", "user": {"login": "npv0", "id": 26089883, "node_id": "MDQ6VXNlcjI2MDg5ODgz", "avatar_url": "https://avatars1.githubusercontent.com/u/26089883?v=4", "gravatar_id": "", "url": "https://api.github.com/users/npv0", "html_url": "https://github.com/npv0", "followers_url": "https://api.github.com/users/npv0/followers", "following_url": "https://api.github.com/users/npv0/following{/other_user}", "gists_url": "https://api.github.com/users/npv0/gists{/gist_id}", "starred_url": "https://api.github.com/users/npv0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/npv0/subscriptions", "organizations_url": "https://api.github.com/users/npv0/orgs", "repos_url": "https://api.github.com/users/npv0/repos", "events_url": "https://api.github.com/users/npv0/events{/privacy}", "received_events_url": "https://api.github.com/users/npv0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "amahendrakar", "id": 57165142, "node_id": "MDQ6VXNlcjU3MTY1MTQy", "avatar_url": "https://avatars1.githubusercontent.com/u/57165142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amahendrakar", "html_url": "https://github.com/amahendrakar", "followers_url": "https://api.github.com/users/amahendrakar/followers", "following_url": "https://api.github.com/users/amahendrakar/following{/other_user}", "gists_url": "https://api.github.com/users/amahendrakar/gists{/gist_id}", "starred_url": "https://api.github.com/users/amahendrakar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amahendrakar/subscriptions", "organizations_url": "https://api.github.com/users/amahendrakar/orgs", "repos_url": "https://api.github.com/users/amahendrakar/repos", "events_url": "https://api.github.com/users/amahendrakar/events{/privacy}", "received_events_url": "https://api.github.com/users/amahendrakar/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "amahendrakar", "id": 57165142, "node_id": "MDQ6VXNlcjU3MTY1MTQy", "avatar_url": "https://avatars1.githubusercontent.com/u/57165142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amahendrakar", "html_url": "https://github.com/amahendrakar", "followers_url": "https://api.github.com/users/amahendrakar/followers", "following_url": "https://api.github.com/users/amahendrakar/following{/other_user}", "gists_url": "https://api.github.com/users/amahendrakar/gists{/gist_id}", "starred_url": "https://api.github.com/users/amahendrakar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amahendrakar/subscriptions", "organizations_url": "https://api.github.com/users/amahendrakar/orgs", "repos_url": "https://api.github.com/users/amahendrakar/repos", "events_url": "https://api.github.com/users/amahendrakar/events{/privacy}", "received_events_url": "https://api.github.com/users/amahendrakar/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2020-03-10T03:02:16Z", "updated_at": "2020-03-19T04:57:59Z", "closed_at": null, "author_association": "NONE", "body": "I want to migrate tensorflow 1.x code to 2.x. I have tried migration script and refererd migration guide. But still its unclear that how to migrate \r\n1.place holder with shape such as [x,None,y] . \r\n2. Convert tf_get_variable with xavier initialization\r\nPlease find the stackoverflow post link (not answered)\r\n\r\nhttps://stackoverflow.com/questions/60601770/custom-rnn-migration-to-tensorflow-2-0"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37460", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37460/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37460/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37460/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37460", "id": 578267155, "node_id": "MDU6SXNzdWU1NzgyNjcxNTU=", "number": 37460, "title": "map_fn + @tf.function + tf.nn.conv2d throws error when strides to conv2d are supplied in the elems argument for map_fn", "user": {"login": "aligirayhanozbay", "id": 44897017, "node_id": "MDQ6VXNlcjQ0ODk3MDE3", "avatar_url": "https://avatars2.githubusercontent.com/u/44897017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aligirayhanozbay", "html_url": "https://github.com/aligirayhanozbay", "followers_url": "https://api.github.com/users/aligirayhanozbay/followers", "following_url": "https://api.github.com/users/aligirayhanozbay/following{/other_user}", "gists_url": "https://api.github.com/users/aligirayhanozbay/gists{/gist_id}", "starred_url": "https://api.github.com/users/aligirayhanozbay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aligirayhanozbay/subscriptions", "organizations_url": "https://api.github.com/users/aligirayhanozbay/orgs", "repos_url": "https://api.github.com/users/aligirayhanozbay/repos", "events_url": "https://api.github.com/users/aligirayhanozbay/events{/privacy}", "received_events_url": "https://api.github.com/users/aligirayhanozbay/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1190546177, "node_id": "MDU6TGFiZWwxMTkwNTQ2MTc3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:autograph", "name": "comp:autograph", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "Saduf2019", "id": 59822926, "node_id": "MDQ6VXNlcjU5ODIyOTI2", "avatar_url": "https://avatars2.githubusercontent.com/u/59822926?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Saduf2019", "html_url": "https://github.com/Saduf2019", "followers_url": "https://api.github.com/users/Saduf2019/followers", "following_url": "https://api.github.com/users/Saduf2019/following{/other_user}", "gists_url": "https://api.github.com/users/Saduf2019/gists{/gist_id}", "starred_url": "https://api.github.com/users/Saduf2019/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Saduf2019/subscriptions", "organizations_url": "https://api.github.com/users/Saduf2019/orgs", "repos_url": "https://api.github.com/users/Saduf2019/repos", "events_url": "https://api.github.com/users/Saduf2019/events{/privacy}", "received_events_url": "https://api.github.com/users/Saduf2019/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Saduf2019", "id": 59822926, "node_id": "MDQ6VXNlcjU5ODIyOTI2", "avatar_url": "https://avatars2.githubusercontent.com/u/59822926?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Saduf2019", "html_url": "https://github.com/Saduf2019", "followers_url": "https://api.github.com/users/Saduf2019/followers", "following_url": "https://api.github.com/users/Saduf2019/following{/other_user}", "gists_url": "https://api.github.com/users/Saduf2019/gists{/gist_id}", "starred_url": "https://api.github.com/users/Saduf2019/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Saduf2019/subscriptions", "organizations_url": "https://api.github.com/users/Saduf2019/orgs", "repos_url": "https://api.github.com/users/Saduf2019/repos", "events_url": "https://api.github.com/users/Saduf2019/events{/privacy}", "received_events_url": "https://api.github.com/users/Saduf2019/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-03-10T00:39:20Z", "updated_at": "2020-03-16T11:34:18Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04): Ubuntu GNU/Linux 18.04, Debian GNU/Linux bullseye/sid x86_64\r\n\r\n- TensorFlow installed from (source or\r\nbinary): Binary\r\n- TensorFlow version (use command below): 2.0.0, 2.1.0\r\n- Python version: 3.7.3, 3.5.2\r\n- CUDA/cuDNN version: 10.0, ROCm 3.0\r\n- GPU model and memory: Titan V, Radeon VII\r\n\r\n**Describe the current behavior**\r\nSupplying the strides for tf.nn.conv2d inside elems when using tf.map_fn leads to the following error ONLY when executing in graph mode/inside @tf.function:\r\n\r\nTypeError: len is not well defined for symbolic Tensors. (TensorArrayV2Read_2/TensorListGetItem:0) Please call `x.shape` rather than `len(x)` for shape information.\r\n\r\n\r\n**Describe the expected behavior**\r\nIt should run successfully, as is the case without @tf.function\r\n\r\n**Standalone code to reproduce the issue** \r\n```python\r\nimport tensorflow as tf\r\n\r\n@tf.function\r\ndef g(a,b):\r\n    return tf.map_fn(lambda x: tf.nn.conv2d(tf.expand_dims(x[0],0),x[1],[2,2],\"VALID\",\"NCHW\"), [a,b], dtype = a.dtype, parallel_iterations = 16)\r\n\r\ndef g2(a,b,s):\r\n    return tf.map_fn(lambda x: tf.nn.conv2d(tf.expand_dims(x[0],0),x[1],x[2],\"VALID\",\"NCHW\"), [a,b,s], dtype = a.dtype, parallel_iterations = 16)\r\n\r\n@tf.function\r\ndef g3(a,b,s):\r\n    return tf.map_fn(lambda x: tf.nn.conv2d(tf.expand_dims(x[0],0),x[1],x[2],\"VALID\",\"NCHW\"), [a,b,s], dtype = a.dtype, parallel_iterations = 16)\r\n\r\nq = tf.random.uniform((16,5,100,100))\r\nr = tf.random.uniform((16,5,5,5,2))\r\nstri = tf.tile(tf.constant([[2,2]]),[16,1])\r\n\r\nprint(g(q,r).shape) #runs fine\r\nprint(g2(q,r,stri).shape) #runs fine\r\nprint(g3(q,r,stri).shape) #error\r\n```\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\n### When using TF2.0 + CUDA 10.0 on Titan V\r\n```\r\nTraceback (most recent call last):\r\n  File \"mapfn.py\", line 19, in <module>\r\n    print(g3(q,r,stri))\r\n  File \"/home/ago14/.conda/envs/tf2.0/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 457, in __call__\r\n    result = self._call(*args, **kwds)\r\n  File \"/home/ago14/.conda/envs/tf2.0/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 503, in _call\r\n    self._initialize(args, kwds, add_initializers_to=initializer_map)\r\n  File \"/home/ago14/.conda/envs/tf2.0/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 408, in _initialize\r\n    *args, **kwds))\r\n  File \"/home/ago14/.conda/envs/tf2.0/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 1848, in _get_concrete_function_internal_garbage_collected\r\n    graph_function, _, _ = self._maybe_define_function(args, kwargs)\r\n  File \"/home/ago14/.conda/envs/tf2.0/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 2150, in _maybe_define_function\r\n    graph_function = self._create_graph_function(args, kwargs)\r\n  File \"/home/ago14/.conda/envs/tf2.0/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 2041, in _create_graph_function\r\n    capture_by_value=self._capture_by_value),\r\n  File \"/home/ago14/.conda/envs/tf2.0/lib/python3.7/site-packages/tensorflow_core/python/framework/func_graph.py\", line 915, in func_graph_from_py_func\r\n    func_outputs = python_func(*func_args, **func_kwargs)\r\n  File \"/home/ago14/.conda/envs/tf2.0/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 358, in wrapped_fn\r\n    return weak_wrapped_fn().__wrapped__(*args, **kwds)\r\n  File \"/home/ago14/.conda/envs/tf2.0/lib/python3.7/site-packages/tensorflow_core/python/framework/func_graph.py\", line 905, in wrapper\r\n    raise e.ag_error_metadata.to_exception(e)\r\nTypeError: in converted code:\r\n\r\n    mapfn.py:12 g3  *\r\n        return tf.map_fn(lambda x: tf.nn.conv2d(tf.expand_dims(x[0],0),x[1],x[2],\"VALID\",\"NCHW\"), [a,b,s], dtype = a.dtype, parallel_iterations = 16)\r\n    /home/ago14/.conda/envs/tf2.0/lib/python3.7/site-packages/tensorflow_core/python/ops/map_fn.py:268 map_fn\r\n        maximum_iterations=n)\r\n    /home/ago14/.conda/envs/tf2.0/lib/python3.7/site-packages/tensorflow_core/python/ops/nn_ops.py:1913 conv2d_v2\r\n        name=name)\r\n    /home/ago14/.conda/envs/tf2.0/lib/python3.7/site-packages/tensorflow_core/python/ops/nn_ops.py:2000 conv2d\r\n        strides = _get_sequence(strides, 2, channel_index, \"strides\")\r\n    /home/ago14/.conda/envs/tf2.0/lib/python3.7/site-packages/tensorflow_core/python/ops/nn_ops.py:68 _get_sequence\r\n        current_n = len(value)\r\n    /home/ago14/.conda/envs/tf2.0/lib/python3.7/site-packages/tensorflow_core/python/framework/ops.py:741 __len__\r\n        \"shape information.\".format(self.name))\r\n\r\n    TypeError: len is not well defined for symbolic Tensors. (TensorArrayV2Read_2/TensorListGetItem:0) Please call `x.shape` rather than `len(x)` for shape information.\r\n```\r\n\r\n### When using TF2.1 + ROCm 3.0 on Radeon VII\r\n```\r\nTraceback (most recent call last):\r\n  File \"mapfn.py\", line 20, in <module>\r\n    print(g3(q,r,stri).shape) #error\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/eager/def_function.py\", line 568, in __call__\r\n    result = self._call(*args, **kwds)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/eager/def_function.py\", line 615, in _call\r\n    self._initialize(args, kwds, add_initializers_to=initializers)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/eager/def_function.py\", line 497, in _initialize\r\n    *args, **kwds))\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/eager/function.py\", line 2389, in _get_concrete_function_internal_garbage_collected\r\n    graph_function, _, _ = self._maybe_define_function(args, kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/eager/function.py\", line 2703, in _maybe_define_function\r\n    graph_function = self._create_graph_function(args, kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/eager/function.py\", line 2593, in _create_graph_function\r\n    capture_by_value=self._capture_by_value),\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/framework/func_graph.py\", line 978, in func_graph_from_py_func\r\n    func_outputs = python_func(*func_args, **func_kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/eager/def_function.py\", line 439, in wrapped_fn\r\n    return weak_wrapped_fn().__wrapped__(*args, **kwds)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow_core/python/framework/func_graph.py\", line 968, in wrapper\r\n    raise e.ag_error_metadata.to_exception(e)\r\nTypeError: in converted code:\r\n\r\n    mapfn.py:12 g3  *\r\n        return tf.map_fn(lambda x: tf.nn.conv2d(tf.expand_dims(x[0],0),x[1],x[2],\"VALID\",\"NCHW\"), [a,b,s], dtype = a.dtype, parallel_iterations = 16)\r\n    /usr/local/lib/python3.5/dist-packages/tensorflow_core/python/ops/map_fn.py:268 map_fn\r\n        maximum_iterations=n)\r\n    /usr/local/lib/python3.5/dist-packages/tensorflow_core/python/ops/nn_ops.py:1914 conv2d_v2\r\n        name=name)\r\n    /usr/local/lib/python3.5/dist-packages/tensorflow_core/python/ops/nn_ops.py:2001 conv2d\r\n        strides = _get_sequence(strides, 2, channel_index, \"strides\")\r\n    /usr/local/lib/python3.5/dist-packages/tensorflow_core/python/ops/nn_ops.py:69 _get_sequence\r\n        current_n = len(value)\r\n    /usr/local/lib/python3.5/dist-packages/tensorflow_core/python/framework/ops.py:733 __len__\r\n        \"shape information.\".format(self.name))\r\n\r\n    TypeError: len is not well defined for symbolic Tensors. (TensorArrayV2Read_2/TensorListGetItem:0) Please call `x.shape` rather than `len(x)` for shape information.\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37457", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37457/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37457/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37457/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37457", "id": 578248023, "node_id": "MDU6SXNzdWU1NzgyNDgwMjM=", "number": 37457, "title": "pip install tensorflow could not find a version", "user": {"login": "alexcreature", "id": 58425294, "node_id": "MDQ6VXNlcjU4NDI1Mjk0", "avatar_url": "https://avatars0.githubusercontent.com/u/58425294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcreature", "html_url": "https://github.com/alexcreature", "followers_url": "https://api.github.com/users/alexcreature/followers", "following_url": "https://api.github.com/users/alexcreature/following{/other_user}", "gists_url": "https://api.github.com/users/alexcreature/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcreature/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcreature/subscriptions", "organizations_url": "https://api.github.com/users/alexcreature/orgs", "repos_url": "https://api.github.com/users/alexcreature/repos", "events_url": "https://api.github.com/users/alexcreature/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcreature/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 1205765054, "node_id": "MDU6TGFiZWwxMjA1NzY1MDU0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:macOS", "name": "subtype:macOS", "color": "b619ea", "default": false, "description": "macOS Build/Installation issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "amahendrakar", "id": 57165142, "node_id": "MDQ6VXNlcjU3MTY1MTQy", "avatar_url": "https://avatars1.githubusercontent.com/u/57165142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amahendrakar", "html_url": "https://github.com/amahendrakar", "followers_url": "https://api.github.com/users/amahendrakar/followers", "following_url": "https://api.github.com/users/amahendrakar/following{/other_user}", "gists_url": "https://api.github.com/users/amahendrakar/gists{/gist_id}", "starred_url": "https://api.github.com/users/amahendrakar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amahendrakar/subscriptions", "organizations_url": "https://api.github.com/users/amahendrakar/orgs", "repos_url": "https://api.github.com/users/amahendrakar/repos", "events_url": "https://api.github.com/users/amahendrakar/events{/privacy}", "received_events_url": "https://api.github.com/users/amahendrakar/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "amahendrakar", "id": 57165142, "node_id": "MDQ6VXNlcjU3MTY1MTQy", "avatar_url": "https://avatars1.githubusercontent.com/u/57165142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amahendrakar", "html_url": "https://github.com/amahendrakar", "followers_url": "https://api.github.com/users/amahendrakar/followers", "following_url": "https://api.github.com/users/amahendrakar/following{/other_user}", "gists_url": "https://api.github.com/users/amahendrakar/gists{/gist_id}", "starred_url": "https://api.github.com/users/amahendrakar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amahendrakar/subscriptions", "organizations_url": "https://api.github.com/users/amahendrakar/orgs", "repos_url": "https://api.github.com/users/amahendrakar/repos", "events_url": "https://api.github.com/users/amahendrakar/events{/privacy}", "received_events_url": "https://api.github.com/users/amahendrakar/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2020-03-09T23:31:39Z", "updated_at": "2020-03-18T17:06:39Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- macOS Catalina version 10.15.3\r\n- pip install tensorflow\r\n- GPU model and memory: Intel Iris Plus Graphics 645 1536 MB\r\n\r\n**The problem**\r\nBoth `pip install tensorflow` and `pip install tf-nightly` lead to the following error messages:\r\n\r\n> ERROR: Could not find a version that satisfies the requirement tensorflow (from versions: none)\r\n\r\n> ERROR: No matching distribution found for tensorflow\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37456", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37456/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37456/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37456/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37456", "id": 578231849, "node_id": "MDU6SXNzdWU1NzgyMzE4NDk=", "number": 37456, "title": "Ops with SparseTensor on GPU gives result in CPU.", "user": {"login": "italo-goncalves", "id": 17046467, "node_id": "MDQ6VXNlcjE3MDQ2NDY3", "avatar_url": "https://avatars1.githubusercontent.com/u/17046467?v=4", "gravatar_id": "", "url": "https://api.github.com/users/italo-goncalves", "html_url": "https://github.com/italo-goncalves", "followers_url": "https://api.github.com/users/italo-goncalves/followers", "following_url": "https://api.github.com/users/italo-goncalves/following{/other_user}", "gists_url": "https://api.github.com/users/italo-goncalves/gists{/gist_id}", "starred_url": "https://api.github.com/users/italo-goncalves/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/italo-goncalves/subscriptions", "organizations_url": "https://api.github.com/users/italo-goncalves/orgs", "repos_url": "https://api.github.com/users/italo-goncalves/repos", "events_url": "https://api.github.com/users/italo-goncalves/events{/privacy}", "received_events_url": "https://api.github.com/users/italo-goncalves/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-03-09T22:42:25Z", "updated_at": "2020-03-17T20:34:49Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow):  custom code\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04):  Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if\r\nthe issue happens on mobile device: \r\n- TensorFlow installed from (source or\r\nbinary): binary (conda)\r\n- TensorFlow version (use command below): 2.1.0\r\n- Python version: 3.7\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from\r\nsource): \r\n- CUDA/cuDNN version: CUDA 10.1\r\n- GPU model and memory: NVIDIA GTX 1060 6 GB\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nWhen executing operations on sparse tensors in the GPU (within a `tf.device` block), the result is stored in the CPU. This is causing a huge slowdown in my program, as the data is being copied around between GPU and GPU multiple times.\r\n\r\nI have verified that this occurs with the functions `tf.sparse.sparse_dense_matmul` and `tf.sparse.reduce_sum`. It may also occur with others. Is this the intended behavior? I am missing something?\r\n\r\n**Describe the expected behavior**\r\nThe result of an operation on a sparse tensor with the GPU should stay in the GPU.\r\n\r\n**Standalone code to reproduce the issue** \r\nSee [this Colab notebook](https://colab.research.google.com/drive/1BpG8P8dEzDDmtMBIGgSA2wOMzEm4bCzL).\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n\r\nThanks in advance.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37455", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37455/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37455/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37455/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37455", "id": 578191295, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg1ODE4ODI2", "number": 37455, "title": "Add and populate leaf_id in boosted_trees.DebugOutput", "user": {"login": "bmc2-stripe", "id": 54961543, "node_id": "MDQ6VXNlcjU0OTYxNTQz", "avatar_url": "https://avatars1.githubusercontent.com/u/54961543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bmc2-stripe", "html_url": "https://github.com/bmc2-stripe", "followers_url": "https://api.github.com/users/bmc2-stripe/followers", "following_url": "https://api.github.com/users/bmc2-stripe/following{/other_user}", "gists_url": "https://api.github.com/users/bmc2-stripe/gists{/gist_id}", "starred_url": "https://api.github.com/users/bmc2-stripe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bmc2-stripe/subscriptions", "organizations_url": "https://api.github.com/users/bmc2-stripe/orgs", "repos_url": "https://api.github.com/users/bmc2-stripe/repos", "events_url": "https://api.github.com/users/bmc2-stripe/events{/privacy}", "received_events_url": "https://api.github.com/users/bmc2-stripe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-03-09T21:06:56Z", "updated_at": "2020-03-16T12:23:09Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37455", "html_url": "https://github.com/tensorflow/tensorflow/pull/37455", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37455.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37455.patch"}, "body": "Adds leaf_id field to boosted_trees.DebugOutput, and populates it in BoostedTreesExampleDebugOutputsOp.\r\n\r\nMotivation:\r\n*Leaf ids are quite useful in circumstances where we're using boosted trees to generate features for a subsequent model, eg in https://research.fb.com/publications/practical-lessons-from-predicting-clicks-on-ads-at-facebook/.\r\n*This PR also (partially) resolves a TODO.\r\n\r\nTested:\r\nUpdated unit tests to validate correct leaf_ids are returned."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37452", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37452/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37452/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37452/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37452", "id": 578102928, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg1NzQ1Njk3", "number": 37452, "title": "[ROCm] Update Tensorflow ROCm to build with hipclang compiler", "user": {"login": "sunway513", "id": 1049239, "node_id": "MDQ6VXNlcjEwNDkyMzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1049239?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sunway513", "html_url": "https://github.com/sunway513", "followers_url": "https://api.github.com/users/sunway513/followers", "following_url": "https://api.github.com/users/sunway513/following{/other_user}", "gists_url": "https://api.github.com/users/sunway513/gists{/gist_id}", "starred_url": "https://api.github.com/users/sunway513/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sunway513/subscriptions", "organizations_url": "https://api.github.com/users/sunway513/orgs", "repos_url": "https://api.github.com/users/sunway513/repos", "events_url": "https://api.github.com/users/sunway513/events{/privacy}", "received_events_url": "https://api.github.com/users/sunway513/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-03-09T18:24:10Z", "updated_at": "2020-03-17T11:25:24Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37452", "html_url": "https://github.com/tensorflow/tensorflow/pull/37452", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37452.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37452.patch"}, "body": "This PR updates the Tensorflow master branch to build with ROCm hipclang compiler. "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37450", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37450/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37450/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37450/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37450", "id": 578068550, "node_id": "MDU6SXNzdWU1NzgwNjg1NTA=", "number": 37450, "title": "tensorflow-gpu 2.0.1 hangs mid-epoch", "user": {"login": "ben-arnao", "id": 8053809, "node_id": "MDQ6VXNlcjgwNTM4MDk=", "avatar_url": "https://avatars0.githubusercontent.com/u/8053809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ben-arnao", "html_url": "https://github.com/ben-arnao", "followers_url": "https://api.github.com/users/ben-arnao/followers", "following_url": "https://api.github.com/users/ben-arnao/following{/other_user}", "gists_url": "https://api.github.com/users/ben-arnao/gists{/gist_id}", "starred_url": "https://api.github.com/users/ben-arnao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ben-arnao/subscriptions", "organizations_url": "https://api.github.com/users/ben-arnao/orgs", "repos_url": "https://api.github.com/users/ben-arnao/repos", "events_url": "https://api.github.com/users/ben-arnao/events{/privacy}", "received_events_url": "https://api.github.com/users/ben-arnao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gadagashwini", "id": 48476109, "node_id": "MDQ6VXNlcjQ4NDc2MTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/48476109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadagashwini", "html_url": "https://github.com/gadagashwini", "followers_url": "https://api.github.com/users/gadagashwini/followers", "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}", "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions", "organizations_url": "https://api.github.com/users/gadagashwini/orgs", "repos_url": "https://api.github.com/users/gadagashwini/repos", "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}", "received_events_url": "https://api.github.com/users/gadagashwini/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gadagashwini", "id": 48476109, "node_id": "MDQ6VXNlcjQ4NDc2MTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/48476109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadagashwini", "html_url": "https://github.com/gadagashwini", "followers_url": "https://api.github.com/users/gadagashwini/followers", "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}", "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions", "organizations_url": "https://api.github.com/users/gadagashwini/orgs", "repos_url": "https://api.github.com/users/gadagashwini/repos", "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}", "received_events_url": "https://api.github.com/users/gadagashwini/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2020-03-09T17:24:17Z", "updated_at": "2020-03-18T05:30:51Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow): The only modification i have made is that i've forked ReduceLRonPlateau and use this modified version. The only change is that i reduce the weight decay along with the learning rate. Seems highly unlikely this is relevant.\r\n\r\nReduceLRonPlateau\r\n```\r\n old_lr = float(K.get_value(self.model.optimizer.lr))\r\n                    old_wd = float(K.get_value(self.model.optimizer.weight_decay))\r\n                    if old_lr > self.min_lr:\r\n                        new_lr = old_lr * self.factor\r\n                        new_wd = old_wd * self.factor\r\n                        new_lr = max(new_lr, self.min_lr)\r\n                        K.set_value(self.model.optimizer.weight_decay, new_wd)\r\n                        K.set_value(self.model.optimizer.lr, new_lr)\r\n```\r\n\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04):  Windows 10\r\n- TensorFlow installed from (source or\r\nbinary): - TensorFlow version (use command below):  pip\r\n- Python version: - Bazel\r\nversion (if compiling from source):  3.6\r\n- GCC/Compiler version (if compiling from\r\nsource): \r\n- CUDA/cuDNN version: - GPU model and memory: 1060 6GB\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\nUpon calling model.fit() TF will hang at seemingly random points. (5 epochs in, mid epoch for example after we've trained on 20% of our batches). I am doing hyper parameter optimization, so sometimes a trial will complete fully, other times it will hang indefinitely. I was having no issues originally when doing a regression problem. This issue only started happenign when i switched to categorical classification.\r\n\r\nMy output node is 3 units because i have 3 class. Using a softmax function and built in categorical cross entropy. Those are the only changes from when it was working to now.\r\n\r\nTried changing batch size, does not seem to have affect. Not sure if i can see a pattern if certain parameter configurations cause the fit to fail.\r\n\r\nI notice the CPU spikes during a stall.\r\n\r\n**Describe the expected behavior**\r\n\r\nTF does not stall or at least provided some information as to why it is stalled.\r\n\r\n**Standalone code to reproduce the issue** \r\nProvide a reproducible test case that is the bare minimum necessary to generate\r\nthe problem. If possible, please share a link to Colab/Jupyter/any notebook.\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37449", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37449/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37449/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37449/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37449", "id": 578025305, "node_id": "MDU6SXNzdWU1NzgwMjUzMDU=", "number": 37449, "title": "Resource temporarily unavailable, ENOMEM on CPU with memory rlimit", "user": {"login": "jploski", "id": 709499, "node_id": "MDQ6VXNlcjcwOTQ5OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/709499?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jploski", "html_url": "https://github.com/jploski", "followers_url": "https://api.github.com/users/jploski/followers", "following_url": "https://api.github.com/users/jploski/following{/other_user}", "gists_url": "https://api.github.com/users/jploski/gists{/gist_id}", "starred_url": "https://api.github.com/users/jploski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jploski/subscriptions", "organizations_url": "https://api.github.com/users/jploski/orgs", "repos_url": "https://api.github.com/users/jploski/repos", "events_url": "https://api.github.com/users/jploski/events{/privacy}", "received_events_url": "https://api.github.com/users/jploski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-03-09T16:16:45Z", "updated_at": "2020-03-16T14:03:51Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow): yes, trivial example\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04): Debian buster\r\n- TensorFlow installed from (source or\r\nbinary): source\r\n- TensorFlow version (use command below): 2.1.0\r\n- Python version: 3.73\r\n- Bazel version (if compiling from source): ?\r\n- GCC/Compiler version (if compiling from source): 8.3.0\r\n- CUDA/cuDNN version: - GPU model and memory: not relevant\r\n\r\n**Describe the current behavior**\r\n\r\nThe system has 12 GB total physical memory, with /etc/security/limits.conf set to limt per-process max memory to 10 GB as follows:\r\n\r\n```\r\n* hard rss 10485760\r\n* hard as 10485760\r\n```\r\nA trivial code example runs out of memory. The last failling syscall obtained with strace is\r\n\r\nmmap(NULL, 8392704, PROT_NONE, MAP_PRIVATE|MAP_ANONYMOUS|MAP_STACK, -1, 0) = -1 ENOMEM (Cannot allocate memory)\r\n\r\nLooking at mmap invocations from strace confirms that it is indeed allocating close to 10 GB memory before fail. This does not happen when the resource limits are removed. I suspect that it's ignoring the rlimit and trying to allocate all physical memory.\r\n\r\n**Describe the expected behavior**\r\n\r\nThe library should respect the current max memory rlimit (or better yet, not try to allocate all system memory?) or provide some configuration parameter to limit memory (I found none for the CPU-based version).\r\n\r\n**Standalone code to reproduce the issue** \r\n\r\n```\r\nfrom __future__ import absolute_import, division, print_function, unicode_literals\r\n\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\ntf.config.set_visible_devices([], 'GPU')\r\nmodel = tf.keras.Sequential([ tf.keras.layers.Dense(units=1, input_shape=[1]) ])\r\nmodel.compile(optimizer='sgd', loss='mean_squared_error')\r\n\r\nxs = np.array([-1.0, 0.0, 1.0, 2.0, 3.0, 4.0], dtype=float)\r\nys = np.array([-3.0, -1.0, 1.0, 3.0, 5.0, 7.0], dtype=float)\r\n\r\nmodel.fit(xs, ys, epochs=1)\r\n```\r\n\r\n**Other info / logs**\r\n\r\nStrace output:\r\n\r\n```\r\n...\r\nwrite(1, \"Train on 6 samples\\n\", 19Train on 6 samples\r\n)    = 19\r\nioctl(1, TCGETS, {B38400 opost isig icanon echo ...}) = 0\r\nsched_getaffinity(0, 128, [0, 1, 2, 3, 4, 5, 6, 7]) = 64\r\nsysinfo({uptime=8660, loads=[12896, 10528, 13536], totalram=12518699008, freeram=2526597120, sharedram=950390784, bufferram=1171718144, totalswap=4898942976, freeswap=3857969152, procs=741, totalhigh=0, freehigh=0, mem_unit=1}) = 0\r\nmmap(NULL, 8392704, PROT_NONE, MAP_PRIVATE|MAP_ANONYMOUS|MAP_STACK, -1, 0) = -1 ENOMEM (Cannot allocate memory)\r\nfutex(0x7f5ca3c481a0, FUTEX_WAKE_PRIVATE, 2147483647) = 0\r\nwrite(2, \"terminate called after throwing \"..., 48terminate called after throwing an instance of ') = 48\r\nwrite(2, \"std::system_error\", 17std::system_error)       = 17\r\nwrite(2, \"'\\n\", 2'\r\n)                      = 2\r\nwrite(2, \"  what():  \", 11  what():  )             = 11\r\nwrite(2, \"Resource temporarily unavailable\", 32Resource temporarily unavailable) = 32\r\nwrite(2, \"\\n\", 1\r\n)                       = 1\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37448", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37448/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37448/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37448/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37448", "id": 578020875, "node_id": "MDU6SXNzdWU1NzgwMjA4NzU=", "number": 37448, "title": "Increase BiasGrad size:  \"BiasGrad requires tensor size <= int32 max\"", "user": {"login": "tonyreina", "id": 37851530, "node_id": "MDQ6VXNlcjM3ODUxNTMw", "avatar_url": "https://avatars3.githubusercontent.com/u/37851530?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tonyreina", "html_url": "https://github.com/tonyreina", "followers_url": "https://api.github.com/users/tonyreina/followers", "following_url": "https://api.github.com/users/tonyreina/following{/other_user}", "gists_url": "https://api.github.com/users/tonyreina/gists{/gist_id}", "starred_url": "https://api.github.com/users/tonyreina/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tonyreina/subscriptions", "organizations_url": "https://api.github.com/users/tonyreina/orgs", "repos_url": "https://api.github.com/users/tonyreina/repos", "events_url": "https://api.github.com/users/tonyreina/events{/privacy}", "received_events_url": "https://api.github.com/users/tonyreina/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-03-09T16:09:57Z", "updated_at": "2020-03-19T08:22:35Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 2.1.0\r\n- Are you willing to contribute it (Yes/No): No\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nWe've using 3D U-Net on large images (e.g. 512x512x256x4) and have found that when the input size increases above a certain size we get the error:  \r\n\r\n```\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError:  BiasGrad requires tensor size <= int32 max\r\n\t [[node BiasAddGrad_3 (defined at testing.py:640) ]] [Op:__inference_distributed_function_2785]\r\n```\r\n\r\nI'm pretty sure that this is because the BiasGrad function is using an INT32 datatype and we're declaring more than the datatype can represent as INT32. \r\n\r\nI'd like to request that the datatype be change to something larger-- possible INT64 or at least an unsigned INT32. On CPU we can easily use 100s of GB of RAM for the TensorFlow graph so these are now valid workloads for TF to support.\r\n\r\n**Will this change the current api? How?**\r\n\r\nNo. Other than to change the datatype for BiasGrad to something larger.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nWe've got customers now using 3D networks with very large images (512x512x256x4) and moderately large batch sizes (2-16). The memory footprint for these TF models can fit into CPU memory (~ 1.5 TB) if the datatype is extended to larger integers. \r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37447", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37447/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37447/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37447/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37447", "id": 578015648, "node_id": "MDU6SXNzdWU1NzgwMTU2NDg=", "number": 37447, "title": "Cross-compile instructions for TFLite XNNPACK delegate on ARM", "user": {"login": "WillNichols726", "id": 45394583, "node_id": "MDQ6VXNlcjQ1Mzk0NTgz", "avatar_url": "https://avatars1.githubusercontent.com/u/45394583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WillNichols726", "html_url": "https://github.com/WillNichols726", "followers_url": "https://api.github.com/users/WillNichols726/followers", "following_url": "https://api.github.com/users/WillNichols726/following{/other_user}", "gists_url": "https://api.github.com/users/WillNichols726/gists{/gist_id}", "starred_url": "https://api.github.com/users/WillNichols726/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WillNichols726/subscriptions", "organizations_url": "https://api.github.com/users/WillNichols726/orgs", "repos_url": "https://api.github.com/users/WillNichols726/repos", "events_url": "https://api.github.com/users/WillNichols726/events{/privacy}", "received_events_url": "https://api.github.com/users/WillNichols726/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1194756584, "node_id": "MDU6TGFiZWwxMTk0NzU2NTg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20raspberry%20pi", "name": "subtype: raspberry pi", "color": "b619ea", "default": false, "description": "Raspberry Pi Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "terryheo", "id": 2908505, "node_id": "MDQ6VXNlcjI5MDg1MDU=", "avatar_url": "https://avatars2.githubusercontent.com/u/2908505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/terryheo", "html_url": "https://github.com/terryheo", "followers_url": "https://api.github.com/users/terryheo/followers", "following_url": "https://api.github.com/users/terryheo/following{/other_user}", "gists_url": "https://api.github.com/users/terryheo/gists{/gist_id}", "starred_url": "https://api.github.com/users/terryheo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/terryheo/subscriptions", "organizations_url": "https://api.github.com/users/terryheo/orgs", "repos_url": "https://api.github.com/users/terryheo/repos", "events_url": "https://api.github.com/users/terryheo/events{/privacy}", "received_events_url": "https://api.github.com/users/terryheo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "terryheo", "id": 2908505, "node_id": "MDQ6VXNlcjI5MDg1MDU=", "avatar_url": "https://avatars2.githubusercontent.com/u/2908505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/terryheo", "html_url": "https://github.com/terryheo", "followers_url": "https://api.github.com/users/terryheo/followers", "following_url": "https://api.github.com/users/terryheo/following{/other_user}", "gists_url": "https://api.github.com/users/terryheo/gists{/gist_id}", "starred_url": "https://api.github.com/users/terryheo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/terryheo/subscriptions", "organizations_url": "https://api.github.com/users/terryheo/orgs", "repos_url": "https://api.github.com/users/terryheo/repos", "events_url": "https://api.github.com/users/terryheo/events{/privacy}", "received_events_url": "https://api.github.com/users/terryheo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-03-09T16:01:56Z", "updated_at": "2020-03-19T01:15:28Z", "closed_at": null, "author_association": "NONE", "body": "Are there any instructions on how to cross-compile the XNNPACK delegate for ARM?\r\n\r\n\r\nI've tried the following:\r\nexport CC=arm-linux-armeabief-gcc\r\nexport CPP=arm-linux-armeabief-g++\r\nbazel-2.1.0 build //tensorflow/lite/delegates/xnnpack:xnnpack_delegate\r\n\r\nERROR: /home/andy/.cache/bazel/_bazel_andy/ff7061ef3fb000e53210886b26774f34/external/XNNPACK/BUILD.bazel:1654:1: C++ compilation of rule '@XNNPACK//:sse2_ukernels' failed (Exit 1)\r\narm-linux-gnueabihf-gcc: error: unrecognized command line option '-msse2'\r\nTarget //tensorflow/lite/delegates/xnnpack:xnnpack_delegate failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nINFO: Elapsed time: 26.516s, Critical Path: 14.13s\r\nINFO: 28 processes: 28 local.\r\nFAILED: Build did NOT complete successfully\r\n\r\nUbuntu 14.04 \r\nBazel 2.1.0\r\nGNU 4.9.3\r\nTargeting Raspberry Pi 3B / Compute Module 3\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37446", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37446/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37446/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37446/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37446", "id": 577959264, "node_id": "MDU6SXNzdWU1Nzc5NTkyNjQ=", "number": 37446, "title": "Python crashes when computing max of a complex tensor", "user": {"login": "zaccharieramzi", "id": 6387497, "node_id": "MDQ6VXNlcjYzODc0OTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/6387497?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zaccharieramzi", "html_url": "https://github.com/zaccharieramzi", "followers_url": "https://api.github.com/users/zaccharieramzi/followers", "following_url": "https://api.github.com/users/zaccharieramzi/following{/other_user}", "gists_url": "https://api.github.com/users/zaccharieramzi/gists{/gist_id}", "starred_url": "https://api.github.com/users/zaccharieramzi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zaccharieramzi/subscriptions", "organizations_url": "https://api.github.com/users/zaccharieramzi/orgs", "repos_url": "https://api.github.com/users/zaccharieramzi/repos", "events_url": "https://api.github.com/users/zaccharieramzi/events{/privacy}", "received_events_url": "https://api.github.com/users/zaccharieramzi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2020-03-09T14:42:58Z", "updated_at": "2020-03-13T09:55:57Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04 \r\n- TensorFlow installed from (source or binary): pip\r\n- TensorFlow version (use command below): 2.1\r\n- Python version: 3.6.8\r\n\r\n**Describe the current behavior**\r\nWhen taking (by mistake) the max value of a tensor with complex dtype, tf crashes python.\r\n\r\n\r\n**Describe the expected behavior**\r\nTf should fail gracefully, i.e. throwing an error.\r\n\r\n**Standalone code to reproduce the issue** \r\n```python\r\nimport tensorflow as tf\r\ntf.reduce_max(tf.ones((9,), dtype=tf.complex64))\r\n```\r\n\r\n**Other info / logs** \r\n```\r\n2020-03-09 15:40:04.604547: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcuda.so.1'; dlerror: libcuda.so.1: cannot open shared object file: No such file or directory\r\n2020-03-09 15:40:04.604625: E tensorflow/stream_executor/cuda/cuda_driver.cc:351] failed call to cuInit: UNKNOWN ERROR (303)\r\n2020-03-09 15:40:04.604723: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:156] kernel driver does not appear to be running on this host (zaccharie-Latitude-7490): /proc/driver/nvidia/version does not exist\r\n2020-03-09 15:40:04.605857: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2020-03-09 15:40:04.645752: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2112000000 Hz\r\n2020-03-09 15:40:04.647241: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x4c32870 initialized for platform Host (this does not guarantee that XLA will be used). Devices:\r\n2020-03-09 15:40:04.647293: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version\r\n2020-03-09 15:40:04.671854: F tensorflow/compiler/xla/literal_util.cc:212] C64 element type has no minimum value\r\n[1]    23558 abort (core dumped)  ipython\r\n```\r\n\r\nI tried on machine with and without GPU for the same result.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37445", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37445/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37445/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37445/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37445", "id": 577914176, "node_id": "MDU6SXNzdWU1Nzc5MTQxNzY=", "number": 37445, "title": "Document purpose for tf.keras.preprocessing module", "user": {"login": "mjul", "id": 142868, "node_id": "MDQ6VXNlcjE0Mjg2OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/142868?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mjul", "html_url": "https://github.com/mjul", "followers_url": "https://api.github.com/users/mjul/followers", "following_url": "https://api.github.com/users/mjul/following{/other_user}", "gists_url": "https://api.github.com/users/mjul/gists{/gist_id}", "starred_url": "https://api.github.com/users/mjul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mjul/subscriptions", "organizations_url": "https://api.github.com/users/mjul/orgs", "repos_url": "https://api.github.com/users/mjul/repos", "events_url": "https://api.github.com/users/mjul/events{/privacy}", "received_events_url": "https://api.github.com/users/mjul/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-03-09T13:36:02Z", "updated_at": "2020-03-11T15:50:46Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "## URL(s) with the issue:\r\n\r\nhttps://www.tensorflow.org/api_docs/python/tf/keras/preprocessing\r\n\r\n## Description of issue (what needs changing):\r\n\r\nThe module documentation is very terse and only states that it contains \"preprocessing utils\". It does not state the specific purpose.\r\n\r\nIt would be helpful if it defined the intended use of the `tf.keras.preprocessing` module (_e.g._ to clean up or transform tf.data.Datasets before they are fed to the model).\r\n\r\nAlso, since the `tf.feature_column` module has similar functionality, it would be nice to describe when to use one or the other, or how they are intended to be used together."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37444", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37444/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37444/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37444/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37444", "id": 577901470, "node_id": "MDU6SXNzdWU1Nzc5MDE0NzA=", "number": 37444, "title": "InaccessibleTensorError in graph mode with for loop itteration (different sized tensors) ( tf.image.resize)", "user": {"login": "bela127", "id": 33230742, "node_id": "MDQ6VXNlcjMzMjMwNzQy", "avatar_url": "https://avatars1.githubusercontent.com/u/33230742?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bela127", "html_url": "https://github.com/bela127", "followers_url": "https://api.github.com/users/bela127/followers", "following_url": "https://api.github.com/users/bela127/following{/other_user}", "gists_url": "https://api.github.com/users/bela127/gists{/gist_id}", "starred_url": "https://api.github.com/users/bela127/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bela127/subscriptions", "organizations_url": "https://api.github.com/users/bela127/orgs", "repos_url": "https://api.github.com/users/bela127/repos", "events_url": "https://api.github.com/users/bela127/events{/privacy}", "received_events_url": "https://api.github.com/users/bela127/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1190546177, "node_id": "MDU6TGFiZWwxMTkwNTQ2MTc3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:autograph", "name": "comp:autograph", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-03-09T13:15:36Z", "updated_at": "2020-03-11T08:44:32Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow): custom Layer, using tf.image.resize\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04):  Linux Mint 19.3 Cinnamon (Ubuntu based)\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if\r\nthe issue happens on mobile device: No\r\n- TensorFlow installed from (source or\r\nbinary): pip install\r\n - TensorFlow version (use command below): v2.1.0-rc2-17-ge5bf8de 2.1.0\r\n- Python version: 3.6.9\r\n\r\nProblem:\r\nNot sure if its a bug, or i misused something\r\nbut i expected autograph to do a loop unrolling once, and later work with the tensors created in the unrolled loop.\r\n\r\n**Describe the current behavior**\r\nin graph mode (tf.function) InaccessibleTensorError is thrown if tf.image.resize is used in loop\r\n\r\n**Describe the expected behavior**\r\nshould work as in eager mode\r\n\r\n**Standalone code to reproduce the issue** \r\n```\r\nimport tensorflow as tf \r\n\r\ndef main():\r\n    execute_eager = False\r\n    test_nr = 2\r\n    tf.config.experimental_run_functions_eagerly(execute_eager)\r\n    \r\n    images = tf.constant(100.,shape=[1,10,10,20])\r\n    if execute_eager or test_nr == 1:\r\n        scale = Scaler1()\r\n        out = scale(images)\r\n        print(out)\r\n    if execute_eager or test_nr == 2:\r\n        scale = Scaler2()\r\n        out = scale(images)\r\n        print(out)\r\n    if execute_eager or test_nr == 3:\r\n        scale = Scaler2()\r\n        out = scale(images)\r\n        print(out)\r\n\r\nclass Scaler1(tf.keras.layers.Layer):\r\n    \r\n    def __init__(self, count = 5, name = \"Scaler\", **kwargs):\r\n        self.count = tf.cast(count, dtype = tf.float32)\r\n        super().__init__(name = name, **kwargs)\r\n        self.sized_images=[]\r\n         \r\n    @tf.function\r\n    def call(self, inputs):\r\n        images = inputs\r\n        \r\n        image_size = tf.cast(tf.shape(images)[1:3], dtype=tf.float32)\r\n                   \r\n        for i in range(int(self.count)):\r\n            scale = image_size * (1 + tf.cast(i, dtype=tf.float32))\r\n            sized_image = tf.image.resize(images, tf.cast(scale + 0.5, dtype = tf.int32))\r\n            self.sized_images.append(sized_image)\r\n        \r\n        return self.sized_images\r\n\r\nclass Scaler2(tf.keras.layers.Layer):\r\n    \r\n    def __init__(self, count = 5, name = \"Scaler\", **kwargs):\r\n        self.count = tf.cast(count, dtype = tf.float32)\r\n        super().__init__(name = name, **kwargs)\r\n        self.sized_images=[]\r\n         \r\n    @tf.function\r\n    def call(self, inputs):\r\n        images = inputs\r\n        \r\n        image_size = tf.cast(tf.shape(images)[1:3], dtype=tf.float32)\r\n                   \r\n        for i in tf.range(self.count):\r\n            scale = image_size * (1 + tf.cast(i, dtype=tf.float32))\r\n            sized_image = tf.image.resize(images, tf.cast(scale + 0.5, dtype = tf.int32))\r\n            self.sized_images.append(sized_image)\r\n        \r\n        return self.sized_images\r\n    \r\nclass Scaler3(tf.keras.layers.Layer):\r\n    \r\n    def __init__(self, count = 5, name = \"Scaler\", **kwargs):\r\n        self.count = tf.cast(count, dtype = tf.float32)\r\n        super().__init__(name = name, **kwargs)\r\n        self.sized_images=[]\r\n         \r\n    @tf.function\r\n    def call(self, inputs):\r\n        images = inputs\r\n        \r\n        image_size = tf.cast(tf.shape(images)[1:3], dtype=tf.float32)\r\n             \r\n        self.sized_images = [tf.image.resize(images, tf.cast(image_size * (1 + i) + 0.5, dtype = tf.int32)) for i in tf.range(self.count)]     \r\n        \r\n        return self.sized_images\r\n    \r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\nTraceback:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/bhb/.vscode/extensions/ms-python.python-2020.2.64397/pythonFiles/ptvsd_launcher.py\", line 48, in <module>\r\n    main(ptvsdArgs)\r\n  File \"/home/bhb/.vscode/extensions/ms-python.python-2020.2.64397/pythonFiles/lib/python/old_ptvsd/ptvsd/__main__.py\", line 432, in main\r\n    run()\r\n  File \"/home/bhb/.vscode/extensions/ms-python.python-2020.2.64397/pythonFiles/lib/python/old_ptvsd/ptvsd/__main__.py\", line 316, in run_file\r\n    runpy.run_path(target, run_name='__main__')\r\n  File \"/usr/lib/python3.6/runpy.py\", line 263, in run_path\r\n    pkg_name=pkg_name, script_name=fname)\r\n  File \"/usr/lib/python3.6/runpy.py\", line 96, in _run_module_code\r\n    mod_name, mod_spec, pkg_name, script_name)\r\n  File \"/usr/lib/python3.6/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/home/bhb/Cloud/Code/Git/3D_Person_Pose_Estimation_from_2D_Singelview_Image_Data/src/test_scaling_tensor.py\", line 83, in <module>\r\n    main()\r\n  File \"/home/bhb/Cloud/Code/Git/3D_Person_Pose_Estimation_from_2D_Singelview_Image_Data/src/test_scaling_tensor.py\", line 72, in main\r\n    out = scale(images)\r\n  File \"/home/bhb/Cloud/Code/Git/3D_Person_Pose_Estimation_from_2D_Singelview_Image_Data/src/venv/lib/python3.6/site-packages/tensorflow/python/keras/engine/base_layer.py\", line 967, in __call__\r\n    outputs = self.call(cast_inputs, *args, **kwargs)\r\n  File \"/home/bhb/Cloud/Code/Git/3D_Person_Pose_Estimation_from_2D_Singelview_Image_Data/src/venv/lib/python3.6/site-packages/tensorflow/python/eager/def_function.py\", line 579, in __call__\r\n    result = self._call(*args, **kwds)\r\n  File \"/home/bhb/Cloud/Code/Git/3D_Person_Pose_Estimation_from_2D_Singelview_Image_Data/src/venv/lib/python3.6/site-packages/tensorflow/python/eager/def_function.py\", line 626, in _call\r\n    self._initialize(args, kwds, add_initializers_to=initializers)\r\n  File \"/home/bhb/Cloud/Code/Git/3D_Person_Pose_Estimation_from_2D_Singelview_Image_Data/src/venv/lib/python3.6/site-packages/tensorflow/python/eager/def_function.py\", line 506, in _initialize\r\n    *args, **kwds))\r\n  File \"/home/bhb/Cloud/Code/Git/3D_Person_Pose_Estimation_from_2D_Singelview_Image_Data/src/venv/lib/python3.6/site-packages/tensorflow/python/eager/function.py\", line 2446, in _get_concrete_function_internal_garbage_collected\r\n    graph_function, _, _ = self._maybe_define_function(args, kwargs)\r\n  File \"/home/bhb/Cloud/Code/Git/3D_Person_Pose_Estimation_from_2D_Singelview_Image_Data/src/venv/lib/python3.6/site-packages/tensorflow/python/eager/function.py\", line 2777, in _maybe_define_function\r\n    graph_function = self._create_graph_function(args, kwargs)\r\n  File \"/home/bhb/Cloud/Code/Git/3D_Person_Pose_Estimation_from_2D_Singelview_Image_Data/src/venv/lib/python3.6/site-packages/tensorflow/python/eager/function.py\", line 2667, in _create_graph_function\r\n    capture_by_value=self._capture_by_value),\r\n  File \"/home/bhb/Cloud/Code/Git/3D_Person_Pose_Estimation_from_2D_Singelview_Image_Data/src/venv/lib/python3.6/site-packages/tensorflow/python/framework/func_graph.py\", line 986, in func_graph_from_py_func\r\n    expand_composites=True)\r\n  File \"/home/bhb/Cloud/Code/Git/3D_Person_Pose_Estimation_from_2D_Singelview_Image_Data/src/venv/lib/python3.6/site-packages/tensorflow/python/util/nest.py\", line 617, in map_structure\r\n    structure[0], [func(*x) for x in entries],\r\n  File \"/home/bhb/Cloud/Code/Git/3D_Person_Pose_Estimation_from_2D_Singelview_Image_Data/src/venv/lib/python3.6/site-packages/tensorflow/python/util/nest.py\", line 617, in <listcomp>\r\n    structure[0], [func(*x) for x in entries],\r\n  File \"/home/bhb/Cloud/Code/Git/3D_Person_Pose_Estimation_from_2D_Singelview_Image_Data/src/venv/lib/python3.6/site-packages/tensorflow/python/framework/func_graph.py\", line 945, in convert\r\n    x = deps_ctx.mark_as_return(x)\r\n  File \"/home/bhb/Cloud/Code/Git/3D_Person_Pose_Estimation_from_2D_Singelview_Image_Data/src/venv/lib/python3.6/site-packages/tensorflow/python/framework/auto_control_deps.py\", line 217, in mark_as_return\r\n    tensor = array_ops.identity(tensor)\r\n  File \"/home/bhb/Cloud/Code/Git/3D_Person_Pose_Estimation_from_2D_Singelview_Image_Data/src/venv/lib/python3.6/site-packages/tensorflow/python/util/dispatch.py\", line 180, in wrapper\r\n    return target(*args, **kwargs)\r\n  File \"/home/bhb/Cloud/Code/Git/3D_Person_Pose_Estimation_from_2D_Singelview_Image_Data/src/venv/lib/python3.6/site-packages/tensorflow/python/ops/array_ops.py\", line 282, in identity\r\n    ret = gen_array_ops.identity(input, name=name)\r\n  File \"/home/bhb/Cloud/Code/Git/3D_Person_Pose_Estimation_from_2D_Singelview_Image_Data/src/venv/lib/python3.6/site-packages/tensorflow/python/ops/gen_array_ops.py\", line 3901, in identity\r\n    \"Identity\", input=input, name=name)\r\n  File \"/home/bhb/Cloud/Code/Git/3D_Person_Pose_Estimation_from_2D_Singelview_Image_Data/src/venv/lib/python3.6/site-packages/tensorflow/python/framework/op_def_library.py\", line 744, in _apply_op_helper\r\n    attrs=attr_protos, op_def=op_def)\r\n  File \"/home/bhb/Cloud/Code/Git/3D_Person_Pose_Estimation_from_2D_Singelview_Image_Data/src/venv/lib/python3.6/site-packages/tensorflow/python/framework/func_graph.py\", line 591, in _create_op_internal\r\n    inp = self.capture(inp)\r\n  File \"/home/bhb/Cloud/Code/Git/3D_Person_Pose_Estimation_from_2D_Singelview_Image_Data/src/venv/lib/python3.6/site-packages/tensorflow/python/framework/func_graph.py\", line 641, in capture\r\n    % (tensor, tensor.graph, self))\r\ntensorflow.python.framework.errors_impl.InaccessibleTensorError: The tensor 'Tensor(\"resize/ResizeBilinear:0\", shape=(1, None, None, 20), dtype=float32)' cannot be accessed here: it is defined in another function or code block. Use return values, explicit Python locals or TensorFlow collections to access it. Defined in: FuncGraph(name=while_body_32, id=139898298208720); accessed from: FuncGraph(name=call, id=139898299444136).\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37442", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37442/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37442/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37442/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37442", "id": 577870753, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg1NTU1Mzcz", "number": 37442, "title": "support broadcast in xla_legalize_to_linalg", "user": {"login": "qqsun8819", "id": 1409644, "node_id": "MDQ6VXNlcjE0MDk2NDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1409644?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qqsun8819", "html_url": "https://github.com/qqsun8819", "followers_url": "https://api.github.com/users/qqsun8819/followers", "following_url": "https://api.github.com/users/qqsun8819/following{/other_user}", "gists_url": "https://api.github.com/users/qqsun8819/gists{/gist_id}", "starred_url": "https://api.github.com/users/qqsun8819/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qqsun8819/subscriptions", "organizations_url": "https://api.github.com/users/qqsun8819/orgs", "repos_url": "https://api.github.com/users/qqsun8819/repos", "events_url": "https://api.github.com/users/qqsun8819/events{/privacy}", "received_events_url": "https://api.github.com/users/qqsun8819/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1133285679, "node_id": "MDU6TGFiZWwxMTMzMjg1Njc5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:xla", "name": "comp:xla", "color": "0052cc", "default": false, "description": ""}, {"id": 1169365682, "node_id": "MDU6TGFiZWwxMTY5MzY1Njgy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:L", "name": "size:L", "color": "adafea", "default": false, "description": "CL Change Size: Large"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-03-09T12:32:07Z", "updated_at": "2020-03-18T08:56:21Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37442", "html_url": "https://github.com/tensorflow/tensorflow/pull/37442", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37442.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37442.patch"}, "body": "This pr is  mainly a discussion to find a suitable way which can lower implicit broadcast in hlo dialect\r\nnow, for code like:\r\n```\r\n \"xla_lhlo.add\"(%29, %14, %30) {broadcast_dimensions = dense<[]> : tensor<0xi64>} : (memref<?xi64>, memref<i64>, memref<?xi64>) -> ()\r\n```\r\ncannot be lowered in to linalg dialect in current implementation.\r\nThis pr purposed a way to transform implicit broadcast in lhlo by adding convertor in xla_legalize_to_linalg pass, that is, when constructing loop by linalg.generic, use a LoadOp to load the actually value from  scalar tensor and passed it into the block which compose the linalg.generic. This way prevents the additional  memory allocation in converting implicit broadcast to explicit broadcast , so the code above will be lowered to \r\n```\r\n %44 = load %14[] : memref<i64>\r\n    linalg.generic {args_in = 1 : i64, args_out = 1 : i64, indexing_maps = [#map0, #map0], iterator_types = [\"parallel\"]} %35, %43 {\r\n    ^bb0(%arg1: i64, %arg2: i64):   // no predecessors\r\n      %120 = addi %arg1, %44 : i64\r\n      linalg.yield %120 : i64\r\n    }: memref<?xi64>, memref<?xi64>\r\n```\r\n\r\nAlso, for shape derivation, for elementwise op, the SameShapeAsFirstOperand may be not enough for code like\r\n```\r\n   \"xla_lhlo.add\"(%21, %56, %61) {broadcast_dimensions = dense<[]> : tensor<0xi64>} : (memref<i64>, memref<?xi64>, memref<?xi64>) -> ()\r\n```\r\nbecause the first operand is scalar . For this is also a broadcast case, I extended  SameShapeAsFirstOperand to first find the first dynamic operand, and then use it as the shape as result shape .(by doing this SameShapeAsFirstOperand may be not suitable, so a new name is needed afterwards)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37441", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37441/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37441/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37441/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37441", "id": 577830288, "node_id": "MDU6SXNzdWU1Nzc4MzAyODg=", "number": 37441, "title": "ValueError: Cannot convert a Tensor of dtype resource to a NumPy array", "user": {"login": "rakeshmothukuru1", "id": 39580561, "node_id": "MDQ6VXNlcjM5NTgwNTYx", "avatar_url": "https://avatars3.githubusercontent.com/u/39580561?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rakeshmothukuru1", "html_url": "https://github.com/rakeshmothukuru1", "followers_url": "https://api.github.com/users/rakeshmothukuru1/followers", "following_url": "https://api.github.com/users/rakeshmothukuru1/following{/other_user}", "gists_url": "https://api.github.com/users/rakeshmothukuru1/gists{/gist_id}", "starred_url": "https://api.github.com/users/rakeshmothukuru1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rakeshmothukuru1/subscriptions", "organizations_url": "https://api.github.com/users/rakeshmothukuru1/orgs", "repos_url": "https://api.github.com/users/rakeshmothukuru1/repos", "events_url": "https://api.github.com/users/rakeshmothukuru1/events{/privacy}", "received_events_url": "https://api.github.com/users/rakeshmothukuru1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-03-09T11:14:20Z", "updated_at": "2020-03-16T05:07:20Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow):  Yes\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04):  N/A, as it can be reproduced in Google Colab\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if\r\nthe issue happens on mobile device:  N/A\r\n- TensorFlow installed from (source or\r\nbinary): - TensorFlow version (use command below): 2.1\r\n- Python version: - Bazel\r\nversion (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from\r\nsource): N/A\r\n- CUDA/cuDNN version: - GPU model and memory: N/A\r\n\r\n**Describe the current behavior**: It is resulting in Error, `InvalidArgumentError: Cannot convert a Tensor of dtype resource to a NumPy array.`, while running the First Code but is working fine when `tf.keras.Input` is replaced with `tf.Variable` in the Second Code.\r\n\r\n**Describe the expected behavior**: Code should work fine with `tf.keras.Input` as well\r\n\r\n**Standalone code to reproduce the issue** \r\n\r\n      **Code with Error:**\r\n\r\nimport tensorflow as tf\r\n\r\nnum_uids = 50\r\n#input_uid = tf.keras.layers.Input(shape=(1,), dtype=tf.int32, batch_size = 32)\r\ninput_uid = tf.keras.layers.Input(shape=(1,), dtype=tf.int32)\r\nparams = tf.Variable(tf.random.normal((num_uids, 9)), trainable=True)\r\n\r\nparam = tf.gather_nd(params, input_uid)\r\n\r\n#input_shared_features = tf.keras.layers.Input(shape=(128,), dtype=tf.float32, batch_size = 32)\r\ninput_shared_features = tf.keras.layers.Input(shape=(128,), dtype=tf.float32)\r\ncombined = tf.concat([param, input_shared_features], axis=-1)\r\n\r\nnet = tf.keras.layers.Dense(128)(combined)\r\n\r\n      **Working Code:**\r\n\r\nimport tensorflow as tf\r\n\r\nnum_uids = 50\r\ninput_uid = tf.Variable(tf.ones((32, 1), dtype=tf.int32))\r\nparams = tf.Variable(tf.random.normal((num_uids, 9)), trainable=True)\r\n\r\nparam = tf.gather_nd(params, input_uid)\r\n\r\ninput_shared_features = tf.Variable(tf.ones((32, 128), dtype=tf.float32))\r\ncombined = tf.concat([param, input_shared_features], axis=-1)\r\n\r\nnet = tf.keras.layers.Dense(128)(combined)\r\n\r\nPlease find the [Github Gist](https://colab.sandbox.google.com/gist/rmothukuru/b3427c06cab54beed19a381339c932e0/so_59962509.ipynb).\r\n\r\nThere is a [Stack Overflow Question](https://stackoverflow.com/questions/59962509/valueerror-cannot-convert-a-tensor-of-dtype-resource-to-a-numpy-array) also, associated with this issue."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37440", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37440/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37440/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37440/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37440", "id": 577821666, "node_id": "MDU6SXNzdWU1Nzc4MjE2NjY=", "number": 37440, "title": "AutoGraph error with FOR loop in Keras loss", "user": {"login": "evgal", "id": 37838270, "node_id": "MDQ6VXNlcjM3ODM4Mjcw", "avatar_url": "https://avatars2.githubusercontent.com/u/37838270?v=4", "gravatar_id": "", "url": "https://api.github.com/users/evgal", "html_url": "https://github.com/evgal", "followers_url": "https://api.github.com/users/evgal/followers", "following_url": "https://api.github.com/users/evgal/following{/other_user}", "gists_url": "https://api.github.com/users/evgal/gists{/gist_id}", "starred_url": "https://api.github.com/users/evgal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/evgal/subscriptions", "organizations_url": "https://api.github.com/users/evgal/orgs", "repos_url": "https://api.github.com/users/evgal/repos", "events_url": "https://api.github.com/users/evgal/events{/privacy}", "received_events_url": "https://api.github.com/users/evgal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1190546177, "node_id": "MDU6TGFiZWwxMTkwNTQ2MTc3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:autograph", "name": "comp:autograph", "color": "0052cc", "default": false, "description": ""}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2020-03-09T10:57:07Z", "updated_at": "2020-03-12T18:30:30Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10, x64\r\n- TensorFlow installed from (source or binary): Binary (pip)\r\n- TensorFlow version (use command below): TF 2.1.0 as well as TF 2.2.0 (2.2.0.dev20200304)\r\n- Python version: 3.7\r\n- CUDA/cuDNN version: 10.1 / 7.6\r\n- GPU model and memory: Bug appears on several computers with different GPU\r\n\r\n**Describe the current behavior**\r\n\r\nError \"**tensorflow.python.framework.errors_impl.OperatorNotAllowedInGraphError: iterating over `tf.Tensor` is not allowed in Graph execution. Use Eager execution or decorate this function with @tf.function.**\" when using a FOR loop over a Tensor dimension in a custom Keras loss in AutoGraph mode.\r\n\r\nNotice that when running eagerly, the bug does not appear. \r\nNotice also that using a similar FOR loop in a custom Keras model works both in AutoGraph and Eager modes. The bug is specific to Keras Loss.\r\nAs expected, replacing the loop with a call to tf.map_fn works correctly.\r\n\r\n**Describe the expected behavior**\r\n\r\nThe behavior should be the same as running eagerly, without any error.\r\n\r\n**Standalone code to reproduce the issue** \r\n\r\n```\r\nimport numpy as np\r\nimport tensorflow as tf\r\nfrom tensorflow import keras\r\nfrom tensorflow.keras import layers\r\n\r\n# Custom loss with a FOR loop. Raises an error in AutoGraph mode. \r\n# A similar FOR loop in a Keras model works as expected.\r\nclass CustomLoss(keras.losses.Loss):\r\n\tdef call(self, y_true, y_pred):\r\n\t\tx = y_true + y_pred\r\n\t\tfor i in tf.range(tf.shape(y_true)[0]): # The error is reaised here.\r\n\t\t\tx += 1\r\n\t\treturn tf.reduce_mean(x)\r\n\r\nif __name__ == \"__main__\" :\r\n\tdata = np.random.random((1000, 3)).astype(np.float32)\r\n\t\r\n\tinputs = tf.keras.Input(shape=(1000,3))\r\n\toutputs = tf.keras.layers.Dense(3)(inputs)\r\n\tmodel = tf.keras.Model(inputs=inputs, outputs=outputs)\r\n\t\r\n\tmodel.compile(loss=CustomLoss()) # does NOT work\r\n\t# model.compile(loss=CustomLoss(), run_eagerly = True) # works\r\n\t\r\n\tmodel.fit(x=data, y=data)\r\n```\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n\r\nLog in attachment.\r\n[log.txt](https://github.com/tensorflow/tensorflow/files/4306163/log.txt)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37438", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37438/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37438/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37438/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37438", "id": 577781541, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg1NDg0MzE3", "number": 37438, "title": "Minor refactoring and robust mode check for imagenet_utils.py", "user": {"login": "jaketae", "id": 25360440, "node_id": "MDQ6VXNlcjI1MzYwNDQw", "avatar_url": "https://avatars1.githubusercontent.com/u/25360440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaketae", "html_url": "https://github.com/jaketae", "followers_url": "https://api.github.com/users/jaketae/followers", "following_url": "https://api.github.com/users/jaketae/following{/other_user}", "gists_url": "https://api.github.com/users/jaketae/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaketae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaketae/subscriptions", "organizations_url": "https://api.github.com/users/jaketae/orgs", "repos_url": "https://api.github.com/users/jaketae/repos", "events_url": "https://api.github.com/users/jaketae/events{/privacy}", "received_events_url": "https://api.github.com/users/jaketae/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-03-09T09:51:06Z", "updated_at": "2020-03-19T17:02:50Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37438", "html_url": "https://github.com/tensorflow/tensorflow/pull/37438", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37438.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37438.patch"}, "body": "Minor refactoring of code for better readability of conditional statements (using `elif` instead of multiple `if`s if the statements check for conditions on the same object). Also added robust `mode` argument check to prevent silent failure."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37433", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37433/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37433/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37433/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37433", "id": 577708280, "node_id": "MDU6SXNzdWU1Nzc3MDgyODA=", "number": 37433, "title": "ERROR : I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cudart64_101.dll", "user": {"login": "PreVizsla", "id": 27261704, "node_id": "MDQ6VXNlcjI3MjYxNzA0", "avatar_url": "https://avatars3.githubusercontent.com/u/27261704?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PreVizsla", "html_url": "https://github.com/PreVizsla", "followers_url": "https://api.github.com/users/PreVizsla/followers", "following_url": "https://api.github.com/users/PreVizsla/following{/other_user}", "gists_url": "https://api.github.com/users/PreVizsla/gists{/gist_id}", "starred_url": "https://api.github.com/users/PreVizsla/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PreVizsla/subscriptions", "organizations_url": "https://api.github.com/users/PreVizsla/orgs", "repos_url": "https://api.github.com/users/PreVizsla/repos", "events_url": "https://api.github.com/users/PreVizsla/events{/privacy}", "received_events_url": "https://api.github.com/users/PreVizsla/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-03-09T07:29:38Z", "updated_at": "2020-03-13T10:29:41Z", "closed_at": null, "author_association": "NONE", "body": "I've been trying to import tensorflow, downloading Anaconda 3, creating virtual environment, use pip install tensorflow, pip install keras and when I try to import tensorflow an error occured  \"Failed to load the native TensorFlow runtime.\" then I tried to resolve it by downloading cygwin to update the gcc. After that, another error occured \r\n\r\n2020-01-21 16:18:17.197417: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'cudart64_101.dll'; dlerror: cudart64_101.dll not found\r\n2020-01-21 16:18:17.197832: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.\r\n\r\nTried to solve it by downloading CUDA 10.1 version and now the problem is\r\n\r\n2020-03-09 14:17:07.528838: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cudart64_101.dll\r\n\r\nThis is a problem because after that all process finished with exit code 1 and print('test') cannot even be processed after this.\r\n\r\nSystem information:\r\nAnaconda 3\r\nWindows 10\r\nTensorflow 2.1\r\nInteil Core I5\r\nGtx 1050 ti\r\nCUDA version 10.1\r\npython version 3.6.1\r\n\r\n\r\nDescribe the problem\r\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\r\n\r\nThe errors when I try to import tensorflow:\r\n2020-03-09 14:17:07.528838: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cudart64_101.dll\r\nTraceback (most recent call last):\r\n  File \"C:/Users/User/PycharmProjects/tensortest/test.py\", line 1, in <module>\r\n    import tensorflow\r\n  File \"C:\\Users\\User\\Anaconda3\\envs\\tensortest\\lib\\site-packages\\tensorflow\\__init__.py\", line 101, in <module>\r\n    from tensorflow_core import *\r\n  File \"C:\\Users\\User\\Anaconda3\\envs\\tensortest\\lib\\site-packages\\tensorflow_core\\__init__.py\", line 46, in <module>\r\n    from . _api.v2 import compat\r\n  File \"C:\\Users\\User\\Anaconda3\\envs\\tensortest\\lib\\site-packages\\tensorflow_core\\_api\\v2\\compat\\__init__.py\", line 39, in <module>\r\n    from . import v1\r\n  File \"C:\\Users\\User\\Anaconda3\\envs\\tensortest\\lib\\site-packages\\tensorflow_core\\_api\\v2\\compat\\v1\\__init__.py\", line 32, in <module>\r\n    from . import compat\r\n  File \"C:\\Users\\User\\Anaconda3\\envs\\tensortest\\lib\\site-packages\\tensorflow_core\\_api\\v2\\compat\\v1\\compat\\__init__.py\", line 39, in <module>\r\n    from . import v1\r\n  File \"C:\\Users\\User\\Anaconda3\\envs\\tensortest\\lib\\site-packages\\tensorflow_core\\_api\\v2\\compat\\v1\\compat\\v1\\__init__.py\", line 29, in <module>\r\n    from tensorflow._api.v2.compat.v1 import app\r\n  File \"C:\\Users\\User\\Anaconda3\\envs\\tensortest\\lib\\site-packages\\tensorflow_core\\_api\\v2\\compat\\__init__.py\", line 39, in <module>\r\n    from . import v1\r\n  File \"C:\\Users\\User\\Anaconda3\\envs\\tensortest\\lib\\site-packages\\tensorflow_core\\_api\\v2\\compat\\v1\\__init__.py\", line 32, in <module>\r\n    from . import compat\r\n  File \"C:\\Users\\User\\Anaconda3\\envs\\tensortest\\lib\\site-packages\\tensorflow_core\\_api\\v2\\compat\\v1\\compat\\__init__.py\", line 40, in <module>\r\n    from . import v2\r\n  File \"C:\\Users\\User\\Anaconda3\\envs\\tensortest\\lib\\site-packages\\tensorflow_core\\_api\\v2\\compat\\v1\\compat\\v2\\__init__.py\", line 30, in <module>\r\n    from tensorflow._api.v2.compat.v2 import audio\r\n  File \"C:\\Users\\User\\Anaconda3\\envs\\tensortest\\lib\\site-packages\\tensorflow_core\\_api\\v2\\compat\\v2\\__init__.py\", line 33, in <module>\r\n    from . import compat\r\n  File \"C:\\Users\\User\\Anaconda3\\envs\\tensortest\\lib\\site-packages\\tensorflow_core\\_api\\v2\\compat\\v2\\compat\\__init__.py\", line 40, in <module>\r\n    from . import v2\r\n  File \"C:\\Users\\User\\Anaconda3\\envs\\tensortest\\lib\\site-packages\\tensorflow_core\\_api\\v2\\compat\\v2\\compat\\v2\\__init__.py\", line 320, in <module>\r\n    from tensorboard.summary._tf import summary\r\n  File \"C:\\Users\\User\\Anaconda3\\envs\\tensortest\\lib\\site-packages\\tensorboard\\summary\\__init__.py\", line 31, in <module>\r\n    from tensorboard.summary import v2\r\n  File \"C:\\Users\\User\\Anaconda3\\envs\\tensortest\\lib\\site-packages\\tensorboard\\summary\\v2.py\", line 24, in <module>\r\n    from tensorboard.plugins.audio.summary_v2 import audio\r\n  File \"C:\\Users\\User\\Anaconda3\\envs\\tensortest\\lib\\site-packages\\tensorboard\\plugins\\audio\\summary_v2.py\", line 30, in <module>\r\n    from tensorboard.compat import tf2 as tf\r\n  File \"C:\\Users\\User\\Anaconda3\\envs\\tensortest\\lib\\site-packages\\tensorboard\\compat\\__init__.py\", line 28, in <module>\r\n    import tensorboard.lazy as _lazy\r\nAttributeError: module 'tensorboard' has no attribute 'lazy'\r\n\r\nProcess finished with exit code 1\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37432", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37432/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37432/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37432/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37432", "id": 577694852, "node_id": "MDU6SXNzdWU1Nzc2OTQ4NTI=", "number": 37432, "title": "Encountered unresolved custom op: BatchMatMulV2.", "user": {"login": "GyanendroKh", "id": 16163526, "node_id": "MDQ6VXNlcjE2MTYzNTI2", "avatar_url": "https://avatars3.githubusercontent.com/u/16163526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GyanendroKh", "html_url": "https://github.com/GyanendroKh", "followers_url": "https://api.github.com/users/GyanendroKh/followers", "following_url": "https://api.github.com/users/GyanendroKh/following{/other_user}", "gists_url": "https://api.github.com/users/GyanendroKh/gists{/gist_id}", "starred_url": "https://api.github.com/users/GyanendroKh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GyanendroKh/subscriptions", "organizations_url": "https://api.github.com/users/GyanendroKh/orgs", "repos_url": "https://api.github.com/users/GyanendroKh/repos", "events_url": "https://api.github.com/users/GyanendroKh/events{/privacy}", "received_events_url": "https://api.github.com/users/GyanendroKh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "talumbau", "id": 1891418, "node_id": "MDQ6VXNlcjE4OTE0MTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1891418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/talumbau", "html_url": "https://github.com/talumbau", "followers_url": "https://api.github.com/users/talumbau/followers", "following_url": "https://api.github.com/users/talumbau/following{/other_user}", "gists_url": "https://api.github.com/users/talumbau/gists{/gist_id}", "starred_url": "https://api.github.com/users/talumbau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/talumbau/subscriptions", "organizations_url": "https://api.github.com/users/talumbau/orgs", "repos_url": "https://api.github.com/users/talumbau/repos", "events_url": "https://api.github.com/users/talumbau/events{/privacy}", "received_events_url": "https://api.github.com/users/talumbau/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "talumbau", "id": 1891418, "node_id": "MDQ6VXNlcjE4OTE0MTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/1891418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/talumbau", "html_url": "https://github.com/talumbau", "followers_url": "https://api.github.com/users/talumbau/followers", "following_url": "https://api.github.com/users/talumbau/following{/other_user}", "gists_url": "https://api.github.com/users/talumbau/gists{/gist_id}", "starred_url": "https://api.github.com/users/talumbau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/talumbau/subscriptions", "organizations_url": "https://api.github.com/users/talumbau/orgs", "repos_url": "https://api.github.com/users/talumbau/repos", "events_url": "https://api.github.com/users/talumbau/events{/privacy}", "received_events_url": "https://api.github.com/users/talumbau/received_events", "type": "User", "site_admin": false}, {"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-03-09T06:52:56Z", "updated_at": "2020-03-12T21:35:28Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (Pop!_OS 19.10):\r\n- TensorFlow installed from (source or binary):python3 -m pip install\r\n- TensorFlow version - 2.2.0-dev20200308\r\n- TensorFlowLite version [0.0.0-nightly](https://bintray.com/google/tensorflow/tensorflow-lite/0.0.0-nightly#)\r\n\r\nI was trying to convert a Transformer model to TfLite. It converted successfully with Python using the `converter.experimental_new_converter = True` and `converter.allow_custom_ops = True` but can't run it on android.\r\n\r\n\r\n**Provide the text output from tflite_convert**\r\n\r\n```\r\njava.lang.IllegalArgumentException: Internal error: Failed to run on the given Interpreter: Encountered unresolved custom op: BatchMatMulV2.\r\n2020-03-09 12:09:21.727 6025-6025/com.meiteimayek.transformertest W/System.err: Node number 31 (BatchMatMulV2) failed to prepare.\r\n2020-03-09 12:09:21.727 6025-6025/com.meiteimayek.transformertest W/System.err:     at org.tensorflow.lite.NativeInterpreterWrapper.run(Native Method)\r\n2020-03-09 12:09:21.727 6025-6025/com.meiteimayek.transformertest W/System.err:     at org.tensorflow.lite.NativeInterpreterWrapper.run(NativeInterpreterWrapper.java:152)\r\n2020-03-09 12:09:21.727 6025-6025/com.meiteimayek.transformertest W/System.err:     at org.tensorflow.lite.Interpreter.runForMultipleInputsOutputs(Interpreter.java:296)\r\n```\r\n\r\n**Standalone code to reproduce the issue** \r\n```java\r\n\r\nimport android.app.Activity;\r\nimport android.content.res.AssetFileDescriptor;\r\nimport android.util.ArrayMap;\r\nimport android.util.Log;\r\n\r\nimport org.tensorflow.lite.Interpreter;\r\n\r\nimport java.io.FileInputStream;\r\nimport java.io.IOException;\r\nimport java.nio.ByteBuffer;\r\nimport java.nio.ByteOrder;\r\nimport java.nio.MappedByteBuffer;\r\nimport java.nio.channels.FileChannel;\r\nimport java.util.Arrays;\r\nimport java.util.Map;\r\n\r\npublic class Model {\r\n  \r\n  private Interpreter mInterpreter;\r\n  \r\n  public Model(Activity activity) throws IOException {\r\n    float[] inp = {4, 25,  7, 25, 14, 15, 18, 20,  7,  5,  0,  0,  0,  0,  0,  0,  0,\r\n      0,  0,  0,  0,  0,  0,  0};\r\n    \r\n    String name = \"model.tflite\";\r\n    ByteBuffer input = ByteBuffer.allocate(4 * 24);\r\n    ByteBuffer oInput = ByteBuffer.allocate(4 * 23);\r\n    \r\n    input.order(ByteOrder.nativeOrder());\r\n    oInput.order(ByteOrder.nativeOrder());\r\n    \r\n  \r\n    for(float v : inp) {\r\n      input.putFloat(v);\r\n    }\r\n    float[] predicted = new float[1];\r\n    \r\n    oInput.putFloat(1);\r\n    for(int i = 1; i < 23; i++) {\r\n      oInput.putFloat(0);\r\n    }\r\n    Interpreter.Options op = new Interpreter.Options();\r\n    \r\n    mInterpreter = new Interpreter(getModel(activity, name), op);\r\n\r\n    Map<Integer, Object> result = new ArrayMap<>();\r\n    result.put(0, predicted);\r\n    mInterpreter.runForMultipleInputsOutputs(new ByteBuffer[]{input, oInput}, result);\r\n    Log.d(\"TAG\", \"Model: Output \" + Arrays.toString((float[])result.get(0)));\r\n  }\r\n  \r\n  private MappedByteBuffer getModel(Activity activity, String name) throws IOException {\r\n    AssetFileDescriptor f = activity.getAssets().openFd(name);\r\n    return new FileInputStream(f.getFileDescriptor())\r\n      .getChannel()\r\n      .map(FileChannel.MapMode.READ_ONLY, f.getStartOffset(), f.getDeclaredLength());\r\n  }\r\n}\r\n\r\n```\r\n\r\nTFlite Model Link - https://drive.google.com/open?id=1URF3USAEkOFaKCCOB7ctl_b2FxTVDWPx\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37430", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37430/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37430/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37430/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37430", "id": 577678228, "node_id": "MDU6SXNzdWU1Nzc2NzgyMjg=", "number": 37430, "title": "MKL Error on Bazel 2.0 (TensorFlow 2.1 latest - nightly)", "user": {"login": "Expert73", "id": 25880366, "node_id": "MDQ6VXNlcjI1ODgwMzY2", "avatar_url": "https://avatars1.githubusercontent.com/u/25880366?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Expert73", "html_url": "https://github.com/Expert73", "followers_url": "https://api.github.com/users/Expert73/followers", "following_url": "https://api.github.com/users/Expert73/following{/other_user}", "gists_url": "https://api.github.com/users/Expert73/gists{/gist_id}", "starred_url": "https://api.github.com/users/Expert73/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Expert73/subscriptions", "organizations_url": "https://api.github.com/users/Expert73/orgs", "repos_url": "https://api.github.com/users/Expert73/repos", "events_url": "https://api.github.com/users/Expert73/events{/privacy}", "received_events_url": "https://api.github.com/users/Expert73/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1104829434, "node_id": "MDU6TGFiZWwxMTA0ODI5NDM0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:mkl", "name": "comp:mkl", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-03-09T06:00:09Z", "updated_at": "2020-03-14T10:32:43Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): windows 10 x64 18363.693\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: no\r\n- TensorFlow installed from (source or binary): from git\r\n- TensorFlow version: TF 2.1 latest version\r\n- Python version: 3.7/3.8\r\n- Installed using virtualenv? pip? conda?: no\r\n- Bazel version (if compiling from source): 2.0.0\r\n- GCC/Compiler version (if compiling from source): VS 2019\r\n- CUDA/cuDNN version: 10.2\r\n- GPU model and memory: Nvidia 1070 ti\r\n\r\n\r\n\r\n**Describe the problem**\r\nAt the initial stage of the build, an error appears.\r\n\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\BuildTools\\VC\\Tools\\MSVC\\14.24.28314\\include\\xtr1common(163): note: see reference to class template instantiation 'std::integral_constant<bool,false>' being compiled\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\BuildTools\\VC\\Tools\\MSVC\\14.24.28314\\include\\xtr1common(163): note: see reference to class template instantiation 'std::disjunction<_Traits...>' being compiled\r\nERROR: C:/tensorflow/tensorflow/core/kernels/BUILD:8128:1: C++ compilation of rule '//tensorflow/core/kernels:mkl_aggregate_ops' failed (Exit 2)\r\n.\\tensorflow/core/util/mkl_util.h(1253): error C2131: expression did not evaluate to a constant\r\n.\\tensorflow/core/util/mkl_util.h(1252): note: failure was caused by a read of a variable outside its lifetime\r\n.\\tensorflow/core/util/mkl_util.h(1252): note: see usage of 'dim'\r\n.\\tensorflow/core/util/mkl_util.h(1254): error C2131: expression did not evaluate to a constant\r\n.\\tensorflow/core/util/mkl_util.h(1252): note: failure was caused by a read of a variable outside its lifetime\r\n.\\tensorflow/core/util/mkl_util.h(1252): note: see usage of 'dim'\r\n.\\tensorflow/core/util/mkl_util.h(1256): error C3863: array type 'dnnl_dim_t [kNumDims]' is not assignable\r\n.\\tensorflow/core/util/mkl_util.h(1257): error C3863: array type 'dnnl_dim_t [kNumDims]' is not assignable\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nINFO: Elapsed time: 2448.446s, Critical Path: 179.48s\r\nINFO: 4686 processes: 4686 local.\r\nFAILED: Build did NOT complete successfully\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37428", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37428/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37428/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37428/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37428", "id": 577569119, "node_id": "MDU6SXNzdWU1Nzc1NjkxMTk=", "number": 37428, "title": "tf.Graph.get_tensor_by_name does not work as expected in TF2", "user": {"login": "stephenhermes", "id": 40531775, "node_id": "MDQ6VXNlcjQwNTMxNzc1", "avatar_url": "https://avatars2.githubusercontent.com/u/40531775?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stephenhermes", "html_url": "https://github.com/stephenhermes", "followers_url": "https://api.github.com/users/stephenhermes/followers", "following_url": "https://api.github.com/users/stephenhermes/following{/other_user}", "gists_url": "https://api.github.com/users/stephenhermes/gists{/gist_id}", "starred_url": "https://api.github.com/users/stephenhermes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stephenhermes/subscriptions", "organizations_url": "https://api.github.com/users/stephenhermes/orgs", "repos_url": "https://api.github.com/users/stephenhermes/repos", "events_url": "https://api.github.com/users/stephenhermes/events{/privacy}", "received_events_url": "https://api.github.com/users/stephenhermes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2020-03-08T21:27:55Z", "updated_at": "2020-03-18T10:59:57Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code: yes\r\n- OS Platform and Distribution: Max OSX 10.15.3 (Catalina) \r\n- Mobile device: N/A\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: v2.1.0-rc2-17-ge5bf8de410 2.1.0\r\n- Python version: 3.7.6\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source):  N/A\r\n- CUDA/cuDNN version: - GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\n`tf.Graph.get_tensor_by_name` returns 'resource' dtype tensors, which do not evaluate as expected in a session. For example, the code below will return something like:\r\n\r\n```\r\narray([( 10,), ( 44,), ( 47,), (106,), (111,), ( 98,), ( 58,), (108,),\r\n       (111,), ( 99,), ( 97,), (108,), (104,), (111,), (115,), (116,),\r\n       ( 47,), (114,), (101,), (112,), (108,), (105,), ( 99,), ( 97,),\r\n       ( 58,), ( 48,), ( 47,), (116,), ( 97,), (115,), (107,), ( 58,),\r\n       ( 48,), ( 47,), (100,), (101,), (118,), (105,), ( 99,), (101,),\r\n       ( 58,), ( 67,), ( 80,), ( 85,), ( 58,), ( 48,), ( 18,), (  9,),\r\n       (108,), (111,), ( 99,), ( 97,), (108,), (104,), (111,), (115,),\r\n       (116,), ( 26,), (  1,), (120,), ( 32,), (224,), (167,), (192,),\r\n       (135,), ( 18,), ( 42,), ( 18,), ( 78,), ( 49,), ( 48,), (116,),\r\n       (101,), (110,), (115,), (111,), (114,), (102,), (108,), (111,),\r\n       (119,), ( 51,), ( 86,), ( 97,), (114,), ( 69,), ( 50,), (  4,),\r\n       (  8,), (  3,), ( 18,), (  0,)], dtype=[('resource', 'u1')])\r\n```\r\n\r\n**Describe the expected behavior**\r\nExpect v1 compatible code to work as it does in TF1.X. In particular, the code below should return `3`.\r\n\r\n**Standalone code to reproduce the issue** \r\n```python\r\nimport tensorflow.compat.v1 as tf\r\ntf.disable_eager_execution()\r\nx = tf.Variable(3, name='x')\r\ny = tf.get_default_graph().get_tensor_by_name('x:0')\r\nwith tf.Session() as sess:\r\n  sess.run(y)\r\n```\r\n\r\n**Other info / logs** \r\n- When instantiating a `tf.Variable`:\r\n ```\r\nWARNING:tensorflow:From /Users/shermes/Projects/tensorflow/venv2/lib/python3.7/site-packages/tensorflow_core/python/ops/resource_variable_ops.py:1635: calling BaseResourceVariable.__init__ (from tensorflow.python.ops.resource_variable_ops) with constraint is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nIf using Keras pass *_constraint arguments to layers.\r\n```\r\n- From `sess.run` block: \r\n```\r\n/Users/shermes/Projects/tensorflow/venv2/lib/python3.7/site-packages/tensorflow_core/python/client/session.py:1445: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.\r\n```\r\n(This error shows up when using numpy 1.16 as well as 1.17 and 1.18.)\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37427", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37427/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37427/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37427/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37427", "id": 577557888, "node_id": "MDU6SXNzdWU1Nzc1NTc4ODg=", "number": 37427, "title": "Add logging to intermediate layers in TFLite", "user": {"login": "chiraag", "id": 1707899, "node_id": "MDQ6VXNlcjE3MDc4OTk=", "avatar_url": "https://avatars1.githubusercontent.com/u/1707899?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chiraag", "html_url": "https://github.com/chiraag", "followers_url": "https://api.github.com/users/chiraag/followers", "following_url": "https://api.github.com/users/chiraag/following{/other_user}", "gists_url": "https://api.github.com/users/chiraag/gists{/gist_id}", "starred_url": "https://api.github.com/users/chiraag/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chiraag/subscriptions", "organizations_url": "https://api.github.com/users/chiraag/orgs", "repos_url": "https://api.github.com/users/chiraag/repos", "events_url": "https://api.github.com/users/chiraag/events{/privacy}", "received_events_url": "https://api.github.com/users/chiraag/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-03-08T20:09:40Z", "updated_at": "2020-03-10T16:53:30Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.15\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nCurrently tflite reuses memory for intermediate to limit its memory footprint on resource constrained devices as discussed [here](https://stackoverflow.com/questions/56885007/visualize-tflite-graph-and-get-intermediate-values-of-a-particular-node). This makes it hard to debug to what is happening at the intermediate layers on the final hardware (especially when using a delegate). The proposal is to add logging functionality to enable visibility into these intermediate layers.\r\n\r\n**Will this change the current api? How?**\r\nA candidate proposal is to add an api function to mark all/selected operation outputs as model outputs and then allow them to be inspected in the python interpreter.\r\n\r\n**Who will benefit with this feature?**\r\nAny developer trying to debug what is happening on an embedded tflite implementation\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37425", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37425/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37425/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37425/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37425", "id": 577528091, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg1Mjg2NTc4", "number": 37425, "title": "extending 'tf.keras.Model.evaluate' API to permit using class_weight directly.", "user": {"login": "ayushmankumar7", "id": 41910134, "node_id": "MDQ6VXNlcjQxOTEwMTM0", "avatar_url": "https://avatars0.githubusercontent.com/u/41910134?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ayushmankumar7", "html_url": "https://github.com/ayushmankumar7", "followers_url": "https://api.github.com/users/ayushmankumar7/followers", "following_url": "https://api.github.com/users/ayushmankumar7/following{/other_user}", "gists_url": "https://api.github.com/users/ayushmankumar7/gists{/gist_id}", "starred_url": "https://api.github.com/users/ayushmankumar7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ayushmankumar7/subscriptions", "organizations_url": "https://api.github.com/users/ayushmankumar7/orgs", "repos_url": "https://api.github.com/users/ayushmankumar7/repos", "events_url": "https://api.github.com/users/ayushmankumar7/events{/privacy}", "received_events_url": "https://api.github.com/users/ayushmankumar7/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1178505529, "node_id": "MDU6TGFiZWwxMTc4NTA1NTI5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/prtype:bugfix", "name": "prtype:bugfix", "color": "159b2e", "default": false, "description": "PR to fix a bug"}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-03-08T16:36:43Z", "updated_at": "2020-03-16T12:22:31Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37425", "html_url": "https://github.com/tensorflow/tensorflow/pull/37425", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37425.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37425.patch"}, "body": "Issue : #35825 "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37424", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37424/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37424/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37424/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37424", "id": 577519229, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg1MjgwMDk4", "number": 37424, "title": "Fix typo for lite/micro/examples/person_detection/training_a_model.md", "user": {"login": "floriandonhauser", "id": 35968719, "node_id": "MDQ6VXNlcjM1OTY4NzE5", "avatar_url": "https://avatars1.githubusercontent.com/u/35968719?v=4", "gravatar_id": "", "url": "https://api.github.com/users/floriandonhauser", "html_url": "https://github.com/floriandonhauser", "followers_url": "https://api.github.com/users/floriandonhauser/followers", "following_url": "https://api.github.com/users/floriandonhauser/following{/other_user}", "gists_url": "https://api.github.com/users/floriandonhauser/gists{/gist_id}", "starred_url": "https://api.github.com/users/floriandonhauser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/floriandonhauser/subscriptions", "organizations_url": "https://api.github.com/users/floriandonhauser/orgs", "repos_url": "https://api.github.com/users/floriandonhauser/repos", "events_url": "https://api.github.com/users/floriandonhauser/events{/privacy}", "received_events_url": "https://api.github.com/users/floriandonhauser/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1589976566, "node_id": "MDU6TGFiZWwxNTg5OTc2NTY2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:micro", "name": "comp:micro", "color": "3e2eea", "default": false, "description": "Related to TensorFlow Lite Microcontrollers"}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-03-08T15:34:53Z", "updated_at": "2020-03-16T12:21:53Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37424", "html_url": "https://github.com/tensorflow/tensorflow/pull/37424", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37424.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37424.patch"}, "body": "Missing backslash, just a typo"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37422", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37422/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37422/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37422/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37422", "id": 577510424, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg1MjczNzg3", "number": 37422, "title": "Specify python versio via build arg PYTHON_VERSION", "user": {"login": "ysgit", "id": 898918, "node_id": "MDQ6VXNlcjg5ODkxOA==", "avatar_url": "https://avatars2.githubusercontent.com/u/898918?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ysgit", "html_url": "https://github.com/ysgit", "followers_url": "https://api.github.com/users/ysgit/followers", "following_url": "https://api.github.com/users/ysgit/following{/other_user}", "gists_url": "https://api.github.com/users/ysgit/gists{/gist_id}", "starred_url": "https://api.github.com/users/ysgit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ysgit/subscriptions", "organizations_url": "https://api.github.com/users/ysgit/orgs", "repos_url": "https://api.github.com/users/ysgit/repos", "events_url": "https://api.github.com/users/ysgit/events{/privacy}", "received_events_url": "https://api.github.com/users/ysgit/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1178505529, "node_id": "MDU6TGFiZWwxMTc4NTA1NTI5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/prtype:bugfix", "name": "prtype:bugfix", "color": "159b2e", "default": false, "description": "PR to fix a bug"}, {"id": 1169365682, "node_id": "MDU6TGFiZWwxMTY5MzY1Njgy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:L", "name": "size:L", "color": "adafea", "default": false, "description": "CL Change Size: Large"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-03-08T14:37:19Z", "updated_at": "2020-03-16T13:53:01Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37422", "html_url": "https://github.com/tensorflow/tensorflow/pull/37422", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37422.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37422.patch"}, "body": "Allow python version to be specified as requested in #25939 "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37415", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37415/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37415/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37415/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37415", "id": 577337856, "node_id": "MDU6SXNzdWU1NzczMzc4NTY=", "number": 37415, "title": "Tensorflow2.0 is not supporting this code", "user": {"login": "frytry", "id": 45181738, "node_id": "MDQ6VXNlcjQ1MTgxNzM4", "avatar_url": "https://avatars0.githubusercontent.com/u/45181738?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frytry", "html_url": "https://github.com/frytry", "followers_url": "https://api.github.com/users/frytry/followers", "following_url": "https://api.github.com/users/frytry/following{/other_user}", "gists_url": "https://api.github.com/users/frytry/gists{/gist_id}", "starred_url": "https://api.github.com/users/frytry/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frytry/subscriptions", "organizations_url": "https://api.github.com/users/frytry/orgs", "repos_url": "https://api.github.com/users/frytry/repos", "events_url": "https://api.github.com/users/frytry/events{/privacy}", "received_events_url": "https://api.github.com/users/frytry/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "Saduf2019", "id": 59822926, "node_id": "MDQ6VXNlcjU5ODIyOTI2", "avatar_url": "https://avatars2.githubusercontent.com/u/59822926?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Saduf2019", "html_url": "https://github.com/Saduf2019", "followers_url": "https://api.github.com/users/Saduf2019/followers", "following_url": "https://api.github.com/users/Saduf2019/following{/other_user}", "gists_url": "https://api.github.com/users/Saduf2019/gists{/gist_id}", "starred_url": "https://api.github.com/users/Saduf2019/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Saduf2019/subscriptions", "organizations_url": "https://api.github.com/users/Saduf2019/orgs", "repos_url": "https://api.github.com/users/Saduf2019/repos", "events_url": "https://api.github.com/users/Saduf2019/events{/privacy}", "received_events_url": "https://api.github.com/users/Saduf2019/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Saduf2019", "id": 59822926, "node_id": "MDQ6VXNlcjU5ODIyOTI2", "avatar_url": "https://avatars2.githubusercontent.com/u/59822926?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Saduf2019", "html_url": "https://github.com/Saduf2019", "followers_url": "https://api.github.com/users/Saduf2019/followers", "following_url": "https://api.github.com/users/Saduf2019/following{/other_user}", "gists_url": "https://api.github.com/users/Saduf2019/gists{/gist_id}", "starred_url": "https://api.github.com/users/Saduf2019/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Saduf2019/subscriptions", "organizations_url": "https://api.github.com/users/Saduf2019/orgs", "repos_url": "https://api.github.com/users/Saduf2019/repos", "events_url": "https://api.github.com/users/Saduf2019/events{/privacy}", "received_events_url": "https://api.github.com/users/Saduf2019/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-03-07T13:53:19Z", "updated_at": "2020-03-19T01:15:58Z", "closed_at": null, "author_association": "NONE", "body": "Tensorflow2.0 is not supporting this `tf.contrib.training.bucket_by_sequence_length` and what can I use instead of this "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37414", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37414/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37414/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37414/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37414", "id": 577325826, "node_id": "MDU6SXNzdWU1NzczMjU4MjY=", "number": 37414, "title": "ValueError: No gradients provided for any variable: ['dense_26/kernel:0', 'dense_26/bias:0']", "user": {"login": "beardwolf", "id": 61906375, "node_id": "MDQ6VXNlcjYxOTA2Mzc1", "avatar_url": "https://avatars0.githubusercontent.com/u/61906375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/beardwolf", "html_url": "https://github.com/beardwolf", "followers_url": "https://api.github.com/users/beardwolf/followers", "following_url": "https://api.github.com/users/beardwolf/following{/other_user}", "gists_url": "https://api.github.com/users/beardwolf/gists{/gist_id}", "starred_url": "https://api.github.com/users/beardwolf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/beardwolf/subscriptions", "organizations_url": "https://api.github.com/users/beardwolf/orgs", "repos_url": "https://api.github.com/users/beardwolf/repos", "events_url": "https://api.github.com/users/beardwolf/events{/privacy}", "received_events_url": "https://api.github.com/users/beardwolf/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-03-07T12:08:30Z", "updated_at": "2020-03-16T05:33:54Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- OS Platform and Distribution: Windows 10\r\n\r\n- TensorFlow installed from Anaconda 1.9.12. Channel: default.\r\nTensorflow Version: 2.1.0\r\n\r\n- Python version: 3.7.6\r\n\r\n- CUDA/cuDNN version:\r\ncudatoolkit: 10.1.243\r\ncuDNN: 7.6.5\r\n\r\n- GPU: NVidia GeForce GTX 1060, 6 GB\r\n\r\n**Describe the current behavior**\r\nI've been developing a Relativistic Style GAN, but when I try to train the discriminator, I keep getting ValueError: No gradients provided for any variable. I replaced the generator and discriminator with empty dummies in order to figure out what was causing the problem, but I still got the error.\r\n\r\nI suspect the loss function for while but then I recalled a simple functional non-style version of the RaGAN script used to work fine and without errors during training and produced blurry but recognizable results. When I tried that script again, I got this gradient error as well.\r\n\r\nI'm stumped at what could be causing this error.\r\n\r\n**Standalone code to reproduce the issue** \r\nI'm new to GitHub and couldn't manage to past the code in a coherent way so here's\r\na link to the Jupyter Notebook that replicates the problem:\r\n[MyBuggyRelStyle](https://github.com/beardwolf/beardwolf/blob/master/MyBuggyRelStyle.ipynb)\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\n`---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-55-39aabbcfc7eb> in <module>\r\n     20         z = np.random.normal(scale=.25, size=(batch_size, dl_size))\r\n     21         z2 = np.random.normal(scale=.25, size=(batch_size, dl_size))\r\n---> 22         disc_loss.append(disc_train.train_on_batch([data, z, z2], dummy_y))\r\n     23 \r\n     24         gen.trainable = True\r\n\r\n~\\Anaconda3\\envs\\deep-learning-gpu\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training.py in train_on_batch(self, x, y, sample_weight, class_weight, reset_metrics)\r\n   1076           self, x, y=y, sample_weight=sample_weight,\r\n   1077           class_weight=class_weight, reset_metrics=reset_metrics,\r\n-> 1078           standalone=True)\r\n   1079       outputs = (outputs['total_loss'] + outputs['output_losses'] +\r\n   1080                  outputs['metrics'])\r\n\r\n~\\Anaconda3\\envs\\deep-learning-gpu\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_v2_utils.py in train_on_batch(model, x, y, sample_weight, class_weight, reset_metrics, standalone)\r\n    431       y,\r\n    432       sample_weights=sample_weights,\r\n--> 433       output_loss_metrics=model._output_loss_metrics)\r\n    434 \r\n    435   if reset_metrics:\r\n\r\n~\\Anaconda3\\envs\\deep-learning-gpu\\lib\\site-packages\\tensorflow_core\\python\\eager\\def_function.py in __call__(self, *args, **kwds)\r\n    566         xla_context.Exit()\r\n    567     else:\r\n--> 568       result = self._call(*args, **kwds)\r\n    569 \r\n    570     if tracing_count == self._get_tracing_count():\r\n\r\n~\\Anaconda3\\envs\\deep-learning-gpu\\lib\\site-packages\\tensorflow_core\\python\\eager\\def_function.py in _call(self, *args, **kwds)\r\n    604       # In this case we have not created variables on the first call. So we can\r\n    605       # run the first trace but we should fail if variables are created.\r\n--> 606       results = self._stateful_fn(*args, **kwds)\r\n    607       if self._created_variables:\r\n    608         raise ValueError(\"Creating variables on a non-first call to a function\"\r\n\r\n~\\Anaconda3\\envs\\deep-learning-gpu\\lib\\site-packages\\tensorflow_core\\python\\eager\\function.py in __call__(self, *args, **kwargs)\r\n   2360     \"\"\"Calls a graph function specialized to the inputs.\"\"\"\r\n   2361     with self._lock:\r\n-> 2362       graph_function, args, kwargs = self._maybe_define_function(args, kwargs)\r\n   2363     return graph_function._filtered_call(args, kwargs)  # pylint: disable=protected-access\r\n   2364 \r\n\r\n~\\Anaconda3\\envs\\deep-learning-gpu\\lib\\site-packages\\tensorflow_core\\python\\eager\\function.py in _maybe_define_function(self, args, kwargs)\r\n   2698           and self.input_signature is None\r\n   2699           and call_context_key in self._function_cache.missed):\r\n-> 2700         return self._define_function_with_shape_relaxation(args, kwargs)\r\n   2701 \r\n   2702       self._function_cache.missed.add(call_context_key)\r\n\r\n~\\Anaconda3\\envs\\deep-learning-gpu\\lib\\site-packages\\tensorflow_core\\python\\eager\\function.py in _define_function_with_shape_relaxation(self, args, kwargs)\r\n   2630         relaxed_arg_shapes)\r\n   2631     graph_function = self._create_graph_function(\r\n-> 2632         args, kwargs, override_flat_arg_shapes=relaxed_arg_shapes)\r\n   2633     self._function_cache.arg_relaxed[rank_only_cache_key] = graph_function\r\n   2634 \r\n\r\n~\\Anaconda3\\envs\\deep-learning-gpu\\lib\\site-packages\\tensorflow_core\\python\\eager\\function.py in _create_graph_function(self, args, kwargs, override_flat_arg_shapes)\r\n   2591             arg_names=arg_names,\r\n   2592             override_flat_arg_shapes=override_flat_arg_shapes,\r\n-> 2593             capture_by_value=self._capture_by_value),\r\n   2594         self._function_attributes,\r\n   2595         # Tell the ConcreteFunction to clean up its graph once it goes out of\r\n\r\n~\\Anaconda3\\envs\\deep-learning-gpu\\lib\\site-packages\\tensorflow_core\\python\\framework\\func_graph.py in func_graph_from_py_func(name, python_func, args, kwargs, signature, func_graph, autograph, autograph_options, add_control_dependencies, arg_names, op_return_value, collections, capture_by_value, override_flat_arg_shapes)\r\n    976                                           converted_func)\r\n    977 \r\n--> 978       func_outputs = python_func(*func_args, **func_kwargs)\r\n    979 \r\n    980       # invariant: `func_outputs` contains only Tensors, CompositeTensors,\r\n\r\n~\\Anaconda3\\envs\\deep-learning-gpu\\lib\\site-packages\\tensorflow_core\\python\\eager\\def_function.py in wrapped_fn(*args, **kwds)\r\n    437         # __wrapped__ allows AutoGraph to swap in a converted function. We give\r\n    438         # the function a weak reference to itself to avoid a reference cycle.\r\n--> 439         return weak_wrapped_fn().__wrapped__(*args, **kwds)\r\n    440     weak_wrapped_fn = weakref.ref(wrapped_fn)\r\n    441 \r\n\r\n~\\Anaconda3\\envs\\deep-learning-gpu\\lib\\site-packages\\tensorflow_core\\python\\framework\\func_graph.py in wrapper(*args, **kwargs)\r\n    966           except Exception as e:  # pylint:disable=broad-except\r\n    967             if hasattr(e, \"ag_error_metadata\"):\r\n--> 968               raise e.ag_error_metadata.to_exception(e)\r\n    969             else:\r\n    970               raise\r\n\r\nValueError: in converted code:\r\n\r\n    C:\\Users\\Hudson\\Anaconda3\\envs\\deep-learning-gpu\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_eager.py:305 train_on_batch  *\r\n        outs, total_loss, output_losses, masks = (\r\n    C:\\Users\\Hudson\\Anaconda3\\envs\\deep-learning-gpu\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_eager.py:273 _process_single_batch\r\n        model.optimizer.apply_gradients(zip(grads, trainable_weights))\r\n    C:\\Users\\Hudson\\Anaconda3\\envs\\deep-learning-gpu\\lib\\site-packages\\tensorflow_core\\python\\keras\\optimizer_v2\\optimizer_v2.py:426 apply_gradients\r\n        grads_and_vars = _filter_grads(grads_and_vars)\r\n    C:\\Users\\Hudson\\Anaconda3\\envs\\deep-learning-gpu\\lib\\site-packages\\tensorflow_core\\python\\keras\\optimizer_v2\\optimizer_v2.py:1039 _filter_grads\r\n        ([v.name for _, v in grads_and_vars],))\r\n\r\n    ValueError: No gradients provided for any variable: ['dense_26/kernel:0', 'dense_26/bias:0'].\r\n0\r\n1\r\nPython 3 | Idle\r\nMyBuggyRelStyle.ipynb\r\nLn 22, Col 1\r\n`\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37413", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37413/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37413/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37413/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37413", "id": 577322913, "node_id": "MDU6SXNzdWU1NzczMjI5MTM=", "number": 37413, "title": "random output ", "user": {"login": "mohlondon", "id": 45628941, "node_id": "MDQ6VXNlcjQ1NjI4OTQx", "avatar_url": "https://avatars0.githubusercontent.com/u/45628941?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mohlondon", "html_url": "https://github.com/mohlondon", "followers_url": "https://api.github.com/users/mohlondon/followers", "following_url": "https://api.github.com/users/mohlondon/following{/other_user}", "gists_url": "https://api.github.com/users/mohlondon/gists{/gist_id}", "starred_url": "https://api.github.com/users/mohlondon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mohlondon/subscriptions", "organizations_url": "https://api.github.com/users/mohlondon/orgs", "repos_url": "https://api.github.com/users/mohlondon/repos", "events_url": "https://api.github.com/users/mohlondon/events{/privacy}", "received_events_url": "https://api.github.com/users/mohlondon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "amahendrakar", "id": 57165142, "node_id": "MDQ6VXNlcjU3MTY1MTQy", "avatar_url": "https://avatars1.githubusercontent.com/u/57165142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amahendrakar", "html_url": "https://github.com/amahendrakar", "followers_url": "https://api.github.com/users/amahendrakar/followers", "following_url": "https://api.github.com/users/amahendrakar/following{/other_user}", "gists_url": "https://api.github.com/users/amahendrakar/gists{/gist_id}", "starred_url": "https://api.github.com/users/amahendrakar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amahendrakar/subscriptions", "organizations_url": "https://api.github.com/users/amahendrakar/orgs", "repos_url": "https://api.github.com/users/amahendrakar/repos", "events_url": "https://api.github.com/users/amahendrakar/events{/privacy}", "received_events_url": "https://api.github.com/users/amahendrakar/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "amahendrakar", "id": 57165142, "node_id": "MDQ6VXNlcjU3MTY1MTQy", "avatar_url": "https://avatars1.githubusercontent.com/u/57165142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amahendrakar", "html_url": "https://github.com/amahendrakar", "followers_url": "https://api.github.com/users/amahendrakar/followers", "following_url": "https://api.github.com/users/amahendrakar/following{/other_user}", "gists_url": "https://api.github.com/users/amahendrakar/gists{/gist_id}", "starred_url": "https://api.github.com/users/amahendrakar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amahendrakar/subscriptions", "organizations_url": "https://api.github.com/users/amahendrakar/orgs", "repos_url": "https://api.github.com/users/amahendrakar/repos", "events_url": "https://api.github.com/users/amahendrakar/events{/privacy}", "received_events_url": "https://api.github.com/users/amahendrakar/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-03-07T11:42:35Z", "updated_at": "2020-03-16T10:56:31Z", "closed_at": null, "author_association": "NONE", "body": " the chat i created it doesn't work correctly i guess it keep givin me this kind of result no matter how much time i train it \r\n \r\n\r\n> python3 ./translate.py  --en_vocab_size=40000 --fr_vocab_size=40000 --data_dir=/home/baba055h_s/ --train_dir=/home/baba055h_s/ --decode\r\n/home/baba055h_s/.local/lib/python3.5/site-packages/tensorflow/python/framework/dtypes.py:463: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.\r\n  _np_qint8 = np.dtype([(\"qint8\", np.int8, 1)])\r\n/home/baba055h_s/.local/lib/python3.5/site-packages/tensorflow/python/framework/dtypes.py:464: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.\r\n  _np_quint8 = np.dtype([(\"quint8\", np.uint8, 1)])\r\n/home/baba055h_s/.local/lib/python3.5/site-packages/tensorflow/python/framework/dtypes.py:465: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.\r\n  _np_qint16 = np.dtype([(\"qint16\", np.int16, 1)])\r\n/home/baba055h_s/.local/lib/python3.5/site-packages/tensorflow/python/framework/dtypes.py:466: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.\r\n  _np_quint16 = np.dtype([(\"quint16\", np.uint16, 1)])\r\n/home/baba055h_s/.local/lib/python3.5/site-packages/tensorflow/python/framework/dtypes.py:467: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.\r\n  _np_qint32 = np.dtype([(\"qint32\", np.int32, 1)])\r\nWARNING:tensorflow:From /home/baba055h_s/ten3/tensorflow/tensorflow/models/rnn/translate/seq2seq_model.py:188 in __init__.: all_variables (from tensorflow.python.ops.variables) is deprecated and will be removed after 2017-03-02.\r\nInstructions for updating:\r\nPlease use tf.global_variables instead.\r\nCreated model with fresh parameters.\r\nWARNING:tensorflow:From ./translate.py:138 in create_model.: initialize_all_variables (from tensorflow.python.ops.variables) is deprecated and will be removed after 2017-03-02.\r\nInstructions for updating:\r\nUse `tf.global_variables_initializer` instead.\r\n/> hi\r\nsample sample sample sample sample sample sample sample letter-sized letter-sized\r\n>/> what's up\r\nsample sample sample soil soil soil neski neski neski neski\r\n\r\n> as you notice the result are random 10 words at least and some words are repeated  like this :\"sample sample sample soil soil soil neski neski neski neski\"\r\n\r\n\r\n\r\n\r\n>>i'm using \r\ntensorflow 0.12.1\r\ntranslate script with branch r0.11\r\nprepare data using this script\r\nhttps://github.com/b0noI/dialog_converter/tree/master\r\ni trained it up to 4000 time and the same thing\r\n\r\nsee what is that all about is it something wrong with the data i provided\r\nplease help me "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37412", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37412/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37412/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37412/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37412", "id": 577304910, "node_id": "MDU6SXNzdWU1NzczMDQ5MTA=", "number": 37412, "title": "Cannot get accuracy for vgg19 in tflite", "user": {"login": "venkat-kittu", "id": 16778235, "node_id": "MDQ6VXNlcjE2Nzc4MjM1", "avatar_url": "https://avatars2.githubusercontent.com/u/16778235?v=4", "gravatar_id": "", "url": "https://api.github.com/users/venkat-kittu", "html_url": "https://github.com/venkat-kittu", "followers_url": "https://api.github.com/users/venkat-kittu/followers", "following_url": "https://api.github.com/users/venkat-kittu/following{/other_user}", "gists_url": "https://api.github.com/users/venkat-kittu/gists{/gist_id}", "starred_url": "https://api.github.com/users/venkat-kittu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/venkat-kittu/subscriptions", "organizations_url": "https://api.github.com/users/venkat-kittu/orgs", "repos_url": "https://api.github.com/users/venkat-kittu/repos", "events_url": "https://api.github.com/users/venkat-kittu/events{/privacy}", "received_events_url": "https://api.github.com/users/venkat-kittu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gadagashwini", "id": 48476109, "node_id": "MDQ6VXNlcjQ4NDc2MTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/48476109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadagashwini", "html_url": "https://github.com/gadagashwini", "followers_url": "https://api.github.com/users/gadagashwini/followers", "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}", "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions", "organizations_url": "https://api.github.com/users/gadagashwini/orgs", "repos_url": "https://api.github.com/users/gadagashwini/repos", "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}", "received_events_url": "https://api.github.com/users/gadagashwini/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gadagashwini", "id": 48476109, "node_id": "MDQ6VXNlcjQ4NDc2MTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/48476109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadagashwini", "html_url": "https://github.com/gadagashwini", "followers_url": "https://api.github.com/users/gadagashwini/followers", "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}", "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions", "organizations_url": "https://api.github.com/users/gadagashwini/orgs", "repos_url": "https://api.github.com/users/gadagashwini/repos", "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}", "received_events_url": "https://api.github.com/users/gadagashwini/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2020-03-07T09:05:14Z", "updated_at": "2020-03-18T05:29:45Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: NO\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu16.04\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\n- **TensorFlow installed from (source or binary)**: pip3(20.02)\r\n- **TensorFlow version (use command below)**: 2.1\r\n- **Python version**: 3.6.9\r\n- **Bazel version (if compiling from source)**:2.0.0\r\n- **GCC/Compiler version (if compiling from source)**: 7.4.0\r\n- **CUDA/cuDNN version**: 10.1\r\n- **GPU model and memory**: 1060 GTX - 6GB\r\n- **Exact command to reproduce**: \r\nbazel-bin/tensorflow/lite/tools/accuracy/ilsvrc/imagenet_accuracy_eval --model_file=../tensorflow_tests/models/vgg19.tflite --ground_truth_images_path=../val_imagenet/ --ground_truth_labels=ground_truth.txt --model_output_labels=./labels.txt --output_file_path=../vgg19_output_acc.txt --num_images=10\r\n\r\n### Describe the problem\r\nI have been running tflite accuracy script as defined [here](https://github.com/tensorflow/tensorflow/tree/master/tensorflow/lite/tools/accuracy/ilsvrc) and I am able to run successfully, but when I am running the script for resnet or mobilenet, I am getting proper accurate results from top1 to top10, but when I am trying same with vgg19, I am not getting the  accuracy instead I am getting all values as zero or very low as below\r\n\r\nTop 1, Top 2, Top 3, Top 4, Top 5, Top 6, Top 7, Top 8, Top 9, Top 10\r\n0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000\r\n0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000\r\n0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000\r\n0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000\r\n0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000\r\n0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000\r\n0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000, 0.000\r\n0.000, 0.000, 0.000, 12.500, 12.500, 12.500, 12.500, 12.500, 12.500, 12.500\r\n0.000, 0.000, 0.000, 11.111, 22.222, 22.222, 22.222, 22.222, 22.222, 22.222\r\n\r\nI tried changing the model_labels text file, but it's not working.\r\n\r\ndo I am making any mistake with vgg19 or what is happening?\r\nThanks in advance\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37411", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37411/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37411/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37411/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37411", "id": 577301816, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg1MTIxMzg5", "number": 37411, "title": "Fix a go binding install error on windows platform", "user": {"login": "bbbboom", "id": 22853609, "node_id": "MDQ6VXNlcjIyODUzNjA5", "avatar_url": "https://avatars1.githubusercontent.com/u/22853609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bbbboom", "html_url": "https://github.com/bbbboom", "followers_url": "https://api.github.com/users/bbbboom/followers", "following_url": "https://api.github.com/users/bbbboom/following{/other_user}", "gists_url": "https://api.github.com/users/bbbboom/gists{/gist_id}", "starred_url": "https://api.github.com/users/bbbboom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bbbboom/subscriptions", "organizations_url": "https://api.github.com/users/bbbboom/orgs", "repos_url": "https://api.github.com/users/bbbboom/repos", "events_url": "https://api.github.com/users/bbbboom/events{/privacy}", "received_events_url": "https://api.github.com/users/bbbboom/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-03-07T08:39:56Z", "updated_at": "2020-03-16T12:21:19Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37411", "html_url": "https://github.com/tensorflow/tensorflow/pull/37411", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37411.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37411.patch"}, "body": "If running *go generate github.com/tensorflow/tensorflow/tensorflow/go/op* on windows platform, it well show \r\n\r\n> \\go_path/src/github.com/tensorflow/tensorflow: warning: directory does not exist.\r\nCannot convert path \"\\go_path/src/github.com/tensorflow/tensorflow/tensorflow/core/framework/*.proto\" to or from Windows style ..\\genop\\main.go:17: running \"bash\": exit status 1\r\n..\\github.com\\tensorflow\\tensorflow\\tensorflow\\go\\op\\generate.go:17: running \"go\": exit status 1\r\n\r\nSo this commit will automatically convert windows style slashes."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37410", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37410/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37410/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37410/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37410", "id": 577294105, "node_id": "MDU6SXNzdWU1NzcyOTQxMDU=", "number": 37410, "title": "Center Loss in TF 2.0", "user": {"login": "suraj-maniyar", "id": 16310456, "node_id": "MDQ6VXNlcjE2MzEwNDU2", "avatar_url": "https://avatars0.githubusercontent.com/u/16310456?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suraj-maniyar", "html_url": "https://github.com/suraj-maniyar", "followers_url": "https://api.github.com/users/suraj-maniyar/followers", "following_url": "https://api.github.com/users/suraj-maniyar/following{/other_user}", "gists_url": "https://api.github.com/users/suraj-maniyar/gists{/gist_id}", "starred_url": "https://api.github.com/users/suraj-maniyar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suraj-maniyar/subscriptions", "organizations_url": "https://api.github.com/users/suraj-maniyar/orgs", "repos_url": "https://api.github.com/users/suraj-maniyar/repos", "events_url": "https://api.github.com/users/suraj-maniyar/events{/privacy}", "received_events_url": "https://api.github.com/users/suraj-maniyar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 1093464312, "node_id": "MDU6TGFiZWwxMDkzNDY0MzEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:others", "name": "type:others", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ravikyram", "id": 51902062, "node_id": "MDQ6VXNlcjUxOTAyMDYy", "avatar_url": "https://avatars2.githubusercontent.com/u/51902062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ravikyram", "html_url": "https://github.com/ravikyram", "followers_url": "https://api.github.com/users/ravikyram/followers", "following_url": "https://api.github.com/users/ravikyram/following{/other_user}", "gists_url": "https://api.github.com/users/ravikyram/gists{/gist_id}", "starred_url": "https://api.github.com/users/ravikyram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ravikyram/subscriptions", "organizations_url": "https://api.github.com/users/ravikyram/orgs", "repos_url": "https://api.github.com/users/ravikyram/repos", "events_url": "https://api.github.com/users/ravikyram/events{/privacy}", "received_events_url": "https://api.github.com/users/ravikyram/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ravikyram", "id": 51902062, "node_id": "MDQ6VXNlcjUxOTAyMDYy", "avatar_url": "https://avatars2.githubusercontent.com/u/51902062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ravikyram", "html_url": "https://github.com/ravikyram", "followers_url": "https://api.github.com/users/ravikyram/followers", "following_url": "https://api.github.com/users/ravikyram/following{/other_user}", "gists_url": "https://api.github.com/users/ravikyram/gists{/gist_id}", "starred_url": "https://api.github.com/users/ravikyram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ravikyram/subscriptions", "organizations_url": "https://api.github.com/users/ravikyram/orgs", "repos_url": "https://api.github.com/users/ravikyram/repos", "events_url": "https://api.github.com/users/ravikyram/events{/privacy}", "received_events_url": "https://api.github.com/users/ravikyram/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-03-07T07:28:32Z", "updated_at": "2020-03-09T09:52:09Z", "closed_at": null, "author_association": "NONE", "body": "I am trying to implement center loss in Tensorflow 2.0 by referring to code in following repositories:\r\n\r\n- https://github.com/handongfeng/MNIST-center-loss\r\n\r\n- https://github.com/mjDelta/keras-center-loss-MNIST\r\n\r\n- https://github.com/Kakoedlinnoeslovo/center_loss\r\n\r\nI noticed that some arguments in the method \"self.add_update((self.centers,new_centers),x)\" when creating a custom layer, are deprecated. The code (linked above) does not throw any error, but the centers are never updated when run in Tensorflow 2.0. \r\n\r\nYou can find the related description for the problem here:\r\nhttps://github.com/tensorflow/tensorflow/blob/v2.1.0/tensorflow/python/keras/engine/base_layer.py#L1170-L1259\r\n\r\nI am trying to update the weights of the layer after every forward pass so I can use it as tf.Variable which can persist the updated centroids for the next iteration.\r\n\r\nAny help on this would be appreciated.\r\nThanks\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37407", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37407/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37407/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37407/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37407", "id": 577263129, "node_id": "MDU6SXNzdWU1NzcyNjMxMjk=", "number": 37407, "title": " Tensorflow2.1.compat.v1 distributed training occasionally goes wrong", "user": {"login": "zkx741481546", "id": 31107435, "node_id": "MDQ6VXNlcjMxMTA3NDM1", "avatar_url": "https://avatars2.githubusercontent.com/u/31107435?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zkx741481546", "html_url": "https://github.com/zkx741481546", "followers_url": "https://api.github.com/users/zkx741481546/followers", "following_url": "https://api.github.com/users/zkx741481546/following{/other_user}", "gists_url": "https://api.github.com/users/zkx741481546/gists{/gist_id}", "starred_url": "https://api.github.com/users/zkx741481546/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zkx741481546/subscriptions", "organizations_url": "https://api.github.com/users/zkx741481546/orgs", "repos_url": "https://api.github.com/users/zkx741481546/repos", "events_url": "https://api.github.com/users/zkx741481546/events{/privacy}", "received_events_url": "https://api.github.com/users/zkx741481546/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 1093464312, "node_id": "MDU6TGFiZWwxMDkzNDY0MzEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:others", "name": "type:others", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ravikyram", "id": 51902062, "node_id": "MDQ6VXNlcjUxOTAyMDYy", "avatar_url": "https://avatars2.githubusercontent.com/u/51902062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ravikyram", "html_url": "https://github.com/ravikyram", "followers_url": "https://api.github.com/users/ravikyram/followers", "following_url": "https://api.github.com/users/ravikyram/following{/other_user}", "gists_url": "https://api.github.com/users/ravikyram/gists{/gist_id}", "starred_url": "https://api.github.com/users/ravikyram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ravikyram/subscriptions", "organizations_url": "https://api.github.com/users/ravikyram/orgs", "repos_url": "https://api.github.com/users/ravikyram/repos", "events_url": "https://api.github.com/users/ravikyram/events{/privacy}", "received_events_url": "https://api.github.com/users/ravikyram/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ravikyram", "id": 51902062, "node_id": "MDQ6VXNlcjUxOTAyMDYy", "avatar_url": "https://avatars2.githubusercontent.com/u/51902062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ravikyram", "html_url": "https://github.com/ravikyram", "followers_url": "https://api.github.com/users/ravikyram/followers", "following_url": "https://api.github.com/users/ravikyram/following{/other_user}", "gists_url": "https://api.github.com/users/ravikyram/gists{/gist_id}", "starred_url": "https://api.github.com/users/ravikyram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ravikyram/subscriptions", "organizations_url": "https://api.github.com/users/ravikyram/orgs", "repos_url": "https://api.github.com/users/ravikyram/repos", "events_url": "https://api.github.com/users/ravikyram/events{/privacy}", "received_events_url": "https://api.github.com/users/ravikyram/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-03-07T02:34:13Z", "updated_at": "2020-03-12T09:17:53Z", "closed_at": null, "author_association": "NONE", "body": "`TaskIndex: 4 | Episode: 1995/100000  | Episode Reward: 52.2229  | Running Time: 7.6459 | EnvStep Time: 0.7538 | Render Time: 0.0000\r\nTaskIndex: 1 | Episode: 1984/100000  | Episode Reward: 2.9837  | Running Time: 7.6459 | EnvStep Time: 1.4454 | Render Time: 0.0000\r\nTaskIndex: 6 | Episode: 1992/100000  | Episode Reward: 8.1637  | Running Time: 7.6850 | EnvStep Time: 1.0630 | Render Time: 0.0000\r\nTaskIndex: 0 | Episode: 2004/100000  | Episode Reward: -60.5018  | Running Time: 5.3829 | EnvStep Time: 2.2781 | Render Time: 0.9659\r\n2020-03-07 09:55:22.138197: I tensorflow/core/202distri0b-03uted-07 09_runtime/worker:55:22..138233: Ic c:t2enso04]rfl Caowncell/coaretion /dreqistriuebuted_rsted untifor meRun/worker.cc:2Grap04]h.\r\n Cancellation requested for RunGraph.\r\n2020-03-07 09:55:22.138365: I tensorflow/core/distributed_runtime/worker.cc:204] Can202cella0-tio03-07n  09:55:22re.13850que8: Ested  tensorflfor owRu/conGrre/aphdistribu.\r\nted_runtime/master_session.cc:1911] Cleanup partition error: Unavailable: Stream removed\r\nAdditional GRPC error information:\r\n{\"created\":\"@1583546122.138000000\",\"description\":\"Error received from peer\",\"file\":\"external/grpc/src/core/lib/surface/call.cc\",\"file_line\":1039,\"grpc_message\":\"Stream removed\",\"grpc_status\":2}\r\n2020-03-07 09:55:22.1382029208220-03-: 02020-03-07 09:55:22.139043: I tensorflow20/2c0-03-07 09:55o:20-Ir2e/d tensorflow/core/distributed_runtime/worker.cc:204] Cancellation reques2020ted- fo0r3- 07 09R7u 0n9::55250205.:122.1:39014:2G2 r.I1a 3ptensorfh9l.2o\r\n08: I tensorflow/core/distributed_runtime/worker.cc:204] Cancellation requested for RunGraph.\r\n03-07 09:55:22.w/core/distributed_runtime/worker.cc:204] Cancellation reistrq-03-07 0u138993eis39089: I tensorflow/core/distributed_runtime/worker.cc:204] Cancellation reqt: eb9u:Idu e5 fosted for RunGraph.\r\n5te:tnesod2r_2f.lo1rw3u/9nctoirmee//2wdistributed_runtime/worker.cc:204] Can7ocrkelelr6a:.tion  Ir ctensorflow/core/distributed_ruce:q2un0et4si]tmee d/C wafoornrkc eeRru.nGclcrl:ar Rph.2a\r\n04] Cancellation requested for RunGraph.\r\ntion requested for RunGraph.\r\nunGraph.\r\n2020-03-07 09:55:22.588608: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'cudart64_101.dll'; dlerror: cudart64_101.dll not found\r\n2020-03-07 09:55:22.588719: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.\r\nC:\\Users\\zkx74\\Anaconda3\\envs\\RL\\lib\\site-packages\\pandas_datareader\\compat\\__init__.py:7: FutureWarning:\r\n\r\npandas.util.testing is deprecated. Use the functions in the public API at pandas.testing instead.`\r\n\r\nIt can train normally for aobut hundreds episode, and the throw this error message.\r\nI used 1ps and 8 worker on 1CPU+1GPU"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37405", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37405/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37405/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37405/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37405", "id": 577219159, "node_id": "MDU6SXNzdWU1NzcyMTkxNTk=", "number": 37405, "title": "TensorFlow 2.1.0: _FallbackException: This function does not handle the case of the path where all inputs are not already EagerTensors", "user": {"login": "adisurtya", "id": 57612524, "node_id": "MDQ6VXNlcjU3NjEyNTI0", "avatar_url": "https://avatars2.githubusercontent.com/u/57612524?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adisurtya", "html_url": "https://github.com/adisurtya", "followers_url": "https://api.github.com/users/adisurtya/followers", "following_url": "https://api.github.com/users/adisurtya/following{/other_user}", "gists_url": "https://api.github.com/users/adisurtya/gists{/gist_id}", "starred_url": "https://api.github.com/users/adisurtya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adisurtya/subscriptions", "organizations_url": "https://api.github.com/users/adisurtya/orgs", "repos_url": "https://api.github.com/users/adisurtya/repos", "events_url": "https://api.github.com/users/adisurtya/events{/privacy}", "received_events_url": "https://api.github.com/users/adisurtya/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-03-06T22:57:58Z", "updated_at": "2020-03-16T10:28:00Z", "closed_at": null, "author_association": "NONE", "body": "I am writing a custom loss function which involves another (already trained) neural network, called model_weight, evaluating predictions on the input of the model I'm currently training:\r\nCode to fully reproduce: [https://colab.research.google.com/gist/adisurtya/387383b8f4e518dbb938ecd1af87b982/37405_full.ipynb](url)\r\n\r\nWhere the issue is: \r\n```\r\ndef weight(d):\r\n  f = model_weight.predict(d,steps = 1)\r\n  return (f)/(1-f)\r\n\r\nmyinputs = Input(shape=(1,), dtype = tf.float32)\r\nx = Dense(128, activation='relu')(myinputs)\r\nx2 = Dense(128, activation='relu')(x)\r\npredictions = Dense(1, activation='sigmoid')(x2)\r\nmodel = Model(inputs=myinputs, outputs=predictions)\r\nmodel.summary()\r\n\r\ndef my_loss_wrapper(inputs,val=0):\r\n  x  = inputs\r\n  theta = 0. #starting value\r\n  #theta0 = tf.constant(val, dtype= tf.float32)#target value\r\n\r\n  #creating tensor (filled with 1s) with same shape as inputs; multiply by val\r\n  theta0_stack = K.ones_like(x, dtype=tf.float32)*val \r\n\r\n  #combining and reshaping into correct format:\r\n  data = K.stack((x, theta0_stack), axis=-1) \r\n  data = K.squeeze(data, axis = 1)\r\n  #slice data to 500 entries to match batch_size\r\n  data = K.gather(data, np.arange(500))\r\n  print(data.shape)\r\n\r\n  w = weight(data)\r\n\r\n  def my_loss(y_true,y_pred):\r\n    t_loss = K.mean(y_true*(y_true - y_pred)**2+(w)**2*(1.-y_true)*(y_true - y_pred)**2)\r\n    return t_loss\r\n\r\n  return my_loss\r\n\r\nmodel.compile(optimizer='adam', loss=my_loss_wrapper(myinputs,theta),metrics=['accuracy'])\r\nmodel.fit(np.array(X_train), y_train, epochs=1, batch_size=500,validation_data=(np.array(X_test), y_test),verbose=1)\r\n```\r\n\r\nGetting an error when weight() calls model_weight.predict on \"data\". This function works fine on regular tensors that I initialize with strict values (e.g.\r\n\r\n```\r\ntf.Tensor(\r\n[[1 5]\r\n [2 5]\r\n [3 5]], shape=(3, 2), dtype=int32))\r\n```\r\nbut not on the tensor that includes \"x\" or \"inputs\". Error message when the model tries to compile:\r\n\r\n```\r\n_FallbackException                        Traceback (most recent call last)\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow_core/python/ops/gen_dataset_ops.py in tensor_dataset(components, output_shapes, name)\r\n   5590         _ctx._context_handle, tld.device_name, \"TensorDataset\", name,\r\n-> 5591         tld.op_callbacks, components, \"output_shapes\", output_shapes)\r\n   5592       return _result\r\n\r\n_FallbackException: This function does not handle the case of the path where all inputs are not already EagerTensors.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-19-f74b0047add5> in <module>\r\n      4 \r\n      5 for theta in thetas:\r\n----> 6     model.compile(optimizer='adam', loss=my_loss_wrapper(myinputs,theta),metrics=['accuracy'])\r\n      7     model.fit(np.array(X_train), y_train, epochs=1, batch_size=500,validation_data=(np.array(X_test), y_test),verbose=1)\r\n      8     lvals+=[model.history.history['val_loss']]\r\n\r\n<ipython-input-18-3ac14760abd7> in my_loss_wrapper(inputs, val)\r\n     24     print(tf.executing_eagerly())\r\n     25     print(weight(test))\r\n---> 26     w = weight(data)\r\n     27 \r\n     28     def my_loss(y_true,y_pred):\r\n\r\n<ipython-input-14-c58e20e1428a> in weight(d)\r\n     27 '''\r\n     28 def weight(d):\r\n---> 29     f = model_weight.predict(d,steps = 1)\r\n     30     return (f)/(1-f)\r\n\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow_core/python/keras/engine/training.py in predict(self, x, batch_size, verbose, steps, callbacks, max_queue_size, workers, use_multiprocessing)\r\n   1011         max_queue_size=max_queue_size,\r\n   1012         workers=workers,\r\n-> 1013         use_multiprocessing=use_multiprocessing)\r\n   1014 \r\n   1015   def reset_metrics(self):\r\n\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow_core/python/keras/engine/training_v2.py in predict(self, model, x, batch_size, verbose, steps, callbacks, max_queue_size, workers, use_multiprocessing, **kwargs)\r\n    496         model, ModeKeys.PREDICT, x=x, batch_size=batch_size, verbose=verbose,\r\n    497         steps=steps, callbacks=callbacks, max_queue_size=max_queue_size,\r\n--> 498         workers=workers, use_multiprocessing=use_multiprocessing, **kwargs)\r\n    499 \r\n    500 \r\n\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow_core/python/keras/engine/training_v2.py in _model_iteration(self, model, mode, x, y, batch_size, verbose, sample_weight, steps, callbacks, max_queue_size, workers, use_multiprocessing, **kwargs)\r\n    424           max_queue_size=max_queue_size,\r\n    425           workers=workers,\r\n--> 426           use_multiprocessing=use_multiprocessing)\r\n    427       total_samples = _get_total_number_of_samples(adapter)\r\n    428       use_sample = total_samples is not None\r\n\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow_core/python/keras/engine/training_v2.py in _process_inputs(model, mode, x, y, batch_size, epochs, sample_weights, class_weights, shuffle, steps, distribution_strategy, max_queue_size, workers, use_multiprocessing)\r\n    704       max_queue_size=max_queue_size,\r\n    705       workers=workers,\r\n--> 706       use_multiprocessing=use_multiprocessing)\r\n    707 \r\n    708   return adapter\r\n\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow_core/python/keras/engine/data_adapter.py in __init__(self, x, y, sample_weights, sample_weight_modes, batch_size, epochs, steps, shuffle, **kwargs)\r\n    355     indices_dataset = indices_dataset.flat_map(slice_batch_indices)\r\n    356 \r\n--> 357     dataset = self.slice_inputs(indices_dataset, inputs)\r\n    358 \r\n    359     if shuffle == \"batch\":\r\n\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow_core/python/keras/engine/data_adapter.py in slice_inputs(self, indices_dataset, inputs)\r\n    381     dataset = dataset_ops.DatasetV2.zip((\r\n    382         indices_dataset,\r\n--> 383         dataset_ops.DatasetV2.from_tensors(inputs).repeat()\r\n    384     ))\r\n    385 \r\n\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow_core/python/data/ops/dataset_ops.py in from_tensors(tensors)\r\n    564       Dataset: A `Dataset`.\r\n    565     \"\"\"\r\n--> 566     return TensorDataset(tensors)\r\n    567 \r\n    568   @staticmethod\r\n\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow_core/python/data/ops/dataset_ops.py in __init__(self, element)\r\n   2769     variant_tensor = gen_dataset_ops.tensor_dataset(\r\n   2770         self._tensors,\r\n-> 2771         output_shapes=structure.get_flat_tensor_shapes(self._structure))\r\n   2772     super(TensorDataset, self).__init__(variant_tensor)\r\n   2773 \r\n\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow_core/python/ops/gen_dataset_ops.py in tensor_dataset(components, output_shapes, name)\r\n   5594       try:\r\n   5595         return tensor_dataset_eager_fallback(\r\n-> 5596             components, output_shapes=output_shapes, name=name, ctx=_ctx)\r\n   5597       except _core._SymbolicException:\r\n   5598         pass  # Add nodes to the TensorFlow graph.\r\n\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow_core/python/ops/gen_dataset_ops.py in tensor_dataset_eager_fallback(components, output_shapes, name, ctx)\r\n   5627         \"'tensor_dataset' Op, not %r.\" % output_shapes)\r\n   5628   output_shapes = [_execute.make_shape(_s, \"output_shapes\") for _s in output_shapes]\r\n-> 5629   _attr_Toutput_types, components = _execute.convert_to_mixed_eager_tensors(components, ctx)\r\n   5630   _inputs_flat = list(components)\r\n   5631   _attrs = (\"Toutput_types\", _attr_Toutput_types, \"output_shapes\",\r\n\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow_core/python/eager/execute.py in convert_to_mixed_eager_tensors(values, ctx)\r\n    281 def convert_to_mixed_eager_tensors(values, ctx):\r\n    282   v = [ops.convert_to_tensor(t, ctx=ctx) for t in values]\r\n--> 283   types = [t._datatype_enum() for t in v]  # pylint: disable=protected-access\r\n    284   return types, v\r\n    285 \r\n\r\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow_core/python/eager/execute.py in <listcomp>(.0)\r\n    281 def convert_to_mixed_eager_tensors(values, ctx):\r\n    282   v = [ops.convert_to_tensor(t, ctx=ctx) for t in values]\r\n--> 283   types = [t._datatype_enum() for t in v]  # pylint: disable=protected-access\r\n    284   return types, v\r\n    285 \r\n\r\nAttributeError: 'Tensor' object has no attribute '_datatype_enum'\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37401", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37401/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37401/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37401/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37401", "id": 577173467, "node_id": "MDU6SXNzdWU1NzcxNzM0Njc=", "number": 37401, "title": "FasterRCNN_resnet101 .tflite conversion", "user": {"login": "pushkalkatara", "id": 21266230, "node_id": "MDQ6VXNlcjIxMjY2MjMw", "avatar_url": "https://avatars0.githubusercontent.com/u/21266230?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pushkalkatara", "html_url": "https://github.com/pushkalkatara", "followers_url": "https://api.github.com/users/pushkalkatara/followers", "following_url": "https://api.github.com/users/pushkalkatara/following{/other_user}", "gists_url": "https://api.github.com/users/pushkalkatara/gists{/gist_id}", "starred_url": "https://api.github.com/users/pushkalkatara/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pushkalkatara/subscriptions", "organizations_url": "https://api.github.com/users/pushkalkatara/orgs", "repos_url": "https://api.github.com/users/pushkalkatara/repos", "events_url": "https://api.github.com/users/pushkalkatara/events{/privacy}", "received_events_url": "https://api.github.com/users/pushkalkatara/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1661751498, "node_id": "MDU6TGFiZWwxNjYxNzUxNDk4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TFLiteConverter", "name": "TFLiteConverter", "color": "bfdadc", "default": false, "description": "For issues related to TFLite converter"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-03-06T21:01:47Z", "updated_at": "2020-03-12T02:50:07Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Google Colab\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (or github SHA if from source): pip install tf-nightly\r\n\r\n\r\n**Command used to run the converter or code if you\u2019re using the Python API**\r\nIf possible, please share a link to Colab/Jupyter/any notebook.\r\n\r\n```\r\nimport tensorflow as tf\r\nconverter = tf.lite.TFLiteConverter.from_saved_model(\"/content/trained_m2_data_38000steps_resnet101/saved_model\")\r\n\r\nconverter.experimental_new_converter = True  # Add this line\r\n\r\ntflite_model = converter.convert()\r\n```\r\n\r\n**The output from the converter invocation**\r\n\r\n```\r\nINFO:tensorflow:Saver not created because there are no variables in the graph to restore\r\n---------------------------------------------------------------------------\r\nConverterError                            Traceback (most recent call last)\r\n<ipython-input-9-4edb7ba34fed> in <module>()\r\n      4 converter.experimental_new_converter = True  # Add this line\r\n      5 \r\n----> 6 tflite_model = converter.convert()\r\n      7 \r\n      8 '''\r\n\r\n2 frames\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/lite/python/convert.py in toco_convert_protos(model_flags_str, toco_flags_str, input_data_str, debug_info_str, enable_mlir_converter)\r\n    225       stdout = _try_convert_to_unicode(stdout)\r\n    226       stderr = _try_convert_to_unicode(stderr)\r\n--> 227       raise ConverterError(\"See console for info.\\n%s\\n%s\\n\" % (stdout, stderr))\r\n    228   finally:\r\n    229     # Must manually cleanup files.\r\n\r\nConverterError: See console for info.\r\n2020-03-06 20:56:59.840264: W tensorflow/compiler/mlir/lite/python/tf_tfl_flatbuffer_helpers.cc:305] Ignored output_format.\r\n2020-03-06 20:56:59.840346: W tensorflow/compiler/mlir/lite/python/tf_tfl_flatbuffer_helpers.cc:308] Ignored drop_control_dependency.\r\n2020-03-06 20:57:00.599028: W tensorflow/core/common_runtime/gpu/gpu_bfc_allocator.cc:39] Overriding allow_growth setting because the TF_FORCE_GPU_ALLOW_GROWTH environment variable is set. Original config value was 0.\r\nloc(\"FirstStageFeatureExtractor/resnet_v1_101/resnet_v1_101/Pad\"): error: 'tfl.pad' op failed to verify that operand 0's rank equals operand 1's size\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/toco_from_protos\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/lite/toco/python/toco_from_protos.py\", line 93, in main\r\n    app.run(main=execute, argv=[sys.argv[0]] + unparsed)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/platform/app.py\", line 40, in run\r\n    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)\r\n  File \"/usr/local/lib/python3.6/dist-packages/absl/app.py\", line 299, in run\r\n    _run_main(main, args)\r\n  File \"/usr/local/lib/python3.6/dist-packages/absl/app.py\", line 250, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/lite/toco/python/toco_from_protos.py\", line 56, in execute\r\n    enable_mlir_converter)\r\nException: <unknown>:0: error: loc(\"FirstStageFeatureExtractor/resnet_v1_101/resnet_v1_101/Pad\"): 'tfl.pad' op failed to verify that operand 0's rank equals operand 1's size\r\n```\r\n\r\n**Also, please include a link to the saved model or GraphDef**\r\n\r\n```\r\nhttps://gist.github.com/dkurt/1fe03728dcb51955c89d30dfe6c11a3d\r\n```\r\n\r\n**Failure details**\r\nIf the conversion is successful, but the generated model is wrong,\r\nstate what is wrong:\r\n- Producing wrong results and/or decrease in accuracy\r\n- Producing correct results, but the model is slower than expected (model generated from old converter)\r\n\r\n\r\n**Any other info / logs**\r\n\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37400", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37400/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37400/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37400/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37400", "id": 577171718, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg1MDE4MTA0", "number": 37400, "title": "Add support for any Tensor type describable by TensorSpec to tf.data.Dataset.from_generator", "user": {"login": "lithuak", "id": 225642, "node_id": "MDQ6VXNlcjIyNTY0Mg==", "avatar_url": "https://avatars0.githubusercontent.com/u/225642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lithuak", "html_url": "https://github.com/lithuak", "followers_url": "https://api.github.com/users/lithuak/followers", "following_url": "https://api.github.com/users/lithuak/following{/other_user}", "gists_url": "https://api.github.com/users/lithuak/gists{/gist_id}", "starred_url": "https://api.github.com/users/lithuak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lithuak/subscriptions", "organizations_url": "https://api.github.com/users/lithuak/orgs", "repos_url": "https://api.github.com/users/lithuak/repos", "events_url": "https://api.github.com/users/lithuak/events{/privacy}", "received_events_url": "https://api.github.com/users/lithuak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 1178505529, "node_id": "MDU6TGFiZWwxMTc4NTA1NTI5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/prtype:bugfix", "name": "prtype:bugfix", "color": "159b2e", "default": false, "description": "PR to fix a bug"}, {"id": 1169365682, "node_id": "MDU6TGFiZWwxMTY5MzY1Njgy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:L", "name": "size:L", "color": "adafea", "default": false, "description": "CL Change Size: Large"}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 28, "created_at": "2020-03-06T20:57:41Z", "updated_at": "2020-03-18T01:31:13Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37400", "html_url": "https://github.com/tensorflow/tensorflow/pull/37400", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37400.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37400.patch"}, "body": "This PR addresses the #35342 issue which proposes to add the support for different types of tensors to tf.data.Dataset.from_generator.\r\n\r\nInitially `from_generator` had two parameters: output_types and output_shapes (one mandatory and the other one optional) that allowed user to specify the dtypes and optionally shapes of the output objects, but not the types of the objects themselves thus making it impossible for a generator function to output more complicated types of objects like tf.RaggedTensor or tf.SparseTensor.\r\n\r\nI followed here the advice from @jsimsa and added the output_spec parameter that, being specified, overrides the output_types and output_spec parameters and allows uses to specify the nested \r\nstructure of tf.TypeSpec objects thus opening the way for any output objects describable by TypeSpec.\r\n\r\nHere is the exact new semantics of the function that I've copied from the new docstring:\r\n\r\n```\r\n   There are three ways to specify the output format:\r\n\r\n    * Using only `output_types` argument. In this case the output of the\r\n    function will be assumed to consist of `tf.Tensor` objects with the unknown\r\n    shapes and with the types defined by `output_types`.\r\n\r\n    * Using both `output_types` and `output_shapes` arguments. In this case the\r\n    output will be assumed to consist of `tf.Tensor` objects with the shapes\r\n    and types defined by these two arguments together.\r\n\r\n    * Using `output_spec` argument. In this case the output will be assumed to\r\n    consist of objects with the classes, shapes and types defined by\r\n    `tf.TypeSpec` objects from `output_spec` argument.\r\n\r\n    One of the `output_types` and `output_spec` arguments must be specified.\r\n    If used together, `output_spec` will override both `output_types` and\r\n    `output_shapes`.\r\n\r\n```\r\nNote:\r\nI've also had to add \"dtype\" property to RaggedTensorSpec to make internal implementation possible. This change looked natural, since RaggedTensorSpec really had the \"dtype\", like all the other TensorSpecs (SparseTensorSpec, TensorArraySpec, etc.). It was also that the Structure module internally relied on the assumption that incoming objects would have the \"dtype\" property (see get_flat_tensor_types function).\r\nI would've commited it as a standalone PR, but I'm new to Tensorflow contribution process and I wasn't sure what is the best way to do things, since this PR whould rely on the previous one.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37399", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37399/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37399/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37399/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37399", "id": 577134274, "node_id": "MDU6SXNzdWU1NzcxMzQyNzQ=", "number": 37399, "title": "InvalidArgumentError: Cannot assign a device for operation conv2d_1/kernel/IsInitialized/VarIsInitializedOp: node conv2d_1/kernel/IsInitialized/VarIsInitializedOp (defined at /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/framework/ops.py:1748)  was explicitly assigned to /job:worker/replica:0/task:0/device:TPU:0 but available devices are [ /job:localhost/replica:0/task:0/device:CPU:0, /job:localhost/replica:0/task:0/device:XLA_CPU:0 ]. Make sure the device specification refers to a valid device. \t [[conv2d_1/kernel/IsInitialized/VarIsInitializedOp]]", "user": {"login": "raniaCht", "id": 40768817, "node_id": "MDQ6VXNlcjQwNzY4ODE3", "avatar_url": "https://avatars3.githubusercontent.com/u/40768817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raniaCht", "html_url": "https://github.com/raniaCht", "followers_url": "https://api.github.com/users/raniaCht/followers", "following_url": "https://api.github.com/users/raniaCht/following{/other_user}", "gists_url": "https://api.github.com/users/raniaCht/gists{/gist_id}", "starred_url": "https://api.github.com/users/raniaCht/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raniaCht/subscriptions", "organizations_url": "https://api.github.com/users/raniaCht/orgs", "repos_url": "https://api.github.com/users/raniaCht/repos", "events_url": "https://api.github.com/users/raniaCht/events{/privacy}", "received_events_url": "https://api.github.com/users/raniaCht/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "Saduf2019", "id": 59822926, "node_id": "MDQ6VXNlcjU5ODIyOTI2", "avatar_url": "https://avatars2.githubusercontent.com/u/59822926?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Saduf2019", "html_url": "https://github.com/Saduf2019", "followers_url": "https://api.github.com/users/Saduf2019/followers", "following_url": "https://api.github.com/users/Saduf2019/following{/other_user}", "gists_url": "https://api.github.com/users/Saduf2019/gists{/gist_id}", "starred_url": "https://api.github.com/users/Saduf2019/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Saduf2019/subscriptions", "organizations_url": "https://api.github.com/users/Saduf2019/orgs", "repos_url": "https://api.github.com/users/Saduf2019/repos", "events_url": "https://api.github.com/users/Saduf2019/events{/privacy}", "received_events_url": "https://api.github.com/users/Saduf2019/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "Saduf2019", "id": 59822926, "node_id": "MDQ6VXNlcjU5ODIyOTI2", "avatar_url": "https://avatars2.githubusercontent.com/u/59822926?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Saduf2019", "html_url": "https://github.com/Saduf2019", "followers_url": "https://api.github.com/users/Saduf2019/followers", "following_url": "https://api.github.com/users/Saduf2019/following{/other_user}", "gists_url": "https://api.github.com/users/Saduf2019/gists{/gist_id}", "starred_url": "https://api.github.com/users/Saduf2019/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Saduf2019/subscriptions", "organizations_url": "https://api.github.com/users/Saduf2019/orgs", "repos_url": "https://api.github.com/users/Saduf2019/repos", "events_url": "https://api.github.com/users/Saduf2019/events{/privacy}", "received_events_url": "https://api.github.com/users/Saduf2019/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-03-06T19:35:33Z", "updated_at": "2020-03-16T12:38:27Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our\r\n[GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md),\r\nwe only address code/doc bugs, performance issues, feature requests and\r\nbuild/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow): \r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04): \r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if\r\nthe issue happens on mobile device: \r\n- TensorFlow installed from (source or\r\nbinary): - TensorFlow version (use command below): \r\n- Python version: - Bazel\r\nversion (if compiling from source):\r\n- GCC/Compiler version (if compiling from\r\nsource): \r\n- CUDA/cuDNN version: - GPU model and memory:\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\n**Describe the expected behavior**\r\n\r\n**Standalone code to reproduce the issue** \r\nProvide a reproducible test case that is the bare minimum necessary to generate\r\nthe problem. If possible, please share a link to Colab/Jupyter/any notebook.\r\n\r\n**Other info / logs** Include any logs or source code that would be helpful to\r\ndiagnose the problem. If including tracebacks, please include the full\r\ntraceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37397", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37397/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37397/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37397/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37397", "id": 577098674, "node_id": "MDU6SXNzdWU1NzcwOTg2NzQ=", "number": 37397, "title": "tf.ragged.map_flat_values with tf.argmax on ragged axis produces wrong operation", "user": {"login": "stevemance", "id": 36911443, "node_id": "MDQ6VXNlcjM2OTExNDQz", "avatar_url": "https://avatars1.githubusercontent.com/u/36911443?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stevemance", "html_url": "https://github.com/stevemance", "followers_url": "https://api.github.com/users/stevemance/followers", "following_url": "https://api.github.com/users/stevemance/following{/other_user}", "gists_url": "https://api.github.com/users/stevemance/gists{/gist_id}", "starred_url": "https://api.github.com/users/stevemance/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stevemance/subscriptions", "organizations_url": "https://api.github.com/users/stevemance/orgs", "repos_url": "https://api.github.com/users/stevemance/repos", "events_url": "https://api.github.com/users/stevemance/events{/privacy}", "received_events_url": "https://api.github.com/users/stevemance/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-03-06T18:21:58Z", "updated_at": "2020-03-09T09:36:47Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\n- Have I written custom code (as opposed to using a stock\r\nexample script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g.,\r\nLinux Ubuntu 16.04): Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if\r\nthe issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or\r\nbinary): Pip\r\n - TensorFlow version (use command below): v2.1.0-rc2-17-ge5bf8de 2.1.0\r\n- Python version: Python 3.7.4\r\n- Bazel\r\nversion (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from\r\nsource): N/A\r\n- CUDA/cuDNN version: V10.1.243\r\n- GPU model and memory: GeForce RTX 2080 8G\r\n\r\n**Describe the current behavior**\r\nUsing a RaggedTensor flat mapped into tf.argmax and the flattened ragged dimension as the axis to argmax against, the wrong shape/operation results.  [batch, None, N] using map_flat_values(tf.argmax, <tensor>, -2) results in a [batch, None] tensor.\r\n\r\n**Describe the expected behavior**\r\nI'd expect to result in a [batch, N] tensor.\r\n\r\n**Standalone code to reproduce the issue** \r\n```\r\nimport tensorflow as tf\r\nfoo = tf.ragged.constant([[[0,1],[2,3]],[[4,5]],[[6,7]],[[8,9]]], dtype=tf.int64, ragged_rank=1)\r\n\r\n# Mapped into the ragged axis (should produce a [4, 2])\r\nbar = tf.ragged.map_flat_values(tf.argmax, foo, -2)\r\nbar\r\n<tf.RaggedTensor [[4, 4], [], [], []]>\r\nbar.shape\r\nTensorShape([4, None])\r\n\r\n# Mapped into the non-ragged axis\r\nbar = tf.ragged.map_flat_values(tf.argmax, foo, -1)\r\nbar\r\n<tf.RaggedTensor [[1, 1], [1], [1], [1]]>\r\n# Notice the same shape...\r\nbar.shape\r\nTensorShape([4, None])\r\n```\r\nWhat I expect is something like this:\r\n```\r\nimport tensorflow as tf\r\nfoo = tf.ragged.constant([[[0,1],[2,3]],[[4,5]],[[6,7]],[[8,9]]], dtype=tf.int64, ragged_rank=1)\r\nrow_splits = foo.row_splits\r\nold_row=row_splits[0]\r\nbar = []\r\nfor row in row_splits[1:]:\r\n    bar.append(tf.argmax(foo.values[old_row:row, ...],-2))\r\n    old_row=row\r\nbar = tf.stack(bar)\r\nbar\r\n<tf.Tensor: shape=(4, 2), dtype=int64, numpy=\r\narray([[1, 1],\r\n       [0, 0],\r\n       [0, 0],\r\n       [0, 0]])>\r\nbar.shape\r\nTensorShape([4, 2])\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37395", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37395/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37395/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37395/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/37395", "id": 577016354, "node_id": "MDExOlB1bGxSZXF1ZXN0Mzg0ODkwOTky", "number": 37395, "title": "Puts a ckeck on kernel_size=0 and raises an error if kernel_size=0 in conv2D", "user": {"login": "ghosalsattam", "id": 39326440, "node_id": "MDQ6VXNlcjM5MzI2NDQw", "avatar_url": "https://avatars2.githubusercontent.com/u/39326440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghosalsattam", "html_url": "https://github.com/ghosalsattam", "followers_url": "https://api.github.com/users/ghosalsattam/followers", "following_url": "https://api.github.com/users/ghosalsattam/following{/other_user}", "gists_url": "https://api.github.com/users/ghosalsattam/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghosalsattam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghosalsattam/subscriptions", "organizations_url": "https://api.github.com/users/ghosalsattam/orgs", "repos_url": "https://api.github.com/users/ghosalsattam/repos", "events_url": "https://api.github.com/users/ghosalsattam/events{/privacy}", "received_events_url": "https://api.github.com/users/ghosalsattam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2020-03-06T15:49:03Z", "updated_at": "2020-03-19T17:16:50Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/37395", "html_url": "https://github.com/tensorflow/tensorflow/pull/37395", "diff_url": "https://github.com/tensorflow/tensorflow/pull/37395.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/37395.patch"}, "body": "fixes issue #37334"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37393", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37393/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37393/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/37393/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/37393", "id": 576991498, "node_id": "MDU6SXNzdWU1NzY5OTE0OTg=", "number": 37393, "title": "tf.image.ssim_multiscale broke in tensorflow 2.1.0-rc2", "user": {"login": "isaacgerg", "id": 11971499, "node_id": "MDQ6VXNlcjExOTcxNDk5", "avatar_url": "https://avatars0.githubusercontent.com/u/11971499?v=4", "gravatar_id": "", "url": "https://api.github.com/users/isaacgerg", "html_url": "https://github.com/isaacgerg", "followers_url": "https://api.github.com/users/isaacgerg/followers", "following_url": "https://api.github.com/users/isaacgerg/following{/other_user}", "gists_url": "https://api.github.com/users/isaacgerg/gists{/gist_id}", "starred_url": "https://api.github.com/users/isaacgerg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/isaacgerg/subscriptions", "organizations_url": "https://api.github.com/users/isaacgerg/orgs", "repos_url": "https://api.github.com/users/isaacgerg/repos", "events_url": "https://api.github.com/users/isaacgerg/events{/privacy}", "received_events_url": "https://api.github.com/users/isaacgerg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1903591931, "node_id": "MDU6TGFiZWwxOTAzNTkxOTMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.2", "name": "TF 2.2", "color": "0052cc", "default": false, "description": "Issues related to TF 2.2"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2020-03-06T15:08:52Z", "updated_at": "2020-03-19T17:46:27Z", "closed_at": null, "author_association": "NONE", "body": "**System information** \r\nPython 3.7.6 on Windows 10, x64. \r\n\r\nUsing tensorflow 2.1.0-rc2.\r\n\r\nGPU Hardware: pciBusID: 0000:01:00.0 name: TITAN X (Pascal) computeCapability: 6.1\r\ncoreClock: 1.531GHz coreCount: 28 deviceMemorySize: 12.00GiB deviceMemoryBandwidth: 447.48GiB/s\r\n\r\n**Describe the current behavior**\r\n\r\nCode should print the word 'done'\r\n\r\n**Describe the expected behavior**\r\n\r\ntensorflow.python.framework.errors_impl.OperatorNotAllowedInGraphError: using a `tf.Tensor` as a Python `bool` is not allowed in Graph execution. Use Eager execution or decorate this function with @tf.function.\r\n\r\n\r\n**Standalone code to reproduce the issue** \r\n```\r\nimport tensorflow as tf\r\ntf.test.gpu_device_name()\r\nprint(tf.__version__)\r\n\r\n# Build model\r\nimg_input = tf.keras.layers.Input(shape=(128, 128, 1))\r\nimg_output = tf.keras.layers.Convolution2D(1, 1)(img_input) \r\nmodel = tf.keras.models.Model(img_input, img_output)\r\n\r\n# Add reconstruction loss \r\n# Toggle between the next 2 lines of code to see that ssim_multiscale does not work but simple MSE does.\r\nloss = tf.reduce_mean(tf.image.ssim_multiscale(img_input, img_output, 1.0))  # This loss does not\r\n#loss = tf.reduce_mean((img_input - img_output)**2)  # This loss works\r\nmodel.add_loss(loss)\r\n\r\nmodel.compile(optimizer = tf.keras.optimizers.RMSprop(lr=1e-4), loss = None)  \r\nmodel.summary()\r\n\r\n# The error Iget when using the ssim_multiscale loss is:\r\n#tensorflow.python.framework.errors_impl.OperatorNotAllowedInGraphError: using a `tf.Tensor` as a Python `bool` is not allowed in Graph execution. Use Eager execution or decorate this function with @tf.function.\r\n    \r\nprint('done')\r\n```\r\n\r\n**Other info / logs** \r\n\r\nThis problem is present in 1.15.0 and 2.1.0.  This bug is not present in in 1.13.1.\r\n\r\nI have tried several image metrics in tf.image including ssim and psnr and they all result in the same error.\r\n"}]