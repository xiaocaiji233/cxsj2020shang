[{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26245", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26245/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26245/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26245/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26245", "id": 415969582, "node_id": "MDU6SXNzdWU0MTU5Njk1ODI=", "number": 26245, "title": "InvalidArgumentError Incompatible shapes when multi_gpu_model used on LSTM model in TF 2.0", "user": {"login": "ghego", "id": 837725, "node_id": "MDQ6VXNlcjgzNzcyNQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/837725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghego", "html_url": "https://github.com/ghego", "followers_url": "https://api.github.com/users/ghego/followers", "following_url": "https://api.github.com/users/ghego/following{/other_user}", "gists_url": "https://api.github.com/users/ghego/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghego/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghego/subscriptions", "organizations_url": "https://api.github.com/users/ghego/orgs", "repos_url": "https://api.github.com/users/ghego/repos", "events_url": "https://api.github.com/users/ghego/events{/privacy}", "received_events_url": "https://api.github.com/users/ghego/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 1345373822, "node_id": "MDU6TGFiZWwxMzQ1MzczODIy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:ds-triaged", "name": "stat:ds-triaged", "color": "f2dea7", "default": false, "description": "Internal label for triaging"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-03-01T07:05:45Z", "updated_at": "2019-06-05T20:53:43Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.0.0-dev20190228\r\n- Python version: 3.7\r\n- CUDA/cuDNN version: 10/7.4\r\n- GPU model and memory:  Tesla M60 on AWS g3.8xlarge\r\n\r\n**Describe the current behavior**\r\n`multi_gpu_model` fails to parallelize LSTM model. Things I've tried without success:\r\n- setting  `cpu_relocation=True` parameter\r\n- disabling eager mode\r\n\r\n**Describe the expected behavior**\r\nthe code below should run instead of giving an error.\r\n\r\n**Code to reproduce the issue**\r\n\r\n```python\r\nimport tensorflow as tf\r\nfrom tensorflow.keras.datasets import imdb\r\nfrom tensorflow.keras.preprocessing.sequence import pad_sequences\r\nfrom tensorflow.keras.models import Sequential\r\nfrom tensorflow.keras.layers import Dense, LSTM, Embedding\r\nfrom tensorflow.keras.utils import multi_gpu_model\r\n\r\nvocab_size= 20000\r\nmaxlen=80\r\n\r\n(X_train, y_train), (X_test, y_test) = \\\r\n    imdb.load_data(num_words=vocab_size)\r\n\r\nX_train_pad = pad_sequences(X_train, maxlen=maxlen)\r\nX_test_pad = pad_sequences(X_test, maxlen=maxlen)\r\n\r\nwith tf.device('/cpu:0'):\r\n    model = Sequential([\r\n        Embedding(vocab_size, 100, input_length=maxlen),\r\n        LSTM(64, dropout=0.2, recurrent_dropout=0.2),\r\n        Dense(1, activation='sigmoid')\r\n    ])\r\n\r\nmodel = multi_gpu_model(model, 2)\r\n\r\nmodel.compile(loss='binary_crossentropy',\r\n              optimizer='rmsprop',\r\n              metrics=['accuracy'])\r\n\r\nmodel.fit(X_train_pad, y_train,\r\n          batch_size=2048,\r\n          epochs=2,\r\n          shuffle=True)\r\n```\r\n\r\n**Other info / logs**\r\n\r\n```python\r\nW0301 07:00:25.055628 139938579490560 tf_logging.py:161] <tensorflow.python.keras.layers.recurrent.UnifiedLSTM object at 0x7f45f84f5470>: Note that this layer is not optimized for performance. Please use tf.keras.layers.CuDNNLSTM for better performance on GPU.\r\n\r\nEpoch 1/2\r\n\r\n---------------------------------------------------------------------------\r\nInvalidArgumentError                      Traceback (most recent call last)\r\n<ipython-input-6-827e285c76cb> in <module>\r\n     33           batch_size=2048,\r\n     34           epochs=2,\r\n---> 35           shuffle=True)\r\n\r\n~/miniconda3/envs/tf2/lib/python3.7/site-packages/tensorflow/python/keras/engine/training.py in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_freq, max_queue_size, workers, use_multiprocessing, **kwargs)\r\n    871           validation_steps=validation_steps,\r\n    872           validation_freq=validation_freq,\r\n--> 873           steps_name='steps_per_epoch')\r\n    874 \r\n    875   def evaluate(self,\r\n\r\n~/miniconda3/envs/tf2/lib/python3.7/site-packages/tensorflow/python/keras/engine/training_arrays.py in model_iteration(model, inputs, targets, sample_weights, batch_size, epochs, verbose, callbacks, val_inputs, val_targets, val_sample_weights, shuffle, initial_epoch, steps_per_epoch, validation_steps, validation_freq, mode, validation_in_fit, prepared_feed_values_from_dataset, steps_name, **kwargs)\r\n    349 \r\n    350         # Get outputs.\r\n--> 351         batch_outs = f(ins_batch)\r\n    352         if not isinstance(batch_outs, list):\r\n    353           batch_outs = [batch_outs]\r\n\r\n~/miniconda3/envs/tf2/lib/python3.7/site-packages/tensorflow/python/keras/backend.py in __call__(self, inputs)\r\n   3215         value = math_ops.cast(value, tensor.dtype)\r\n   3216       converted_inputs.append(value)\r\n-> 3217     outputs = self._graph_fn(*converted_inputs)\r\n   3218     return nest.pack_sequence_as(self._outputs_structure,\r\n   3219                                  [x.numpy() for x in outputs])\r\n\r\n~/miniconda3/envs/tf2/lib/python3.7/site-packages/tensorflow/python/eager/function.py in __call__(self, *args, **kwargs)\r\n    523       raise TypeError(\"Keyword arguments {} unknown. Expected {}.\".format(\r\n    524           list(kwargs.keys()), list(self._arg_keywords)))\r\n--> 525     return self._call_flat(args)\r\n    526 \r\n    527   def _filtered_call(self, args, kwargs):\r\n\r\n~/miniconda3/envs/tf2/lib/python3.7/site-packages/tensorflow/python/eager/function.py in _call_flat(self, args)\r\n    592     # Only need to override the gradient in graph mode and when we have outputs.\r\n    593     if context.executing_eagerly() or not self.outputs:\r\n--> 594       outputs = self._inference_function.call(ctx, args)\r\n    595     else:\r\n    596       self._register_gradient()\r\n\r\n~/miniconda3/envs/tf2/lib/python3.7/site-packages/tensorflow/python/eager/function.py in call(self, ctx, args)\r\n    380             attrs=(\"executor_type\", executor_type,\r\n    381                    \"config_proto\", config),\r\n--> 382             ctx=ctx)\r\n    383       # Replace empty list with None\r\n    384       outputs = outputs or None\r\n\r\n~/miniconda3/envs/tf2/lib/python3.7/site-packages/tensorflow/python/eager/execute.py in quick_execute(op_name, num_outputs, inputs, attrs, ctx, name)\r\n     64     else:\r\n     65       message = e.message\r\n---> 66     six.raise_from(core._status_to_exception(e.code, message), None)\r\n     67   except TypeError as e:\r\n     68     if any(ops._is_keras_symbolic_tensor(x) for x in inputs):\r\n\r\n~/miniconda3/envs/tf2/lib/python3.7/site-packages/six.py in raise_from(value, from_value)\r\n\r\nInvalidArgumentError: Incompatible shapes: [1024,64] vs. [2048,64]\r\n\t [[{{node sequential_5_1/unified_lstm_5/while/body/_1008/mul_6}}]]\r\n\t [[training_3/RMSprop/gradients/loss_5/dense_5_loss/binary_crossentropy/Mean_grad/Prod/_842]] [Op:__inference_keras_scratch_graph_32546]\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26244", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26244/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26244/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26244/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26244", "id": 415955656, "node_id": "MDU6SXNzdWU0MTU5NTU2NTY=", "number": 26244, "title": "FailedPreconditionError when running Convolutional Keras model on CPU in TF 2.0", "user": {"login": "ghego", "id": 837725, "node_id": "MDQ6VXNlcjgzNzcyNQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/837725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghego", "html_url": "https://github.com/ghego", "followers_url": "https://api.github.com/users/ghego/followers", "following_url": "https://api.github.com/users/ghego/following{/other_user}", "gists_url": "https://api.github.com/users/ghego/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghego/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghego/subscriptions", "organizations_url": "https://api.github.com/users/ghego/orgs", "repos_url": "https://api.github.com/users/ghego/repos", "events_url": "https://api.github.com/users/ghego/events{/privacy}", "received_events_url": "https://api.github.com/users/ghego/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 736653459, "node_id": "MDU6TGFiZWw3MzY2NTM0NTk=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:eager", "name": "comp:eager", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gadagashwini", "id": 48476109, "node_id": "MDQ6VXNlcjQ4NDc2MTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/48476109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadagashwini", "html_url": "https://github.com/gadagashwini", "followers_url": "https://api.github.com/users/gadagashwini/followers", "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}", "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions", "organizations_url": "https://api.github.com/users/gadagashwini/orgs", "repos_url": "https://api.github.com/users/gadagashwini/repos", "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}", "received_events_url": "https://api.github.com/users/gadagashwini/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gadagashwini", "id": 48476109, "node_id": "MDQ6VXNlcjQ4NDc2MTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/48476109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadagashwini", "html_url": "https://github.com/gadagashwini", "followers_url": "https://api.github.com/users/gadagashwini/followers", "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}", "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions", "organizations_url": "https://api.github.com/users/gadagashwini/orgs", "repos_url": "https://api.github.com/users/gadagashwini/repos", "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}", "received_events_url": "https://api.github.com/users/gadagashwini/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2019-03-01T06:05:13Z", "updated_at": "2020-03-19T09:06:34Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.0.0-dev20190228\r\n- Python version: 3.7\r\n- CUDA/cuDNN version: 10/7.4\r\n- GPU model and memory:  Tesla M60 on AWS g3.8xlarge\r\n\r\n\r\n**Describe the current behavior**\r\nTraining a model defined on the CPU raises a `FailedPreconditionError` when using a machine with a GPU in TF 2.0 nightly.\r\n\r\n**Describe the expected behavior**\r\nNo error is raised if I use one of the following fixes:\r\n1) use `tensorflow.compat.v1.disable_eager_execution()`\r\n2) remove the `Conv2D` layer\r\n3) remove the `batch_size` and `epochs` arguments from the `.fit` call\r\n\r\nHowever, the context setter seems to have no effect and training is happening on the GPU anyways (I can tell by how fast it's training)\r\n\r\nthe behavior seems weird, can anyone explain what's going on?\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport tensorflow as tf\r\nfrom tensorflow.keras.datasets import cifar10\r\nfrom tensorflow.keras.models import Sequential\r\nfrom tensorflow.keras.layers import Flatten, Dense\r\nfrom tensorflow.keras.layers import Conv2D\r\n\r\n(X_train, y_train), _ = cifar10.load_data()\r\nX_train = X_train.astype('float32') / 255.0\r\n\r\nwith tf.device('cpu:0'):\r\n    model = Sequential([\r\n        Conv2D(32, (3, 3), input_shape=(32, 32, 3)),\r\n        Flatten(),\r\n        Dense(10, activation='softmax')\r\n    ])\r\n    \r\n    model.compile(loss='sparse_categorical_crossentropy',\r\n                  optimizer='rmsprop',\r\n                  metrics=['accuracy'])\r\n\r\n    \r\nmodel.fit(X_train, y_train,\r\n          batch_size=1024,\r\n          epochs=2)\r\n```\r\n\r\n**Other info / logs**\r\ntraceback:\r\n```python\r\n---------------------------------------------------------------------------\r\nFailedPreconditionError                   Traceback (most recent call last)\r\n<ipython-input-1-d00bb2a707a4> in <module>\r\n     24 model.fit(X_train, y_train,\r\n     25           batch_size=1024,\r\n---> 26           epochs=2)\r\n\r\n~/miniconda3/envs/tf2/lib/python3.7/site-packages/tensorflow/python/keras/engine/training.py in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_freq, max_queue_size, workers, use_multiprocessing, **kwargs)\r\n    871           validation_steps=validation_steps,\r\n    872           validation_freq=validation_freq,\r\n--> 873           steps_name='steps_per_epoch')\r\n    874 \r\n    875   def evaluate(self,\r\n\r\n~/miniconda3/envs/tf2/lib/python3.7/site-packages/tensorflow/python/keras/engine/training_arrays.py in model_iteration(model, inputs, targets, sample_weights, batch_size, epochs, verbose, callbacks, val_inputs, val_targets, val_sample_weights, shuffle, initial_epoch, steps_per_epoch, validation_steps, validation_freq, mode, validation_in_fit, prepared_feed_values_from_dataset, steps_name, **kwargs)\r\n    349 \r\n    350         # Get outputs.\r\n--> 351         batch_outs = f(ins_batch)\r\n    352         if not isinstance(batch_outs, list):\r\n    353           batch_outs = [batch_outs]\r\n\r\n~/miniconda3/envs/tf2/lib/python3.7/site-packages/tensorflow/python/keras/backend.py in __call__(self, inputs)\r\n   3215         value = math_ops.cast(value, tensor.dtype)\r\n   3216       converted_inputs.append(value)\r\n-> 3217     outputs = self._graph_fn(*converted_inputs)\r\n   3218     return nest.pack_sequence_as(self._outputs_structure,\r\n   3219                                  [x.numpy() for x in outputs])\r\n\r\n~/miniconda3/envs/tf2/lib/python3.7/site-packages/tensorflow/python/eager/function.py in __call__(self, *args, **kwargs)\r\n    523       raise TypeError(\"Keyword arguments {} unknown. Expected {}.\".format(\r\n    524           list(kwargs.keys()), list(self._arg_keywords)))\r\n--> 525     return self._call_flat(args)\r\n    526 \r\n    527   def _filtered_call(self, args, kwargs):\r\n\r\n~/miniconda3/envs/tf2/lib/python3.7/site-packages/tensorflow/python/eager/function.py in _call_flat(self, args)\r\n    592     # Only need to override the gradient in graph mode and when we have outputs.\r\n    593     if context.executing_eagerly() or not self.outputs:\r\n--> 594       outputs = self._inference_function.call(ctx, args)\r\n    595     else:\r\n    596       self._register_gradient()\r\n\r\n~/miniconda3/envs/tf2/lib/python3.7/site-packages/tensorflow/python/eager/function.py in call(self, ctx, args)\r\n    380             attrs=(\"executor_type\", executor_type,\r\n    381                    \"config_proto\", config),\r\n--> 382             ctx=ctx)\r\n    383       # Replace empty list with None\r\n    384       outputs = outputs or None\r\n\r\n~/miniconda3/envs/tf2/lib/python3.7/site-packages/tensorflow/python/eager/execute.py in quick_execute(op_name, num_outputs, inputs, attrs, ctx, name)\r\n     64     else:\r\n     65       message = e.message\r\n---> 66     six.raise_from(core._status_to_exception(e.code, message), None)\r\n     67   except TypeError as e:\r\n     68     if any(ops._is_keras_symbolic_tensor(x) for x in inputs):\r\n\r\n~/miniconda3/envs/tf2/lib/python3.7/site-packages/six.py in raise_from(value, from_value)\r\n\r\nFailedPreconditionError: Error while reading resource variable _AnonymousVar15 from Container: localhost. This could mean that the variable was uninitialized. Invalid argument: Trying to access resource _AnonymousVar15 located in device /job:localhost/replica:0/task:0/device:GPU:0 from device /job:localhost/replica:0/task:0/device:CPU:0\r\n\t [[{{node training/RMSprop/RMSprop/update_3/mul/ReadVariableOp}}]] [Op:__inference_keras_scratch_graph_646]\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26215", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26215/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26215/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26215/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26215", "id": 415667874, "node_id": "MDU6SXNzdWU0MTU2Njc4NzQ=", "number": 26215, "title": "option for returning *state* sequences in tf.keras.layers.rnn", "user": {"login": "andrebeu", "id": 12631978, "node_id": "MDQ6VXNlcjEyNjMxOTc4", "avatar_url": "https://avatars0.githubusercontent.com/u/12631978?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrebeu", "html_url": "https://github.com/andrebeu", "followers_url": "https://api.github.com/users/andrebeu/followers", "following_url": "https://api.github.com/users/andrebeu/following{/other_user}", "gists_url": "https://api.github.com/users/andrebeu/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrebeu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrebeu/subscriptions", "organizations_url": "https://api.github.com/users/andrebeu/orgs", "repos_url": "https://api.github.com/users/andrebeu/repos", "events_url": "https://api.github.com/users/andrebeu/events{/privacy}", "received_events_url": "https://api.github.com/users/andrebeu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-28T15:03:27Z", "updated_at": "2019-02-28T20:07:58Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 1.13\r\n- Are you willing to contribute it (Yes/No): No\r\n\r\nCurrently tf.keras.layers.RNN has an option for returning the sequnces of outputs `return_sequences`, and an option for returning the final state `return_state`.  Sometimes it is useful to analyze the trajectory of c-states for a given sequence of inputs. Therefore I'd like to recommend including an option to `return_state_sequences` where just like `return_sequences` returns a sequence of outputs, `return_state_sequences` returns the sequence of internal states. \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26201", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26201/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26201/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26201/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26201", "id": 415537138, "node_id": "MDU6SXNzdWU0MTU1MzcxMzg=", "number": 26201, "title": "The procedure of building the TF r1.13 is not clear. (CUDA10.0 + cuDNN7.5.0+TensorRT5.0.2.6)", "user": {"login": "oscarriddle", "id": 13745902, "node_id": "MDQ6VXNlcjEzNzQ1OTAy", "avatar_url": "https://avatars0.githubusercontent.com/u/13745902?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oscarriddle", "html_url": "https://github.com/oscarriddle", "followers_url": "https://api.github.com/users/oscarriddle/followers", "following_url": "https://api.github.com/users/oscarriddle/following{/other_user}", "gists_url": "https://api.github.com/users/oscarriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/oscarriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oscarriddle/subscriptions", "organizations_url": "https://api.github.com/users/oscarriddle/orgs", "repos_url": "https://api.github.com/users/oscarriddle/repos", "events_url": "https://api.github.com/users/oscarriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/oscarriddle/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1205657510, "node_id": "MDU6TGFiZWwxMjA1NjU3NTEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:centos", "name": "subtype:centos", "color": "b619ea", "default": false, "description": "Centos Build/Installation issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-02-28T09:56:11Z", "updated_at": "2019-03-05T02:58:55Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): CentOS 7\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source \r\n- TensorFlow version: r1.13\r\n- Python version: 3.6\r\n- Installed using virtualenv? pip? conda?: pip3\r\n- Bazel version (if compiling from source): 0.19.1\r\n- GCC/Compiler version (if compiling from source): 4.9.3\r\n- CUDA/cuDNN version: 10.0/7.5.0\r\n- GPU model and memory: TitanXP\r\n\r\n**Describe the problem**\r\nThe Tensorflow r1.13 source code is get from [releases](https://github.com/tensorflow/tensorflow/releases).\r\nThen I tried to build tf 1.13 with cuda10.0 and cudnn7.5.0 and TensorRT5.0.2.6.\r\nAfter the configuration, I tried command \r\n`bazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package`\r\nBut get below error:\r\n```\r\n$ bazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package\r\nStarting local Bazel server and connecting to it...\r\nINFO: Options provided by the client:\r\n  Inherited 'common' options: --isatty=1 --terminal_columns=176\r\nERROR: Config value opt is not defined in any .rc file\r\n\r\n```\r\n1) Is bazel 0.19.1 not compatible with TF1.13?\r\n2) Is my configuration incorrect?\r\n3) Is the build command incorrect?\r\n\r\n\r\n\r\nBelow shows my configure:\r\n```\r\n$ ./configure\r\nWARNING: Running Bazel server needs to be killed, because the startup options are different.\r\nWARNING: --batch mode is deprecated. Please instead explicitly shut down your Bazel server using the command \"bazel shutdown\".\r\nYou have bazel 0.19.1 installed.\r\nDo you wish to build TensorFlow with XLA JIT support? [Y/n]: n\r\nNo XLA JIT support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with OpenCL SYCL support? [y/N]: n\r\nNo OpenCL SYCL support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with ROCm support? [y/N]: n\r\nNo ROCm support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with CUDA support? [y/N]: y\r\nCUDA support will be enabled for TensorFlow.\r\n\r\nPlease specify the CUDA SDK version you want to use. [Leave empty to default to CUDA 10.0]: \r\n\r\n\r\nPlease specify the location where CUDA 10.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: /home/web_server/xiaolun/cuda-10.0\r\n\r\n\r\nPlease specify the cuDNN version you want to use. [Leave empty to default to cuDNN 7]: \r\n\r\n\r\nPlease specify the location where cuDNN 7 library is installed. Refer to README.md for more details. [Default is /home/web_server/xiaolun/cuda-10.0]: \r\n\r\n\r\nDo you wish to build TensorFlow with TensorRT support? [y/N]: y\r\nTensorRT support will be enabled for TensorFlow.\r\n\r\nPlease specify the location where TensorRT is installed. [Default is /usr/lib/x86_64-linux-gnu]:/home/web_server/xiaolun/TensorRT-5.0.2.6-10.0\r\n\r\n\r\nPlease specify the locally installed NCCL version you want to use. [Default is to use https://github.com/nvidia/nccl]: 2.3\r\n\r\n\r\nPlease specify the location where NCCL 2 library is installed. Refer to README.md for more details. [Default is /home/web_server/xiaolun/cuda-10.0]:\r\n\r\n\r\nNCCL found at /media/disk1/fordata/web_server/project/xiaolun/cuda-10.0/lib64/libnccl.so.2\r\nAssuming NCCL header path is /media/disk1/fordata/web_server/project/xiaolun/cuda-10.0/lib64/../include/nccl.h\r\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\r\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\r\nPlease note that each additional compute capability significantly increases your build time and binary size. [Default is: 3.5,7.0]: 7.0\r\n\r\n\r\nDo you want to use clang as CUDA compiler? [y/N]: \r\nnvcc will be used as CUDA compiler.\r\n\r\nPlease specify which gcc should be used by nvcc as the host compiler. [Default is /home/web_server/gcc-4.9.3/bin/gcc]: \r\n\r\n\r\nDo you wish to build TensorFlow with MPI support? [y/N]: n\r\nNo MPI support will be enabled for TensorFlow.\r\n\r\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native -Wno-sign-compare]: \r\n\r\n\r\nWould you like to interactively configure ./WORKSPACE for Android builds? [y/N]: n\r\nNot configuring the WORKSPACE for Android builds.\r\n\r\nPreconfigured Bazel build configs. You can use any of the below by adding \"--config=<>\" to your build command. See .bazelrc for more details.\r\n\t--config=mkl         \t# Build with MKL support.\r\n\t--config=monolithic  \t# Config for mostly static monolithic build.\r\n\t--config=gdr         \t# Build with GDR support.\r\n\t--config=verbs       \t# Build with libverbs support.\r\n\t--config=ngraph      \t# Build with Intel nGraph support.\r\n\t--config=dynamic_kernels\t# (Experimental) Build kernels into separate shared objects.\r\nPreconfigured Bazel build configs to DISABLE default on features:\r\n\t--config=noaws       \t# Disable AWS S3 filesystem support.\r\n\t--config=nogcp       \t# Disable GCP support.\r\n\t--config=nohdfs      \t# Disable HDFS support.\r\n\t--config=noignite    \t# Disable Apacha Ignite support.\r\n\t--config=nokafka     \t# Disable Apache Kafka support.\r\n\t--config=nonccl      \t# Disable NVIDIA NCCL support.\r\nConfiguration finished\r\n\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26200", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26200/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26200/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26200/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26200", "id": 415517396, "node_id": "MDU6SXNzdWU0MTU1MTczOTY=", "number": 26200, "title": "tf.nn.ctc_beam_search_decoder is very slow on tf >=1.4", "user": {"login": "tianq01", "id": 9604700, "node_id": "MDQ6VXNlcjk2MDQ3MDA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9604700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tianq01", "html_url": "https://github.com/tianq01", "followers_url": "https://api.github.com/users/tianq01/followers", "following_url": "https://api.github.com/users/tianq01/following{/other_user}", "gists_url": "https://api.github.com/users/tianq01/gists{/gist_id}", "starred_url": "https://api.github.com/users/tianq01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tianq01/subscriptions", "organizations_url": "https://api.github.com/users/tianq01/orgs", "repos_url": "https://api.github.com/users/tianq01/repos", "events_url": "https://api.github.com/users/tianq01/events{/privacy}", "received_events_url": "https://api.github.com/users/tianq01/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-02-28T09:09:02Z", "updated_at": "2019-11-14T07:54:11Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes \r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): tried 1.4, 1.5, 1.8, 1.9, 1.12\r\n- Python version: 3.5\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: CUDA8 for 1.4, CUDA9 for >=1.5\r\n- GPU model and memory:P100\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\n\r\nOur text recognizer is based on CRNN model  and CTC. it was developed based on tf 1.3 and performs well.\r\nrecently we tried to upgrade the tensorflow to tf 1.9 and find the recognizer inference time increases a lot.\r\nwe identified the slow down is caused by tf.nn.ctc_beam_search_decoder op using this way:\r\n\r\nfor this line of code:\r\ndecoded, prob = tf.nn.ctc_beam_search_decoder(logits, seq_length)\r\n\r\nrunning time for session.run(logits) is fine, however session.run(decoded) is very slow\r\n\r\nwe verified the problem occurrs on tf versions 1.12, 1.9, 1.8, 1.5, 1.4\r\nwe also verified the model ckpt trained with tf 1.9 is running inference fast with tf 1.3. similarly, model ckpt trained with tf 1.4/1.5 also running fast with tf 1.3\r\n\r\nit looks there is no big change for beam search decoder op between 1.3 and 1.4. googling the problem got no luck either.\r\n\r\ncan you please take a look?\r\nwe could provide the pb file and a small inference script if needed. since pb file size is big, we do not upload it at this point\r\nthanks.\r\n\r\n**Describe the expected behavior**\r\n\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26191", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26191/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26191/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26191/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26191", "id": 415411714, "node_id": "MDU6SXNzdWU0MTU0MTE3MTQ=", "number": 26191, "title": "warnings (please do not import '@grpc//third_party/nanopb:pb_common.c' directly ; depends on deprecated target ; ...) during build from source", "user": {"login": "Thajobe", "id": 43674398, "node_id": "MDQ6VXNlcjQzNjc0Mzk4", "avatar_url": "https://avatars2.githubusercontent.com/u/43674398?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Thajobe", "html_url": "https://github.com/Thajobe", "followers_url": "https://api.github.com/users/Thajobe/followers", "following_url": "https://api.github.com/users/Thajobe/following{/other_user}", "gists_url": "https://api.github.com/users/Thajobe/gists{/gist_id}", "starred_url": "https://api.github.com/users/Thajobe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Thajobe/subscriptions", "organizations_url": "https://api.github.com/users/Thajobe/orgs", "repos_url": "https://api.github.com/users/Thajobe/repos", "events_url": "https://api.github.com/users/Thajobe/events{/privacy}", "received_events_url": "https://api.github.com/users/Thajobe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-02-28T02:01:43Z", "updated_at": "2019-03-01T17:19:30Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04.2 LTS\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: r1.12\r\n- Python version: Python 3.6.8 :: Anaconda, Inc.\r\n- Installed using virtualenv? pip? conda?: conda\r\n- Bazel version (if compiling from source): 0.19.2\r\n- GCC/Compiler version (if compiling from source): 6.5.0\r\n- CUDA/cuDNN version: 9.0 / 7.5.0\r\n- GPU model and memory: GeForce GT 650M / 2 GB\r\n\r\n\r\n\r\n**Describe the problem**\r\nI try to compile TF from source to get compute capability 3.0 support.\r\nTherefore I followed more or less the guide on [this site](https://medium.com/@mccann.matt/compiling-tensorflow-with-cuda-3-0-support-42d8fe0bf3b5).\r\nBut I get warnings and the compilation failed.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n./configure\r\n\r\nbazel build --config=opt --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" //tensorflow/tools/pip_package:build_pip_package\r\n\r\n(see details below)\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nNot sure if important but I added `import /home/jonathan/tensorflow/tools/bazel.rc` on top line of(hide file) \"/home/jonathan/tensorflow/.bazelrc \" as stated [here](https://github.com/tensorflow/tensorflow/issues/23401#issuecomment-435827786).\r\n\r\n\r\n\r\n```\r\n$ ./configure\r\nWARNING: --batch mode is deprecated. Please instead explicitly shut down your Bazel server using the command \"bazel shutdown\".\r\nYou have bazel 0.19.2 installed.\r\nPlease specify the location of python. [Default is /home/jonathan/anaconda2/envs/tf_cu90/bin/python]: \r\n\r\n\r\nFound possible Python library paths:\r\n  /home/jonathan/anaconda2/envs/tf_cu90/lib/python3.6/site-packages\r\nPlease input the desired Python library path to use.  Default is [/home/jonathan/anaconda2/envs/tf_cu90/lib/python3.6/site-packages]\r\n\r\nDo you wish to build TensorFlow with Apache Ignite support? [Y/n]: \r\nApache Ignite support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with XLA JIT support? [Y/n]: \r\nXLA JIT support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with OpenCL SYCL support? [y/N]: \r\nNo OpenCL SYCL support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with ROCm support? [y/N]: \r\nNo ROCm support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with CUDA support? [y/N]: y\r\nCUDA support will be enabled for TensorFlow.\r\n\r\nPlease specify the CUDA SDK version you want to use. [Leave empty to default to CUDA 9.0]: \r\n\r\n\r\nPlease specify the location where CUDA 9.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: /usr/local/cuda-9.0\r\n\r\n\r\nPlease specify the cuDNN version you want to use. [Leave empty to default to cuDNN 7]: \r\n\r\n\r\nPlease specify the location where cuDNN 7 library is installed. Refer to README.md for more details. [Default is /usr/local/cuda-9.0]: /usr/lib/x86_64-linux-gnu\r\n\r\n\r\nDo you wish to build TensorFlow with TensorRT support? [y/N]: \r\nNo TensorRT support will be enabled for TensorFlow.\r\n\r\nPlease specify the NCCL version you want to use. If NCCL 2.2 is not installed, then you can use version 1.3 that can be fetched automatically but it may have worse performance with multiple GPUs. [Default is 2.2]: 1.3\r\n\r\n\r\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\r\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\r\nPlease note that each additional compute capability significantly increases your build time and binary size. [Default is: 3.0]: \r\n\r\n\r\nDo you want to use clang as CUDA compiler? [y/N]: \r\nnvcc will be used as CUDA compiler.\r\n\r\nPlease specify which gcc should be used by nvcc as the host compiler. [Default is /usr/bin/gcc]: /usr/bin/gcc-6\r\n\r\n\r\nDo you wish to build TensorFlow with MPI support? [y/N]: \r\nNo MPI support will be enabled for TensorFlow.\r\n\r\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native]: \r\n\r\n\r\nWould you like to interactively configure ./WORKSPACE for Android builds? [y/N]: \r\nNot configuring the WORKSPACE for Android builds.\r\n\r\nPreconfigured Bazel build configs. You can use any of the below by adding \"--config=<>\" to your build command. See tools/bazel.rc for more details.\r\n\t--config=mkl         \t# Build with MKL support.\r\n\t--config=monolithic  \t# Config for mostly static monolithic build.\r\n\t--config=gdr         \t# Build with GDR support.\r\n\t--config=verbs       \t# Build with libverbs support.\r\n\t--config=ngraph      \t# Build with Intel nGraph support.\r\nConfiguration finished\r\n\r\n```\r\n\r\n```\r\n$ bazel build --config=opt --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" //tensorflow/tools/pip_package:build_pip_package\r\n\r\nLoading: \r\nLoading: 0 packages loaded\r\nAnalyzing: target //tensorflow/tools/pip_package:build_pip_package (0 packages loaded, 0 targets configured)\r\nWARNING: /home/jonathan/.cache/bazel/_bazel_jonathan/e7c09fc463511989ded3d56396c466d4/external/grpc/BUILD:1992:1: in srcs attribute of cc_library rule @grpc//:grpc_nanopb: please do not import '@grpc//third_party/nanopb:pb_common.c' directly. You should either move the file to this package or depend on an appropriate rule there. Since this rule was created by the macro 'grpc_generate_one_off_targets', the error might have been caused by the macro implementation in /home/jonathan/.cache/bazel/_bazel_jonathan/e7c09fc463511989ded3d56396c466d4/external/grpc/bazel/grpc_build_system.bzl:172:12\r\nWARNING: /home/jonathan/.cache/bazel/_bazel_jonathan/e7c09fc463511989ded3d56396c466d4/external/grpc/BUILD:1992:1: in srcs attribute of cc_library rule @grpc//:grpc_nanopb: please do not import '@grpc//third_party/nanopb:pb_decode.c' directly. You should either move the file to this package or depend on an appropriate rule there. Since this rule was created by the macro 'grpc_generate_one_off_targets', the error might have been caused by the macro implementation in /home/jonathan/.cache/bazel/_bazel_jonathan/e7c09fc463511989ded3d56396c466d4/external/grpc/bazel/grpc_build_system.bzl:172:12\r\nWARNING: /home/jonathan/.cache/bazel/_bazel_jonathan/e7c09fc463511989ded3d56396c466d4/external/grpc/BUILD:1992:1: in srcs attribute of cc_library rule @grpc//:grpc_nanopb: please do not import '@grpc//third_party/nanopb:pb_encode.c' directly. You should either move the file to this package or depend on an appropriate rule there. Since this rule was created by the macro 'grpc_generate_one_off_targets', the error might have been caused by the macro implementation in /home/jonathan/.cache/bazel/_bazel_jonathan/e7c09fc463511989ded3d56396c466d4/external/grpc/bazel/grpc_build_system.bzl:172:12\r\nWARNING: /home/jonathan/tensorflow/tensorflow/contrib/learn/BUILD:17:1: in py_library rule //tensorflow/contrib/learn:learn: target '//tensorflow/contrib/learn:learn' depends on deprecated target '//tensorflow/contrib/session_bundle:exporter': No longer supported. Switch to SavedModel immediately.\r\nWARNING: /home/jonathan/tensorflow/tensorflow/contrib/learn/BUILD:17:1: in py_library rule //tensorflow/contrib/learn:learn: target '//tensorflow/contrib/learn:learn' depends on deprecated target '//tensorflow/contrib/session_bundle:gc': No longer supported. Switch to SavedModel immediately.\r\nWARNING: /home/jonathan/tensorflow/tensorflow/contrib/timeseries/python/timeseries/BUILD:354:1: in py_library rule //tensorflow/contrib/timeseries/python/timeseries:ar_model: target '//tensorflow/contrib/timeseries/python/timeseries:ar_model' depends on deprecated target '//tensorflow/contrib/distributions:distributions_py': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.contrib.distributions are unmaintained, unsupported, and will be removed by late 2018. You should update all usage of `tf.contrib.distributions` to `tfp.distributions`.\r\nWARNING: /home/jonathan/tensorflow/tensorflow/contrib/timeseries/python/timeseries/state_space_models/BUILD:73:1: in py_library rule //tensorflow/contrib/timeseries/python/timeseries/state_space_models:kalman_filter: target '//tensorflow/contrib/timeseries/python/timeseries/state_space_models:kalman_filter' depends on deprecated target '//tensorflow/contrib/distributions:distributions_py': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.contrib.distributions are unmaintained, unsupported, and will be removed by late 2018. You should update all usage of `tf.contrib.distributions` to `tfp.distributions`.\r\nWARNING: /home/jonathan/tensorflow/tensorflow/contrib/timeseries/python/timeseries/state_space_models/BUILD:230:1: in py_library rule //tensorflow/contrib/timeseries/python/timeseries/state_space_models:filtering_postprocessor: target '//tensorflow/contrib/timeseries/python/timeseries/state_space_models:filtering_postprocessor' depends on deprecated target '//tensorflow/contrib/distributions:distributions_py': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.contrib.distributions are unmaintained, unsupported, and will be removed by late 2018. You should update all usage of `tf.contrib.distributions` to `tfp.distributions`.\r\nWARNING: /home/jonathan/tensorflow/tensorflow/contrib/bayesflow/BUILD:17:1: in py_library rule //tensorflow/contrib/bayesflow:bayesflow_py: target '//tensorflow/contrib/bayesflow:bayesflow_py' depends on deprecated target '//tensorflow/contrib/distributions:distributions_py': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.contrib.distributions are unmaintained, unsupported, and will be removed by late 2018. You should update all usage of `tf.contrib.distributions` to `tfp.distributions`.\r\nWARNING: /home/jonathan/tensorflow/tensorflow/contrib/seq2seq/BUILD:23:1: in py_library rule //tensorflow/contrib/seq2seq:seq2seq_py: target '//tensorflow/contrib/seq2seq:seq2seq_py' depends on deprecated target '//tensorflow/contrib/distributions:distributions_py': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.contrib.distributions are unmaintained, unsupported, and will be removed by late 2018. You should update all usage of `tf.contrib.distributions` to `tfp.distributions`.\r\nWARNING: /home/jonathan/tensorflow/tensorflow/contrib/BUILD:13:1: in py_library rule //tensorflow/contrib:contrib_py: target '//tensorflow/contrib:contrib_py' depends on deprecated target '//tensorflow/contrib/distributions:distributions_py': TensorFlow Distributions has migrated to TensorFlow Probability (https://github.com/tensorflow/probability). Deprecated copies remaining in tf.contrib.distributions are unmaintained, unsupported, and will be removed by late 2018. You should update all usage of `tf.contrib.distributions` to `tfp.distributions`.\r\nINFO: Analysed target //tensorflow/tools/pip_package:build_pip_package (0 packages loaded, 0 targets configured).\r\nINFO: Found 1 target...\r\n[0 / 4] [-----] ProtoCompile tensorflow/core/example/example_pb2.py\r\n[5 / 21] Compiling tensorflow/core/ops/nn_ops.cc [for host]; 2s local ... (8 actions running)\r\n[6 / 22] Compiling tensorflow/core/ops/nn_ops.cc [for host]; 6s local ... (7 actions running)\r\n[13 / 35] Compiling tensorflow/core/ops/nn_ops.cc [for host]; 9s local ... (8 actions running)\r\n[17 / 37] Compiling tensorflow/contrib/tensor_forest/hybrid/core/ops/routing_gradient_op.cc; 6s local ... (8 actions running)\r\n[24 / 46] Compiling tensorflow/contrib/tensor_forest/hybrid/core/ops/k_feature_gradient_op.cc [for host]; 6s local ... (8 actions running)\r\n[38 / 73] Compiling tensorflow/python/framework/python_op_gen_internal.cc [for host]; 7s local ... (8 actions, 7 running)\r\nINFO: From Compiling tensorflow/python/framework/python_op_gen_internal.cc [for host]:\r\ntensorflow/python/framework/python_op_gen_internal.cc: In member function 'virtual std::__cxx11::string tensorflow::python_op_gen_internal::GenPythonOp::Code()':\r\ntensorflow/python/framework/python_op_gen_internal.cc:542:44: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\r\n   for (int i = op_def_.input_arg_size(); i < params_no_default.size(); ++i) {\r\n                                          ~~^~~~~~~~~~~~~~~~~~~~~~~~~~\r\ntensorflow/python/framework/python_op_gen_internal.cc:545:21: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\r\n   for (int i = 0; i < params_with_default.size(); ++i) {\r\n                   ~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nINFO: From Compiling tensorflow/python/framework/python_op_gen.cc [for host]:\r\ntensorflow/python/framework/python_op_gen.cc: In function 'std::__cxx11::string tensorflow::{anonymous}::VectorToTuple(const std::vector<std::__cxx11::basic_string<char> >&)':\r\ntensorflow/python/framework/python_op_gen.cc:65:21: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\r\n   for (int i = 0; i < l.size(); ++i) {\r\n                   ~~^~~~~~~~~~\r\ntensorflow/python/framework/python_op_gen.cc: In function 'void tensorflow::{anonymous}::Unflatten(const string&, const std::vector<std::__cxx11::basic_string<char> >&, const string&, std::__cxx11::string*)':\r\ntensorflow/python/framework/python_op_gen.cc:77:21: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\r\n   for (int i = 0; i < output_sizes.size(); ++i) {\r\n                   ~~^~~~~~~~~~~~~~~~~~~~~\r\n\r\n[...]\r\n\r\n\r\nERROR: /home/jonathan/tensorflow/tensorflow/core/kernels/BUILD:2951:1: output 'tensorflow/core/kernels/_objs/cwise_op_gpu/cwise_op_gpu_bitwise_and.cu.pic.o' was not created\r\nINFO: From Compiling tensorflow/core/kernels/cwise_op_gpu_ceil.cu.cc [for host]:\r\n./tensorflow/core/kernels/cwise_ops.h(190): warning: __host__ annotation on a defaulted function(\"scalar_left\") is ignored\r\n\r\n./tensorflow/core/kernels/cwise_ops.h(190): warning: __device__ annotation on a defaulted function(\"scalar_left\") is ignored\r\n\r\n./tensorflow/core/kernels/cwise_ops.h(220): warning: __host__ annotation on a defaulted function(\"scalar_right\") is ignored\r\n\r\n./tensorflow/core/kernels/cwise_ops.h(220): warning: __device__ annotation on a defaulted function(\"scalar_right\") is ignored\r\n\r\n./tensorflow/core/kernels/cwise_ops.h(190): warning: __host__ annotation on a defaulted function(\"scalar_left\") is ignored\r\n\r\n./tensorflow/core/kernels/cwise_ops.h(190): warning: __device__ annotation on a defaulted function(\"scalar_left\") is ignored\r\n\r\n./tensorflow/core/kernels/cwise_ops.h(220): warning: __host__ annotation on a defaulted function(\"scalar_right\") is ignored\r\n\r\n./tensorflow/core/kernels/cwise_ops.h(220): warning: __device__ annotation on a defaulted function(\"scalar_right\") is ignored\r\n\r\nERROR: /home/jonathan/tensorflow/tensorflow/core/kernels/BUILD:2951:1: output 'tensorflow/core/kernels/_objs/cwise_op_gpu/cwise_op_gpu_mul.cu.pic.o' was not created\r\nERROR: /home/jonathan/tensorflow/tensorflow/core/kernels/BUILD:2951:1: not all outputs were created or valid\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nINFO: Elapsed time: 10303.024s, Critical Path: 9226.48s, Remote (0.00% of the time): [queue: 0.00%, setup: 0.00%, process: 0.00%]\r\nINFO: 1813 processes: 1813 local.\r\nFAILED: Build did NOT complete successfully\r\nFAILED: Build did NOT complete successfully\r\n```\r\n\r\nfor full log-file see \r\n[log.txt](https://github.com/tensorflow/tensorflow/files/2913016/log.txt)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26179", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26179/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26179/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26179/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26179", "id": 415219511, "node_id": "MDU6SXNzdWU0MTUyMTk1MTE=", "number": 26179, "title": "Datasets not reshuffling between epochs in eager mode", "user": {"login": "malmaud", "id": 987837, "node_id": "MDQ6VXNlcjk4NzgzNw==", "avatar_url": "https://avatars1.githubusercontent.com/u/987837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malmaud", "html_url": "https://github.com/malmaud", "followers_url": "https://api.github.com/users/malmaud/followers", "following_url": "https://api.github.com/users/malmaud/following{/other_user}", "gists_url": "https://api.github.com/users/malmaud/gists{/gist_id}", "starred_url": "https://api.github.com/users/malmaud/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malmaud/subscriptions", "organizations_url": "https://api.github.com/users/malmaud/orgs", "repos_url": "https://api.github.com/users/malmaud/repos", "events_url": "https://api.github.com/users/malmaud/events{/privacy}", "received_events_url": "https://api.github.com/users/malmaud/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 736653459, "node_id": "MDU6TGFiZWw3MzY2NTM0NTk=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:eager", "name": "comp:eager", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-02-27T16:42:18Z", "updated_at": "2019-07-11T16:28:25Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): 10.14\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.13.0-dev20190227\r\n- Python version: 3.7\r\n\r\n**Describe the current behavior**\r\nIterating a shuffled dataset returns elements in the same order each time it is iterated over, and the order is unaffected by the random seed.\r\n\r\n**Describe the expected behavior**\r\nThe order should be deterministic given the random seed, and there should be a way to reshuffle between epochs.\r\n\r\n**Code to reproduce the issue**\r\n\r\n```python\r\nimport tensorflow as tf\r\n\r\ntf.enable_eager_execution()\r\n\r\nd = tf.data.Dataset.range(5).shuffle(5)\r\ntf.set_random_seed(0)\r\nelems = [item.numpy() for item in d]\r\nprint(\"First epoch: \", elems)\r\nelems = [item.numpy() for item in d]\r\nprint(\"Second epoch: \", elems)\r\n```\r\n\r\nRunning this twice produces:\r\n\r\nFirst run:\r\n```\r\nFirst epoch:  [4, 2, 1, 3, 0]\r\nSecond epoch:  [4, 2, 1, 3, 0]\r\n```\r\n\r\nSecond run:\r\n```\r\nFirst epoch:  [3, 1, 0, 2, 4]\r\nSecond epoch:  [3, 1, 0, 2, 4]\r\n```\r\n\r\nSo even though the same random seed is used in both runs, the order of elements differs between them. And additionally, the order is the same between epochs, which you wouldn't necessarily want in your training loop. "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26172", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26172/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26172/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26172/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26172", "id": 415131885, "node_id": "MDU6SXNzdWU0MTUxMzE4ODU=", "number": 26172, "title": "[Feature Request, INQ] Add functionality for INQ implementation", "user": {"login": "Vooblin", "id": 39566915, "node_id": "MDQ6VXNlcjM5NTY2OTE1", "avatar_url": "https://avatars2.githubusercontent.com/u/39566915?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Vooblin", "html_url": "https://github.com/Vooblin", "followers_url": "https://api.github.com/users/Vooblin/followers", "following_url": "https://api.github.com/users/Vooblin/following{/other_user}", "gists_url": "https://api.github.com/users/Vooblin/gists{/gist_id}", "starred_url": "https://api.github.com/users/Vooblin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Vooblin/subscriptions", "organizations_url": "https://api.github.com/users/Vooblin/orgs", "repos_url": "https://api.github.com/users/Vooblin/repos", "events_url": "https://api.github.com/users/Vooblin/events{/privacy}", "received_events_url": "https://api.github.com/users/Vooblin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-27T13:45:14Z", "updated_at": "2019-02-28T00:37:41Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 1.12.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nMy suggestion is related with the [article](https://arxiv.org/pdf/1702.03044.pdf) about Incremental Network Quantization (INQ) method of weights quantization.\r\n\r\nFirstly for INQ implementation it is necessary to create integer convolution operation and matrix multiplication operation with bit shift instead of multiplication. I also want to create an API for weights partitions with certain choices of elements (for example, the absolute value maximum).\r\n\r\nSuggested API will be low-level. High-level API will be a next step of my contributing. It is also interesting to add this feature to TFLite.\r\n\r\n**Will this change the current api? How?**\r\nYes, There will be added new functions for convolution and matmul with bit shift.\r\n\r\n**Who will benefit with this feature?**\r\nThe INQ method reduces the weight of the model, and also performs a bit shift instead of floating point multiplication.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26168", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26168/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26168/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26168/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26168", "id": 415022082, "node_id": "MDU6SXNzdWU0MTUwMjIwODI=", "number": 26168, "title": "Tensorflow not working with vGPUs (when the machine is not in pass-through mode)", "user": {"login": "MrinalJain17", "id": 19644085, "node_id": "MDQ6VXNlcjE5NjQ0MDg1", "avatar_url": "https://avatars2.githubusercontent.com/u/19644085?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MrinalJain17", "html_url": "https://github.com/MrinalJain17", "followers_url": "https://api.github.com/users/MrinalJain17/followers", "following_url": "https://api.github.com/users/MrinalJain17/following{/other_user}", "gists_url": "https://api.github.com/users/MrinalJain17/gists{/gist_id}", "starred_url": "https://api.github.com/users/MrinalJain17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MrinalJain17/subscriptions", "organizations_url": "https://api.github.com/users/MrinalJain17/orgs", "repos_url": "https://api.github.com/users/MrinalJain17/repos", "events_url": "https://api.github.com/users/MrinalJain17/events{/privacy}", "received_events_url": "https://api.github.com/users/MrinalJain17/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}, {"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-02-27T09:21:45Z", "updated_at": "2019-03-13T17:18:38Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): **Linux Ubuntu 16.04**\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): **Binary**\r\n- TensorFlow version: **1.12.0**\r\n- Python version: **3.6.8**\r\n- Installed using virtualenv? pip? conda?: **Conda**\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: **CUDA 9.2; CuDNN 7.3**\r\n- GPU model and memory: **NVIDIA Tesla V100 (16 GB)**\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\nI was using TF for experimenting with seq2seq models on a VM that had access to a Tesla V100 GPU (in pass-through mode). Recently, that VM was restricted to use a vGPU (with 50% of the memory - Q8 variant of V100), and hence it was not is pass-through mode anymore. With this change, Tensorflow stopped working, and gave `UNKNOWN_CUDA_ERROR`.\r\n\r\nI would like to know if Tensorflow could be used with Virtual GPUs (not in pass-through mode).\r\nIf yes, any helpful resource for achieving the same would be much appreciated.\r\n\r\nThanks.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n```python\r\nimport tensorflow as tf\r\nprint(tf.test.is_gpu_available())\r\n```\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n```\r\nAttempting to fetch value instead of handling error\r\nInternal: failed initializing StreamExecutor for CUDA Device Ordinal 0\r\n```\r\n\r\n*(Currently, I do not have the full traceback unfortunately).*"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26165", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26165/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26165/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26165/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26165", "id": 415007315, "node_id": "MDU6SXNzdWU0MTUwMDczMTU=", "number": 26165, "title": "Where to place 'tf.contrib.quantize.create_training_graph'  during multi-gpu Quantization-aware training?", "user": {"login": "Zhengtq", "id": 12445765, "node_id": "MDQ6VXNlcjEyNDQ1NzY1", "avatar_url": "https://avatars3.githubusercontent.com/u/12445765?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zhengtq", "html_url": "https://github.com/Zhengtq", "followers_url": "https://api.github.com/users/Zhengtq/followers", "following_url": "https://api.github.com/users/Zhengtq/following{/other_user}", "gists_url": "https://api.github.com/users/Zhengtq/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zhengtq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zhengtq/subscriptions", "organizations_url": "https://api.github.com/users/Zhengtq/orgs", "repos_url": "https://api.github.com/users/Zhengtq/repos", "events_url": "https://api.github.com/users/Zhengtq/events{/privacy}", "received_events_url": "https://api.github.com/users/Zhengtq/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1166103538, "node_id": "MDU6TGFiZWwxMTY2MTAzNTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/contrib", "name": "contrib", "color": "5319e7", "default": false, "description": "Anything that comes under contrib directory"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-02-27T08:45:14Z", "updated_at": "2019-06-20T10:48:26Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):**Yes**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):**Ubuntu 16.04**\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:No\r\n- TensorFlow installed from (source or binary):**By pip**\r\n- TensorFlow version (use command below):**1.11.0**\r\n- Python version:**2.7**\r\n- Bazel version (if compiling from source):No\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\nI follow \"quantization aware training\" tutorial in tensorflow to retrain my already trained floating point  model. And I wrote a muli-gpu version to do the stuff. Actually, I have written two snippets of training code, the first code snippet is :\r\n```python\r\nwith tf.variable_scope(tf.get_variable_scope()):\r\n    for i in xrange(len(GPU_NUM_ID)):\r\n       with tf.device('/gpu:%d' % GPU_NUM_ID[i]):\r\n              with tf.name_scope('%s_%d' % ('cnn_mg', i)) as scope:\r\n                     images, labels = ut._load_batch_filename()  \r\n                            logits, out_data = inference(images, reuse=tf.AUTO_REUSE,  num_classes=LABEL_NUM)\r\n                            loss ,accuracy_sep = _tower_loss_depth(scope, logits, labels)\r\n                            tf.get_variable_scope().reuse_variables()\r\n                            grads = optimizer.compute_gradients(loss_total_sep)\r\n                            tower_grads.append(grads)   \r\n\r\ntf.contrib.quantize.create_training_graph(quant_delay=DELAY_STEP)\r\n```\r\nThe second snippet of the training code is:\r\n```python\r\nwith tf.variable_scope(tf.get_variable_scope()):\r\n\r\n    for i in xrange(len(GPU_NUM_ID)):\r\n       with tf.device('/gpu:%d' % GPU_NUM_ID[i]):\r\n              with tf.name_scope('%s_%d' % ('cnn_mg', i)) as scope:\r\n                     images, labels = ut._load_batch_filename()  \r\n                            logits, out_data = inference(images, reuse=tf.AUTO_REUSE,  num_classes=LABEL_NUM)\r\n                            with tf.variable_scope(tf.get_variable_scope(), reuse=tf.AUTO_REUSE): \r\n                                   tf.contrib.quantize.create_training_graph(quant_delay=DELAY_STEP)\r\n                            loss ,accuracy_sep = _tower_loss_depth(scope, logits, labels)\r\n                            tf.get_variable_scope().reuse_variables()\r\n                            grads = optimizer.compute_gradients(loss_total_sep)\r\n                            tower_grads.append(grads)\r\n```\r\n\r\n**Describe the expected behavior**\r\nWhat I have found is: The second code snippet if 1.5 times faster than the first  code snippet  with the same training setting.I want to know why this happens and  I want know which code snippet is the tensorflow recommended code snippet. \r\nHowever, When I update my tensorflow version to 1.12.0, the second version(faster) could cause some error(\"tensorflow Graph is invalid, contains a cycle\"). Dose this mean I have to slow down my multi-gpu Quantization-aware training in the future version of tensorflow?\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26161", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26161/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26161/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26161/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26161", "id": 414977482, "node_id": "MDU6SXNzdWU0MTQ5Nzc0ODI=", "number": 26161, "title": "Tensorflow Lite on GPU failed on Android Pi9.0", "user": {"login": "guoyinchen", "id": 4462321, "node_id": "MDQ6VXNlcjQ0NjIzMjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/4462321?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guoyinchen", "html_url": "https://github.com/guoyinchen", "followers_url": "https://api.github.com/users/guoyinchen/followers", "following_url": "https://api.github.com/users/guoyinchen/following{/other_user}", "gists_url": "https://api.github.com/users/guoyinchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/guoyinchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guoyinchen/subscriptions", "organizations_url": "https://api.github.com/users/guoyinchen/orgs", "repos_url": "https://api.github.com/users/guoyinchen/repos", "events_url": "https://api.github.com/users/guoyinchen/events{/privacy}", "received_events_url": "https://api.github.com/users/guoyinchen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-02-27T07:15:02Z", "updated_at": "2019-03-28T21:31:16Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nAndroid Pi9.0 with NXP i.MX8QM\r\n- TensorFlow installed from (source or binary):\r\nBuild from source based on https://www.tensorflow.org/lite/performance/gpu_advanced\r\n- TensorFlow version (or github SHA if from source):\r\ncommit ad78d08bd1d03238d434d3d214a1de56f22d7601 (HEAD -> imx_r1.98, origin/r1.98)\r\nAuthor: A. Unique TensorFlower <gardener@tensorflow.org>\r\nDate:   Wed Feb 13 12:35:06 2019 -0800\r\n\r\n    [TF:XLA] Mark a test as not running on XLA due to different flows.\r\n\r\n    The test is not run because it is to test a part of grappler not used with XLA:GPU.\r\n\r\n    This is change is a no-op. It makes explicit a default value and adds comments.\r\n\r\n    PiperOrigin-RevId: 233807945\r\n\r\n**Any other info / logs**\r\n02-27 14:37:26.750  4532  4618 E AndroidRuntime: FATAL EXCEPTION: CameraBackground\r\n02-27 14:37:26.750  4532  4618 E AndroidRuntime: Process: android.example.com.tflitecamerademo, PID: 4532\r\n02-27 14:37:26.750  4532  4618 E AndroidRuntime: java.lang.IllegalArgumentException: Internal error: Failed to apply delegate: WARNING: op code #43 cannot be handled by this delegate.  Onl.\r\n02-27 14:37:26.750  4532  4618 E AndroidRuntime:\r\n02-27 14:37:26.750  4532  4618 E AndroidRuntime:        at org.tensorflow.lite.NativeInterpreterWrapper.applyDelegate(Native Method)\r\n02-27 14:37:26.750  4532  4618 E AndroidRuntime:        at org.tensorflow.lite.NativeInterpreterWrapper.init(NativeInterpreterWrapper.java:83)\r\n02-27 14:37:26.750  4532  4618 E AndroidRuntime:        at org.tensorflow.lite.NativeInterpreterWrapper.<init>(NativeInterpreterWrapper.java:60)\r\n02-27 14:37:26.750  4532  4618 E AndroidRuntime:        at org.tensorflow.lite.Interpreter.<init>(Interpreter.java:224)\r\n02-27 14:37:26.750  4532  4618 E AndroidRuntime:   at com.example.android.tflitecamerademo.ImageClassifier.recreateInterpreter(ImageClassifier.java:168)\r\n02-27 14:37:26.750  4532  4618 E AndroidRuntime:        at com.example.android.tflitecamerademo.ImageClassifier.useGpu(ImageClassifier.java:176)\r\n02-27 14:37:26.750  4532  4618 E AndroidRuntime:        at com.example.android.tflitecamerademo.Camera2BasicFragment.lambda$updateActiveModel$0$Camera2BasicFragment(Camera2BasicFragment.ja)\r\n02-27 14:37:26.750  4532  4618 E AndroidRuntime:        at com.example.android.tflitecamerademo.Camera2BasicFragment$$Lambda$0.run(Unknown Source:24)\r\n02-27 14:37:26.750  4532  4618 E AndroidRuntime:        at android.os.Handler.handleCallback(Handler.java:790)\r\n02-27 14:37:26.750  4532  4618 E AndroidRuntime:        at android.os.Handler.dispatchMessage(Handler.java:99)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26157", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26157/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26157/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26157/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26157", "id": 414964937, "node_id": "MDU6SXNzdWU0MTQ5NjQ5Mzc=", "number": 26157, "title": "Build error: Undeclared inclusions of various numpy header files", "user": {"login": "nagreme", "id": 25629116, "node_id": "MDQ6VXNlcjI1NjI5MTE2", "avatar_url": "https://avatars2.githubusercontent.com/u/25629116?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nagreme", "html_url": "https://github.com/nagreme", "followers_url": "https://api.github.com/users/nagreme/followers", "following_url": "https://api.github.com/users/nagreme/following{/other_user}", "gists_url": "https://api.github.com/users/nagreme/gists{/gist_id}", "starred_url": "https://api.github.com/users/nagreme/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nagreme/subscriptions", "organizations_url": "https://api.github.com/users/nagreme/orgs", "repos_url": "https://api.github.com/users/nagreme/repos", "events_url": "https://api.github.com/users/nagreme/events{/privacy}", "received_events_url": "https://api.github.com/users/nagreme/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-27T06:27:16Z", "updated_at": "2019-02-28T01:13:45Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: r1.13\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source): 0.21.0\r\n- GCC/Compiler version (if compiling from source): gcc (Ubuntu 7.3.0-27ubuntu1~18.04) 7.3.0\r\n- CUDA/cuDNN version: 10.0/7.5\r\n- GPU model and memory: GeForce GTX 1070, Compute Capability 6.1, totalMemory: 7.90GiB\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\nI'm trying to build tensorflow from source to have both GPU and CPU instruction set support but I'm facing a perplexing build error about undeclared inclusions.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n```\r\n./configure\r\nbazel build --verbose_failures -c opt --copt=-mavx --copt=-mavx2 --copt=-mfma --copt=-mfpmath=both --copt=-msse4.1 --copt=-msse4.2 //tensorflow/tools/pip_package:build_pip_package --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" \r\n```\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nThe error obtained:\r\n```\r\nERROR: /home/nagreme/tensorflow/tensorflow/python/eager/BUILD:10:1: undeclared inclusion(s) in rule '//tensorflow/python/eager:pywrap_tfe_lib':\r\nthis rule is missing dependency declarations for the following files included by 'tensorflow/python/eager/pywrap_tensor.cc':\r\n  'bazel-out/host/genfiles/external/local_config_python/python_include/numpy/arrayobject.h'\r\n  'bazel-out/host/genfiles/external/local_config_python/python_include/numpy/ndarrayobject.h'\r\n  'bazel-out/host/genfiles/external/local_config_python/python_include/numpy/ndarraytypes.h'\r\n  'bazel-out/host/genfiles/external/local_config_python/python_include/numpy/npy_common.h'\r\n  'bazel-out/host/genfiles/external/local_config_python/python_include/numpy/numpyconfig.h'\r\n  'bazel-out/host/genfiles/external/local_config_python/python_include/numpy/_numpyconfig.h'\r\n  'bazel-out/host/genfiles/external/local_config_python/python_include/numpy/npy_endian.h'\r\n  'bazel-out/host/genfiles/external/local_config_python/python_include/numpy/npy_cpu.h'\r\n  'bazel-out/host/genfiles/external/local_config_python/python_include/numpy/utils.h'\r\n  'bazel-out/host/genfiles/external/local_config_python/python_include/numpy/_neighborhood_iterator_imp.h'\r\n  'bazel-out/host/genfiles/external/local_config_python/python_include/numpy/__multiarray_api.h'\r\n  'bazel-out/host/genfiles/external/local_config_python/python_include/numpy/npy_interrupt.h'\r\n  'bazel-out/host/genfiles/external/local_config_python/python_include/numpy/ufuncobject.h'\r\n  'bazel-out/host/genfiles/external/local_config_python/python_include/numpy/npy_math.h'\r\n  'bazel-out/host/genfiles/external/local_config_python/python_include/numpy/npy_common.h'\r\n  'bazel-out/host/genfiles/external/local_config_python/python_include/numpy/arrayobject.h'\r\n  'bazel-out/host/genfiles/external/local_config_python/python_include/numpy/__ufunc_api.h'\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\n```\r\nMy bazel build configuration:\r\n```\r\n./configure\r\nWARNING: --batch mode is deprecated. Please instead explicitly shut down your Bazel server using the command \"bazel shutdown\".\r\nINFO: Invocation ID: 78f3e435-9b41-440d-a973-946b3e60fa25\r\nYou have bazel 0.21.0 installed.\r\nPlease specify the location of python. [Default is /usr/bin/python]: /usr/bin/python3\r\nFound possible Python library paths:\r\n  /usr/lib/python3/dist-packages\r\n  /usr/local/lib/python3.6/dist-packages\r\nPlease input the desired Python library path to use.  Default is [/usr/lib/python3/dist-packages]\r\nDo you wish to build TensorFlow with XLA JIT support? [Y/n]: \r\nXLA JIT support will be enabled for TensorFlow.\r\nDo you wish to build TensorFlow with OpenCL SYCL support? [y/N]: \r\nNo OpenCL SYCL support will be enabled for TensorFlow.\r\nDo you wish to build TensorFlow with ROCm support? [y/N]: \r\nNo ROCm support will be enabled for TensorFlow.\r\nDo you wish to build TensorFlow with CUDA support? [y/N]: y\r\nCUDA support will be enabled for TensorFlow.\r\nPlease specify the CUDA SDK version you want to use. [Leave empty to default to CUDA 10.0]: 10.0\r\nPlease specify the location where CUDA 10.0 toolkit is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: \r\nPlease specify the cuDNN version you want to use. [Leave empty to default to cuDNN 7]: 7.5\r\nPlease specify the location where cuDNN 7 library is installed. Refer to README.md for more details. [Default is /usr/local/cuda]: /usr/lib/x86_64-linux-gnu/\r\nDo you wish to build TensorFlow with TensorRT support? [y/N]: \r\nNo TensorRT support will be enabled for TensorFlow.\r\nPlease specify the locally installed NCCL version you want to use. [Default is to use https://github.com/nvidia/nccl]: \r\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\r\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\r\nPlease note that each additional compute capability significantly increases your build time and binary size. [Default is: 6.1]: 6.1\r\nDo you want to use clang as CUDA compiler? [y/N]: \r\nnvcc will be used as CUDA compiler.\r\nPlease specify which gcc should be used by nvcc as the host compiler. [Default is /usr/bin/gcc]: \r\nDo you wish to build TensorFlow with MPI support? [y/N]: \r\nNo MPI support will be enabled for TensorFlow.\r\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native -Wno-sign-compare]: \r\nWould you like to interactively configure ./WORKSPACE for Android builds? [y/N]: \r\nNot configuring the WORKSPACE for Android builds.\r\nPreconfigured Bazel build configs. You can use any of the below by adding \"--config=<>\" to your build command. See .bazelrc for more details.\r\n\t--config=mkl         \t# Build with MKL support.\r\n\t--config=monolithic  \t# Config for mostly static monolithic build.\r\n\t--config=gdr         \t# Build with GDR support.\r\n\t--config=verbs       \t# Build with libverbs support.\r\n\t--config=ngraph      \t# Build with Intel nGraph support.\r\n\t--config=dynamic_kernels\t# (Experimental) Build kernels into separate shared objects.\r\nPreconfigured Bazel build configs to DISABLE default on features:\r\n\t--config=noaws       \t# Disable AWS S3 filesystem support.\r\n\t--config=nogcp       \t# Disable GCP support.\r\n\t--config=nohdfs      \t# Disable HDFS support.\r\n\t--config=noignite    \t# Disable Apacha Ignite support.\r\n\t--config=nokafka     \t# Disable Apache Kafka support.\r\n\t--config=nonccl      \t# Disable NVIDIA NCCL support.\r\nConfiguration finished\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26147", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26147/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26147/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26147/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26147", "id": 414860470, "node_id": "MDU6SXNzdWU0MTQ4NjA0NzA=", "number": 26147, "title": "[docs] (non) determinism in TF", "user": {"login": "mpekalski", "id": 2975068, "node_id": "MDQ6VXNlcjI5NzUwNjg=", "avatar_url": "https://avatars1.githubusercontent.com/u/2975068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpekalski", "html_url": "https://github.com/mpekalski", "followers_url": "https://api.github.com/users/mpekalski/followers", "following_url": "https://api.github.com/users/mpekalski/following{/other_user}", "gists_url": "https://api.github.com/users/mpekalski/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpekalski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpekalski/subscriptions", "organizations_url": "https://api.github.com/users/mpekalski/orgs", "repos_url": "https://api.github.com/users/mpekalski/repos", "events_url": "https://api.github.com/users/mpekalski/events{/privacy}", "received_events_url": "https://api.github.com/users/mpekalski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-26T22:55:21Z", "updated_at": "2019-02-26T23:52:47Z", "closed_at": null, "author_association": "NONE", "body": "**Describe the feature and the current behavior/state.**\r\nA documentation explaining determinism and sources of non determinism in TF applications. It should cover things from having multiple readers, seeds in the specific ops, seed in numpy, PYTHONHASHSEED, non-deterministic ops in CUDA (and why TF does not support passing deterministic flag even though it would be slower), `TF_CUDNN_USE_AUTOTUNE`, and probably some others I do not know about.\r\n\r\n**Who will benefit with this feature?**\r\nI take part in many Kaggle competitions and very often people there have problems with non-determinism in NN. \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26146", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26146/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26146/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26146/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26146", "id": 414858275, "node_id": "MDU6SXNzdWU0MTQ4NTgyNzU=", "number": 26146, "title": "Tensorflow 1.13 - can't deprecate tf.layers.batch_normalization.  No existing replacement", "user": {"login": "jtressle", "id": 13778165, "node_id": "MDQ6VXNlcjEzNzc4MTY1", "avatar_url": "https://avatars2.githubusercontent.com/u/13778165?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtressle", "html_url": "https://github.com/jtressle", "followers_url": "https://api.github.com/users/jtressle/followers", "following_url": "https://api.github.com/users/jtressle/following{/other_user}", "gists_url": "https://api.github.com/users/jtressle/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtressle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtressle/subscriptions", "organizations_url": "https://api.github.com/users/jtressle/orgs", "repos_url": "https://api.github.com/users/jtressle/repos", "events_url": "https://api.github.com/users/jtressle/events{/privacy}", "received_events_url": "https://api.github.com/users/jtressle/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-02-26T22:48:44Z", "updated_at": "2019-02-27T12:54:22Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "I'm updating to Tensorflow 1.13 from 1.12.\r\n\r\ntf.layers.batch_normalization is being deprecated.\r\n\r\nThe note states:\r\n\r\n```\r\nbatch_normalization (from tensorflow.python.layers.normalization) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse keras.layers.batch_normalization instead.\r\n```\r\nFirst, there is no 'keras.layers.batch_normalization'. This is a 'keras.layers. BatchNormalization', but that is a different function and a direct replacement for 'tf.layers. BatchNormalization'.\r\n\r\nTherefore, either make a 'keras.layers. BatchNormalization' function or remove the deprecation warning for 'tf.layers.batch_normalization.\r\n\r\nHere's the link to the batch_normalization fuction.\r\n\r\nhttps://github.com/tensorflow/tensorflow/blob/r1.12/tensorflow/python/layers/normalization.py\r\n\r\nThanks,"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26136", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26136/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26136/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26136/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26136", "id": 414610773, "node_id": "MDU6SXNzdWU0MTQ2MTA3NzM=", "number": 26136, "title": "Estimator.train doesn't respect the RunConfig keep_checkpoint_max limit", "user": {"login": "keotic", "id": 19147264, "node_id": "MDQ6VXNlcjE5MTQ3MjY0", "avatar_url": "https://avatars1.githubusercontent.com/u/19147264?v=4", "gravatar_id": "", "url": "https://api.github.com/users/keotic", "html_url": "https://github.com/keotic", "followers_url": "https://api.github.com/users/keotic/followers", "following_url": "https://api.github.com/users/keotic/following{/other_user}", "gists_url": "https://api.github.com/users/keotic/gists{/gist_id}", "starred_url": "https://api.github.com/users/keotic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/keotic/subscriptions", "organizations_url": "https://api.github.com/users/keotic/orgs", "repos_url": "https://api.github.com/users/keotic/repos", "events_url": "https://api.github.com/users/keotic/events{/privacy}", "received_events_url": "https://api.github.com/users/keotic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yhliang2018", "id": 36285763, "node_id": "MDQ6VXNlcjM2Mjg1NzYz", "avatar_url": "https://avatars1.githubusercontent.com/u/36285763?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yhliang2018", "html_url": "https://github.com/yhliang2018", "followers_url": "https://api.github.com/users/yhliang2018/followers", "following_url": "https://api.github.com/users/yhliang2018/following{/other_user}", "gists_url": "https://api.github.com/users/yhliang2018/gists{/gist_id}", "starred_url": "https://api.github.com/users/yhliang2018/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yhliang2018/subscriptions", "organizations_url": "https://api.github.com/users/yhliang2018/orgs", "repos_url": "https://api.github.com/users/yhliang2018/repos", "events_url": "https://api.github.com/users/yhliang2018/events{/privacy}", "received_events_url": "https://api.github.com/users/yhliang2018/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yhliang2018", "id": 36285763, "node_id": "MDQ6VXNlcjM2Mjg1NzYz", "avatar_url": "https://avatars1.githubusercontent.com/u/36285763?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yhliang2018", "html_url": "https://github.com/yhliang2018", "followers_url": "https://api.github.com/users/yhliang2018/followers", "following_url": "https://api.github.com/users/yhliang2018/following{/other_user}", "gists_url": "https://api.github.com/users/yhliang2018/gists{/gist_id}", "starred_url": "https://api.github.com/users/yhliang2018/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yhliang2018/subscriptions", "organizations_url": "https://api.github.com/users/yhliang2018/orgs", "repos_url": "https://api.github.com/users/yhliang2018/repos", "events_url": "https://api.github.com/users/yhliang2018/events{/privacy}", "received_events_url": "https://api.github.com/users/yhliang2018/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-02-26T13:27:28Z", "updated_at": "2019-07-08T23:13:36Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nUBUNTU 16.04.5 LTS (Xenial Xerus)\r\n- TensorFlow installed from (source or binary):\r\npip version 1.12 tensorflow-gpu\r\n- TensorFlow version (use command below):\r\n1.12.0\r\n- Python version:\r\n3.5\r\n\r\n- CUDA/cuDNN version:\r\n9.0\r\n- GPU model and memory:\r\nTesla V100 16G\r\n\r\n**Describe the current behavior**\r\nRunning Estimator training as follows, should only keep 1 checkpoint file version (latest)\r\ninstead all checkpoints are kept.\r\n\r\nsession_config = tf.ConfigProto()\r\nsession_config.allow_soft_placement = True\r\n\r\nrun_conf = RunConfig(\r\n            model_dir=out_dir,\r\n            save_summary_steps=400,\r\n            save_checkpoints_steps=5000,\r\n            keep_checkpoint_max=1,\r\n            session_config=session_config,\r\n            tf_random_seed=None, \r\n            keep_checkpoint_every_n_hours=None,\r\n            log_step_count_steps=10000, \r\n            train_distribute=None, \r\n            device_fn=None,\r\n            protocol=None,\r\n            eval_distribute=None,\r\n            experimental_distribute=None\r\n        )\r\n\r\n\r\nestimator = tf.estimator.Estimator(\r\n            model_fn=model.build_model_fn,\r\n            config=run_config,\r\n            params=params\r\n        )\r\n\r\n\r\n\r\n**Describe the expected behavior**\r\nOnly keep_checkpoint_max checkpoints should be saved\r\n\r\n\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26133", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26133/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26133/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26133/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26133", "id": 414587388, "node_id": "MDU6SXNzdWU0MTQ1ODczODg=", "number": 26133, "title": "Java Tensorflow save & restore without using filesystem", "user": {"login": "cosmir17", "id": 2845708, "node_id": "MDQ6VXNlcjI4NDU3MDg=", "avatar_url": "https://avatars1.githubusercontent.com/u/2845708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cosmir17", "html_url": "https://github.com/cosmir17", "followers_url": "https://api.github.com/users/cosmir17/followers", "following_url": "https://api.github.com/users/cosmir17/following{/other_user}", "gists_url": "https://api.github.com/users/cosmir17/gists{/gist_id}", "starred_url": "https://api.github.com/users/cosmir17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cosmir17/subscriptions", "organizations_url": "https://api.github.com/users/cosmir17/orgs", "repos_url": "https://api.github.com/users/cosmir17/repos", "events_url": "https://api.github.com/users/cosmir17/events{/privacy}", "received_events_url": "https://api.github.com/users/cosmir17/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-02-26T12:29:40Z", "updated_at": "2019-03-06T23:22:17Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): Up to date\r\n- Are you willing to contribute it (Yes/No): \r\n\r\n\r\n**Describe the feature and the current behaviour/state.**\r\nI previously opened a feature ticket and asking for a **python** approach.\r\nhttps://github.com/tensorflow/tensorflow/issues/25839\r\n\r\nI wasn't aware there is **java tensorflow**.\r\n\r\nI would like to retrieve(instead of Save) training information and restore it to a Tensorflow session when necessary (without using a file system). I want to bypass filesystem.\r\n\r\n### I want to know a line of code or method that I can use to extract training data(as an object) and import it to (tf)session when necessary without me handling file path etc\r\n\r\nto elaborate =>\r\nI found that there is a way to retrieve updated weight values.\r\nhttps://www.quora.com/How-do-I-print-weights-of-a-fully-connected-neural-network-in-tensorflow\r\n//train your network here\r\nsess.run(optimizer, feed_dict={x:data, y:labels}\r\nprint(\"layer 1 weights:\", sess.run(W1))\r\nprint(\"layer 2 weights:\", sess.run(W2))\r\n\r\n**Rather than handling each individual tensor information, I want to extract the whole training information (as an object) and import it to (tf)session when necessary.**\r\n\r\nI have looked at the followings and searched but was not successful.\r\nhttps://www.tensorflow.org/guide/saved_model\r\nhttps://stackoverflow.com/questions/33759623/tensorflow-how-to-save-restore-a-model\r\n\r\nWhy does this feature not appear already present?\r\n\r\n**Will this change the current API? How?**\r\nno, I just need(or to know) an additional API.\r\n\r\n**Who will benefit with this feature?**\r\nIt will make the use of Tensorflow lib much more flexible.\r\n**Any Other info.**"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26100", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26100/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26100/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26100/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26100", "id": 414265037, "node_id": "MDU6SXNzdWU0MTQyNjUwMzc=", "number": 26100, "title": "Parallel quasi-newton optimizers for tensorflow-gpu", "user": {"login": "timudk", "id": 37085732, "node_id": "MDQ6VXNlcjM3MDg1NzMy", "avatar_url": "https://avatars3.githubusercontent.com/u/37085732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timudk", "html_url": "https://github.com/timudk", "followers_url": "https://api.github.com/users/timudk/followers", "following_url": "https://api.github.com/users/timudk/following{/other_user}", "gists_url": "https://api.github.com/users/timudk/gists{/gist_id}", "starred_url": "https://api.github.com/users/timudk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timudk/subscriptions", "organizations_url": "https://api.github.com/users/timudk/orgs", "repos_url": "https://api.github.com/users/timudk/repos", "events_url": "https://api.github.com/users/timudk/events{/privacy}", "received_events_url": "https://api.github.com/users/timudk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, {"login": "jvdillon", "id": 1137078, "node_id": "MDQ6VXNlcjExMzcwNzg=", "avatar_url": "https://avatars0.githubusercontent.com/u/1137078?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvdillon", "html_url": "https://github.com/jvdillon", "followers_url": "https://api.github.com/users/jvdillon/followers", "following_url": "https://api.github.com/users/jvdillon/following{/other_user}", "gists_url": "https://api.github.com/users/jvdillon/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvdillon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvdillon/subscriptions", "organizations_url": "https://api.github.com/users/jvdillon/orgs", "repos_url": "https://api.github.com/users/jvdillon/repos", "events_url": "https://api.github.com/users/jvdillon/events{/privacy}", "received_events_url": "https://api.github.com/users/jvdillon/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-02-25T19:21:46Z", "updated_at": "2019-12-10T06:28:17Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.12.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nIs there any interest in implementing quasi-Newton methods for tensorflow-gpu? There has been some work on a parallel L-BFGS-B method (https://www.sciencedirect.com/science/article/pii/S0097849314000119) for GPus.\r\n\r\n**Will this change the current api? How?**\r\nNew implementation.\r\n\r\n**Who will benefit with this feature?**\r\nI have had some recent success with using the BFGS optimizer for feedforward neural network. This approach, however, is limited to small networks and to tensorflow-cpu.\r\n\r\n**Any Other info.**\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26096", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26096/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26096/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26096/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26096", "id": 414229630, "node_id": "MDU6SXNzdWU0MTQyMjk2MzA=", "number": 26096, "title": "Kenlm in tf.nn.ctc_beam_search_decoder", "user": {"login": "SibtainRazaJamali", "id": 16519533, "node_id": "MDQ6VXNlcjE2NTE5NTMz", "avatar_url": "https://avatars1.githubusercontent.com/u/16519533?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SibtainRazaJamali", "html_url": "https://github.com/SibtainRazaJamali", "followers_url": "https://api.github.com/users/SibtainRazaJamali/followers", "following_url": "https://api.github.com/users/SibtainRazaJamali/following{/other_user}", "gists_url": "https://api.github.com/users/SibtainRazaJamali/gists{/gist_id}", "starred_url": "https://api.github.com/users/SibtainRazaJamali/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SibtainRazaJamali/subscriptions", "organizations_url": "https://api.github.com/users/SibtainRazaJamali/orgs", "repos_url": "https://api.github.com/users/SibtainRazaJamali/repos", "events_url": "https://api.github.com/users/SibtainRazaJamali/events{/privacy}", "received_events_url": "https://api.github.com/users/SibtainRazaJamali/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-02-25T17:53:37Z", "updated_at": "2019-03-31T04:56:02Z", "closed_at": null, "author_association": "NONE", "body": "Please integrate Kenlm feature in tf.nn.ctc decoder. Because it is very hard to build tensorflow bindings from source. There are always issue with bazel version not matching with tf version.If every thing goes fine still there are issues such as missing libraries.So there should be some easy way to add a language model scoring with ctc_decoder."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26094", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26094/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26094/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26094/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26094", "id": 414229172, "node_id": "MDU6SXNzdWU0MTQyMjkxNzI=", "number": 26094, "title": "Cross-compilation from Windows 10 to Ubuntu 16.04", "user": {"login": "mat100payette", "id": 20545324, "node_id": "MDQ6VXNlcjIwNTQ1MzI0", "avatar_url": "https://avatars1.githubusercontent.com/u/20545324?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mat100payette", "html_url": "https://github.com/mat100payette", "followers_url": "https://api.github.com/users/mat100payette/followers", "following_url": "https://api.github.com/users/mat100payette/following{/other_user}", "gists_url": "https://api.github.com/users/mat100payette/gists{/gist_id}", "starred_url": "https://api.github.com/users/mat100payette/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mat100payette/subscriptions", "organizations_url": "https://api.github.com/users/mat100payette/orgs", "repos_url": "https://api.github.com/users/mat100payette/repos", "events_url": "https://api.github.com/users/mat100payette/events{/privacy}", "received_events_url": "https://api.github.com/users/mat100payette/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-02-25T17:52:35Z", "updated_at": "2019-03-14T15:58:17Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version: TF r1.12.0 if possible\r\n- Doc Link: N/A\r\n\r\n\r\n**Describe the documentation issue**\r\nI can't find any official tutorial on how to cross-compile Tensorflow on the main platforms other than the less-than-descriptive official tutorial to cross-compile for the Pi. I'm not sure if this is more of a Doc issue than a Feature request but I was looking for any help compiling for Ubuntu 16.04 from a Windows 10 machine. Since there are quite a bunch of error-prone steps to cross-compiling, as there are many options to configure and files to write in a specific way, I would really benefit from some guidance, even if minimal. There are a few tutorials on Medium, but those dont't target the same platforms and/or are old.\r\n\r\nIs this something that could be added to Tensorflow's website ?\r\n\r\n**We welcome contributions by users. Will you be able to update submit a PR (use the [doc style guide](https://www.tensorflow.org/community/documentation)) to fix the doc Issue?**\r\nNo, unless I manage to do it myself."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26092", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26092/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26092/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26092/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26092", "id": 414137605, "node_id": "MDU6SXNzdWU0MTQxMzc2MDU=", "number": 26092, "title": "tensorflow lite tests on x86", "user": {"login": "herbakamil", "id": 17064705, "node_id": "MDQ6VXNlcjE3MDY0NzA1", "avatar_url": "https://avatars2.githubusercontent.com/u/17064705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/herbakamil", "html_url": "https://github.com/herbakamil", "followers_url": "https://api.github.com/users/herbakamil/followers", "following_url": "https://api.github.com/users/herbakamil/following{/other_user}", "gists_url": "https://api.github.com/users/herbakamil/gists{/gist_id}", "starred_url": "https://api.github.com/users/herbakamil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/herbakamil/subscriptions", "organizations_url": "https://api.github.com/users/herbakamil/orgs", "repos_url": "https://api.github.com/users/herbakamil/repos", "events_url": "https://api.github.com/users/herbakamil/events{/privacy}", "received_events_url": "https://api.github.com/users/herbakamil/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-02-25T14:41:26Z", "updated_at": "2019-03-15T22:23:16Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04.1 LTS\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: commit a2bb5db1bf7931b0dc2cd08e53b8798489568198\r\n- Python version: 2.7.15rc1\r\n- Installed using virtualenv? pip? conda?: sources\r\n- Bazel version (if compiling from source): 0.20.0\r\n- GCC/Compiler version (if compiling from source): gcc (Ubuntu 7.3.0-27ubuntu1~18.04) 7.3.0\r\n- CUDA/cuDNN version: -\r\n- GPU model and memory: -\r\n\r\n\r\n\r\n**Describe the problem**\r\nTensorflow lite tests seem to require android sdk even though we wanted to test them on x86.\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nbazel test --local_resources 40000,23,2 -- //tensorflow/lite/...\r\n**Any other info / logs**\r\nERROR: /home/tclbot/.cache/bazel/_bazel_tclbot/eee9defa2fa4c4fc557baa005719ebd9/external/bazel_tools/tools/android/BUILD:391:1: Executing genrule @bazel_tools//tools/android:no_android_sdk_repository_error faile\r\nd (Exit 1)                                                                                      \r\nThis build requires an Android SDK. Please add the android_sdk_repository rule to your WORKSPACE.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26082", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26082/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26082/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26082/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26082", "id": 414020865, "node_id": "MDU6SXNzdWU0MTQwMjA4NjU=", "number": 26082, "title": "TensorForestEstimator throws ValueError due to bad feature column handling", "user": {"login": "pjhinton", "id": 498803, "node_id": "MDQ6VXNlcjQ5ODgwMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/498803?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pjhinton", "html_url": "https://github.com/pjhinton", "followers_url": "https://api.github.com/users/pjhinton/followers", "following_url": "https://api.github.com/users/pjhinton/following{/other_user}", "gists_url": "https://api.github.com/users/pjhinton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pjhinton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pjhinton/subscriptions", "organizations_url": "https://api.github.com/users/pjhinton/orgs", "repos_url": "https://api.github.com/users/pjhinton/repos", "events_url": "https://api.github.com/users/pjhinton/events{/privacy}", "received_events_url": "https://api.github.com/users/pjhinton/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097548274, "node_id": "MDU6TGFiZWwxMDk3NTQ4Mjc0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tfdbg", "name": "comp:tfdbg", "color": "0052cc", "default": false, "description": "tf debugger"}], "state": "open", "locked": false, "assignee": {"login": "yupbank", "id": 741544, "node_id": "MDQ6VXNlcjc0MTU0NA==", "avatar_url": "https://avatars1.githubusercontent.com/u/741544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yupbank", "html_url": "https://github.com/yupbank", "followers_url": "https://api.github.com/users/yupbank/followers", "following_url": "https://api.github.com/users/yupbank/following{/other_user}", "gists_url": "https://api.github.com/users/yupbank/gists{/gist_id}", "starred_url": "https://api.github.com/users/yupbank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yupbank/subscriptions", "organizations_url": "https://api.github.com/users/yupbank/orgs", "repos_url": "https://api.github.com/users/yupbank/repos", "events_url": "https://api.github.com/users/yupbank/events{/privacy}", "received_events_url": "https://api.github.com/users/yupbank/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yupbank", "id": 741544, "node_id": "MDQ6VXNlcjc0MTU0NA==", "avatar_url": "https://avatars1.githubusercontent.com/u/741544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yupbank", "html_url": "https://github.com/yupbank", "followers_url": "https://api.github.com/users/yupbank/followers", "following_url": "https://api.github.com/users/yupbank/following{/other_user}", "gists_url": "https://api.github.com/users/yupbank/gists{/gist_id}", "starred_url": "https://api.github.com/users/yupbank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yupbank/subscriptions", "organizations_url": "https://api.github.com/users/yupbank/orgs", "repos_url": "https://api.github.com/users/yupbank/repos", "events_url": "https://api.github.com/users/yupbank/events{/privacy}", "received_events_url": "https://api.github.com/users/yupbank/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-02-25T09:56:33Z", "updated_at": "2019-04-04T00:56:37Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n\r\nBug was discovered when writing a custom script that used `TensorForestEstimator`.  Code is provided below.\r\n\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): \r\n```\r\nLinux sandbox 4.15.0-45-generic #48-Ubuntu SMP Tue Jan 29 16:28:13 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\r\nVERSION=\"18.04.2 LTS (Bionic Beaver)\"\r\nVERSION_ID=\"18.04\"\r\nVERSION_CODENAME=bionic\r\n```\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n\r\nnot applicable\r\n\r\n- TensorFlow installed from (source or binary):\r\n\r\nTensorFlow binary installed from PyPi via `pip`.\r\n\r\n- TensorFlow version (use command below):\r\n\r\n```\r\ntf.VERSION = 1.12.0\r\ntf.GIT_VERSION = v1.12.0-0-ga6d8ffae09\r\ntf.COMPILER_VERSION = v1.12.0-0-ga6d8ffae09\r\nSanity check: array([1], dtype=int32)\r\n```\r\n\r\n- Python version:\r\n\r\nPython 3.6.8\r\n\r\n- Bazel version (if compiling from source):\r\n\r\nnot applicable\r\n\r\n- GCC/Compiler version (if compiling from source):\r\n\r\nSince Python was compiled from source via `pyenv install`, including compiler version:\r\n\r\n```\r\nc++ (Ubuntu 7.3.0-27ubuntu1~18.04) 7.3.0\r\n```\r\n\r\n- CUDA/cuDNN version:\r\n\r\nnot applicable\r\n\r\n- GPU model and memory:\r\n\r\nnot applicable\r\n\r\n- Other information\r\n\r\n```\r\n== are we in docker =============================================\r\nNo\r\n```\r\n\r\nPython environment is managed with `pyenv` version. 1.2.9, with the following packages installed:\r\n\r\n```\r\nabsl-py==0.7.0\r\nasn1crypto==0.24.0\r\nastor==0.7.1\r\nawscli==1.16.109\r\nazure-common==1.1.18\r\nazure-storage-blob==1.5.0\r\nazure-storage-common==1.4.0\r\nbackcall==0.1.0\r\nbleach==3.1.0\r\nboto3==1.9.99\r\nbotocore==1.12.99\r\ncertifi==2018.11.29\r\ncffi==1.12.1\r\nchardet==3.0.4\r\ncolorama==0.3.9\r\ncryptography==2.5\r\ncycler==0.10.0\r\ndecorator==4.3.2\r\ndefusedxml==0.5.0\r\ndocutils==0.14\r\nentrypoints==0.3\r\nfuture==0.17.1\r\ngast==0.2.2\r\ngrpcio==1.18.0\r\nh5py==2.9.0\r\nidna==2.8\r\nijson==2.3\r\nipykernel==5.1.0\r\nipython==7.3.0\r\nipython-genutils==0.2.0\r\njedi==0.13.2\r\nJinja2==2.10\r\njmespath==0.9.3\r\njsonschema==2.6.0\r\njupyter-client==5.2.4\r\njupyter-core==4.4.0\r\njupyterlab==0.35.4\r\njupyterlab-server==0.2.0\r\nKeras-Applications==1.0.7\r\nKeras-Preprocessing==1.0.9\r\nkiwisolver==1.0.1\r\nMarkdown==3.0.1\r\nMarkupSafe==1.1.0\r\nmatplotlib==3.0.2\r\nmistune==0.8.4\r\nmpmath==1.1.0\r\nnbconvert==5.4.1\r\nnbformat==4.4.0\r\nnotebook==5.7.4\r\nnumpy==1.16.1\r\npandas==0.24.1\r\npandocfilters==1.4.2\r\nparso==0.3.4\r\npexpect==4.6.0\r\npickleshare==0.7.5\r\nprometheus-client==0.6.0\r\nprompt-toolkit==2.0.9\r\nprotobuf==3.6.1\r\nptyprocess==0.6.0\r\npyasn1==0.4.5\r\npycparser==2.19\r\npycryptodomex==3.7.3\r\nPygments==2.3.1\r\nPyJWT==1.7.1\r\npyOpenSSL==19.0.0\r\npyparsing==2.3.1\r\npython-dateutil==2.8.0\r\npytz==2018.9\r\nPyYAML==3.13\r\npyzmq==18.0.0\r\nrequests==2.21.0\r\nrsa==3.4.2\r\ns3transfer==0.2.0\r\nscikit-learn==0.20.2\r\nscipy==1.2.1\r\nSend2Trash==1.5.0\r\nsix==1.12.0\r\nsnowflake-connector-python==1.7.6\r\nsympy==1.3\r\ntensorboard==1.12.2\r\ntensorflow==1.12.0\r\ntermcolor==1.1.0\r\nterminado==0.8.1\r\ntestpath==0.4.2\r\ntornado==5.1.1\r\ntraitlets==4.3.2\r\nurllib3==1.24.1\r\nwcwidth==0.1.7\r\nwebencodings==0.5.1\r\nWerkzeug==0.14.1\r\n```\r\n\r\n**Describe the current behavior**\r\n\r\nWhen `feature_columns` argument is specified, `TensorForestEstimator` will throw the following error during a `fit()`:\r\n\r\n```\r\nTypeError: '<' not supported between instances of '_RealValuedColumn' and 'str'\r\n```\r\n\r\n**Describe the expected behavior**\r\n\r\nExpected behavior was that model would be built from training operation.\r\n\r\n\r\n**Code to reproduce the issue**\r\n\r\nNote that the CSV file 'Immunotherapy - ImmunoDataset.csv' can be obtained from the UC Irvine Machine Learning Repository at this URL:\r\n\r\nhttps://archive.ics.uci.edu/ml/datasets/Immunotherapy+Dataset\r\n# Sample Code for `TensorForestEstimator` with `pandas_input_fn`\r\n\r\n## Python Standard Library Imports\r\n\r\n\r\n```python\r\nimport csv\r\nimport random\r\n```\r\n\r\n## Non TensorFlow Imports\r\n\r\n\r\n```python\r\nimport numpy as np\r\nimport pandas as pd\r\n```\r\n\r\n## TensorFlow Library Imports\r\n\r\n\r\n```python\r\nimport tensorflow as tf\r\nimport tensorflow.contrib.layers as layers\r\nimport tensorflow.contrib.tensor_forest as tforest\r\n```\r\n\r\n## Aliased TensorFlow Library Imports\r\n\r\n\r\n```python\r\nfrom tensorflow.estimator.inputs import pandas_input_fn\r\nfrom tensorflow.python.platform import tf_logging as logging\r\n```\r\n\r\n\r\n```python\r\ntf.logging.set_verbosity(tf.logging.DEBUG)\r\n```\r\n\r\n## Metadata for CSV Columns\r\n\r\n\r\n```python\r\nCOLUMN_PROPS = {\r\n    'sex' : {\r\n        'is_feature' : True,\r\n        'is_label' : False,\r\n        'dtype' : tf.int32,\r\n        'default' : -1,\r\n        'feature_column' : layers.real_valued_column(\r\n            'sex',\r\n            dtype=tf.int32\r\n        )\r\n    },\r\n    'age' : {\r\n        'is_feature' : True,\r\n        'is_label' : False,\r\n        'dtype' : tf.int32,\r\n        'default' : -1,\r\n        'feature_column' : layers.real_valued_column(\r\n            'age',\r\n            dtype=tf.int32\r\n        )  \r\n    },\r\n    'Time' : {\r\n        'is_feature' : True,\r\n        'is_label' : False,\r\n        'dtype' : tf.float32,\r\n        'default' : -1.0,\r\n        'feature_column' : layers.real_valued_column(\r\n            'Time',\r\n            dtype=tf.float32\r\n        )\r\n    },\r\n    'Number_of_Warts' : {\r\n        'is_feature' : True,\r\n        'is_label' : False,\r\n        'dtype' : tf.int32,\r\n        'default' : -1,\r\n        'feature_column' : layers.real_valued_column(\r\n            'Number_of_Warts',\r\n            dtype=tf.int32\r\n        ),\r\n    },\r\n    'Type' : {\r\n        'is_feature' : True,\r\n        'is_label' : False,\r\n        'dtype' : tf.int32,\r\n        'default' : -1,\r\n        'feature_column' : layers.real_valued_column(\r\n            'Type',\r\n            dtype=tf.int32\r\n        )\r\n    },\r\n    'Area' : {\r\n        'is_feature' : True,\r\n        'is_label' : False,\r\n        'dtype' : tf.int32,\r\n        'default' : -1,\r\n        'feature_column' : layers.real_valued_column(\r\n            'Area',\r\n            dtype=tf.int32\r\n        )\r\n    },\r\n    'induration_diameter' : {\r\n        'is_feature' : True,\r\n        'is_label' : False,\r\n        'dtype': tf.int32,\r\n        'default': -1,\r\n        'feature_column' : layers.real_valued_column(\r\n            'induration_diameter',\r\n            dtype=tf.int32\r\n        )\r\n    },\r\n    'Result_of_Treatment': {\r\n        'is_feature' : False,\r\n        'is_label' : True,\r\n        'dtype': tf.int32,\r\n        'default': -1,\r\n        'feature_column' : None\r\n    }\r\n}\r\n```\r\n\r\n## Ordering of CSV Columns\r\n\r\n\r\n```python\r\nCSV_COLUMNS = [\r\n    'sex',\r\n    'age',\r\n    'Time',\r\n    'Number_of_Warts',\r\n    'Type',\r\n    'Area',\r\n    'induration_diameter',\r\n    'Result_of_Treatment'\r\n]\r\n```\r\n\r\n## Generate Lists of Features and Labels from Metadata\r\n\r\n\r\n```python\r\nFEATURE_COLUMNS = []\r\nLABEL_COLUMN = None\r\n\r\nfor k in CSV_COLUMNS:\r\n    if COLUMN_PROPS[k]['is_feature']:\r\n        FEATURE_COLUMNS.append(k)\r\n    elif COLUMN_PROPS[k]['is_label']:\r\n        LABEL_COLUMN = k\r\n```\r\n\r\n## Helper Function for Shuffling and Exporting Subsets\r\n\r\nThis function is used to export training, evaluation, and test data sets as CSVs, shuffling the rows.\r\n\r\n\r\n```python\r\ndef generate_sets(datasets):\r\n    for k, v in datasets.items():\r\n        random.shuffle(v)\r\n        with open(k + '.csv', 'w') as fobj:\r\n            wrtr = csv.writer(fobj)\r\n            wrtr.writerow(header)\r\n            for rec in v:\r\n                wrtr.writerow(rec)\r\n```\r\n\r\n## Split Datasets for Traning, Evaluation, and Testing\r\n\r\n\r\n```python\r\ntrn = []\r\nevl = []\r\ntst = []\r\n\r\nwith open('Immunotherapy - ImmunoDataset.csv', 'r') as fobj:\r\n    rdr = csv.reader(fobj)\r\n    header = next(rdr)\r\n    label_key = header[-1]\r\n    feature_keys = header[:-1]\r\n\r\n    for rec in rdr:\r\n        # Output of random number generator determines\r\n        # which set the record will be placed.\r\n        rn =  random.random()\r\n        if rn < 0.6:\r\n            trn.append(rec)\r\n        elif rn < 0.8:\r\n            evl.append(rec)\r\n        else:\r\n            tst.append(rec)\r\n\r\ndatasets = {\r\n    'train' : trn,\r\n    'eval' : evl,\r\n    'test' : tst\r\n}\r\n\r\ngenerate_sets(datasets)\r\n```\r\n\r\n## Set up `TensorForest` Hyperparameters\r\n\r\n\r\n```python\r\nfhp = tforest.tensor_forest.ForestHParams(\r\n    num_classes=2,\r\n    num_features=7,\r\n    regression=False\r\n)\r\n```\r\n\r\n## Pluck Feature Columns from Metadata Dictionary\r\n\r\n\r\n```python\r\nfcs = [COLUMN_PROPS[k]['feature_column'] for k in FEATURE_COLUMNS]\r\n```\r\n\r\n## Instatntiate `TensorForestEstimator` Object\r\n\r\n\r\n```python\r\ntfe = tforest.random_forest.TensorForestEstimator(\r\n    fhp,\r\n    feature_columns=fcs,\r\n    report_feature_importances=True\r\n)\r\n```\r\n\r\n## Define a Wrapper for Training and Evaluation Using `pandas_input_fn`\r\n\r\n\r\n```python\r\ndef get_input_fn(csv_file, num_epochs=1):\r\n    \r\n    df = pd.read_csv(csv_file)\r\n\r\n    # Workaround for this issue:\r\n    #\r\n    # https://stackoverflow.com/questions/48577372/tensorflowusing-pandas-input-fn-with-tensorforestestimator\r\n    # https://github.com/tensorflow/tensorflow/issues/16692        \r\n\r\n    def internal_input_fn():\r\n\r\n        features = df.loc[:,'sex':'induration_diameter']\r\n        labels =  df.loc[:,'Result_of_Treatment']\r\n        \r\n        features, labels = pandas_input_fn(\r\n            x=features,\r\n            y=labels,\r\n            shuffle=True,\r\n            num_epochs=num_epochs\r\n        )()\r\n\r\n        features = {\r\n            k : tf.expand_dims(features[k], axis=1) \r\n            for k in features\r\n        }\r\n        \r\n        labels = tf.expand_dims(labels, axis=1)\r\n      \r\n        return features, labels\r\n    \r\n    return internal_input_fn\r\n```\r\n\r\n## Train on Data\r\n\r\n\r\n```python\r\ntfe.fit(\r\n    input_fn=get_input_fn('train.csv', num_epochs=None)\r\n)\r\n```\r\n\r\n## Evaluate the Model\r\n\r\n\r\n```python\r\ntfe.evaluate(input_fn=get_input_fn('eval.csv'))\r\n```\r\n\r\n## Define a Wrapper for Prediction\r\n\r\n\r\n```python\r\ndef get_predict_input_fn(csv_file):\r\n    \r\n    df = pd.read_csv(csv_file)\r\n    \r\n    print('actual values: {0}'.format(df.loc[:, 'Result_of_Treatment'].values))\r\n\r\n    # Workaround for this issue:\r\n    #\r\n    # https://stackoverflow.com/questions/48577372/tensorflowusing-pandas-input-fn-with-tensorforestestimator\r\n    # https://github.com/tensorflow/tensorflow/issues/16692        \r\n\r\n    def internal_input_fn():\r\n\r\n        features = df.loc[:,'sex':'induration_diameter']\r\n              \r\n        features = pandas_input_fn(\r\n            x=features,\r\n            shuffle=False\r\n        )()\r\n\r\n        features = {\r\n            k : tf.expand_dims(features[k], axis=1) \r\n            for k in features\r\n        }\r\n      \r\n        return features\r\n    \r\n    return internal_input_fn\r\n```\r\n\r\n## Make Predictions on Test Data\r\n\r\n\r\n```python\r\n# The documentation for tf.contrib.learn.Estimator.predict() lies.\r\n# \r\n# https://stackoverflow.com/questions/40705710/cannot-get-predictions-of-tensorflow-dnnclassifier\r\n\r\nnp.array(\r\n    [\r\n        res['classes']\r\n        for res in list(\r\n            tfe.predict(input_fn=get_predict_input_fn('test.csv'))\r\n        )\r\n    ],\r\n    dtype=np.int32\r\n)\r\n```\r\n\r\n**Other info / logs**\r\n\r\nSee my comment on the possible source of the problem.\r\n\r\nhttps://github.com/tensorflow/tensorflow/commit/0b182c3940a3d15d574da327ac705c2efa18a985#r32454203"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26070", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26070/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26070/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26070/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26070", "id": 413886329, "node_id": "MDU6SXNzdWU0MTM4ODYzMjk=", "number": 26070, "title": "Model Memory requirements", "user": {"login": "Geeks-Sid", "id": 20500704, "node_id": "MDQ6VXNlcjIwNTAwNzA0", "avatar_url": "https://avatars1.githubusercontent.com/u/20500704?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Geeks-Sid", "html_url": "https://github.com/Geeks-Sid", "followers_url": "https://api.github.com/users/Geeks-Sid/followers", "following_url": "https://api.github.com/users/Geeks-Sid/following{/other_user}", "gists_url": "https://api.github.com/users/Geeks-Sid/gists{/gist_id}", "starred_url": "https://api.github.com/users/Geeks-Sid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Geeks-Sid/subscriptions", "organizations_url": "https://api.github.com/users/Geeks-Sid/orgs", "repos_url": "https://api.github.com/users/Geeks-Sid/repos", "events_url": "https://api.github.com/users/Geeks-Sid/events{/privacy}", "received_events_url": "https://api.github.com/users/Geeks-Sid/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-25T00:02:47Z", "updated_at": "2019-02-26T01:25:49Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.12.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nWant to print memory requirement of the model given a particular input size, batch size and a Structure of a model. It would cause Optimal GPU usage and also give a fair idea on what batch size should be.\r\n**Will this change the current api? How?**\r\nNo\r\n**Who will benefit with this feature?**\r\nEveryone who doesn't have a lot of compute and needs to know more specifics of the model\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26069", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26069/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26069/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26069/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26069", "id": 413876211, "node_id": "MDU6SXNzdWU0MTM4NzYyMTE=", "number": 26069, "title": "Many operations don't support uint64", "user": {"login": "hjfreyer", "id": 271308, "node_id": "MDQ6VXNlcjI3MTMwOA==", "avatar_url": "https://avatars1.githubusercontent.com/u/271308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjfreyer", "html_url": "https://github.com/hjfreyer", "followers_url": "https://api.github.com/users/hjfreyer/followers", "following_url": "https://api.github.com/users/hjfreyer/following{/other_user}", "gists_url": "https://api.github.com/users/hjfreyer/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjfreyer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjfreyer/subscriptions", "organizations_url": "https://api.github.com/users/hjfreyer/orgs", "repos_url": "https://api.github.com/users/hjfreyer/repos", "events_url": "https://api.github.com/users/hjfreyer/events{/privacy}", "received_events_url": "https://api.github.com/users/hjfreyer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yongtang", "id": 6932348, "node_id": "MDQ6VXNlcjY5MzIzNDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6932348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yongtang", "html_url": "https://github.com/yongtang", "followers_url": "https://api.github.com/users/yongtang/followers", "following_url": "https://api.github.com/users/yongtang/following{/other_user}", "gists_url": "https://api.github.com/users/yongtang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yongtang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yongtang/subscriptions", "organizations_url": "https://api.github.com/users/yongtang/orgs", "repos_url": "https://api.github.com/users/yongtang/repos", "events_url": "https://api.github.com/users/yongtang/events{/privacy}", "received_events_url": "https://api.github.com/users/yongtang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yongtang", "id": 6932348, "node_id": "MDQ6VXNlcjY5MzIzNDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6932348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yongtang", "html_url": "https://github.com/yongtang", "followers_url": "https://api.github.com/users/yongtang/followers", "following_url": "https://api.github.com/users/yongtang/following{/other_user}", "gists_url": "https://api.github.com/users/yongtang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yongtang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yongtang/subscriptions", "organizations_url": "https://api.github.com/users/yongtang/orgs", "repos_url": "https://api.github.com/users/yongtang/repos", "events_url": "https://api.github.com/users/yongtang/events{/privacy}", "received_events_url": "https://api.github.com/users/yongtang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-02-24T22:24:26Z", "updated_at": "2019-03-20T20:29:59Z", "closed_at": null, "author_association": "NONE", "body": "\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Mac OS 10.14.2\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): b'unknown' 1.13.0-rc1\r\n- Python version: Python 3.7.2\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\n\r\nI've encountered several operations that support int64 but not uint64, without any clear reasoning. `tf.equal`, `tf.fill`, `tf.where`, and `tf.stack`, for example, give errors like:\r\n\r\n    InvalidArgumentError (see above for traceback): No OpKernel was registered to support Op 'Pack' used by node stack (defined at <stdin>:4) with these attrs: [T=DT_UINT64, axis=0, N=2]\r\n\r\n\r\n**Describe the expected behavior**\r\n\r\nFunctions that work for int64s should also work for uint64s when the behavior would be the same.\r\n\r\n**Code to reproduce the issue**\r\n\r\nhttps://gist.github.com/hjfreyer/31ab2dd2d85d1a509272af1c5e011dde\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26068", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26068/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26068/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26068/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26068", "id": 413856799, "node_id": "MDU6SXNzdWU0MTM4NTY3OTk=", "number": 26068, "title": "Incorrect predictions while exporting keras model to android", "user": {"login": "AzharSindhi", "id": 24705300, "node_id": "MDQ6VXNlcjI0NzA1MzAw", "avatar_url": "https://avatars1.githubusercontent.com/u/24705300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AzharSindhi", "html_url": "https://github.com/AzharSindhi", "followers_url": "https://api.github.com/users/AzharSindhi/followers", "following_url": "https://api.github.com/users/AzharSindhi/following{/other_user}", "gists_url": "https://api.github.com/users/AzharSindhi/gists{/gist_id}", "starred_url": "https://api.github.com/users/AzharSindhi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AzharSindhi/subscriptions", "organizations_url": "https://api.github.com/users/AzharSindhi/orgs", "repos_url": "https://api.github.com/users/AzharSindhi/repos", "events_url": "https://api.github.com/users/AzharSindhi/events{/privacy}", "received_events_url": "https://api.github.com/users/AzharSindhi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-02-24T19:16:27Z", "updated_at": "2019-04-10T13:07:44Z", "closed_at": null, "author_association": "NONE", "body": "I trained the Keras model on State Farm Distracted Driver Dataset and exported it to **.pb** graph file with the code given below:\r\n\r\n```\r\ndef export_model(saver, model, input_node_names, output_node_name):\r\n    tf.train.write_graph(K.get_session().graph_def, 'out', \\\r\n        MODEL_NAME + '_graph.pbtxt')\r\n\r\n    saver.save(K.get_session(), 'out/' + MODEL_NAME + '.chkp')\r\n\r\n    freeze_graph.freeze_graph('out/' + MODEL_NAME + '_graph.pbtxt', None, \\\r\n        False, 'out/' + MODEL_NAME + '.chkp', output_node_name, \\\r\n        \"save/restore_all\", \"save/Const:0\", \\\r\n        'out/frozen_' + MODEL_NAME + '.pb', True, \"\")\r\n\r\n    input_graph_def = tf.GraphDef()\r\n    with tf.gfile.Open('out/frozen_' + MODEL_NAME + '.pb', \"rb\") as f:\r\n        input_graph_def.ParseFromString(f.read())\r\n\r\n    output_graph_def = optimize_for_inference_lib.optimize_for_inference(\r\n            input_graph_def, input_node_names, [output_node_name],\r\n            tf.float32.as_datatype_enum)\r\n\r\n    with tf.gfile.FastGFile('out/opt_' + MODEL_NAME + '.pb', \"wb\") as f:\r\n        f.write(output_graph_def.SerializeToString())\r\n\r\n    print(\"graph saved!\")\r\n```\r\n\r\n The problem is when I run that exported model on android, it always predicts wrong classes. The same code below predicts the correct labels when given .pb file of model trained on MNIST Dataset from [source.](https://github.com/llSourcell/A_Guide_to_Running_Tensorflow_Models_on_Android/blob/master/mnistandroid/app/src/main/assets/opt_mnist_convnet-keras.pb).\r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n    ImageView imageView;\r\n    Button button1;\r\n    TextView label;\r\n    private static final int PixelWidth = 100;\r\n    //private List<Classifier> mClassifiers = new ArrayList<>();\r\n    public static final int cam_req = 999; // used in OpenCamera Function\r\n    public Classifier c11;\r\n    private static final int PICK_IMAGE = 1;\r\n    Uri imageUri;\r\n    private boolean isLoaded= true;\r\n    private float[] imageNormalizedPixels;\r\n    private int [] imageBitmapPixels;\r\n    private byte[] bytearray;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        c11 = new ModelClassifier();\r\n        loadModel();\r\n\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        imageView = (ImageView) findViewById(R.id.imageView);\r\n        label = (TextView)findViewById(R.id.label_output);\r\n        button1 = (Button) findViewById(R.id.button);\r\n        button1.setOnClickListener(new View.OnClickListener() {\r\n                                       @Override\r\n                                       public void onClick(View v) {\r\n                                           openGallery();\r\n                                       }\r\n                                   }\r\n\r\n        );\r\n\r\n\r\n    }\r\n\r\n    private void loadModel() {\r\n        //The Runnable interface is another way in which you can implement multi-threading other than extending the\r\n        // //Thread class due to the fact that Java allows you to extend only one class. Runnable is just an interface,\r\n        // //which provides the method run.\r\n        // //Threads are implementations and use Runnable to call the method run().\r\n        new Thread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                try {\r\n                    c11=ModelClassifier.create(getAssets(), \"Keras\", \"opt_keras-10grey.pb\", \"labels.txt\", PixelWidth,\r\n                          \"input_3\", \"softmax_1/Softmax\", false);\r\n\r\n                } catch (final Exception e) {\r\n                    //if they aren't found, throw an error!\r\n                    label.setText(\"Model not loaded\");\r\n                    isLoaded = false;\r\n                    throw new RuntimeException(\"Error initializing classifiers!\", e);\r\n                }\r\n            }\r\n        }).start();\r\n    }\r\n\r\n\r\n\r\n    private void openGallery() {\r\n        if (isLoaded) {\r\n            Intent gallery = new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.INTERNAL_CONTENT_URI);\r\n            startActivityForResult(gallery, PICK_IMAGE);\r\n        }\r\n\r\n    }\r\n\r\n    public void OpenCamera(View view) {\r\n\r\n        if (isLoaded) {\r\n\r\n            Intent intnt = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\r\n            startActivityForResult(intnt, cam_req);\r\n        }\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent Data) {\r\n        super.onActivityResult(requestCode, resultCode, Data);\r\n        if (resultCode == RESULT_OK && requestCode == PICK_IMAGE) {\r\n\r\n            try {\r\n                final Uri imageUri = Data.getData();\r\n                final InputStream imageStream = getContentResolver().openInputStream(imageUri);\r\n                final Bitmap selectedImage = BitmapFactory.decodeStream(imageStream);\r\n                ImageView imageView = (ImageView) findViewById(R.id.imageView);\r\n                imageView.setImageBitmap(selectedImage);\r\n                imageView.invalidate();\r\n                BitmapDrawable drawable = (BitmapDrawable) imageView.getDrawable();\r\n\r\n                Bitmap image = Bitmap.createScaledBitmap(selectedImage, PixelWidth, PixelWidth, false);\r\n\r\n                float [] pixels = getPixels(image);\r\n\r\n                if (pixels!=null) {\r\n                    System.out.println(\"It is gallery image\");\r\n\r\n                    final Classification returned = c11.recognize(pixels);\r\n                    System.out.println(\"this is the predicted class: \"+returned.getLabel());\r\n                    label.setText(returned.getLabel());\r\n\r\n\r\n                }\r\n\r\n            } catch (FileNotFoundException e) {\r\n                e.printStackTrace();\r\n            }\r\n\r\n   }\r\n\r\n\r\n    public float[] getPixels(Bitmap bitmap)\r\n    {\r\n\r\n        // Get 100x100 pixel data from bitmap\r\n        int[] pixels = new int[PixelWidth * PixelWidth];\r\n        bitmap.getPixels(pixels, 0, bitmap.getWidth(), 0, 0, bitmap.getWidth(), bitmap.getHeight());\r\n\r\n        float[] retPixels = new float[pixels.length];\r\n        for (int i = 0; i < pixels.length; ++i) {\r\n            // Set 0 for white and 255 for black pixel\r\n            int pix = pixels[i];\r\n            retPixels[i] = pix /255f;\r\n        }\r\n        return retPixels;\r\n    }\r\n\r\n    }\r\n\r\n```\r\n**ModelClassifier.java** class is given below:\r\n\r\n```\r\n\r\n\r\npublic class ModelClassifier implements Classifier {\r\n\r\n    private static final float THRESHOLD = 0.1f;\r\n    private TensorFlowInferenceInterface tfHelper;\r\n\r\n    private String name;\r\n    private String InputName;\r\n    private String OutputName;\r\n\r\n    private int inputsize;\r\n\r\n    private boolean feedKeepProb;\r\n\r\n    private List<String> Labels;\r\n    private float[] Output;\r\n\r\n    private String OutputNames[];\r\n\r\n\r\n   /*public  ModelClassier(Context a){\r\n       Intent a1=a;\r\n    }*/\r\n\r\n    private static List<String> readLabels(AssetManager am, String fileName) throws IOException {\r\n        BufferedReader br = new BufferedReader(new InputStreamReader(am.open(fileName)));\r\n\r\n        String line;\r\n        List<String> labels = new ArrayList<>();\r\n        while ((line = br.readLine()) != null) {\r\n            labels.add(line);\r\n        }\r\n\r\n        br.close();\r\n        return labels;\r\n    }\r\n\r\n    public static ModelClassifier create(AssetManager assetManager, String name,\r\n                                         String modelPath, String labelFile, int inputSize, String inputName, String outputName,\r\n                                         boolean feedKeepProb) throws IOException {\r\n\r\n        ModelClassifier c = new ModelClassifier();\r\n\r\n\r\n        c.name = name;\r\n\r\n        c.InputName = inputName;\r\n        c.OutputName = outputName;\r\n\r\n\r\n        c.Labels = readLabels(assetManager, labelFile);\r\n        System.out.println(\"These are the labels\"+c.Labels.toString());\r\n\r\n        c.tfHelper = new TensorFlowInferenceInterface(assetManager, modelPath);\r\n        System.out.println(\"ModelPath is++++++++++\" + modelPath);\r\n        int numClasses = 10;\r\n\r\n\r\n        c.inputsize = inputSize;\r\n\r\n\r\n        c.OutputNames = new String[]{outputName};\r\n\r\n        c.OutputName = outputName;\r\n        c.Output = new float[numClasses];\r\n\r\n        c.feedKeepProb = feedKeepProb;\r\n        System.out.println(\"Model is finally loaded++++++++++\");\r\n        return c;\r\n    }\r\n\r\n\r\n    //@Override\r\n    public String name() {\r\n        return name;\r\n    }\r\n\r\n\r\n    @Override\r\n    public Classification recognize(float[] pixels) {\r\n\r\n        //using the interface\r\n        //give it the input name, raw pixels from the drawing,\r\n        //input size\r\n        tfHelper.feed(InputName, pixels, new long[]{1, inputsize, inputsize, 1});\r\n\r\n        //probabilities\r\n        if (feedKeepProb) {\r\n            tfHelper.feed(\"keep_prob\", new float[]{1});\r\n            System.out.println(\"Infeedprob++++++++++\");\r\n        }\r\n        //get the possible outputs\r\n        tfHelper.run(OutputNames);\r\n\r\n\r\n        tfHelper.fetch(OutputName, Output);\r\n        System.out.println(\"afterfetch++++++++++\");\r\n        // Find the best classification\r\n        //for each output prediction\r\n        //if its above the threshold for accuracy we predefined\r\n        //write it out to the view\r\n        Classification ans = new Classification();\r\n        for (int i = 0; i < Output.length; ++i) {\r\n            if (Output[i] > THRESHOLD && Output[i] > ans.getConf()) {\r\n                ans.update(Output[i], Labels.get(i));\r\n            }\r\n\r\n        }\r\n\r\n        return ans;\r\n    }\r\n\r\n```\r\n**Note that model input shape is [100,100,1]**\r\n\r\nPlease tell me where I am making mistake. I have tried training on different number of classes but the outputs are completely different. \r\n\r\n\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26060", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26060/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26060/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26060/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26060", "id": 413815491, "node_id": "MDU6SXNzdWU0MTM4MTU0OTE=", "number": 26060, "title": "tf-lite: allocateTensors never returns", "user": {"login": "BorisMansencal", "id": 2734243, "node_id": "MDQ6VXNlcjI3MzQyNDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/2734243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BorisMansencal", "html_url": "https://github.com/BorisMansencal", "followers_url": "https://api.github.com/users/BorisMansencal/followers", "following_url": "https://api.github.com/users/BorisMansencal/following{/other_user}", "gists_url": "https://api.github.com/users/BorisMansencal/gists{/gist_id}", "starred_url": "https://api.github.com/users/BorisMansencal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BorisMansencal/subscriptions", "organizations_url": "https://api.github.com/users/BorisMansencal/orgs", "repos_url": "https://api.github.com/users/BorisMansencal/repos", "events_url": "https://api.github.com/users/BorisMansencal/events{/privacy}", "received_events_url": "https://api.github.com/users/BorisMansencal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-02-24T12:19:22Z", "updated_at": "2019-03-18T18:01:35Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- I Have written custom code inspired from the tf-lite demo https://github.com/tensorflow/tensorflow/tree/master/tensorflow/lite/java/demo. The code and model is here: https://github.com/BorisMansencal/tflite_test0\r\n- OS Platform and Distribution: I build with up-to-date Android Studio 3.3.1 on macOS 10.13.6\r\n- Mobile device: tested both on Nokia 7 Plus (TA-1046) with Android 9/API 28, and Motorola Moto G5S (XT1794) with Android 8.1.0/API 27.\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): I use tensorflow-lite:0.0.0-nightly\r\n\r\n**Describe the current behavior**\r\n\r\nMy code uses tf-lite for image segmentation.\r\nIt works correctly on Nokia 7 Plus (TA-1046) with Android 9/API 28.\r\nIt does not work on Motorola Moto G5S (XT1794) with Android 8.1.0/API 27. \r\n\r\n**Describe the expected behavior**\r\n\r\nMy code is doing image segmentation using a U-Net DNN architecture.  \r\nIt is inspired from the the tf-lite demo example. It returns an image, instead of a classification.\r\n\r\nThe code is available here: https://github.com/BorisMansencal/tflite_test0\r\nWhen run on on mobile device, you should see an image and a \"run\" button. You click on the \"run\" button and when the inference is finished, you should see an image : with white where the object was detected, black elsewhere.\r\n\r\nIt works correctly on Nokia 7 Plus (TA-1046) with Android 9/API 28, but not on Motorola Moto G5S (XT1794) with Android 8.1.0/API 27.\r\n\r\nIt should work on any device with API 26 Android version.\r\n\r\n**Code to reproduce the issue**\r\nhttps://github.com/BorisMansencal/tflite_test0\r\n\r\n**Other info / logs**\r\n\r\nWhen I run the application in the debugger, from Android Studio, on the Motorola Moto G5S , I can see that the call to the Interpreter constructor (called at ImageClassifier.java:59) never returns.\r\nIf I step into the Interpreter constructor, the problem seems to come from void NativeInterpreterWrapper::init(long errorHandle, long modelHandle, Options options): the call to allocateTensors(this.interpreterHandle, errorHandle) never returns.\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26047", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26047/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26047/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26047/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26047", "id": 413765005, "node_id": "MDU6SXNzdWU0MTM3NjUwMDU=", "number": 26047, "title": "Switching between TF 1.x and TF 2.0 in the API browser loses the context", "user": {"login": "ageron", "id": 76661, "node_id": "MDQ6VXNlcjc2NjYx", "avatar_url": "https://avatars3.githubusercontent.com/u/76661?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ageron", "html_url": "https://github.com/ageron", "followers_url": "https://api.github.com/users/ageron/followers", "following_url": "https://api.github.com/users/ageron/following{/other_user}", "gists_url": "https://api.github.com/users/ageron/gists{/gist_id}", "starred_url": "https://api.github.com/users/ageron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ageron/subscriptions", "organizations_url": "https://api.github.com/users/ageron/orgs", "repos_url": "https://api.github.com/users/ageron/repos", "events_url": "https://api.github.com/users/ageron/events{/privacy}", "received_events_url": "https://api.github.com/users/ageron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "lamberta", "id": 43051, "node_id": "MDQ6VXNlcjQzMDUx", "avatar_url": "https://avatars2.githubusercontent.com/u/43051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lamberta", "html_url": "https://github.com/lamberta", "followers_url": "https://api.github.com/users/lamberta/followers", "following_url": "https://api.github.com/users/lamberta/following{/other_user}", "gists_url": "https://api.github.com/users/lamberta/gists{/gist_id}", "starred_url": "https://api.github.com/users/lamberta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lamberta/subscriptions", "organizations_url": "https://api.github.com/users/lamberta/orgs", "repos_url": "https://api.github.com/users/lamberta/repos", "events_url": "https://api.github.com/users/lamberta/events{/privacy}", "received_events_url": "https://api.github.com/users/lamberta/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lamberta", "id": 43051, "node_id": "MDQ6VXNlcjQzMDUx", "avatar_url": "https://avatars2.githubusercontent.com/u/43051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lamberta", "html_url": "https://github.com/lamberta", "followers_url": "https://api.github.com/users/lamberta/followers", "following_url": "https://api.github.com/users/lamberta/following{/other_user}", "gists_url": "https://api.github.com/users/lamberta/gists{/gist_id}", "starred_url": "https://api.github.com/users/lamberta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lamberta/subscriptions", "organizations_url": "https://api.github.com/users/lamberta/orgs", "repos_url": "https://api.github.com/users/lamberta/repos", "events_url": "https://api.github.com/users/lamberta/events{/privacy}", "received_events_url": "https://api.github.com/users/lamberta/received_events", "type": "User", "site_admin": false}, {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-02-24T01:04:56Z", "updated_at": "2020-02-19T06:50:10Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- TensorFlow version: from \r\n- Doc Link:\r\n\r\n\r\n**Describe the documentation issue**\r\nWhen I'm browsing the documentation, I often need to switch from TF 1.x to TF 2.0 or vice versa. Unfortunately, the context is lost when I do that.\r\nFor example, visit the `tf.constant` documentation for TF 2.0:\r\nhttps://www.tensorflow.org/versions/r2.0/api_docs/python/tf/constant\r\nThen from the drop down menu at the top (labeled \"API r2.0\"), select any TF 1.x version. Notice that you do not land on the `tf.constant` page.\r\nThe same is true in the reverse direction.\r\n\r\nThis also makes it hard to find TF 2.0 documentation by searching: I generally land on a TF 1.x page, when I switch to TF 2.0 the context is lost.\r\n\r\nOf course, many functions have been removed or moved, but this should not be a problem, since most of them are still available in `tf.compat.v1`.\r\n\r\n**We welcome contributions by users. Will you be able to update submit a PR (use the [doc style guide](https://www.tensorflow.org/community/documentation)) to fix the doc Issue?**\r\nWhy not, but I would need someone to point me to the code that handles this."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26033", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26033/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26033/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26033/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26033", "id": 413682106, "node_id": "MDU6SXNzdWU0MTM2ODIxMDY=", "number": 26033, "title": "[TF2.0] Change default types globally", "user": {"login": "awav", "id": 24483645, "node_id": "MDQ6VXNlcjI0NDgzNjQ1", "avatar_url": "https://avatars0.githubusercontent.com/u/24483645?v=4", "gravatar_id": "", "url": "https://api.github.com/users/awav", "html_url": "https://github.com/awav", "followers_url": "https://api.github.com/users/awav/followers", "following_url": "https://api.github.com/users/awav/following{/other_user}", "gists_url": "https://api.github.com/users/awav/gists{/gist_id}", "starred_url": "https://api.github.com/users/awav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/awav/subscriptions", "organizations_url": "https://api.github.com/users/awav/orgs", "repos_url": "https://api.github.com/users/awav/repos", "events_url": "https://api.github.com/users/awav/events{/privacy}", "received_events_url": "https://api.github.com/users/awav/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, {"login": "reedwm", "id": 6510203, "node_id": "MDQ6VXNlcjY1MTAyMDM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6510203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reedwm", "html_url": "https://github.com/reedwm", "followers_url": "https://api.github.com/users/reedwm/followers", "following_url": "https://api.github.com/users/reedwm/following{/other_user}", "gists_url": "https://api.github.com/users/reedwm/gists{/gist_id}", "starred_url": "https://api.github.com/users/reedwm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reedwm/subscriptions", "organizations_url": "https://api.github.com/users/reedwm/orgs", "repos_url": "https://api.github.com/users/reedwm/repos", "events_url": "https://api.github.com/users/reedwm/events{/privacy}", "received_events_url": "https://api.github.com/users/reedwm/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 18, "created_at": "2019-02-23T10:34:30Z", "updated_at": "2020-03-09T20:11:21Z", "closed_at": null, "author_association": "NONE", "body": "Hello everyone,\r\n\r\nI made the same request a while ago at [tensorflow/community](https://github.com/tensorflow/community/issues/23). The similar question was raised before at [tensorflow/tensorflow#9781](https://github.com/tensorflow/tensorflow/issues/9781), where maintainers argued that GPU is much faster on float32, default type cannot (should not) be changed because of backwards compatibility reasons and cetera.\r\n\r\nThe thing is that the precision is very important for algorithms where operations like cholesky, solvers and etc. are used. This becomes very tedious to specify type everywhere, it gets even worse when you start using other frameworks or small libraries which follow the standard type settings and sometimes they become useless, just because type incompatibilities. The policy of **\"changing types locally solves your problems\"** becomes cumbersome.\r\n\r\nIt would be great to have methods `tf.set_default_float` and `tf.set_default_int` in TensorFlow 2.0 and I believe that such a small change will make TensorFlow more user friendly.\r\n\r\nKind regards,\r\nArtem Artemev"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26021", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26021/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26021/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/26021/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/26021", "id": 413577993, "node_id": "MDU6SXNzdWU0MTM1Nzc5OTM=", "number": 26021, "title": "SplitPath should split on both forward slashes and backslashes on Windows", "user": {"login": "wchargin", "id": 4317806, "node_id": "MDQ6VXNlcjQzMTc4MDY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4317806?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wchargin", "html_url": "https://github.com/wchargin", "followers_url": "https://api.github.com/users/wchargin/followers", "following_url": "https://api.github.com/users/wchargin/following{/other_user}", "gists_url": "https://api.github.com/users/wchargin/gists{/gist_id}", "starred_url": "https://api.github.com/users/wchargin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wchargin/subscriptions", "organizations_url": "https://api.github.com/users/wchargin/orgs", "repos_url": "https://api.github.com/users/wchargin/repos", "events_url": "https://api.github.com/users/wchargin/events{/privacy}", "received_events_url": "https://api.github.com/users/wchargin/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "wchargin", "id": 4317806, "node_id": "MDQ6VXNlcjQzMTc4MDY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4317806?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wchargin", "html_url": "https://github.com/wchargin", "followers_url": "https://api.github.com/users/wchargin/followers", "following_url": "https://api.github.com/users/wchargin/following{/other_user}", "gists_url": "https://api.github.com/users/wchargin/gists{/gist_id}", "starred_url": "https://api.github.com/users/wchargin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wchargin/subscriptions", "organizations_url": "https://api.github.com/users/wchargin/orgs", "repos_url": "https://api.github.com/users/wchargin/repos", "events_url": "https://api.github.com/users/wchargin/events{/privacy}", "received_events_url": "https://api.github.com/users/wchargin/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wchargin", "id": 4317806, "node_id": "MDQ6VXNlcjQzMTc4MDY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4317806?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wchargin", "html_url": "https://github.com/wchargin", "followers_url": "https://api.github.com/users/wchargin/followers", "following_url": "https://api.github.com/users/wchargin/following{/other_user}", "gists_url": "https://api.github.com/users/wchargin/gists{/gist_id}", "starred_url": "https://api.github.com/users/wchargin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wchargin/subscriptions", "organizations_url": "https://api.github.com/users/wchargin/orgs", "repos_url": "https://api.github.com/users/wchargin/repos", "events_url": "https://api.github.com/users/wchargin/events{/privacy}", "received_events_url": "https://api.github.com/users/wchargin/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-22T21:02:50Z", "updated_at": "2019-02-25T16:30:06Z", "closed_at": null, "author_association": "MEMBER", "body": "Currently, on Unix, SplitPath splits only on forward slashes; on\r\nWindows, it splits on forward slashes _unless_ there are no forward\r\nslashes in the string, in which case it splits on backslashes. This is\r\nconfusing, and inconsistent with platform APIs like [`_wmkdir`], which\r\ninterpret both `\\` and `/` as valid path delimiters.\r\n\r\nFor instance, `CreateRecursiveDirectory(r\"foo\\bar/baz\\quux\")` fails on\r\nWindows. This _should_ be broken into `[\"foo\", \"bar\", \"baz\", \"quux\"]`,\r\nbut actually becomes `[\"foo\", \"bar\", \"baz\\quux\"]`. When `CreateDir` is\r\ncalled on each of those components in sequence, it creates `foo`, then\r\ncreates `foo/bar`, then tries to create `foo/bar/baz\\quux`, which fails\r\nbecause the directory `foo/bar/baz` does not exist.\r\n\r\n(Googlers, see <http://b/125762969> for an example of this error.)\r\n\r\nThe whole situation is a bit less clean than one might hope, because the\r\nTF filesystem API prefers to use `/`-separators everywhere while people\r\nin Python-land prefer to use `os.path.join` to insert the proper\r\nplatform-specific path separator. But it seems clear that the current\r\nbehavior, where the delimiter used depends on what characters are in the\r\nstring, is undesirable, and that being consistent with native APIs is a\r\nbetter choice.\r\n\r\n[`_wmkdir`]: https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/mkdir-wmkdir?view=vs-2017\r\n\r\ncc @nfelt\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25980", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25980/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25980/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25980/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25980", "id": 413067069, "node_id": "MDU6SXNzdWU0MTMwNjcwNjk=", "number": 25980, "title": "Failed to convert object of type <class 'tensorflow.python.framework.sparse_tensor.SparseTensor'> to Tensor", "user": {"login": "baslia", "id": 15609197, "node_id": "MDQ6VXNlcjE1NjA5MTk3", "avatar_url": "https://avatars1.githubusercontent.com/u/15609197?v=4", "gravatar_id": "", "url": "https://api.github.com/users/baslia", "html_url": "https://github.com/baslia", "followers_url": "https://api.github.com/users/baslia/followers", "following_url": "https://api.github.com/users/baslia/following{/other_user}", "gists_url": "https://api.github.com/users/baslia/gists{/gist_id}", "starred_url": "https://api.github.com/users/baslia/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/baslia/subscriptions", "organizations_url": "https://api.github.com/users/baslia/orgs", "repos_url": "https://api.github.com/users/baslia/repos", "events_url": "https://api.github.com/users/baslia/events{/privacy}", "received_events_url": "https://api.github.com/users/baslia/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-02-21T18:37:28Z", "updated_at": "2019-12-09T13:07:23Z", "closed_at": null, "author_association": "NONE", "body": "Hi,\r\nI am using python 3.6.8 and the last keras and tensorflow (1.12.0)version.\r\nWhen I build something like that, it works:\r\n\r\n```\r\nx=keras.layers.Input(shape=(100,),sparse=False)\r\nx1=keras.layers.Dropout(0.2)(x)\r\n```\r\n\r\nBut the following code would give an error:\r\n```\r\nx=keras.layers.Input(shape=(100,),sparse=True)\r\nx1=keras.layers.Dropout(0.2)(x)\r\n```\r\n\r\n\r\nThe detailed error is \r\n_TypeError: Failed to convert object of type <class 'tensorflow.python.framework.sparse_tensor.SparseTensor'> to Tensor. Contents: SparseTensor(indices=Tensor(\"input_30/indices:0\", shape=(?, 2), dtype=int64), values=Tensor(\"dropout_28/cond/mul:0\", shape=(?,), dtype=float32), dense_shape=Tensor(\"input_30/shape:0\", shape=(2,), dtype=int64)). Consider casting elements to a supported type._\r\n\r\nI think it is a bug but I am not sure.\r\n\r\nThanks a lot.\r\n\r\nRegards.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25977", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25977/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25977/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25977/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25977", "id": 413037398, "node_id": "MDU6SXNzdWU0MTMwMzczOTg=", "number": 25977, "title": "CUDA_ERROR_ILLEGAL_ADDRESS in SoftmaxCrossEntropyWithLogits when run in FP16", "user": {"login": "cbcase", "id": 238403, "node_id": "MDQ6VXNlcjIzODQwMw==", "avatar_url": "https://avatars1.githubusercontent.com/u/238403?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbcase", "html_url": "https://github.com/cbcase", "followers_url": "https://api.github.com/users/cbcase/followers", "following_url": "https://api.github.com/users/cbcase/following{/other_user}", "gists_url": "https://api.github.com/users/cbcase/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbcase/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbcase/subscriptions", "organizations_url": "https://api.github.com/users/cbcase/orgs", "repos_url": "https://api.github.com/users/cbcase/repos", "events_url": "https://api.github.com/users/cbcase/events{/privacy}", "received_events_url": "https://api.github.com/users/cbcase/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-02-21T17:22:28Z", "updated_at": "2019-03-13T01:38:30Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04.5\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): Binary (dockerhub: `tensorflow/tensorflow:1.13.0rc2-gpu-py3`)\r\n- TensorFlow version (use command below): `b'v1.13.0-rc2-0-gc865ec5621' 1.13.0-rc2`\r\n- Python version: 3.5.2\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: 10.0 / 7.4.1\r\n- GPU model and memory: Quadro GV100, 32GB\r\n\r\n**Describe the current behavior**\r\nThe `SoftmaxCrossEntropyWithLogits` op will hit a `CUDA_ERROR_ILLEGAL_ADDRESS` error when executed in fp16 with certain size inputs. \r\n\r\n**Describe the expected behavior**\r\nNo segfault -- though it's fine if the results are numerically bad.\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport numpy as np\r\nimport tensorflow as tf\r\nfrom tensorflow.python.ops import gen_nn_ops\r\n\r\nmb = 4005\r\nvocab = 8193\r\n\r\nlogits = tf.placeholder(tf.float16, shape=(mb, vocab))\r\nlabels = tf.placeholder(tf.int32, shape=(mb,))                        \r\ntargets = tf.one_hot(labels, depth=vocab, dtype=tf.float16)\r\n\r\nxentropy, _ = gen_nn_ops.softmax_cross_entropy_with_logits(\r\n    logits, targets)\r\n\r\nlogits_vals = np.random.randn(*logits.shape).astype(np.float16)\r\nlabels_vals = np.random.randint(0, vocab, size=labels.shape)\r\n\r\nwith tf.Session() as sess:\r\n    ret = sess.run(xentropy, {logits: logits_vals,\r\n                              labels: labels_vals})\r\n```\r\n\r\n**Other info / logs**\r\nI've attached a log from cuda-memcheck. There is an illegal write in the relevant eigen kernel.\r\n[memcheck-xentropy.log](https://github.com/tensorflow/tensorflow/files/2890344/memcheck-xentropy.log)\r\n\r\nOther comments:\r\n- This appears to be a recent regression -- I tried the same code on an older TF build (The nvidia 18.12-py3 container) and there was no error.\r\n- This is a hard bug to hit, since `tf.nn.softmax_cross_entropy_with_logits_v2` will coerce its inputs to fp32.\r\n- Many input sizes run fine; I haven't done thorough testing to establish which ones are OK and which aren't.\r\n- As mentioned above, I don't expect numerically good answers in fp16 -- this came about as a result of perf measurements when coercing fp16 everywhere."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25974", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25974/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25974/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25974/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25974", "id": 413008746, "node_id": "MDU6SXNzdWU0MTMwMDg3NDY=", "number": 25974, "title": "Able to access nodes/namespace from a graph for downloaded models", "user": {"login": "prateethvnayak", "id": 34733770, "node_id": "MDQ6VXNlcjM0NzMzNzcw", "avatar_url": "https://avatars3.githubusercontent.com/u/34733770?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prateethvnayak", "html_url": "https://github.com/prateethvnayak", "followers_url": "https://api.github.com/users/prateethvnayak/followers", "following_url": "https://api.github.com/users/prateethvnayak/following{/other_user}", "gists_url": "https://api.github.com/users/prateethvnayak/gists{/gist_id}", "starred_url": "https://api.github.com/users/prateethvnayak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prateethvnayak/subscriptions", "organizations_url": "https://api.github.com/users/prateethvnayak/orgs", "repos_url": "https://api.github.com/users/prateethvnayak/repos", "events_url": "https://api.github.com/users/prateethvnayak/events{/privacy}", "received_events_url": "https://api.github.com/users/prateethvnayak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-21T16:21:07Z", "updated_at": "2019-03-20T00:07:09Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.12\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nFor example, I download a pre-trained model from zoo such as mobilenet. After loading the graph into the session, is there a way to access the higher-level nodes which pertain to layer only. When we access nodes in the graph right now it just gives all the nodes including the ones connected to training and everything. Is there are way to access say only the convolution input/output nodes. \r\nCurrently when you find out the conv weights node and use `node.input` it gives a `mul` node before it. However, i would be looking for the `pooling` layer node or the `activation` node. So is there a way to have a super-view level without the help of tensorboard always. Helps while working on server. Kind of a simple mapping summarizing the model\r\n**Will this change the current api? How?**\r\nyes. the current nodes in the graph_def have attribute `input`. It can be tailored to another attribute say `node.main_input` which gives the next important layer input instead of a low-level op like `mul` or `add`\r\n**Who will benefit with this feature?**\r\nworking on remote servers and not able to pull up tensorboard always. Its painful to port the browser always. \r\n**Any Other info.**\r\nSimilar to model.summary() in Keras which gives the overview of the model\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25971", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25971/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25971/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25971/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25971", "id": 412975314, "node_id": "MDU6SXNzdWU0MTI5NzUzMTQ=", "number": 25971, "title": "Requirements of SparseTensorDenseMatMul on GPU", "user": {"login": "binfoo1993", "id": 4076731, "node_id": "MDQ6VXNlcjQwNzY3MzE=", "avatar_url": "https://avatars3.githubusercontent.com/u/4076731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/binfoo1993", "html_url": "https://github.com/binfoo1993", "followers_url": "https://api.github.com/users/binfoo1993/followers", "following_url": "https://api.github.com/users/binfoo1993/following{/other_user}", "gists_url": "https://api.github.com/users/binfoo1993/gists{/gist_id}", "starred_url": "https://api.github.com/users/binfoo1993/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/binfoo1993/subscriptions", "organizations_url": "https://api.github.com/users/binfoo1993/orgs", "repos_url": "https://api.github.com/users/binfoo1993/repos", "events_url": "https://api.github.com/users/binfoo1993/events{/privacy}", "received_events_url": "https://api.github.com/users/binfoo1993/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-02-21T15:14:15Z", "updated_at": "2019-10-01T15:46:44Z", "closed_at": null, "author_association": "NONE", "body": "Hi, I'm using SparseTensorDenseMatMul op on GPU. And I noticed that there are some requirements for the sparse matrix.\r\n\r\nhttps://github.com/tensorflow/tensorflow/blob/9d508106b32eb6518912501d29a80ff9967dfe05/tensorflow/core/kernels/sparse_tensor_dense_matmul_op.cc#L96-L114\r\n\r\n\r\nIs this code snippet also unnecessary? Or I just can't use this op on big sparse matrix?\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25966", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25966/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25966/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25966/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25966", "id": 412885321, "node_id": "MDU6SXNzdWU0MTI4ODUzMjE=", "number": 25966, "title": "Compilation error when building tfcompile on Windows 10 (TF 1.13-rc2)", "user": {"login": "GPhilo", "id": 4441724, "node_id": "MDQ6VXNlcjQ0NDE3MjQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/4441724?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GPhilo", "html_url": "https://github.com/GPhilo", "followers_url": "https://api.github.com/users/GPhilo/followers", "following_url": "https://api.github.com/users/GPhilo/following{/other_user}", "gists_url": "https://api.github.com/users/GPhilo/gists{/gist_id}", "starred_url": "https://api.github.com/users/GPhilo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GPhilo/subscriptions", "organizations_url": "https://api.github.com/users/GPhilo/orgs", "repos_url": "https://api.github.com/users/GPhilo/repos", "events_url": "https://api.github.com/users/GPhilo/events{/privacy}", "received_events_url": "https://api.github.com/users/GPhilo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1133285679, "node_id": "MDU6TGFiZWwxMTMzMjg1Njc5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:xla", "name": "comp:xla", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-02-21T11:47:55Z", "updated_at": "2019-03-07T01:01:29Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: -\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: checkout tag v1.13-rc2\r\n- Python version: 3.5.6\r\n- Installed using virtualenv? pip? conda?: -\r\n- Bazel version (if compiling from source): 0.21\r\n- GCC/Compiler version (if compiling from source): VS 2015 14.0.25431.01 Update 3\r\n- CUDA/cuDNN version: 10.0/7.3.1\r\n- GPU model and memory: GTX 1080, 8GBs\r\n\r\n**Describe the problem**\r\nThis is a direct clone of issue #24218 as per request of @jvishnuvardhan. Except the code and CUDA version, everything else stated there applies here as well. Below the same information provided in the referenced issue, updated to the current configuration:\r\n\r\nChecked out the release 1.13-rc2 branch of the TF repo, configured bazel (configuration is below) and ran \r\n`bazel build -c opt --config=opt //tensorflow/compiler/aot:tfcompile`\r\n\r\nCompilation fails at `.\\tensorflow/compiler/tf2xla/cpu_function_runtime.h(71): error C2338`. Full error message:\r\n\r\n```\r\nERROR: C:/tf/tensorflow/compiler/tf2xla/BUILD:98:1: C++ compilation of rule '//tensorflow/compiler/tf2xla:cpu_function_runtime' failed (Exit 2): python.exe failed: error executing command\r\n  cd C:/users/filippo/_bazel_filippo/rbrahckg/execroot/org_tensorflow\r\n  SET CUDA_TOOLKIT_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.0\r\n    SET CUDNN_INSTALL_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.0\r\n    SET INCLUDE=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\INCLUDE;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\ucrt;C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\include\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\shared;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\winrt;\r\n    SET LIB=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\LIB\\amd64;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\LIB\\amd64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.17763.0\\ucrt\\x64;C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\lib\\um\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.17763.0\\um\\x64;\r\n    SET PATH=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE\\CommonExtensions\\Microsoft\\TestWindow;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\BIN\\amd64;C:\\WINDOWS\\Microsoft.NET\\Framework64\\v4.0.30319;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\VCPackages;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\Tools;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Team Tools\\Performance Tools\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Team Tools\\Performance Tools;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\x86;C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v10.0A\\bin\\NETFX 4.6.1 Tools\\x64\\;;C:\\WINDOWS\\system32\r\n    SET PWD=/proc/self/cwd\r\n    SET PYTHON_BIN_PATH=C:/Users/Filippo/Anaconda3/envs/tf_build/python.exe\r\n    SET PYTHON_LIB_PATH=C:/Users/Filippo/Anaconda3/envs/tf_build/lib/site-packages\r\n    SET TEMP=C:\\Users\\Filippo\\AppData\\Local\\Temp\r\n    SET TF_CUDA_CLANG=0\r\n    SET TF_CUDA_COMPUTE_CAPABILITIES=5.0,6.1,7.5\r\n    SET TF_CUDA_VERSION=10.0\r\n    SET TF_CUDNN_VERSION=7\r\n    SET TF_NEED_CUDA=1\r\n    SET TF_NEED_OPENCL_SYCL=0\r\n    SET TF_NEED_ROCM=0\r\n    SET TMP=C:\\Users\\Filippo\\AppData\\Local\\Temp\r\n  C:/Users/Filippo/Anaconda3/envs/tf_build/python.exe -B external/local_config_cuda/crosstool/windows/msvc_wrapper_for_nvcc.py /nologo /DCOMPILER_MSVC /DNOMINMAX /D_WIN32_WINNT=0x0600 /D_CRT_SECURE_NO_DEPRECATE /D_CRT_SECURE_NO_WARNINGS /D_SILENCE_STDEXT_HASH_DEPRECATION_WARNINGS /bigobj /Zm500 /J /Gy /GF /EHsc /wd4351 /wd4291 /wd4250 /wd4996 /I. /Ibazel-out/x64_windows-opt/genfiles /Ibazel-out/x64_windows-opt/bin /Iexternal/nsync /Ibazel-out/x64_windows-opt/genfiles/external/nsync /Ibazel-out/x64_windows-opt/bin/external/nsync /Iexternal/eigen_archive /Ibazel-out/x64_windows-opt/genfiles/external/eigen_archive /Ibazel-out/x64_windows-opt/bin/external/eigen_archive /Iexternal/local_config_sycl /Ibazel-out/x64_windows-opt/genfiles/external/local_config_sycl /Ibazel-out/x64_windows-opt/bin/external/local_config_sycl /Iexternal/nsync/public /Ibazel-out/x64_windows-opt/genfiles/external/nsync/public /Ibazel-out/x64_windows-opt/bin/external/nsync/public /Iexternal/eigen_archive /Ibazel-out/x64_windows-opt/genfiles/external/eigen_archive /Ibazel-out/x64_windows-opt/bin/external/eigen_archive /DEIGEN_MPL2_ONLY /DEIGEN_MAX_ALIGN_BYTES=64 /DEIGEN_HAS_TYPE_TRAITS=0 /showIncludes /MD /O2 /DNDEBUG -w /arch:AVX2 /Fobazel-out/x64_windows-opt/bin/tensorflow/compiler/tf2xla/_objs/cpu_function_runtime/cpu_function_runtime.o /c tensorflow/compiler/tf2xla/cpu_function_runtime.cc\r\nExecution platform: @bazel_tools//platforms:host_platform\r\n.\\tensorflow/compiler/tf2xla/cpu_function_runtime.h(71): error C2338:\r\nTarget //tensorflow/compiler/aot:tfcompile failed to build\r\n```\r\n\r\nIt's still the same static assert failing: \r\n```\r\nstd::pair<uint64, uint64> Encode() const {\r\n    static_assert(sizeof(*this) == 16, \"\"); //<<<<<<<<<<<<<<<<< \r\n    uint64 upper = Pack(kind(), size_);\r\n    uint64 lower = entry_param_number_;\r\n    return {upper, lower};\r\n  }\r\n```\r\n**Other info / logs**\r\n\r\nBazel config:\r\n\r\n```\r\nbuild --action_env PYTHON_BIN_PATH=\"C:/Users/Filippo/Anaconda3/envs/tf_build/python.exe\"\r\nbuild --action_env PYTHON_LIB_PATH=\"C:/Users/Filippo/Anaconda3/envs/tf_build/lib/site-packages\"\r\nbuild --python_path=\"C:/Users/Filippo/Anaconda3/envs/tf_build/python.exe\"\r\nbuild:xla --define with_xla_support=true\r\nbuild --config=xla\r\nbuild --action_env TF_NEED_OPENCL_SYCL=\"0\"\r\nbuild --action_env TF_NEED_ROCM=\"0\"\r\nbuild --action_env TF_NEED_CUDA=\"1\"\r\nbuild --action_env CUDA_TOOLKIT_PATH=\"C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.0\"\r\nbuild --action_env TF_CUDA_VERSION=\"10.0\"\r\nbuild --action_env CUDNN_INSTALL_PATH=\"C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.0\"\r\nbuild --action_env TF_CUDNN_VERSION=\"7\"\r\nbuild --action_env TF_CUDA_COMPUTE_CAPABILITIES=\"5.0,6.1,7.5\"\r\nbuild --action_env TF_CUDA_CLANG=\"0\"\r\nbuild --config=cuda\r\ntest --config=cuda\r\nbuild:opt --copt=/arch:AVX2\r\nbuild:opt --define with_default_optimizations=true\r\nbuild --config monolithic\r\nbuild --copt=-w --host_copt=-w\r\nbuild --verbose_failures\r\nbuild --distinct_host_configuration=false\r\nbuild --experimental_shortened_obj_file_path=true\r\nbuild --define=override_eigen_strong_inline=true\r\nbuild:v2 --define=tf_api_version=2\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25961", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25961/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25961/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25961/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25961", "id": 412816034, "node_id": "MDU6SXNzdWU0MTI4MTYwMzQ=", "number": 25961, "title": "Warning with custom categorical column with custom weights", "user": {"login": "plagree", "id": 2351895, "node_id": "MDQ6VXNlcjIzNTE4OTU=", "avatar_url": "https://avatars3.githubusercontent.com/u/2351895?v=4", "gravatar_id": "", "url": "https://api.github.com/users/plagree", "html_url": "https://github.com/plagree", "followers_url": "https://api.github.com/users/plagree/followers", "following_url": "https://api.github.com/users/plagree/following{/other_user}", "gists_url": "https://api.github.com/users/plagree/gists{/gist_id}", "starred_url": "https://api.github.com/users/plagree/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/plagree/subscriptions", "organizations_url": "https://api.github.com/users/plagree/orgs", "repos_url": "https://api.github.com/users/plagree/repos", "events_url": "https://api.github.com/users/plagree/events{/privacy}", "received_events_url": "https://api.github.com/users/plagree/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-21T09:03:07Z", "updated_at": "2019-04-25T20:25:52Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution: MacOS 10.12\r\n- TensorFlow installed from source\r\n- TensorFlow version: v1.12\r\n- Python version: 3.6.6\r\n\r\n**Describe the current behavior**\r\n\r\nA `_CategoricalColumn` is represented with 2 `SparseTensor`s: one for indexes and one for weights. It seems all implementation of Tensorflow feature columns use the default `None` weight `SparseTensor`. However, in my project I need to assign custom weights to a feature column of type `_CategoricalColumn` and it seems we then systematically obtain the following warning:\r\n```python\r\ntensorflow/python/ops/gradients_impl.py:112: UserWarning: Converting sparse IndexedSlices to a dense Tensor of unknown shape. This may consume a large amount of memory.\r\n  \"Converting sparse IndexedSlices to a dense Tensor of unknown shape. \"\r\n```\r\nI implemented a toy example of such behaviour:\r\n\r\n```python\r\nimport collections\r\n\r\nfrom tensorflow.python.ops import math_ops\r\nfrom tensorflow.python.feature_column.feature_column import _CategoricalColumn\r\n\r\n\r\nclass _DebuggingCategoricalColumn(\r\n    _CategoricalColumn,\r\n    collections.namedtuple('_DebuggingCategoricalColumn', (\r\n        'dense_col',\r\n    ))):\r\n\r\n    @property\r\n    def name(self):\r\n        return 'debugging_weighted'\r\n\r\n    @property\r\n    def _parse_example_spec(self):\r\n        config = self.dense_col._parse_example_spec  # pylint: disable=protected-access\r\n        return config\r\n\r\n    @property\r\n    def _num_buckets(self):\r\n        return 4\r\n\r\n    def _transform_feature(self, inputs):\r\n        v = inputs.get(self.dense_col)\r\n        batch_size = tf.to_int64(tf.shape(v)[0])\r\n        buckets = tf.to_int64(tf.squeeze(math_ops.bucketize(input=v, boundaries=(0, 2, 4))))\r\n        indices = tf.stack([\r\n            tf.range(batch_size, dtype=tf.int64),\r\n            tf.zeros(batch_size, dtype=tf.int64)], axis=1)\r\n        id_tensor = tf.SparseTensor(\r\n            indices=indices,\r\n            values=tf.to_int64(tf.squeeze(buckets)),\r\n            dense_shape=[batch_size, 1]\r\n        )\r\n        id_weights = tf.SparseTensor(\r\n            indices=indices,\r\n            values=tf.ones(batch_size, dtype=tf.float32),\r\n            dense_shape=[batch_size, 1]\r\n        )\r\n        return id_tensor, id_weights\r\n\r\n    def _get_sparse_tensors(self, inputs, weight_collections=None, trainable=None):\r\n        tensors = inputs.get(self)\r\n        return _CategoricalColumn.IdWeightPair(tensors[0], tensors[1])\r\n\r\n\r\ndef debugging_column(input_column):\r\n    return _DebuggingCategoricalColumn(dense_col=input_column)\r\n\r\n\r\ndf = pd.DataFrame({'x': [-1., 1, 3, 5], 'y': [1., 1, 2, 3]})\r\nfeat = tf.feature_column.numeric_column('x')\r\nfeature_columns = [debugging_column(feat)]\r\ninput_fn = tf.estimator.inputs.pandas_input_fn(df, df['y'], shuffle=True, num_epochs=None)\r\nestimator = tf.estimator.LinearRegressor(feature_columns=feature_columns)\r\nestimator.train(input_fn=input_fn, steps=100)\r\n```\r\n\r\nRunning this code leads to the following warning:\r\n```python\r\ntensorflow/python/ops/gradients_impl.py:112: UserWarning: Converting sparse IndexedSlices to a dense Tensor of unknown shape. This may consume a large amount of memory.\r\n  \"Converting sparse IndexedSlices to a dense Tensor of unknown shape. \"\r\n```\r\n\r\nImportantly, replacing line `return id_tensor, id_weights` by line `return id_tensor, None` (default value for uniform weights) removes the warning.\r\n\r\nAm I doing something wrong with the custom `_CategoricalColumn` or is there an issue in TF internals? Thanks for your help\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25958", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25958/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25958/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25958/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25958", "id": 412749845, "node_id": "MDU6SXNzdWU0MTI3NDk4NDU=", "number": 25958, "title": "The performance of SparseSoftmaxCrossEntropyWithLogits in inference is very low", "user": {"login": "mpjlu", "id": 13826327, "node_id": "MDQ6VXNlcjEzODI2MzI3", "avatar_url": "https://avatars1.githubusercontent.com/u/13826327?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpjlu", "html_url": "https://github.com/mpjlu", "followers_url": "https://api.github.com/users/mpjlu/followers", "following_url": "https://api.github.com/users/mpjlu/following{/other_user}", "gists_url": "https://api.github.com/users/mpjlu/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpjlu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpjlu/subscriptions", "organizations_url": "https://api.github.com/users/mpjlu/orgs", "repos_url": "https://api.github.com/users/mpjlu/repos", "events_url": "https://api.github.com/users/mpjlu/events{/privacy}", "received_events_url": "https://api.github.com/users/mpjlu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-02-21T05:01:10Z", "updated_at": "2019-11-18T06:41:48Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "SparseSoftmaxCrossEntropyWithLogits computes softmax cross entropy cost and gradients to backpropagate. \r\nWhen SparseSoftmaxCrossEntropyWithLogits used in inference, for example, in language models, we only need the cost. \r\nSparseSoftmaxCrossEntropyWithLogits is very time-consuming in language models, it is better to add a flag for inference and training, or to split this OP to two.\r\n\r\n**Describe the current behavior**\r\nProfile data of language model:\r\nnode name | requested bytes | total execution time | accelerator execution time | cpu execution time\r\n**SparseSoftmaxCrossEntropyWithLogits     245.76KB (100.00%, 0.00%),      1.58sec (100.00%, 51.51%),             0us (0.00%, 0.00%),      1.58sec (100.00%, 51.51%)**\r\nMatMul                      8905.28MB (100.00%, 88.05%),       1.10sec (48.49%, 36.00%),             0us (0.00%, 0.00%),       1.10sec (48.49%, 36.00%)\r\nAdd                                 84B (11.95%, 0.00%),       201.16ms (12.49%, 6.57%),             0us (0.00%, 0.00%),       201.16ms (12.49%, 6.57%)\r\nSplit                          671.09MB (11.95%, 6.64%),        105.97ms (5.92%, 3.46%),             0us (0.00%, 0.00%),        105.97ms (5.92%, 3.46%)\r\n\r\n**Describe the expected behavior**\r\nProfile data after optimization:\r\nnode name | requested bytes | total execution time | accelerator execution time | cpu execution time\r\nMatMul                      8905.28MB (100.00%, 88.05%),      1.11sec (100.00%, 46.86%),             0us (0.00%, 0.00%),      1.11sec (100.00%, 46.86%)\r\n**SparseSoftmaxCrossEntropyWithLogits      245.76KB (11.95%, 0.00%),      871.49ms (53.14%, 36.93%),             0us (0.00%, 0.00%),      871.49ms (53.14%, 36.93%)**\r\nAdd                                 84B (11.95%, 0.00%),       200.13ms (16.21%, 8.48%),             0us (0.00%, 0.00%),       200.13ms (16.21%, 8.48%)\r\nSplit                          671.09MB (11.95%, 6.64%),        106.76ms (7.73%, 4.52%),             0us (0.00%, 0.00%),        106.76ms (7.73%, 4.52%)\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): el7\r\n- TensorFlow installed from (source or binary):source\r\n- TensorFlow version (use command below):1.12\r\n- Python version:3.7.2\r\n- Bazel version (if compiling from source):0.19.2\r\n- GCC/Compiler version (if compiling from source):gcc6.3\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\nhttps://github.com/mlperf/inference/tree/master/cloud/language_modeling\r\n./benchmark.py\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25957", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25957/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25957/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25957/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25957", "id": 412718766, "node_id": "MDU6SXNzdWU0MTI3MTg3NjY=", "number": 25957, "title": "keras model.compile: allow user-specific label shapes/dtypes for loss/metrics", "user": {"login": "jackd", "id": 659115, "node_id": "MDQ6VXNlcjY1OTExNQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/659115?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackd", "html_url": "https://github.com/jackd", "followers_url": "https://api.github.com/users/jackd/followers", "following_url": "https://api.github.com/users/jackd/following{/other_user}", "gists_url": "https://api.github.com/users/jackd/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackd/subscriptions", "organizations_url": "https://api.github.com/users/jackd/orgs", "repos_url": "https://api.github.com/users/jackd/repos", "events_url": "https://api.github.com/users/jackd/events{/privacy}", "received_events_url": "https://api.github.com/users/jackd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-21T02:26:10Z", "updated_at": "2019-02-21T18:59:38Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "## System information\r\n- TensorFlow version: 1.12 (also present in 1.13, 2.0)\r\n## Are you willing to contribute it (Yes/No):\r\nYes\r\n\r\n## Describe the feature and the current behavior/state.\r\n`tf.keras.models.Model.compile` currently has no way of knowing the shape/size of targets that will be passed to it during `Model.fit` (and other main looping methods). Instead it creates placeholders on a 1-to-1 basis corresponding to the same dtype and number of dimensions as each output. This is a safe assumption for most regression tasks, but leads to redundant casting/reshaping for even simple classification problems. More importantly, it leads to very confusing behaviour, loss/metric functions which need to cater for a wider variety of inputs than necessary and an inability to do proper error checking.\r\n\r\nFor example, in 2.0 `tf.keras.backend.sparse_categorical_crossentropy`'s documentation claims the first argument is `target: An integer tensor.` However, there's absolutely nothing stopping you from providing float values. This is because the implementation needs to be able to accept arbitrarily sized float values when passed placeholders during `compile`, then simply flattens and casts the values (which has no affect on inputs already of the correct shape/type).\r\n\r\nThis is particularly confusing for users trying to implement their own loss function. Mimicing the advertised interface will result in errors.\r\n\r\nThis isn't just a documentation issue however: if inappropriate float values are passed in (i.e. values that aren't the result of casting integers to floats) this will be very difficult to pick up.\r\n\r\nIf users are asked to provide `loss` and `metrics` functions, they will generally know the shape and types of the labels. Allowing them to specify this so their loss/metric functions only need to cater for these removes unecessary reshaping and casting.\r\n\r\n## Will this change the current api? How?\r\nI don't understand why loss/metric functions are called during compile with placeholders rather than being lazily evaluated during `fit`. From my perspective that would be the thing to change, resulting in no changes to the API. However, it may result in too much of a breaking change in other niche cases.\r\n\r\nLacking that, adding extra kwargs to `Model.compile - maybe `target_shapes`, `target_sizes` (`targets` is already taken) would be a non-breaking change. Default values can be created using the current assumptions.\r\n\r\n## Who will benefit with this feature?\r\n- People writing custom losses/metrics with the expectation that `y_true` shape/dtype will match that of the values in their labels.\r\n- Anyone training with models using unecessary casts/reshapes (probably not a major performance issue).\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25955", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25955/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25955/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25955/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25955", "id": 412704069, "node_id": "MDU6SXNzdWU0MTI3MDQwNjk=", "number": 25955, "title": "keras `Model.compile` with loss/metrics dict and multiple outputs from same layer", "user": {"login": "jackd", "id": 659115, "node_id": "MDQ6VXNlcjY1OTExNQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/659115?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackd", "html_url": "https://github.com/jackd", "followers_url": "https://api.github.com/users/jackd/followers", "following_url": "https://api.github.com/users/jackd/following{/other_user}", "gists_url": "https://api.github.com/users/jackd/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackd/subscriptions", "organizations_url": "https://api.github.com/users/jackd/orgs", "repos_url": "https://api.github.com/users/jackd/repos", "events_url": "https://api.github.com/users/jackd/events{/privacy}", "received_events_url": "https://api.github.com/users/jackd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-21T01:19:01Z", "updated_at": "2019-02-21T18:59:08Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "## System information\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): ubuntu 16.04\r\n- TensorFlow installed from (source or binary): binary\r\n- Python version: ('v1.12.0-7354-gedbd8a15b9', '1.13.0-dev20190203') - also present in 2.0 preview\r\n- CUDA/cuDNN version: 10.0 / 7\r\n- GPU model and memory: quadro k620\r\n\r\n## Current Behaviour\r\nKeras' `model.compile` with dict losses matches provided loss functions with outputs passed into the constructor via each output's _layer name_. This is not unique in the case where multiple model outputs come from the same layer.\r\n\r\n## Expected Behaviour\r\nI would expect usages of lists/dicts to be consistent between losses, metrics, labels and outputs - i.e. if any are lists, they must all be lists of the same length, and if any are dicts they must all be dicts with the same set of keys. Requiring output layers to be named consistently with the key in the corresponding labels dictionary seems completely bamboozling to me, e.g. if building a hybrid model with a classification output and 'class_index' key in the labels one would have to name the final layer 'class_index' even if it outputs logits/softmax activations.\r\n\r\nThis is likely a breaking change. At the very least I would expect an error to be raised if `output_names` are not unique and users pass in dictionaries for either `loss` or `metrics` in `Model.fit`.\r\n\r\n## Code to Reproduce\r\n```python\r\nimport tensorflow as tf\r\n# network that maps 1 input to 2 separate outputs\r\nx = tf.keras.layers.Input(shape=(1,), dtype=tf.float32)\r\nx2 = tf.keras.layers.Dense(2)(x)\r\ny, z = tf.keras.layers.Lambda(\r\n    lambda x2: tf.unstack(x2, axis=-1), name='x2_unstack')(x2)\r\n# y = tf.keras.layers.Lambda(tf.identity, name='y')(y)\r\n# z = tf.keras.layers.Lambda(tf.identity, name='z')(z)  # current work-around\r\nmodel = tf.keras.models.Model(inputs=x, outputs=dict(y=y, z=z))\r\n\r\nprint(model.outputs)\r\n# [\r\n#  <tf.Tensor 'x2_unstack/unstack:0' shape=(None,) dtype=float32>,\r\n# <tf.Tensor 'x2_unstack/unstack:1' shape=(None,) dtype=float32>\r\n# ]\r\n# somewhat unexpected as not the same as the value passed to constructor, but ok...\r\nprint(model.output_names)\r\n# ['x2_unstack', 'x2_unstack']\r\n# surely that's going to cause issues later...\r\n\r\nmodel.compile('SGD', loss={'x': 'mse', 'y': 'logcosh'})\r\n# ValueError: Unknown entry in loss dictionary: y.\r\n# Only expected following keys: ['x2_unstack', 'x2_unstack']\r\n\r\nmodel.fit(x=x_data, y=dict(y=y_data, z=z_data))  # expected way of using fit\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25946", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25946/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25946/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25946/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25946", "id": 412564512, "node_id": "MDU6SXNzdWU0MTI1NjQ1MTI=", "number": 25946, "title": "BUG: symbolic layer triggers device creation", "user": {"login": "ppwwyyxx", "id": 1381301, "node_id": "MDQ6VXNlcjEzODEzMDE=", "avatar_url": "https://avatars3.githubusercontent.com/u/1381301?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ppwwyyxx", "html_url": "https://github.com/ppwwyyxx", "followers_url": "https://api.github.com/users/ppwwyyxx/followers", "following_url": "https://api.github.com/users/ppwwyyxx/following{/other_user}", "gists_url": "https://api.github.com/users/ppwwyyxx/gists{/gist_id}", "starred_url": "https://api.github.com/users/ppwwyyxx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ppwwyyxx/subscriptions", "organizations_url": "https://api.github.com/users/ppwwyyxx/orgs", "repos_url": "https://api.github.com/users/ppwwyyxx/repos", "events_url": "https://api.github.com/users/ppwwyyxx/events{/privacy}", "received_events_url": "https://api.github.com/users/ppwwyyxx/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, {"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}, {"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-02-20T18:23:05Z", "updated_at": "2019-08-19T17:38:49Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):linux ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:n/a\r\n- TensorFlow installed from (source or binary):binary\r\n- TensorFlow version (use command below):b'v1.13.0-rc2-0-gc865ec5621' 1.13.0-rc2\r\n- Python version:3.7\r\n- Bazel version (if compiling from source):n/a\r\n- GCC/Compiler version (if compiling from source):n/a\r\n- CUDA/cuDNN version:10.0 / 7.4.2\r\n- GPU model and memory:gtx960M\r\n\r\n**Describe the current behavior**\r\nThe following code:\r\n```python\r\nimport tensorflow as tf\r\na = tf.placeholder(tf.float32, [100, 100, 100, 100])\r\nb = tf.layers.Conv2DTranspose(3, 3, data_format='channels_first')\r\noutput = b.apply(a)\r\n```\r\nprints:\r\n```\r\n2019-02-20 10:20:05.505595: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-02-20 10:20:05.578782: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:998] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-02-20 10:20:05.579477: I tensorflow/compiler/xla/service/service.cc:150] XLA service 0x55fd579f65d0 executing computations on platform CUDA. Devices:\r\n2019-02-20 10:20:05.579513: I tensorflow/compiler/xla/service/service.cc:158]   StreamExecutor device (0): GeForce GTX 960M, Compute Capability 5.0\r\n2019-02-20 10:20:05.606095: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2592000000 Hz                                \r\n2019-02-20 10:20:05.606746: I tensorflow/compiler/xla/service/service.cc:150] XLA service 0x55fd57b39b00 executing computations on platform Host. Devices:\r\n2019-02-20 10:20:05.606785: I tensorflow/compiler/xla/service/service.cc:158]   StreamExecutor device (0): <undefined>, <undefined>               \r\n2019-02-20 10:20:05.607093: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1433] Found device 0 with properties:                              \r\nname: GeForce GTX 960M major: 5 minor: 0 memoryClockRate(GHz): 1.0975\r\npciBusID: 0000:01:00.0\r\ntotalMemory: 1.96GiB freeMemory: 1.92GiB\r\n2019-02-20 10:20:05.607118: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1512] Adding visible gpu devices: 0                                \r\n2019-02-20 10:20:05.608205: I tensorflow/core/common_runtime/gpu/gpu_device.cc:984] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-02-20 10:20:05.608229: I tensorflow/core/common_runtime/gpu/gpu_device.cc:990]      0                                                        \r\n2019-02-20 10:20:05.608240: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1003] 0:   N                                                       \r\n2019-02-20 10:20:05.608504: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 1742 MB memory) -> physical GPU (device: 0, name: GeForce GTX 960M, pci bus id: 0000:01:00.0, compute capability: 5.0)        \r\n```\r\nIt can be seen that it initializes the GPU devices. However this should not happen in symbolic functions.\r\n\r\nInitializing the GPU devices has many side effects. \r\nIt can lead to different types of failures, such as https://github.com/tensorflow/tensorflow/issues/8136#issuecomment-361727732. The largest side effect is that: any GPU-related flags given to a `tf.Session` created after device initialization will not take effect.\r\nIt will also make it much harder to use horovod because horovod requires initializing the GPU in specific ways (with `visible_device_list`). If a graph with `Conv2DTranspose` was created before creating the session (which is the standard way of using TF 1.0), horovod will fail to initialize the session. (cc @alsrgv ).\r\n\r\nThis bug exists for Conv2DTranspose, but not for Conv2D.\r\nThis bug exists in 1.13.0rc0. It does not exist in 1.12.0"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25939", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25939/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25939/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25939/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25939", "id": 412493714, "node_id": "MDU6SXNzdWU0MTI0OTM3MTQ=", "number": 25939, "title": "Docker containers with Python 3.7", "user": {"login": "2020testuser", "id": 22502313, "node_id": "MDQ6VXNlcjIyNTAyMzEz", "avatar_url": "https://avatars3.githubusercontent.com/u/22502313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/2020testuser", "html_url": "https://github.com/2020testuser", "followers_url": "https://api.github.com/users/2020testuser/followers", "following_url": "https://api.github.com/users/2020testuser/following{/other_user}", "gists_url": "https://api.github.com/users/2020testuser/gists{/gist_id}", "starred_url": "https://api.github.com/users/2020testuser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/2020testuser/subscriptions", "organizations_url": "https://api.github.com/users/2020testuser/orgs", "repos_url": "https://api.github.com/users/2020testuser/repos", "events_url": "https://api.github.com/users/2020testuser/events{/privacy}", "received_events_url": "https://api.github.com/users/2020testuser/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 10, "created_at": "2019-02-20T15:45:43Z", "updated_at": "2020-03-02T17:14:07Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version 1.12:\r\n- Are you willing to contribute it (Yes/No): yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.** TensorFlow docker image is not available for Python 3.6 or Python 3.7. It would be good if TensorFlow is supported in Python 3.6 or 3.7 to take advantage of the latest Python version capabilities.\r\n\r\n**Will this change the current api? How?** I don't believe so. \r\n\r\n**Who will benefit with this feature?** All users who want to use the Python 3.6 and 3.7 capabilities.\r\n\r\n**Any Other info.** \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25935", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25935/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25935/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25935/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25935", "id": 412464925, "node_id": "MDU6SXNzdWU0MTI0NjQ5MjU=", "number": 25935, "title": "Bazel incompatible changes", "user": {"login": "laurentlb", "id": 485572, "node_id": "MDQ6VXNlcjQ4NTU3Mg==", "avatar_url": "https://avatars2.githubusercontent.com/u/485572?v=4", "gravatar_id": "", "url": "https://api.github.com/users/laurentlb", "html_url": "https://github.com/laurentlb", "followers_url": "https://api.github.com/users/laurentlb/followers", "following_url": "https://api.github.com/users/laurentlb/following{/other_user}", "gists_url": "https://api.github.com/users/laurentlb/gists{/gist_id}", "starred_url": "https://api.github.com/users/laurentlb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/laurentlb/subscriptions", "organizations_url": "https://api.github.com/users/laurentlb/orgs", "repos_url": "https://api.github.com/users/laurentlb/repos", "events_url": "https://api.github.com/users/laurentlb/events{/privacy}", "received_events_url": "https://api.github.com/users/laurentlb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1222092379, "node_id": "MDU6TGFiZWwxMjIyMDkyMzc5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:bazel", "name": "subtype:bazel", "color": "b619ea", "default": false, "description": "Bazel related Build_Installation issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-02-20T14:49:43Z", "updated_at": "2019-11-08T19:08:38Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "Tensorflow doesn't build with Bazel incompatible flags.\r\nBased on our CI (https://buildkite.com/bazel/bazel-at-release-plus-incompatible-flags/builds/95), the following flags will fail:\r\n\r\n* `--incompatible_new_actions_api`\r\n* `--incompatible_no_support_tools_in_action_inputs`\r\n* `--incompatible_no_transitive_loads`\r\n* `--incompatible_disable_deprecated_attr_params`\r\n* `--incompatible_disallow_load_labels_to_cross_package_boundaries`\r\n\r\n\r\nFrom what I've seen, updating the dependency on rules_closure will fix some of the problems.\r\n\r\nFor `--incompatible_no_transitive_loads`, the simplest is to reexport some symbols explicitly (see https://github.com/bazelbuild/bazel/issues/5636).\r\n\r\nIf you run `buildifier --lint=fix tensorflow/tensorflow.bzl`, it will also fix some issues.\r\n\r\nLet me know if you need help\r\n(bug also filed inside Google: b/124051098)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25934", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25934/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25934/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25934/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25934", "id": 412464078, "node_id": "MDU6SXNzdWU0MTI0NjQwNzg=", "number": 25934, "title": "numpy.dtype size changed, may indicate binary incompatibility", "user": {"login": "prinsherbert", "id": 7011110, "node_id": "MDQ6VXNlcjcwMTExMTA=", "avatar_url": "https://avatars0.githubusercontent.com/u/7011110?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prinsherbert", "html_url": "https://github.com/prinsherbert", "followers_url": "https://api.github.com/users/prinsherbert/followers", "following_url": "https://api.github.com/users/prinsherbert/following{/other_user}", "gists_url": "https://api.github.com/users/prinsherbert/gists{/gist_id}", "starred_url": "https://api.github.com/users/prinsherbert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prinsherbert/subscriptions", "organizations_url": "https://api.github.com/users/prinsherbert/orgs", "repos_url": "https://api.github.com/users/prinsherbert/repos", "events_url": "https://api.github.com/users/prinsherbert/events{/privacy}", "received_events_url": "https://api.github.com/users/prinsherbert/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-02-20T14:48:08Z", "updated_at": "2019-06-28T21:15:07Z", "closed_at": null, "author_association": "NONE", "body": "## Cleanest reproduction:\r\n\r\nRun in a GPU Google Colaboratory session:\r\n\r\n    !pip3 install tensorflow-gpu==1.13.0rc2 numpy==1.15.0\r\n    !python3.6 -c 'import tensorflow'\r\n\r\nHowever, how I came across the issue:\r\n\r\n**System information**\r\n- Ubuntu 18.04\r\n- Dell XPS 15 2016 laptop\r\n- installed a binary using pip3 install tensorflow-gpu==1.13.0rc2\r\n- TensorFlow version: 1.13.0rc2\r\n- Python 3.6.5\r\n- virtualenv with python3.6 and pip3\r\n- N/A did not installed from source\r\n- N/A did not compiled from source\r\n- cuda 10.0 / libcudnn7_7.4.2.24-1+cuda10.0_amd64.deb\r\n- GPU model and memory:\r\n\r\n    NVIDIA-SMI 410.79       Driver Version: 410.79       CUDA Version: 10.0\r\n    GeForce GTX 960M\r\n    91MiB /  2004MiB\r\n\r\n## Problem:\r\n\r\nWarning when importing tensorflow, only when numpy version is 1.15.0\r\n\r\n    /home/herbert/.virtualenvs/actigraph/lib/python3.6/importlib/_bootstrap.py:219: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\r\n      return f(*args, **kwds)\r\n    /home/herbert/.virtualenvs/actigraph/lib/python3.6/importlib/_bootstrap.py:219: RuntimeWarning: numpy.dtype size changed, may indicate binary incompatibility. Expected 96, got 88\r\n      return f(*args, **kwds)\r\n\r\n## Commands to reproduce:\r\n\r\n    pip3 install tensorflow-gpu==1.13.0rc2 numpy==1.15.0\r\n    python3.6 -c 'import tensorflow'\r\n\r\n## Commands to fix:\r\n\r\n    pip3 install tensorflow-gpu==1.13.0rc2 numpy==1.16.1\r\n    python3.6 -c 'import tensorflow'\r\n\r\nOr probably, leave the version of numpy out (`==1.16.1`) and include `-U` to upgrade to the newest numpy.\r\n\r\n    pip3 install -U tensorflow-gpu==1.13.0rc2 numpy\r\n    python3.6 -c 'import tensorflow'"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25923", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25923/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25923/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25923/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25923", "id": 412334656, "node_id": "MDU6SXNzdWU0MTIzMzQ2NTY=", "number": 25923, "title": "[performance] CPU is idle even when there are operations ready to be executed", "user": {"login": "yann-yy", "id": 32092715, "node_id": "MDQ6VXNlcjMyMDkyNzE1", "avatar_url": "https://avatars0.githubusercontent.com/u/32092715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yann-yy", "html_url": "https://github.com/yann-yy", "followers_url": "https://api.github.com/users/yann-yy/followers", "following_url": "https://api.github.com/users/yann-yy/following{/other_user}", "gists_url": "https://api.github.com/users/yann-yy/gists{/gist_id}", "starred_url": "https://api.github.com/users/yann-yy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yann-yy/subscriptions", "organizations_url": "https://api.github.com/users/yann-yy/orgs", "repos_url": "https://api.github.com/users/yann-yy/repos", "events_url": "https://api.github.com/users/yann-yy/events{/privacy}", "received_events_url": "https://api.github.com/users/yann-yy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ezhulenev", "id": 1174378, "node_id": "MDQ6VXNlcjExNzQzNzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1174378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezhulenev", "html_url": "https://github.com/ezhulenev", "followers_url": "https://api.github.com/users/ezhulenev/followers", "following_url": "https://api.github.com/users/ezhulenev/following{/other_user}", "gists_url": "https://api.github.com/users/ezhulenev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezhulenev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezhulenev/subscriptions", "organizations_url": "https://api.github.com/users/ezhulenev/orgs", "repos_url": "https://api.github.com/users/ezhulenev/repos", "events_url": "https://api.github.com/users/ezhulenev/events{/privacy}", "received_events_url": "https://api.github.com/users/ezhulenev/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ezhulenev", "id": 1174378, "node_id": "MDQ6VXNlcjExNzQzNzg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1174378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ezhulenev", "html_url": "https://github.com/ezhulenev", "followers_url": "https://api.github.com/users/ezhulenev/followers", "following_url": "https://api.github.com/users/ezhulenev/following{/other_user}", "gists_url": "https://api.github.com/users/ezhulenev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ezhulenev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ezhulenev/subscriptions", "organizations_url": "https://api.github.com/users/ezhulenev/orgs", "repos_url": "https://api.github.com/users/ezhulenev/repos", "events_url": "https://api.github.com/users/ezhulenev/events{/privacy}", "received_events_url": "https://api.github.com/users/ezhulenev/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-02-20T09:48:24Z", "updated_at": "2019-06-26T08:24:39Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): CentOS 7.5\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): 1.12.0\r\n- Python version: 2.7\r\n- Bazel version (if compiling from source): 0.19.2- (@non-git)\r\n- GCC/Compiler version (if compiling from source): 4.8.5\r\n- CUDA/cuDNN version: No\r\n- GPU model and memory: No\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\nI'm trying to feed tensors produces by a ParseExample OP when inference an exported graph to avoid \r\nserialization/deserialization tf record of input examples.\r\nI have got the correct prediction results. But the performance is not consistent with my expectation.\r\nThere is several idle time in the timeline. And the feed tensors are not processing in parallel.\r\n\r\n**Describe the expected behavior**\r\nNo CPU idle time in prediction. No ParseExample OP in inference should be faster.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n`saved_bundle.session->Run(run_options, input_tensor_pairs, {output_tensor_name}, {}, &output, nullptr);`\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\nchrome tracing results:\r\nwith ParseExample, no cpu idle during inference\r\n![image](https://user-images.githubusercontent.com/32092715/53081857-a7216300-3536-11e9-807c-791c1f47f4c2.png)\r\n[with_parse_example.json.txt](https://github.com/tensorflow/tensorflow/files/2883952/with_parse_example.json.txt)\r\nwithout ParseExample, cpu idle during inference with red marks\r\n![image](https://user-images.githubusercontent.com/32092715/53082111-231bab00-3537-11e9-922f-3ab8c2f5f743.png)\r\n[without_parse_example.json.txt](https://github.com/tensorflow/tensorflow/files/2883961/without_parse_example.json.txt)\r\n\r\nAny advices will be appreciated, Thanks"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25903", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25903/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25903/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25903/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25903", "id": 412192935, "node_id": "MDU6SXNzdWU0MTIxOTI5MzU=", "number": 25903, "title": "Please release the Raspberry Pi Camera Follower Demo", "user": {"login": "ArriFerrari", "id": 38789344, "node_id": "MDQ6VXNlcjM4Nzg5MzQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/38789344?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ArriFerrari", "html_url": "https://github.com/ArriFerrari", "followers_url": "https://api.github.com/users/ArriFerrari/followers", "following_url": "https://api.github.com/users/ArriFerrari/following{/other_user}", "gists_url": "https://api.github.com/users/ArriFerrari/gists{/gist_id}", "starred_url": "https://api.github.com/users/ArriFerrari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ArriFerrari/subscriptions", "organizations_url": "https://api.github.com/users/ArriFerrari/orgs", "repos_url": "https://api.github.com/users/ArriFerrari/repos", "events_url": "https://api.github.com/users/ArriFerrari/events{/privacy}", "received_events_url": "https://api.github.com/users/ArriFerrari/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-02-20T00:50:09Z", "updated_at": "2019-06-09T01:31:36Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a documentation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:doc_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version: 1.12\r\n- Doc Link: https://youtu.be/FAMfy7izB6A?t=930\r\n\r\n\r\n**Describe the documentation issue**\r\nAndrew Selle showed off a cool demo, and said, \"I'm not an electrical engineer or mechanical engineer, so you can do this too.\" It's been 10.5 months. Maybe he forgot to release the code so that we can do that too? He also mentioned in the comment section that it would be released as a demo.\r\n\r\n**We welcome contributions by users. Will you be able to update submit a PR (use the [doc style guide](https://www.tensorflow.org/community/documentation)) to fix the doc Issue?**\r\nI don't have access to the code in question\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25885", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25885/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25885/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25885/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25885", "id": 411843543, "node_id": "MDU6SXNzdWU0MTE4NDM1NDM=", "number": 25885, "title": "Ability to hook Iterator initialisation while using estimators", "user": {"login": "keotic", "id": 19147264, "node_id": "MDQ6VXNlcjE5MTQ3MjY0", "avatar_url": "https://avatars1.githubusercontent.com/u/19147264?v=4", "gravatar_id": "", "url": "https://api.github.com/users/keotic", "html_url": "https://github.com/keotic", "followers_url": "https://api.github.com/users/keotic/followers", "following_url": "https://api.github.com/users/keotic/following{/other_user}", "gists_url": "https://api.github.com/users/keotic/gists{/gist_id}", "starred_url": "https://api.github.com/users/keotic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/keotic/subscriptions", "organizations_url": "https://api.github.com/users/keotic/orgs", "repos_url": "https://api.github.com/users/keotic/repos", "events_url": "https://api.github.com/users/keotic/events{/privacy}", "received_events_url": "https://api.github.com/users/keotic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-19T10:09:48Z", "updated_at": "2019-02-22T12:44:03Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.12\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nI find it hard to track the epochs number while training with Estimators.\r\nOne possibility would be to hook the Dataset Iterator initialisation between epoch\r\ncombining the use of dataset.repeat(num_epochs) - (Assuming the Estimator is initialising the iterator between epochs) \r\n \r\n**Will this change the current api? How?**\r\nNo - just add another training hook.\r\n\r\n**Who will benefit with this feature?**\r\nEvery developer / researcher that would like to track the number of training epochs in addition to\r\nthe training steps\r\n\r\n**Any Other info.**\r\nOther ways to track the epoch number should be fine as well"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25880", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25880/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25880/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25880/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25880", "id": 411809092, "node_id": "MDU6SXNzdWU0MTE4MDkwOTI=", "number": 25880, "title": "Migration Guide from Tensorflow Android to Tensorflow Lite", "user": {"login": "karloberas", "id": 7484848, "node_id": "MDQ6VXNlcjc0ODQ4NDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/7484848?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karloberas", "html_url": "https://github.com/karloberas", "followers_url": "https://api.github.com/users/karloberas/followers", "following_url": "https://api.github.com/users/karloberas/following{/other_user}", "gists_url": "https://api.github.com/users/karloberas/gists{/gist_id}", "starred_url": "https://api.github.com/users/karloberas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karloberas/subscriptions", "organizations_url": "https://api.github.com/users/karloberas/orgs", "repos_url": "https://api.github.com/users/karloberas/repos", "events_url": "https://api.github.com/users/karloberas/events{/privacy}", "received_events_url": "https://api.github.com/users/karloberas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-02-19T08:48:06Z", "updated_at": "2019-10-04T14:53:00Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n**System information**\r\n- TensorFlow version (you are using): Tensorflow Android 1.12.0\r\n- Are you willing to contribute it (Yes/No): No\r\n\r\n**Describe the feature and the current behavior/state.**\r\nI'm currently using a custom frozen model in .pb format for real-time face detection with Tensorflow Android. Everything is working fine except that the model is quite heavy and my app stops working from time to time. Logcat shows that the ActivityManager force closes my app, which I think is because it is using too many resources despite running in a different thread. Tensorflow Lite seems to be a good solution with continuous support and better performance. I want to migrate my existing solution to TFLite but I can't find any clear documentation on how to do so. The TensorFlowInferenceInterface methods and parameters are very different from Interpreter in TFLite. \r\n\r\nI followed the TFLiteObjectDetectionAPIModel samples for both Tensorflow Android and TFLite but I can't follow on the differences as someone who is not familiar with Tensorflow. Please provide documentation on how to migrate especially when you are deprecating Tensorflow Android already.\r\n\r\n**Will this change the current api? How?**\r\nI think no if there is proper documentation.\r\n\r\n**Who will benefit with this feature?**\r\nDevelopers currently using Tensorflow Android with performance issues\r\n\r\n**Any Other info.**\r\nNone"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25834", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25834/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25834/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25834/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25834", "id": 411414751, "node_id": "MDU6SXNzdWU0MTE0MTQ3NTE=", "number": 25834, "title": "YOLOv3 TFLite GPU and CPU perform at same speed", "user": {"login": "yeminnhtut", "id": 10076355, "node_id": "MDQ6VXNlcjEwMDc2MzU1", "avatar_url": "https://avatars3.githubusercontent.com/u/10076355?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yeminnhtut", "html_url": "https://github.com/yeminnhtut", "followers_url": "https://api.github.com/users/yeminnhtut/followers", "following_url": "https://api.github.com/users/yeminnhtut/following{/other_user}", "gists_url": "https://api.github.com/users/yeminnhtut/gists{/gist_id}", "starred_url": "https://api.github.com/users/yeminnhtut/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yeminnhtut/subscriptions", "organizations_url": "https://api.github.com/users/yeminnhtut/orgs", "repos_url": "https://api.github.com/users/yeminnhtut/repos", "events_url": "https://api.github.com/users/yeminnhtut/events{/privacy}", "received_events_url": "https://api.github.com/users/yeminnhtut/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "karimnosseir", "id": 44206880, "node_id": "MDQ6VXNlcjQ0MjA2ODgw", "avatar_url": "https://avatars1.githubusercontent.com/u/44206880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karimnosseir", "html_url": "https://github.com/karimnosseir", "followers_url": "https://api.github.com/users/karimnosseir/followers", "following_url": "https://api.github.com/users/karimnosseir/following{/other_user}", "gists_url": "https://api.github.com/users/karimnosseir/gists{/gist_id}", "starred_url": "https://api.github.com/users/karimnosseir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karimnosseir/subscriptions", "organizations_url": "https://api.github.com/users/karimnosseir/orgs", "repos_url": "https://api.github.com/users/karimnosseir/repos", "events_url": "https://api.github.com/users/karimnosseir/events{/privacy}", "received_events_url": "https://api.github.com/users/karimnosseir/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "karimnosseir", "id": 44206880, "node_id": "MDQ6VXNlcjQ0MjA2ODgw", "avatar_url": "https://avatars1.githubusercontent.com/u/44206880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karimnosseir", "html_url": "https://github.com/karimnosseir", "followers_url": "https://api.github.com/users/karimnosseir/followers", "following_url": "https://api.github.com/users/karimnosseir/following{/other_user}", "gists_url": "https://api.github.com/users/karimnosseir/gists{/gist_id}", "starred_url": "https://api.github.com/users/karimnosseir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karimnosseir/subscriptions", "organizations_url": "https://api.github.com/users/karimnosseir/orgs", "repos_url": "https://api.github.com/users/karimnosseir/repos", "events_url": "https://api.github.com/users/karimnosseir/events{/privacy}", "received_events_url": "https://api.github.com/users/karimnosseir/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-02-18T10:49:36Z", "updated_at": "2020-03-04T03:14:27Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code: No\r\n- OS Platform and Distribution: Android\r\n- Mobile device: Google Pixel, Google Pixel 2 and Xiaomi 6\r\n- TensorFlow installed from: Binary \r\n  `implementation 'org.tensorflow:tensorflow-lite:0.0.0-gpu-experimental'`\r\n- TensorFlow version: 1.13.0\r\n- Python version: 3.6\r\n- CUDA/cuDNN version: -\r\n- GPU model and memory: -\r\n\r\n**Describe the current behavior**\r\nModel inference time is the same for GPU and CPU (~5500 ms)\r\n\r\n**Describe the expected behavior**\r\nExpecting it to be faster on GPU\r\n\r\n**Code to reproduce the issue**\r\n```\r\nInterpreter.Options options = new Interpreter.Options();\r\nGpuDelegate delegate = new GpuDelegate();\r\noptions.addDelegate(delegate);\r\n// loadModelFile is the same with that function in the sample\r\nInterpreter tflite = new Interpreter(loadModelFile(this), options);\r\n\r\nMap<Integer, Object> output = new HashMap<>();\r\nfloat[][][][] output1 = new float[1][19][19][255];\r\nfloat[][][][] output2 = new float[1][38][38][255];\r\noutput.put(0, output1);\r\noutput.put(1, output2);\r\n\r\ntflite.runForMultipleInputsOutputs(getInput(), output);\r\n\r\nprivate Object[] getInput() {\r\n  Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.dog_cycle_car);\r\n  // Mat and Improc are from OpenCV\r\n  Mat mat = new Mat();\r\n  Mat convertedMat = new Mat();\r\n  Mat resizedMat = new Mat();\r\n  Utils.bitmapToMat(bitmap, mat);\r\n  mat.convertTo(convertedMat, CvType.CV_8UC1);\r\n  Size size = new Size(608.0, 608.0);\r\n  Imgproc.resize(convertedMat, resizedMat, size, 0.0, 0.0, Imgproc.INTER_AREA);\r\n  Bitmap resizedBitmap = Bitmap.createBitmap(resizedMat.cols(), resizedMat.rows(), Bitmap.Config.ARGB_8888);\r\n  Utils.matToBitmap(resizedMat, resizedBitmap);\r\n  ByteBuffer imgData = convertBitmapToByteBuffer(resizedBitmap);\r\n  Object[] inputArray = new Object[1];\r\n  inputArray[0] = imgData;\r\n  return inputArray;\r\n}\r\n```\r\n\r\nThe model I used https://drive.google.com/open?id=1XqNO1Qo5CJwzeP1d0w-mOyyk7DWJKfkk\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25830", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25830/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25830/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25830/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25830", "id": 411355716, "node_id": "MDU6SXNzdWU0MTEzNTU3MTY=", "number": 25830, "title": "CUDNN_STATUS_INTERNAL_ERROR while using tensorflow.keras.applications.VGG16", "user": {"login": "csakvarimate", "id": 4925253, "node_id": "MDQ6VXNlcjQ5MjUyNTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/4925253?v=4", "gravatar_id": "", "url": "https://api.github.com/users/csakvarimate", "html_url": "https://github.com/csakvarimate", "followers_url": "https://api.github.com/users/csakvarimate/followers", "following_url": "https://api.github.com/users/csakvarimate/following{/other_user}", "gists_url": "https://api.github.com/users/csakvarimate/gists{/gist_id}", "starred_url": "https://api.github.com/users/csakvarimate/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/csakvarimate/subscriptions", "organizations_url": "https://api.github.com/users/csakvarimate/orgs", "repos_url": "https://api.github.com/users/csakvarimate/repos", "events_url": "https://api.github.com/users/csakvarimate/events{/privacy}", "received_events_url": "https://api.github.com/users/csakvarimate/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "timshen91", "id": 1157432, "node_id": "MDQ6VXNlcjExNTc0MzI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1157432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timshen91", "html_url": "https://github.com/timshen91", "followers_url": "https://api.github.com/users/timshen91/followers", "following_url": "https://api.github.com/users/timshen91/following{/other_user}", "gists_url": "https://api.github.com/users/timshen91/gists{/gist_id}", "starred_url": "https://api.github.com/users/timshen91/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timshen91/subscriptions", "organizations_url": "https://api.github.com/users/timshen91/orgs", "repos_url": "https://api.github.com/users/timshen91/repos", "events_url": "https://api.github.com/users/timshen91/events{/privacy}", "received_events_url": "https://api.github.com/users/timshen91/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "timshen91", "id": 1157432, "node_id": "MDQ6VXNlcjExNTc0MzI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1157432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timshen91", "html_url": "https://github.com/timshen91", "followers_url": "https://api.github.com/users/timshen91/followers", "following_url": "https://api.github.com/users/timshen91/following{/other_user}", "gists_url": "https://api.github.com/users/timshen91/gists{/gist_id}", "starred_url": "https://api.github.com/users/timshen91/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timshen91/subscriptions", "organizations_url": "https://api.github.com/users/timshen91/orgs", "repos_url": "https://api.github.com/users/timshen91/repos", "events_url": "https://api.github.com/users/timshen91/events{/privacy}", "received_events_url": "https://api.github.com/users/timshen91/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-02-18T08:30:55Z", "updated_at": "2019-03-06T08:54:57Z", "closed_at": null, "author_association": "NONE", "body": "I am trying to use a pretrained network from tensorflow.keras.applications with 1.13rc2 and it crashes with a cudnn error.\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 18.04):\r\n- TensorFlow installed from source: 1.13.0-rc2\r\n- TensorFlow version (use command below):\r\n- Python version: 3.6.5\r\n- Bazel version: 0.22\r\n- GCC/Compiler version: 7.3\r\n- CUDA/cuDNN version: 10.0 / 7.4.2\r\n- GPU model and memory: GeForce RTX 2070 8GB\r\n\r\n**Code to reproduce the issue**\r\n\r\nMinimal working example:\r\n\r\n```python\r\nimport numpy as np\r\nfrom keras.applications import VGG16\r\nif __name__ == \"__main__\":\r\n    model = VGG16(weights='imagenet', include_top=True, input_shape=(224,224,3))\r\n    model.compile(optimizer=\"rmsprop\", loss=\"categorical_crossentropy\")\r\n    X_train = np.ones((2000, 224, 224, 3))\r\n    y_train = np.ones((2000, 1000))\r\n    model.fit(x=X_train, y=y_train, epochs=50, batch_size=16)\r\n```\r\n**Other info / logs**\r\n\r\nUsing TensorFlow backend.\r\nWARNING:tensorflow:From /usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/op_def_library.py:263: colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nColocations handled automatically by placer.\r\n2019-02-18 09:11:29.560595: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 3399705000 Hz\r\n2019-02-18 09:11:29.561392: I tensorflow/compiler/xla/service/service.cc:150] XLA service 0x2116980 executing computations on platform Host. Devices:\r\n2019-02-18 09:11:29.561431: I tensorflow/compiler/xla/service/service.cc:158]   StreamExecutor device (0): <undefined>, <undefined>\r\n2019-02-18 09:11:30.251516: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:998] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-02-18 09:11:30.252153: I tensorflow/compiler/xla/service/service.cc:150] XLA service 0x2ddff10 executing computations on platform CUDA. Devices:\r\n2019-02-18 09:11:30.252175: I tensorflow/compiler/xla/service/service.cc:158]   StreamExecutor device (0): GeForce RTX 2070, Compute Capability 7.5\r\n2019-02-18 09:11:30.252593: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1433] Found device 0 with properties: \r\nname: GeForce RTX 2070 major: 7 minor: 5 memoryClockRate(GHz): 1.725\r\npciBusID: 0000:26:00.0\r\ntotalMemory: 7.76GiB freeMemory: 7.64GiB\r\n2019-02-18 09:11:30.252614: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1512] Adding visible gpu devices: 0\r\n2019-02-18 09:11:30.253693: I tensorflow/core/common_runtime/gpu/gpu_device.cc:984] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-02-18 09:11:30.253709: I tensorflow/core/common_runtime/gpu/gpu_device.cc:990]      0 \r\n2019-02-18 09:11:30.253716: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1003] 0:   N \r\n2019-02-18 09:11:30.254007: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7436 MB memory) -> physical GPU (device: 0, name: GeForce RTX 2070, pci bus id: 0000:26:00.0, compute capability: 7.5)\r\nWARNING:tensorflow:From /usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/math_ops.py:3066: to_int32 (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse tf.cast instead.\r\nEpoch 1/50\r\n2019-02-18 09:11:34.331098: I tensorflow/stream_executor/dso_loader.cc:152] successfully opened CUDA library libcublas.so.10.0 locally\r\n2019-02-18 09:11:35.167778: E tensorflow/stream_executor/cuda/cuda_dnn.cc:334] Could not create cudnn handle: CUDNN_STATUS_INTERNAL_ERROR\r\n2019-02-18 09:11:35.167818: W ./tensorflow/stream_executor/stream.h:2099] attempting to perform DNN operation using StreamExecutor without DNN support\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 9, in <module>\r\n    model.fit(x=X_train, y=y_train, epochs=50, batch_size=16)\r\n  File \"/home/mate/dev/backend/env/backend/lib/python3.6/site-packages/keras/engine/training.py\", line 1039, in fit\r\n    validation_steps=validation_steps)\r\n  File \"/home/mate/dev/backend/env/backend/lib/python3.6/site-packages/keras/engine/training_arrays.py\", line 199, in fit_loop\r\n    outs = f(ins_batch)\r\n  File \"/home/mate/dev/backend/env/backend/lib/python3.6/site-packages/keras/backend/tensorflow_backend.py\", line 2715, in __call__\r\n    return self._call(inputs)\r\n  File \"/home/mate/dev/backend/env/backend/lib/python3.6/site-packages/keras/backend/tensorflow_backend.py\", line 2675, in _call\r\n    fetched = self._callable_fn(*array_vals)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py\", line 1439, in __call__\r\n    run_metadata_ptr)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/errors_impl.py\", line 528, in __exit__\r\n    c_api.TF_GetCode(self.status.status))\r\ntensorflow.python.framework.errors_impl.InternalError: cuDNN launch failure : input shape([16,3,224,224]) filter shape([3,3,3,64])\r\n\t [[{{node block1_conv1/convolution}}]]\r\n\t [[{{node loss/mul}}]]\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25810", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25810/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25810/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25810/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25810", "id": 411181383, "node_id": "MDU6SXNzdWU0MTExODEzODM=", "number": 25810, "title": "report_tensor_allocations_upon_oom and embedding_lookup together lead to memory leak", "user": {"login": "bsnipers", "id": 17980399, "node_id": "MDQ6VXNlcjE3OTgwMzk5", "avatar_url": "https://avatars2.githubusercontent.com/u/17980399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bsnipers", "html_url": "https://github.com/bsnipers", "followers_url": "https://api.github.com/users/bsnipers/followers", "following_url": "https://api.github.com/users/bsnipers/following{/other_user}", "gists_url": "https://api.github.com/users/bsnipers/gists{/gist_id}", "starred_url": "https://api.github.com/users/bsnipers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bsnipers/subscriptions", "organizations_url": "https://api.github.com/users/bsnipers/orgs", "repos_url": "https://api.github.com/users/bsnipers/repos", "events_url": "https://api.github.com/users/bsnipers/events{/privacy}", "received_events_url": "https://api.github.com/users/bsnipers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "penpornk", "id": 38085909, "node_id": "MDQ6VXNlcjM4MDg1OTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/38085909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/penpornk", "html_url": "https://github.com/penpornk", "followers_url": "https://api.github.com/users/penpornk/followers", "following_url": "https://api.github.com/users/penpornk/following{/other_user}", "gists_url": "https://api.github.com/users/penpornk/gists{/gist_id}", "starred_url": "https://api.github.com/users/penpornk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/penpornk/subscriptions", "organizations_url": "https://api.github.com/users/penpornk/orgs", "repos_url": "https://api.github.com/users/penpornk/repos", "events_url": "https://api.github.com/users/penpornk/events{/privacy}", "received_events_url": "https://api.github.com/users/penpornk/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "penpornk", "id": 38085909, "node_id": "MDQ6VXNlcjM4MDg1OTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/38085909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/penpornk", "html_url": "https://github.com/penpornk", "followers_url": "https://api.github.com/users/penpornk/followers", "following_url": "https://api.github.com/users/penpornk/following{/other_user}", "gists_url": "https://api.github.com/users/penpornk/gists{/gist_id}", "starred_url": "https://api.github.com/users/penpornk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/penpornk/subscriptions", "organizations_url": "https://api.github.com/users/penpornk/orgs", "repos_url": "https://api.github.com/users/penpornk/repos", "events_url": "https://api.github.com/users/penpornk/events{/privacy}", "received_events_url": "https://api.github.com/users/penpornk/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-17T12:16:32Z", "updated_at": "2019-02-25T22:53:22Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**Describe the current behavior**\r\nThe RunOptions report_tensor_allocations_upon_oom and embedding_lookup will lead to CPU memory leak.\r\nThis will only happen in tf 1.12, tf 1.10 didn't have this problem.\r\n\r\nI thought `tf.gather` have almost same functionality, so I test it and it seems no problem at all.\r\n\r\nI'm not sure if #21348 is related to this problem. My problem will only occur with runoptions.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\n\r\nembeddings = tf.reshape(tf.range(1000), shape=(100,10))\r\nids = tf.reshape(tf.range(100), shape=(20,5))\r\n\r\nembedding_lookup = tf.nn.embedding_lookup(embeddings, ids)\r\nga = tf.gather(embeddings, ids)\r\n\r\nwith tf.Session() as sess:\r\n  sess.graph.finalize()\r\n  run_opts = tf.RunOptions(report_tensor_allocations_upon_oom=True)\r\n\r\n  for i in range(10000000):\r\n    sess.run(embedding_lookup, options=run_opts)\r\n    #sess.run(ga, options=run_opts)\r\n```\r\nThe code above leaks cpu memory quite rapidly ~3 Mb/s.\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v1.12.0-0-ga6d8ffae09 1.12.0\r\n- Python version: 3.6.7\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: 9.0/ 7.4.2\r\n- GPU model and memory: GTX 1070 with 8GB memory"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25809", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25809/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25809/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25809/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/25809", "id": 411175827, "node_id": "MDExOlB1bGxSZXF1ZXN0MjUzNzA0MTA4", "number": 25809, "title": "Added tests for tensors, inputs, outputs, opcodes", "user": {"login": "amitsrivastava78", "id": 30853054, "node_id": "MDQ6VXNlcjMwODUzMDU0", "avatar_url": "https://avatars3.githubusercontent.com/u/30853054?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amitsrivastava78", "html_url": "https://github.com/amitsrivastava78", "followers_url": "https://api.github.com/users/amitsrivastava78/followers", "following_url": "https://api.github.com/users/amitsrivastava78/following{/other_user}", "gists_url": "https://api.github.com/users/amitsrivastava78/gists{/gist_id}", "starred_url": "https://api.github.com/users/amitsrivastava78/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amitsrivastava78/subscriptions", "organizations_url": "https://api.github.com/users/amitsrivastava78/orgs", "repos_url": "https://api.github.com/users/amitsrivastava78/repos", "events_url": "https://api.github.com/users/amitsrivastava78/events{/privacy}", "received_events_url": "https://api.github.com/users/amitsrivastava78/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1169365494, "node_id": "MDU6TGFiZWwxMTY5MzY1NDk0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:M", "name": "size:M", "color": "adafea", "default": false, "description": "CL Change Size: Medium"}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2019-02-17T11:09:29Z", "updated_at": "2020-02-13T10:41:45Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/25809", "html_url": "https://github.com/tensorflow/tensorflow/pull/25809", "diff_url": "https://github.com/tensorflow/tensorflow/pull/25809.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/25809.patch"}, "body": "This was one of the TODO, just complete the same"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25806", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25806/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25806/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25806/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25806", "id": 411157597, "node_id": "MDU6SXNzdWU0MTExNTc1OTc=", "number": 25806, "title": "About gradient reduction in DistributionStrategy", "user": {"login": "wangsiyu", "id": 5387343, "node_id": "MDQ6VXNlcjUzODczNDM=", "avatar_url": "https://avatars0.githubusercontent.com/u/5387343?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wangsiyu", "html_url": "https://github.com/wangsiyu", "followers_url": "https://api.github.com/users/wangsiyu/followers", "following_url": "https://api.github.com/users/wangsiyu/following{/other_user}", "gists_url": "https://api.github.com/users/wangsiyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/wangsiyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wangsiyu/subscriptions", "organizations_url": "https://api.github.com/users/wangsiyu/orgs", "repos_url": "https://api.github.com/users/wangsiyu/repos", "events_url": "https://api.github.com/users/wangsiyu/events{/privacy}", "received_events_url": "https://api.github.com/users/wangsiyu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yuefengz", "id": 1647833, "node_id": "MDQ6VXNlcjE2NDc4MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1647833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuefengz", "html_url": "https://github.com/yuefengz", "followers_url": "https://api.github.com/users/yuefengz/followers", "following_url": "https://api.github.com/users/yuefengz/following{/other_user}", "gists_url": "https://api.github.com/users/yuefengz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuefengz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuefengz/subscriptions", "organizations_url": "https://api.github.com/users/yuefengz/orgs", "repos_url": "https://api.github.com/users/yuefengz/repos", "events_url": "https://api.github.com/users/yuefengz/events{/privacy}", "received_events_url": "https://api.github.com/users/yuefengz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yuefengz", "id": 1647833, "node_id": "MDQ6VXNlcjE2NDc4MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1647833?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yuefengz", "html_url": "https://github.com/yuefengz", "followers_url": "https://api.github.com/users/yuefengz/followers", "following_url": "https://api.github.com/users/yuefengz/following{/other_user}", "gists_url": "https://api.github.com/users/yuefengz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yuefengz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yuefengz/subscriptions", "organizations_url": "https://api.github.com/users/yuefengz/orgs", "repos_url": "https://api.github.com/users/yuefengz/repos", "events_url": "https://api.github.com/users/yuefengz/events{/privacy}", "received_events_url": "https://api.github.com/users/yuefengz/received_events", "type": "User", "site_admin": false}, {"login": "guptapriya", "id": 14104855, "node_id": "MDQ6VXNlcjE0MTA0ODU1", "avatar_url": "https://avatars1.githubusercontent.com/u/14104855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guptapriya", "html_url": "https://github.com/guptapriya", "followers_url": "https://api.github.com/users/guptapriya/followers", "following_url": "https://api.github.com/users/guptapriya/following{/other_user}", "gists_url": "https://api.github.com/users/guptapriya/gists{/gist_id}", "starred_url": "https://api.github.com/users/guptapriya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guptapriya/subscriptions", "organizations_url": "https://api.github.com/users/guptapriya/orgs", "repos_url": "https://api.github.com/users/guptapriya/repos", "events_url": "https://api.github.com/users/guptapriya/events{/privacy}", "received_events_url": "https://api.github.com/users/guptapriya/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-02-17T07:19:52Z", "updated_at": "2019-08-25T07:00:54Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source \r\n- TensorFlow version (use command below): master\r\n- Python version: 2.3.7\r\n- Bazel version (if compiling from source): 0.2.0\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: cuda 9.0, cudnn 7\r\n- GPU model and memory:\r\n\r\n**Describe the current behavior**\r\n1. Currently the gradient reduction in `distributed_apply` is `SUM` not `MEAN`. This makes learning rate adjustment more confusing. In general, learning rate should be adjusted according to total batch size. If it is `SUM` case, the learning rate adjustment will be different between single mode and distribution mode given the same total batch size.  \r\n\r\n2. The gradient reduction is implemented in `_distributed_apply` function. That means the gradient clipping will be done before gradient reduction. This is not identical with single mode because the gradient clipping should be done after reduction along the `batch size` dimenstion. Another, in `clip_by_global_norm` case, it blocks the overlapping between computation and communication. The performance is even worse then using `CollectiveAllReduceStrategy`. I have tried to put the gradient reduction in `def gradients` instead of `_distributed_apply` locally. If you think this is necessary, I will refine my code and submit a pull request here.\r\n \r\n**Describe the expected behavior**\r\n1. Change the gradient reduction from `SUM` to `MEAN`\r\n2. Move gradient reduction from `_distributed_apply` to `def gradients`\r\n\r\n**Other info / logs**\r\nI will contribute for it if you think the above are necessary. Thanks. @yuefengz \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25802", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25802/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25802/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25802/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25802", "id": 411144994, "node_id": "MDU6SXNzdWU0MTExNDQ5OTQ=", "number": 25802, "title": "[TF 2.0 API Docs] tf.math.acos", "user": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 1256103877, "node_id": "MDU6TGFiZWwxMjU2MTAzODc3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/good%20first%20issue", "name": "good first issue", "color": "c4ef8b", "default": true, "description": "Good first issue for newcomers."}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-02-17T03:53:20Z", "updated_at": "2020-03-17T17:16:28Z", "closed_at": null, "author_association": "MEMBER", "body": "**System information**\r\n- TensorFlow version: 2.0\r\n- Doc Link: https://www.tensorflow.org/versions/r2.0/api_docs/python/tf/math/acos\r\n\r\n**Describe the documentation issue**\r\n\r\nDocumentation for `tf.math.acos` is created from a generated file, `python/ops/gen_math_ops.py`. It would be excellent to have a link to the files that are used to generate `gen_math_ops.py` - so a user could make modifications quickly, without having to search through `tensorflow/tensorflow`.\r\n\r\n`tf.math.acos` could use a clear description, usage examples, and example visuals. A great template to model this on could be [`numpy.arccos`](https://docs.scipy.org/doc/numpy-1.15.1/reference/generated/numpy.arccos.html).\r\n\r\nUsers also experience obfuscated errors from unexpected arguments (ex: strings, Booleans, and even just `int`s). Some examples are shared below. The file used to generate this error is located [here](https://github.com/tensorflow/tensorflow/blob/e1d20b3b4f25047679cf34107f8d87329cc9070f/tensorflow/core/common_runtime/eager/execute.cc#L201). All `tf.math.*` operations and the operations they influence (e.g., `tf.linspace`) would experience these same obfuscated XLA errors.\r\n\r\n```\r\nInvalidArgumentError: Invalid cast from floating point type to S32 in ConstantR0WithType.\r\n\t [[{{node Acos}}]] [Op:Acos]\r\n```\r\n\r\n```\r\nInternalError: Could not find valid device for node.\r\nNode: {{node Acos}}\r\nAll kernels registered for op Acos :\r\n  device='XLA_CPU'; T in [DT_FLOAT, DT_DOUBLE, DT_INT32, DT_COMPLEX64, DT_INT64, DT_COMPLEX128, DT_HALF]\r\n  device='XLA_CPU_JIT'; T in [DT_FLOAT, DT_DOUBLE, DT_INT32, DT_COMPLEX64, DT_INT64, DT_COMPLEX128, DT_HALF]\r\n  device='CPU'; T in [DT_DOUBLE]\r\n  device='CPU'; T in [DT_FLOAT]\r\n [Op:Acos]\r\n```\r\n\r\n**We welcome contributions by users. Will you be able to update submit a PR (use the [doc style guide](https://www.tensorflow.org/community/documentation)) to fix the doc Issue?**\r\nI shall certainly try! :) \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25798", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25798/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25798/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25798/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25798", "id": 411072729, "node_id": "MDU6SXNzdWU0MTEwNzI3Mjk=", "number": 25798, "title": "Speed of benchmark code in CPU windows is much slower than ubuntu", "user": {"login": "onzone", "id": 7061779, "node_id": "MDQ6VXNlcjcwNjE3Nzk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7061779?v=4", "gravatar_id": "", "url": "https://api.github.com/users/onzone", "html_url": "https://github.com/onzone", "followers_url": "https://api.github.com/users/onzone/followers", "following_url": "https://api.github.com/users/onzone/following{/other_user}", "gists_url": "https://api.github.com/users/onzone/gists{/gist_id}", "starred_url": "https://api.github.com/users/onzone/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/onzone/subscriptions", "organizations_url": "https://api.github.com/users/onzone/orgs", "repos_url": "https://api.github.com/users/onzone/repos", "events_url": "https://api.github.com/users/onzone/events{/privacy}", "received_events_url": "https://api.github.com/users/onzone/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "penpornk", "id": 38085909, "node_id": "MDQ6VXNlcjM4MDg1OTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/38085909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/penpornk", "html_url": "https://github.com/penpornk", "followers_url": "https://api.github.com/users/penpornk/followers", "following_url": "https://api.github.com/users/penpornk/following{/other_user}", "gists_url": "https://api.github.com/users/penpornk/gists{/gist_id}", "starred_url": "https://api.github.com/users/penpornk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/penpornk/subscriptions", "organizations_url": "https://api.github.com/users/penpornk/orgs", "repos_url": "https://api.github.com/users/penpornk/repos", "events_url": "https://api.github.com/users/penpornk/events{/privacy}", "received_events_url": "https://api.github.com/users/penpornk/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "penpornk", "id": 38085909, "node_id": "MDQ6VXNlcjM4MDg1OTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/38085909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/penpornk", "html_url": "https://github.com/penpornk", "followers_url": "https://api.github.com/users/penpornk/followers", "following_url": "https://api.github.com/users/penpornk/following{/other_user}", "gists_url": "https://api.github.com/users/penpornk/gists{/gist_id}", "starred_url": "https://api.github.com/users/penpornk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/penpornk/subscriptions", "organizations_url": "https://api.github.com/users/penpornk/orgs", "repos_url": "https://api.github.com/users/penpornk/repos", "events_url": "https://api.github.com/users/penpornk/events{/privacy}", "received_events_url": "https://api.github.com/users/penpornk/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-02-16T13:25:37Z", "updated_at": "2019-03-19T05:15:48Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10 and Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:N/A\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): 1.12\r\n- Python version: 3.5\r\n- Bazel version (if compiling from source):0.18\r\n- GCC/Compiler version (if compiling from source): MSVC 14 in windows \r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory:N?A\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\nI have built the tensorflow v1.12. from source using bazel with the following configuration: \r\n```\r\nbuild --action_env PYTHON_BIN_PATH=\"C:/Python35/python.exe\"\r\nbuild --action_env PYTHON_LIB_PATH=\"C:/Python35/lib/site-packages\"\r\nbuild --python_path=\"C:/Python35/python.exe\"\r\nbuild:ignite --define with_ignite_support=true\r\nbuild:xla --define with_xla_support=true\r\nbuild --action_env TF_NEED_OPENCL_SYCL=\"0\"\r\nbuild --action_env TF_NEED_ROCM=\"0\"\r\nbuild --action_env TF_NEED_CUDA=\"0\"\r\nbuild --action_env TF_DOWNLOAD_CLANG=\"0\"\r\nbuild:opt --copt=/arch:AVX\r\nbuild:opt --define with_default_optimizations=true\r\nbuild --config monolithic\r\nbuild --copt=-w --host_copt=-w\r\nbuild --verbose_failures\r\nbuild --distinct_host_configuration=false\r\nbuild --experimental_shortened_obj_file_path=true\r\nbuild --define=no_tensorflow_py_deps=true\r\nbuild:v2 --define=tf_api_version=2\r\n```\r\nAfter succesful build I ran the benchmark code provided in \"tensorflow/tools/benchmark/benchmark_model_main.cc\".  But I see the speed in windows is much slower(almost twice) than in ubuntu.In windows the inference time is on average ~25 ms and in ubuntu the timing is ~14ms. I am using the same machine in dual boot mode.\r\n\r\n**Code to reproduce the issue**\r\ntensorflow/tools/benchmark/benchmark_model_main.cc"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25794", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25794/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25794/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25794/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25794", "id": 411013438, "node_id": "MDU6SXNzdWU0MTEwMTM0Mzg=", "number": 25794, "title": "[TF 2.0 API Docs] tf.AggregationMethod", "user": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 1256103877, "node_id": "MDU6TGFiZWwxMjU2MTAzODc3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/good%20first%20issue", "name": "good first issue", "color": "c4ef8b", "default": true, "description": "Good first issue for newcomers."}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-02-16T02:03:01Z", "updated_at": "2020-03-17T13:25:41Z", "closed_at": null, "author_association": "MEMBER", "body": "### Existing URLs containing the issue:\r\nhttps://www.tensorflow.org/versions/r2.0/api_docs/python/tf/AggregationMethod\r\n\r\n### Description of issue (what needs changing):\r\n\r\n* **Correct Links**\r\nhttps://github.com/tensorflow/tensorflow/blob/master/python/ops/gradients_util.py is incorrect. The correct link should be https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/ops/gradients_util.py.\r\n\r\n* **Clear Description**\r\nThe description is not opinionated about when to use this symbol, and unclear on what aggregation methods for combining gradients would be useful for. \r\n\r\n* **Usage Example**\r\nNo usage example is provided.\r\n\r\n* **Parameters Defined**\r\nParameters are poorly defined, and not formatted appropriately.\r\n\r\n* **Returns Defined**\r\nReturns are not defined.\r\n\r\n* **Raises Listed and Defined**\r\nErrors are not defined.\r\n\r\n* **Visuals, if Applicable**\r\nNo visuals are included."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25784", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25784/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25784/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25784/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25784", "id": 410773583, "node_id": "MDU6SXNzdWU0MTA3NzM1ODM=", "number": 25784, "title": "Image resizing codes of iOS example camera apps might be wrong", "user": {"login": "brownbro", "id": 2845539, "node_id": "MDQ6VXNlcjI4NDU1Mzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/2845539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brownbro", "html_url": "https://github.com/brownbro", "followers_url": "https://api.github.com/users/brownbro/followers", "following_url": "https://api.github.com/users/brownbro/following{/other_user}", "gists_url": "https://api.github.com/users/brownbro/gists{/gist_id}", "starred_url": "https://api.github.com/users/brownbro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brownbro/subscriptions", "organizations_url": "https://api.github.com/users/brownbro/orgs", "repos_url": "https://api.github.com/users/brownbro/repos", "events_url": "https://api.github.com/users/brownbro/events{/privacy}", "received_events_url": "https://api.github.com/users/brownbro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-02-15T13:38:55Z", "updated_at": "2019-04-08T08:59:08Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- TensorFlow installed from (source or binary): N/A\r\n- TensorFlow version (use command below): N/A\r\n\r\n**Describe the current behavior**\r\n\r\nI think `in_x = (y * image_width) / wanted_input_width;` statements (mentioned below) would be `in_x = (x * image_width) / wanted_input_width;`. (The former perhaps rotates the input image?)\r\n\r\n- https://github.com/tensorflow/tensorflow/blob/master/tensorflow/examples/ios/camera/CameraExampleViewController.mm#L302\r\n\r\n```\r\n  for (int y = 0; y < wanted_input_height; ++y) {\r\n    float *out_row = out + (y * wanted_input_width * wanted_input_channels);\r\n    for (int x = 0; x < wanted_input_width; ++x) {\r\n      const int in_x = (y * image_width) / wanted_input_width; <--\r\n      const int in_y = (x * image_height) / wanted_input_height; <--\r\n      tensorflow::uint8 *in_pixel =\r\n          in + (in_y * image_width * image_channels) + (in_x * image_channels);\r\n      float *out_pixel = out_row + (x * wanted_input_channels);\r\n      for (int c = 0; c < wanted_input_channels; ++c) {\r\n        out_pixel[c] = (in_pixel[c] - input_mean) / input_std;\r\n      }\r\n    }\r\n```\r\n\r\n- https://github.com/tensorflow/tensorflow/blob/master/tensorflow/lite/examples/ios/camera/CameraExampleViewController.mm#L133\r\n\r\n```\r\nvoid ProcessInputWithFloatModel(\r\n    uint8_t* input, float* buffer, int image_width, int image_height, int image_channels) {\r\n  for (int y = 0; y < wanted_input_height; ++y) {\r\n    float* out_row = buffer + (y * wanted_input_width * wanted_input_channels);\r\n    for (int x = 0; x < wanted_input_width; ++x) {\r\n      const int in_x = (y * image_width) / wanted_input_width; <--\r\n      const int in_y = (x * image_height) / wanted_input_height; <--\r\n      uint8_t* input_pixel =\r\n          input + (in_y * image_width * image_channels) + (in_x * image_channels);\r\n      float* out_pixel = out_row + (x * wanted_input_channels);\r\n      for (int c = 0; c < wanted_input_channels; ++c) {\r\n        out_pixel[c] = (input_pixel[c] - input_mean) / input_std;\r\n      }\r\n    }\r\n  }\r\n}\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25780", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25780/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25780/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25780/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25780", "id": 410738286, "node_id": "MDU6SXNzdWU0MTA3MzgyODY=", "number": 25780, "title": "Wrong semantic of Dense layer for tf.python.keras.Dense when input has rank > 2.", "user": {"login": "fredo994", "id": 7530821, "node_id": "MDQ6VXNlcjc1MzA4MjE=", "avatar_url": "https://avatars1.githubusercontent.com/u/7530821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fredo994", "html_url": "https://github.com/fredo994", "followers_url": "https://api.github.com/users/fredo994/followers", "following_url": "https://api.github.com/users/fredo994/following{/other_user}", "gists_url": "https://api.github.com/users/fredo994/gists{/gist_id}", "starred_url": "https://api.github.com/users/fredo994/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fredo994/subscriptions", "organizations_url": "https://api.github.com/users/fredo994/orgs", "repos_url": "https://api.github.com/users/fredo994/repos", "events_url": "https://api.github.com/users/fredo994/events{/privacy}", "received_events_url": "https://api.github.com/users/fredo994/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-02-15T12:01:45Z", "updated_at": "2019-12-12T08:40:27Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution: MacOs High Sierra\r\n- TensorFlow installed from: installed from pip\r\n- TensorFlow version: v1.12.0-0-ga6d8ffae09 1.12.0\r\n- Python version: 3.6\r\n\r\n**Problem**\r\nI think that tf.python.keras.Dense layer is not implemented correctly. The documentation states:\r\n\r\n>  Note: if the input to the layer has a rank greater than 2, then it is flattened prior to the initial dot product with `kernel`.\r\n\r\nMy interpretation of this claim is: if we have input tensor with shape `(None, 10, 10)` then dense layer with 20 hidden units should produce output with a shape `(None, 20)` and the kernel should have a shape of `(10 * 10, 20)`, and input tensor should be flattened to shape `(None, 100)` before product with kernel. \r\n\r\n**But**,  implementation is different. \r\n\r\n1. Kernel is initialized to shape `(10, 20)` (for the example above)\r\n```python\r\nself.kernel = self.add_weight(    # method Dense#build\r\n        'kernel',\r\n        shape=[input_shape[-1].value, self.units],\r\n        initializer=self.kernel_initializer,\r\n        regularizer=self.kernel_regularizer,\r\n        constraint=self.kernel_constraint,\r\n        dtype=self.dtype,\r\n        trainable=True)\r\n```\r\n\r\n2. The output is computed as tensordot with summation over innermost dimensions\r\n```python\r\n# Broadcasting is required for the inputs.\r\noutputs = standard_ops.tensordot(inputs, self.kernel, [[rank - 1], [0]]) # method Dense#call\r\n```\r\n\r\nThis means that for `x.shape == (None, 10, 10)` and `units == 20` the output shape will be `(None, 10, 20)`, and that kernel is broadcasted for all other dimensions (this means weights are shared).\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport tensorflow as tf\r\ntf.enable_eager_execution()\r\nx = tf.random.normal((10, 10, 10))\r\ny = tf.layers.dense(x, 20)\r\nprint(y.shape)      # Produces (10, 10, 20) not (10, 20) as expected.\r\n```\r\n\r\n**Discussion**\r\nThree possible things are happening here:\r\n\r\n1. Documentation is wrong and implementation is correct, and a dense layer is meant to accept only rank 2-dimensional input (batchSize, a dimension of input vector) and if we pass it higher rank it treats it as a stack of input vectors. The solution is to change the documentation (specifically the note part), it should state something like numpy's documentation for `matmul`:  \r\n> If either argument is N-D, N > 2, it is treated as a stack of matrices residing in the last two indexes and broadcast accordingly\r\n2. Implementation is wrong and there should be `flatten` before `tensordot` (no need for `tensordot`, we can now use `matmul`)\r\n3. I do not understand what does dense layer should do (unlikely because I asked my colleagues for their opinion and they agree with my view of what kind of operation does dense layer perform)\r\n\r\nI've ordered this list from most to least likely (in my opinion)."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25775", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25775/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25775/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25775/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25775", "id": 410649194, "node_id": "MDU6SXNzdWU0MTA2NDkxOTQ=", "number": 25775, "title": "tf.nn.dropout is not working properly with keep_rate 1.", "user": {"login": "sipan17", "id": 8099818, "node_id": "MDQ6VXNlcjgwOTk4MTg=", "avatar_url": "https://avatars1.githubusercontent.com/u/8099818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sipan17", "html_url": "https://github.com/sipan17", "followers_url": "https://api.github.com/users/sipan17/followers", "following_url": "https://api.github.com/users/sipan17/following{/other_user}", "gists_url": "https://api.github.com/users/sipan17/gists{/gist_id}", "starred_url": "https://api.github.com/users/sipan17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sipan17/subscriptions", "organizations_url": "https://api.github.com/users/sipan17/orgs", "repos_url": "https://api.github.com/users/sipan17/repos", "events_url": "https://api.github.com/users/sipan17/events{/privacy}", "received_events_url": "https://api.github.com/users/sipan17/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-02-15T08:03:07Z", "updated_at": "2019-02-20T18:14:39Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Linux Ubuntu 18.04\r\n- TensorFlow installed with conda\r\n- TensorFlow version 1.12.0\r\n- Python version 3.6.6\r\n- CUDA/cuDNN version: 9.0/7\r\n- GPU model and memory: GTX 1080 TI 11GB\r\n\r\n**Describe the current behavior**\r\nwhen using ```tf.nn.dropout``` with ```placeholder_with_default(1)``` during forwarding validation data it still makes use of random which changes the state for the next train operation and so the training procedure is not deterministic. \r\n\r\n**Describe the expected behavior**\r\nMy opinion is that the following code: ```tensor_util.constant_value(keep_prob)``` should return the default value which is 1 and should return ```x```, but for some reason the value is ```None``` and the tf.seed changes for the next batches of train data, which cause the instability of training procedure"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25768", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25768/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25768/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25768/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25768", "id": 410485267, "node_id": "MDU6SXNzdWU0MTA0ODUyNjc=", "number": 25768, "title": "tf.contrib.quantize.create_eval_graph does not add min/max node to bias", "user": {"login": "ltrottier", "id": 14935326, "node_id": "MDQ6VXNlcjE0OTM1MzI2", "avatar_url": "https://avatars0.githubusercontent.com/u/14935326?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ltrottier", "html_url": "https://github.com/ltrottier", "followers_url": "https://api.github.com/users/ltrottier/followers", "following_url": "https://api.github.com/users/ltrottier/following{/other_user}", "gists_url": "https://api.github.com/users/ltrottier/gists{/gist_id}", "starred_url": "https://api.github.com/users/ltrottier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ltrottier/subscriptions", "organizations_url": "https://api.github.com/users/ltrottier/orgs", "repos_url": "https://api.github.com/users/ltrottier/repos", "events_url": "https://api.github.com/users/ltrottier/events{/privacy}", "received_events_url": "https://api.github.com/users/ltrottier/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "nutsiepully", "id": 1307460, "node_id": "MDQ6VXNlcjEzMDc0NjA=", "avatar_url": "https://avatars3.githubusercontent.com/u/1307460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nutsiepully", "html_url": "https://github.com/nutsiepully", "followers_url": "https://api.github.com/users/nutsiepully/followers", "following_url": "https://api.github.com/users/nutsiepully/following{/other_user}", "gists_url": "https://api.github.com/users/nutsiepully/gists{/gist_id}", "starred_url": "https://api.github.com/users/nutsiepully/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nutsiepully/subscriptions", "organizations_url": "https://api.github.com/users/nutsiepully/orgs", "repos_url": "https://api.github.com/users/nutsiepully/repos", "events_url": "https://api.github.com/users/nutsiepully/events{/privacy}", "received_events_url": "https://api.github.com/users/nutsiepully/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nutsiepully", "id": 1307460, "node_id": "MDQ6VXNlcjEzMDc0NjA=", "avatar_url": "https://avatars3.githubusercontent.com/u/1307460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nutsiepully", "html_url": "https://github.com/nutsiepully", "followers_url": "https://api.github.com/users/nutsiepully/followers", "following_url": "https://api.github.com/users/nutsiepully/following{/other_user}", "gists_url": "https://api.github.com/users/nutsiepully/gists{/gist_id}", "starred_url": "https://api.github.com/users/nutsiepully/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nutsiepully/subscriptions", "organizations_url": "https://api.github.com/users/nutsiepully/orgs", "repos_url": "https://api.github.com/users/nutsiepully/repos", "events_url": "https://api.github.com/users/nutsiepully/events{/privacy}", "received_events_url": "https://api.github.com/users/nutsiepully/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2019-02-14T20:47:41Z", "updated_at": "2019-04-20T03:17:16Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): `yes`\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): `Linux archlinux 4.19.2-arch1-1-ARCH #1 SMP PREEMPT Tue Nov 13 21:16:19 UTC 2018 x86_64 GNU/Linux`\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): `binary`\r\n- TensorFlow version (use command below): `v1.12.0-0-ga6d8ffae09 1.12.0`\r\n- Python version: `3.6.7`\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: `none`\r\n- GPU model and memory: `none`\r\n\r\n**Describe the current behavior**\r\n\r\nI want to convert a model to TFLite with quantized uint8 as inference type. I add the min/max nodes to the graph by calling `tf.contrib.quantize.create_eval_graph`, then I load the trained values (both the weights and the min/max values). I try to convert the model with TFLiteConverter, but I get errors of this kind:\r\n\r\n `Array conv2d/BiasAdd does not have MinMax information, and is not a constant array. Cannot proceed with quantization.`\r\n\r\nI look at my graph (the one modified by `tf.contrib.quantize.create_eval_graph`) and I don't see min/max nodes for biases.\r\n\r\n**Describe the expected behavior**\r\n\r\nThe biases should have min/max nodes to be used by TFLiteConverter after calling `tf.contrib.quantize.create_eval_graph`.\r\n\r\n**Code to reproduce the issue**\r\n\r\nThis example can reproduce this bug using a single Conv2d layer. Note that for the sake of keeping the example simple, I simulate loading the weights and the values of the min/max nodes (learned during training) by simply running `tf.global_variables_initializer()`. \r\n\r\n```python\r\nimport tensorflow as tf\r\nimport tensorflow.contrib.lite as tflite\r\n\r\nsess = tf.keras.backend.get_session()\r\n\r\n# create model\r\nx = x_input = tf.keras.layers.Input([10,10,3])\r\nx = tf.keras.layers.Conv2D(1, 3)(x)\r\nmodel = tf.keras.Model(x_input, x)\r\n\r\n# add fake quantization nodes \r\ntf.contrib.quantize.create_eval_graph(sess.graph)\r\n\r\n# simulate loading weights and quantization min/max values\r\nsess.run(tf.global_variables_initializer())\r\n\r\n# try to quantize\r\ntoco_converter = tflite.TFLiteConverter.from_session(sess, model.inputs, model.outputs)\r\ntoco_converter.post_training_quantize = True\r\ntoco_converter.inference_type = tflite.constants.QUANTIZED_UINT8\r\ntoco_converter.inference_input_type = tflite.constants.QUANTIZED_UINT8\r\ntoco_converter.quantized_input_stats = {model.inputs[0].name.split(':')[0]: (0., 255.)}\r\nmodel_tflite_binary = toco_converter.convert()\r\n```\r\ngives the following error:\r\n```\r\n2019-02-14 15:12:39.980124: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 8 operators, 13 arrays (0 quantized)\r\n2019-02-14 15:12:39.980218: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 8 operators, 13 arrays (0 quantized)\r\n2019-02-14 15:12:39.980322: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 2 operators, 5 arrays (1 quantized)\r\n2019-02-14 15:12:39.980352: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before pre-quantization graph transformations: 2 operators, 5 arrays (1 quantized)\r\n2019-02-14 15:12:39.980371: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before quantization graph transformations: 2 operators, 5 arrays (1 quantized)\r\n2019-02-14 15:12:39.980401: F tensorflow/contrib/lite/toco/graph_transformations/quantize.cc:129] Array conv2d/BiasAdd does not have MinMax information, and is not a constant array. Cannot proceed with quantization.\r\n```\r\n\r\nWhen I look at the content of tf.global_variables(),  I see nothing related to bias_quant: \r\n```\r\n[<tf.Variable 'conv2d/kernel:0' shape=(3, 3, 3, 1) dtype=float32>,\r\n <tf.Variable 'conv2d/bias:0' shape=(1,) dtype=float32>,\r\n <tf.Variable 'conv2d/weights_quant/min:0' shape=() dtype=float32_ref>,\r\n <tf.Variable 'conv2d/weights_quant/max:0' shape=() dtype=float32_ref>,\r\n <tf.Variable 'conv2d/act_quant/min:0' shape=() dtype=float32_ref>,\r\n <tf.Variable 'conv2d/act_quant/max:0' shape=() dtype=float32_ref>]\r\n```\r\n\r\nSame thing when I look as the graph in tensorboard:\r\n```python\r\nwith tf.summary.FileWriter('/tmp/conv') as fw:\r\n    fw.add_graph(sess.graph)\r\n```\r\n\r\n![picture-of-tensorboard](https://user-images.githubusercontent.com/14935326/52816460-48a84080-306f-11e9-9cb2-e3fb2a044f58.png)\r\n\r\n**Other info / logs**\r\n\r\nEvent file from FileWriter: [log.zip](https://github.com/tensorflow/tensorflow/files/2866713/log.zip)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25764", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25764/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25764/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25764/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25764", "id": 410443012, "node_id": "MDU6SXNzdWU0MTA0NDMwMTI=", "number": 25764, "title": "Different behavior between Keras and tensorflow.keras in v1.13.0rc1 on placeholder and variable", "user": {"login": "duguyue100", "id": 939553, "node_id": "MDQ6VXNlcjkzOTU1Mw==", "avatar_url": "https://avatars3.githubusercontent.com/u/939553?v=4", "gravatar_id": "", "url": "https://api.github.com/users/duguyue100", "html_url": "https://github.com/duguyue100", "followers_url": "https://api.github.com/users/duguyue100/followers", "following_url": "https://api.github.com/users/duguyue100/following{/other_user}", "gists_url": "https://api.github.com/users/duguyue100/gists{/gist_id}", "starred_url": "https://api.github.com/users/duguyue100/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/duguyue100/subscriptions", "organizations_url": "https://api.github.com/users/duguyue100/orgs", "repos_url": "https://api.github.com/users/duguyue100/repos", "events_url": "https://api.github.com/users/duguyue100/events{/privacy}", "received_events_url": "https://api.github.com/users/duguyue100/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-02-14T18:57:11Z", "updated_at": "2019-04-30T19:36:23Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Google Colab\r\n - TensorFlow installed from (source or binary): Binary I suppose\r\n- TensorFlow version (use command below): 1.13.0rc1\r\n- Python version: 3.6\r\n\r\n**Describe the current behavior**\r\n\r\nSo I'm teaching a course and decide to use `tensorflow.keras` instead of Keras.\r\nI then noticed how the two systems handle the `placeholder` and `variable` are different even though\r\nthey are using the same backend. I was trying to compile a simple adding function:\r\n\r\n```python\r\n# variable can be initialized with a value like this\r\ninit_variable_1 = np.zeros(shape=(2, 2))\r\nvariable_1 = K.variable(value=init_variable_1)\r\n\r\n# variable can also be initialized with particular functions like this\r\nvariable_2 = K.ones(shape=(2, 2))\r\n\r\nadd_tensor = variable_1+variable_2\r\nadd_function = K.function(inputs=[variable_1, variable_2],\r\n                          outputs=(add_tensor,))\r\n```\r\n\r\nUntil this line, both Keras and `tensorflow.keras` allow me to run without errors or warning.\r\n\r\nHowever, for the following code, Keras can pass while `tensorflow.keras features an error:\r\n\r\n```\r\na = np.array([[1, 3], [2, 4]], dtype=np.float32)\r\nb = np.array([[3, 2], [5, 6]], dtype=np.float32)\r\n\r\nprint(add_function((a,b)))\r\n```\r\n\r\nThe error is:\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nInvalidArgumentError                      Traceback (most recent call last)\r\n<ipython-input-8-4df03c3d618b> in <module>()\r\n     10 print(a, b)\r\n     11 \r\n---> 12 print(add_function((a,b)))\r\n     13 \r\n     14 # notice that the add_function created is independent of the variables\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/keras/backend.py in __call__(self, inputs)\r\n   3074 \r\n   3075     fetched = self._callable_fn(*array_vals,\r\n-> 3076                                 run_metadata=self.run_metadata)\r\n   3077     self._call_fetch_callbacks(fetched[-len(self._fetches):])\r\n   3078     return nest.pack_sequence_as(self._outputs_structure,\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py in __call__(self, *args, **kwargs)\r\n   1437           ret = tf_session.TF_SessionRunCallable(\r\n   1438               self._session._session, self._handle, args, status,\r\n-> 1439               run_metadata_ptr)\r\n   1440         if run_metadata:\r\n   1441           proto_data = tf_session.TF_GetBuffer(run_metadata_ptr)\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/errors_impl.py in __exit__(self, type_arg, value_arg, traceback_arg)\r\n    526             None, None,\r\n    527             compat.as_text(c_api.TF_Message(self.status.status)),\r\n--> 528             c_api.TF_GetCode(self.status.status))\r\n    529     # Delete the underlying status object from memory otherwise it stays alive\r\n    530     # as there is a reference to status from this from the traceback due to\r\n\r\nInvalidArgumentError: ResourceHandleToInputTensor() received non-DT_RESOURCE Tensor: 1\r\n\t [[{{node _arg_Variable_0_0}}]]\r\n```\r\n\r\n**Describe the expected behavior**\r\n\r\nSo the API `function` defines the input should be a list of `placeholders`.\r\nSo either someone (maybe @fchollet) need to change the definition in the API so both `placeholder` and `variable` are fine to be valid inputs (looks like they can be compiled fine in both systems). And make `tensorflow.keras` correct also. Or limit the input tensors to be `placeholder`s where some type checks need to be done.\r\n\r\nBy the way, I'm not sure this os a specific bug in v1.13.0rc1 and v1.12 or it happens to other releases as well since I was using Colab.\r\n\r\nRegards,\r\nYuhuang."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25760", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25760/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25760/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25760/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25760", "id": 410371129, "node_id": "MDU6SXNzdWU0MTAzNzExMjk=", "number": 25760, "title": "Sudden drop in conv3d_transpose GPU performance with large input sizes", "user": {"login": "mauriceqch", "id": 9284862, "node_id": "MDQ6VXNlcjkyODQ4NjI=", "avatar_url": "https://avatars3.githubusercontent.com/u/9284862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mauriceqch", "html_url": "https://github.com/mauriceqch", "followers_url": "https://api.github.com/users/mauriceqch/followers", "following_url": "https://api.github.com/users/mauriceqch/following{/other_user}", "gists_url": "https://api.github.com/users/mauriceqch/gists{/gist_id}", "starred_url": "https://api.github.com/users/mauriceqch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mauriceqch/subscriptions", "organizations_url": "https://api.github.com/users/mauriceqch/orgs", "repos_url": "https://api.github.com/users/mauriceqch/repos", "events_url": "https://api.github.com/users/mauriceqch/events{/privacy}", "received_events_url": "https://api.github.com/users/mauriceqch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}, {"login": "timshen91", "id": 1157432, "node_id": "MDQ6VXNlcjExNTc0MzI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1157432?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timshen91", "html_url": "https://github.com/timshen91", "followers_url": "https://api.github.com/users/timshen91/followers", "following_url": "https://api.github.com/users/timshen91/following{/other_user}", "gists_url": "https://api.github.com/users/timshen91/gists{/gist_id}", "starred_url": "https://api.github.com/users/timshen91/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timshen91/subscriptions", "organizations_url": "https://api.github.com/users/timshen91/orgs", "repos_url": "https://api.github.com/users/timshen91/repos", "events_url": "https://api.github.com/users/timshen91/events{/privacy}", "received_events_url": "https://api.github.com/users/timshen91/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-02-14T16:01:41Z", "updated_at": "2020-01-06T16:37:16Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): _Yes_\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): _Ubuntu 18.10_\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: /\r\n- TensorFlow installed from (source or binary): _Source_\r\n- TensorFlow version (use command below): _'v1.12.0-0-ga6d8ffae09' 1.12.0_\r\n- Python version: _3.6.7_\r\n- Bazel version (if compiling from source): _0.18.1_\r\n- GCC/Compiler version (if compiling from source): _4.8_\r\n- CUDA/cuDNN version: _10.0, 7.3.1_\r\n- CPU model: _Intel(R) Xeon(R) Bronze 3106 CPU @ 1.70GHz_\r\n- GPU model and memory: _Nvidia GeForce GTX 1080 Ti 11GB_\r\n\r\n**Describe the current behavior**\r\nOn GPU, the _conv3d_transpose_ operation shows a huge spike in terms of execution time when increasing input size from `(1, 128, 128, 128, 16)` to `(1, 256, 256, 256, 16)`.\r\nThis particular change makes average execution time without the first run change from **0.7s** to **92s**.\r\nIn comparison, the same operation on CPU goes from **2.3s** to **18.2s**.\r\nThis makes _conv3d_transpose_ perform better on CPU compared to CPU using this particular shape.\r\n\r\n**Describe the expected behavior**\r\nThe _conv3d_transpose_ operation should not see such a sudden drop in performance when increasing input size.\r\n\r\n**Code to reproduce the issue**\r\nAttached is a python notebook that reproduces the issue.\r\n[tf_conv3d.zip](https://github.com/tensorflow/tensorflow/files/2865718/tf_conv3d.zip)\r\n\r\n**Other info / logs**\r\n![download](https://user-images.githubusercontent.com/9284862/52798293-ee5fad80-3077-11e9-9b75-edc1ff504e8b.png)\r\nThis figure shows the average execution time of _conv3d_ and _conv3d_transpose_ operations on both CPU on GPU with a log scale for both x and y axis.\r\nThe x axis represents the resolution which determines the input shape in the following manner for _conv3d_ `(1, resolution, resolution, resolution, 16)` and determines the output shape for _conv3d_transpose_ `(1, resolution, resolution, resolution, 1)`.\r\nGPU runs are in blue while CPU runs are in red.\r\n_conv3d_ are represented with dash-dotted lines and _conv3d_tranpose_ with solid lines.\r\nThere is a sudden increase in the execution time of the _conv3d_transpose_ operation on GPU which goes from **0.7s** to **92s** when changing the resolution from **2^8** to **2^9**.\r\n\r\nAttached is a full run of the attached python notebook that includes the full data.\r\n[tf_conv3d.pdf](https://github.com/tensorflow/tensorflow/files/2865802/tf_conv3d.pdf)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25752", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25752/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25752/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25752/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25752", "id": 410242917, "node_id": "MDU6SXNzdWU0MTAyNDI5MTc=", "number": 25752, "title": "Complex zero to the power zero is nan", "user": {"login": "thevincentadam", "id": 38107974, "node_id": "MDQ6VXNlcjM4MTA3OTc0", "avatar_url": "https://avatars1.githubusercontent.com/u/38107974?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thevincentadam", "html_url": "https://github.com/thevincentadam", "followers_url": "https://api.github.com/users/thevincentadam/followers", "following_url": "https://api.github.com/users/thevincentadam/following{/other_user}", "gists_url": "https://api.github.com/users/thevincentadam/gists{/gist_id}", "starred_url": "https://api.github.com/users/thevincentadam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thevincentadam/subscriptions", "organizations_url": "https://api.github.com/users/thevincentadam/orgs", "repos_url": "https://api.github.com/users/thevincentadam/repos", "events_url": "https://api.github.com/users/thevincentadam/events{/privacy}", "received_events_url": "https://api.github.com/users/thevincentadam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, {"login": "gadagashwini", "id": 48476109, "node_id": "MDQ6VXNlcjQ4NDc2MTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/48476109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadagashwini", "html_url": "https://github.com/gadagashwini", "followers_url": "https://api.github.com/users/gadagashwini/followers", "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}", "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions", "organizations_url": "https://api.github.com/users/gadagashwini/orgs", "repos_url": "https://api.github.com/users/gadagashwini/repos", "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}", "received_events_url": "https://api.github.com/users/gadagashwini/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-02-14T10:58:04Z", "updated_at": "2020-03-12T07:05:24Z", "closed_at": null, "author_association": "NONE", "body": "This is a simple yet dramatic bug: \r\n0^0 does not return 1 for complex numbers  (left zero complex) !\r\n\r\n**System information**\r\n\r\n- OS Platform and Distribution : Linux Ubuntu 16.04 LTS\r\n- TensorFlow installed from binary : pip \r\n- TensorFlow version : b'v1.13.0-rc1-0-g54c5616308' 1.13.0-rc1\r\n- Python version: Python 3.5.2\r\n\r\n**Describe the current behavior**\r\n\r\n`tf.pow(tf.complex(0., 0.), 0)` returns `nan + nan j`\r\n\r\n**Describe the expected behavior**\r\n\r\nIt should be `1 + 0j` as is returned by `np.complex(0., 0.)**0`\r\n\r\n**Code to reproduce the issue**\r\n\r\n`z = tf.complex(0., 0.);\r\nsess = tf.Session();\r\nsess.run( tf.pow(z, 0) )`\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25748", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25748/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25748/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25748/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/25748", "id": 410173635, "node_id": "MDExOlB1bGxSZXF1ZXN0MjUyOTczMDk3", "number": 25748, "title": "[tflite] export SetNumThreads to TFLite Python API", "user": {"login": "freedomtan", "id": 3395998, "node_id": "MDQ6VXNlcjMzOTU5OTg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3395998?v=4", "gravatar_id": "", "url": "https://api.github.com/users/freedomtan", "html_url": "https://github.com/freedomtan", "followers_url": "https://api.github.com/users/freedomtan/followers", "following_url": "https://api.github.com/users/freedomtan/following{/other_user}", "gists_url": "https://api.github.com/users/freedomtan/gists{/gist_id}", "starred_url": "https://api.github.com/users/freedomtan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/freedomtan/subscriptions", "organizations_url": "https://api.github.com/users/freedomtan/orgs", "repos_url": "https://api.github.com/users/freedomtan/repos", "events_url": "https://api.github.com/users/freedomtan/events{/privacy}", "received_events_url": "https://api.github.com/users/freedomtan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 987666414, "node_id": "MDU6TGFiZWw5ODc2NjY0MTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/ready%20to%20pull", "name": "ready to pull", "color": "2cd643", "default": false, "description": ""}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 28, "created_at": "2019-02-14T07:59:01Z", "updated_at": "2020-03-18T21:40:37Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/25748", "html_url": "https://github.com/tensorflow/tensorflow/pull/25748", "diff_url": "https://github.com/tensorflow/tensorflow/pull/25748.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/25748.patch"}, "body": "export SetNumThreads() and add an option to set the number of threads in the `label_image.py` for TFLite. On [PYNQ-Z1](https://www.xilinx.com/products/boards-and-kits/1-hydd4z.html), a board with 2xCA9,\r\n```\r\n$ python tensorflow/lite/examples/python/label_image.py --num_threads 1\r\n0.415686: 653:military uniform\r\n0.352941: 907:Windsor tie\r\n0.058824: 668:mortarboard\r\n0.035294: 458:bow tie, bow-tie, bowtie\r\n0.035294: 835:suit, suit of clothes\r\ntime:  0.691580057144\r\n\r\n$ python tensorflow/lite/examples/python/label_image.py --num_threads 2\r\n0.415686: 653:military uniform\r\n0.352941: 907:Windsor tie\r\n0.058824: 668:mortarboard\r\n0.035294: 458:bow tie, bow-tie, bowtie\r\n0.035294: 835:suit, suit of clothes\r\ntime:  0.412344932556\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25728", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25728/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25728/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25728/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25728", "id": 410012327, "node_id": "MDU6SXNzdWU0MTAwMTIzMjc=", "number": 25728, "title": "Floating point addition is not commutative - Unexpected behavior - leads to NaN issues", "user": {"login": "Spenhouet", "id": 7819068, "node_id": "MDQ6VXNlcjc4MTkwNjg=", "avatar_url": "https://avatars0.githubusercontent.com/u/7819068?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Spenhouet", "html_url": "https://github.com/Spenhouet", "followers_url": "https://api.github.com/users/Spenhouet/followers", "following_url": "https://api.github.com/users/Spenhouet/following{/other_user}", "gists_url": "https://api.github.com/users/Spenhouet/gists{/gist_id}", "starred_url": "https://api.github.com/users/Spenhouet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Spenhouet/subscriptions", "organizations_url": "https://api.github.com/users/Spenhouet/orgs", "repos_url": "https://api.github.com/users/Spenhouet/repos", "events_url": "https://api.github.com/users/Spenhouet/events{/privacy}", "received_events_url": "https://api.github.com/users/Spenhouet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-02-13T21:31:46Z", "updated_at": "2019-03-01T00:58:57Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows and Linux\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): b'v1.12.0-rc2-3-ga6d8ffae09' 1.12.0\r\n- Python version: Python 3.6.5\r\n- CUDA/cuDNN version: v9.0 / 7.2.1\r\n- GPU model and memory: GTX 1080 and also on GTX 1080 TI\r\n\r\n**Describe the current behavior**\r\n\r\nSwapping the position of operands gives different results:\r\n\r\n- `1e-8 + 1.0 - tf.identity(1.0)` results in `0.0`\r\n- `1.0 - tf.identity(1.0) + 1e-8` results in `1e-08`\r\n\r\n**Describe the expected behavior**\r\n\r\nOperations like addition are commutative. Swapping the position of operands doesn't change the result:\r\n\r\n- `1e-8 + 1.0 - tf.identity(1.0)` results in `1e-08`\r\n- `1.0 - tf.identity(1.0) + 1e-8` results in `1e-08`\r\n\r\n**Code to reproduce the issue**\r\n\r\n```\r\nimport tensorflow as tf\r\nsess = tf.Session()\r\n\r\nprint(sess.run(1e-8 + 1.0 - tf.identity(1.0)))\r\nprint(sess.run(1.0 - tf.identity(1.0) + 1e-8))\r\n```\r\n\r\nOutput:\r\n\r\n> 0.0\r\n> 1e-08\r\n\r\nExpected output:\r\n\r\n> 1e-08\r\n> 1e-08\r\n\r\n**Additional comment**\r\n\r\nIn combination with `tf.log` / `tf.divide` this results in `-inf` / `inf` instead of `-18.420681` / `100000000.0`\r\nWorking with further calculations, for example log loss,  this results in a sudden `NaN` error without any exploding or other indicators. This is unexpected and leads to confusion. Many people on the internet who have inexplicable `NaN` issues try a multitude of proposed solutions (use other weight init, lower learning rate, clipping, strange `tf.where` `NaN` treatment, ....) to work around this unexpected behavior. I don't think any of the before mentioned solutions is appropriate to handle this unexpected behavior and I wish for it to work as expected."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25703", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25703/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25703/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25703/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25703", "id": 409513853, "node_id": "MDU6SXNzdWU0MDk1MTM4NTM=", "number": 25703, "title": "Cache intermediate results in custom op for backwards pass", "user": {"login": "marsupial-tail", "id": 19799964, "node_id": "MDQ6VXNlcjE5Nzk5OTY0", "avatar_url": "https://avatars1.githubusercontent.com/u/19799964?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marsupial-tail", "html_url": "https://github.com/marsupial-tail", "followers_url": "https://api.github.com/users/marsupial-tail/followers", "following_url": "https://api.github.com/users/marsupial-tail/following{/other_user}", "gists_url": "https://api.github.com/users/marsupial-tail/gists{/gist_id}", "starred_url": "https://api.github.com/users/marsupial-tail/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marsupial-tail/subscriptions", "organizations_url": "https://api.github.com/users/marsupial-tail/orgs", "repos_url": "https://api.github.com/users/marsupial-tail/repos", "events_url": "https://api.github.com/users/marsupial-tail/events{/privacy}", "received_events_url": "https://api.github.com/users/marsupial-tail/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-02-12T21:43:25Z", "updated_at": "2019-02-24T14:31:17Z", "closed_at": null, "author_association": "NONE", "body": "Hello,\r\n\r\nI wonder if there is a feature in Tensorflow which allows caching of intermediate results in a custom operation for the backwards computation, similar to the the ctx->save_for_backward interface in Pytorch. Does the C++ context object that we get to work with provide such a functionality?\r\n\r\nBest,\r\n\r\nZiheng Wang"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25691", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25691/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25691/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25691/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25691", "id": 409315264, "node_id": "MDU6SXNzdWU0MDkzMTUyNjQ=", "number": 25691, "title": "Missing mathematical definitions of tf.norm", "user": {"login": "ziofil", "id": 8944955, "node_id": "MDQ6VXNlcjg5NDQ5NTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/8944955?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ziofil", "html_url": "https://github.com/ziofil", "followers_url": "https://api.github.com/users/ziofil/followers", "following_url": "https://api.github.com/users/ziofil/following{/other_user}", "gists_url": "https://api.github.com/users/ziofil/gists{/gist_id}", "starred_url": "https://api.github.com/users/ziofil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ziofil/subscriptions", "organizations_url": "https://api.github.com/users/ziofil/orgs", "repos_url": "https://api.github.com/users/ziofil/repos", "events_url": "https://api.github.com/users/ziofil/events{/privacy}", "received_events_url": "https://api.github.com/users/ziofil/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-12T14:03:20Z", "updated_at": "2019-02-12T17:32:15Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a documentation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:doc_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version: 1.12\r\n- Doc Link: https://www.tensorflow.org/api_docs/python/tf/norm\r\n\r\n\r\n**Describe the documentation issue**\r\nThere are no mathematical definitions of the norms. This may result in ambiguity and confusion (e.g. are they Schatten p-norms?).\r\n\r\n**We welcome contributions by users. Will you be able to update submit a PR (use the [doc style guide](https://www.tensorflow.org/community/documentation)) to fix the doc Issue?** Not anytime soon, and in any case I would face said ambiguity and confusion."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25670", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25670/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25670/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25670/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25670", "id": 408859956, "node_id": "MDU6SXNzdWU0MDg4NTk5NTY=", "number": 25670, "title": "Unable to use keras.application within TF Estimator", "user": {"login": "sgasse", "id": 47532708, "node_id": "MDQ6VXNlcjQ3NTMyNzA4", "avatar_url": "https://avatars3.githubusercontent.com/u/47532708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sgasse", "html_url": "https://github.com/sgasse", "followers_url": "https://api.github.com/users/sgasse/followers", "following_url": "https://api.github.com/users/sgasse/following{/other_user}", "gists_url": "https://api.github.com/users/sgasse/gists{/gist_id}", "starred_url": "https://api.github.com/users/sgasse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sgasse/subscriptions", "organizations_url": "https://api.github.com/users/sgasse/orgs", "repos_url": "https://api.github.com/users/sgasse/repos", "events_url": "https://api.github.com/users/sgasse/events{/privacy}", "received_events_url": "https://api.github.com/users/sgasse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "salehay", "id": 33988982, "node_id": "MDQ6VXNlcjMzOTg4OTgy", "avatar_url": "https://avatars0.githubusercontent.com/u/33988982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/salehay", "html_url": "https://github.com/salehay", "followers_url": "https://api.github.com/users/salehay/followers", "following_url": "https://api.github.com/users/salehay/following{/other_user}", "gists_url": "https://api.github.com/users/salehay/gists{/gist_id}", "starred_url": "https://api.github.com/users/salehay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/salehay/subscriptions", "organizations_url": "https://api.github.com/users/salehay/orgs", "repos_url": "https://api.github.com/users/salehay/repos", "events_url": "https://api.github.com/users/salehay/events{/privacy}", "received_events_url": "https://api.github.com/users/salehay/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "salehay", "id": 33988982, "node_id": "MDQ6VXNlcjMzOTg4OTgy", "avatar_url": "https://avatars0.githubusercontent.com/u/33988982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/salehay", "html_url": "https://github.com/salehay", "followers_url": "https://api.github.com/users/salehay/followers", "following_url": "https://api.github.com/users/salehay/following{/other_user}", "gists_url": "https://api.github.com/users/salehay/gists{/gist_id}", "starred_url": "https://api.github.com/users/salehay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/salehay/subscriptions", "organizations_url": "https://api.github.com/users/salehay/orgs", "repos_url": "https://api.github.com/users/salehay/repos", "events_url": "https://api.github.com/users/salehay/events{/privacy}", "received_events_url": "https://api.github.com/users/salehay/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2019-02-11T16:17:26Z", "updated_at": "2019-10-31T02:50:05Z", "closed_at": null, "author_association": "NONE", "body": "I am having problems using keras.applications within an estimator. After much trying out myself, I came up with a minimal version to indicate the problem. I presume that it is caused by keras only having one session at a time while estimators set up several sessions for training and evaluation.\r\n\r\nThis is my [original post from stackoverflow](https://stackoverflow.com/questions/54589386/tensorflow-integrate-keras-model-in-estimator-model-fn)\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes, see below\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.12.0\r\n- Python version: 3.6.7\r\n\r\n**Describe the current behavior**\r\nThe estimator apparently does not learn the data, which can be observed by a constant loss (in evaluation) and a stagnant loss during training.\r\n\r\n**Describe the expected behavior**\r\nThe estimator should learn the MNIST dataset at least as good from the model features as from the raw data.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\nfrom keras.datasets import mnist\r\n\r\n\r\n# switch to example 1/2/3\r\nEXAMPLE_CASE = 1\r\n\r\n# flag for initial weights loading of keras model\r\n_W_INIT = True\r\n\r\n\r\ndef dense_net(features, labels, mode, params):\r\n    # --- code to load a keras application ---\r\n\r\n    # commenting in this line leads to a bump in the loss everytime the\r\n    # evaluation is run, this indicating that keras does not handle well the\r\n    # two sessions of the estimator API\r\n    # tf.keras.backend.set_learning_phase(mode == tf.estimator.ModeKeys.TRAIN)\r\n    global _W_INIT\r\n\r\n    model = tf.keras.applications.MobileNet(\r\n        input_tensor=features,\r\n        input_shape=(128, 128, 3),\r\n        include_top=False,\r\n        pooling='avg',\r\n        weights='imagenet' if _W_INIT else None)\r\n\r\n    # only initialize weights once\r\n    if _W_INIT:\r\n        _W_INIT = False\r\n\r\n    # switch cases\r\n    if EXAMPLE_CASE == 1:\r\n        # model.output is the same as model.layers[-1].output\r\n        img = model.layers[-1].output\r\n    elif EXAMPLE_CASE == 2:\r\n        img = model(features)\r\n    elif EXAMPLE_CASE == 3:\r\n        # do not use keras features\r\n        img = tf.keras.layers.Flatten()(features)\r\n    else:\r\n        raise NotImplementedError\r\n\r\n    # --- regular code from here on ---\r\n    for units in params['dense_layers']:\r\n        img = tf.keras.layers.Dense(units=units, activation='relu')(img)\r\n\r\n    logits = tf.keras.layers.Dense(units=10,\r\n                                   activation='relu')(img)\r\n\r\n    # compute predictions\r\n    probs = tf.nn.softmax(logits)\r\n    predicted_classes = tf.argmax(probs, 1)\r\n\r\n    # compute loss\r\n    loss = tf.losses.sparse_softmax_cross_entropy(labels, logits)\r\n\r\n    acc = tf.metrics.accuracy(labels, predicted_classes)\r\n    metrics = {'accuracy': acc}\r\n    tf.summary.scalar('accuarcy', acc[1])\r\n\r\n    if mode == tf.estimator.ModeKeys.EVAL:\r\n        return tf.estimator.EstimatorSpec(\r\n            mode, loss=loss, eval_metric_ops=metrics)\r\n\r\n    # create training operation\r\n    assert mode == tf.estimator.ModeKeys.TRAIN\r\n\r\n    optimizer = tf.train.AdagradOptimizer(learning_rate=0.01)\r\n    train_op = optimizer.minimize(loss, global_step=tf.train.get_global_step())\r\n    return tf.estimator.EstimatorSpec(mode, loss=loss, train_op=train_op)\r\n\r\n\r\ndef prepare_dataset(in_tuple, n):\r\n    feats = in_tuple[0][:n, :, :]\r\n    labels = in_tuple[1][:n]\r\n    feats = feats.astype(np.float32)\r\n    feats /= 255\r\n    labels = labels.astype(np.int32)\r\n    return (feats, labels)\r\n\r\n\r\ndef _parse_func(features, labels):\r\n    feats = tf.expand_dims(features, -1)\r\n    feats = tf.image.grayscale_to_rgb(feats)\r\n    feats = tf.image.resize_images(feats, (128, 128))\r\n    return (feats, labels)\r\n\r\n\r\ndef load_mnist(n_train=10000, n_test=3000):\r\n    train, test = mnist.load_data()\r\n    train = prepare_dataset(train, n_train)\r\n    test = prepare_dataset(test, n_test)\r\n    return train, test\r\n\r\n\r\ndef train_input_fn(imgs, labels, batch_size):\r\n    dataset = tf.data.Dataset.from_tensor_slices((imgs, labels))\r\n    dataset = dataset.map(_parse_func)\r\n    dataset = dataset.shuffle(500)\r\n    dataset = dataset.repeat().batch(batch_size)\r\n    return dataset\r\n\r\n\r\ndef eval_input_fn(imgs, labels, batch_size):\r\n    dataset = tf.data.Dataset.from_tensor_slices((imgs, labels))\r\n    dataset = dataset.map(_parse_func)\r\n    dataset = dataset.batch(batch_size)\r\n    return dataset\r\n\r\n\r\ndef main(m_dir=None):\r\n    # fetch data\r\n    (x_train, y_train), (x_test, y_test) = load_mnist()\r\n\r\n    train_spec = tf.estimator.TrainSpec(\r\n        input_fn=lambda: train_input_fn(\r\n            x_train, y_train, 30),\r\n        max_steps=150)\r\n\r\n    eval_spec = tf.estimator.EvalSpec(\r\n        input_fn=lambda: eval_input_fn(\r\n            x_test, y_test, 30),\r\n        steps=100,\r\n        start_delay_secs=0,\r\n        throttle_secs=0)\r\n\r\n    run_cfg = tf.estimator.RunConfig(\r\n        model_dir=m_dir,\r\n        tf_random_seed=2,\r\n        save_summary_steps=2,\r\n        save_checkpoints_steps=10,\r\n        keep_checkpoint_max=1)\r\n\r\n    # build network\r\n    classifier = tf.estimator.Estimator(\r\n        model_fn=dense_net,\r\n        params={\r\n            'dense_layers': [256]},\r\n        config=run_cfg)\r\n\r\n    # fit the model\r\n    tf.estimator.train_and_evaluate(\r\n        classifier,\r\n        train_spec,\r\n        eval_spec)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n\r\n**Other info / logs**\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25665", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25665/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25665/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25665/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25665", "id": 408767330, "node_id": "MDU6SXNzdWU0MDg3NjczMzA=", "number": 25665, "title": "Type Error caused by using AttentionCellWrapper: Tensors cannot be iterated.", "user": {"login": "lzw429", "id": 21468340, "node_id": "MDQ6VXNlcjIxNDY4MzQw", "avatar_url": "https://avatars1.githubusercontent.com/u/21468340?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lzw429", "html_url": "https://github.com/lzw429", "followers_url": "https://api.github.com/users/lzw429/followers", "following_url": "https://api.github.com/users/lzw429/following{/other_user}", "gists_url": "https://api.github.com/users/lzw429/gists{/gist_id}", "starred_url": "https://api.github.com/users/lzw429/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lzw429/subscriptions", "organizations_url": "https://api.github.com/users/lzw429/orgs", "repos_url": "https://api.github.com/users/lzw429/repos", "events_url": "https://api.github.com/users/lzw429/events{/privacy}", "received_events_url": "https://api.github.com/users/lzw429/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "drpngx", "id": 20959853, "node_id": "MDQ6VXNlcjIwOTU5ODUz", "avatar_url": "https://avatars1.githubusercontent.com/u/20959853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drpngx", "html_url": "https://github.com/drpngx", "followers_url": "https://api.github.com/users/drpngx/followers", "following_url": "https://api.github.com/users/drpngx/following{/other_user}", "gists_url": "https://api.github.com/users/drpngx/gists{/gist_id}", "starred_url": "https://api.github.com/users/drpngx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drpngx/subscriptions", "organizations_url": "https://api.github.com/users/drpngx/orgs", "repos_url": "https://api.github.com/users/drpngx/repos", "events_url": "https://api.github.com/users/drpngx/events{/privacy}", "received_events_url": "https://api.github.com/users/drpngx/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-02-11T12:51:04Z", "updated_at": "2019-08-02T00:21:32Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):Linux Manjaro Illyria 18.0.2\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:no mobile device related\r\n- TensorFlow installed from (source or binary):binary\r\n- TensorFlow version (use command below): ('v1.12.0-0-ga6d8ffae09', '1.12.0')\r\n- Python version:2.7.15\r\n- Bazel version (if compiling from source):installed from binary\r\n- GCC/Compiler version (if compiling from source):installed from binary\r\n- CUDA/cuDNN version:no CUDA\r\n- GPU model and memory:no computing GPU\r\n\r\n**Describe the current behavior**\r\nI am trying to add tf.contrib.rnn.AttentionCellWrapper to tf.nn.rnn_cell.GRUCell. Before adding the wrapper, the program is completely running normally. After adding the wrapper, the program reports an error shown in the traceback below.\r\n\r\nThe error `Tensor objects are only iterable when eager execution is enabled` is confusing me, since I have tried enable the eager execution and the results are the same.\r\nI have changed GRUCell to LSMMCell or other RNN-related Cell and the results are the same.\r\nI have tried multiple tensorflow versions and the results are the same.\r\nThe code I am modifying is the same as [this code](https://github.com/Songweiping/GRU4Rec_TensorFlow/blob/master/model.py), and what I am trying is to add AttentionCellWrapper between 126 and 127 lines.\r\n\r\n**Describe the expected behavior**\r\nThe program should just work fine without any error. All the changes I made compared to the normal code were to add the AttentionCellWrapper.\r\nThe official documentation also has no explanation for the cause of this error.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\nAs described above, the normal code with a AttentionCellWrapper, and the function that triggered the error is as follows. The complete code also covers other files in the [repo](https://github.com/Songweiping/GRU4Rec_TensorFlow).\r\n\r\n```\r\ndef build_model(self):\r\n        \r\n        self.X = tf.placeholder(tf.int32, [self.batch_size], name='input')\r\n        self.Y = tf.placeholder(tf.int32, [self.batch_size], name='output')\r\n        self.state = [tf.placeholder(tf.float32, [self.batch_size, self.rnn_size], name='rnn_state') for _ in xrange(self.layers)]\r\n        self.global_step = tf.Variable(0, name='global_step', trainable=False)\r\n\r\n        with tf.variable_scope('gru_layer'):\r\n            sigma = self.sigma if self.sigma != 0 else np.sqrt(6.0 / (self.n_items + self.rnn_size))\r\n            if self.init_as_normal:\r\n                initializer = tf.random_normal_initializer(mean=0, stddev=sigma)\r\n            else:\r\n                initializer = tf.random_uniform_initializer(minval=-sigma, maxval=sigma)\r\n            embedding = tf.get_variable('embedding', [self.n_items, self.rnn_size], initializer=initializer)\r\n            softmax_W = tf.get_variable('softmax_w', [self.n_items, self.rnn_size], initializer=initializer)\r\n            softmax_b = tf.get_variable('softmax_b', [self.n_items], initializer=tf.constant_initializer(0.0))\r\n\r\n            cell = rnn_cell.GRUCell(self.rnn_size, activation=self.hidden_act)\r\n            attn_cell = tf.contrib.rnn.AttentionCellWrapper(cell, attn_length=20)  # state_is_tuple is True by default\r\n            drop_cell = rnn_cell.DropoutWrapper(attn_cell, output_keep_prob=self.dropout_p_hidden)\r\n            stacked_cell = rnn_cell.MultiRNNCell([drop_cell] * self.layers)\r\n            \r\n            inputs = tf.nn.embedding_lookup(embedding, self.X)\r\n            output, state = stacked_cell(inputs, tuple(self.state))\r\n            self.final_state = state\r\n\r\n        if self.is_training:\r\n            '''\r\n            Use other examples of the minibatch as negative samples.\r\n            '''\r\n            sampled_W = tf.nn.embedding_lookup(softmax_W, self.Y)\r\n            sampled_b = tf.nn.embedding_lookup(softmax_b, self.Y)\r\n            logits = tf.matmul(output, sampled_W, transpose_b=True) + sampled_b\r\n            self.yhat = self.final_activation(logits)\r\n            self.cost = self.loss_function(self.yhat)\r\n        else:\r\n            logits = tf.matmul(output, softmax_W, transpose_b=True) + softmax_b\r\n            self.yhat = self.final_activation(logits)\r\n\r\n        if not self.is_training:\r\n            return\r\n\r\n        self.lr = tf.maximum(1e-5,tf.train.exponential_decay(self.learning_rate, self.global_step, self.decay_steps, self.decay, staircase=True)) \r\n        \r\n        '''\r\n        Try different optimizers.\r\n        '''\r\n        #optimizer = tf.train.AdagradOptimizer(self.lr)\r\n        optimizer = tf.train.AdamOptimizer(self.lr)\r\n        #optimizer = tf.train.AdadeltaOptimizer(self.lr)\r\n        #optimizer = tf.train.RMSPropOptimizer(self.lr)\r\n\r\n        tvars = tf.trainable_variables()\r\n        gvs = optimizer.compute_gradients(self.cost, tvars)\r\n        if self.grad_cap > 0:\r\n            capped_gvs = [(tf.clip_by_norm(grad, self.grad_cap), var) for grad, var in gvs]\r\n        else:\r\n            capped_gvs = gvs \r\n        self.train_op = optimizer.apply_gradients(capped_gvs, global_step=self.global_step)\r\n```\r\n\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/syh/.local/share/JetBrains/Toolbox/apps/PyCharm-P/ch-0/183.5429.31/helpers/pydev/pydevd.py\", line 1741, in <module>\r\n    main()\r\n  File \"/home/syh/.local/share/JetBrains/Toolbox/apps/PyCharm-P/ch-0/183.5429.31/helpers/pydev/pydevd.py\", line 1735, in main\r\n    globals = debugger.run(setup['file'], None, None, is_module)\r\n  File \"/home/syh/.local/share/JetBrains/Toolbox/apps/PyCharm-P/ch-0/183.5429.31/helpers/pydev/pydevd.py\", line 1135, in run\r\n    pydev_imports.execfile(file, globals, locals)  # execute the script\r\n  File \"/run/media/syh/0D11080D0D11080D/workspace/Recommender-System/exp/GRU4Rec_TensorFlow-master/main.py\", line 86, in <module>\r\n    gru4rec = model.GRU4Rec(sess, args)\r\n  File \"/run/media/syh/0D11080D0D11080D/workspace/Recommender-System/exp/GRU4Rec_TensorFlow-master/model.py\", line 72, in __init__\r\n    self.build_model()\r\n  File \"/run/media/syh/0D11080D0D11080D/workspace/Recommender-System/exp/GRU4Rec_TensorFlow-master/model.py\", line 142, in build_model\r\n    output, state = multi_cell(inputs, tuple(self.state))\r\n  File \"/run/media/syh/0D11080D0D11080D/workspace/Recommender-System/exp/venv/lib/python2.7/site-packages/tensorflow/python/ops/rnn_cell_impl.py\", line 233, in __call__\r\n    return super(RNNCell, self).__call__(inputs, state)\r\n  File \"/run/media/syh/0D11080D0D11080D/workspace/Recommender-System/exp/venv/lib/python2.7/site-packages/tensorflow/python/layers/base.py\", line 374, in __call__\r\n    outputs = super(Layer, self).__call__(inputs, *args, **kwargs)\r\n  File \"/run/media/syh/0D11080D0D11080D/workspace/Recommender-System/exp/venv/lib/python2.7/site-packages/tensorflow/python/keras/engine/base_layer.py\", line 757, in __call__\r\n    outputs = self.call(inputs, *args, **kwargs)\r\n  File \"/run/media/syh/0D11080D0D11080D/workspace/Recommender-System/exp/venv/lib/python2.7/site-packages/tensorflow/python/ops/rnn_cell_impl.py\", line 1486, in call\r\n    cur_inp, new_state = cell(cur_inp, cur_state)\r\n  File \"/run/media/syh/0D11080D0D11080D/workspace/Recommender-System/exp/venv/lib/python2.7/site-packages/tensorflow/python/ops/rnn_cell_impl.py\", line 1282, in __call__\r\n    output, new_state = self._cell(inputs, state, scope=scope)\r\n  File \"/run/media/syh/0D11080D0D11080D/workspace/Recommender-System/exp/venv/lib/python2.7/site-packages/tensorflow/python/ops/rnn_cell_impl.py\", line 233, in __call__\r\n    return super(RNNCell, self).__call__(inputs, state)\r\n  File \"/run/media/syh/0D11080D0D11080D/workspace/Recommender-System/exp/venv/lib/python2.7/site-packages/tensorflow/python/layers/base.py\", line 374, in __call__\r\n    outputs = super(Layer, self).__call__(inputs, *args, **kwargs)\r\n  File \"/run/media/syh/0D11080D0D11080D/workspace/Recommender-System/exp/venv/lib/python2.7/site-packages/tensorflow/python/keras/engine/base_layer.py\", line 757, in __call__\r\n    outputs = self.call(inputs, *args, **kwargs)\r\n  File \"/run/media/syh/0D11080D0D11080D/workspace/Recommender-System/exp/venv/lib/python2.7/site-packages/tensorflow/contrib/rnn/python/ops/rnn_cell.py\", line 1190, in call\r\n    state, attns, attn_states = state\r\n  File \"/run/media/syh/0D11080D0D11080D/workspace/Recommender-System/exp/venv/lib/python2.7/site-packages/tensorflow/python/framework/ops.py\", line 459, in __iter__\r\n    \"Tensor objects are only iterable when eager execution is \"\r\nTypeError: Tensor objects are only iterable when eager execution is enabled. To iterate over this tensor use tf.map_fn.\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25661", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25661/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25661/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25661/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25661", "id": 408713054, "node_id": "MDU6SXNzdWU0MDg3MTMwNTQ=", "number": 25661, "title": "NNAPI does not accept the reshape operation with the -1 parameter", "user": {"login": "AndrzejKRK", "id": 27152904, "node_id": "MDQ6VXNlcjI3MTUyOTA0", "avatar_url": "https://avatars3.githubusercontent.com/u/27152904?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndrzejKRK", "html_url": "https://github.com/AndrzejKRK", "followers_url": "https://api.github.com/users/AndrzejKRK/followers", "following_url": "https://api.github.com/users/AndrzejKRK/following{/other_user}", "gists_url": "https://api.github.com/users/AndrzejKRK/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndrzejKRK/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndrzejKRK/subscriptions", "organizations_url": "https://api.github.com/users/AndrzejKRK/orgs", "repos_url": "https://api.github.com/users/AndrzejKRK/repos", "events_url": "https://api.github.com/users/AndrzejKRK/events{/privacy}", "received_events_url": "https://api.github.com/users/AndrzejKRK/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-11T10:21:19Z", "updated_at": "2019-02-12T21:22:10Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n* OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n* Mobile device: Xiaomi Mi MIX 2S (Android 9, API 28)\r\n* TensorFlow Lite version on Android: 0.0.0-gpu-experimental\r\n\r\n\r\n\r\n**Provide the text output from tflite_convert**\r\n\r\n```\r\ntflite_convert \\\r\n--graph_def_file=tflite_graph.pb \\\r\n--output_file=detect.tflite \\\r\n--input_shapes=1,300,300,3 \\\r\n--input_arrays=normalized_input_image_tensor \\\r\n--output_arrays='raw_outputs/class_predictions','raw_outputs/box_encodings' \\\r\n--inference_type=QUANTIZED_UINT8 \\\r\n--mean_values=128 \\\r\n--std_dev_values=128 \\\r\n--change_concat_input_ranges=false \\\r\n--allow_custom_ops\r\n```\r\n\r\n**Describe the current behavior**\r\n\r\nI use SSD mobilenet V1 model from [zoo](https://github.com/tensorflow/models/blob/master/research/object_detection/g3doc/detection_model_zoo.md). When I try to use this model in an Android application using NNAPI, I get an error message. The problem is that the Reshape operation has the new shape [1, -1, 91]. Will it be possible to use Reshape with the -1 parameter in NNAPI. And is it possible to change this parameter to static without retraining the model?\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25660", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25660/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25660/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25660/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25660", "id": 408709048, "node_id": "MDU6SXNzdWU0MDg3MDkwNDg=", "number": 25660, "title": "TFL Detect app crash while using NNAPI", "user": {"login": "sarmadidrees", "id": 22538217, "node_id": "MDQ6VXNlcjIyNTM4MjE3", "avatar_url": "https://avatars2.githubusercontent.com/u/22538217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sarmadidrees", "html_url": "https://github.com/sarmadidrees", "followers_url": "https://api.github.com/users/sarmadidrees/followers", "following_url": "https://api.github.com/users/sarmadidrees/following{/other_user}", "gists_url": "https://api.github.com/users/sarmadidrees/gists{/gist_id}", "starred_url": "https://api.github.com/users/sarmadidrees/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sarmadidrees/subscriptions", "organizations_url": "https://api.github.com/users/sarmadidrees/orgs", "repos_url": "https://api.github.com/users/sarmadidrees/repos", "events_url": "https://api.github.com/users/sarmadidrees/events{/privacy}", "received_events_url": "https://api.github.com/users/sarmadidrees/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-02-11T10:10:18Z", "updated_at": "2019-02-12T21:20:27Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): **Yes**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): **Linux Ubuntu 16.04**\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: **Xiaomi Mi 8**\r\n- TensorFlow installed from (source or binary): **binary**\r\n- TensorFlow version (use command below): **1.12**\r\n- Python version: **3.5**\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: **9.0/7.5**\r\n- GPU model and memory: **GTX 1050 - 4GB**\r\n\r\n\r\n**Describe the current behavior**\r\nI am trying to build the [TF Lite detect app](https://github.com/tensorflow/tensorflow/tree/master/tensorflow/lite/examples/android) with using NNAPI, but when I set useNNAPI to **true** it crashes with an exception:\r\n`Process: org.tensorflow.lite.demo, PID: 32661\r\n    java.lang.IllegalArgumentException: Internal error: Failed to run on the given Interpreter: \r\n        at org.tensorflow.lite.NativeInterpreterWrapper.run(Native Method)\r\n        at org.tensorflow.lite.NativeInterpreterWrapper.run(NativeInterpreterWrapper.java:145)\r\n        at org.tensorflow.lite.Interpreter.runForMultipleInputsOutputs(Interpreter.java:229)\r\n        at org.tensorflow.demo.TFLiteObjectDetectionAPIModel.recognizeImage(TFLiteObjectDetectionAPIModel.java:196)\r\n        at org.tensorflow.demo.DetectorActivity$3.run(DetectorActivity.java:247)\r\n        at android.os.Handler.handleCallback(Handler.java:873)\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)\r\n        at android.os.Looper.loop(Looper.java:201)\r\n        at android.os.HandlerThread.run(HandlerThread.java:65)`\r\n\r\nBut, when I set useNNAPI to **false** it runs without any issue. On the other hand, I also tried to use NNAPI with [TFL Classifier app](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/lite/examples/android/app/src/main/java/org/tensorflow/demo/TFLiteImageClassifier.java) and it runs flawlessly (it means there is no problem with my phone). The question is that, is it possible to use NNAPI with detector app or not? \r\n\r\n**Code to reproduce the issue**\r\nChanged few lines in [TFLiteObjectDetectionAPIModel.java](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/lite/examples/android/app/src/main/java/org/tensorflow/demo/TFLiteObjectDetectionAPIModel.java#L120):\r\n`\r\nd.tfliteOptions.setUseNNAPI(true);\r\n    try {\r\n       d.tfLite = new Interpreter(loadModelFile(assetManager, modelFilename), d.tfliteOptions);\r\n    } catch (Exception e) {\r\n      throw new RuntimeException(e);\r\n    }\r\n`\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25645", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25645/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25645/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25645/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25645", "id": 408475037, "node_id": "MDU6SXNzdWU0MDg0NzUwMzc=", "number": 25645, "title": "Inconsistent eigh gradients", "user": {"login": "maedoc", "id": 5189886, "node_id": "MDQ6VXNlcjUxODk4ODY=", "avatar_url": "https://avatars2.githubusercontent.com/u/5189886?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maedoc", "html_url": "https://github.com/maedoc", "followers_url": "https://api.github.com/users/maedoc/followers", "following_url": "https://api.github.com/users/maedoc/following{/other_user}", "gists_url": "https://api.github.com/users/maedoc/gists{/gist_id}", "starred_url": "https://api.github.com/users/maedoc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maedoc/subscriptions", "organizations_url": "https://api.github.com/users/maedoc/orgs", "repos_url": "https://api.github.com/users/maedoc/repos", "events_url": "https://api.github.com/users/maedoc/events{/privacy}", "received_events_url": "https://api.github.com/users/maedoc/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-02-09T21:56:44Z", "updated_at": "2020-03-16T11:38:03Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS Mojave\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: n/a\r\n- TensorFlow installed from (source or binary): `conda install -c conda-forge tensorflow` in a Python 3.6 environment\r\n- TensorFlow version (use command below): v1.10.0-rc1-19-g656e7a2b34 1.10.0\r\n- Python version: Python 3.6.8 :: Anaconda, Inc.\r\n- Bazel version (if compiling from source): n/a\r\n- GCC/Compiler version (if compiling from source): n/a\r\n- CUDA/cuDNN version: n/a\r\n- GPU model and memory: n/a\r\n\r\n\r\nYou can collect some of this information using our environment capture [script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with\r\npython -c \"import tensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"\r\n\r\n**Describe the current behavior**\r\nI'm porting an optimization involving calls to `eigh` from the [`autograd`](https://github.com/HIPS/autograd) library to Tensorflow. When computing the gradient of a loss function involving a subset of eigenvectors, I see fairly large large differences (in terms of `norm(grad_np - grad_tf)`).\r\n\r\nIn my application, this causes the optimization to fail completely under TensorFlow while succeeding with the `autograd` library (using same optimizer, step size etc). \r\n\r\n**Describe the expected behavior**\r\nDifferent numerical implementations of derivatives should be consistent.  Comparing all other operations in the AD graph between autograd and TF showed no problems, and the same would be expected for eigh.\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\ndef loss_z_np(z, G, w, ne=3):\r\n    from autograd import jacobian, grad\r\n    def loss(z):\r\n        import autograd.numpy as np\r\n        d = 2*z - np.sum(w, axis=1)\r\n        e, v = np.linalg.eigh(np.diag(d) + w)\r\n        ssev = np.sum(np.square(e[-ne:] * v[:, -ne:]), axis=-1)\r\n        return np.sum(np.dot(G, ssev))\r\n    return grad(loss)(z)\r\n\r\ndef lsa_loss(z, G, w, ne=3):\r\n    d = 2*z - tf.reduce_sum(w, 1)\r\n    e, v = tf.linalg.eigh(tf.diag(d) + w)\r\n    ssev = tf.reduce_sum(tf.square(e[-ne:] * v[:, -ne:]), 1)\r\n    return tf.reduce_sum(tf.matmul(G, tf.expand_dims(ssev, 1)))\r\n\r\ndef loss_z_tf(z, G, w, ne=3):\r\n    G, w = [tf.convert_to_tensor(_, dtype=tf.float32) for _ in (G, w)]\r\n    z = tf.Variable(tf.convert_to_tensor(z, dtype=tf.float32))\r\n    loss = lsa_loss(z, G, w, ne=ne)\r\n    lg = tf.gradients(loss, z)\r\n    model = tf.global_variables_initializer()\r\n    trace = []\r\n    with tf.Session() as session:\r\n        session.run(model)\r\n        lg_np = session.run(lg)\r\n    return lg_np\r\n\r\n\r\nm, n = 79, 164\r\nnorms = []\r\nfor _ in range(30):\r\n    G = np.random.rand(m, n).astype('f')\r\n    w = np.random.rand(n, n).astype('f')\r\n    z = - np.random.rand(n).astype('f')\r\n    lg_np = loss_z_np(z, G, w, ne=10)\r\n    lg_tf = loss_z_tf(z, G, w, ne=10)\r\n    norms.append(np.linalg.norm(lg_np - lg_tf))\r\nprint('average norm', sum(norms)/len(norms))\r\n```\r\nThis prints an average of ~30~ 16.\r\n\r\n**Other info / logs**\r\n\r\nn/a\r\n\r\n_edit_ to switch the NumPy code to float32; problem persists."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25620", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25620/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25620/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25620/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25620", "id": 408180832, "node_id": "MDU6SXNzdWU0MDgxODA4MzI=", "number": 25620, "title": "MirroredStrategy, dataset sharding, notion of keras epoch - inconsistent and confusing", "user": {"login": "ksachdeva", "id": 127006, "node_id": "MDQ6VXNlcjEyNzAwNg==", "avatar_url": "https://avatars2.githubusercontent.com/u/127006?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ksachdeva", "html_url": "https://github.com/ksachdeva", "followers_url": "https://api.github.com/users/ksachdeva/followers", "following_url": "https://api.github.com/users/ksachdeva/following{/other_user}", "gists_url": "https://api.github.com/users/ksachdeva/gists{/gist_id}", "starred_url": "https://api.github.com/users/ksachdeva/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ksachdeva/subscriptions", "organizations_url": "https://api.github.com/users/ksachdeva/orgs", "repos_url": "https://api.github.com/users/ksachdeva/repos", "events_url": "https://api.github.com/users/ksachdeva/events{/privacy}", "received_events_url": "https://api.github.com/users/ksachdeva/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "guptapriya", "id": 14104855, "node_id": "MDQ6VXNlcjE0MTA0ODU1", "avatar_url": "https://avatars1.githubusercontent.com/u/14104855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guptapriya", "html_url": "https://github.com/guptapriya", "followers_url": "https://api.github.com/users/guptapriya/followers", "following_url": "https://api.github.com/users/guptapriya/following{/other_user}", "gists_url": "https://api.github.com/users/guptapriya/gists{/gist_id}", "starred_url": "https://api.github.com/users/guptapriya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guptapriya/subscriptions", "organizations_url": "https://api.github.com/users/guptapriya/orgs", "repos_url": "https://api.github.com/users/guptapriya/repos", "events_url": "https://api.github.com/users/guptapriya/events{/privacy}", "received_events_url": "https://api.github.com/users/guptapriya/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "guptapriya", "id": 14104855, "node_id": "MDQ6VXNlcjE0MTA0ODU1", "avatar_url": "https://avatars1.githubusercontent.com/u/14104855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guptapriya", "html_url": "https://github.com/guptapriya", "followers_url": "https://api.github.com/users/guptapriya/followers", "following_url": "https://api.github.com/users/guptapriya/following{/other_user}", "gists_url": "https://api.github.com/users/guptapriya/gists{/gist_id}", "starred_url": "https://api.github.com/users/guptapriya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guptapriya/subscriptions", "organizations_url": "https://api.github.com/users/guptapriya/orgs", "repos_url": "https://api.github.com/users/guptapriya/repos", "events_url": "https://api.github.com/users/guptapriya/events{/privacy}", "received_events_url": "https://api.github.com/users/guptapriya/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-08T14:41:58Z", "updated_at": "2019-06-20T02:27:20Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): Both\r\n- TensorFlow version (use command below): 1.12\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory: 1080 Ti\r\n\r\n**Background**\r\n\r\nWhile I understand that in machine learning community the notion/concept of epoch may vary a bit, one of the more widely adopted definition is - an epoch is to go over all the samples of the dataset once. To some extent it is consistent with keras api as where in the fit API we provide 'steps_per_epoch' as an indicator of when an 'epoch' is to be considered finished and most of the time steps_per_epoch is computed  to be equal to the number of batches of your training dataset.\r\n\r\n[I also appreciate that this definition is bit lose because if one is performing augmentation then above given definition of epoch starts to get bit murky]\r\n\r\n**Setup**\r\n\r\nI am trying to perform multi-gpu training using MirroredStrategy and Keras. My setup is - one machine with multiple gpus. In other words, not using the ClusterSpec i.e. not really \"distributed\" amongst many different machines.\r\n\r\n**Observed Behavior**\r\n\r\nI would expect that if I have a dataset of 100 samples and 2 GPUs, MirroredStrategy would distribute 50 samples to each GPU. An epoch will be done when both GPUs would have seen 50 samples each. Each GPU will see a portion of dataset reserved for it. In other words, they would see distinct samples.\r\n\r\nA quick look at the API (https://www.tensorflow.org/api_docs/python/tf/contrib/distribute/MirroredStrategy) makes you believe that if you set `auto_shard_dataset` to True you may achieve above goal. However, after looking in the source code I can see that `auto_shard_dataset` is taken into consideration when a multi-worker/cluster setup is used (https://github.com/tensorflow/tensorflow/blob/a6d8ffae097d0132989ae4688d224121ec6d8f35/tensorflow/contrib/distribute/python/mirrored_strategy.py#L481).\r\n\r\nThis means that in my setup every GPUs would get 100 samples therefore the notion of 1 epoch in this case is essentially going over the dataset `twice` (but in parallel)\r\n\r\n**Expected Behavior**\r\n\r\nIt is often interesting to evaluate the performance of a network after 1 epoch (given the more widely accepted definition/convention of epoch amongst others i.e. an epoch is to go over the dataset once). \r\n\r\nGiven that MirroredStrategy does take the parameter `auto_shard_dataset` i.e. you (the tensorflow authors) did take notion of dividing the dataset in parts in consideration,  my question would be why it is not being used for the setup (1 machine multiple gpus) described above ? \r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25609", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25609/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25609/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25609/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25609", "id": 408003819, "node_id": "MDU6SXNzdWU0MDgwMDM4MTk=", "number": 25609, "title": "tf.nn.conv2d_transpose different behaviour if output_shape is a list", "user": {"login": "mccane", "id": 1606685, "node_id": "MDQ6VXNlcjE2MDY2ODU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1606685?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mccane", "html_url": "https://github.com/mccane", "followers_url": "https://api.github.com/users/mccane/followers", "following_url": "https://api.github.com/users/mccane/following{/other_user}", "gists_url": "https://api.github.com/users/mccane/gists{/gist_id}", "starred_url": "https://api.github.com/users/mccane/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mccane/subscriptions", "organizations_url": "https://api.github.com/users/mccane/orgs", "repos_url": "https://api.github.com/users/mccane/repos", "events_url": "https://api.github.com/users/mccane/events{/privacy}", "received_events_url": "https://api.github.com/users/mccane/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-02-08T04:40:50Z", "updated_at": "2020-02-26T22:22:00Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\ntf version 1.12. It probably relates to other versions too. System information doesn't matter.\r\n\r\n**Describe the current behavior**\r\nlines 1235, 1326, 1459, 2535 of nn_ops.py includes the following error check:\r\nif isinstance(output_shape, (list, np.ndarray)):\r\n\r\nHowever, if output_shape is a tuple instead of a list, then the error check is skipped.\r\n\r\n**Describe the expected behavior**\r\nBehaviour should be the same for lists or tuples. Fix is easy:\r\n\r\nif isinstance(output_shape, (list, tuple, np.ndarray)):\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25606", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25606/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25606/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25606/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25606", "id": 407968619, "node_id": "MDU6SXNzdWU0MDc5Njg2MTk=", "number": 25606, "title": "~40% slow down since 1.13.0.dev20190202", "user": {"login": "gehring", "id": 1869903, "node_id": "MDQ6VXNlcjE4Njk5MDM=", "avatar_url": "https://avatars1.githubusercontent.com/u/1869903?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gehring", "html_url": "https://github.com/gehring", "followers_url": "https://api.github.com/users/gehring/followers", "following_url": "https://api.github.com/users/gehring/following{/other_user}", "gists_url": "https://api.github.com/users/gehring/gists{/gist_id}", "starred_url": "https://api.github.com/users/gehring/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gehring/subscriptions", "organizations_url": "https://api.github.com/users/gehring/orgs", "repos_url": "https://api.github.com/users/gehring/repos", "events_url": "https://api.github.com/users/gehring/events{/privacy}", "received_events_url": "https://api.github.com/users/gehring/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "saxenasaurabh", "id": 3967488, "node_id": "MDQ6VXNlcjM5Njc0ODg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3967488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saxenasaurabh", "html_url": "https://github.com/saxenasaurabh", "followers_url": "https://api.github.com/users/saxenasaurabh/followers", "following_url": "https://api.github.com/users/saxenasaurabh/following{/other_user}", "gists_url": "https://api.github.com/users/saxenasaurabh/gists{/gist_id}", "starred_url": "https://api.github.com/users/saxenasaurabh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saxenasaurabh/subscriptions", "organizations_url": "https://api.github.com/users/saxenasaurabh/orgs", "repos_url": "https://api.github.com/users/saxenasaurabh/repos", "events_url": "https://api.github.com/users/saxenasaurabh/events{/privacy}", "received_events_url": "https://api.github.com/users/saxenasaurabh/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "saxenasaurabh", "id": 3967488, "node_id": "MDQ6VXNlcjM5Njc0ODg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3967488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saxenasaurabh", "html_url": "https://github.com/saxenasaurabh", "followers_url": "https://api.github.com/users/saxenasaurabh/followers", "following_url": "https://api.github.com/users/saxenasaurabh/following{/other_user}", "gists_url": "https://api.github.com/users/saxenasaurabh/gists{/gist_id}", "starred_url": "https://api.github.com/users/saxenasaurabh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saxenasaurabh/subscriptions", "organizations_url": "https://api.github.com/users/saxenasaurabh/orgs", "repos_url": "https://api.github.com/users/saxenasaurabh/repos", "events_url": "https://api.github.com/users/saxenasaurabh/events{/privacy}", "received_events_url": "https://api.github.com/users/saxenasaurabh/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-02-08T01:17:03Z", "updated_at": "2019-03-08T21:33:15Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code: yes\r\n- OS Platform and Distribution: public Colab instance and Debian\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version: >= 1.13.0.dev20190202\r\n- Python version: 3.6.7\r\n- CUDA/cuDNN version: 10\r\n- GPU model and memory: K80 (originally occurred on T4 and V100)\r\n\r\n**Describe the current behavior**\r\nPerformance on some simple looped graphs has worsen by ~40% in between 1.13.0.dev20190201 and 1.13.0.dev20190202 and still exists in the current nightly build (see provided colab). This slow down was consistent across VMs and GPUs when running my research code. The provided code is my best attempt at boiling it down.\r\n\r\nHere are the results from the colab benchmark copied for convenience. The `num_batched_iter` partially unrolls the `tf.while_loop` body for that many iterations to reduce its overhead and leverage other graph optimizations. Before the first timed `sess.run(...)` call, 5 warm-up call are made. Results reported aggregate 40 different runs. The colab runtimes were completely reset before benchmarking each version. \r\n\r\nOn the newest tf-nightly-gpu build, I got:\r\n```\r\n1.13.0-dev20190207\r\nBenchmarking simple_loop_case...\r\nname                                                                         mean        min        max     q=0.05     q=0.95\r\n----------------------------------------------------------------------  ---------  ---------  ---------  ---------  ---------\r\nsimple loop, num_batched_iter=1, back_prop=False, test_converge=True    0.526553   0.512475   0.551661   0.51285    0.543843\r\nsimple loop, num_batched_iter=1, back_prop=False, test_converge=False   1.18145    1.15179    1.2054     1.16411    1.1976\r\nsimple loop, num_batched_iter=20, back_prop=False, test_converge=True   0.0664629  0.0633538  0.0774522  0.0636203  0.0729571\r\nsimple loop, num_batched_iter=20, back_prop=False, test_converge=False  0.249716   0.238131   0.261069   0.241182   0.259239\r\n```\r\nHere are the results on the version just before the issue appears:\r\n```\r\n1.13.0-dev20190201\r\nBenchmarking simple_loop_case...\r\nname                                                                         mean        min        max     q=0.05     q=0.95\r\n----------------------------------------------------------------------  ---------  ---------  ---------  ---------  ---------\r\nsimple loop, num_batched_iter=1, back_prop=False, test_converge=True    0.519208   0.483462   0.570542   0.487508   0.569501\r\nsimple loop, num_batched_iter=1, back_prop=False, test_converge=False   1.21199    1.18047    1.24812    1.18563    1.23686\r\nsimple loop, num_batched_iter=20, back_prop=False, test_converge=True   0.0483549  0.0455515  0.0589228  0.0463824  0.0505414\r\nsimple loop, num_batched_iter=20, back_prop=False, test_converge=False  0.175403   0.168438   0.192948   0.169144   0.18713\r\n```\r\n\r\n**Code to reproduce the issue**\r\nhttps://gist.github.com/gehring/4e7bd9b6f0c5d73c545777236fc507d0\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25598", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25598/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25598/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25598/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25598", "id": 407910720, "node_id": "MDU6SXNzdWU0MDc5MTA3MjA=", "number": 25598, "title": "tf_upgrade_v2 upgrade script should do absl-py conversions", "user": {"login": "jaingaurav", "id": 84372, "node_id": "MDQ6VXNlcjg0Mzcy", "avatar_url": "https://avatars1.githubusercontent.com/u/84372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaingaurav", "html_url": "https://github.com/jaingaurav", "followers_url": "https://api.github.com/users/jaingaurav/followers", "following_url": "https://api.github.com/users/jaingaurav/following{/other_user}", "gists_url": "https://api.github.com/users/jaingaurav/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaingaurav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaingaurav/subscriptions", "organizations_url": "https://api.github.com/users/jaingaurav/orgs", "repos_url": "https://api.github.com/users/jaingaurav/repos", "events_url": "https://api.github.com/users/jaingaurav/events{/privacy}", "received_events_url": "https://api.github.com/users/jaingaurav/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tomerk", "id": 676357, "node_id": "MDQ6VXNlcjY3NjM1Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/676357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomerk", "html_url": "https://github.com/tomerk", "followers_url": "https://api.github.com/users/tomerk/followers", "following_url": "https://api.github.com/users/tomerk/following{/other_user}", "gists_url": "https://api.github.com/users/tomerk/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomerk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomerk/subscriptions", "organizations_url": "https://api.github.com/users/tomerk/orgs", "repos_url": "https://api.github.com/users/tomerk/repos", "events_url": "https://api.github.com/users/tomerk/events{/privacy}", "received_events_url": "https://api.github.com/users/tomerk/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tomerk", "id": 676357, "node_id": "MDQ6VXNlcjY3NjM1Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/676357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomerk", "html_url": "https://github.com/tomerk", "followers_url": "https://api.github.com/users/tomerk/followers", "following_url": "https://api.github.com/users/tomerk/following{/other_user}", "gists_url": "https://api.github.com/users/tomerk/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomerk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomerk/subscriptions", "organizations_url": "https://api.github.com/users/tomerk/orgs", "repos_url": "https://api.github.com/users/tomerk/repos", "events_url": "https://api.github.com/users/tomerk/events{/privacy}", "received_events_url": "https://api.github.com/users/tomerk/received_events", "type": "User", "site_admin": false}, {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-07T21:43:27Z", "updated_at": "2019-05-17T22:03:25Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "Currently the tf_upgrade_v2 upgrade script changes uses of tf.app, tf.flags & tf.logging to tf.compat.v1.*. It seems that is would be more elegant for us to simply add the necessary absl-py imports and modify the code to use those instead."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25592", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25592/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25592/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25592/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25592", "id": 407855375, "node_id": "MDU6SXNzdWU0MDc4NTUzNzU=", "number": 25592, "title": "tf.contrib.summary.image() fails silently and inconsistently", "user": {"login": "jpatts", "id": 14956156, "node_id": "MDQ6VXNlcjE0OTU2MTU2", "avatar_url": "https://avatars0.githubusercontent.com/u/14956156?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jpatts", "html_url": "https://github.com/jpatts", "followers_url": "https://api.github.com/users/jpatts/followers", "following_url": "https://api.github.com/users/jpatts/following{/other_user}", "gists_url": "https://api.github.com/users/jpatts/gists{/gist_id}", "starred_url": "https://api.github.com/users/jpatts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jpatts/subscriptions", "organizations_url": "https://api.github.com/users/jpatts/orgs", "repos_url": "https://api.github.com/users/jpatts/repos", "events_url": "https://api.github.com/users/jpatts/events{/privacy}", "received_events_url": "https://api.github.com/users/jpatts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "nfelt", "id": 710113, "node_id": "MDQ6VXNlcjcxMDExMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/710113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nfelt", "html_url": "https://github.com/nfelt", "followers_url": "https://api.github.com/users/nfelt/followers", "following_url": "https://api.github.com/users/nfelt/following{/other_user}", "gists_url": "https://api.github.com/users/nfelt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nfelt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nfelt/subscriptions", "organizations_url": "https://api.github.com/users/nfelt/orgs", "repos_url": "https://api.github.com/users/nfelt/repos", "events_url": "https://api.github.com/users/nfelt/events{/privacy}", "received_events_url": "https://api.github.com/users/nfelt/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nfelt", "id": 710113, "node_id": "MDQ6VXNlcjcxMDExMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/710113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nfelt", "html_url": "https://github.com/nfelt", "followers_url": "https://api.github.com/users/nfelt/followers", "following_url": "https://api.github.com/users/nfelt/following{/other_user}", "gists_url": "https://api.github.com/users/nfelt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nfelt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nfelt/subscriptions", "organizations_url": "https://api.github.com/users/nfelt/orgs", "repos_url": "https://api.github.com/users/nfelt/repos", "events_url": "https://api.github.com/users/nfelt/events{/privacy}", "received_events_url": "https://api.github.com/users/nfelt/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 16, "created_at": "2019-02-07T19:16:39Z", "updated_at": "2019-02-15T07:06:01Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n\r\n* Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n  No\r\n* OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n  Ubuntu 18.04\r\n* Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n  No\r\n* TensorFlow installed from (source or binary):\r\n  Source\r\n* TensorFlow version (use command below):\r\n  b'v1.12.0-5845-g764109a352' 1.12.0\r\n* Python version:\r\n  3.6.7\r\n* Bazel version (if compiling from source):\r\n  Invocation ID: 42251854-036f-415c-8a52-76aac8520ea0\r\n  Build label: 0.21.0\r\n  Build time: Wed Dec 19 12:58:44 2018 (1545224324)\r\n* GCC/Compiler version (if compiling from source):\r\n  gcc (Ubuntu 7.3.0-27ubuntu1~18.04) 7.3.0\r\n* CUDA/cuDNN version:\r\n  Cuda compilation tools, release 10.0, V10.0.130\r\n* GPU model and memory:\r\n  GTX 1060 Max Q, 6gb VRAM\r\n\r\n**Describe the current behavior**\r\nI am running into a very weird problem where sometimes images will be logged in tensorboard / the event file, but most of the time they are not. \r\n\r\nThe issue with this is that I can't get consistent behaviour. One time I will run it and it will log normally, and then without changing any code, the next time it won't. And it is really hard to find out anything when `tensorboard --inspect` shows nothing under -image either.\r\n\r\nI should mention that the input data is not always the same, although it is always taken from the same state space (2D game environment with finite number of possible states).\r\n\r\n**Describe the expected behavior**\r\nIf it was not able to log my images, the function should at the very least provide some information to the user as to why it was not able to do so. \r\n\r\n**Code to reproduce the issue**\r\nThis is not possible, as I can not consistently reproduce it myself. It is seemingly completely random, and provides no log, error or warning information.\r\n\r\n**Other info / logs**\r\nAs stated above, there are no logs of any sort."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25590", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25590/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25590/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25590/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25590", "id": 407838971, "node_id": "MDU6SXNzdWU0MDc4Mzg5NzE=", "number": 25590, "title": "Build Tensorflow version that detects CPU instruction set at runtime and lights-up/down", "user": {"login": "ericstj", "id": 8918108, "node_id": "MDQ6VXNlcjg5MTgxMDg=", "avatar_url": "https://avatars3.githubusercontent.com/u/8918108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ericstj", "html_url": "https://github.com/ericstj", "followers_url": "https://api.github.com/users/ericstj/followers", "following_url": "https://api.github.com/users/ericstj/following{/other_user}", "gists_url": "https://api.github.com/users/ericstj/gists{/gist_id}", "starred_url": "https://api.github.com/users/ericstj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ericstj/subscriptions", "organizations_url": "https://api.github.com/users/ericstj/orgs", "repos_url": "https://api.github.com/users/ericstj/repos", "events_url": "https://api.github.com/users/ericstj/events{/privacy}", "received_events_url": "https://api.github.com/users/ericstj/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-02-07T18:35:19Z", "updated_at": "2019-05-10T23:30:03Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 1.12.0 CPU\r\n\r\n**Describe the feature and the current behavior/state.**\r\nCurrently Tensorflow cross-compiles for different instruction sets and will warn if the CPU supports instructions that the TF build does not use, and fail to load if the CPU does not support an instruction set that the TF build uses.  This makes it impossible to build an application that runs on a variety of hardware and ensure that it achieves optimal results for that hardware (or even runs at all).\r\n\r\nI understand that TF supports cross-compilation and developers can build their own library that works best for their hardware, but this doesn't solve the case where an application developer wants to ship an application that uses TF and runs on a variety of hardware.\r\n\r\nI understand that having multiple codepaths with runtime light-up could increase the size of TF, that could be dealt with by making this a separate flavor/configuration of TF, eg: \"portable\" build, and that could be published as a binary zip/tarball along side the current builds.\r\n\r\n**Will this change the current api? How?**\r\nNo\r\n\r\n**Who will benefit with this feature?**\r\nApplications and libraries redistributing tensor flow binaries to run on a variety of hardware.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25580", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25580/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25580/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25580/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25580", "id": 407597249, "node_id": "MDU6SXNzdWU0MDc1OTcyNDk=", "number": 25580, "title": "Edit Distance Matrix for CTC", "user": {"login": "vidursatija", "id": 3338684, "node_id": "MDQ6VXNlcjMzMzg2ODQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/3338684?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vidursatija", "html_url": "https://github.com/vidursatija", "followers_url": "https://api.github.com/users/vidursatija/followers", "following_url": "https://api.github.com/users/vidursatija/following{/other_user}", "gists_url": "https://api.github.com/users/vidursatija/gists{/gist_id}", "starred_url": "https://api.github.com/users/vidursatija/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vidursatija/subscriptions", "organizations_url": "https://api.github.com/users/vidursatija/orgs", "repos_url": "https://api.github.com/users/vidursatija/repos", "events_url": "https://api.github.com/users/vidursatija/events{/privacy}", "received_events_url": "https://api.github.com/users/vidursatija/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-07T09:00:58Z", "updated_at": "2019-02-07T21:57:02Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.12.2\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nThe input will be labels and the predicted output(from ctc greedy/beam decoder, SparseTensor). It will calculate the following 4 things:\r\n1. The edit distance between the output and the ground truth\r\n2. Substitution Matrix: It will store all the entries where a value was substituted in the output to reach the ground truth. Shape = [n_symbols, n_symbols]. Like the confusion matrix\r\n3. Insertion Matrix: It will store all the insertions to be made in the output to reach the grond truth. Shape = [n_symbols]\r\n4. Deletion Matrix: It will store all the deletions to be made in the output to reach the grond truth. Shape = [n_symbols]\r\n\r\n**Will this change the current api? How?**\r\n\r\n**Who will benefit with this feature?**\r\nThe target audience is everyone who uses edit distance(word error rate, letter error rate) as a metric and wants to know where the model is failing. The 3 matrices will be quite helpful to debug errors in the output. \r\n\r\n**Any Other info.**\r\nI'm willing to contribute. I can write it well in Python, C/C++. I want ideas from people and a little help in writing the tensorflow op"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25579", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25579/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25579/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25579/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25579", "id": 407595071, "node_id": "MDU6SXNzdWU0MDc1OTUwNzE=", "number": 25579, "title": "Linear alpha shape does not match the number of input channels.Node number 9 (GpuDelegate) failed to prepare.", "user": {"login": "ksekine", "id": 34914284, "node_id": "MDQ6VXNlcjM0OTE0Mjg0", "avatar_url": "https://avatars1.githubusercontent.com/u/34914284?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ksekine", "html_url": "https://github.com/ksekine", "followers_url": "https://api.github.com/users/ksekine/followers", "following_url": "https://api.github.com/users/ksekine/following{/other_user}", "gists_url": "https://api.github.com/users/ksekine/gists{/gist_id}", "starred_url": "https://api.github.com/users/ksekine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ksekine/subscriptions", "organizations_url": "https://api.github.com/users/ksekine/orgs", "repos_url": "https://api.github.com/users/ksekine/repos", "events_url": "https://api.github.com/users/ksekine/events{/privacy}", "received_events_url": "https://api.github.com/users/ksekine/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-02-07T08:54:29Z", "updated_at": "2019-02-08T21:19:15Z", "closed_at": null, "author_association": "NONE", "body": "Dear TensorFlow developer,\r\n\r\nI implemented my custom model in my app. And I tried to set GPU delegate.  \r\nBut if I instantiate `Interpreter` with GPU delegate option, the following error occurs.  \r\n```\r\nLinear alpha shape does not match the number of input channels.Node number 9 (GpuDelegate) failed to prepare.\r\n```\r\nWhat does this error message suppose to mean?  \r\nOr is there anything I need to be careful on TFLite converting?  \r\nAnything would be helpful.  \r\nThanks!  \r\n\r\nThe model I used is here.\r\n[classify.tflite.zip](https://github.com/tensorflow/tensorflow/files/2839976/classify.tflite.zip)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25578", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25578/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25578/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25578/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25578", "id": 407575876, "node_id": "MDU6SXNzdWU0MDc1NzU4NzY=", "number": 25578, "title": "CancelledError: Loop execution was cancelled", "user": {"login": "anshkumar", "id": 8944361, "node_id": "MDQ6VXNlcjg5NDQzNjE=", "avatar_url": "https://avatars2.githubusercontent.com/u/8944361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anshkumar", "html_url": "https://github.com/anshkumar", "followers_url": "https://api.github.com/users/anshkumar/followers", "following_url": "https://api.github.com/users/anshkumar/following{/other_user}", "gists_url": "https://api.github.com/users/anshkumar/gists{/gist_id}", "starred_url": "https://api.github.com/users/anshkumar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anshkumar/subscriptions", "organizations_url": "https://api.github.com/users/anshkumar/orgs", "repos_url": "https://api.github.com/users/anshkumar/repos", "events_url": "https://api.github.com/users/anshkumar/events{/privacy}", "received_events_url": "https://api.github.com/users/anshkumar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 15, "created_at": "2019-02-07T07:46:36Z", "updated_at": "2019-02-19T19:14:19Z", "closed_at": null, "author_association": "NONE", "body": "I was doing some regression analysis using google colabs and until 2 days back everything was working fine but suddenly I'm getting following error. I din't know why the training is getting stopped in the middle. On stackoverflow I came to know that tensorflow was updated from 1.12 to 1.13.0rc0. The issue started the moment the tensorflow was updated. \r\n\r\nHere is the link to my [notebook](https://colab.research.google.com/drive/13LuWmVIjza-lfxuOyfWAEf_pJjtvAMEh) on colabs.\r\n\r\nFollowing is the output from training:\r\n\r\n```\r\n SA1 \r\n\r\n\r\nFold:  1\r\n\r\n\r\n\r\nWARNING:tensorflow:From /usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/op_def_library.py:263: colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nColocations handled automatically by placer.\r\nWARNING:tensorflow:From <ipython-input-8-001ee577e90b>:225: DatasetV1.make_initializable_iterator (from tensorflow.python.data.ops.dataset_ops) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse `for ... in dataset:` to iterate over a dataset. If using `tf.estimator`, return the `Dataset` object directly from your input function. As a last resort, you can use `tf.compat.v1.data.make_initializable_iterator(dataset)`.\r\nWARNING:tensorflow:From <ipython-input-9-1bd488b4dd9a>:239: calling dropout (from tensorflow.python.ops.nn_ops) with keep_prob is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nPlease use `rate` instead of `keep_prob`. Rate should be set to `rate = 1 - keep_prob`.\r\nWARNING:tensorflow:From <ipython-input-9-1bd488b4dd9a>:348: dense (from tensorflow.python.layers.core) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse keras.layers.dense instead.\r\nWARNING:tensorflow:From <ipython-input-9-1bd488b4dd9a>:161: to_float (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse tf.cast instead.\r\nWARNING:tensorflow:From /usr/local/lib/python3.6/dist-packages/tensorflow/python/training/saver.py:1266: checkpoint_exists (from tensorflow.python.training.checkpoint_management) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse standard file APIs to check for files with this prefix.\r\nINFO:tensorflow:Restoring parameters from data/vars/SA1/feeder.cpt\r\nTraining the model with He ...\r\n0 MAPE: 11442.98324584961\r\n100 MAPE: 1032.3982238769531\r\n200 MAPE: 460.38122177124023\r\n300 MAPE: 190.61466455459595\r\n400 MAPE: 96.63236141204834\r\n500 MAPE: 59.168386459350586\r\n600 MAPE: 41.031333804130554\r\n700 MAPE: 29.591849446296692\r\n800 MAPE: 22.207358479499817\r\n900 MAPE: 19.93158310651779\r\n1000 MAPE: 17.7777960896492\r\n1100 MAPE: 16.45900011062622\r\n1200 MAPE: 16.250891983509064\r\n1300 MAPE: 14.98890072107315\r\n1400 MAPE: 14.976367354393005\r\n1500 MAPE: 14.184540510177612\r\n1600 MAPE: 13.81748765707016\r\n1700 MAPE: 14.370763301849365\r\n1800 MAPE: 13.738515973091125\r\n1900 MAPE: 13.814045488834381\r\n2000 MAPE: 13.300719857215881\r\n2100 MAPE: 13.28342854976654\r\n2200 MAPE: 13.087129592895508\r\n2300 MAPE: 13.045386970043182\r\n2400 MAPE: 12.72062063217163\r\n2500 MAPE: 12.522627413272858\r\n2600 MAPE: 12.2012197971344\r\n2700 MAPE: 12.064149230718613\r\n2800 MAPE: 11.975772678852081\r\n2900 MAPE: 11.860555410385132\r\n3000 MAPE: 11.887001246213913\r\n3100 MAPE: 11.541987955570221\r\n3200 MAPE: 11.460774391889572\r\n3300 MAPE: 11.266357451677322\r\n3400 MAPE: 11.597257852554321\r\n3500 MAPE: 11.223434656858444\r\n3600 MAPE: 11.532413214445114\r\n3700 MAPE: 10.872676968574524\r\n3800 MAPE: 11.064480245113373\r\n3900 MAPE: 11.555147916078568\r\n4000 MAPE: 11.46700382232666\r\n4100 MAPE: 10.984917730093002\r\n4200 MAPE: 10.663384199142456\r\n4300 MAPE: 11.119940131902695\r\n4400 MAPE: 10.703090578317642\r\n4500 MAPE: 10.289034992456436\r\n4600 MAPE: 9.894699603319168\r\n\r\n---------------------------------------------------------------------------\r\n\r\nCancelledError                            Traceback (most recent call last)\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py in _do_call(self, fn, *args)\r\n   1333     try:\r\n-> 1334       return fn(*args)\r\n   1335     except errors.OpError as e:\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py in _run_fn(feed_dict, fetch_list, target_list, options, run_metadata)\r\n   1318       return self._call_tf_sessionrun(\r\n-> 1319           options, feed_dict, fetch_list, target_list, run_metadata)\r\n   1320 \r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py in _call_tf_sessionrun(self, options, feed_dict, fetch_list, target_list, run_metadata)\r\n   1406         self._session, options, feed_dict, fetch_list, target_list,\r\n-> 1407         run_metadata)\r\n   1408 \r\n\r\nCancelledError: Loop execution was cancelled.\r\n\t [[{{node while/LoopCond}}]]\r\n\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nCancelledError                            Traceback (most recent call last)\r\n\r\n<ipython-input-11-86884b56c50d> in <module>()\r\n     65                 while True:\r\n     66                   try:\r\n---> 67                     _, error = sess.run([train_model.train_op, train_model.mape])\r\n     68                   except tf.errors.OutOfRangeError:\r\n     69                     break\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py in run(self, fetches, feed_dict, options, run_metadata)\r\n    927     try:\r\n    928       result = self._run(None, fetches, feed_dict, options_ptr,\r\n--> 929                          run_metadata_ptr)\r\n    930       if run_metadata:\r\n    931         proto_data = tf_session.TF_GetBuffer(run_metadata_ptr)\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py in _run(self, handle, fetches, feed_dict, options, run_metadata)\r\n   1150     if final_fetches or final_targets or (handle and feed_dict_tensor):\r\n   1151       results = self._do_run(handle, final_targets, final_fetches,\r\n-> 1152                              feed_dict_tensor, options, run_metadata)\r\n   1153     else:\r\n   1154       results = []\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py in _do_run(self, handle, target_list, fetch_list, feed_dict, options, run_metadata)\r\n   1326     if handle is None:\r\n   1327       return self._do_call(_run_fn, feeds, fetches, targets, options,\r\n-> 1328                            run_metadata)\r\n   1329     else:\r\n   1330       return self._do_call(_prun_fn, handle, feeds, fetches)\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py in _do_call(self, fn, *args)\r\n   1346           pass\r\n   1347       message = error_interpolation.interpolate(message, self._graph)\r\n-> 1348       raise type(e)(node_def, op, message)\r\n   1349 \r\n   1350   def _extend_graph(self):\r\n\r\nCancelledError: Loop execution was cancelled.\r\n\t [[node while/LoopCond (defined at <ipython-input-9-1bd488b4dd9a>:383) ]]\r\n\r\nCaused by op 'while/LoopCond', defined at:\r\n  File \"/usr/lib/python3.6/runpy.py\", line 193, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/usr/lib/python3.6/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/usr/local/lib/python3.6/dist-packages/ipykernel_launcher.py\", line 16, in <module>\r\n    app.launch_new_instance()\r\n  File \"/usr/local/lib/python3.6/dist-packages/traitlets/config/application.py\", line 658, in launch_instance\r\n    app.start()\r\n  File \"/usr/local/lib/python3.6/dist-packages/ipykernel/kernelapp.py\", line 477, in start\r\n    ioloop.IOLoop.instance().start()\r\n  File \"/usr/local/lib/python3.6/dist-packages/tornado/ioloop.py\", line 888, in start\r\n    handler_func(fd_obj, events)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tornado/stack_context.py\", line 277, in null_wrapper\r\n    return fn(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/zmq/eventloop/zmqstream.py\", line 450, in _handle_events\r\n    self._handle_recv()\r\n  File \"/usr/local/lib/python3.6/dist-packages/zmq/eventloop/zmqstream.py\", line 480, in _handle_recv\r\n    self._run_callback(callback, msg)\r\n  File \"/usr/local/lib/python3.6/dist-packages/zmq/eventloop/zmqstream.py\", line 432, in _run_callback\r\n    callback(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tornado/stack_context.py\", line 277, in null_wrapper\r\n    return fn(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/ipykernel/kernelbase.py\", line 283, in dispatcher\r\n    return self.dispatch_shell(stream, msg)\r\n  File \"/usr/local/lib/python3.6/dist-packages/ipykernel/kernelbase.py\", line 235, in dispatch_shell\r\n    handler(stream, idents, msg)\r\n  File \"/usr/local/lib/python3.6/dist-packages/ipykernel/kernelbase.py\", line 399, in execute_request\r\n    user_expressions, allow_stdin)\r\n  File \"/usr/local/lib/python3.6/dist-packages/ipykernel/ipkernel.py\", line 196, in do_execute\r\n    res = shell.run_cell(code, store_history=store_history, silent=silent)\r\n  File \"/usr/local/lib/python3.6/dist-packages/ipykernel/zmqshell.py\", line 533, in run_cell\r\n    return super(ZMQInteractiveShell, self).run_cell(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/IPython/core/interactiveshell.py\", line 2718, in run_cell\r\n    interactivity=interactivity, compiler=compiler, result=result)\r\n  File \"/usr/local/lib/python3.6/dist-packages/IPython/core/interactiveshell.py\", line 2822, in run_ast_nodes\r\n    if self.run_code(code, result):\r\n  File \"/usr/local/lib/python3.6/dist-packages/IPython/core/interactiveshell.py\", line 2882, in run_code\r\n    exec(code_obj, self.user_global_ns, self.user_ns)\r\n  File \"<ipython-input-11-86884b56c50d>\", line 59, in <module>\r\n    asgd_decay=None)\r\n  File \"<ipython-input-9-1bd488b4dd9a>\", line 70, in __init__\r\n    inp.y_feature, inp.x_feature[:, -1, 0], init)\r\n  File \"<ipython-input-9-1bd488b4dd9a>\", line 383, in decoder\r\n    _, _, _, targets_ta, outputs_ta = tf.while_loop(cond_fn, loop_fn, loop_init)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 3556, in while_loop\r\n    return_same_structure)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 3087, in BuildLoop\r\n    pred, body, original_loop_vars, loop_vars, shape_invariants)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/control_flow_ops.py\", line 3008, in _BuildLoop\r\n    self._pivot = loop_cond(c, name=\"LoopCond\")\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/ops/gen_control_flow_ops.py\", line 339, in loop_cond\r\n    \"LoopCond\", input=input, name=name)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/op_def_library.py\", line 788, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/util/deprecation.py\", line 507, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/ops.py\", line 3300, in create_op\r\n    op_def=op_def)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/framework/ops.py\", line 1801, in __init__\r\n    self._traceback = tf_stack.extract_stack()\r\n\r\nCancelledError (see above for traceback): Loop execution was cancelled.\r\n\t [[node while/LoopCond (defined at <ipython-input-9-1bd488b4dd9a>:383) ]]\r\n\r\n\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25576", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25576/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25576/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25576/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25576", "id": 407557693, "node_id": "MDU6SXNzdWU0MDc1NTc2OTM=", "number": 25576, "title": "error while loading shared libraries: libprotobuf.so.17: cannot open shared object file: No such file or directory", "user": {"login": "sathyamoorthyrr", "id": 12745471, "node_id": "MDQ6VXNlcjEyNzQ1NDcx", "avatar_url": "https://avatars0.githubusercontent.com/u/12745471?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sathyamoorthyrr", "html_url": "https://github.com/sathyamoorthyrr", "followers_url": "https://api.github.com/users/sathyamoorthyrr/followers", "following_url": "https://api.github.com/users/sathyamoorthyrr/following{/other_user}", "gists_url": "https://api.github.com/users/sathyamoorthyrr/gists{/gist_id}", "starred_url": "https://api.github.com/users/sathyamoorthyrr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sathyamoorthyrr/subscriptions", "organizations_url": "https://api.github.com/users/sathyamoorthyrr/orgs", "repos_url": "https://api.github.com/users/sathyamoorthyrr/repos", "events_url": "https://api.github.com/users/sathyamoorthyrr/events{/privacy}", "received_events_url": "https://api.github.com/users/sathyamoorthyrr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-02-07T06:22:39Z", "updated_at": "2019-03-14T12:31:32Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): [source](https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/makefile)\r\n- TensorFlow version: 1.12\r\n- Python version: 3.6\r\n- Installed using virtualenv? pip? conda?: No\r\n- Bazel version (if compiling from source): Not used Bazel. Built static library\r\n- GCC/Compiler version (if compiling from source): 7.3.0\r\n- CUDA/cuDNN version: No\r\n- GPU model and memory: No GPU. RAM-8GB\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nI followed the exact steps [here](https://github.com/tensorflow/tensorflow/tree/master/tensorflow/contrib/makefile)\r\n\r\nUpon running benchmark file,\r\n`tensorflow/contrib/makefile/gen/bin/benchmark \\\r\n --graph=$HOME/graphs/inception/tensorflow_inception_graph.pb`\r\n\r\nI get the following error,\r\n> error while loading shared libraries: libprotobuf.so.17: cannot open shared object file: No such file or directory\r\n\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25568", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25568/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25568/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25568/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25568", "id": 407528784, "node_id": "MDU6SXNzdWU0MDc1Mjg3ODQ=", "number": 25568, "title": "Bug in CrossShardOptimizer for Windows running with TPU", "user": {"login": "leedtan", "id": 952308, "node_id": "MDQ6VXNlcjk1MjMwOA==", "avatar_url": "https://avatars3.githubusercontent.com/u/952308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leedtan", "html_url": "https://github.com/leedtan", "followers_url": "https://api.github.com/users/leedtan/followers", "following_url": "https://api.github.com/users/leedtan/following{/other_user}", "gists_url": "https://api.github.com/users/leedtan/gists{/gist_id}", "starred_url": "https://api.github.com/users/leedtan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leedtan/subscriptions", "organizations_url": "https://api.github.com/users/leedtan/orgs", "repos_url": "https://api.github.com/users/leedtan/repos", "events_url": "https://api.github.com/users/leedtan/events{/privacy}", "received_events_url": "https://api.github.com/users/leedtan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tatatodd", "id": 5453737, "node_id": "MDQ6VXNlcjU0NTM3Mzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/5453737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatatodd", "html_url": "https://github.com/tatatodd", "followers_url": "https://api.github.com/users/tatatodd/followers", "following_url": "https://api.github.com/users/tatatodd/following{/other_user}", "gists_url": "https://api.github.com/users/tatatodd/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatatodd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatatodd/subscriptions", "organizations_url": "https://api.github.com/users/tatatodd/orgs", "repos_url": "https://api.github.com/users/tatatodd/repos", "events_url": "https://api.github.com/users/tatatodd/events{/privacy}", "received_events_url": "https://api.github.com/users/tatatodd/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tatatodd", "id": 5453737, "node_id": "MDQ6VXNlcjU0NTM3Mzc=", "avatar_url": "https://avatars3.githubusercontent.com/u/5453737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatatodd", "html_url": "https://github.com/tatatodd", "followers_url": "https://api.github.com/users/tatatodd/followers", "following_url": "https://api.github.com/users/tatatodd/following{/other_user}", "gists_url": "https://api.github.com/users/tatatodd/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatatodd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatatodd/subscriptions", "organizations_url": "https://api.github.com/users/tatatodd/orgs", "repos_url": "https://api.github.com/users/tatatodd/repos", "events_url": "https://api.github.com/users/tatatodd/events{/privacy}", "received_events_url": "https://api.github.com/users/tatatodd/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-07T03:35:25Z", "updated_at": "2019-02-15T00:48:21Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n\r\n* Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n* OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows server 2012\r\n* Tensorflow installed from (source or binary): pip\r\n* Tensorflow version (use command below): tensorflow-gpu 1.12.0 \r\n* Python version: 3.6.6\r\n* CUDA/cuDNN version: 9.0  V9.0.176\r\n* GPU model and memory: Tesla Volta V100\r\n\r\nUsing tensorflow 1.12.0 (also tried with 1.10.0 on a windows OS running a Tesla V100 TPU, I was not able to optimize using the CrossShardOptimizer. I expected to define the optimization function so I could optimize a network (same as using an adam optimizer). However, when I wrap an adam optimizer in a crossshardoptimizer, I get an error when I call minimize or apply gradients.\r\n\r\nThe following is very simple code that illustrates the bug.\r\n\r\nx = tf.placeholder(tf.float32, shape=(None, 32))\r\ny = tf.layers.dense(x, 5)\r\nyhat = tf.ones((20, 5))\r\nloss = tf.reduce_mean(tf.square(y - yhat))\r\n\r\nopt = tf.contrib.tpu.CrossShardOptimizer(tf.train.AdamOptimizer()).minimize(loss)\r\n\r\nBellow is the error message ( I tried to debug it myself simulating the Linux code, and that explanation is below).\r\n\r\nAttributeError Traceback (most recent call last)\r\nin \r\n4 loss = tf.reduce_mean(tf.square(y - yhat))\r\n5\r\n----> 6 opt = tf.contrib.tpu.CrossShardOptimizer(tf.train.AdamOptimizer()).minimize(loss)\r\n\r\nD:\\Anaconda3\\envs\\gq\\lib\\site-packages\\tensorflow\\python\\training\\optimizer.py in minimize(self, loss, global_step, var_list, gate_gradients, aggregation_method, colocate_gradients_with_ops, name, grad_loss)\r\n408\r\n409 return self.apply_gradients(grads_and_vars, global_step=global_step,\r\n--> 410 name=name)\r\n411\r\n412 def compute_gradients(self, loss, var_list=None,\r\n\r\nD:\\Anaconda3\\envs\\gq\\lib\\site-packages\\tensorflow\\contrib\\tpu\\python\\tpu\\tpu_optimizer.py in apply_gradients(self, grads_and_vars, global_step, name)\r\n167 else:\r\n168 with ops.colocate_with(grad):\r\n--> 169 summed_grads_and_vars.append((tpu_ops.cross_replica_sum(\r\n170 grad, self._group_assignment), var))\r\n171 return self._opt.apply_gradients(summed_grads_and_vars, global_step, name)\r\n\r\nAttributeError: module 'tensorflow.contrib.tpu.python.ops.tpu_ops' has no attribute 'cross_replica_sum'\r\n\r\nTrying to build a workaround, within tpu_ops.py I found that most of the code was only defined for linux OS, so I tried to just define the functions I needed and run the imports I needed, which I believed to be:\r\n\r\nfrom tensorflow.contrib.tpu.ops import gen_tpu_ops\r\nfrom tensorflow.contrib.tpu.ops.gen_tpu_ops import *\r\n\r\n```\r\nfrom tensorflow.contrib.util import loader\r\nfrom tensorflow.python.platform import resource_loader\r\n\r\ndef _create_default_group_assignment():\r\n    num_shards = tpu_function.get_tpu_context().number_of_shards\r\n    if num_shards is None:\r\n        logging.warning(\r\n            \"cross_replica_sum should be used within a tpu_shard_context, but \"\r\n            \"got unset number_of_shards. Assuming 1.\")\r\n        num_shards = 1\r\n    group_assignment = [list(range(num_shards))]\r\n    return group_assignment\r\n\r\ndef cross_replica_sum(x, group_assignment=None, name=None):\r\n    \"\"\"Sum the input tensor across replicas according to group_assignment.\r\n\r\n    Args:\r\n    x: The local tensor to the sum.\r\n    group_assignment: Optional 2d int32 lists with shape [num_groups,\r\n        num_replicas_per_group]. `group_assignment[i]` represents the replica\r\n        ids in the ith subgroup.\r\n    name: Optional op name.\r\n\r\n    Returns:\r\n    A `Tensor` which is summed across replicas.\r\n    \"\"\"\r\n    if group_assignment is None:\r\n        group_assignment = _create_default_group_assignment()\r\n\r\n    return gen_tpu_ops.cross_replica_sum(x, group_assignment, name=name)\r\n```\r\nHowever, I still received an error message that made me believe the windows version was not built correctly in the binary files:\r\n\r\n> > > x = tf.placeholder(tf.float32, shape=(None, 32))\r\n> > > y = tf.layers.dense(x, 5)\r\n> > > yhat = tf.ones((20, 5))\r\n> > > loss = tf.reduce_mean(tf.square(y - yhat))\r\n> > > opt = tf.contrib.tpu.CrossShardOptimizer(tf.train.AdamOptimizer()).minimize(loss)\r\n> > > WARNING:tensorflow:CrossShardOptimizer should be used within a tpu_shard_context, but got unset number_of_shards. Assuming 1.\r\n> > > WARNING:tensorflow:cross_replica_sum should be used within a tpu_shard_context, but got unset number_of_shards. Assuming 1.\r\n> > > Traceback (most recent call last):\r\n> > > File \"D:\\Anaconda3\\envs\\lt\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1628, in _create_c_op\r\n> > > c_op = c_api.TF_FinishOperation(op_desc)\r\n> > > tensorflow.python.framework.errors_impl.InvalidArgumentError: Op type not registered 'CrossReplicaSum' in binary running on . Make sure the Op and Kernel are registered in the binary running in this process. Note that if you are loading a saved graph which used ops from tf.contrib, accessing (e.g.) `tf.contrib.resampler` should be done before importing the graph, as contrib ops are lazily registered when the module is first accessed. while building NodeDef 'CrossReplicaSum'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\nFile \"\", line 1, in \r\nFile \"D:\\Anaconda3\\envs\\lt\\lib\\site-packages\\tensorflow\\python\\training\\optimizer.py\", line 410, in minimize\r\nname=name)\r\nFile \"D:\\Anaconda3\\envs\\lt\\lib\\site-packages\\tensorflow\\contrib\\tpu\\python\\tpu\\tpu_optimizer.py\", line 170, in apply_gradients\r\ngrad, self._group_assignment), var))\r\nFile \"D:\\Anaconda3\\envs\\lt\\lib\\site-packages\\tensorflow\\contrib\\tpu\\python\\ops\\tpu_ops.py\", line 417, in cross_replica_sum\r\nreturn gen_tpu_ops.cross_replica_sum(x, group_assignment, name=name)\r\nFile \"D:\\Anaconda3\\envs\\lt\\lib\\site-packages\\tensorflow\\contrib\\tpu\\ops\\gen_tpu_ops.py\", line 322, in cross_replica_sum\r\nname=name)\r\nFile \"D:\\Anaconda3\\envs\\lt\\lib\\site-packages\\tensorflow\\python\\framework\\op_def_library.py\", line 787, in _apply_op_helper\r\nop_def=op_def)\r\nFile \"D:\\Anaconda3\\envs\\lt\\lib\\site-packages\\tensorflow\\python\\util\\deprecation.py\", line 488, in new_func\r\nreturn func(*args, **kwargs)\r\nFile \"D:\\Anaconda3\\envs\\lt\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 3274, in create_op\r\nop_def=op_def)\r\nFile \"D:\\Anaconda3\\envs\\lt\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1792, in **init**\r\ncontrol_input_ops)\r\nFile \"D:\\Anaconda3\\envs\\lt\\lib\\site-packages\\tensorflow\\python\\framework\\ops.py\", line 1631, in _create_c_op\r\nraise ValueError(str(e))\r\nValueError: Op type not registered 'CrossReplicaSum' in binary running on . Make sure the Op and Kernel are registered in the binary running in this process. Note that if you are loading a saved graph which used ops from tf.contrib, accessing (e.g.) `tf.contrib.resampler` should be done before importing the graph, as contrib ops are lazily registered when the module is first accessed. while building NodeDef 'CrossReplicaSum'\r\n\r\n> > >\r\n\r\nAlso to note, rather than calling minimize, I also tried compute gradients, apply gradients, and that also crashed similarly.\r\n\r\nI hope that the tensorflow team can recommend a work around and/or work this fix into an upcoming version.\r\nThanks"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25563", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25563/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25563/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25563/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25563", "id": 407483640, "node_id": "MDU6SXNzdWU0MDc0ODM2NDA=", "number": 25563, "title": "Can LSTM be fully quantized for inference?", "user": {"login": "bkanaki", "id": 14065597, "node_id": "MDQ6VXNlcjE0MDY1NTk3", "avatar_url": "https://avatars0.githubusercontent.com/u/14065597?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bkanaki", "html_url": "https://github.com/bkanaki", "followers_url": "https://api.github.com/users/bkanaki/followers", "following_url": "https://api.github.com/users/bkanaki/following{/other_user}", "gists_url": "https://api.github.com/users/bkanaki/gists{/gist_id}", "starred_url": "https://api.github.com/users/bkanaki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bkanaki/subscriptions", "organizations_url": "https://api.github.com/users/bkanaki/orgs", "repos_url": "https://api.github.com/users/bkanaki/repos", "events_url": "https://api.github.com/users/bkanaki/events{/privacy}", "received_events_url": "https://api.github.com/users/bkanaki/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, {"login": "jianlijianli", "id": 43797323, "node_id": "MDQ6VXNlcjQzNzk3MzIz", "avatar_url": "https://avatars3.githubusercontent.com/u/43797323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jianlijianli", "html_url": "https://github.com/jianlijianli", "followers_url": "https://api.github.com/users/jianlijianli/followers", "following_url": "https://api.github.com/users/jianlijianli/following{/other_user}", "gists_url": "https://api.github.com/users/jianlijianli/gists{/gist_id}", "starred_url": "https://api.github.com/users/jianlijianli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jianlijianli/subscriptions", "organizations_url": "https://api.github.com/users/jianlijianli/orgs", "repos_url": "https://api.github.com/users/jianlijianli/repos", "events_url": "https://api.github.com/users/jianlijianli/events{/privacy}", "received_events_url": "https://api.github.com/users/jianlijianli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-02-06T23:48:21Z", "updated_at": "2019-12-23T08:36:40Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- TensorFlow installed from (source or binary): Binary\r\n- TensorFlow version (or github SHA if from source): 1.13.0-rc0\r\n\r\n**Problem Summary and Errors Encountered**\r\n\r\nI am trying to have the LSTM version from TFLite ([here](https://github.com/tensorflow/tensorflow/blob/r1.13/tensorflow/lite/experimental/examples/lstm/tflite_lstm.py)) quantized for inference through TFLite. \r\n\r\nI use `tf.contrib.quantize.create_training_graph()` for training and have added fake quant node after the input. But I think the use of `tf.unstack()` creates a problem when using the 'static_rnn()`\r\n\r\nThe model is as below:\r\n\r\n```\r\ninput_frequency_size = model_settings['dct_coefficient_count']\r\ninput_time_size = model_settings['spectrogram_length']\r\nfingerprint_4d = tf.reshape(fingerprint_input, \r\n                              [-1, input_time_size, input_frequency_size])\r\nnum_classes = model_settings['label_count']\r\nprojection_units = model_size_info[0]\r\nLSTM_units = model_size_info[1]\r\nwith tf.name_scope(\"LSTM-Layer\"):\r\n  with tf.variable_scope(\"lstm\"):\r\n    lstm_cell = TFLiteLSTMCell(num_units=LSTM_units,\r\n                                 use_peepholes=True,\r\n                                 num_proj=projection_units)\r\n    lstm_input = tf.unstack(fingerprint_4d, input_time_size, 1)\r\n    # lstm_input = tf.fake_quant_with_min_max_args(lstm_input)\r\n    _, last = tf.nn.static_rnn(cell=lstm_cell, inputs=lstm_input,\r\n                                   dtype=tf.float32)\r\n    # tf.quantization.fake_quant_with_min_max_args(last)\r\n    flow = last[-1]\r\n\r\nwith tf.name_scope(\"Output-Layer\"):\r\n  W_o = tf.get_variable('W_o', shape=[projection_units, num_classes],\r\n                          initializer=tf.contrib.layers.xavier_initializer())\r\n  b_o = tf.get_variable('b_o', shape=[num_classes],\r\n                          initializer=tf.constant_initializer(0.01))\r\n  logits = tf.add(tf.matmul(flow, W_o), b_o)\r\n```\r\n\r\nAfter training, I freeze the graph and use the following script to convert to TF lite:\r\n\r\n```\r\ngraph_def_file = \"frozen_graph.pb\"  # This is the .pb file.\r\ninput_arrays = [\"mfcc_data\"]            # This is the name of the input node\r\noutput_arrays = [\"labels_softmax\"]  # This is the name of the output node\r\n\r\n# This is the main code to call tflite converter (i.e. toco)\r\nconverter = tf.lite.TFLiteConverter.from_frozen_graph(graph_def_file, input_arrays, output_arrays)\r\n# Since fake quantization used during training, we can quantize the graph during converting\r\nconverter.inference_type = tf.lite.constants.QUANTIZED_UINT8\r\nconverter.reorder_across_fake_quant = True\r\ninput_arrays = converter.get_input_arrays()\r\nconverter.quantized_input_stats = {input_arrays[0] : (227., 1.)}  # mean, std_dev\r\ntflite_model = converter.convert()\r\nopen(\"lstm-tflite.tflite\", \"wb\").write(tflite_model)   # The resulting .tflite file.\r\n```\r\n\r\nBut this then gives error as below:\r\n```\r\nConverterError: TOCO failed. See console for info.\r\n2019-02-06 11:57:30.492529: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 1098 operators, 1429 arrays (0 quantized)\r\n2019-02-06 11:57:30.560084: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 1098 operators, 1429 arrays (0 quantized)\r\n2019-02-06 11:57:30.646273: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 573 operators, 853 arrays (1 quantized)\r\n2019-02-06 11:57:30.675022: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before pre-quantization graph transformations: 573 operators, 853 arrays (1 quantized)\r\n2019-02-06 11:57:30.686976: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After pre-quantization graph transformations pass 1: 522 operators, 802 arrays (1 quantized)\r\n2019-02-06 11:57:30.703210: F tensorflow/lite/toco/tooling_util.cc:1702] Array LSTM-Layer/lstm/unstack, which is an input to the Concatenation operator producing the output array LSTM-Layer/lstm/rnn/tf_lite_lstm_cell/concat, is lacking min/max data, which is necessary for quantization. If accuracy matters, either target a non-quantized output format, or run quantized training with your model from a floating point checkpoint to change the input graph to contain min/max information. If you don't care about accuracy, you can pass --default_ranges_min= and --default_ranges_max= for easy experimentation.\r\n```\r\n\r\nI try to add the fake quant nodes manually after the unstack as you can see in the commented code above, but this will give an error from `static_rnn` because it will not remain a sequence anymore resulting in the following error while training:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"train.py\", line 324, in <module>\r\n    tf.app.run(main=main)\r\n  File \"C:\\Users\\bhargav\\AppData\\Local\\Continuum\\miniconda3\\envs\\tf113cpu\\lib\\site-packages\\tensorflow\\python\\platform\\app.py\", line 125, in run\r\n    _sys.exit(main(argv))\r\n  File \"train.py\", line 140, in main\r\n    logits, dropout_prob = models.create_model(\r\n  File \"C:\\Users\\bhargav\\Documents\\audio\\keyword-spotting\\models.py\", line 58, in create_model\r\n    model_size_info, is_training)\r\n  File \"C:\\Users\\bhargav\\Documents\\audio\\keyword-spotting\\models.py\", line 198, in create_lstm_tflite_model\r\n    dtype=tf.float32)\r\n  File \"C:\\Users\\bhargav\\AppData\\Local\\Continuum\\miniconda3\\envs\\tf113cpu\\lib\\site-packages\\tensorflow\\python\\util\\deprecation.py\", line 324, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"C:\\Users\\bhargav\\AppData\\Local\\Continuum\\miniconda3\\envs\\tf113cpu\\lib\\site-packages\\tensorflow\\python\\ops\\rnn.py\", line 1290, in static_rnn\r\n    raise TypeError(\"inputs must be a sequence\")\r\nTypeError: inputs must be a sequence\r\n```\r\n\r\nI want to know if the full quantization of LSTM will be supported any time in near future. If GraphDef is needed, let me know."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25554", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25554/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25554/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25554/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25554", "id": 407343012, "node_id": "MDU6SXNzdWU0MDczNDMwMTI=", "number": 25554, "title": "Raspberry PI - Golang - Tensorflow - std::bad_alloc Issue", "user": {"login": "anilknayak", "id": 4894147, "node_id": "MDQ6VXNlcjQ4OTQxNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/4894147?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anilknayak", "html_url": "https://github.com/anilknayak", "followers_url": "https://api.github.com/users/anilknayak/followers", "following_url": "https://api.github.com/users/anilknayak/following{/other_user}", "gists_url": "https://api.github.com/users/anilknayak/gists{/gist_id}", "starred_url": "https://api.github.com/users/anilknayak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anilknayak/subscriptions", "organizations_url": "https://api.github.com/users/anilknayak/orgs", "repos_url": "https://api.github.com/users/anilknayak/repos", "events_url": "https://api.github.com/users/anilknayak/events{/privacy}", "received_events_url": "https://api.github.com/users/anilknayak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 1194756584, "node_id": "MDU6TGFiZWwxMTk0NzU2NTg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20raspberry%20pi", "name": "subtype: raspberry pi", "color": "b619ea", "default": false, "description": "Raspberry Pi Build/Installation Issues"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2019-02-06T17:18:47Z", "updated_at": "2019-08-02T06:34:06Z", "closed_at": null, "author_association": "NONE", "body": "@poxvoculi @penpornk @nhasabni @reedwm @shashishekhar @claynerobison @andydavis1 \r\nHi guys, I have checked some previous issues on ```bad_allocation``` and checked all the discussions and I could not reach to a conclusion how to resolve my ```bad_allocation``` issue. Below is my details for my issue with log. If I could get some insights, it will be very helpful.\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nWritten custom code for face image classification. Model accepts 224x224x3 tensor. The model has 4,253,864 parameters and model depth is 88.\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nRaspberry Pi, CPU: 1.4Ghz, 980 Mb RAM.\r\n- Programming Language\r\nGolang \r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) \r\nNo\r\n- TensorFlow installed from (source or binary):\r\nBuild from source\r\n- TensorFlow version (use command below):\r\nv1.12.0\r\n- Python version:\r\nNO\r\n- Bazel version (if compiling from source):\r\nv0.15.2\r\n- GCC/Compiler version (if compiling from source):\r\n6.3\r\n- CUDA/cuDNN version:\r\nNO\r\n- GPU model and memory:\r\nNO\r\n\r\n**Describe the current behavior**\r\nI am using GoLang enviroment to load Tensorflow model and run. My Tensorflow model is MobileNet.\r\nIt does face classification. I faced issue in memory allocation.\r\n**Describe the expected behavior**\r\nModel loading is fine and runs perfectly for 15-20 min and after that, it throws ```bad_allocation``` error and exits.\r\n**Code to reproduce the issue**\r\n1. Generate libtensorflow.so and libtensorflow_framework.so artifact for raspberry pi. \r\n2. Load tensorflow model into Golang Env. \r\n3. While model is running and after 15-20 min this happens.\r\n\r\n**Other info / logs**\r\n2019-02-06 10:41:44.057443: W tensorflow/core/framework/op_kernel.cc:1412] OP_REQUIRES failed at conv_ops.cc:470 : Resource exhausted: OOM when allocating tensor with shape[1,112,112,64] and type float on /job:localhost/replica:0/task:0/device:CPU:0 by allocator cpu\r\nE0206 10:41:44.128595    2719 classifier.go:148] Failed to classify face: OOM when allocating tensor with shape[1,112,112,64] and type float on /job:localhost/replica:0/task:0/device:CPU:0 by allocator cpu\r\n\t [[{{node mobilenet_1.00_224/conv_pw_1/convolution}}]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\n2019-02-06 10:41:44.313010: W tensorflow/core/framework/op_kernel.cc:1412] OP_REQUIRES failed at conv_ops.cc:470 : Resource exhausted: OOM when allocating tensor with shape[1,112,112,64] and type float on /job:localhost/replica:0/task:0/device:CPU:0 by allocator cpu\r\nE0206 10:41:44.314077    2719 classifier.go:148] Failed to classify face: OOM when allocating tensor with shape[1,112,112,64] and type float on /job:localhost/replica:0/task:0/device:CPU:0 by allocator cpu\r\n\t [[{{node mobilenet_1.00_224/conv_pw_1/convolution}}]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\n2019-02-06 10:41:44.409438: W tensorflow/core/framework/op_kernel.cc:1412] OP_REQUIRES failed at conv_ops.cc:470 : Resource exhausted: OOM when allocating tensor with shape[1,112,112,64] and type float on /job:localhost/replica:0/task:0/device:CPU:0 by allocator cpu\r\nE0206 10:41:44.411047    2719 classifier.go:148] Failed to classify face: OOM when allocating tensor with shape[1,112,112,64] and type float on /job:localhost/replica:0/task:0/device:CPU:0 by allocator cpu\r\n\t [[{{node mobilenet_1.00_224/conv_pw_1/convolution}}]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\n2019-02-06 10:41:44.504644: W tensorflow/core/framework/op_kernel.cc:1412] OP_REQUIRES failed at conv_ops.cc:470 : Resource exhausted: OOM when allocating tensor with shape[1,112,112,64] and type float on /job:localhost/replica:0/task:0/device:CPU:0 by allocator cpu\r\nE0206 10:41:44.505833    2719 classifier.go:148] Failed to classify face: OOM when allocating tensor with shape[1,112,112,64] and type float on /job:localhost/replica:0/task:0/device:CPU:0 by allocator cpu\r\n\t [[{{node mobilenet_1.00_224/conv_pw_1/convolution}}]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\n2019-02-06 10:41:44.601160: W tensorflow/core/framework/op_kernel.cc:1412] OP_REQUIRES failed at conv_ops.cc:470 : Resource exhausted: OOM when allocating tensor with shape[1,112,112,64] and type float on /job:localhost/replica:0/task:0/device:CPU:0 by allocator cpu\r\nE0206 10:41:44.602079    2719 classifier.go:148] Failed to classify face: OOM when allocating tensor with shape[1,112,112,64] and type float on /job:localhost/replica:0/task:0/device:CPU:0 by allocator cpu\r\n\t [[{{node mobilenet_1.00_224/conv_pw_1/convolution}}]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\nI0206 10:41:48.258835    2719 camera_input.go:69] Captured Image, Len Queue 0\r\nI0206 10:41:48.898151    2719 runner.go:85] Detection time 638.594898ms\r\n2019-02-06 10:41:48.997640: W tensorflow/core/framework/op_kernel.cc:1412] OP_REQUIRES failed at conv_ops.cc:470 : Resource exhausted: OOM when allocating tensor with shape[1,112,112,64] and type float on /job:localhost/replica:0/task:0/device:CPU:0 by allocator cpu\r\nE0206 10:41:48.999425    2719 classifier.go:148] Failed to classify face: OOM when allocating tensor with shape[1,112,112,64] and type float on /job:localhost/replica:0/task:0/device:CPU:0 by allocator cpu\r\n\t [[{{node mobilenet_1.00_224/conv_pw_1/convolution}}]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\n2019-02-06 10:41:49.100121: W tensorflow/core/framework/op_kernel.cc:1412] OP_REQUIRES failed at conv_ops.cc:470 : Resource exhausted: OOM when allocating tensor with shape[1,112,112,64] and type float on /job:localhost/replica:0/task:0/device:CPU:0 by allocator cpu\r\nE0206 10:41:49.101226    2719 classifier.go:148] Failed to classify face: OOM when allocating tensor with shape[1,112,112,64] and type float on /job:localhost/replica:0/task:0/device:CPU:0 by allocator cpu\r\n\t [[{{node mobilenet_1.00_224/conv_pw_1/convolution}}]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\n2019-02-06 10:41:49.197890: W tensorflow/core/framework/op_kernel.cc:1412] OP_REQUIRES failed at conv_ops.cc:470 : Resource exhausted: OOM when allocating tensor with shape[1,112,112,64] and type float on /job:localhost/replica:0/task:0/device:CPU:0 by allocator cpu\r\nE0206 10:41:49.199211    2719 classifier.go:148] Failed to classify face: OOM when allocating tensor with shape[1,112,112,64] and type float on /job:localhost/replica:0/task:0/device:CPU:0 by allocator cpu\r\n\t [[{{node mobilenet_1.00_224/conv_pw_1/convolution}}]]\r\nHint: If you want to see a list of allocated tensors when OOM happens, add report_tensor_allocations_upon_oom to RunOptions for current allocation info.\r\nterminate called after throwing an instance of 'std::bad_alloc'\r\n  what():  std::bad_alloc\r\nAborted\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25552", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25552/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25552/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25552/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25552", "id": 407292904, "node_id": "MDU6SXNzdWU0MDcyOTI5MDQ=", "number": 25552, "title": "RTX 2070 8GB tensorflow 1.13 build from source", "user": {"login": "timyee90", "id": 44982025, "node_id": "MDQ6VXNlcjQ0OTgyMDI1", "avatar_url": "https://avatars1.githubusercontent.com/u/44982025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/timyee90", "html_url": "https://github.com/timyee90", "followers_url": "https://api.github.com/users/timyee90/followers", "following_url": "https://api.github.com/users/timyee90/following{/other_user}", "gists_url": "https://api.github.com/users/timyee90/gists{/gist_id}", "starred_url": "https://api.github.com/users/timyee90/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/timyee90/subscriptions", "organizations_url": "https://api.github.com/users/timyee90/orgs", "repos_url": "https://api.github.com/users/timyee90/repos", "events_url": "https://api.github.com/users/timyee90/events{/privacy}", "received_events_url": "https://api.github.com/users/timyee90/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 19, "created_at": "2019-02-06T15:35:18Z", "updated_at": "2019-06-26T15:06:59Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 1.13/1.12\r\n- Python version: 3.6\r\n- Installed using virtualenv? pip? conda?: pip/conda\r\n- Bazel version (if compiling from source): 0.21.0\r\n- GCC/Compiler version (if compiling from source): Unsure\r\n- CUDA/cuDNN version: 10.0/7.4\r\n- GPU model and memory: MSI Armor RTX 2070 8GB \r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\nUnable to build 1.13 from source using bazel. bazel is properly installed using chocolatey. I get to the end of configuring my build but I cannot build. TF version 1.12 does not work properly on CUDA 10.0. on TF 1.12, training data loads into the GPU's VRAM but uses the CPU to compute.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\nOn first pass, I was able to get to configure.py in tensorflow folder and go through the configuration process. Upon finishing, I was not able to build. After a few days, I am now attempting to configure the build and I am getting an output 'Cannot find bazel. Please install bazel. I installed bazel through chocolately. Attached are the logs showing bazel install through chocolately. I also have some logs during the first attempt at building. I forget where I located the tensorflow building logs. If you can direct me, I'll happily provide those. I'm also curious as to when the 1.13 release becomes official. Thanks. \r\n\r\n\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n[chocolatey.log](https://github.com/tensorflow/tensorflow/files/2836941/chocolatey.log)\r\n[choco.summary.log](https://github.com/tensorflow/tensorflow/files/2836942/choco.summary.log)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25513", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25513/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25513/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25513/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25513", "id": 406683788, "node_id": "MDU6SXNzdWU0MDY2ODM3ODg=", "number": 25513, "title": "Custom Reader Op results in undefined symbol: _ZTIN10tensorflow8OpKernelE on library load", "user": {"login": "agnz", "id": 7109434, "node_id": "MDQ6VXNlcjcxMDk0MzQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/7109434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agnz", "html_url": "https://github.com/agnz", "followers_url": "https://api.github.com/users/agnz/followers", "following_url": "https://api.github.com/users/agnz/following{/other_user}", "gists_url": "https://api.github.com/users/agnz/gists{/gist_id}", "starred_url": "https://api.github.com/users/agnz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agnz/subscriptions", "organizations_url": "https://api.github.com/users/agnz/orgs", "repos_url": "https://api.github.com/users/agnz/repos", "events_url": "https://api.github.com/users/agnz/events{/privacy}", "received_events_url": "https://api.github.com/users/agnz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}, {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2019-02-05T09:00:29Z", "updated_at": "2019-12-06T17:04:05Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): Docker container, also tried source\r\n- TensorFlow version: 1.12.0\r\n- Python version: 2.7\r\n- Installed using virtualenv? pip? conda?: pip\r\n- Bazel version (if compiling from source): 0.18\r\n- GCC/Compiler version (if compiling from source): 5.4\r\n- CUDA/cuDNN version: 9/7\r\n- GPU model and memory: 1080ti\r\n\r\n\r\nI have a custom Reader op that inherits ReaderBase class (tensorflow/core/framework/reader_base.h). The op compiled and worked as expected under TF 1.3 and earlier.\r\n\r\nI have now upgraded to TF1.12.0. Shared library for the custom op builds successfully, but  loading it with `import tensorFlow as tf; tf.load_op_library()` fails due to missing symbols:\r\n`tensorflow.python.framework.errors_impl.NotFoundError: ./libjson_record_reader_op.so: undefined symbol: _ZTIN10tensorflow8OpKernelE`\r\n\r\nActually, at first it was reporting undefined symbol ReaderBaseE, but now reporting OpKernelE.\r\n\r\nI tried building the op in the following Docker containers with the following tags: 1.12.0, 1.12.0-devel, 1.12.0-gpu-devel.\r\n\r\nI have also built TF from source with bazel 0.18 and installed via pip (also in tensorflow/tensorflow-devel-gpu container) with the same result as above.\r\n\r\nBuilding custom op as per current instructions in the docs using g++. I tried building with g++ 5.5, 5.4, 4.8, 4.9 with the same result.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25495", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25495/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25495/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25495/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25495", "id": 406481000, "node_id": "MDU6SXNzdWU0MDY0ODEwMDA=", "number": 25495, "title": "Inference speed slows down after using graph transform tool", "user": {"login": "yoyolin", "id": 7353063, "node_id": "MDQ6VXNlcjczNTMwNjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/7353063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yoyolin", "html_url": "https://github.com/yoyolin", "followers_url": "https://api.github.com/users/yoyolin/followers", "following_url": "https://api.github.com/users/yoyolin/following{/other_user}", "gists_url": "https://api.github.com/users/yoyolin/gists{/gist_id}", "starred_url": "https://api.github.com/users/yoyolin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yoyolin/subscriptions", "organizations_url": "https://api.github.com/users/yoyolin/orgs", "repos_url": "https://api.github.com/users/yoyolin/repos", "events_url": "https://api.github.com/users/yoyolin/events{/privacy}", "received_events_url": "https://api.github.com/users/yoyolin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545273, "node_id": "MDU6TGFiZWwxMDk3NTQ1Mjcz", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:grappler", "name": "comp:grappler", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-02-04T19:25:11Z", "updated_at": "2019-12-18T02:39:41Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code: No, I used tensorflow's object detection api's officially released model `ssd-mobilenet-v1-fpn`.\r\n- OS Platform and Distribution: Linux Ubuntu 16.04\r\n- TensorFlow installed from (source or binary): built from source, with xla and mkl support, use nvcc as compiler.\r\n- TensorFlow version (use command below): r1.12.0\r\n- Python version: Python 3.6.4 |Anaconda\r\n- Bazel version (if compiling from source): 0.18.1\r\n- GCC/Compiler version (if compiling from source): 5.4.0\r\n- CUDA/cuDNN version: CUDA 9.0, cuDNN 7.4.2\r\n- GPU model and memory: 3*NVIDIA 1080Ti, \r\n\r\n**Describe the current behavior**\r\nI trained `ssd-mobilenet-v1-fpn` from tensorflow object detection api with default configurations. As its inference was pretty slow on CPU, I checked using tensorflow's profiler advise and found out the main time consumption was from batch normalization(took 140 ms in total).  Therefore, I tried to use [tensorflow's graph transform tool](https://github.com/tensorflow/tensorflow/tree/master/tensorflow/tools/graph_transforms) to make if faster.\r\n\r\nBut the inference speed actually slowed down after the graph transformation. To be specific, inference takes \r\n* 0.53 seconds for original inference graph\r\n* 0.56 seconds for optimized inference graph\r\n\r\nWhy is the case?\r\n\r\nAn additional information is that the size actually increases too: the original inference graph is 43MB and optimized inference graph is 44MB. Not sure it will be useful.\r\n\r\nHere is the code I used:\r\n```\r\nbazel-bin/tensorflow/tools/graph_transforms/transform_graph \\\r\n--in_graph=fpnssd/frozen_inference_graph.pb \\\r\n--out_graph=fpnssd/optimized_frozen_inference_graph.pb \\\r\n--inputs=\"image_tensor:0\" \\\r\n--outputs=\"detection_boxes:0,detection_scores:0,detection_classes:0,num_detections:0\" \\\r\n--transforms=\"strip_unused_nodes() fold_constants(ignore_errors=false) fold_batch_norms fold_old_batch_norms\"\r\n```\r\n\r\n\r\n**Describe the expected behavior**\r\nI expect it to be quicker with optimized graph.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nbazel-bin/tensorflow/tools/graph_transforms/transform_graph \\\r\n--in_graph=fpnssd/frozen_inference_graph.pb \\\r\n--out_graph=fpnssd/optimized_frozen_inference_graph.pb \\\r\n--inputs=\"image_tensor:0\" \\\r\n--outputs=\"detection_boxes:0,detection_scores:0,detection_classes:0,num_detections:0\" \\\r\n--transforms=\"strip_unused_nodes() fold_constants(ignore_errors=false) fold_batch_norms fold_old_batch_norms\"\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25480", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25480/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25480/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25480/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25480", "id": 406202068, "node_id": "MDU6SXNzdWU0MDYyMDIwNjg=", "number": 25480, "title": "C- How to draw bounding-box using tensorflow c_api", "user": {"login": "Ashokcharu", "id": 25767113, "node_id": "MDQ6VXNlcjI1NzY3MTEz", "avatar_url": "https://avatars2.githubusercontent.com/u/25767113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ashokcharu", "html_url": "https://github.com/Ashokcharu", "followers_url": "https://api.github.com/users/Ashokcharu/followers", "following_url": "https://api.github.com/users/Ashokcharu/following{/other_user}", "gists_url": "https://api.github.com/users/Ashokcharu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ashokcharu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ashokcharu/subscriptions", "organizations_url": "https://api.github.com/users/Ashokcharu/orgs", "repos_url": "https://api.github.com/users/Ashokcharu/repos", "events_url": "https://api.github.com/users/Ashokcharu/events{/privacy}", "received_events_url": "https://api.github.com/users/Ashokcharu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-02-04T06:53:34Z", "updated_at": "2019-07-12T19:37:04Z", "closed_at": null, "author_association": "NONE", "body": "### In python \r\nI did object detection, Its working fine. Same thing I want to do in C\r\n\r\nHere is the code to detect the object object in python\r\n\r\nCalling boxes, like following:\r\n\r\n```\r\nimage_tensor = detection_graph.get_tensor_by_name('image_tensor:0')\r\ndetection_boxes = detection_graph.get_tensor_by_name('detection_boxes:0')\r\ndetection_scores = detection_graph.get_tensor_by_name('detection_scores:0')\r\ndetection_classes = detection_graph.get_tensor_by_name('detection_classes:0')\r\nnum_detections = detection_graph.get_tensor_by_name('num_detections:0')\r\n```\r\nsimilarly for scores, and classes.\r\n\r\nThen just called them in session run.\r\n\r\n```\r\n(boxes, scores, classes, num) = sess.run(\r\n    [detection_boxes, detection_scores, detection_classes, num_detections],\r\n    feed_dict={image_tensor: image_expanded})\r\n```\r\nNow Drawing the results of the detection\r\n\r\n```\r\nvis_util.visualize_boxes_and_labels_on_image_array(\r\n    image,\r\n    np.squeeze(boxes),\r\n    np.squeeze(classes).astype(np.int32),\r\n    np.squeeze(scores),\r\n    category_index,\r\n    use_normalized_coordinates=True,\r\n    line_thickness=8,\r\n    min_score_thresh=0.80)\r\n```\r\nNow I can able to view the image and detect the object(face).\r\n\r\n`cv2.imshow('Object detector', image)`\r\n\r\nQuestion :\r\n\r\n**C language**\r\n\r\nNow my question is how can I Feed the image data's into graph and detect the object in that image as well as draw the rectangle box using C Programming.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25474", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25474/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25474/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25474/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25474", "id": 406143018, "node_id": "MDU6SXNzdWU0MDYxNDMwMTg=", "number": 25474, "title": "Core dumped bfc allocator ", "user": {"login": "kirk86", "id": 2902390, "node_id": "MDQ6VXNlcjI5MDIzOTA=", "avatar_url": "https://avatars0.githubusercontent.com/u/2902390?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kirk86", "html_url": "https://github.com/kirk86", "followers_url": "https://api.github.com/users/kirk86/followers", "following_url": "https://api.github.com/users/kirk86/following{/other_user}", "gists_url": "https://api.github.com/users/kirk86/gists{/gist_id}", "starred_url": "https://api.github.com/users/kirk86/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kirk86/subscriptions", "organizations_url": "https://api.github.com/users/kirk86/orgs", "repos_url": "https://api.github.com/users/kirk86/repos", "events_url": "https://api.github.com/users/kirk86/events{/privacy}", "received_events_url": "https://api.github.com/users/kirk86/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tatianashp", "id": 986732, "node_id": "MDQ6VXNlcjk4NjczMg==", "avatar_url": "https://avatars2.githubusercontent.com/u/986732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tatianashp", "html_url": "https://github.com/tatianashp", "followers_url": "https://api.github.com/users/tatianashp/followers", "following_url": "https://api.github.com/users/tatianashp/following{/other_user}", "gists_url": "https://api.github.com/users/tatianashp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tatianashp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tatianashp/subscriptions", "organizations_url": "https://api.github.com/users/tatianashp/orgs", "repos_url": "https://api.github.com/users/tatianashp/repos", "events_url": "https://api.github.com/users/tatianashp/events{/privacy}", "received_events_url": "https://api.github.com/users/tatianashp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2019-02-03T23:11:32Z", "updated_at": "2020-01-13T21:32:00Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (yes):\r\n- OS Platform and Distribution (Linux Ubuntu 18):\r\n- TensorFlow installed from (binary):\r\n- TensorFlow version (1.12.0):\r\n- Python version: 3.6\r\n- CUDA/cuDNN version: cuda9/ cudnn7\r\n- GPU model and memory: 1080Ti 11GB\r\n\r\n**Describe the current behavior**\r\nI get the following message during inference on mask rcnn model.\r\n```\r\nfreeMemory: 10.74GiB\r\n2019-02-03 22:26:45.730704: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1511] Adding visible gpu devices: 0\r\n2019-02-03 22:26:45.988762: I tensorflow/core/common_runtime/gpu/gpu_device.cc:982] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-02-03 22:26:45.988797: I tensorflow/core/common_runtime/gpu/gpu_device.cc:988]      0 \r\n2019-02-03 22:26:45.988803: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 0:   N \r\n2019-02-03 22:26:45.989126: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 10363 MB memory) -> physical GPU (device: 0, name: 1080Ti, pci bus id: 0000:65:00.0, compute capability: 6.1)\r\n2019-02-03 22:32:17.296211: F tensorflow/core/common_runtime/bfc_allocator.cc:380] Check failed: h != kInvalidChunkHandle \r\nAborted (core dumped)\r\n```\r\n\r\n**Describe the expected behavior**\r\nExpected behaviour would have been to run without issues.\r\n\r\n**Code to reproduce the issue**\r\n1. Download project [here](https://github.com/matterport/Mask_RCNN)\r\n2. Run inference from live video feed with batch size = 1, i.e. one image at a time.\r\n\r\n**Other info / logs**\r\nStack trace from gdb\r\n```\r\n[New Thread 0x7fff6bd33700 (LWP 25492)]\r\n[New Thread 0x7fff63532700 (LWP 25493)]\r\n[New Thread 0x7fff6b532700 (LWP 25494)]\r\n[New Thread 0x7fff6ad31700 (LWP 25495)]\r\n[New Thread 0x7fff6a530700 (LWP 25496)]\r\n[New Thread 0x7fff69d2f700 (LWP 25497)]\r\n[New Thread 0x7fff6952e700 (LWP 25498)]\r\n[New Thread 0x7fff68d2d700 (LWP 25499)]\r\n[New Thread 0x7fff63fff700 (LWP 25500)]\r\n[New Thread 0x7fff62d31700 (LWP 25501)]\r\n[New Thread 0x7fff62530700 (LWP 25502)]\r\n[New Thread 0x7fff61d2f700 (LWP 25503)]\r\n[New Thread 0x7fff6152e700 (LWP 25504)]\r\n[New Thread 0x7fff60d2d700 (LWP 25505)]\r\n[New Thread 0x7fff33fff700 (LWP 25506)]\r\n[New Thread 0x7fff337fe700 (LWP 25507)]\r\n[New Thread 0x7fff32ffd700 (LWP 25508)]\r\n[New Thread 0x7fff327fc700 (LWP 25509)]\r\n[New Thread 0x7fff31ffb700 (LWP 25512)]\r\n[New Thread 0x7fff317fa700 (LWP 25513)]\r\n[New Thread 0x7fff30ff9700 (LWP 25514)]\r\n[New Thread 0x7fff11fff700 (LWP 25515)]\r\n2019-02-03 22:50:14.393995: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1432] Found device 0 with properties: \r\nname: 1080 Ti major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:65:00.0\r\n2019-02-03 22:50:14.394052: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1511] Adding visible gpu devices: 0\r\n2019-02-03 22:50:14.659094: I tensorflow/core/common_runtime/gpu/gpu_device.cc:982] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-02-03 22:50:14.659133: I tensorflow/core/common_runtime/gpu/gpu_device.cc:988]      0 \r\n2019-02-03 22:50:14.659139: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 0:   N \r\n2019-02-03 22:50:14.659452: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 10363 MB memory) -> physical GPU (device: 0, name: 1080 Ti, pci bus id: 0000:65:00.0, compute capability: 6.1)\r\n[New Thread 0x7fff117fe700 (LWP 25516)]\r\n[New Thread 0x7fff10ffd700 (LWP 25517)]\r\n[New Thread 0x7ffef5fff700 (LWP 25518)]\r\n[New Thread 0x7ffef57fe700 (LWP 25519)]\r\n[New Thread 0x7ffef4ffd700 (LWP 25520)]\r\n[New Thread 0x7ffee1fff700 (LWP 25521)]\r\n[New Thread 0x7ffee17fe700 (LWP 25522)]\r\n[New Thread 0x7ffee0ffd700 (LWP 25523)]\r\n[New Thread 0x7ffebbfff700 (LWP 25524)]\r\n[New Thread 0x7ffebb7fe700 (LWP 25525)]\r\n[New Thread 0x7ffebaffd700 (LWP 25526)]\r\n[New Thread 0x7ffeba7fc700 (LWP 25527)]\r\n[New Thread 0x7ffeb9ffb700 (LWP 25528)]\r\n[New Thread 0x7ffeb97fa700 (LWP 25529)]\r\n[New Thread 0x7ffeb8ff9700 (LWP 25530)]\r\n[New Thread 0x7ffea3fff700 (LWP 25531)]\r\n[New Thread 0x7ffea37fe700 (LWP 25532)]\r\n[New Thread 0x7ffea2ffd700 (LWP 25533)]\r\n[New Thread 0x7ffea27fc700 (LWP 25534)]\r\n[Thread 0x7ffea27fc700 (LWP 25534) exited]\r\n[New Thread 0x7ffea27fc700 (LWP 25535)]\r\n[Thread 0x7ffea27fc700 (LWP 25535) exited]\r\n[New Thread 0x7ffea27fc700 (LWP 25536)]\r\n[Thread 0x7ffea27fc700 (LWP 25536) exited]\r\n[New Thread 0x7ffea27fc700 (LWP 25537)]\r\n[Thread 0x7ffea27fc700 (LWP 25537) exited]\r\n[New Thread 0x7ffea27fc700 (LWP 25538)]\r\n[New Thread 0x7ffea27fc700 (LWP 25539)]\r\n[Thread 0x7ffea27fc700 (LWP 25538) exited]\r\n[Thread 0x7ffea27fc700 (LWP 25539) exited]\r\n[New Thread 0x7ffea27fc700 (LWP 25540)]\r\n[Thread 0x7ffea27fc700 (LWP 25540) exited]\r\n[New Thread 0x7ffea27fc700 (LWP 25541)]\r\n[Thread 0x7ffea27fc700 (LWP 25541) exited]\r\n[New Thread 0x7ffea27fc700 (LWP 25560)]\r\n[Thread 0x7ffea27fc700 (LWP 25560) exited]\r\n[New Thread 0x7ffea27fc700 (LWP 25562)]\r\n[Thread 0x7ffea27fc700 (LWP 25562) exited]\r\n[New Thread 0x7ffea27fc700 (LWP 25563)]\r\n[Thread 0x7ffea27fc700 (LWP 25563) exited]\r\n[New Thread 0x7ffea27fc700 (LWP 25565)]\r\n[Thread 0x7ffea27fc700 (LWP 25565) exited]\r\n[New Thread 0x7ffea27fc700 (LWP 25566)]\r\n[Thread 0x7ffea27fc700 (LWP 25566) exited]\r\n[New Thread 0x7ffea27fc700 (LWP 25567)]\r\n[Thread 0x7ffea27fc700 (LWP 25567) exited]\r\n[New Thread 0x7ffea27fc700 (LWP 25568)]\r\n[Thread 0x7ffea27fc700 (LWP 25568) exited]\r\n[New Thread 0x7ffea27fc700 (LWP 25569)]\r\n[Thread 0x7ffea27fc700 (LWP 25569) exited]\r\n[New Thread 0x7ffea27fc700 (LWP 25570)]\r\n[New Thread 0x7fff731e6800 (LWP 25571)]\r\n[New Thread 0x7fff72de4880 (LWP 25572)]\r\n[New Thread 0x7fff729e2900 (LWP 25573)]\r\n[New Thread 0x7fff725e0980 (LWP 25574)]\r\n[New Thread 0x7fff721dea00 (LWP 25575)]\r\n[New Thread 0x7fff71ddca80 (LWP 25576)]\r\n[New Thread 0x7fff719db700 (LWP 25577)]\r\n[Thread 0x7fff719db700 (LWP 25577) exited]\r\n[New Thread 0x7fff719db700 (LWP 25578)]\r\n[Thread 0x7fff719db700 (LWP 25578) exited]\r\n[New Thread 0x7fff719db700 (LWP 25579)]\r\n[Thread 0x7fff719db700 (LWP 25579) exited]\r\n[New Thread 0x7fff719db700 (LWP 25580)]\r\n[Thread 0x7fff719db700 (LWP 25580) exited]\r\n[New Thread 0x7fff719db700 (LWP 25581)]\r\n[New Thread 0x7fff719db700 (LWP 25582)]\r\n[Thread 0x7fff719db700 (LWP 25581) exited]\r\n[Thread 0x7fff719db700 (LWP 25582) exited]\r\n[New Thread 0x7fff719db700 (LWP 25583)]\r\n[Thread 0x7fff719db700 (LWP 25583) exited]\r\n[New Thread 0x7fff719db700 (LWP 25584)]\r\n[Thread 0x7fff719db700 (LWP 25584) exited]\r\n[New Thread 0x7fff719db700 (LWP 25588)]\r\n[New Thread 0x7fff704f1700 (LWP 25589)]\r\n[New Thread 0x7fff6fcf0700 (LWP 25590)]\r\n[New Thread 0x7fff6f4ef700 (LWP 25591)]\r\n[New Thread 0x7fff6ecee700 (LWP 25592)]\r\n[New Thread 0x7fff6e4ed700 (LWP 25593)]\r\n[New Thread 0x7fff6dcec700 (LWP 25594)]\r\n[New Thread 0x7fff6d4eb700 (LWP 25595)]\r\n[New Thread 0x7fff6ccea700 (LWP 25596)]\r\n[New Thread 0x7ffea1ffb700 (LWP 25597)]\r\n[New Thread 0x7ffea17fa700 (LWP 25598)]\r\n[New Thread 0x7ffea0ff9700 (LWP 25599)]\r\n[New Thread 0x7ffe8dfff700 (LWP 25600)]\r\n[New Thread 0x7ffe8d7fe700 (LWP 25601)]\r\n[New Thread 0x7ffe8cffd700 (LWP 25602)]\r\n2019-02-03 22:57:34.463561: F tensorflow/core/common_runtime/bfc_allocator.cc:458] Check failed: c->in_use() && (c->bin_num == kInvalidBinNum) \r\n\r\nThread 39 \"python\" received signal SIGABRT, Aborted.\r\n[Switching to Thread 0x7ffeb8ff9700 (LWP 25530)]\r\n0x00007ffff7b3fd7f in raise () from /usr/lib/libc.so.6\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25464", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25464/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25464/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25464/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25464", "id": 406046533, "node_id": "MDU6SXNzdWU0MDYwNDY1MzM=", "number": 25464, "title": "Unnecessary logging noise for non-authenticated GCS access", "user": {"login": "rsepassi", "id": 1115739, "node_id": "MDQ6VXNlcjExMTU3Mzk=", "avatar_url": "https://avatars3.githubusercontent.com/u/1115739?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsepassi", "html_url": "https://github.com/rsepassi", "followers_url": "https://api.github.com/users/rsepassi/followers", "following_url": "https://api.github.com/users/rsepassi/following{/other_user}", "gists_url": "https://api.github.com/users/rsepassi/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsepassi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsepassi/subscriptions", "organizations_url": "https://api.github.com/users/rsepassi/orgs", "repos_url": "https://api.github.com/users/rsepassi/repos", "events_url": "https://api.github.com/users/rsepassi/events{/privacy}", "received_events_url": "https://api.github.com/users/rsepassi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "craigcitro", "id": 468559, "node_id": "MDQ6VXNlcjQ2ODU1OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/468559?v=4", "gravatar_id": "", "url": "https://api.github.com/users/craigcitro", "html_url": "https://github.com/craigcitro", "followers_url": "https://api.github.com/users/craigcitro/followers", "following_url": "https://api.github.com/users/craigcitro/following{/other_user}", "gists_url": "https://api.github.com/users/craigcitro/gists{/gist_id}", "starred_url": "https://api.github.com/users/craigcitro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/craigcitro/subscriptions", "organizations_url": "https://api.github.com/users/craigcitro/orgs", "repos_url": "https://api.github.com/users/craigcitro/repos", "events_url": "https://api.github.com/users/craigcitro/events{/privacy}", "received_events_url": "https://api.github.com/users/craigcitro/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "craigcitro", "id": 468559, "node_id": "MDQ6VXNlcjQ2ODU1OQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/468559?v=4", "gravatar_id": "", "url": "https://api.github.com/users/craigcitro", "html_url": "https://github.com/craigcitro", "followers_url": "https://api.github.com/users/craigcitro/followers", "following_url": "https://api.github.com/users/craigcitro/following{/other_user}", "gists_url": "https://api.github.com/users/craigcitro/gists{/gist_id}", "starred_url": "https://api.github.com/users/craigcitro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/craigcitro/subscriptions", "organizations_url": "https://api.github.com/users/craigcitro/orgs", "repos_url": "https://api.github.com/users/craigcitro/repos", "events_url": "https://api.github.com/users/craigcitro/events{/privacy}", "received_events_url": "https://api.github.com/users/craigcitro/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-02-03T02:54:23Z", "updated_at": "2019-02-07T18:51:32Z", "closed_at": null, "author_association": "MEMBER", "body": "**System information**\r\n\r\n* Ubuntu 16.04\r\n* Python 3.6\r\n* TF 1.12\r\n\r\n**Describe the current behavior**\r\n\r\nUnnecessary access to GCP metadata endpoint, 10 retries, and lots of logging. \r\n\r\n**Describe the expected behavior**\r\n\r\nShould not be trying to access GCP metadata endpoint.\r\n\r\n**Code to reproduce the issue**\r\n\r\n```\r\n$ python\r\n>> tf.gfile.Exists(\"gs://tfds-data\")  # this is a public bucket, doesn\u2019t need any auth\r\n2019-02-03 02:51:58.175696: I tensorflow/core/platform/cloud/retrying_utils.cc:73] The operation failed and will be automatically retried in 0.12376 seconds (attempt 1 out of 10), caused by: Unavailable: Error executing an HTTP request: libcurl code 6 meaning 'Couldn't resolve host name', error details: Couldn't resolve host 'metadata'\r\n\r\n...(more of the same)\r\n\r\n2019-02-03 02:52:05.330143: I tensorflow/core/platform/cloud/retrying_utils.cc:73] The operation failed and will be automatically retried in 1.29527 seconds (attempt 10 out of 10), caused by: Unavailable: Error executing an HTTP request: libcurl code 6 meaning 'Couldn't resolve host name', error details: Couldn't resolve host 'metadata'\r\n2019-02-03 02:52:06.626410: W tensorflow/core/platform/cloud/google_auth_provider.cc:157] All attempts to get a Google authentication bearer token failed, returning an empty token. Retrieving token from files failed with \"Not found: Could not locate the credentials file.\". Retrieving token from GCE failed with \"Aborted: All 10 retry attempts failed. The last failure: Unavailable: Error executing an HTTP request: libcurl code 6 meaning 'Couldn't resolve host name', error details: Couldn't resolve host 'metadata'\".\r\n```\r\n\r\n(Linking issue tensorflow/datasets#38)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25434", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25434/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25434/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25434/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25434", "id": 405851274, "node_id": "MDU6SXNzdWU0MDU4NTEyNzQ=", "number": 25434, "title": "2.0 Reference Models: Keras Application Set (TPU)", "user": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}, {"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-01T19:57:01Z", "updated_at": "2019-05-31T21:08:00Z", "closed_at": null, "author_association": "MEMBER", "body": "Keras Applications is the `applications` module of the Keras deep learning library. It provides model definitions and pre-trained weights for a number of popular architectures, such as VGG16, ResNet50, Xception, MobileNet, and more.\r\n\r\nThe purpose of this issue is to migrate models into the TF 2.0 Keras API. Each migrated model must be eager and distribution compatible, with tests, and all associated engineering artifacts.\r\n\r\nFor more information on tf.keras.applications, check [here](https://www.tensorflow.org/versions/r2.0/api_docs/python/tf/keras/applications)."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25433", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25433/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25433/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25433/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25433", "id": 405850879, "node_id": "MDU6SXNzdWU0MDU4NTA4Nzk=", "number": 25433, "title": "2.0 Reference Models: Transformer (TPU with dist strat and Keras)", "user": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-02-01T19:55:53Z", "updated_at": "2020-01-21T09:01:28Z", "closed_at": null, "author_association": "MEMBER", "body": "**Transformer** is a neural network architecture that solves sequence to sequence problems using attention mechanisms. Unlike traditional neural seq2seq models, Transformer does not involve recurrent connections. The attention mechanism learns dependencies between tokens in two sequences. Since attention weights apply to all tokens in the sequences, the Transformer model is able to easily capture long-distance dependencies.\r\n\r\nSee the paper [Attention is All You Need](https://arxiv.org/abs/1706.03762) for more background.\r\n\r\nFor the TensorFlow 1.x equivalent, please refer [here](https://github.com/tensorflow/models/tree/master/official/transformer).\r\n\r\nThe purpose of this issue is to migrate models into the TF 2.0 Keras API. Each migrated model must be eager and distribution compatible, with tests, and all associated engineering artifacts."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25432", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25432/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25432/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25432/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25432", "id": 405850548, "node_id": "MDU6SXNzdWU0MDU4NTA1NDg=", "number": 25432, "title": "2.0 Reference Models: NMT Model (TPU with dist strat and Keras)", "user": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}, {"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rachellj218", "id": 42055825, "node_id": "MDQ6VXNlcjQyMDU1ODI1", "avatar_url": "https://avatars1.githubusercontent.com/u/42055825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rachellj218", "html_url": "https://github.com/rachellj218", "followers_url": "https://api.github.com/users/rachellj218/followers", "following_url": "https://api.github.com/users/rachellj218/following{/other_user}", "gists_url": "https://api.github.com/users/rachellj218/gists{/gist_id}", "starred_url": "https://api.github.com/users/rachellj218/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rachellj218/subscriptions", "organizations_url": "https://api.github.com/users/rachellj218/orgs", "repos_url": "https://api.github.com/users/rachellj218/repos", "events_url": "https://api.github.com/users/rachellj218/events{/privacy}", "received_events_url": "https://api.github.com/users/rachellj218/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rachellj218", "id": 42055825, "node_id": "MDQ6VXNlcjQyMDU1ODI1", "avatar_url": "https://avatars1.githubusercontent.com/u/42055825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rachellj218", "html_url": "https://github.com/rachellj218", "followers_url": "https://api.github.com/users/rachellj218/followers", "following_url": "https://api.github.com/users/rachellj218/following{/other_user}", "gists_url": "https://api.github.com/users/rachellj218/gists{/gist_id}", "starred_url": "https://api.github.com/users/rachellj218/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rachellj218/subscriptions", "organizations_url": "https://api.github.com/users/rachellj218/orgs", "repos_url": "https://api.github.com/users/rachellj218/repos", "events_url": "https://api.github.com/users/rachellj218/events{/privacy}", "received_events_url": "https://api.github.com/users/rachellj218/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-02-01T19:54:56Z", "updated_at": "2019-10-09T17:44:29Z", "closed_at": null, "author_association": "MEMBER", "body": "**Sequence-to-sequence** (seq2seq) models ([Sutskever et al., 2014](https://papers.nips.cc/paper/5346-sequence-to-sequence-learning-with-neural-networks.pdf), [Cho et al., 2014](http://emnlp2014.org/papers/pdf/EMNLP2014179.pdf)) have enjoyed great success in a variety of tasks such as machine translation, speech recognition, and text summarization. \r\n\r\nThis model will give TF 2.0 end users a full understanding of seq2seq models and show them how to build a competitive seq2seq model from scratch. We focus on the task of **Neural Machine Translation** (NMT), which was the very first [testbed for seq2seq models](https://research.googleblog.com/2016/09/a-neural-network-for-machine.html).\r\n\r\nFor the TensorFlow 1.x equivalent, please refer [here](https://github.com/tensorflow/nmt).\r\n\r\nThe purpose of this issue is to migrate models into the TF 2.0 Keras API. Each migrated model must be eager and distribution compatible, with tests, and all associated engineering artifacts."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25429", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25429/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25429/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25429/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25429", "id": 405831509, "node_id": "MDU6SXNzdWU0MDU4MzE1MDk=", "number": 25429, "title": "TF 2.0: Release binaries for Python 3.5 and 3.7.", "user": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "annarev", "id": 22060313, "node_id": "MDQ6VXNlcjIyMDYwMzEz", "avatar_url": "https://avatars0.githubusercontent.com/u/22060313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/annarev", "html_url": "https://github.com/annarev", "followers_url": "https://api.github.com/users/annarev/followers", "following_url": "https://api.github.com/users/annarev/following{/other_user}", "gists_url": "https://api.github.com/users/annarev/gists{/gist_id}", "starred_url": "https://api.github.com/users/annarev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/annarev/subscriptions", "organizations_url": "https://api.github.com/users/annarev/orgs", "repos_url": "https://api.github.com/users/annarev/repos", "events_url": "https://api.github.com/users/annarev/events{/privacy}", "received_events_url": "https://api.github.com/users/annarev/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "annarev", "id": 22060313, "node_id": "MDQ6VXNlcjIyMDYwMzEz", "avatar_url": "https://avatars0.githubusercontent.com/u/22060313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/annarev", "html_url": "https://github.com/annarev", "followers_url": "https://api.github.com/users/annarev/followers", "following_url": "https://api.github.com/users/annarev/following{/other_user}", "gists_url": "https://api.github.com/users/annarev/gists{/gist_id}", "starred_url": "https://api.github.com/users/annarev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/annarev/subscriptions", "organizations_url": "https://api.github.com/users/annarev/orgs", "repos_url": "https://api.github.com/users/annarev/repos", "events_url": "https://api.github.com/users/annarev/events{/privacy}", "received_events_url": "https://api.github.com/users/annarev/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-02-01T18:59:40Z", "updated_at": "2019-06-30T11:54:42Z", "closed_at": null, "author_association": "MEMBER", "body": ""}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25425", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25425/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25425/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25425/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25425", "id": 405769044, "node_id": "MDU6SXNzdWU0MDU3NjkwNDQ=", "number": 25425, "title": "tf.contrib.distribute performance issue with asymmetrical multi GPU setup", "user": {"login": "peidaqi", "id": 18495787, "node_id": "MDQ6VXNlcjE4NDk1Nzg3", "avatar_url": "https://avatars0.githubusercontent.com/u/18495787?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peidaqi", "html_url": "https://github.com/peidaqi", "followers_url": "https://api.github.com/users/peidaqi/followers", "following_url": "https://api.github.com/users/peidaqi/following{/other_user}", "gists_url": "https://api.github.com/users/peidaqi/gists{/gist_id}", "starred_url": "https://api.github.com/users/peidaqi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peidaqi/subscriptions", "organizations_url": "https://api.github.com/users/peidaqi/orgs", "repos_url": "https://api.github.com/users/peidaqi/repos", "events_url": "https://api.github.com/users/peidaqi/events{/privacy}", "received_events_url": "https://api.github.com/users/peidaqi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}], "state": "open", "locked": false, "assignee": {"login": "guptapriya", "id": 14104855, "node_id": "MDQ6VXNlcjE0MTA0ODU1", "avatar_url": "https://avatars1.githubusercontent.com/u/14104855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guptapriya", "html_url": "https://github.com/guptapriya", "followers_url": "https://api.github.com/users/guptapriya/followers", "following_url": "https://api.github.com/users/guptapriya/following{/other_user}", "gists_url": "https://api.github.com/users/guptapriya/gists{/gist_id}", "starred_url": "https://api.github.com/users/guptapriya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guptapriya/subscriptions", "organizations_url": "https://api.github.com/users/guptapriya/orgs", "repos_url": "https://api.github.com/users/guptapriya/repos", "events_url": "https://api.github.com/users/guptapriya/events{/privacy}", "received_events_url": "https://api.github.com/users/guptapriya/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "guptapriya", "id": 14104855, "node_id": "MDQ6VXNlcjE0MTA0ODU1", "avatar_url": "https://avatars1.githubusercontent.com/u/14104855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guptapriya", "html_url": "https://github.com/guptapriya", "followers_url": "https://api.github.com/users/guptapriya/followers", "following_url": "https://api.github.com/users/guptapriya/following{/other_user}", "gists_url": "https://api.github.com/users/guptapriya/gists{/gist_id}", "starred_url": "https://api.github.com/users/guptapriya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guptapriya/subscriptions", "organizations_url": "https://api.github.com/users/guptapriya/orgs", "repos_url": "https://api.github.com/users/guptapriya/repos", "events_url": "https://api.github.com/users/guptapriya/events{/privacy}", "received_events_url": "https://api.github.com/users/guptapriya/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-02-01T16:13:33Z", "updated_at": "2019-02-07T19:13:45Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04, Kernel 4.13.16\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): tensorflow-gpu binary from pip\r\n- TensorFlow version (use command below): 1.12.0\r\n- Python version: 3.6.3\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: CUDA 9.0 with NCCL 2.3.7-1\r\n- GPU model and memory: 1080ti 12G + 1070ti 8G\r\n\r\n**Description**\r\nI've been trying to port the Google BERT language model to support multi-GPU transfer learning using the new tf.contrib.distribute API. My hardware setup is a 1070ti + 1080ti, and it's a bit strange because I'm getting similar performance between the dual-GPU and a single 1070ti.\r\n\r\nTo reproduce this issue I built a much simpler model (see link) with a timer. And here's the results I got (in secs):\r\n3.0106631300004665 1070Ti + 1080Ti\r\n2.8305218839959707 1070Ti\r\n1.6665251980011817 1080Ti\r\n\r\nI can imagine the 1080Ti being throttled back with a MirroredStrategy, but at least it should perform like a 1070Ti and with the two cards gives 1.6~1.8X of the performance of a 1070Ti? Maybe this is a load-balancing issue with the NCCL?\r\n\r\n**Code to reproduce the issue**\r\nhttps://drive.google.com/file/d/15nJlVV9PWzKcF1AI24H2XSfzzCAhwQ5f/view?usp=sharing\r\n\r\n(Change line 30 to specify different GPUs)\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25416", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25416/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25416/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25416/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25416", "id": 405640248, "node_id": "MDU6SXNzdWU0MDU2NDAyNDg=", "number": 25416, "title": "tf.keras.utils.multi  does not work with WGAN-GP Model", "user": {"login": "KUASWoodyLIN", "id": 9446515, "node_id": "MDQ6VXNlcjk0NDY1MTU=", "avatar_url": "https://avatars1.githubusercontent.com/u/9446515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KUASWoodyLIN", "html_url": "https://github.com/KUASWoodyLIN", "followers_url": "https://api.github.com/users/KUASWoodyLIN/followers", "following_url": "https://api.github.com/users/KUASWoodyLIN/following{/other_user}", "gists_url": "https://api.github.com/users/KUASWoodyLIN/gists{/gist_id}", "starred_url": "https://api.github.com/users/KUASWoodyLIN/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KUASWoodyLIN/subscriptions", "organizations_url": "https://api.github.com/users/KUASWoodyLIN/orgs", "repos_url": "https://api.github.com/users/KUASWoodyLIN/repos", "events_url": "https://api.github.com/users/KUASWoodyLIN/events{/privacy}", "received_events_url": "https://api.github.com/users/KUASWoodyLIN/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-01T10:27:10Z", "updated_at": "2019-02-07T21:06:23Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.12.0\r\n- Python version: 3.5\r\n- Bazel version (if compiling from source): n/a\r\n- GCC/Compiler version (if compiling from source): n/a\r\n- CUDA/cuDNN version: n/a\r\n- GPU model and memory: n/a\r\n\r\n**Describe the current behavior**\r\ntf.keras.utils.multi  does not work with WGAN-GP Model\r\nI also try on Keras(not tf.keras) and it was work!\r\n\r\n**Code to reproduce the issue**\r\ndiscriminator model code:\r\n```\r\ngenerator = gan_generator()\r\ndiscriminator = gen_discriminator()\r\n\r\n\r\n# Image input (real sample)\r\nreal_img = tf.keras.Input(shape=img_shape)\r\n# Noise input\r\nz_disc = tf.keras.Input(shape=(100,))\r\n# Generate image based of noise (fake sample)\r\nfake_img = generator(z_disc)\r\n\r\n# Discriminator determines validity of the real and fake images\r\nfake = discriminator(fake_img)\r\nvalid = discriminator(real_img)\r\n\r\n# Construct weighted average between real and fake images\r\ninterpolated_img = RandomWeightedAverage()([real_img, fake_img])\r\n# Determine validity of weighted sample\r\nvalidity_interpolated = discriminator(interpolated_img)\r\n\r\n# Use Python partial to provide loss function with additional\r\n# 'averaged_samples' argument\r\npartial_gp_loss = partial(gradient_penalty_loss,\r\n                          averaged_samples=interpolated_img)\r\npartial_gp_loss.__name__ = 'gradient_penalty'   # Keras requires function names\r\n\r\ndiscriminator_model = tf.keras.Model(inputs=[real_img, z_disc], outputs=[valid, fake, validity_interpolated])\r\nparallel_discriminator_model = tf.keras.utils.multi_gpu_model(discriminator_model, gpus=2)\r\n```\r\n\r\ngenerator & dircriminator body\r\n```\r\ndef gan_generator(self):\r\n    inputs = tf.keras.Input(shape=(100,))\r\n\r\n    x = tf.keras.layers.Dense(7 * 7 * self.dims * 4, activation='relu', input_dim=self.latent_dim)(inputs)\r\n    x = tf.keras.layers.Reshape((7, 7, self.dims * 4))(x)\r\n\r\n    x = tf.keras.layers.UpSampling2D()(x)\r\n    x = tf.keras.layers.Conv2D(self.dims * 4, kernel_size=5, padding=\"same\")(x)\r\n    x = tf.keras.layers.BatchNormalization(momentum=0.8)(x)\r\n    x = tf.keras.layers.Activation(\"relu\")(x)\r\n\r\n    x = tf.keras.layers.UpSampling2D()(x)\r\n    x = tf.keras.layers.Conv2D(self.dims * 2, kernel_size=5, padding=\"same\")(x)\r\n    x = tf.keras.layers.BatchNormalization(momentum=0.8)(x)\r\n    x = tf.keras.layers.Activation(\"relu\")(x)\r\n\r\n    # x = UpSampling2D()(x)\r\n    # x = Conv2D(self.dims * 1, kernel_size=5, padding=\"same\")(x)\r\n    # x = BatchNormalization(momentum=0.8)(x)\r\n    # x = Activation(\"relu\")(x)\r\n\r\n    x = tf.keras.layers.Conv2D(self.channels, kernel_size=5, padding=\"same\")(x)\r\n    x = tf.keras.layers.Activation(\"tanh\")(x)\r\n\r\n    return tf.keras.Model(inputs, x)\r\n\r\ndef gen_discriminator(self):\r\n    inputs = tf.keras.Input(shape=self.img_shape)\r\n\r\n    x = tf.keras.layers.Conv2D(self.dims, kernel_size=5, strides=2, padding=\"same\", input_shape=self.img_shape)(inputs)\r\n    x = tf.keras.layers.LeakyReLU(alpha=0.2)(x)\r\n    x = tf.keras.layers.Dropout(0.25)(x)\r\n\r\n    x = tf.keras.layers.Conv2D(self.dims * 2, kernel_size=5, strides=2, padding=\"same\")(x)\r\n    x = tf.keras.layers.ZeroPadding2D(padding=((0, 1), (0, 1)))(x)\r\n    x = tf.keras.layers.BatchNormalization(momentum=0.8)(x)\r\n    x = tf.keras.layers.LeakyReLU(alpha=0.2)(x)\r\n    x = tf.keras.layers.Dropout(0.25)(x)\r\n\r\n    x = tf.keras.layers.Conv2D(self.dims * 4, kernel_size=5, strides=2, padding=\"same\")(x)\r\n    x = tf.keras.layers.BatchNormalization(momentum=0.8)(x)\r\n    x = tf.keras.layers.LeakyReLU(alpha=0.2)(x)\r\n    x = tf.keras.layers.Dropout(0.25)(x)\r\n\r\n    x = tf.keras.layers.Conv2D(self.dims * 4, kernel_size=5, strides=2, padding=\"same\")(x)\r\n    x = tf.keras.layers.BatchNormalization(momentum=0.8)(x)\r\n    x = tf.keras.layers.LeakyReLU(alpha=0.2)(x)\r\n    x = tf.keras.layers.Dropout(0.25)(x)\r\n    x = tf.keras.layers.Flatten()(x)\r\n    x = tf.keras.layers.Dense(1)(x)\r\n    return tf.keras.Model(inputs, x)\r\n\r\n```\r\n\r\n**Other info / logs**\r\n```\r\n2019-02-01 10:23:31.330533: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-02-01 10:23:31.441144: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:964] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-02-01 10:23:31.441617: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1432] Found device 0 with properties: \r\nname: GeForce GTX 1070 major: 6 minor: 1 memoryClockRate(GHz): 1.797\r\npciBusID: 0000:01:00.0\r\ntotalMemory: 7.93GiB freeMemory: 7.18GiB\r\n2019-02-01 10:23:31.530899: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:964] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-02-01 10:23:31.531436: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1432] Found device 1 with properties: \r\nname: GeForce GTX 1070 major: 6 minor: 1 memoryClockRate(GHz): 1.797\r\npciBusID: 0000:03:00.0\r\ntotalMemory: 7.93GiB freeMemory: 7.83GiB\r\n2019-02-01 10:23:31.532281: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1511] Adding visible gpu devices: 0, 1\r\n2019-02-01 10:23:32.028009: I tensorflow/core/common_runtime/gpu/gpu_device.cc:982] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-02-01 10:23:32.028044: I tensorflow/core/common_runtime/gpu/gpu_device.cc:988]      0 1 \r\n2019-02-01 10:23:32.028053: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 0:   N Y \r\n2019-02-01 10:23:32.028061: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1001] 1:   Y N \r\n2019-02-01 10:23:32.028301: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 6920 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1070, pci bus id: 0000:01:00.0, compute capability: 6.1)\r\n2019-02-01 10:23:32.028599: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:1 with 7558 MB memory) -> physical GPU (device: 1, name: GeForce GTX 1070, pci bus id: 0000:03:00.0, compute capability: 6.1)\r\nTraceback (most recent call last):\r\n  File \"/home/share/user/John/WGAN_GP/tf_main.py\", line 258, in <module>\r\n    wgan = WGANGP()\r\n  File \"/home/share/user/John/WGAN_GP/tf_main.py\", line 82, in __init__\r\n    parallel_discriminator_model = tf.keras.utils.multi_gpu_model(self.discriminator_model, gpus=2)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/utils/multi_gpu_utils.py\", line 252, in multi_gpu_model\r\n    return Model(model.inputs, merged)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/engine/training.py\", line 121, in __init__\r\n    super(Model, self).__init__(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/engine/network.py\", line 80, in __init__\r\n    self._init_graph_network(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/training/checkpointable/base.py\", line 474, in _method_wrapper\r\n    method(self, *args, **kwargs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/engine/network.py\", line 268, in _init_graph_network\r\n    self.inputs, self.outputs)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/python/keras/engine/network.py\", line 1833, in _map_graph_network\r\n    str(all_names.count(name)) + ' times in the model. '\r\nValueError: The name \"model_1\" is used 3 times in the model. All layer names should be unique.\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25415", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25415/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25415/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25415/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25415", "id": 405634914, "node_id": "MDU6SXNzdWU0MDU2MzQ5MTQ=", "number": 25415, "title": "There are some error when convert Mask RCNN model to .tflite", "user": {"login": "noah003", "id": 12086882, "node_id": "MDQ6VXNlcjEyMDg2ODgy", "avatar_url": "https://avatars3.githubusercontent.com/u/12086882?v=4", "gravatar_id": "", "url": "https://api.github.com/users/noah003", "html_url": "https://github.com/noah003", "followers_url": "https://api.github.com/users/noah003/followers", "following_url": "https://api.github.com/users/noah003/following{/other_user}", "gists_url": "https://api.github.com/users/noah003/gists{/gist_id}", "starred_url": "https://api.github.com/users/noah003/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/noah003/subscriptions", "organizations_url": "https://api.github.com/users/noah003/orgs", "repos_url": "https://api.github.com/users/noah003/repos", "events_url": "https://api.github.com/users/noah003/events{/privacy}", "received_events_url": "https://api.github.com/users/noah003/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, {"login": "achowdhery", "id": 4723042, "node_id": "MDQ6VXNlcjQ3MjMwNDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4723042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/achowdhery", "html_url": "https://github.com/achowdhery", "followers_url": "https://api.github.com/users/achowdhery/followers", "following_url": "https://api.github.com/users/achowdhery/following{/other_user}", "gists_url": "https://api.github.com/users/achowdhery/gists{/gist_id}", "starred_url": "https://api.github.com/users/achowdhery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/achowdhery/subscriptions", "organizations_url": "https://api.github.com/users/achowdhery/orgs", "repos_url": "https://api.github.com/users/achowdhery/repos", "events_url": "https://api.github.com/users/achowdhery/events{/privacy}", "received_events_url": "https://api.github.com/users/achowdhery/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-02-01T10:12:38Z", "updated_at": "2019-07-12T22:54:24Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **What is the top-level directory of the model you are using**:\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Ubuntu 16.04\r\n- **TensorFlow installed from (source or binary)**: pip\r\n- **TensorFlow version (use command below)**: 1.12\r\n- **Bazel version (if compiling from source)**: 0.22.0\r\n- **CUDA/cuDNN version**: cuda9.0/cuDNN7.4\r\n- **GPU model and memory**: GTX 1080/8G\r\n- **Exact command to reproduce**:\r\n\r\n### Describe the problem\r\ni trained mask rcnn using object detection API, and frozen the mode successfully, but i encountered some problems when i convert  .pb file to .tflite file, following is my command\r\n\r\n```\r\ntflite_convert \\\r\n  --graph_def_file=/path/to/frozen_inference_graph.pb \\\r\n  --output_file=optimized_graph.lite \\\r\n  --output_format=TFLITE \\\r\n  --output_arrays=detection_masks,detection_classes,detection_boxes,detection_scores,num_detections \\\r\n  --inference_input_type=FLOAT \\\r\n  --input_shapes=1,224,224,3 \\\r\n  --input_arrays=image_tensor \\\r\n  --inference_type=FLOAT\r\n```\r\nthe output_array is the same with output_node_names form research/object_detection/exporter.py\r\n### Source code / logs\r\nerror\r\n```\r\ntensorflow/contrib/lite/toco/import_tensorflow.cc:1127] Op node missing output type attribute: CropAndResize_1\\n2019-01-31 16:16:52.071330: I \r\ntensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 7262 operators, 13617 arrays (0 quantized)\\n2019-01-31 16:16:52.843219: I \r\ntensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After Removing unused ops pass 1: 7208 operators, 13526 arrays (0 quantized)\\n2019-01-31 16:16:54.116685: I \r\ntensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 7208 operators, 13526 arrays (0 quantized)\\n2019-01-31 16:16:54.363824: F \r\ntensorflow/contrib/lite/toco/graph_transformations/resolve_constant_slice.cc:59] Check failed: dim_size >= 1 (0 vs. 1)\\nAborted (core dumped)\\n'None\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25412", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25412/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25412/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25412/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25412", "id": 405563809, "node_id": "MDU6SXNzdWU0MDU1NjM4MDk=", "number": 25412, "title": "Tensorflow Lite Multiple Choice Test example app", "user": {"login": "ArriFerrari", "id": 38789344, "node_id": "MDQ6VXNlcjM4Nzg5MzQ0", "avatar_url": "https://avatars0.githubusercontent.com/u/38789344?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ArriFerrari", "html_url": "https://github.com/ArriFerrari", "followers_url": "https://api.github.com/users/ArriFerrari/followers", "following_url": "https://api.github.com/users/ArriFerrari/following{/other_user}", "gists_url": "https://api.github.com/users/ArriFerrari/gists{/gist_id}", "starred_url": "https://api.github.com/users/ArriFerrari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ArriFerrari/subscriptions", "organizations_url": "https://api.github.com/users/ArriFerrari/orgs", "repos_url": "https://api.github.com/users/ArriFerrari/repos", "events_url": "https://api.github.com/users/ArriFerrari/events{/privacy}", "received_events_url": "https://api.github.com/users/ArriFerrari/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-02-01T06:00:11Z", "updated_at": "2019-02-01T20:14:25Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.12\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nI would like an example app where the user is presented with a multiple choice test, 4-5 questions. One of the questions should allow a numerical input with a decimal (float). The questions could be simple things like 2x+1=3... x=?\r\nThe example app would take these user inputs and classify the set of responses by a letter grade \"A\", \"B\", \"C\" or \"F\". After hitting a \"Submit\" button the app runs the model and displays a big letter grade on a new page. Then we give the user the option to re-do the test.\r\n\r\nI could contribute a trained model from a sample data set that I could generate from test questions/answers in the desktop version of Tensorflow.\r\n\r\n**Will this change the current api? How?**\r\nNo\r\n\r\n**Who will benefit with this feature?**\r\nMobile developers trying to get a handle on Tensorflow Lite. This would give a better starting point in Tensorflow Lite for passing other forms of inputs (not sensor based) through a pre-trained model. \r\n\r\n**Any Other info.**\r\nThis particular demo app would be more useful in its symbolic sense than the practical function."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25400", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25400/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25400/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25400/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25400", "id": 405494903, "node_id": "MDU6SXNzdWU0MDU0OTQ5MDM=", "number": 25400, "title": "Support SavedModel in WarmStartSettings initialization", "user": {"login": "dwyatte", "id": 2512762, "node_id": "MDQ6VXNlcjI1MTI3NjI=", "avatar_url": "https://avatars3.githubusercontent.com/u/2512762?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dwyatte", "html_url": "https://github.com/dwyatte", "followers_url": "https://api.github.com/users/dwyatte/followers", "following_url": "https://api.github.com/users/dwyatte/following{/other_user}", "gists_url": "https://api.github.com/users/dwyatte/gists{/gist_id}", "starred_url": "https://api.github.com/users/dwyatte/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dwyatte/subscriptions", "organizations_url": "https://api.github.com/users/dwyatte/orgs", "repos_url": "https://api.github.com/users/dwyatte/repos", "events_url": "https://api.github.com/users/dwyatte/events{/privacy}", "received_events_url": "https://api.github.com/users/dwyatte/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}], "state": "open", "locked": false, "assignee": {"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-02-01T00:03:25Z", "updated_at": "2019-02-05T19:20:19Z", "closed_at": null, "author_association": "NONE", "body": "Any reason not to support SavedModel in WarmStartSettings initialization? Currently only checkpoints are supported.\r\n\r\nEstimator's `warm_start_from` argument accepts a SavedModel, so it would be great to have parity with that for cases where a user needs finer-grained control via WarmStartSettings (e.g., only initializing a subset of variables for transfer learning/fine tuning)."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25395", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25395/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25395/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25395/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25395", "id": 405341471, "node_id": "MDU6SXNzdWU0MDUzNDE0NzE=", "number": 25395, "title": "TF debug crashes when nan in loss", "user": {"login": "kesinger", "id": 4651708, "node_id": "MDQ6VXNlcjQ2NTE3MDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/4651708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kesinger", "html_url": "https://github.com/kesinger", "followers_url": "https://api.github.com/users/kesinger/followers", "following_url": "https://api.github.com/users/kesinger/following{/other_user}", "gists_url": "https://api.github.com/users/kesinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/kesinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kesinger/subscriptions", "organizations_url": "https://api.github.com/users/kesinger/orgs", "repos_url": "https://api.github.com/users/kesinger/repos", "events_url": "https://api.github.com/users/kesinger/events{/privacy}", "received_events_url": "https://api.github.com/users/kesinger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097548274, "node_id": "MDU6TGFiZWwxMDk3NTQ4Mjc0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tfdbg", "name": "comp:tfdbg", "color": "0052cc", "default": false, "description": "tf debugger"}], "state": "open", "locked": false, "assignee": {"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-01-31T16:52:53Z", "updated_at": "2019-01-31T22:23:22Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No, beyond the trivial fix needed for  https://github.com/tensorflow/models/issues/5857, and wrapping the tf.Session in a debug session\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): Binary\r\n- TensorFlow version (use command below): v1.12.0-0-ga6d8ffae09 1.12.0\r\n- Python version: 3.6.7\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: 9.0\r\n- GPU model and memory: 1080ti / 11GB\r\n\r\n\r\n**Describe the current behavior**\r\nWhen run in the debugger, if there is a NaN in the loss, the debugger crashes.\r\n\r\n**Describe the expected behavior**\r\n\r\nExpected behavior is that the debugger does not crash and I can examine the tensors.\r\n**Code to reproduce the issue**\r\n\r\nIn models/research/struct2depth, run: \r\nckpt_dir=\"ckpt\"\r\ndata_dir=\"/opt/baddata/tfrep\"\r\n\r\npython train.py \\\r\n  --logtostderr \\\r\n  --checkpoint_dir=$ckpt_dir  \\\r\n  --data_dir=$data_dir \\\r\n  --architecture=resnet \\\r\n  --imagenet_norm=true \\\r\n  --joint_encoder=false\r\n\r\n**Other info / logs**\r\n\r\nI'm attaching a screenshot of the terminal after tfdbg crashes (the terminal gets corrupted so I can't paste this into a text file) :  \r\n<img width=\"1422\" alt=\"screen shot 2019-01-28 at 12 06 26\" src=\"https://user-images.githubusercontent.com/4651708/52070300-8628ac00-254e-11e9-835e-e5ff4ff84282.png\">\r\n\r\nA set of input data that triggers this crash will be uploaded soon."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25391", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25391/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25391/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25391/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25391", "id": 405294535, "node_id": "MDU6SXNzdWU0MDUyOTQ1MzU=", "number": 25391, "title": "tf.linalg.solve segfaults on invalid matrix dimensions", "user": {"login": "darthdeus", "id": 123374, "node_id": "MDQ6VXNlcjEyMzM3NA==", "avatar_url": "https://avatars1.githubusercontent.com/u/123374?v=4", "gravatar_id": "", "url": "https://api.github.com/users/darthdeus", "html_url": "https://github.com/darthdeus", "followers_url": "https://api.github.com/users/darthdeus/followers", "following_url": "https://api.github.com/users/darthdeus/following{/other_user}", "gists_url": "https://api.github.com/users/darthdeus/gists{/gist_id}", "starred_url": "https://api.github.com/users/darthdeus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/darthdeus/subscriptions", "organizations_url": "https://api.github.com/users/darthdeus/orgs", "repos_url": "https://api.github.com/users/darthdeus/repos", "events_url": "https://api.github.com/users/darthdeus/events{/privacy}", "received_events_url": "https://api.github.com/users/darthdeus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-01-31T15:19:01Z", "updated_at": "2019-11-04T19:19:09Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS 10.13.6 (17G4015)\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v1.12.0-rc2-3-ga6d8ffae09 1.12.0\r\n- Python version: 3.6.7\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\n\r\nCalling `tf.linalg.solve(A, b)` with `b.shape == (n,)` causes a segfault.\r\n\r\n**Describe the expected behavior**\r\n\r\nInvalid shape error expected. This seems to happen on the GPU version I've tested on another system, but crashes on the CPU version on my Mac.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n```python\r\nimport tensorflow as tf\r\ntf.enable_eager_execution()\r\n# This is ok\r\ntf.linalg.solve([[.1, .0], [.0, .1]], [[.1], [.1]])\r\n# This line causes segfault\r\ntf.linalg.solve([[.1, .0], [.0, .1]], [.1, .1])\r\n```\r\n\r\n**Other info / logs**\r\n\r\nSame thing happens on the latest nightly build, that is `b'v1.12.0-6726-g5522d670af' 1.13.0-dev20190126`"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25386", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25386/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25386/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/25386/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/25386", "id": 405194348, "node_id": "MDU6SXNzdWU0MDUxOTQzNDg=", "number": 25386, "title": "Add integer data types to IsTrainable for use with custom gradients", "user": {"login": "jvmncs", "id": 7891333, "node_id": "MDQ6VXNlcjc4OTEzMzM=", "avatar_url": "https://avatars2.githubusercontent.com/u/7891333?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvmncs", "html_url": "https://github.com/jvmncs", "followers_url": "https://api.github.com/users/jvmncs/followers", "following_url": "https://api.github.com/users/jvmncs/following{/other_user}", "gists_url": "https://api.github.com/users/jvmncs/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvmncs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvmncs/subscriptions", "organizations_url": "https://api.github.com/users/jvmncs/orgs", "repos_url": "https://api.github.com/users/jvmncs/repos", "events_url": "https://api.github.com/users/jvmncs/events{/privacy}", "received_events_url": "https://api.github.com/users/jvmncs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "skye", "id": 88808, "node_id": "MDQ6VXNlcjg4ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/88808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skye", "html_url": "https://github.com/skye", "followers_url": "https://api.github.com/users/skye/followers", "following_url": "https://api.github.com/users/skye/following{/other_user}", "gists_url": "https://api.github.com/users/skye/gists{/gist_id}", "starred_url": "https://api.github.com/users/skye/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skye/subscriptions", "organizations_url": "https://api.github.com/users/skye/orgs", "repos_url": "https://api.github.com/users/skye/repos", "events_url": "https://api.github.com/users/skye/events{/privacy}", "received_events_url": "https://api.github.com/users/skye/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-01-31T11:09:20Z", "updated_at": "2019-11-22T03:48:41Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 1.12.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nCurrently, there are a limited number of DTypes usable with autograd (see `IsTrainable` and `_IsBackpropagatable` below) https://github.com/tensorflow/tensorflow/blob/6631cd5e0e43e672d2de3cf1f0e29da17b57824e/tensorflow/python/ops/gradients_impl.py#L300\r\n\r\nIn particular, nodes with integer tensors automatically generate gradients of None, which breaks any call to `tf.gradients`.  This is a reasonable assumption for usual practices in machine learning, however this prevents one from creating their own autograd system using `tf.custom_gradient`.  I'd contend that, as a general purpose automatic differentiation library, TF should enable experimenting with such uses of its autograd system.  This would be particularly useful when intending to perform automatic differentiation over rings or finite fields, which are often represented in computers as sets of consecutive integers (i.e. `Z_p`).\r\n\r\n**Will this change the current api? How?**\r\nThis change shouldn't affect any standard usage of TensorFlow -- all autograd on floats will be unchanged.  The only change will occur when calling autograd on graphs that compute integer arithmetic and similar.\r\n\r\nCurrently, performing `tf.gradients` on graphs with integer tensors will raise an unhandled error:\r\n```python\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\nx_back = np.ones([2, 2])\r\ny_back = np.ones([2, 2])\r\nx = tf.Variable(x_back, dtype=tf.int32)\r\ny = tf.Variable(y_back, dtype=tf.int32)\r\nz = x + y\r\nvg = tf.gradients([z], [x, y])\r\nwith tf.Session() as sess:\r\n    sess.run(tf.global_variables_initializer())\r\n    out = sess.run(vg)\r\n    print(out)\r\n```\r\nReturns:\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Users/jasonmancuso/dropout/research/customgrad/issue_min.py\", line 16, in <module>\r\n    out = sess.run(vg)\r\n  File \"/Users/jasonmancuso/anaconda/envs/tf-encrypted/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 929, in run\r\n    run_metadata_ptr)\r\n  File \"/Users/jasonmancuso/anaconda/envs/tf-encrypted/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 1137, in _run\r\n    self._graph, fetches, feed_dict_tensor, feed_handles=feed_handles)\r\n  File \"/Users/jasonmancuso/anaconda/envs/tf-encrypted/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 471, in __init__\r\n    self._fetch_mapper = _FetchMapper.for_fetch(fetches)\r\n  File \"/Users/jasonmancuso/anaconda/envs/tf-encrypted/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 261, in for_fetch\r\n    return _ListFetchMapper(fetch)\r\n  File \"/Users/jasonmancuso/anaconda/envs/tf-encrypted/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 370, in __init__\r\n    self._mappers = [_FetchMapper.for_fetch(fetch) for fetch in fetches]\r\n  File \"/Users/jasonmancuso/anaconda/envs/tf-encrypted/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 370, in <listcomp>\r\n    self._mappers = [_FetchMapper.for_fetch(fetch) for fetch in fetches]\r\n  File \"/Users/jasonmancuso/anaconda/envs/tf-encrypted/lib/python3.5/site-packages/tensorflow/python/client/session.py\", line 258, in for_fetch\r\n    type(fetch)))\r\nTypeError: Fetch argument None has invalid type <class 'NoneType'>\r\n```\r\nSee https://github.com/tensorflow/tensorflow/issues/783#issuecomment-175824168 for other cases in which Ops can generate a `None` gradient.\r\n\r\nAfter implementing this feature, we'd return the following:\r\n```\r\n[array([[1, 1], [1, 1]], dtype=int32),\r\n array([[1, 1], [1, 1]], dtype=int32)]\r\n```\r\n\r\n**Who will benefit with this feature?**\r\nAnyone who wants to perform automatic differentiation on integer data types, as would be the case when operating in integer rings or finite fields.\r\n\r\n**Any Other info.**\r\nThis request is motivated by the [`tf-encrypted`](https://github.com/mortendahl/tf-encrypted) project."}]