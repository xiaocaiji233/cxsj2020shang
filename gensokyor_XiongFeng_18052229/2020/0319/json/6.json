[{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36590", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36590/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36590/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36590/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36590", "id": 562160855, "node_id": "MDU6SXNzdWU1NjIxNjA4NTU=", "number": 36590, "title": "Building a static library for windows with visual studio.", "user": {"login": "JesperLindberg", "id": 35178595, "node_id": "MDQ6VXNlcjM1MTc4NTk1", "avatar_url": "https://avatars3.githubusercontent.com/u/35178595?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JesperLindberg", "html_url": "https://github.com/JesperLindberg", "followers_url": "https://api.github.com/users/JesperLindberg/followers", "following_url": "https://api.github.com/users/JesperLindberg/following{/other_user}", "gists_url": "https://api.github.com/users/JesperLindberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/JesperLindberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JesperLindberg/subscriptions", "organizations_url": "https://api.github.com/users/JesperLindberg/orgs", "repos_url": "https://api.github.com/users/JesperLindberg/repos", "events_url": "https://api.github.com/users/JesperLindberg/events{/privacy}", "received_events_url": "https://api.github.com/users/JesperLindberg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-09T11:17:23Z", "updated_at": "2020-03-04T01:28:08Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 2.1\r\n- Are you willing to contribute it (Yes/No): yes (but not sure I can)\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nI want a feature to build a static library for C++ integrating on windows with visual studio. Or a static library that is available for download.\r\n\r\n**Will this change the current api? How?**\r\nNo, it will not change the api.\r\n\r\n**Who will benefit with this feature?**\r\nEveryone who has a C++ project in visual studio and want to implement tensorflow.\r\n\r\n**Any Other info.**\r\nIt would have been nice with a full guide to how to do it. This is something I could contribute with if we ever get the feature."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36574", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36574/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36574/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36574/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36574", "id": 562007042, "node_id": "MDU6SXNzdWU1NjIwMDcwNDI=", "number": 36574, "title": "TensorFlow 2.0 - ValueError: tf.function-decorated", "user": {"login": "arjun-majumdar", "id": 9945187, "node_id": "MDQ6VXNlcjk5NDUxODc=", "avatar_url": "https://avatars1.githubusercontent.com/u/9945187?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arjun-majumdar", "html_url": "https://github.com/arjun-majumdar", "followers_url": "https://api.github.com/users/arjun-majumdar/followers", "following_url": "https://api.github.com/users/arjun-majumdar/following{/other_user}", "gists_url": "https://api.github.com/users/arjun-majumdar/gists{/gist_id}", "starred_url": "https://api.github.com/users/arjun-majumdar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arjun-majumdar/subscriptions", "organizations_url": "https://api.github.com/users/arjun-majumdar/orgs", "repos_url": "https://api.github.com/users/arjun-majumdar/repos", "events_url": "https://api.github.com/users/arjun-majumdar/events{/privacy}", "received_events_url": "https://api.github.com/users/arjun-majumdar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1190546177, "node_id": "MDU6TGFiZWwxMTkwNTQ2MTc3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:autograph", "name": "comp:autograph", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-02-08T11:32:18Z", "updated_at": "2020-03-09T07:15:44Z", "closed_at": null, "author_association": "NONE", "body": "Hello, I have a code (for MNIST dataset) in which I am doing the following steps:\r\n\r\n1. Train model\r\n1. Prune model (using \"tensorflow_model_optimization\" for say p%)\r\n1. Create a mask of pruned model, so that the sparsity is maintained in subsequent steps\r\n1. Reset weights of non-pruned model to random initialized weights when model was initialized\r\n\r\nI do the following steps iteratively 'n' times.\r\n\r\nThe code can be found in:\r\nhttps://github.com/arjun-majumdar/tensorflow_codes/blob/master/Recreating_Error.ipynb\r\n\r\n\r\nFor retraining a pruned model, I use 'GradientTape' along with mask. Now, the first time the model is trained using *train_one_step()* and *test_step()* functions which are @tf.function annotated functions, things work fine. But when I try to use them again (in cell 76 of Jupyter notebook), it gives me the error:\r\n\r\n> ---------------------------------------------------------------------------\r\n> ValueError                                Traceback (most recent call last)\r\n> <ipython-input-76-9827a84843f1> in <module>\r\n>      13     for x, y in train_dataset:\r\n>      14         # train_step(x, y)\r\n> ---> 15         train_one_step(model_gt_stripped, mask_model_stripped, optimizer, x, y)\r\n>      16 \r\n>      17     for x_t, y_t in test_dataset:\r\n> \r\n> ~/.local/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py in __call__(self, *args, **kwds)\r\n>     455 \r\n>     456     tracing_count = self._get_tracing_count()\r\n> --> 457     result = self._call(*args, **kwds)\r\n>     458     if tracing_count == self._get_tracing_count():\r\n>     459       self._call_counter.called_without_tracing()\r\n> \r\n> ~/.local/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py in _call(self, *args, **kwds)\r\n>     485       # In this case we have created variables on the first call, so we run the\r\n>     486       # defunned version which is guaranteed to never create variables.\r\n> --> 487       return self._stateless_fn(*args, **kwds)  # pylint: disable=not-callable\r\n>     488     elif self._stateful_fn is not None:\r\n>     489       # Release the lock early so that multiple threads can perform the call\r\n> \r\n> ~/.local/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py in __call__(self, *args, **kwargs)\r\n>    1820   def __call__(self, *args, **kwargs):\r\n>    1821     \"\"\"Calls a graph function specialized to the inputs.\"\"\"\r\n> -> 1822     graph_function, args, kwargs = self._maybe_define_function(args, kwargs)\r\n>    1823     return graph_function._filtered_call(args, kwargs)  # pylint: disable=protected-access\r\n>    1824 \r\n> \r\n> ~/.local/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py in _maybe_define_function(self, args, kwargs)\r\n>    2148         graph_function = self._function_cache.primary.get(cache_key, None)\r\n>    2149         if graph_function is None:\r\n> -> 2150           graph_function = self._create_graph_function(args, kwargs)\r\n>    2151           self._function_cache.primary[cache_key] = graph_function\r\n>    2152         return graph_function, args, kwargs\r\n> \r\n> ~/.local/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py in _create_graph_function(self, args, kwargs, override_flat_arg_shapes)\r\n>    2039             arg_names=arg_names,\r\n>    2040             override_flat_arg_shapes=override_flat_arg_shapes,\r\n> -> 2041             capture_by_value=self._capture_by_value),\r\n>    2042         self._function_attributes,\r\n>    2043         # Tell the ConcreteFunction to clean up its graph once it goes out of\r\n> \r\n> ~/.local/lib/python3.7/site-packages/tensorflow_core/python/framework/func_graph.py in func_graph_from_py_func(name, python_func, args, kwargs, signature, func_graph, autograph, autograph_options, add_control_dependencies, arg_names, op_return_value, collections, capture_by_value, override_flat_arg_shapes)\r\n>     913                                           converted_func)\r\n>     914 \r\n> --> 915       func_outputs = python_func(*func_args, **func_kwargs)\r\n>     916 \r\n>     917       # invariant: `func_outputs` contains only Tensors, CompositeTensors,\r\n> \r\n> ~/.local/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py in wrapped_fn(*args, **kwds)\r\n>     356         # __wrapped__ allows AutoGraph to swap in a converted function. We give\r\n>     357         # the function a weak reference to itself to avoid a reference cycle.\r\n> --> 358         return weak_wrapped_fn().__wrapped__(*args, **kwds)\r\n>     359     weak_wrapped_fn = weakref.ref(wrapped_fn)\r\n>     360 \r\n> \r\n> ~/.local/lib/python3.7/site-packages/tensorflow_core/python/framework/func_graph.py in wrapper(*args, **kwargs)\r\n>     903           except Exception as e:  # pylint:disable=broad-except\r\n>     904             if hasattr(e, \"ag_error_metadata\"):\r\n> --> 905               raise e.ag_error_metadata.to_exception(e)\r\n>     906             else:\r\n>     907               raise\r\n> \r\n> ValueError: in converted code:\r\n> \r\n>     <ipython-input-44-d0ca499a4063>:29 train_one_step  *\r\n>         optimizer.apply_gradients(zip(grad_mask_mul, model.trainable_variables))\r\n>     /home/majumdar/.local/lib/python3.7/site-packages/tensorflow_core/python/keras/optimizer_v2/optimizer_v2.py:435 apply_gradients\r\n>         self._create_slots(var_list)\r\n>     /home/majumdar/.local/lib/python3.7/site-packages/tensorflow_core/python/keras/optimizer_v2/adam.py:146 _create_slots\r\n>         self.add_slot(var, 'm')\r\n>     /home/majumdar/.local/lib/python3.7/site-packages/tensorflow_core/python/keras/optimizer_v2/optimizer_v2.py:587 add_slot\r\n>         initial_value=initial_value)\r\n>     /home/majumdar/.local/lib/python3.7/site-packages/tensorflow_core/python/ops/variables.py:260 __call__\r\n>         return cls._variable_v2_call(*args, **kwargs)\r\n>     /home/majumdar/.local/lib/python3.7/site-packages/tensorflow_core/python/ops/variables.py:254 _variable_v2_call\r\n>         shape=shape)\r\n>     /home/majumdar/.local/lib/python3.7/site-packages/tensorflow_core/python/ops/variables.py:65 getter\r\n>         return captured_getter(captured_previous, **kwargs)\r\n>     /home/majumdar/.local/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py:413 invalid_creator_scope\r\n>         \"tf.function-decorated function tried to create \"\r\n> \r\n>     ValueError: tf.function-decorated function tried to create variables on non-first call.\r\n> \r\n> \r\n\r\n\r\nThe only way of avoiding this \"ValueError\" is by rerunning the *train_one_step()* and *test_step()* @tf.function annotated functions!\r\n\r\nWhy is this happening?\r\n\r\nThanks!"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36567", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36567/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36567/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36567/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/36567", "id": 561955112, "node_id": "MDExOlB1bGxSZXF1ZXN0MzcyNjY4NTQ2", "number": 36567, "title": "Corrected docstring for tf.signal.frame", "user": {"login": "jmsmdy", "id": 47697814, "node_id": "MDQ6VXNlcjQ3Njk3ODE0", "avatar_url": "https://avatars3.githubusercontent.com/u/47697814?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jmsmdy", "html_url": "https://github.com/jmsmdy", "followers_url": "https://api.github.com/users/jmsmdy/followers", "following_url": "https://api.github.com/users/jmsmdy/following{/other_user}", "gists_url": "https://api.github.com/users/jmsmdy/gists{/gist_id}", "starred_url": "https://api.github.com/users/jmsmdy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jmsmdy/subscriptions", "organizations_url": "https://api.github.com/users/jmsmdy/orgs", "repos_url": "https://api.github.com/users/jmsmdy/repos", "events_url": "https://api.github.com/users/jmsmdy/events{/privacy}", "received_events_url": "https://api.github.com/users/jmsmdy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-08T02:12:51Z", "updated_at": "2020-02-28T18:01:59Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/36567", "html_url": "https://github.com/tensorflow/tensorflow/pull/36567", "diff_url": "https://github.com/tensorflow/tensorflow/pull/36567.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/36567.patch"}, "body": "Corrected docstring for tf.signal.frame.\r\n\r\nIssue opened here: https://github.com/tensorflow/tensorflow/issues/36547"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36560", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36560/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36560/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36560/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/36560", "id": 561896894, "node_id": "MDExOlB1bGxSZXF1ZXN0MzcyNjIxNzM4", "number": 36560, "title": "[ROCm] Fix for a test regression on the ROCm platform - 200207 - 2", "user": {"login": "deven-amd", "id": 36858332, "node_id": "MDQ6VXNlcjM2ODU4MzMy", "avatar_url": "https://avatars2.githubusercontent.com/u/36858332?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deven-amd", "html_url": "https://github.com/deven-amd", "followers_url": "https://api.github.com/users/deven-amd/followers", "following_url": "https://api.github.com/users/deven-amd/following{/other_user}", "gists_url": "https://api.github.com/users/deven-amd/gists{/gist_id}", "starred_url": "https://api.github.com/users/deven-amd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deven-amd/subscriptions", "organizations_url": "https://api.github.com/users/deven-amd/orgs", "repos_url": "https://api.github.com/users/deven-amd/repos", "events_url": "https://api.github.com/users/deven-amd/events{/privacy}", "received_events_url": "https://api.github.com/users/deven-amd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 987666414, "node_id": "MDU6TGFiZWw5ODc2NjY0MTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/ready%20to%20pull", "name": "ready to pull", "color": "2cd643", "default": false, "description": ""}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-07T22:07:56Z", "updated_at": "2020-03-11T13:58:55Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/36560", "html_url": "https://github.com/tensorflow/tensorflow/pull/36560", "diff_url": "https://github.com/tensorflow/tensorflow/pull/36560.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/36560.patch"}, "body": "The following commit introduces a test regression on the ROCm platform\r\nhttps://github.com/tensorflow/tensorflow/commit/7a931a2349591f4e2250ac2d3b6c3ca66538b740\r\n\r\nThat commit adds an explicit check for GPU device in the profiler output (if a GPU is present in the list of physical devices).\r\n\r\nSince ROCm platform does not yet support device tracing, this test now fails on the ROCm platform\r\n\r\nThe \"fix\" (until ROCm adds support for device tracing) is to disable that check on the ROCm platform\r\n\r\n\r\n--------------------------\r\n\r\n/cc @whchung @chsigg "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36555", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36555/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36555/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36555/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36555", "id": 561812797, "node_id": "MDU6SXNzdWU1NjE4MTI3OTc=", "number": 36555, "title": "Transpose op only supports 1D-4D input arrays", "user": {"login": "RobotIntelligence", "id": 37821165, "node_id": "MDQ6VXNlcjM3ODIxMTY1", "avatar_url": "https://avatars2.githubusercontent.com/u/37821165?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RobotIntelligence", "html_url": "https://github.com/RobotIntelligence", "followers_url": "https://api.github.com/users/RobotIntelligence/followers", "following_url": "https://api.github.com/users/RobotIntelligence/following{/other_user}", "gists_url": "https://api.github.com/users/RobotIntelligence/gists{/gist_id}", "starred_url": "https://api.github.com/users/RobotIntelligence/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RobotIntelligence/subscriptions", "organizations_url": "https://api.github.com/users/RobotIntelligence/orgs", "repos_url": "https://api.github.com/users/RobotIntelligence/repos", "events_url": "https://api.github.com/users/RobotIntelligence/events{/privacy}", "received_events_url": "https://api.github.com/users/RobotIntelligence/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2018-08-21T03:24:43Z", "updated_at": "2020-03-08T00:46:04Z", "closed_at": null, "author_association": "NONE", "body": "When I run tflite object detection on android demo, I got this problem:\r\n\r\njava.lang.RuntimeException: java.lang.IllegalStateException: Internal error: Unexpected failure when preparing tensor allocations: tensorflow/contrib/lite/kernels/transpose.cc Transpose op only supports 1D-4D input arrays.Node number 148 (TRANSPOSE) failed to prepare.\r\n\r\nThanks "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36547", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36547/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36547/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36547/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36547", "id": 561736763, "node_id": "MDU6SXNzdWU1NjE3MzY3NjM=", "number": 36547, "title": "Documentation error for tf.signal.frame ", "user": {"login": "jmsmdy", "id": 47697814, "node_id": "MDQ6VXNlcjQ3Njk3ODE0", "avatar_url": "https://avatars3.githubusercontent.com/u/47697814?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jmsmdy", "html_url": "https://github.com/jmsmdy", "followers_url": "https://api.github.com/users/jmsmdy/followers", "following_url": "https://api.github.com/users/jmsmdy/following{/other_user}", "gists_url": "https://api.github.com/users/jmsmdy/gists{/gist_id}", "starred_url": "https://api.github.com/users/jmsmdy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jmsmdy/subscriptions", "organizations_url": "https://api.github.com/users/jmsmdy/orgs", "repos_url": "https://api.github.com/users/jmsmdy/repos", "events_url": "https://api.github.com/users/jmsmdy/events{/privacy}", "received_events_url": "https://api.github.com/users/jmsmdy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gadagashwini", "id": 48476109, "node_id": "MDQ6VXNlcjQ4NDc2MTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/48476109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadagashwini", "html_url": "https://github.com/gadagashwini", "followers_url": "https://api.github.com/users/gadagashwini/followers", "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}", "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions", "organizations_url": "https://api.github.com/users/gadagashwini/orgs", "repos_url": "https://api.github.com/users/gadagashwini/repos", "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}", "received_events_url": "https://api.github.com/users/gadagashwini/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gadagashwini", "id": 48476109, "node_id": "MDQ6VXNlcjQ4NDc2MTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/48476109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadagashwini", "html_url": "https://github.com/gadagashwini", "followers_url": "https://api.github.com/users/gadagashwini/followers", "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}", "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions", "organizations_url": "https://api.github.com/users/gadagashwini/orgs", "repos_url": "https://api.github.com/users/gadagashwini/repos", "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}", "received_events_url": "https://api.github.com/users/gadagashwini/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-07T16:19:19Z", "updated_at": "2020-02-10T05:11:23Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\nhttps://github.com/tensorflow/tensorflow/blob/cf7fcf164c9846502b21cebb7d3d5ccf6cb626e8/tensorflow/python/ops/signal/shape_ops.py#L55-L199\r\n\r\nDocumentation:\r\nhttps://www.tensorflow.org/api_docs/python/tf/signal/frame\r\n\r\n## Description of issue (what needs changing):\r\n\r\nIn the following example, the count of frames generated with pad_end=False is incorrect\r\n    \r\n    # A batch size 3 tensor of 9152 audio samples.\r\n    audio = tf.random.normal([3, 9152])\r\n\r\n    # Compute overlapping frames of length 512 with a step of 180 (frames overlap\r\n    # by 332 samples). By default, only 50 frames are generated since the last\r\n    # 152 samples do not form a full frame.\r\n    frames = tf.signal.frame(audio, 512, 180)\r\n    frames.shape.assert_is_compatible_with([3, 50, 512])\r\n\r\nIn fact, only 49 frames are generated with pad_true=False (the default).\r\n\r\n### Clear description\r\n\r\nSuppose we are given a tensor x with x.shape[-1] == N, a frame_length == K, and a frame_step == k.\r\n\r\nTo compute tf.signal.frame(x, frame_length, frame_step) (here default axis=-1 and pad_end=False), we could equivalently stack along axis -2 the following list of slices:\r\n\r\n    [x[..., 0:K],\r\n     x[..., k:K+k],\r\n     x[..., 2*k:K+2*k],\r\n     x[..., 3*k:K+3*k],\r\n     ...\r\n     x[..., j*k:K+j*k]]\r\n\r\nwhere j is the maximum integer such that K+j*k <= N.\r\n\r\nWe can compute that j = (N - K) // k, so the number of slices in this list is j+1 = 1 + (N - K) // k. \r\n\r\nIn the example here, N = 9152, K=512, k=180, so:\r\n\r\n    j+1 = 1 + (9152-512) // 180 = 1 + 8640 // 180 = 1+48 = 49\r\n\r\nThus in the example given, the return shape should be [3, 49, 512], not [3, 50, 512]. Attached is a screenshot showing that this is indeed the behavior of tf.signal.frame, so it is an error in the documentation not in the code.\r\n\r\n![tf signal frame](https://user-images.githubusercontent.com/47697814/74045729-497e6480-499b-11ea-9107-12305554ee18.png)\r\n\r\n### Submit a pull request?\r\n\r\nI am planning to submit a pull request."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36544", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36544/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36544/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36544/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36544", "id": 561720740, "node_id": "MDU6SXNzdWU1NjE3MjA3NDA=", "number": 36544, "title": "tpu closed error ", "user": {"login": "bestpredicts", "id": 12403152, "node_id": "MDQ6VXNlcjEyNDAzMTUy", "avatar_url": "https://avatars0.githubusercontent.com/u/12403152?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bestpredicts", "html_url": "https://github.com/bestpredicts", "followers_url": "https://api.github.com/users/bestpredicts/followers", "following_url": "https://api.github.com/users/bestpredicts/following{/other_user}", "gists_url": "https://api.github.com/users/bestpredicts/gists{/gist_id}", "starred_url": "https://api.github.com/users/bestpredicts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bestpredicts/subscriptions", "organizations_url": "https://api.github.com/users/bestpredicts/orgs", "repos_url": "https://api.github.com/users/bestpredicts/repos", "events_url": "https://api.github.com/users/bestpredicts/events{/privacy}", "received_events_url": "https://api.github.com/users/bestpredicts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2020-02-07T15:50:54Z", "updated_at": "2020-02-24T05:27:59Z", "closed_at": null, "author_association": "NONE", "body": "when I run tpu on colab, I meet error \r\nEpoch 1/6\r\nWARNING:tensorflow:Gradients do not exist for variables ['tf_bert_model/bert/pooler/dense/kernel:0', 'tf_bert_model/bert/pooler/dense/bias:0'] when minimizing the loss.\r\nWARNING:tensorflow:Gradients do not exist for variables ['tf_bert_model/bert/pooler/dense/kernel:0', 'tf_bert_model/bert/pooler/dense/bias:0'] when minimizing the loss.\r\nWARNING:tensorflow:Gradients do not exist for variables ['tf_bert_model/bert/pooler/dense/kernel:0', 'tf_bert_model/bert/pooler/dense/bias:0'] when minimizing the loss.\r\nWARNING:tensorflow:Gradients do not exist for variables ['tf_bert_model/bert/pooler/dense/kernel:0', 'tf_bert_model/bert/pooler/dense/bias:0'] when minimizing the loss.\r\n 1/25 [>.............................] - ETA: 28:10\r\n---------------------------------------------------------------------------\r\nUnavailableError                          Traceback (most recent call last)\r\n<ipython-input-25-7386834902ba> in <module>()\r\n     94 \r\n     95 \r\n---> 96         model.fit(train_dataset,epochs=6)\r\n     97 \r\n     98 \r\n\r\n10 frames\r\n/usr/local/lib/python3.6/dist-packages/six.py in raise_from(value, from_value)\r\n\r\nUnavailableError: Socket closed\r\nAdditional GRPC error information:\r\n{\"created\":\"@1581089996.572389050\",\"description\":\"Error received from peer\",\"file\":\"external/grpc/src/core/lib/surface/call.cc\",\"file_line\":1039,\"grpc_message\":\"Socket closed\",\"grpc_status\":14}"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36542", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36542/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36542/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36542/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36542", "id": 561680591, "node_id": "MDU6SXNzdWU1NjE2ODA1OTE=", "number": 36542, "title": "TF 2.1.0 crashes during shape inference", "user": {"login": "bioothod", "id": 1847575, "node_id": "MDQ6VXNlcjE4NDc1NzU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1847575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bioothod", "html_url": "https://github.com/bioothod", "followers_url": "https://api.github.com/users/bioothod/followers", "following_url": "https://api.github.com/users/bioothod/following{/other_user}", "gists_url": "https://api.github.com/users/bioothod/gists{/gist_id}", "starred_url": "https://api.github.com/users/bioothod/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bioothod/subscriptions", "organizations_url": "https://api.github.com/users/bioothod/orgs", "repos_url": "https://api.github.com/users/bioothod/repos", "events_url": "https://api.github.com/users/bioothod/events{/privacy}", "received_events_url": "https://api.github.com/users/bioothod/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2020-02-07T14:45:54Z", "updated_at": "2020-03-05T17:14:20Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): standard docker image with ubuntu 18.04\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): \r\n- Python version: v2.1.0-rc2-17-ge5bf8de 2.1.0\r\n- CUDA/cuDNN version: 10.1.243-1 / 7.6.4.38-1+cuda10.1\r\n- GPU model and memory: titan rtx 24220MiB\r\n\r\n**Describe the current behavior**\r\nUsing rather large complex model with lots of tf.TensorArray operations ends up with the crash. 100% reproducible, but overall codebase (python only) is quite large and input pipeline is tricky.\r\n\r\n**Code to reproduce the issue**\r\nThis is the class I use to operate with tensor arrays, which seems to be a reason for crash.\r\nIt works in evaluation mode though\r\n```\r\nclass RNNBatch:\r\n    def __init__(self, rnn_layer, rnn_batch_size, true_words, true_lengths, training):\r\n        self.rnn_batch_size = rnn_batch_size\r\n        self.training = training\r\n        self.dtype = tf.float32\r\n\r\n        self.rnn_layer = rnn_layer\r\n        max_sequence_len = rnn_layer.max_sequence_len\r\n        dictionary_size = rnn_layer.dictionary_size\r\n\r\n        self.true_words = true_words\r\n        self.true_lengths = true_lengths\r\n\r\n        self.written = 0\r\n        self.rnn_processed_start = 0\r\n\r\n        self.output_written = 0\r\n\r\n    def run(self, arrays):\r\n        selected_features = arrays['selected_features'].concat()\r\n\r\n        batch_size = tf.shape(selected_features)[0]\r\n        states_h = tf.zeros((batch_size, self.rnn_layer.num_rnn_units), dtype=self.dtype)\r\n        states_c = tf.zeros((batch_size, self.rnn_layer.num_rnn_units), dtype=self.dtype)\r\n        states = [states_h, states_c]\r\n\r\n        tw = self.true_words[self.rnn_processed_start : self.rnn_processed_start + self.written, ...]\r\n        tl = self.true_lengths[self.rnn_processed_start : self.rnn_processed_start + self.written, ...]\r\n\r\n        out, out_ar = self.rnn_layer(selected_features, tw, tl, states, self.training)\r\n\r\n        arrays['outputs'] = arrays['outputs'].write(self.output_written, out)\r\n        arrays['outputs_ar'] = arrays['outputs'].write(self.output_written, out_ar)\r\n        self.output_written += 1\r\n\r\n        self.rnn_processed_start += self.written\r\n        self.written = 0\r\n\r\n        return arrays\r\n\r\n    def feed_crop(self, cropped_features, arrays):\r\n        arrays['selected_features'] = arrays['selected_features'].write(self.written, cropped_features)\r\n        self.written += 1\r\n\r\n        if self.written == self.rnn_batch_size:\r\n            arrays = self.run(arrays)\r\n            arrays['selected_features'] = tf.TensorArray(cropped_features.dtype, size=0, element_shape=tf.TensorShape([None] + [cropped_features.shape[1:]]))\r\n\r\n\r\n        return arrays\r\n\r\n    def return_values(self, arrays):\r\n        if self.written != 0:\r\n            arrays = self.run(arrays)\r\n\r\n        return arrays['outputs'].concat(), arrays['outputs_ar'].concat()\r\n\r\n```\r\n\r\nAnd the use case is something like this:\r\n```\r\nimages -> huge tensor of data ->\r\n        rnn_batch = RNNBatch(self.rnn_layer, 64, true_words, true_lengths, training)\r\n        arrays = {\r\n            'selected_features': tf.TensorArray(dtype, size=0, dynamic_size=True, element_shape=tf.TensorShape([None, crop_size, crop_size, features_full.shape[3]])),\r\n            'outputs': tf.TensorArray(dtype, size=0, dynamic_size=True, element_shape=tf.TensorShape([None, self.max_sequence_len, self.dictionary_size])),\r\n            'outputs_ar': tf.TensorArray(dtype, size=0, dynamic_size=True, element_shape=tf.TensorShape([None, self.max_sequence_len, self.dictionary_size])),\r\n        }\r\n\r\n        for idx in tf.range(batch_size):\r\n            for crop_idx in tf.range(num_crops):\r\n                  arrays = rnn_batch.feed_crop(cropped_features, arrays)\r\n```\r\n\r\n**Other info / logs**\r\nFull traceback: [tf.traceback.txt](https://github.com/tensorflow/tensorflow/files/4171246/tf.traceback.txt)\r\nThere is also a core file, gzipped size is about 749M.\r\n\r\nWhat should be the next steps (besides rewriting above class) to debug this problem?\r\n\r\nAttached stack trace which ends up like this:\r\n```\r\nThread 1 \"python3\" received signal SIGSEGV, Segmentation fault.\r\n0x00007fff647051e0 in tensorflow::(anonymous namespace)::{lambda(tensorflow::shape_inference::InferenceContext*)#14}::_FUN(tensorflow::shape_inference::InferenceContext*) ()\r\n   from /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n(gdb) bt                                             \r\n#0  0x00007fff647051e0 in tensorflow::(anonymous namespace)::{lambda(tensorflow::shape_inference::InferenceContext*)#14}::_FUN(tensorflow::shape_inference::InferenceContext*) ()\r\n   from /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n#1  0x00007fff5d5a6104 in std::_Function_handler<tensorflow::Status (tensorflow::shape_inference::InferenceContext*), tensorflow::Status (*)(tensorflow::shape_inference::InferenceContext*)>::_M_invoke(std::_Any_d\r\nata const&, tensorflow::shape_inference::InferenceContext*&&) () from /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n#2  0x00007fff5a018c22 in tensorflow::shape_inference::InferenceContext::Run(std::function<tensorflow::Status (tensorflow::shape_inference::InferenceContext*)> const&) ()\r\n   from /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/../libtensorflow_framework.so.2\r\n#3  0x00007fff64342a14 in tensorflow::ShapeRefiner::RunShapeFn(tensorflow::Node const*, tensorflow::OpRegistrationData const*, tensorflow::ExtendedInferenceContext*) ()\r\n   from /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n#4  0x00007fff643443ee in tensorflow::ShapeRefiner::AddNode(tensorflow::Node const*) () from /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n#5  0x00007fff5df740f1 in TF_FinishOperation () from /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n#6  0x00007fff5d529dd6 in _wrap_TF_FinishOperation () from /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n```\r\n\r\nUnfortunately there is no debug package I could use to make better trace "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36539", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36539/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36539/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36539/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36539", "id": 561638527, "node_id": "MDU6SXNzdWU1NjE2Mzg1Mjc=", "number": 36539, "title": "tf.data.Dataset unusable with steps_per_epoch standard training loop", "user": {"login": "Flamefire", "id": 309017, "node_id": "MDQ6VXNlcjMwOTAxNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/309017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Flamefire", "html_url": "https://github.com/Flamefire", "followers_url": "https://api.github.com/users/Flamefire/followers", "following_url": "https://api.github.com/users/Flamefire/following{/other_user}", "gists_url": "https://api.github.com/users/Flamefire/gists{/gist_id}", "starred_url": "https://api.github.com/users/Flamefire/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Flamefire/subscriptions", "organizations_url": "https://api.github.com/users/Flamefire/orgs", "repos_url": "https://api.github.com/users/Flamefire/repos", "events_url": "https://api.github.com/users/Flamefire/events{/privacy}", "received_events_url": "https://api.github.com/users/Flamefire/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2020-02-07T13:30:41Z", "updated_at": "2020-03-08T16:21:36Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Mint \r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.1.0\r\n- Python version: 3.7.4\r\n\r\n**Describe the current behavior**\r\n\r\nThis is the underlying issue for https://github.com/tensorflow/tensorflow/issues/36153\r\n\r\nBasically:\r\n- `Dataset` can be used as/converted to an iterator\r\n- Once the iterator reaches the end of the dataset it does not restart -> Yields no more samples\r\n- `steps_per_epoch` for the `fit` method of a keras model can be used to specify the number of batches to run per epoch, more exactly: The number of times the iterator is advanced/dereferenced\r\n- `steps_per_epoch` is required for e.g. if not the full dataset should be traversed. Either due to external requirements or to avoid using the trailing (incomplete) batch.\r\n- `steps_per_epoch` is absolutely required to be set for `MultiWorkerMirroredStrategy`: https://www.tensorflow.org/tutorials/distribute/multi_worker_with_keras#train_the_model_with_multiworkermirroredstrategy\r\n- Whether to recreate an iterator for each epoch out of the dataset is determined by `DatasetAdapter.should_recreate_iterator` at https://github.com/tensorflow/tensorflow/blob/v2.1.0/tensorflow/python/keras/engine/training_v2.py#L241-L242\r\n- Note that the iterator absolutely must be recreated for all common use cases:\r\n  - Iterate over full dataset\r\n  - Iterate over full dataset except incomplete trailing batch\r\n  - Iterate over a random subset of the full dataset per epoch\r\n  - Not to be recreated for: Infinite datasets. **Maybe** If the full dataset should be consumed over multiple epochs. But why? What should happen if the dataset is exhausted after some epoch? Usually restart, right?\r\n\r\nIn the current TF (2.1.0) the implementation of `DatasetAdapter.should_recreate_iterator` is: `return self.get_size() is not None or steps_per_epoch is None`: https://github.com/tensorflow/tensorflow/blob/v2.1.0/tensorflow/python/keras/engine/data_adapter.py#L208\r\n\r\nThis is **wrong**. For datasets the size is always None (see https://github.com/tensorflow/tensorflow/issues/36531 which intends for this to be changed) and as motivated above having `steps_per_epoch` set is a common use case but the iterator should still be recreated on each epoch.\r\n\r\nThis was recently changed to ` (self._user_steps is None or cardinality.cardinality(self._dataset).numpy() == self._user_steps)` https://github.com/tensorflow/tensorflow/commit/6be131d0860559954c42685a87c63f16cebb2185#diff-f8dd40712ac721c1b363e1a1ec44c1a3R741-R747\r\n\r\nThis is also **wrong**. Again assume `_user_steps` is set (see above reasoning): First the `cardinality` might be unknown, e.g. for any TFDS dataset (and `TFRecordDataset`) it is unknown. I guess due to use of `interleave` in the dataset reader. Second even if the size was known it may not be equal to the number of steps. Common example: Skipping the last batch.\r\n\r\n**Describe the expected behavior**\r\n\r\nThis is a design issue and hence hard to resolve.\r\n\r\nIn general it would be best to eliminate the UNKNOWN size of a dataset. But when reading data line-by-line from a file it might not be known upfront. So the user has to input the size of the dataset or specify explicitly `AUTO` which would iterate over the whole dataset once to get the number of samples. This can be costly but should not be possible in general (e.g. TFDS knows the number of samples)\r\n\r\nI think the sanest approach would be to default to recreating the iterator on each epoch UNLESS the dataset is known to be infinite. This might still be wrong for cases I can't imagine right now but is correct for all cases I can think of. Maybe even allow the user to specify this, but this default is IMO way better than the current.\r\n\r\nThe other approach would be to recreate the iterator when it runs out of data after starting an epoch. This would partially solve the issue, but fails for:\r\n- Omitting the trailing batch: It would yield the incomplete batch from the last epoch first, but that should be skipped.\r\n- Using only some random samples per batch but wanting to shuffle before each batch: It would happily consume the rest of the samples and not see the samples used in an earlier epoch until it runs out of data\r\n\r\nWith the UNKNOWN size fixed, one could also fix the check at  https://github.com/tensorflow/tensorflow/commit/6be131d0860559954c42685a87c63f16cebb2185#diff-f8dd40712ac721c1b363e1a1ec44c1a3R741-R747 to check if `_user_steps` yields 1 epoch (and optional trailing batches) by using `size // steps == 1` which would be better than the previous approach (recreate iterator when out of data) as the use case with of Omitting the trailing batch is covered. But it would fail for the other.\r\n\r\nSo my suggestion would to\r\n- (optional) avoid UNKNOWN sizes\r\n- recreate iterators unless dataset is infinite by default\r\n- allow the user to overwrite this explicitly, maybe via `with_options` of the dataset\r\n\r\n\r\n**Code to reproduce the issue**\r\nSome reduced example code based on e.g. https://www.tensorflow.org/tutorials/distribute/multi_worker_with_keras#train_the_model_with_multiworkermirroredstrategy\r\n\r\n```\r\nimport tensorflow as tf\r\nimport tensorflow_datasets as tfds\r\nimport tensorflow as tf\r\nfrom tensorflow.python.data.experimental.ops import cardinality\r\nimport numpy as np\r\ntfds.disable_progress_bar()\r\n\r\n# Scaling MNIST data from (0, 255] to (0., 1.]\r\ndef scale(image, label):\r\n    image = tf.cast(image, tf.float32)\r\n    image /= 255\r\n    return image, label\r\n\r\ndef build_and_compile_cnn_model():\r\n    model = tf.keras.Sequential([\r\n        tf.keras.layers.Conv2D(32,\r\n                               3,\r\n                               activation='relu',\r\n                               input_shape=(28, 28, 1)),\r\n        tf.keras.layers.MaxPooling2D(),\r\n        tf.keras.layers.Flatten(),\r\n        tf.keras.layers.Dense(64, activation='relu'),\r\n        tf.keras.layers.Dense(10, activation='softmax')\r\n    ])\r\n    model.compile(loss=tf.keras.losses.sparse_categorical_crossentropy,\r\n                  optimizer=tf.keras.optimizers.SGD(learning_rate=0.001),\r\n                  metrics=['accuracy'])\r\n    return model\r\n\r\nBATCH_SIZE = 64\r\nif False:\r\n    examples = np.ones([10*BATCH_SIZE,28,28,1])\r\n    labels = np.ones([examples.shape[0]])\r\n    dataset = tf.data.Dataset.from_tensor_slices((examples, labels))\r\n    num_examples = examples.shape[0]\r\nelse:\r\n    datasets, info = tfds.load(name='mnist', with_info=True, as_supervised=True)\r\n    dataset = datasets['test']\r\n    num_examples = info.splits['test'].num_examples\r\n\r\nx = dataset.map(scale).cache().shuffle(10000).batch(BATCH_SIZE)\r\nmodel = build_and_compile_cnn_model()\r\n\r\ncard = cardinality.cardinality(x)\r\nnum_batches = sum(1 for _ in x)\r\nfull_batches = num_examples // BATCH_SIZE\r\nprint(\"Samples: %s\\nBatches: %s (%s full)\\nCardinality: %s\" % (num_examples, num_batches, full_batches, card))\r\nmodel.fit(x=x, epochs=2, steps_per_epoch=full_batches)\r\n\r\n```\r\n\r\n**Other info / logs**\r\nThere is a warning:\r\n> WARNING:tensorflow:Your input ran out of data; interrupting training. Make sure that your dataset or generator can generate at least `steps_per_epoch * epochs` batches (in this case, 312 batches). You may need to use the repeat() function when building your dataset.\r\n\r\nIt seems that adding `repeat()` and hence creating an infinite dataset is a viable option. However the docu also states\r\n> In TF 1.X, the idiomatic way to create epochs was through the `repeat` transformation:\r\n>     In TF 2.0, `tf.data.Dataset` objects are Python iterables which makes it possible to also create epochs through Python iteration:\r\n\r\nSo it seems that it should not be required and as per above explanation the return value of `DatasetAdapter.should_recreate_iterator` is not correct."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36536", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36536/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36536/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36536/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36536", "id": 561618488, "node_id": "MDU6SXNzdWU1NjE2MTg0ODg=", "number": 36536, "title": "Failed build on Windows with clang-cl", "user": {"login": "Korsar13", "id": 44565681, "node_id": "MDQ6VXNlcjQ0NTY1Njgx", "avatar_url": "https://avatars0.githubusercontent.com/u/44565681?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Korsar13", "html_url": "https://github.com/Korsar13", "followers_url": "https://api.github.com/users/Korsar13/followers", "following_url": "https://api.github.com/users/Korsar13/following{/other_user}", "gists_url": "https://api.github.com/users/Korsar13/gists{/gist_id}", "starred_url": "https://api.github.com/users/Korsar13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Korsar13/subscriptions", "organizations_url": "https://api.github.com/users/Korsar13/orgs", "repos_url": "https://api.github.com/users/Korsar13/repos", "events_url": "https://api.github.com/users/Korsar13/events{/privacy}", "received_events_url": "https://api.github.com/users/Korsar13/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-07T12:49:42Z", "updated_at": "2020-02-11T09:45:55Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: commit 1cd499a7fc0e782cf2a2fe88eb2e64783e631b2b\r\n- Python version: 3.8\r\n- Installed using virtualenv? pip? conda?: \r\n- Bazel version (if compiling from source): 1.2.1\r\n- GCC/Compiler version (if compiling from source): clang-cl\r\n- CUDA/cuDNN version: ---\r\n- GPU model and memory: ---\r\n\r\n**Describe the problem**\r\nconfigure: No XLA / ROCm / CUDA. No \"disable inline\"\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n```\r\nbazel build -s --config opt --define=no_tensorflow_py_deps=true --compiler=clang-cl //tensorflow:tensorflow\r\n```\r\n\r\nBuild failed on final step: linking tensorflow.dll\r\n\r\n**Any other info / logs**\r\n```\r\nSUBCOMMAND: # //tensorflow:tensorflow.dll [action 'Linking tensorflow/tensorflow.dll', configuration: 9b882a621aaf289d03959a0bb55e368bbb8a258a98684e2f2cbeba1e04f08296]\r\ncd F:/.bazel/tf-llvm/execroot/org_tensorflow\r\n  SET LIB=c:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\VC\\Tools\\MSVC\\14.25.28508\\ATLMFC\\lib\\x64;c:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\VC\\Tools\\MSVC\\14.25.28508\\lib\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.18362.0\\ucrt\\x64;C:\\Program Files (x86)\\Windows Kits\\8.1\\lib\\winv6.3\\um\\x64;;c:\\bin\\LLVM\\lib\\clang\\9.0.0\\lib\\windows\r\n    SET PATH=c:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\VC\\Tools\\MSVC\\14.25.28508\\bin\\HostX64\\x64;c:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\Common7\\IDE\\VC\\VCPackages;c:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\Common7\\IDE\\CommonExtensions\\Microsoft\\TestWindow;c:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\Common7\\IDE\\CommonExtensions\\Microsoft\\TeamFoundation\\Team Explorer;c:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\MSBuild\\Current\\bin\\Roslyn;c:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\Team Tools\\Performance Tools\\x64;c:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\Team Tools\\Performance Tools;C:\\Program Files (x86)\\Microsoft Visual Studio\\Shared\\Common\\VSPerfCollectionTools\\vs2019\\\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio\\Shared\\Common\\VSPerfCollectionTools\\vs2019\\;C:\\Program Files (x86)\\Windows Kits\\8.1\\bin\\x64;c:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\\\MSBuild\\Current\\Bin;C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319;c:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\Common7\\IDE\\;c:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\Common7\\Tools\\;;C:\\WINDOWS\\system32;c:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\Common7\\IDE\\CommonExtensions\\Microsoft\\CMake\\CMake\\bin;c:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\Common7\\IDE\\CommonExtensions\\Microsoft\\CMake\\Ninja\r\n    SET PWD=/proc/self/cwd\r\n    SET PYTHON_BIN_PATH=C:/K13/NS/tf-llvm/Scripts/python.exe\r\n    SET PYTHON_LIB_PATH=C:/K13/NS/tf-llvm/Lib/site-packages\r\n    SET RUNFILES_MANIFEST_ONLY=1\r\n    SET TEMP=F:\\Temp\r\n    SET TF2_BEHAVIOR=1\r\n    SET TF_CONFIGURE_IOS=0\r\n    SET TMP=F:\\Temp\r\n  c:/bin/LLVM/bin/lld-link.exe @bazel-out/x64_windows-opt/bin/tensorflow/tensorflow.dll-2.params\r\nINFO: From Linking tensorflow/tensorflow.dll:\r\nlld-link: warning: ignoring unknown argument '-lpthread'\r\nlld-link: warning: ignoring unknown argument '-lm'\r\nlld-link: warning: ignoring unknown argument '-lpthread'\r\nlld-link: warning: ignoring unknown argument '-lm'\r\nERROR: F:/lib/tensorflow-llvm/tensorflow/BUILD:623:1: output 'tensorflow/tensorflow.dll' was not created\r\nERROR: F:/lib/tensorflow-llvm/tensorflow/BUILD:623:1: not all outputs were created or valid\r\nTarget //tensorflow:tensorflow failed to build\r\nINFO: Elapsed time: 9411.542s, Critical Path: 3438.48s\r\nINFO: 1964 processes: 1964 local.\r\nFAILED: Build did NOT complete successfully\r\n```\r\n\r\nBut after repeating same command (with lld-link.exe replaced to LINK.EXE) -- success:\r\n```\r\n(tf-llvm) F:\\.bazel\\tf-llvm\\execroot\\org_tensorflow>LINK.EXE @bazel-out/x64_windows-opt/bin/tensorflow/tensorflow.dll-2.params\r\nLINK : warning LNK4044: unrecognized option '/lpthread'; ignored\r\nLINK : warning LNK4044: unrecognized option '/lm'; ignored\r\nLINK : warning LNK4044: unrecognized option '/lpthread'; ignored\r\nLINK : warning LNK4044: unrecognized option '/lm'; ignored\r\n   Creating library bazel-out/x64_windows-opt/bin/tensorflow/tensorflow.dll.if.lib and object bazel-out/x64_windows-opt/bin/tensorflow/tensorflow.dll.if.exp\r\n..... (skip warning) .....\r\n\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36523", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36523/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36523/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36523/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/36523", "id": 561308088, "node_id": "MDExOlB1bGxSZXF1ZXN0MzcyMTQzODI1", "number": 36523, "title": "Check in generated protobufs for Go", "user": {"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1178505529, "node_id": "MDU6TGFiZWwxMTc4NTA1NTI5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/prtype:bugfix", "name": "prtype:bugfix", "color": "159b2e", "default": false, "description": "PR to fix a bug"}, {"id": 987666414, "node_id": "MDU6TGFiZWw5ODc2NjY0MTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/ready%20to%20pull", "name": "ready to pull", "color": "2cd643", "default": false, "description": ""}, {"id": 1173072136, "node_id": "MDU6TGFiZWwxMTczMDcyMTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XL", "name": "size:XL", "color": "adafea", "default": false, "description": "CL Change Size:Extra Large"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-06T22:29:23Z", "updated_at": "2020-02-07T05:53:10Z", "closed_at": null, "author_association": "MEMBER", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/36523", "html_url": "https://github.com/tensorflow/tensorflow/pull/36523", "diff_url": "https://github.com/tensorflow/tensorflow/pull/36523.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/36523.patch"}, "body": "To make it more idiomatic and easier to install. See #35133 \r\n\r\nGunhan, any objections to doing this? It adds 1.3 MB of generated files to the repo."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36521", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36521/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36521/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36521/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/36521", "id": 561240280, "node_id": "MDExOlB1bGxSZXF1ZXN0MzcyMDg3NDY2", "number": 36521, "title": "TemporalDropout1D", "user": {"login": "halidziya", "id": 9038065, "node_id": "MDQ6VXNlcjkwMzgwNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/9038065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/halidziya", "html_url": "https://github.com/halidziya", "followers_url": "https://api.github.com/users/halidziya/followers", "following_url": "https://api.github.com/users/halidziya/following{/other_user}", "gists_url": "https://api.github.com/users/halidziya/gists{/gist_id}", "starred_url": "https://api.github.com/users/halidziya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/halidziya/subscriptions", "organizations_url": "https://api.github.com/users/halidziya/orgs", "repos_url": "https://api.github.com/users/halidziya/repos", "events_url": "https://api.github.com/users/halidziya/events{/privacy}", "received_events_url": "https://api.github.com/users/halidziya/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-02-06T20:05:54Z", "updated_at": "2020-02-11T10:02:29Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/36521", "html_url": "https://github.com/tensorflow/tensorflow/pull/36521", "diff_url": "https://github.com/tensorflow/tensorflow/pull/36521.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/36521.patch"}, "body": "Removing words and estimating from context is one of the recent language modeling tasks. This kind of noise could be useful as regularization as well. "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36520", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36520/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36520/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36520/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36520", "id": 561203383, "node_id": "MDU6SXNzdWU1NjEyMDMzODM=", "number": 36520, "title": "wrong error message from tf.data.Dataset when GPU OOM", "user": {"login": "jiayiliu", "id": 1511514, "node_id": "MDQ6VXNlcjE1MTE1MTQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/1511514?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jiayiliu", "html_url": "https://github.com/jiayiliu", "followers_url": "https://api.github.com/users/jiayiliu/followers", "following_url": "https://api.github.com/users/jiayiliu/following{/other_user}", "gists_url": "https://api.github.com/users/jiayiliu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jiayiliu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jiayiliu/subscriptions", "organizations_url": "https://api.github.com/users/jiayiliu/orgs", "repos_url": "https://api.github.com/users/jiayiliu/repos", "events_url": "https://api.github.com/users/jiayiliu/events{/privacy}", "received_events_url": "https://api.github.com/users/jiayiliu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-06T18:52:27Z", "updated_at": "2020-02-07T18:03:07Z", "closed_at": null, "author_association": "NONE", "body": "I am filing this issue in case someone else ran into the same problem.\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.1.0\r\n- Python version: 3.6.9\r\n- CUDA/cuDNN version: 10.1/7\r\n- GPU model and memory:Titan XP/12GB\r\n\r\n**Describe the current behavior**\r\n\r\nWhen GPU memory is `fully` taken by another tf session, I failed to run the following script:\r\n\r\n```python\r\ntf.data.Dataset.list_files(\"some files\")\r\n```\r\n\r\nand got the following error:\r\n```\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: buffer_size must be greater than zero. [Op:ShuffleDatasetV2]\r\n```\r\n\r\n**Describe the expected behavior**\r\n\r\nI expected to get an OOM error, which is much clear about the real root cause of the problem.\r\n\r\n**Code to reproduce the issue**\r\n\r\nIn one python session, run some tensorflow code to take all the GPU memory  (I ran some MobileNet inference to take  11879MiB / 12194MiB of the GPU memory).\r\nIn another python session, run `tf.data.Dataset.list_files(\"./*\")`  will reproduce the misleading error message.\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36519", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36519/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36519/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36519/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/36519", "id": 561175149, "node_id": "MDExOlB1bGxSZXF1ZXN0MzcyMDMzNzA4", "number": 36519, "title": "Use deserialize-helper for deserializing dict activations", "user": {"login": "hartikainen", "id": 2308543, "node_id": "MDQ6VXNlcjIzMDg1NDM=", "avatar_url": "https://avatars1.githubusercontent.com/u/2308543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hartikainen", "html_url": "https://github.com/hartikainen", "followers_url": "https://api.github.com/users/hartikainen/followers", "following_url": "https://api.github.com/users/hartikainen/following{/other_user}", "gists_url": "https://api.github.com/users/hartikainen/gists{/gist_id}", "starred_url": "https://api.github.com/users/hartikainen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hartikainen/subscriptions", "organizations_url": "https://api.github.com/users/hartikainen/orgs", "repos_url": "https://api.github.com/users/hartikainen/repos", "events_url": "https://api.github.com/users/hartikainen/events{/privacy}", "received_events_url": "https://api.github.com/users/hartikainen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1178505529, "node_id": "MDU6TGFiZWwxMTc4NTA1NTI5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/prtype:bugfix", "name": "prtype:bugfix", "color": "159b2e", "default": false, "description": "PR to fix a bug"}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-06T17:57:31Z", "updated_at": "2020-02-11T10:03:27Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/36519", "html_url": "https://github.com/tensorflow/tensorflow/pull/36519", "diff_url": "https://github.com/tensorflow/tensorflow/pull/36519.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/36519.patch"}, "body": "Allows `tf.keras.activations` to be deserialized with `dict`s. Fixes #36518."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36518", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36518/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36518/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36518/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36518", "id": 561174223, "node_id": "MDU6SXNzdWU1NjExNzQyMjM=", "number": 36518, "title": "Allow `tf.keras.activations` to be deserialized with dicts.", "user": {"login": "hartikainen", "id": 2308543, "node_id": "MDQ6VXNlcjIzMDg1NDM=", "avatar_url": "https://avatars1.githubusercontent.com/u/2308543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hartikainen", "html_url": "https://github.com/hartikainen", "followers_url": "https://api.github.com/users/hartikainen/followers", "following_url": "https://api.github.com/users/hartikainen/following{/other_user}", "gists_url": "https://api.github.com/users/hartikainen/gists{/gist_id}", "starred_url": "https://api.github.com/users/hartikainen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hartikainen/subscriptions", "organizations_url": "https://api.github.com/users/hartikainen/orgs", "repos_url": "https://api.github.com/users/hartikainen/repos", "events_url": "https://api.github.com/users/hartikainen/events{/privacy}", "received_events_url": "https://api.github.com/users/hartikainen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ravikyram", "id": 51902062, "node_id": "MDQ6VXNlcjUxOTAyMDYy", "avatar_url": "https://avatars2.githubusercontent.com/u/51902062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ravikyram", "html_url": "https://github.com/ravikyram", "followers_url": "https://api.github.com/users/ravikyram/followers", "following_url": "https://api.github.com/users/ravikyram/following{/other_user}", "gists_url": "https://api.github.com/users/ravikyram/gists{/gist_id}", "starred_url": "https://api.github.com/users/ravikyram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ravikyram/subscriptions", "organizations_url": "https://api.github.com/users/ravikyram/orgs", "repos_url": "https://api.github.com/users/ravikyram/repos", "events_url": "https://api.github.com/users/ravikyram/events{/privacy}", "received_events_url": "https://api.github.com/users/ravikyram/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ravikyram", "id": 51902062, "node_id": "MDQ6VXNlcjUxOTAyMDYy", "avatar_url": "https://avatars2.githubusercontent.com/u/51902062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ravikyram", "html_url": "https://github.com/ravikyram", "followers_url": "https://api.github.com/users/ravikyram/followers", "following_url": "https://api.github.com/users/ravikyram/following{/other_user}", "gists_url": "https://api.github.com/users/ravikyram/gists{/gist_id}", "starred_url": "https://api.github.com/users/ravikyram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ravikyram/subscriptions", "organizations_url": "https://api.github.com/users/ravikyram/orgs", "repos_url": "https://api.github.com/users/ravikyram/repos", "events_url": "https://api.github.com/users/ravikyram/events{/privacy}", "received_events_url": "https://api.github.com/users/ravikyram/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-06T17:55:41Z", "updated_at": "2020-02-07T06:27:28Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): `2.1`\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n`tf.keras.activations` deserialization doesn't work for dict-based identifier. It would be nice if it did work in a similar way as other module deserializers such as `tf.keras.initializers`. The following snippet currently raises `ValueError: Unknown activation: relu` for the activation deserialization.\r\n\r\n```python\r\nimport tensorflow as tf\r\n\r\n\r\n# Works\r\ninitilizer = tf.keras.initializers.get({\r\n    'class_name': 'random_normal_initializer',\r\n    'config': {}\r\n})\r\n\r\n# Does not work\r\nactivation = tf.keras.activations.get({\r\n    'class_name': 'relu',\r\n    'config': {}\r\n})\r\n```\r\n\r\n\r\n\r\n**Will this change the current api? How?**\r\nIt would add the ability to use `tf.keras.activations.get({...})`.\r\n\r\n**Who will benefit with this feature?**\r\nUsers who want to serialize/deserialize their activation functions for example as json.\r\n\r\n**Any Other info.**\r\nI'm happy to submit a PR for this."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36517", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36517/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36517/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36517/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36517", "id": 561113860, "node_id": "MDU6SXNzdWU1NjExMTM4NjA=", "number": 36517, "title": "TensorFlow Lite Conversion Fails (Check failed: start_indices_size <= num_input_axes (2 vs. 1)StridedSlice op requires no more than 1 start indices)", "user": {"login": "raltech", "id": 18095487, "node_id": "MDQ6VXNlcjE4MDk1NDg3", "avatar_url": "https://avatars3.githubusercontent.com/u/18095487?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raltech", "html_url": "https://github.com/raltech", "followers_url": "https://api.github.com/users/raltech/followers", "following_url": "https://api.github.com/users/raltech/following{/other_user}", "gists_url": "https://api.github.com/users/raltech/gists{/gist_id}", "starred_url": "https://api.github.com/users/raltech/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raltech/subscriptions", "organizations_url": "https://api.github.com/users/raltech/orgs", "repos_url": "https://api.github.com/users/raltech/repos", "events_url": "https://api.github.com/users/raltech/events{/privacy}", "received_events_url": "https://api.github.com/users/raltech/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-02-06T16:09:29Z", "updated_at": "2020-03-07T03:52:03Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux CentOS 7.5\r\n- TensorFlow installed from (source or binary): Tensorflow is preinstalled on the server.\r\n- TensorFlow version (or github SHA if from source): Tensorflow/2.0.0\r\n\r\n\r\n**Command used to run the converter or code if you\u2019re using the Python API**\r\n```\r\nimport tensorflow as tf\r\n# Note: full quantization requires tf 1.15 or higher\r\nimport numpy as np\r\nfrom PIL import Image\r\n\r\ndef representative_dataset_gen():\r\n  data = np.random.rand(100,416,416,3).astype(dtype=np.float32)\r\n  for i in range(num_calibration_steps):\r\n    # Get sample input data as a numpy array in a method of your choosing.\r\n    # image, = data.take(1)\r\n    image = np.expand_dims(data[i,:,:,:], axis=0)\r\n    yield [image]\r\n\r\nnum_calibration_steps = 100\r\nsaved_model_dir = '/projectnb/ec720prj/nakamura/Spring2020/tf2-yolov3/savedmodel/yolov3/1' # dir of YOLOv3 tf implementation\r\n\r\nconverter = tf.lite.TFLiteConverter.from_saved_model(saved_model_dir)\r\nconverter.optimizations = [tf.lite.Optimize.DEFAULT]\r\n# converter.representative_dataset = tf.lite.RepresentativeDataset(representative_dataset_gen)\r\nconverter.representative_dataset = representative_dataset_gen\r\n\r\n# Enforce full integer quantization for all ops and use int input/output\r\nconverter.target_spec.supported_ops = [tf.lite.OpsSet.TFLITE_BUILTINS_INT8]\r\nconverter.inference_input_type = tf.uint8\r\nconverter.inference_output_type = tf.uint8\r\n\r\ntflite_quant_model = converter.convert()\r\nopen(\"./converted_model.tflite\", \"wb\").write(tflite_quant_model)\r\n```\r\n\r\n**The output from the converter invocation**\r\n\r\n```\r\n2020-02-06 10:53:25.407210: I tensorflow/core/platform/cpu_feature_guard.cc:145] This TensorFlow binary is optimized with Intel(R) MKL-DNN to use the following CPU instructions in performance critical operations:  AVX AVX2 FMA\r\nTo enable them in non-MKL-DNN operations, rebuild TensorFlow with the appropriate compiler flags.\r\n2020-02-06 10:53:25.425952: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2394310000 Hz\r\n2020-02-06 10:53:25.427429: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0xce6d420 executing computations on platform Host. Devices:\r\n2020-02-06 10:53:25.427467: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): Host, Default Version\r\n2020-02-06 10:53:25.436305: I tensorflow/core/common_runtime/process_util.cc:115] Creating new thread pool with default inter op setting: 28. Tune using inter_op_parallelism_threads for best performance.\r\n2020-02-06 10:53:42.002931: I tensorflow/core/grappler/devices.cc:60] Number of eligible GPUs (core count >= 8, compute capability >= 0.0): 0 (Note: TensorFlow was not compiled with CUDA support)\r\n2020-02-06 10:53:42.003093: I tensorflow/core/grappler/clusters/single_machine.cc:356] Starting new session\r\n2020-02-06 10:53:42.111911: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:716] Optimization results for grappler item: graph_to_optimize\r\n2020-02-06 10:53:42.111960: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   function_optimizer: Graph size after: 2070 nodes (1696), 5733 edges (5354), time = 66.938ms.\r\n2020-02-06 10:53:42.111973: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   function_optimizer: function_optimizer did nothing. time = 1.093ms.\r\n2020-02-06 10:53:48.038844: I tensorflow/core/grappler/devices.cc:60] Number of eligible GPUs (core count >= 8, compute capability >= 0.0): 0 (Note: TensorFlow was not compiled with CUDA support)\r\n2020-02-06 10:53:48.038997: I tensorflow/core/grappler/clusters/single_machine.cc:356] Starting new session\r\n2020-02-06 10:53:49.980217: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:716] Optimization results for grappler item: graph_to_optimize\r\n2020-02-06 10:53:49.980262: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   constant folding: Graph size after: 1268 nodes (-370), 4423 edges (-734), time = 922.534ms.\r\n2020-02-06 10:53:49.980274: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   constant folding: Graph size after: 1268 nodes (0), 4423 edges (0), time = 255.534ms.\r\nTraceback (most recent call last):\r\n  File \"coral/coral_quantizer.py\", line 38, in <module>\r\n    tflite_quant_model = converter.convert()\r\n  File \"/share/pkg.7/tensorflow/2.0.0/install/lib/SCC/../python3.6/site-packages/tensorflow_core/lite/python/lite.py\", line 446, in convert\r\n    **converter_kwargs)\r\n  File \"/share/pkg.7/tensorflow/2.0.0/install/lib/SCC/../python3.6/site-packages/tensorflow_core/lite/python/convert.py\", line 449, in toco_convert_impl\r\n    enable_mlir_converter=enable_mlir_converter)\r\n  File \"/share/pkg.7/tensorflow/2.0.0/install/lib/SCC/../python3.6/site-packages/tensorflow_core/lite/python/convert.py\", line 200, in toco_convert_protos\r\n    raise ConverterError(\"See console for info.\\n%s\\n%s\\n\" % (stdout, stderr))\r\ntensorflow.lite.python.convert.ConverterError: See console for info.\r\n2020-02-06 10:54:00.060634: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 676 operators, 1271 arrays (0 quantized)\r\n2020-02-06 10:54:00.077126: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 676 operators, 1271 arrays (0 quantized)\r\n2020-02-06 10:54:00.465306: F tensorflow/lite/toco/graph_transformations/resolve_strided_slice_attributes.cc:95] Check failed: start_indices_size <= num_input_axes (2 vs. 1)StridedSlice op requires no more than 1 start indices\r\nFatal Python error: Aborted\r\n\r\nCurrent thread 0x00007fbbde05b740 (most recent call first):\r\n  File \"/share/pkg.7/tensorflow/2.0.0/install/lib/SCC/../python3.6/site-packages/tensorflow_core/lite/toco/python/toco_from_protos.py\", line 52 in execute\r\n  File \"/share/pkg.7/tensorflow/2.0.0/install/lib/SCC/../python3.6/site-packages/absl/app.py\", line 250 in _run_main\r\n  File \"/share/pkg.7/tensorflow/2.0.0/install/lib/SCC/../python3.6/site-packages/absl/app.py\", line 299 in run\r\n  File \"/share/pkg.7/tensorflow/2.0.0/install/lib/SCC/../python3.6/site-packages/tensorflow_core/python/platform/app.py\", line 40 in run\r\n  File \"/share/pkg.7/tensorflow/2.0.0/install/lib/SCC/../python3.6/site-packages/tensorflow_core/lite/toco/python/toco_from_protos.py\", line 89 in main\r\n  File \"/share/pkg.7/tensorflow/2.0.0/install/bin/toco_from_protos\", line 10 in <module>\r\n```\r\n\r\n**Also, please include a link to the saved model or GraphDef**\r\n\r\n```\r\n# Put link here or attach to the issue.\r\nhttps://drive.google.com/a/bu.edu/file/d/1STaqguXrsKaqNbzxmvGVwzpwWZEiC4K6/view?usp=sharing\r\n```\r\n\r\n**Failure details**\r\nHello,\r\nI am trying to run the full YOLOv3 on Coral EdgeTPU. To do this, I am currently trying to convert the savedmodel (.pb format) of trained yolov3 into the quantized .tflite model using the code I attached above.\r\nFor some reason, the conversion failed with this error:\r\n```\r\nCheck failed: start_indices_size <= num_input_axes (2 vs. 1)StridedSlice op requires no more than 1 start indices\r\nFatal Python error: Aborted)\r\n```\r\nI was able to convert the official pretrained MobileNetv1 savedmodel file into the quantized .tflite model using the exact same code. \r\n\r\nI am using this repo (https://github.com/YunYang1994/TensorFlow2.0-Examples/tree/master/4-Object_Detection/YOLOV3) for the YOLOv3 Tensorflow 2.0.0 implementation.\r\n\r\nDo you know what is causing this failure of conversion?\r\nThank you.\r\n\r\n**Any other info / logs**\r\n\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nYOLOv3's implementation code => (https://github.com/YunYang1994/TensorFlow2.0-Examples/tree/master/4-Object_Detection/YOLOV3)\r\n\r\nThank you for your help.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36516", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36516/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36516/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36516/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36516", "id": 561113725, "node_id": "MDU6SXNzdWU1NjExMTM3MjU=", "number": 36516, "title": "Misleading documentation for hook parameters in estimators evaluate, predict, train methods", "user": {"login": "espinafre", "id": 25933044, "node_id": "MDQ6VXNlcjI1OTMzMDQ0", "avatar_url": "https://avatars3.githubusercontent.com/u/25933044?v=4", "gravatar_id": "", "url": "https://api.github.com/users/espinafre", "html_url": "https://github.com/espinafre", "followers_url": "https://api.github.com/users/espinafre/followers", "following_url": "https://api.github.com/users/espinafre/following{/other_user}", "gists_url": "https://api.github.com/users/espinafre/gists{/gist_id}", "starred_url": "https://api.github.com/users/espinafre/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/espinafre/subscriptions", "organizations_url": "https://api.github.com/users/espinafre/orgs", "repos_url": "https://api.github.com/users/espinafre/repos", "events_url": "https://api.github.com/users/espinafre/events{/privacy}", "received_events_url": "https://api.github.com/users/espinafre/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-06T16:09:15Z", "updated_at": "2020-02-07T22:50:06Z", "closed_at": null, "author_association": "NONE", "body": "\r\nThe documentation for pre-made estimators such as tensorflow.estimator.LinearRegressor says that each of the methods evaluate, predict and train take a parameter called \"hooks\", which is a list of tensorflow.train.SessionRunHooks. However, no such class exist in the v2.1 API; instead, the source code says that it expects instances of tensorflow.compat.v1.train.SessionRunHook.\r\n\r\nIn the example of LinearRegressor (other pre-made estimators share the same problem), this is the API doc, which I believe is generated directly from the source code (see the documentation of the parameters for the train, evaluate and predict methods):\r\nhttps://www.tensorflow.org/api_docs/python/tf/estimator/LinearRegressor#evaluate\r\nhttps://www.tensorflow.org/api_docs/python/tf/estimator/LinearRegressor#predict\r\nhttps://www.tensorflow.org/api_docs/python/tf/estimator/LinearRegressor#train\r\n\r\nThis is the source code that says it expects a class from the compat.v1 API:\r\nhttps://github.com/tensorflow/estimator/blob/a7ba3b45d07dd517a0e6ff38e90ae3aa240f424b/tensorflow_estimator/python/estimator/estimator.py#L1947\r\n\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36515", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36515/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36515/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36515/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36515", "id": 561086384, "node_id": "MDU6SXNzdWU1NjEwODYzODQ=", "number": 36515, "title": "Provide complete tutorial on how to use MultiWorkerMirroredStrategy", "user": {"login": "Flamefire", "id": 309017, "node_id": "MDQ6VXNlcjMwOTAxNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/309017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Flamefire", "html_url": "https://github.com/Flamefire", "followers_url": "https://api.github.com/users/Flamefire/followers", "following_url": "https://api.github.com/users/Flamefire/following{/other_user}", "gists_url": "https://api.github.com/users/Flamefire/gists{/gist_id}", "starred_url": "https://api.github.com/users/Flamefire/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Flamefire/subscriptions", "organizations_url": "https://api.github.com/users/Flamefire/orgs", "repos_url": "https://api.github.com/users/Flamefire/repos", "events_url": "https://api.github.com/users/Flamefire/events{/privacy}", "received_events_url": "https://api.github.com/users/Flamefire/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-06T15:27:21Z", "updated_at": "2020-02-20T20:06:15Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "## URL(s) with the issue:\r\n\r\nhttps://www.tensorflow.org/tutorials/distribute/multi_worker_with_keras#train_the_model_with_multiworkermirroredstrategy\r\n\r\n## Description of issue (what needs changing):\r\n\r\nThere is a large and often overlooked caveat: You need to pass `steps_per_epoch`. This leads to issues like https://github.com/tensorflow/tensorflow/issues/34821, https://github.com/tensorflow/tensorflow/issues/36153. It should be explained, how `steps_per_epoch` should be set. Searching the examples does not really help: `num_samples / batch_size` is sometimes rounded up and sometimes down. A clear guideline for Multi-Worker would be appreciated.\r\n\r\nAlso it is not described how loading the dataset should happen. Doing that in a Multi-Worker setting is tricky as the data needs to be downloaded exactly once. See https://github.com/tensorflow/datasets/issues/1302\r\n\r\nAlso the developers of `tensorflow_datasets` claim, that the auto-sharding done by TF won't work properly and suggest to use custom functions: https://github.com/tensorflow/datasets/issues/1302, https://github.com/tensorflow/datasets/issues/1426. It should be evaluated whether this is the case and where this has to be addressed.\r\n\r\nFinally a description on how to run the evaluation is missing for completeness. This runs into another issue that by default files are sharded and e.g. MNIST only has 1 file for test data which makes TF fail. See also https://github.com/tensorflow/datasets/issues/1405\r\n\r\nFor the last point the solution is to use \r\n\r\n```\r\noptions = tf.data.Options()\r\noptions.experimental_distribute.auto_shard_policy = tf.data.experimental.AutoShardPolicy.DATA\r\ntrain_datasets = train_datasets.with_options(options)\r\n```\r\nWhich can be found by searching the docs. But it needs to be in the tutorial (and maybe even the default)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36514", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36514/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36514/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36514/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36514", "id": 561031175, "node_id": "MDU6SXNzdWU1NjEwMzExNzU=", "number": 36514, "title": "bfloat16 does not flush denormals (subnormal floats) to zero", "user": {"login": "N-Dekker", "id": 27005366, "node_id": "MDQ6VXNlcjI3MDA1MzY2", "avatar_url": "https://avatars0.githubusercontent.com/u/27005366?v=4", "gravatar_id": "", "url": "https://api.github.com/users/N-Dekker", "html_url": "https://github.com/N-Dekker", "followers_url": "https://api.github.com/users/N-Dekker/followers", "following_url": "https://api.github.com/users/N-Dekker/following{/other_user}", "gists_url": "https://api.github.com/users/N-Dekker/gists{/gist_id}", "starred_url": "https://api.github.com/users/N-Dekker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/N-Dekker/subscriptions", "organizations_url": "https://api.github.com/users/N-Dekker/orgs", "repos_url": "https://api.github.com/users/N-Dekker/repos", "events_url": "https://api.github.com/users/N-Dekker/events{/privacy}", "received_events_url": "https://api.github.com/users/N-Dekker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1478826728, "node_id": "MDU6TGFiZWwxNDc4ODI2NzI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:core", "name": "comp:core", "color": "024391", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-06T14:00:14Z", "updated_at": "2020-02-07T22:36:04Z", "closed_at": null, "author_association": "NONE", "body": "[BFloat16: The secret to high performance on Cloud TPUs](https://cloud.google.com/blog/products/ai-machine-learning/bfloat16-the-secret-to-high-performance-on-cloud-tpus), Shibo Wang, Pankaj Kanwar (@pkanwar23 right?) , August 23, 2019, says:\r\n\r\n> bfloat16 handles denormals differently from FP32: it flushes them to zero\r\n\r\nI assume this implies that for a denormal 32-bit floating point, `denorm`, the expression `float{bfloat16{denorm}}` should be equal to zero.\r\n\r\nThe current implementation of `tensorflow::bfloat16` (master branch, revision bc28d49ce2659f846e03c13a64ebe83fc6fb8ff1) appears to behave differently. As can be observed by the following test:\r\n\r\n    for (float denorm = std::numeric_limits<float>::denorm_min();\r\n      denorm < std::numeric_limits<float>::min();\r\n      denorm = std::nextafterf(denorm, 1.0f))\r\n        ASSERT_EQ(float{ tensorflow::bfloat16{denorm} }, 0.0f);\r\n\r\nThis assertion fails on the current implementation, from [tensorflow/core/lib/bfloat16](https://github.com/tensorflow/tensorflow/tree/bc28d49ce2659f846e03c13a64ebe83fc6fb8ff1/tensorflow/core/lib/bfloat16)\r\n\r\nIs that indeed a bug in `tensorflow::bfloat16`?\r\n\r\n\r\n\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36513", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36513/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36513/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36513/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36513", "id": 561017705, "node_id": "MDU6SXNzdWU1NjEwMTc3MDU=", "number": 36513, "title": "Cannot perform full-integer post-training quantization in converting to flite models", "user": {"login": "feranick", "id": 35967, "node_id": "MDQ6VXNlcjM1OTY3", "avatar_url": "https://avatars1.githubusercontent.com/u/35967?v=4", "gravatar_id": "", "url": "https://api.github.com/users/feranick", "html_url": "https://github.com/feranick", "followers_url": "https://api.github.com/users/feranick/followers", "following_url": "https://api.github.com/users/feranick/following{/other_user}", "gists_url": "https://api.github.com/users/feranick/gists{/gist_id}", "starred_url": "https://api.github.com/users/feranick/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/feranick/subscriptions", "organizations_url": "https://api.github.com/users/feranick/orgs", "repos_url": "https://api.github.com/users/feranick/repos", "events_url": "https://api.github.com/users/feranick/events{/privacy}", "received_events_url": "https://api.github.com/users/feranick/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-02-06T13:37:07Z", "updated_at": "2020-02-07T21:12:38Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Both\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): MacOS, Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): either\r\n- TensorFlow version (use command below): 1.15.2\r\n- Python version: 3\r\n- Bazel version (if compiling from source): 0.26.1\r\n- GCC/Compiler version (if compiling from source): - \r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\nThe issue relates to full integer post-training quantization in tflite conversion. Following the same example in the [documentation](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/lite/g3doc/performance/post_training_integer_quant.ipynb), but applied to my data have issues when I identify the input_data for the interpreter as float32 (below my data in R is in float32 already normalized between [0,10]):\r\n\r\n`input_data = np.array(R, dtype=np.float32)`\r\n`interpreter.set_tensor(input_details[0]['index'], input_data)`\r\n `interpreter.invoke()`\r\n\r\nWhen then I call the TFLite converter (using `tf.compat.v1.lite.TFLiteConverter.from_keras_model_file` in TF2.x or `tf.lite.TFLiteConverter.from_keras_model_file` in TF1.x) again following from the documentation:\r\n\r\n`converter.optimizations = [tf.lite.Optimize.OPTIMIZE_FOR_SIZE]`\r\n    `converter.representative_dataset = representative_dataset_gen`\r\n    `converter.target_spec.supported_ops = [tf.lite.OpsSet.TFLITE_BUILTINS_INT8]`\r\n    `converter.inference_input_type = tf.uint8`\r\n    `converter.inference_output_type = tf.uint8`\r\n    `tflite_quant_model = converter.convert()`\r\n\r\n\r\nThe post-quantized tflite is correctly created (and when compiled for the TPU, all ops are correctly assigned). However, when I run a prediction, I get the following error:\r\n`ValueError: Cannot set tensor: Got value of type FLOAT32 but expected type UINT8 for input 16, name: conv2d_input`\r\n\r\nEssentially, the `input_data = np.array(R, dtype=np.float32)`, needs to be set as uint8 for this to work. However, that breaks the model completely, as it casts all data between [0,1] into just zeros. \r\n\r\nTo be clear, this does NOT happen when using TF2.x, by calling the converter with `tf.lite.TFLiteConverter.from_keras_model()`. Using the `input_data = np.array(R, dtype=np.float32)`, the post-training quantized tflite model is created and when used for predictions, it works as intended. However, when compiled, because I am using the `TFLiteConverterV2` , the quantization/dequantization ops are not assigned to the TPU, making it useless to deploy in embedded devices that require full integer quantization.\r\n\r\nAny insight is greatly appreciated. Thanks in advance.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36508", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36508/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36508/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36508/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36508", "id": 560951030, "node_id": "MDU6SXNzdWU1NjA5NTEwMzA=", "number": 36508, "title": "keras LSTM Fail to find the dnn implementation ", "user": {"login": "ARozental", "id": 9210444, "node_id": "MDQ6VXNlcjkyMTA0NDQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/9210444?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ARozental", "html_url": "https://github.com/ARozental", "followers_url": "https://api.github.com/users/ARozental/followers", "following_url": "https://api.github.com/users/ARozental/following{/other_user}", "gists_url": "https://api.github.com/users/ARozental/gists{/gist_id}", "starred_url": "https://api.github.com/users/ARozental/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ARozental/subscriptions", "organizations_url": "https://api.github.com/users/ARozental/orgs", "repos_url": "https://api.github.com/users/ARozental/repos", "events_url": "https://api.github.com/users/ARozental/events{/privacy}", "received_events_url": "https://api.github.com/users/ARozental/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "houtoms", "id": 4001424, "node_id": "MDQ6VXNlcjQwMDE0MjQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/4001424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/houtoms", "html_url": "https://github.com/houtoms", "followers_url": "https://api.github.com/users/houtoms/followers", "following_url": "https://api.github.com/users/houtoms/following{/other_user}", "gists_url": "https://api.github.com/users/houtoms/gists{/gist_id}", "starred_url": "https://api.github.com/users/houtoms/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/houtoms/subscriptions", "organizations_url": "https://api.github.com/users/houtoms/orgs", "repos_url": "https://api.github.com/users/houtoms/repos", "events_url": "https://api.github.com/users/houtoms/events{/privacy}", "received_events_url": "https://api.github.com/users/houtoms/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "houtoms", "id": 4001424, "node_id": "MDQ6VXNlcjQwMDE0MjQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/4001424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/houtoms", "html_url": "https://github.com/houtoms", "followers_url": "https://api.github.com/users/houtoms/followers", "following_url": "https://api.github.com/users/houtoms/following{/other_user}", "gists_url": "https://api.github.com/users/houtoms/gists{/gist_id}", "starred_url": "https://api.github.com/users/houtoms/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/houtoms/subscriptions", "organizations_url": "https://api.github.com/users/houtoms/orgs", "repos_url": "https://api.github.com/users/houtoms/repos", "events_url": "https://api.github.com/users/houtoms/events{/privacy}", "received_events_url": "https://api.github.com/users/houtoms/received_events", "type": "User", "site_admin": false}, {"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 15, "created_at": "2020-02-06T11:27:23Z", "updated_at": "2020-03-09T18:34:06Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- CUDA/cuDNN version: 10.1\r\n- GPU model and memory: GeForce RTX 2080\r\n- TF 2.1.0:\r\n\r\nuncommenting the LSTM layer will yield the following error:\r\n\r\n```\r\nUnknownError:  [_Derived_]  Fail to find the dnn implementation.\r\n\t [[{{node CudnnRNN}}]]\r\n\t [[sequential_6/bidirectional_2/backward_lstm_3/StatefulPartitionedCall]]\r\n\t [[Reshape_11/_38]] [Op:__inference_distributed_function_39046]\r\n```\r\n\r\nworking code:\r\n```\r\nmodel = tf.keras.Sequential([\r\n    tf.keras.layers.Embedding(encoder.vocab_size, 64),\r\n    #tf.keras.layers.Bidirectional(tf.keras.layers.LSTM(64)),\r\n    tf.keras.layers.Dense(64, activation='relu'),\r\n    tf.keras.layers.Dense(1, activation='sigmoid')\r\n])\r\nmodel.compile(loss='binary_crossentropy',\r\n              optimizer=tf.keras.optimizers.Adam(1e-4),\r\n              metrics=['accuracy'])\r\nhistory = model.fit(train_dataset, epochs=10,\r\n                    validation_data=test_dataset, \r\n                    validation_steps=30)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36505", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36505/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36505/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36505/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36505", "id": 560892095, "node_id": "MDU6SXNzdWU1NjA4OTIwOTU=", "number": 36505, "title": "Loading Tensorflow models from disk is instant while loading from gcs is very slow", "user": {"login": "Sam-Persoon", "id": 54799731, "node_id": "MDQ6VXNlcjU0Nzk5NzMx", "avatar_url": "https://avatars3.githubusercontent.com/u/54799731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Sam-Persoon", "html_url": "https://github.com/Sam-Persoon", "followers_url": "https://api.github.com/users/Sam-Persoon/followers", "following_url": "https://api.github.com/users/Sam-Persoon/following{/other_user}", "gists_url": "https://api.github.com/users/Sam-Persoon/gists{/gist_id}", "starred_url": "https://api.github.com/users/Sam-Persoon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Sam-Persoon/subscriptions", "organizations_url": "https://api.github.com/users/Sam-Persoon/orgs", "repos_url": "https://api.github.com/users/Sam-Persoon/repos", "events_url": "https://api.github.com/users/Sam-Persoon/events{/privacy}", "received_events_url": "https://api.github.com/users/Sam-Persoon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2020-02-06T09:44:19Z", "updated_at": "2020-03-11T14:42:36Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution: Both MacOS and Ubuntu 18 (Tensorflow/serving)\r\n- TensorFlow version (use command below): 2.0.0\r\n- Python version: 3.6\r\n\r\n**Describe the current behavior**\r\n\r\nI want to use Tensorflow serving to load multiple Models. If I mount a directory containing the model, loading everything is done in an instant, while loading them from a `gs://` path takes around 10 seconds per model. \r\n\r\nWhile researching the issue I discovered this is probably a Tensorflow issue and not a Tensorflow Serving issue as loading them in Tensorflow is a huge difference as well:\r\n```\r\n    [ins] In [22]: %timeit tf.saved_model.load('test/1')\r\n    3.88 s \u00b1 719 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\r\n\r\n    [ins] In [23]: %timeit tf.saved_model.load('gs://path/to/test/1')\r\n    30.6 s \u00b1 2.66 s per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\r\n```\r\nThen it could be that downloading the model (which is very small) is slow, but I tested this as well:\r\n```\r\n    def test_load():\r\n        bucket_name = 'path'\r\n        folder='test'\r\n        delimiter='/'\r\n        file = 'to/test/1'\r\n     \r\n        bucket=storage.Client().get_bucket(bucket_name)\r\n        blobs=bucket.list_blobs(prefix=file, delimiter=delimiter)\r\n        for blob in blobs:\r\n            print(blob.name)\r\n            destination_uri = '{}/{}'.format(folder, blob.name)\r\n            blob.download_to_filename(destination_uri)\r\n\r\n    [ins] In [31]: %timeit test_load()\r\n    541 ms \u00b1 54.9 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\r\n```\r\nAny idea what is happening here?\r\n\r\n**Describe the expected behavior**\r\nAround the same load time for external vs local models. The first load from gs can be slow if the auth needs to happen, but even authenticating is still way faster than the models loads.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36501", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36501/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36501/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36501/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36501", "id": 560776727, "node_id": "MDU6SXNzdWU1NjA3NzY3Mjc=", "number": 36501, "title": "Tensorflow 1.15 doesn't do incremental memory growth", "user": {"login": "CMCDragonkai", "id": 640797, "node_id": "MDQ6VXNlcjY0MDc5Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/640797?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CMCDragonkai", "html_url": "https://github.com/CMCDragonkai", "followers_url": "https://api.github.com/users/CMCDragonkai/followers", "following_url": "https://api.github.com/users/CMCDragonkai/following{/other_user}", "gists_url": "https://api.github.com/users/CMCDragonkai/gists{/gist_id}", "starred_url": "https://api.github.com/users/CMCDragonkai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CMCDragonkai/subscriptions", "organizations_url": "https://api.github.com/users/CMCDragonkai/orgs", "repos_url": "https://api.github.com/users/CMCDragonkai/repos", "events_url": "https://api.github.com/users/CMCDragonkai/events{/privacy}", "received_events_url": "https://api.github.com/users/CMCDragonkai/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-02-06T04:47:38Z", "updated_at": "2020-02-16T04:23:16Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): NixOS\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): unknown 1.15.0\r\n- Python version: 3.7.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 10.2.89\r\n- GPU model and memory: RTX 2070 - 440.44\r\n\r\n**Describe the current behavior**\r\n\r\nI'm trying to activate incremental memory growth. However in all the ways I've done it, it always ends up allocating almost the entire GPU.\r\n\r\n```python\r\nimport tensorflow as tf\r\nimport tensorflow.keras as keras\r\nimport tensorflow.keras.applications as applications\r\nimport tensorflow.keras.utils as utils\r\nimport numpy as np\r\n\r\nnum_samples = 1000\r\nheight = 224\r\nwidth = 224\r\nnum_classes = 1000\r\n\r\nconfig = tf.compat.v1.ConfigProto()\r\nconfig.gpu_options.allow_growth = True\r\nsess = tf.compat.v1.Session(config=config)\r\nkeras.backend.set_session(sess)\r\n\r\n# gpus = tf.config.experimental.list_physical_devices('GPU')\r\n# for gpu in gpus:\r\n#     tf.config.experimental.set_memory_growth(gpu, True)\r\n# logical_gpus = tf.config.experimental.list_logical_devices('GPU')\r\n\r\nmodel = applications.ResNet50(weights=None, input_shape=(height, width, 3), classes=num_classes)\r\n\r\nparallel_model = utils.multi_gpu_model(model, gpus=2, cpu_relocation=True)\r\nparallel_model.compile(loss='categorical_crossentropy', optimizer='rmsprop')\r\n\r\nx = np.random.random((num_samples, height, width, 3))\r\ny = np.random.random((num_samples, num_classes))\r\n\r\nparallel_model.fit(x, y, epochs=20, batch_size=2)\r\n\r\nprint('all done')\r\n```\r\n\r\nAs I watch `nvidia-smi`, I always see almost the entire GPUs allocated.\r\n\r\nThis is true for the compat v1 and for the new tf.config.experimental commands and also for the environment variable `TF_FORCE_GPU_ALLOW_GROWTH`.\r\n\r\nThe only one that has any effect is `config.gpu_options.per_process_gpu_memory_fraction = 0.5`.\r\n\r\nIn all other cases I see the the GPU memories get used up entirely and I get these messages:\r\n\r\n```\r\n2020-02-06 15:48:35.517899: I tensorflow/stream_executor/cuda/cuda_driver.cc:831] failed to allocate 3.18G (3411184640 bytes) from device: CUDA_ERROR_OUT_OF_MEMORY: out of memory\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36499", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36499/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36499/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36499/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36499", "id": 560741679, "node_id": "MDU6SXNzdWU1NjA3NDE2Nzk=", "number": 36499, "title": "tensorflow.fill does not work in keras.layers and models with dynamic shape as it should and as similar functions do", "user": {"login": "brian36", "id": 6354306, "node_id": "MDQ6VXNlcjYzNTQzMDY=", "avatar_url": "https://avatars3.githubusercontent.com/u/6354306?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brian36", "html_url": "https://github.com/brian36", "followers_url": "https://api.github.com/users/brian36/followers", "following_url": "https://api.github.com/users/brian36/following{/other_user}", "gists_url": "https://api.github.com/users/brian36/gists{/gist_id}", "starred_url": "https://api.github.com/users/brian36/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brian36/subscriptions", "organizations_url": "https://api.github.com/users/brian36/orgs", "repos_url": "https://api.github.com/users/brian36/repos", "events_url": "https://api.github.com/users/brian36/events{/privacy}", "received_events_url": "https://api.github.com/users/brian36/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-02-06T02:34:35Z", "updated_at": "2020-02-06T10:11:47Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): (MacOS) Darwin-19.2.0-x86_64-i386-64bit - mac version: ('10.15.2', ('', '', ''), 'x86_64')\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): binary (pip install)\r\n- TensorFlow version (use command below): v2.1.0-rc2-17-ge5bf8de410 2.1.0\r\n- Python version: Python 3.7.6\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n\r\n**Describe the current behavior**\r\nIf I use tensorflow.fill in tf.keras.layers layer, where the shape for the fill depends on the input, it doesn't work, although it works with plenty of other similar functions, and would be reasonably expected to work.  \r\n\r\nSpecifically, I call:\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\nX = tf.keras.Input((1,))\r\nX2 = tf.keras.layers.Lambda(lambda x: tf.fill((tf.shape(X)[0],1),2.5))(X)\r\nmodel = tf.keras.Model(inputs=X,outputs=X2)\r\nmodel.predict(np.random.randn(10,1))\r\n```\r\n\r\nI get the following error when I try to run \"predict\" with a model built with the label (full error output below):\r\n> _SymbolicException: Inputs to eager execution function cannot be Keras symbolic tensors, but found [<tf.Tensor 'input_1:0' shape=(None, 1) dtype=float32>]\r\n\r\n**Describe the expected behavior**\r\nI expect it to output a 10x1 numpy array of ones.  This happens with other similar functions used in the same way.  E.g., the following all work fine used in the same way:\r\n```\r\nX2 = tf.keras.layers.Lambda(lambda x: tf.random.uniform(tf.shape(x)))(X) \r\nX2 = tf.keras.layers.Lambda(lambda x: tf.zeros_like(x))(X)\r\nX2 = tf.keras.layers.Lambda(lambda x: tf.ones_like(x)*3.5)(X)\r\n```\r\nand they all depend on the shape of the input, for the case of random.uniform it even takes the same call tf.shape in the input and works fine.   There's no reason tf.fill shouldn't work / the similar capability to create a full tensor for an arbitrary value and input shape.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\nX = tf.keras.Input((1,))\r\nX2 = tf.keras.layers.Lambda(lambda x: tf.fill((tf.shape(X)[0],1),2.5))(X)\r\nmodel = tf.keras.Model(inputs=X,outputs=X2)\r\nmodel.predict(np.random.randn(10,1))\r\n```\r\n\r\n**Other info / logs**\r\n\r\n> Here is the full error output / trace:\r\n> ---------------------------------------------------------------------------\r\n> TypeError                                 Traceback (most recent call last)\r\n> /Users/workspaces/python_virtualenv/tensorflow2/lib/python3.7/site-packages/tensorflow_core/python/eager/execute.py in quick_execute(op_name, num_outputs, inputs, attrs, ctx, name)\r\n>      60                                                op_name, inputs, attrs,\r\n> ---> 61                                                num_outputs)\r\n>      62   except core._NotOkStatusException as e:\r\n> \r\n> TypeError: An op outside of the function building code is being passed\r\n> a \"Graph\" tensor. It is possible to have Graph tensors\r\n> leak out of the function building context by including a\r\n> tf.init_scope in your function building code.\r\n> For example, the following function will fail:\r\n>   @tf.function\r\n>   def has_init_scope():\r\n>     my_constant = tf.constant(1.)\r\n>     with tf.init_scope():\r\n>       added = my_constant * 2\r\n> The graph tensor has name: input_1:0\r\n> \r\n> During handling of the above exception, another exception occurred:\r\n> \r\n> _SymbolicException                        Traceback (most recent call last)\r\n> <ipython-input-1-c6ef6980c816> in <module>\r\n>       5 X2 = tf.keras.layers.Lambda(lambda x: tf.fill((tf.shape(X)[0],1),2.5))(X)\r\n>       6 model = tf.keras.Model(inputs=X,outputs=X2)\r\n> ----> 7 model.predict(np.random.randn(10,1))\r\n> \r\n> /Users/workspaces/python_virtualenv/tensorflow2/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training.py in predict(self, x, batch_size, verbose, steps, callbacks, max_queue_size, workers, use_multiprocessing)\r\n>    1011         max_queue_size=max_queue_size,\r\n>    1012         workers=workers,\r\n> -> 1013         use_multiprocessing=use_multiprocessing)\r\n>    1014 \r\n>    1015   def reset_metrics(self):\r\n> \r\n> /Users/workspaces/python_virtualenv/tensorflow2/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_v2.py in predict(self, model, x, batch_size, verbose, steps, callbacks, max_queue_size, workers, use_multiprocessing, **kwargs)\r\n>     496         model, ModeKeys.PREDICT, x=x, batch_size=batch_size, verbose=verbose,\r\n>     497         steps=steps, callbacks=callbacks, max_queue_size=max_queue_size,\r\n> --> 498         workers=workers, use_multiprocessing=use_multiprocessing, **kwargs)\r\n>     499 \r\n>     500 \r\n> \r\n> /Users/workspaces/python_virtualenv/tensorflow2/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_v2.py in _model_iteration(self, model, mode, x, y, batch_size, verbose, sample_weight, steps, callbacks, max_queue_size, workers, use_multiprocessing, **kwargs)\r\n>     473               mode=mode,\r\n>     474               training_context=training_context,\r\n> --> 475               total_epochs=1)\r\n>     476           cbks.make_logs(model, epoch_logs, result, mode)\r\n>     477 \r\n> \r\n> /Users/workspaces/python_virtualenv/tensorflow2/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_v2.py in run_one_epoch(model, iterator, execution_function, dataset_size, batch_size, strategy, steps_per_epoch, num_samples, mode, training_context, total_epochs)\r\n>     126         step=step, mode=mode, size=current_batch_size) as batch_logs:\r\n>     127       try:\r\n> --> 128         batch_outs = execution_function(iterator)\r\n>     129       except (StopIteration, errors.OutOfRangeError):\r\n>     130         # TODO(kaftan): File bug about tf function and errors.OutOfRangeError?\r\n> \r\n> /Users/workspaces/python_virtualenv/tensorflow2/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_v2_utils.py in execution_function(input_fn)\r\n>      96     # `numpy` translates Tensors to values in Eager mode.\r\n>      97     return nest.map_structure(_non_none_constant_value,\r\n> ---> 98                               distributed_function(input_fn))\r\n>      99 \r\n>     100   return execution_function\r\n> \r\n> /Users/workspaces/python_virtualenv/tensorflow2/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py in __call__(self, *args, **kwds)\r\n>     566         xla_context.Exit()\r\n>     567     else:\r\n> --> 568       result = self._call(*args, **kwds)\r\n>     569 \r\n>     570     if tracing_count == self._get_tracing_count():\r\n> \r\n> /Users/workspaces/python_virtualenv/tensorflow2/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py in _call(self, *args, **kwds)\r\n>     636               *args, **kwds)\r\n>     637       # If we did not create any variables the trace we have is good enough.\r\n> --> 638       return self._concrete_stateful_fn._filtered_call(canon_args, canon_kwds)  # pylint: disable=protected-access\r\n>     639 \r\n>     640     def fn_with_cond(*inner_args, **inner_kwds):\r\n> \r\n> /Users/workspaces/python_virtualenv/tensorflow2/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py in _filtered_call(self, args, kwargs)\r\n>    1609          if isinstance(t, (ops.Tensor,\r\n>    1610                            resource_variable_ops.BaseResourceVariable))),\r\n> -> 1611         self.captured_inputs)\r\n>    1612 \r\n>    1613   def _call_flat(self, args, captured_inputs, cancellation_manager=None):\r\n> \r\n> /Users/workspaces/python_virtualenv/tensorflow2/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py in _call_flat(self, args, captured_inputs, cancellation_manager)\r\n>    1690       # No tape is watching; skip to running the function.\r\n>    1691       return self._build_call_outputs(self._inference_function.call(\r\n> -> 1692           ctx, args, cancellation_manager=cancellation_manager))\r\n>    1693     forward_backward = self._select_forward_and_backward_functions(\r\n>    1694         args,\r\n> \r\n> /Users/workspaces/python_virtualenv/tensorflow2/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py in call(self, ctx, args, cancellation_manager)\r\n>     543               inputs=args,\r\n>     544               attrs=(\"executor_type\", executor_type, \"config_proto\", config),\r\n> --> 545               ctx=ctx)\r\n>     546         else:\r\n>     547           outputs = execute.execute_with_cancellation(\r\n> \r\n> /Users/workspaces/python_virtualenv/tensorflow2/lib/python3.7/site-packages/tensorflow_core/python/eager/execute.py in quick_execute(op_name, num_outputs, inputs, attrs, ctx, name)\r\n>      73       raise core._SymbolicException(\r\n>      74           \"Inputs to eager execution function cannot be Keras symbolic \"\r\n> ---> 75           \"tensors, but found {}\".format(keras_symbolic_tensors))\r\n>      76     raise e\r\n>      77   # pylint: enable=protected-access\r\n> \r\n> _SymbolicException: Inputs to eager execution function cannot be Keras symbolic tensors, but found [<tf.Tensor 'input_1:0' shape=(None, 1) dtype=float32>]\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36495", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36495/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36495/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36495/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36495", "id": 560669831, "node_id": "MDU6SXNzdWU1NjA2Njk4MzE=", "number": 36495, "title": "Cannot install tensorflow go", "user": {"login": "glarchev", "id": 958267, "node_id": "MDQ6VXNlcjk1ODI2Nw==", "avatar_url": "https://avatars3.githubusercontent.com/u/958267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/glarchev", "html_url": "https://github.com/glarchev", "followers_url": "https://api.github.com/users/glarchev/followers", "following_url": "https://api.github.com/users/glarchev/following{/other_user}", "gists_url": "https://api.github.com/users/glarchev/gists{/gist_id}", "starred_url": "https://api.github.com/users/glarchev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/glarchev/subscriptions", "organizations_url": "https://api.github.com/users/glarchev/orgs", "repos_url": "https://api.github.com/users/glarchev/repos", "events_url": "https://api.github.com/users/glarchev/events{/privacy}", "received_events_url": "https://api.github.com/users/glarchev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-02-05T22:35:06Z", "updated_at": "2020-02-24T09:14:43Z", "closed_at": null, "author_association": "NONE", "body": "This is a continuation of a similar issue (#35133 ) but the missing package is now different. It appears that the fix has involved substituting one go dependency for another -- however, the new package also cannot be found:\r\n\r\n`go get github.com/tensorflow/tensorflow/tensorflow/go\r\npackage github.com/tensorflow/tensorflow/tensorflow/go/core/core_protos_go_proto: cannot find package \"github.com/tensorflow/tensorflow/tensorflow/go/core/core_protos_go_proto\" in any of:\r\n\t/usr/local/go/src/github.com/tensorflow/tensorflow/tensorflow/go/core/core_protos_go_proto (from $GOROOT)\r\n       /Users/admin/go/src/github.com/tensorflow/tensorflow/tensorflow/go/core/core_protos_go_proto (from $GOPATH)`\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36484", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36484/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36484/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36484/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36484", "id": 560309857, "node_id": "MDU6SXNzdWU1NjAzMDk4NTc=", "number": 36484, "title": "Gradient in keras model with respect to layer outputs is `None` when layer is a Model", "user": {"login": "ksabr", "id": 45923989, "node_id": "MDQ6VXNlcjQ1OTIzOTg5", "avatar_url": "https://avatars1.githubusercontent.com/u/45923989?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ksabr", "html_url": "https://github.com/ksabr", "followers_url": "https://api.github.com/users/ksabr/followers", "following_url": "https://api.github.com/users/ksabr/following{/other_user}", "gists_url": "https://api.github.com/users/ksabr/gists{/gist_id}", "starred_url": "https://api.github.com/users/ksabr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ksabr/subscriptions", "organizations_url": "https://api.github.com/users/ksabr/orgs", "repos_url": "https://api.github.com/users/ksabr/repos", "events_url": "https://api.github.com/users/ksabr/events{/privacy}", "received_events_url": "https://api.github.com/users/ksabr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-02-05T11:27:22Z", "updated_at": "2020-02-06T12:57:16Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): centos-release-7-6.1810.2.el7.centos.x86_64\r\n\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n\r\n- TensorFlow installed from (source or binary): Binary\r\n\r\n- TensorFlow version (use command below): 2.1.0\r\n- Python version: 3.7.4\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n**Describe the current behavior**\r\nI want to obtain the gradients of a network's output with respect to an intermediate layer which is itself a keras `Model`. This returns `None`. \r\n\r\n**Describe the expected behavior**\r\nIt should return something other than `None`.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\n\r\ninput = tf.keras.layers.Input(shape=(28,28))\r\n\r\nx = tf.keras.layers.Flatten()(input)\r\nx = tf.keras.layers.Dense(128)(x)\r\nx = tf.keras.layers.ReLU()(x)\r\nx = tf.keras.layers.Dense(10)(x)\r\n\r\nsmall_model = tf.keras.models.Model(inputs=[input], outputs=[x])\r\n\r\ny = small_model(input)\r\n\r\ny = tf.keras.layers.Dense(20)(y)\r\ny = tf.keras.layers.Dense(30)(y)\r\ny = tf.keras.layers.Dense(10)(y)\r\n\r\nbig_model = tf.keras.models.Model(inputs=[small_model.input], outputs=[y])\r\n\r\next_model = tf.keras.models.Model(inputs=[small_model.input], outputs=[big_model.output,  big_model.layers[1].output])\r\n\r\nimages = tf.random.uniform(shape=(32,28,28))\r\nlabels = tf.zeros(shape=(32,))\r\n\r\nwith tf.GradientTape() as tape:    \r\n    predictions, layer = ext_model(images)\r\n\r\nprint(\"grad = \", tape.gradient(predictions, layer))\r\n```\r\n\r\n**Other info / logs**\r\nChanging to ```ext_model = tf.keras.models.Model(inputs=[small_model.input], outputs=[big_model.output,  big_model.layers[2].output])``` outputs a gradient different from `None`, which indicates that the problem occurs only when the layer in question is a `Model` itself. But this is precisely the typical use case scenario, where one needs gradients with respect to the outputs of an intermediate layer of a pre-built `tf.keras.applications` model. \r\n\r\nThis issue is related (but not identical) to https://github.com/tensorflow/tensorflow/issues/33478 which doesn't seem to have been adequately addressed. "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36465", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36465/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36465/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36465/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36465", "id": 559786792, "node_id": "MDU6SXNzdWU1NTk3ODY3OTI=", "number": 36465, "title": "How can I clear GPU memory in tensorflow 2?", "user": {"login": "HristoBuyukliev", "id": 6619799, "node_id": "MDQ6VXNlcjY2MTk3OTk=", "avatar_url": "https://avatars0.githubusercontent.com/u/6619799?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HristoBuyukliev", "html_url": "https://github.com/HristoBuyukliev", "followers_url": "https://api.github.com/users/HristoBuyukliev/followers", "following_url": "https://api.github.com/users/HristoBuyukliev/following{/other_user}", "gists_url": "https://api.github.com/users/HristoBuyukliev/gists{/gist_id}", "starred_url": "https://api.github.com/users/HristoBuyukliev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HristoBuyukliev/subscriptions", "organizations_url": "https://api.github.com/users/HristoBuyukliev/orgs", "repos_url": "https://api.github.com/users/HristoBuyukliev/repos", "events_url": "https://api.github.com/users/HristoBuyukliev/events{/privacy}", "received_events_url": "https://api.github.com/users/HristoBuyukliev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2020-02-04T15:16:15Z", "updated_at": "2020-02-16T05:39:02Z", "closed_at": null, "author_association": "NONE", "body": "\r\n\r\n### System information\r\n- Custom code; nothing exotic though.\r\n- Ubuntu 18.04\r\n- installed from source (with pip)\r\n- tensorflow version v2.1.0-rc2-17-ge5bf8de\r\n- 3.6\r\n- CUDA 10.1\r\n- Tesla V100, 32GB RAM\r\n\r\nI created a model, nothing especially fancy in it. When I create the model, when using nvidia-smi, I can see that tensorflow takes up nearly all of the memory. When I try to fit the model with a small batch size, it successfully runs. When I fit with a larger batch size, it runs out of memory. Nothing unexpected so far. \r\n\r\nHowever, the only way I can then release the GPU memory is to restart my computer. When I run nvidia-smi I can see the memory is still used, but there is no process using a GPU. Also, If I try to run another model, it fails much sooner. \r\n\r\nNothing in the first five pages of google results works. (and most solutions are for TF1)\r\n\r\nIs there any way to release GPU memory in tensorflow 2?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36464", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36464/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36464/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36464/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36464", "id": 559784408, "node_id": "MDU6SXNzdWU1NTk3ODQ0MDg=", "number": 36464, "title": "If-Condition with TF-Bools looses track of namescopes", "user": {"login": "DavidS3141", "id": 6333870, "node_id": "MDQ6VXNlcjYzMzM4NzA=", "avatar_url": "https://avatars2.githubusercontent.com/u/6333870?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DavidS3141", "html_url": "https://github.com/DavidS3141", "followers_url": "https://api.github.com/users/DavidS3141/followers", "following_url": "https://api.github.com/users/DavidS3141/following{/other_user}", "gists_url": "https://api.github.com/users/DavidS3141/gists{/gist_id}", "starred_url": "https://api.github.com/users/DavidS3141/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DavidS3141/subscriptions", "organizations_url": "https://api.github.com/users/DavidS3141/orgs", "repos_url": "https://api.github.com/users/DavidS3141/repos", "events_url": "https://api.github.com/users/DavidS3141/events{/privacy}", "received_events_url": "https://api.github.com/users/DavidS3141/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1190546177, "node_id": "MDU6TGFiZWwxMTkwNTQ2MTc3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:autograph", "name": "comp:autograph", "color": "0052cc", "default": false, "description": ""}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-02-04T15:12:37Z", "updated_at": "2020-02-07T22:54:51Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes (see below)\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: no\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): tested on tf-gpu v2.0.0 and tf v2.1.0 (CPU as I do not have CUDA 10.1 running)\r\n- Python version: 3.6.7\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 10.1/7.4.2\r\n- GPU model and memory: tested on Nvidia Quadro P2000\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nWhen inside a function with graph mode activated, using an `if` statement with a tensorflow bool leads possibly to a new namescope. I assume this, because the observation one can make is that `tf.summary`s inside this if condition are placed inside different name scopes depending on whether the condition is a python bool (so static w.r.t. to the tensorflow graph) or a tensorflow tensor (resulting in a dynamic `tf.cond` through autograph). This happens for both v2.0 and v2.1, afaict. Of course, in eager mode this problem is non-existent.\r\n\r\n**Describe the expected behavior**\r\nThe final summary scope should be independent of whether a autographed condition was used or a statically compiled one. Attached is a minimal working example producing a tensorboard output show in the image. The two lines are produced by the same `tf.summary.scalar` line inside the `tf.name_scope('monitoring')`. In this case it would be easy enough to move the name_scope creation inside the if-scope, however my use cases do not allow this kind of workaround (summaries are written inside keras layer calls which add their own respective namescope).\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport os.path as osp\r\n\r\nimport tensorflow as tf\r\n\r\n\r\n@tf.function\r\ndef func_with_summaries(step, write_summary):\r\n    with tf.name_scope(\"monitoring\"):\r\n        if write_summary:\r\n            tf.summary.scalar(\"step\", step, tf.cast(step, dtype=tf.int64))\r\n\r\n\r\nbrok_writer = tf.summary.create_file_writer(\r\n    osp.join(\"/tmp\", \"summaries_conds_scopes\", \"broken\")\r\n)\r\nwriter = tf.summary.create_file_writer(\r\n    osp.join(\"/tmp\", \"summaries_conds_scopes\", \"correct\")\r\n)\r\nst = tf.Variable(0.0, name=\"step\", dtype=tf.float32)\r\nfor i in range(10):\r\n    st.assign(i)\r\n    with writer.as_default():\r\n        func_with_summaries(st, i % 3 == 0)\r\n    with brok_writer.as_default():\r\n        func_with_summaries(st, tf.constant(i) % 3 == 0)\r\n```\r\n**Other info / logs**\r\n![image](https://user-images.githubusercontent.com/6333870/73756641-3172cf00-4768-11ea-9ec8-31f003c0c049.png)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36463", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36463/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36463/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36463/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36463", "id": 559749322, "node_id": "MDU6SXNzdWU1NTk3NDkzMjI=", "number": 36463, "title": "tf.keras.Sequential ignores the outer name scope(s) when built proactively", "user": {"login": "aakhundov", "id": 25504988, "node_id": "MDQ6VXNlcjI1NTA0OTg4", "avatar_url": "https://avatars0.githubusercontent.com/u/25504988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aakhundov", "html_url": "https://github.com/aakhundov", "followers_url": "https://api.github.com/users/aakhundov/followers", "following_url": "https://api.github.com/users/aakhundov/following{/other_user}", "gists_url": "https://api.github.com/users/aakhundov/gists{/gist_id}", "starred_url": "https://api.github.com/users/aakhundov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aakhundov/subscriptions", "organizations_url": "https://api.github.com/users/aakhundov/orgs", "repos_url": "https://api.github.com/users/aakhundov/repos", "events_url": "https://api.github.com/users/aakhundov/events{/privacy}", "received_events_url": "https://api.github.com/users/aakhundov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jaingaurav", "id": 84372, "node_id": "MDQ6VXNlcjg0Mzcy", "avatar_url": "https://avatars1.githubusercontent.com/u/84372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaingaurav", "html_url": "https://github.com/jaingaurav", "followers_url": "https://api.github.com/users/jaingaurav/followers", "following_url": "https://api.github.com/users/jaingaurav/following{/other_user}", "gists_url": "https://api.github.com/users/jaingaurav/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaingaurav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaingaurav/subscriptions", "organizations_url": "https://api.github.com/users/jaingaurav/orgs", "repos_url": "https://api.github.com/users/jaingaurav/repos", "events_url": "https://api.github.com/users/jaingaurav/events{/privacy}", "received_events_url": "https://api.github.com/users/jaingaurav/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jaingaurav", "id": 84372, "node_id": "MDQ6VXNlcjg0Mzcy", "avatar_url": "https://avatars1.githubusercontent.com/u/84372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaingaurav", "html_url": "https://github.com/jaingaurav", "followers_url": "https://api.github.com/users/jaingaurav/followers", "following_url": "https://api.github.com/users/jaingaurav/following{/other_user}", "gists_url": "https://api.github.com/users/jaingaurav/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaingaurav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaingaurav/subscriptions", "organizations_url": "https://api.github.com/users/jaingaurav/orgs", "repos_url": "https://api.github.com/users/jaingaurav/repos", "events_url": "https://api.github.com/users/jaingaurav/events{/privacy}", "received_events_url": "https://api.github.com/users/jaingaurav/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-02-04T14:18:22Z", "updated_at": "2020-03-11T09:52:00Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS Catalina 10.15.2 (19C57)\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.1.0\r\n- Python version: 3.6.5 (v3.6.5:f59c0932b4)\r\n\r\n**Describe the current behavior**\r\n\r\nWhen the `build` method of a `tf.keras.Sequential` instance is (explicitly) called within one (or several nested) `tf.name_scope` context manager(s), the variable (weight) names of the layers wrapped into the `Sequential` don't get the respective name scope prefixes.\r\n\r\n**Describe the expected behavior**\r\n\r\nAfter `build`ing a `Sequential`, all the `tf.name_scope`s surrounding the `build` call must be reflected as prefixes of the `Sequential`'s variable (weight) names. This is what currently happens in `tensorflow==1.15.2`.\r\n\r\n**Code to reproduce the issue**\r\n\r\n```python\r\nimport tensorflow as tf\r\n\r\nseq = tf.keras.Sequential(layers=[\r\n    tf.keras.layers.Dense(units=10, name=\"d1\"),\r\n    tf.keras.layers.Dense(units=20, name=\"d2\"),\r\n])\r\n\r\nwith tf.name_scope(\"a\"):\r\n    with tf.name_scope(\"b\"):\r\n        seq.build(input_shape=[32, 784])\r\n\r\nfor w in seq.weights:\r\n    print(w.name)\r\n```\r\n\r\nthe output with `tensorflow==2.1.0`:\r\n\r\n```\r\nd1/kernel:0\r\nd1/bias:0\r\nd2/kernel:0\r\nd2/bias:0\r\n```\r\n\r\nthe output with `tensorflow==1.15.2`:\r\n\r\n```\r\na/b/d1/kernel:0\r\na/b/d1/bias:0\r\na/b/d2/kernel:0\r\na/b/d2/bias:0\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36458", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36458/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36458/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36458/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/36458", "id": 559606607, "node_id": "MDExOlB1bGxSZXF1ZXN0MzcwNzQzMTkx", "number": 36458, "title": "Update cohen's Kappa to allow for batch dimension", "user": {"login": "loodvn", "id": 13983198, "node_id": "MDQ6VXNlcjEzOTgzMTk4", "avatar_url": "https://avatars2.githubusercontent.com/u/13983198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/loodvn", "html_url": "https://github.com/loodvn", "followers_url": "https://api.github.com/users/loodvn/followers", "following_url": "https://api.github.com/users/loodvn/following{/other_user}", "gists_url": "https://api.github.com/users/loodvn/gists{/gist_id}", "starred_url": "https://api.github.com/users/loodvn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/loodvn/subscriptions", "organizations_url": "https://api.github.com/users/loodvn/orgs", "repos_url": "https://api.github.com/users/loodvn/repos", "events_url": "https://api.github.com/users/loodvn/events{/privacy}", "received_events_url": "https://api.github.com/users/loodvn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 1918510949, "node_id": "MDU6TGFiZWwxOTE4NTEwOTQ5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/waiting%20for%20patch%20release", "name": "waiting for patch release", "color": "e8c25c", "default": false, "description": "PR will be reviewed and merged only if we do a patch release since PR is not on master branch"}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-02-04T09:56:57Z", "updated_at": "2020-03-18T17:14:39Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/36458", "html_url": "https://github.com/tensorflow/tensorflow/pull/36458", "diff_url": "https://github.com/tensorflow/tensorflow/pull/36458.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/36458.patch"}, "body": "Not sure if we're still able to make changes to TF1, but I have to use it for AWS Sagemaker unfortunately.\r\n\r\nI see in the Cohen's Kappa function, line 3857, we squeeze 2-dimensional label tensors (num, 1) down to 1-dim (num,). Unfortunately, in my case my label tensor is (batch_size, num), and then this function squeezes that down unnecessarily.\r\n\r\nMy current workaround is to call the function as follows:\r\n\r\n```\r\nkappa = tf.contrib.metrics.cohen_kappa(labels=tf.reshape(labels, [-1]),\r\n                                           predictions_idx=tf.reshape(predictions, [-1]),\r\n                                           num_classes=N_CLASSES,\r\n                                           name='kappa_op')\r\n```\r\n\r\nWhich seems to work fine."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36456", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36456/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36456/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36456/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36456", "id": 559558171, "node_id": "MDU6SXNzdWU1NTk1NTgxNzE=", "number": 36456, "title": "Unable to evaluate FusedBatchNormV3 operation without GPU", "user": {"login": "hadusam", "id": 12394960, "node_id": "MDQ6VXNlcjEyMzk0OTYw", "avatar_url": "https://avatars2.githubusercontent.com/u/12394960?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hadusam", "html_url": "https://github.com/hadusam", "followers_url": "https://api.github.com/users/hadusam/followers", "following_url": "https://api.github.com/users/hadusam/following{/other_user}", "gists_url": "https://api.github.com/users/hadusam/gists{/gist_id}", "starred_url": "https://api.github.com/users/hadusam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hadusam/subscriptions", "organizations_url": "https://api.github.com/users/hadusam/orgs", "repos_url": "https://api.github.com/users/hadusam/repos", "events_url": "https://api.github.com/users/hadusam/events{/privacy}", "received_events_url": "https://api.github.com/users/hadusam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-04T08:22:40Z", "updated_at": "2020-03-19T00:08:19Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code: Yes\r\n- OS Platform and Distribution: Linux Ubuntu 16.04\r\n- Mobile device if the issue happens on mobile device: n/a\r\n- TensorFlow installed from: binary (installed by pip)\r\n- TensorFlow version: v1.15.0-rc3-22-g590d6ee 1.15.0\r\n- Python version: 3.5.2\r\n- Bazel version (if compiling from source): n/a\r\n- GCC/Compiler version (if compiling from source): n/a\r\n- CUDA/cuDNN version: CUDA:10.0, cuDNN:7.6\r\n- GPU model and memory: GeForce GTX 1080 Ti\r\n\r\n**Describe the current behavior**\r\nI would like to evaluate the outputs of each operation of our network.\r\nI succeeded to get the outputs by running the following code with GPU (Using `tensorflow-gpu`), but without GPU (Using `tensorflow-cpu`), I got an error as follows.\r\n```\r\ntensorflow.python.framework.errors_impl.OutOfRangeError: Node 'BatchNorm/FusedBatchNormV3' (type: '_FusedConv2D', num of outputs: 1) does not have output 1\r\n```\r\nThere are different behavior about `BatchNorm/FusedBatchNormV3` between w/ GPU and w/o GPU.\r\nI think `FusedBatchNormV3`'s num of outputs should be 6 but that error shows num of outputs is 1.\r\n\r\n**Describe the expected behavior**\r\nI expected to be enabled to evaluate the outputs of `BatchNorm/FusedBatchNormV3` only using CPU.\r\n\r\n**Code to reproduce the issue**\r\nAt first, create a test script (`test.py`) as following.\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\nbatch_size=1\r\nimage_size = (64,64)\r\n\r\ndef main():\r\n    graph = tf.Graph()\r\n    with graph.as_default():\r\n        shape = (batch_size, image_size[0], image_size[1], 3)\r\n        images_placeholder = tf.compat.v1.placeholder(\r\n            tf.float32,\r\n            shape=shape,\r\n            name=\"images_placeholder\")\r\n\r\n        conv = tf.layers.conv2d(images_placeholder, filters=32, kernel_size=3, padding='SAME', use_bias=False)\r\n        batch_normed = tf.contrib.layers.batch_norm(conv,is_training=False)\r\n        softmax = tf.nn.softmax(batch_normed)\r\n        output = tf.identity(softmax, name=\"output\")\r\n\r\n        init_op = tf.global_variables_initializer()\r\n\r\n    session_config = tf.ConfigProto()\r\n    sess = tf.Session(graph=graph, config=session_config)\r\n    sess.run(init_op)\r\n\r\n    images = np.expand_dims(np.zeros((image_size[0],image_size[1], 3), dtype=float), axis=0)\r\n    feed_dict = {\r\n        images_placeholder: images,\r\n    }\r\n    \r\n    all_ops = graph.get_operations()\r\n    all_outputs = []\r\n    index = 0\r\n    for op in all_ops:\r\n        for op_output in op.outputs:\r\n            print(op_output)\r\n            val = sess.run(op_output.name, feed_dict=feed_dict)\r\n            all_outputs.append({'val': val, 'name': op_output.name})\r\n            index += 1\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\nAfter that, run commands as following.\r\n```\r\n$ pip install tensorflow-cpu==1.15.0\r\n$ python test.py\r\n``` \r\n\r\n**Other info / logs**\r\n* [**Success**] Run `test.py` with GPU (`tensorflow-gpu==1.15.0`)\r\n```\r\n$ python test.py \r\nWARNING:tensorflow:From test.py:16: conv2d (from tensorflow.python.layers.convolutional) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse `tf.keras.layers.Conv2D` instead.\r\nWARNING:tensorflow:From /home/hadusam/tensorflow-gpu/lib/python3.5/site-packages/tensorflow_core/python/layers/convolutional.py:424: Layer.apply (from tensorflow.python.keras.engine.base_layer) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nPlease use `layer.__call__` method instead.\r\nWARNING:tensorflow:\r\nThe TensorFlow contrib module will not be included in TensorFlow 2.0.\r\nFor more information, please see:\r\n  * https://github.com/tensorflow/community/blob/master/rfcs/20180907-contrib-sunset.md\r\n  * https://github.com/tensorflow/addons\r\n  * https://github.com/tensorflow/io (for I/O related ops)\r\nIf you depend on functionality not listed there, please file an issue.\r\n\r\nWARNING:tensorflow:From test.py:21: The name tf.global_variables_initializer is deprecated. Please use tf.compat.v1.global_variables_initializer instead.\r\n\r\nWARNING:tensorflow:From test.py:23: The name tf.ConfigProto is deprecated. Please use tf.compat.v1.ConfigProto instead.\r\n\r\nWARNING:tensorflow:From test.py:24: The name tf.Session is deprecated. Please use tf.compat.v1.Session instead.\r\n\r\n2020-02-04 17:12:56.452491: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 AVX512F FMA\r\n2020-02-04 17:12:56.458872: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 3599980000 Hz\r\n2020-02-04 17:12:56.459272: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x6728e70 initialized for platform Host (this does not guarantee that XLA will be used). Devices:\r\n2020-02-04 17:12:56.459299: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version\r\n2020-02-04 17:12:56.462463: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcuda.so.1\r\n2020-02-04 17:12:56.676188: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x67d26e0 initialized for platform CUDA (this does not guarantee that XLA will be used). Devices:\r\n2020-02-04 17:12:56.676219: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): GeForce GTX 1080 Ti, Compute Capability 6.1\r\n2020-02-04 17:12:56.677202: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1618] Found device 0 with properties: \r\nname: GeForce GTX 1080 Ti major: 6 minor: 1 memoryClockRate(GHz): 1.62\r\npciBusID: 0000:af:00.0\r\n2020-02-04 17:12:56.677442: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.0\r\n2020-02-04 17:12:56.678571: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10.0\r\n2020-02-04 17:12:56.679662: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcufft.so.10.0\r\n2020-02-04 17:12:56.679943: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcurand.so.10.0\r\n2020-02-04 17:12:56.681246: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusolver.so.10.0\r\n2020-02-04 17:12:56.682741: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusparse.so.10.0\r\n2020-02-04 17:12:56.685936: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7\r\n2020-02-04 17:12:56.688818: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1746] Adding visible gpu devices: 0\r\n2020-02-04 17:12:56.688898: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.0\r\n2020-02-04 17:12:56.689938: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1159] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2020-02-04 17:12:56.689984: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1165]      0 \r\n2020-02-04 17:12:56.690014: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1178] 0:   N \r\n2020-02-04 17:12:56.691698: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1304] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 10470 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080 Ti, pci bus id: 0000:af:00.0, compute capability: 6.1)\r\nTensor(\"images_placeholder:0\", shape=(1, 64, 64, 3), dtype=float32)\r\nTensor(\"conv2d/kernel/Initializer/random_uniform/shape:0\", shape=(4,), dtype=int32)\r\nTensor(\"conv2d/kernel/Initializer/random_uniform/min:0\", shape=(), dtype=float32)\r\nTensor(\"conv2d/kernel/Initializer/random_uniform/max:0\", shape=(), dtype=float32)\r\nTensor(\"conv2d/kernel/Initializer/random_uniform/RandomUniform:0\", shape=(3, 3, 3, 32), dtype=float32)\r\nTensor(\"conv2d/kernel/Initializer/random_uniform/sub:0\", shape=(), dtype=float32)\r\nTensor(\"conv2d/kernel/Initializer/random_uniform/mul:0\", shape=(3, 3, 3, 32), dtype=float32)\r\nTensor(\"conv2d/kernel/Initializer/random_uniform:0\", shape=(3, 3, 3, 32), dtype=float32)\r\nTensor(\"conv2d/kernel:0\", shape=(3, 3, 3, 32), dtype=float32_ref)\r\nTensor(\"conv2d/kernel/Assign:0\", shape=(3, 3, 3, 32), dtype=float32_ref)\r\nTensor(\"conv2d/kernel/read:0\", shape=(3, 3, 3, 32), dtype=float32)\r\nTensor(\"conv2d/dilation_rate:0\", shape=(2,), dtype=int32)\r\nTensor(\"conv2d/Conv2D:0\", shape=(1, 64, 64, 32), dtype=float32)\r\n2020-02-04 17:12:57.365891: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7\r\n2020-02-04 17:12:58.204387: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10.0\r\nTensor(\"BatchNorm/Const:0\", shape=(32,), dtype=float32)\r\nTensor(\"BatchNorm/beta/Initializer/zeros:0\", shape=(32,), dtype=float32)\r\nTensor(\"BatchNorm/beta:0\", shape=(32,), dtype=float32_ref)\r\nTensor(\"BatchNorm/beta/Assign:0\", shape=(32,), dtype=float32_ref)\r\nTensor(\"BatchNorm/beta/read:0\", shape=(32,), dtype=float32)\r\nTensor(\"BatchNorm/moving_mean/Initializer/zeros:0\", shape=(32,), dtype=float32)\r\nTensor(\"BatchNorm/moving_mean:0\", shape=(32,), dtype=float32_ref)\r\nTensor(\"BatchNorm/moving_mean/Assign:0\", shape=(32,), dtype=float32_ref)\r\nTensor(\"BatchNorm/moving_mean/read:0\", shape=(32,), dtype=float32)\r\nTensor(\"BatchNorm/moving_variance/Initializer/ones:0\", shape=(32,), dtype=float32)\r\nTensor(\"BatchNorm/moving_variance:0\", shape=(32,), dtype=float32_ref)\r\nTensor(\"BatchNorm/moving_variance/Assign:0\", shape=(32,), dtype=float32_ref)\r\nTensor(\"BatchNorm/moving_variance/read:0\", shape=(32,), dtype=float32)\r\nTensor(\"BatchNorm/FusedBatchNormV3:0\", shape=(1, 64, 64, 32), dtype=float32)\r\nTensor(\"BatchNorm/FusedBatchNormV3:1\", shape=(32,), dtype=float32)\r\nTensor(\"BatchNorm/FusedBatchNormV3:2\", shape=(32,), dtype=float32)\r\nTensor(\"BatchNorm/FusedBatchNormV3:3\", shape=(32,), dtype=float32)\r\nTensor(\"BatchNorm/FusedBatchNormV3:4\", shape=(32,), dtype=float32)\r\nTensor(\"BatchNorm/FusedBatchNormV3:5\", dtype=float32)\r\nTensor(\"BatchNorm/Const_1:0\", shape=(), dtype=float32)\r\nTensor(\"Softmax:0\", shape=(1, 64, 64, 32), dtype=float32)\r\nTensor(\"output:0\", shape=(1, 64, 64, 32), dtype=float32)\r\n```\r\n\r\n\r\n* [**Error**] Run `test.py` without GPU (`tensorflow-cpu==1.15.0`)\r\n```\r\n$ python test.py\r\nWARNING:tensorflow:From test.py:16: conv2d (from tensorflow.python.layers.convolutional) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse `tf.keras.layers.Conv2D` instead.\r\nWARNING:tensorflow:From /home/hadusam/tensorflow-cpu/lib/python3.5/site-packages/tensorflow_core/python/layers/convolutional.py:424: Layer.apply (from tensorflow.python.keras.engine.base_layer) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nPlease use `layer.__call__` method instead.\r\nWARNING:tensorflow:\r\nThe TensorFlow contrib module will not be included in TensorFlow 2.0.\r\nFor more information, please see:\r\n  * https://github.com/tensorflow/community/blob/master/rfcs/20180907-contrib-sunset.md\r\n  * https://github.com/tensorflow/addons\r\n  * https://github.com/tensorflow/io (for I/O related ops)\r\nIf you depend on functionality not listed there, please file an issue.\r\n\r\nWARNING:tensorflow:From test.py:21: The name tf.global_variables_initializer is deprecated. Please use tf.compat.v1.global_variables_initializer instead.\r\n\r\nWARNING:tensorflow:From test.py:23: The name tf.ConfigProto is deprecated. Please use tf.compat.v1.ConfigProto instead.\r\n\r\nWARNING:tensorflow:From test.py:24: The name tf.Session is deprecated. Please use tf.compat.v1.Session instead.\r\n\r\n2020-02-04 17:26:55.513752: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 AVX512F FMA\r\n2020-02-04 17:26:55.518222: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 3599980000 Hz\r\n2020-02-04 17:26:55.518610: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x52ffee0 initialized for platform Host (this does not guarantee that XLA will be used). Devices:\r\n2020-02-04 17:26:55.518636: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version\r\nTensor(\"images_placeholder:0\", shape=(1, 64, 64, 3), dtype=float32)\r\nTensor(\"conv2d/kernel/Initializer/random_uniform/shape:0\", shape=(4,), dtype=int32)\r\nTensor(\"conv2d/kernel/Initializer/random_uniform/min:0\", shape=(), dtype=float32)\r\nTensor(\"conv2d/kernel/Initializer/random_uniform/max:0\", shape=(), dtype=float32)\r\nTensor(\"conv2d/kernel/Initializer/random_uniform/RandomUniform:0\", shape=(3, 3, 3, 32), dtype=float32)\r\nTensor(\"conv2d/kernel/Initializer/random_uniform/sub:0\", shape=(), dtype=float32)\r\nTensor(\"conv2d/kernel/Initializer/random_uniform/mul:0\", shape=(3, 3, 3, 32), dtype=float32)\r\nTensor(\"conv2d/kernel/Initializer/random_uniform:0\", shape=(3, 3, 3, 32), dtype=float32)\r\nTensor(\"conv2d/kernel:0\", shape=(3, 3, 3, 32), dtype=float32_ref)\r\nTensor(\"conv2d/kernel/Assign:0\", shape=(3, 3, 3, 32), dtype=float32_ref)\r\nTensor(\"conv2d/kernel/read:0\", shape=(3, 3, 3, 32), dtype=float32)\r\nTensor(\"conv2d/dilation_rate:0\", shape=(2,), dtype=int32)\r\nTensor(\"conv2d/Conv2D:0\", shape=(1, 64, 64, 32), dtype=float32)\r\nTensor(\"BatchNorm/Const:0\", shape=(32,), dtype=float32)\r\nTensor(\"BatchNorm/beta/Initializer/zeros:0\", shape=(32,), dtype=float32)\r\nTensor(\"BatchNorm/beta:0\", shape=(32,), dtype=float32_ref)\r\nTensor(\"BatchNorm/beta/Assign:0\", shape=(32,), dtype=float32_ref)\r\nTensor(\"BatchNorm/beta/read:0\", shape=(32,), dtype=float32)\r\nTensor(\"BatchNorm/moving_mean/Initializer/zeros:0\", shape=(32,), dtype=float32)\r\nTensor(\"BatchNorm/moving_mean:0\", shape=(32,), dtype=float32_ref)\r\nTensor(\"BatchNorm/moving_mean/Assign:0\", shape=(32,), dtype=float32_ref)\r\nTensor(\"BatchNorm/moving_mean/read:0\", shape=(32,), dtype=float32)\r\nTensor(\"BatchNorm/moving_variance/Initializer/ones:0\", shape=(32,), dtype=float32)\r\nTensor(\"BatchNorm/moving_variance:0\", shape=(32,), dtype=float32_ref)\r\nTensor(\"BatchNorm/moving_variance/Assign:0\", shape=(32,), dtype=float32_ref)\r\nTensor(\"BatchNorm/moving_variance/read:0\", shape=(32,), dtype=float32)\r\nTensor(\"BatchNorm/FusedBatchNormV3:0\", shape=(1, 64, 64, 32), dtype=float32)\r\nTensor(\"BatchNorm/FusedBatchNormV3:1\", shape=(32,), dtype=float32)\r\nTraceback (most recent call last):\r\n  File \"/home/hadusam/tensorflow-cpu/lib/python3.5/site-packages/tensorflow_core/python/client/session.py\", line 1365, in _do_call\r\n    return fn(*args)\r\n  File \"/home/hadusam/tensorflow-cpu/lib/python3.5/site-packages/tensorflow_core/python/client/session.py\", line 1350, in _run_fn\r\n    target_list, run_metadata)\r\n  File \"/home/hadusam/tensorflow-cpu/lib/python3.5/site-packages/tensorflow_core/python/client/session.py\", line 1443, in _call_tf_sessionrun\r\n    run_metadata)\r\ntensorflow.python.framework.errors_impl.OutOfRangeError: Node 'BatchNorm/FusedBatchNormV3' (type: '_FusedConv2D', num of outputs: 1) does not have output 1\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 43, in <module>\r\n    main()\r\n  File \"test.py\", line 38, in main\r\n    val = sess.run(op_output.name, feed_dict=feed_dict)\r\n  File \"/home/hadusam/tensorflow-cpu/lib/python3.5/site-packages/tensorflow_core/python/client/session.py\", line 956, in run\r\n    run_metadata_ptr)\r\n  File \"/home/hadusam/tensorflow-cpu/lib/python3.5/site-packages/tensorflow_core/python/client/session.py\", line 1180, in _run\r\n    feed_dict_tensor, options, run_metadata)\r\n  File \"/home/hadusam/tensorflow-cpu/lib/python3.5/site-packages/tensorflow_core/python/client/session.py\", line 1359, in _do_run\r\n    run_metadata)\r\n  File \"/home/hadusam/tensorflow-cpu/lib/python3.5/site-packages/tensorflow_core/python/client/session.py\", line 1384, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.OutOfRangeError: Node 'BatchNorm/FusedBatchNormV3' (type: '_FusedConv2D', num of outputs: 1) does not have output 1\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36452", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36452/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36452/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36452/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36452", "id": 559460645, "node_id": "MDU6SXNzdWU1NTk0NjA2NDU=", "number": 36452, "title": "Broken outbound links from index pages for older TF API", "user": {"login": "lichili233", "id": 5413511, "node_id": "MDQ6VXNlcjU0MTM1MTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/5413511?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lichili233", "html_url": "https://github.com/lichili233", "followers_url": "https://api.github.com/users/lichili233/followers", "following_url": "https://api.github.com/users/lichili233/following{/other_user}", "gists_url": "https://api.github.com/users/lichili233/gists{/gist_id}", "starred_url": "https://api.github.com/users/lichili233/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lichili233/subscriptions", "organizations_url": "https://api.github.com/users/lichili233/orgs", "repos_url": "https://api.github.com/users/lichili233/repos", "events_url": "https://api.github.com/users/lichili233/events{/privacy}", "received_events_url": "https://api.github.com/users/lichili233/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-02-04T03:11:53Z", "updated_at": "2020-03-12T14:13:10Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\n\r\nNumerous links of the older TF APIs, listing only a few index pages as examples here:\r\n\r\n- Links under \"Classes\" and \"Functions\" within https://github.com/tensorflow/docs/blob/r1.11/site/en/api_docs/python/tf.md\r\n- Links under \"Classes\" and \"Functions\" within https://github.com/tensorflow/docs/blob/r1.11/site/en/api_docs/python/tfdbg.md\r\n- Links within https://github.com/tensorflow/docs/blob/r1.5/site/en/api_docs/python/index.md\r\n- \"JAVA\" link within https://github.com/tensorflow/docs/blob/r1.7/site/en/api_docs/index.md\r\n\r\n## Description of issue (what needs changing):\r\n\r\nA large amount of links on index pages (e.g. for functions and classes) are currently broken (404). This appears to affect only the older TF versions (multiple versions affected), whose index pages are Markdown files within Github repositories.\r\n\r\n### Clear description\r\n\r\nOutbound links from these indexing pages are currently broken. Some might be fixed by adding a .md after the current URL to point to the correct Markdown available in the repositories, but not all of them can be fixed through this way.\r\n\r\n### Correct links\r\n\r\nIs the link to the source code correct?\r\n- Incorrect.\r\n\r\n### Submit a pull request?\r\n\r\nAre you planning to also submit a pull request to fix the issue?\r\n- Currently no plan.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36451", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36451/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36451/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36451/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36451", "id": 559411463, "node_id": "MDU6SXNzdWU1NTk0MTE0NjM=", "number": 36451, "title": "Differentiating an extremely complicated weightless transform", "user": {"login": "OverLordGoldDragon", "id": 16495490, "node_id": "MDQ6VXNlcjE2NDk1NDkw", "avatar_url": "https://avatars2.githubusercontent.com/u/16495490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/OverLordGoldDragon", "html_url": "https://github.com/OverLordGoldDragon", "followers_url": "https://api.github.com/users/OverLordGoldDragon/followers", "following_url": "https://api.github.com/users/OverLordGoldDragon/following{/other_user}", "gists_url": "https://api.github.com/users/OverLordGoldDragon/gists{/gist_id}", "starred_url": "https://api.github.com/users/OverLordGoldDragon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/OverLordGoldDragon/subscriptions", "organizations_url": "https://api.github.com/users/OverLordGoldDragon/orgs", "repos_url": "https://api.github.com/users/OverLordGoldDragon/repos", "events_url": "https://api.github.com/users/OverLordGoldDragon/events{/privacy}", "received_events_url": "https://api.github.com/users/OverLordGoldDragon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-04T00:14:25Z", "updated_at": "2020-02-04T17:58:28Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "I'm considering inserting a weightless transform between CNN layers in a neural network. The transform is very complicated - details below. I'm aware that custom transformations are supported via e.g. Keras'  `Lambda` layer  - however, I don't know if TF is capable of handling something of this complexity. The code I have needs to be converted for compatibility, but I rather it not be a wasted effort.\r\n\r\nCan TensorFlow's autodifferentiation handle [`synsq_cwt_fwd`](https://github.com/OverLordGoldDragon/ssqueezepy/blob/master/ssqueezepy/synsq_cwt.py#L12)?\r\n\r\n\r\n<hr>\r\n\r\n**Continuous Synchrosqueezing Transform** - full dev-stage code in the [ssqueezepy](https://github.com/OverLordGoldDragon/ssqueezepy) repository. Highlights (simplified):\r\n\r\n```python\r\nx = np.random.randn(2000)\r\nlen(Wx.squeeze().shape) == 2\r\n\r\npsihfn = lambda w: np.exp(2 * PI * 1j * .1 * w) * (\r\n    np.abs(w - 1) < .999) * np.exp(-1. / (1 - ((w - 1) * (np.abs(w - 1) < .999)) ** 2))\r\n\r\nfor i in range(200):\r\n    psih = psihfn(5 * np.arange(500))\r\n    Wx[i] = np.fft.ifftshift(np.fft.ifft(psih * np.fft.fft(x)))\r\n```\r\n```python\r\nWx.dtype == 'complex128'\r\nu = np.unwrap(np.angle(Wx)).T\r\nw = np.array([np.diff(u), u[-1] - u[0]]).T\r\n```\r\n 1. `psihfn` involves (a) complex exponential; (b) inverse asymptotic real exponential; (c) boolean mask\r\n 2. `Wx` involves (a) `fft` of `ifftshift` of `ifft` of `psih * fft(x)`, (b) computed _iteratively_, but _not recurrently_ (future values don't depend on past)\r\n 3. `w`  (second blob) involves (a) `Wx` computed in 1 & 2, a `complex128` 2D array; (b) applying `dif(unwrap(angle(Wx)).T)`\r\n\r\nThe complex components may be eliminated entirely, including in 1(a). The main subject of attention is perhaps the FFT nest; I don't know how numpy computes FFT, as it encapsulates an involved op. There's also a question of _performance_ - if it takes hours on a small array, it's not worth it."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36447", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36447/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36447/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36447/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36447", "id": 559288425, "node_id": "MDU6SXNzdWU1NTkyODg0MjU=", "number": 36447, "title": "Saving to file a model within TPUStrategy", "user": {"login": "vicpara", "id": 1392100, "node_id": "MDQ6VXNlcjEzOTIxMDA=", "avatar_url": "https://avatars2.githubusercontent.com/u/1392100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vicpara", "html_url": "https://github.com/vicpara", "followers_url": "https://api.github.com/users/vicpara/followers", "following_url": "https://api.github.com/users/vicpara/following{/other_user}", "gists_url": "https://api.github.com/users/vicpara/gists{/gist_id}", "starred_url": "https://api.github.com/users/vicpara/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vicpara/subscriptions", "organizations_url": "https://api.github.com/users/vicpara/orgs", "repos_url": "https://api.github.com/users/vicpara/repos", "events_url": "https://api.github.com/users/vicpara/events{/privacy}", "received_events_url": "https://api.github.com/users/vicpara/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-03T19:35:11Z", "updated_at": "2020-02-11T06:50:48Z", "closed_at": null, "author_association": "NONE", "body": "On Tensorflow 2.0 and 2.1, trying to save to file a TPU trained model or a model that was even created within the scope of a `tf.distribute.experimental.TPUStrategy` yields error below. Despite throwing an `UnimplementedException` the code does create a folder on disk with some content. \r\n\r\nThe reproducible code can be found in a collab notebook here:\r\nhttps://colab.research.google.com/drive/1DOkwNlzMLsg0wQZe41eq88XhEUqR9Amn\r\n\r\n**The exception and it's stack**\r\n```python\r\n---------------------------------------------------------------------------\r\nUnimplementedError                        Traceback (most recent call last)\r\n<ipython-input-7-b3a563716de1> in <module>()\r\n     48         print(\"1.4 \",err)\r\n     49 \r\n---> 50     model.save(\"model-new.1\")\r\n     51 \r\n     52     model.compile(\r\n\r\n14 frames\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/keras/engine/network.py in save(self, filepath, overwrite, include_optimizer, save_format, signatures, options)\r\n   1006     \"\"\"\r\n   1007     save.save_model(self, filepath, overwrite, include_optimizer, save_format,\r\n-> 1008                     signatures, options)\r\n   1009 \r\n   1010   def save_weights(self, filepath, overwrite=True, save_format=None):\r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/keras/saving/save.py in save_model(model, filepath, overwrite, include_optimizer, save_format, signatures, options)\r\n    113   else:\r\n    114     saved_model_save.save(model, filepath, overwrite, include_optimizer,\r\n--> 115                           signatures, options)\r\n    116 \r\n    117 \r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/keras/saving/saved_model/save.py in save(model, filepath, overwrite, include_optimizer, signatures, options)\r\n     76     # we use the default replica context here.\r\n     77     with distribution_strategy_context._get_default_replica_context():  # pylint: disable=protected-access\r\n---> 78       save_lib.save(model, filepath, signatures, options)\r\n     79 \r\n     80   if not include_optimizer:\r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/saved_model/save.py in save(obj, export_dir, signatures, options)\r\n    914   # SavedModel proto itself.\r\n    915   utils_impl.get_or_create_variables_dir(export_dir)\r\n--> 916   object_saver.save(utils_impl.get_variables_path(export_dir))\r\n    917   builder_impl.copy_assets_to_destination_dir(asset_info.asset_filename_map,\r\n    918                                               export_dir)\r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/training/tracking/util.py in save(self, file_prefix, checkpoint_number, session)\r\n   1166     file_io.recursive_create_dir(os.path.dirname(file_prefix))\r\n   1167     save_path, new_feed_additions = self._save_cached_when_graph_building(\r\n-> 1168         file_prefix=file_prefix_tensor, object_graph_tensor=object_graph_tensor)\r\n   1169     if new_feed_additions:\r\n   1170       feed_dict.update(new_feed_additions)\r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/training/tracking/util.py in _save_cached_when_graph_building(self, file_prefix, object_graph_tensor)\r\n   1114         or context.executing_eagerly() or ops.inside_function()):\r\n   1115       saver = functional_saver.MultiDeviceSaver(named_saveable_objects)\r\n-> 1116       save_op = saver.save(file_prefix)\r\n   1117       with ops.device(\"/cpu:0\"):\r\n   1118         with ops.control_dependencies([save_op]):\r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/training/saving/functional_saver.py in save(self, file_prefix)\r\n    228         # _SingleDeviceSaver will use the CPU device when necessary, but initial\r\n    229         # read operations should be placed on the SaveableObject's device.\r\n--> 230         sharded_saves.append(saver.save(shard_prefix))\r\n    231 \r\n    232     with ops.control_dependencies(sharded_saves):\r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/training/saving/functional_saver.py in save(self, file_prefix)\r\n     67       for spec in saveable.specs:\r\n     68         tensor_names.append(spec.name)\r\n---> 69         tensors.append(spec.tensor)\r\n     70         tensor_slices.append(spec.slice_spec)\r\n     71     with ops.device(\"cpu:0\"):\r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/training/saving/saveable_object.py in tensor(self)\r\n     50   @property\r\n     51   def tensor(self):\r\n---> 52     return self._tensor() if callable(self._tensor) else self._tensor\r\n     53 \r\n     54 \r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/training/saving/saveable_object_util.py in f()\r\n     89         def f():\r\n     90           with ops.device(v.device):\r\n---> 91             x = v.read_value()\r\n     92             # To allow variables placed on non-CPU devices to be checkpointed,\r\n     93             # we copy them to CPU on the same machine first.\r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/ops/resource_variable_ops.py in read_value(self)\r\n    633     \"\"\"\r\n    634     with ops.name_scope(\"Read\"):\r\n--> 635       value = self._read_variable_op()\r\n    636     # Return an identity so it can get placed on whatever device the context\r\n    637     # specifies instead of the device where the variable is.\r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/ops/resource_variable_ops.py in _read_variable_op(self)\r\n    611     variable_accessed(self)\r\n    612     result = gen_resource_variable_ops.read_variable_op(self._handle,\r\n--> 613                                                         self._dtype)\r\n    614     _maybe_set_handle_data(self._dtype, self._handle, result)\r\n    615 \r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/ops/gen_resource_variable_ops.py in read_variable_op(resource, dtype, name)\r\n    477         pass  # Add nodes to the TensorFlow graph.\r\n    478     except _core._NotOkStatusException as e:\r\n--> 479       _ops.raise_from_not_ok_status(e, name)\r\n    480   # Add nodes to the TensorFlow graph.\r\n    481   dtype = _execute.make_type(dtype, \"dtype\")\r\n\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/framework/ops.py in raise_from_not_ok_status(e, name)\r\n   6604   message = e.message + (\" name: \" + name if name is not None else \"\")\r\n   6605   # pylint: disable=protected-access\r\n-> 6606   six.raise_from(core._status_to_exception(e.code, message), None)\r\n   6607   # pylint: enable=protected-access\r\n   6608 \r\n\r\n/usr/local/lib/python3.6/dist-packages/six.py in raise_from(value, from_value)\r\n\r\nUnimplementedError: File system scheme '[local]' not implemented (file: 'model-new.1/variables/variables_temp_17ffcf98334348fd8ef1e339869f0bfc')\r\n\tEncountered when executing an operation using EagerExecutor. This error cancels all future operations and poisons their output tensors. [Op:ReadVariableOp]\r\n```\r\n\r\n\r\n**System information**\r\nThe error is reproduced in Collab so I'm skipping `tf_env_collect.sh` output.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36446", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36446/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36446/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36446/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36446", "id": 559283175, "node_id": "MDU6SXNzdWU1NTkyODMxNzU=", "number": 36446, "title": "tf.keras model.fit(): enormous difference between train loss and val loss on the same data", "user": {"login": "dmus", "id": 464378, "node_id": "MDQ6VXNlcjQ2NDM3OA==", "avatar_url": "https://avatars1.githubusercontent.com/u/464378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmus", "html_url": "https://github.com/dmus", "followers_url": "https://api.github.com/users/dmus/followers", "following_url": "https://api.github.com/users/dmus/following{/other_user}", "gists_url": "https://api.github.com/users/dmus/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmus/subscriptions", "organizations_url": "https://api.github.com/users/dmus/orgs", "repos_url": "https://api.github.com/users/dmus/repos", "events_url": "https://api.github.com/users/dmus/events{/privacy}", "received_events_url": "https://api.github.com/users/dmus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-02-03T19:24:18Z", "updated_at": "2020-03-13T16:44:31Z", "closed_at": null, "author_association": "NONE", "body": "Tensorflow version 2.1\r\n\r\nSee the colab notebook to reproduce the issue: https://drive.google.com/file/d/1Fvc6G_9v5mek015cai7qYT6HoY-fLkzk/view?usp=sharing\r\n\r\nWhen the training loss goes down the val_loss does not change, although this is exactly the same data.\r\n\r\nTrain on 2 samples, validate on 2 samples\r\nEpoch 1/30\r\n2/2 [==============================] - 3s 2s/sample - loss: 0.4630 - val_loss: 302.4763\r\nEpoch 2/30\r\n2/2 [==============================] - 1s 457ms/sample - loss: 0.8565 - val_loss: 496.9578\r\nEpoch 3/30\r\n2/2 [==============================] - 1s 457ms/sample - loss: 0.7886 - val_loss: 1050.9148\r\nEpoch 4/30\r\n2/2 [==============================] - 1s 450ms/sample - loss: 0.1080 - val_loss: 744.4895\r\nEpoch 5/30\r\n2/2 [==============================] - 1s 474ms/sample - loss: 0.1144 - val_loss: 1353.2678\r\nEpoch 6/30\r\n2/2 [==============================] - 1s 465ms/sample - loss: 0.0402 - val_loss: 3237.9683\r\nEpoch 7/30\r\n2/2 [==============================] - 1s 465ms/sample - loss: 0.0635 - val_loss: 3946.7822\r\nEpoch 8/30\r\n2/2 [==============================] - 1s 470ms/sample - loss: 0.0355 - val_loss: 4054.5461\r\nEpoch 9/30\r\n2/2 [==============================] - 1s 462ms/sample - loss: 0.0345 - val_loss: 4991.5400\r\n\r\nHow is this possible?\r\nThe code is pretty straightforward:\r\n\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\nbase_model = tf.keras.applications.ResNet50V2(input_shape=(180, 320, 3), weights=None, include_top=False)\r\nx = tf.keras.layers.GlobalAveragePooling2D()(base_model.output)\r\noutput = tf.keras.layers.Dense(8)(x)\r\nmodel = tf.keras.models.Model(inputs=base_model.input, outputs=output)\r\nmodel.compile(optimizer='adam', loss='mse')\r\ndata = np.random.rand(2, 180, 320, 3)\r\nlabels = np.random.rand(2, 8)\r\n\r\nmodel.fit(data, labels, validation_data=(data,labels), batch_size=2, epochs=30)\r\n```\r\n\r\nThere are known issues with keras and batch normalization (see for example https://github.com/keras-team/keras/issues/6977). This is probably related, but I don't see directly how. What do I have to change to make this working as expected? Is this something in the included package https://github.com/qubvel/classification_models or where to solve it?\r\n\r\nEdit: the behaviour of batch normalization is changed as of TF 2.0, so the other issues might not be related, see https://www.tensorflow.org/api_docs/python/tf/keras/layers/BatchNormalization"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36444", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36444/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36444/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36444/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/36444", "id": 559239992, "node_id": "MDExOlB1bGxSZXF1ZXN0MzcwNDQ1NzIx", "number": 36444, "title": "Removed non-existant `arm_cmplx_mag_squared_q10p6.c` from `micro_spee\u2026", "user": {"login": "alxhoff", "id": 16685212, "node_id": "MDQ6VXNlcjE2Njg1MjEy", "avatar_url": "https://avatars3.githubusercontent.com/u/16685212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alxhoff", "html_url": "https://github.com/alxhoff", "followers_url": "https://api.github.com/users/alxhoff/followers", "following_url": "https://api.github.com/users/alxhoff/following{/other_user}", "gists_url": "https://api.github.com/users/alxhoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/alxhoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alxhoff/subscriptions", "organizations_url": "https://api.github.com/users/alxhoff/orgs", "repos_url": "https://api.github.com/users/alxhoff/repos", "events_url": "https://api.github.com/users/alxhoff/events{/privacy}", "received_events_url": "https://api.github.com/users/alxhoff/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1589976566, "node_id": "MDU6TGFiZWwxNTg5OTc2NTY2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:micro", "name": "comp:micro", "color": "3e2eea", "default": false, "description": "Related to TensorFlow Lite Microcontrollers"}, {"id": 1178505529, "node_id": "MDU6TGFiZWwxMTc4NTA1NTI5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/prtype:bugfix", "name": "prtype:bugfix", "color": "159b2e", "default": false, "description": "PR to fix a bug"}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-03T17:56:55Z", "updated_at": "2020-03-19T12:42:29Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/36444", "html_url": "https://github.com/tensorflow/tensorflow/pull/36444", "diff_url": "https://github.com/tensorflow/tensorflow/pull/36444.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/36444.patch"}, "body": "`arm_cmplx_mag_squared_q10p6.c` does not exist in CMSIS, error reported #35889.\r\n\r\nThe inclusion of this file in ` tensorflow/lite/micro/examples/micro_speech/CMSIS/Makefile.inc`\r\ncauses the example build `make -f tensorflow/lite/micro/tools/make/Makefile TARGET=mbed TAGS=\"CMSIS disco_f746ng\" generate_hello_world_mbed_project` to fail. \r\n\r\nBuilds successfully without file. Not tested on actual hardware. "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36436", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36436/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36436/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36436/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36436", "id": 559100086, "node_id": "MDU6SXNzdWU1NTkxMDAwODY=", "number": 36436, "title": "Keras.gradients() returns None in loss function", "user": {"login": "MichelHalmes", "id": 7914219, "node_id": "MDQ6VXNlcjc5MTQyMTk=", "avatar_url": "https://avatars2.githubusercontent.com/u/7914219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichelHalmes", "html_url": "https://github.com/MichelHalmes", "followers_url": "https://api.github.com/users/MichelHalmes/followers", "following_url": "https://api.github.com/users/MichelHalmes/following{/other_user}", "gists_url": "https://api.github.com/users/MichelHalmes/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichelHalmes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichelHalmes/subscriptions", "organizations_url": "https://api.github.com/users/MichelHalmes/orgs", "repos_url": "https://api.github.com/users/MichelHalmes/repos", "events_url": "https://api.github.com/users/MichelHalmes/events{/privacy}", "received_events_url": "https://api.github.com/users/MichelHalmes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-02-03T13:55:46Z", "updated_at": "2020-02-07T21:57:17Z", "closed_at": null, "author_association": "NONE", "body": "Good day and thank you for TensorFlow :-)\r\n\r\nI'm trying to implement a Wasserstein GAN with gradient penalty in TF2 (https://arxiv.org/pdf/1704.00028.pdf)\r\nWhen I compute the gradient of the discriminator output with respect to the interpolated input, I always get `None`.\r\nI have tried to compute the gradient in the layers of my model and in my loss function, in eager mode or not, using a `GradientTape` and I have checked that my discriminator has gradients activated.\r\nTo reproduce the issue, I have adapted the implementation [here]( https://github.com/kongyanye/cwgan-gp/blob/master/cwgan_gp.py) to work with TensorFlow as backend and I get exactly the same problem. (Link to adapted version below)\r\n\r\nWhat must I do to get this to work?\r\n\r\nThank you very much :-)\r\n\r\n**System information**\r\n```\r\n== check python ===================================================\r\npython version: 3.7.4\r\npython branch: v3.7.4\r\npython build version: ('v3.7.4:e09359112e', 'Jul  8 2019 14:54:52')\r\npython compiler version: Clang 6.0 (clang-600.0.57)\r\npython implementation: CPython\r\n\r\n\r\n== check os platform ===============================================\r\nos: Darwin\r\nos kernel version: Darwin Kernel Version 18.7.0: Sun Dec  1 18:59:03 PST 2019; root:xnu-4903.278.19~1/RELEASE_X86_64\r\nos release version: 18.7.0\r\nos platform: Darwin-18.7.0-x86_64-i386-64bit\r\nlinux distribution: ('', '', '')\r\nlinux os distribution: ('', '', '')\r\nmac version: ('10.14.6', ('', '', ''), 'x86_64')\r\nuname: uname_result(system='Darwin', node='MBP-van-Michel', release='18.7.0', version='Darwin Kernel Version 18.7.0: Sun Dec  1 18:59:03 PST 2019; root:xnu-4903.278.19~1/RELEASE_X86_64', machine='x86_64', processor='i386')\r\narchitecture: ('64bit', '')\r\nmachine: x86_64\r\n\r\n\r\n== are we in docker =============================================\r\nNo\r\n\r\n== compiler =====================================================\r\nApple LLVM version 10.0.1 (clang-1001.0.46.4)\r\nTarget: x86_64-apple-darwin18.7.0\r\nThread model: posix\r\nInstalledDir: /Library/Developer/CommandLineTools/usr/bin\r\n\r\n== check pips ===================================================\r\nnumpy                    1.18.0    \r\nprotobuf                 3.11.2    \r\ntensorflow               2.1.0     \r\ntensorflow-datasets      1.3.2     \r\ntensorflow-estimator     2.1.0     \r\ntensorflow-metadata      0.15.2    \r\n\r\n== check for virtualenv =========================================\r\nFalse\r\n\r\n== tensorflow import ============================================\r\ntf.version.VERSION = 2.1.0\r\ntf.version.GIT_VERSION = v2.1.0-rc2-17-ge5bf8de410\r\ntf.version.COMPILER_VERSION = 4.2.1 Compatible Apple LLVM 10.0.1 (clang-1001.0.46.4)\r\n\r\n== env ==========================================================\r\nLD_LIBRARY_PATH is unset\r\nDYLD_LIBRARY_PATH is unset\r\n\r\n== nvidia-smi ===================================================\r\n./env.sh: line 147: nvidia-smi: command not found\r\n\r\n== cuda libs  ===================================================\r\n\r\n== tensorflow installed from info ==================\r\nName: tensorflow\r\nVersion: 2.1.0\r\nSummary: TensorFlow is an open source machine learning framework for everyone.\r\nHome-page: https://www.tensorflow.org/\r\nAuthor-email: packages@tensorflow.org\r\nLicense: Apache 2.0\r\nLocation: /Users/michel/workspace/tf-text2image/venv/lib/python3.7/site-packages\r\nRequired-by: \r\n\r\n== python version  ==============================================\r\n(major, minor, micro, releaselevel, serial)\r\n(3, 7, 4, 'final', 0)\r\n\r\n== bazel version  ===============================================\r\n```\r\n\r\n**Describe the current behavior**\r\n\r\n```\r\npython src/cwan_gp.py\r\n2020-02-03 14:37:17.446341: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x7fef2a728470 initialized for platform Host (this does not guarantee that XLA will be used). Devices:\r\n2020-02-03 14:37:17.446368: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version\r\nTensor(\"loss/model_1_2_loss/gradients/model_1_2/flatten_3/Reshape_grad/Reshape:0\", shape=(32, 28, 28, 1), dtype=float32)\r\nNone\r\nTraceback (most recent call last):\r\n  File \"src/cwan_gp.py\", line 302, in <module>\r\n    wgan.train()\r\n  File \"src/cwan_gp.py\", line 232, in train\r\n    d_loss = self.critic_model.train_on_batch([imgs, labels, noise], [valid, fake, dummy])\r\n  File \"/Users/michel/workspace/tf-text2image/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training.py\", line 1078, in train_on_batch\r\n    standalone=True)\r\n  File \"/Users/michel/workspace/tf-text2image/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_v2_utils.py\", line 433, in train_on_batch\r\n    output_loss_metrics=model._output_loss_metrics)\r\n  File \"/Users/michel/workspace/tf-text2image/venv/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 568, in __call__\r\n    result = self._call(*args, **kwds)\r\n  File \"/Users/michel/workspace/tf-text2image/venv/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 615, in _call\r\n    self._initialize(args, kwds, add_initializers_to=initializers)\r\n  File \"/Users/michel/workspace/tf-text2image/venv/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 497, in _initialize\r\n    *args, **kwds))\r\n  File \"/Users/michel/workspace/tf-text2image/venv/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 2389, in _get_concrete_function_internal_garbage_collected\r\n    graph_function, _, _ = self._maybe_define_function(args, kwargs)\r\n  File \"/Users/michel/workspace/tf-text2image/venv/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 2703, in _maybe_define_function\r\n    graph_function = self._create_graph_function(args, kwargs)\r\n  File \"/Users/michel/workspace/tf-text2image/venv/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 2593, in _create_graph_function\r\n    capture_by_value=self._capture_by_value),\r\n  File \"/Users/michel/workspace/tf-text2image/venv/lib/python3.7/site-packages/tensorflow_core/python/framework/func_graph.py\", line 978, in func_graph_from_py_func\r\n    func_outputs = python_func(*func_args, **func_kwargs)\r\n  File \"/Users/michel/workspace/tf-text2image/venv/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 439, in wrapped_fn\r\n    return weak_wrapped_fn().__wrapped__(*args, **kwds)\r\n  File \"/Users/michel/workspace/tf-text2image/venv/lib/python3.7/site-packages/tensorflow_core/python/framework/func_graph.py\", line 968, in wrapper\r\n    raise e.ag_error_metadata.to_exception(e)\r\nValueError: in converted code:\r\n\r\n    /Users/michel/workspace/tf-text2image/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_eager.py:305 train_on_batch  *\r\n        outs, total_loss, output_losses, masks = (\r\n    /Users/michel/workspace/tf-text2image/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_eager.py:253 _process_single_batch\r\n        training=training))\r\n    /Users/michel/workspace/tf-text2image/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_eager.py:167 _model_loss\r\n        per_sample_losses = loss_fn.call(targets[i], outs[i])\r\n    /Users/michel/workspace/tf-text2image/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/losses.py:221 call\r\n        return self.fn(y_true, y_pred, **self._fn_kwargs)\r\n    src/cwan_gp.py:123 gradient_penalty_loss\r\n        gradients_sqr = K.square(gradients)\r\n    /Users/michel/workspace/tf-text2image/venv/lib/python3.7/site-packages/tensorflow_core/python/keras/backend.py:2162 square\r\n        return math_ops.square(x)\r\n    /Users/michel/workspace/tf-text2image/venv/lib/python3.7/site-packages/tensorflow_core/python/ops/gen_math_ops.py:9965 square\r\n        \"Square\", x=x, name=name)\r\n    /Users/michel/workspace/tf-text2image/venv/lib/python3.7/site-packages/tensorflow_core/python/framework/op_def_library.py:486 _apply_op_helper\r\n        (input_name, err))\r\n\r\n    ValueError: Tried to convert 'x' to a tensor and failed. Error: None values not supported.\r\n```\r\n\r\n**Describe the expected behavior**\r\nThe computed gradient is not None\r\n\r\n**Code to reproduce the issue**\r\nThis is a minimal example to reproduce the error\r\nhttps://github.com/MichelHalmes/tf-text2image/blob/72df135786c7273fb2e0bea27a30ab60024e92b2/src/cwan_gp.py\r\n\r\n**Other info / logs**\r\nThis person belivees that doing higher order gradients is only possible with theano: https://github.com/LuEE-C/WGAN-GP-with-keras-for-text/blob/master/README.md\r\n\r\nThis person seems to have had the same issue about a year ago : https://stackoverflow.com/questions/54076901/k-gradients-returning-none\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36431", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36431/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36431/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36431/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36431", "id": 558977198, "node_id": "MDU6SXNzdWU1NTg5NzcxOTg=", "number": 36431, "title": "TensorFlow2.x should support group convolutions in keras api level.", "user": {"login": "calmisential", "id": 29011011, "node_id": "MDQ6VXNlcjI5MDExMDEx", "avatar_url": "https://avatars2.githubusercontent.com/u/29011011?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calmisential", "html_url": "https://github.com/calmisential", "followers_url": "https://api.github.com/users/calmisential/followers", "following_url": "https://api.github.com/users/calmisential/following{/other_user}", "gists_url": "https://api.github.com/users/calmisential/gists{/gist_id}", "starred_url": "https://api.github.com/users/calmisential/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calmisential/subscriptions", "organizations_url": "https://api.github.com/users/calmisential/orgs", "repos_url": "https://api.github.com/users/calmisential/repos", "events_url": "https://api.github.com/users/calmisential/events{/privacy}", "received_events_url": "https://api.github.com/users/calmisential/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-03T10:10:55Z", "updated_at": "2020-02-28T01:47:07Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 2.1.0\r\n- Are you willing to contribute it (Yes/No): No\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nGroup convolution has been widely used in various deep learning models, such as ResNeXt(https://arxiv.org/abs/1611.05431). PyTorch has already supported group convolution, while TensorFlow has not. As this issue(https://github.com/tensorflow/tensorflow/issues/34024) says, ```tf.nn.conv2d() ``` supports group convolution on GPU, but not on CPU. Therefore, A keras layer api which supports group convolution is needed for many users. This is a sample code which supports the feature by modifying the keras ```Conv2D``` api:\r\n```\r\nclass Conv2D(tf.keras.layers.Layer):\r\n    def __init__(self,\r\n                 input_channels,\r\n                 output_channels,\r\n                 kernel_size,\r\n                 strides=(1, 1),\r\n                 padding='valid',\r\n                 data_format=None,\r\n                 dilation_rate=(1, 1),\r\n                 activation=None,\r\n                 groups=1,\r\n                 use_bias=True,\r\n                 kernel_initializer='glorot_uniform',\r\n                 bias_initializer='zeros',\r\n                 kernel_regularizer=None,\r\n                 bias_regularizer=None,\r\n                 activity_regularizer=None,\r\n                 kernel_constraint=None,\r\n                 bias_constraint=None,\r\n                 **kwargs):\r\n        super(Conv2D, self).__init__()\r\n\r\n        if not input_channels % groups == 0:\r\n            raise ValueError(\"The value of input_channels must be divisible by the value of groups.\")\r\n        if not output_channels % groups == 0:\r\n            raise ValueError(\"The value of output_channels must be divisible by the value of groups.\")\r\n\r\n        self.kernel_size = kernel_size\r\n        self.strides = strides\r\n        self.padding = padding\r\n        self.data_format = data_format\r\n        self.dilation_rate = dilation_rate\r\n        self.activation = activation\r\n        self.groups = groups\r\n        self.use_bias = use_bias\r\n        self.kernel_initializer = kernel_initializer\r\n        self.bias_initializer = bias_initializer\r\n        self.kernel_regularizer = kernel_regularizer\r\n        self.bias_regularizer = bias_regularizer\r\n        self.activity_regularizer = activity_regularizer\r\n        self.kernel_constraint = kernel_constraint\r\n        self.bias_constraint = bias_constraint\r\n\r\n        self.group_in_num = input_channels // groups\r\n        self.group_out_num = output_channels // groups\r\n        self.conv_list = []\r\n        for i in range(self.groups):\r\n            self.conv_list.append(tf.keras.layers.Conv2D(filters=self.group_out_num,\r\n                                                         kernel_size=kernel_size,\r\n                                                         strides=strides,\r\n                                                         padding=padding,\r\n                                                         data_format=data_format,\r\n                                                         dilation_rate=dilation_rate,\r\n                                                         activation=activations.get(activation),\r\n                                                         use_bias=use_bias,\r\n                                                         kernel_initializer=initializers.get(kernel_initializer),\r\n                                                         bias_initializer=initializers.get(bias_initializer),\r\n                                                         kernel_regularizer=regularizers.get(kernel_regularizer),\r\n                                                         bias_regularizer=regularizers.get(bias_regularizer),\r\n                                                         activity_regularizer=regularizers.get(activity_regularizer),\r\n                                                         kernel_constraint=constraints.get(kernel_constraint),\r\n                                                         bias_constraint=constraints.get(bias_constraint),\r\n                                                         **kwargs))\r\n\r\n    def call(self, inputs, **kwargs):\r\n        feature_map_list = []\r\n        for i in range(self.groups):\r\n            x_i = self.conv_list[i](inputs[:, :, :, i*self.group_in_num: (i + 1) * self.group_in_num])\r\n            feature_map_list.append(x_i)\r\n        out = tf.concat(feature_map_list, axis=-1)\r\n        return out\r\n```\r\n\r\n**Will this change the current api? How?**\r\nThis will change the current keras convolution api . \r\n\r\n**Who will benefit with this feature?**\r\nAnyone who need to use group conolution in their code will benefit.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36428", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36428/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36428/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36428/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36428", "id": 558765586, "node_id": "MDU6SXNzdWU1NTg3NjU1ODY=", "number": 36428, "title": "Discrepancy between keras.layers.Reshape and tf.keras.layers.Reshape", "user": {"login": "rgov", "id": 108767, "node_id": "MDQ6VXNlcjEwODc2Nw==", "avatar_url": "https://avatars3.githubusercontent.com/u/108767?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rgov", "html_url": "https://github.com/rgov", "followers_url": "https://api.github.com/users/rgov/followers", "following_url": "https://api.github.com/users/rgov/following{/other_user}", "gists_url": "https://api.github.com/users/rgov/gists{/gist_id}", "starred_url": "https://api.github.com/users/rgov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rgov/subscriptions", "organizations_url": "https://api.github.com/users/rgov/orgs", "repos_url": "https://api.github.com/users/rgov/repos", "events_url": "https://api.github.com/users/rgov/events{/privacy}", "received_events_url": "https://api.github.com/users/rgov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-02-02T22:02:50Z", "updated_at": "2020-03-06T01:13:17Z", "closed_at": null, "author_association": "NONE", "body": "```\r\ntf-version 2.1.0\r\nkeras-version 2.2.4-tf\r\n```\r\n\r\nIn Keras, according to [the documentation](https://keras.io/layers/core/), we expect:\r\n\r\n```python\r\nmodel.add(Reshape((-1, 2, 2)))\r\n# now: model.output_shape == (None, 3, 2, 2)\r\n```\r\n\r\nBut in tf.Keras [documentation](https://www.tensorflow.org/api_docs/python/tf/keras/layers/Reshape):\r\n\r\n```python\r\nmodel.add(Reshape((-1, 2, 2)))\r\n# now: model.output_shape == (None, None, 2, 2)\r\n```\r\n\r\nThe second dimension is now `None` instead of the computed value.\r\n\r\nThis makes tf.Keras incompatible with Keras, and makes it harder to write code that is parameterized by of the output shape of an opaque model. Is there a way to get the true output shape?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36424", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36424/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36424/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36424/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36424", "id": 558732553, "node_id": "MDU6SXNzdWU1NTg3MzI1NTM=", "number": 36424, "title": "TensorFlow Feature Columns Fail for Keras Model Functional API", "user": {"login": "jeisinge", "id": 8866793, "node_id": "MDQ6VXNlcjg4NjY3OTM=", "avatar_url": "https://avatars1.githubusercontent.com/u/8866793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeisinge", "html_url": "https://github.com/jeisinge", "followers_url": "https://api.github.com/users/jeisinge/followers", "following_url": "https://api.github.com/users/jeisinge/following{/other_user}", "gists_url": "https://api.github.com/users/jeisinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeisinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeisinge/subscriptions", "organizations_url": "https://api.github.com/users/jeisinge/orgs", "repos_url": "https://api.github.com/users/jeisinge/repos", "events_url": "https://api.github.com/users/jeisinge/events{/privacy}", "received_events_url": "https://api.github.com/users/jeisinge/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2020-02-02T18:00:58Z", "updated_at": "2020-02-21T22:44:16Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Databricks 6.3- `Linux version 4.4.0-1100-aws (buildd@lgw01-amd64-030) (gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.12) ) #111-Ubuntu SMP Wed Dec 4 12:20:15 UTC 2019 (Ubuntu 4.4.0-1100.111-aws 4.4.203)`\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**: \r\n```\r\n2020-02-02 17:40:54.646833: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libnvinfer.so.6\r\n2020-02-02 17:40:54.648818: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libnvinfer_plugin.so.6\r\nv2.1.0-rc2-17-ge5bf8de 2.1.0\r\n```\r\n- **Python version**: 3.7.3\r\n- **Bazel version (if compiling from source)**:\r\n- **GCC/Compiler version (if compiling from source)**: GCC 7.3.0\r\n- **CUDA/cuDNN version**: 10.1\r\n- **GPU model and memory**: AWS p2.xlarge\r\n- **Exact command to reproduce**:\r\n```python\r\nsource_column = tf.feature_column.numeric_column(\"source_name\")\r\ncategorical_column = tf.feature_column.bucketized_column(source_column, [0, 10, 100])\r\nembedding_column = tf.feature_column.embedding_column(categorical_column, 7)\r\nfeature_columns = [ embedding_column ]\r\n\r\nname_schema = tf.feature_column.make_parse_example_spec(feature_columns)\r\ninputs = {\r\n  name: keras.layers.Input(shape=schema.shape, name=name, dtype=schema.dtype)\r\n  for name, schema in name_schema.items()\r\n}\r\n\r\ndense_features = keras.layers.DenseFeatures(feature_columns)\r\ncolumn_tensors = {}\r\ndense_tensor = dense_features(inputs, cols_to_output_tensors=column_tensors)\r\n```\r\n\r\n### Describe the problem\r\n> Describe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\r\n\r\nI believe it should be possible to use Feature Columns with Keras Model Functional API.  Most feature columns work, however, it appears that some combinations of feature columns like the above embedding - bucketized - numeric columns fail.\r\n\r\nIt is not clear how to work around this error or apply the suggested wrapping.\r\n\r\n### Source code / logs\r\n> Include any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\nThe above code fails with:\r\n```pytb\r\nValueError                                Traceback (most recent call last)\r\n<command-1166953> in <module>\r\n     12 dense_features = keras.layers.DenseFeatures(feature_columns)\r\n     13 column_tensors = {}\r\n---> 14 dense_tensor = dense_features(inputs, cols_to_output_tensors=column_tensors)\r\n\r\n/databricks/python/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/base_layer.py in __call__(self, inputs, *args, **kwargs)\r\n    803               kwargs.pop('mask')\r\n    804             inputs, outputs = self._set_connectivity_metadata_(\r\n--> 805                 inputs, outputs, args, kwargs)\r\n    806           self._handle_activity_regularization(inputs, outputs)\r\n    807           self._set_mask_metadata(inputs, outputs, input_masks)\r\n\r\n/databricks/python/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/base_layer.py in _set_connectivity_metadata_(self, inputs, outputs, args, kwargs)\r\n   2012     # This updates the layer history of the output tensor(s).\r\n   2013     self._add_inbound_node(\r\n-> 2014         input_tensors=inputs, output_tensors=outputs, arguments=arguments)\r\n   2015     return inputs, outputs\r\n   2016 \r\n\r\n/databricks/python/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/base_layer.py in _add_inbound_node(self, input_tensors, output_tensors, arguments)\r\n   2042         input_tensors=input_tensors,\r\n   2043         output_tensors=output_tensors,\r\n-> 2044         arguments=arguments)\r\n   2045 \r\n   2046     # Update tensor history metadata.\r\n\r\n/databricks/python/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/node.py in __init__(self, outbound_layer, inbound_layers, node_indices, tensor_indices, input_tensors, output_tensors, arguments)\r\n    120       if base_layer_utils.needs_keras_history(\r\n    121           tensor_argument, ignore_call_context=True):\r\n--> 122         base_layer_utils.create_keras_history(tensor_argument)\r\n    123 \r\n    124     # Add nodes to all layers involved.\r\n\r\n/databricks/python/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/base_layer_utils.py in create_keras_history(tensors)\r\n    185     keras_tensors: The Tensors found that came from a Keras Layer.\r\n    186   \"\"\"\r\n--> 187   _, created_layers = _create_keras_history_helper(tensors, set(), [])\r\n    188   return created_layers\r\n    189 \r\n\r\n/databricks/python/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/base_layer_utils.py in _create_keras_history_helper(tensors, processed_ops, created_layers)\r\n    247               constants[i] = backend.function([], op_input)([])\r\n    248       processed_ops, created_layers = _create_keras_history_helper(\r\n--> 249           layer_inputs, processed_ops, created_layers)\r\n    250       name = op.name\r\n    251       node_def = op.node_def.SerializeToString()\r\n\r\n/databricks/python/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/base_layer_utils.py in _create_keras_history_helper(tensors, processed_ops, created_layers)\r\n    247               constants[i] = backend.function([], op_input)([])\r\n    248       processed_ops, created_layers = _create_keras_history_helper(\r\n--> 249           layer_inputs, processed_ops, created_layers)\r\n    250       name = op.name\r\n    251       node_def = op.node_def.SerializeToString()\r\n\r\n/databricks/python/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/base_layer_utils.py in _create_keras_history_helper(tensors, processed_ops, created_layers)\r\n    247               constants[i] = backend.function([], op_input)([])\r\n    248       processed_ops, created_layers = _create_keras_history_helper(\r\n--> 249           layer_inputs, processed_ops, created_layers)\r\n    250       name = op.name\r\n    251       node_def = op.node_def.SerializeToString()\r\n\r\n/databricks/python/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/base_layer_utils.py in _create_keras_history_helper(tensors, processed_ops, created_layers)\r\n    247               constants[i] = backend.function([], op_input)([])\r\n    248       processed_ops, created_layers = _create_keras_history_helper(\r\n--> 249           layer_inputs, processed_ops, created_layers)\r\n    250       name = op.name\r\n    251       node_def = op.node_def.SerializeToString()\r\n\r\n/databricks/python/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/base_layer_utils.py in _create_keras_history_helper(tensors, processed_ops, created_layers)\r\n    247               constants[i] = backend.function([], op_input)([])\r\n    248       processed_ops, created_layers = _create_keras_history_helper(\r\n--> 249           layer_inputs, processed_ops, created_layers)\r\n    250       name = op.name\r\n    251       node_def = op.node_def.SerializeToString()\r\n\r\n/databricks/python/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/base_layer_utils.py in _create_keras_history_helper(tensors, processed_ops, created_layers)\r\n    221             'Sparse ops are not supported with functional models with built-in '\r\n    222             'layer wrapping. Please wrap the sparse ops in a Lambda layer like'\r\n--> 223             ': \\n{lambda_example}\\n'.format(lambda_example=lambda_example))\r\n    224 \r\n    225       # Recursively set `_keras_history`.\r\n\r\nValueError: Sparse ops are not supported with functional models with built-in layer wrapping. Please wrap the sparse ops in a Lambda layer like: \r\n\r\n        weights_mult = lambda x: tf.sparse.sparse_dense_matmul(x, weights)\r\n        output = tf.keras.layers.Lambda(weights_mult)(input)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36422", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36422/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36422/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36422/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36422", "id": 558707578, "node_id": "MDU6SXNzdWU1NTg3MDc1Nzg=", "number": 36422, "title": "performance issue when using the function tf.convert_to_tensor()", "user": {"login": "farotem", "id": 27951762, "node_id": "MDQ6VXNlcjI3OTUxNzYy", "avatar_url": "https://avatars0.githubusercontent.com/u/27951762?v=4", "gravatar_id": "", "url": "https://api.github.com/users/farotem", "html_url": "https://github.com/farotem", "followers_url": "https://api.github.com/users/farotem/followers", "following_url": "https://api.github.com/users/farotem/following{/other_user}", "gists_url": "https://api.github.com/users/farotem/gists{/gist_id}", "starred_url": "https://api.github.com/users/farotem/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/farotem/subscriptions", "organizations_url": "https://api.github.com/users/farotem/orgs", "repos_url": "https://api.github.com/users/farotem/repos", "events_url": "https://api.github.com/users/farotem/events{/privacy}", "received_events_url": "https://api.github.com/users/farotem/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-02-02T14:53:43Z", "updated_at": "2020-02-05T20:59:18Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nyes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nlinux ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\nNA\r\n- TensorFlow installed from (source or binary):\r\nbinary, loaded from tensorflow docker\r\n- TensorFlow version (use command below):\r\nv2.1.0-rc2-17-ge5bf8de 2.1.0\r\n- Python version:\r\n3.6.9\r\n- Bazel version (if compiling from source):\r\nNA\r\n- GCC/Compiler version (if compiling from source):\r\nNA\r\n- CUDA/cuDNN version:\r\nCUDA 10.1\r\n- GPU model and memory:\r\nv100 32 GB\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nI'm suspecting a CPU performance issue when converting a numpy array to tensor.\r\nThe duration of the function increased significantly (factor ~4) depends on the data size but not linear and also with large jitters.\r\n\r\nInspecting deeply into number of elements as a graph, we observed jitters and better performance, for some data sizes and bad performance for other data sizes, any ideas why there are large jitters? \r\n\r\nNote: we need to understand in a manner of milliseconds for near real-time application.  \r\nattached:\r\n\r\n- graph of convert_to_tensor depends for 1,000,000 - 60,000,000 elements \r\n- graph of convert_to_tensor depends for 1,000,000 - 7,000,000 elements (deeper scope)\r\n\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n```\r\nimport numpy as np\r\nimport tensorflow as tf\r\nimport time\r\n\r\nfor j in range(100):\r\n    input_data = np.float32(np.random.rand(1125000 + j * 500000))\r\n    start = time.time()\r\n    converted_data = tf.convert_to_tensor(input_data, dtype=np.float32)\r\n    stop = time.time()\r\n    print(\"convert of\", 1125000 + j * 500000, \"took [ms]: \", 1000 * (stop - start))\r\n\r\n\r\n\r\nfor j in range(100):\r\n    input_data = np.float32(np.random.rand(1125000 + j * 50000))\r\n    start = time.time()\r\n    converted_data = tf.convert_to_tensor(input_data, dtype=np.float32)\r\n    stop = time.time()\r\n    print(\"convert of\", 1125000 + j * 50000, \"took [ms]: \", 1000 * (stop - start))\r\n```\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n![convert_to_tf_graph_1E06_6E07](https://user-images.githubusercontent.com/27951762/73609337-394e3a00-45d5-11ea-8f1e-aaeaa7c71f22.PNG)\r\n![convert_to_tf_graph_1E06_7E06](https://user-images.githubusercontent.com/27951762/73609338-39e6d080-45d5-11ea-95eb-feb1039a71f6.PNG)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36417", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36417/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36417/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36417/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36417", "id": 558648284, "node_id": "MDU6SXNzdWU1NTg2NDgyODQ=", "number": 36417, "title": "Regression: contrib.boosted_trees.estimator_batch modules are not available in 1.15.2", "user": {"login": "lostmsu", "id": 239520, "node_id": "MDQ6VXNlcjIzOTUyMA==", "avatar_url": "https://avatars0.githubusercontent.com/u/239520?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lostmsu", "html_url": "https://github.com/lostmsu", "followers_url": "https://api.github.com/users/lostmsu/followers", "following_url": "https://api.github.com/users/lostmsu/following{/other_user}", "gists_url": "https://api.github.com/users/lostmsu/gists{/gist_id}", "starred_url": "https://api.github.com/users/lostmsu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lostmsu/subscriptions", "organizations_url": "https://api.github.com/users/lostmsu/orgs", "repos_url": "https://api.github.com/users/lostmsu/repos", "events_url": "https://api.github.com/users/lostmsu/events{/privacy}", "received_events_url": "https://api.github.com/users/lostmsu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 1166103538, "node_id": "MDU6TGFiZWwxMTY2MTAzNTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/contrib", "name": "contrib", "color": "5319e7", "default": false, "description": "Anything that comes under contrib directory"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-02-02T05:56:47Z", "updated_at": "2020-02-03T08:43:34Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v1.15.0-92-g5d80e1e8e6 1.15.2\r\n- Python version: 3.7.4\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nMany modules are simply missing from `tensorflow.contrib.boosted_trees`, including `estimator_batch` and `lib`\r\n```\r\n>>> import tensorflow.contrib.boosted_trees.estimator_batch\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nModuleNotFoundError: No module named 'tensorflow.contrib.boosted_trees.estimator_batch'\r\n```\r\n \r\n\r\n**Describe the expected behavior**\r\n`import tensorflow.contrib.boosted_trees.estimator_batch` should succeed.\r\n\r\n**Code to reproduce the issue**\r\n`import tensorflow.contrib.boosted_trees.estimator_batch`\r\n\r\n**Other info / logs**\r\nLooks like a regression since 1.15.0\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36416", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36416/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36416/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36416/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36416", "id": 558593164, "node_id": "MDU6SXNzdWU1NTg1OTMxNjQ=", "number": 36416, "title": "Error while training object detection model", "user": {"login": "masoudnick", "id": 20556982, "node_id": "MDQ6VXNlcjIwNTU2OTgy", "avatar_url": "https://avatars1.githubusercontent.com/u/20556982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/masoudnick", "html_url": "https://github.com/masoudnick", "followers_url": "https://api.github.com/users/masoudnick/followers", "following_url": "https://api.github.com/users/masoudnick/following{/other_user}", "gists_url": "https://api.github.com/users/masoudnick/gists{/gist_id}", "starred_url": "https://api.github.com/users/masoudnick/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/masoudnick/subscriptions", "organizations_url": "https://api.github.com/users/masoudnick/orgs", "repos_url": "https://api.github.com/users/masoudnick/repos", "events_url": "https://api.github.com/users/masoudnick/events{/privacy}", "received_events_url": "https://api.github.com/users/masoudnick/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-02-01T20:29:13Z", "updated_at": "2020-03-07T00:59:49Z", "closed_at": null, "author_association": "NONE", "body": "Hi,\r\nI am gonna to train a model for object detection with ssdlite_mobilenet_v2_coco (training images:30000,testing images:2000). But in almost 24000 itrations, I will be faced a problem.\r\nWhat's the meaning of this error and how can i fix it?\r\n### System information\r\n\r\n- OS Platform and Distribution (Google Colab Ubuntu):\r\n\r\n- TensorFlow version (1.15)\r\n\r\n\r\nINFO:tensorflow:Finished training! Saving model to disk.\r\nI0201 18:58:21.724251 140376424556416 learning.py:785] Finished training! Saving model to disk.\r\nWARNING:tensorflow:From /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/training/saver.py:963: remove_checkpoint (from tensorflow.python.training.checkpoint_management) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse standard file APIs to delete files with this prefix.\r\nW0201 18:58:22.325520 140376424556416 deprecation.py:323] From /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/training/saver.py:963: remove_checkpoint (from tensorflow.python.training.checkpoint_management) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse standard file APIs to delete files with this prefix.\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/summary/writer/writer.py:386: UserWarning: Attempting to use a closed FileWriter. The operation will be a noop unless the FileWriter is explicitly reopened.\r\n  warnings.warn(\"Attempting to use a closed FileWriter. \"\r\nTraceback (most recent call last):\r\n  File \"/content/gdrive/My Drive/Tensorflow/3_train_ssdlite.py\", line 185, in <module>\r\n    tf.app.run()\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/platform/app.py\", line 40, in run\r\n    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)\r\n  File \"/usr/local/lib/python3.6/dist-packages/absl/app.py\", line 299, in run\r\n    _run_main(main, args)\r\n  File \"/usr/local/lib/python3.6/dist-packages/absl/app.py\", line 250, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/util/deprecation.py\", line 324, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/content/gdrive/My Drive/Tensorflow/3_train_ssdlite.py\", line 181, in main\r\n    graph_hook_fn=graph_rewriter_fn)\r\n  File \"/content/models/research/object_detection/legacy/trainer.py\", line 417, in train\r\n    saver=saver)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/contrib/slim/python/slim/learning.py\", line 790, in train\r\n    ignore_live_threads=ignore_live_threads)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/training/supervisor.py\", line 839, in stop\r\n    ignore_live_threads=ignore_live_threads)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/training/coordinator.py\", line 389, in join\r\n    six.reraise(*self._exc_info_to_raise)\r\n  File \"/usr/local/lib/python3.6/dist-packages/six.py\", line 693, in reraise\r\n    raise value\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/training/queue_runner_impl.py\", line 257, in _run\r\n    enqueue_callable()\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/client/session.py\", line 1287, in _single_operation_run\r\n    self._call_tf_sessionrun(None, {}, [], target_list, None)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/client/session.py\", line 1443, in _call_tf_sessionrun\r\n    run_metadata)\r\ntensorflow.python.framework.errors_impl.UnknownError: /content/gdrive/My Drive/Tensorflow/training_data/train.tfrecord; Input/output error\r\n\t [[{{node IteratorGetNext}}]]"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36414", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36414/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36414/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36414/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/36414", "id": 558569592, "node_id": "MDExOlB1bGxSZXF1ZXN0MzY5OTE5Mzc2", "number": 36414, "title": "remove validation_data from docstring of Callback class", "user": {"login": "rushabh-v", "id": 46084304, "node_id": "MDQ6VXNlcjQ2MDg0MzA0", "avatar_url": "https://avatars3.githubusercontent.com/u/46084304?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rushabh-v", "html_url": "https://github.com/rushabh-v", "followers_url": "https://api.github.com/users/rushabh-v/followers", "following_url": "https://api.github.com/users/rushabh-v/following{/other_user}", "gists_url": "https://api.github.com/users/rushabh-v/gists{/gist_id}", "starred_url": "https://api.github.com/users/rushabh-v/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rushabh-v/subscriptions", "organizations_url": "https://api.github.com/users/rushabh-v/orgs", "repos_url": "https://api.github.com/users/rushabh-v/repos", "events_url": "https://api.github.com/users/rushabh-v/events{/privacy}", "received_events_url": "https://api.github.com/users/rushabh-v/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1178505529, "node_id": "MDU6TGFiZWwxMTc4NTA1NTI5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/prtype:bugfix", "name": "prtype:bugfix", "color": "159b2e", "default": false, "description": "PR to fix a bug"}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-01T17:20:03Z", "updated_at": "2020-03-19T12:41:40Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/36414", "html_url": "https://github.com/tensorflow/tensorflow/pull/36414", "diff_url": "https://github.com/tensorflow/tensorflow/pull/36414.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/36414.patch"}, "body": "resolves #36375"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36411", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36411/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36411/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36411/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/36411", "id": 558535723, "node_id": "MDExOlB1bGxSZXF1ZXN0MzY5ODk0NjUy", "number": 36411, "title": "parallel fulfillment of bf162fp32 in sparsematmul op", "user": {"login": "Leslie-Fang", "id": 16850179, "node_id": "MDQ6VXNlcjE2ODUwMTc5", "avatar_url": "https://avatars2.githubusercontent.com/u/16850179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Leslie-Fang", "html_url": "https://github.com/Leslie-Fang", "followers_url": "https://api.github.com/users/Leslie-Fang/followers", "following_url": "https://api.github.com/users/Leslie-Fang/following{/other_user}", "gists_url": "https://api.github.com/users/Leslie-Fang/gists{/gist_id}", "starred_url": "https://api.github.com/users/Leslie-Fang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Leslie-Fang/subscriptions", "organizations_url": "https://api.github.com/users/Leslie-Fang/orgs", "repos_url": "https://api.github.com/users/Leslie-Fang/repos", "events_url": "https://api.github.com/users/Leslie-Fang/events{/privacy}", "received_events_url": "https://api.github.com/users/Leslie-Fang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-02-01T12:43:14Z", "updated_at": "2020-03-06T14:24:07Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/36411", "html_url": "https://github.com/tensorflow/tensorflow/pull/36411", "diff_url": "https://github.com/tensorflow/tensorflow/pull/36411.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/36411.patch"}, "body": "Here I see the TODO event: https://github.com/tensorflow/tensorflow/blob/073460df145807ce4968718db793d8e2675b9d7e/tensorflow/core/kernels/sparse_matmul_op.cc#L1001-L1013\r\nfrom **agarwal** to parallel the implementation of BF16TOFP32.\r\nMaybe agarwal will be the the appropriate reviewer?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36410", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36410/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36410/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36410/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/36410", "id": 558534176, "node_id": "MDExOlB1bGxSZXF1ZXN0MzY5ODkzNDk4", "number": 36410, "title": "[lite] Remove possible redundant/nullptr add_op", "user": {"login": "gaurav1086", "id": 1029926, "node_id": "MDQ6VXNlcjEwMjk5MjY=", "avatar_url": "https://avatars2.githubusercontent.com/u/1029926?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gaurav1086", "html_url": "https://github.com/gaurav1086", "followers_url": "https://api.github.com/users/gaurav1086/followers", "following_url": "https://api.github.com/users/gaurav1086/following{/other_user}", "gists_url": "https://api.github.com/users/gaurav1086/gists{/gist_id}", "starred_url": "https://api.github.com/users/gaurav1086/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gaurav1086/subscriptions", "organizations_url": "https://api.github.com/users/gaurav1086/orgs", "repos_url": "https://api.github.com/users/gaurav1086/repos", "events_url": "https://api.github.com/users/gaurav1086/events{/privacy}", "received_events_url": "https://api.github.com/users/gaurav1086/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-01T12:28:45Z", "updated_at": "2020-03-19T12:40:24Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/36410", "html_url": "https://github.com/tensorflow/tensorflow/pull/36410", "diff_url": "https://github.com/tensorflow/tensorflow/pull/36410.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/36410.patch"}, "body": "op_producing_add_input can still be null while add_op is not null - due to multiple 'continue' (error cases) statements within the for loop."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36400", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36400/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36400/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36400/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36400", "id": 558496921, "node_id": "MDU6SXNzdWU1NTg0OTY5MjE=", "number": 36400, "title": "Metrics passed to on_batch_end(...) in Keras are inconsistent", "user": {"login": "MarcelSimon", "id": 9692715, "node_id": "MDQ6VXNlcjk2OTI3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/9692715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarcelSimon", "html_url": "https://github.com/MarcelSimon", "followers_url": "https://api.github.com/users/MarcelSimon/followers", "following_url": "https://api.github.com/users/MarcelSimon/following{/other_user}", "gists_url": "https://api.github.com/users/MarcelSimon/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarcelSimon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarcelSimon/subscriptions", "organizations_url": "https://api.github.com/users/MarcelSimon/orgs", "repos_url": "https://api.github.com/users/MarcelSimon/repos", "events_url": "https://api.github.com/users/MarcelSimon/events{/privacy}", "received_events_url": "https://api.github.com/users/MarcelSimon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-02-01T06:51:46Z", "updated_at": "2020-03-04T22:44:13Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Uubntu 18.04\r\n- **TensorFlow installed from (source or binary)**: pip tensorflow-gpu\r\n- **TensorFlow version (use command below)**: 2.1\r\n- **Python version**: 3.7\r\n- **CUDA/cuDNN version**: \r\n- **GPU model and memory**: K80\r\n- **Exact command to reproduce**: see code below\r\n\r\n### Describe the problem\r\nThe method `on_batch_end` of `tf.keras.callbacks.Callback` receives a parameter `logs`, which contains, e.g., `loss` and `accuracy`. While `loss` is the actual loss of the current batch, `accuracy` is a moving average and the same as printed by the progressbar of `model.fit(...)`. \r\nThe expected behavior is a consistent behavior, i.e. either both values are moving average or both are the actual batch values. I don't have a clear preference for either of both, but the moving average probably creates the least amount of confusion as the is consistent with the progress bar and the function `on_epoch_end`.\r\n\r\n### Source code / logs\r\nThe following snipped shows the current bevior:\r\n```python\r\n    from tensorflow import keras\r\n    from tensorflow.keras import layers\r\n\r\n    inputs = keras.Input(shape=(784,), name='digits')\r\n    x = layers.Dense(4*4096, activation='relu', name='dense_1')(inputs)\r\n    x = layers.Dense(4*4096, activation='relu', name='dense_2')(x)\r\n    x = layers.Dense(4*4096, activation='relu', name='dense_3')(x)\r\n    outputs = layers.Dense(10, activation='softmax', name='predictions')(x)\r\n\r\n    model = keras.Model(inputs=inputs, outputs=outputs)\r\n    (x_train, y_train), (x_test, y_test) = keras.datasets.mnist.load_data()\r\n    x_train = x_train.reshape(60000, 784).astype('float32') / 255\r\n    y_train = y_train.astype('float32')\r\n\r\n    class PrintStatsCallback(keras.callbacks.Callback):\r\n        def on_batch_end(self, epoch, logs=None):\r\n            print('\\nON_BATCH_END: loss: {loss:.4f} accuracy: {accuracy:.4f}'.format_map(logs))\r\n\r\n    # Specify the training configuration (optimizer, loss, metrics)\r\n    model.compile(optimizer=keras.optimizers.SGD(lr=0.1),\r\n                  loss='sparse_categorical_crossentropy', metrics=['accuracy'])\r\n\r\n    model.fit(x_train, y_train,\r\n              steps_per_epoch=10,\r\n              batch_size=1024,\r\n              callbacks=[PrintStatsCallback()])\r\n```\r\n\r\nThe output is currently as follows:\r\n```\r\n    Train on 60000 samples\r\n    \r\n    ON_BATCH_END: loss: 2.3004 accuracy: 0.1543\r\n     1024/60000 [..............................] - ETA: 1:18 - loss: 2.3004 - accuracy: 0.1543\r\n    ON_BATCH_END: loss: 2.2151 accuracy: 0.2715\r\n     2048/60000 [>.............................] - ETA: 1:11 - loss: 2.2578 - accuracy: 0.2715\r\n    ON_BATCH_END: loss: 2.1440 accuracy: 0.3613\r\n     3072/60000 [>.............................] - ETA: 1:08 - loss: 2.2199 - accuracy: 0.3613\r\n    ...\r\n```\r\n\r\nFor example, compare the last two lines:\r\n`ON_BATCH_END: loss: 2.1440 accuracy: 0.3613` \r\nto \r\n`3072/60000 [>.............................] - ETA: 1:08 - loss: 2.2199 - accuracy: 0.3613`\r\n\r\nThe accuracy of both `on_batch_end` and the progress bar are identical, but the loss value differs as the loss value is not a moving average."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36394", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36394/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36394/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36394/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36394", "id": 558459738, "node_id": "MDU6SXNzdWU1NTg0NTk3Mzg=", "number": 36394, "title": "file_io.get_matching_files indefinitely hangs", "user": {"login": "prashastk", "id": 33844340, "node_id": "MDQ6VXNlcjMzODQ0MzQw", "avatar_url": "https://avatars0.githubusercontent.com/u/33844340?v=4", "gravatar_id": "", "url": "https://api.github.com/users/prashastk", "html_url": "https://github.com/prashastk", "followers_url": "https://api.github.com/users/prashastk/followers", "following_url": "https://api.github.com/users/prashastk/following{/other_user}", "gists_url": "https://api.github.com/users/prashastk/gists{/gist_id}", "starred_url": "https://api.github.com/users/prashastk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/prashastk/subscriptions", "organizations_url": "https://api.github.com/users/prashastk/orgs", "repos_url": "https://api.github.com/users/prashastk/repos", "events_url": "https://api.github.com/users/prashastk/events{/privacy}", "received_events_url": "https://api.github.com/users/prashastk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-02-01T01:57:51Z", "updated_at": "2020-02-03T10:17:04Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): GCP cloud shell\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): Comes pre-installed in  GCP cloud shell\r\n- TensorFlow version (use command below): TF 2.1\r\n- Python version: 3.7.3\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\nfile_io.get_matching_files indefinitely hangs\r\n\r\n**Describe the expected behavior**\r\nfile_io.get_matching_files should not hang!\r\n\r\n**Code to reproduce the issue**\r\nNote the `//` in the first command\r\n```\r\ngsutil cp README-cloudshell.txt gs://<some_bucket>/test//bug.txt\r\ngsutil cp README-cloudshell.txt gs://<some_bucket>/test/bug.txt\r\n```\r\nThis creates a weird `/` folder under the test folder\r\n\r\nNow open python\r\n```\r\nfrom tensorflow.python.lib.io import file_io\r\nfile_io.get_matching_files('gs://<some_bucket>/test/bug.txt')\r\n```\r\nThis will hang. \r\nDelete the `/` folder and this would work fine.\r\n\r\nOne of our training jobs hung because TF somehow created a `/` folder in model output directory!"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36391", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36391/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36391/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36391/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36391", "id": 558420966, "node_id": "MDU6SXNzdWU1NTg0MjA5NjY=", "number": 36391, "title": "[TF 2.1] Error when converting LSTM model to a frozen graph using convert_variables_to_constants_v2()", "user": {"login": "jakesabathia2", "id": 55294647, "node_id": "MDQ6VXNlcjU1Mjk0NjQ3", "avatar_url": "https://avatars2.githubusercontent.com/u/55294647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakesabathia2", "html_url": "https://github.com/jakesabathia2", "followers_url": "https://api.github.com/users/jakesabathia2/followers", "following_url": "https://api.github.com/users/jakesabathia2/following{/other_user}", "gists_url": "https://api.github.com/users/jakesabathia2/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakesabathia2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakesabathia2/subscriptions", "organizations_url": "https://api.github.com/users/jakesabathia2/orgs", "repos_url": "https://api.github.com/users/jakesabathia2/repos", "events_url": "https://api.github.com/users/jakesabathia2/events{/privacy}", "received_events_url": "https://api.github.com/users/jakesabathia2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}, {"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2020-01-31T23:07:41Z", "updated_at": "2020-03-07T07:01:48Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Mac\r\n- TensorFlow installed from (source or binary): pip install tensorflow\r\n- TensorFlow version (use command below): 2.1\r\n- Python version: 2.7\r\n\r\nI tried to froze a LSTM model build with tf.keras by using the `convert_variables_to_constants_v2` function with the following code\r\n\r\n```\r\nimport tensorflow as tf\r\n\r\ndef build_model(vocab_size, embedding_dim, rnn_units, batch_size):\r\n  model = tf.keras.Sequential([\r\n    tf.keras.layers.Embedding(vocab_size, embedding_dim,\r\n                              batch_input_shape=[batch_size, embedding_dim]),\r\n    tf.keras.layers.LSTM(rnn_units,\r\n                        return_sequences=True,\r\n                        stateful=False,\r\n                        recurrent_activation='sigmoid',\r\n                        recurrent_initializer='glorot_uniform'),\r\n    tf.keras.layers.Dense(vocab_size)\r\n  ])\r\n  return model\r\n\r\nembedding_dim = 100\r\nunits = 256\r\nvocab_size = 300\r\nbatch_size = 32\r\n\r\nmodel = build_model(vocab_size, embedding_dim, units, batch_size)\r\nmodel.compile(optimizer='adam', loss='sparse_categorical_crossentropy')\r\n\r\nfrom tensorflow.python.keras.saving import saving_utils as _saving_utils\r\nfrom tensorflow.python.framework import convert_to_constants as _convert_to_constants\r\n\r\ntf.keras.backend.set_learning_phase(False)\r\nfunc = _saving_utils.trace_model_call(model)\r\nconcrete_func = func.get_concrete_function()\r\nfrozen_func = _convert_to_constants.convert_variables_to_constants_v2(concrete_func)\r\n```\r\nproduces\r\n```\r\nCannot find the Placeholder op that is an input to the ReadVariableOp.\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36390", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36390/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36390/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36390/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36390", "id": 558395102, "node_id": "MDU6SXNzdWU1NTgzOTUxMDI=", "number": 36390, "title": "Custom metric in tf.keras.Model compile() gives error, but works when run_eagerly=True", "user": {"login": "dmus", "id": 464378, "node_id": "MDQ6VXNlcjQ2NDM3OA==", "avatar_url": "https://avatars1.githubusercontent.com/u/464378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmus", "html_url": "https://github.com/dmus", "followers_url": "https://api.github.com/users/dmus/followers", "following_url": "https://api.github.com/users/dmus/following{/other_user}", "gists_url": "https://api.github.com/users/dmus/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmus/subscriptions", "organizations_url": "https://api.github.com/users/dmus/orgs", "repos_url": "https://api.github.com/users/dmus/repos", "events_url": "https://api.github.com/users/dmus/events{/privacy}", "received_events_url": "https://api.github.com/users/dmus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-31T21:59:14Z", "updated_at": "2020-03-19T00:15:29Z", "closed_at": null, "author_association": "NONE", "body": "*System information**\r\nTensorflow 2.1 on colab\r\n\r\n**Describe the current behavior**\r\nWhen model.run_eagerly=True this model works correctly. When run_eagerly=False this gives an error\r\n\r\nError:\r\n\r\n> ValueError: Tried to convert 'input' to a tensor and failed. Error: None values not supported.\r\n\r\n**Describe the expected behavior**\r\nThe metric should run without errors in both cases\r\n\r\n**Code to reproduce the issue**\r\nSee colab notebook: https://colab.research.google.com/drive/1SxCf2N6D9bTbnm5fD0c_UYN4CaQ5neNQ\r\n\r\n`class CustomMetric(tf.keras.metrics.Metric):\r\n\r\n    def __init__(self, name='custom_metric', **kwargs):\r\n        super(CustomMetric, self).__init__(name=name, **kwargs)\r\n\r\n    def update_state(self, src, dst, sample_weight=None):\r\n        src = tf.reshape(src, (-1, 4, 2))\r\n        dst = tf.reshape(dst, (-1, 4, 2))\r\n\r\n        def ax(p, q):\r\n            ones = tf.ones(tf.shape(p))[..., 0:1]\r\n            zeros = tf.zeros(tf.shape(p))[..., 0:1]\r\n            return tf.concat(\r\n                [p[:, 0:1], p[:, 1:2], ones, zeros, zeros, zeros,\r\n                 -p[:, 0:1] * q[:, 0:1], -p[:, 1:2] * q[:, 0:1]\r\n                 ], axis=1)\r\n\r\n        def ay(p, q):\r\n            ones = tf.ones(tf.shape(p))[..., 0:1]\r\n            zeros = tf.zeros(tf.shape(p))[..., 0:1]\r\n            return tf.concat(\r\n                [zeros, zeros, zeros, p[:, 0:1], p[:, 1:2], ones,\r\n                 -p[:, 0:1] * q[:, 1:2], -p[:, 1:2] * q[:, 1:2]], axis=1)\r\n\r\n        # we build matrix A by using only 4 point correspondence. The linear\r\n        # system is solved with the least square method, so here\r\n        # we could even pass more correspondence\r\n        p = []\r\n        p.append(ax(src[:, 0], dst[:, 0]))\r\n        p.append(ay(src[:, 0], dst[:, 0]))\r\n\r\n        p.append(ax(src[:, 1], dst[:, 1]))\r\n        p.append(ay(src[:, 1], dst[:, 1]))\r\n\r\n        p.append(ax(src[:, 2], dst[:, 2]))\r\n        p.append(ay(src[:, 2], dst[:, 2]))\r\n\r\n        p.append(ax(src[:, 3], dst[:, 3]))\r\n        p.append(ay(src[:, 3], dst[:, 3]))\r\n\r\n        # A is Bx8x8\r\n        A = tf.stack(p, axis=1)\r\n\r\n        # b is a Bx8x1\r\n        b = tf.stack([\r\n            dst[:, 0:1, 0], dst[:, 0:1, 1],\r\n            dst[:, 1:2, 0], dst[:, 1:2, 1],\r\n            dst[:, 2:3, 0], dst[:, 2:3, 1],\r\n            dst[:, 3:4, 0], dst[:, 3:4, 1],\r\n        ], axis=1)\r\n\r\n        # solve the system Ax = b\r\n        X = tf.linalg.solve(A, b)\r\n        #return X\r\n\r\n    def reset_states(self):\r\n        return\r\n    def result(self):\r\n        return`\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36378", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36378/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36378/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36378/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/36378", "id": 558175370, "node_id": "MDExOlB1bGxSZXF1ZXN0MzY5NjE2NDIy", "number": 36378, "title": "[MLIR][Lite] Update emit_quant_adaptor in PostQuantizePass", "user": {"login": "Vooblin", "id": 39566915, "node_id": "MDQ6VXNlcjM5NTY2OTE1", "avatar_url": "https://avatars2.githubusercontent.com/u/39566915?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Vooblin", "html_url": "https://github.com/Vooblin", "followers_url": "https://api.github.com/users/Vooblin/followers", "following_url": "https://api.github.com/users/Vooblin/following{/other_user}", "gists_url": "https://api.github.com/users/Vooblin/gists{/gist_id}", "starred_url": "https://api.github.com/users/Vooblin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Vooblin/subscriptions", "organizations_url": "https://api.github.com/users/Vooblin/orgs", "repos_url": "https://api.github.com/users/Vooblin/repos", "events_url": "https://api.github.com/users/Vooblin/events{/privacy}", "received_events_url": "https://api.github.com/users/Vooblin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 1169365494, "node_id": "MDU6TGFiZWwxMTY5MzY1NDk0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:M", "name": "size:M", "color": "adafea", "default": false, "description": "CL Change Size: Medium"}, {"id": 474725938, "node_id": "MDU6TGFiZWw0NzQ3MjU5Mzg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stalled", "name": "stalled", "color": "d4c5f9", "default": false, "description": null}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-31T14:47:14Z", "updated_at": "2020-03-15T00:43:07Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/36378", "html_url": "https://github.com/tensorflow/tensorflow/pull/36378", "diff_url": "https://github.com/tensorflow/tensorflow/pull/36378.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/36378.patch"}, "body": "Make separate quant-adaptors for inputs and outputs of model in PostQuantizePass."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36376", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36376/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36376/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36376/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36376", "id": 558162304, "node_id": "MDU6SXNzdWU1NTgxNjIzMDQ=", "number": 36376, "title": "Callbacks should be able to access the training and validation data", "user": {"login": "nbro", "id": 9349000, "node_id": "MDQ6VXNlcjkzNDkwMDA=", "avatar_url": "https://avatars2.githubusercontent.com/u/9349000?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nbro", "html_url": "https://github.com/nbro", "followers_url": "https://api.github.com/users/nbro/followers", "following_url": "https://api.github.com/users/nbro/following{/other_user}", "gists_url": "https://api.github.com/users/nbro/gists{/gist_id}", "starred_url": "https://api.github.com/users/nbro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nbro/subscriptions", "organizations_url": "https://api.github.com/users/nbro/orgs", "repos_url": "https://api.github.com/users/nbro/repos", "events_url": "https://api.github.com/users/nbro/events{/privacy}", "received_events_url": "https://api.github.com/users/nbro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-31T14:24:17Z", "updated_at": "2020-02-03T21:20:55Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 2.1\r\n- Are you willing to contribute it (Yes/No): Maybe\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nCurrently, AFAIK, there's no direct way of accessing the training and validation data used for the mini-batch in the `on_batch_end` or `on_batch_begin` methods (in `tf.keras`).  Of course, this feature can be very useful, for example, if you want to debug the training data used for each training or validation mini-batches or, for example, if you want to compute other metrics on the specific batch of data used to update the parameters at each training step. Apparently, it was once possible to access the validation data inside the callback class, but this is no more available (not sure why!). See https://github.com/tensorflow/tensorflow/issues/36375. The training data for the mini-batch was never available, AFAIK.\r\n\r\nI have seen people trying to access the training and validation data (used in the current mini-batch/step) in the callbacks, and the solutions are simply disgustingly verbose, inflexible, etc. (see https://stackoverflow.com/q/47079111/3924118). \r\n\r\nWhy don't you provide this feature? This is clearly a useful feature (e.g. [this SO question](https://stackoverflow.com/q/53489352/3924118) shows that this feature would be appreciated). See also https://stackoverflow.com/q/47676248/3924118.\r\n\r\n**Will this change the current api? How?**\r\n\r\nProbably.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nEveryone.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36375", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36375/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36375/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36375/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36375", "id": 558151375, "node_id": "MDU6SXNzdWU1NTgxNTEzNzU=", "number": 36375, "title": "AttributeError: 'Callback' object has no attribute 'validation_data'", "user": {"login": "nbro", "id": 9349000, "node_id": "MDQ6VXNlcjkzNDkwMDA=", "avatar_url": "https://avatars2.githubusercontent.com/u/9349000?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nbro", "html_url": "https://github.com/nbro", "followers_url": "https://api.github.com/users/nbro/followers", "following_url": "https://api.github.com/users/nbro/following{/other_user}", "gists_url": "https://api.github.com/users/nbro/gists{/gist_id}", "starred_url": "https://api.github.com/users/nbro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nbro/subscriptions", "organizations_url": "https://api.github.com/users/nbro/orgs", "repos_url": "https://api.github.com/users/nbro/repos", "events_url": "https://api.github.com/users/nbro/events{/privacy}", "received_events_url": "https://api.github.com/users/nbro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gadagashwini", "id": 48476109, "node_id": "MDQ6VXNlcjQ4NDc2MTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/48476109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadagashwini", "html_url": "https://github.com/gadagashwini", "followers_url": "https://api.github.com/users/gadagashwini/followers", "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}", "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions", "organizations_url": "https://api.github.com/users/gadagashwini/orgs", "repos_url": "https://api.github.com/users/gadagashwini/repos", "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}", "received_events_url": "https://api.github.com/users/gadagashwini/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gadagashwini", "id": 48476109, "node_id": "MDQ6VXNlcjQ4NDc2MTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/48476109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadagashwini", "html_url": "https://github.com/gadagashwini", "followers_url": "https://api.github.com/users/gadagashwini/followers", "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}", "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions", "organizations_url": "https://api.github.com/users/gadagashwini/orgs", "repos_url": "https://api.github.com/users/gadagashwini/repos", "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}", "received_events_url": "https://api.github.com/users/gadagashwini/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-01-31T14:04:44Z", "updated_at": "2020-02-13T15:00:38Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\n\r\nPlease provide a link to the documentation entry, for example:\r\nhttps://www.tensorflow.org/api_docs/python/tf/keras/callbacks/Callback\r\n\r\n## Description of issue (what needs changing):\r\n\r\nCurrently, the page https://www.tensorflow.org/api_docs/python/tf/keras/callbacks/Callback says `validation_data: Deprecated. Do not use.`, but if I attempt to access the attribute `validation_data` inside the callback I get the error `AttributeError: 'MyCustomCallbackClass' object has no attribute 'validation_data'.`. You should change the documentation to remove the attribute `validation_data`, which apparently was removed.\r\n\r\nSee also this issue https://github.com/tensorflow/tensorflow/issues/27318."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36372", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36372/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36372/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36372/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36372", "id": 558114145, "node_id": "MDU6SXNzdWU1NTgxMTQxNDU=", "number": 36372, "title": "More advanced ways of collecting metrics in tf.keras while training models", "user": {"login": "nbro", "id": 9349000, "node_id": "MDQ6VXNlcjkzNDkwMDA=", "avatar_url": "https://avatars2.githubusercontent.com/u/9349000?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nbro", "html_url": "https://github.com/nbro", "followers_url": "https://api.github.com/users/nbro/followers", "following_url": "https://api.github.com/users/nbro/following{/other_user}", "gists_url": "https://api.github.com/users/nbro/gists{/gist_id}", "starred_url": "https://api.github.com/users/nbro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nbro/subscriptions", "organizations_url": "https://api.github.com/users/nbro/orgs", "repos_url": "https://api.github.com/users/nbro/repos", "events_url": "https://api.github.com/users/nbro/events{/privacy}", "received_events_url": "https://api.github.com/users/nbro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-31T12:51:49Z", "updated_at": "2020-02-03T17:30:02Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 2.1\r\n- Are you willing to contribute it (Yes/No): Maybe\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nCurrently, in `tf.keras`,  we can access the metrics by accessing the attribute `metrics` (a list) and `metrics_names` (list) of the model. Furthermore, when developing a callback, e.g. in the definition `def on_epoch_end(epoch, logs)`, `logs` is a dictionary whose keys are the names and whose values the corresponding values of the metrics, including the loss. \r\n\r\nIf you have a neural network with multiple outputs, all the metrics for each of these separate outputs are elements of `metrics` (or `metric_names`) and the dictionary `logs`. AFAIK, there's no direct way of getting e.g. the metrics for an output with name `\"outpu1\"`. This feature would be useful in the case we want to plot all (or a subset of) the metrics associated with one output. The model object could provide a method or attribute, `get_metrics_of_output(output_name)`, where the metrics are returned as an object (e.g. a dictionary) where the metrics associated with one output are collected in one separate list (or dictionary, etc) than the metrics associated with another output, so that `get_metrics_of_output(output_name)` returns the metrics of the output layer with name `output_name`. Furthermore, there should also be a way of differentiating between certain metrics associated with the **same** output. This could be determined by the way we define and pass the metrics to the `metrics` parameter of the `compile` method (e.g. as a dictionary). \r\n\r\nIn [this Stack Overflow question](https://stackoverflow.com/q/59996177/3924118), I am describing my current issue where this feature could be useful.\r\n\r\n**Will this change the current api? How?**\r\n\r\nProbably. You could just introduce a new method that returns a more advanced view of the metrics. `model.metrics` could still return just the flattened version of the metrics (as it is currently the case). However, `logs` (e.g. in `def on_epoch_end(epoch, logs)`) probably should change to return the more advanced view of the metrics. Or maybe there should be a third parameter that returns this advanced view of the metrics, e.g. `def on_epoch_end(epoch, logs, metrics)`.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nEveryone.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36364", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36364/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36364/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36364/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/36364", "id": 558009282, "node_id": "MDExOlB1bGxSZXF1ZXN0MzY5NDg1MTI3", "number": 36364, "title": "embedding_lookup_sparse divide by zero fixed", "user": {"login": "ashutosh1919", "id": 20843596, "node_id": "MDQ6VXNlcjIwODQzNTk2", "avatar_url": "https://avatars3.githubusercontent.com/u/20843596?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ashutosh1919", "html_url": "https://github.com/ashutosh1919", "followers_url": "https://api.github.com/users/ashutosh1919/followers", "following_url": "https://api.github.com/users/ashutosh1919/following{/other_user}", "gists_url": "https://api.github.com/users/ashutosh1919/gists{/gist_id}", "starred_url": "https://api.github.com/users/ashutosh1919/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ashutosh1919/subscriptions", "organizations_url": "https://api.github.com/users/ashutosh1919/orgs", "repos_url": "https://api.github.com/users/ashutosh1919/repos", "events_url": "https://api.github.com/users/ashutosh1919/events{/privacy}", "received_events_url": "https://api.github.com/users/ashutosh1919/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 1178505529, "node_id": "MDU6TGFiZWwxMTc4NTA1NTI5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/prtype:bugfix", "name": "prtype:bugfix", "color": "159b2e", "default": false, "description": "PR to fix a bug"}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2020-01-31T09:20:35Z", "updated_at": "2020-03-19T17:04:14Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/36364", "html_url": "https://github.com/tensorflow/tensorflow/pull/36364", "diff_url": "https://github.com/tensorflow/tensorflow/pull/36364.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/36364.patch"}, "body": "Fixes #36359. @Saduf2019 , @gowthamkpr and @yongtang, Please Review this one."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36363", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36363/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36363/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36363/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36363", "id": 558003990, "node_id": "MDU6SXNzdWU1NTgwMDM5OTA=", "number": 36363, "title": "Different behavior tf.keras and Keras for `stateful=True` ", "user": {"login": "gerwin3", "id": 1304177, "node_id": "MDQ6VXNlcjEzMDQxNzc=", "avatar_url": "https://avatars2.githubusercontent.com/u/1304177?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gerwin3", "html_url": "https://github.com/gerwin3", "followers_url": "https://api.github.com/users/gerwin3/followers", "following_url": "https://api.github.com/users/gerwin3/following{/other_user}", "gists_url": "https://api.github.com/users/gerwin3/gists{/gist_id}", "starred_url": "https://api.github.com/users/gerwin3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gerwin3/subscriptions", "organizations_url": "https://api.github.com/users/gerwin3/orgs", "repos_url": "https://api.github.com/users/gerwin3/repos", "events_url": "https://api.github.com/users/gerwin3/events{/privacy}", "received_events_url": "https://api.github.com/users/gerwin3/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-01-31T09:10:35Z", "updated_at": "2020-02-01T16:55:56Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): All platforms (tested on Ubuntu 18.04 and macOS)\r\n- TensorFlow installed from (source or binary): pip\r\n- TensorFlow version (use command below): 2.1\r\n- Python version: 3.8\r\n\r\n**Describe the current behavior**\r\nThe original Keras API specifies that, when an LSTM is set `stateful=True`, it's batch size *must* be known beforehand (by specifying `batch_shape`). The same is true for `tf.keras`, but it adds another hidden requirement that was not there in the original Keras: tf.keras requires that the full input shape (including batch size) is known. If one of the dimensions is `None`, it emits the \"If a RNN is stateful, it needs to know its batch size.\" error.\r\n\r\n**Describe the expected behavior**\r\nAs with the Keras API, it should be allowed to have `None` dimensions besides the `batch_size`.\r\n\r\n**Code to reproduce the issue**\r\nKeras:\r\n\r\n```\r\nfrom keras.models import Model\r\nfrom keras.layers import Input, LSTM, Reshape\r\n\r\ndef model():\r\n    input_layer = Input(batch_shape=(1, None))\r\n    reshape_layer = Reshape((1, 100))(input_layer)\r\n    lstm_layer = LSTM(units=100, stateful=True)(reshape_layer)\r\n    return Model(inputs=input_layer, outputs=lstm_layer)\r\n\r\nmodel = model()\r\n\r\n# Code runs perfectly fine.\r\n```\r\n\r\ntf.keras:\r\n\r\n```\r\nfrom tensorflow.keras.models import Model\r\nfrom tensorflow.keras.layers import Input, LSTM, Reshape\r\n\r\ndef model():\r\n    input_layer = Input(batch_shape=(1, None))\r\n    reshape_layer = Reshape((1, 100))(input_layer)\r\n    lstm_layer = LSTM(units=100, stateful=True)(reshape_layer)\r\n    return Model(inputs=input_layer, outputs=lstm_layer)\r\n\r\nmodel = model()\r\n\r\n\"\"\"\r\nValueError: If a RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \r\n- If using a Sequential model, specify the batch size by passing a `batch_input_shape` argument to your first layer.\r\n- If using the functional API, specify the batch size by passing a `batch_shape` argument to your Input layer.\r\n\"\"\"\r\n\r\n```\r\n\r\nThere are some very legitimate use cases for allowing non-batch dimensions to be unknown! This change in functionality prevents me from migrating a (variable) multi-stream CNN model from Keras to tf.kensor."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36361", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36361/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36361/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36361/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36361", "id": 557956140, "node_id": "MDU6SXNzdWU1NTc5NTYxNDA=", "number": 36361, "title": "tf.function using higher GPU memory than normal python function", "user": {"login": "abhigoyal2210", "id": 53578184, "node_id": "MDQ6VXNlcjUzNTc4MTg0", "avatar_url": "https://avatars0.githubusercontent.com/u/53578184?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abhigoyal2210", "html_url": "https://github.com/abhigoyal2210", "followers_url": "https://api.github.com/users/abhigoyal2210/followers", "following_url": "https://api.github.com/users/abhigoyal2210/following{/other_user}", "gists_url": "https://api.github.com/users/abhigoyal2210/gists{/gist_id}", "starred_url": "https://api.github.com/users/abhigoyal2210/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abhigoyal2210/subscriptions", "organizations_url": "https://api.github.com/users/abhigoyal2210/orgs", "repos_url": "https://api.github.com/users/abhigoyal2210/repos", "events_url": "https://api.github.com/users/abhigoyal2210/events{/privacy}", "received_events_url": "https://api.github.com/users/abhigoyal2210/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1478826728, "node_id": "MDU6TGFiZWwxNDc4ODI2NzI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:core", "name": "comp:core", "color": "024391", "default": false, "description": ""}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, {"login": "kkimdev", "id": 503414, "node_id": "MDQ6VXNlcjUwMzQxNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/503414?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kkimdev", "html_url": "https://github.com/kkimdev", "followers_url": "https://api.github.com/users/kkimdev/followers", "following_url": "https://api.github.com/users/kkimdev/following{/other_user}", "gists_url": "https://api.github.com/users/kkimdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/kkimdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kkimdev/subscriptions", "organizations_url": "https://api.github.com/users/kkimdev/orgs", "repos_url": "https://api.github.com/users/kkimdev/repos", "events_url": "https://api.github.com/users/kkimdev/events{/privacy}", "received_events_url": "https://api.github.com/users/kkimdev/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2020-01-31T07:13:30Z", "updated_at": "2020-02-21T18:43:59Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04.5\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.1.0\r\n- Python version: (3, 5, 2, 'final', 0)\r\n- CUDA/cuDNN version: 10.0\r\n- GPU model and memory: Tesla V100-PCIE-16GB\r\n\r\n**Describe the current behavior**\r\nI am running a simple LSTM model inside a function decorated with tf.function but it's consuming much higher GPU memory (around 8700MB) as compared to a function which isn't decorated with tf.function (which consumes around 2600MB).\r\n\r\n**Describe the expected behavior**\r\nBoth methods should consume similar amount of GPU memory.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport sys\r\nimport tensorflow as tf\r\ntf.debugging.set_log_device_placement(True)\r\n\r\n#GPU growth code\r\ngpus = tf.config.experimental.list_physical_devices('GPU')\r\nif gpus:\r\n  try:\r\n    # Currently, memory growth needs to be the same across GPUs\r\n    for gpu in gpus:\r\n      tf.config.experimental.set_memory_growth(gpu, True)\r\n    logical_gpus = tf.config.experimental.list_logical_devices('GPU')\r\n    print(len(gpus), \"Physical GPUs,\", len(logical_gpus), \"Logical GPUs\")\r\n  except RuntimeError as e:\r\n    # Memory growth must be set before GPUs have been initialized\r\n    print(e)\r\n\r\n#---------------PARAMS------------\r\nbatch_size = 32\r\nmax_out_len = 200\r\nnum_hidden = 400\r\nnum_classes = 73\r\nmax_time_steps = 900\r\nnum_features = 240\r\n#---------------------------------\r\n\r\nclass Model(tf.keras.Model):\r\n    def __init__(self):\r\n        super(Model, self).__init__()\r\n\r\n        self.forward_cell = [\r\n            tf.keras.layers.LSTMCell(num_hidden, kernel_initializer='glorot_uniform')]\r\n        self.state = tf.keras.layers.RNN(self.forward_cell, time_major=False, return_sequences=True)\r\n        self.dense = tf.keras.layers.Dense(num_classes, use_bias=True, kernel_initializer=tf.initializers.TruncatedNormal(mean=0, stddev=0.1))\r\n\r\n    def call(self, inputs):\r\n        x, seq_len = inputs\r\n        mask = tf.sequence_mask(seq_len, maxlen=max_time_steps)\r\n        state = self.state(inputs=x, mask=mask)\r\n        logits = self.dense(state)\r\n        return logits\r\n\r\nx = tf.random.normal(shape=(2, batch_size, max_time_steps, num_features))\r\nseq_len = tf.constant([[5]*batch_size,[7]*batch_size])\r\ny_i = [tf.constant(sum([[[i,0],[i,1],[i,2]] for i in range(batch_size)], [])),tf.constant(sum([[[i,0],[i,2],[i,4]] for i in range(batch_size)], []))]\r\ny_v = [tf.constant([1,2,4]*batch_size),tf.constant([5,1,2]*batch_size)]\r\nv = [tf.constant([1,0]*(batch_size//2)),tf.constant([0,1]*(batch_size//2))]\r\ndef fn():\r\n    for i in range(2):\r\n        yield x[i], seq_len[i], y_i[i], y_v[i], v[i]\r\n\r\ndef loss(logits, s, yi, yv):\r\n    y = tf.SparseTensor(yi, yv, tf.TensorShape([batch_size, max_out_len]))\r\n    return tf.cast(tf.sparse.reduce_sum(y, axis=-1), tf.float32) - tf.reduce_sum(logits, axis=[-1, -2])\r\n\r\n\r\nwith tf.device('/cpu:0'):\r\n    model = Model()\r\n    model.build([(batch_size, max_time_steps, num_features), (batch_size,)])\r\n    dataset = tf.data.Dataset.from_generator(fn, output_types=(tf.float32, tf.int32, tf.int64, tf.int32, tf.float32))\r\n\r\ndef run_eager(x, s, yi, yv, v):\r\n    with tf.device('/gpu:0'):\r\n        with tf.GradientTape() as tape:\r\n            logits = model([x, s])\r\n            losses = tf.reduce_sum(loss(logits, s, yi, yv))\r\n        grads = tape.gradient(losses, model.trainable_variables)\r\n\r\n    # ToDo: call optimizer.apply_gradients\r\n\r\n    return losses\r\n\r\nif len(sys.argv) > 1 and sys.argv[1] == 'func':\r\n    run = tf.function(run_eager)\r\nelse:\r\n    run = run_eager\r\n\r\nwith tf.device('/cpu:0'):\r\n    it = iter(dataset)\r\n    l = run(*next(it))\r\n\r\nprint(l)\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36360", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36360/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36360/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36360/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36360", "id": 557928364, "node_id": "MDU6SXNzdWU1NTc5MjgzNjQ=", "number": 36360, "title": "Parallel Write TFRecords Shards", "user": {"login": "rodyt", "id": 36773880, "node_id": "MDQ6VXNlcjM2NzczODgw", "avatar_url": "https://avatars2.githubusercontent.com/u/36773880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rodyt", "html_url": "https://github.com/rodyt", "followers_url": "https://api.github.com/users/rodyt/followers", "following_url": "https://api.github.com/users/rodyt/following{/other_user}", "gists_url": "https://api.github.com/users/rodyt/gists{/gist_id}", "starred_url": "https://api.github.com/users/rodyt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rodyt/subscriptions", "organizations_url": "https://api.github.com/users/rodyt/orgs", "repos_url": "https://api.github.com/users/rodyt/repos", "events_url": "https://api.github.com/users/rodyt/events{/privacy}", "received_events_url": "https://api.github.com/users/rodyt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-01-31T05:48:10Z", "updated_at": "2020-02-06T10:47:39Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): TF2.0\r\n- Are you willing to contribute it (Yes/No): No\r\n\r\nI have a `tf.data.Dataset` that reads raw image and annotations files and shards them. However, using `tf.data.experimental.TFRecordWriter` writes sequentially and is currently very slow.\r\n\r\n```\r\ndataset = tf.data.Dataset.....\r\nfor i in range(num_shards):\r\n    write_path = ....\r\n    tfrecords_writer = tf.data.experimental.TFRecordWriter(\r\n        filename=write_path,\r\n        compression_type=compression_type\r\n    )\r\n    dataset_shard = dataset.shard(num_shards, shard_index)\r\n\r\n    start_write_time = time.time()\r\n```\r\n\r\nI would like to be able to write the shards in parallel to reduce the write time by opening up multiple processes that process each shard individually.\r\n\r\nI've tried using a `multiprocessing.Process` and starting a bunch of processes that way, but it doesn't seem to speed up writing."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36350", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36350/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36350/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36350/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/36350", "id": 557738166, "node_id": "MDExOlB1bGxSZXF1ZXN0MzY5Mjc1MjQ2", "number": 36350, "title": "Add NVTX Ranges", "user": {"login": "nluehr", "id": 1873655, "node_id": "MDQ6VXNlcjE4NzM2NTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1873655?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nluehr", "html_url": "https://github.com/nluehr", "followers_url": "https://api.github.com/users/nluehr/followers", "following_url": "https://api.github.com/users/nluehr/following{/other_user}", "gists_url": "https://api.github.com/users/nluehr/gists{/gist_id}", "starred_url": "https://api.github.com/users/nluehr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nluehr/subscriptions", "organizations_url": "https://api.github.com/users/nluehr/orgs", "repos_url": "https://api.github.com/users/nluehr/repos", "events_url": "https://api.github.com/users/nluehr/events{/privacy}", "received_events_url": "https://api.github.com/users/nluehr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1133285679, "node_id": "MDU6TGFiZWwxMTMzMjg1Njc5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:xla", "name": "comp:xla", "color": "0052cc", "default": false, "description": ""}, {"id": 1169365682, "node_id": "MDU6TGFiZWwxMTY5MzY1Njgy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:L", "name": "size:L", "color": "adafea", "default": false, "description": "CL Change Size: Large"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 22, "created_at": "2020-01-30T20:36:16Z", "updated_at": "2020-03-17T12:18:48Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/36350", "html_url": "https://github.com/tensorflow/tensorflow/pull/36350", "diff_url": "https://github.com/tensorflow/tensorflow/pull/36350.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/36350.patch"}, "body": "- Adds NVTX ranges around ops executed by eager and graph executors.\r\n- Useful for NVIDIA Nsight Systems or DLProf profiling.\r\n- All ranges are added to the 'tensorflow-core' domain to avoid\r\n  conflicts with potential user-defined ranges.\r\n- Can be disabled with TF_DISABLE_NVTX_RANGES environment variable.\r\n\r\nAttn @jbaiocchi and @qiuminxu "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36349", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36349/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36349/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36349/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36349", "id": 557715988, "node_id": "MDU6SXNzdWU1NTc3MTU5ODg=", "number": 36349, "title": "Keras Layer With Trainable=False Flag Creates Variables With Trainable=True", "user": {"login": "decodyng", "id": 5902855, "node_id": "MDQ6VXNlcjU5MDI4NTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/5902855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/decodyng", "html_url": "https://github.com/decodyng", "followers_url": "https://api.github.com/users/decodyng/followers", "following_url": "https://api.github.com/users/decodyng/following{/other_user}", "gists_url": "https://api.github.com/users/decodyng/gists{/gist_id}", "starred_url": "https://api.github.com/users/decodyng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/decodyng/subscriptions", "organizations_url": "https://api.github.com/users/decodyng/orgs", "repos_url": "https://api.github.com/users/decodyng/repos", "events_url": "https://api.github.com/users/decodyng/events{/privacy}", "received_events_url": "https://api.github.com/users/decodyng/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-30T19:56:20Z", "updated_at": "2020-02-06T07:59:46Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): \r\nSystem Version: macOS 10.15.2 (19C57)\r\nKernel Version: Darwin 19.2.0\r\n- TensorFlow installed from (source or binary): binary (pip)\r\n- TensorFlow version (use command below): v1.15.0-rc3-22-g590d6eef7e 1.15.0\r\n- Python version: 3.7.0 \r\n\r\n**Describe the current behavior**\r\nWhen I create a Keras model using layerwise structure in tf.keras.Model, and set one or more of the layers to `trainable=False`, this results in a situation where the keras model believes those variables/parameters to be non-trainable (and reports them as such in `model.non_trainable_variables` and `model.summary`) but doesn't set the actual `trainable` flag on the created Tensorflow variables to be False. This can lead to unintuitive behavior if other systems are reasonably expecting `var_obj.trainable` to correspond with the model's actual trainable variables. \r\n\r\n**Describe the expected behavior**\r\nWhen a layer is set to `trainable=False`, Tensorflow variables associated with that layer also have the trainable flag set to False \r\n\r\n**Code to reproduce the issue**\r\n```import tensorflow as tf\r\ninputs = tf.keras.layers.Input(shape=(10,))\r\nhiddens = tf.keras.layers.Dense(15,  trainable=True, name=\"trainable_layer\")(inputs)\r\noutput = tf.keras.layers.Dense(5, trainable=False, name=\"nontrainable_layer\")(hiddens)\r\nmodel = tf.keras.Model(inputs, output)\r\nmodel.compile(optimizer='rmsprop', loss='categorical_crossentropy')\r\nprint(f\"Model trainable variables: {model.trainable_variables}\")\r\nprint(f\"Model non-trainable variables: {model.non_trainable_variables}\")\r\nprint(f\"Trainable flags on model non-trainable variables: {[v.trainable for v in model.non_trainable_variables]}\")\r\n```\r\n "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36343", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36343/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36343/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36343/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36343", "id": 557657698, "node_id": "MDU6SXNzdWU1NTc2NTc2OTg=", "number": 36343, "title": "bazel test command broken because of Missing ROCM input files.", "user": {"login": "claynerobison", "id": 23344461, "node_id": "MDQ6VXNlcjIzMzQ0NDYx", "avatar_url": "https://avatars1.githubusercontent.com/u/23344461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/claynerobison", "html_url": "https://github.com/claynerobison", "followers_url": "https://api.github.com/users/claynerobison/followers", "following_url": "https://api.github.com/users/claynerobison/following{/other_user}", "gists_url": "https://api.github.com/users/claynerobison/gists{/gist_id}", "starred_url": "https://api.github.com/users/claynerobison/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/claynerobison/subscriptions", "organizations_url": "https://api.github.com/users/claynerobison/orgs", "repos_url": "https://api.github.com/users/claynerobison/repos", "events_url": "https://api.github.com/users/claynerobison/events{/privacy}", "received_events_url": "https://api.github.com/users/claynerobison/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "srvasude", "id": 1048839, "node_id": "MDQ6VXNlcjEwNDg4Mzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1048839?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srvasude", "html_url": "https://github.com/srvasude", "followers_url": "https://api.github.com/users/srvasude/followers", "following_url": "https://api.github.com/users/srvasude/following{/other_user}", "gists_url": "https://api.github.com/users/srvasude/gists{/gist_id}", "starred_url": "https://api.github.com/users/srvasude/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srvasude/subscriptions", "organizations_url": "https://api.github.com/users/srvasude/orgs", "repos_url": "https://api.github.com/users/srvasude/repos", "events_url": "https://api.github.com/users/srvasude/events{/privacy}", "received_events_url": "https://api.github.com/users/srvasude/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "srvasude", "id": 1048839, "node_id": "MDQ6VXNlcjEwNDg4Mzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1048839?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srvasude", "html_url": "https://github.com/srvasude", "followers_url": "https://api.github.com/users/srvasude/followers", "following_url": "https://api.github.com/users/srvasude/following{/other_user}", "gists_url": "https://api.github.com/users/srvasude/gists{/gist_id}", "starred_url": "https://api.github.com/users/srvasude/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srvasude/subscriptions", "organizations_url": "https://api.github.com/users/srvasude/orgs", "repos_url": "https://api.github.com/users/srvasude/repos", "events_url": "https://api.github.com/users/srvasude/events{/privacy}", "received_events_url": "https://api.github.com/users/srvasude/received_events", "type": "User", "site_admin": false}, {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-01-30T17:56:52Z", "updated_at": "2020-02-20T00:24:42Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04 tensorflow/tensorflow:devel-py3 container\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: commit ID 720b16121ea60d914f2d3df47e580e7e1e5542ae or latest master\r\n- Python version: Python 3.6.9\r\n- Installed using virtualenv? pip? conda?: Not installsed\r\n- Bazel version (if compiling from source): 1.2.1\r\n- GCC/Compiler version (if compiling from source): gcc (Ubuntu 7.4.0-1ubuntu1~18.04.1) 7.4.0\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n\r\n\r\n**Describe the problem** \r\nUnable to complete bazel test command because of missing rocm input files. \r\n\r\n```\r\n[eigen.log.zip](https://github.com/tensorflow/tensorflow/files/4135491/eigen.log.zip)\r\n\r\nERROR: missing input file '@local_config_rocm//rocm:rocm/include/hipcub/hipcub_version.hpp'\r\nERROR: missing input file '@local_config_rocm//rocm:rocm/include/rocprim/rocprim_version.hpp'\r\nERROR: /root/.cache/bazel/_bazel_root/104a68818e52204e40c368960e574528/external/local_config_rocm/rocm/BUILD:119:1: @local_config_rocm//rocm:rocprim: missing input file '@local_config_rocm//rocm:rocm/include/hipcub/hipcub_version.hpp'\r\nERROR: /root/.cache/bazel/_bazel_root/104a68818e52204e40c368960e574528/external/local_config_rocm/rocm/BUILD:119:1: @local_config_rocm//rocm:rocprim: missing input file '@local_config_rocm//rocm:rocm/include/rocprim/rocprim_version.hpp'\r\nERROR: /host/tensorflow/tensorflow/python/kernel_tests/BUILD:1222:1: Creating runfiles tree bazel-out/k8-opt/bin/tensorflow/python/kernel_tests/summary_v1_ops_test.runfiles failed: build-runfiles failed: error executing command \r\n  (cd /root/.cache/bazel/_bazel_root/104a68818e52204e40c368960e574528/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin \\\r\n    PYTHON_BIN_PATH=/usr/local/bin/python \\\r\n    PYTHON_LIB_PATH=/usr/local/lib/python3.6/dist-packages \\\r\n    TF2_BEHAVIOR=1 \\\r\n    TF_CONFIGURE_IOS=0 \\\r\n    TF_ENABLE_XLA=1 \\\r\n  /root/.cache/bazel/_bazel_root/install/84defa6eb1e9416bf92d6f89ab2d4f31/build-runfiles bazel-out/k8-opt/bin/tensorflow/python/kernel_tests/summary_v1_ops_test.runfiles_manifest bazel-out/k8-opt/bin/tensorflow/python/kernel_tests/summary_v1_ops_test.runfiles): Process terminated by signal 15: Process terminated by signal 15\r\nERROR: /root/.cache/bazel/_bazel_root/104a68818e52204e40c368960e574528/external/local_config_rocm/rocm/BUILD:119:1 2 input file(s) do not exist```\r\n\r\nThese files do not exist in the bazel cache.\r\n\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n```$ docker pull tensorflow/tensorflow:devel-py3\r\n$ git clone https://github.com/tensorflow/tensorflow\r\n$ docker run -ti --rm -v $(pwd):/host tensorflow/tensorflow:devel-py3\r\n# cd /host/tensorflow\r\n# yes \"\" | python configure.py\r\n# bazel --nosystem_rc --nohome_rc test --cxxopt=-D_GLIBCXX_USE_CXX11_ABI=0 --copt=-march=haswell --copt=-mtune=broadwell --copt=-O3 --copt=-Wformat --copt=-Wformat-security --copt=-fstack-protector --copt=-fPIC --copt=-fpic --linkopt=-znoexecstack --linkopt=-zrelro --linkopt=-znow --linkopt=-fstack-protector --config=v2 --test_timeout 300,450,1200,3600 --test_env=KMP_BLOCKTIME=0 -s --cache_test_results=no --test_size_filters=small,medium,large,enormous -c opt -- //tensorflow/... -//tensorflow/compiler/... -//tensorflow/lite/... -//tensorflow/stream_executor/cuda/... -//tensorflow/python/autograph/pyct/... -//tensorflow/core/kernels:eigen_mkldnn_contraction_kernel_test```\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nlog file attached\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36341", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36341/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36341/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36341/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/36341", "id": 557612126, "node_id": "MDExOlB1bGxSZXF1ZXN0MzY5MTcxOTE5", "number": 36341, "title": "[ROCm] Adding no_rocm tag to tests that started failing after the 200129 weekly sync", "user": {"login": "deven-amd", "id": 36858332, "node_id": "MDQ6VXNlcjM2ODU4MzMy", "avatar_url": "https://avatars2.githubusercontent.com/u/36858332?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deven-amd", "html_url": "https://github.com/deven-amd", "followers_url": "https://api.github.com/users/deven-amd/followers", "following_url": "https://api.github.com/users/deven-amd/following{/other_user}", "gists_url": "https://api.github.com/users/deven-amd/gists{/gist_id}", "starred_url": "https://api.github.com/users/deven-amd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deven-amd/subscriptions", "organizations_url": "https://api.github.com/users/deven-amd/orgs", "repos_url": "https://api.github.com/users/deven-amd/repos", "events_url": "https://api.github.com/users/deven-amd/events{/privacy}", "received_events_url": "https://api.github.com/users/deven-amd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-01-30T16:34:06Z", "updated_at": "2020-03-13T02:10:07Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/36341", "html_url": "https://github.com/tensorflow/tensorflow/pull/36341", "diff_url": "https://github.com/tensorflow/tensorflow/pull/36341.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/36341.patch"}, "body": "/cc @whchung @chsigg "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36332", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36332/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36332/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36332/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36332", "id": 557366019, "node_id": "MDU6SXNzdWU1NTczNjYwMTk=", "number": 36332, "title": "Fit method printout is broken in version 2.1 ", "user": {"login": "OmerLiberman", "id": 38648402, "node_id": "MDQ6VXNlcjM4NjQ4NDAy", "avatar_url": "https://avatars0.githubusercontent.com/u/38648402?v=4", "gravatar_id": "", "url": "https://api.github.com/users/OmerLiberman", "html_url": "https://github.com/OmerLiberman", "followers_url": "https://api.github.com/users/OmerLiberman/followers", "following_url": "https://api.github.com/users/OmerLiberman/following{/other_user}", "gists_url": "https://api.github.com/users/OmerLiberman/gists{/gist_id}", "starred_url": "https://api.github.com/users/OmerLiberman/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/OmerLiberman/subscriptions", "organizations_url": "https://api.github.com/users/OmerLiberman/orgs", "repos_url": "https://api.github.com/users/OmerLiberman/repos", "events_url": "https://api.github.com/users/OmerLiberman/events{/privacy}", "received_events_url": "https://api.github.com/users/OmerLiberman/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 15, "created_at": "2020-01-30T09:27:19Z", "updated_at": "2020-03-13T17:21:55Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): MACOS\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): 2.1.0\r\n- Python version: 3.7.4\r\n\r\n** Info **\r\nThe out-prints of in the fit method in version 2.0:\r\n<img width=\"1440\" alt=\"Screen Shot 2020-01-30 at 11 08 16\" src=\"https://user-images.githubusercontent.com/38648402/73436454-36441700-4353-11ea-86e1-7ff0023ae0b1.png\">\r\n\r\nThe out-prints of in the fit method in version 2.1:\r\n<img width=\"1440\" alt=\"Screen Shot 2020-01-30 at 11 11 07\" src=\"https://user-images.githubusercontent.com/38648402/73436538-5d024d80-4353-11ea-8fcb-d40560a2f79d.png\">\r\n\r\nWatch the output of the first epoch (the line, not the values), it prints Epcoh1/3 at the end of the line.\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36331", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36331/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36331/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36331/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36331", "id": 557362237, "node_id": "MDU6SXNzdWU1NTczNjIyMzc=", "number": 36331, "title": "Got Warning : Disabling AVX support in Mac OSX Catalina", "user": {"login": "mania25", "id": 7329402, "node_id": "MDQ6VXNlcjczMjk0MDI=", "avatar_url": "https://avatars1.githubusercontent.com/u/7329402?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mania25", "html_url": "https://github.com/mania25", "followers_url": "https://api.github.com/users/mania25/followers", "following_url": "https://api.github.com/users/mania25/following{/other_user}", "gists_url": "https://api.github.com/users/mania25/gists{/gist_id}", "starred_url": "https://api.github.com/users/mania25/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mania25/subscriptions", "organizations_url": "https://api.github.com/users/mania25/orgs", "repos_url": "https://api.github.com/users/mania25/repos", "events_url": "https://api.github.com/users/mania25/events{/privacy}", "received_events_url": "https://api.github.com/users/mania25/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205765054, "node_id": "MDU6TGFiZWwxMjA1NzY1MDU0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:macOS", "name": "subtype:macOS", "color": "b619ea", "default": false, "description": "macOS Build/Installation issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-01-30T09:20:31Z", "updated_at": "2020-03-14T11:21:18Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): MacOSX 10.15.3 (Catalina)\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version: 2.0\r\n- Python version: 3.7\r\n- Installed using virtualenv? pip? conda?: no\r\n- Bazel version (if compiling from source): 1.2.1\r\n- GCC/Compiler version (if compiling from source): Apple clang version 11.0.0 (clang-1100.0.33.17) \r\n\r\n**Describe the problem**\r\n\r\nHi, I got so many warning when building TensorFlow in Macosx Catalina with AVX2 Enabled, I got warning like this : \r\n\r\n> 1 warning generated.\r\nINFO: From Compiling tensorflow/core/grappler/utils/functions.cc [for host]:\r\nIn file included from tensorflow/core/grappler/utils/functions.cc:15:\r\nIn file included from ./tensorflow/core/grappler/utils/functions.h:26:\r\nIn file included from ./tensorflow/core/framework/function.h:28:\r\nIn file included from ./tensorflow/core/framework/attr_value_util.h:23:\r\nIn file included from ./tensorflow/core/framework/partial_tensor_shape.h:20:\r\nIn file included from ./tensorflow/core/framework/tensor_shape.h:21:\r\nIn file included from ./third_party/eigen3/unsupported/Eigen/CXX11/Tensor:1:\r\nIn file included from external/eigen_archive/unsupported/Eigen/CXX11/Tensor:14:\r\nIn file included from external/eigen_archive/unsupported/Eigen/CXX11/../../../Eigen/Core:22:\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/../../../Eigen/src/Core/util/ConfigureVectorization.h:300:10: warning: \"Disabling AVX support: clang compiler shipped with XCode 11.[012] generates broken assembly with -macosx-version-min=10.15 and AVX enabled. \" [-W#warnings]\r\n        #warning \"Disabling AVX support: clang compiler shipped with XCode 11.[012] generates broken assembly with -macosx-version-min=10.15 and AVX enabled. \"\r\n         ^\r\n1 warning generated.\r\n\r\nDoes anyone know what is the root cause of this problem? thank you\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n- bazel build --config=opt --config=mkl --copt=-mavx2 //tensorflow/tools/lib_package:libtensorflow\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36329", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36329/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36329/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36329/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36329", "id": 557286789, "node_id": "MDU6SXNzdWU1NTcyODY3ODk=", "number": 36329, "title": "OpenBLASS for efficient Matrix multiplications?", "user": {"login": "vikramdattu", "id": 5511751, "node_id": "MDQ6VXNlcjU1MTE3NTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/5511751?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vikramdattu", "html_url": "https://github.com/vikramdattu", "followers_url": "https://api.github.com/users/vikramdattu/followers", "following_url": "https://api.github.com/users/vikramdattu/following{/other_user}", "gists_url": "https://api.github.com/users/vikramdattu/gists{/gist_id}", "starred_url": "https://api.github.com/users/vikramdattu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vikramdattu/subscriptions", "organizations_url": "https://api.github.com/users/vikramdattu/orgs", "repos_url": "https://api.github.com/users/vikramdattu/repos", "events_url": "https://api.github.com/users/vikramdattu/events{/privacy}", "received_events_url": "https://api.github.com/users/vikramdattu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1589976566, "node_id": "MDU6TGFiZWwxNTg5OTc2NTY2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:micro", "name": "comp:micro", "color": "3e2eea", "default": false, "description": "Related to TensorFlow Lite Microcontrollers"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "wangtz", "id": 34290063, "node_id": "MDQ6VXNlcjM0MjkwMDYz", "avatar_url": "https://avatars1.githubusercontent.com/u/34290063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wangtz", "html_url": "https://github.com/wangtz", "followers_url": "https://api.github.com/users/wangtz/followers", "following_url": "https://api.github.com/users/wangtz/following{/other_user}", "gists_url": "https://api.github.com/users/wangtz/gists{/gist_id}", "starred_url": "https://api.github.com/users/wangtz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wangtz/subscriptions", "organizations_url": "https://api.github.com/users/wangtz/orgs", "repos_url": "https://api.github.com/users/wangtz/repos", "events_url": "https://api.github.com/users/wangtz/events{/privacy}", "received_events_url": "https://api.github.com/users/wangtz/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wangtz", "id": 34290063, "node_id": "MDQ6VXNlcjM0MjkwMDYz", "avatar_url": "https://avatars1.githubusercontent.com/u/34290063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wangtz", "html_url": "https://github.com/wangtz", "followers_url": "https://api.github.com/users/wangtz/followers", "following_url": "https://api.github.com/users/wangtz/following{/other_user}", "gists_url": "https://api.github.com/users/wangtz/gists{/gist_id}", "starred_url": "https://api.github.com/users/wangtz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wangtz/subscriptions", "organizations_url": "https://api.github.com/users/wangtz/orgs", "repos_url": "https://api.github.com/users/wangtz/repos", "events_url": "https://api.github.com/users/wangtz/events{/privacy}", "received_events_url": "https://api.github.com/users/wangtz/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-30T06:09:46Z", "updated_at": "2020-02-21T18:43:58Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): TFLite micro (on ESP32)\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behaviour/state.**\r\n\r\nThe major CPU intensive function here are Convolution functions! Which are nothing but Large Matrix multiplications.\r\nFor Face detection example on ESP32, I have seen that it is the major contributor at more than 50% of total CPU eaten by example.\r\n\r\n[OpenBLASS](https://github.com/xianyi/OpenBLAS) is open implementation of [BLASS](http://www.netlib.org/blas/) library which is optimised version of large Matrix multiplications which takes into account Cache availability of system etc.\r\n\r\nAre there any plans to use this in TensorFlow?\r\n\r\n\r\n**Will this change the current api? How?**\r\n\r\nNeed to explore this, but it should most likely not affect existing APIs but shall change the implementations of few functions.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nAll the platforms for which OpenBLASS is optimized to including x86 platforms, ARM, MIPS etc.\r\n\r\n**Any Other info.**\r\n\r\nLinks:\r\nhttp://www.netlib.org/blas/\r\nhttps://github.com/xianyi/OpenBLAS\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36327", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36327/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36327/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36327/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36327", "id": 557250858, "node_id": "MDU6SXNzdWU1NTcyNTA4NTg=", "number": 36327, "title": "Ability to calculate projected memory usage for a given model", "user": {"login": "Bidski", "id": 2320984, "node_id": "MDQ6VXNlcjIzMjA5ODQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/2320984?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Bidski", "html_url": "https://github.com/Bidski", "followers_url": "https://api.github.com/users/Bidski/followers", "following_url": "https://api.github.com/users/Bidski/following{/other_user}", "gists_url": "https://api.github.com/users/Bidski/gists{/gist_id}", "starred_url": "https://api.github.com/users/Bidski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Bidski/subscriptions", "organizations_url": "https://api.github.com/users/Bidski/orgs", "repos_url": "https://api.github.com/users/Bidski/repos", "events_url": "https://api.github.com/users/Bidski/events{/privacy}", "received_events_url": "https://api.github.com/users/Bidski/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-30T03:53:33Z", "updated_at": "2020-01-30T23:40:37Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 2.1\r\n- Are you willing to contribute it (Yes/No): Yes, but I would likely need assistance/guidance\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nThe closest feature I can find to this is `tf.keras.Model.summary()`. This feature calculate the trainable and non-trainable parameters per-layer but doesn't attempt to calculate any memory usage statistics.\r\n\r\nThe proposed feature would extend `tf.keras.Model.summary()` by also calculating memory requirements per-layer and for the complete model. If multiple compute devices are used in the model then a per-device memory breakdown would also be useful.\r\n\r\n**Will this change the current api? How?**\r\nThis could either just add functionality to `tf.keras.Model.summary()` without changing the interface, or it could add extra parameters to `tf.keras.Model.summary()`. Alternatively, a new function could be added, whatever is deemed most appropriate.\r\n\r\n**Who will benefit with this feature?**\r\nAnyone with a desire to get an idea about how much memory their model will need for either training or inference. It should be possible for someone to determine whether the model they wish to train/evaluate will fit into RAM (either system of GPU) that they have available.\r\n\r\n**Any Other info.**\r\nMy focus is on the `tf.keras.Model.summary()` API, but this feature should probably be extended to other means of model creation.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36322", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36322/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36322/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36322/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/36322", "id": 557034859, "node_id": "MDExOlB1bGxSZXF1ZXN0MzY4Njk5NzE2", "number": 36322, "title": "[tf_micro] Allow toolchain for generated projects to be set in makefile", "user": {"login": "cdknorow", "id": 884424, "node_id": "MDQ6VXNlcjg4NDQyNA==", "avatar_url": "https://avatars1.githubusercontent.com/u/884424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cdknorow", "html_url": "https://github.com/cdknorow", "followers_url": "https://api.github.com/users/cdknorow/followers", "following_url": "https://api.github.com/users/cdknorow/following{/other_user}", "gists_url": "https://api.github.com/users/cdknorow/gists{/gist_id}", "starred_url": "https://api.github.com/users/cdknorow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cdknorow/subscriptions", "organizations_url": "https://api.github.com/users/cdknorow/orgs", "repos_url": "https://api.github.com/users/cdknorow/repos", "events_url": "https://api.github.com/users/cdknorow/events{/privacy}", "received_events_url": "https://api.github.com/users/cdknorow/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1169365494, "node_id": "MDU6TGFiZWwxMTY5MzY1NDk0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:M", "name": "size:M", "color": "adafea", "default": false, "description": "CL Change Size: Medium"}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-01-29T18:20:19Z", "updated_at": "2020-03-17T12:15:42Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/36322", "html_url": "https://github.com/tensorflow/tensorflow/pull/36322", "diff_url": "https://github.com/tensorflow/tensorflow/pull/36322.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/36322.patch"}, "body": "* toolchain_prefix and toolchain_root are now filled in the makefile template when supplied\r\n* adding a library compile option to the makefile template"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36320", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36320/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36320/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36320/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36320", "id": 556978768, "node_id": "MDU6SXNzdWU1NTY5Nzg3Njg=", "number": 36320, "title": " How to replace a layer of a compiled Keras' model ", "user": {"login": "JoaoLages", "id": 17574157, "node_id": "MDQ6VXNlcjE3NTc0MTU3", "avatar_url": "https://avatars0.githubusercontent.com/u/17574157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JoaoLages", "html_url": "https://github.com/JoaoLages", "followers_url": "https://api.github.com/users/JoaoLages/followers", "following_url": "https://api.github.com/users/JoaoLages/following{/other_user}", "gists_url": "https://api.github.com/users/JoaoLages/gists{/gist_id}", "starred_url": "https://api.github.com/users/JoaoLages/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JoaoLages/subscriptions", "organizations_url": "https://api.github.com/users/JoaoLages/orgs", "repos_url": "https://api.github.com/users/JoaoLages/repos", "events_url": "https://api.github.com/users/JoaoLages/events{/privacy}", "received_events_url": "https://api.github.com/users/JoaoLages/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2020-01-29T16:34:38Z", "updated_at": "2020-03-11T00:55:56Z", "closed_at": null, "author_association": "NONE", "body": "I'm in tensorflow 1.14\r\nHow can I replace a layer in a Keras model? My new layer has a different output size so set_weights doesn't work."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36319", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36319/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36319/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36319/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36319", "id": 556977850, "node_id": "MDU6SXNzdWU1NTY5Nzc4NTA=", "number": 36319, "title": "How do I create multiple custom AUC metrics, one for each of the outputs, in TensorFlow?", "user": {"login": "nbro", "id": 9349000, "node_id": "MDQ6VXNlcjkzNDkwMDA=", "avatar_url": "https://avatars2.githubusercontent.com/u/9349000?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nbro", "html_url": "https://github.com/nbro", "followers_url": "https://api.github.com/users/nbro/followers", "following_url": "https://api.github.com/users/nbro/following{/other_user}", "gists_url": "https://api.github.com/users/nbro/gists{/gist_id}", "starred_url": "https://api.github.com/users/nbro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nbro/subscriptions", "organizations_url": "https://api.github.com/users/nbro/orgs", "repos_url": "https://api.github.com/users/nbro/repos", "events_url": "https://api.github.com/users/nbro/events{/privacy}", "received_events_url": "https://api.github.com/users/nbro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-01-29T16:33:10Z", "updated_at": "2020-01-31T10:31:34Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code: Yes\r\n- OS Platform and Distribution: macOS Catalina (Version: 10.15.2 (19C57))\r\n- TensorFlow installed from: binary\r\n- TensorFlow version: 2.1\r\n- Python version: 3.7.5\r\n- GPU model and memory: Intel Iris Pro 1536 MB\r\n\r\n**Describe the current behavior**\r\n\r\nI get several errors, which are all described in [this Stack Overflow question](https://stackoverflow.com/q/59958089/3924118). In particular, I get the following error.\r\n\r\n> tensorflow.python.framework.errors_impl.InvalidArgumentError:  assertion failed: [predictions must be >= 0] [Condition x >= y did not hold element-wise:] [x (strided_slice_1:0) = ] [0.590847135 0.745689 0.524460673...] [y (Cast_1/x:0) = ] [0]\r\n\t [[{{node metrics/custom_auc_2/StatefulPartitionedCall/assert_greater_equal/Assert/AssertGuard/else/_79/Assert}}]] [Op:__inference_keras_scratch_graph_1129]\r\n\r\n\r\n**Describe the expected behavior**\r\n\r\nNo error.\r\n\r\n**Code to reproduce the issue**\r\n\r\n```\r\ndef get_model(num_inputs, num_outputs):\r\n    from keras.layers import Dense, Input\r\n    from keras.models import Model\r\n\r\n    inputs = Input((num_inputs,))\r\n    outputs = Dense(num_outputs)(inputs)\r\n    return Model(inputs, outputs)\r\n\r\n\r\ndef get_custom_auc(output):\r\n    import tensorflow as tf\r\n\r\n    # I may also want to use other metrics other than AUC (e.g. BinaryAccuracy).\r\n    auc = tf.metrics.AUC()\r\n\r\n    @tf.function\r\n    def custom_auc(y_true, y_pred):\r\n        y_true = y_true[:, output]\r\n        y_pred = y_pred[:, output]\r\n        auc.update_state(y_true, y_pred)\r\n        return auc.result()\r\n\r\n    custom_auc.__name__ = \"custom_auc_\" + str(output)\r\n    return custom_auc\r\n\r\n\r\ndef train():\r\n    import numpy as np\r\n\r\n    num_inputs = 5\r\n   \r\n    # I want to implement an AUC metric for each of these outputs SEPARATELY.\r\n    num_outputs = 3 \r\n\r\n    num_examples = 10\r\n\r\n    model = get_model(num_inputs, num_outputs)\r\n\r\n    # Create a separate AUC metric for each of the outputs.\r\n    metrics = [get_custom_auc(m) for m in range(num_outputs)]\r\n\r\n    # I want to visualize the metrics for each of the outputs (separately) during training.\r\n    model.compile(loss='mse', metrics=metrics, optimizer='adam')\r\n\r\n    print(model.metrics)\r\n\r\n    # Error occurs when calling fit.\r\n    model.fit(np.random.rand(num_examples, num_inputs), np.zeros((num_examples, num_outputs)))\r\n\r\n\r\nif __name__ == '__main__':\r\n    train()\r\n```\r\n\r\n**Other info / logs**\r\n\r\nIn [this Stack Overflow question](https://stackoverflow.com/q/59958089/3924118), I am describing my problem and my attempts to solve it. Please, have a look at it. I've tried other solutions, including implementing a custom class for this metric, but I am getting other errors (as described in the question). Ultimately, I just want to solve my problem, while keeping the use of `compile` and `fit` to train the model (as I dislike custom training loops and I want to keep it as simple as possible).\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36316", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36316/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36316/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36316/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/36316", "id": 556958160, "node_id": "MDExOlB1bGxSZXF1ZXN0MzY4NjM2NzY2", "number": 36316, "title": "Pad keras.backend.ctc_decode output to consistent shape", "user": {"login": "faustomorales", "id": 9735401, "node_id": "MDQ6VXNlcjk3MzU0MDE=", "avatar_url": "https://avatars1.githubusercontent.com/u/9735401?v=4", "gravatar_id": "", "url": "https://api.github.com/users/faustomorales", "html_url": "https://github.com/faustomorales", "followers_url": "https://api.github.com/users/faustomorales/followers", "following_url": "https://api.github.com/users/faustomorales/following{/other_user}", "gists_url": "https://api.github.com/users/faustomorales/gists{/gist_id}", "starred_url": "https://api.github.com/users/faustomorales/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/faustomorales/subscriptions", "organizations_url": "https://api.github.com/users/faustomorales/orgs", "repos_url": "https://api.github.com/users/faustomorales/repos", "events_url": "https://api.github.com/users/faustomorales/events{/privacy}", "received_events_url": "https://api.github.com/users/faustomorales/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1178505529, "node_id": "MDU6TGFiZWwxMTc4NTA1NTI5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/prtype:bugfix", "name": "prtype:bugfix", "color": "159b2e", "default": false, "description": "PR to fix a bug"}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-29T16:01:14Z", "updated_at": "2020-02-20T09:00:54Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/36316", "html_url": "https://github.com/tensorflow/tensorflow/pull/36316", "diff_url": "https://github.com/tensorflow/tensorflow/pull/36316.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/36316.patch"}, "body": "Closes https://github.com/tensorflow/tensorflow/issues/35799\r\n\r\nThis PR does the following:\r\n\r\n- Fixes the `keras.backend.ctc_decode` function by having it return dense shapes defined by the input shape (with -1 used as the padding value, as documented) rather than by the length of decoded sequences in a given batch\r\n- Edits the associated unit test to expect padded outputs, and\r\n- Updates the function docstring to specify the shape for returned sequences."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36314", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36314/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36314/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36314/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36314", "id": 556889362, "node_id": "MDU6SXNzdWU1NTY4ODkzNjI=", "number": 36314, "title": "Empty step_stats from context.export_run_metadata() in TF 2.1", "user": {"login": "dtim1985", "id": 24571714, "node_id": "MDQ6VXNlcjI0NTcxNzE0", "avatar_url": "https://avatars1.githubusercontent.com/u/24571714?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtim1985", "html_url": "https://github.com/dtim1985", "followers_url": "https://api.github.com/users/dtim1985/followers", "following_url": "https://api.github.com/users/dtim1985/following{/other_user}", "gists_url": "https://api.github.com/users/dtim1985/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtim1985/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtim1985/subscriptions", "organizations_url": "https://api.github.com/users/dtim1985/orgs", "repos_url": "https://api.github.com/users/dtim1985/repos", "events_url": "https://api.github.com/users/dtim1985/events{/privacy}", "received_events_url": "https://api.github.com/users/dtim1985/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 736653459, "node_id": "MDU6TGFiZWw3MzY2NTM0NTk=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:eager", "name": "comp:eager", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "qqfish", "id": 1269299, "node_id": "MDQ6VXNlcjEyNjkyOTk=", "avatar_url": "https://avatars3.githubusercontent.com/u/1269299?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qqfish", "html_url": "https://github.com/qqfish", "followers_url": "https://api.github.com/users/qqfish/followers", "following_url": "https://api.github.com/users/qqfish/following{/other_user}", "gists_url": "https://api.github.com/users/qqfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/qqfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qqfish/subscriptions", "organizations_url": "https://api.github.com/users/qqfish/orgs", "repos_url": "https://api.github.com/users/qqfish/repos", "events_url": "https://api.github.com/users/qqfish/events{/privacy}", "received_events_url": "https://api.github.com/users/qqfish/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "qqfish", "id": 1269299, "node_id": "MDQ6VXNlcjEyNjkyOTk=", "avatar_url": "https://avatars3.githubusercontent.com/u/1269299?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qqfish", "html_url": "https://github.com/qqfish", "followers_url": "https://api.github.com/users/qqfish/followers", "following_url": "https://api.github.com/users/qqfish/following{/other_user}", "gists_url": "https://api.github.com/users/qqfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/qqfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qqfish/subscriptions", "organizations_url": "https://api.github.com/users/qqfish/orgs", "repos_url": "https://api.github.com/users/qqfish/repos", "events_url": "https://api.github.com/users/qqfish/events{/privacy}", "received_events_url": "https://api.github.com/users/qqfish/received_events", "type": "User", "site_admin": false}, {"login": "trisolaran", "id": 33339844, "node_id": "MDQ6VXNlcjMzMzM5ODQ0", "avatar_url": "https://avatars1.githubusercontent.com/u/33339844?v=4", "gravatar_id": "", "url": "https://api.github.com/users/trisolaran", "html_url": "https://github.com/trisolaran", "followers_url": "https://api.github.com/users/trisolaran/followers", "following_url": "https://api.github.com/users/trisolaran/following{/other_user}", "gists_url": "https://api.github.com/users/trisolaran/gists{/gist_id}", "starred_url": "https://api.github.com/users/trisolaran/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/trisolaran/subscriptions", "organizations_url": "https://api.github.com/users/trisolaran/orgs", "repos_url": "https://api.github.com/users/trisolaran/repos", "events_url": "https://api.github.com/users/trisolaran/events{/privacy}", "received_events_url": "https://api.github.com/users/trisolaran/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-01-29T14:14:20Z", "updated_at": "2020-03-14T19:38:34Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Google Colab\r\n\r\nAs sessions are no more available in TF 2 API we are using `context.enable_run_metadata()` and `context.export_run_metadata()` to accure `run_metadata.step_stats` which then we feed to `timeline.Timeliner` to export tracing information about session execution and visualise it usgin chrome://tracing. This approch worked well with TF 2.0 but once we updated to 2.1 `run_metadata.step_stats` appears to be empty.\r\n\r\nHere is code which acquires and prints step stats:\r\nTF 2.0: https://colab.research.google.com/drive/1Jsk7Dn_gTd3xCTTxgQPx3bJvza4oRu1t\r\nTF 2.1: https://colab.research.google.com/drive/1JQ7rqyH5VOAmpHbjMuLGYLwU9dJ7xwk2\r\n\r\nI know that according to docs we should use `summary.trace_on` or `profiler_client .start_tracing` to acquire tracing information, however, there is seems an issue with GPU tracing https://github.com/tensorflow/tensorflow/issues/34844"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36310", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36310/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36310/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36310/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36310", "id": 556857545, "node_id": "MDU6SXNzdWU1NTY4NTc1NDU=", "number": 36310, "title": "Non-OK-status: GpuLaunchKernel( SwapDimension1And2InTensor3UsingTiles<T, NumThreads, TileLongSide, TileShortSide>, ...) Internal: invalid configuration argument when using the tf.keras MaxPooling3D layer", "user": {"login": "lennyerik", "id": 49204493, "node_id": "MDQ6VXNlcjQ5MjA0NDkz", "avatar_url": "https://avatars2.githubusercontent.com/u/49204493?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lennyerik", "html_url": "https://github.com/lennyerik", "followers_url": "https://api.github.com/users/lennyerik/followers", "following_url": "https://api.github.com/users/lennyerik/following{/other_user}", "gists_url": "https://api.github.com/users/lennyerik/gists{/gist_id}", "starred_url": "https://api.github.com/users/lennyerik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lennyerik/subscriptions", "organizations_url": "https://api.github.com/users/lennyerik/orgs", "repos_url": "https://api.github.com/users/lennyerik/repos", "events_url": "https://api.github.com/users/lennyerik/events{/privacy}", "received_events_url": "https://api.github.com/users/lennyerik/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-01-29T13:20:20Z", "updated_at": "2020-02-07T23:53:12Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes, I have written my own model training script.\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):  Linux Ubuntu 19.10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: None\r\n- TensorFlow installed from (source or binary): From binary (pip)\r\n- TensorFlow version (use command below): v2.1.0-rc2-17-ge5bf8de (2.1.0)\r\n- Python version: 3.7.5 (pip version 20.0.2)\r\n- Bazel version (if compiling from source): None\r\n- GCC/Compiler version (if compiling from source): None\r\n- CUDA/cuDNN version: CUDA V10.1.243 (10.1), cuDNN 7.6.5.32-1+cuda10.1\r\n- GPU model and memory: 2x Nvidia GeForce GTX 1070 Ti (8GB VRAM each)\r\n\r\n**Describe the current behavior**\r\nWhen using tensorflow's `tensorflow.distribute.MirrorStrategy` to scale a `tf.keras`-based model with the `tf.keras.layers.MaxPooling3D` layer, tensorflow outputs the error: \r\n`2020-01-29 13:14:07.089464: F ./tensorflow/core/kernels/conv_2d_gpu.h:659] Non-OK-status: GpuLaunchKernel( SwapDimension1And2InTensor3UsingTiles<T, NumThreads, TileLongSide, TileShortSide>, total_tiles_count, NumThreads, 0, d.stream(), input, input_dims, output) status: Internal: invalid configuration argument`, followed by `Aborted (core dumped)` when trying to train the model.\r\nI was able to verify that the MaxPooling3D layer appears to be the issue, because when taking it out of the test script (see \"Code to reproduce the issue\"), the issue does not persist.\r\nThe same issue also occurs when using the, now deprecated, `tf.keras.utils.multi_gpu_model`.\r\nI am yet unsure whether this is a problem in tensorflow itself or any of the used frameworks.\r\nPlease note, that this issue is most likely not related to #30665 or #33696 since they describe an issue related to the internal CUDA kernel `FillPhiloxRandomKernelLaunch<Distribution>` rather than the `SwapDimension1And2InTensor3UsingTiles<T, NumThreads, TileLongSide, TileShortSide>` described here.\r\nI am happy to provide further, more specific information on the used training script or the issue itself, if requested.\r\n\r\n**Describe the expected behavior**\r\nThe model should train normally and not output any errors, as it does when executed without the distributed scope or when reducing the MirroredStrategy to only use one GPU.\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nfrom tensorflow.keras.models import *\r\nfrom tensorflow.keras.layers import *\r\nfrom tensorflow.keras import *\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\nstrat = tf.distribute.MirroredStrategy(devices=['/gpu:0', '/gpu:1'])\r\n\r\nwith strat.scope():\r\n    model = Sequential()\r\n    model.add(MaxPooling3D((1, 2, 2), input_shape=(None, 640, 480, 1)))\r\n    model.add(ConvLSTM2D(16, kernel_size=(3,3)))\r\n    model.add(Flatten())\r\n    model.add(Dense(1))\r\n    model.summary()\r\n    model.compile(loss='mean_squared_error', optimizer='adam', metrics=['acc'])\r\n\r\n    x = np.random.rand(1, 10, 640, 480, 1)\r\n    y = np.random.rand(1, 1)\r\n    model.fit(x=x, y=y, epochs=10)\r\n```\r\n\r\n**Other info / logs**\r\n\r\nFull console output:\r\n```\r\n(venv) [REDACTED]@[REDACTED]:[REDACTED]$ python test.py\r\n2020-01-29 13:32:31.798280: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libnvinfer.so.6\r\n2020-01-29 13:32:31.799195: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libnvinfer_plugin.so.6\r\n2020-01-29 13:32:32.130276: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcuda.so.1\r\n2020-01-29 13:32:32.168392: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2020-01-29 13:32:32.168824: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1555] Found device 0 with properties: \r\npciBusID: 0000:01:00.0 name: GeForce GTX 1070 Ti computeCapability: 6.1\r\ncoreClock: 1.683GHz coreCount: 19 deviceMemorySize: 7.91GiB deviceMemoryBandwidth: 238.66GiB/s\r\n2020-01-29 13:32:32.168866: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2020-01-29 13:32:32.169410: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1555] Found device 1 with properties: \r\npciBusID: 0000:02:00.0 name: GeForce GTX 1070 Ti computeCapability: 6.1\r\ncoreClock: 1.683GHz coreCount: 19 deviceMemorySize: 7.93GiB deviceMemoryBandwidth: 238.66GiB/s\r\n2020-01-29 13:32:32.169467: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.1\r\n2020-01-29 13:32:32.169549: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10\r\n2020-01-29 13:32:32.170673: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcufft.so.10\r\n2020-01-29 13:32:32.170902: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcurand.so.10\r\n2020-01-29 13:32:32.171948: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusolver.so.10\r\n2020-01-29 13:32:32.172544: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusparse.so.10\r\n2020-01-29 13:32:32.172565: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7\r\n2020-01-29 13:32:32.172641: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2020-01-29 13:32:32.172988: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2020-01-29 13:32:32.173522: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2020-01-29 13:32:32.173857: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2020-01-29 13:32:32.174368: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1697] Adding visible gpu devices: 0, 1\r\n2020-01-29 13:32:32.174654: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2020-01-29 13:32:32.198716: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 3699850000 Hz\r\n2020-01-29 13:32:32.199091: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x47afc50 initialized for platform Host (this does not guarantee that XLA will be used). Devices:\r\n2020-01-29 13:32:32.199105: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version\r\n2020-01-29 13:32:32.293103: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2020-01-29 13:32:32.303707: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2020-01-29 13:32:32.304142: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x4845b80 initialized for platform CUDA (this does not guarantee that XLA will be used). Devices:\r\n2020-01-29 13:32:32.304154: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): GeForce GTX 1070 Ti, Compute Capability 6.1\r\n2020-01-29 13:32:32.304159: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (1): GeForce GTX 1070 Ti, Compute Capability 6.1\r\n2020-01-29 13:32:32.304924: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2020-01-29 13:32:32.305196: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1555] Found device 0 with properties: \r\npciBusID: 0000:01:00.0 name: GeForce GTX 1070 Ti computeCapability: 6.1\r\ncoreClock: 1.683GHz coreCount: 19 deviceMemorySize: 7.91GiB deviceMemoryBandwidth: 238.66GiB/s\r\n2020-01-29 13:32:32.305233: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2020-01-29 13:32:32.305503: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1555] Found device 1 with properties: \r\npciBusID: 0000:02:00.0 name: GeForce GTX 1070 Ti computeCapability: 6.1\r\ncoreClock: 1.683GHz coreCount: 19 deviceMemorySize: 7.93GiB deviceMemoryBandwidth: 238.66GiB/s\r\n2020-01-29 13:32:32.305520: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.1\r\n2020-01-29 13:32:32.305527: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10\r\n2020-01-29 13:32:32.305535: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcufft.so.10\r\n2020-01-29 13:32:32.305543: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcurand.so.10\r\n2020-01-29 13:32:32.305551: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusolver.so.10\r\n2020-01-29 13:32:32.305558: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusparse.so.10\r\n2020-01-29 13:32:32.305565: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7\r\n2020-01-29 13:32:32.305593: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2020-01-29 13:32:32.305872: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2020-01-29 13:32:32.306159: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2020-01-29 13:32:32.306438: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2020-01-29 13:32:32.306747: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1697] Adding visible gpu devices: 0, 1\r\n2020-01-29 13:32:32.306766: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.1\r\n2020-01-29 13:32:32.546439: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1096] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2020-01-29 13:32:32.546463: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1102]      0 1 \r\n2020-01-29 13:32:32.546468: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] 0:   N Y \r\n2020-01-29 13:32:32.546471: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1115] 1:   Y N \r\n2020-01-29 13:32:32.546636: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2020-01-29 13:32:32.546935: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2020-01-29 13:32:32.547217: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2020-01-29 13:32:32.547478: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1241] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 6807 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1070 Ti, pci bus id: 0000:01:00.0, compute capability: 6.1)\r\n2020-01-29 13:32:32.547823: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:981] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2020-01-29 13:32:32.548093: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1241] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:1 with 7562 MB memory) -> physical GPU (device: 1, name: GeForce GTX 1070 Ti, pci bus id: 0000:02:00.0, compute capability: 6.1)\r\nModel: \"sequential\"\r\n_________________________________________________________________\r\nLayer (type)                 Output Shape              Param #   \r\n=================================================================\r\nmax_pooling3d (MaxPooling3D) (None, None, 320, 240, 1) 0         \r\n_________________________________________________________________\r\nconv_lst_m2d (ConvLSTM2D)    (None, 318, 238, 16)      9856      \r\n_________________________________________________________________\r\nflatten (Flatten)            (None, 1210944)           0         \r\n_________________________________________________________________\r\ndense (Dense)                (None, 1)                 1210945   \r\n=================================================================\r\nTotal params: 1,220,801\r\nTrainable params: 1,220,801\r\nNon-trainable params: 0\r\n_________________________________________________________________\r\nTrain on 1 samples\r\nEpoch 1/10\r\n2020-01-29 13:32:35.394061: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10\r\n2020-01-29 13:32:35.638536: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7\r\n2020-01-29 13:32:35.639247: F ./tensorflow/core/kernels/conv_2d_gpu.h:659] Non-OK-status: GpuLaunchKernel( SwapDimension1And2InTensor3UsingTiles<T, NumThreads, TileLongSide, TileShortSide>, total_tiles_count, NumThreads, 0, d.stream(), input, input_dims, output) status: Internal: invalid configuration argument\r\nAborted (core dumped)\r\n```\r\n\r\nLast few lines of output with the `TF_CPP_MIN_VLOG_LEVEL=2` environment variable set:\r\n```\r\n2020-01-29 13:42:39.018679: I tensorflow/core/common_runtime/gpu/gpu_device.cc:523] GpuDevice::ComputeHelper scheduled replica_1/Cast op Cast on GPU 1 stream[0]\r\n2020-01-29 13:42:39.018689: I tensorflow/core/framework/log_memory.cc:34] __LOG_MEMORY__ MemoryLogTensorOutput { step_id: -6348371833153678773 kernel_name: \"replica_1/Cast\" tensor { dtype: DT_FLOAT shape { dim { } dim { size: 10 } dim { size: 640 } dim { size: 480 } dim { size: 1 } } } }\r\n2020-01-29 13:42:39.018696: I tensorflow/core/common_runtime/executor.cc:1912] Synchronous kernel done: 167 step -6348371833153678773 {{node replica_1/Cast}} = Cast[DstT=DT_FLOAT, SrcT=DT_DOUBLE, Truncate=false, _XlaHasReferenceVars=false, _device=\"/job:localhost/replica:0/task:0/device:GPU:1\"](cond_3/output/_37) device: /job:localhost/replica:0/task:0/device:GPU:1\r\n2020-01-29 13:42:39.018703: I tensorflow/core/common_runtime/executor.cc:1756] Process node: 168 step -6348371833153678773 {{node replica_1/metrics/acc/remove_squeezable_dimensions/Squeeze}} = Squeeze[T=DT_FLOAT, _XlaHasReferenceVars=false, squeeze_dims=[-1], _device=\"/job:localhost/replica:0/task:0/device:GPU:1\"](replica_1/metrics/acc/Cast) device: /job:localhost/replica:0/task:0/device:GPU:1\r\n2020-01-29 13:42:39.018709: I tensorflow/core/common_runtime/gpu/gpu_device.cc:497] GpuDevice::ComputeHelper replica_1/metrics/acc/remove_squeezable_dimensions/Squeeze op Squeeze on GPU 1 stream[0]\r\n2020-01-29 13:42:39.018720: I tensorflow/core/framework/log_memory.cc:34] __LOG_MEMORY__ MemoryLogTensorAllocation { step_id: -6348371833153678773 kernel_name: \"replica_1/metrics/acc/remove_squeezable_dimensions/Squeeze\" tensor { dtype: DT_FLOAT shape { dim { } } } }\r\n2020-01-29 13:42:39.018726: I tensorflow/core/common_runtime/gpu/gpu_device.cc:523] GpuDevice::ComputeHelper scheduled replica_1/metrics/acc/remove_squeezable_dimensions/Squeeze op Squeeze on GPU 1 stream[0]\r\n2020-01-29 13:42:39.018734: I tensorflow/core/framework/log_memory.cc:34] __LOG_MEMORY__ MemoryLogTensorOutput { step_id: -6348371833153678773 kernel_name: \"replica_1/metrics/acc/remove_squeezable_dimensions/Squeeze\" tensor { dtype: DT_FLOAT shape { dim { } dim { size: 10 } } } }\r\n2020-01-29 13:42:39.018740: I tensorflow/core/common_runtime/executor.cc:1912] Synchronous kernel done: 168 step -6348371833153678773 {{node replica_1/metrics/acc/remove_squeezable_dimensions/Squeeze}} = Squeeze[T=DT_FLOAT, _XlaHasReferenceVars=false, squeeze_dims=[-1], _device=\"/job:localhost/replica:0/task:0/device:GPU:1\"](replica_1/metrics/acc/Cast) device: /job:localhost/replica:0/task:0/device:GPU:1\r\n2020-01-29 13:42:39.018750: I tensorflow/core/common_runtime/executor.cc:1756] Process node: 169 step -6348371833153678773 {{node replica_1/strided_slice}} = StridedSlice[Index=DT_INT32, T=DT_INT32, _XlaHasReferenceVars=false, begin_mask=0, ellipsis_mask=0, end_mask=0, new_axis_mask=0, shrink_axis_mask=1, _device=\"/job:localhost/replica:0/task:0/device:GPU:1\"](replica_1/Shape, replica_1/strided_slice/stack, replica_1/strided_slice/stack_1, replica_1/strided_slice/stack_1) device: /job:localhost/replica:0/task:0/device:GPU:1\r\n2020-01-29 13:42:39.018755: I tensorflow/core/common_runtime/gpu/gpu_device.cc:497] GpuDevice::ComputeHelper replica_1/strided_slice op StridedSlice on GPU 1 stream[0]\r\n2020-01-29 13:42:39.018763: I tensorflow/core/common_runtime/bfc_allocator.cc:227] AllocateRaw gpu_host_bfc  4\r\n2020-01-29 13:42:39.018775: I tensorflow/core/framework/log_memory.cc:34] __LOG_MEMORY__ MemoryLogTensorAllocation { step_id: -6348371833153678773 kernel_name: \"replica_1/strided_slice\" tensor { dtype: DT_INT32 shape { } allocation_description { requested_bytes: 4 allocated_bytes: 256 allocator_name: \"gpu_host_bfc\" allocation_id: 193 has_single_reference: true ptr: 140615866159616 } } }\r\n2020-01-29 13:42:39.018785: I tensorflow/core/common_runtime/gpu/gpu_device.cc:523] GpuDevice::ComputeHelper scheduled replica_1/strided_slice op StridedSlice on GPU 1 stream[0]\r\n2020-01-29 13:42:39.018793: I tensorflow/core/framework/log_memory.cc:34] __LOG_MEMORY__ MemoryLogTensorOutput { step_id: -6348371833153678773 kernel_name: \"replica_1/strided_slice\" tensor { dtype: DT_INT32 shape { } allocation_description { requested_bytes: 4 allocated_bytes: 256 allocator_name: \"gpu_host_bfc\" allocation_id: 193 has_single_reference: true ptr: 140615866159616 } } }\r\n2020-01-29 13:42:39.018801: I tensorflow/core/common_runtime/executor.cc:1912] Synchronous kernel done: 169 step -6348371833153678773 {{node replica_1/strided_slice}} = StridedSlice[Index=DT_INT32, T=DT_INT32, _XlaHasReferenceVars=false, begin_mask=0, ellipsis_mask=0, end_mask=0, new_axis_mask=0, shrink_axis_mask=1, _device=\"/job:localhost/replica:0/task:0/device:GPU:1\"](replica_1/Shape, replica_1/strided_slice/stack, replica_1/strided_slice/stack_1, replica_1/strided_slice/stack_1) device: /job:localhost/replica:0/task:0/device:GPU:1\r\n2020-01-29 13:42:39.018808: I tensorflow/core/framework/log_memory.cc:34] __LOG_MEMORY__ MemoryLogTensorDeallocation { allocation_id: 16619 allocator_name: \"cpu\" }\r\n2020-01-29 13:42:39.018819: I tensorflow/core/common_runtime/executor.cc:1756] Process node: 170 step -6348371833153678773 {{node replica_1/sequential/max_pooling3d/MaxPool3D}} = MaxPool3D[T=DT_FLOAT, _XlaHasReferenceVars=false, data_format=\"NDHWC\", ksize=[1, 1, 2, 2, 1], padding=\"VALID\", strides=[1, 1, 2, 2, 1], _device=\"/job:localhost/replica:0/task:0/device:GPU:1\"](replica_1/Cast) device: /job:localhost/replica:0/task:0/device:GPU:1\r\n2020-01-29 13:42:39.018824: I tensorflow/core/common_runtime/gpu/gpu_device.cc:497] GpuDevice::ComputeHelper replica_1/sequential/max_pooling3d/MaxPool3D op MaxPool3D on GPU 1 stream[0]\r\n2020-01-29 13:42:39.018838: I tensorflow/core/framework/log_memory.cc:34] __LOG_MEMORY__ MemoryLogTensorAllocation { step_id: -6348371833153678773 kernel_name: \"replica_1/sequential/max_pooling3d/MaxPool3D\" tensor { dtype: DT_FLOAT shape { dim { } dim { size: 10 } dim { size: 320 } dim { size: 240 } dim { size: 1 } } } }\r\n2020-01-29 13:42:39.018849: I tensorflow/core/framework/log_memory.cc:34] __LOG_MEMORY__ MemoryLogTensorAllocation { step_id: -6348371833153678773 kernel_name: \"replica_1/sequential/max_pooling3d/MaxPool3D\" tensor { dtype: DT_FLOAT shape { dim { } dim { size: 1 } dim { size: 10 } dim { size: 640 } dim { size: 480 } } } }\r\n2020-01-29 13:42:39.018862: F ./tensorflow/core/kernels/conv_2d_gpu.h:659] Non-OK-status: GpuLaunchKernel( SwapDimension1And2InTensor3UsingTiles<T, NumThreads, TileLongSide, TileShortSide>, total_tiles_count, NumThreads, 0, d.stream(), input, input_dims, output) status: Internal: invalid configuration argument\r\nAborted (core dumped)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36309", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36309/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36309/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36309/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36309", "id": 556857228, "node_id": "MDU6SXNzdWU1NTY4NTcyMjg=", "number": 36309, "title": "test that the full precision model runs on the CPU and GPU, but it takes 800ms to initialize on the GPU, but it only takes a few milliseconds to initialize on the CPU, how should I optimize", "user": {"login": "rzyangKyle", "id": 46556787, "node_id": "MDQ6VXNlcjQ2NTU2Nzg3", "avatar_url": "https://avatars3.githubusercontent.com/u/46556787?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rzyangKyle", "html_url": "https://github.com/rzyangKyle", "followers_url": "https://api.github.com/users/rzyangKyle/followers", "following_url": "https://api.github.com/users/rzyangKyle/following{/other_user}", "gists_url": "https://api.github.com/users/rzyangKyle/gists{/gist_id}", "starred_url": "https://api.github.com/users/rzyangKyle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rzyangKyle/subscriptions", "organizations_url": "https://api.github.com/users/rzyangKyle/orgs", "repos_url": "https://api.github.com/users/rzyangKyle/repos", "events_url": "https://api.github.com/users/rzyangKyle/events{/privacy}", "received_events_url": "https://api.github.com/users/rzyangKyle/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "karimnosseir", "id": 44206880, "node_id": "MDQ6VXNlcjQ0MjA2ODgw", "avatar_url": "https://avatars1.githubusercontent.com/u/44206880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karimnosseir", "html_url": "https://github.com/karimnosseir", "followers_url": "https://api.github.com/users/karimnosseir/followers", "following_url": "https://api.github.com/users/karimnosseir/following{/other_user}", "gists_url": "https://api.github.com/users/karimnosseir/gists{/gist_id}", "starred_url": "https://api.github.com/users/karimnosseir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karimnosseir/subscriptions", "organizations_url": "https://api.github.com/users/karimnosseir/orgs", "repos_url": "https://api.github.com/users/karimnosseir/repos", "events_url": "https://api.github.com/users/karimnosseir/events{/privacy}", "received_events_url": "https://api.github.com/users/karimnosseir/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "karimnosseir", "id": 44206880, "node_id": "MDQ6VXNlcjQ0MjA2ODgw", "avatar_url": "https://avatars1.githubusercontent.com/u/44206880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karimnosseir", "html_url": "https://github.com/karimnosseir", "followers_url": "https://api.github.com/users/karimnosseir/followers", "following_url": "https://api.github.com/users/karimnosseir/following{/other_user}", "gists_url": "https://api.github.com/users/karimnosseir/gists{/gist_id}", "starred_url": "https://api.github.com/users/karimnosseir/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karimnosseir/subscriptions", "organizations_url": "https://api.github.com/users/karimnosseir/orgs", "repos_url": "https://api.github.com/users/karimnosseir/repos", "events_url": "https://api.github.com/users/karimnosseir/events{/privacy}", "received_events_url": "https://api.github.com/users/karimnosseir/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-01-29T13:19:49Z", "updated_at": "2020-02-13T23:41:52Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using):\r\n- Are you willing to contribute it (Yes/No):\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\n**Will this change the current api? How?**\r\n\r\n**Who will benefit with this feature?**\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36306", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36306/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36306/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36306/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36306", "id": 556816761, "node_id": "MDU6SXNzdWU1NTY4MTY3NjE=", "number": 36306, "title": "Gradients do not propagate when iterating over dataset in graph mode", "user": {"login": "terhorst", "id": 18204, "node_id": "MDQ6VXNlcjE4MjA0", "avatar_url": "https://avatars1.githubusercontent.com/u/18204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/terhorst", "html_url": "https://github.com/terhorst", "followers_url": "https://api.github.com/users/terhorst/followers", "following_url": "https://api.github.com/users/terhorst/following{/other_user}", "gists_url": "https://api.github.com/users/terhorst/gists{/gist_id}", "starred_url": "https://api.github.com/users/terhorst/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/terhorst/subscriptions", "organizations_url": "https://api.github.com/users/terhorst/orgs", "repos_url": "https://api.github.com/users/terhorst/repos", "events_url": "https://api.github.com/users/terhorst/events{/privacy}", "received_events_url": "https://api.github.com/users/terhorst/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-29T11:59:57Z", "updated_at": "2020-01-30T05:26:35Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Mac OS X 10.15\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.2.0-dev20200128\r\n- Python version: 3.8\r\n\r\n**Describe the current behavior**\r\nGradients become `None` if iterating over a `tf.data.Dataset` in graph mode. The correct answer is returned in eager mode.\r\n**Describe the expected behavior**\r\nGradients in eager and graph mode should be the same.\r\n\r\n**Code to reproduce the issue**\r\n Example:\r\n\r\n```\r\ndata = tf.range(10, dtype=tf.float32)\r\nds = tf.data.Dataset.from_tensor_slices(data)\r\nu = tf.Variable(1., dtype=tf.float32)\r\n\r\nwith tf.GradientTape(persistent=True) as g:\r\n    loss1 = ds.reduce(tf.constant(0.), lambda x, y: x + (y - u) ** 2)\r\n    loss2 = tf.reduce_sum([(y - u) ** 2 for y in ds.as_numpy_iterator()])\r\nprint(g.gradient(loss1, u))  # returns None\r\nprint(g.gradient(loss2, u))  # returns correct gradient\r\n```\r\nThe same behavior is observed when using `for x in ds: ...` inside of a `@tf.function`.\r\n\r\nGist [here](https://colab.research.google.com/gist/terhorst/b51638f5e9657eb7f44553922c5a93c5/untitled3.ipynb)."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36304", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36304/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36304/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36304/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36304", "id": 556774905, "node_id": "MDU6SXNzdWU1NTY3NzQ5MDU=", "number": 36304, "title": "TensorRT native segment lookup error in calibration mode", "user": {"login": "tfeher", "id": 3671106, "node_id": "MDQ6VXNlcjM2NzExMDY=", "avatar_url": "https://avatars2.githubusercontent.com/u/3671106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tfeher", "html_url": "https://github.com/tfeher", "followers_url": "https://api.github.com/users/tfeher/followers", "following_url": "https://api.github.com/users/tfeher/following{/other_user}", "gists_url": "https://api.github.com/users/tfeher/gists{/gist_id}", "starred_url": "https://api.github.com/users/tfeher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tfeher/subscriptions", "organizations_url": "https://api.github.com/users/tfeher/orgs", "repos_url": "https://api.github.com/users/tfeher/repos", "events_url": "https://api.github.com/users/tfeher/events{/privacy}", "received_events_url": "https://api.github.com/users/tfeher/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1754777628, "node_id": "MDU6TGFiZWwxNzU0Nzc3NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu:tensorrt", "name": "comp:gpu:tensorrt", "color": "ea98ba", "default": false, "description": "Issues specific to TensorRT"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "bixia1", "id": 35820639, "node_id": "MDQ6VXNlcjM1ODIwNjM5", "avatar_url": "https://avatars1.githubusercontent.com/u/35820639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bixia1", "html_url": "https://github.com/bixia1", "followers_url": "https://api.github.com/users/bixia1/followers", "following_url": "https://api.github.com/users/bixia1/following{/other_user}", "gists_url": "https://api.github.com/users/bixia1/gists{/gist_id}", "starred_url": "https://api.github.com/users/bixia1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bixia1/subscriptions", "organizations_url": "https://api.github.com/users/bixia1/orgs", "repos_url": "https://api.github.com/users/bixia1/repos", "events_url": "https://api.github.com/users/bixia1/events{/privacy}", "received_events_url": "https://api.github.com/users/bixia1/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bixia1", "id": 35820639, "node_id": "MDQ6VXNlcjM1ODIwNjM5", "avatar_url": "https://avatars1.githubusercontent.com/u/35820639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bixia1", "html_url": "https://github.com/bixia1", "followers_url": "https://api.github.com/users/bixia1/followers", "following_url": "https://api.github.com/users/bixia1/following{/other_user}", "gists_url": "https://api.github.com/users/bixia1/gists{/gist_id}", "starred_url": "https://api.github.com/users/bixia1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bixia1/subscriptions", "organizations_url": "https://api.github.com/users/bixia1/orgs", "repos_url": "https://api.github.com/users/bixia1/repos", "events_url": "https://api.github.com/users/bixia1/events{/privacy}", "received_events_url": "https://api.github.com/users/bixia1/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-01-29T10:37:10Z", "updated_at": "2020-03-09T00:12:06Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code: yes\r\n- OS Platform and Distribution: Linux Ubuntu 18.04 (docker)\r\n- TensorFlow installed from source\r\n- TensorFlow version: 2.1.0 \r\n- Python version: 3.6.9\r\n- Bazel version: 1.2.1\r\n- GCC/Compiler version : 7.4.0\r\n- CUDA/cuDNN version: 10.2 / 7.6.5\r\n- TensorRT version 7.0\r\n- GPU model and memory: NVIDIA TESLA V100-SXM2-16GB\r\n\r\n**Describe the current behavior**\r\n\r\nUnder specific conditions, there is an error with the native segment lookup for TRTEngineOp. It can happen that we load a native segment that belongs to another graph. In most cases this leads to an error (when the input data is not comptible with the foreign native segment). In an unlucky case, when the input data is compatible, then we have incorrect results.\r\n\r\n**Background**\r\n\r\nTRTEngineOp falls back to execute the native TensorFlow segment in certain cases:\r\n- there is an error in creating the engine, or with its input data\r\n- during calibration https://github.com/tensorflow/tensorflow/blob/e72c2e601aac87faade051d5ca234a2a9b301b2a/tensorflow/compiler/tf2tensorrt/kernels/trt_engine_op.cc#L381\r\n- during optimization profile creation [PR #36080] https://github.com/pooyadavoodi/tensorflow/blob/3ae92a3d220a8d84f2d7885423254aabae6bb99d/tensorflow/compiler/tf2tensorrt/kernels/trt_engine_op.cc#L535\r\n\r\nThe error can occur in the last two case. \r\n\r\nThe native segment is added to the graph here https://github.com/tensorflow/tensorflow/blob/e72c2e601aac87faade051d5ca234a2a9b301b2a/tensorflow/compiler/tf2tensorrt/convert/convert_graph.cc#L530-L552\r\nand later it is looked up using its name in https://github.com/tensorflow/tensorflow/blob/e72c2e601aac87faade051d5ca234a2a9b301b2a/tensorflow/compiler/tf2tensorrt/kernels/trt_engine_op.cc#L247\r\nFor example, in each converted graph TRTEnginoOp_0 has a corresponding native segment TRTEngineOp_0_native_segment.\r\n\r\n\r\n**Describe the expected behavior**\r\n\r\nThe expected behavior is to load the correct native segment, the one which corresponds to the TRTEngineOp being executed.\r\n\r\nDuring normal execution the graph of the previous test should be garbage collected, so it cannot happen that we load an incorrect native segment.\r\n\r\nWe suspect that manipulating the graph during calibration (or build mode) introduces a circular reference that cause the garbage collector to not delete the graph. It is still not clear how does this native segment appear in subsequent tests' graph. The graph is owned by the converter, therefore each test is supposed to have a separate graph.\r\n\r\n**Code to reproduce the issue**\r\nTo reproduce this error, we need to use either\r\n- calibration (in the current master branch) https://github.com/tensorflow/tensorflow/blob/4152ed672ee107fc52f815443bc4601999f42ded/tensorflow/python/compiler/tensorrt/trt_convert.py#L1067-L1087 or\r\n- build mode with profiles (as proposed in PR #36080) https://github.com/pooyadavoodi/tensorflow/blob/3ae92a3d220a8d84f2d7885423254aabae6bb99d/tensorflow/python/compiler/tensorrt/trt_convert.py#L1102-L1168\r\n\r\nThe problem is illustrated in the branch https://github.com/tfeher/tensorflow/tree/native_segment_bug This branch extends the test coverage of tf_trt_integration tests by [enabling calibration test](https://github.com/tfeher/tensorflow/commit/3c0d9e8da189bc8dc4e3020204e3080f5fa0d227) in V2 mode. The calibration needs to execute the native segment. \r\n\r\nA simple test file is prepared to reproduce the problem:\r\nhttps://github.com/tfeher/tensorflow/blob/native_segment_bug/tensorflow/python/compiler/tensorrt/test/native_segment_test.py\r\n\r\nThe test file defines two tests: AddTest and MulTest, the first one takes one tensor as input, the second takes two tensors. If we call the tests individually, then they work:\r\n```\r\npython tensorflow/python/compiler/tensorrt/test/native_segment_test.py AddTest # works\r\npython tensorflow/python/compiler/tensorrt/test/native_segment_test.py MulTest # works\r\n```\r\nWhen we try to execute both test then it fails:\r\n```\r\npython tensorflow/python/compiler/tensorrt/test/native_segment_test.py\r\n...\r\nERROR: testTfTrtV2_OfflineConversion_DynamicEngine_INT8_UseCalibration (__main__.MulTest)\r\ntestTfTrtV2_OfflineConversion_DynamicEngine_INT8_UseCalibration (__main__.MulTest)\r\n...\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError:  Expects 1 arguments, but 2 is provided\r\n         [[node TRTEngineOp_0 (defined at /usr/lib/python3.6/unittest/case.py:605) ]] [Op:__inference_pruned_2770]\r\n```\r\nThe `InvalidArgumentError` apperas, because AddTest's native segment was loaded instead of MulTest's native segment. This can be confirmed if we add a printout \r\n`VLOG(2) << SummarizeGraphDef(segment_graph_def_)` to TRTEngineOp's constructor.\r\n\r\nThe error can manifest different ways (but it is always caused by executing the native segment of a different graph):\r\n- Segfault\r\n- Out or range error\r\n- Mismatched value if the foreign native segment is compatible with the input data. An example for that: https://github.com/tfeher/tensorflow/blob/native_segment_bug/tensorflow/python/compiler/tensorrt/test/native_segment_test2.py\r\n- error due to incorrect data type\r\n\r\nTagging @pooyadavoodi @bixia1 and @aaroey "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36303", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36303/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36303/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36303/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36303", "id": 556758442, "node_id": "MDU6SXNzdWU1NTY3NTg0NDI=", "number": 36303, "title": "tensorboard installation issue ", "user": {"login": "kuppas", "id": 28995999, "node_id": "MDQ6VXNlcjI4OTk1OTk5", "avatar_url": "https://avatars1.githubusercontent.com/u/28995999?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kuppas", "html_url": "https://github.com/kuppas", "followers_url": "https://api.github.com/users/kuppas/followers", "following_url": "https://api.github.com/users/kuppas/following{/other_user}", "gists_url": "https://api.github.com/users/kuppas/gists{/gist_id}", "starred_url": "https://api.github.com/users/kuppas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kuppas/subscriptions", "organizations_url": "https://api.github.com/users/kuppas/orgs", "repos_url": "https://api.github.com/users/kuppas/repos", "events_url": "https://api.github.com/users/kuppas/events{/privacy}", "received_events_url": "https://api.github.com/users/kuppas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 284285184, "node_id": "MDU6TGFiZWwyODQyODUxODQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tensorboard", "name": "comp:tensorboard", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-01-29T10:07:03Z", "updated_at": "2020-03-15T00:43:22Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution: Linux Ubuntu 16.04\r\n- TensorFlow installed from (source or binary): terminal\r\n- TensorFlow version: tensorflow                         2.1.0              \r\n                                   tensorflow-estimator               2.1.0\r\n- Python version: 3.6.7\r\n\r\n\r\n\r\n\r\n**Describe the problem**\r\nam done by following steps in this link https://www.tensorflow.org/tensorboard/get_started  but it gives an error message like that \r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\ntensorboard --logdir logs/fit\r\n\r\n\r\n**Any other info / logs**\r\n2020-01-29 15:42:56.124384: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libnvinfer.so.6'; dlerror: libnvinfer.so.6: cannot open shared object file: No such file or directory\r\n2020-01-29 15:42:56.124520: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libnvinfer_plugin.so.6'; dlerror: libnvinfer_plugin.so.6: cannot open shared object file: No such file or directory\r\n2020-01-29 15:42:56.124541: W tensorflow/compiler/tf2tensorrt/utils/py_utils.cc:30] Cannot dlopen some TensorRT libraries. If you would like to use Nvidia GPU with TensorRT, please make sure the missing libraries mentioned above are installed properly.\r\nTraceback (most recent call last):\r\n  File \"/home/kuppa/anaconda3/bin/tensorboard\", line 8, in <module>\r\n    sys.exit(run_main())\r\n  File \"/home/kuppa/anaconda3/lib/python3.6/site-packages/tensorboard/main.py\", line 59, in run_main\r\n    default.get_plugins() + default.get_dynamic_plugins(),\r\n  File \"/home/kuppa/anaconda3/lib/python3.6/site-packages/tensorboard/default.py\", line 115, in get_dynamic_plugins\r\n    for entry_point in pkg_resources.iter_entry_points('tensorboard_plugins')\r\n  File \"/home/kuppa/anaconda3/lib/python3.6/site-packages/tensorboard/default.py\", line 115, in <listcomp>\r\n    for entry_point in pkg_resources.iter_entry_points('tensorboard_plugins')\r\n  File \"/home/kuppa/anaconda3/lib/python3.6/site-packages/pkg_resources/__init__.py\", line 2443, in load\r\n    self.require(*args, **kwargs)\r\n  File \"/home/kuppa/anaconda3/lib/python3.6/site-packages/pkg_resources/__init__.py\", line 2466, in require\r\n    items = working_set.resolve(reqs, env, installer, extras=self.extras)\r\n  File \"/home/kuppa/anaconda3/lib/python3.6/site-packages/pkg_resources/__init__.py\", line 792, in resolve\r\n    raise VersionConflict(dist, req).with_context(dependent_req)\r\npkg_resources.VersionConflict: (grpcio 1.16.1 (/home/kuppa/anaconda3/lib/python3.6/site-packages), Requirement.parse('grpcio>=1.24.3'))"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36300", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36300/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36300/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36300/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36300", "id": 556714170, "node_id": "MDU6SXNzdWU1NTY3MTQxNzA=", "number": 36300, "title": "Error message is unclear when we failed to load tflite model.", "user": {"login": "w4-hyunseok", "id": 30993354, "node_id": "MDQ6VXNlcjMwOTkzMzU0", "avatar_url": "https://avatars0.githubusercontent.com/u/30993354?v=4", "gravatar_id": "", "url": "https://api.github.com/users/w4-hyunseok", "html_url": "https://github.com/w4-hyunseok", "followers_url": "https://api.github.com/users/w4-hyunseok/followers", "following_url": "https://api.github.com/users/w4-hyunseok/following{/other_user}", "gists_url": "https://api.github.com/users/w4-hyunseok/gists{/gist_id}", "starred_url": "https://api.github.com/users/w4-hyunseok/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/w4-hyunseok/subscriptions", "organizations_url": "https://api.github.com/users/w4-hyunseok/orgs", "repos_url": "https://api.github.com/users/w4-hyunseok/repos", "events_url": "https://api.github.com/users/w4-hyunseok/events{/privacy}", "received_events_url": "https://api.github.com/users/w4-hyunseok/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2020-01-29T08:38:56Z", "updated_at": "2020-03-10T01:10:13Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): \r\n   Darwin 19.2.0 \r\n   Android Pixel2 API 29\r\n- TensorFlow installed from (source or binary):\r\n   binary (pip)\r\n- TensorFlow version (or github SHA if from source):\r\n   1.15.0\r\n\r\n**Provide the text output from tflite_convert**\r\ntflite_convert succeeded without any error. \r\n```\r\n$ tflite_convert --saved_model_dir ./tts/exported/more-kss-spk10-tflite \\\r\n    --output_file ./tts/tflite/more-kss-spk10.tflite\r\n\r\n...\r\nWARNING:tensorflow:From /Users/hyunseok/.venv/py36/lib/python3.6/site-packages/tensorflow_core/lite/python/util.py:208: convert_variables_to_constants (from tensorflow.python.framework.graph_util_impl) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse `tf.compat.v1.graph_util.convert_variables_to_constants`\r\nW0129 17:08:51.578040 140734888230336 deprecation.py:323] From /Users/hyunseok/.venv/py36/lib/python3.6/site-packages/tensorflow_core/lite/python/util.py:208: convert_variables_to_constants (from tensorflow.python.framework.graph_util_impl) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse `tf.compat.v1.graph_util.convert_variables_to_constants`\r\nWARNING:tensorflow:From /Users/hyunseok/.venv/py36/lib/python3.6/site-packages/tensorflow_core/python/framework/graph_util_impl.py:277: extract_sub_graph (from tensorflow.python.framework.graph_util_impl) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse `tf.compat.v1.graph_util.extract_sub_graph`\r\nW0129 17:08:51.578234 140734888230336 deprecation.py:323] From /Users/hyunseok/.venv/py36/lib/python3.6/site-packages/tensorflow_core/python/framework/graph_util_impl.py:277: extract_sub_graph (from tensorflow.python.framework.graph_util_impl) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse `tf.compat.v1.graph_util.extract_sub_graph`\r\nINFO:tensorflow:Froze 198 variables.\r\nI0129 17:08:53.582584 140734888230336 graph_util_impl.py:334] Froze 198 variables.\r\nINFO:tensorflow:Converted 198 variables to const ops.\r\nI0129 17:08:53.853986 140734888230336 graph_util_impl.py:394] Converted 198 variables to const ops.\r\nWARNING:tensorflow:From /Users/hyunseok/.venv/py36/lib/python3.6/site-packages/tensorflow_core/lite/python/util.py:210: remove_training_nodes (from tensorflow.python.framework.graph_util_impl) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse `tf.compat.v1.graph_util.remove_training_nodes`\r\nW0129 17:11:05.991335 140734888230336 deprecation.py:323] From /Users/hyunseok/.venv/py36/lib/python3.6/site-packages/tensorflow_core/lite/python/util.py:210: remove_training_nodes (from tensorflow.python.framework.graph_util_impl) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse `tf.compat.v1.graph_util.remove_training_nodes`\r\n```\r\n\r\nBut when I tried to load this model on both my local machine and android, I got the below message. \r\n```\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 6, in <module>\r\n    interpreter = tf.lite.Interpreter(model_path='more-kss-spk10.tflite')\r\n  File \"/Users/hyunseok/.venv/py36/lib/python3.6/site-packages/tensorflow_core/lite/python/interpreter.py\", line 206, in __init__\r\n    model_path))\r\nValueError: Tensor 2711 is a variable tensor with buffer. It's not supported now.\r\n```\r\nI can't guess the Tensor 2711. \r\nMay I delete all get_variable or tf.Variable statements on my model? \r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36298", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36298/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36298/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36298/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36298", "id": 556698330, "node_id": "MDU6SXNzdWU1NTY2OTgzMzA=", "number": 36298, "title": "tf.keras loss/metric argument/return specification", "user": {"login": "YusukeSuzuki", "id": 657060, "node_id": "MDQ6VXNlcjY1NzA2MA==", "avatar_url": "https://avatars3.githubusercontent.com/u/657060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YusukeSuzuki", "html_url": "https://github.com/YusukeSuzuki", "followers_url": "https://api.github.com/users/YusukeSuzuki/followers", "following_url": "https://api.github.com/users/YusukeSuzuki/following{/other_user}", "gists_url": "https://api.github.com/users/YusukeSuzuki/gists{/gist_id}", "starred_url": "https://api.github.com/users/YusukeSuzuki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YusukeSuzuki/subscriptions", "organizations_url": "https://api.github.com/users/YusukeSuzuki/orgs", "repos_url": "https://api.github.com/users/YusukeSuzuki/repos", "events_url": "https://api.github.com/users/YusukeSuzuki/events{/privacy}", "received_events_url": "https://api.github.com/users/YusukeSuzuki/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-29T07:58:34Z", "updated_at": "2020-01-29T19:26:50Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 2.1\r\n- Are you willing to contribute it (Yes/No): No\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nThis suggestion eases custom loss and custom metrics implementation restrictions. And it removes dirty/tricky codes for text/TensorBoard logging of single-output-multiple-loss-func from user application.\r\n\r\nLosses for `Model.compile()` arguments\r\n\r\n```python\r\n# current befavior\r\n\r\n# model with single output\r\nmodel.compile(.., loss=func, ..) # OK\r\nmodel.compile(.., loss=[func], ..) # OK\r\nmodel.compile(.., loss=[func1, func2], ..) # Error for single output\r\n# model with two outputs\r\nmodel.compile(.., loss=func, ..) # OK\r\nmodel.compile(.., loss=[func1_for_out1, func2_for_out2], ..) # OK\r\nmodel.compile(.., loss=[(func1_for_out1, func2_for_out1), func3_for_out2], ..) # Error\r\n```\r\n\r\n```python\r\n# behavior which I sugest\r\n\r\n# model with single output\r\nmodel.compile(.., loss=[func1, func2], ..)\r\n# OK, func1 and func2 are applied to single output with weight [1., 1.]\r\n\r\n# model with two outputs\r\nmodel.compile(.., loss=[(func1_for_out1, func2_for_out1), func3_for_out2], ..)\r\n# OK, func1 and func2 are applied to output1. func3 is applied to output2\r\n# default weight is [(1., 1.), 1.]\r\n# and joint loss is 1. * func1_for_out1(out1) + 1. * func2_for_out1(out1) + 1. * func3_for_out2(out2)\r\n```\r\n\r\nLoss function return value\r\n\r\n```python\r\n# current befavior\r\ndef my_loss_func(..):\r\n  return [loss1, loss2] # Error\r\n  return (loss1, loss2) # Error\r\n  return dict(my_loss_name1=loss1, my_loss_name2=loss2) # Error\r\n```\r\n\r\n```python\r\n# behavior which I sugest\r\n# loss function can return list or tuple\r\ndef my_loss_func(..):\r\n  return [loss1, loss2]\r\n  return (loss1, loss2)\r\n\r\nmodel.compile(.., loss=[my_loss_func], loss_weights=[1.2])\r\n# joint loss = loss1 * 1.2 / 2 + loss2 * 1.2 / 2\r\n# and loss names on logging are [my_loss_func_1, my_loss_func_2]\r\n\r\n# loss function can return dict\r\ndef my_loss_func(..):\r\n  return dict(my_loss_name1=loss1, my_loss_name2=loss2) # Error\r\n\r\nmodel.compile(.., loss=[my_loss_func], loss_weights=[1.2])\r\n# joint loss = loss1 * 1.2 / 2 + loss2 * 1.2 / 2\r\n# and loss names on logging are [my_loss_name1, my_loss_name2]\r\n```\r\n\r\nMetrics\r\n\r\n```python\r\n# current befavior\r\n# Metric function can't return list or tuple or dict in current version.\r\ndef my_metrics(..):\r\n  return [metric1, metric2] # Error\r\n  return (metric1, metric2) # Error\r\n  return dict(metric_name_1=metric1, metric_name_2=metric2) # Error\r\n```\r\n\r\n```python\r\n# behavior which I sugest\r\n# Metric function can return list or tuple or dict, and metric names are set properly.\r\ndef my_metrics(..):\r\n  return [metric1, metric2] # OK, with names [my_metrics_1, my_metrics_2]\r\n  return (metric1, metric2) # OK, with names  [my_metrics_1, my_metrics_2]\r\n  return dict(metric_name_1=metric1, metric_name_2=metric2) # OK, with names  [metric_name_1, metric_name_2]\r\n```\r\n\r\n**Will this change the current api? How?**\r\n\r\nNo. Old codes will run without behavior changes.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nThis change benefits engineer who is using joint loss and want to log losses separately.\r\nAnd it benefits engineer who want to calculate multiple losses in single function for performance or code simplification.\r\nAnd it benefits engineer who want to calculate multiple metrics in single function for performance or code simplification.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36293", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36293/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36293/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36293/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36293", "id": 556560172, "node_id": "MDU6SXNzdWU1NTY1NjAxNzI=", "number": 36293, "title": "Decouple RaggedStructure from RaggedTensor", "user": {"login": "jackd", "id": 659115, "node_id": "MDQ6VXNlcjY1OTExNQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/659115?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackd", "html_url": "https://github.com/jackd", "followers_url": "https://api.github.com/users/jackd/followers", "following_url": "https://api.github.com/users/jackd/following{/other_user}", "gists_url": "https://api.github.com/users/jackd/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackd/subscriptions", "organizations_url": "https://api.github.com/users/jackd/orgs", "repos_url": "https://api.github.com/users/jackd/repos", "events_url": "https://api.github.com/users/jackd/events{/privacy}", "received_events_url": "https://api.github.com/users/jackd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-01-29T00:00:01Z", "updated_at": "2020-01-30T22:39:36Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- TensorFlow version (you are using): 2\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nI've been doing a lot of work with `RaggedTensor`s since their introduction, and one thing that irks me is that a lot of the methods (`row_lengths`, `row_starts`, `value_rowids` etc) work entirely on their row structure, and independently of the values. The memoization features of the `RaggedTensor` class is very convenient, but those memoized values aren't shared between `RaggedTensor`s that share the same row structure but have different values. As an example\r\n\r\n```python\r\nx = tf.RaggedTensor.from_row_splits(tf.range(5), [0, 2, 5])\r\ny = 2 * x\r\nprint(x.row_splits is y.row_splits)              # True\r\nprint(x.row_lengths() is y.row_lengths())  # False\r\n```\r\nA separate `RaggedStructure` class which handles memoization has two main benefits:\r\n\r\n1. Easier memoization across different `RaggedTensor`s\r\n2. Simpler interface to structure manipulation functions without `value`s\r\n\r\n**Will this change the current api? How?**\r\nThis could be done with no changes to the current API. However, minimal changes - like changing the existing `tf.RaggedTensor.__init__` method, which isn't meant to be used externally anyway - might make things simpler, and exposing a new property (`ragged_structure`) would be helpful in many cases. I would suggest something like the following.\r\n\r\n```python\r\nclass RaggedTensor(CompositeTensor):\r\n  # changed constructor, publicly usable.\r\n  def __init__(self, values, ragged_structure):\r\n    self._values = values\r\n    self._ragged_structure = ragged_structure\r\n    # error checks\r\n    ...\r\n\r\n  # added property\r\n  @property\r\n  def ragged_structure(self):\r\n    return self._ragged_structure \r\n  \r\n  # redirect row_lengths, row_starts, value_rowids etc. to structure\r\n  def row_lengths(self):\r\n    return self.ragged_structure.row_lengths()\r\n\r\n  def with_values(self, values):\r\n    return RaggedTensor(values, self.ragged_structure)\r\n\r\n# new class\r\nclass RaggedStructure(CompositeTensor):\r\n  def __init__(self, row_splits, cached_row_lengths=None, cached_value_rowids=None, cached_nrows=None, internal=False):\r\n    # most of current tf.RaggedTensor.__init__\r\n    ...\r\n\r\n  @classmethod\r\n  def from_row_lengths(cls, row_lengths):\r\n    # most of current tf.RaggedTensor.from_row_lengths\r\n    ...\r\n\r\n  # cache here\r\n  def row_lengths(self, row_lengths):\r\n    if self._cached_row_lengths is None:\r\n      ...\r\n    return self._cached_row_lengths\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36288", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36288/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36288/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36288/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36288", "id": 556389683, "node_id": "MDU6SXNzdWU1NTYzODk2ODM=", "number": 36288, "title": "Go API performance concerns with NewTensor & Value", "user": {"login": "philpearl", "id": 456668, "node_id": "MDQ6VXNlcjQ1NjY2OA==", "avatar_url": "https://avatars3.githubusercontent.com/u/456668?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philpearl", "html_url": "https://github.com/philpearl", "followers_url": "https://api.github.com/users/philpearl/followers", "following_url": "https://api.github.com/users/philpearl/following{/other_user}", "gists_url": "https://api.github.com/users/philpearl/gists{/gist_id}", "starred_url": "https://api.github.com/users/philpearl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philpearl/subscriptions", "organizations_url": "https://api.github.com/users/philpearl/orgs", "repos_url": "https://api.github.com/users/philpearl/repos", "events_url": "https://api.github.com/users/philpearl/events{/privacy}", "received_events_url": "https://api.github.com/users/philpearl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2020-01-28T18:30:16Z", "updated_at": "2020-02-08T15:17:12Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "The Go NewTensor call will unnecessarly incur a large number of allocations (e.g. >20,000 for a 100x100x100 tensor). There are similar issues with .Value. It's possible to work around the issue by using ReadTensor and WriteTensorTo.\r\n\r\nI'm basically wondering if a PR to fix this would stand a chance of being accepted? If there's a chance I might have a go. The 'best' fix would likely use unsafe - would the maintainers be squeamish about that?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36281", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36281/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36281/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36281/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36281", "id": 556097662, "node_id": "MDU6SXNzdWU1NTYwOTc2NjI=", "number": 36281, "title": "unsupported operand type(s) for *: 'int' and 'NoneType' in training_v2", "user": {"login": "Flamefire", "id": 309017, "node_id": "MDQ6VXNlcjMwOTAxNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/309017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Flamefire", "html_url": "https://github.com/Flamefire", "followers_url": "https://api.github.com/users/Flamefire/followers", "following_url": "https://api.github.com/users/Flamefire/following{/other_user}", "gists_url": "https://api.github.com/users/Flamefire/gists{/gist_id}", "starred_url": "https://api.github.com/users/Flamefire/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Flamefire/subscriptions", "organizations_url": "https://api.github.com/users/Flamefire/orgs", "repos_url": "https://api.github.com/users/Flamefire/repos", "events_url": "https://api.github.com/users/Flamefire/events{/privacy}", "received_events_url": "https://api.github.com/users/Flamefire/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-01-28T09:56:44Z", "updated_at": "2020-03-14T14:37:09Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "\r\n**System information**\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): 2.1.0\r\n\r\nRunning a simple evaluation of a Lenet Model with MNIST dataset (from TFDS) with a large batch size (e.g. due to using many workers) leads to \r\n\r\n```\r\ntensorflow.python.framework.errors_impl.OutOfRangeError: 2 root error(s) found.\r\n  (0) Out of range:  End of sequence\r\n\t [[node IteratorGetNext_2 (defined at git/tensorflow_tests/train_distributed.py:212) ]]\r\n\t [[metrics/accuracy/div_no_nan/allreduce_1/CollectiveReduce/_70]]\r\n  (1) Out of range:  End of sequence\r\n\t [[node IteratorGetNext_2 (defined at git/tensorflow_tests/train_distributed.py:212) ]]\r\n```\r\n\r\nand\r\n\r\n```\r\nFile \"/scratch/ws/s3248973-EasyBuild/easybuild-haswell/software/TensorFlow/2.1.0-fosscuda-2019b-Python-3.7.4/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_v2.py\", line 152, in run_one_epoch\r\n    total_epochs * steps_per_epoch))\r\nTypeError: unsupported operand type(s) for *: 'int' and 'NoneType'\r\n```\r\n\r\nThe bug is pretty obvious in https://github.com/tensorflow/tensorflow/blob/7b0cfadc895d74aec99875a23ed296506c98e88c/tensorflow/python/keras/engine/training_v2.py#L152 where `steps_per_epoch` is used although it can be (and is) None, see also https://github.com/tensorflow/tensorflow/blob/7b0cfadc895d74aec99875a23ed296506c98e88c/tensorflow/python/keras/engine/training_v2.py#L135"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36278", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36278/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36278/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36278/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36278", "id": 556053377, "node_id": "MDU6SXNzdWU1NTYwNTMzNzc=", "number": 36278, "title": "Support tf.SparseTensor and tf.RaggedTensor in tf.py_function", "user": {"login": "VitaliKaiser", "id": 3307910, "node_id": "MDQ6VXNlcjMzMDc5MTA=", "avatar_url": "https://avatars2.githubusercontent.com/u/3307910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VitaliKaiser", "html_url": "https://github.com/VitaliKaiser", "followers_url": "https://api.github.com/users/VitaliKaiser/followers", "following_url": "https://api.github.com/users/VitaliKaiser/following{/other_user}", "gists_url": "https://api.github.com/users/VitaliKaiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/VitaliKaiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VitaliKaiser/subscriptions", "organizations_url": "https://api.github.com/users/VitaliKaiser/orgs", "repos_url": "https://api.github.com/users/VitaliKaiser/repos", "events_url": "https://api.github.com/users/VitaliKaiser/events{/privacy}", "received_events_url": "https://api.github.com/users/VitaliKaiser/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-01-28T08:26:10Z", "updated_at": "2020-01-29T03:39:42Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): tensorflow==2.1.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n`tf.py_function` executes eagerly and therefore does support to mix python and TF functions.\r\nCreating instances of  tf.SparseTensor and tf.RaggedTensor is not a problem.\r\nBut if there are in the return statement tf.pyfunction crashes, because I assume its expecting a tf.Tensor.\r\n\r\nExample:\r\n\r\n````\r\ndef eager_py_ragged(arg1_eager):\r\n\r\n    return tf.RaggedTensor.from_tensor(arg1_eager, dtype=tf.int32)\r\n\r\narg1_const = tf.constant(1, dtype=tf.int32)\r\n\r\ntf.py_function(eager_py_sparse, [arg1_const], [tf.int32])\r\n# tf.python.framework.errors_impl.InvalidArgumentError:\r\n# ValueError: Attempt to convert a value (<tensorflow.python.framework.sparse_tensor.SparseTensor object at X)\r\n# with an unsupported type (<class 'tensorflow.python.framework.sparse_tensor.SparseTensor'>) to a Tensor.\r\n````\r\n\r\n\r\n**Will this change the current api? How?**\r\nI dont think so.\r\n**Who will benefit with this feature?**\r\nPeople building their `tf.data` pipeline with `tf.pyfunction`.\r\n**Any Other info.**\r\nI will create more `tf.py_function` related stories. Since this are distinct features from my POV, there multiple feature requests. I hope this is ok."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36276", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36276/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36276/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36276/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36276", "id": 556047747, "node_id": "MDU6SXNzdWU1NTYwNDc3NDc=", "number": 36276, "title": "Support nested structure as return value in tf.py_function.", "user": {"login": "VitaliKaiser", "id": 3307910, "node_id": "MDQ6VXNlcjMzMDc5MTA=", "avatar_url": "https://avatars2.githubusercontent.com/u/3307910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VitaliKaiser", "html_url": "https://github.com/VitaliKaiser", "followers_url": "https://api.github.com/users/VitaliKaiser/followers", "following_url": "https://api.github.com/users/VitaliKaiser/following{/other_user}", "gists_url": "https://api.github.com/users/VitaliKaiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/VitaliKaiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VitaliKaiser/subscriptions", "organizations_url": "https://api.github.com/users/VitaliKaiser/orgs", "repos_url": "https://api.github.com/users/VitaliKaiser/repos", "events_url": "https://api.github.com/users/VitaliKaiser/events{/privacy}", "received_events_url": "https://api.github.com/users/VitaliKaiser/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1478826728, "node_id": "MDU6TGFiZWwxNDc4ODI2NzI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:core", "name": "comp:core", "color": "024391", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-28T08:12:28Z", "updated_at": "2020-01-29T18:23:51Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): tensorflow==2.1.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nSupport for return values in nested structures as in `tf.data.Dataset.from_generator`.\r\nI cant return any nested structure as, e.g., a dict or namedtuple.\r\n\r\nSee example:\r\n \r\n````python\r\narg1_const = tf.constant([0, 1], dtype=tf.int32)\r\ndef eager_py_dict(arg1):\r\n    return {0: arg1}\r\n\r\ntf.py_function(eager_py_dict, [arg1_const], {0: tf.int32})\r\n# Returns:\r\n# tensorflow.python.eager.core._FallbackException: Expecting a DType.dtype for attr Tout, got dict\r\n````\r\n\r\n**Will this change the current api? How?**\r\nSupporting nesting structures.\r\n\r\n**Who will benefit with this feature?**\r\nPeople building their `tf.data` pipeline with `tf.pyfunction`.\r\n\r\n**Any Other info.**\r\nI will create more `tf.py_function` related stories. Since this are distinct features from my POV, there multiple feature requests. I hope this is ok.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36274", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36274/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36274/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36274/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36274", "id": 556035801, "node_id": "MDU6SXNzdWU1NTYwMzU4MDE=", "number": 36274, "title": "Support setting shapes directly in tf.py_function", "user": {"login": "VitaliKaiser", "id": 3307910, "node_id": "MDQ6VXNlcjMzMDc5MTA=", "avatar_url": "https://avatars2.githubusercontent.com/u/3307910?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VitaliKaiser", "html_url": "https://github.com/VitaliKaiser", "followers_url": "https://api.github.com/users/VitaliKaiser/followers", "following_url": "https://api.github.com/users/VitaliKaiser/following{/other_user}", "gists_url": "https://api.github.com/users/VitaliKaiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/VitaliKaiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VitaliKaiser/subscriptions", "organizations_url": "https://api.github.com/users/VitaliKaiser/orgs", "repos_url": "https://api.github.com/users/VitaliKaiser/repos", "events_url": "https://api.github.com/users/VitaliKaiser/events{/privacy}", "received_events_url": "https://api.github.com/users/VitaliKaiser/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-28T07:41:20Z", "updated_at": "2020-01-28T13:24:00Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): tensorflow==2.1.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nIn comparison to `tf.data.Dataset.from_generator`, `tf.py_function` does not take an (optional) shape argument. Therefore all returned tensors have unknown shape. Looking up the docu I realized you can solve this by setting `tf.Tensor.set_shape`. It would be more convienent if  `tf.py_function` would support this directly.\r\nTherefore I wrote a wrapper for myself:\r\n\r\n```\r\ndef py_function2(\r\n    func: Callable,\r\n    inp: tf.Tensor,\r\n    tOut: Iterable[tf.dtypes.DType],\r\n    shapes: Iterable[Optional[Shape]] = None,\r\n    name: str = None,\r\n) -> Union[tf.Tensor, Iterable[tf.Tensor]]:\r\n    result = tf.py_function(func, inp, tOut, name=None)\r\n\r\n    if shapes is not None:\r\n        # Set shape of the output tensors.\r\n        for tensor, shape in zip(result, shapes):\r\n            if shape is not None:\r\n                tensor.set_shape(tf.TensorShape(shape))\r\n\r\n    return result\r\n````\r\n\r\nNote: This is not working for nested structures, which are on the other hand currently not supported by  `tf.py_function` anyway. But I will create another FR for this.\r\n\r\n\r\n**Will this change the current api? How?**\r\nYes, `tf.py_function` would get another optional argument.\r\n\r\n**Who will benefit with this feature?**\r\nPeople building their `tf.data` pipeline with `tf.pyfunction`.\r\n**Any Other info.**\r\nI will create more `tf.py_function` related stories. Since this are distinct features from my POV, there multiple feature requests. I hope this is ok."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36271", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36271/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36271/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36271/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/36271", "id": 555981637, "node_id": "MDExOlB1bGxSZXF1ZXN0MzY3ODI0Nzkw", "number": 36271, "title": "Clarify conversion used for Quantization", "user": {"login": "PrashantDandriyal", "id": 46529961, "node_id": "MDQ6VXNlcjQ2NTI5OTYx", "avatar_url": "https://avatars3.githubusercontent.com/u/46529961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PrashantDandriyal", "html_url": "https://github.com/PrashantDandriyal", "followers_url": "https://api.github.com/users/PrashantDandriyal/followers", "following_url": "https://api.github.com/users/PrashantDandriyal/following{/other_user}", "gists_url": "https://api.github.com/users/PrashantDandriyal/gists{/gist_id}", "starred_url": "https://api.github.com/users/PrashantDandriyal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PrashantDandriyal/subscriptions", "organizations_url": "https://api.github.com/users/PrashantDandriyal/orgs", "repos_url": "https://api.github.com/users/PrashantDandriyal/repos", "events_url": "https://api.github.com/users/PrashantDandriyal/events{/privacy}", "received_events_url": "https://api.github.com/users/PrashantDandriyal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "ravikyram", "id": 51902062, "node_id": "MDQ6VXNlcjUxOTAyMDYy", "avatar_url": "https://avatars2.githubusercontent.com/u/51902062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ravikyram", "html_url": "https://github.com/ravikyram", "followers_url": "https://api.github.com/users/ravikyram/followers", "following_url": "https://api.github.com/users/ravikyram/following{/other_user}", "gists_url": "https://api.github.com/users/ravikyram/gists{/gist_id}", "starred_url": "https://api.github.com/users/ravikyram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ravikyram/subscriptions", "organizations_url": "https://api.github.com/users/ravikyram/orgs", "repos_url": "https://api.github.com/users/ravikyram/repos", "events_url": "https://api.github.com/users/ravikyram/events{/privacy}", "received_events_url": "https://api.github.com/users/ravikyram/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ravikyram", "id": 51902062, "node_id": "MDQ6VXNlcjUxOTAyMDYy", "avatar_url": "https://avatars2.githubusercontent.com/u/51902062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ravikyram", "html_url": "https://github.com/ravikyram", "followers_url": "https://api.github.com/users/ravikyram/followers", "following_url": "https://api.github.com/users/ravikyram/following{/other_user}", "gists_url": "https://api.github.com/users/ravikyram/gists{/gist_id}", "starred_url": "https://api.github.com/users/ravikyram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ravikyram/subscriptions", "organizations_url": "https://api.github.com/users/ravikyram/orgs", "repos_url": "https://api.github.com/users/ravikyram/repos", "events_url": "https://api.github.com/users/ravikyram/events{/privacy}", "received_events_url": "https://api.github.com/users/ravikyram/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-28T04:49:36Z", "updated_at": "2020-02-05T09:07:21Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/36271", "html_url": "https://github.com/tensorflow/tensorflow/pull/36271", "diff_url": "https://github.com/tensorflow/tensorflow/pull/36271.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/36271.patch"}, "body": "In response to the issue Explain #35072 opened by @petewarden \r\n\r\n> how int8 input and output quantization conversion works in TensorFlow Lite \r\n\r\nThe converter uses the Standard score to standardize the input stats. The standardization is interchangeably known and used here as Quantization. \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36270", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36270/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36270/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36270/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36270", "id": 555973400, "node_id": "MDU6SXNzdWU1NTU5NzM0MDA=", "number": 36270, "title": "TFLite FP16 network Fully connected layer failing on gpu in android", "user": {"login": "jkparuchuri", "id": 4690620, "node_id": "MDQ6VXNlcjQ2OTA2MjA=", "avatar_url": "https://avatars0.githubusercontent.com/u/4690620?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkparuchuri", "html_url": "https://github.com/jkparuchuri", "followers_url": "https://api.github.com/users/jkparuchuri/followers", "following_url": "https://api.github.com/users/jkparuchuri/following{/other_user}", "gists_url": "https://api.github.com/users/jkparuchuri/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkparuchuri/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkparuchuri/subscriptions", "organizations_url": "https://api.github.com/users/jkparuchuri/orgs", "repos_url": "https://api.github.com/users/jkparuchuri/repos", "events_url": "https://api.github.com/users/jkparuchuri/events{/privacy}", "received_events_url": "https://api.github.com/users/jkparuchuri/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jianlijianli", "id": 43797323, "node_id": "MDQ6VXNlcjQzNzk3MzIz", "avatar_url": "https://avatars3.githubusercontent.com/u/43797323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jianlijianli", "html_url": "https://github.com/jianlijianli", "followers_url": "https://api.github.com/users/jianlijianli/followers", "following_url": "https://api.github.com/users/jianlijianli/following{/other_user}", "gists_url": "https://api.github.com/users/jianlijianli/gists{/gist_id}", "starred_url": "https://api.github.com/users/jianlijianli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jianlijianli/subscriptions", "organizations_url": "https://api.github.com/users/jianlijianli/orgs", "repos_url": "https://api.github.com/users/jianlijianli/repos", "events_url": "https://api.github.com/users/jianlijianli/events{/privacy}", "received_events_url": "https://api.github.com/users/jianlijianli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jianlijianli", "id": 43797323, "node_id": "MDQ6VXNlcjQzNzk3MzIz", "avatar_url": "https://avatars3.githubusercontent.com/u/43797323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jianlijianli", "html_url": "https://github.com/jianlijianli", "followers_url": "https://api.github.com/users/jianlijianli/followers", "following_url": "https://api.github.com/users/jianlijianli/following{/other_user}", "gists_url": "https://api.github.com/users/jianlijianli/gists{/gist_id}", "starred_url": "https://api.github.com/users/jianlijianli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jianlijianli/subscriptions", "organizations_url": "https://api.github.com/users/jianlijianli/orgs", "repos_url": "https://api.github.com/users/jianlijianli/repos", "events_url": "https://api.github.com/users/jianlijianli/events{/privacy}", "received_events_url": "https://api.github.com/users/jianlijianli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-28T04:21:16Z", "updated_at": "2020-01-29T01:07:52Z", "closed_at": null, "author_association": "NONE", "body": "Using tensorflow 2.1 on both python as well as android. Quantized the model to fp16 in python and successfully run inference tests with python interpretor on ubuntu/mac.\r\n\r\nBut when I deployed the same network on android edge device with tflite java 2.1 pre-built and enabled gpu delegate, its failing with below error. \r\n\r\n\r\ntensorflow/lite/kernels/fully_connected.cc:105 filter->type != kTfLiteFloat32 (10 != 1)\r\n    Node number 187 (FULLY_CONNECTED) failed to prepare.\r\n    \r\n    tensorflow/lite/kernels/conv.cc:272 bias->type != input_type (1\r\n        at org.tensorflow.lite.NativeInterpreterWrapper.applyDelegate(Native Method)\r\n        at org.tensorflow.lite.NativeInterpreterWrapper.applyDelegates(NativeInterpreterWrapper.java:336)\r\n        at org.tensorflow.lite.NativeInterpreterWrapper.init(NativeInterpreterWrapper.java:82)\r\n        at org.tensorflow.lite.NativeInterpreterWrapper.<init>(NativeInterpreterWrapper.java:48)\r\n        at org.tensorflow.lite.Interpreter.<init>(Interpreter.java:175)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36268", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36268/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36268/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36268/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36268", "id": 555952097, "node_id": "MDU6SXNzdWU1NTU5NTIwOTc=", "number": 36268, "title": "tf.debugging.assert_shapes() does not work for SparseTensor", "user": {"login": "terhorst", "id": 18204, "node_id": "MDQ6VXNlcjE4MjA0", "avatar_url": "https://avatars1.githubusercontent.com/u/18204?v=4", "gravatar_id": "", "url": "https://api.github.com/users/terhorst", "html_url": "https://github.com/terhorst", "followers_url": "https://api.github.com/users/terhorst/followers", "following_url": "https://api.github.com/users/terhorst/following{/other_user}", "gists_url": "https://api.github.com/users/terhorst/gists{/gist_id}", "starred_url": "https://api.github.com/users/terhorst/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/terhorst/subscriptions", "organizations_url": "https://api.github.com/users/terhorst/orgs", "repos_url": "https://api.github.com/users/terhorst/repos", "events_url": "https://api.github.com/users/terhorst/events{/privacy}", "received_events_url": "https://api.github.com/users/terhorst/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-01-28T02:49:22Z", "updated_at": "2020-01-29T09:07:38Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Mac OS X 10.15\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.1\r\n- Python version: 3.8\r\n\r\n**Describe the current behavior**\r\n`tf.debugging.assert_shapes` cannot be used with sparse tensors.\r\n\r\n**Describe the expected behavior**\r\n`tf.debugging.assert_shapes` should allow you to mix and match dense and sparse tensors when checking for dimensional consistency.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\nA = tf.range(3)\r\ntf.debugging.assert_shapes(((A, [3]),))  # works\r\n# raises \"ValueError: Attempt to convert a value (...) with an unsupported type (<class 'tensorflow.python.framework.sparse_tensor.SparseTensor'>) to a Tensor.\r\ntf.debugging.assert_shapes(((tf.sparse.from_dense(A), [3]),))\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36267", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36267/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36267/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36267/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/36267", "id": 555945361, "node_id": "MDExOlB1bGxSZXF1ZXN0MzY3Nzk1ODEz", "number": 36267, "title": "[ROCm] Reverting ROCm to use MIOpen Find Mode APIs (be default) for convolution", "user": {"login": "deven-amd", "id": 36858332, "node_id": "MDQ6VXNlcjM2ODU4MzMy", "avatar_url": "https://avatars2.githubusercontent.com/u/36858332?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deven-amd", "html_url": "https://github.com/deven-amd", "followers_url": "https://api.github.com/users/deven-amd/followers", "following_url": "https://api.github.com/users/deven-amd/following{/other_user}", "gists_url": "https://api.github.com/users/deven-amd/gists{/gist_id}", "starred_url": "https://api.github.com/users/deven-amd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deven-amd/subscriptions", "organizations_url": "https://api.github.com/users/deven-amd/orgs", "repos_url": "https://api.github.com/users/deven-amd/repos", "events_url": "https://api.github.com/users/deven-amd/events{/privacy}", "received_events_url": "https://api.github.com/users/deven-amd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1173072136, "node_id": "MDU6TGFiZWwxMTczMDcyMTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XL", "name": "size:XL", "color": "adafea", "default": false, "description": "CL Change Size:Extra Large"}], "state": "open", "locked": false, "assignee": {"login": "ravikyram", "id": 51902062, "node_id": "MDQ6VXNlcjUxOTAyMDYy", "avatar_url": "https://avatars2.githubusercontent.com/u/51902062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ravikyram", "html_url": "https://github.com/ravikyram", "followers_url": "https://api.github.com/users/ravikyram/followers", "following_url": "https://api.github.com/users/ravikyram/following{/other_user}", "gists_url": "https://api.github.com/users/ravikyram/gists{/gist_id}", "starred_url": "https://api.github.com/users/ravikyram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ravikyram/subscriptions", "organizations_url": "https://api.github.com/users/ravikyram/orgs", "repos_url": "https://api.github.com/users/ravikyram/repos", "events_url": "https://api.github.com/users/ravikyram/events{/privacy}", "received_events_url": "https://api.github.com/users/ravikyram/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ravikyram", "id": 51902062, "node_id": "MDQ6VXNlcjUxOTAyMDYy", "avatar_url": "https://avatars2.githubusercontent.com/u/51902062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ravikyram", "html_url": "https://github.com/ravikyram", "followers_url": "https://api.github.com/users/ravikyram/followers", "following_url": "https://api.github.com/users/ravikyram/following{/other_user}", "gists_url": "https://api.github.com/users/ravikyram/gists{/gist_id}", "starred_url": "https://api.github.com/users/ravikyram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ravikyram/subscriptions", "organizations_url": "https://api.github.com/users/ravikyram/orgs", "repos_url": "https://api.github.com/users/ravikyram/repos", "events_url": "https://api.github.com/users/ravikyram/events{/privacy}", "received_events_url": "https://api.github.com/users/ravikyram/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-01-28T02:21:52Z", "updated_at": "2020-03-13T11:56:16Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/36267", "html_url": "https://github.com/tensorflow/tensorflow/pull/36267", "diff_url": "https://github.com/tensorflow/tensorflow/pull/36267.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/36267.patch"}, "body": "This PR reverts ROCm to use MIOpen Find Mode APIs (be default) for convolution.  The use of MIOpen Immediate Mode API (instead of the Find Mode APIs) can be specified by the setting the env var `TF_ROCM_USE_IMMEDIATE_MODE=1`.\r\n\r\nAlmost all of the changes in this PR are within code that is specific to the ROCm platform, so this PR should not have any impact on non ROCm builds.\r\n\r\n----------------\r\n\r\n\r\n/cc @chsigg @whchung "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36266", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36266/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36266/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36266/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36266", "id": 555889424, "node_id": "MDU6SXNzdWU1NTU4ODk0MjQ=", "number": 36266, "title": "Check failed: 0 <= new_num_elements", "user": {"login": "jayantsahewal", "id": 7027650, "node_id": "MDQ6VXNlcjcwMjc2NTA=", "avatar_url": "https://avatars2.githubusercontent.com/u/7027650?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jayantsahewal", "html_url": "https://github.com/jayantsahewal", "followers_url": "https://api.github.com/users/jayantsahewal/followers", "following_url": "https://api.github.com/users/jayantsahewal/following{/other_user}", "gists_url": "https://api.github.com/users/jayantsahewal/gists{/gist_id}", "starred_url": "https://api.github.com/users/jayantsahewal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jayantsahewal/subscriptions", "organizations_url": "https://api.github.com/users/jayantsahewal/orgs", "repos_url": "https://api.github.com/users/jayantsahewal/repos", "events_url": "https://api.github.com/users/jayantsahewal/events{/privacy}", "received_events_url": "https://api.github.com/users/jayantsahewal/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2020-01-27T23:12:38Z", "updated_at": "2020-03-11T01:45:27Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version (use command below):\r\n- Python version:\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n```\r\n== check python ===================================================\r\npython version: 3.7.3\r\npython branch:\r\npython build version: ('default', 'Jun 27 2019 23:31:30')\r\npython compiler version: GCC 5.5.0\r\npython implementation: CPython\r\n\r\n\r\n== check os platform ===============================================\r\nos: Linux\r\nos kernel version: #1 SMP Tue Jul 30 17:17:50 UTC 2019\r\nos release version: 4.9.184-0.1.ac.235.83.329.metal1.x86_64\r\nos platform: Linux-4.9.184-0.1.ac.235.83.329.metal1.x86_64-x86_64-with-redhat-5.3-Tikanga\r\nlinux distribution: ('Red Hat Enterprise Linux Server', '5.3', 'Tikanga')\r\nlinux os distribution: ('redhat', '5.3', 'Tikanga')\r\nmac version: ('', ('', '', ''), '')\r\nuname: uname_result(system='Linux', node='dev-dsk-jsahewal-1b-01f89cec.us-east-1.amazon.com', release='4.9.184-0.1.ac.235.83.329.metal1.x86_64', version='#1 SMP Tue Jul 30 17:17:50 UTC 2019', machine='x86_64', processor='x86_64')\r\narchitecture: ('64bit', 'ELF')\r\nmachine: x86_64\r\n\r\n\r\n== are we in docker =============================================\r\nNo\r\n\r\n== compiler =====================================================\r\nc++ (Homebrew gcc 5.5.0_4) 5.5.0\r\nCopyright (C) 2015 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n\r\n\r\n== check pips ===================================================\r\nnumpy                             1.18.1\r\nprotobuf                          3.9.2\r\ntensorflow-cpu                    2.1.0\r\ntensorflow-estimator              2.1.0\r\n\r\n== check for virtualenv =========================================\r\nFalse\r\n\r\n== tensorflow import ============================================\r\ntf.version.VERSION = 2.1.0\r\ntf.version.GIT_VERSION = v2.1.0-rc2-17-ge5bf8de\r\ntf.version.COMPILER_VERSION = 7.3.1 20180303\r\n\r\n== env ==========================================================\r\nLD_LIBRARY_PATH is unset\r\nDYLD_LIBRARY_PATH is unset\r\n\r\n== nvidia-smi ===================================================\r\ntf_env_collect.sh: line 145: nvidia-smi: command not found\r\n\r\n== cuda libs  ===================================================\r\n\r\n== tensorflow installed from info ==================\r\n\r\n== python version  ==============================================\r\n(major, minor, micro, releaselevel, serial)\r\n(3, 7, 3, 'final', 0)\r\n\r\n== bazel version  ===============================================\r\n```\r\n\r\n**Describe the current behavior**\r\n```\r\n2020-01-27 22:56:12.796098: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2800045000 Hz\r\n2020-01-27 22:56:12.797977: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x3bad450 initialized for platform Host (this does not guarantee that XLA will be used). Devices:\r\n2020-01-27 22:56:12.798009: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version\r\n2020-01-27 22:56:12.806071: F tensorflow/core/framework/tensor_shape.cc:353] Check failed: 0 <= new_num_elements (0 vs. -4523975925047186833)\r\n[1]    10698 abort      python3 demo.py\r\n```\r\n\r\n**Describe the expected behavior**\r\nShould not abort\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n```\r\nimport numpy as np\r\nimport pandas as pd\r\n\r\nimport tensorflow as tf\r\n\r\nfrom tensorflow import feature_column\r\nfrom tensorflow.keras import layers\r\n\r\n# A utility method to create a tf.data dataset from a Pandas Dataframe\r\ndef df_to_dataset(dataframe, shuffle=True, batch_size=32):\r\n    dataframe = dataframe.copy()\r\n    labels = dataframe.pop('target')\r\n    ds = tf.data.Dataset.from_tensor_slices((dict(dataframe), labels))\r\n    if shuffle:\r\n        ds = ds.shuffle(buffer_size=len(dataframe))\r\n    ds = ds.batch(batch_size)\r\n    return ds\r\n\r\nURL = 'https://storage.googleapis.com/applied-dl/heart.csv'\r\ndataframe = pd.read_csv(URL)\r\n\r\n# Replicate the dataFrame to make it a bit bigger\r\ntemp = dataframe.copy()\r\nfor _ in range(10):\r\n    dataframe = pd.concat([dataframe, temp.copy()])\r\n\r\n# Replicate the columns to make it a bit bigger\r\ncol_lst = dataframe.columns.tolist()\r\nfor i in range(10):\r\n    for ind, col in enumerate(col_lst):\r\n        dataframe[f'{i+1}_{ind}'] = dataframe[col]\r\n\r\nbatch_size = 5 # A small batch sized is used for demonstration purposes\r\ndataframe_ds = df_to_dataset(dataframe, batch_size=batch_size)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36256", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36256/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36256/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36256/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36256", "id": 555771435, "node_id": "MDU6SXNzdWU1NTU3NzE0MzU=", "number": 36256, "title": "Tensorflow 2.1 Jacobian fails when using Keras LeakyReLU Layer", "user": {"login": "cianciosa", "id": 12647439, "node_id": "MDQ6VXNlcjEyNjQ3NDM5", "avatar_url": "https://avatars0.githubusercontent.com/u/12647439?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cianciosa", "html_url": "https://github.com/cianciosa", "followers_url": "https://api.github.com/users/cianciosa/followers", "following_url": "https://api.github.com/users/cianciosa/following{/other_user}", "gists_url": "https://api.github.com/users/cianciosa/gists{/gist_id}", "starred_url": "https://api.github.com/users/cianciosa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cianciosa/subscriptions", "organizations_url": "https://api.github.com/users/cianciosa/orgs", "repos_url": "https://api.github.com/users/cianciosa/repos", "events_url": "https://api.github.com/users/cianciosa/events{/privacy}", "received_events_url": "https://api.github.com/users/cianciosa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-27T19:04:11Z", "updated_at": "2020-02-05T22:46:12Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes. See attached test case.\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Mac OS 10.14.6\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: Unsure\r\n- TensorFlow installed from (source or binary): Binary installed from pip\r\n- TensorFlow version (use command below): ('v2.1.0-rc2-17-ge5bf8de410', '2.1.0')\r\n- Python version: Python 2.7.15 and Python 3.7.0\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\nComputing the Jacobian using the Gradient tape function fails when a the LeakyReLU Keras layer is used.\r\n\r\n**Describe the expected behavior**\r\nIt was expected to calculate the Jacobian of the model with respect to the trainable parameters.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow\r\n\r\nmodel = tensorflow.keras.models.Sequential()\r\nmodel.add(tensorflow.keras.layers.Dense(2,\r\n                                        input_dim=1,\r\n                                        use_bias=True))\r\nmodel.add(tensorflow.keras.layers.LeakyReLU())\r\n#model.add(tensorflow.keras.layers.ReLU())\r\nmodel.add(tensorflow.keras.layers.Dense(1,\r\n                                        use_bias=True))\r\n\r\ninputs = tensorflow.random.uniform((100,1), 1.0, -1.0)\r\n\r\nwith tensorflow.GradientTape(watch_accessed_variables=False) as tape:\r\n\ttape.watch(model.trainable_weights)\r\n\ttemp = model(inputs)\r\n\r\njacobian = tape.jacobian(temp, model.trainable_weights)\r\n```\r\n\r\n**Other info / logs**\r\nIt produces the following error messages.\r\n\r\n*** Python 2.7.15 Error Output ***\r\n```\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 18, in <module>\r\n    jacobian = tape.jacobian(temp, model.trainable_weights)\r\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow_core/python/eager/backprop.py\", line 1121, in jacobian\r\n    sys.exc_info()[2])\r\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow_core/python/eager/backprop.py\", line 1113, in jacobian\r\n    parallel_iterations=parallel_iterations)\r\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow_core/python/ops/parallel_for/control_flow_ops.py\", line 189, in pfor\r\n    return f()\r\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow_core/python/eager/function.py\", line 2362, in __call__\r\n    graph_function, args, kwargs = self._maybe_define_function(args, kwargs)\r\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow_core/python/eager/function.py\", line 2703, in _maybe_define_function\r\n    graph_function = self._create_graph_function(args, kwargs)\r\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow_core/python/eager/function.py\", line 2593, in _create_graph_function\r\n    capture_by_value=self._capture_by_value),\r\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow_core/python/framework/func_graph.py\", line 978, in func_graph_from_py_func\r\n    func_outputs = python_func(*func_args, **func_kwargs)\r\n  File \"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow_core/python/framework/func_graph.py\", line 968, in wrapper\r\n    raise e.ag_error_metadata.to_exception(e)\r\nValueError: in converted code:\r\n\r\n    /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow_core/python/ops/parallel_for/control_flow_ops.py:183 f  *\r\n        return _pfor_impl(loop_fn, iters, parallel_iterations=parallel_iterations)\r\n    /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow_core/python/ops/parallel_for/control_flow_ops.py:256 _pfor_impl\r\n        outputs.append(converter.convert(loop_fn_output))\r\n    /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow_core/python/ops/parallel_for/pfor.py:1280 convert\r\n        output = self._convert_helper(y)\r\n    /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tensorflow_core/python/ops/parallel_for/pfor.py:1460 _convert_helper\r\n        (y_op.type, y_op, converted_inputs))\r\n\r\n    ValueError: No converter defined for LeakyReluGrad\r\n    name: \"loop_body/LeakyReluGrad\"\r\n    op: \"LeakyReluGrad\"\r\n    input: \"loop_body/MatMul\"\r\n    input: \"loop_body/LeakyReluGrad/features\"\r\n    attr {\r\n      key: \"T\"\r\n      value {\r\n        type: DT_FLOAT\r\n      }\r\n    }\r\n    attr {\r\n      key: \"alpha\"\r\n      value {\r\n        f: 0.300000011921\r\n      }\r\n    }\r\n    \r\n    inputs: [WrappedTensor(t=<tf.Tensor 'loop_body/MatMul/pfor/Reshape_1:0' shape=(100, 100, 2) dtype=float32>, is_stacked=True, is_sparse_stacked=False), WrappedTensor(t=<tf.Tensor 'loop_body/LeakyReluGrad/features:0' shape=(100, 2) dtype=float32>, is_stacked=False, is_sparse_stacked=False)]. \r\n    Either add a converter or set --op_conversion_fallback_to_while_loop=True, which may run slower\r\n\r\nEncountered an exception while vectorizing the jacobian computation. Vectorization can be disabled by setting experimental_use_pfor to False.\r\n```\r\n\r\n*** Python 3.7.0 Error Output***\r\n```\r\nTraceback (most recent call last):\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow_core/python/eager/backprop.py\", line 1113, in jacobian\r\n    parallel_iterations=parallel_iterations)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow_core/python/ops/parallel_for/control_flow_ops.py\", line 189, in pfor\r\n    return f()\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 2362, in __call__\r\n    graph_function, args, kwargs = self._maybe_define_function(args, kwargs)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 2703, in _maybe_define_function\r\n    graph_function = self._create_graph_function(args, kwargs)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 2593, in _create_graph_function\r\n    capture_by_value=self._capture_by_value),\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow_core/python/framework/func_graph.py\", line 978, in func_graph_from_py_func\r\n    func_outputs = python_func(*func_args, **func_kwargs)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow_core/python/framework/func_graph.py\", line 968, in wrapper\r\n    raise e.ag_error_metadata.to_exception(e)\r\nValueError: in converted code:\r\n\r\n    /Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow_core/python/ops/parallel_for/control_flow_ops.py:183 f  *\r\n        return _pfor_impl(loop_fn, iters, parallel_iterations=parallel_iterations)\r\n    /Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow_core/python/ops/parallel_for/control_flow_ops.py:256 _pfor_impl\r\n        outputs.append(converter.convert(loop_fn_output))\r\n    /Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow_core/python/ops/parallel_for/pfor.py:1280 convert\r\n        output = self._convert_helper(y)\r\n    /Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow_core/python/ops/parallel_for/pfor.py:1460 _convert_helper\r\n        (y_op.type, y_op, converted_inputs))\r\n\r\n    ValueError: No converter defined for LeakyReluGrad\r\n    name: \"loop_body/LeakyReluGrad\"\r\n    op: \"LeakyReluGrad\"\r\n    input: \"loop_body/MatMul\"\r\n    input: \"loop_body/LeakyReluGrad/features\"\r\n    attr {\r\n      key: \"T\"\r\n      value {\r\n        type: DT_FLOAT\r\n      }\r\n    }\r\n    attr {\r\n      key: \"alpha\"\r\n      value {\r\n        f: 0.30000001192092896\r\n      }\r\n    }\r\n    \r\n    inputs: [WrappedTensor(t=<tf.Tensor 'loop_body/MatMul/pfor/Reshape_1:0' shape=(100, 100, 2) dtype=float32>, is_stacked=True, is_sparse_stacked=False), WrappedTensor(t=<tf.Tensor 'loop_body/LeakyReluGrad/features:0' shape=(100, 2) dtype=float32>, is_stacked=False, is_sparse_stacked=False)]. \r\n    Either add a converter or set --op_conversion_fallback_to_while_loop=True, which may run slower\r\n\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 18, in <module>\r\n    jacobian = tape.jacobian(temp, model.trainable_weights)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow_core/python/eager/backprop.py\", line 1121, in jacobian\r\n    sys.exc_info()[2])\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/six.py\", line 702, in reraise\r\n    raise value.with_traceback(tb)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow_core/python/eager/backprop.py\", line 1113, in jacobian\r\n    parallel_iterations=parallel_iterations)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow_core/python/ops/parallel_for/control_flow_ops.py\", line 189, in pfor\r\n    return f()\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 2362, in __call__\r\n    graph_function, args, kwargs = self._maybe_define_function(args, kwargs)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 2703, in _maybe_define_function\r\n    graph_function = self._create_graph_function(args, kwargs)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 2593, in _create_graph_function\r\n    capture_by_value=self._capture_by_value),\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow_core/python/framework/func_graph.py\", line 978, in func_graph_from_py_func\r\n    func_outputs = python_func(*func_args, **func_kwargs)\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow_core/python/framework/func_graph.py\", line 968, in wrapper\r\n    raise e.ag_error_metadata.to_exception(e)\r\nValueError: in converted code:\r\n\r\n    /Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow_core/python/ops/parallel_for/control_flow_ops.py:183 f  *\r\n        return _pfor_impl(loop_fn, iters, parallel_iterations=parallel_iterations)\r\n    /Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow_core/python/ops/parallel_for/control_flow_ops.py:256 _pfor_impl\r\n        outputs.append(converter.convert(loop_fn_output))\r\n    /Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow_core/python/ops/parallel_for/pfor.py:1280 convert\r\n        output = self._convert_helper(y)\r\n    /Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow_core/python/ops/parallel_for/pfor.py:1460 _convert_helper\r\n        (y_op.type, y_op, converted_inputs))\r\n\r\n    ValueError: No converter defined for LeakyReluGrad\r\n    name: \"loop_body/LeakyReluGrad\"\r\n    op: \"LeakyReluGrad\"\r\n    input: \"loop_body/MatMul\"\r\n    input: \"loop_body/LeakyReluGrad/features\"\r\n    attr {\r\n      key: \"T\"\r\n      value {\r\n        type: DT_FLOAT\r\n      }\r\n    }\r\n    attr {\r\n      key: \"alpha\"\r\n      value {\r\n        f: 0.30000001192092896\r\n      }\r\n    }\r\n    \r\n    inputs: [WrappedTensor(t=<tf.Tensor 'loop_body/MatMul/pfor/Reshape_1:0' shape=(100, 100, 2) dtype=float32>, is_stacked=True, is_sparse_stacked=False), WrappedTensor(t=<tf.Tensor 'loop_body/LeakyReluGrad/features:0' shape=(100, 2) dtype=float32>, is_stacked=False, is_sparse_stacked=False)]. \r\n    Either add a converter or set --op_conversion_fallback_to_while_loop=True, which may run slower\r\n\r\nEncountered an exception while vectorizing the jacobian computation. Vectorization can be disabled by setting experimental_use_pfor to False.\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36255", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36255/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36255/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36255/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36255", "id": 555702914, "node_id": "MDU6SXNzdWU1NTU3MDI5MTQ=", "number": 36255, "title": "GradientTape does not track intermediate variables inside a tf.function", "user": {"login": "maxiwelian", "id": 33183718, "node_id": "MDQ6VXNlcjMzMTgzNzE4", "avatar_url": "https://avatars2.githubusercontent.com/u/33183718?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maxiwelian", "html_url": "https://github.com/maxiwelian", "followers_url": "https://api.github.com/users/maxiwelian/followers", "following_url": "https://api.github.com/users/maxiwelian/following{/other_user}", "gists_url": "https://api.github.com/users/maxiwelian/gists{/gist_id}", "starred_url": "https://api.github.com/users/maxiwelian/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maxiwelian/subscriptions", "organizations_url": "https://api.github.com/users/maxiwelian/orgs", "repos_url": "https://api.github.com/users/maxiwelian/repos", "events_url": "https://api.github.com/users/maxiwelian/events{/privacy}", "received_events_url": "https://api.github.com/users/maxiwelian/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-27T16:53:03Z", "updated_at": "2020-02-27T20:12:23Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nYes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nUbuntu 18.04\r\n- TensorFlow installed from (source or binary): \r\nBinary\r\n- TensorFlow version (use command below):\r\n2.2.0-dev20200123\r\n- Python version:\r\n3.7.3\r\n- CUDA/cuDNN version: 10.1 / \r\n#define CUDNN_MAJOR 7\r\n#define CUDNN_MINOR 6\r\n#define CUDNN_PATCHLEVEL 4\r\n- GPU model and memory:\r\n```\r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 440.33.01    Driver Version: 440.33.01    CUDA Version: 10.1     |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|===============================+======================+======================|\r\n|   0  Quadro P3200        On   | 00000000:01:00.0 Off |                  N/A |\r\n| N/A   54C    P3    24W /  N/A |   5911MiB /  6078MiB |      0%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n                                                                               \r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                       GPU Memory |\r\n|  GPU       PID   Type   Process name                             Usage      |\r\n|=============================================================================|\r\n|    0      1326      G   /usr/lib/xorg/Xorg                           282MiB |\r\n|    0      2272      G   kwin_x11                                      53MiB |\r\n|    0      2279      G   /usr/bin/krunner                             105MiB |\r\n|    0      2281      G   /usr/bin/plasmashell                          96MiB |\r\n|    0      3136      C   ...ilso4/anaconda3/envs/fermi21/bin/python  5363MiB |\r\n|    0      4764      G   ...pycharm-community-2019.3.1/jbr/bin/java     2MiB |\r\n+-----------------------------------------------------------------------------+\r\n```\r\n\r\n**Describe the current behavior**\r\nCan't compute derivatives of output wrt intermediate variables created inside a tf.function wrapped function. \r\n\r\nIf tf.function wrapper is removed the function behaves as expected.\r\n\r\n**Describe the expected behavior**\r\nCan compute these derivatives. \r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\nprint(tf.__version__)\r\n\r\ny = tf.Variable(2.)\r\nz = tf.Variable(3.)\r\nx = tf.random.normal((1,))\r\n\r\n@tf.function # remove this to function\r\ndef call(x, y, z):\r\n    a = x * y\r\n    b = a * z\r\n    return a, b\r\n\r\nwith tf.GradientTape(True) as g:\r\n    g.watch(x)\r\n    a, b = call(x, y, z)\r\n\r\ngx, ga =  g.gradient(b, [x, a])\r\nprint(ga)\r\nprint(gx)\r\n```\r\n\r\n**Other info / logs**\r\n2.2.0-dev20200123\r\nNone\r\ntf.Tensor([6.], shape=(1,), dtype=float32)\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36252", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36252/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36252/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36252/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36252", "id": 555630489, "node_id": "MDU6SXNzdWU1NTU2MzA0ODk=", "number": 36252, "title": "TF 2.1 libtensorflow library does not build under Windows", "user": {"login": "josdewitte", "id": 3986164, "node_id": "MDQ6VXNlcjM5ODYxNjQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/3986164?v=4", "gravatar_id": "", "url": "https://api.github.com/users/josdewitte", "html_url": "https://github.com/josdewitte", "followers_url": "https://api.github.com/users/josdewitte/followers", "following_url": "https://api.github.com/users/josdewitte/following{/other_user}", "gists_url": "https://api.github.com/users/josdewitte/gists{/gist_id}", "starred_url": "https://api.github.com/users/josdewitte/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/josdewitte/subscriptions", "organizations_url": "https://api.github.com/users/josdewitte/orgs", "repos_url": "https://api.github.com/users/josdewitte/repos", "events_url": "https://api.github.com/users/josdewitte/events{/privacy}", "received_events_url": "https://api.github.com/users/josdewitte/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2020-01-27T14:57:51Z", "updated_at": "2020-02-21T18:43:54Z", "closed_at": null, "author_association": "NONE", "body": "- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nWindows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\nNone\r\n- TensorFlow installed from (source or binary):\r\nSource\r\n- TensorFlow version:\r\nmaster or 2.1 labeled version\r\n- Python version:\r\n3.6.8\r\n- Installed using virtualenv? pip? conda?:\r\nPartially Pip as specified in manual at \r\n- Bazel version (if compiling from source):\r\nbazel 1.2.1\r\n- GCC/Compiler version (if compiling from source):\r\nMSVC 2017 or MSVC 2019\r\n- CUDA/cuDNN version:\r\nNone\r\n- GPU model and memory:\r\nNone\r\n\r\nlibtensorflow does not build. Tried 2.1 version and current (27 jan 2020) master version\r\n\r\nUsed\r\nbazel build --define=no_tensorflow_py_deps=true --config opt //tensorflow/tools/lib_package:libtensorflow\r\n\r\nUsed either set BAZEL_VS= {{ path to VS2019 }} or {{ path to VS2017 }}\r\n\r\nError is always:\r\n\r\nERROR: /tensorflow/tensorflow/core/framework/BUILD:575:1: C++ compilation of rule '//tensorflow/core/framework:bfloat16' failed (Exit 2)\r\n\\org_tensorflow\\external\\eigen_archive\\unsupported\\eigen\\cxx11\\src/Tensor/TensorBlock.h(1028): error C2061: syntax error: identifier 'Kind'\r\n\\org_tensorflow\\external\\eigen_archive\\unsupported\\eigen\\cxx11\\src/Tensor/TensorBlock.h(1134): note: see reference to class template instantiation 'Eigen::internal::StridedLinearBufferCopy<Scalar,IndexType>' being compiled\r\n\\org_tensorflow\\external\\eigen_archive\\unsupported\\eigen\\cxx11\\src/Tensor/TensorBlock.h(1037): error C2061: syntax error: identifier 'Kind'\r\n\r\nIt seems related to the Eigen library header file(s) missing in includes ? \r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36251", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36251/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36251/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36251/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/36251", "id": 555625216, "node_id": "MDExOlB1bGxSZXF1ZXN0MzY3NTMzMDkw", "number": 36251, "title": "Symmetric quantization with activations 16-bit and weights 8-bit: interface", "user": {"login": "wwwind", "id": 1513336, "node_id": "MDQ6VXNlcjE1MTMzMzY=", "avatar_url": "https://avatars0.githubusercontent.com/u/1513336?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wwwind", "html_url": "https://github.com/wwwind", "followers_url": "https://api.github.com/users/wwwind/followers", "following_url": "https://api.github.com/users/wwwind/following{/other_user}", "gists_url": "https://api.github.com/users/wwwind/gists{/gist_id}", "starred_url": "https://api.github.com/users/wwwind/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wwwind/subscriptions", "organizations_url": "https://api.github.com/users/wwwind/orgs", "repos_url": "https://api.github.com/users/wwwind/repos", "events_url": "https://api.github.com/users/wwwind/events{/privacy}", "received_events_url": "https://api.github.com/users/wwwind/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1169365682, "node_id": "MDU6TGFiZWwxMTY5MzY1Njgy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:L", "name": "size:L", "color": "adafea", "default": false, "description": "CL Change Size: Large"}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2020-01-27T14:49:49Z", "updated_at": "2020-03-19T01:15:57Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/36251", "html_url": "https://github.com/tensorflow/tensorflow/pull/36251", "diff_url": "https://github.com/tensorflow/tensorflow/pull/36251.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/36251.patch"}, "body": "In this PR we add a new option TFLITE_BUILTINS_ACTIVATIONS_INT16_WEIGHTS_INT8 to enable quantization with 16-bit activations and weights 8-bit.\r\n\r\nWhen it is set, then we do post-training symmetric quantization with 16-bit activations and 8-bit weights. The bias is 64-bit in this case. It behaves the same way as TFLITE_BUILTINS_INT8.\r\n\r\nExample of usage:\r\nconverter.target_spec.supported_ops = [tf.lite.OpsSet.TFLITE_BUILTINS_ACTIVATIONS_INT16_WEIGHTS_INT8]\r\nThe name is quite long even it is explanatory. \r\nMay be, we should use something like  TFLITE_BUILTINS_INT16x8.\r\nAny suggestions are welcome.\r\n\r\nImplementations of reference kernels are submitted in other PRs.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36248", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36248/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36248/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36248/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36248", "id": 555607284, "node_id": "MDU6SXNzdWU1NTU2MDcyODQ=", "number": 36248, "title": "TF-Lite example label Image w shared library", "user": {"login": "peter197321", "id": 46971586, "node_id": "MDQ6VXNlcjQ2OTcxNTg2", "avatar_url": "https://avatars3.githubusercontent.com/u/46971586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peter197321", "html_url": "https://github.com/peter197321", "followers_url": "https://api.github.com/users/peter197321/followers", "following_url": "https://api.github.com/users/peter197321/following{/other_user}", "gists_url": "https://api.github.com/users/peter197321/gists{/gist_id}", "starred_url": "https://api.github.com/users/peter197321/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peter197321/subscriptions", "organizations_url": "https://api.github.com/users/peter197321/orgs", "repos_url": "https://api.github.com/users/peter197321/repos", "events_url": "https://api.github.com/users/peter197321/events{/privacy}", "received_events_url": "https://api.github.com/users/peter197321/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-27T14:22:32Z", "updated_at": "2020-02-14T06:43:07Z", "closed_at": null, "author_association": "NONE", "body": "Please update `label_image` example to be compilable using a shared library.\r\nIt means to use a shared library with `label_image` example."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36246", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36246/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36246/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36246/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36246", "id": 555603694, "node_id": "MDU6SXNzdWU1NTU2MDM2OTQ=", "number": 36246, "title": "Hessian-vector product raises exception about Fetch argument", "user": {"login": "nkoep", "id": 1410485, "node_id": "MDQ6VXNlcjE0MTA0ODU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1410485?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nkoep", "html_url": "https://github.com/nkoep", "followers_url": "https://api.github.com/users/nkoep/followers", "following_url": "https://api.github.com/users/nkoep/following{/other_user}", "gists_url": "https://api.github.com/users/nkoep/gists{/gist_id}", "starred_url": "https://api.github.com/users/nkoep/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nkoep/subscriptions", "organizations_url": "https://api.github.com/users/nkoep/orgs", "repos_url": "https://api.github.com/users/nkoep/repos", "events_url": "https://api.github.com/users/nkoep/events{/privacy}", "received_events_url": "https://api.github.com/users/nkoep/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-27T14:17:15Z", "updated_at": "2020-01-28T11:48:50Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Arch Linux\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: n/a\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v1.15.0-rc3-22-g590d6ee 1.15.0\r\n- Python version: Python 3.7.6\r\n- Bazel version (if compiling from source): n/a\r\n- GCC/Compiler version (if compiling from source): n/a\r\n- CUDA/cuDNN version: n/a\r\n- GPU model and memory: n/a\r\n\r\n**Describe the current behavior**\r\nTrying to compute the Hessian-vector product of a graph with a linear dependence on a tensor produces a `TypeError` exception:\r\n```raw\r\nTypeError: Fetch argument None has invalid type <class 'NoneType'>` exception.\r\n```\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport itertools\r\nimport os\r\n\r\nimport numpy.random as rnd\r\nimport tensorflow as tf\r\nfrom tensorflow.python.ops.gradients_impl import _hessian_vector_product\r\n\r\nos.environ[\"TF_CPP_MIN_LOG_LEVEL\"] = \"3\"\r\n\r\n\r\ndef main():\r\n    n = 10\r\n\r\n    x = tf.Variable(tf.zeros(n, dtype=tf.float64), name=\"x\")\r\n    y = tf.Variable(tf.zeros(n, dtype=tf.float64), name=\"y\")\r\n    z = tf.Variable(tf.zeros(n, dtype=tf.float64), name=\"z\")\r\n    function = tf.reduce_sum(x ** 2 + y + z ** 3)\r\n\r\n    arguments = (x, y, z)\r\n    zeros = [tf.zeros_like(argument) for argument in arguments]\r\n    hessian = _hessian_vector_product(function, arguments, zeros)\r\n\r\n    x, y, z = [rnd.randn(n) for _ in range(3)]\r\n    u, v, w = [rnd.randn(n) for _ in range(3)]\r\n\r\n    feed_dict = {\r\n        key: value\r\n        for key, value in zip(itertools.chain(arguments, zeros),\r\n                              (x, y, z, u, v, w))\r\n    }\r\n    with tf.Session() as session:\r\n        hessian_vector_product = session.run(hessian, feed_dict)\r\n\r\n    print(hessian_vector_product)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36240", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36240/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36240/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36240/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36240", "id": 555549734, "node_id": "MDU6SXNzdWU1NTU1NDk3MzQ=", "number": 36240, "title": "TF 2.1 Keras: Cached datasets use 40% more memory than in TF 2.0", "user": {"login": "lgeiger", "id": 13285808, "node_id": "MDQ6VXNlcjEzMjg1ODA4", "avatar_url": "https://avatars1.githubusercontent.com/u/13285808?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lgeiger", "html_url": "https://github.com/lgeiger", "followers_url": "https://api.github.com/users/lgeiger/followers", "following_url": "https://api.github.com/users/lgeiger/following{/other_user}", "gists_url": "https://api.github.com/users/lgeiger/gists{/gist_id}", "starred_url": "https://api.github.com/users/lgeiger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lgeiger/subscriptions", "organizations_url": "https://api.github.com/users/lgeiger/orgs", "repos_url": "https://api.github.com/users/lgeiger/repos", "events_url": "https://api.github.com/users/lgeiger/events{/privacy}", "received_events_url": "https://api.github.com/users/lgeiger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "yhliang2018", "id": 36285763, "node_id": "MDQ6VXNlcjM2Mjg1NzYz", "avatar_url": "https://avatars1.githubusercontent.com/u/36285763?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yhliang2018", "html_url": "https://github.com/yhliang2018", "followers_url": "https://api.github.com/users/yhliang2018/followers", "following_url": "https://api.github.com/users/yhliang2018/following{/other_user}", "gists_url": "https://api.github.com/users/yhliang2018/gists{/gist_id}", "starred_url": "https://api.github.com/users/yhliang2018/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yhliang2018/subscriptions", "organizations_url": "https://api.github.com/users/yhliang2018/orgs", "repos_url": "https://api.github.com/users/yhliang2018/repos", "events_url": "https://api.github.com/users/yhliang2018/events{/privacy}", "received_events_url": "https://api.github.com/users/yhliang2018/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yhliang2018", "id": 36285763, "node_id": "MDQ6VXNlcjM2Mjg1NzYz", "avatar_url": "https://avatars1.githubusercontent.com/u/36285763?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yhliang2018", "html_url": "https://github.com/yhliang2018", "followers_url": "https://api.github.com/users/yhliang2018/followers", "following_url": "https://api.github.com/users/yhliang2018/following{/other_user}", "gists_url": "https://api.github.com/users/yhliang2018/gists{/gist_id}", "starred_url": "https://api.github.com/users/yhliang2018/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yhliang2018/subscriptions", "organizations_url": "https://api.github.com/users/yhliang2018/orgs", "repos_url": "https://api.github.com/users/yhliang2018/repos", "events_url": "https://api.github.com/users/yhliang2018/events{/privacy}", "received_events_url": "https://api.github.com/users/yhliang2018/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2020-01-27T12:44:02Z", "updated_at": "2020-02-19T11:42:51Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.1.0\r\n- Python version: 3.7.6\r\n- CUDA/cuDNN version: 10.1 / 7.6.5.32\r\n- GPU model and memory: NVIDIA V100\r\n\r\n**Describe the current behavior**\r\n\r\nWhen running training with cached repeated datasets in Keras, TensorFlow 2.1 (and `tf-nightly==2.2.0.dev20200124`) use 40-50% more memory than TensorFlow 2.0.\r\n\r\nE.g. a large cached dataset like [ImageNet](https://www.tensorflow.org/datasets/catalog/imagenet2012) will require **~230 GB** of memory where as in TensorFlow 2.0 the same code only required **155 GB**. This is a 75 GB increase in memory usage which makes it hard to cache large datasets in memory.\r\n\r\n```python\r\nimport math\r\nimport tensorflow as tf\r\nfrom tensorflow import keras\r\nimport tensorflow_datasets as tfds\r\n\r\n\r\nbatch_size = 1024\r\n\r\ndataset, info = tfds.load(\r\n    \"imagenet2012:5.0.*\",\r\n    decoders={\"image\": tfds.decode.SkipDecoding()},\r\n    split=\"train\",\r\n    with_info=True,\r\n)\r\n\r\nval_dataset = tfds.load(\r\n    \"imagenet2012:5.0.*\",\r\n    decoders={\"image\": tfds.decode.SkipDecoding()},\r\n    split=\"validation\",\r\n)\r\n\r\nsteps_per_epoch = math.ceil(info.splits[\"train\"].num_examples / batch_size)\r\nval_steps = math.ceil(info.splits[\"validation\"].num_examples / batch_size)\r\n\r\n\r\ndef _decode_and_center_crop(image_bytes):\r\n    \"\"\"Crops to center of image with padding then scales image_size.\"\"\"\r\n    shape = tf.image.extract_jpeg_shape(image_bytes)\r\n    image_height = shape[0]\r\n    image_width = shape[1]\r\n    image_size = 224\r\n\r\n    padded_center_crop_size = tf.cast(\r\n        (\r\n            (image_size / (image_size + 32))\r\n            * tf.cast(tf.minimum(image_height, image_width), tf.float32)\r\n        ),\r\n        tf.int32,\r\n    )\r\n\r\n    offset_height = ((image_height - padded_center_crop_size) + 1) // 2\r\n    offset_width = ((image_width - padded_center_crop_size) + 1) // 2\r\n    crop_window = tf.stack(\r\n        [offset_height, offset_width, padded_center_crop_size, padded_center_crop_size]\r\n    )\r\n    image = tf.image.decode_and_crop_jpeg(image_bytes, crop_window, channels=3)\r\n    image = tf.compat.v1.image.resize_bicubic([image], [image_size, image_size])[0]\r\n    return image\r\n\r\n\r\ndef preprocessing(data):\r\n    return tf.cast(_decode_and_center_crop(data[\"image\"]), tf.float32), data[\"label\"]\r\n\r\n\r\ndataset = (\r\n    dataset.cache()\r\n    .shuffle(10 * batch_size)\r\n    .repeat()\r\n    .map(preprocessing, num_parallel_calls=tf.data.experimental.AUTOTUNE)\r\n    .batch(batch_size)\r\n    .prefetch(1)\r\n)\r\n\r\nval_dataset = (\r\n    val_dataset.cache()\r\n    .repeat()\r\n    .map(preprocessing, num_parallel_calls=tf.data.experimental.AUTOTUNE)\r\n    .batch(batch_size)\r\n    .prefetch(1)\r\n)\r\n\r\nmodel = keras.models.Sequential(\r\n    [\r\n        keras.layers.GlobalMaxPool2D(input_shape=(224, 224, 3)),\r\n        keras.layers.Dense(1000, activation=\"softmax\",),\r\n    ]\r\n)\r\n\r\nmodel.compile(\r\n    optimizer=\"adam\",\r\n    loss=\"sparse_categorical_crossentropy\",\r\n    metrics=[\"accuracy\", \"sparse_top_k_categorical_accuracy\"],\r\n)\r\n\r\nmodel.fit(\r\n    dataset,\r\n    epochs=5,\r\n    steps_per_epoch=steps_per_epoch,\r\n    validation_data=val_dataset,\r\n    validation_steps=val_steps,\r\n)\r\n```\r\n\r\n**Describe the expected behavior**\r\nNo increased memory requirements when switching from TensorFlow 2.0 to 2.1\r\n\r\n**Other info / logs**\r\n\r\nThis issue doesn't appear when not using a validation dataset:\r\n```python\r\nmodel.fit(dataset, epochs=5, steps_per_epoch=steps_per_epoch)\r\n```\r\n\r\nThe issues also doesn't appear if the dataset is not repeated. However then we would run into #36126 which logs error messages after each epoch:\r\n```python\r\ndataset = (\r\n    dataset.cache()\r\n    .shuffle(10 * batch_size)\r\n    .map(preprocessing, num_parallel_calls=tf.data.experimental.AUTOTUNE)\r\n    .batch(batch_size)\r\n    .prefetch(1)\r\n)\r\n\r\nval_dataset = (\r\n    val_dataset.cache()\r\n    .map(preprocessing, num_parallel_calls=tf.data.experimental.AUTOTUNE)\r\n    .batch(batch_size)\r\n    .prefetch(1)\r\n)\r\n\r\nmodel = keras.models.Sequential(\r\n    [\r\n        keras.layers.GlobalMaxPool2D(input_shape=(224, 224, 3)),\r\n        keras.layers.Dense(1000, activation=\"softmax\",),\r\n    ]\r\n)\r\n\r\nmodel.compile(\r\n    optimizer=\"adam\",\r\n    loss=\"sparse_categorical_crossentropy\",\r\n    metrics=[\"accuracy\", \"sparse_top_k_categorical_accuracy\"],\r\n)\r\n\r\nmodel.fit(dataset, epochs=5, validation_data=val_dataset)\r\n```\r\n\r\nJudging from the observations above it looks like the iteration of the validation dataset is broken inside Keras, so it doesn't show up when the dataset iterator is recreated when used without `steps_per_epoch`.\r\n\r\nWhat is the recommended way of using `tf.data.Datasets` with Keras models?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36236", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36236/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36236/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36236/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36236", "id": 555467819, "node_id": "MDU6SXNzdWU1NTU0Njc4MTk=", "number": 36236, "title": "GradientTape.gradient fails when tf.gather is used after LSTM/GRU in tf.function", "user": {"login": "foxik", "id": 560016, "node_id": "MDQ6VXNlcjU2MDAxNg==", "avatar_url": "https://avatars0.githubusercontent.com/u/560016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/foxik", "html_url": "https://github.com/foxik", "followers_url": "https://api.github.com/users/foxik/followers", "following_url": "https://api.github.com/users/foxik/following{/other_user}", "gists_url": "https://api.github.com/users/foxik/gists{/gist_id}", "starred_url": "https://api.github.com/users/foxik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/foxik/subscriptions", "organizations_url": "https://api.github.com/users/foxik/orgs", "repos_url": "https://api.github.com/users/foxik/repos", "events_url": "https://api.github.com/users/foxik/events{/privacy}", "received_events_url": "https://api.github.com/users/foxik/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 736653459, "node_id": "MDU6TGFiZWw3MzY2NTM0NTk=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:eager", "name": "comp:eager", "color": "0052cc", "default": false, "description": ""}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2020-01-27T10:01:07Z", "updated_at": "2020-03-17T20:01:40Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): **No**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): **Linux Stretch**\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): **binary**\r\n- TensorFlow version (use command below): **2.1.0** and **2.0.0**\r\n- Python version: **3.6**\r\n\r\n**Describe the current behavior**\r\nConsider the following simple model running a GRU, tf.gather, and a linear regression:\r\n```python\r\nimport tensorflow as tf\r\n\r\ninputs = tf.keras.layers.Input(shape=[None, 1], dtype=tf.float32)\r\nhidden = tf.keras.layers.GRU(10)(inputs)\r\nhidden = tf.gather(hidden, [0])\r\noutput = tf.keras.layers.Dense(1)(hidden)\r\nmodel = tf.keras.Model(inputs=inputs, outputs=output)\r\n\r\n@tf.function\r\ndef train(x, y):\r\n    with tf.GradientTape() as tape:\r\n        predictions = model(x, training=True)\r\n        loss = tf.losses.mean_squared_error(y, predictions)\r\n    gradients = tape.gradient(loss, model.trainable_variables)\r\n\r\ntrain(tf.constant([[[1], [2], [3]]], dtype=tf.float32), tf.constant([[1]], dtype=tf.float32))\r\n```\r\nBoth TF 2.0.0 and TF 2.1.0 fails, with a similar error message (the following is TF 2.1):\r\n```\r\n    ValueError: All inputs to `ConcreteFunction`s must be Tensors; on invocation of __backward_standard_gru_918, the 0-th input (IndexedSlices(indices=Tensor(\"Reshape_2:0\", shape=(1,), dtype=int32), values=Tensor(\"Reshape_1:0\", shape=(1, 10), dtype=float32), dense_shape=Tensor(\"Cast_2:0\", shape=(2,), dtype=int32))) was not a Tensor.\r\n```\r\n\r\n**Describe the expected behavior**\r\n\r\nThe code should work.\r\n\r\n**Other info / logs**\r\n\r\nThe problem is caused by `tf.gather` generating `tf.IndexedSlices` as a derivative. However, current LSTM/GRU are graph functions and the backprop algorithm for graph functions assumes the inputs must be `tf.Tensor`s.\r\n\r\nOne possible workaround is not to use `tf.function` and use eager. Then the code works.\r\n\r\nAnother solution is to force conversion of the derivatives from `tf.IndexedSlices` to `tf.Tensor`. The easiest solution I found is to use `* 1`, which adds operation `Mul` to the computation graph, for which the conversion from `tf.IndexedSlices` to `Tensor` works. So the following works:\r\n```python\r\ninputs = tf.keras.layers.Input(shape=[None, 1], dtype=tf.float32)\r\nhidden = tf.keras.layers.GRU(10)(inputs)\r\nhidden = tf.gather(hidden * 1, [0])\r\noutput = tf.keras.layers.Dense(1)(hidden)\r\nmodel = tf.keras.Model(inputs=inputs, outputs=output)\r\n\r\n@tf.function\r\ndef train(x, y):\r\n    with tf.GradientTape() as tape:\r\n        predictions = model(x, training=True)\r\n        loss = tf.losses.mean_squared_error(y, predictions)\r\n    gradients = tape.gradient(loss, model.trainable_variables)\r\n\r\ntrain(tf.constant([[[1], [2], [3]]], dtype=tf.float32), tf.constant([[1]], dtype=tf.float32))\r\n```\r\n\r\n**Possible solution**\r\nI assume an automatic conversion of `tf.IndexedSlices` to `tf.Tensor` should be performed. As a proof of concept, I changed the line https://github.com/tensorflow/tensorflow/blob/1f404dc482e3b7e4244cc1603725e555f06f8b9b/tensorflow/python/eager/function.py#L1731\r\nto\r\n```python\r\n  tensor_inputs.append(ops.convert_to_tensor(arg))\r\n```\r\nand the code then works as expected (converting the `tf.IndexedSlices` to `tf.Tensor`). However, a proper fix is definitely more complicated."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36232", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36232/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36232/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36232/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36232", "id": 555394222, "node_id": "MDU6SXNzdWU1NTUzOTQyMjI=", "number": 36232, "title": "Convert TensorArray to RaggedTensor", "user": {"login": "chris-opendata", "id": 33976903, "node_id": "MDQ6VXNlcjMzOTc2OTAz", "avatar_url": "https://avatars2.githubusercontent.com/u/33976903?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chris-opendata", "html_url": "https://github.com/chris-opendata", "followers_url": "https://api.github.com/users/chris-opendata/followers", "following_url": "https://api.github.com/users/chris-opendata/following{/other_user}", "gists_url": "https://api.github.com/users/chris-opendata/gists{/gist_id}", "starred_url": "https://api.github.com/users/chris-opendata/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chris-opendata/subscriptions", "organizations_url": "https://api.github.com/users/chris-opendata/orgs", "repos_url": "https://api.github.com/users/chris-opendata/repos", "events_url": "https://api.github.com/users/chris-opendata/events{/privacy}", "received_events_url": "https://api.github.com/users/chris-opendata/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-27T07:12:32Z", "updated_at": "2020-01-27T13:03:18Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): TensorFlow-gpu 1.14+\r\n- Are you willing to contribute it (Yes/No): No.\r\n  Not this stage.\r\n\r\n**Describe the feature and the current behavior/state.**\r\n  As tf.keras.model could take a raggedtensor as an input, there is a need to convert a TensorArray to a RaggedTensor.\r\n\r\n**Will this change the current api? How?**\r\n   Yes, it requires a new api to TensorArray (say, to_ragged).\r\n\r\n**Who will benefit with this feature?**\r\n   This allows the output (no rectangle tensors of same shape) of tf.map_fn of batch-based slicing operation as an input to a tf.keras.layers.Conv2D seamlessly. \r\n\r\n**Any Other info.**\r\n  No.\r\n\r\nThank you"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36229", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36229/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36229/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36229/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36229", "id": 555340354, "node_id": "MDU6SXNzdWU1NTUzNDAzNTQ=", "number": 36229, "title": "external/pybind11\\include/pybind11/pybind11.h(139): error C2783: \u201cstd::tuple<pybind11::detail::type_caster<pybind11::handle,void>>::tuple(void) noexcept(<expr>)\u201d: \u672a\u80fd\u4e3a\u201c__formal\u201d\u63a8\u5bfc \u6a21\u677f \u53c2\u6570", "user": {"login": "ZTZ-99", "id": 36685818, "node_id": "MDQ6VXNlcjM2Njg1ODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/36685818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ZTZ-99", "html_url": "https://github.com/ZTZ-99", "followers_url": "https://api.github.com/users/ZTZ-99/followers", "following_url": "https://api.github.com/users/ZTZ-99/following{/other_user}", "gists_url": "https://api.github.com/users/ZTZ-99/gists{/gist_id}", "starred_url": "https://api.github.com/users/ZTZ-99/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ZTZ-99/subscriptions", "organizations_url": "https://api.github.com/users/ZTZ-99/orgs", "repos_url": "https://api.github.com/users/ZTZ-99/repos", "events_url": "https://api.github.com/users/ZTZ-99/events{/privacy}", "received_events_url": "https://api.github.com/users/ZTZ-99/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-01-27T03:34:18Z", "updated_at": "2020-01-29T14:40:37Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):Windows 10 1903\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary):source\r\n- TensorFlow version:1.15.0\r\n- Python version: Python 3.6.8rc1\r\n- Installed using virtualenv? pip? conda?: N/A\r\n- Bazel version (if compiling from source):0.25.0\r\n- GCC/Compiler version (if compiling from source):VS2017 MSVC 14.16.27023\r\n- CUDA/cuDNN version:10.2/7.0\r\n- GPU model and memory: GTX1070 8.0GB\r\n\r\n\r\n\r\n**Describe the problem**\r\n\u4f7f\u7528bazel\u7f16\u8bd1TensorFlow\u65f6\u63d0\u793a \r\nexternal/pybind11\\include/pybind11/pybind11.h(139): error C2783: \u201cstd::tuple<pybind11::detail::type_caster<pybind11::handle,void>>::tuple(void) noexcept(<expr>)\u201d: \u672a\u80fd\u4e3a\u201c__formal\u201d\u63a8\u5bfc \u6a21\u677f \u53c2\u6570\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n\u6309\u7167https://www.tensorflow.org/install/source_windows?hl=zh-cn#cpu\u914d\u7f6e\r\n\r\n**Any other info / logs**\r\n\r\n\u6ce8\u610f: \u5305\u542b\u6587\u4ef6:   F:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Professional\\VC\\Tools\\MSVC\\14.16.27023\\include\\sstream\r\nexternal/pybind11\\include/pybind11/pybind11.h(139): error C2783: \u201cstd::tuple<pybind11::detail::type_caster<pybind11::handle,void>>::tuple(void) noexcept(<expr>)\u201d: \u672a\u80fd\u4e3a\u201c__formal\u201d\u63a8\u5bfc \u6a21\u677f \u53c2\u6570\r\nF:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Professional\\VC\\Tools\\MSVC\\14.16.27023\\include\\tuple(429): note: \u53c2\u89c1\u201cstd::tuple<pybind11::detail::type_caster<pybind11::handle,void>>::tuple\u201d\u7684\u58f0\u660e\r\nexternal/pybind11\\include/pybind11/pybind11.h(73): note: \u53c2\u89c1\u5bf9\u6b63\u5728\u7f16\u8bd1\u7684\u51fd\u6570 \u6a21\u677f \u5b9e\u4f8b\u5316\u201cvoid pybind11::cpp_function::initialize<_Ty,R,pybind11::handle,pybind11::is_method>(Func &&,Return (__cdecl *)(pybind11::handle),const pybind11::is_method &)\u201d\u7684\u5f15\u7528\r\n        with\r\n        [\r\n            _Ty=pybind11::detail::enum_base::init::<lambda_46073d681fcd766eb481a3d0374dc63b>,\r\n            R=pybind11::str,\r\n            Func=pybind11::detail::enum_base::init::<lambda_46073d681fcd766eb481a3d0374dc63b>,\r\n            Return=pybind11::str\r\n        ]\r\nexternal/pybind11\\include/pybind11/pybind11.h(1416): note: \u53c2\u89c1\u5bf9\u6b63\u5728\u7f16\u8bd1\u7684\u51fd\u6570 \u6a21\u677f \u5b9e\u4f8b\u5316\u201cpybind11::cpp_function::cpp_function<pybind11::detail::enum_base::init::<lambda_46073d681fcd766eb481a3d0374dc63b>,pybind11::is_method,void>(Func &&,const pybind11::is_method &)\u201d\u7684\u5f15\u7528\r\n        with\r\n        [\r\n            Func=pybind11::detail::enum_base::init::<lambda_46073d681fcd766eb481a3d0374dc63b>\r\n        ]\r\nc:\\users\\reshiram\\_bazel_reshiram\\qnykyiqk\\execroot\\org_tensorflow\\external\\pybind11\\include\\pybind11\\cast.h(1556): note: \u53c2\u89c1\u5bf9\u6b63\u5728\u7f16\u8bd1\u7684 \u7c7b \u6a21\u677f \u5b9e\u4f8b\u5316 \"pybind11::detail::descr<8>\" \u7684\u5f15\u7528\r\nc:\\users\\reshiram\\_bazel_reshiram\\qnykyiqk\\execroot\\org_tensorflow\\external\\pybind11\\include\\pybind11\\cast.h(1554): note: \u53c2\u89c1\u5bf9\u6b63\u5728\u7f16\u8bd1\u7684 \u7c7b \u6a21\u677f \u5b9e\u4f8b\u5316 \"pybind11::detail::descr<5>\" \u7684\u5f15\u7528\r\nc:\\users\\reshiram\\_bazel_reshiram\\qnykyiqk\\execroot\\org_tensorflow\\external\\pybind11\\include\\pybind11\\cast.h(1109): note: \u53c2\u89c1\u5bf9\u6b63\u5728\u7f16\u8bd1\u7684 \u7c7b \u6a21\u677f \u5b9e\u4f8b\u5316 \"pybind11::detail::descr<7>\" \u7684\u5f15\u7528\r\nexternal/pybind11\\include/pybind11/pybind11.h(139): error C2783: \u201cstd::tuple<pybind11::detail::type_caster<pybind11::object,void>,pybind11::detail::type_caster<pybind11::object,void>>::tuple(void) noexcept(<expr>)\u201d: \u672a\u80fd\u4e3a\u201c__formal\u201d\u63a8\u5bfc \u6a21\u677f \u53c2\u6570\r\nF:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Professional\\VC\\Tools\\MSVC\\14.16.27023\\include\\tuple(429): note: \u53c2\u89c1\u201cstd::tuple<pybind11::detail::type_caster<pybind11::object,void>,pybind11::detail::type_caster<pybind11::object,void>>::tuple\u201d\u7684\u58f0\u660e\r\nexternal/pybind11\\include/pybind11/pybind11.h(73): note: \u53c2\u89c1\u5bf9\u6b63\u5728\u7f16\u8bd1\u7684\u51fd\u6570 \u6a21\u677f \u5b9e\u4f8b\u5316\u201cvoid pybind11::cpp_function::initialize<_Ty,R,pybind11::object,pybind11::object,pybind11::is_method>(Func &&,Return (__cdecl *)(pybind11::object,pybind11::object),const pybind11::is_method &)\u201d\u7684\u5f15\u7528\r\n        with\r\n        [\r\n            _Ty=pybind11::detail::enum_base::init::<lambda_ea06563a4979ca80a55a8ff1d879382b>,\r\n            R=bool,\r\n            Func=pybind11::detail::enum_base::init::<lambda_ea06563a4979ca80a55a8ff1d879382b>,\r\n            Return=bool\r\n        ]\r\nexternal/pybind11\\include/pybind11/pybind11.h(1474): note: \u53c2\u89c1\u5bf9\u6b63\u5728\u7f16\u8bd1\u7684\u51fd\u6570 \u6a21\u677f \u5b9e\u4f8b\u5316\u201cpybind11::cpp_function::cpp_function<pybind11::detail::enum_base::init::<lambda_ea06563a4979ca80a55a8ff1d879382b>,pybind11::is_method,void>(Func &&,const pybind11::is_method &)\u201d\u7684\u5f15\u7528\r\n        with\r\n        [\r\n            Func=pybind11::detail::enum_base::init::<lambda_ea06563a4979ca80a55a8ff1d879382b>\r\n        ]\r\nexternal/pybind11\\include/pybind11/pybind11.h(139): error C2783: \u201cstd::tuple<pybind11::detail::type_caster<pybind11::object,void>>::tuple(void) noexcept(<expr>)\u201d: \u672a\u80fd\u4e3a\u201c__formal\u201d\u63a8\u5bfc \u6a21\u677f \u53c2\u6570\r\nF:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Professional\\VC\\Tools\\MSVC\\14.16.27023\\include\\tuple(429): note: \u53c2\u89c1\u201cstd::tuple<pybind11::detail::type_caster<pybind11::object,void>>::tuple\u201d\u7684\u58f0\u660e\r\nexternal/pybind11\\include/pybind11/pybind11.h(73): note: \u53c2\u89c1\u5bf9\u6b63\u5728\u7f16\u8bd1\u7684\u51fd\u6570 \u6a21\u677f \u5b9e\u4f8b\u5316\u201cvoid pybind11::cpp_function::initialize<_Ty,R,pybind11::object,pybind11::is_method>(Func &&,Return (__cdecl *)(pybind11::object),const pybind11::is_method &)\u201d\u7684\u5f15\u7528\r\n        with\r\n        [\r\n            _Ty=pybind11::detail::enum_base::init::<lambda_909c581f503d5f259cf84551105b4f30>,\r\n            R=pybind11::int_,\r\n            Func=pybind11::detail::enum_base::init::<lambda_909c581f503d5f259cf84551105b4f30>,\r\n            Return=pybind11::int_\r\n        ]\r\nexternal/pybind11\\include/pybind11/pybind11.h(1507): note: \u53c2\u89c1\u5bf9\u6b63\u5728\u7f16\u8bd1\u7684\u51fd\u6570 \u6a21\u677f \u5b9e\u4f8b\u5316\u201cpybind11::cpp_function::cpp_function<pybind11::detail::enum_base::init::<lambda_909c581f503d5f259cf84551105b4f30>,pybind11::is_method,void>(Func &&,const pybind11::is_method &)\u201d\u7684\u5f15\u7528\r\n        with\r\n        [\r\n            Func=pybind11::detail::enum_base::init::<lambda_909c581f503d5f259cf84551105b4f30>\r\n        ]\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nINFO: Elapsed time: 767.769s, Critical Path: 62.28s\r\nINFO: 2518 processes: 2518 local.\r\nFAILED: Build did NOT complete successfully\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36228", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36228/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36228/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/36228/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/36228", "id": 555300732, "node_id": "MDU6SXNzdWU1NTUzMDA3MzI=", "number": 36228, "title": "tensorflow java GPU compute capabilties 6.0 instead of 3.7", "user": {"login": "callicles", "id": 4429209, "node_id": "MDQ6VXNlcjQ0MjkyMDk=", "avatar_url": "https://avatars2.githubusercontent.com/u/4429209?v=4", "gravatar_id": "", "url": "https://api.github.com/users/callicles", "html_url": "https://github.com/callicles", "followers_url": "https://api.github.com/users/callicles/followers", "following_url": "https://api.github.com/users/callicles/following{/other_user}", "gists_url": "https://api.github.com/users/callicles/gists{/gist_id}", "starred_url": "https://api.github.com/users/callicles/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/callicles/subscriptions", "organizations_url": "https://api.github.com/users/callicles/orgs", "repos_url": "https://api.github.com/users/callicles/repos", "events_url": "https://api.github.com/users/callicles/events{/privacy}", "received_events_url": "https://api.github.com/users/callicles/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-26T22:55:45Z", "updated_at": "2020-02-18T17:13:04Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu Linux 18.06\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version: 1.13.0, 1.13.1, 1.13.2, 1.14.0, 1.15.0\r\n- Python version: 3.6\r\n- Installed using virtualenv? pip? conda?: Nope\r\n- CUDA/cuDNN version: 10.1\r\n- GPU model and memory: K80\r\n\r\n**Describe the problem**\r\nI am loading a model in a Java Server using the Java API to do inference. The inference is working but not running on the GPU. I get an error message provided below.\r\n\r\nWe have been using the python version of the same tensorflow release on the same GPU (K80) without an issue. This is only a problem with the java driver. \r\n\r\nI believe the culprit is this line:\r\nhttps://github.com/tensorflow/tensorflow/blob/aa50d2b624c7e8d56b4b1644c4ccf489d8e8c55c/tensorflow/tools/ci_build/presubmit/ubuntu_16/gpu_py36_full/build.sh#L41-L44\r\n\r\nThe comment seems to indicate that this env variable is not used. I don't really understand the setup but it looks like the Java build is picking it up.\r\n\r\nNo other build seems to be requiring compute 6.0, everything is set to 3.7 (K80) which would make sense since K80 are probably the cheapest GPUs available on cloud.\r\n\r\nhttps://github.com/tensorflow/tensorflow/blob/9590c4c32dd4346ea5c35673336f5912c6072bf2/tensorflow/tools/ci_build/xla/linux/gpu/run_py3.sh#L31\r\n\r\nhttps://github.com/tensorflow/tensorflow/blob/938c08e5e612c5a581262e409cda08db61b25d25/tensorflow/tools/ci_build/Dockerfile.gpu.ppc64le#L28\r\n\r\n[Search of all  TF_CUDA_COMPUTE_CAPABILITIES in the Repo](https://github.com/tensorflow/tensorflow/search?q=TF_CUDA_COMPUTE_CAPABILITIES&unscoped_q=TF_CUDA_COMPUTE_CAPABILITIES)\r\n\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nUse the Java Driver on GPU.\r\n\r\n**Any other info / logs**\r\n```\r\n 2020-01-25 23:17:43.458562: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1717] Ignoring visible gpu device (device: 0, name: Tesla K80, pci bus id: 0000:00:04.0, compute capability: 3.7) with Cuda compute capability 3.7. The min \u2502\r\n\u2502 imum required Cuda capability is 6.0.                                                                                                                                                                                                      \u2502\r\n\u2502 2020-01-25 23:17:43.519712: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1181] Device interconnect StreamExecutor with strength 1 edge matrix:                                                                                       \u2502\r\n\u2502 2020-01-25 23:17:43.519748: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1187]      0                                                                                                                                                \u2502\r\n\u2502 2020-01-25 23:17:43.519762: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1200] 0:   N\r\n```\r\n\r\nCI Logs that contain compute restriction:\r\nhttps://source.cloud.google.com/results/invocations/37ab790b-7136-4d77-a415-f03b9909e3b2/targets/tensorflow%2Fgithub%2Fubuntu_16%2Fgpu_py36_full%2Fcontinuous/log\r\n"}]