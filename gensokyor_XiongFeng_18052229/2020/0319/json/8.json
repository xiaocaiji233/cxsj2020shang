[{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35904", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35904/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35904/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35904/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/35904", "id": 550362991, "node_id": "MDExOlB1bGxSZXF1ZXN0MzYzMjgyNTg2", "number": 35904, "title": "Pydoc fixes for StructuredTensor", "user": {"login": "BryanCutler", "id": 4534389, "node_id": "MDQ6VXNlcjQ1MzQzODk=", "avatar_url": "https://avatars3.githubusercontent.com/u/4534389?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BryanCutler", "html_url": "https://github.com/BryanCutler", "followers_url": "https://api.github.com/users/BryanCutler/followers", "following_url": "https://api.github.com/users/BryanCutler/following{/other_user}", "gists_url": "https://api.github.com/users/BryanCutler/gists{/gist_id}", "starred_url": "https://api.github.com/users/BryanCutler/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BryanCutler/subscriptions", "organizations_url": "https://api.github.com/users/BryanCutler/orgs", "repos_url": "https://api.github.com/users/BryanCutler/repos", "events_url": "https://api.github.com/users/BryanCutler/events{/privacy}", "received_events_url": "https://api.github.com/users/BryanCutler/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-01-15T18:45:58Z", "updated_at": "2020-03-04T21:00:18Z", "closed_at": null, "author_association": "MEMBER", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/35904", "html_url": "https://github.com/tensorflow/tensorflow/pull/35904", "diff_url": "https://github.com/tensorflow/tensorflow/pull/35904.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/35904.patch"}, "body": "Minor fixes for StructuredTensor pydocs that had incorrect example code and Python 2 style print statements."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35897", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35897/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35897/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35897/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35897", "id": 550131958, "node_id": "MDU6SXNzdWU1NTAxMzE5NTg=", "number": 35897, "title": "tensorflow program crashes with `CUDA_ERROR_ILLEGAL_ADDRESS` with `tf.boolean_mask` used.", "user": {"login": "leckie-chn", "id": 3284327, "node_id": "MDQ6VXNlcjMyODQzMjc=", "avatar_url": "https://avatars3.githubusercontent.com/u/3284327?v=4", "gravatar_id": "", "url": "https://api.github.com/users/leckie-chn", "html_url": "https://github.com/leckie-chn", "followers_url": "https://api.github.com/users/leckie-chn/followers", "following_url": "https://api.github.com/users/leckie-chn/following{/other_user}", "gists_url": "https://api.github.com/users/leckie-chn/gists{/gist_id}", "starred_url": "https://api.github.com/users/leckie-chn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/leckie-chn/subscriptions", "organizations_url": "https://api.github.com/users/leckie-chn/orgs", "repos_url": "https://api.github.com/users/leckie-chn/repos", "events_url": "https://api.github.com/users/leckie-chn/events{/privacy}", "received_events_url": "https://api.github.com/users/leckie-chn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-01-15T11:34:09Z", "updated_at": "2020-03-18T04:14:20Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): docker image `nvcr.io/nvidia/tensorflow:19.09-py3`\r\n- ~Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:~\r\n- TensorFlow installed from (source or binary): see docker image\r\n- TensorFlow version (use command below): 1.14.0+nv\r\n- Python version: 3.6.8\r\n- ~Bazel version (if compiling from source):~\r\n- ~GCC/Compiler version (if compiling from source):~\r\n- CUDA/cuDNN version: 10.1\r\n- GPU model and memory: **Tesla V100-PCIE-16GB**\r\n\r\n**Describe the current behavior**\r\nwith the following code added in `model_fn`, program crashes with `CUDA_ERROR_ILLEGAL_ADDRESS`:\r\n```python\r\n           def create_mean_metrics(t_logits, t_label, v_label):\r\n                t_filtered = tf.boolean_mask(t_logits, tf.equal(t_map_label, v_label))\r\n                return tf.metrics.mean_tensor(tf.reduce_mean(t_filtered), tf.size(t_filtered))\r\n\r\n            eval_metrics = {\r\n                'mean_perfect': create_mean_metrics(t_logits, t_map_label, 0),\r\n                'mean_excellent': create_mean_metrics(t_logits, t_map_label, 1),\r\n                'mean_good': create_mean_metrics(t_logits, t_map_label, 2),\r\n                'mean_fair': create_mean_metrics(t_logits, t_map_label, 3),\r\n                'mean_bad': create_mean_metrics(t_logits, t_map_label, 5),\r\n            }\r\n\r\n            return tf.estimator.EstimatorSpec(\r\n                mode=mode,\r\n                loss=t_eval_loss,\r\n                eval_metric_ops=eval_metrics,\r\n            )\r\n```\r\nif the `eval_metrics` part removed, the program will run without crashes.\r\n\r\n**Describe the expected behavior**\r\nprogram run without crashing.\r\n\r\n**Other info / logs**\r\n```\r\n2020-01-15 11:07:08.705510: I tensorflow/stream_executor/cuda/ptxas_utils.cc:202] \r\n2020-01-15 11:07:11.712068: E tensorflow/stream_executor/cuda/cuda_driver.cc:1048] Internal: could not synchronize on CUDA stream: CUDA_ERROR_ILLEGAL_ADDRESS: an illegal memory access was encountered :: *** Begin stack trace ***\r\n        tensorflow::CurrentStackTrace()\r\n        stream_executor::gpu::GpuDriver::SynchronizeStream(stream_executor::gpu::GpuContext*, CUstream_st*)\r\n        stream_executor::gpu::GpuExecutor::BlockHostUntilDone(stream_executor::Stream*)\r\n        stream_executor::StreamExecutor::BlockHostUntilDone(stream_executor::Stream*)\r\n        stream_executor::Stream::BlockHostUntilDone()\r\n\r\n\r\n\r\n\r\n\r\n        tensorflow::XlaRunOp::Compute(tensorflow::OpKernelContext*)\r\n        tensorflow::BaseGPUDevice::ComputeHelper(tensorflow::OpKernel*, tensorflow::OpKernelContext*)\r\n        tensorflow::BaseGPUDevice::Compute(tensorflow::OpKernel*, tensorflow::OpKernelContext*)\r\n\r\n\r\n        Eigen::ThreadPoolTempl<tensorflow::thread::EigenEnvironment>::WorkerLoop(int)\r\n        std::_Function_handler<void (), tensorflow::thread::EigenEnvironment::CreateThread(std::function<void ()>)::{lambda()#1}>::_M_invoke(std::_Any_data const&)\r\n\r\n\r\n        clone\r\n*** End stack trace ***\r\n\r\n2020-01-15 11:07:11.765522: E tensorflow/stream_executor/cuda/cuda_driver.cc:1032] could not synchronize on CUDA context: CUDA_ERROR_ILLEGAL_ADDRESS: an illegal memory access was encountered :: *** Begin stack trace ***\r\n        tensorflow::CurrentStackTrace()\r\n        stream_executor::gpu::GpuDriver::SynchronizeContext(stream_executor::gpu::GpuContext*)\r\n        stream_executor::StreamExecutor::SynchronizeAllActivity()\r\n        tensorflow::XlaCompilationCache::~XlaCompilationCache()\r\n        tensorflow::XlaCompilationCache::~XlaCompilationCache()\r\n        tensorflow::ResourceMgr::Clear()\r\n        tensorflow::DirectSession::~DirectSession()\r\n        tensorflow::DirectSession::~DirectSession()\r\n        tensorflow::SessionRef::Close()\r\n        TF_CloseSession\r\n\r\n\r\n        _PyEval_EvalFrameDefault\r\n\r\n\r\n        _PyEval_EvalFrameDefault\r\n\r\n\r\n        _PyEval_EvalFrameDefault\r\n\r\n\r\n        _PyEval_EvalFrameDefault\r\n\r\n\r\n        _PyEval_EvalFrameDefault\r\n\r\n\r\n        _PyEval_EvalFrameDefault\r\n\r\n\r\n\r\n        _PyEval_EvalFrameDefault\r\n        _PyFunction_FastCallDict\r\n\r\n        _PyObject_FastCallDict\r\n        PyObject_CallFunctionObjArgs\r\n        _PyEval_EvalFrameDefault\r\n\r\n\r\n\r\n        _PyEval_EvalFrameDefault\r\n\r\n\r\n\r\n        _PyEval_EvalFrameDefault\r\n\r\n\r\n\r\n        _PyEval_EvalFrameDefault\r\n\r\n\r\n\r\n        _PyEval_EvalFrameDefault\r\n\r\n\r\n        _PyEval_EvalFrameDefault\r\n\r\n\r\n        _PyEval_EvalFrameDefault\r\n        _PyFunction_FastCallDict\r\n\r\n\r\n\r\n        _PyObject_FastCallKeywords\r\n\r\n        _PyEval_EvalFrameDefault\r\n\r\n\r\n\r\n        _PyEval_EvalFrameDefault\r\n\r\n        _PyFunction_FastCallDict\r\n\r\n\r\n\r\n        _PyObject_FastCallKeywords\r\n\r\n        _PyEval_EvalFrameDefault\r\n\r\n\r\n\r\n        _PyEval_EvalFrameDefault\r\n\r\n\r\n        _PyEval_EvalFrameDefault\r\n\r\n\r\n        _PyEval_EvalFrameDefault\r\n\r\n\r\n        _PyEval_EvalFrameDefault\r\n\r\n\r\n\r\n        _PyEval_EvalFrameDefault\r\n\r\n\r\n        _PyEval_EvalFrameDefault\r\n\r\n\r\n        _PyEval_EvalFrameDefault\r\n\r\n\r\n\r\n        _PyEval_EvalFrameDefault\r\n\r\n\r\n        _PyEval_EvalFrameDefault\r\n\r\n        PyEval_EvalCode\r\n\r\n        PyRun_FileExFlags\r\n        PyRun_SimpleFileExFlags\r\n        Py_Main\r\n        main\r\n        __libc_start_main\r\n        _start\r\n*** End stack trace ***\r\n\r\n2020-01-15 11:07:11.765871: E tensorflow/compiler/jit/xla_compilation_cache.cc:53] Error synchronizing activity while waiting for all programs to complete\r\n2020-01-15 11:07:11.768797: E tensorflow/stream_executor/cuda/cuda_driver.cc:763] failed to unload module 0x7f66709c3ec0; leaking: CUDA_ERROR_ILLEGAL_ADDRESS: an illegal memory access was encountered\r\n2020-01-15 11:07:11.776140: E tensorflow/stream_executor/cuda/cuda_driver.cc:763] failed to unload module 0x7f66748a71f0; leaking: CUDA_ERROR_ILLEGAL_ADDRESS: an illegal memory access was encountered\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py\", line 1356, in _do_call\r\n    return fn(*args)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py\", line 1341, in _run_fn\r\n    options, feed_dict, fetch_list, target_list, run_metadata)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py\", line 1429, in _call_tf_sessionrun\r\n    run_metadata)\r\ntensorflow.python.framework.errors_impl.InternalError: 2 root error(s) found.\r\n  (0) Internal: Failed to complete all kernels launched on stream 0x1f50d730: could not synchronize on CUDA stream: CUDA_ERROR_ILLEGAL_ADDRESS: an illegal memory access was encountered\r\n         [[{{node cluster_0_1/xla_run}}]]\r\n         [[Identity/_941]]\r\n  (1) Internal: Failed to complete all kernels launched on stream 0x1f50d730: could not synchronize on CUDA stream: CUDA_ERROR_ILLEGAL_ADDRESS: an illegal memory access was encountered\r\n         [[{{node cluster_0_1/xla_run}}]]\r\n0 successful operations.\r\n0 derived errors ignored.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"hvd_combine_model_train_fidelity.py\", line 684, in <module>\r\n    tf.app.run()\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/platform/app.py\", line 40, in run\r\n    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)\r\n  File \"/usr/local/lib/python3.6/dist-packages/absl/app.py\", line 299, in run\r\n    _run_main(main, args)\r\n  File \"/usr/local/lib/python3.6/dist-packages/absl/app.py\", line 250, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"hvd_combine_model_train_fidelity.py\", line 464, in main\r\n    max_steps=num_train_steps, hooks=training_hooks)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_estimator/python/estimator/estimator.py\", line 367, in train\r\n    loss = self._train_model(input_fn, hooks, saving_listeners)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_estimator/python/estimator/estimator.py\", line 1158, in _train_model\r\n    return self._train_model_default(input_fn, hooks, saving_listeners)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_estimator/python/estimator/estimator.py\", line 1192, in _train_model_default\r\n    saving_listeners)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_estimator/python/estimator/estimator.py\", line 1480, in _train_with_estimator_spec\r\n    log_step_count_steps=log_step_count_steps) as mon_sess:\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/training/monitored_session.py\", line 584, in MonitoredTrainingSession\r\n    stop_grace_period_secs=stop_grace_period_secs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/training/monitored_session.py\", line 1007, in __init__\r\n    stop_grace_period_secs=stop_grace_period_secs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/training/monitored_session.py\", line 725, in __init__\r\n    self._sess = _RecoverableSession(self._coordinated_creator)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/training/monitored_session.py\", line 1200, in __init__\r\n    _WrappedSession.__init__(self, self._create_session())\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/training/monitored_session.py\", line 1205, in _create_session\r\n    return self._sess_creator.create_session()\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/training/monitored_session.py\", line 878, in create_session\r\n    hook.after_create_session(self.tf_sess, self.coord)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_estimator/python/estimator/hooks/hooks.py\", line 180, in after_create_session\r\n    self._evaluate(session)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_estimator/python/estimator/hooks/hooks.py\", line 203, in _evaluate\r\n    output_dir=self._eval_dir)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_estimator/python/estimator/estimator.py\", line 1609, in _evaluate_run\r\n    config=self._session_config)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/training/evaluation.py\", line 272, in _evaluate_once\r\n    session.run(eval_ops, feed_dict)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/training/monitored_session.py\", line 754, in run\r\n    run_metadata=run_metadata)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/training/monitored_session.py\", line 1252, in run\r\n    run_metadata=run_metadata)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/training/monitored_session.py\", line 1353, in run\r\n    raise six.reraise(*original_exc_info)\r\n  File \"/usr/local/lib/python3.6/dist-packages/six.py\", line 693, in reraise\r\n    raise value\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/training/monitored_session.py\", line 1338, in run\r\n    return self._sess.run(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/training/monitored_session.py\", line 1411, in run\r\n    run_metadata=run_metadata)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/training/monitored_session.py\", line 1169, in run\r\n    return self._sess.run(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py\", line 950, in run\r\n    run_metadata_ptr)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py\", line 1173, in _run\r\n    feed_dict_tensor, options, run_metadata)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py\", line 1350, in _do_run\r\n    run_metadata)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py\", line 1370, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.InternalError: 2 root error(s) found.\r\n  (0) Internal: Failed to complete all kernels launched on stream 0x1f50d730: could not synchronize on CUDA stream: CUDA_ERROR_ILLEGAL_ADDRESS: an illegal memory access was encountered\r\n         [[{{node cluster_0_1/xla_run}}]]\r\n         [[Identity/_941]]\r\n  (1) Internal: Failed to complete all kernels launched on stream 0x1f50d730: could not synchronize on CUDA stream: CUDA_ERROR_ILLEGAL_ADDRESS: an illegal memory access was encountered\r\n         [[{{node cluster_0_1/xla_run}}]]\r\n0 successful operations.\r\n0 derived errors ignored.\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35890", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35890/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35890/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35890/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/35890", "id": 550018763, "node_id": "MDExOlB1bGxSZXF1ZXN0MzYyOTk5ODA1", "number": 35890, "title": "[ROCm] Fix for //tensorflow/python/kernel_tests/signal:mel_ops_test", "user": {"login": "ekuznetsov139", "id": 12205429, "node_id": "MDQ6VXNlcjEyMjA1NDI5", "avatar_url": "https://avatars2.githubusercontent.com/u/12205429?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ekuznetsov139", "html_url": "https://github.com/ekuznetsov139", "followers_url": "https://api.github.com/users/ekuznetsov139/followers", "following_url": "https://api.github.com/users/ekuznetsov139/following{/other_user}", "gists_url": "https://api.github.com/users/ekuznetsov139/gists{/gist_id}", "starred_url": "https://api.github.com/users/ekuznetsov139/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ekuznetsov139/subscriptions", "organizations_url": "https://api.github.com/users/ekuznetsov139/orgs", "repos_url": "https://api.github.com/users/ekuznetsov139/repos", "events_url": "https://api.github.com/users/ekuznetsov139/events{/privacy}", "received_events_url": "https://api.github.com/users/ekuznetsov139/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-15T07:43:01Z", "updated_at": "2020-03-13T12:01:54Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/35890", "html_url": "https://github.com/tensorflow/tensorflow/pull/35890", "diff_url": "https://github.com/tensorflow/tensorflow/pull/35890.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/35890.patch"}, "body": "The test //tensorflow/python/kernel_tests/signal:mel_ops_test fails on ROCm in eager mode by slightly exceeding the error tolerance.\r\nThis patch replaces the calls to exp and log with more accurate expm1 and log1p (which is something that occurs automatically in graph mode but not in eager mode), bringing the error back below threshold."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35889", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35889/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35889/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35889/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35889", "id": 549997319, "node_id": "MDU6SXNzdWU1NDk5OTczMTk=", "number": 35889, "title": "STM32F7 Hello World example fails for arm_cmplx_mag_squared_q10p6.c", "user": {"login": "jomoengineer", "id": 10980402, "node_id": "MDQ6VXNlcjEwOTgwNDAy", "avatar_url": "https://avatars2.githubusercontent.com/u/10980402?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jomoengineer", "html_url": "https://github.com/jomoengineer", "followers_url": "https://api.github.com/users/jomoengineer/followers", "following_url": "https://api.github.com/users/jomoengineer/following{/other_user}", "gists_url": "https://api.github.com/users/jomoengineer/gists{/gist_id}", "starred_url": "https://api.github.com/users/jomoengineer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jomoengineer/subscriptions", "organizations_url": "https://api.github.com/users/jomoengineer/orgs", "repos_url": "https://api.github.com/users/jomoengineer/repos", "events_url": "https://api.github.com/users/jomoengineer/events{/privacy}", "received_events_url": "https://api.github.com/users/jomoengineer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1589976566, "node_id": "MDU6TGFiZWwxNTg5OTc2NTY2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:micro", "name": "comp:micro", "color": "3e2eea", "default": false, "description": "Related to TensorFlow Lite Microcontrollers"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MeghnaNatraj", "id": 8790823, "node_id": "MDQ6VXNlcjg3OTA4MjM=", "avatar_url": "https://avatars0.githubusercontent.com/u/8790823?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MeghnaNatraj", "html_url": "https://github.com/MeghnaNatraj", "followers_url": "https://api.github.com/users/MeghnaNatraj/followers", "following_url": "https://api.github.com/users/MeghnaNatraj/following{/other_user}", "gists_url": "https://api.github.com/users/MeghnaNatraj/gists{/gist_id}", "starred_url": "https://api.github.com/users/MeghnaNatraj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MeghnaNatraj/subscriptions", "organizations_url": "https://api.github.com/users/MeghnaNatraj/orgs", "repos_url": "https://api.github.com/users/MeghnaNatraj/repos", "events_url": "https://api.github.com/users/MeghnaNatraj/events{/privacy}", "received_events_url": "https://api.github.com/users/MeghnaNatraj/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MeghnaNatraj", "id": 8790823, "node_id": "MDQ6VXNlcjg3OTA4MjM=", "avatar_url": "https://avatars0.githubusercontent.com/u/8790823?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MeghnaNatraj", "html_url": "https://github.com/MeghnaNatraj", "followers_url": "https://api.github.com/users/MeghnaNatraj/followers", "following_url": "https://api.github.com/users/MeghnaNatraj/following{/other_user}", "gists_url": "https://api.github.com/users/MeghnaNatraj/gists{/gist_id}", "starred_url": "https://api.github.com/users/MeghnaNatraj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MeghnaNatraj/subscriptions", "organizations_url": "https://api.github.com/users/MeghnaNatraj/orgs", "repos_url": "https://api.github.com/users/MeghnaNatraj/repos", "events_url": "https://api.github.com/users/MeghnaNatraj/events{/privacy}", "received_events_url": "https://api.github.com/users/MeghnaNatraj/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-01-15T06:44:23Z", "updated_at": "2020-03-18T22:40:07Z", "closed_at": null, "author_association": "NONE", "body": "@tensorflow/micro\r\n\r\n**System information**\r\n- Host OS Platform and Distribution (e.g., Linux Ubuntu 16.04): \"Ubuntu\"\r\nVERSION=\"18.04.3 LTS (Bionic Beaver)\"\r\n- TensorFlow installed from (source or binary): source\r\n- Tensorflow version (commit SHA if source): current\r\n- Target platform (e.g. Arm Mbed OS, Arduino Nano 33 etc.): Arm Mbed OS - STM32F7\r\n\r\n**Describe the problem**\r\nWhen running make for \"generate_hello_world_mbed_project\", a failure is seen and it stops building. \r\nRef: [https://github.com/tensorflow/tensorflow/tree/master/tensorflow/lite/micro/examples/hello_world](url)\r\nEx:\r\n`$ make -f tensorflow/lite/micro/tools/make/Makefile TARGET=mbed TAGS=\"CMSIS disco_f746ng\" generate_hello_world_mbed_project`\r\n\r\n**Please provide the exact sequence of commands/steps when you ran into the problem**\r\n```\r\n$ git clone --recursive https://github.com/tensorflow/tensorflow.git\r\n\r\n$ cd tensorflow/\r\n\r\n$ make -f tensorflow/lite/micro/tools/make/Makefile TARGET=mbed TAGS=\"CMSIS disco_f746ng\" generate_hello_world_mbed_project\r\n```\r\n\r\nError seen:\r\n\r\n```\r\n$ make -f tensorflow/lite/micro/tools/make/Makefile TARGET=mbed TAGS=\"CMSIS disco_f746ng\" generate_hello_world_mbed_project\r\ntensorflow/lite/micro/tools/make/download_and_extract.sh \"https://github.com/google/gemmlowp/archive/719139ce755a0f31cbf1c37f7f98adcc7fc9f425.zip\" \"7e8191b24853d75de2af87622ad293ba\" tensorflow/lite/micro/tools/make/downloads/gemmlowp  \r\ndownloading https://github.com/google/gemmlowp/archive/719139ce755a0f31cbf1c37f7f98adcc7fc9f425.zip\r\ntensorflow/lite/micro/tools/make/download_and_extract.sh \"https://storage.googleapis.com/mirror.tensorflow.org/github.com/google/flatbuffers/archive/v1.11.0.tar.gz\" \"02c64880acb89dbd57eebacfd67200d8\" tensorflow/lite/micro/tools/make/downloads/flatbuffers  \r\ndownloading https://storage.googleapis.com/mirror.tensorflow.org/github.com/google/flatbuffers/archive/v1.11.0.tar.gz\r\ntensorflow/lite/micro/tools/make/download_and_extract.sh \"https://github.com/ARM-software/CMSIS_5/archive/d76d5e3acb87cf089daf50b31f991026149ecb6c.zip\" \"866f79cfb86f7aee29a320aeda530aca\" tensorflow/lite/micro/tools/make/downloads/cmsis  \r\ndownloading https://github.com/ARM-software/CMSIS_5/archive/d76d5e3acb87cf089daf50b31f991026149ecb6c.zip\r\ntensorflow/lite/micro/tools/make/download_and_extract.sh \"https://developer.arm.com/-/media/Files/downloads/gnu-rm/7-2018q2/gcc-arm-none-eabi-7-2018-q2-update-linux.tar.bz2\" \"299ebd3f1c2c90930d28ab82e5d8d6c0\" tensorflow/lite/micro/tools/make/downloads/gcc_embedded  \r\ndownloading https://developer.arm.com/-/media/Files/downloads/gnu-rm/7-2018q2/gcc-arm-none-eabi-7-2018-q2-update-linux.tar.bz2\r\ntensorflow/lite/micro/tools/make/download_and_extract.sh \"https://storage.googleapis.com/download.tensorflow.org/data/tf_lite_micro_person_data_int8_grayscale_2020_01_13.zip\" \"8a7d2c70325f53136faea6dde517b8cc\" tensorflow/lite/micro/tools/make/downloads/person_model_int8  \r\ndownloading https://storage.googleapis.com/download.tensorflow.org/data/tf_lite_micro_person_data_int8_grayscale_2020_01_13.zip\r\ntensorflow/lite/micro/tools/make/download_and_extract.sh \"https://github.com/mborgerding/kissfft/archive/v130.zip\" \"438ba1fef5783cc5f5f201395cc477ca\" tensorflow/lite/micro/tools/make/downloads/kissfft patch_kissfft \r\ndownloading https://github.com/mborgerding/kissfft/archive/v130.zip\r\nFinished patching kissfft\r\ntensorflow/lite/micro/tools/make/download_and_extract.sh \"https://storage.googleapis.com/download.tensorflow.org/data/tf_lite_micro_person_data_grayscale_2019_11_21.zip\" \"fe2934bd0788f1dcc7af3f0a954542ab\" tensorflow/lite/micro/tools/make/downloads/person_model_grayscale  \r\ndownloading https://storage.googleapis.com/download.tensorflow.org/data/tf_lite_micro_person_data_grayscale_2019_11_21.zip\r\nmake: *** No rule to make target 'tensorflow/lite/micro/tools/make/gen/mbed_cortex-m4/prj/hello_world/mbed/tensorflow/lite/micro/tools/make/downloads/CMSIS_ext/arm_cmplx_mag_squared_q10p6.c', needed by 'generate_hello_world_mbed_project'.  Stop.\r\n\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35884", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35884/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35884/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35884/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35884", "id": 549952398, "node_id": "MDU6SXNzdWU1NDk5NTIzOTg=", "number": 35884, "title": "Benchmark test failed on windows", "user": {"login": "fsx950223", "id": 17592563, "node_id": "MDQ6VXNlcjE3NTkyNTYz", "avatar_url": "https://avatars0.githubusercontent.com/u/17592563?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fsx950223", "html_url": "https://github.com/fsx950223", "followers_url": "https://api.github.com/users/fsx950223/followers", "following_url": "https://api.github.com/users/fsx950223/following{/other_user}", "gists_url": "https://api.github.com/users/fsx950223/gists{/gist_id}", "starred_url": "https://api.github.com/users/fsx950223/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fsx950223/subscriptions", "organizations_url": "https://api.github.com/users/fsx950223/orgs", "repos_url": "https://api.github.com/users/fsx950223/repos", "events_url": "https://api.github.com/users/fsx950223/events{/privacy}", "received_events_url": "https://api.github.com/users/fsx950223/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-15T04:03:03Z", "updated_at": "2020-01-16T11:40:34Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):Windows\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):binary\r\n- TensorFlow version (use command below):tf-nightly\r\n- Python version:3.7.5\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nFile \"\\\\?\\C:\\Users\\RUNNER~1\\AppData\\Local\\Temp\\Bazel.runfiles_e847arzc\\runfiles\\__main__\\tensorflow_addons\\activations\\rrelu_test.py\", line 88, in benchmarkRreluOp\r\n    self.run_op_benchmark(sess, result.op, min_iters=25)\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.7.5\\x64\\lib\\site-packages\\tensorflow_core\\python\\platform\\benchmark.py\", line 389, in run_op_benchmark\r\n    \"throughput\": mbs / median_delta\r\nZeroDivisionError: float division by zero\r\n\r\n**Describe the expected behavior**\r\nSame behavior as ubuntu\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n```python \r\nself.run_op_benchmark(sess, result.op, min_iters=25)\r\n```\r\n\r\n**Other info / logs**\r\n\r\nhttps://github.com/tensorflow/addons/issues/839\r\nIt seems [```time.time()```](https://github.com/tensorflow/tensorflow/blob/590d6eef7e91a6a7392c8ffffb7b58f2e0c8bc6b/tensorflow/python/platform/benchmark.py#L294) cause the problem and ```timeit.default_timer()``` could fix the problem"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35876", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35876/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35876/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35876/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35876", "id": 549773838, "node_id": "MDU6SXNzdWU1NDk3NzM4Mzg=", "number": 35876, "title": "Keras `predict` with sigmoid output returns probabilities instead of labels", "user": {"login": "Kodiologist", "id": 322730, "node_id": "MDQ6VXNlcjMyMjczMA==", "avatar_url": "https://avatars3.githubusercontent.com/u/322730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kodiologist", "html_url": "https://github.com/Kodiologist", "followers_url": "https://api.github.com/users/Kodiologist/followers", "following_url": "https://api.github.com/users/Kodiologist/following{/other_user}", "gists_url": "https://api.github.com/users/Kodiologist/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kodiologist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kodiologist/subscriptions", "organizations_url": "https://api.github.com/users/Kodiologist/orgs", "repos_url": "https://api.github.com/users/Kodiologist/repos", "events_url": "https://api.github.com/users/Kodiologist/events{/privacy}", "received_events_url": "https://api.github.com/users/Kodiologist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2020-01-14T19:34:44Z", "updated_at": "2020-02-21T18:47:07Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yee\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 19.10\r\n- TensorFlow installed from (source or binary): PyPI wheel\r\n- TensorFlow version: v2.1.0-rc2-17-ge5bf8de\r\n- Python version: 3.7.5\r\n\r\n**Describe the current behavior**\r\n\r\nThe `predict` method of a Keras model with a sigmoid activiation function for the output returns probabilities.\r\n\r\n**Describe the expected behavior**\r\n\r\n`predict` should return class indices or class labels, as in the case of softmax activation. The current behavior also seems to be redundant with the method `predict_proba`, which in turn doesn't seem to be documented, at least on https://www.tensorflow.org/api_docs/python/tf/keras/Model\r\n\r\n#7287 is perhaps related.\r\n\r\n**Code to reproduce the issue**\r\n\r\n```python\r\nfrom tensorflow.keras.models import Sequential\r\nfrom tensorflow.keras.layers import Dense, Activation\r\n\r\nmodel = Sequential([\r\n    Dense(10, activation = \"relu\"),\r\n    Dense(1, activation = \"sigmoid\")])\r\nmodel.compile(\r\n    optimizer = \"rmsprop\",\r\n    loss = \"binary_crossentropy\")\r\nmodel.fit(\r\n    [[1, 2], [1, 3], [1, 1], [2, 2], [2, 3]],\r\n    [True, False, False, True, True])\r\n\r\nprint(model.predict([[1, 2], [1, 3], [1, 1]]))\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35875", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35875/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35875/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35875/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35875", "id": 549750336, "node_id": "MDU6SXNzdWU1NDk3NTAzMzY=", "number": 35875, "title": "Colab crashes due to tcmalloc large allocation", "user": {"login": "DineshRajanT", "id": 37593528, "node_id": "MDQ6VXNlcjM3NTkzNTI4", "avatar_url": "https://avatars2.githubusercontent.com/u/37593528?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DineshRajanT", "html_url": "https://github.com/DineshRajanT", "followers_url": "https://api.github.com/users/DineshRajanT/followers", "following_url": "https://api.github.com/users/DineshRajanT/following{/other_user}", "gists_url": "https://api.github.com/users/DineshRajanT/gists{/gist_id}", "starred_url": "https://api.github.com/users/DineshRajanT/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DineshRajanT/subscriptions", "organizations_url": "https://api.github.com/users/DineshRajanT/orgs", "repos_url": "https://api.github.com/users/DineshRajanT/repos", "events_url": "https://api.github.com/users/DineshRajanT/events{/privacy}", "received_events_url": "https://api.github.com/users/DineshRajanT/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-01-14T18:46:39Z", "updated_at": "2020-03-18T20:30:17Z", "closed_at": null, "author_association": "NONE", "body": "tcmalloc: large alloc 6645350400 bytes == 0x695ff4000 @ 0x7f6d5f840b6b 0x7f6d5f860379 0x7f6d2b49ec27 0x7f6d2b291a7f 0x7f6d2b15d3cb 0x7f6d2b123526 0x7f6d2b1243b3 0x7f6d2b124583 0x7f6d2f9ad7b5 0x7f6d3012d949 0x7f6d3012e3fe 0x7f6d3010ab82 0x7f6d3010b5bf 0x7f6d3010f44c 0x7f6d301110aa 0x7f6d2df5db25 0x7f6d2def4e1b 0x50a8af 0x50c5b9 0x508245 0x50a080 0x50aa7d 0x50c5b9 0x508245 0x50a080 0x50aa7d 0x50c5b9 0x509455 0x595311 0x5a067e 0x50d966\r\n\r\nThis perhaps happens only I load High-quality images....and ofc it needs more RAM but not more than the RAM offered by colab.Any solutions?\r\n\r\nWARNING: tensorflow/core/framework/cpu_allocator_impl.cc:81] Allocation of 6645350400 exceeds 10% of system memory.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35867", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35867/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35867/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35867/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35867", "id": 549657034, "node_id": "MDU6SXNzdWU1NDk2NTcwMzQ=", "number": 35867, "title": "Linking error when building Tensorflow 2.1", "user": {"login": "DnPlas", "id": 18201737, "node_id": "MDQ6VXNlcjE4MjAxNzM3", "avatar_url": "https://avatars1.githubusercontent.com/u/18201737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DnPlas", "html_url": "https://github.com/DnPlas", "followers_url": "https://api.github.com/users/DnPlas/followers", "following_url": "https://api.github.com/users/DnPlas/following{/other_user}", "gists_url": "https://api.github.com/users/DnPlas/gists{/gist_id}", "starred_url": "https://api.github.com/users/DnPlas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DnPlas/subscriptions", "organizations_url": "https://api.github.com/users/DnPlas/orgs", "repos_url": "https://api.github.com/users/DnPlas/repos", "events_url": "https://api.github.com/users/DnPlas/events{/privacy}", "received_events_url": "https://api.github.com/users/DnPlas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1205657510, "node_id": "MDU6TGFiZWwxMjA1NjU3NTEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:centos", "name": "subtype:centos", "color": "b619ea", "default": false, "description": "Centos Build/Installation issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2020-01-14T15:51:53Z", "updated_at": "2020-02-21T18:43:36Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nCentos 7 (Docker image)\r\n- TensorFlow installed from (source or binary):\r\nSource\r\n- TensorFlow version:\r\nr2.1\r\n- Python version:\r\n3.6.8\r\n- Bazel version (if compiling from source):\r\n0.29.1 (installed using bazelisk)\r\n- GCC/Compiler version (if compiling from source):\r\n7.3.1 (installed via devtoolset-7)\r\n\r\n**Describe the problem**\r\nWhen building Tensorflow 2.1, the following linking error appears:\r\n\r\n```\r\nERROR: /tmp/bazel/external/swig/BUILD.bazel:5:1: Linking of rule \r\n'@swig//:swig' failed (Exit 1)\r\nbazel-out/host/bin/external/swig/_objs/swig/allocate.o:allocate.cxx:\r\nfunction Allocate::~Allocate(): \r\nerror: undefined reference to 'operator delete(void*, unsigned long)'\r\n```\r\n\r\nSeems like an incompatibility issue when building some third party components caused when looking for that symbol.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n`$ docker run centos:7`\r\n\r\nThen inside the container:\r\n```\r\n# yum-config-manager --enable rhel-server-rhscl-7-rpms -y && yum install devtoolset-7 -y\r\n# export PATH=/opt/rh/devtoolset-7/root/usr/bin${PATH:+:${PATH}}\r\n# export PCP_DIR=/opt/rh/devtoolset-7/root\r\n# export PERL5LIB=/opt/rh/devtoolset-7/root//usr/lib64/perl5/vendor_perl:/opt/rh/devtoolset-7/root/usr/lib/perl5:/opt/rh/devtoolset-7/root//usr/share/perl5/vendor_perl${PERL5LIB:+:${PERL5LIB}}\r\n# rpmlibdir=$(rpm --eval \"%{_libdir}\")\r\n# if [ \"$rpmlibdir\" != \"${rpmlibdir/lib64/}\" ]; then\r\n#       rpmlibdir32=\":/opt/rh/devtoolset-7/root${rpmlibdir/lib64/lib}\"\r\n# fi\r\n# export LD_LIBRARY_PATH=/opt/rh/devtoolset-7/root$rpmlibdir$rpmlibdir32${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}\r\n# export LD_LIBRARY_PATH=/opt/rh/devtoolset-7/root$rpmlibdir$rpmlibdir32:/opt/rh/devtoolset-7/root$rpmlibdir/dyninst$rpmlibdir32/dyninst${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}\r\n# pythonvers=2.7\r\n# export PYTHONPATH=/opt/rh/devtoolset-7/root/usr/lib64/python$pythonvers/site-packages:/opt/rh/devtoolset-7/root/usr/lib/python$pythonvers/site-packages${PYTHONPATH:+:${PYTHONPATH}}\r\n# export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.222.b10-1.el7_7.x86_64\r\n# git clone https://github.com/tensorflow/ && cd tensorflow && git checkout r2.1\r\n# export OPTM=3\r\n# export PYTHON_BIN_PATH=/usr/bin/python\r\n# export USE_DEFAULT_PYTHON_LIB_PATH=1\r\n# export CC_OPT_FLAGS=\"-march=${ARCH} -mtune=$TUNE\"\r\n# export TF_NEED_JEMALLOC=1\r\n# export TF_NEED_KAFKA=0\r\n# export TF_NEED_OPENCL_SYCL=0\r\n# export TF_NEED_GCP=0\r\n# export TF_NEED_HDFS=0\r\n# export TF_NEED_S3=0\r\n# export TF_ENABLE_XLA=1\r\n# export TF_NEED_GDR=0\r\n# export TF_NEED_VERBS=0\r\n# export TF_NEED_OPENCL=0\r\n# export TF_NEED_MPI=0\r\n# export TF_NEED_TENSORRT=0\r\n# export TF_SET_ANDROID_WORKSPACE=0\r\n# export TF_DOWNLOAD_CLANG=0\r\n# export TF_NEED_CUDA=0\r\n# ./configure && bazel build --cxxopt=-D_GLIBCXX_USE_CXX11_ABI=0 //tensorflow/tools/pip_package:build_pip_package\r\n```\r\n\r\n**Any other info / logs**\r\nNote this error message appears when building different components. Here are some examples:\r\n\r\n```\r\nERROR: /tensorflow/tensorflow/compiler/mlir/tensorflow/BUILD:713:1: Linking of rule '//tensorflow/compiler/mlir/tensorflow:derived_attr_populator_gen' failed (Exit 1)\r\nbazel-out/host/bin/external/llvm/_objs/tablegen/Main.o:Main.cpp:function llvm::cl::list<std::string, bool, llvm::cl::parser<std::string> >::~list(): error: undefined reference to 'operator delete(void*, unsigned long)'\r\n```\r\n\r\n```\r\nERROR: /tmp/bazel/external/com_google_protobuf/BUILD:406:1: Linking of rule '@com_google_protobuf//:protoc' failed (Exit 1)\r\nbazel-out/host/bin/external/com_google_protobuf/_objs/protoc_lib/code_generator.o:code_generator.cc:function google::protobuf::compiler::ParseGeneratorParameter(std::string const&, std::vector<std::pair<std::string, std::string>, std::allocator<std::pair<std::string, std::string> > >*): error: undefined reference to 'std::__throw_out_of_range_fmt(char const*, ...)'\r\nbazel-out/host/bin/external/com_google_protobuf/_objs/protoc_lib/command_line_interface.o:command_line_interface.cc:function google::protobuf::io::StringOutputStream::~StringOutputStream(): error: undefined reference to 'operator delete(void*, unsigned long)'\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35860", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35860/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35860/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35860/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35860", "id": 549483874, "node_id": "MDU6SXNzdWU1NDk0ODM4NzQ=", "number": 35860, "title": "TensorBoard callback without profile_batch setting cause Errors: CUPTI_ERROR_INSUFFICIENT_PRIVILEGES and CUPTI_ERROR_INVALID_PARAMETER", "user": {"login": "gawain-git-code", "id": 54879086, "node_id": "MDQ6VXNlcjU0ODc5MDg2", "avatar_url": "https://avatars1.githubusercontent.com/u/54879086?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gawain-git-code", "html_url": "https://github.com/gawain-git-code", "followers_url": "https://api.github.com/users/gawain-git-code/followers", "following_url": "https://api.github.com/users/gawain-git-code/following{/other_user}", "gists_url": "https://api.github.com/users/gawain-git-code/gists{/gist_id}", "starred_url": "https://api.github.com/users/gawain-git-code/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gawain-git-code/subscriptions", "organizations_url": "https://api.github.com/users/gawain-git-code/orgs", "repos_url": "https://api.github.com/users/gawain-git-code/repos", "events_url": "https://api.github.com/users/gawain-git-code/events{/privacy}", "received_events_url": "https://api.github.com/users/gawain-git-code/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 284285184, "node_id": "MDU6TGFiZWwyODQyODUxODQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tensorboard", "name": "comp:tensorboard", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 17, "created_at": "2020-01-14T10:47:56Z", "updated_at": "2020-03-02T01:29:20Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Stateless LSTM from Keras tutorial using tf backend\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.1.0\r\n- Python version: 3.7.4\r\n- CUDA/cuDNN version: 10.1\r\n- GPU model and memory: MX150 10GB\r\n\r\n**Describe the current behavior**\r\nWhen using tf.keras.callbacks.TensorBoard() without the profile_batch setting, it gives out errors of CUPTI_ERROR_INSUFFICIENT_PRIVILEGES and CUPTI_ERROR_INVALID_PARAMETER from tensorflow/core/profiler/internal/gpu/cupti_tracer.cc.\r\n\r\n**Describe the expected behavior**\r\nWith profile_batch = 0, these two errors are gone. \r\nBut comes back when profile_batch = 1, or other non-zero values.\r\n\r\n**Code to reproduce the issue**\r\n```\r\n\r\nfrom __future__ import print_function\r\nimport numpy as np\r\nimport matplotlib.pyplot as plt\r\nimport pandas as pd\r\nimport tensorflow as tf\r\nfrom tensorflow.keras.models import Sequential\r\nfrom tensorflow.keras.layers import Dense, LSTM\r\n\r\n\r\ninput_len = 1000\r\ntsteps = 2\r\nlahead = 1\r\nbatch_size = 1\r\nepochs = 5\r\n\r\nprint(\"*\" * 33)\r\nif lahead >= tsteps:\r\n    print(\"STATELESS LSTM WILL ALSO CONVERGE\")\r\nelse:\r\n    print(\"STATELESS LSTM WILL NOT CONVERGE\")\r\nprint(\"*\" * 33)\r\n\r\nnp.random.seed(1986)\r\n\r\nprint('Generating Data...')\r\n\r\n\r\ndef gen_uniform_amp(amp=1, xn=10000):\r\n\r\n    data_input = np.random.uniform(-1 * amp, +1 * amp, xn)\r\n    data_input = pd.DataFrame(data_input)\r\n    return data_input\r\n\r\n\r\nto_drop = max(tsteps - 1, lahead - 1)\r\ndata_input = gen_uniform_amp(amp=0.1, xn=input_len + to_drop)\r\n\r\nexpected_output = data_input.rolling(window=tsteps, center=False).mean()\r\n\r\nif lahead > 1:\r\n    data_input = np.repeat(data_input.values, repeats=lahead, axis=1)\r\n    data_input = pd.DataFrame(data_input)\r\n    for i, c in enumerate(data_input.columns):\r\n        data_input[c] = data_input[c].shift(i)\r\n\r\nexpected_output = expected_output[to_drop:]\r\ndata_input = data_input[to_drop:]\r\n\r\n\r\ndef create_model(stateful):\r\n    model = Sequential()\r\n    model.add(LSTM(20,\r\n              input_shape=(lahead, 1),\r\n              batch_size=batch_size,\r\n              stateful=stateful))\r\n    model.add(Dense(1))\r\n    model.compile(loss='mse', optimizer='adam')\r\n    return model\r\n\r\nprint('Creating Stateful Model...')\r\nmodel_stateful = create_model(stateful=True)\r\n\r\n\r\ndef split_data(x, y, ratio=0.8):\r\n    to_train = int(input_len * ratio)\r\n    to_train -= to_train % batch_size\r\n    x_train = x[:to_train]\r\n    y_train = y[:to_train]\r\n    x_test = x[to_train:]\r\n    y_test = y[to_train:]\r\n\r\n    # tweak to match with batch_size\r\n    to_drop = x.shape[0] % batch_size\r\n    if to_drop > 0:\r\n        x_test = x_test[:-1 * to_drop]\r\n        y_test = y_test[:-1 * to_drop]\r\n\r\n    # some reshaping\r\n    reshape_3 = lambda x: x.values.reshape((x.shape[0], x.shape[1], 1))\r\n    x_train = reshape_3(x_train)\r\n    x_test = reshape_3(x_test)\r\n\r\n    reshape_2 = lambda x: x.values.reshape((x.shape[0], 1))\r\n    y_train = reshape_2(y_train)\r\n    y_test = reshape_2(y_test)\r\n\r\n    return (x_train, y_train), (x_test, y_test)\r\n\r\n\r\n(x_train, y_train), (x_test, y_test) = split_data(data_input, expected_output)\r\nprint('x_train.shape: ', x_train.shape)\r\nprint('y_train.shape: ', y_train.shape)\r\nprint('x_test.shape: ', x_test.shape)\r\nprint('y_test.shape: ', y_test.shape)\r\n\r\nprint('Creating Stateless Model...')\r\nmodel_stateless = create_model(stateful=False)\r\n\r\nimport os\r\nimport datetime\r\nROOT_DIR = os.getcwd()\r\nlog_dir = os.path.join('callback_tests')\r\nif not os.path.exists(log_dir):\r\n    os.makedirs(log_dir)\r\nprint(log_dir)\r\ntensorboard_callback = tf.keras.callbacks.TensorBoard(log_dir=log_dir)\r\n                                       \r\nprint('Training')\r\nhistory = model_stateless.fit(x_train,\r\n                    y_train,\r\n                    batch_size=batch_size,\r\n                    epochs=epochs,\r\n                    verbose=1,\r\n                    validation_data=(x_test, y_test),\r\n                    shuffle=False,\r\n                    callbacks=[tensorboard_callback]\r\n                    )\r\n\r\n\r\n```\r\n\r\n**Other info / logs**\r\nTrain on 800 samples, validate on 200 samples\r\n2020-01-14 21:30:27.591905: I tensorflow/core/profiler/lib/profiler_session.cc:225] Profiler session started.\r\n2020-01-14 21:30:27.594743: I tensorflow/core/profiler/internal/gpu/cupti_tracer.cc:1259] Profiler found 1 GPUs\r\n2020-01-14 21:30:27.599172: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cupti64_101.dll\r\n2020-01-14 21:30:27.704083: E tensorflow/core/profiler/internal/gpu/cupti_tracer.cc:1307] function cupti_interface_->Subscribe( &subscriber_, (CUpti_CallbackFunc)ApiCallback, this)failed with error CUPTI_ERROR_INSUFFICIENT_PRIVILEGES\r\n2020-01-14 21:30:27.716790: E tensorflow/core/profiler/internal/gpu/cupti_tracer.cc:1346] function cupti_interface_->ActivityRegisterCallbacks( AllocCuptiActivityBuffer, FreeCuptiActivityBuffer)failed with error CUPTI_ERROR_INSUFFICIENT_PRIVILEGES\r\nEpoch 1/5\r\n2020-01-14 21:30:28.370429: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cublas64_10.dll\r\n2020-01-14 21:30:28.651767: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library cudnn64_7.dll\r\n2020-01-14 21:30:29.662864: E tensorflow/core/profiler/internal/gpu/cupti_tracer.cc:1329] function cupti_interface_->EnableCallback( 0 , subscriber_, CUPTI_CB_DOMAIN_DRIVER_API, cbid)failed with error CUPTI_ERROR_INVALID_PARAMETER\r\n2020-01-14 21:30:29.670282: I tensorflow/core/profiler/internal/gpu/device_tracer.cc:88]  GpuTracer has collected 0 callback api events and 0 activity events.\r\n800/800 [==============================] - 5s 6ms/sample - loss: 0.0011 - val_loss: 0.0011\r\nEpoch 2/5\r\n800/800 [==============================] - 3s 4ms/sample - loss: 8.5921e-04 - val_loss: 0.0010\r\nEpoch 3/5\r\n800/800 [==============================] - 3s 3ms/sample - loss: 8.5613e-04 - val_loss: 0.0010\r\nEpoch 4/5\r\n800/800 [==============================] - 3s 4ms/sample - loss: 8.5458e-04 - val_loss: 9.9713e-04\r\nEpoch 5/5\r\n800/800 [==============================] - 3s 4ms/sample - loss: 8.5345e-04 - val_loss: 9.8825e-04\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35856", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35856/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35856/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35856/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/35856", "id": 549441783, "node_id": "MDExOlB1bGxSZXF1ZXN0MzYyNTMzNDA3", "number": 35856, "title": "Adding AdaMod Optimizer in Tensorflow 2.x", "user": {"login": "monk1337", "id": 17107749, "node_id": "MDQ6VXNlcjE3MTA3NzQ5", "avatar_url": "https://avatars2.githubusercontent.com/u/17107749?v=4", "gravatar_id": "", "url": "https://api.github.com/users/monk1337", "html_url": "https://github.com/monk1337", "followers_url": "https://api.github.com/users/monk1337/followers", "following_url": "https://api.github.com/users/monk1337/following{/other_user}", "gists_url": "https://api.github.com/users/monk1337/gists{/gist_id}", "starred_url": "https://api.github.com/users/monk1337/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/monk1337/subscriptions", "organizations_url": "https://api.github.com/users/monk1337/orgs", "repos_url": "https://api.github.com/users/monk1337/repos", "events_url": "https://api.github.com/users/monk1337/events{/privacy}", "received_events_url": "https://api.github.com/users/monk1337/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1169365682, "node_id": "MDU6TGFiZWwxMTY5MzY1Njgy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:L", "name": "size:L", "color": "adafea", "default": false, "description": "CL Change Size: Large"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-14T09:35:10Z", "updated_at": "2020-03-05T11:17:08Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/35856", "html_url": "https://github.com/tensorflow/tensorflow/pull/35856", "diff_url": "https://github.com/tensorflow/tensorflow/pull/35856.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/35856.patch"}, "body": "**System information**\r\n\r\nTensorFlow version (you are using): 2.0\r\nAre you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nI am looking to add one new optimizer called \"Adamod\" . Adamod was  proposed by Jianbang Ding in the paper \"An Adaptive and Momental Bound Method for Stochastic Learning\"\r\nAdaMod uses a new parameter called \u201cBeta3\u201d. The results are improved convergence, no need for warmup, and less sensitivity to the actual learning rate chosen. Beta3 parameter controls the degree of memory.\r\n\r\n**Will this change the current api? How?**\r\nI 've edited `optimizers.py` and created a new file adamod.py which is compatible with Tensorflow 2.x.\r\nUsage :\r\n\r\n```\r\nmodel.compile(optimizer='adamod',\r\n              loss='sparse_categorical_crossentropy',\r\n              metrics=['accuracy'])\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35851", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35851/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35851/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35851/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35851", "id": 549396868, "node_id": "MDU6SXNzdWU1NDkzOTY4Njg=", "number": 35851, "title": "TensorFlow Lite with Python", "user": {"login": "peter197321", "id": 46971586, "node_id": "MDQ6VXNlcjQ2OTcxNTg2", "avatar_url": "https://avatars3.githubusercontent.com/u/46971586?v=4", "gravatar_id": "", "url": "https://api.github.com/users/peter197321", "html_url": "https://github.com/peter197321", "followers_url": "https://api.github.com/users/peter197321/followers", "following_url": "https://api.github.com/users/peter197321/following{/other_user}", "gists_url": "https://api.github.com/users/peter197321/gists{/gist_id}", "starred_url": "https://api.github.com/users/peter197321/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/peter197321/subscriptions", "organizations_url": "https://api.github.com/users/peter197321/orgs", "repos_url": "https://api.github.com/users/peter197321/repos", "events_url": "https://api.github.com/users/peter197321/events{/privacy}", "received_events_url": "https://api.github.com/users/peter197321/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-14T07:59:48Z", "updated_at": "2020-01-15T06:07:54Z", "closed_at": null, "author_association": "NONE", "body": "Hi,\r\n\r\nis there a way (documented procedure) for preparing \"Python wheel\" to just install the interpreter to run inferences with TensorFlow Lite.  On the platform I use (arm64) I have option to run an inference with CPU or GPU. How this will be evaluated via Interpreter, is there an option to have more possible IP blocks to run inference on?\r\nI'm using the 1.13.2 version."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35847", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35847/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35847/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35847/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35847", "id": 549352688, "node_id": "MDU6SXNzdWU1NDkzNTI2ODg=", "number": 35847, "title": "The result of NNAPI hardswish quantization implementation is different with tensorflow hardswish", "user": {"login": "jianlongf", "id": 12624852, "node_id": "MDQ6VXNlcjEyNjI0ODUy", "avatar_url": "https://avatars1.githubusercontent.com/u/12624852?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jianlongf", "html_url": "https://github.com/jianlongf", "followers_url": "https://api.github.com/users/jianlongf/followers", "following_url": "https://api.github.com/users/jianlongf/following{/other_user}", "gists_url": "https://api.github.com/users/jianlongf/gists{/gist_id}", "starred_url": "https://api.github.com/users/jianlongf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jianlongf/subscriptions", "organizations_url": "https://api.github.com/users/jianlongf/orgs", "repos_url": "https://api.github.com/users/jianlongf/repos", "events_url": "https://api.github.com/users/jianlongf/events{/privacy}", "received_events_url": "https://api.github.com/users/jianlongf/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "miaowang14", "id": 13321498, "node_id": "MDQ6VXNlcjEzMzIxNDk4", "avatar_url": "https://avatars3.githubusercontent.com/u/13321498?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaowang14", "html_url": "https://github.com/miaowang14", "followers_url": "https://api.github.com/users/miaowang14/followers", "following_url": "https://api.github.com/users/miaowang14/following{/other_user}", "gists_url": "https://api.github.com/users/miaowang14/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaowang14/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaowang14/subscriptions", "organizations_url": "https://api.github.com/users/miaowang14/orgs", "repos_url": "https://api.github.com/users/miaowang14/repos", "events_url": "https://api.github.com/users/miaowang14/events{/privacy}", "received_events_url": "https://api.github.com/users/miaowang14/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "miaowang14", "id": 13321498, "node_id": "MDQ6VXNlcjEzMzIxNDk4", "avatar_url": "https://avatars3.githubusercontent.com/u/13321498?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaowang14", "html_url": "https://github.com/miaowang14", "followers_url": "https://api.github.com/users/miaowang14/followers", "following_url": "https://api.github.com/users/miaowang14/following{/other_user}", "gists_url": "https://api.github.com/users/miaowang14/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaowang14/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaowang14/subscriptions", "organizations_url": "https://api.github.com/users/miaowang14/orgs", "repos_url": "https://api.github.com/users/miaowang14/repos", "events_url": "https://api.github.com/users/miaowang14/events{/privacy}", "received_events_url": "https://api.github.com/users/miaowang14/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-01-14T06:03:39Z", "updated_at": "2020-02-12T01:14:31Z", "closed_at": null, "author_association": "NONE", "body": "Recently,  I ran AI benchmark v4 model(Mobilenet-v3-quant.tflite) by label_image. But I got the different result by tflite and NNAPI implementation quantization. The detailed difference is just 1 per quant HardSwish layer. And HardSwish is splited by NNAPI delegate as below: \r\n\r\n> // Lower hardswish according to the following equation:\r\n> // hard_swish[x] = x (ReLU6(x + 3)) / 6 == x * (Relu_N1_to_1(x/3) * 3 + 3) / 6\r\n> // = 0.5x * Relu_N1_to_1(x/3) + 0.5x\r\n\r\nin nnpai_delegate.cc at the line around 510.\r\nBTW, NNAPI uses int32 quantization but tflite uses int16."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35846", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35846/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35846/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35846/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35846", "id": 549348948, "node_id": "MDU6SXNzdWU1NDkzNDg5NDg=", "number": 35846, "title": "tf.image.random_brightness do not reproducible with multiprocessing on tf.data.Dataset.", "user": {"login": "yeyinthtoon", "id": 51197689, "node_id": "MDQ6VXNlcjUxMTk3Njg5", "avatar_url": "https://avatars2.githubusercontent.com/u/51197689?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yeyinthtoon", "html_url": "https://github.com/yeyinthtoon", "followers_url": "https://api.github.com/users/yeyinthtoon/followers", "following_url": "https://api.github.com/users/yeyinthtoon/following{/other_user}", "gists_url": "https://api.github.com/users/yeyinthtoon/gists{/gist_id}", "starred_url": "https://api.github.com/users/yeyinthtoon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yeyinthtoon/subscriptions", "organizations_url": "https://api.github.com/users/yeyinthtoon/orgs", "repos_url": "https://api.github.com/users/yeyinthtoon/repos", "events_url": "https://api.github.com/users/yeyinthtoon/events{/privacy}", "received_events_url": "https://api.github.com/users/yeyinthtoon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-14T05:52:07Z", "updated_at": "2020-01-14T15:02:10Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): colab\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version (use command below): 2.1.0-rc1\r\n- Python version: 3.6.9\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source): \r\n- CUDA/cuDNN version: V10.1.243\r\n- GPU model and memory:\r\n\r\n\r\n**Describe the current behavior**\r\nI use tf.image.random_brightness api for augmentation. With dataset api I put those augmentation functions in parser method and use Dataset.map api for applying the method to the dataset and _Transformed dataset_ is not reproducible when I put non negative integer > 0 in _num_parallel_calls_ argument of Dataset.map api. It is also the same if I use tf.data.experimental.AUTOTUNE for num_parallel_calls argument.\r\n\r\n**Code to reproduce the issue**\r\n[here is the colab link to reproduce the issue](https://colab.research.google.com/drive/1uNpn1Rf1_WvG2lnAS41g36IDWOB2IW7-)\r\n\r\n**Other info / logs**\r\nIt looks like tf.random.uniform method is the reason of happening this. The implementation of tf.image.random_brightness use tensorflow random uniform method and the method is not reproducible with multiprocessing. I have tested tf.image.random_contrast and tf.image.random_saturation. They are not reproducible also.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35842", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35842/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35842/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35842/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35842", "id": 549319856, "node_id": "MDU6SXNzdWU1NDkzMTk4NTY=", "number": 35842, "title": "tensorflow/python/eager/BUILD:14:1: in cc_library rule //tensorflow/python/eager:pywrap_tfe_lib: cycle in dependency graph", "user": {"login": "vistart", "id": 864657, "node_id": "MDQ6VXNlcjg2NDY1Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/864657?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vistart", "html_url": "https://github.com/vistart", "followers_url": "https://api.github.com/users/vistart/followers", "following_url": "https://api.github.com/users/vistart/following{/other_user}", "gists_url": "https://api.github.com/users/vistart/gists{/gist_id}", "starred_url": "https://api.github.com/users/vistart/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vistart/subscriptions", "organizations_url": "https://api.github.com/users/vistart/orgs", "repos_url": "https://api.github.com/users/vistart/repos", "events_url": "https://api.github.com/users/vistart/events{/privacy}", "received_events_url": "https://api.github.com/users/vistart/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-01-14T04:12:02Z", "updated_at": "2020-01-16T03:05:13Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS: Windows 10 Pro x64 18362\r\n- TensorFlow installed from (source or binary): source (master, 8782b7679c12780fd914827abf4e79ceb51d6b41)\r\n- TensorFlow version: 2.1.0\r\n- Python version: 3.5.3/3.6.8/3.7.6/3.8.1\r\n- Installed using virtualenv? pip? conda?: virtualenv\r\n- Bazel version (if compiling from source): 1.2.1\r\n- GCC/Compiler version (if compiling from source): VS2017 14.16.27023\r\n- CUDA/cuDNN/tensorrt version: 10.2.89, 7.6.5.32, 7.0.0.11\r\n- GPU model and memory: RTX 2080Ti, 11GB\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\n```\r\nbuild --action_env PYTHON_BIN_PATH=\"C:/tensorflow/venv36/Scripts/python.exe\"\r\nbuild --action_env PYTHON_LIB_PATH=\"C:/tensorflow/venv36/lib/site-packages\"\r\nbuild --python_path=\"C:/tensorflow/venv36/Scripts/python.exe\"\r\nbuild:xla --define with_xla_support=true\r\nbuild --action_env CUDA_TOOLKIT_PATH=\"C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.2\"\r\nbuild --action_env TF_CUDA_COMPUTE_CAPABILITIES=\"6.1,7.5\"\r\nbuild --config=cuda\r\n# build --config=tensorrt\r\nbuild:opt --copt=/arch:AVX\r\nbuild:opt --define with_default_optimizations=true\r\nbuild --define=override_eigen_strong_inline=true\r\ntest --flaky_test_attempts=3\r\ntest --test_size_filters=small,medium\r\ntest:v1 --test_tag_filters=-benchmark-test,-no_oss,-no_windows,-gpu,-oss_serial\r\ntest:v1 --build_tag_filters=-benchmark-test,-no_oss,-no_windows,-gpu\r\ntest:v2 --test_tag_filters=-benchmark-test,-no_oss,-no_windows,-gpu,-oss_serial,-v1only\r\ntest:v2 --build_tag_filters=-benchmark-test,-no_oss,-no_windows,-gpu,-v1only\r\nbuild --action_env TF_CONFIGURE_IOS=\"0\"\r\n\r\n```\r\n\r\nIf I enable tensorrt and compile using the method described in [this article](https://tensorflow.google.cn/install/source_windows#gpu_support), I get the following error:\r\n\r\n\r\n```\r\nERROR: C:/tensorflow/tensorflow/python/eager/BUILD:14:1: in cc_library rule //tensorflow/python/eager:pywrap_tfe_lib: cycle in dependency graph:\r\n    //tensorflow/tools/pip_package:build_pip_package\r\n    //tensorflow/python/keras/distribute:distribute_strategy_test_lib\r\n    //tensorflow/python/distribute:tpu_strategy\r\n    //tensorflow/python/distribute:values\r\n    //tensorflow/python:framework_ops\r\n    //tensorflow/python:tensor_conversion_registry\r\n    //tensorflow/python/eager:context\r\n    //tensorflow/python/eager:executor\r\n    //tensorflow/python:pywrap_tfe\r\n    //tensorflow/python:pywrap_tensorflow\r\n    //tensorflow/python:pywrap_tensorflow_internal\r\n    //tensorflow/python:pywrap_tensorflow_internal.py\r\n    //tensorflow/python:pywrap_tensorflow_internal_py_wrap\r\n.-> //tensorflow/python/eager:pywrap_tfe_lib\r\n|   //tensorflow/python:ndarray_tensor_bridge\r\n|   //tensorflow/python:bfloat16_lib\r\n|   //tensorflow/python:safe_ptr\r\n|   //tensorflow/c/eager:c_api\r\n|   //tensorflow/core/distributed_runtime/rpc:grpc_server_lib\r\n|   //tensorflow/core/distributed_runtime/rpc:grpc_master_service\r\n|   //tensorflow/core/distributed_runtime:master\r\n|   //tensorflow/core/distributed_runtime:master_session\r\n|   //tensorflow/core/distributed_runtime:scheduler\r\n|   //tensorflow/core:tensorflow_opensource\r\n|   //tensorflow/core:all_kernels\r\n|   //tensorflow/core:all_kernels_impl\r\n|   //tensorflow/compiler/tf2tensorrt:trt_op_kernels\r\n|   //tensorflow/python:pywrap_tensorflow_import_lib\r\n|   //tensorflow/python:pywrap_tensorflow_import_lib_file\r\n|   //tensorflow/python:get_pywrap_tensorflow_import_lib_file\r\n|   //tensorflow/python:_pywrap_tensorflow_internal.so\r\n`-- //tensorflow/python/eager:pywrap_tfe_lib\r\nThis cycle occurred because of a configuration option\r\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35833", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35833/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35833/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35833/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35833", "id": 549185982, "node_id": "MDU6SXNzdWU1NDkxODU5ODI=", "number": 35833, "title": "Keras Estimator fails on regression task while underlying model works", "user": {"login": "adomasbaliuka", "id": 52975890, "node_id": "MDQ6VXNlcjUyOTc1ODkw", "avatar_url": "https://avatars1.githubusercontent.com/u/52975890?v=4", "gravatar_id": "", "url": "https://api.github.com/users/adomasbaliuka", "html_url": "https://github.com/adomasbaliuka", "followers_url": "https://api.github.com/users/adomasbaliuka/followers", "following_url": "https://api.github.com/users/adomasbaliuka/following{/other_user}", "gists_url": "https://api.github.com/users/adomasbaliuka/gists{/gist_id}", "starred_url": "https://api.github.com/users/adomasbaliuka/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/adomasbaliuka/subscriptions", "organizations_url": "https://api.github.com/users/adomasbaliuka/orgs", "repos_url": "https://api.github.com/users/adomasbaliuka/repos", "events_url": "https://api.github.com/users/adomasbaliuka/events{/privacy}", "received_events_url": "https://api.github.com/users/adomasbaliuka/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-01-13T21:16:01Z", "updated_at": "2020-03-18T23:37:03Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code: Yes\r\n- OS Platform and Distribution: Windows 10\r\n- TensorFlow installed from: binary\r\n- TensorFlow version: Same issue using tf2.0.0-beta1-cpu\r\n and tf1.14.0-gpu\r\n- Python version: 3.6.9\r\n- CUDA/cuDNN version: CUDA 10.1.168/cuDNN 7.6.2\r\n- GPU model and memory: NVIDIA GeForce RTX 2060, 6GB dedicated memory\r\n\r\n**Describe the current behavior**\r\nA convolutional reggression (last layer has linear activation and one neuron) network built with tf.keras is shown to fit the MNIST dataset (I know that MNIST is a classification task; this is an example) when converted to a dataset.\r\n\r\nWhen the same model is packaged into an estimator using  `tf.keras.estimator.model_to_estimator` no error messages occur, however the model no longer fits. The loss does not decrease.\r\n\r\nI had made a Stackoverflow question about this (https://stackoverflow.com/q/59631744/9988487) with no traction whatsoever. After some more trying to get it to work, I believe it is a bug.\r\n\r\n**Describe the expected behavior**\r\nThe keras estimator should have the same behaviour as the underlying model. Change the USE_ESTIMATOR variable to see that the underlying model works.\r\n**Code to reproduce the issue**\r\n```\r\n# python 3.6. Tested with tensorflow-gpu-1.14 and tensorflow-cpu-2.0\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\n\r\ndef get_model(IM_WIDTH=28, num_color_channels=1):\r\n    \"\"\"Create a very simple convolutional neural network using a tf.keras Functional Model.\"\"\"\r\n    input = tf.keras.Input(shape=(IM_WIDTH, IM_WIDTH, num_color_channels))\r\n    x = tf.keras.layers.Conv2D(32, 3, activation='relu')(input)\r\n    x = tf.keras.layers.MaxPooling2D(3)(x)\r\n    x = tf.keras.layers.Conv2D(64, 3, activation='relu')(x)\r\n    x = tf.keras.layers.MaxPooling2D(3)(x)\r\n    x = tf.keras.layers.Flatten()(x)\r\n    x = tf.keras.layers.Dense(64, activation='relu')(x)\r\n    output = tf.keras.layers.Dense(1, activation='linear')(x)\r\n    model = tf.keras.Model(inputs=[input], outputs=[output])\r\n    model.compile(optimizer='adam', loss=\"mae\",\r\n                  metrics=['mae'])\r\n    model.summary()\r\n    return model\r\n\r\n\r\ndef input_fun(train=True):\r\n    \"\"\"Load MNIST and return the training or test set as a tf.data.Dataset; Valid input function for tf.estimator\"\"\"\r\n    (train_images, train_labels), (eval_images, eval_labels) = tf.keras.datasets.mnist.load_data()\r\n    train_images = train_images.reshape((60_000, 28, 28, 1)).astype(np.float32) / 255.\r\n    eval_images = eval_images.reshape((10_000, 28, 28, 1)).astype(np.float32) / 255.\r\n    # train_labels = train_labels.astype(np.float32)  # these two lines don't affect behaviour.\r\n    # eval_labels = eval_labels.astype(np.float32)\r\n    # For a neural network with one neuron in the final layer, it doesn't seem to matter if target data is float or int.\r\n\r\n    if train:\r\n        dataset = tf.data.Dataset.from_tensor_slices((train_images, train_labels))\r\n        dataset = dataset.shuffle(buffer_size=100).repeat(None).batch(32).prefetch(1)\r\n    else:\r\n        dataset = tf.data.Dataset.from_tensor_slices((eval_images, eval_labels))\r\n        dataset = dataset.batch(32).prefetch(1)  # note: prefetching does not affect behaviour\r\n\r\n    return dataset\r\n\r\n\r\nmodel = get_model()\r\ntrain_input_fn = lambda: input_fun(train=True)\r\neval_input_fn = lambda: input_fun(train=False)\r\n\r\nNUM_EPOCHS, STEPS_PER_EPOCH = 4, 1875  # 1875 = number_of_train_images(=60.000)  /  batch_size(=32)\r\nUSE_ESTIMATOR = False  # change this to compare model/estimator. Estimator performs much worse for no apparent reason\r\nif USE_ESTIMATOR:\r\n    estimator = tf.keras.estimator.model_to_estimator(\r\n        keras_model=model, model_dir=\"model_directory\",\r\n        config=tf.estimator.RunConfig(save_checkpoints_steps=200, save_summary_steps=200))\r\n\r\n    train_spec = tf.estimator.TrainSpec(input_fn=train_input_fn, max_steps=STEPS_PER_EPOCH * NUM_EPOCHS)\r\n    eval_spec = tf.estimator.EvalSpec(input_fn=eval_input_fn, throttle_secs=0)\r\n\r\n    tf.estimator.train_and_evaluate(estimator, train_spec, eval_spec)\r\n    print(\"Training complete. Evaluating Estimator:\")\r\n    print(estimator.evaluate(eval_input_fn))\r\n    # final train loss with estimator: ~2.5 (mean abs. error).\r\nelse:\r\n    dataset = train_input_fn()\r\n    model.fit(dataset, steps_per_epoch=STEPS_PER_EPOCH, epochs=NUM_EPOCHS)\r\n    print(\"Training complete. Evaluating Keras model:\")\r\n    print(model.evaluate(eval_input_fn()))\r\n    # final train loss with Keras model: ~0.4 (mean abs. error).\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35828", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35828/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35828/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35828/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35828", "id": 549121306, "node_id": "MDU6SXNzdWU1NDkxMjEzMDY=", "number": 35828, "title": "tf.contrib.cudnn_rnn.CudnnGRU runtime error: CUDA_ERROR_ILLEGAL_ADDRESS: an illegal memory access was encountered", "user": {"login": "RCTimms", "id": 45631644, "node_id": "MDQ6VXNlcjQ1NjMxNjQ0", "avatar_url": "https://avatars1.githubusercontent.com/u/45631644?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RCTimms", "html_url": "https://github.com/RCTimms", "followers_url": "https://api.github.com/users/RCTimms/followers", "following_url": "https://api.github.com/users/RCTimms/following{/other_user}", "gists_url": "https://api.github.com/users/RCTimms/gists{/gist_id}", "starred_url": "https://api.github.com/users/RCTimms/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RCTimms/subscriptions", "organizations_url": "https://api.github.com/users/RCTimms/orgs", "repos_url": "https://api.github.com/users/RCTimms/repos", "events_url": "https://api.github.com/users/RCTimms/events{/privacy}", "received_events_url": "https://api.github.com/users/RCTimms/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1166103538, "node_id": "MDU6TGFiZWwxMTY2MTAzNTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/contrib", "name": "contrib", "color": "5319e7", "default": false, "description": "Anything that comes under contrib directory"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-01-13T19:01:42Z", "updated_at": "2020-01-14T13:25:53Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nYes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nGoogle Colab\r\n- TensorFlow version (use command below):\r\n1.15.0\r\n- Python version:\r\n3.6.9\r\n- CUDA/cuDNN version:\r\nCuda compilation tools, release 10.0, V10.0.130\r\n- GPU model and memory:\r\n\r\n**Describe the current behavior**\r\nI am trying to convert my CPU GRU code to a CudnnGRU implementation. When I run the code [here](https://colab.research.google.com/drive/1c64kUiCs8K17I5YygWaf14DKWhObdKA9), my script runs for a seemingly random of number of training epochs (normally between 0 and 20) before the session crashes, often with a CUDA_ERROR_ILLEGAL_ADDRESS error. I see similar behaviour when I run the script on my institution's hardware (TF version 1.14, CUDA Version: 10.1).\r\n\r\n**Code to reproduce the issue**\r\nSee Google colab sheet [here](https://colab.research.google.com/drive/1c64kUiCs8K17I5YygWaf14DKWhObdKA9). I select the GPU as the hardware accelerator in the notebook settings.\r\n\r\n**Other info / logs**\r\n```\r\nLearning Rate: 0.001 \r\nTotal number of portions: 10 \r\nbatch_length: 500 \r\nn_mini_batches 25 \r\nmini_batch_length 20 \r\nnumber of MEG channels/PCs: 5 \r\n\r\nWARNING:tensorflow:\r\nThe TensorFlow contrib module will not be included in TensorFlow 2.0.\r\nFor more information, please see:\r\n  * https://github.com/tensorflow/community/blob/master/rfcs/20180907-contrib-sunset.md\r\n  * https://github.com/tensorflow/addons\r\n  * https://github.com/tensorflow/io (for I/O related ops)\r\nIf you depend on functionality not listed there, please file an issue.\r\n\r\nWARNING:tensorflow:From /usr/local/lib/python3.6/dist-packages/tensorflow_core/contrib/cudnn_rnn/python/layers/cudnn_rnn.py:342: calling GlorotUniform.__init__ (from tensorflow.python.ops.init_ops) with dtype is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nCall initializer instance with the dtype argument instead of passing it to the constructor\r\nWARNING:tensorflow:From /usr/local/lib/python3.6/dist-packages/tensorflow_core/contrib/cudnn_rnn/python/layers/cudnn_rnn.py:345: calling Constant.__init__ (from tensorflow.python.ops.init_ops) with dtype is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nCall initializer instance with the dtype argument instead of passing it to the constructor\r\nAlpha coefficients will be soft-plus transformed\r\nWARNING:tensorflow:From /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/training/slot_creator.py:193: Variable.initialized_value (from tensorflow.python.ops.variables) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse Variable.read_value. Variables in 2.X are initialized automatically both in eager and graph (inside tf.defun) contexts.\r\nDevice mapping:\r\n/job:localhost/replica:0/task:0/device:XLA_CPU:0 -> device: XLA_CPU device\r\n/job:localhost/replica:0/task:0/device:XLA_GPU:0 -> device: XLA_GPU device\r\n/job:localhost/replica:0/task:0/device:GPU:0 -> device: 0, name: Tesla T4, pci bus id: 0000:00:04.0, compute capability: 7.5\r\n\r\nBeginning training...\r\n0\r\n1\r\n2\r\n3\r\n4\r\n```\r\n\r\nPlease see the colab-jupyter.log file attached.\r\n\r\nApologies for my ignorance and thank you in advance for any kind help.\r\n[colab-jupyter.log](https://github.com/tensorflow/tensorflow/files/4055241/colab-jupyter.log)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35825", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35825/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35825/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35825/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35825", "id": 549094853, "node_id": "MDU6SXNzdWU1NDkwOTQ4NTM=", "number": 35825, "title": "Extend `tf.keras.Model.evaluate` with `class_weight`", "user": {"login": "vicpara", "id": 1392100, "node_id": "MDQ6VXNlcjEzOTIxMDA=", "avatar_url": "https://avatars2.githubusercontent.com/u/1392100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vicpara", "html_url": "https://github.com/vicpara", "followers_url": "https://api.github.com/users/vicpara/followers", "following_url": "https://api.github.com/users/vicpara/following{/other_user}", "gists_url": "https://api.github.com/users/vicpara/gists{/gist_id}", "starred_url": "https://api.github.com/users/vicpara/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vicpara/subscriptions", "organizations_url": "https://api.github.com/users/vicpara/orgs", "repos_url": "https://api.github.com/users/vicpara/repos", "events_url": "https://api.github.com/users/vicpara/events{/privacy}", "received_events_url": "https://api.github.com/users/vicpara/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, {"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-01-13T18:08:26Z", "updated_at": "2020-03-09T16:46:43Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): \r\nTF 2.0.0\r\n- Are you willing to contribute it (Yes/No):\r\nYes\r\n\r\n**Describe the feature and the current behaviour/state.**\r\nCurrently `tf.keras.models.Model.fit` method allows the user to pass either 'sample_weight' and 'class_weight' parameters. These are used to compute at [some point](https://github.com/tensorflow/tensorflow/blob/1cf0898dd4331baf93fe77205550f2c2e6c90ee5/tensorflow/python/keras/engine/training.py#L2527 ) a standardised 'sample_weights' and used later on while calculating the loss.\r\n\r\nThis feature request is about extending the 'tf.keras.Model.evaluate' API so that is permits using `class_weight` directly. The `evaluate` function already permits for `sample_weight`.\r\n\r\n\r\n**Will this change the current api? How?**\r\ncurrent API\r\n```\r\nevaluate(\r\n    x=None,\r\n    y=None,\r\n    batch_size=None,\r\n    verbose=1,\r\n    sample_weight=None,\r\n    steps=None,\r\n    callbacks=None,\r\n    max_queue_size=10,\r\n    workers=1,\r\n    use_multiprocessing=False\r\n)\r\n```\r\nnew API\r\n```\r\nevaluate(\r\n    x=None,\r\n    y=None,\r\n    batch_size=None,\r\n    verbose=1,\r\n    sample_weight=None,\r\n>>>    class_weight=None,\r\n    steps=None,\r\n    callbacks=None,\r\n    max_queue_size=10,\r\n    workers=1,\r\n    use_multiprocessing=False\r\n)\r\n```\r\n**Who will benefit with this feature?**\r\n\r\nThose users of the API who would like to perform the evaluation of a model that was trained with bespoke class weights.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35824", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35824/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35824/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35824/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35824", "id": 549080639, "node_id": "MDU6SXNzdWU1NDkwODA2Mzk=", "number": 35824, "title": "TimeDistributed Layer Does Not Support Multiple Inputs", "user": {"login": "nectario", "id": 22030060, "node_id": "MDQ6VXNlcjIyMDMwMDYw", "avatar_url": "https://avatars2.githubusercontent.com/u/22030060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nectario", "html_url": "https://github.com/nectario", "followers_url": "https://api.github.com/users/nectario/followers", "following_url": "https://api.github.com/users/nectario/following{/other_user}", "gists_url": "https://api.github.com/users/nectario/gists{/gist_id}", "starred_url": "https://api.github.com/users/nectario/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nectario/subscriptions", "organizations_url": "https://api.github.com/users/nectario/orgs", "repos_url": "https://api.github.com/users/nectario/repos", "events_url": "https://api.github.com/users/nectario/events{/privacy}", "received_events_url": "https://api.github.com/users/nectario/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-01-13T17:37:18Z", "updated_at": "2020-01-14T17:45:42Z", "closed_at": null, "author_association": "NONE", "body": "Python Version: 3.76\r\nTensorFlow Version: 2.1\r\nOS: Windows 10\r\n\r\nIssue:\r\nIt does not seem the TimeDistributed layer supports multiple inputs. See example code:\r\n\r\n```\r\nimport tensorflow as tf\r\nfrom tensorflow.keras.layers import Dense, Concatenate, RepeatVector, Activation, Dot, Bidirectional, Embedding, Input, SpatialDropout1D, LSTM, Dropout, Lambda, Conv1D, Attention, AdditiveAttention, GlobalAveragePooling1D, TimeDistributed, AveragePooling1D\r\nfrom tensorflow.keras.models import Model\r\nimport numpy as np\r\n\r\ndef example_2():\r\n    # Encode each timestep\r\n    input_1 = Input(shape=(None,), dtype='int64', name=\"Input1\")\r\n    input_2 = Input(shape=(None,), dtype='int64', name=\"Input2\")\r\n\r\n    output = Concatenate([input_1, input_2])\r\n    output = TimeDistributed(output)([input_1, input_2])\r\n\r\n    model = Model([input_1, input_2], output)\r\n    model.compile(loss='categorical_crossentropy',\r\n                  optimizer='rmsprop',\r\n                  metrics=['accuracy'])\r\n\r\n    return model\r\n\r\n\r\ninput_1 = np.array([[1, 2, 3, 4, 5, 6, 7]])\r\ninput_2 = np.array([[1, 1, 1, 1, 1, 1, 1]])\r\ny = np.array([1, 0, 1, 1, 0, 0, 1])\r\n\r\nexample_2().fit(input=[input_1, input_2], output=y)\r\n```\r\nI get the following issue:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"C:/Development/Projects/TensorFlow_2.0_Hierarchical_Attention/TimeDistributed_Multiple_Inputs.py\", line 26, in <module>\r\n    example_2().fit(input=[input_1, input_2], output=y)\r\n  File \"C:/Development/Projects/TensorFlow_2.0_Hierarchical_Attention/TimeDistributed_Multiple_Inputs.py\", line 12, in example_2\r\n    output = TimeDistributed(output)([input_1, input_2])\r\n  File \"C:\\Development\\Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\base_layer.py\", line 748, in __call__\r\n    self._maybe_build(inputs)\r\n  File \"C:\\Development\\Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\base_layer.py\", line 2116, in _maybe_build\r\n    self.build(input_shapes)\r\n  File \"C:\\Development\\Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\keras\\layers\\wrappers.py\", line 197, in build\r\n    input_shape = tensor_shape.TensorShape(input_shape).as_list()\r\n  File \"C:\\Development\\Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\framework\\tensor_shape.py\", line 771, in __init__\r\n    self._dims = [as_dimension(d) for d in dims_iter]\r\n  File \"C:\\Development\\Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\framework\\tensor_shape.py\", line 771, in <listcomp>\r\n    self._dims = [as_dimension(d) for d in dims_iter]\r\n  File \"C:\\Development\\Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\framework\\tensor_shape.py\", line 716, in as_dimension\r\n    return Dimension(value)\r\n  File \"C:\\Development\\Python\\Python37\\lib\\site-packages\\tensorflow_core\\python\\framework\\tensor_shape.py\", line 200, in __init__\r\n    None)\r\n  File \"<string>\", line 3, in raise_from\r\nTypeError: Dimension value must be integer or None or have an __index__ method, got TensorShape([None, None])\r\n```\r\n\r\n<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version (use command below):\r\n- Python version:\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\n**Describe the expected behavior**\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35820", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35820/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35820/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35820/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35820", "id": 549018764, "node_id": "MDU6SXNzdWU1NDkwMTg3NjQ=", "number": 35820, "title": "Same op sequence is computed multiple times", "user": {"login": "veqtor", "id": 1068445, "node_id": "MDQ6VXNlcjEwNjg0NDU=", "avatar_url": "https://avatars1.githubusercontent.com/u/1068445?v=4", "gravatar_id": "", "url": "https://api.github.com/users/veqtor", "html_url": "https://github.com/veqtor", "followers_url": "https://api.github.com/users/veqtor/followers", "following_url": "https://api.github.com/users/veqtor/following{/other_user}", "gists_url": "https://api.github.com/users/veqtor/gists{/gist_id}", "starred_url": "https://api.github.com/users/veqtor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/veqtor/subscriptions", "organizations_url": "https://api.github.com/users/veqtor/orgs", "repos_url": "https://api.github.com/users/veqtor/repos", "events_url": "https://api.github.com/users/veqtor/events{/privacy}", "received_events_url": "https://api.github.com/users/veqtor/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-01-13T15:50:27Z", "updated_at": "2020-02-21T00:00:48Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Colab\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): Not applicable\r\n- TensorFlow version (use command below): 2.1.0\r\n- Python version: Not applicable\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: Not applicable\r\n- GPU model and memory: Not applicable\r\n\r\n**Describe the current behavior**\r\nWhen applying a layer multiple times to the same input, it seems TF is computing it for every call, even if it's unnecessary, see colab:\r\nhttps://colab.research.google.com/drive/1PTvolVt1xQJvgp4MP0ZvgbemKBrqWy0U\r\n\r\n**Describe the expected behavior**\r\nThe duplicate parts of the graph should be squashed\r\n\r\n**Code to reproduce the issue**\r\nhttps://colab.research.google.com/drive/1PTvolVt1xQJvgp4MP0ZvgbemKBrqWy0U\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35818", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35818/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35818/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35818/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35818", "id": 548991975, "node_id": "MDU6SXNzdWU1NDg5OTE5NzU=", "number": 35818, "title": "Creating outputs from the final_state returned by dynamic_rnn causes conversion to fail", "user": {"login": "xkr1", "id": 59834899, "node_id": "MDQ6VXNlcjU5ODM0ODk5", "avatar_url": "https://avatars0.githubusercontent.com/u/59834899?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xkr1", "html_url": "https://github.com/xkr1", "followers_url": "https://api.github.com/users/xkr1/followers", "following_url": "https://api.github.com/users/xkr1/following{/other_user}", "gists_url": "https://api.github.com/users/xkr1/gists{/gist_id}", "starred_url": "https://api.github.com/users/xkr1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xkr1/subscriptions", "organizations_url": "https://api.github.com/users/xkr1/orgs", "repos_url": "https://api.github.com/users/xkr1/repos", "events_url": "https://api.github.com/users/xkr1/events{/privacy}", "received_events_url": "https://api.github.com/users/xkr1/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "renjie-liu", "id": 36247193, "node_id": "MDQ6VXNlcjM2MjQ3MTkz", "avatar_url": "https://avatars3.githubusercontent.com/u/36247193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/renjie-liu", "html_url": "https://github.com/renjie-liu", "followers_url": "https://api.github.com/users/renjie-liu/followers", "following_url": "https://api.github.com/users/renjie-liu/following{/other_user}", "gists_url": "https://api.github.com/users/renjie-liu/gists{/gist_id}", "starred_url": "https://api.github.com/users/renjie-liu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/renjie-liu/subscriptions", "organizations_url": "https://api.github.com/users/renjie-liu/orgs", "repos_url": "https://api.github.com/users/renjie-liu/repos", "events_url": "https://api.github.com/users/renjie-liu/events{/privacy}", "received_events_url": "https://api.github.com/users/renjie-liu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "renjie-liu", "id": 36247193, "node_id": "MDQ6VXNlcjM2MjQ3MTkz", "avatar_url": "https://avatars3.githubusercontent.com/u/36247193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/renjie-liu", "html_url": "https://github.com/renjie-liu", "followers_url": "https://api.github.com/users/renjie-liu/followers", "following_url": "https://api.github.com/users/renjie-liu/following{/other_user}", "gists_url": "https://api.github.com/users/renjie-liu/gists{/gist_id}", "starred_url": "https://api.github.com/users/renjie-liu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/renjie-liu/subscriptions", "organizations_url": "https://api.github.com/users/renjie-liu/orgs", "repos_url": "https://api.github.com/users/renjie-liu/repos", "events_url": "https://api.github.com/users/renjie-liu/events{/privacy}", "received_events_url": "https://api.github.com/users/renjie-liu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2020-01-13T15:08:44Z", "updated_at": "2020-01-16T09:39:12Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): CentOS 7\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (or github SHA if from source): r1.14\r\n\r\n\r\n**Command used to run the converter or code if you\u2019re using the Python API**\r\nimport tensorflow as tf\r\n\r\nconverter = tf.lite.TFLiteConverter.from_saved_model('./savedmodel')\r\ntflite_model = converter.convert()\r\nopen(\"lstm.tflite\", \"wb\").write(tflite_model)\r\n\r\n**The output from the converter invocation**\r\n\r\nTraceback (most recent call last):\r\n  File \"saved2lite.py\", line 4, in <module>\r\n    tflite_model = converter.convert()\r\n  File \"/workdir/env-cpu/lib/python2.7/site-packages/tensorflow/lite/python/lite.py\", line 898, in convert\r\n    **converter_kwargs)\r\n  File \"/workdir/env-cpu/lib/python2.7/site-packages/tensorflow/lite/python/convert.py\", line 404, in toco_convert_impl\r\n    input_data.SerializeToString())\r\n  File \"/workdir/env-cpu/lib/python2.7/site-packages/tensorflow/lite/python/convert.py\", line 172, in toco_convert_protos\r\n    \"TOCO failed. See console for info.\\n%s\\n%s\\n\" % (stdout, stderr))\r\ntensorflow.lite.python.convert.ConverterError: TOCO failed. See console for info.\r\n2020-01-13 14:56:27.199876: F tensorflow/lite/toco/tooling_util.cc:918] Check failed: GetOpWithOutput(model, output_array) Specified output array \"lstm/body/encoder/rnn/while/Identity_4\" is not produced by any op in this graph. Is it a typo? This should not happen. If you trigger this error please send a bug report (with code to reporduce this error), to the TensorFlow Lite team.\r\n\r\n\r\n**Failure details**\r\n\r\nModel conversion fails when final_state is returned as an output\r\n\r\n\r\n**Any other info / logs**\r\n\r\nrelevant code in model definition:\r\n\r\noutput, next_state = tf.compat.v1.lite.experimental.nn.dynamic_rnn(...)\r\nc_out = next_state[0].c\r\nh_out = next_state[0].h\r\n\r\nrelevant code in conversion to SavedModel (which does work):\r\n\r\ntensor_info_c_out = tf.saved_model.utils.build_tensor_info(c_out)\r\ntensor_info_h_out = tf.saved_model.utils.build_tensor_info(h_out)\r\n\r\nprediction_signature = tf.saved_model.signature_def_utils.build_signature_def(inputs = {'x': x}, outputs = {'y': output, 'c_out': c_out, 'h_out':h_out), method_name=tf.saved_model.signature_constants.PREDICT_METHOD_NAME)\r\n\r\n\r\nThe TFLite conversion works if I don't return the next state variables, c_out and h_out, but I need those to run the next step of the prediction.\r\n\r\nIf I run the conversion with tfnightly (using the same SavedModel file saved using 1.14) I get a different, seemingly unrelated, error:\r\n\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime. If those are native TensorFlow operators, you might be able to use the extended runtime by passing --enable_select_tf_ops, or by setting target_ops=TFLITE_BUILTINS,SELECT_TF_OPS when calling tf.lite.TFLiteConverter(). Otherwise, if you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: CAST, FULLY_CONNECTED, GATHER, MUL, NOT_EQUAL, RESHAPE, SOFTMAX, SQUEEZE, TOPK_V2. Here is a list of operators for which you will need custom implementations: TensorListFromTensor, TensorListReserve, TensorListStack, While."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35816", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35816/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35816/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35816/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35816", "id": 548967477, "node_id": "MDU6SXNzdWU1NDg5Njc0Nzc=", "number": 35816, "title": "Batching images first or formatting them first?", "user": {"login": "ManishAradwad", "id": 29497701, "node_id": "MDQ6VXNlcjI5NDk3NzAx", "avatar_url": "https://avatars0.githubusercontent.com/u/29497701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ManishAradwad", "html_url": "https://github.com/ManishAradwad", "followers_url": "https://api.github.com/users/ManishAradwad/followers", "following_url": "https://api.github.com/users/ManishAradwad/following{/other_user}", "gists_url": "https://api.github.com/users/ManishAradwad/gists{/gist_id}", "starred_url": "https://api.github.com/users/ManishAradwad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ManishAradwad/subscriptions", "organizations_url": "https://api.github.com/users/ManishAradwad/orgs", "repos_url": "https://api.github.com/users/ManishAradwad/repos", "events_url": "https://api.github.com/users/ManishAradwad/events{/privacy}", "received_events_url": "https://api.github.com/users/ManishAradwad/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-13T14:29:41Z", "updated_at": "2020-01-28T12:29:37Z", "closed_at": null, "author_association": "NONE", "body": "https://github.com/tensorflow/examples/blob/master/courses/udacity_intro_to_tensorflow_lite/tflite_c04_exercise_convert_model_to_tflite_solution.ipynb\r\n\r\nUnder \"Create a Dataset from Images and Labels\", we have this code\r\n\r\n`train_batches=train_examples.cache().shuffle(num_examples//4).batch(BATCH_SIZE).map(format_example).prefetch(1)`\r\n\r\nand similar for the validation and test examples...\r\n\r\nIs this a right practise?? \r\nShouldn't we first format the raw images and then batch them together rather than opposite way?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35813", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35813/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35813/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35813/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35813", "id": 548890691, "node_id": "MDU6SXNzdWU1NDg4OTA2OTE=", "number": 35813, "title": "Threading + tf.keras.layers.Input produces TypeError: 'NoneType' object is not iterable", "user": {"login": "dswah", "id": 11619412, "node_id": "MDQ6VXNlcjExNjE5NDEy", "avatar_url": "https://avatars2.githubusercontent.com/u/11619412?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dswah", "html_url": "https://github.com/dswah", "followers_url": "https://api.github.com/users/dswah/followers", "following_url": "https://api.github.com/users/dswah/following{/other_user}", "gists_url": "https://api.github.com/users/dswah/gists{/gist_id}", "starred_url": "https://api.github.com/users/dswah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dswah/subscriptions", "organizations_url": "https://api.github.com/users/dswah/orgs", "repos_url": "https://api.github.com/users/dswah/repos", "events_url": "https://api.github.com/users/dswah/events{/privacy}", "received_events_url": "https://api.github.com/users/dswah/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-01-13T12:12:01Z", "updated_at": "2020-03-06T23:34:11Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- No custom code\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04.3 LTS\r\n- TensorFlow installed from (source or binary): from pip\r\n- TensorFlow version (use command below): v2.1.0-rc2-17-ge5bf8de 2.1.0\r\n- Python version: Python 3.7.6 | packaged by conda-forge | (default, Jan  7 2020, 22:33:48) \r\n[GCC 7.3.0] on linux\r\n\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\nWhen I build a `tf.keras` model with the functional API in a `threading.Thread`, I often (not always) see an error in a thread:\r\n```python\r\nTypeError: 'NoneType' object is not iterable\r\n```\r\nAfter the exception has appeared once, it does not appear again, until the python kernel is restarted.\r\n\r\nIn fact, it is not even necessary to build a whole model. Just instantiating a `tf.keras.layers.Input` layer is sufficient to get the error. I tested a few other layers (Dense, Conv1D) and they do not lead to the error, so am suspecting that there is something happening with Input)\r\n\r\n**Describe the expected behavior**\r\nI expect that no such error should appear in any thread when building a `tf.keras` model.\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nfrom threading import Thread\r\nimport tensorflow as tf\r\n\r\ndef make_model():\r\n    tf.keras.layers.Input(10)\r\n    \r\n[Thread(target=make_model).start() for _ in range(10)]\r\n```\r\n\r\n**Other info / logs**\r\nThe error does not appear if i instantiate a `tf.keras.models.Model` subclass.\r\nfor example:\r\n\r\n```python\r\nfrom threading import Thread\r\nimport tensorflow as tf\r\n\r\nclass Model(tf.keras.models.Model):\r\n    def __init__(self):\r\n        super().__init__()\r\n        self.dense = tf.keras.layers.Dense(10)\r\n    \r\n    def call(self, inputs):\r\n        return self.dense(inputs)\r\n    \r\ndef make_model():\r\n    Model()\r\n    \r\n[Thread(target=make_model).start() for _ in range(10)]\r\n```\r\n\r\nFull traceback:\r\n```python\r\nException in thread Thread-3:\r\nTraceback (most recent call last):\r\n  File \"/home/dani/miniconda3/envs/testtf/lib/python3.7/threading.py\", line 926, in _bootstrap_inner\r\n    self.run()\r\n  File \"/home/dani/miniconda3/envs/testtf/lib/python3.7/threading.py\", line 870, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"<ipython-input-1-3fe088eac4c0>\", line 5, in make_model\r\n    tf.keras.layers.Input(10)\r\n  File \"/home/dani/miniconda3/envs/testtf/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/input_layer.py\", line 274, in Input\r\n    input_layer = InputLayer(**input_layer_config)\r\n  File \"/home/dani/miniconda3/envs/testtf/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/input_layer.py\", line 127, in __init__\r\n    ragged=ragged)\r\n  File \"/home/dani/miniconda3/envs/testtf/lib/python3.7/site-packages/tensorflow_core/python/keras/backend.py\", line 1054, in placeholder\r\n    x = array_ops.placeholder(dtype, shape=shape, name=name)\r\n  File \"/home/dani/miniconda3/envs/testtf/lib/python3.7/site-packages/tensorflow_core/python/ops/array_ops.py\", line 2990, in placeholder\r\n    return gen_array_ops.placeholder(dtype=dtype, shape=shape, name=name)\r\n  File \"/home/dani/miniconda3/envs/testtf/lib/python3.7/site-packages/tensorflow_core/python/ops/gen_array_ops.py\", line 6676, in placeholder\r\n    \"Placeholder\", dtype=dtype, shape=shape, name=name)\r\n  File \"/home/dani/miniconda3/envs/testtf/lib/python3.7/site-packages/tensorflow_core/python/framework/op_def_library.py\", line 759, in _apply_op_helper\r\n    return output_structure, op_def.is_stateful, op, outputs\r\n  File \"/home/dani/miniconda3/envs/testtf/lib/python3.7/contextlib.py\", line 119, in __exit__\r\n    next(self.gen)\r\n  File \"/home/dani/miniconda3/envs/testtf/lib/python3.7/site-packages/tensorflow_core/python/framework/func_graph.py\", line 418, in inner_cm\r\n    for fn in self._scope_exit_callbacks:\r\nTypeError: 'NoneType' object is not iterable\r\n```\r\nNotes: the error does not appear in tf 2.0."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35809", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35809/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35809/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35809/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35809", "id": 548749602, "node_id": "MDU6SXNzdWU1NDg3NDk2MDI=", "number": 35809, "title": "Typo Error in `tflite_c02_transfer_learning.ipynb`", "user": {"login": "ManishAradwad", "id": 29497701, "node_id": "MDQ6VXNlcjI5NDk3NzAx", "avatar_url": "https://avatars0.githubusercontent.com/u/29497701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ManishAradwad", "html_url": "https://github.com/ManishAradwad", "followers_url": "https://api.github.com/users/ManishAradwad/followers", "following_url": "https://api.github.com/users/ManishAradwad/following{/other_user}", "gists_url": "https://api.github.com/users/ManishAradwad/gists{/gist_id}", "starred_url": "https://api.github.com/users/ManishAradwad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ManishAradwad/subscriptions", "organizations_url": "https://api.github.com/users/ManishAradwad/orgs", "repos_url": "https://api.github.com/users/ManishAradwad/repos", "events_url": "https://api.github.com/users/ManishAradwad/events{/privacy}", "received_events_url": "https://api.github.com/users/ManishAradwad/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-13T07:25:44Z", "updated_at": "2020-01-14T02:57:51Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\n\r\nhttps://github.com/tensorflow/examples/blob/master/courses/udacity_intro_to_tensorflow_lite/tflite_c02_transfer_learning.ipynb\r\n\r\n## Description of issue (what needs changing):\r\n\r\n![Screenshot from 2020-01-13 12-53-58](https://user-images.githubusercontent.com/29497701/72238480-d7b53400-3603-11ea-847d-0eb7c0eb0716.png)\r\n\r\nIn description, it should be 'cats_vs_dogs'\r\n\r\n### Submit a pull request?\r\n\r\nYes"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35807", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35807/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35807/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35807/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35807", "id": 548692796, "node_id": "MDU6SXNzdWU1NDg2OTI3OTY=", "number": 35807, "title": "concat axis!=-1 and reshape change data layout don't support quant on dsp or NPU", "user": {"login": "sunzhe09", "id": 30410113, "node_id": "MDQ6VXNlcjMwNDEwMTEz", "avatar_url": "https://avatars0.githubusercontent.com/u/30410113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sunzhe09", "html_url": "https://github.com/sunzhe09", "followers_url": "https://api.github.com/users/sunzhe09/followers", "following_url": "https://api.github.com/users/sunzhe09/following{/other_user}", "gists_url": "https://api.github.com/users/sunzhe09/gists{/gist_id}", "starred_url": "https://api.github.com/users/sunzhe09/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sunzhe09/subscriptions", "organizations_url": "https://api.github.com/users/sunzhe09/orgs", "repos_url": "https://api.github.com/users/sunzhe09/repos", "events_url": "https://api.github.com/users/sunzhe09/events{/privacy}", "received_events_url": "https://api.github.com/users/sunzhe09/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, {"login": "miaowang14", "id": 13321498, "node_id": "MDQ6VXNlcjEzMzIxNDk4", "avatar_url": "https://avatars3.githubusercontent.com/u/13321498?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaowang14", "html_url": "https://github.com/miaowang14", "followers_url": "https://api.github.com/users/miaowang14/followers", "following_url": "https://api.github.com/users/miaowang14/following{/other_user}", "gists_url": "https://api.github.com/users/miaowang14/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaowang14/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaowang14/subscriptions", "organizations_url": "https://api.github.com/users/miaowang14/orgs", "repos_url": "https://api.github.com/users/miaowang14/repos", "events_url": "https://api.github.com/users/miaowang14/events{/privacy}", "received_events_url": "https://api.github.com/users/miaowang14/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-01-13T04:11:59Z", "updated_at": "2020-02-21T18:43:33Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):ubuntu18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):pip\r\n- TensorFlow version (use command below):1.14.0\r\n- Python version:\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nnnapi log said:concat axis!=-1 and reshape change data layout don't support accelator\r\n**Describe the expected behavior**\r\nit should run successful on dsp or hta\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n./benmakrk --graph=myquantized.tflite --use_nnapi=true\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\nNew Comment: \"01-08 20:47:35.790 14384 14384 I TypeManager: Failed to read /vendor/etc/nnapi_extensions_app_allowlist ; No app allowlisted for vendor extensions use.\r\n01-08 20:47:35.799 919 1023 E OperationsUtils: NN_CHECK failed: inputShapes[0].scale == inputShapes[i].scale'\r\n01-08 20:47:35.799 919 1023 E OperationsUtils:\r\n01-08 20:47:35.799 919 1023 E OperationsUtils: NN_CHECK failed: inputShapes[0].offset == inputShapes[i].offset'\r\n01-08 20:47:35.799 919 1023 E OperationsUtils:\r\n01-08 20:47:35.801 919 1023 E hta-unnhal: RESHAPE doesn't support changing data layout\r\n01-08 20:47:35.801 919 1023 E hta-unnhal: {RESHAPE, TENSOR_QUANT8} is not supported.\r\n01-08 20:47:35.801 919 1023 E hta-unnhal: RESHAPE doesn't support changing data layout\r\n01-08 20:47:35.801 919 1023 E hta-unnhal: {RESHAPE, TENSOR_QUANT8} is not supported.\r\n01-08 20:47:35.801 919 1023 E hta-unnhal: RESHAPE doesn't support changing data layout\r\n01-08 20:47:35.801 919 1023 E hta-unnhal: {RESHAPE, TENSOR_QUANT8} is not supported.\r\n01-08 20:47:35.801 919 1023 E hta-unnhal: Only supports channel dimension for CONCATENATION\r\n01-08 20:47:35.801 919 1023 E hta-unnhal: {CONCATENATION, TENSOR_QUANT8} is not supported.\r\n01-08 20:47:35.801 919 1023 E hta-unnhal: RESHAPE doesn't support changing data layout\r\n01-08 20:47:35.801 919 1023 E hta-unnhal: {RESHAPE, TENSOR_QUANT8} is not supported.\r\n01-08 20:47:35.801 919 1023 E hta-unnhal: Only supports channel dimension for CONCATENATION\r\n01-08 20:47:35.801 919 1023 E hta-unnhal: {CONCATENATION, TENSOR_QUANT8} is not supported.\r\n01-08 20:47:35.805 919 1023 E OperationsUtils: NN_CHECK failed: inputShapes[0].scale == inputShapes[i].scale'\r\n01-08 20:47:35.805 919 1023 E OperationsUtils:\r\n01-08 20:47:35.806 919 1023 E OperationsUtils: NN_CHECK failed: inputShapes[0].offset == inputShapes[i].offset'\r\n01-08 20:47:35.806 919 1023 E OperationsUtils:\r\n01-08 20:47:35.810 919 1023 W android.hardware.neuralnetworks@1.2-service: pickAcceleratorByName cannot find the accelerator:adreno\r\n01-08 20:47:35.810 919 1023 W android.hardware.neuralnetworks@1.2-service:\r\n01-08 20:47:35.810 919 1023 W android.hardware.neuralnetworks@1.2-service: getSupportedOperations() cannot pick an accelerator\r\n01-08 20:47:35.810 919 1023 W android.hardware.neuralnetworks@1.2-service:\r\n01-08 20:47:35.814 919 919 E hta-unnhal: RESHAPE doesn't support changing data layout\r\n01-08 20:47:35.814 919 919 E hta-unnhal: {RESHAPE, TENSOR_QUANT8} is not supported.\r\n01-08 20:47:35.814 919 919 E hta-unnhal: RESHAPE doesn't support changing data layout\r\n01-08 20:47:35.814 919 919 E hta-unnhal: {RESHAPE, TENSOR_QUANT8} is not supported.\r\n01-08 20:47:35.814 919 919 E hta-unnhal: RESHAPE doesn't support changing data layout\r\n01-08 20:47:35.814 919 919 E hta-unnhal: {RESHAPE, TENSOR_QUANT8} is not supported.\r\n01-08 20:47:35.814 919 919 E hta-unnhal: Only supports channel dimension for CONCATENATION\r\n01-08 20:47:35.814 919 919 E hta-unnhal: {CONCATENATION, TENSOR_QUANT8} is not supported.\r\n01-08 20:47:35.814 919 919 E hta-unnhal: RESHAPE doesn't support changing data layout\r\n01-08 20:47:35.814 919 919 E hta-unnhal: {RESHAPE, TENSOR_QUANT8} is not supported.\r\n01-08 20:47:35.814 919 919 E hta-unnhal: Only supports channel dimension for CONCATENATION\r\n01-08 20:47:35.814 919 919 E hta-unnhal: {CONCATENATION, TENSOR_QUANT8} is not supported.\"\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35805", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35805/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35805/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35805/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35805", "id": 548651341, "node_id": "MDU6SXNzdWU1NDg2NTEzNDE=", "number": 35805, "title": "Win10: ImportError: DLL load failed: The specified module could not be found", "user": {"login": "eduardoavila1m", "id": 38021152, "node_id": "MDQ6VXNlcjM4MDIxMTUy", "avatar_url": "https://avatars2.githubusercontent.com/u/38021152?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eduardoavila1m", "html_url": "https://github.com/eduardoavila1m", "followers_url": "https://api.github.com/users/eduardoavila1m/followers", "following_url": "https://api.github.com/users/eduardoavila1m/following{/other_user}", "gists_url": "https://api.github.com/users/eduardoavila1m/gists{/gist_id}", "starred_url": "https://api.github.com/users/eduardoavila1m/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eduardoavila1m/subscriptions", "organizations_url": "https://api.github.com/users/eduardoavila1m/orgs", "repos_url": "https://api.github.com/users/eduardoavila1m/repos", "events_url": "https://api.github.com/users/eduardoavila1m/events{/privacy}", "received_events_url": "https://api.github.com/users/eduardoavila1m/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2020-01-13T00:18:39Z", "updated_at": "2020-01-23T12:30:24Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10 home\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: PC\r\n- TensorFlow installed from (source or binary): 1.13.0\r\n- TensorFlow version:\r\n- Python version: 3.6\r\n- Installed using virtualenv? pip? conda?: conda\r\n- Bazel version (if compiling from source): 0.21.0\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 10.0 7.4.2.24\r\n- GPU model and memory: RTX 2080 Ti\r\n- CPU model and make: AMD Ryzen 7 3800X 8-Core Processor 3.89GHz\r\n- Anaconda Python Command Prompt\r\n\r\n**Describe the problem**\r\n\r\nTrying to build TF 1.13 from source. Issue at the creation of wheel file with bazel. Attached exact sequence of commands issued. Trying to conver a *.pb file into a TFLite file that was trained in tensorflow 1.13\r\n\r\n**Exact sequence of commands / steps executed before running into the problem**\r\n\r\nconda update -n base -c defaults conda\r\nconda update --all\r\nconda create -n tensorflow-build pip python=3.6\r\nconda activate tensorflow-build\r\npython -m pip install --upgrade pip\r\nconda install -c anaconda git\r\nset PATH=%PATH%;C:\\msys64\\usr\\bin\r\npip install six numpy wheel\r\npip install keras_applications==1.0.6 --no-deps\r\npip install keras_preprocessing==1.0.5 --no-deps\r\nconda install -c conda-forge bazel=0.21.0\r\nmkdir C:\\tensorflow-build\r\ncd C:\\tensorflow-build\r\ngit clone https://github.com/tensorflow/tensorflow.git \r\ncd tensorflow\r\ngit checkout r1.13\r\npython ./configure.py\r\n\r\nYou have bazel 0.21.0- (@non-git) installed. \r\n\r\nPlease specify the location of python. [Default is C:\\ProgramData\\Anaconda3\\envs\\tensorflow-build\\python.exe]: \r\n  \r\nFound possible Python library paths: \r\n\r\n  C:\\ProgramData\\Anaconda3\\envs\\tensorflow-build\\lib\\site-packages \r\n\r\nPlease input the desired Python library path to use.  Default is [C:\\ProgramData\\Anaconda3\\envs\\tensorflow-build\\lib\\site-packages] \r\n\r\nDo you wish to build TensorFlow with XLA JIT support? [y/N]: n \r\nNo XLA JIT support will be enabled for TensorFlow. \r\n\r\nDo you wish to build TensorFlow with ROCm support? [y/N]: n \r\nNo ROCm support will be enabled for TensorFlow. \r\n  \r\nDo you wish to build TensorFlow with CUDA support? [y/N]: y \r\n\r\nPlease specify the CUDA SDK version you want to use. [Leave empty to default to CUDA 10.0]: 10.0\r\n\r\nPlease specify the location where CUDA 10.0 toolkit is installed. Refer to README.md for more details. [Default is C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.0]:\r\n\r\nPlease specify the cuDNN version you want to use. [Leave empty to default to cuDNN 7]: 7.4\r\n\r\nPlease specify the location where cuDNN 7 library is installed. Refer to README.md for more details. [Default is C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.0]:\r\n\r\nPlease specify a list of comma-separated Cuda compute capabilities you want to build with.\r\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\r\nPlease note that each additional compute capability significantly increases your build time and binary size. [Default is: 3.5,7.0]: 7.5\r\n\r\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is /arch:AVX]:\r\n\r\nWould you like to override eigen strong inline for some C++ compilation to reduce the compilation time? [Y/n]: y\r\nEigen strong inline overridden.\r\n\r\nbazel build --config=opt --config=cuda --define=no_tensorflow_py_deps=true //tensorflow/tools/pip_package:build_pip_package\r\n\r\n\r\n**info / logs**\r\n\r\n////////////////////////////////////////////////////////LOG/////////////////////////////////////////////////////\r\n\r\nERROR: C:/tensorflow-build/tensorflow/tensorflow/BUILD:579:1: Executing genrule //tensorflow:tf_python_api_gen_v1 failed (Exit 1): bash.exe failed: error executing command\r\n  cd C:/users/eduar/_bazel_eduar/j7bi4x5j/execroot/org_tensorflow\r\n  SET CUDA_TOOLKIT_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.0\r\n    SET CUDNN_INSTALL_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.0\r\n    SET PATH=C:\\msys64\\usr\\bin;C:\\msys64\\bin\r\n    SET PYTHON_BIN_PATH=C:/Users/eduar/.conda/envs/tensorflow-build/python.exe\r\n    SET PYTHON_LIB_PATH=C:/Users/eduar/.conda/envs/tensorflow-build/lib/site-packages\r\n    SET TF_CUDA_CLANG=0\r\n    SET TF_CUDA_COMPUTE_CAPABILITIES=7.5\r\n    SET TF_CUDA_VERSION=10.0\r\n    SET TF_CUDNN_VERSION=7\r\n    SET TF_NEED_CUDA=1\r\n    SET TF_NEED_OPENCL_SYCL=0\r\n    SET TF_NEED_ROCM=0\r\n  C:/msys64/usr/bin/bash.exe bazel-out/x64_windows-opt/genfiles/tensorflow/tf_python_api_gen_v1.genrule_script.sh\r\nExecution platform: @bazel_tools//platforms:host_platform\r\nTraceback (most recent call last):\r\n  File \"\\\\?\\C:\\Users\\eduar\\AppData\\Local\\Temp\\Bazel.runfiles_fxnhn1zo\\runfiles\\org_tensorflow\\tensorflow\\python\\pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"\\\\?\\C:\\Users\\eduar\\AppData\\Local\\Temp\\Bazel.runfiles_fxnhn1zo\\runfiles\\org_tensorflow\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"\\\\?\\C:\\Users\\eduar\\AppData\\Local\\Temp\\Bazel.runfiles_fxnhn1zo\\runfiles\\org_tensorflow\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"C:\\Users\\eduar\\.conda\\envs\\tensorflow-build\\lib\\imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"C:\\Users\\eduar\\.conda\\envs\\tensorflow-build\\lib\\imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: DLL load failed: The specified module could not be found.\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"\\\\?\\C:\\Users\\eduar\\AppData\\Local\\Temp\\Bazel.runfiles_fxnhn1zo\\runfiles\\org_tensorflow\\tensorflow\\python\\tools\\api\\generator\\create_python_api.py\", line 27, in <module>\r\n    from tensorflow.python.tools.api.generator import doc_srcs\r\n  File \"\\\\?\\C:\\Users\\eduar\\AppData\\Local\\Temp\\Bazel.runfiles_fxnhn1zo\\runfiles\\org_tensorflow\\tensorflow\\python\\__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"\\\\?\\C:\\Users\\eduar\\AppData\\Local\\Temp\\Bazel.runfiles_fxnhn1zo\\runfiles\\org_tensorflow\\tensorflow\\python\\pywrap_tensorflow.py\", line 74, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"\\\\?\\C:\\Users\\eduar\\AppData\\Local\\Temp\\Bazel.runfiles_fxnhn1zo\\runfiles\\org_tensorflow\\tensorflow\\python\\pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"\\\\?\\C:\\Users\\eduar\\AppData\\Local\\Temp\\Bazel.runfiles_fxnhn1zo\\runfiles\\org_tensorflow\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"\\\\?\\C:\\Users\\eduar\\AppData\\Local\\Temp\\Bazel.runfiles_fxnhn1zo\\runfiles\\org_tensorflow\\tensorflow\\python\\pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"C:\\Users\\eduar\\.conda\\envs\\tensorflow-build\\lib\\imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"C:\\Users\\eduar\\.conda\\envs\\tensorflow-build\\lib\\imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\nImportError: DLL load failed: The specified module could not be found.\r\n\r\n\r\nFailed to load the native TensorFlow runtime.\r\n\r\nSee https://www.tensorflow.org/install/errors\r\n\r\nfor some common reasons and solutions.  Include the entire stack trace\r\nabove this error message when asking for help.\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nINFO: Elapsed time: 1319.085s, Critical Path: 291.62s\r\nINFO: 4651 processes: 4651 local.\r\nFAILED: Build did NOT complete successfully\r\n\r\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35802", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35802/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35802/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35802/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35802", "id": 548620751, "node_id": "MDU6SXNzdWU1NDg2MjA3NTE=", "number": 35802, "title": "recude_max on RaggedTensor fails to propagate gradients", "user": {"login": "DavidS3141", "id": 6333870, "node_id": "MDQ6VXNlcjYzMzM4NzA=", "avatar_url": "https://avatars2.githubusercontent.com/u/6333870?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DavidS3141", "html_url": "https://github.com/DavidS3141", "followers_url": "https://api.github.com/users/DavidS3141/followers", "following_url": "https://api.github.com/users/DavidS3141/following{/other_user}", "gists_url": "https://api.github.com/users/DavidS3141/gists{/gist_id}", "starred_url": "https://api.github.com/users/DavidS3141/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DavidS3141/subscriptions", "organizations_url": "https://api.github.com/users/DavidS3141/orgs", "repos_url": "https://api.github.com/users/DavidS3141/repos", "events_url": "https://api.github.com/users/DavidS3141/events{/privacy}", "received_events_url": "https://api.github.com/users/DavidS3141/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-01-12T20:13:51Z", "updated_at": "2020-01-17T18:40:08Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary(pip)\r\n- TensorFlow version (use command below): 2.0.0\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 10.0/7.3.1\r\n- GPU model and memory:\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nCurrently, passing a ragged tensor into a reduce_max an computing the gradient on the result fails. The following code is a minimal example of this:\r\n```python\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\nwith tf.GradientTape() as tape:\r\n    ragged_t = tf.RaggedTensor.from_row_splits(\r\n        [0.0, 1.0, 2.0, 3.0, 4.0, 5.0], [0, 1, 4, 6]\r\n    )\r\n    tape.watch(ragged_t.values)\r\n    max_t = tf.reduce_max(ragged_t, axis=-1)\r\n    # max_t = tf.reduce_max(ragged_t.to_tensor(default_value=np.nan), axis=-1)\r\n    gradients = tape.gradient(max_t, ragged_t.values)\r\n```\r\n\r\n**Describe the expected behavior**\r\nAs tensorflows main purpose is to compute gradients and reduce operations on ragged tensors is the most basic usage of ragged tensor representations I consider this behavior a bug. The above code shows a workaround in the commented line, but I expect the above example to work without this workaround and without the need of allocating in some cases a substantial amount of memory through the usage of `to_tensor`.\r\n\r\n**Other info / logs**\r\nThe full error trace of the above code example on my system is:\r\n```\r\nTraceback (most recent call last):\r\n  File \"./misc/reduce_max_ragged_gradients.py\", line 13, in <module>\r\n    gradients = tape.gradient(max_t, ragged_t.values)\r\n  File \"/lhome/davidj2/code/sync/unsup_flow/.venv/lib/python3.6/site-packages/tensorflow_core/python/eager/backprop.py\", line 1014, in gradient\r\n    unconnected_gradients=unconnected_gradients)\r\n  File \"/lhome/davidj2/code/sync/unsup_flow/.venv/lib/python3.6/site-packages/tensorflow_core/python/eager/imperative_grad.py\", line 76, in imperative_grad\r\n    compat.as_str(unconnected_gradients.value))\r\n  File \"/lhome/davidj2/code/sync/unsup_flow/.venv/lib/python3.6/site-packages/tensorflow_core/python/eager/backprop.py\", line 138, in _gradient_function\r\n    return grad_fn(mock_op, *out_grads)\r\n  File \"/lhome/davidj2/code/sync/unsup_flow/.venv/lib/python3.6/site-packages/tensorflow_core/python/ops/math_grad.py\", line 455, in _UnsortedSegmentMaxGrad\r\n    return _UnsortedSegmentMinOrMaxGrad(op, grad)\r\n  File \"/lhome/davidj2/code/sync/unsup_flow/.venv/lib/python3.6/site-packages/tensorflow_core/python/ops/math_grad.py\", line 432, in _UnsortedSegmentMinOrMaxGrad\r\n    _GatherDropNegatives(op.outputs[0], op.inputs[1])\r\nTypeError: 'NoneType' object is not subscriptable\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35801", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35801/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35801/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35801/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35801", "id": 548619606, "node_id": "MDU6SXNzdWU1NDg2MTk2MDY=", "number": 35801, "title": "[Feature Request] MultiHeadAttention ops and Layer", "user": {"login": "cgarciae", "id": 5862228, "node_id": "MDQ6VXNlcjU4NjIyMjg=", "avatar_url": "https://avatars1.githubusercontent.com/u/5862228?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cgarciae", "html_url": "https://github.com/cgarciae", "followers_url": "https://api.github.com/users/cgarciae/followers", "following_url": "https://api.github.com/users/cgarciae/following{/other_user}", "gists_url": "https://api.github.com/users/cgarciae/gists{/gist_id}", "starred_url": "https://api.github.com/users/cgarciae/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cgarciae/subscriptions", "organizations_url": "https://api.github.com/users/cgarciae/orgs", "repos_url": "https://api.github.com/users/cgarciae/repos", "events_url": "https://api.github.com/users/cgarciae/events{/privacy}", "received_events_url": "https://api.github.com/users/cgarciae/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-01-12T20:04:51Z", "updated_at": "2020-01-14T21:59:37Z", "closed_at": null, "author_association": "NONE", "body": "Multi Head Self Attention is reaching SOTA results in a wide variety of fields:\r\n* NLP (Attention is all you need, GPT, Bert, etc)\r\n* [Graphs](https://arxiv.org/abs/1710.10903)\r\n* Computer Vision: [1](https://arxiv.org/abs/1906.05909) and [2](https://arxiv.org/abs/1911.03584)\r\n* [Time Series](https://arxiv.org/pdf/1909.07369.pdf)\r\n* [Audio/Speech Recognition](https://arxiv.org/pdf/1910.12977.pdf)\r\n\r\nNvidia already added this operation to [cudnn](https://docs.nvidia.com/deeplearning/sdk/cudnn-release-notes/rel_750.html) and pytorch already has an official [MultiHeadAttention](https://pytorch.org/docs/master/nn.html#multiheadattention) module. Its about time Tensorflow gets this operation too as it would enable researches and developers to get started quicker.\r\n\r\nCurrently there is an `Attention` layer in tf.keras but it only covers the main single head equation, has no learnable parameters, and can't be used as a basis for an efficient `MultiHeadAttention` implementation.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35799", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35799/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35799/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35799/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35799", "id": 548594554, "node_id": "MDU6SXNzdWU1NDg1OTQ1NTQ=", "number": 35799, "title": "Incompatible shapes when using tf.keras.backend.ctc_decode", "user": {"login": "faustomorales", "id": 9735401, "node_id": "MDQ6VXNlcjk3MzU0MDE=", "avatar_url": "https://avatars1.githubusercontent.com/u/9735401?v=4", "gravatar_id": "", "url": "https://api.github.com/users/faustomorales", "html_url": "https://github.com/faustomorales", "followers_url": "https://api.github.com/users/faustomorales/followers", "following_url": "https://api.github.com/users/faustomorales/following{/other_user}", "gists_url": "https://api.github.com/users/faustomorales/gists{/gist_id}", "starred_url": "https://api.github.com/users/faustomorales/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/faustomorales/subscriptions", "organizations_url": "https://api.github.com/users/faustomorales/orgs", "repos_url": "https://api.github.com/users/faustomorales/repos", "events_url": "https://api.github.com/users/faustomorales/events{/privacy}", "received_events_url": "https://api.github.com/users/faustomorales/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-01-12T16:36:32Z", "updated_at": "2020-01-24T14:58:45Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Debian Buster\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v2.1.0-rc2-17-ge5bf8de 2.1.0\r\n- Python version: 3.7\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\nWhen using a `tf.keras.backend.ctc_decode` with a batch size <  the size of the model input, a ValueError is raised related to failure to broadcast input shapes.\r\n\r\n**Describe the expected behavior**\r\nI expect shapes to be consistent and therefore no `ValueError` to be raised.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n```python\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\ndef CTCDecoder():\r\n    def decoder(y_pred):\r\n        input_shape = tf.keras.backend.shape(y_pred)\r\n        input_length = tf.ones(shape=input_shape[0]) * tf.keras.backend.cast(input_shape[1], 'float32')\r\n        return tf.keras.backend.ctc_decode(y_pred, input_length)[0][0]\r\n    return tf.keras.layers.Lambda(decoder, name='decode')\r\n\r\ninput_layer = tf.keras.layers.Input((48, 37))\r\nx = CTCDecoder()(input_layer)\r\nmodel = tf.keras.models.Model(inputs=input_layer, outputs=x)\r\n\r\n# This never raises a ValueError. The batch size is equal to the length\r\n# of the input.\r\ny = model.predict(np.random.uniform(size=(100, 48, 37)), batch_size=100)\r\n\r\n# This usually raises a ValueError.\r\ny = model.predict(np.random.uniform(size=(100, 48, 37)), batch_size=32)\r\n\r\n# This always raises a ValueError.\r\ny = model.predict(np.random.uniform(size=(100, 48, 37)), batch_size=1)\r\n```\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nHere is the full traceback for an example exception.\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-145-9e000cf7055c> in <module>\r\n----> 1 y = model.predict(np.random.uniform(size=(100, 48, 37)), batch_size=1)\r\n\r\n/usr/src/.venv/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training.py in predict(self, x, batch_size, verbose, steps, callbacks, max_queue_size, workers, use_multiprocessing)\r\n   1011         max_queue_size=max_queue_size,\r\n   1012         workers=workers,\r\n-> 1013         use_multiprocessing=use_multiprocessing)\r\n   1014 \r\n   1015   def reset_metrics(self):\r\n\r\n/usr/src/.venv/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_v2.py in predict(self, model, x, batch_size, verbose, steps, callbacks, max_queue_size, workers, use_multiprocessing, **kwargs)\r\n    496         model, ModeKeys.PREDICT, x=x, batch_size=batch_size, verbose=verbose,\r\n    497         steps=steps, callbacks=callbacks, max_queue_size=max_queue_size,\r\n--> 498         workers=workers, use_multiprocessing=use_multiprocessing, **kwargs)\r\n    499 \r\n    500 \r\n\r\n/usr/src/.venv/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_v2.py in _model_iteration(self, model, mode, x, y, batch_size, verbose, sample_weight, steps, callbacks, max_queue_size, workers, use_multiprocessing, **kwargs)\r\n    473               mode=mode,\r\n    474               training_context=training_context,\r\n--> 475               total_epochs=1)\r\n    476           cbks.make_logs(model, epoch_logs, result, mode)\r\n    477 \r\n\r\n/usr/src/.venv/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_v2.py in run_one_epoch(model, iterator, execution_function, dataset_size, batch_size, strategy, steps_per_epoch, num_samples, mode, training_context, total_epochs)\r\n    177             batch_outs,\r\n    178             batch_start=step * batch_size,\r\n--> 179             batch_end=step * batch_size + current_batch_size)\r\n    180       cbks.make_logs(model, batch_logs, batch_outs, mode)\r\n    181       step += 1\r\n\r\n/usr/src/.venv/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_utils.py in aggregate(self, batch_outs, batch_start, batch_end)\r\n    345     batch_outs = nest.flatten_up_to(self._structure, batch_outs)\r\n    346     for batch_element, result in zip(batch_outs, self.results):\r\n--> 347       result.aggregate(batch_element, batch_start, batch_end)\r\n    348 \r\n    349   def finalize(self):\r\n\r\n/usr/src/.venv/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_utils.py in aggregate(self, batch_element, batch_start, batch_end)\r\n    278     num_elements = np.prod(batch_element.shape)\r\n    279     if num_elements < self._BINARY_SIZE_THRESHOLD:\r\n--> 280       self.results[batch_start:batch_end] = batch_element\r\n    281     else:\r\n    282       is_finished = threading.Event()\r\n\r\nValueError: could not broadcast input array from shape (1,46) into shape (1,48)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35796", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35796/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35796/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35796/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35796", "id": 548572551, "node_id": "MDU6SXNzdWU1NDg1NzI1NTE=", "number": 35796, "title": "hlo_algorithm_blacklist.cc fails compilation", "user": {"login": "oracle3001", "id": 20092212, "node_id": "MDQ6VXNlcjIwMDkyMjEy", "avatar_url": "https://avatars1.githubusercontent.com/u/20092212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oracle3001", "html_url": "https://github.com/oracle3001", "followers_url": "https://api.github.com/users/oracle3001/followers", "following_url": "https://api.github.com/users/oracle3001/following{/other_user}", "gists_url": "https://api.github.com/users/oracle3001/gists{/gist_id}", "starred_url": "https://api.github.com/users/oracle3001/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oracle3001/subscriptions", "organizations_url": "https://api.github.com/users/oracle3001/orgs", "repos_url": "https://api.github.com/users/oracle3001/repos", "events_url": "https://api.github.com/users/oracle3001/events{/privacy}", "received_events_url": "https://api.github.com/users/oracle3001/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-12T13:45:39Z", "updated_at": "2020-01-14T06:41:55Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution : Windows 10\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version: 2.1\r\n- Python version: 3.7\r\n- Bazel version (if compiling from source): 0.29.1\r\n- GCC/Compiler version (if compiling from source): VS2019\r\n- CUDA/cuDNN version: 10.1 / 7.6\r\n- GPU model and memory: 2070 Max Q\r\n\r\nI setup it using configure with the following options selected : \r\n- XLA JIT\r\n- Cuda\r\n- /arch:AVX\r\n- Eigen strong inline overridden\r\n\r\nWhen attempting to build from source using the following command. \r\n\r\nbazel build --config=opt --config=cuda --define=no_tensorflow_py_deps=true //tensorflow:libtensorflow.so\r\n\r\nI get the following error.\r\n\r\nERROR: C:/sdks/tensorflow/tensorflow/compiler/xla/service/gpu/BUILD:1616:1: C++ compilation of rule '//tensorflow/compiler/xla/service/gpu:hlo_algorithm_blacklist' failed (Exit 2)\r\ncl : Command line warning D9002 : ignoring unknown option '-std=c++14'\r\ntensorflow/compiler/xla/service/gpu/hlo_algorithm_blacklist.cc(28): error C2131: expression did not evaluate to a constant\r\nexternal/com_google_absl\\absl/strings/string_view.h(186): note: a non-constant (sub-)expression was encountered\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35794", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35794/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35794/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35794/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35794", "id": 548565346, "node_id": "MDU6SXNzdWU1NDg1NjUzNDY=", "number": 35794, "title": "Failed to allocate memory for tensor_info, 1320 bytes required", "user": {"login": "pramodjayram", "id": 22176659, "node_id": "MDQ6VXNlcjIyMTc2NjU5", "avatar_url": "https://avatars2.githubusercontent.com/u/22176659?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pramodjayram", "html_url": "https://github.com/pramodjayram", "followers_url": "https://api.github.com/users/pramodjayram/followers", "following_url": "https://api.github.com/users/pramodjayram/following{/other_user}", "gists_url": "https://api.github.com/users/pramodjayram/gists{/gist_id}", "starred_url": "https://api.github.com/users/pramodjayram/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pramodjayram/subscriptions", "organizations_url": "https://api.github.com/users/pramodjayram/orgs", "repos_url": "https://api.github.com/users/pramodjayram/repos", "events_url": "https://api.github.com/users/pramodjayram/events{/privacy}", "received_events_url": "https://api.github.com/users/pramodjayram/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1589976566, "node_id": "MDU6TGFiZWwxNTg5OTc2NTY2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:micro", "name": "comp:micro", "color": "3e2eea", "default": false, "description": "Related to TensorFlow Lite Microcontrollers"}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "njeffrie", "id": 6947391, "node_id": "MDQ6VXNlcjY5NDczOTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/6947391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/njeffrie", "html_url": "https://github.com/njeffrie", "followers_url": "https://api.github.com/users/njeffrie/followers", "following_url": "https://api.github.com/users/njeffrie/following{/other_user}", "gists_url": "https://api.github.com/users/njeffrie/gists{/gist_id}", "starred_url": "https://api.github.com/users/njeffrie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/njeffrie/subscriptions", "organizations_url": "https://api.github.com/users/njeffrie/orgs", "repos_url": "https://api.github.com/users/njeffrie/repos", "events_url": "https://api.github.com/users/njeffrie/events{/privacy}", "received_events_url": "https://api.github.com/users/njeffrie/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "njeffrie", "id": 6947391, "node_id": "MDQ6VXNlcjY5NDczOTE=", "avatar_url": "https://avatars2.githubusercontent.com/u/6947391?v=4", "gravatar_id": "", "url": "https://api.github.com/users/njeffrie", "html_url": "https://github.com/njeffrie", "followers_url": "https://api.github.com/users/njeffrie/followers", "following_url": "https://api.github.com/users/njeffrie/following{/other_user}", "gists_url": "https://api.github.com/users/njeffrie/gists{/gist_id}", "starred_url": "https://api.github.com/users/njeffrie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/njeffrie/subscriptions", "organizations_url": "https://api.github.com/users/njeffrie/orgs", "repos_url": "https://api.github.com/users/njeffrie/repos", "events_url": "https://api.github.com/users/njeffrie/events{/privacy}", "received_events_url": "https://api.github.com/users/njeffrie/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-12T12:42:43Z", "updated_at": "2020-01-16T00:48:58Z", "closed_at": null, "author_association": "NONE", "body": "@tensorflow/micro\r\n\r\nHost OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nNAME=\"Ubuntu\"\r\nVERSION=\"18.04.3 LTS\"\r\nID=ubuntu\r\nPRETTY_NAME=\"Ubuntu 18.04.3 LTS\"\r\nVERSION_ID=\"18.04\"\r\nPython versionL 2.7.15+\r\nTarget platform : K64F\r\n\r\n**Describe the problem**\r\nI have build a GRU model in python and converted to a bin format for ARM K64F board. When I flash the binary I get the following error message in the serial console.  How can I fix it? Any help is appreciated.\r\n\r\n`Failed to allocate memory for tensor_info, 1320 bytes required\r\nAllocateTensors() failed\r\n\r\n++ MbedOS Fault Handler ++\r\n\r\nFaultType: HardFault\r\n\r\nContext:\r\nR0   : 00000000\r\nR1   : 00000000\r\nR2   : 00000000\r\nR3   : 20013FE8\r\nR4   : 00000000\r\nR5   : 00000000\r\nR6   : 00000000\r\nR7   : 20002368\r\nR8   : 20002364\r\nR9   : 00000000\r\nR10  : 00000000\r\nR11  : 00000000\r\nR12  : 000000B0\r\nSP   : 20013F10\r\nLR   : 00008E89\r\nPC   : 000010E4\r\nxPSR : 61070000\r\nPSP  : 20013EA8\r\nMSP  : 2002FFC0\r\nCPUID: 410FC241\r\nHFSR : 40000000\r\nMMFSR: 00000000\r\nBFSR : 00000004\r\nUFSR : 00000000\r\nDFSR : 00000008\r\nAFSR : 00000000\r\nMode : Thread\r\nPriv : Privileged\r\nStack: PSP\r\n\r\n-- MbedOS Fault Handler --\r\n\r\n\r\n\r\n++ MbedOS Error Info ++\r\nError Status: 0x80FF013D Code: 317 Module: 255\r\nError Message: Fault exception\r\nLocation: 0x10E4\r\nError Value: 0x1FFF0400\r\nCurrent Thread: main Id: 0x200013E8 Entry: 0x3F07 StackSize: 0x10000 StackMem: 0x20004010 SP: 0x20013F10\r\nFor more info, visit: https://mbed.com/s/error?error=0x80FF013D&tgt=K64F\r\n-- MbedOS Error Info --\r\n\r\n= System will be rebooted due to a fatal error =\r\n= Reboot count(=7) reached maximum, system will halt after rebooting\r\n`\r\n\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35785", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35785/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35785/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35785/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35785", "id": 548516819, "node_id": "MDU6SXNzdWU1NDg1MTY4MTk=", "number": 35785, "title": "TPU InternalError with TF 2.1.0 on Google Colab (Assigned device does not have registered OpKernel support for _Arg node iteratorgetnext_iterator)", "user": {"login": "MichaelKarpe", "id": 28049739, "node_id": "MDQ6VXNlcjI4MDQ5NzM5", "avatar_url": "https://avatars0.githubusercontent.com/u/28049739?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MichaelKarpe", "html_url": "https://github.com/MichaelKarpe", "followers_url": "https://api.github.com/users/MichaelKarpe/followers", "following_url": "https://api.github.com/users/MichaelKarpe/following{/other_user}", "gists_url": "https://api.github.com/users/MichaelKarpe/gists{/gist_id}", "starred_url": "https://api.github.com/users/MichaelKarpe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MichaelKarpe/subscriptions", "organizations_url": "https://api.github.com/users/MichaelKarpe/orgs", "repos_url": "https://api.github.com/users/MichaelKarpe/repos", "events_url": "https://api.github.com/users/MichaelKarpe/events{/privacy}", "received_events_url": "https://api.github.com/users/MichaelKarpe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rxsang", "id": 6399870, "node_id": "MDQ6VXNlcjYzOTk4NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/6399870?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rxsang", "html_url": "https://github.com/rxsang", "followers_url": "https://api.github.com/users/rxsang/followers", "following_url": "https://api.github.com/users/rxsang/following{/other_user}", "gists_url": "https://api.github.com/users/rxsang/gists{/gist_id}", "starred_url": "https://api.github.com/users/rxsang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rxsang/subscriptions", "organizations_url": "https://api.github.com/users/rxsang/orgs", "repos_url": "https://api.github.com/users/rxsang/repos", "events_url": "https://api.github.com/users/rxsang/events{/privacy}", "received_events_url": "https://api.github.com/users/rxsang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rxsang", "id": 6399870, "node_id": "MDQ6VXNlcjYzOTk4NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/6399870?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rxsang", "html_url": "https://github.com/rxsang", "followers_url": "https://api.github.com/users/rxsang/followers", "following_url": "https://api.github.com/users/rxsang/following{/other_user}", "gists_url": "https://api.github.com/users/rxsang/gists{/gist_id}", "starred_url": "https://api.github.com/users/rxsang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rxsang/subscriptions", "organizations_url": "https://api.github.com/users/rxsang/orgs", "repos_url": "https://api.github.com/users/rxsang/repos", "events_url": "https://api.github.com/users/rxsang/events{/privacy}", "received_events_url": "https://api.github.com/users/rxsang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2020-01-12T03:45:09Z", "updated_at": "2020-02-08T20:45:59Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Google Colab\r\n- TensorFlow installed from (source or binary): use of `%tensorflow_version 2.x`\r\n- TensorFlow version (use command below): 2.1.0-rc1\r\n- Python version: 3.6.9\r\n\r\n**Describe the current behavior**\r\n\r\nI tried to run @huan's Google Colab Notebook mentioned [here](https://stackoverflow.com/questions/55541881/how-to-convert-tf-keras-model-to-tpu-using-tensorflow-2-0-in-google-colab/55686370#55686370) and available [here](https://colab.research.google.com/github/huan/tensorflow-handbook-tpu/blob/master/tensorflow-handbook-tpu-example.ipynb). It raises the following error:\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nInternalError                             Traceback (most recent call last)\r\n<ipython-input-7-79d308ea228d> in <module>()\r\n      4   steps_per_epoch=60,\r\n      5   validation_data=(x_test.astype(np.float32), y_test.astype(np.float32)),\r\n----> 6   validation_freq=5\r\n      7 )\r\n      8 \r\n\r\n11 frames\r\n/usr/local/lib/python3.6/dist-packages/six.py in raise_from(value, from_value)\r\n\r\nInternalError: Assigned device '/job:worker/replica:0/task:0/device:TPU:0' does not have registered OpKernel support for _Arg\r\n\t [[{{node iteratorgetnext_iterator}}]] [Op:__inference_distributed_function_2822]\r\n```\r\n\r\nI tried `tf.compat.v1.disable_eager_execution()` as discussed [here](https://github.com/huan/tensorflow-handbook-tpu/issues/1) but it doesn't work:\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nRuntimeError                              Traceback (most recent call last)\r\n<ipython-input-15-5118e7c1b79a> in <module>()\r\n      6   steps_per_epoch=60,\r\n      7   validation_data=(x_test.astype(np.float32), y_test.astype(np.float32)),\r\n----> 8   validation_freq=5\r\n      9 )\r\n     10 \r\n\r\n25 frames\r\n/tensorflow-2.1.0/python3.6/tensorflow_core/python/framework/ops.py in convert_to_tensor(value, dtype, name, as_ref, preferred_dtype, dtype_hint, ctx, accepted_result_types)\r\n   1278       graph = get_default_graph()\r\n   1279       if not graph.building_function:\r\n-> 1280         raise RuntimeError(\"Attempting to capture an EagerTensor without \"\r\n   1281                            \"building a function.\")\r\n   1282       return graph.capture(value, name=name)\r\n\r\nRuntimeError: Attempting to capture an EagerTensor without building a function.\r\n```\r\n\r\n**Describe the expected behavior**\r\n\r\nNot sure if @huan's example should be working given what he explained on [stackoverflow](https://stackoverflow.com/questions/55541881/how-to-convert-tf-keras-model-to-tpu-using-tensorflow-2-0-in-google-colab/55686370#55686370), but I think it should with TF 2.1.0 version.\r\n\r\n**Code to reproduce the issue**\r\nAgain, @huan's work available [here](https://colab.research.google.com/github/huan/tensorflow-handbook-tpu/blob/master/tensorflow-handbook-tpu-example.ipynb).\r\n\r\n**Other info / logs**\r\nI had the same issue with personal code and thought first it was due to `ImageDataGenerator` (see my last comment [here](https://github.com/tensorflow/tensorflow/issues/34346)), however it seems not to be as @huan's example doesn't use it.\r\nI have the same issue on @huan's code with TF 2.1.0 installed with `!pip install tensorflow==2.1.0` in his notebook."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35784", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35784/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35784/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35784/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35784", "id": 548516715, "node_id": "MDU6SXNzdWU1NDg1MTY3MTU=", "number": 35784, "title": "The tflite only utilize single core of CPU", "user": {"login": "woolpeeker", "id": 19727545, "node_id": "MDQ6VXNlcjE5NzI3NTQ1", "avatar_url": "https://avatars1.githubusercontent.com/u/19727545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/woolpeeker", "html_url": "https://github.com/woolpeeker", "followers_url": "https://api.github.com/users/woolpeeker/followers", "following_url": "https://api.github.com/users/woolpeeker/following{/other_user}", "gists_url": "https://api.github.com/users/woolpeeker/gists{/gist_id}", "starred_url": "https://api.github.com/users/woolpeeker/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/woolpeeker/subscriptions", "organizations_url": "https://api.github.com/users/woolpeeker/orgs", "repos_url": "https://api.github.com/users/woolpeeker/repos", "events_url": "https://api.github.com/users/woolpeeker/events{/privacy}", "received_events_url": "https://api.github.com/users/woolpeeker/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2020-01-12T03:43:00Z", "updated_at": "2020-01-28T01:00:28Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nYes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nUbuntu18.04 and Raspbian 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\nRaspberry Pi 4\r\n- TensorFlow installed from (source or binary):\r\nBinary\r\n- TensorFlow version (use command below):\r\nfor Ubuntu            v1.14.0-rc1-22-gaf24dc9 1.14.0\r\nfor Raspberry Pi     v1.12.1-14948-g43dcb71 1.14.0\r\n- Python version:\r\n3.7\r\n\r\n**Describe the current behavior**\r\nThe tflite only utilize single core of CPU. I test it on PC and raspberry Pi 4.\r\n\r\n**Code to reproduce the issue**\r\n`interpreter = tf.lite.Interpreter(model_content=tflite_model) \r\n\r\ninput_details = interpreter.get_input_details() \r\n\r\noutput_details = interpreter.get_output_details() \r\n\r\ninterpreter.allocate_tensors() \r\n\r\ninterpreter.set_tensor(input_details[0]['index'], inp) \r\n\r\ninterpreter.invoke() \r\n\r\nresult = interpreter.get_tensor(output_details[0]['index'])`\r\n\r\nThe model I use is here:\r\n[1578756226.tar.gz](https://github.com/tensorflow/tensorflow/files/4050550/1578756226.tar.gz)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35783", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35783/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35783/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35783/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35783", "id": 548510129, "node_id": "MDU6SXNzdWU1NDg1MTAxMjk=", "number": 35783, "title": "model._function_kwargs is silently ignored", "user": {"login": "bersbersbers", "id": 12128514, "node_id": "MDQ6VXNlcjEyMTI4NTE0", "avatar_url": "https://avatars1.githubusercontent.com/u/12128514?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bersbersbers", "html_url": "https://github.com/bersbersbers", "followers_url": "https://api.github.com/users/bersbersbers/followers", "following_url": "https://api.github.com/users/bersbersbers/following{/other_user}", "gists_url": "https://api.github.com/users/bersbersbers/gists{/gist_id}", "starred_url": "https://api.github.com/users/bersbersbers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bersbersbers/subscriptions", "organizations_url": "https://api.github.com/users/bersbersbers/orgs", "repos_url": "https://api.github.com/users/bersbersbers/repos", "events_url": "https://api.github.com/users/bersbersbers/events{/privacy}", "received_events_url": "https://api.github.com/users/bersbersbers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-12T02:16:12Z", "updated_at": "2020-01-22T23:51:52Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): see below\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows, Linux\r\n- TensorFlow installed from (source or binary): pip\r\n- TensorFlow version (use command below): 2.1.0\r\n- Python version: 3.7.6\r\n\r\n**Describe the current behavior**\r\nIn this example, no error is raised although session kwargs are not supported in eager mode. kwargs are simply silently ignored.\r\n```\r\nimport tensorflow as tf\r\nfrom tensorflow import keras\r\n\r\nfetches = [lambda: whatever_I_write_here_is_ignored]\r\n\r\nvar = tf.Variable([[3.0]])\r\nmodel = keras.models.Sequential([keras.layers.Dense(1, input_shape=(1,))])\r\nmodel.compile(loss=\"mse\", optimizer=\"adam\")\r\nmodel._function_kwargs = {\"fetches\": fetches, \"should_fail\": \"ignored_as_well\"}\r\n\r\nmodel.fit([[7.0]], [[9.0]], epochs=2)\r\n```\r\n\r\n**Describe the expected behavior**\r\nAn error should be raised. I am aware that `model._function_kwargs` is not part of the public API, but `keras` (as opposed to `tf.keras`) does raise an error here:\r\n```\r\nimport keras\r\nimport tensorflow as tf\r\n\r\nfetches = [lambda: whatever_I_write_here_is_ignored]\r\n\r\nvar = tf.Variable([[3.0]])\r\nmodel = keras.models.Sequential([keras.layers.Dense(1, input_shape=(1,))])\r\nmodel.compile(loss=\"mse\", optimizer=\"adam\")\r\nmodel._function_kwargs = {\"fetches\": fetches, \"should_fail\": \"ignored_as_well\"}\r\n\r\nmodel.fit([[7.0]], [[9.0]], epochs=2)\r\n```\r\n\r\noutputs\r\n```\r\nException has occurred: ValueError\r\nSession keyword arguments are not support during eager execution. You passed: {'fetches': [<function <lambda> at 0x7f94681be3b0>], 'should_fail': 'ignored_as_well'}\r\n  File \"/home/bersbersbers/.pyenv/versions/3.7.6/lib/python3.7/site-packages/tensorflow_core/python/keras/backend.py\", line 3759, in function\r\n```\r\nSomewhat related: https://github.com/tensorflow/tensorflow/issues/34448"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35781", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35781/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35781/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35781/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35781", "id": 548504926, "node_id": "MDU6SXNzdWU1NDg1MDQ5MjY=", "number": 35781, "title": "tf.Variable.assign fails silently", "user": {"login": "bersbersbers", "id": 12128514, "node_id": "MDQ6VXNlcjEyMTI4NTE0", "avatar_url": "https://avatars1.githubusercontent.com/u/12128514?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bersbersbers", "html_url": "https://github.com/bersbersbers", "followers_url": "https://api.github.com/users/bersbersbers/followers", "following_url": "https://api.github.com/users/bersbersbers/following{/other_user}", "gists_url": "https://api.github.com/users/bersbersbers/gists{/gist_id}", "starred_url": "https://api.github.com/users/bersbersbers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bersbersbers/subscriptions", "organizations_url": "https://api.github.com/users/bersbersbers/orgs", "repos_url": "https://api.github.com/users/bersbersbers/repos", "events_url": "https://api.github.com/users/bersbersbers/events{/privacy}", "received_events_url": "https://api.github.com/users/bersbersbers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-01-12T01:29:21Z", "updated_at": "2020-01-22T23:20:13Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): see below\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10, Linux\r\n- TensorFlow installed from (source or binary): pip\r\n- TensorFlow version (use command below): 2.1.0\r\n- Python version: 3.7.6\r\n\r\n\r\n**Describe the current behavior**\r\nA special assign operation does nothing (not even raising an error).\r\n\r\n**Describe the expected behavior**\r\nAt least an error should be raised.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\nfrom tensorflow import keras\r\n\r\n# tf.config.experimental_run_functions_eagerly(True)\r\nvar = tf.Variable([[3.0]])\r\nmodel = keras.Sequential([keras.layers.Dense(1, input_shape=(1,))])\r\nmodel.compile(loss=\"mse\", optimizer=\"adam\")\r\n\r\ntf.print(var)  # should print 3, OK\r\nvar.assign(model.inputs[0])\r\ntf.print(var)  # should print anything else but 3, or raise an error - but prints 3\r\n```\r\n\r\n**Other info / logs**\r\n```\r\n>>> tf.print(var)  # should print 3, OK\r\n[[3]]\r\n>>> var.assign(model.inputs[0])\r\n<tf.Variable 'UnreadVariable' shape=(1, 1) dtype=float32, numpy=array([[3.]], dtype=float32)>\r\n>>> tf.print(var)  # should print anything else but 3, or raise an error - fail.\r\n[[3]]\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35774", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35774/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35774/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35774/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35774", "id": 548435920, "node_id": "MDU6SXNzdWU1NDg0MzU5MjA=", "number": 35774, "title": "Installation from Docker instructions have wrong argument in workspace flag", "user": {"login": "MarcoGorelli", "id": 33491632, "node_id": "MDQ6VXNlcjMzNDkxNjMy", "avatar_url": "https://avatars2.githubusercontent.com/u/33491632?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarcoGorelli", "html_url": "https://github.com/MarcoGorelli", "followers_url": "https://api.github.com/users/MarcoGorelli/followers", "following_url": "https://api.github.com/users/MarcoGorelli/following{/other_user}", "gists_url": "https://api.github.com/users/MarcoGorelli/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarcoGorelli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarcoGorelli/subscriptions", "organizations_url": "https://api.github.com/users/MarcoGorelli/orgs", "repos_url": "https://api.github.com/users/MarcoGorelli/repos", "events_url": "https://api.github.com/users/MarcoGorelli/events{/privacy}", "received_events_url": "https://api.github.com/users/MarcoGorelli/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-01-11T14:25:16Z", "updated_at": "2020-01-13T10:48:42Z", "closed_at": null, "author_association": "NONE", "body": "I'm trying to [build tensorflow from source](https://www.tensorflow.org/install/source) following the Docker instructions:\r\n>docker pull tensorflow/tensorflow:devel\r\n\r\n>docker run -it -w /tensorflow -v $PWD:/mnt -e HOST_PERMS=\"$(id -u):$(id -g)\" \\\r\n    tensorflow/tensorflow:devel bash\r\n>\r\n>git pull  # within the container, download the latest source code\r\n\r\nHere are the commands I run in the terminal (on Ubuntu), along with their output:\r\n```\r\n$ docker --version\r\nDocker version 19.03.2, build 6a30dfc\r\n\r\n$ docker pull tensorflow/tensorflow:devel\r\ndevel: Pulling from tensorflow/tensorflow\r\nDigest: sha256:0ee065743f0001f922561bcba914013929a88263ec2a5af21ba35899c3ac85a7\r\nStatus: Image is up to date for tensorflow/tensorflow:devel\r\ndocker.io/tensorflow/tensorflow:devel\r\n\r\n$ docker run -it -w /tensorflow -v $PWD:/mnt -e HOST_PERMS=\"$(id -u):$(id -g)\" \\\r\n>     tensorflow/tensorflow:devel bash\r\n\r\n________                               _______________                \r\n___  __/__________________________________  ____/__  /________      __\r\n__  /  _  _ \\_  __ \\_  ___/  __ \\_  ___/_  /_   __  /_  __ \\_ | /| / /\r\n_  /   /  __/  / / /(__  )/ /_/ /  /   _  __/   _  / / /_/ /_ |/ |/ / \r\n/_/    \\___//_/ /_//____/ \\____//_/    /_/      /_/  \\____/____/|__/\r\n\r\n\r\nWARNING: You are running this container as root, which can cause new files in\r\nmounted volumes to be created as the root user on your host machine.\r\n\r\nTo avoid this, run the container by specifying your user's userid:\r\n\r\n$ docker run -u $(id -u):$(id -g) args...\r\n\r\nroot@4746a002f18e:/tensorflow# \r\n\r\n```\r\n\r\nBut now, if I run `git pull` as instructed, I get\r\n```\r\nfatal: not a git repository (or any of the parent directories): .git\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35770", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35770/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35770/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35770/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35770", "id": 548403984, "node_id": "MDU6SXNzdWU1NDg0MDM5ODQ=", "number": 35770, "title": "ERROR: ~/....../tensorflow/python/keras/api/BUILD:130:1: Executing genrule //tensorflow/python/keras/api:keras_python_api_gen_compat_v2 failed", "user": {"login": "jiapei100", "id": 154013, "node_id": "MDQ6VXNlcjE1NDAxMw==", "avatar_url": "https://avatars1.githubusercontent.com/u/154013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jiapei100", "html_url": "https://github.com/jiapei100", "followers_url": "https://api.github.com/users/jiapei100/followers", "following_url": "https://api.github.com/users/jiapei100/following{/other_user}", "gists_url": "https://api.github.com/users/jiapei100/gists{/gist_id}", "starred_url": "https://api.github.com/users/jiapei100/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jiapei100/subscriptions", "organizations_url": "https://api.github.com/users/jiapei100/orgs", "repos_url": "https://api.github.com/users/jiapei100/repos", "events_url": "https://api.github.com/users/jiapei100/events{/privacy}", "received_events_url": "https://api.github.com/users/jiapei100/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2020-01-11T09:02:08Z", "updated_at": "2020-03-12T02:16:24Z", "closed_at": null, "author_association": "NONE", "body": "\r\nbazel 1.1.0\r\n\r\n```console\r\n\u279c  tensorflow git:(master) \u2717 bazel version\r\nBuild label: 1.1.0- (@non-git)\r\nBuild target: bazel-out/k8-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Wed. Jan. 8 01:20:59 2020 (1578446459)\r\nBuild timestamp: 1578446459\r\nBuild timestamp as int: 1578446459\r\n```\r\n\r\nfailed to build tensorflow master.\r\n```console\r\nINFO: From Compiling tensorflow/lite/toco/graph_transformations/propagate_array_data_types.cc [for host]:\r\ntensorflow/lite/toco/graph_transformations/propagate_array_data_types.cc: In member function 'virtual tensorflow::Status toco::PropagateArrayDataTypes::Run(toco::Model*, std::size_t, bool*)':\r\ntensorflow/lite/toco/graph_transformations/propagate_array_data_types.cc:173:25: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\r\n       for (int i = 0; i < op->outputs.size(); ++i) {\r\n                       ~~^~~~~~~~~~~~~~~~~~~~\r\nERROR: ~/....../tensorflow/python/keras/api/BUILD:130:1: Executing genrule //tensorflow/python/keras/api:keras_python_api_gen_compat_v2 failed (Exit 1)\r\nTraceback (most recent call last):\r\n  File \"~/.cache/bazel/_bazel_longervision/449dd09be7229482c168e6868d06849c/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 776, in <module>\r\n    main()\r\n  File \"~/.cache/bazel/_bazel_longervision/449dd09be7229482c168e6868d06849c/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 772, in main\r\n    lazy_loading, args.use_relative_imports)\r\n  File \"~/.cache/bazel/_bazel_longervision/449dd09be7229482c168e6868d06849c/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 629, in create_api_files\r\n    compat_api_versions, lazy_loading, use_relative_imports)\r\n  File \"~/.cache/bazel/_bazel_longervision/449dd09be7229482c168e6868d06849c/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 503, in get_api_init_text\r\n    _, attr = tf_decorator.unwrap(attr)\r\n  File \"~/.cache/bazel/_bazel_longervision/449dd09be7229482c168e6868d06849c/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/util/tf_decorator.py\", line 219, in unwrap\r\n    elif _has_tf_decorator_attr(cur):\r\n  File \"~/.cache/bazel/_bazel_longervision/449dd09be7229482c168e6868d06849c/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/util/tf_decorator.py\", line 124, in _has_tf_decorator_attr\r\n    hasattr(obj, '_tf_decorator') and\r\n  File \"~/.cache/bazel/_bazel_longervision/449dd09be7229482c168e6868d06849c/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/util/lazy_loader.py\", line 62, in __getattr__\r\n    module = self._load()\r\n  File \"~/.cache/bazel/_bazel_longervision/449dd09be7229482c168e6868d06849c/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/python/util/lazy_loader.py\", line 45, in _load\r\n    module = importlib.import_module(self.__name__)\r\n  File \"/usr/lib/python3.6/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 994, in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 971, in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 955, in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 665, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\", line 678, in exec_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\n  File \"~/.cache/bazel/_bazel_longervision/449dd09be7229482c168e6868d06849c/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/compiler/tf2tensorrt/wrap_py_utils.py\", line 28, in <module>\r\n    _wrap_py_utils = swig_import_helper()\r\n  File \"~/.cache/bazel/_bazel_longervision/449dd09be7229482c168e6868d06849c/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/compiler/tf2tensorrt/wrap_py_utils.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_wrap_py_utils', fp, pathname, description)\r\n  File \"/usr/lib/python3.6/imp.py\", line 243, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/usr/lib/python3.6/imp.py\", line 343, in load_dynamic\r\n    return _load(spec)\r\n  File \"<frozen importlib._bootstrap>\", line 684, in _load\r\n  File \"<frozen importlib._bootstrap>\", line 658, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap>\", line 571, in module_from_spec\r\n  File \"<frozen importlib._bootstrap_external>\", line 922, in create_module\r\n  File \"<frozen importlib._bootstrap>\", line 219, in _call_with_frames_removed\r\nImportError: ~/.cache/bazel/_bazel_longervision/449dd09be7229482c168e6868d06849c/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/python/keras/api/create_tensorflow.python_api_keras_python_api_gen_compat_v2.runfiles/org_tensorflow/tensorflow/compiler/tf2tensorrt/_wrap_py_utils.so: undefined symbol: _ZN15stream_executor14StreamExecutor18EnablePeerAccessToEPS0_\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nERROR: ~/....../tensorflow/python/tools/BUILD:81:1 Executing genrule //tensorflow/python/keras/api:keras_python_api_gen_compat_v2 failed (Exit 1)\r\nINFO: Elapsed time: 10740.244s, Critical Path: 307.06s\r\nINFO: 15793 processes: 15793 local.\r\nFAILED: Build did NOT complete successfully\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35763", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35763/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35763/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35763/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35763", "id": 548368733, "node_id": "MDU6SXNzdWU1NDgzNjg3MzM=", "number": 35763, "title": "A Subclass of Custom Loss Function Is not Trackable as an Argument in Checkpoint", "user": {"login": "yourtheron", "id": 51472988, "node_id": "MDQ6VXNlcjUxNDcyOTg4", "avatar_url": "https://avatars1.githubusercontent.com/u/51472988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yourtheron", "html_url": "https://github.com/yourtheron", "followers_url": "https://api.github.com/users/yourtheron/followers", "following_url": "https://api.github.com/users/yourtheron/following{/other_user}", "gists_url": "https://api.github.com/users/yourtheron/gists{/gist_id}", "starred_url": "https://api.github.com/users/yourtheron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yourtheron/subscriptions", "organizations_url": "https://api.github.com/users/yourtheron/orgs", "repos_url": "https://api.github.com/users/yourtheron/repos", "events_url": "https://api.github.com/users/yourtheron/events{/privacy}", "received_events_url": "https://api.github.com/users/yourtheron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "allenlavoie", "id": 3731025, "node_id": "MDQ6VXNlcjM3MzEwMjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/3731025?v=4", "gravatar_id": "", "url": "https://api.github.com/users/allenlavoie", "html_url": "https://github.com/allenlavoie", "followers_url": "https://api.github.com/users/allenlavoie/followers", "following_url": "https://api.github.com/users/allenlavoie/following{/other_user}", "gists_url": "https://api.github.com/users/allenlavoie/gists{/gist_id}", "starred_url": "https://api.github.com/users/allenlavoie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/allenlavoie/subscriptions", "organizations_url": "https://api.github.com/users/allenlavoie/orgs", "repos_url": "https://api.github.com/users/allenlavoie/repos", "events_url": "https://api.github.com/users/allenlavoie/events{/privacy}", "received_events_url": "https://api.github.com/users/allenlavoie/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-01-11T02:32:29Z", "updated_at": "2020-03-07T00:59:15Z", "closed_at": null, "author_association": "NONE", "body": "Tf Version: 2.0.0\r\nPython: 3.7.5\r\nIDE: Spyder\r\nOS: Windows\r\n\r\nI wrote a subclass of custom loss function and tried to list it in the arguments of a checkpoint as follows. The model is an arbitrary one\r\n```\r\nclass SoftDiceLoss(tf.keras.losses.Loss):\r\n    '''\r\n    SoftDiceLoss calculates multi-class soft dice loss\r\n    loss = avg_batch(1-(sum(W_k*sum(yPred.*yTrue)))/(sum(W_ksum(yPred^2+yTrue^2))))\r\n    where W_k = 1/(number of voxels in class k)^wPow\r\n    Class number of segmented regions includes background\r\n    Args:\r\n        yPred/yTrue: prediced and desired outputs shaped as [mbSize, classNum, tensor dimensions]. Also, both must be float-point\r\n    \twPow, power of weiight. A higher one favours classes with a smaller number of voxels\r\n    Return:\r\n        loss: a scalar tensor\r\n    '''\r\n    def __init__(self, wPow=2.0, name='SoftDiceLoss'):\r\n        super().__init__(name=name)\r\n        self.epsilon = 1e-16 \r\n        self.wPow = wPow\r\n\r\n    def call(self, yPred, yTrue):\r\n        yTrue =tf.dtypes.cast(yTrue, dtype=yPred.dtype)\r\n\t\t# Dot product yPred and yTrue and sum them up for each datum and class\r\n        crossProd=tf.multiply(yPred, yTrue)\r\n\t\t# As a symbolic tensor, dimensions and shapes etc. cannot be extracted from data, nor can it be used in subroutines.\r\n        crossProdSum=tf.math.reduce_sum(crossProd, axis=np.arange(2, 5)) #tf.rank(yTrue)))\r\n\t\t# Calculate weight for each datum and class \r\n        weight = tf.math.reduce_sum(yTrue, axis=np.arange(2, 5))#tf.rank(yTrue)))\r\n\t\t#weight = tf.math.divide(1, tf.math.square(weight)+self.epsilon)\r\n        weight = tf.math.divide(1, tf.math.pow(weight, self.wPow)+self.epsilon)\r\n\t\t# Weighted sum over classes\r\n        numerator = 2*tf.math.reduce_sum(tf.multiply(crossProdSum, weight), axis=1)\r\n\t\t# Saquared summation \r\n        yySum = tf.math.reduce_sum(tf.math.square(yPred) + tf.math.square(yTrue), axis=np.arange(2, 5))#tf.rank(yTrue)))\r\n\t\t# Weighted sum over classes\r\n        denominator = tf.math.reduce_sum(tf.multiply(weight, yySum), axis=1)\r\n\t\t# Get individual loss and average over minibatch\r\n        loss = tf.math.reduce_mean(1 - tf.math.divide(numerator, denominator+self.epsilon))\r\n\t\t\t\r\n        return loss\r\n    \r\n    def get_config(self):\r\n        config = super(SoftDiceLoss, self).get_config()\r\n        return config\r\n\r\ncurOpt = tf.keras.optimizers.Adam(learning_rate=1e-4)\t\r\nlossFunc=SoftDiceLoss(2.0)\r\nckpt = tf.train.Checkpoint(model=myModel(...), optimizer=curOpt, lossFunc=lossFunc, accFunc=accFunc)\r\n\r\n```\r\n\r\nI got the following error\r\n```\r\nckpt = tf.train.Checkpoint(model=myModel(...), optimizer=curOpt, lossFunc=lossFunc, accFunc=accFunc)\r\nTraceback (most recent call last):\r\n\r\n  File \"<ipython-input-17-a4d9163bdda3>\", line 2, in <module>\r\n    optimizer=curOpt, lossFunc=lossFunc, accFunc=accFunc)\r\n\r\n  File \"D:\\TProgramFiles\\Anaconda3\\envs\\keras-gpu\\lib\\site-packages\\tensorflow_core\\python\\training\\tracking\\util.py\", line 1779, in __init__\r\n    % (v,))\r\n\r\nValueError: `Checkpoint` was expecting a trackable object (an object derived from `TrackableBase`), got <SoftDiceLoss object at 0x0000000011F6F7C8>. If you believe this object should be trackable (i.e. it is part of the TensorFlow Python API and manages state), please open an issue.\r\n```\r\nI am not sure if a subclass is trackable or not. Is that an intention of design? Or shall such a feature be added? \r\nBy the way, if I change the subclass into a normal function, it works fine. Actually, my accFunc(...) is just a normal function."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35759", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35759/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35759/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35759/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35759", "id": 548353482, "node_id": "MDU6SXNzdWU1NDgzNTM0ODI=", "number": 35759, "title": "Error when running gmake for Tensorflow Lite Micro", "user": {"login": "Shusuke-O", "id": 30304641, "node_id": "MDQ6VXNlcjMwMzA0NjQx", "avatar_url": "https://avatars1.githubusercontent.com/u/30304641?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Shusuke-O", "html_url": "https://github.com/Shusuke-O", "followers_url": "https://api.github.com/users/Shusuke-O/followers", "following_url": "https://api.github.com/users/Shusuke-O/following{/other_user}", "gists_url": "https://api.github.com/users/Shusuke-O/gists{/gist_id}", "starred_url": "https://api.github.com/users/Shusuke-O/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Shusuke-O/subscriptions", "organizations_url": "https://api.github.com/users/Shusuke-O/orgs", "repos_url": "https://api.github.com/users/Shusuke-O/repos", "events_url": "https://api.github.com/users/Shusuke-O/events{/privacy}", "received_events_url": "https://api.github.com/users/Shusuke-O/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-11T00:38:39Z", "updated_at": "2020-02-06T16:16:12Z", "closed_at": null, "author_association": "NONE", "body": "Hello.\u00a0\r\nI have an issue similar to\u00a0#29524.\r\n\r\nI'm trying to generate a Keil project for the microcontroller I'm developing.\r\nWhen I was following procedures in the following link, I got the error:\r\n\r\nhttps://www.tensorflow.org/lite/microcontrollers/library\r\n\r\nSystem informationOS Platform and Distribution (e.g., Linux Ubuntu 16.04):\u00a0macOS Catalina 10.15.2 (19C57)\r\nTensorFlow installed from (source or binary): source\r\nTensorFlow version:\u00a0e689e24\r\nGCC/Compiler version (if compiling from source):\u00a0Apple clang version 11.0.0 (clang-1100.0.33.16)\r\n\r\nDescribe the problem\r\nWhen running$ gmake -f tensorflow/lite/experimental/micro/tools/Makefile generate_projects results in the following error:\r\n\r\ngmake: *** No rule to make target 'tensorflow/lite/micro/tools/make/gen/osx_x86_64/prj/micro_speech/make/tensorflow/lite/experimental/micro/examples/micro_speech/simple_features/simple_model_settings.h', needed by 'generate_micro_speech_make_project'.\u00a0 Stop.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35745", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35745/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35745/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35745/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35745", "id": 548169708, "node_id": "MDU6SXNzdWU1NDgxNjk3MDg=", "number": 35745, "title": "Add a warning that tfds.load can not be used for own Datasets", "user": {"login": "PanCakeConnaisseur", "id": 17473656, "node_id": "MDQ6VXNlcjE3NDczNjU2", "avatar_url": "https://avatars1.githubusercontent.com/u/17473656?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PanCakeConnaisseur", "html_url": "https://github.com/PanCakeConnaisseur", "followers_url": "https://api.github.com/users/PanCakeConnaisseur/followers", "following_url": "https://api.github.com/users/PanCakeConnaisseur/following{/other_user}", "gists_url": "https://api.github.com/users/PanCakeConnaisseur/gists{/gist_id}", "starred_url": "https://api.github.com/users/PanCakeConnaisseur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PanCakeConnaisseur/subscriptions", "organizations_url": "https://api.github.com/users/PanCakeConnaisseur/orgs", "repos_url": "https://api.github.com/users/PanCakeConnaisseur/repos", "events_url": "https://api.github.com/users/PanCakeConnaisseur/events{/privacy}", "received_events_url": "https://api.github.com/users/PanCakeConnaisseur/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rsepassi", "id": 1115739, "node_id": "MDQ6VXNlcjExMTU3Mzk=", "avatar_url": "https://avatars3.githubusercontent.com/u/1115739?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsepassi", "html_url": "https://github.com/rsepassi", "followers_url": "https://api.github.com/users/rsepassi/followers", "following_url": "https://api.github.com/users/rsepassi/following{/other_user}", "gists_url": "https://api.github.com/users/rsepassi/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsepassi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsepassi/subscriptions", "organizations_url": "https://api.github.com/users/rsepassi/orgs", "repos_url": "https://api.github.com/users/rsepassi/repos", "events_url": "https://api.github.com/users/rsepassi/events{/privacy}", "received_events_url": "https://api.github.com/users/rsepassi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rsepassi", "id": 1115739, "node_id": "MDQ6VXNlcjExMTU3Mzk=", "avatar_url": "https://avatars3.githubusercontent.com/u/1115739?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsepassi", "html_url": "https://github.com/rsepassi", "followers_url": "https://api.github.com/users/rsepassi/followers", "following_url": "https://api.github.com/users/rsepassi/following{/other_user}", "gists_url": "https://api.github.com/users/rsepassi/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsepassi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsepassi/subscriptions", "organizations_url": "https://api.github.com/users/rsepassi/orgs", "repos_url": "https://api.github.com/users/rsepassi/repos", "events_url": "https://api.github.com/users/rsepassi/events{/privacy}", "received_events_url": "https://api.github.com/users/rsepassi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-10T16:22:16Z", "updated_at": "2020-01-15T18:50:04Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\nhttps://www.tensorflow.org/datasets/api_docs/python/tfds/load\r\n\r\n## Description of issue (what needs changing):\r\nAdd a warning that `tfds.load()` can not be used for the users own Datasets, i.e. that he creates himself. To a new user trying to to load a Dataset from a set of files it is not obvious that this method is only for pre-made, immutable Datasets.\r\n\r\nAlthough it does say\r\n> Loads the named dataset into a tf.data.Dataset.\r\n\r\ni initially interpreted it such that my own Dataset can be assigned a name. \r\n\r\nI was looking for a way to split a Dataset into train and validation subsets and stumbled upon this documentation. I was redirected from https://www.tensorflow.org/datasets/splits which comes up as one of the most prominent search results when searching for \"tensorflow Dataset splits\" .\r\n\r\n## Result\r\nA user who visits https://www.tensorflow.org/datasets/api_docs/python/tfds/load will not spend 1 h of trying to understand all the documentation but will immediately realize that this is only for immutable pre-made Datasets."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35739", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35739/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35739/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35739/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35739", "id": 548087415, "node_id": "MDU6SXNzdWU1NDgwODc0MTU=", "number": 35739, "title": "disable_eager_execution resets random seeds set before", "user": {"login": "bersbersbers", "id": 12128514, "node_id": "MDQ6VXNlcjEyMTI4NTE0", "avatar_url": "https://avatars1.githubusercontent.com/u/12128514?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bersbersbers", "html_url": "https://github.com/bersbersbers", "followers_url": "https://api.github.com/users/bersbersbers/followers", "following_url": "https://api.github.com/users/bersbersbers/following{/other_user}", "gists_url": "https://api.github.com/users/bersbersbers/gists{/gist_id}", "starred_url": "https://api.github.com/users/bersbersbers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bersbersbers/subscriptions", "organizations_url": "https://api.github.com/users/bersbersbers/orgs", "repos_url": "https://api.github.com/users/bersbersbers/repos", "events_url": "https://api.github.com/users/bersbersbers/events{/privacy}", "received_events_url": "https://api.github.com/users/bersbersbers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 736653459, "node_id": "MDU6TGFiZWw3MzY2NTM0NTk=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:eager", "name": "comp:eager", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "wangpengmit", "id": 7817365, "node_id": "MDQ6VXNlcjc4MTczNjU=", "avatar_url": "https://avatars2.githubusercontent.com/u/7817365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wangpengmit", "html_url": "https://github.com/wangpengmit", "followers_url": "https://api.github.com/users/wangpengmit/followers", "following_url": "https://api.github.com/users/wangpengmit/following{/other_user}", "gists_url": "https://api.github.com/users/wangpengmit/gists{/gist_id}", "starred_url": "https://api.github.com/users/wangpengmit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wangpengmit/subscriptions", "organizations_url": "https://api.github.com/users/wangpengmit/orgs", "repos_url": "https://api.github.com/users/wangpengmit/repos", "events_url": "https://api.github.com/users/wangpengmit/events{/privacy}", "received_events_url": "https://api.github.com/users/wangpengmit/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wangpengmit", "id": 7817365, "node_id": "MDQ6VXNlcjc4MTczNjU=", "avatar_url": "https://avatars2.githubusercontent.com/u/7817365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wangpengmit", "html_url": "https://github.com/wangpengmit", "followers_url": "https://api.github.com/users/wangpengmit/followers", "following_url": "https://api.github.com/users/wangpengmit/following{/other_user}", "gists_url": "https://api.github.com/users/wangpengmit/gists{/gist_id}", "starred_url": "https://api.github.com/users/wangpengmit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wangpengmit/subscriptions", "organizations_url": "https://api.github.com/users/wangpengmit/orgs", "repos_url": "https://api.github.com/users/wangpengmit/repos", "events_url": "https://api.github.com/users/wangpengmit/events{/privacy}", "received_events_url": "https://api.github.com/users/wangpengmit/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2020-01-10T13:44:02Z", "updated_at": "2020-02-25T01:41:25Z", "closed_at": null, "author_association": "NONE", "body": "This is on TF2.1 from pip on Windows 10.\r\n\r\n**Describe the current behavior**\r\n```\r\nimport tensorflow.compat.v1 as tf1\r\n\r\ntf1.random.set_random_seed(0)\r\ntf1.disable_eager_execution()\r\n\r\nprint(tf1.keras.backend.get_session().run(tf1.random.uniform((), 0, 1)))\r\n```\r\n\r\nThis prints a different number every time. I have a similar example with more TF2-relevant code, where the same thing happens:\r\n```\r\nimport tensorflow as tf\r\nimport tensorflow.compat.v1 as tf1\r\n\r\ntf.random.set_seed(0)\r\ntf1.disable_eager_execution()\r\n\r\nprint(tf1.keras.backend.get_session().run(tf.random.uniform((), 0, 1)))\r\n```\r\n\r\nA workaround is to set the seed after `disable_eager_execution`."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35732", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35732/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35732/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35732/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35732", "id": 547953884, "node_id": "MDU6SXNzdWU1NDc5NTM4ODQ=", "number": 35732, "title": "A strange numerical computation bug for the simple dense layer", "user": {"login": "David-Mao", "id": 12476624, "node_id": "MDQ6VXNlcjEyNDc2NjI0", "avatar_url": "https://avatars3.githubusercontent.com/u/12476624?v=4", "gravatar_id": "", "url": "https://api.github.com/users/David-Mao", "html_url": "https://github.com/David-Mao", "followers_url": "https://api.github.com/users/David-Mao/followers", "following_url": "https://api.github.com/users/David-Mao/following{/other_user}", "gists_url": "https://api.github.com/users/David-Mao/gists{/gist_id}", "starred_url": "https://api.github.com/users/David-Mao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/David-Mao/subscriptions", "organizations_url": "https://api.github.com/users/David-Mao/orgs", "repos_url": "https://api.github.com/users/David-Mao/repos", "events_url": "https://api.github.com/users/David-Mao/events{/privacy}", "received_events_url": "https://api.github.com/users/David-Mao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-01-10T09:10:04Z", "updated_at": "2020-02-21T18:47:05Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Mac OS 10.14.5\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.1.0\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory:  N/A\r\n\r\n**Describe the current behavior**\r\n\r\nSee the code:\r\n\r\n```\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\nm = 3\r\nn = 3\r\nx = tf.cast(np.random.randn(1, m, 32), tf.float32)\r\nz = tf.tile(x, [n, 1, 1])\r\n\r\nlayer = tf.keras.layers.Dense(32)\r\nw = layer(z)\r\n\r\ntf.print(tf.norm(z[0, :, :] - z[1, :, :]), tf.norm(z[1, :, :] - z[n-1, :, :]))\r\ntf.print(tf.norm(w[0, :, :] - w[1, :, :]), tf.norm(w[1, :, :] - w[n-1, :, :]))\r\n```\r\nIn the code we replicate the input `x` 3 times and apply a dense layer upon it. We expect to get the same results for the 3 replicates. In fact the 1st and 2nd results are indeed same, while the 3rd result is different. Here is the results of the script above:\r\n\r\n```\r\n0 0\r\n0 1.0617149e-06 # this error is not fixed for each run\r\n```\r\nwhere we expect all results to be 0.\r\n\r\nStrangely enough, this bug only appears for some `(m,n)` pairs (in the example above `m=n=3`). I ran the code for all `m` and `n` from 1 to 100 and found that there are ~40% combinations that will cause a bug, but I didn't find any obvious pattern..."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35728", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35728/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35728/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35728/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35728", "id": 547895273, "node_id": "MDU6SXNzdWU1NDc4OTUyNzM=", "number": 35728, "title": "Wrong Window Size while training the model", "user": {"login": "ManishAradwad", "id": 29497701, "node_id": "MDQ6VXNlcjI5NDk3NzAx", "avatar_url": "https://avatars0.githubusercontent.com/u/29497701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ManishAradwad", "html_url": "https://github.com/ManishAradwad", "followers_url": "https://api.github.com/users/ManishAradwad/followers", "following_url": "https://api.github.com/users/ManishAradwad/following{/other_user}", "gists_url": "https://api.github.com/users/ManishAradwad/gists{/gist_id}", "starred_url": "https://api.github.com/users/ManishAradwad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ManishAradwad/subscriptions", "organizations_url": "https://api.github.com/users/ManishAradwad/orgs", "repos_url": "https://api.github.com/users/ManishAradwad/repos", "events_url": "https://api.github.com/users/ManishAradwad/events{/privacy}", "received_events_url": "https://api.github.com/users/ManishAradwad/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-10T06:41:26Z", "updated_at": "2020-01-10T22:10:09Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\n\r\nhttps://github.com/tensorflow/examples/blob/master/courses/udacity_intro_to_tensorflow_for_deep_learning/l08c05_forecasting_with_machine_learning.ipynb\r\n\r\n## Description of issue (what needs changing):\r\n\r\nWindow size should be 30 instead of 20 in the description under \"Forecasting With Machine Learning\".\r\n\r\n### Clear description\r\n\r\n![Screenshot from 2020-01-10 12-05-13](https://user-images.githubusercontent.com/29497701/72131252-b1905980-33a1-11ea-8cf5-11d089d5316e.png)\r\n\r\n--------------------\r\nAs we can see under \"Linear Model\", `window_size=30` while in description it is mentioned as model forecasts, given previous 20 steps.\r\n\r\n### Submit a pull request?\r\n\r\nYes..."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35724", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35724/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35724/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35724/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35724", "id": 547818933, "node_id": "MDU6SXNzdWU1NDc4MTg5MzM=", "number": 35724, "title": "Recurrent Dropout is Wrong", "user": {"login": "OverLordGoldDragon", "id": 16495490, "node_id": "MDQ6VXNlcjE2NDk1NDkw", "avatar_url": "https://avatars2.githubusercontent.com/u/16495490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/OverLordGoldDragon", "html_url": "https://github.com/OverLordGoldDragon", "followers_url": "https://api.github.com/users/OverLordGoldDragon/followers", "following_url": "https://api.github.com/users/OverLordGoldDragon/following{/other_user}", "gists_url": "https://api.github.com/users/OverLordGoldDragon/gists{/gist_id}", "starred_url": "https://api.github.com/users/OverLordGoldDragon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/OverLordGoldDragon/subscriptions", "organizations_url": "https://api.github.com/users/OverLordGoldDragon/orgs", "repos_url": "https://api.github.com/users/OverLordGoldDragon/repos", "events_url": "https://api.github.com/users/OverLordGoldDragon/events{/privacy}", "received_events_url": "https://api.github.com/users/OverLordGoldDragon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2020-01-10T01:48:08Z", "updated_at": "2020-02-06T03:02:36Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "I've reviewed one design in-depth, and two others superficially, but Keras/TF's `recurrent_dropout` does not implement _any_ of them; publication links below.\r\n\r\n 1. I see some potentially severe problems with TF's implementation in light of the papers I've read, which explicitly advocate against the used scheme. This said - what is TensorFlow / Keras's justification / rationale  of its own implementation?\r\n\r\n 2. The implementation is inconsistent - see below; the docstring only mentions a performance difference, but there's also a _reproducibility_ and _design_ difference; `==1` uses _different masks_ per gate, whereas `==2` uses a _shared mask_. The two are neither theoretically nor practically identical. \r\n\r\nSecond's fixable via a docstring, but first involves significant changes to recurrent dropout logic for `LSTM`, `GRU`, and maybe other RNNs. This said: **is TensorFlow / Keras open to changing its base implementations of recurrent dropout?** If so, I can go ahead and clarify **(1)** in detail, and maybe even do the re-implementing myself in a PR, per paper 1.\r\n\r\n<hr>\r\n\r\n**Inconsistency**: `implementation==1` vs. `implementation==2`\r\n\r\n```python\r\nif 0. < self.recurrent_dropout < 1.:  # implementation==1\r\n    h_tm1_i = h_tm1 * rec_dp_mask[0]\r\n    h_tm1_f = h_tm1 * rec_dp_mask[1]\r\n    h_tm1_c = h_tm1 * rec_dp_mask[2]\r\n    h_tm1_o = h_tm1 * rec_dp_mask[3]\r\n```\r\n```python\r\nif 0. < self.recurrent_dropout < 1.:  # implementation==2\r\n    h_tm1 *= rec_dp_mask[0]\r\n```\r\nSource codes: [keras](https://github.com/keras-team/keras/blob/master/keras/layers/recurrent.py#L2014) -- [tf.keras](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/keras/layers/recurrent.py#L2391)\r\n\r\n<hr>\r\n\r\n**Publications**:\r\n\r\n 1. [Recurrent Dropout without Memory Loss](https://arxiv.org/abs/1603.05118)\r\n 2. [A Theoretically Grounded Application of Dropout in Recurrent Neural Networks](https://arxiv.org/abs/1512.05287)\r\n 3. [RNNDrop: A novel dropout for RNNs](https://sci-hub.se/10.1109/ASRU.2015.7404775)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35715", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35715/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35715/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35715/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/35715", "id": 547680775, "node_id": "MDExOlB1bGxSZXF1ZXN0MzYxMTI1MjM2", "number": 35715, "title": "Add usage example to Dropout", "user": {"login": "Joseph-Rance", "id": 56409230, "node_id": "MDQ6VXNlcjU2NDA5MjMw", "avatar_url": "https://avatars1.githubusercontent.com/u/56409230?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Joseph-Rance", "html_url": "https://github.com/Joseph-Rance", "followers_url": "https://api.github.com/users/Joseph-Rance/followers", "following_url": "https://api.github.com/users/Joseph-Rance/following{/other_user}", "gists_url": "https://api.github.com/users/Joseph-Rance/gists{/gist_id}", "starred_url": "https://api.github.com/users/Joseph-Rance/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Joseph-Rance/subscriptions", "organizations_url": "https://api.github.com/users/Joseph-Rance/orgs", "repos_url": "https://api.github.com/users/Joseph-Rance/repos", "events_url": "https://api.github.com/users/Joseph-Rance/events{/privacy}", "received_events_url": "https://api.github.com/users/Joseph-Rance/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1478826728, "node_id": "MDU6TGFiZWwxNDc4ODI2NzI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:core", "name": "comp:core", "color": "024391", "default": false, "description": ""}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2020-01-09T19:41:48Z", "updated_at": "2020-02-28T06:18:28Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/35715", "html_url": "https://github.com/tensorflow/tensorflow/pull/35715", "diff_url": "https://github.com/tensorflow/tensorflow/pull/35715.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/35715.patch"}, "body": "Added a usage example to tf.keras.layers.Dropout"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35709", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35709/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35709/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35709/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35709", "id": 547568618, "node_id": "MDU6SXNzdWU1NDc1Njg2MTg=", "number": 35709, "title": "TensorFlow 2.1.0 requires scipy", "user": {"login": "drasmuss", "id": 1952220, "node_id": "MDQ6VXNlcjE5NTIyMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/1952220?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drasmuss", "html_url": "https://github.com/drasmuss", "followers_url": "https://api.github.com/users/drasmuss/followers", "following_url": "https://api.github.com/users/drasmuss/following{/other_user}", "gists_url": "https://api.github.com/users/drasmuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/drasmuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drasmuss/subscriptions", "organizations_url": "https://api.github.com/users/drasmuss/orgs", "repos_url": "https://api.github.com/users/drasmuss/repos", "events_url": "https://api.github.com/users/drasmuss/events{/privacy}", "received_events_url": "https://api.github.com/users/drasmuss/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-01-09T16:00:41Z", "updated_at": "2020-01-13T22:04:41Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version: 2.1.0\r\n- Python version: 3.6.10\r\n- Installed using virtualenv? pip? conda?: pip\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\nTensorFlow 2.1.0 added `scipy` as a required dependency.  However, as far as I can tell TensorFlow doesn't actually need scipy. Judging from this PR https://github.com/tensorflow/tensorflow/pull/35278 (which introduced the requirement), the intention was just to avoid a bug with scipy==1.4.0. But it seems that simply not having scipy installed would be another way to avoid that bug, and adding scipy as a requirement to every tensorflow installation seems like kind of a drastic solution. It also wasn't mentioned in the release notes at all, so I'm wondering whether this was an intentional change or not.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n`pip install tensorflow`\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35706", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35706/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35706/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35706/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35706", "id": 547490024, "node_id": "MDU6SXNzdWU1NDc0OTAwMjQ=", "number": 35706, "title": "Init operations did not make model ready. When import form .pbtxt", "user": {"login": "HongmingHUANG", "id": 11053379, "node_id": "MDQ6VXNlcjExMDUzMzc5", "avatar_url": "https://avatars3.githubusercontent.com/u/11053379?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HongmingHUANG", "html_url": "https://github.com/HongmingHUANG", "followers_url": "https://api.github.com/users/HongmingHUANG/followers", "following_url": "https://api.github.com/users/HongmingHUANG/following{/other_user}", "gists_url": "https://api.github.com/users/HongmingHUANG/gists{/gist_id}", "starred_url": "https://api.github.com/users/HongmingHUANG/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HongmingHUANG/subscriptions", "organizations_url": "https://api.github.com/users/HongmingHUANG/orgs", "repos_url": "https://api.github.com/users/HongmingHUANG/repos", "events_url": "https://api.github.com/users/HongmingHUANG/events{/privacy}", "received_events_url": "https://api.github.com/users/HongmingHUANG/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-01-09T13:50:20Z", "updated_at": "2020-01-17T18:40:06Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Ubuntu 16.04:\r\n- TensorFlow installed from (source or binary): pip binary\r\n- TensorFlow version (use command below): 1.13.1\r\n- Python version: 3.5.2\r\n- CUDA/cuDNN version: 10.0 / 7.5\r\n- GPU model and memory: NVIDIA RTX 2080TI\r\n\r\nI am trying the tf.io.write_graph() and tf.import_graph_def API to implement model saving and re-building. And I encountered \"Init operations did not make model ready\" when importing the graph_def into MonitoredSession()\r\n\r\n**Here is the importing related source code:**\r\n\r\n```\r\n# Some code to load graph_def from .pbtxt file\r\ntf.reset_default_graph()\r\ntf.import_graph_def(graph_def, name='')\r\nwith tf.train.MonitoredTrainingSession() as sess:\r\n```\r\n\r\n**The bug information is:**\r\nRuntimeError: Init operations did not make model ready.  Init op: group_deps, init fn: None, local_init_op: name: \"group_deps_1\"\r\nop: \"NoOp\"\r\ninput: \"^init_2\"\r\ninput: \"^init_all_tables\"\r\ninput: \"^init_3\"\r\n, error: Variables not initialized: global_step, ......"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35705", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35705/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35705/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35705/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35705", "id": 547478357, "node_id": "MDU6SXNzdWU1NDc0NzgzNTc=", "number": 35705, "title": "AttributeError: _ckpt_saved_epoch when using MultiWorkerMirroredStrategy TF2.0", "user": {"login": "FloP93", "id": 34069654, "node_id": "MDQ6VXNlcjM0MDY5NjU0", "avatar_url": "https://avatars2.githubusercontent.com/u/34069654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FloP93", "html_url": "https://github.com/FloP93", "followers_url": "https://api.github.com/users/FloP93/followers", "following_url": "https://api.github.com/users/FloP93/following{/other_user}", "gists_url": "https://api.github.com/users/FloP93/gists{/gist_id}", "starred_url": "https://api.github.com/users/FloP93/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FloP93/subscriptions", "organizations_url": "https://api.github.com/users/FloP93/orgs", "repos_url": "https://api.github.com/users/FloP93/repos", "events_url": "https://api.github.com/users/FloP93/events{/privacy}", "received_events_url": "https://api.github.com/users/FloP93/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-01-09T13:29:40Z", "updated_at": "2020-02-28T11:13:59Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nyes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nWindows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):\r\npip\r\n- TensorFlow version (use command below):\r\nv2.0.0-rc2-26-g64c3d382ca 2.0.0\r\n- Python version: \r\n3.6.9\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n10.0, 7.6.2\r\n- GPU model and memory:\r\nGeForce GTX 1070 and GeForce GTX 1080\r\n\r\n**Describe the current behavior**\r\nCrash when writing Checkpoint (or stuck when writing log for tensorboard)\r\n\r\n**Describe the expected behavior**\r\nWrite a checkpoint and a Tensorboardlog\r\n\r\n**Code to reproduce the issue**\r\n```\r\nos.environ['TF_CONFIG'] = json.dumps({\r\n    'cluster': {\r\n        \"worker\": [\"10.10.1.168:1234\"],\r\n        'chief': [\"10.10.1.60:2345\"]\r\n    },\r\n    'task': {'type': 'chief', 'index': 0}\r\n})\r\nstrategy = tf.distribute.experimental.MultiWorkerMirroredStrategy()\r\n\r\ndef get_label(file_path, class_names):\r\n  parts = tf.strings.split(file_path, os.path.sep)\r\n  return parts[-2] == class_names\r\n\r\ndef parse_image(filename):\r\n    parts = tf.strings.split(filename, \"\\\\\")\r\n    label = get_label(filename, CLASS_NAMES)\r\n    image = tf.io.read_file(filename)\r\n    image = tf.image.decode_png(image, channels=3)\r\n    image = tf.image.convert_image_dtype(image, tf.float32)\r\n    image = tf.image.resize(image, [299,299])\r\n    return image, label\r\n\r\ndef make_dataset_unbatched():\r\n    images_ds = list_ds.map(parse_image, num_parallel_calls=AUTOTUNE)\r\n    images_ds = images_ds.shuffle(BATCH_SIZE)\r\n    images_ds = images_ds.repeat(epochs)\r\n    images_ds = images_ds.prefetch(BUFFER_SIZE)\r\n    return images_ds\r\n\r\ndatasetFilePath = \"D:\\TrainData\\BalancedData\"\r\nIMAGESIZE = 299\r\nAUTOTUNE = tf.data.experimental.AUTOTUNE\r\ndatasetPath = pathlib.Path(datasetFilePath)\r\nlist_ds = tf.data.Dataset.list_files(str(datasetPath/\"*/*\"))\r\nnum_elements = tf.data.experimental.cardinality(list_ds).numpy()\r\n\r\nCLASS_NAMES = np.array([item.name for item in datasetPath.glob('*')])\r\n\r\nepochs = 2\r\ndef build_and_compile_model():\r\n    base_model =tf.keras.applications.InceptionV3(include_top=False, weights = \"imagenet\", input_shape=(299,299,3))\r\n\r\n    base_model.trainable = True\r\n    x = base_model.output\r\n    x = tf.keras.layers.GlobalAveragePooling2D(name=\"avg_pool\")(x)\r\n    x = tf.keras.layers.Dense(256, activation=\"relu\")(x)\r\n    predictions = tf.keras.layers.Dense(2, activation=\"softmax\")(x)\r\n    model = tf.keras.models.Model(inputs=base_model.input, outputs=predictions)\r\n\r\n    base_learning_rate = 0.00001\r\n    model.compile(optimizer=tf.keras.optimizers.Adam(lr=base_learning_rate),\r\n                 loss=\"categorical_crossentropy\",\r\n                 metrics=[\"accuracy\"])\r\n    return model\r\nlogdir = os.path.join(\"Z:\\Tensorflow\\TensorboardLogs\", datetime.datetime.now().strftime(\"%Y%m%d-%H%M%S\"))\r\ncallbacks = [tf.keras.callbacks.ModelCheckpoint(filepath=\"Z:\\Tensorflow\\Checkpoints\"), \r\n             tf.keras.callbacks.TensorBoard(logdir, histogram_freq=1)]\r\n\r\nwith strategy.scope():\r\n    dataset = make_dataset_unbatched().batch(BATCH_SIZE, drop_remainder=True)\r\n    multi_worker_model = build_and_compile_model()\r\n\r\nhistory = multi_worker_model.fit(dataset, epochs=epochs, steps_per_epoch=50, callbacks=callbacks)\r\n``` \r\n\r\n**Other info / logs**\r\n[ckpt_error.txt](https://github.com/tensorflow/tensorflow/files/4040557/ckpt_error.txt)\r\n\r\nThis log happens with the checkpoint in the code, and with only the tensorboard-log as checkpoint the chief stops right at the end of the first epoch and nothing else happens.\r\n\r\nI hope someone can help me with this.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35697", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35697/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35697/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35697/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35697", "id": 547326505, "node_id": "MDU6SXNzdWU1NDczMjY1MDU=", "number": 35697, "title": "tensorflow.python.framework.errors_impl.CancelledError: Cancelled, When do distributed training with parameter-server", "user": {"login": "nolanliou", "id": 30223680, "node_id": "MDQ6VXNlcjMwMjIzNjgw", "avatar_url": "https://avatars3.githubusercontent.com/u/30223680?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nolanliou", "html_url": "https://github.com/nolanliou", "followers_url": "https://api.github.com/users/nolanliou/followers", "following_url": "https://api.github.com/users/nolanliou/following{/other_user}", "gists_url": "https://api.github.com/users/nolanliou/gists{/gist_id}", "starred_url": "https://api.github.com/users/nolanliou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nolanliou/subscriptions", "organizations_url": "https://api.github.com/users/nolanliou/orgs", "repos_url": "https://api.github.com/users/nolanliou/repos", "events_url": "https://api.github.com/users/nolanliou/events{/privacy}", "received_events_url": "https://api.github.com/users/nolanliou/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-01-09T08:32:30Z", "updated_at": "2020-03-06T22:41:13Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): **Yes**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): **Linux Ubuntu 14.04**\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): v1.13.2\r\n- Python version: 2.7\r\n- Bazel version (if compiling from source): 0.20.0\r\n- GCC/Compiler version (if compiling from source): 4.8.4\r\n- CUDA/cuDNN version: no CUDA\r\n- GPU model and memory: no GPU\r\n\r\n**Describe the current behavior**\r\nWhen do **distribute training** using **parameter-server strategy**, there are some workers failed with the information `tensorflow.python.framework.errors_impl.CancelledError: Cancelled` **occasionally**.\r\n\r\nThere is no more information, so I have no idea how to debug the error. Is there anyone has seen this error or how to debug?  appreciate your kind help.\r\n\r\n**Code to reproduce the issue**\r\nIt's an occasional problem, so it's not easy to reproduce.\r\n\r\n**Other info / logs**\r\n```\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/monitored_session.py\", line 676, in run \r\n    run_metadata=run_metadata)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/monitored_session.py\", line 1171, in run \r\n    run_metadata=run_metadata)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/monitored_session.py\", line 1270, in run \r\n    raise six.reraise(*original_exc_info)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/monitored_session.py\", line 1255, in run \r\n    return self._sess.run(*args, **kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/monitored_session.py\", line 1327, in run \r\n    run_metadata=run_metadata)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/monitored_session.py\", line 1091, in run \r\n    return self._sess.run(*args, **kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 929, in run \r\n    run_metadata_ptr)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 1152, in _run\r\n    feed_dict_tensor, options, run_metadata)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 1328, in _do_run\r\n    run_metadata)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 1348, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.CancelledError: Cancelled\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35695", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35695/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35695/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35695/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35695", "id": 547299440, "node_id": "MDU6SXNzdWU1NDcyOTk0NDA=", "number": 35695, "title": "2020-01-09 12:25:17.491189: F tensorflow/lite/toco/graph_transformations/quantize.cc:611] Check failed: is_rnn_state_array ", "user": {"login": "batulrangwala", "id": 57891266, "node_id": "MDQ6VXNlcjU3ODkxMjY2", "avatar_url": "https://avatars2.githubusercontent.com/u/57891266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/batulrangwala", "html_url": "https://github.com/batulrangwala", "followers_url": "https://api.github.com/users/batulrangwala/followers", "following_url": "https://api.github.com/users/batulrangwala/following{/other_user}", "gists_url": "https://api.github.com/users/batulrangwala/gists{/gist_id}", "starred_url": "https://api.github.com/users/batulrangwala/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/batulrangwala/subscriptions", "organizations_url": "https://api.github.com/users/batulrangwala/orgs", "repos_url": "https://api.github.com/users/batulrangwala/repos", "events_url": "https://api.github.com/users/batulrangwala/events{/privacy}", "received_events_url": "https://api.github.com/users/batulrangwala/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "daverim", "id": 2448933, "node_id": "MDQ6VXNlcjI0NDg5MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2448933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daverim", "html_url": "https://github.com/daverim", "followers_url": "https://api.github.com/users/daverim/followers", "following_url": "https://api.github.com/users/daverim/following{/other_user}", "gists_url": "https://api.github.com/users/daverim/gists{/gist_id}", "starred_url": "https://api.github.com/users/daverim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daverim/subscriptions", "organizations_url": "https://api.github.com/users/daverim/orgs", "repos_url": "https://api.github.com/users/daverim/repos", "events_url": "https://api.github.com/users/daverim/events{/privacy}", "received_events_url": "https://api.github.com/users/daverim/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "daverim", "id": 2448933, "node_id": "MDQ6VXNlcjI0NDg5MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2448933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/daverim", "html_url": "https://github.com/daverim", "followers_url": "https://api.github.com/users/daverim/followers", "following_url": "https://api.github.com/users/daverim/following{/other_user}", "gists_url": "https://api.github.com/users/daverim/gists{/gist_id}", "starred_url": "https://api.github.com/users/daverim/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/daverim/subscriptions", "organizations_url": "https://api.github.com/users/daverim/orgs", "repos_url": "https://api.github.com/users/daverim/repos", "events_url": "https://api.github.com/users/daverim/events{/privacy}", "received_events_url": "https://api.github.com/users/daverim/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2020-01-09T07:26:31Z", "updated_at": "2020-01-29T22:32:24Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- TensorFlow installed from (source or binary):binary\r\n- TensorFlow version:1.14\r\n- Python version:3.7.4\r\n- Installed using virtualenv? pip? conda?:conda\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):7.4\r\n- CUDA/cuDNN version:10.2\r\n- GPU model and memory:GeForce GTX 960M/PCIe/SSE2, 16GB\r\n\r\n\r\n\r\n**Describe the problem**\r\n2020-01-09 12:25:17.491189: F tensorflow/lite/toco/graph_transformations/quantize.cc:611] Check failed: is_rnn_state_array \r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nI am converting a quantized graph def (.pb ) to a quantized tflite (.tflite) using the dummy quantization and encounter error as follows\r\n```\r\n(tf_gpu_clone) ridlr@ridlr107:~/TensorFlow/exported_model_12k_quantized$ tflite_convert --output_file tflite_graph.tflite --graph_def_file tflite_graph.pb --input_arrays image_tensor --output_arrays TFLite_Detection_PostProcess --input_shapes 1,576,720,3 --allow_custom_ops --inference_type QUANTIZED_UINT8 --std_dev_values 127 --mean_values 128 --default_ranges_min 0 --default_ranges_max 6\r\n2020-01-09 12:25:15.452049: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2020-01-09 12:25:15.474575: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2808000000 Hz\r\n2020-01-09 12:25:15.475004: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x561bb6736540 executing computations on platform Host. Devices:\r\n2020-01-09 12:25:15.475031: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): <undefined>, <undefined>\r\nTraceback (most recent call last):\r\n  File \"/home/ridlr/anaconda3/bin/tflite_convert\", line 10, in <module>\r\n    sys.exit(main())\r\n  File \"/home/ridlr/anaconda3/lib/python3.7/site-packages/tensorflow/lite/python/tflite_convert.py\", line 503, in main\r\n    app.run(main=run_main, argv=sys.argv[:1])\r\n  File \"/home/ridlr/anaconda3/lib/python3.7/site-packages/tensorflow/python/platform/app.py\", line 40, in run\r\n    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)\r\n  File \"/home/ridlr/anaconda3/lib/python3.7/site-packages/absl/app.py\", line 299, in run\r\n    _run_main(main, args)\r\n  File \"/home/ridlr/anaconda3/lib/python3.7/site-packages/absl/app.py\", line 250, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"/home/ridlr/anaconda3/lib/python3.7/site-packages/tensorflow/lite/python/tflite_convert.py\", line 499, in run_main\r\n    _convert_tf1_model(tflite_flags)\r\n  File \"/home/ridlr/anaconda3/lib/python3.7/site-packages/tensorflow/lite/python/tflite_convert.py\", line 193, in _convert_tf1_model\r\n    output_data = converter.convert()\r\n  File \"/home/ridlr/anaconda3/lib/python3.7/site-packages/tensorflow/lite/python/lite.py\", line 904, in convert\r\n    **converter_kwargs)\r\n  File \"/home/ridlr/anaconda3/lib/python3.7/site-packages/tensorflow/lite/python/convert.py\", line 373, in toco_convert_graph_def\r\n    input_data.SerializeToString())\r\n  File \"/home/ridlr/anaconda3/lib/python3.7/site-packages/tensorflow/lite/python/convert.py\", line 172, in toco_convert_protos\r\n    \"TOCO failed. See console for info.\\n%s\\n%s\\n\" % (stdout, stderr))\r\ntensorflow.lite.python.convert.ConverterError: TOCO failed. See console for info.\r\n2020-01-09 12:25:16.861669: I tensorflow/lite/toco/import_tensorflow.cc:1336] Converting unsupported operation: TFLite_Detection_PostProcess\r\n2020-01-09 12:25:16.957738: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 1537 operators, 2264 arrays (0 quantized)\r\n2020-01-09 12:25:17.017901: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 1537 operators, 2264 arrays (0 quantized)\r\n2020-01-09 12:25:17.482076: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 181 operators, 341 arrays (0 quantized)\r\n2020-01-09 12:25:17.485583: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before pre-quantization graph transformations: 181 operators, 341 arrays (0 quantized)\r\n2020-01-09 12:25:17.486877: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After pre-quantization graph transformations pass 1: 99 operators, 259 arrays (0 quantized)\r\n2020-01-09 12:25:17.488034: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Group bidirectional sequence lstm/rnn: 99 operators, 259 arrays (0 quantized)\r\n2020-01-09 12:25:17.489088: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before default min-max range propagation graph transformations: 99 operators, 259 arrays (0 quantized)\r\n2020-01-09 12:25:17.489972: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After default min-max range propagation graph transformations pass 1: 99 operators, 259 arrays (0 quantized)\r\n2020-01-09 12:25:17.491160: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before quantization graph transformations: 99 operators, 259 arrays (0 quantized)\r\n2020-01-09 12:25:17.491189: F tensorflow/lite/toco/graph_transformations/quantize.cc:611] Check failed: is_rnn_state_array \r\nFatal Python error: Aborted\r\n\r\nCurrent thread 0x00007fb839eed740 (most recent call first):\r\n  File \"/home/ridlr/anaconda3/lib/python3.7/site-packages/tensorflow/lite/toco/python/toco_from_protos.py\", line 33 in execute\r\n  File \"/home/ridlr/anaconda3/lib/python3.7/site-packages/absl/app.py\", line 250 in _run_main\r\n  File \"/home/ridlr/anaconda3/lib/python3.7/site-packages/absl/app.py\", line 299 in run\r\n  File \"/home/ridlr/anaconda3/lib/python3.7/site-packages/tensorflow/python/platform/app.py\", line 40 in run\r\n  File \"/home/ridlr/anaconda3/lib/python3.7/site-packages/tensorflow/lite/toco/python/toco_from_protos.py\", line 59 in main\r\n  File \"/home/ridlr/anaconda3/bin/toco_from_protos\", line 10 in <module>\r\nAborted (core dumped)\r\n\r\n```\r\n\r\nHowever if I do not include the following specifiers a *.tflite is created.\r\n`--inference_type QUANTIZED_UINT8 --std_dev_values 127 --mean_values 128 --default_ranges_min 0 --default_ranges_max 6 `\r\n\r\nThis *.tflite file when used to convert to *_edgetpu.tflite (this model is used to run inference on Google coral) gives the following error\r\n```\r\n(tf_gpu_clone) ridlr@ridlr107:~/TensorFlow/exported_model_12k_quantized$ edgetpu_compiler tflite_graph.tflite \r\nEdge TPU Compiler version 2.0.267685300\r\nInvalid model: tflite_graph.tflite\r\nModel not quantized\r\n```\r\n\r\nHence it is necessary to include the specifiers for quantization.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35693", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35693/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35693/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35693/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35693", "id": 547282944, "node_id": "MDU6SXNzdWU1NDcyODI5NDQ=", "number": 35693, "title": "Correction in calculation of error while Naive Forecasting", "user": {"login": "ManishAradwad", "id": 29497701, "node_id": "MDQ6VXNlcjI5NDk3NzAx", "avatar_url": "https://avatars0.githubusercontent.com/u/29497701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ManishAradwad", "html_url": "https://github.com/ManishAradwad", "followers_url": "https://api.github.com/users/ManishAradwad/followers", "following_url": "https://api.github.com/users/ManishAradwad/following{/other_user}", "gists_url": "https://api.github.com/users/ManishAradwad/gists{/gist_id}", "starred_url": "https://api.github.com/users/ManishAradwad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ManishAradwad/subscriptions", "organizations_url": "https://api.github.com/users/ManishAradwad/orgs", "repos_url": "https://api.github.com/users/ManishAradwad/repos", "events_url": "https://api.github.com/users/ManishAradwad/events{/privacy}", "received_events_url": "https://api.github.com/users/ManishAradwad/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gadagashwini", "id": 48476109, "node_id": "MDQ6VXNlcjQ4NDc2MTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/48476109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadagashwini", "html_url": "https://github.com/gadagashwini", "followers_url": "https://api.github.com/users/gadagashwini/followers", "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}", "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions", "organizations_url": "https://api.github.com/users/gadagashwini/orgs", "repos_url": "https://api.github.com/users/gadagashwini/repos", "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}", "received_events_url": "https://api.github.com/users/gadagashwini/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gadagashwini", "id": 48476109, "node_id": "MDQ6VXNlcjQ4NDc2MTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/48476109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadagashwini", "html_url": "https://github.com/gadagashwini", "followers_url": "https://api.github.com/users/gadagashwini/followers", "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}", "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions", "organizations_url": "https://api.github.com/users/gadagashwini/orgs", "repos_url": "https://api.github.com/users/gadagashwini/repos", "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}", "received_events_url": "https://api.github.com/users/gadagashwini/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-09T06:43:48Z", "updated_at": "2020-01-10T06:04:15Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\n\r\nhttps://github.com/tensorflow/examples/blob/master/courses/udacity_intro_to_tensorflow_for_deep_learning/l08c03_moving_average.ipynb\r\n\r\n## Description of issue (what needs changing):\r\n\r\nIt should be 'mean absolute error' instead of squared error while Naive Forecasting\r\n\r\n![Screenshot from 2020-01-09 12-10-09](https://user-images.githubusercontent.com/29497701/72044240-4bd89a80-32d9-11ea-937f-a189784b83b0.png)\r\n\r\n### Submit a pull request?\r\n\r\nYes, I'll be submitting one shortly"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35689", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35689/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35689/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35689/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35689", "id": 547259086, "node_id": "MDU6SXNzdWU1NDcyNTkwODY=", "number": 35689, "title": "TFLite C/C++ library header file installation", "user": {"login": "thkim-cochl", "id": 47442885, "node_id": "MDQ6VXNlcjQ3NDQyODg1", "avatar_url": "https://avatars1.githubusercontent.com/u/47442885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thkim-cochl", "html_url": "https://github.com/thkim-cochl", "followers_url": "https://api.github.com/users/thkim-cochl/followers", "following_url": "https://api.github.com/users/thkim-cochl/following{/other_user}", "gists_url": "https://api.github.com/users/thkim-cochl/gists{/gist_id}", "starred_url": "https://api.github.com/users/thkim-cochl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thkim-cochl/subscriptions", "organizations_url": "https://api.github.com/users/thkim-cochl/orgs", "repos_url": "https://api.github.com/users/thkim-cochl/repos", "events_url": "https://api.github.com/users/thkim-cochl/events{/privacy}", "received_events_url": "https://api.github.com/users/thkim-cochl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "terryheo", "id": 2908505, "node_id": "MDQ6VXNlcjI5MDg1MDU=", "avatar_url": "https://avatars2.githubusercontent.com/u/2908505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/terryheo", "html_url": "https://github.com/terryheo", "followers_url": "https://api.github.com/users/terryheo/followers", "following_url": "https://api.github.com/users/terryheo/following{/other_user}", "gists_url": "https://api.github.com/users/terryheo/gists{/gist_id}", "starred_url": "https://api.github.com/users/terryheo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/terryheo/subscriptions", "organizations_url": "https://api.github.com/users/terryheo/orgs", "repos_url": "https://api.github.com/users/terryheo/repos", "events_url": "https://api.github.com/users/terryheo/events{/privacy}", "received_events_url": "https://api.github.com/users/terryheo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "terryheo", "id": 2908505, "node_id": "MDQ6VXNlcjI5MDg1MDU=", "avatar_url": "https://avatars2.githubusercontent.com/u/2908505?v=4", "gravatar_id": "", "url": "https://api.github.com/users/terryheo", "html_url": "https://github.com/terryheo", "followers_url": "https://api.github.com/users/terryheo/followers", "following_url": "https://api.github.com/users/terryheo/following{/other_user}", "gists_url": "https://api.github.com/users/terryheo/gists{/gist_id}", "starred_url": "https://api.github.com/users/terryheo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/terryheo/subscriptions", "organizations_url": "https://api.github.com/users/terryheo/orgs", "repos_url": "https://api.github.com/users/terryheo/repos", "events_url": "https://api.github.com/users/terryheo/events{/privacy}", "received_events_url": "https://api.github.com/users/terryheo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-01-09T05:29:37Z", "updated_at": "2020-02-25T17:43:20Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 2.0\r\n- Bazel version (if compiling from source): 0.26.1\r\n- GCC/Compiler version (if compiling from source): 7.4.0\r\n\r\n**Describe the problem**\r\nI need just a TFLite header file without the whole TensorFlow source code. Is there any method to install the TFLite header?\r\n\r\nI found a similar issue at #3536. But, `//tensorflow:install_headers` Bazel target does not install a TFLite header file.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35685", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35685/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35685/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35685/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35685", "id": 547200280, "node_id": "MDU6SXNzdWU1NDcyMDAyODA=", "number": 35685, "title": "Define variable shape at restore/load, allow direct restoring of variables prior to calling __build__ (non-lazy variable loading from checkpoint)", "user": {"login": "mjlbach", "id": 13316262, "node_id": "MDQ6VXNlcjEzMzE2MjYy", "avatar_url": "https://avatars1.githubusercontent.com/u/13316262?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mjlbach", "html_url": "https://github.com/mjlbach", "followers_url": "https://api.github.com/users/mjlbach/followers", "following_url": "https://api.github.com/users/mjlbach/following{/other_user}", "gists_url": "https://api.github.com/users/mjlbach/gists{/gist_id}", "starred_url": "https://api.github.com/users/mjlbach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mjlbach/subscriptions", "organizations_url": "https://api.github.com/users/mjlbach/orgs", "repos_url": "https://api.github.com/users/mjlbach/repos", "events_url": "https://api.github.com/users/mjlbach/events{/privacy}", "received_events_url": "https://api.github.com/users/mjlbach/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-09T01:46:09Z", "updated_at": "2020-01-23T00:11:00Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 2.0\r\n- Are you willing to contribute it (Yes/No): Yes (if necessary)\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nTypically for RL, I use tensorflow in combination with Ray, where a remote agent collects data using a policy model, and the episodes are fed to a tf-agents EpisodicReplayBuffer in a second train-loop process. A tf.dataset is used to feed the main model training on this thread, which is then serialized via get_weights and sent back to the remote actor via a ray remote call to set_weights.\r\n\r\nCurrently I use tf.Checkpoint.restore.expect_partial() to restore my subclassed tf.keras.Model. In practice, this is extremely convoluted on initialization:\r\n* I make a forward pass through my remote Agent on random policy (since I have not initialized the weights), retrieve this forward pass, and send it to the train loop\r\n* I make a second forward pass through my train loop (again, randomly initialized network still), this has the side effect of initializing the network, allowing my checkpoint to restore the variables in this model\r\n* I call get_weights on the train_loop model, and pass the weights to my remote model via set_weights.\r\n* I can now collect a full replay buffer with my Agent on policy\r\n* I can now run the train loop\r\n\r\nMaybe I'm missing something, but most of my labmates are also confused by what the best practice for this currently is.\r\n\r\n**Will this change the current api? How?**\r\nI'm not sure what the best approach is. Some ideas for discussion? \r\n\r\n* Allow set_weights to define the shapes and names of tf.Variables, such that calls to __build__ in the tf.keras.Model on first run will align with the initialized tf.Variables.\r\n* Allow tf.keras.model.load_weights() to set the weights immediately rather than waiting for first call to build()\r\n\r\n**Who will benefit with this feature?**\r\nRL community \r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35680", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35680/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35680/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35680/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35680", "id": 547023192, "node_id": "MDU6SXNzdWU1NDcwMjMxOTI=", "number": 35680, "title": "Redundant functions between `Tensorflow Features Columns` API and `TF Keras Preprocessing Layers`", "user": {"login": "00krishna", "id": 2063593, "node_id": "MDQ6VXNlcjIwNjM1OTM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2063593?v=4", "gravatar_id": "", "url": "https://api.github.com/users/00krishna", "html_url": "https://github.com/00krishna", "followers_url": "https://api.github.com/users/00krishna/followers", "following_url": "https://api.github.com/users/00krishna/following{/other_user}", "gists_url": "https://api.github.com/users/00krishna/gists{/gist_id}", "starred_url": "https://api.github.com/users/00krishna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/00krishna/subscriptions", "organizations_url": "https://api.github.com/users/00krishna/orgs", "repos_url": "https://api.github.com/users/00krishna/repos", "events_url": "https://api.github.com/users/00krishna/events{/privacy}", "received_events_url": "https://api.github.com/users/00krishna/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-01-08T18:11:30Z", "updated_at": "2020-03-11T03:43:15Z", "closed_at": null, "author_association": "NONE", "body": "In working with TF 2.0, I noticed that the TF Feature Columns API seems to overlap with the Keras Preprocessing layers (or Keras Utils). For example, you can create an `tf.feature_column.indicator_column()` which creates a bunch of dummy variables or a one-hot encoded matrix based upon a categorical variable. With Keras preprocessing or Utils, you can use the `tf.keras.backend.one_hot()` function to perform the same operation. I think there are similar overlaps between TF Feature Columns like the embedding columns and similar Keras functions for embedding columns.\r\n\r\nI was just wondering if the steering committees for Tensorflow have any direction on whether they plan to promote one set of functions versus the other? Are there any plans to deprecate one set versus the other. For me, it is just a question of where to invest time and planning for code that might have to change in the future. Seems like maintaining the redundancy in the package will potentially lead to performance differences between similar functions, or confusion in setting up the code, etc. \r\n\r\n**NB** \r\nOh yes, I actually asked this question in the Tensorflow Discussion forum, but no one answered it. @dynamicwebpaige even forwarded the message to @karmel and Mark Omernick, but no one responded. Hence, I posted here. \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35677", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35677/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35677/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35677/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35677", "id": 546930331, "node_id": "MDU6SXNzdWU1NDY5MzAzMzE=", "number": 35677, "title": "Explanation regarding `seed` parameter", "user": {"login": "ManishAradwad", "id": 29497701, "node_id": "MDQ6VXNlcjI5NDk3NzAx", "avatar_url": "https://avatars0.githubusercontent.com/u/29497701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ManishAradwad", "html_url": "https://github.com/ManishAradwad", "followers_url": "https://api.github.com/users/ManishAradwad/followers", "following_url": "https://api.github.com/users/ManishAradwad/following{/other_user}", "gists_url": "https://api.github.com/users/ManishAradwad/gists{/gist_id}", "starred_url": "https://api.github.com/users/ManishAradwad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ManishAradwad/subscriptions", "organizations_url": "https://api.github.com/users/ManishAradwad/orgs", "repos_url": "https://api.github.com/users/ManishAradwad/repos", "events_url": "https://api.github.com/users/ManishAradwad/events{/privacy}", "received_events_url": "https://api.github.com/users/ManishAradwad/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-08T15:24:01Z", "updated_at": "2020-01-10T22:19:24Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\n\r\nhttps://github.com/tensorflow/examples/blob/d631c0545dac90c6390da76ed8df7c4f6a2a25bc/courses/udacity_intro_to_tensorflow_for_deep_learning/l08c01_common_patterns.ipynb#L307\r\n\r\n`def white_noise(time, noise_level=1, seed=None):`\r\n\r\n## Description of issue (what needs changing):\r\n\r\nI think, we should add explanation of `seed` parameter here since it's quite an important one.\r\n\r\n### Clear description\r\n\r\nSome explanation about how `seed` affects generation of random numbers every time along with links for reference can be added.\r\n\r\n### Submit a pull request?\r\n\r\nYes"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35674", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35674/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35674/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35674/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35674", "id": 546861202, "node_id": "MDU6SXNzdWU1NDY4NjEyMDI=", "number": 35674, "title": "SymbolicException: Inputs to eager execution function cannot be Keras symbolic tensors, but found [<tf.Tensor 'input_1:0' shape=(None, 30, 78) dtype=float32>]", "user": {"login": "Krishnarohith10", "id": 44919399, "node_id": "MDQ6VXNlcjQ0OTE5Mzk5", "avatar_url": "https://avatars3.githubusercontent.com/u/44919399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Krishnarohith10", "html_url": "https://github.com/Krishnarohith10", "followers_url": "https://api.github.com/users/Krishnarohith10/followers", "following_url": "https://api.github.com/users/Krishnarohith10/following{/other_user}", "gists_url": "https://api.github.com/users/Krishnarohith10/gists{/gist_id}", "starred_url": "https://api.github.com/users/Krishnarohith10/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Krishnarohith10/subscriptions", "organizations_url": "https://api.github.com/users/Krishnarohith10/orgs", "repos_url": "https://api.github.com/users/Krishnarohith10/repos", "events_url": "https://api.github.com/users/Krishnarohith10/events{/privacy}", "received_events_url": "https://api.github.com/users/Krishnarohith10/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-01-08T13:29:25Z", "updated_at": "2020-01-20T09:38:37Z", "closed_at": null, "author_association": "NONE", "body": "------------------------\r\n\r\n### System information\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Windows 10 Version 1909\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\n- **TensorFlow version (use command below)**: 2.0.0\r\n- **Python version**: 3.6.9\r\n- **CUDA/cuDNN version**:10.0.130\r\n- **GPU model and memory**:GTX 1660 Ti 6GB\r\n\r\n\r\n[Jazz improvisation with LSTM.zip](https://github.com/tensorflow/tensorflow/files/4035452/Jazz.improvisation.with.LSTM.zip)\r\n\r\nI uploaded a zip file in which the .ipynb file when runs gets that error. Please you can run and check what's the problem. How to fix this issuse?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35672", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35672/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35672/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35672/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35672", "id": 546844469, "node_id": "MDU6SXNzdWU1NDY4NDQ0Njk=", "number": 35672, "title": "tf.keras.estimator.model_to_estimator InvalidArgumentError: while setting up XLA_GPU_JIT device number 2", "user": {"login": "coert", "id": 455258, "node_id": "MDQ6VXNlcjQ1NTI1OA==", "avatar_url": "https://avatars1.githubusercontent.com/u/455258?v=4", "gravatar_id": "", "url": "https://api.github.com/users/coert", "html_url": "https://github.com/coert", "followers_url": "https://api.github.com/users/coert/followers", "following_url": "https://api.github.com/users/coert/following{/other_user}", "gists_url": "https://api.github.com/users/coert/gists{/gist_id}", "starred_url": "https://api.github.com/users/coert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/coert/subscriptions", "organizations_url": "https://api.github.com/users/coert/orgs", "repos_url": "https://api.github.com/users/coert/repos", "events_url": "https://api.github.com/users/coert/events{/privacy}", "received_events_url": "https://api.github.com/users/coert/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1133285679, "node_id": "MDU6TGFiZWwxMTMzMjg1Njc5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:xla", "name": "comp:xla", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2020-01-08T12:59:02Z", "updated_at": "2020-03-08T00:45:00Z", "closed_at": null, "author_association": "NONE", "body": "I get an error similar to the issue described in https://github.com/tensorflow/tensorflow/issues/31451\r\nWhen using tf.keras.estimator.model_to_estimator in TF 1.14 and 1.15 I get the InvalidArgumentError described below. The problem doesn't occur in TF 1.13.2. \r\n\r\nI use Linux Mint with Python 3.6 with 2 GPUs (Nvidia GTX1080Ti). To be complete, there are 3 NVidia video cards in the machine (that seems relevant if I understand the error correctly).\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nInvalidArgumentError                      Traceback (most recent call last)\r\n<ipython-input-6-3ce5a1d7f637> in <module>\r\n      2     keras_model=model_f,\r\n      3     custom_objects={'Merge': Merge},\r\n----> 4     model_dir='./data/estimator')\r\n\r\n~/.../python3.6/site-packages/tensorflow_core/python/keras/estimator/__init__.py in model_to_estimator(keras_model, keras_model_path, custom_objects, model_dir, config, checkpoint_format)\r\n    105       config=config,\r\n    106       checkpoint_format=checkpoint_format,\r\n--> 107       use_v2_estimator=False)\r\n    108 \r\n    109 \r\n\r\n~/.../python3.6/site-packages/tensorflow_estimator/python/estimator/keras.py in model_to_estimator(keras_model, keras_model_path, custom_objects, model_dir, config, checkpoint_format, use_v2_estimator)\r\n    574   if keras_model._is_graph_network:\r\n    575     warm_start_path = _save_first_checkpoint(keras_model, custom_objects,\r\n--> 576                                              config, save_object_ckpt)\r\n    577   elif keras_model.built:\r\n    578     logging.warning('You are creating an Estimator from a Keras model manually '\r\n\r\n~/.../python3.6/site-packages/tensorflow_estimator/python/estimator/keras.py in _save_first_checkpoint(keras_model, custom_objects, config, save_object_ckpt)\r\n    390 \r\n    391       # save to checkpoint\r\n--> 392       with session.Session(config=config.session_config) as sess:\r\n    393         if keras_weights:\r\n    394           model.set_weights(keras_weights)\r\n\r\n~/.../python3.6/site-packages/tensorflow_core/python/client/session.py in __init__(self, target, graph, config)\r\n   1583           protocol buffer with configuration options for the session.\r\n   1584     \"\"\"\r\n-> 1585     super(Session, self).__init__(target, graph, config=config)\r\n   1586     # NOTE(mrry): Create these on first `__enter__` to avoid a reference cycle.\r\n   1587     self._default_graph_context_manager = None\r\n\r\n~/.../python3.6/site-packages/tensorflow_core/python/client/session.py in __init__(self, target, graph, config)\r\n    697     try:\r\n    698       # pylint: disable=protected-access\r\n--> 699       self._session = tf_session.TF_NewSessionRef(self._graph._c_graph, opts)\r\n    700       # pylint: enable=protected-access\r\n    701     finally:\r\n\r\nInvalidArgumentError: Invalid device ordinal value (2). Valid range is [0, 1].\r\n\twhile setting up XLA_GPU_JIT device number 2\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35670", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35670/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35670/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35670/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/35670", "id": 546806717, "node_id": "MDExOlB1bGxSZXF1ZXN0MzYwNDE0MDgw", "number": 35670, "title": "Add PrefetchedInputStream and BufferedRandomAccessFile.", "user": {"login": "qiuxiafei", "id": 261796, "node_id": "MDQ6VXNlcjI2MTc5Ng==", "avatar_url": "https://avatars0.githubusercontent.com/u/261796?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qiuxiafei", "html_url": "https://github.com/qiuxiafei", "followers_url": "https://api.github.com/users/qiuxiafei/followers", "following_url": "https://api.github.com/users/qiuxiafei/following{/other_user}", "gists_url": "https://api.github.com/users/qiuxiafei/gists{/gist_id}", "starred_url": "https://api.github.com/users/qiuxiafei/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qiuxiafei/subscriptions", "organizations_url": "https://api.github.com/users/qiuxiafei/orgs", "repos_url": "https://api.github.com/users/qiuxiafei/repos", "events_url": "https://api.github.com/users/qiuxiafei/events{/privacy}", "received_events_url": "https://api.github.com/users/qiuxiafei/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 522623856, "node_id": "MDU6TGFiZWw1MjI2MjM4NTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/API%20review", "name": "API review", "color": "d4c5f9", "default": false, "description": null}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1478826728, "node_id": "MDU6TGFiZWwxNDc4ODI2NzI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:core", "name": "comp:core", "color": "024391", "default": false, "description": ""}, {"id": 1173072136, "node_id": "MDU6TGFiZWwxMTczMDcyMTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XL", "name": "size:XL", "color": "adafea", "default": false, "description": "CL Change Size:Extra Large"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 22, "created_at": "2020-01-08T11:34:33Z", "updated_at": "2020-03-19T02:53:20Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/35670", "html_url": "https://github.com/tensorflow/tensorflow/pull/35670", "diff_url": "https://github.com/tensorflow/tensorflow/pull/35670.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/35670.patch"}, "body": "Hi, guys!\r\n\r\nHere are the prefetch-enabled input stream and yet another random access file with buffer we talked about earlier in #33023. Here come's the code, benchmark numbers are on the way."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35667", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35667/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35667/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35667/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35667", "id": 546781534, "node_id": "MDU6SXNzdWU1NDY3ODE1MzQ=", "number": 35667, "title": "assign() got an unexpected keyword argument 'validate_shape'", "user": {"login": "bersbersbers", "id": 12128514, "node_id": "MDQ6VXNlcjEyMTI4NTE0", "avatar_url": "https://avatars1.githubusercontent.com/u/12128514?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bersbersbers", "html_url": "https://github.com/bersbersbers", "followers_url": "https://api.github.com/users/bersbersbers/followers", "following_url": "https://api.github.com/users/bersbersbers/following{/other_user}", "gists_url": "https://api.github.com/users/bersbersbers/gists{/gist_id}", "starred_url": "https://api.github.com/users/bersbersbers/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bersbersbers/subscriptions", "organizations_url": "https://api.github.com/users/bersbersbers/orgs", "repos_url": "https://api.github.com/users/bersbersbers/repos", "events_url": "https://api.github.com/users/bersbersbers/events{/privacy}", "received_events_url": "https://api.github.com/users/bersbersbers/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-08T10:44:45Z", "updated_at": "2020-01-16T17:45:31Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n```\r\nimport tensorflow as tf\r\n\r\na = tf.Variable(2)\r\na.assign(5)\r\nassert a.numpy() == 5\r\n\r\n# ValueError: Shapes () and (2,) are incompatible\r\na.assign([1,2])  \r\n\r\n# TypeError: assign() got an unexpected keyword argument 'validate_shape'\r\na.assign([1,2], validate_shape=False)\r\n\r\n# ValueError: Shapes () and (2,) are incompatible\r\ntf.compat.v1.assign(a, [1,2], validate_shape=False)  \r\n\r\n```\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10, Linux\r\n- TensorFlow installed from (source or binary): pip\r\n- TensorFlow version (use command below): 2.0.0, 2.1.0\r\n- Python version: 3.7\r\n\r\n**Describe the current behavior**\r\n\r\n`tf.assign` had a `validate_shape` parameter that `Variable.assign` seems to be missing.\r\n\r\nIn addition, the docs say:\r\n> If you want to change the shape of a variable later you have to use an `assign` Op with `validate_shape=False`.\r\n\r\nhttps://www.tensorflow.org/api_docs/python/tf/Variable\r\n\r\nHow should one change the shape of a variable?\r\n\r\n**Code to reproduce the issue**\r\nSee above.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35666", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35666/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35666/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35666/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/35666", "id": 546729700, "node_id": "MDExOlB1bGxSZXF1ZXN0MzYwMzUwODMy", "number": 35666, "title": "[ROCm] Support for complex type BLAS operations", "user": {"login": "ekuznetsov139", "id": 12205429, "node_id": "MDQ6VXNlcjEyMjA1NDI5", "avatar_url": "https://avatars2.githubusercontent.com/u/12205429?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ekuznetsov139", "html_url": "https://github.com/ekuznetsov139", "followers_url": "https://api.github.com/users/ekuznetsov139/followers", "following_url": "https://api.github.com/users/ekuznetsov139/following{/other_user}", "gists_url": "https://api.github.com/users/ekuznetsov139/gists{/gist_id}", "starred_url": "https://api.github.com/users/ekuznetsov139/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ekuznetsov139/subscriptions", "organizations_url": "https://api.github.com/users/ekuznetsov139/orgs", "repos_url": "https://api.github.com/users/ekuznetsov139/repos", "events_url": "https://api.github.com/users/ekuznetsov139/events{/privacy}", "received_events_url": "https://api.github.com/users/ekuznetsov139/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1169365682, "node_id": "MDU6TGFiZWwxMTY5MzY1Njgy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:L", "name": "size:L", "color": "adafea", "default": false, "description": "CL Change Size: Large"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-08T09:04:33Z", "updated_at": "2020-03-13T12:35:12Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/35666", "html_url": "https://github.com/tensorflow/tensorflow/pull/35666", "diff_url": "https://github.com/tensorflow/tensorflow/pull/35666.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/35666.patch"}, "body": "This PR enables complex-type BLAS operations GEMM, GEMV, and SCAL on the ROCm platform, and  does some housekeeping (e.g. corrects misspellings) in stream_executor/rocm/rocm_blas.cc."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35662", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35662/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35662/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35662/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35662", "id": 546665644, "node_id": "MDU6SXNzdWU1NDY2NjU2NDQ=", "number": 35662, "title": "Cannot build from source, get error: command succeeded, but there were errors parsing the target pattern", "user": {"login": "xlnwel", "id": 10184153, "node_id": "MDQ6VXNlcjEwMTg0MTUz", "avatar_url": "https://avatars0.githubusercontent.com/u/10184153?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xlnwel", "html_url": "https://github.com/xlnwel", "followers_url": "https://api.github.com/users/xlnwel/followers", "following_url": "https://api.github.com/users/xlnwel/following{/other_user}", "gists_url": "https://api.github.com/users/xlnwel/gists{/gist_id}", "starred_url": "https://api.github.com/users/xlnwel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xlnwel/subscriptions", "organizations_url": "https://api.github.com/users/xlnwel/orgs", "repos_url": "https://api.github.com/users/xlnwel/repos", "events_url": "https://api.github.com/users/xlnwel/events{/privacy}", "received_events_url": "https://api.github.com/users/xlnwel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-08T06:12:49Z", "updated_at": "2020-01-09T09:43:16Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 2.0\r\n- Python version: 3.7.4\r\n- Installed using virtualenv? pip? conda?: conda\r\n- Bazel version (if compiling from source): 0.26.1\r\n- GCC/Compiler version (if compiling from source): 7.4.0\r\n- CUDA/cuDNN version:CUDA 10.0/cuDNN7.4\r\n- GPU model and memory:\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n I want to get rid of the message like \r\n\r\n>Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 FMA\r\n\r\nTherefore, I build TF2.0 following the [guide](https://www.tensorflow.org/install/source) on the official site. Here's my configuration\r\n\r\n```\r\nDo you wish to build TensorFlow with XLA JIT support? [Y/n]: n\r\nNo XLA JIT support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with OpenCL SYCL support? [y/N]: n\r\nNo OpenCL SYCL support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with ROCm support? [y/N]: n\r\nNo ROCm support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with CUDA support? [y/N]: y\r\nCUDA support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with TensorRT support? [y/N]: n\r\nNo TensorRT support will be enabled for TensorFlow.\r\n\r\nFound CUDA 10.0 in:\r\n    /usr/local/cuda/lib64\r\n    /usr/local/cuda/include\r\nFound cuDNN 7 in:\r\n    /usr/local/cuda/lib64\r\n    /usr/local/cuda/include\r\n\r\n\r\nPlease specify a list of comma-separated CUDA compute capabilities you want to build with.\r\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\r\nPlease note that each additional compute capability significantly increases your build time and binary size, and that TensorFlow only supports compute capabilities >= 3.5 [Default is: 7.5]:\r\n\r\n\r\nDo you want to use clang as CUDA compiler? [y/N]: n\r\nnvcc will be used as CUDA compiler.\r\n\r\nPlease specify which gcc should be used by nvcc as the host compiler. [Default is /usr/bin/gcc]:\r\n\r\n\r\nDo you wish to build TensorFlow with MPI support? [y/N]: n\r\nNo MPI support will be enabled for TensorFlow.\r\n\r\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native -Wno-sign-compare]:\r\n\r\n\r\nWould you like to interactively configure ./WORKSPACE for Android builds? [y/N]: n\r\nNot configuring the WORKSPACE for Android builds.\r\n\r\nPreconfigured Bazel build configs. You can use any of the below by adding \"--config=<>\" to your build command. See .bazelrc for more details.\r\n        --config=mkl            # Build with MKL support.\r\n        --config=monolithic     # Config for mostly static monolithic build.\r\n        --config=gdr            # Build with GDR support.\r\n        --config=verbs          # Build with libverbs support.\r\n        --config=ngraph         # Build with Intel nGraph support.\r\n        --config=numa           # Build with NUMA support.\r\n        --config=dynamic_kernels        # (Experimental) Build kernels into separate shared objects.\r\n        --config=v2             # Build TensorFlow 2.x instead of 1.x.\r\nPreconfigured Bazel build configs to DISABLE default on features:\r\n        --config=noaws          # Disable AWS S3 filesystem support.\r\n        --config=nogcp          # Disable GCP support.\r\n        --config=nohdfs         # Disable HDFS support.\r\n        --config=noignite       # Disable Apache Ignite support.\r\n        --config=nokafka        # Disable Apache Kafka support.\r\n        --config=nonccl         # Disable NVIDIA NCCL support.\r\nConfiguration finished\r\n```\r\nI use the following command to build\r\n```\r\nbazel build -c opt \u2014 copt=-mavx \u2014 copt=-mavx2 \u2014 copt=-mfma \u2014 copt=-mfpmath=both \u2014 copt=-msse4.2 -k //tensorflow/tools/pip_package:build_pip_package\r\n```\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n```\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorContraction.h:308:16:   required from \u2018void EigenForTFLite::internal::TensorContractionKernel<ResScalar, LhsScalar, RhsScalar, StorageIndex, OutputMapper, LhsMapper, RhsMappe\r\nr>::packRhs(RhsScalar**, const typename RhsMapper::SubMapper&, StorageIndex, StorageIndex) [with ResScalar = float; LhsScalar = float; RhsScalar = float; StorageIndex = long int; OutputMapper = EigenForTFLite::internal::blas_data_mapper<f\r\nloat, long int, 0, 0>; LhsMapper = EigenForTFLite::internal::TensorContractionInputMapper<float, long int, 1, EigenForTFLite::TensorEvaluator<const EigenForTFLite::TensorReshapingOp<const EigenForTFLite::DSizes<long int, 2>, const EigenFo\r\nrTFLite::TensorMap<EigenForTFLite::Tensor<const float, 4, 1, long int>, 16> >, EigenForTFLite::ThreadPoolDevice>, std::array<long int, 1>, std::array<long int, 1>, 4, true, false, 0, EigenForTFLite::MakePointer>; RhsMapper = EigenForTFLit\r\ne::internal::TensorContractionInputMapper<float, long int, 0, EigenForTFLite::TensorEvaluator<const EigenForTFLite::TensorReshapingOp<const EigenForTFLite::DSizes<long int, 2>, const EigenForTFLite::TensorImagePatchOp<-1, -1, const EigenF\r\norTFLite::TensorMap<EigenForTFLite::Tensor<const float, 4, 1, long int>, 16> > >, EigenForTFLite::ThreadPoolDevice>, std::array<long int, 1>, std::array<long int, 1>, 4, true, false, 0, EigenForTFLite::MakePointer>; EigenForTFLite::intern\r\nal::TensorContractionKernel<ResScalar, LhsScalar, RhsScalar, StorageIndex, OutputMapper, LhsMapper, RhsMapper>::RhsBlock = float*; typename RhsMapper::SubMapper = EigenForTFLite::internal::TensorContractionSubMapper<float, long int, 0, Ei\r\ngenForTFLite::TensorEvaluator<const EigenForTFLite::TensorReshapingOp<const EigenForTFLite::DSizes<long int, 2>, const EigenForTFLite::TensorImagePatchOp<-1, -1, const EigenForTFLite::TensorMap<EigenForTFLite::Tensor<const float, 4, 1, lo\r\nng int>, 16> > >, EigenForTFLite::ThreadPoolDevice>, std::array<long int, 1>, std::array<long int, 1>, 4, true, false, 0, EigenForTFLite::MakePointer>]\u2019\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorContraction.h:898:11:   required from \u2018void EigenForTFLite::TensorContractionEvaluatorBase<Derived>::evalGemmPartial(EigenForTFLite::TensorContractionEvaluatorBase<Derived>::\r\nScalar*, EigenForTFLite::TensorContractionEvaluatorBase<Derived>::Index, EigenForTFLite::TensorContractionEvaluatorBase<Derived>::Index, int) const [with bool lhs_inner_dim_contiguous = true; bool rhs_inner_dim_contiguous = true; bool rhs\r\n_inner_dim_reordered = false; int Alignment = 0; bool use_output_kernel = false; Derived = EigenForTFLite::TensorEvaluator<const EigenForTFLite::TensorContractionOp<const std::array<EigenForTFLite::IndexPair<long int>, 1>, const EigenForT\r\nFLite::TensorReshapingOp<const EigenForTFLite::DSizes<long int, 2>, const EigenForTFLite::TensorImagePatchOp<-1, -1, const EigenForTFLite::TensorMap<EigenForTFLite::Tensor<const float, 4, 1, long int>, 16> > >, const EigenForTFLite::Tenso\r\nrReshapingOp<const EigenForTFLite::DSizes<long int, 2>, const EigenForTFLite::TensorMap<EigenForTFLite::Tensor<const float, 4, 1, long int>, 16> >, const EigenForTFLite::NoOpOutputKernel>, EigenForTFLite::ThreadPoolDevice>; EigenForTFLite\r\n::TensorContractionEvaluatorBase<Derived>::Scalar = float; EigenForTFLite::TensorContractionEvaluatorBase<Derived>::Index = long int]\u2019\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorContraction.h:813:37:   [ skipping 7 instantiation contexts, use -ftemplate-backtrace-limit=0 to disable ]\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorMorphing.h:175:44:   required from \u2018bool EigenForTFLite::TensorEvaluator<const EigenForTFLite::TensorReshapingOp<NewDimensions, XprType>, Device>::evalSubExprsIfNeeded(EigenF\r\norTFLite::TensorEvaluator<const EigenForTFLite::TensorReshapingOp<NewDimensions, XprType>, Device>::EvaluatorPointerType) [with NewDimensions = const EigenForTFLite::DSizes<long int, 4>; ArgType = const EigenForTFLite::TensorContractionOp\r\n<const std::array<EigenForTFLite::IndexPair<long int>, 1>, const EigenForTFLite::TensorReshapingOp<const EigenForTFLite::DSizes<long int, 2>, const EigenForTFLite::TensorImagePatchOp<-1, -1, const EigenForTFLite::TensorMap<EigenForTFLite:\r\n:Tensor<const float, 4, 1, long int>, 16> > >, const EigenForTFLite::TensorReshapingOp<const EigenForTFLite::DSizes<long int, 2>, const EigenForTFLite::TensorMap<EigenForTFLite::Tensor<const float, 4, 1, long int>, 16> >, const EigenForTF\r\nLite::NoOpOutputKernel>; Device = EigenForTFLite::ThreadPoolDevice; EigenForTFLite::TensorEvaluator<const EigenForTFLite::TensorReshapingOp<NewDimensions, XprType>, Device>::EvaluatorPointerType = float*]\u2019\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorAssign.h:148:62:   required from \u2018bool EigenForTFLite::TensorEvaluator<const EigenForTFLite::TensorAssignOp<LhsXprType, RhsXprType>, Device>::evalSubExprsIfNeeded(EigenForTFL\r\nite::TensorEvaluator<const EigenForTFLite::TensorAssignOp<LhsXprType, RhsXprType>, Device>::EvaluatorPointerType) [with LeftArgType = EigenForTFLite::TensorMap<EigenForTFLite::Tensor<float, 4, 1, long int>, 16>; RightArgType = const Eigen\r\nForTFLite::TensorReshapingOp<const EigenForTFLite::DSizes<long int, 4>, const EigenForTFLite::TensorContractionOp<const std::array<EigenForTFLite::IndexPair<long int>, 1>, const EigenForTFLite::TensorReshapingOp<const EigenForTFLite::DSiz\r\nes<long int, 2>, const EigenForTFLite::TensorImagePatchOp<-1, -1, const EigenForTFLite::TensorMap<EigenForTFLite::Tensor<const float, 4, 1, long int>, 16> > >, const EigenForTFLite::TensorReshapingOp<const EigenForTFLite::DSizes<long int,\r\n 2>, const EigenForTFLite::TensorMap<EigenForTFLite::Tensor<const float, 4, 1, long int>, 16> >, const EigenForTFLite::NoOpOutputKernel> >; Device = EigenForTFLite::ThreadPoolDevice; EigenForTFLite::TensorEvaluator<const EigenForTFLite::T\r\nensorAssignOp<LhsXprType, RhsXprType>, Device>::EvaluatorPointerType = float*]\u2019\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorExecutor.h:277:16:   required from \u2018static void EigenForTFLite::internal::TensorExecutor<Expression, EigenForTFLite::ThreadPoolDevice, Vectorizable, Tileable>::run(const Expr\r\nession&, const EigenForTFLite::ThreadPoolDevice&) [with Expression = const EigenForTFLite::TensorAssignOp<EigenForTFLite::TensorMap<EigenForTFLite::Tensor<float, 4, 1, long int>, 16>, const EigenForTFLite::TensorReshapingOp<const EigenFor\r\nTFLite::DSizes<long int, 4>, const EigenForTFLite::TensorContractionOp<const std::array<EigenForTFLite::IndexPair<long int>, 1>, const EigenForTFLite::TensorReshapingOp<const EigenForTFLite::DSizes<long int, 2>, const EigenForTFLite::Tens\r\norImagePatchOp<-1, -1, const EigenForTFLite::TensorMap<EigenForTFLite::Tensor<const float, 4, 1, long int>, 16> > >, const EigenForTFLite::TensorReshapingOp<const EigenForTFLite::DSizes<long int, 2>, const EigenForTFLite::TensorMap<EigenF\r\norTFLite::Tensor<const float, 4, 1, long int>, 16> >, const EigenForTFLite::NoOpOutputKernel> > >; bool Vectorizable = true; bool Tileable = false]\u2019\r\nexternal/eigen_archive/unsupported/Eigen/CXX11/src/Tensor/TensorDevice.h:35:62:   required from \u2018EigenForTFLite::TensorDevice<ExpressionType, DeviceType>& EigenForTFLite::TensorDevice<ExpressionType, DeviceType>::operator=(const OtherDeri\r\nved&) [with OtherDerived = EigenForTFLite::TensorReshapingOp<const EigenForTFLite::DSizes<long int, 4>, const EigenForTFLite::TensorContractionOp<const std::array<EigenForTFLite::IndexPair<long int>, 1>, const EigenForTFLite::TensorReshap\r\ningOp<const EigenForTFLite::DSizes<long int, 2>, const EigenForTFLite::TensorImagePatchOp<-1, -1, const EigenForTFLite::TensorMap<EigenForTFLite::Tensor<const float, 4, 1, long int>, 16> > >, const EigenForTFLite::TensorReshapingOp<const\r\nEigenForTFLite::DSizes<long int, 2>, const EigenForTFLite::TensorMap<EigenForTFLite::Tensor<const float, 4, 1, long int>, 16> >, const EigenForTFLite::NoOpOutputKernel> >; ExpressionType = EigenForTFLite::TensorMap<EigenForTFLite::Tensor<\r\nfloat, 4, 1, long int>, 16>; DeviceType = EigenForTFLite::ThreadPoolDevice]\u2019\r\n./tensorflow/lite/kernels/internal/optimized/multithreaded_conv.h:128:29:   required from \u2018void tflite::multithreaded_ops::EigenTensorConvFunctor<T>::operator()(const EigenForTFLite::ThreadPoolDevice&, const T*, int, int, int, int, const\r\nT*, int, int, int, int, int, int, int, tflite::PaddingType, T*, int, int) [with T = float]\u2019\r\n./tensorflow/lite/kernels/internal/optimized/multithreaded_conv.h:169:65:   required from here\r\n./tensorflow/core/kernels/eigen_spatial_convolutions-inl.h:600:15: warning: ignoring attributes on template argument \u2018EigenForTFLite::internal::packet_traits<float>::type {aka __vector(4) float}\u2019 [-Wignored-attributes]\r\n     const int packetSize = internal::unpacket_traits<Packet>::size;\r\n               ^~~~~~~~~~\r\nTarget //tensorflow/tools/pip_package:build_pip_package up-to-date:\r\n  bazel-bin/tensorflow/tools/pip_package/build_pip_package\r\nERROR: command succeeded, but there were errors parsing the target pattern\r\nINFO: Elapsed time: 6524.563s, Critical Path: 252.51s\r\nINFO: 18226 processes: 18226 local.\r\nFAILED: Build did NOT complete successfully\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35650", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35650/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35650/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35650/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35650", "id": 546540726, "node_id": "MDU6SXNzdWU1NDY1NDA3MjY=", "number": 35650, "title": "InvalidArgumentError if np.ndarray is registered as Sequence type", "user": {"login": "kyao", "id": 1087657, "node_id": "MDQ6VXNlcjEwODc2NTc=", "avatar_url": "https://avatars3.githubusercontent.com/u/1087657?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyao", "html_url": "https://github.com/kyao", "followers_url": "https://api.github.com/users/kyao/followers", "following_url": "https://api.github.com/users/kyao/following{/other_user}", "gists_url": "https://api.github.com/users/kyao/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyao/subscriptions", "organizations_url": "https://api.github.com/users/kyao/orgs", "repos_url": "https://api.github.com/users/kyao/repos", "events_url": "https://api.github.com/users/kyao/events{/privacy}", "received_events_url": "https://api.github.com/users/kyao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tomerk", "id": 676357, "node_id": "MDQ6VXNlcjY3NjM1Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/676357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomerk", "html_url": "https://github.com/tomerk", "followers_url": "https://api.github.com/users/tomerk/followers", "following_url": "https://api.github.com/users/tomerk/following{/other_user}", "gists_url": "https://api.github.com/users/tomerk/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomerk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomerk/subscriptions", "organizations_url": "https://api.github.com/users/tomerk/orgs", "repos_url": "https://api.github.com/users/tomerk/repos", "events_url": "https://api.github.com/users/tomerk/events{/privacy}", "received_events_url": "https://api.github.com/users/tomerk/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tomerk", "id": 676357, "node_id": "MDQ6VXNlcjY3NjM1Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/676357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomerk", "html_url": "https://github.com/tomerk", "followers_url": "https://api.github.com/users/tomerk/followers", "following_url": "https://api.github.com/users/tomerk/following{/other_user}", "gists_url": "https://api.github.com/users/tomerk/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomerk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomerk/subscriptions", "organizations_url": "https://api.github.com/users/tomerk/orgs", "repos_url": "https://api.github.com/users/tomerk/repos", "events_url": "https://api.github.com/users/tomerk/events{/privacy}", "received_events_url": "https://api.github.com/users/tomerk/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2020-01-07T22:25:21Z", "updated_at": "2020-02-03T21:27:44Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): CentOS Linux\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): pip install\r\n- TensorFlow version (use command below): v2.0.0-rc2-26-g64c3d38 2.0.0\r\n- Python version: 3.6.9\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory: CPU\r\n\r\n**Describe the current behavior**\r\n\r\nFor reference, numpy is planning to register numpy ndarray as a Sequence:\r\nhttps://github.com/numpy/numpy/issues/2776\r\n\r\nThe sample ResNet50 code from https://keras.io/applications/ runs fine. But, if ndarray is registered as a sequence, then TF2 throws an InvalidArgumentError.\r\n\r\n**Code to reproduce the issue**\r\n\r\n```\r\nfrom keras.applications.resnet50 import ResNet50\r\nfrom keras.preprocessing import image\r\nfrom keras.applications.resnet50 import preprocess_input, decode_predictions\r\nimport numpy as np\r\nimport typing\r\ntyping.Sequence.register(np.ndarray)\r\n\r\nmodel = ResNet50(weights='imagenet')\r\n\r\nimg_path = 'elephant.jpg'\r\nimg = image.load_img(img_path, target_size=(224, 224))\r\nx = image.img_to_array(img)\r\nx = np.expand_dims(x, axis=0)\r\nx = preprocess_input(x)\r\n\r\npreds = model.predict(x)\r\n# decode the results into a list of tuples (class, description, probability)\r\n# (one such list for each sample in the batch)\r\nprint('Predicted:', decode_predictions(preds, top=3)[0])\r\n# Predicted: [(u'n02504013', u'Indian_elephant', 0.82658225), (u'n01871265', u'tusker', 0.1122357), (u'n02504458', u'African_elephant', 0.061040461)]\r\n```\r\n\r\nTwo extra lines added to the sample ResNet50 code are:\r\n\r\n```\r\nimport typing\r\ntyping.Sequence.register(np.ndarray)\r\n```\r\n\r\nThe error is:\r\n\r\n```\r\n2020-01-07 13:48:16.421816: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Invalid argument: The first dimension of padding\\s must be the rank of inputs[4,2] []\r\n         [[{{node conv1_pad/Pad}}]]\r\nTraceback (most recent call last):\r\n  File \"test_d3m_imports.py\", line 16, in <module>\r\n    preds = model.predict(x)\r\n  File \"/data/dsbox/kyao/miniconda3/envs/dsbox-eval-2019-winter/lib/python3.6/site-packages/keras/engine/training.py\", line 1462, in predict\r\n    callbacks=callbacks)\r\n  File \"/data/dsbox/kyao/miniconda3/envs/dsbox-eval-2019-winter/lib/python3.6/site-packages/keras/engine/training_arrays.py\", line 324, in predict_loop\r\n    batch_outs = f(ins_batch)\r\n  File \"/data/dsbox/kyao/miniconda3/envs/dsbox-eval-2019-winter/lib/python3.6/site-packages/tensorflow_core/python/keras/backend.py\", line 3740, in __call__\r\n    outputs = self._graph_fn(*converted_inputs)\r\n  File \"/data/dsbox/kyao/miniconda3/envs/dsbox-eval-2019-winter/lib/python3.6/site-packages/tensorflow_core/python/eager/function.py\", line 1081, in __call__\r\n    return self._call_impl(args, kwargs)\r\n  File \"/data/dsbox/kyao/miniconda3/envs/dsbox-eval-2019-winter/lib/python3.6/site-packages/tensorflow_core/python/eager/function.py\", line 1121, in _call_impl\r\n    return self._call_flat(args, self.captured_inputs, cancellation_manager)\r\n  File \"/data/dsbox/kyao/miniconda3/envs/dsbox-eval-2019-winter/lib/python3.6/site-packages/tensorflow_core/python/eager/function.py\", line 1224, in _call_flat\r\n    ctx, args, cancellation_manager=cancellation_manager)\r\n  File \"/data/dsbox/kyao/miniconda3/envs/dsbox-eval-2019-winter/lib/python3.6/site-packages/tensorflow_core/python/eager/function.py\", line 511, in call\r\n    ctx=ctx)\r\n  File \"/data/dsbox/kyao/miniconda3/envs/dsbox-eval-2019-winter/lib/python3.6/site-packages/tensorflow_core/python/eager/execute.py\", line 67, in quick_execute\r\n    six.raise_from(core._status_to_exception(e.code, message), None)\r\n  File \"<string>\", line 3, in raise_from\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError:  The first dimension of paddings must be the rank of inputs[4,2] []\r\n         [[node conv1_pad/Pad (defined at /data/dsbox/kyao/miniconda3/envs/dsbox-eval-2019-winter/lib/python3.6/site-packages/tensorflow_core/python/framework/ops.py:1751) ]] [O\\p:__inference_keras_scratch_graph_10370]\r\n\r\nFunction call stack:\r\nkeras_scratch_graph\r\n\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35648", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35648/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35648/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35648/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35648", "id": 546527655, "node_id": "MDU6SXNzdWU1NDY1Mjc2NTU=", "number": 35648, "title": "Malformed `TRAINABLE_ATTRIBUTE_NOTE` in batch normalization documentation", "user": {"login": "joe-antognini", "id": 7061933, "node_id": "MDQ6VXNlcjcwNjE5MzM=", "avatar_url": "https://avatars1.githubusercontent.com/u/7061933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joe-antognini", "html_url": "https://github.com/joe-antognini", "followers_url": "https://api.github.com/users/joe-antognini/followers", "following_url": "https://api.github.com/users/joe-antognini/following{/other_user}", "gists_url": "https://api.github.com/users/joe-antognini/gists{/gist_id}", "starred_url": "https://api.github.com/users/joe-antognini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joe-antognini/subscriptions", "organizations_url": "https://api.github.com/users/joe-antognini/orgs", "repos_url": "https://api.github.com/users/joe-antognini/repos", "events_url": "https://api.github.com/users/joe-antognini/events{/privacy}", "received_events_url": "https://api.github.com/users/joe-antognini/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "lamberta", "id": 43051, "node_id": "MDQ6VXNlcjQzMDUx", "avatar_url": "https://avatars2.githubusercontent.com/u/43051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lamberta", "html_url": "https://github.com/lamberta", "followers_url": "https://api.github.com/users/lamberta/followers", "following_url": "https://api.github.com/users/lamberta/following{/other_user}", "gists_url": "https://api.github.com/users/lamberta/gists{/gist_id}", "starred_url": "https://api.github.com/users/lamberta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lamberta/subscriptions", "organizations_url": "https://api.github.com/users/lamberta/orgs", "repos_url": "https://api.github.com/users/lamberta/repos", "events_url": "https://api.github.com/users/lamberta/events{/privacy}", "received_events_url": "https://api.github.com/users/lamberta/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lamberta", "id": 43051, "node_id": "MDQ6VXNlcjQzMDUx", "avatar_url": "https://avatars2.githubusercontent.com/u/43051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lamberta", "html_url": "https://github.com/lamberta", "followers_url": "https://api.github.com/users/lamberta/followers", "following_url": "https://api.github.com/users/lamberta/following{/other_user}", "gists_url": "https://api.github.com/users/lamberta/gists{/gist_id}", "starred_url": "https://api.github.com/users/lamberta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lamberta/subscriptions", "organizations_url": "https://api.github.com/users/lamberta/orgs", "repos_url": "https://api.github.com/users/lamberta/repos", "events_url": "https://api.github.com/users/lamberta/events{/privacy}", "received_events_url": "https://api.github.com/users/lamberta/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-01-07T21:53:29Z", "updated_at": "2020-01-20T22:35:20Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\n\r\nhttps://www.tensorflow.org/api_docs/python/tf/keras/layers/BatchNormalization?version=stable\r\n\r\n## Description of issue (what needs changing):\r\n\r\nAfter the references list there is a stray malformed tag:\r\n\r\n{ {TRAINABLE_ATTRIBUTE_NOTE}}\r\n\r\nI suspect that this is supposed to resolve to the note that `moving_mean` and `moving_variance` are placed in `UPDATE_OPS` and need to be executed alongside the training op.  (This note is present in the `tf.layers` doc: https://www.tensorflow.org/versions/r1.15/api_docs/python/tf/layers/batch_normalization)  But without knowing what this tag refers to I can't really say for sure.  (The tag is present in only three places in the Tensorflow codebase and shows up malformed on the website in each case.)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35645", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35645/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35645/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35645/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35645", "id": 546495942, "node_id": "MDU6SXNzdWU1NDY0OTU5NDI=", "number": 35645, "title": "Error trying to build for AVX2 on CPU", "user": {"login": "ajidevelop", "id": 38478217, "node_id": "MDQ6VXNlcjM4NDc4MjE3", "avatar_url": "https://avatars3.githubusercontent.com/u/38478217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ajidevelop", "html_url": "https://github.com/ajidevelop", "followers_url": "https://api.github.com/users/ajidevelop/followers", "following_url": "https://api.github.com/users/ajidevelop/following{/other_user}", "gists_url": "https://api.github.com/users/ajidevelop/gists{/gist_id}", "starred_url": "https://api.github.com/users/ajidevelop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ajidevelop/subscriptions", "organizations_url": "https://api.github.com/users/ajidevelop/orgs", "repos_url": "https://api.github.com/users/ajidevelop/repos", "events_url": "https://api.github.com/users/ajidevelop/events{/privacy}", "received_events_url": "https://api.github.com/users/ajidevelop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1222092379, "node_id": "MDU6TGFiZWwxMjIyMDkyMzc5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:bazel", "name": "subtype:bazel", "color": "b619ea", "default": false, "description": "Bazel related Build_Installation issues"}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-07T20:40:12Z", "updated_at": "2020-01-16T11:02:15Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 2.0.0\r\n- Python version: 3.6.4\r\n- Installed using virtualenv? pip? conda?: pip\r\n- Bazel version (if compiling from source): 0.26.1\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 10/7\r\n- GPU model and memory: NVIDIA GeForce MX150\r\n\r\n\r\n**Describe the problem**\r\nI am trying to build tensorflow with AVX2 instructions for my CPU to increase speeds, but bazel keeps failing when loading tensorflow\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n1. Cloned the tensorflow source from github and checked out the r2.0 branch.\r\n2. Ran python ./configure.py\r\n3. Proceded through steps, selecting no for all other builds and set the bazel config option to /arch:AVC2\r\n4. Ran bazel build --config=opt //tensorflow/tools/pip_package:build_pip_package\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\nThe error text is attached here:\r\n[error.txt](https://github.com/tensorflow/tensorflow/files/4032375/error.txt)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35643", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35643/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35643/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35643/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/35643", "id": 546367522, "node_id": "MDExOlB1bGxSZXF1ZXN0MzYwMDU4MzYw", "number": 35643, "title": "Separate the global NUMA thread pools from the default thread pool ", "user": {"login": "georgepaw", "id": 6642663, "node_id": "MDQ6VXNlcjY2NDI2NjM=", "avatar_url": "https://avatars1.githubusercontent.com/u/6642663?v=4", "gravatar_id": "", "url": "https://api.github.com/users/georgepaw", "html_url": "https://github.com/georgepaw", "followers_url": "https://api.github.com/users/georgepaw/followers", "following_url": "https://api.github.com/users/georgepaw/following{/other_user}", "gists_url": "https://api.github.com/users/georgepaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/georgepaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/georgepaw/subscriptions", "organizations_url": "https://api.github.com/users/georgepaw/orgs", "repos_url": "https://api.github.com/users/georgepaw/repos", "events_url": "https://api.github.com/users/georgepaw/events{/privacy}", "received_events_url": "https://api.github.com/users/georgepaw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-01-07T16:05:36Z", "updated_at": "2020-03-11T11:23:52Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/35643", "html_url": "https://github.com/tensorflow/tensorflow/pull/35643", "diff_url": "https://github.com/tensorflow/tensorflow/pull/35643.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/35643.patch"}, "body": "This patch allows devices configured with numa enabled to not share the thread pool with the default CPU device.\r\n\r\nThis has come around as I've been experimenting with NUMA aware datasets/iterators which share the same sessions, but we create a DeviceMgr and a dataset iterator with a CPU device per NUMA node. Without this change the CPU:0 from the new DeviceMgr might share a thread pool which was not created with NUMA awareness."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35642", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35642/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35642/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35642/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35642", "id": 546326005, "node_id": "MDU6SXNzdWU1NDYzMjYwMDU=", "number": 35642, "title": "mysql-client can not be installed FROM official tensorflow/tensorflow image", "user": {"login": "SumNeuron", "id": 22868585, "node_id": "MDQ6VXNlcjIyODY4NTg1", "avatar_url": "https://avatars3.githubusercontent.com/u/22868585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SumNeuron", "html_url": "https://github.com/SumNeuron", "followers_url": "https://api.github.com/users/SumNeuron/followers", "following_url": "https://api.github.com/users/SumNeuron/following{/other_user}", "gists_url": "https://api.github.com/users/SumNeuron/gists{/gist_id}", "starred_url": "https://api.github.com/users/SumNeuron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SumNeuron/subscriptions", "organizations_url": "https://api.github.com/users/SumNeuron/orgs", "repos_url": "https://api.github.com/users/SumNeuron/repos", "events_url": "https://api.github.com/users/SumNeuron/events{/privacy}", "received_events_url": "https://api.github.com/users/SumNeuron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-07T14:50:24Z", "updated_at": "2020-01-10T21:21:21Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): official tensorflow image from docker hub\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: n/a\r\n- TensorFlow installed from (source or binary): n/a\r\n- TensorFlow version: 1.15.0\r\n- Python version: 3\r\n- Installed using virtualenv? pip? conda?: Docker\r\n- Bazel version (if compiling from source): n/a\r\n- GCC/Compiler version (if compiling from source): n/a\r\n- CUDA/cuDNN version: 10\r\n- GPU model and memory: n/a\r\n\r\n\r\n\r\n**Describe the problem**\r\nSimple image built `FROM tensorflow/tensorflow:tag` fails to build when including `mysql-client`\r\n\r\n```dockerfile\r\nFROM tensorflow/tensorflow:1.15.0-gpu-py3-jupyter\r\n\r\n# Avoid ERROR: invoke-rc.d: policy-rc.d denied execution of start.\r\n# RUN sed -i \"s/^exit 101$/exit 0/\" /usr/sbin/policy-rc.d\r\n\r\n# --- Install any needed packages specified in requirements.apt\r\nCOPY requirements.apt .\r\nRUN apt-get update && xargs apt-get install -y < requirements.apt\r\n\r\n# --- Install any needed packages specified in requirements.pip\r\nCOPY requirements.pip .\r\nRUN pip install -U --trusted-host pypi.python.org -r requirements.pip\r\n\r\n# activate jupyter extensions\r\nRUN jupyter contrib nbextension install \\\r\n  && jupyter nbextension enable codefolding/main \\\r\n  && jupyter nbextension enable collapsible_headings/main\r\n```\r\n\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\nA MWE [repo](https://gitlab.com/SumNeuron/mytf) contains the following files:\r\n\r\n- `Dockerfile.ai`: custom image built on top of official tensorflow/tensorflow\r\n- `docker-compose.ai.development.yml`: specifies `Dockerfile.ai` as build file and mounts `notebooks` directory\r\n- `requirements.pip`: pip requirements that may be used in images other than `Dockerfile.ai`\r\n- `requirements.apt`: packages needed to be installed via `apt-get`\r\n\r\nFor convenience a python script `docker.py` is provided, e.g. \r\n```\r\npython docker.py -c {build | up | down}\r\n```\r\ninstead of \r\n```\r\ndocker-compose -f docker-compose.ai.development.yml {build | up | down}\r\n```\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35634", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35634/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35634/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35634/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35634", "id": 546224175, "node_id": "MDU6SXNzdWU1NDYyMjQxNzU=", "number": 35634, "title": "EarlyStopping should restore weights on end of training, not end of epoch", "user": {"login": "Stigjb", "id": 418181, "node_id": "MDQ6VXNlcjQxODE4MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/418181?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Stigjb", "html_url": "https://github.com/Stigjb", "followers_url": "https://api.github.com/users/Stigjb/followers", "following_url": "https://api.github.com/users/Stigjb/following{/other_user}", "gists_url": "https://api.github.com/users/Stigjb/gists{/gist_id}", "starred_url": "https://api.github.com/users/Stigjb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Stigjb/subscriptions", "organizations_url": "https://api.github.com/users/Stigjb/orgs", "repos_url": "https://api.github.com/users/Stigjb/repos", "events_url": "https://api.github.com/users/Stigjb/events{/privacy}", "received_events_url": "https://api.github.com/users/Stigjb/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-07T11:10:17Z", "updated_at": "2020-01-08T11:19:12Z", "closed_at": null, "author_association": "NONE", "body": "## System information\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Darwin-19.2.0-x86_64-i386-64bit\r\n- TensorFlow installed from (source or binary): Pipenv\r\n- TensorFlow version (use command below): 2.0.0\r\n- Python version: 3.7.5\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n## Current behavior\r\n\r\nThe EarlyStopping callback will restore the best weights only if it itself stops training. For example, if a model is set to train for 40 epochs, uses early stopping with a patience of 5, and the best weights occur in epoch 37, then the best weights will not be restored, and the model will have the weights from epoch 40.\r\n\r\n## Expected behavior\r\n\r\nEarlyStopping should, when initialized with `restore_best_weights=True`, always restore the best weights when training stops, regardless of the reason why training stopped.\r\n\r\n## Code to reproduce the issue\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n```python\r\nimport tensorflow as tf\r\nfrom numpy.random import RandomState\r\nfrom tensorflow.keras.callbacks import EarlyStopping\r\nfrom tensorflow.keras.layers import Dense\r\nfrom tensorflow.keras.models import Sequential\r\n\r\nN_CLASSES, N_SAMPLES = 5, 500\r\n\r\nfor seed in [1, 2]:\r\n    print(f\"=== Random seed is {seed} ===\")\r\n\r\n    tf.random.set_seed(seed)\r\n    rng = RandomState(seed)\r\n\r\n    x_train = rng.standard_normal(size=(N_SAMPLES, 10))\r\n    x_test = rng.standard_normal(size=(N_SAMPLES, 10))\r\n    y_train = rng.random_integers(N_CLASSES, size=N_SAMPLES)\r\n    y_test = rng.random_integers(N_CLASSES, size=N_SAMPLES)\r\n\r\n    model = Sequential([Dense(32), Dense(N_CLASSES)])\r\n    model.compile(\"adam\", \"categorical_crossentropy\", [\"accuracy\"])\r\n    early_stopping = EarlyStopping(\r\n        \"val_accuracy\", patience=10, verbose=1, restore_best_weights=True\r\n    )\r\n    history = model.fit(\r\n        x_train,\r\n        y_train,\r\n        epochs=20,\r\n        callbacks=[early_stopping],\r\n        verbose=0,\r\n        validation_data=(x_test, y_test),\r\n    )\r\n    best_acc = max(history.history[\"val_accuracy\"])\r\n    _, eval_acc = model.evaluate(x_test, y_test, verbose=0)\r\n    print(f\"Best accuracy in training: {best_acc}. In evaluation: {eval_acc}\\n\")\r\n```\r\n\r\n### Output from example:\r\n\r\n```txt\r\n=== Random seed is 1 ===\r\nRestoring model weights from the end of the best epoch.\r\nEpoch 00011: early stopping\r\nBest accuracy in training: 0.19200000166893005. In evaluation: 0.19200000166893005\r\n\r\n=== Random seed is 2 ===\r\nBest accuracy in training: 0.15199999511241913. In evaluation: 0.14000000059604645\r\n\r\n```\r\n\r\n## Other info / logs\r\n\r\n- Numpy version: 1.18.1"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35632", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35632/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35632/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35632/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35632", "id": 546221460, "node_id": "MDU6SXNzdWU1NDYyMjE0NjA=", "number": 35632, "title": "TFLite GPU execution failed", "user": {"login": "joyalbin", "id": 1856674, "node_id": "MDQ6VXNlcjE4NTY2NzQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1856674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joyalbin", "html_url": "https://github.com/joyalbin", "followers_url": "https://api.github.com/users/joyalbin/followers", "following_url": "https://api.github.com/users/joyalbin/following{/other_user}", "gists_url": "https://api.github.com/users/joyalbin/gists{/gist_id}", "starred_url": "https://api.github.com/users/joyalbin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joyalbin/subscriptions", "organizations_url": "https://api.github.com/users/joyalbin/orgs", "repos_url": "https://api.github.com/users/joyalbin/repos", "events_url": "https://api.github.com/users/joyalbin/events{/privacy}", "received_events_url": "https://api.github.com/users/joyalbin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 16, "created_at": "2020-01-07T11:04:04Z", "updated_at": "2020-03-10T06:47:28Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "I trying to run one model on TFite mobile GPU using opencl and getting below error:\r\n\r\n> INFO: Initialized TensorFlow Lite runtime.                                                                                           \r\n> INFO: Created TensorFlow Lite delegate for GPU.                                                                                      \r\n> ERROR: Next operations are not supported by GPU delegate:                                                                            \r\n> SPLIT_V: Operation is not supported.                                                                                                 \r\n> First 294 operations will run on the GPU, and the remaining 40 on the CPU.                                                           \r\n> INFO: Initialized OpenCL-based API.                                                                                                  \r\n> Applied GPU delegate.                                                                                                                \r\n> Initialized session in 107237ms.                                                                                                     \r\n> Running benchmark for at least 1 iterations and at least 0.5 seconds but terminate if exceeding 150 seconds.                         \r\n> ERROR: TfLiteGpuDelegate Invoke: Failed to read data from GPU (clEnqueueReadBuffer) - Execution status error for events in wait list \r\n> ERROR: Node number 334 (TfLiteGpuDelegateV2) failed to invoke.                                                                       \r\n>                                                                                                                                      \r\n> ERROR: TfLiteGpuDelegate Invoke: Failed to upload data to GPU (clEnqueueWriteBuffer) - Execution status error for events in wait list\r\n> ERROR: Node number 334 (TfLiteGpuDelegateV2) failed to invoke.                                                                                                            \r\n>                                                                                                                                      \r\n> ERROR: TfLiteGpuDelegate Invoke: Failed to upload data to GPU (clEnqueueWriteBuffer) - Execution status error for events in wait list\r\n> ERROR: Node number 334 (TfLiteGpuDelegateV2) failed to invoke.\r\n> \r\n> ERROR: TfLiteGpuDelegate Invoke: Failed to upload data to GPU (clEnqueueWriteBuffer) - Execution status error for events in wait list\r\n> ERROR: Node number 334 (TfLiteGpuDelegateV2) failed to invoke.\r\n> \r\n> ERROR: TfLiteGpuDelegate Invoke: Failed to upload data to GPU (clEnqueueWriteBuffer) - Execution status error for events in wait list\r\n> ERROR: Node number 334 (TfLiteGpuDelegateV2) failed to invoke.\r\n> \r\n> ERROR: TfLiteGpuDelegate Invoke: Failed to upload data to GPU (clEnqueueWriteBuffer) - Execution status error for events in wait list\r\n> ERROR: Node number 334 (TfLiteGpuDelegateV2) failed to invoke.\r\n> \r\n> ERROR: TfLiteGpuDelegate Invoke: Failed to upload data to GPU (clEnqueueWriteBuffer) - Execution status error for events in wait list\r\n> ERROR: Node number 334 (TfLiteGpuDelegateV2) failed to invoke.\r\n> \r\n> ERROR: TfLiteGpuDelegate Invoke: Failed to upload data to GPU (clEnqueueWriteBuffer) - Execution status error for events in wait list\r\n> ERROR: Node number 334 (TfLiteGpuDelegateV2) failed to invoke.\r\n> \r\n> ERROR: TfLiteGpuDelegate Invoke: Failed to upload data to GPU (clEnqueueWriteBuffer) - Execution status error for events in wait list\r\n> ERROR: Node number 334 (TfLiteGpuDelegateV2) failed to invoke.\r\n> \r\n> ERROR: TfLiteGpuDelegate Invoke: Failed to upload data to GPU (clEnqueueWriteBuffer) - Execution status error for events in wait list\r\n> ERROR: Node number 334 (TfLiteGpuDelegateV2) failed to invoke.\r\n> ERROR: TfLiteGpuDelegate Invoke: Failed to upload data to GPU (clEnqueueWriteBuffer) - Execution status error for events in wait list\r\n> ERROR: Node number 334 (TfLiteGpuDelegateV2) failed to invoke.\r\n> \r\n> count=138 first=73906 curr=1840 min=1414 max=73906 avg=3142.52 std=6057\r\n> \r\n\r\nPlease help me to resolve this issue\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35630", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35630/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35630/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35630/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35630", "id": 546122706, "node_id": "MDU6SXNzdWU1NDYxMjI3MDY=", "number": 35630, "title": "OutOfRangeError Unknown Error when extracting particular zip file", "user": {"login": "BrEr", "id": 4420162, "node_id": "MDQ6VXNlcjQ0MjAxNjI=", "avatar_url": "https://avatars0.githubusercontent.com/u/4420162?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BrEr", "html_url": "https://github.com/BrEr", "followers_url": "https://api.github.com/users/BrEr/followers", "following_url": "https://api.github.com/users/BrEr/following{/other_user}", "gists_url": "https://api.github.com/users/BrEr/gists{/gist_id}", "starred_url": "https://api.github.com/users/BrEr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BrEr/subscriptions", "organizations_url": "https://api.github.com/users/BrEr/orgs", "repos_url": "https://api.github.com/users/BrEr/repos", "events_url": "https://api.github.com/users/BrEr/events{/privacy}", "received_events_url": "https://api.github.com/users/BrEr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 15, "created_at": "2020-01-07T07:19:36Z", "updated_at": "2020-03-18T19:16:44Z", "closed_at": null, "author_association": "NONE", "body": "Please be aware this issue was originally posted in tensorflow/datasets but I got directed here as it seems that the issue is related to the GFile implementation:\r\nhttps://github.com/tensorflow/datasets/issues/1337\r\n\r\n\r\n**Short description**\r\nWhen the download of imagenet_resized finished and tfds starts extracting/writing records, the program crashes.\r\n\r\nYou can reproduce this error by downloading the particular zip file manually and extracting it with tensorflow:\r\n\r\nhttp://www.image-net.org/image/downsample/Imagenet32_train_npz.zip\r\n\r\n**Environment information**\r\n* Operating System: Windows 10\r\n* Python version: 3.7\r\n* tensorflow-datasets version: 1.3.2\r\n* tensorflow-gpu version: 2.0.0\r\n\r\n**Reproduction instructions**\r\nWithout TFDS:\r\n```\r\nimport zipfile\r\nimport tensorflow.compat.v2 as tf\r\n\r\npath = 'path/to/file.zip'\r\nwith tf.io.gfile.GFile(path, 'rb') as fobj:\r\n  z = zipfile.ZipFile(fobj)\r\n  for member in z.infolist():\r\n    extract_file = z.open(member)\r\n    print(member.filename)\r\n```\r\n\r\n\r\nWith TFDS:\r\n\r\n```\r\nimport tensorflow_datasets as tfds\r\n\r\nimagenet_data, info = tfds.load(name=\"imagenet_resized/32x32\", with_info=True, as_supervised=True)\r\n```\r\n\r\n**Link to logs**\r\n```\r\nDl Size...: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 3414/3414 [22:47<00:00,  2.60 MiB/s]\r\n\r\n\r\n\r\n0 examples [00:00, ? examples/s]Traceback (most recent call last):\r\n  File \"C:\\Program Files\\Python37\\lib\\contextlib.py\", line 130, in __exit__\r\n    self.gen.throw(type, value, traceback)\r\n  File \"C:\\Users\\[username]\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow_datasets\\core\\file_format_adapter.py\", line 199, in incomplete_dir\r\n    yield tmp_dir\r\n  File \"C:\\Users\\[username]\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow_datasets\\core\\dataset_builder.py\", line 333, in download_and_prepare\r\n    download_config=download_config)\r\n  File \"C:\\Users\\[username]\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow_datasets\\core\\dataset_builder.py\", line 1008, in _download_and_prepare\r\n    max_examples_per_split=download_config.max_examples_per_split,\r\n  File \"C:\\Users\\[username]\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow_datasets\\core\\dataset_builder.py\", line 871, in _download_and_prepare\r\n    self._prepare_split(split_generator, **prepare_split_kwargs)\r\n  File \"C:\\Users\\[username]\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow_datasets\\core\\dataset_builder.py\", line 1033, in _prepare_split\r\n    total=split_info.num_examples, leave=False):\r\n  File \"C:\\Users\\[username]\\AppData\\Roaming\\Python\\Python37\\site-packages\\tqdm\\_tqdm.py\", line 1005, in __iter__\r\n    for obj in iterable:\r\n  File \"C:\\Users\\[username]\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow_datasets\\image\\imagenet_resized.py\", line 141, in _generate_examples\r\n    for fname, fobj in archive:\r\n  File \"C:\\Users\\[username]\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow_datasets\\core\\download\\extractor.py\", line 179, in iter_zip\r\n    z = zipfile.ZipFile(fobj)\r\n  File \"C:\\Program Files\\Python37\\lib\\zipfile.py\", line 1225, in __init__\r\n    self._RealGetContents()\r\n  File \"C:\\Program Files\\Python37\\lib\\zipfile.py\", line 1288, in _RealGetContents\r\n    endrec = _EndRecData(fp)\r\n  File \"C:\\Program Files\\Python37\\lib\\zipfile.py\", line 259, in _EndRecData\r\n    fpin.seek(0, 2)\r\n  File \"C:\\Users\\[username]\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow_core\\python\\util\\deprecation.py\", line 507, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"C:\\Users\\[username]\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow_core\\python\\lib\\io\\file_io.py\", line 167, in seek\r\n    offset += self.size()\r\n  File \"C:\\Users\\[username]\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow_core\\python\\lib\\io\\file_io.py\", line 102, in size\r\n    return stat(self.__name).length\r\n  File \"C:\\Users\\[username]\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow_core\\python\\lib\\io\\file_io.py\", line 727, in stat\r\n    return stat_v2(filename)\r\n  File \"C:\\Users\\[username]\\AppData\\Roaming\\Python\\Python37\\site-packages\\tensorflow_core\\python\\lib\\io\\file_io.py\", line 744, in stat_v2\r\n    pywrap_tensorflow.Stat(compat.as_bytes(path), file_statistics)\r\ntensorflow.python.framework.errors_impl.OutOfRangeError: C:\\Users\\[username]\\tensorflow_datasets\\downloads\\image-net.org_image_downs_Image_train_npzlCJjN-zBsDCdn80BZxJ6qtyTFYcDX7y1OSUjXtuuxPw.zip; Unknown error\r\n\r\nProcess finished with exit code 1\r\n```\r\n**Expected behavior**\r\nNo error"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35628", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35628/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35628/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35628/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35628", "id": 546101026, "node_id": "MDU6SXNzdWU1NDYxMDEwMjY=", "number": 35628, "title": "How many items does tf.gradients return?", "user": {"login": "sharvil", "id": 391004, "node_id": "MDQ6VXNlcjM5MTAwNA==", "avatar_url": "https://avatars1.githubusercontent.com/u/391004?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sharvil", "html_url": "https://github.com/sharvil", "followers_url": "https://api.github.com/users/sharvil/followers", "following_url": "https://api.github.com/users/sharvil/following{/other_user}", "gists_url": "https://api.github.com/users/sharvil/gists{/gist_id}", "starred_url": "https://api.github.com/users/sharvil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sharvil/subscriptions", "organizations_url": "https://api.github.com/users/sharvil/orgs", "repos_url": "https://api.github.com/users/sharvil/repos", "events_url": "https://api.github.com/users/sharvil/events{/privacy}", "received_events_url": "https://api.github.com/users/sharvil/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-01-07T06:14:15Z", "updated_at": "2020-01-31T08:10:38Z", "closed_at": null, "author_association": "NONE", "body": "Thank you for submitting a TensorFlow documentation issue. Per our GitHub\r\npolicy, we only address code/doc bugs, performance issues, feature requests, and\r\nbuild/installation issues on GitHub.\r\n\r\nThe TensorFlow docs are open source! To get involved, read the documentation\r\ncontributor guide: https://www.tensorflow.org/community/contribute/docs\r\n\r\n## URL(s) with the issue:\r\n\r\nPlease provide a link to the documentation entry, for example:\r\nhttps://www.tensorflow.org/api_docs/python/tf/gradients?version=stable\r\n\r\n## Description of issue (what needs changing):\r\nIt's unclear how many list items are returned from `tf.gradients`.\r\n\r\nThe second paragraph states that \"It returns a list of Tensor of length `len(xs)` where each tensor is the `sum(dy/dx)` for y in `ys`.\" The \"Returns\" section says, \"A list of `sum(dy/dx)` for each x in `xs`.\"\r\n\r\nSo... which one is it? `sum(dy/dx)` for x in `xs` or `sum(dy/dx)` for y in `ys`? Besides the inconsistency, the summation notation in this documentation is ambiguous. When it says \"`sum(dy/dx)` for x in `xs`\" does that mean `dy/dx` is summed over the `ys` axis and there is one element produced for each `xs` or the other way around?\r\n\r\nA clarifying example would help and a statement along the lines of \"returns a list of <whatever> with as many elements as `xs`\" (or `ys` -- I don't know).\r\n\r\n### Clear description\r\n\r\nFor example, why should someone use this method? How is it useful?\r\n\r\n### Correct links\r\n\r\nIs the link to the source code correct?\r\n\r\n### Parameters defined\r\n\r\nAre all parameters defined and formatted correctly?\r\n\r\n### Returns defined\r\n\r\nAre return values defined?\r\n\r\n### Raises listed and defined\r\n\r\nAre the errors defined? For example,\r\nhttps://www.tensorflow.org/versions/r2.0/api_docs/python/tf/feature_column/categorical_column_with_vocabulary_file#raises\r\n\r\n### Usage example\r\n\r\nIs there a usage example?\r\n\r\nSee the API guide: https://www.tensorflow.org/community/contribute/docs_ref\r\non how to write testable usage examples.\r\n\r\n### Request visuals, if applicable\r\n\r\nAre there currently visuals? If not, will it clarify the content?\r\n\r\n### Submit a pull request?\r\n\r\nAre you planning to also submit a pull request to fix the issue? See the docs\r\ncontributor guide: https://www.tensorflow.org/community/contribute/docs,\r\ndocs API guide: https://www.tensorflow.org/community/contribute/docs_ref and the\r\ndocs style guide: https://www.tensorflow.org/community/contribute/docs_style\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35625", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35625/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35625/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35625/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35625", "id": 546036103, "node_id": "MDU6SXNzdWU1NDYwMzYxMDM=", "number": 35625, "title": "RuntimeError: Invalid quantization params for op RESHAPE at index 36 in subgraph 0", "user": {"login": "conglanjun", "id": 13814880, "node_id": "MDQ6VXNlcjEzODE0ODgw", "avatar_url": "https://avatars1.githubusercontent.com/u/13814880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/conglanjun", "html_url": "https://github.com/conglanjun", "followers_url": "https://api.github.com/users/conglanjun/followers", "following_url": "https://api.github.com/users/conglanjun/following{/other_user}", "gists_url": "https://api.github.com/users/conglanjun/gists{/gist_id}", "starred_url": "https://api.github.com/users/conglanjun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/conglanjun/subscriptions", "organizations_url": "https://api.github.com/users/conglanjun/orgs", "repos_url": "https://api.github.com/users/conglanjun/repos", "events_url": "https://api.github.com/users/conglanjun/events{/privacy}", "received_events_url": "https://api.github.com/users/conglanjun/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2020-01-07T02:01:51Z", "updated_at": "2020-02-14T02:21:45Z", "closed_at": null, "author_association": "NONE", "body": "I download source code of SSD from github.com. I want to convert the model to run in edgetpu.\r\nWhen I convert saved model to tflite, then run 'edgetpu_compiler XXX.tflite' for running in tpu. But it tell me that not quantization, I change parameter for quantization.Such as \r\nconverter.target_ops = [tf.lite.OpsSet.TFLITE_BUILTINS_INT8], \r\nbut occur error: RuntimeError: Invalid quantization params for op RESHAPE at index 36 in subgraph 0\r\n\r\n**System information**\r\n\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04.6 LTS\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (or github SHA if from source):1.15\r\n\r\n\r\n**Command used to run the converter or code if you\u2019re using the Python API**\r\n\r\n```\r\nimport tensorflow as tf\r\nfrom PIL import Image\r\nimport numpy as np\r\n\r\nckpt_filename = '/home/lanjunc/python_project/SSD-Tensorflow/convert/model'\r\n\r\nimg = Image.open('./dog.jpg')\r\nimg = img.resize((300, 300))\r\ninput_data = np.array(img, dtype=np.float32)\r\ndef representative_dataset_gen():\r\n    for i in range(1):\r\n        yield [input_data]\r\n\r\n\r\nconverter = tf.lite.TFLiteConverter.from_saved_model(ckpt_filename,\r\n                                                     # tag_set=['test_saved_model1'], signature_key='signature_test1',\r\n                                                     input_shapes={\"Placeholder\":[300,300,3]})\r\n\r\nconverter.optimizations = [tf.lite.Optimize.DEFAULT]  # DEFAULT, OPTIMIZE_FOR_SIZE, OPTIMIZE_FOR_LATENCY\r\n\r\nconverter.target_ops = [tf.lite.OpsSet.TFLITE_BUILTINS_INT8, tf.lite.OpsSet.TFLITE_BUILTINS, tf.lite.OpsSet.SELECT_TF_OPS]\r\n# converter.target_spec.supported_ops = [\r\n#                                        tf.lite.OpsSet.SELECT_TF_OPS]\r\n#\r\nconverter.inference_input_type = tf.uint8\r\nconverter.inference_output_type = tf.uint8\r\nconverter.representative_dataset = representative_dataset_gen\r\n\r\ntflite_model = converter.convert()\r\n\r\nopen(\"converted_model.tflite\", \"wb\").write(tflite_model)\r\n```\r\n\r\n**The output from the converter invocation**\r\n\r\n```\r\nRuntimeError: Invalid quantization params for op RESHAPE at index 36 in subgraph 0\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35617", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35617/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35617/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35617/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35617", "id": 545893938, "node_id": "MDU6SXNzdWU1NDU4OTM5Mzg=", "number": 35617, "title": "erfcx special function", "user": {"login": "cossio", "id": 10637482, "node_id": "MDQ6VXNlcjEwNjM3NDgy", "avatar_url": "https://avatars2.githubusercontent.com/u/10637482?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cossio", "html_url": "https://github.com/cossio", "followers_url": "https://api.github.com/users/cossio/followers", "following_url": "https://api.github.com/users/cossio/following{/other_user}", "gists_url": "https://api.github.com/users/cossio/gists{/gist_id}", "starred_url": "https://api.github.com/users/cossio/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cossio/subscriptions", "organizations_url": "https://api.github.com/users/cossio/orgs", "repos_url": "https://api.github.com/users/cossio/repos", "events_url": "https://api.github.com/users/cossio/events{/privacy}", "received_events_url": "https://api.github.com/users/cossio/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-01-06T19:21:49Z", "updated_at": "2020-02-26T07:58:42Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 2.0\r\n- Are you willing to contribute it (Yes/No): -\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nI would like to see the `erfcx(x) = exp(x**2) * erfc(x)` function (e.g., `scipy.special.erfcx`) implemented in Tensorflow. The naive implementation `exp(x**2) * erfc(x)` fails for large `x`.\r\n\r\nThis is useful when one needs to work with truncated normal distributions. \r\n\r\n`erfcx` is available in many numerical packages, such as [Matlab](https://www.mathworks.com/help/matlab/ref/erfcx.html), [Julia](https://juliamath.github.io/SpecialFunctions.jl/latest/functions_list/#SpecialFunctions.erfcx), [SciPy](https://docs.scipy.org/doc/scipy/reference/generated/scipy.special.erfcx.html) [R](https://www.rdocumentation.org/packages/pracma/versions/1.9.9/topics/erf), and others.\r\n\r\nAn alternative is to implement `log_erfc(x) = log(erfc(x))`, from which one can obtain `erfcx(x)` accurately. The function `log_erfc(x)` is implemented in [GSL](https://github.com/ampl/gsl/blob/644e768630841bd085cb7121085a688c4ff424d0/specfunc/erfc.c#L441).\r\n\r\n**Who will benefit with this feature?**\r\n\r\nAnyone working with truncated normal distributions.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35608", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35608/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35608/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35608/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35608", "id": 545738772, "node_id": "MDU6SXNzdWU1NDU3Mzg3NzI=", "number": 35608, "title": "Beginner models", "user": {"login": "generationzcode", "id": 43435971, "node_id": "MDQ6VXNlcjQzNDM1OTcx", "avatar_url": "https://avatars2.githubusercontent.com/u/43435971?v=4", "gravatar_id": "", "url": "https://api.github.com/users/generationzcode", "html_url": "https://github.com/generationzcode", "followers_url": "https://api.github.com/users/generationzcode/followers", "following_url": "https://api.github.com/users/generationzcode/following{/other_user}", "gists_url": "https://api.github.com/users/generationzcode/gists{/gist_id}", "starred_url": "https://api.github.com/users/generationzcode/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/generationzcode/subscriptions", "organizations_url": "https://api.github.com/users/generationzcode/orgs", "repos_url": "https://api.github.com/users/generationzcode/repos", "events_url": "https://api.github.com/users/generationzcode/events{/privacy}", "received_events_url": "https://api.github.com/users/generationzcode/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}, {"id": 1093464312, "node_id": "MDU6TGFiZWwxMDkzNDY0MzEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:others", "name": "type:others", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-01-06T13:54:26Z", "updated_at": "2020-02-07T22:29:59Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using):2.0\r\n- Are you willing to contribute it (Yes/No):Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nperfectly normal\r\n**Will this change the current api? How?**\r\nYes. The beginner models can be a different api in tensorflow itself. Like `tf.BeginnerModel`.\r\n**Who will benefit with this feature?**\r\nBeginners in machine learning who want to write less code and acheive a lot\r\n**Any Other info.**\r\nThis will make it easier to use tensorflow as a beginner"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35594", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35594/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35594/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35594/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35594", "id": 545481839, "node_id": "MDU6SXNzdWU1NDU0ODE4Mzk=", "number": 35594, "title": "[sparkfun-tensorflow-codelab] - Update Code", "user": {"login": "GantMan", "id": 997157, "node_id": "MDQ6VXNlcjk5NzE1Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/997157?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GantMan", "html_url": "https://github.com/GantMan", "followers_url": "https://api.github.com/users/GantMan/followers", "following_url": "https://api.github.com/users/GantMan/following{/other_user}", "gists_url": "https://api.github.com/users/GantMan/gists{/gist_id}", "starred_url": "https://api.github.com/users/GantMan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GantMan/subscriptions", "organizations_url": "https://api.github.com/users/GantMan/orgs", "repos_url": "https://api.github.com/users/GantMan/repos", "events_url": "https://api.github.com/users/GantMan/events{/privacy}", "received_events_url": "https://api.github.com/users/GantMan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-05T23:26:38Z", "updated_at": "2020-01-06T13:07:28Z", "closed_at": null, "author_association": "NONE", "body": "The codelab still links to the experimental folder for the makefile, which is incorrect.\r\n\r\nVisual:\r\n![image](https://user-images.githubusercontent.com/997157/71787651-3bc27180-2fe0-11ea-8318-424dc887efc5.png)\r\n\r\nUpdate the codelab at this link https://codelabs.developers.google.com/codelabs/sparkfun-tensorflow/#3\r\n\r\nCode should read:\r\n```\r\nmake -f tensorflow/lite/micro/tools/make/Makefile \\                                    \r\nTARGET=sparkfun_edge micro_speech_bin\r\n```\r\n\r\n## URL(s) with the issue:\r\nhttps://codelabs.developers.google.com/codelabs/sparkfun-tensorflow/#3\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35592", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35592/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35592/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35592/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35592", "id": 545462913, "node_id": "MDU6SXNzdWU1NDU0NjI5MTM=", "number": 35592, "title": "Unable to build hello_world for sparkfun_edge", "user": {"login": "vanti", "id": 1307572, "node_id": "MDQ6VXNlcjEzMDc1NzI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1307572?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vanti", "html_url": "https://github.com/vanti", "followers_url": "https://api.github.com/users/vanti/followers", "following_url": "https://api.github.com/users/vanti/following{/other_user}", "gists_url": "https://api.github.com/users/vanti/gists{/gist_id}", "starred_url": "https://api.github.com/users/vanti/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vanti/subscriptions", "organizations_url": "https://api.github.com/users/vanti/orgs", "repos_url": "https://api.github.com/users/vanti/repos", "events_url": "https://api.github.com/users/vanti/events{/privacy}", "received_events_url": "https://api.github.com/users/vanti/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rockyrhodes", "id": 7253968, "node_id": "MDQ6VXNlcjcyNTM5Njg=", "avatar_url": "https://avatars2.githubusercontent.com/u/7253968?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rockyrhodes", "html_url": "https://github.com/rockyrhodes", "followers_url": "https://api.github.com/users/rockyrhodes/followers", "following_url": "https://api.github.com/users/rockyrhodes/following{/other_user}", "gists_url": "https://api.github.com/users/rockyrhodes/gists{/gist_id}", "starred_url": "https://api.github.com/users/rockyrhodes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rockyrhodes/subscriptions", "organizations_url": "https://api.github.com/users/rockyrhodes/orgs", "repos_url": "https://api.github.com/users/rockyrhodes/repos", "events_url": "https://api.github.com/users/rockyrhodes/events{/privacy}", "received_events_url": "https://api.github.com/users/rockyrhodes/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rockyrhodes", "id": 7253968, "node_id": "MDQ6VXNlcjcyNTM5Njg=", "avatar_url": "https://avatars2.githubusercontent.com/u/7253968?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rockyrhodes", "html_url": "https://github.com/rockyrhodes", "followers_url": "https://api.github.com/users/rockyrhodes/followers", "following_url": "https://api.github.com/users/rockyrhodes/following{/other_user}", "gists_url": "https://api.github.com/users/rockyrhodes/gists{/gist_id}", "starred_url": "https://api.github.com/users/rockyrhodes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rockyrhodes/subscriptions", "organizations_url": "https://api.github.com/users/rockyrhodes/orgs", "repos_url": "https://api.github.com/users/rockyrhodes/repos", "events_url": "https://api.github.com/users/rockyrhodes/events{/privacy}", "received_events_url": "https://api.github.com/users/rockyrhodes/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-05T20:28:35Z", "updated_at": "2020-01-07T05:14:45Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: a2cf331a2073d6f5e9a52802cbc2809f9e2667b8\r\n- Python version: Python 3.6.8\r\n- Installed using virtualenv? pip? conda?:\r\n- Bazel version (if compiling from source): 0.29.1\r\n- GCC/Compiler version (if compiling from source): arm-none-eabi-gcc (15:6.3.1+svn253039-1build1) 6.3.1 20170620\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n\r\n\r\n**Describe the problem**\r\nI am unable to build hello_world for sparkfun_edge.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nI followed the instructions on https://www.tensorflow.org/lite/microcontrollers/library\r\nand issued the command:\r\n`make -f tensorflow/lite/micro/tools/make/Makefile TARGET=sparkfun_edge hello_world_bin`\r\n\r\nThis results in the following build error:\r\n```\r\narm-none-eabi-ar: creating tensorflow/lite/micro/tools/make/gen/sparkfun_edge_cortex-m4/lib/libtensorflow-microlite.a\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -fno-rtti -DPART_apollo3 -DAM_PACKAGE_BGA -DAM_PART_APOLLO3 -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DNDEBUG -DTF_LITE_MCU_DEBUG_LOG -D __FPU_PRESENT=1 -DARM_MATH_CM4 -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m4 -mthumb -mfpu=fpv4-sp-d16 -mfloat-abi=hard -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -ggdb -O3 -I. -Itensorflow/lite/micro/tools/make/downloads/ -Itensorflow/lite/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -isystemtensorflow/lite/micro/tools/make/downloads/cmsis/CMSIS/DSP/Include/ -Itensorflow/lite/micro/tools/make/downloads/CMSIS_ext/ -Itensorflow/lite/micro/tools/make/downloads/gcc_embedded//arm-none-eabi/ -Itensorflow/lite/micro/tools/make/downloads/AmbiqSuite-Rel2.0.0/mcu/apollo3/ -Itensorflow/lite/micro/tools/make/downloads/AmbiqSuite-Rel2.0.0/CMSIS/AmbiqMicro/Include/ -Itensorflow/lite/micro/tools/make/downloads/AmbiqSuite-Rel2.0.0/boards/SparkFun_TensorFlow_Apollo3_BSP/bsp -Itensorflow/lite/micro/tools/make/downloads/AmbiqSuite-Rel2.0.0/devices/ -Itensorflow/lite/micro/tools/make/downloads/AmbiqSuite-Rel2.0.0/utils/ -Itensorflow/lite/micro/tools/make/downloads/kissfft -Itensorflow/lite/micro/tools/make/downloads/AmbiqSuite-Rel2.0.0/boards/SparkFun_TensorFlow_Apollo3_BSP/examples/example1_edge_test/src/tf_accelerometer/ -Itensorflow/lite/micro/tools/make/downloads/AmbiqSuite-Rel2.0.0/boards/SparkFun_TensorFlow_Apollo3_BSP/examples/example1_edge_test/src/tf_adc/ -o tensorflow/lite/micro/tools/make/gen/sparkfun_edge_cortex-m4/bin/hello_world tensorflow/lite/micro/tools/make/gen/sparkfun_edge_cortex-m4/obj/tensorflow/lite/micro/examples/hello_world/main.o tensorflow/lite/micro/tools/make/gen/sparkfun_edge_cortex-m4/obj/tensorflow/lite/micro/examples/hello_world/main_functions.o tensorflow/lite/micro/tools/make/gen/sparkfun_edge_cortex-m4/obj/tensorflow/lite/micro/examples/hello_world/sine_model_data.o tensorflow/lite/micro/tools/make/gen/sparkfun_edge_cortex-m4/obj/tensorflow/lite/micro/examples/hello_world/sparkfun_edge/output_handler.o tensorflow/lite/micro/tools/make/gen/sparkfun_edge_cortex-m4/obj/tensorflow/lite/micro/examples/hello_world/sparkfun_edge/constants.o  tensorflow/lite/micro/tools/make/gen/sparkfun_edge_cortex-m4/lib/libtensorflow-microlite.a -mthumb -mcpu=cortex-m4 -mfpu=fpv4-sp-d16 -mfloat-abi=hard -nostartfiles -static -Wl,--gc-sections -Wl,--entry,Reset_Handler -Wl,--start-group -lm -lc -lgcc -Wl,--end-group -fno-exceptions -nostdlib --specs=nano.specs -t -lstdc++ -lc -lnosys -lm -Wl,-T,tensorflow/lite/micro/tools/make/downloads/AmbiqSuite-Rel2.0.0/boards/apollo3_evb/examples/hello_world/gcc_patched/apollo3evb.ld -Wl,-Map=tensorflow/lite/micro/tools/make/gen/sparkfun_edge.map,--cref tensorflow/lite/micro/tools/make/downloads/AmbiqSuite-Rel2.0.0/boards/SparkFun_TensorFlow_Apollo3_BSP/bsp/gcc/bin/libam_bsp.a tensorflow/lite/micro/tools/make/downloads/AmbiqSuite-Rel2.0.0/mcu/apollo3/hal/gcc/bin/libam_hal.a tensorflow/lite/micro/tools/make/downloads/gcc_embedded//lib/gcc/arm-none-eabi/7.3.1/thumb/v7e-m/fpv4-sp/hard/crtbegin.o -lm\r\narm-none-eabi-g++: error: tensorflow/lite/micro/tools/make/downloads/gcc_embedded//lib/gcc/arm-none-eabi/7.3.1/thumb/v7e-m/fpv4-sp/hard/crtbegin.o: No such file or directory\r\ntensorflow/lite/micro/examples/hello_world/Makefile.inc:41: recipe for target 'tensorflow/lite/micro/tools/make/gen/sparkfun_edge_cortex-m4/bin/hello_world' failed\r\nmake: *** [tensorflow/lite/micro/tools/make/gen/sparkfun_edge_cortex-m4/bin/hello_world] Error 1\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35591", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35591/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35591/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35591/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35591", "id": 545453422, "node_id": "MDU6SXNzdWU1NDU0NTM0MjI=", "number": 35591, "title": "GPU memory on Bahdanau Attention", "user": {"login": "arthurflor23", "id": 11759042, "node_id": "MDQ6VXNlcjExNzU5MDQy", "avatar_url": "https://avatars0.githubusercontent.com/u/11759042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arthurflor23", "html_url": "https://github.com/arthurflor23", "followers_url": "https://api.github.com/users/arthurflor23/followers", "following_url": "https://api.github.com/users/arthurflor23/following{/other_user}", "gists_url": "https://api.github.com/users/arthurflor23/gists{/gist_id}", "starred_url": "https://api.github.com/users/arthurflor23/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arthurflor23/subscriptions", "organizations_url": "https://api.github.com/users/arthurflor23/orgs", "repos_url": "https://api.github.com/users/arthurflor23/repos", "events_url": "https://api.github.com/users/arthurflor23/events{/privacy}", "received_events_url": "https://api.github.com/users/arthurflor23/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2020-01-05T18:58:37Z", "updated_at": "2020-02-08T01:08:40Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\nGoogle Colab system (GPU mode) with TensorFlow 2.1-rc2 and Python 3.\r\n\r\n**Describe the current behavior**\r\nBahdanau attention get a lot gpu memory, it's right? Even bahdanau attention using concatenation approach, Luong attention get 2.5gb of memory while bahdanau over 15gb. (using scale=False, batch_size=128, units=512 both)\r\n\r\n**Describe the expected behavior**\r\nTo use less memory\r\n\r\n**Code to reproduce the issue**\r\nThe model detail is [here](https://drive.google.com/open?id=170KpjIGFmNNt-SS-6oXgVbRnZR4-7ah_) (the same of this issue https://github.com/tensorflow/tensorflow/issues/35553)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35587", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35587/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35587/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35587/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35587", "id": 545361433, "node_id": "MDU6SXNzdWU1NDUzNjE0MzM=", "number": 35587, "title": "Looking to install 1.15 C++ ", "user": {"login": "DaveBGld", "id": 16646702, "node_id": "MDQ6VXNlcjE2NjQ2NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16646702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DaveBGld", "html_url": "https://github.com/DaveBGld", "followers_url": "https://api.github.com/users/DaveBGld/followers", "following_url": "https://api.github.com/users/DaveBGld/following{/other_user}", "gists_url": "https://api.github.com/users/DaveBGld/gists{/gist_id}", "starred_url": "https://api.github.com/users/DaveBGld/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DaveBGld/subscriptions", "organizations_url": "https://api.github.com/users/DaveBGld/orgs", "repos_url": "https://api.github.com/users/DaveBGld/repos", "events_url": "https://api.github.com/users/DaveBGld/events{/privacy}", "received_events_url": "https://api.github.com/users/DaveBGld/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-01-05T03:08:22Z", "updated_at": "2020-03-18T14:45:41Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: NO\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 1.15.0\r\n- Python version: 3.6.9\r\n- Installed using virtualenv? pip? conda?: virtualenv\r\n- Bazel version (if compiling from source): 0.26.1\r\n- GCC/Compiler version (if compiling from source): 7.4.0\r\n- CUDA/cuDNN version: 10.0.326\r\n- GPU model and memory: 1080ti 11MB\r\n\r\n**Describe the problem**\r\n\r\nBuild command:\r\n\r\n`bazel build -c opt --jobs 32 --copt=-mavx --copt=-mavx2 --copt=-mfma --copt=-mfpmath=both --copt=-msse4.1 --copt=-msse4.2 -k //tensorflow/tools/pip_package:build_pip_package --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" --define=grpc_no_ares=true\r\n`\r\n\r\nCompleted the build with bazel, and want to produce the libraries and includes to install in my system, but I'm unable to find anywhere ()many years experience with CMAKE, 0 with bazel).\r\n\r\nI found [https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/lib_package/README.md](url) for C (NOT what I'm looking for but wanted to get started with something..), and ran the command instructed there\r\n\r\n`bazel test --config opt //tensorflow/tools/lib_package:libtensorflow_test`\r\n\r\nBut returns \r\n\r\n`ERROR: Config value opt is not defined in any .rc file`\r\n\r\nBut the real question is how do I install tensorflow 1.15 C++ \r\n\r\nMany thanks!!\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35585", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35585/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35585/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35585/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35585", "id": 545339143, "node_id": "MDU6SXNzdWU1NDUzMzkxNDM=", "number": 35585, "title": "Difference in training accuracy and loss using gradientTape vs model.fit with binary_accuracy: A bug?", "user": {"login": "amjass12", "id": 33659783, "node_id": "MDQ6VXNlcjMzNjU5Nzgz", "avatar_url": "https://avatars1.githubusercontent.com/u/33659783?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amjass12", "html_url": "https://github.com/amjass12", "followers_url": "https://api.github.com/users/amjass12/followers", "following_url": "https://api.github.com/users/amjass12/following{/other_user}", "gists_url": "https://api.github.com/users/amjass12/gists{/gist_id}", "starred_url": "https://api.github.com/users/amjass12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amjass12/subscriptions", "organizations_url": "https://api.github.com/users/amjass12/orgs", "repos_url": "https://api.github.com/users/amjass12/repos", "events_url": "https://api.github.com/users/amjass12/events{/privacy}", "received_events_url": "https://api.github.com/users/amjass12/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2020-01-04T22:16:47Z", "updated_at": "2020-02-20T23:31:42Z", "closed_at": null, "author_association": "NONE", "body": "Hi all, \r\n\r\nI am running a training loop using gradientTape which works well, however I am getting different training accuracy metrics when training using the gradientTape loop vs a straight model.fit method. I apologise if this should be a question for stack overflow, however, to the best of my knowledge the parameters are the same and therefore should be producing exactly the same results (or very close at least).. I therefore think there may be a bug and if any one can help me elucidate this i would really appreciate it!\r\n\r\nI have prepared a sequential model as follows:\r\n\r\n```\r\nmodel=tf.keras.models.Sequential()\r\nmodel.add(tf.keras.layers.Dense(units=64, input_dim=5078, activation=\"relu\"))\r\nmodel.add(tf.keras.layers.Dense(units=32, activation=\"relu\"))\r\nmodel.add(tf.keras.layers.Dense(units=100, activation=\"relu\"))\r\nmodel.add(tf.keras.layers.Dense(units=24, activation=\"sigmoid\"))\r\n```\r\nand for the ` model.fit` method, fit as follows:\r\n\r\n```\r\nmodel.compile(optimizer=\"Adam\", loss=\"binary_crossentropy\", metrics=[\"acc\"])\r\n\r\nmodel.fit(X_train, y_train,\r\n batch_size=32,\r\n epochs=100, verbose=1,\r\n validation_split=0.15,\r\n shuffle=True)\r\n```\r\nThis works well and produces the following results (please note 100 epochs is overkill and the model overfits, however this is just to keep the same epochs as the as the gradientTape loop, otherwise there would be an early-stopping callback normally...\r\n\r\nThe model metrics are as follows:\r\n\r\n```\r\n 32/119 [=======>......................] - ETA: 0s - loss: 0.0699 - acc: 0.9753\r\n119/119 [==============================] - 0s 168us/sample - **loss: 0.0668** - acc: **0.9779** - val_loss: **0.2350** - val_acc: **0.9048**\r\n```\r\n\r\nThis is the expected behaviour (minus the overfitting)... Now when I create the gradientTape loop as follows, the accuracy metrics are of by about ~4-5% during the same 100 epochs, and the reason i suspect a bug is because i believe i am using the appropriate metrics:\r\n\r\n```\r\ndef random_batch(X,y, batch_size=32):\r\n    idx= np.random.randint(len(X), size=batch_size)\r\n    return X[idx], y[idx]\r\n\r\n##Further split train data to training set and validation set\r\n\r\nX_train, X_val, y_train, y_val = train_test_split(\r\n    X_train, y_train, test_size=0.15, random_state=1)\r\n\r\n```\r\n\r\n```\r\n##Run autodiff on model\r\n\r\nn_epochs=100\r\nbatch_size=32\r\nn_steps=len(X_train)//batch_size\r\n\r\noptimizer=tf.keras.optimizers.Adam()\r\nloss=tf.keras.losses.BinaryCrossentropy()\r\n\r\nmetricLoss=tf.keras.metrics.BinaryCrossentropy()\r\nmetricsAcc=tf.keras.metrics.BinaryAccuracy()\r\n\r\nval_acc_metric=tf.keras.metrics.BinaryAccuracy()\r\nval_acc_loss=tf.keras.metrics.BinaryCrossentropy()\r\n\r\n\r\ntrain_loss_results = []\r\ntrain_accuracy_results = []\r\n\r\nvalidation_loss_results = []\r\nvalidation_accuracy_results = []\r\n\r\n# for loop iterate over epochs\r\nfor epoch in range(n_epochs):\r\n\r\n    print(\"Epoch {}/{}\".format(epoch, n_epochs))\r\n\r\n    # for loop iterate over batches\r\n    for step in range(1, n_steps + 1):\r\n        X_batch, y_batch=random_batch(X_train.values, y_train)\r\n\r\n        # gradientTape autodiff\r\n        with tf.GradientTape() as tape:\r\n            y_pred=model(X_batch, training=True)\r\n            loss_values=loss(y_batch, y_pred)\r\n        gradients=tape.gradient(loss_values, model.trainable_weights)\r\n        optimizer.apply_gradients(zip(gradients, model.trainable_weights))\r\n\r\n        metricLoss(y_batch, y_pred)\r\n        metricsAcc.update_state(y_batch, y_pred)\r\n\r\n        # Loss and accuracy\r\n        train_loss_results.append(loss_values)\r\n        train_accuracy_results.append(metricsAcc.result())\r\n\r\n        # Read out training results\r\n        readout = 'Epoch {}, Training loss: {}, Training accuracy: {}'\r\n        print(readout.format(epoch + 1, loss_values,\r\n                              metricsAcc.result() * 100))\r\n\r\n        metricsAcc.reset_states\r\n\r\n        # Run a validation loop at the end of each epoch\r\n\r\n    for valbatch in range(1+ n_steps +1):\r\n        X_batchVal, y_batchVal = random_batch(X_val.values, y_val)\r\n\r\n        val_logits = model(X_batchVal)\r\n        # Update val metrics\r\n        val_acc_metric(y_batchVal, val_logits)\r\n        val_acc = val_acc_metric.result()\r\n\r\n        val_acc_metric.update_state(y_batchVal, val_logits)\r\n\r\n        val_loss=val_acc_loss(y_batchVal, val_logits)\r\n\r\n        validation_loss_results.append(val_loss)\r\n        validation_accuracy_results.append(val_acc_metric.result())\r\n\r\n        # Read out validation results\r\n        print( 'Validation loss: ' , float(val_loss),'Validation acc: %s' % (float(val_acc * 100),) )\r\n\r\n        val_acc_metric.reset_states()\r\n```\r\n\r\nWhen i run this code, it works fine, and the iterations update the states of the accuracy and loss: however, the training accuracy is much lower than the model.fit method, after running also for 100 epochs: showing final epoch result that is printed (each same epoch is iterating over each batch):\r\n\r\nEpoch 100, Training loss: 0.027735430747270584, Training accuracy: 93.6534423828125\r\nEpoch 100, Training loss: 0.03832387551665306, Training accuracy: 93.67249298095703\r\n**Epoch 100, Training loss: 0.035500235855579376, Training accuracy: 93.69097900390625**\r\nValidation loss:  0.3204055726528168 Validation acc: 90.36458587646484\r\nValidation loss:  0.32066160440444946 Validation acc: 89.71354675292969\r\nValidation loss:  0.32083287835121155 Validation acc: 90.49479675292969\r\nValidation loss:  0.3209479749202728 Validation acc: 90.10416412353516\r\n**Validation loss:  0.32088229060173035 Validation acc: 90.625**\r\n\r\nAs you can see,  the training accuracy is ~4-5% lower compared to the model.fit method. The loss records fine, and also, the validation data looks pretty much just like the validation data in the model.fit method. \r\n\r\nAdditionally, when i plot accuracy and loss in both model.fit and geadientTape methods, the shape of the curves look pretty much the same, and they both begin to overfit at similar points! but again, there is a huge discrepancy in the training accuracy. \r\n\r\nI have specified the adam optimizer as well binary_crossentropy loss in model.fit and gradientTape. For model.fit, when I specific 'accuracy' or 'acc' for metrics, my understanding is that it will call on the binary_accuracy for calculating the accuracy. So as far as I am aware the parameters are similar that results should be fairly similar. \r\n\r\nAdditionally, when i call` model.compile` after training the model with `gradientTape` just to confirm evaluation, the results are slightly different again and look more like the model.fit method:\r\n\r\n```\r\n**Training**\r\nmodel.compile(optimizer=optimizer, loss=tf.keras.losses.binary_crossentropy, metrics=['acc'])\r\nprint('\\n', model.evaluate(X_train, y_train, verbose=1)[1])\r\n\r\n32/101 [========>.....................] - ETA: 0s - loss: 0.0336 - acc: 0.9948\r\n101/101 [==============================] - 0s 307us/sample - **loss: 0.0330 - acc: 0.9942**\r\n\r\n**Validation**\r\nmodel.compile(optimizer=optimizer, loss=tf.keras.losses.binary_crossentropy, metrics=['acc'])\r\nprint('\\n', model.evaluate(X_val, y_val, verbose=1)[1])\r\n\r\n18/18 [==============================] - 0s 111us/sample - **loss: 0.3879 - acc: 0.9028**\r\n```\r\n\r\nNow model.evaluate shows a loss and accuracy that are very similar to the model.fit method when i call evaluate on X_train and y_train. This is why i am suspect of a bug? Interestingly, the model.evaluate on validation data look similar to the gradientTape loop which leaves me really confused as i am therefore unsure of the true training accuracy and loss!\r\n\r\nIf anyone can help i would really appreciate this... I am happy to provide further code upstream of the model etc.. Again, apologies if this is not a bug but this seems really confusing to me like an incorrect behaviour...\r\n\r\n\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35583", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35583/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35583/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35583/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35583", "id": 545297824, "node_id": "MDU6SXNzdWU1NDUyOTc4MjQ=", "number": 35583, "title": "TensorRT 6.0.1 performs worse than TensorRT 5.1.6 on Jetson AGX Xavier", "user": {"login": "doruksonmez", "id": 24845205, "node_id": "MDQ6VXNlcjI0ODQ1MjA1", "avatar_url": "https://avatars0.githubusercontent.com/u/24845205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/doruksonmez", "html_url": "https://github.com/doruksonmez", "followers_url": "https://api.github.com/users/doruksonmez/followers", "following_url": "https://api.github.com/users/doruksonmez/following{/other_user}", "gists_url": "https://api.github.com/users/doruksonmez/gists{/gist_id}", "starred_url": "https://api.github.com/users/doruksonmez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/doruksonmez/subscriptions", "organizations_url": "https://api.github.com/users/doruksonmez/orgs", "repos_url": "https://api.github.com/users/doruksonmez/repos", "events_url": "https://api.github.com/users/doruksonmez/events{/privacy}", "received_events_url": "https://api.github.com/users/doruksonmez/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1754777628, "node_id": "MDU6TGFiZWwxNzU0Nzc3NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu:tensorrt", "name": "comp:gpu:tensorrt", "color": "ea98ba", "default": false, "description": "Issues specific to TensorRT"}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, {"login": "pooyadavoodi", "id": 7076961, "node_id": "MDQ6VXNlcjcwNzY5NjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/7076961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pooyadavoodi", "html_url": "https://github.com/pooyadavoodi", "followers_url": "https://api.github.com/users/pooyadavoodi/followers", "following_url": "https://api.github.com/users/pooyadavoodi/following{/other_user}", "gists_url": "https://api.github.com/users/pooyadavoodi/gists{/gist_id}", "starred_url": "https://api.github.com/users/pooyadavoodi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pooyadavoodi/subscriptions", "organizations_url": "https://api.github.com/users/pooyadavoodi/orgs", "repos_url": "https://api.github.com/users/pooyadavoodi/repos", "events_url": "https://api.github.com/users/pooyadavoodi/events{/privacy}", "received_events_url": "https://api.github.com/users/pooyadavoodi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-04T15:33:32Z", "updated_at": "2020-02-17T20:25:27Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Jetpack 4.3 (L4T 32.3.1 Ubuntu 18.04)\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): Nvidia Official Wheel\r\n- TensorFlow version (use command below): 1.13.1 & 1.15.0\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 10.0.326 / 7.5.0 & 7.6.3\r\n- GPU model and memory: Tegra Xavier 16 GB\r\n\r\n**Describe the current behavior**\r\nI am currently trying some examples within from docker containers on new release of Jetpack (4.3). I wanted to do some benchmarkings and compare TensorRT 6.0.1 and cuDNN 7.6.3 versions with the old ones (5.1.6 and 7.5.0 respectively). I have some issues regarding to this as follows;\r\n\r\n1. **24 FPS** with --> protobuf=3.6.1, tensorflow-gpu=1.13.1+nv19.3, tensorrt=5.1.6, cudnn=7.5.0 opencv=3.3.1\r\n2. **9.6 FPS** with --> protobuf=3.8.0, tensorflow-gpu=1.15.0+nv19.11, tensorrt=6.0.1, cudnn=7.6.3, opencv=4.1.1\r\n3. **8.5 FPS** with --> protobuf=3.6.1, tensorflow-gpu=1.15.0+nv19.11, tensorrt=6.0.1, cudnn=7.6.3, opencv=4.1.1\r\n4. **6.5 FPS** with --> protobuf=3.6.1, tensorflow-gpu=1.15.0+nv19.11, tensorrt=5.1.6, cudnn=7.5.0, opencv=3.4.6\r\n\r\n**Describe the expected behavior**\r\nImproved inference performance (above 24 FPS) with the new versions of Tensorflow, cuDNN and TensorRT\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\nhttps://github.com/jkjung-avt/tf_trt_models --> `python3 camera_tf_trt.py --usb --model ssd_mobilenet_v1_coco --build`\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nI've created a [topic](https://devtalk.nvidia.com/default/topic/1069238/jetson-agx-xavier/tensorrt-6-0-1-performs-worse-than-tensorrt-5-1-6-on-jetson-agx-xavier/) on Nvidia DevTalk forum and here is the answer I got from Nvidia people: [DevTalk forum comment](https://devtalk.nvidia.com/default/topic/1069238/jetson-agx-xavier/tensorrt-6-0-1-performs-worse-than-tensorrt-5-1-6-on-jetson-agx-xavier/post/5416335/#5416335)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35582", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35582/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35582/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35582/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35582", "id": 545295571, "node_id": "MDU6SXNzdWU1NDUyOTU1NzE=", "number": 35582, "title": "Tensorflow 1.14.0 can not be built from source on Nvidia Jetson", "user": {"login": "doruksonmez", "id": 24845205, "node_id": "MDQ6VXNlcjI0ODQ1MjA1", "avatar_url": "https://avatars0.githubusercontent.com/u/24845205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/doruksonmez", "html_url": "https://github.com/doruksonmez", "followers_url": "https://api.github.com/users/doruksonmez/followers", "following_url": "https://api.github.com/users/doruksonmez/following{/other_user}", "gists_url": "https://api.github.com/users/doruksonmez/gists{/gist_id}", "starred_url": "https://api.github.com/users/doruksonmez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/doruksonmez/subscriptions", "organizations_url": "https://api.github.com/users/doruksonmez/orgs", "repos_url": "https://api.github.com/users/doruksonmez/repos", "events_url": "https://api.github.com/users/doruksonmez/events{/privacy}", "received_events_url": "https://api.github.com/users/doruksonmez/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2020-01-04T15:12:38Z", "updated_at": "2020-01-26T02:26:41Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: L4T 32.3.1 Ubuntu 18.04\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\n- **TensorFlow installed from (source or binary)**: Source\r\n- **TensorFlow version (use command below)**: 1.14.0\r\n- **Python version**: 3.6\r\n- **Bazel version (if compiling from source)**: 0.24.1\r\n- **GCC/Compiler version (if compiling from source)**: GCC 7.4\r\n- **CUDA/cuDNN version**: 10.0.326 / 7.6.3\r\n- **GPU model and memory**: Tegra Xavier / 16 GB\r\n- **Exact command to reproduce**: \r\n```\r\nexport TMP=/tmp\r\nPYTHON_BIN_PATH=$(which python3) \\\r\nPYTHON_LIB_PATH=$(python3 -c 'import site; print(site.getsitepackages()[0])') \\\r\nTF_CUDA_COMPUTE_CAPABILITIES=${cuda_compute} \\\r\nTF_CUDA_VERSION=10.0 \\\r\nTF_CUDA_CLANG=0 \\\r\nTF_CUDNN_VERSION=7 \\\r\nTF_TENSORRT_VERSION=${trt_version} \\\r\nCUDA_TOOLKIT_PATH=/usr/local/cuda \\\r\nCUDNN_INSTALL_PATH=/usr/lib/aarch64-linux-gnu \\\r\nTENSORRT_INSTALL_PATH=/usr/lib/aarch64-linux-gnu \\\r\nTF_NEED_IGNITE=0 \\\r\nTF_ENABLE_XLA=0 \\\r\nTF_NEED_OPENCL_SYCL=0 \\\r\nTF_NEED_COMPUTECPP=0 \\\r\nTF_NEED_ROCM=0 \\\r\nTF_NEED_CUDA=1 \\\r\nTF_NEED_TENSORRT=1 \\\r\nTF_NEED_OPENCL=0 \\\r\nTF_NEED_MPI=0 \\\r\nGCC_HOST_COMPILER_PATH=$(which gcc) \\\r\nCC_OPT_FLAGS=\"-march=native\" \\\r\nTF_SET_ANDROID_WORKSPACE=0 \\\r\n    ./configure\r\n```\r\n```\r\nbazel build --config=opt \\\r\n\t    --config=cuda \\\r\n\t    --local_resources=${local_resources} \\\r\n            //tensorflow/tools/pip_package:build_pip_package\r\n```\r\n\r\n### Describe the problem\r\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\r\nHi, I am currently trying to build tensorflow 1.14.0 on Nvidia Jetson platform for TensorRT 6.0.1. But it is too painful to do so because it keep throwing errors and fails. I have applied some patches to the source code as described in below links:\r\n\r\n- https://github.com/tensorflow/tensorflow/issues/19956#issuecomment-397212193\r\n- https://github.com/tensorflow/tensorflow/issues/28277#issuecomment-517469318\r\n- https://github.com/tensorflow/tensorflow/issues/32925#issuecomment-537593098\r\n\r\nHowever, after all of the above patches, I still get the following errors shown on the logs section below. It is not the full log but if it is required, I can provide the full log too. Thanks in advance.\r\n\r\n### Source code / logs\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n```\r\nIn file included from ./tensorflow/compiler/tf2tensorrt/utils/trt_allocator.h:25:0,\r\n                 from ./tensorflow/compiler/tf2tensorrt/convert/convert_nodes.h:26,\r\n                 from tensorflow/compiler/tf2tensorrt/convert/convert_nodes.cc:16:\r\nbazel-out/host/bin/external/local_config_tensorrt/_virtual_includes/tensorrt_headers/third_party/tensorrt/NvInfer.h:5611:33: note: declared here\r\n     TRT_DEPRECATED virtual void setInt8Calibrator(IInt8Calibrator* calibrator) TRTNOEXCEPT = 0;\r\n                                 ^~~~~~~~~~~~~~~~~\r\ntensorflow/compiler/tf2tensorrt/convert/convert_nodes.cc:4939:77: warning: 'virtual nvinfer1::INetworkDefinition* nvinfer1::IBuilder::createNetwork()' is deprecated [-Wdeprecated-declarations]\r\n       TrtUniquePtrType<nvinfer1::INetworkDefinition>(builder->createNetwork());\r\n                                                                             ^\r\nIn file included from ./tensorflow/compiler/tf2tensorrt/utils/trt_allocator.h:25:0,\r\n                 from ./tensorflow/compiler/tf2tensorrt/convert/convert_nodes.h:26,\r\n                 from tensorflow/compiler/tf2tensorrt/convert/convert_nodes.cc:16:\r\nbazel-out/host/bin/external/local_config_tensorrt/_virtual_includes/tensorrt_headers/third_party/tensorrt/NvInfer.h:5431:58: note: declared here\r\n     TRT_DEPRECATED virtual nvinfer1::INetworkDefinition* createNetwork() TRTNOEXCEPT = 0;\r\n                                                          ^~~~~~~~~~~~~\r\ntensorflow/compiler/tf2tensorrt/convert/convert_nodes.cc:5011:62: warning: 'virtual nvinfer1::ICudaEngine* nvinfer1::IBuilder::buildCudaEngine(nvinfer1::INetworkDefinition&)' is deprecated [-Wdeprecated-declarations]\r\n   engine->reset(builder->buildCudaEngine(*converter.network()));\r\n                                                              ^\r\nIn file included from ./tensorflow/compiler/tf2tensorrt/utils/trt_allocator.h:25:0,\r\n                 from ./tensorflow/compiler/tf2tensorrt/convert/convert_nodes.h:26,\r\n                 from tensorflow/compiler/tf2tensorrt/convert/convert_nodes.cc:16:\r\nbazel-out/host/bin/external/local_config_tensorrt/_virtual_includes/tensorrt_headers/third_party/tensorrt/NvInfer.h:5566:51: note: declared here\r\n     TRT_DEPRECATED virtual nvinfer1::ICudaEngine* buildCudaEngine(\r\n                                                   ^~~~~~~~~~~~~~~\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nINFO: Elapsed time: 6315.216s, Critical Path: 450.27s\r\nINFO: 5761 processes: 5761 local.\r\nFAILED: Build did NOT complete successfully\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35579", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35579/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35579/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35579/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35579", "id": 545285975, "node_id": "MDU6SXNzdWU1NDUyODU5NzU=", "number": 35579, "title": "tf.linalg.expm is incompatible with vectorized_map", "user": {"login": "ziofil", "id": 8944955, "node_id": "MDQ6VXNlcjg5NDQ5NTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/8944955?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ziofil", "html_url": "https://github.com/ziofil", "followers_url": "https://api.github.com/users/ziofil/followers", "following_url": "https://api.github.com/users/ziofil/following{/other_user}", "gists_url": "https://api.github.com/users/ziofil/gists{/gist_id}", "starred_url": "https://api.github.com/users/ziofil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ziofil/subscriptions", "organizations_url": "https://api.github.com/users/ziofil/orgs", "repos_url": "https://api.github.com/users/ziofil/repos", "events_url": "https://api.github.com/users/ziofil/events{/privacy}", "received_events_url": "https://api.github.com/users/ziofil/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-01-04T13:36:53Z", "updated_at": "2020-01-06T11:44:09Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): MacOS 10.15.2\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.1.0-dev20191221\r\n- Python version: 3.7\r\n\r\n**Describe the current behavior**\r\nVectorizing `tf.linalg.expm` throws the error: `UnrecognizedFlagError: Unknown command line flag 'f'`\r\n\r\n**Describe the expected behavior**\r\nNo error\r\n\r\n**Code to reproduce the issue**\r\n`tf.vectorized_map(lambda x: tf.linalg.expm(x), tf.reshape(tf.range(8.0),[2,2,2]))`\r\n\r\n**Other info / logs**\r\nThis may not be related specifically to expm, as it occurs with [other functions](https://github.com/tensorflow/tensorflow/issues/34734) as well\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35576", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35576/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35576/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35576/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35576", "id": 545244129, "node_id": "MDU6SXNzdWU1NDUyNDQxMjk=", "number": 35576, "title": "fatal error: tensorflow/core/common_runtime/gpu/gpu_process_state.h: No such file or directory", "user": {"login": "abcdabcd987", "id": 2470081, "node_id": "MDQ6VXNlcjI0NzAwODE=", "avatar_url": "https://avatars0.githubusercontent.com/u/2470081?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abcdabcd987", "html_url": "https://github.com/abcdabcd987", "followers_url": "https://api.github.com/users/abcdabcd987/followers", "following_url": "https://api.github.com/users/abcdabcd987/following{/other_user}", "gists_url": "https://api.github.com/users/abcdabcd987/gists{/gist_id}", "starred_url": "https://api.github.com/users/abcdabcd987/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abcdabcd987/subscriptions", "organizations_url": "https://api.github.com/users/abcdabcd987/orgs", "repos_url": "https://api.github.com/users/abcdabcd987/repos", "events_url": "https://api.github.com/users/abcdabcd987/events{/privacy}", "received_events_url": "https://api.github.com/users/abcdabcd987/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1222092379, "node_id": "MDU6TGFiZWwxMjIyMDkyMzc5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:bazel", "name": "subtype:bazel", "color": "b619ea", "default": false, "description": "Bazel related Build_Installation issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-01-04T05:29:34Z", "updated_at": "2020-01-15T19:05:24Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Arch Linux (Kernel 5.3.18, glibc 2.30-3)\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version: `bd56e040ba4a8272163357a2f8786a128deb4aaf` from `r2.1` branch.\r\n- Python version: Not Applicable\r\n- Installed using virtualenv? pip? conda?: Not Applicable\r\n- Bazel version (if compiling from source): 0.29.1\r\n- GCC/Compiler version (if compiling from source): Host GCC 9.2.0; Cuda GCC 6.5.0\r\n- CUDA/cuDNN version: CUDA 10.0; cuDNN 7\r\n- GPU model and memory: RTX 2070 8GB\r\n\r\n\r\n\r\n**Describe the problem**\r\n\r\nI'm trying to upgrade the TensorFlow dependency in our project from `42c4f4ab6b53bce8639c203d7839d27eac11bd2f` (from `r1.13` branch) to `bd56e040ba4a8272163357a2f8786a128deb4aaf` (from `r2.1` branch). The problem is that `gpu_process_state.h` is missing. The error line in our project is [here](https://github.com/uwsampl/nexus/blob/bd1a079ebea4cbb076bd3b4b2b8d010b49794afa/src/nexus/backend/tensorflow_model.cpp#L6).\r\n\r\n```\r\n/home/abcdabcd987/work/nexus/src/nexus/backend/tensorflow_model.cpp:6:10: fatal error: tensorflow/core/common_runtime/gpu/gpu_process_state.h: No such file or directory\r\n    6 | #include \"tensorflow/core/common_runtime/gpu/gpu_process_state.h\"\r\n      |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\ncompilation terminated.\r\n```\r\n\r\nI checked the cloned TensorFlow source code. I can see that [`gpu_process_state.h`](https://github.com/tensorflow/tensorflow/blob/bd56e040ba4a8272163357a2f8786a128deb4aaf/tensorflow/core/common_runtime/gpu/gpu_process_state.h) exists. However, when I checked that build output that bazel produces, it was not there:\r\n\r\n```\r\n$ pwd\r\n/home/abcdabcd987/work/nexus/build/tensorflow/execroot/org_tensorflow/bazel-out/k8-opt/bin/tensorflow/include\r\n\r\n$ ls -la tensorflow/core/common_runtime/gpu/\r\ntotal 28\r\ndrwxr-xr-x 2 abcdabcd987 abcdabcd987 4096 Jan  3 20:37 ./\r\ndrwxr-xr-x 3 abcdabcd987 abcdabcd987 4096 Jan  3 20:37 ../\r\n-rw-r--r-- 1 abcdabcd987 abcdabcd987 7639 Jan  3 20:37 gpu_event_mgr.h\r\n-rw-r--r-- 1 abcdabcd987 abcdabcd987 4091 Jan  3 20:37 gpu_id.h\r\n-rw-r--r-- 1 abcdabcd987 abcdabcd987 1617 Jan  3 20:37 gpu_id_manager.h\r\n-rw-r--r-- 1 abcdabcd987 abcdabcd987 1665 Jan  3 20:37 gpu_init.h\r\n```\r\n\r\nI tried to figure out the difference of the BUILD files between the old and the new version, but since the `//tensorflow:install_headers` target is quite complicated, I cannot get it straight. Any help is much appreciated! Thanks!\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\nTensorFlow in our project is built with the following command:\r\n\r\n```\r\nbazel --output_base=../build/tensorflow build \\\r\n  --config=opt \\\r\n  --action_env CUDA_TOOLKIT_PATH=/usr/local/cuda-10.0 \\\r\n  --action_env CUDNN_INSTALL_PATH=/usr/local/cuda-10.0 \\\r\n  --action_env GCC_HOST_COMPILER_PATH=/usr/bin/gcc-6 \\\r\n  //tensorflow:libtensorflow_cc.so \\\r\n  //tensorflow:libtensorflow_framework.so \\\r\n  //tensorflow:install_headers\r\n```\r\n\r\nThe `.tf_configure.bazelrc` is the following:\r\n\r\n```\r\nbuild:xla --define with_xla_support=false\r\nbuild --action_env TF_NEED_OPENCL_SYCL=\"0\"\r\nbuild --action_env TF_NEED_ROCM=\"0\"\r\nbuild --action_env TF_NEED_CUDA=\"1\"\r\nbuild --action_env TF_CUDA_VERSION=\"10.0\"\r\nbuild --action_env TF_CUDNN_VERSION=\"7\"\r\nbuild --action_env TF_NCCL_VERSION=\"\"\r\nbuild --action_env TF_CUDA_COMPUTE_CAPABILITIES=\"6.0,7.5\"\r\nbuild --action_env TF_CUDA_CLANG=\"0\"\r\nbuild --config=cuda\r\nbuild:opt --copt=-march=native\r\nbuild:opt --copt=-Wno-sign-compare\r\nbuild:opt --host_copt=-march=native\r\nbuild:opt --define with_default_optimizations=true\r\ntest --flaky_test_attempts=3\r\ntest --test_size_filters=small,medium\r\ntest --test_tag_filters=-benchmark-test,-no_oss,-oss_serial\r\ntest --build_tag_filters=-benchmark-test,-no_oss\r\ntest --test_tag_filters=-gpu\r\ntest --build_tag_filters=-gpu\r\nbuild --action_env TF_CONFIGURE_IOS=\"0\"\r\n```\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35574", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35574/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35574/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35574/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35574", "id": 545184965, "node_id": "MDU6SXNzdWU1NDUxODQ5NjU=", "number": 35574, "title": "OP_REQUIRES failed due to missing tempstate or invalid argument", "user": {"login": "birdmw", "id": 2925772, "node_id": "MDQ6VXNlcjI5MjU3NzI=", "avatar_url": "https://avatars0.githubusercontent.com/u/2925772?v=4", "gravatar_id": "", "url": "https://api.github.com/users/birdmw", "html_url": "https://github.com/birdmw", "followers_url": "https://api.github.com/users/birdmw/followers", "following_url": "https://api.github.com/users/birdmw/following{/other_user}", "gists_url": "https://api.github.com/users/birdmw/gists{/gist_id}", "starred_url": "https://api.github.com/users/birdmw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/birdmw/subscriptions", "organizations_url": "https://api.github.com/users/birdmw/orgs", "repos_url": "https://api.github.com/users/birdmw/repos", "events_url": "https://api.github.com/users/birdmw/events{/privacy}", "received_events_url": "https://api.github.com/users/birdmw/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1478826728, "node_id": "MDU6TGFiZWwxNDc4ODI2NzI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:core", "name": "comp:core", "color": "024391", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 2, "created_at": "2020-01-03T22:09:07Z", "updated_at": "2020-03-04T01:42:38Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Custom implementation of ALBERT for TF2.0\r\n- Training on DataBricks\r\n- TensorFlow installed from (source or binary): Binary pypi\r\n- TensorFlow version (use command below): 2.0-gpu\r\n- Python version: 3.7\r\n- CUDA/cuDNN version: 10.1\r\n- GPU model and memory: Databricks 4xGPU cluster X8\r\n\r\n**Describe the current behavior**\r\n\r\nCurrent behavior: Training proceeds through 3 epochs and barfs on Train Step 399/1330 in the _save_checkpoint routine. We are using ADLSgen2 to store data, and we are mounting to that filesystem. Filesystem works transparently for all tasks so far & we have DataBricks team support. There are many read/writes to this mount point so I am not quick to blame the filesystem - but it's still worth noting.\r\n\r\nThe actual error is:\r\n2020-01-03 20:51:34.688654: W tensorflow/core/framework/op_kernel.cc:1622] OP_REQUIRES failed at save_restore_v2_ops.cc:137 : Invalid argument: /dbfs/mnt/devscoutprototype/eval_out/checkpoint/ctl_step_399.ckpt-3_temp_08f0418651184fbd97263e13fc11b45c/part-00001-of-00002.data-00000-of-00001.tempstate9461307533243821894; Invalid argument\r\n\r\nWhen we navigate to this location we find the folder is genuinely there, however inside that folder there is not this temp file. Instead there are two files:\r\n1)part-00000-of-00002.data-00000-of-00001\r\n2)part-00000-of-00002.index\r\n\r\n**Describe the expected behavior**\r\n\r\nI would expect to see a new checkpoint at this step.\r\n\r\n**Code to reproduce the issue**\r\nThis is made following the examples of https://github.com/kamalkraj/ALBERT-TF2.0\r\nIf you simply run this example top to bottom on DataBricks you will encounter this error.\r\n\r\n**Other info / logs**\r\n\r\nloss = 0.2804690897464752\r\nI0103 20:48:47.790678 140033029736192 model_training_utils.py:346] Train Step: 396/1330  / loss = 0.3561434745788574\r\nI0103 20:48:50.499201 140033029736192 model_training_utils.py:346] Train Step: 397/1330  / loss = 0.26206889748573303\r\nI0103 20:48:53.168039 140033029736192 model_training_utils.py:346] Train Step: 398/1330  / loss = 0.3312344551086426\r\nI0103 20:48:55.838387 140033029736192 model_training_utils.py:346] Train Step: 399/1330  / loss = 0.41013699769973755\r\n2020-01-03 20:51:34.688654: W tensorflow/core/framework/op_kernel.cc:1622] OP_REQUIRES failed at save_restore_v2_ops.cc:137 : Invalid argument: /dbfs/mnt/devscoutprototype/eval_out/checkpoint/ctl_step_399.ckpt-3_temp_08f0418651184fbd97263e13fc11b45c/part-00001-of-00002.data-00000-of-00001.tempstate9461307533243821894; Invalid argument\r\nTraceback (most recent call last):\r\n  File \"/dbfs/mnt/devscoutprototype/ALBERT-TF2.0-master/run_classifer.py\", line 455, in <module>\r\n    app.run(main)\r\n  File \"/databricks/conda/envs/databricks-ml-gpu/lib/python3.7/site-packages/absl/app.py\", line 299, in run\r\n    _run_main(main, args)\r\n  File \"/databricks/conda/envs/databricks-ml-gpu/lib/python3.7/site-packages/absl/app.py\", line 250, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"/dbfs/mnt/devscoutprototype/ALBERT-TF2.0-master/run_classifer.py\", line 356, in main\r\n    custom_callbacks = custom_callbacks)\r\n  File \"/dbfs/mnt/devscoutprototype/ALBERT-TF2.0-master/model_training_utils.py\", line 354, in run_customized_training_loop\r\n    checkpoint_name.format(step=current_step))\r\n  File \"/dbfs/mnt/devscoutprototype/ALBERT-TF2.0-master/model_training_utils.py\", line 33, in _save_checkpoint\r\n    saved_path = checkpoint.save(checkpoint_path)\r\n  File \"/databricks/conda/envs/databricks-ml-gpu/lib/python3.7/site-packages/tensorflow_core/python/training/tracking/util.py\", line 1889, in save\r\n    file_path = self.write(\"%s-%d\" % (file_prefix, checkpoint_number))\r\n  File \"/databricks/conda/envs/databricks-ml-gpu/lib/python3.7/site-packages/tensorflow_core/python/training/tracking/util.py\", line 1819, in write\r\n    output = self._saver.save(file_prefix=file_prefix)\r\n  File \"/databricks/conda/envs/databricks-ml-gpu/lib/python3.7/site-packages/tensorflow_core/python/training/tracking/util.py\", line 1155, in save\r\n    file_prefix=file_prefix_tensor, object_graph_tensor=object_graph_tensor)\r\n  File \"/databricks/conda/envs/databricks-ml-gpu/lib/python3.7/site-packages/tensorflow_core/python/training/tracking/util.py\", line 1103, in _save_cached_when_graph_building\r\n    save_op = saver.save(file_prefix)\r\n  File \"/databricks/conda/envs/databricks-ml-gpu/lib/python3.7/site-packages/tensorflow_core/python/training/saving/functional_saver.py\", line 230, in save\r\n    sharded_saves.append(saver.save(shard_prefix))\r\n  File \"/databricks/conda/envs/databricks-ml-gpu/lib/python3.7/site-packages/tensorflow_core/python/training/saving/functional_saver.py\", line 72, in save\r\n    return io_ops.save_v2(file_prefix, tensor_names, tensor_slices, tensors)\r\n  File \"/databricks/conda/envs/databricks-ml-gpu/lib/python3.7/site-packages/tensorflow_core/python/ops/gen_io_ops.py\", line 1933, in save_v2\r\n    ctx=_ctx)\r\n  File \"/databricks/conda/envs/databricks-ml-gpu/lib/python3.7/site-packages/tensorflow_core/python/ops/gen_io_ops.py\", line 1970, in save_v2_eager_fallback\r\n    ctx=_ctx, name=name)\r\n  File \"/databricks/conda/envs/databricks-ml-gpu/lib/python3.7/site-packages/tensorflow_core/python/eager/execute.py\", line 67, in quick_execute\r\n    six.raise_from(core._status_to_exception(e.code, message), None)\r\n  File \"<string>\", line 3, in raise_from\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: /dbfs/mnt/devscoutprototype/eval_out/checkpoint/ctl_step_399.ckpt-3_temp_08f0418651184fbd97263e13fc11b45c/part-00001-of-00002.data-00000-of-00001.tempstate9461307533243821894; Invalid argument [Op:SaveV2]\r\n\r\n\r\n\r\n---------------------------------------------------------------------------\r\nCalledProcessError                        Traceback (most recent call last)\r\n<command-1805221645764486> in <module>\r\n----> 1 get_ipython().run_cell_magic('sh', '', \"\\n# Running classifier:\\n\\nexport GLUE_DIR='/dbfs/mnt/devscoutprototype/dataset/'\\nexport ALBERT_DIR='/dbfs/mnt/devscoutprototype/models/base_2/'\\nexport TASK_NAME='CoLA'\\nexport OUTPUT_DIR='/dbfs/mnt/devscoutprototype/train_out'\\nexport MODEL_DIR='/dbfs/mnt/devscoutprototype/eval_out/'\\n\\npython /dbfs/mnt/devscoutprototype/ALBERT-TF2.0-master/run_classifer.py --train_data_path=${OUTPUT_DIR}/${TASK_NAME}_train.tf_record --eval_data_path=${OUTPUT_DIR}/${TASK_NAME}_eval.tf_record --input_meta_data_path=${OUTPUT_DIR}/${TASK_NAME}_meta_data --init_checkpoint=${ALBERT_DIR}/tf2_model.h5 --spm_model_file=${ALBERT_DIR}/vocab/30k-clean.model --albert_config_file=${ALBERT_DIR}/config.json --output_dir=${MODEL_DIR} --do_train --task_name=${TASK_NAME} --do_eval --custom_training_loop --train_batch_size=64 --learning_rate=1e-5 --num_train_epochs=10\\n\")\r\n\r\n/databricks/python/lib/python3.7/site-packages/IPython/core/interactiveshell.py in run_cell_magic(self, magic_name, line, cell)\r\n   2350             with self.builtin_trap:\r\n   2351                 args = (magic_arg_s, cell)\r\n-> 2352                 result = fn(*args, **kwargs)\r\n   2353             return result\r\n   2354 \r\n\r\n/databricks/python/lib/python3.7/site-packages/IPython/core/magics/script.py in named_script_magic(line, cell)\r\n    140             else:\r\n    141                 line = script\r\n--> 142             return self.shebang(line, cell)\r\n    143 \r\n    144         # write a basic docstring:\r\n\r\n</databricks/python/lib/python3.7/site-packages/decorator.py:decorator-gen-110> in shebang(self, line, cell)\r\n\r\n/databricks/python/lib/python3.7/site-packages/IPython/core/magic.py in <lambda>(f, *a, **k)\r\n    185     # but it's overkill for just that one bit of state.\r\n    186     def magic_deco(arg):\r\n--> 187         call = lambda f, *a, **k: f(*a, **k)\r\n    188 \r\n    189         if callable(arg):\r\n\r\n/databricks/python/lib/python3.7/site-packages/IPython/core/magics/script.py in shebang(self, line, cell)\r\n    243             sys.stderr.flush()\r\n    244         if args.raise_error and p.returncode!=0:\r\n--> 245             raise CalledProcessError(p.returncode, cell, output=out, stderr=err)\r\n    246 \r\n    247     def _run_script(self, p, cell, to_close):\r\n\r\nCalledProcessError: Command 'b\"\\n# Running classifier:\\n\\nexport GLUE_DIR='/dbfs/mnt/devscoutprototype/dataset/'\\nexport ALBERT_DIR='/dbfs/mnt/devscoutprototype/models/base_2/'\\nexport TASK_NAME='CoLA'\\nexport OUTPUT_DIR='/dbfs/mnt/devscoutprototype/train_out'\\nexport MODEL_DIR='/dbfs/mnt/devscoutprototype/eval_out/'\\n\\npython /dbfs/mnt/devscoutprototype/ALBERT-TF2.0-master/run_classifer.py "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35573", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35573/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35573/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35573/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35573", "id": 545175162, "node_id": "MDU6SXNzdWU1NDUxNzUxNjI=", "number": 35573, "title": "tensorflow 2.0.0 crashes with protobuf 3.10.1 on macOS", "user": {"login": "essandess", "id": 3449314, "node_id": "MDQ6VXNlcjM0NDkzMTQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/3449314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/essandess", "html_url": "https://github.com/essandess", "followers_url": "https://api.github.com/users/essandess/followers", "following_url": "https://api.github.com/users/essandess/following{/other_user}", "gists_url": "https://api.github.com/users/essandess/gists{/gist_id}", "starred_url": "https://api.github.com/users/essandess/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/essandess/subscriptions", "organizations_url": "https://api.github.com/users/essandess/orgs", "repos_url": "https://api.github.com/users/essandess/repos", "events_url": "https://api.github.com/users/essandess/events{/privacy}", "received_events_url": "https://api.github.com/users/essandess/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1205765054, "node_id": "MDU6TGFiZWwxMjA1NzY1MDU0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:macOS", "name": "subtype:macOS", "color": "b619ea", "default": false, "description": "macOS Build/Installation issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2020-01-03T21:39:14Z", "updated_at": "2020-03-18T04:34:32Z", "closed_at": null, "author_association": "NONE", "body": "Using MacPorts with the latest up-to-date versions (tensorflow 2.0.0, protobuf 3.10.1),\r\n\r\n> `python3 -c 'import tensorflow'`\r\n```\r\n[libprotobuf ERROR google/protobuf/descriptor_database.cc:394] Invalid file descriptor data passed to EncodedDescriptorDatabase::Add().\r\n[libprotobuf FATAL google/protobuf/descriptor.cc:1359] CHECK failed: GeneratedDatabase()->Add(encoded_file_descriptor, size): \r\nlibc++abi.dylib: terminating with uncaught exception of type google::protobuf::FatalException: CHECK failed: GeneratedDatabase()->Add(encoded_file_descriptor, size): \r\nAbort trap: 6\r\n```\r\n\r\nThis is reported and closed in https://github.com/tensorflow/tensorboard/issues/2985, but the issue persists.\r\n\r\nA workaround is `pip-3.7 install protobuf==3.8`, but this doesn't work with system-level, up-to-date library installs like with MacPorts. Also see: https://trac.macports.org/ticket/59826\r\n\r\nIs this an issue with TF, or with protobuf?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35569", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35569/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35569/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35569/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35569", "id": 545105321, "node_id": "MDU6SXNzdWU1NDUxMDUzMjE=", "number": 35569, "title": "colocation_graph started logging so much in TF 1.15.0 from TF 1.13.1", "user": {"login": "maziyarpanahi", "id": 5762953, "node_id": "MDQ6VXNlcjU3NjI5NTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/5762953?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maziyarpanahi", "html_url": "https://github.com/maziyarpanahi", "followers_url": "https://api.github.com/users/maziyarpanahi/followers", "following_url": "https://api.github.com/users/maziyarpanahi/following{/other_user}", "gists_url": "https://api.github.com/users/maziyarpanahi/gists{/gist_id}", "starred_url": "https://api.github.com/users/maziyarpanahi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maziyarpanahi/subscriptions", "organizations_url": "https://api.github.com/users/maziyarpanahi/orgs", "repos_url": "https://api.github.com/users/maziyarpanahi/repos", "events_url": "https://api.github.com/users/maziyarpanahi/events{/privacy}", "received_events_url": "https://api.github.com/users/maziyarpanahi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-03T18:27:23Z", "updated_at": "2020-01-06T05:59:24Z", "closed_at": null, "author_association": "NONE", "body": "Hi,\r\n\r\nWe have a TF code to create a graph which later on it's being loaded into our Scala/Java application. \r\n[Code to generate the graph](https://github.com/JohnSnowLabs/spark-nlp/blob/9407da076eced850ec840cfc61e665887400de12/python/tensorflow/lib/ner/ner_model.py)\r\n\r\nIn TF `1.12.0` and TF `1.13.1` we used to only see the device placement logs in the console, but in TF `1.15.0` it logs over thousands of lines complaining about:\r\n\r\n```\r\nFailed to place the graph without changing the devices of some resources. Some of the operations (that had to be colocated with resource generating operations) are not supported on the resources' devices. Current candidate devices are [\r\n  /job:localhost/replica:0/task:0/device:CPU:0].\r\n```\r\n\r\nThe full log is here due to the length:\r\nhttps://gist.github.com/maziyarpanahi/83f179e01634db2de12cb82501177c8d\r\n\r\nI understand what the log is saying and I know there is no way to control the logging level through Java API, but I would like to understand what has changed in TF 1.15.0 that we have now all these logs without any change in our process.  \r\n\r\nIssue: It is really hard to debug with that many logs in the console and also the Travis fails due to exceeding logs limit since we have many unit tests using this graph and every time there will be 1000 lines of logs saying something we really don't care.\r\n\r\nAny help to manage to suppress these logs would be highly appreciated.\r\n\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35565", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35565/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35565/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35565/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35565", "id": 544989782, "node_id": "MDU6SXNzdWU1NDQ5ODk3ODI=", "number": 35565, "title": "Typo Errors in `l05c03_exercise_flowers_with_data_augmentation.ipynb`", "user": {"login": "ManishAradwad", "id": 29497701, "node_id": "MDQ6VXNlcjI5NDk3NzAx", "avatar_url": "https://avatars0.githubusercontent.com/u/29497701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ManishAradwad", "html_url": "https://github.com/ManishAradwad", "followers_url": "https://api.github.com/users/ManishAradwad/followers", "following_url": "https://api.github.com/users/ManishAradwad/following{/other_user}", "gists_url": "https://api.github.com/users/ManishAradwad/gists{/gist_id}", "starred_url": "https://api.github.com/users/ManishAradwad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ManishAradwad/subscriptions", "organizations_url": "https://api.github.com/users/ManishAradwad/orgs", "repos_url": "https://api.github.com/users/ManishAradwad/repos", "events_url": "https://api.github.com/users/ManishAradwad/events{/privacy}", "received_events_url": "https://api.github.com/users/ManishAradwad/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "lamberta", "id": 43051, "node_id": "MDQ6VXNlcjQzMDUx", "avatar_url": "https://avatars2.githubusercontent.com/u/43051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lamberta", "html_url": "https://github.com/lamberta", "followers_url": "https://api.github.com/users/lamberta/followers", "following_url": "https://api.github.com/users/lamberta/following{/other_user}", "gists_url": "https://api.github.com/users/lamberta/gists{/gist_id}", "starred_url": "https://api.github.com/users/lamberta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lamberta/subscriptions", "organizations_url": "https://api.github.com/users/lamberta/orgs", "repos_url": "https://api.github.com/users/lamberta/repos", "events_url": "https://api.github.com/users/lamberta/events{/privacy}", "received_events_url": "https://api.github.com/users/lamberta/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lamberta", "id": 43051, "node_id": "MDQ6VXNlcjQzMDUx", "avatar_url": "https://avatars2.githubusercontent.com/u/43051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lamberta", "html_url": "https://github.com/lamberta", "followers_url": "https://api.github.com/users/lamberta/followers", "following_url": "https://api.github.com/users/lamberta/following{/other_user}", "gists_url": "https://api.github.com/users/lamberta/gists{/gist_id}", "starred_url": "https://api.github.com/users/lamberta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lamberta/subscriptions", "organizations_url": "https://api.github.com/users/lamberta/orgs", "repos_url": "https://api.github.com/users/lamberta/repos", "events_url": "https://api.github.com/users/lamberta/events{/privacy}", "received_events_url": "https://api.github.com/users/lamberta/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2020-01-03T13:18:04Z", "updated_at": "2020-01-06T18:56:51Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\n\r\nhttps://github.com/tensorflow/examples/blob/master/courses/udacity_intro_to_tensorflow_for_deep_learning/l05c03_exercise_flowers_with_data_augmentation.ipynb\r\n\r\n## Description of issue (what needs changing):\r\n\r\nIn the directory structure, it should be \"daisy\" instead of \"diasy\"\r\n\r\n![Screenshot from 2020-01-03 18-39-11](https://user-images.githubusercontent.com/29497701/71725075-a8aaff80-2e58-11ea-9ac8-076078500026.png)\r\n\r\n### Submit a pull request?\r\n\r\nYes\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35563", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35563/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35563/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35563/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35563", "id": 544944844, "node_id": "MDU6SXNzdWU1NDQ5NDQ4NDQ=", "number": 35563, "title": "copy_to_device + prefetch not working", "user": {"login": "ramonmatas", "id": 24900898, "node_id": "MDQ6VXNlcjI0OTAwODk4", "avatar_url": "https://avatars1.githubusercontent.com/u/24900898?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ramonmatas", "html_url": "https://github.com/ramonmatas", "followers_url": "https://api.github.com/users/ramonmatas/followers", "following_url": "https://api.github.com/users/ramonmatas/following{/other_user}", "gists_url": "https://api.github.com/users/ramonmatas/gists{/gist_id}", "starred_url": "https://api.github.com/users/ramonmatas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ramonmatas/subscriptions", "organizations_url": "https://api.github.com/users/ramonmatas/orgs", "repos_url": "https://api.github.com/users/ramonmatas/repos", "events_url": "https://api.github.com/users/ramonmatas/events{/privacy}", "received_events_url": "https://api.github.com/users/ramonmatas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-01-03T10:52:34Z", "updated_at": "2020-02-22T10:53:07Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04.3\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: NA\r\n- TensorFlow installed from (source or binary): Binary\r\n- TensorFlow version (use command below): v1.12.1-21401-gd908b50 2.1.0-dev20191230\r\n- Python version: 3.6.9\r\n- Bazel version (if compiling from source): NA\r\n- GCC/Compiler version (if compiling from source): NA\r\n- CUDA/cuDNN version: CUDA Version 10.1.243 / cuDNN 7.6.4.38-1\r\n- GPU model and memory: TITAN V, 12GB\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\nI have tried both combinations of copy_to_device(\"/gpu:0\") followed by prefetch and prefetch_to_device(\"/gpu:0\"). In both cases the resulting tensors are placed in \"/cpu:0\" after consuming them from an iterator.\r\n\r\n**Describe the expected behavior**\r\n\r\nMy expectation is that the resulting tensors should still sit in the device where they have been copied (\"/gpu:0\" in this case). Executing simply a copy_to_device(\"/gpu:0\") does return tensors placed in the GPU.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n>>> import tensorflow as tf\r\n>>> dataset = tf.data.Dataset.from_tensor_slices([8, 3, 0, 8, 2, 1])\r\n>>> ds = dataset.batch(2).prefetch(1)\r\n>>> for x in ds: print(x.device)\r\n... \r\n/job:localhost/replica:0/task:0/device:CPU:0\r\n/job:localhost/replica:0/task:0/device:CPU:0\r\n/job:localhost/replica:0/task:0/device:CPU:0\r\n>>> ds = dataset.batch(2).apply(tf.data.experimental.copy_to_device(\"/gpu:0\"))\r\n>>> for x in ds: print(x.device)\r\n... \r\n/job:localhost/replica:0/task:0/device:GPU:0\r\n/job:localhost/replica:0/task:0/device:GPU:0\r\n/job:localhost/replica:0/task:0/device:GPU:0\r\n>>> ds = dataset.batch(2).apply(tf.data.experimental.copy_to_device(\"/gpu:0\")).prefetch(1)\r\n>>> for x in ds: print(x.device)\r\n... \r\n/job:localhost/replica:0/task:0/device:CPU:0\r\n/job:localhost/replica:0/task:0/device:CPU:0\r\n/job:localhost/replica:0/task:0/device:CPU:0\r\n>>> ds = dataset.batch(2).apply(tf.data.experimental.prefetch_to_device(\"/gpu:0\", 1))\r\n>>> for x in ds: print(x.device)\r\n... \r\n/job:localhost/replica:0/task:0/device:CPU:0\r\n/job:localhost/replica:0/task:0/device:CPU:0\r\n/job:localhost/replica:0/task:0/device:CPU:0\r\n>>> \r\n\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35562", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35562/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35562/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35562/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35562", "id": 544930130, "node_id": "MDU6SXNzdWU1NDQ5MzAxMzA=", "number": 35562, "title": "PEM routines:OPENSSL_internal:NO_START_LINE", "user": {"login": "LyraWang", "id": 19278353, "node_id": "MDQ6VXNlcjE5Mjc4MzUz", "avatar_url": "https://avatars1.githubusercontent.com/u/19278353?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LyraWang", "html_url": "https://github.com/LyraWang", "followers_url": "https://api.github.com/users/LyraWang/followers", "following_url": "https://api.github.com/users/LyraWang/following{/other_user}", "gists_url": "https://api.github.com/users/LyraWang/gists{/gist_id}", "starred_url": "https://api.github.com/users/LyraWang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LyraWang/subscriptions", "organizations_url": "https://api.github.com/users/LyraWang/orgs", "repos_url": "https://api.github.com/users/LyraWang/repos", "events_url": "https://api.github.com/users/LyraWang/events{/privacy}", "received_events_url": "https://api.github.com/users/LyraWang/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-01-03T10:12:15Z", "updated_at": "2020-01-03T16:51:10Z", "closed_at": null, "author_association": "NONE", "body": "Actually  this is not a tensorflow problem. I had a project my own, it run well. But it comes to an runtime error when I link it to the the tensorflow_framework.so, even I didn't change any codes of my project(it doesn't include any of tensoflow headers).  It seems related to openssl certification, but it's hard to trace where the collapse occurred. Is there anybody can help me? Thanks very much!\r\n\r\n**System information**\r\n...\r\nterminate called after throwing an instance of 'std::runtime_error'\r\n  what():  Unable to parse cert 1: error:0900006e:PEM routines:OPENSSL_internal:NO_START_LINE\r\n*** Aborted at 1578043256 (unix time) try \"date -d @1578043256\" if you are using GNU date ***\r\nPC: @     0x7ffb9e4b8e97 gsignal\r\n*** SIGABRT (@0x3e800006475) received by PID 25717 (TID 0x7ffbaa404500) from PID 25717; stack trace: ***\r\n    @     0x7ffba03c7890 (unknown)\r\n    @     0x7ffb9e4b8e97 gsignal\r\n    @     0x7ffb9e4ba801 abort\r\n    @     0x7ffb9eead957 (unknown)\r\n    @     0x7ffb9eeb3ab6 (unknown)\r\n    @     0x7ffb9eeb3af1 std::terminate()\r\n    @     0x7ffb9eeb3d24 __cxa_throw\r\n    @     0x555e5286eea7 (unknown)\r\n    @     0x555e5272d044 (unknown)\r\n    @     0x555e5272d342 (unknown)\r\n    @     0x555e5245ec1c (unknown)\r\n    @     0x555e52479c7e (unknown)\r\n    @     0x555e52479e98 (unknown)\r\n    @     0x555e5244452e (unknown)\r\n    @     0x7ffb9e49bb97 __libc_start_main\r\n    @     0x555e52449dea (unknown)\r\n\r\n\r\nversion: tensorflow 1.14.0 \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35553", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35553/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35553/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35553/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35553", "id": 544819126, "node_id": "MDU6SXNzdWU1NDQ4MTkxMjY=", "number": 35553, "title": "set_floatx('float16') slow to build/compile", "user": {"login": "arthurflor23", "id": 11759042, "node_id": "MDQ6VXNlcjExNzU5MDQy", "avatar_url": "https://avatars0.githubusercontent.com/u/11759042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arthurflor23", "html_url": "https://github.com/arthurflor23", "followers_url": "https://api.github.com/users/arthurflor23/followers", "following_url": "https://api.github.com/users/arthurflor23/following{/other_user}", "gists_url": "https://api.github.com/users/arthurflor23/gists{/gist_id}", "starred_url": "https://api.github.com/users/arthurflor23/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arthurflor23/subscriptions", "organizations_url": "https://api.github.com/users/arthurflor23/orgs", "repos_url": "https://api.github.com/users/arthurflor23/repos", "events_url": "https://api.github.com/users/arthurflor23/events{/privacy}", "received_events_url": "https://api.github.com/users/arthurflor23/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2020-01-03T01:43:14Z", "updated_at": "2020-02-08T01:08:44Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\nGoogle Colab system (GPU mode) with TensorFlow 2.1-rc2 and Python 3.\r\n\r\n**Describe the current behavior**\r\nTake a long time to build/compile a seq2seq model when use ``set_floatx('float16')`` instead float32 (default)\r\n\r\n**Describe the expected behavior**\r\nI don't know if is normal, but default value ``float32`` takes 1-2 second\r\n\r\n**Code to reproduce the issue**\r\nI coded an example [here](https://drive.google.com/open?id=170KpjIGFmNNt-SS-6oXgVbRnZR4-7ah_)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35543", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35543/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35543/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35543/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35543", "id": 544610742, "node_id": "MDU6SXNzdWU1NDQ2MTA3NDI=", "number": 35543, "title": "Can anyone build a optimized tensorflow-gpu-v2.0 based on cuda10.0 and cudnn7.6(centos7) for me? ", "user": {"login": "Times125", "id": 11797988, "node_id": "MDQ6VXNlcjExNzk3OTg4", "avatar_url": "https://avatars3.githubusercontent.com/u/11797988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Times125", "html_url": "https://github.com/Times125", "followers_url": "https://api.github.com/users/Times125/followers", "following_url": "https://api.github.com/users/Times125/following{/other_user}", "gists_url": "https://api.github.com/users/Times125/gists{/gist_id}", "starred_url": "https://api.github.com/users/Times125/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Times125/subscriptions", "organizations_url": "https://api.github.com/users/Times125/orgs", "repos_url": "https://api.github.com/users/Times125/repos", "events_url": "https://api.github.com/users/Times125/events{/privacy}", "received_events_url": "https://api.github.com/users/Times125/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205657510, "node_id": "MDU6TGFiZWwxMjA1NjU3NTEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:centos", "name": "subtype:centos", "color": "b619ea", "default": false, "description": "Centos Build/Installation issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2020-01-02T14:54:06Z", "updated_at": "2020-01-08T08:49:44Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version:\r\n- Python version:\r\n- Installed using virtualenv? pip? conda?:\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n\r\n\r\n**Describe the problem**\r\nUsers in China can not download third-party tools from GitHub. It's so frustrating. Can some kind person help me compile an optimized version of TensorFlow-GPU-v2.0. THKS!\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35542", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35542/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35542/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35542/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35542", "id": 544607981, "node_id": "MDU6SXNzdWU1NDQ2MDc5ODE=", "number": 35542, "title": "Tf 2.0 training performance issue", "user": {"login": "neeraj-j", "id": 34569089, "node_id": "MDQ6VXNlcjM0NTY5MDg5", "avatar_url": "https://avatars3.githubusercontent.com/u/34569089?v=4", "gravatar_id": "", "url": "https://api.github.com/users/neeraj-j", "html_url": "https://github.com/neeraj-j", "followers_url": "https://api.github.com/users/neeraj-j/followers", "following_url": "https://api.github.com/users/neeraj-j/following{/other_user}", "gists_url": "https://api.github.com/users/neeraj-j/gists{/gist_id}", "starred_url": "https://api.github.com/users/neeraj-j/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/neeraj-j/subscriptions", "organizations_url": "https://api.github.com/users/neeraj-j/orgs", "repos_url": "https://api.github.com/users/neeraj-j/repos", "events_url": "https://api.github.com/users/neeraj-j/events{/privacy}", "received_events_url": "https://api.github.com/users/neeraj-j/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2020-01-02T14:47:20Z", "updated_at": "2020-01-03T22:03:17Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Custom code for training ResNet50\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): pip install (precompiled binary, stable version)\r\n- TensorFlow version (use command below): 2.0.0\r\n- Python version: 3.7\r\n- Bazel version (if compiling from source): NA\r\n- GCC/Compiler version (if compiling from source): NA\r\n- CUDA/cuDNN version: 10.0.130\r\n- GPU model and memory: RTX 2060 (8GB)\r\n- CPU: AMD Ryzen 3200\r\n\r\nI am seeing slow training in order of 41.4%  in TF2.0 because of ~50% CPU and GPU utilization. Most likely the issue seems to be in memory transfer between CPU and GPU.  Other tf performance issues are closed without any satisfactory answer hence I have written standalone code in TF and pytorch for comparison. Please let me know how I can improve performance of my tf training code given below from 224ms/step to 133ms/step. This difference is almost doubling days of training time for the large model that I am training. \r\n\r\n-------TF code Start ------------\r\n```python\r\nimport tensorflow as tf\r\nimport numpy as np\r\nphysical_devices = tf.config.experimental.list_physical_devices('GPU')\r\ntf.config.experimental.set_memory_growth(physical_devices[0], True)\r\n#tf.compat.v1.disable_eager_execution()\r\n\r\nclass Lossfunc(tf.keras.losses.Loss):\r\n    def __init__(self,\r\n                 reduction=tf.keras.losses.Reduction.AUTO,\r\n                    name = \"Lossfunc\"):\r\n        super(Lossfunc, self).__init__(reduction=reduction,\r\n                                                           name=name)\r\n\r\n    def call(self, target, output):\r\n        #target = NoneCHW\r\n        loss = tf.keras.losses.MSE(target, output)\r\n        return loss\r\n\r\n#channel = 'channels_last'\r\n#IMG_SHAPE = tuple((256,256,3))\r\n#output_shape = tuple((8,8,2048))\r\nchannel = 'channels_first'\r\nIMG_SHAPE = tuple((3, 256,256))\r\noutput_shape = tuple((2048,8,8))\r\ntf.keras.backend.set_image_data_format(channel)\r\n\r\ndef data_gen():\r\n    input = np.random.normal(0, 0.1, IMG_SHAPE)\r\n    y = np.random.normal(0.5, 0.1, output_shape)\r\n    yield input, y\r\n\r\ndef ResNet():\r\n      backbone = tf.keras.applications.ResNet50(\r\n                                              input_shape=IMG_SHAPE,\r\n                                              include_top=False,\r\n                                              #weights='imagenet')\r\n                                              weights=None)\r\n\r\n      final_output = backbone.output\r\n      model = tf.keras.Model(inputs=backbone.input, outputs=final_output)\r\n      return model\r\n\r\ndef main():\r\n    # cudnn related setting ???\r\n    model = ResNet()\r\n    model.summary()\r\n\r\n    train_loader = tf.data.Dataset.from_generator(\r\n                        data_gen,\r\n                        output_types=(tf.float32, tf.float32),\r\n                        output_shapes=((IMG_SHAPE),\r\n                                       (output_shape)\r\n                        )\r\n                    )\r\n    train_loader = train_loader.repeat().batch(16).prefetch(tf.data.experimental.AUTOTUNE)\r\n    criterion = Lossfunc()\r\n    optimizer = tf.keras.optimizers.Adam(learning_rate=0.001)\r\n    model.compile(loss=criterion, optimizer=optimizer)\r\n    history = model.fit(train_loader,\r\n                                  initial_epoch = 0,\r\n                                  epochs=10,\r\n                                  shuffle=False,\r\n                                  steps_per_epoch=100,\r\n                                  use_multiprocessing=True,\r\n                                  workers=4)\r\n\r\nif __name__ == '__main__':\r\n        main()\r\n```\r\nOutput:\r\n```\r\n100/100 [==============================] - 31s 306ms/step - loss: 0.1300\r\nEpoch 2/10\r\n100/100 [==============================] - 23s 226ms/step - loss: 0.0171\r\nEpoch 3/10\r\n100/100 [==============================] - 22s 224ms/step - loss: 0.0138\r\nEpoch 4/10\r\n100/100 [==============================] - 23s 227ms/step - loss: 0.0123\r\nEpoch 5/10\r\n100/100 [==============================] - 23s 227ms/step - loss: 0.0121\r\n```\r\nCPU utilization: ~50% (None of the CPU thread is more than 60% utilized at anytime)\r\nGPU utilization: 56%\r\n\r\n---Pytorch code Start---\r\n```python\r\nimport torch\r\nimport torchvision.models as models\r\nimport torch.backends.cudnn as cudnn\r\nimport torch.nn as nn\r\nfrom torch.utils.data import Dataset\r\nimport numpy as np\r\nimport time\r\n\r\n# cudnn related setting\r\ncudnn.benchmark = True\r\ntorch.backends.cudnn.deterministic = False\r\ntorch.backends.cudnn.enabled = True\r\n\r\nclass Lossfunc(nn.Module):\r\n    def __init__(self):\r\n        super(Lossfunc, self).__init__()\r\n        self.criterion = nn.MSELoss(reduction='mean')\r\n    def forward(self, output, target):\r\n        loss = self.criterion(output, target)\r\n        return loss\r\n\r\nIMG_SHAPE = tuple((3, 256,256))\r\noutput_shape = tuple((2048,8,8))\r\n\r\nclass GenData(Dataset):\r\n    def __init__(self ):\r\n        self.db = None\r\n\r\n    def __getitem__(self, idx):\r\n        input = np.float32(np.random.normal(0, 0.1, IMG_SHAPE))\r\n        y = np.float32(np.random.normal(0.5, 0.1, output_shape))\r\n        return input, y\r\n\r\n    def __len__(self,):\r\n        return 1600\r\n\r\nclass ResNet(nn.Module):\r\n    def  __init__(self):\r\n        super(ResNet, self).__init__()\r\n        backbone = models.resnet50(pretrained=True)\r\n        self.backbone = nn.Sequential(*list(backbone.children())[:-2])\r\n\r\n    def forward(self, input):\r\n        x = self.backbone(input)\r\n        return x\r\n\r\ndef main():\r\n    # cudnn related setting\r\n\r\n    model = ResNet()\r\n    model = model.cuda()\r\n    print(model)\r\n\r\n    train_dataset = GenData()\r\n    train_loader = torch.utils.data.DataLoader(\r\n                        train_dataset,\r\n                        batch_size=16,\r\n                        shuffle=False,\r\n                        num_workers=4,\r\n                        pin_memory=True\r\n                    )\r\n\r\n    criterion = Lossfunc()\r\n    optimizer = torch.optim.Adam(model.parameters(), lr=0.001)\r\n\r\n    model.train()\r\n    for epoch in range(10):\r\n        start = time.time()\r\n        for i, (input, y) in enumerate(train_loader):\r\n            input = input.cuda()\r\n            output = model(input)\r\n            y = y.cuda(non_blocking=True)\r\n            loss = criterion(output, y)\r\n            optimizer.zero_grad()\r\n            loss.backward()\r\n            optimizer.step()\r\n\r\n        i +=1\r\n        end = time.time() - start\r\n        print(\"{} Steps in {} sec @ {} msec/step\".format(i,end, (end/i)*1000  ))\r\n\r\n\r\nif __name__ == '__main__':\r\n        main()\r\n```\r\nOUtput:\r\n```\r\n100 iterations in 14.790956020355225 sec @ 147.90956020355225 msec/step\r\n100 iterations in 13.290162563323975 sec @ 132.90162563323975 msec/step\r\n100 iterations in 13.326005935668945 sec @ 133.26005935668945 msec/step\r\n100 iterations in 13.390087127685547 sec @ 133.90087127685547 msec/step\r\n```\r\nCPU Utilization: 60%\r\nGPU Utilization: 98%\r\n\r\nThe difference in GPU % utilization is same as % time difference.\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35540", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35540/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35540/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35540/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35540", "id": 544575359, "node_id": "MDU6SXNzdWU1NDQ1NzUzNTk=", "number": 35540, "title": "Deadlock on recursive tf.function-decorated function", "user": {"login": "mayou36", "id": 17454848, "node_id": "MDQ6VXNlcjE3NDU0ODQ4", "avatar_url": "https://avatars3.githubusercontent.com/u/17454848?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mayou36", "html_url": "https://github.com/mayou36", "followers_url": "https://api.github.com/users/mayou36/followers", "following_url": "https://api.github.com/users/mayou36/following{/other_user}", "gists_url": "https://api.github.com/users/mayou36/gists{/gist_id}", "starred_url": "https://api.github.com/users/mayou36/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mayou36/subscriptions", "organizations_url": "https://api.github.com/users/mayou36/orgs", "repos_url": "https://api.github.com/users/mayou36/repos", "events_url": "https://api.github.com/users/mayou36/events{/privacy}", "received_events_url": "https://api.github.com/users/mayou36/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1478826728, "node_id": "MDU6TGFiZWwxNDc4ODI2NzI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:core", "name": "comp:core", "color": "024391", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "saxenasaurabh", "id": 3967488, "node_id": "MDQ6VXNlcjM5Njc0ODg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3967488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saxenasaurabh", "html_url": "https://github.com/saxenasaurabh", "followers_url": "https://api.github.com/users/saxenasaurabh/followers", "following_url": "https://api.github.com/users/saxenasaurabh/following{/other_user}", "gists_url": "https://api.github.com/users/saxenasaurabh/gists{/gist_id}", "starred_url": "https://api.github.com/users/saxenasaurabh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saxenasaurabh/subscriptions", "organizations_url": "https://api.github.com/users/saxenasaurabh/orgs", "repos_url": "https://api.github.com/users/saxenasaurabh/repos", "events_url": "https://api.github.com/users/saxenasaurabh/events{/privacy}", "received_events_url": "https://api.github.com/users/saxenasaurabh/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "saxenasaurabh", "id": 3967488, "node_id": "MDQ6VXNlcjM5Njc0ODg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3967488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saxenasaurabh", "html_url": "https://github.com/saxenasaurabh", "followers_url": "https://api.github.com/users/saxenasaurabh/followers", "following_url": "https://api.github.com/users/saxenasaurabh/following{/other_user}", "gists_url": "https://api.github.com/users/saxenasaurabh/gists{/gist_id}", "starred_url": "https://api.github.com/users/saxenasaurabh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saxenasaurabh/subscriptions", "organizations_url": "https://api.github.com/users/saxenasaurabh/orgs", "repos_url": "https://api.github.com/users/saxenasaurabh/repos", "events_url": "https://api.github.com/users/saxenasaurabh/events{/privacy}", "received_events_url": "https://api.github.com/users/saxenasaurabh/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-01-02T13:18:24Z", "updated_at": "2020-01-08T09:24:13Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 19.10\r\n- TensorFlow installed from (source or binary): binary, conda\r\n- TensorFlow version (use command below): unknown 2.0.0\r\n- Python version: 3.7\r\n\r\n**Describe the current behavior**\r\n\r\nRecursive calls with a `tf.function` decorated python function results in a deadlock. A minimal example is provided below.\r\n\r\nWhere it gets stuck: by recursively calling `_maybe_define_function`, which internally requires a lock (line 2118 in `tensorflow_core/python/eager.function.py`). This seems to deadlock when trying to create a graph function again invoking itself.\r\n\r\nAbout use-cases: yes, there are. But yes, in principle, there are \"workarounds\". But I assume this is not in general intended to produce a deadlock anyway, should it? If so, I would rather propose a loud failure.\r\n\r\n**Code to reproduce the issue**\r\n```\r\n@tf.function(autograph=False)\r\ndef func1(depth=0):\r\n    if depth > 1:\r\n        return depth\r\n    else:\r\n        return func1(depth + 1)\r\n\r\nfunc1(0)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35539", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35539/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35539/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35539/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35539", "id": 544548357, "node_id": "MDU6SXNzdWU1NDQ1NDgzNTc=", "number": 35539, "title": "CUDA libraries in a self created docker container", "user": {"login": "xentity", "id": 6489407, "node_id": "MDQ6VXNlcjY0ODk0MDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/6489407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xentity", "html_url": "https://github.com/xentity", "followers_url": "https://api.github.com/users/xentity/followers", "following_url": "https://api.github.com/users/xentity/following{/other_user}", "gists_url": "https://api.github.com/users/xentity/gists{/gist_id}", "starred_url": "https://api.github.com/users/xentity/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xentity/subscriptions", "organizations_url": "https://api.github.com/users/xentity/orgs", "repos_url": "https://api.github.com/users/xentity/repos", "events_url": "https://api.github.com/users/xentity/events{/privacy}", "received_events_url": "https://api.github.com/users/xentity/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2020-01-02T11:49:11Z", "updated_at": "2020-01-08T08:04:17Z", "closed_at": null, "author_association": "NONE", "body": "** Base System information**\r\n- Linux Ubuntu 18.04\r\n- nvidia-docker: Docker version 19.03.5, build 633a0ea838\r\n- nvidia driver via: `sudo apt-get install nvidia-driver-418`\r\n- CUDA/cuDNN version: 10.1\r\n- GPU model and memory:\r\n```\r\n$ nvidia-smi \r\nThu Jan  2 12:08:27 2020       \r\n+-----------------------------------------------------------------------------+\r\n| NVIDIA-SMI 430.64       Driver Version: 430.64       CUDA Version: 10.1     |\r\n|-------------------------------+----------------------+----------------------+\r\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\r\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\r\n|===============================+======================+======================|\r\n|   0  GeForce GT 710      Off  | 00000000:AF:00.0 N/A |                  N/A |\r\n| 40%   46C    P0    N/A /  N/A |      0MiB /  2002MiB |     N/A      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n|   1  GeForce RTX 207...  Off  | 00000000:D8:00.0 Off |                  N/A |\r\n| 34%   39C    P0     1W / 215W |      0MiB /  7982MiB |      0%      Default |\r\n+-------------------------------+----------------------+----------------------+\r\n                                                                               \r\n+-----------------------------------------------------------------------------+\r\n| Processes:                                                       GPU Memory |\r\n|  GPU       PID   Type   Process name                             Usage      |\r\n|=============================================================================|\r\n|    0                    Not Supported                                       |\r\n+-----------------------------------------------------------------------------+\r\n```\r\n\r\n\r\n** Docker container information**\r\n- Linux Ubuntu 18.04\r\n- TensorFlow installed from: pip3\r\n- TensorFlow version: 1.14.0\r\n- Python version: 3.6.9\r\n- CUDA/cuDNN version:\r\n- GPU model and memory: nvidia-smi output (see above)\r\n- my Dockerfile:\r\n```\r\n#https://www.tensorflow.org/install/gpu\r\nFROM nvidia/cuda:10.0-base-ubuntu18.04\r\n\r\nENV PATH=/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/opt/conda/bin:$PATH\r\nRUN apt-get update && apt-get upgrade -y && apt-get install -y \\\r\n        nodejs \\\r\n        npm \\\r\n        python3-pip \\\r\n        wget \\\r\n        libmysqlclient-dev \\\r\n        python-dev\r\n#RUN wget -nv https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh && bash Miniconda3-latest-Linux-x86_64.sh -b -p /opt/conda && rm Miniconda3-latest-Lin$\r\nRUN mkdir /etc/skel/notebooks\r\nRUN npm install -g configurable-http-proxy && pip3 install \\\r\n        jupyterhub \\\r\n        jupyterhub-ldapauthenticator \\\r\n        jupyterlab \\\r\n        notebook \\\r\n        tensorflow-gpu\r\nRUN pip3 install \\\r\n        folium \\\r\n        keras \\\r\n        matplotlib \\\r\n        mysql \\\r\n        mysql-connector \\\r\n        pandas \\\r\n        pymysql \\\r\n        seaborn \\\r\n        sklearn\r\nVOLUME [\"/home\"]\r\nRUN useradd -ms /bin/bash user -p \"$(openssl passwd -1 test)\"\r\nCOPY ./jupyterhub_config.py /etc/jupyterhub/jupyterhub_config.py\r\nCOPY ./jupyterhub_cookie_secret /etc/jupyterhub/jupyterhub_cookie_secret\r\nCOPY ./jupyterhub.sqlite /etc/jupyterhub/jupyterhub.sqlite\r\n#CMD [\"/usr/local/bin/jupyterhub\", \"upgrade-db\", \"--db=sqlite:////etc/jupyterhub/jupyterhub.sqlite\"]\r\nEXPOSE 8000\r\nCMD [\"/usr/local/bin/jupyterhub\", \"-f\", \"/etc/jupyterhub/jupyterhub_config.py\", \"--debug\"]\r\n```\r\n\r\n\r\n**Describe the problem**\r\n\r\nI created a Docker container based on the Dockerfile (see above) for a multiuser jupyterhub (with notebook and lab). The basics works fine, I can log in and use the desired python packages and running my projects. However, the container lacks the GPU capabiltites.\r\n\r\n- container will be started by: `$ nvidia-docker run -d -p 8000:8000 --runtime=nvidia --restart unless-stopped --gpus all -v ~/myDocker/home:/home jupyterhub`\r\n- `nvidia-smi` works within the container\r\n- `device_lib.list_local_devices()` prints:\r\n```[name: \"/device:CPU:0\"\r\ndevice_type: \"CPU\"\r\nmemory_limit: 268435456\r\nlocality {\r\n}\r\nincarnation: 9710542890831123693\r\n, name: \"/device:XLA_GPU:0\"\r\ndevice_type: \"XLA_GPU\"\r\nmemory_limit: 17179869184\r\nlocality {\r\n}\r\nincarnation: 12724683280898329209\r\nphysical_device_desc: \"device: XLA_GPU device\"\r\n, name: \"/device:XLA_GPU:1\"\r\ndevice_type: \"XLA_GPU\"\r\nmemory_limit: 17179869184\r\nlocality {\r\n}\r\nincarnation: 12608392157467121046\r\nphysical_device_desc: \"device: XLA_GPU device\"\r\n, name: \"/device:XLA_CPU:0\"\r\ndevice_type: \"XLA_CPU\"\r\nmemory_limit: 17179869184\r\nlocality {\r\n}\r\nincarnation: 16188673672643731433\r\nphysical_device_desc: \"device: XLA_CPU device\"\r\n]\r\n```\r\n\r\n- `from keras import backend as K\r\nK.tensorflow_backend._get_available_gpus()` prints an empty field\r\n- `tf.test.is_gpu_available()` says `False`\r\n\r\nI can see that tensorflow is looking for the following ones and cannot find them:\r\n- libcublas.so.10.0\r\n- libcufft.so.10.0\r\n- libcurand.so.10.0\r\n- libcusolver.so.10.0\r\n- libcusparse.so.10.0\r\n- libcudnn.so.7\r\n\r\nIt is strange, I never installed nvidia-smi within the container, I seems to be deployed by docker, but necessary parts are missing for tensorflow. However, if I install CUDA or/and nvidia-toolkits and other software parts in the container, tensorflow is reporting about incorpatible versions:\r\n\r\n```\r\n2020-01-01 20:50:11.429852: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 AVX512F FMA\r\n2020-01-01 20:50:11.466847: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcuda.so.1\r\n2020-01-01 20:50:11.468037: E tensorflow/stream_executor/cuda/cuda_driver.cc:318] failed call to cuInit: CUDA_ERROR_SYSTEM_DRIVER_MISMATCH: system has unsupported display driver / cuda driver combination\r\n2020-01-01 20:50:11.468085: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:169] retrieving CUDA diagnostic information for host: 9f9f93453aee\r\n2020-01-01 20:50:11.468093: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:176] hostname: 9f9f93453aee\r\n2020-01-01 20:50:11.468236: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:200] libcuda reported version is: 440.33.1\r\n2020-01-01 20:50:11.468265: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:204] kernel reported version is: 430.64.0\r\n2020-01-01 20:50:11.468285: E tensorflow/stream_executor/cuda/cuda_diagnostics.cc:313] kernel version 430.64.0 does not match DSO version 440.33.1 -- cannot find working devices in this configuration\r\n2020-01-01 20:50:11.489100: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2100000000 Hz\r\n2020-01-01 20:50:11.493082: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x4c12f30 executing computations on platform Host. Devices:\r\n2020-01-01 20:50:11.493143: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): <undefined>, <undefined>\r\n```\r\nI do not think that it is an tensorflow issue. It is moreover the question, how to create an own docker container with tensorflow-gpu with CUDA support. Is the docker base image the right one?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35538", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35538/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35538/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35538/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35538", "id": 544502189, "node_id": "MDU6SXNzdWU1NDQ1MDIxODk=", "number": 35538, "title": "TFLite model output different probabilities and thus different classes in Android compared to the original h5 model..", "user": {"login": "rishabhsahrawat", "id": 15910460, "node_id": "MDQ6VXNlcjE1OTEwNDYw", "avatar_url": "https://avatars2.githubusercontent.com/u/15910460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rishabhsahrawat", "html_url": "https://github.com/rishabhsahrawat", "followers_url": "https://api.github.com/users/rishabhsahrawat/followers", "following_url": "https://api.github.com/users/rishabhsahrawat/following{/other_user}", "gists_url": "https://api.github.com/users/rishabhsahrawat/gists{/gist_id}", "starred_url": "https://api.github.com/users/rishabhsahrawat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rishabhsahrawat/subscriptions", "organizations_url": "https://api.github.com/users/rishabhsahrawat/orgs", "repos_url": "https://api.github.com/users/rishabhsahrawat/repos", "events_url": "https://api.github.com/users/rishabhsahrawat/events{/privacy}", "received_events_url": "https://api.github.com/users/rishabhsahrawat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jaeyoo", "id": 40815393, "node_id": "MDQ6VXNlcjQwODE1Mzkz", "avatar_url": "https://avatars1.githubusercontent.com/u/40815393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaeyoo", "html_url": "https://github.com/jaeyoo", "followers_url": "https://api.github.com/users/jaeyoo/followers", "following_url": "https://api.github.com/users/jaeyoo/following{/other_user}", "gists_url": "https://api.github.com/users/jaeyoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaeyoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaeyoo/subscriptions", "organizations_url": "https://api.github.com/users/jaeyoo/orgs", "repos_url": "https://api.github.com/users/jaeyoo/repos", "events_url": "https://api.github.com/users/jaeyoo/events{/privacy}", "received_events_url": "https://api.github.com/users/jaeyoo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jaeyoo", "id": 40815393, "node_id": "MDQ6VXNlcjQwODE1Mzkz", "avatar_url": "https://avatars1.githubusercontent.com/u/40815393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaeyoo", "html_url": "https://github.com/jaeyoo", "followers_url": "https://api.github.com/users/jaeyoo/followers", "following_url": "https://api.github.com/users/jaeyoo/following{/other_user}", "gists_url": "https://api.github.com/users/jaeyoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaeyoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaeyoo/subscriptions", "organizations_url": "https://api.github.com/users/jaeyoo/orgs", "repos_url": "https://api.github.com/users/jaeyoo/repos", "events_url": "https://api.github.com/users/jaeyoo/events{/privacy}", "received_events_url": "https://api.github.com/users/jaeyoo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-01-02T09:24:41Z", "updated_at": "2020-02-27T08:57:46Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Google Colab / Android Studio\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version (or github SHA if from source):  1.14\r\n\r\n\r\n**Provide the text output from tflite_convert**\r\nTFLite Model output probabilities on same input text:\r\n```\r\n[0.07323484, 0.021794094, 0.013985702, 0.013658127, 0.010268052]\r\n```\r\n\r\nH5 Model file output on same input text: \r\n```\r\n[0.03437233, 0.02771266, 0.01885756, 0.01123235, 0.01093488]\r\n```\r\nHowever, in both cases the first probabilities belong to the same classes. The predicted classes in both cases are not meaningless but also they are not same, which should be the case.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35533", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35533/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35533/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35533/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35533", "id": 544468007, "node_id": "MDU6SXNzdWU1NDQ0NjgwMDc=", "number": 35533, "title": "Bug: Model.fit VS GradientTape in tf2.0: GradientTape can't work", "user": {"login": "NLP-ZY", "id": 22722147, "node_id": "MDQ6VXNlcjIyNzIyMTQ3", "avatar_url": "https://avatars2.githubusercontent.com/u/22722147?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NLP-ZY", "html_url": "https://github.com/NLP-ZY", "followers_url": "https://api.github.com/users/NLP-ZY/followers", "following_url": "https://api.github.com/users/NLP-ZY/following{/other_user}", "gists_url": "https://api.github.com/users/NLP-ZY/gists{/gist_id}", "starred_url": "https://api.github.com/users/NLP-ZY/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NLP-ZY/subscriptions", "organizations_url": "https://api.github.com/users/NLP-ZY/orgs", "repos_url": "https://api.github.com/users/NLP-ZY/repos", "events_url": "https://api.github.com/users/NLP-ZY/events{/privacy}", "received_events_url": "https://api.github.com/users/NLP-ZY/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2020-01-02T07:02:35Z", "updated_at": "2020-01-08T08:02:30Z", "closed_at": null, "author_association": "NONE", "body": "### 1. Network define\r\n```\r\nimport pathlib\r\nfrom concurrent.futures import ProcessPoolExecutor\r\n\r\nimport gensim\r\nimport numpy as np\r\nimport tensorflow as tf\r\nfrom absl import app\r\nfrom absl import flags\r\nfrom absl import logging\r\nfrom tensorflow import keras as tfk\r\nfrom tqdm import tqdm\r\n\r\nfrom src.preprocessing.sequence import create_dataset\r\nfrom src.preprocessing.text import JiebaTokenizer\r\n\r\n\r\nclass TextCNN(tfk.Model):\r\n\r\n    LABEL_IDX_DICT = {\"constellation\": 0, \"education\": 1, \"entertainment\": 2, \"fashion\": 3, \"finance\": 4, \"game\": 5,\r\n                      \"house\": 6, \"land\": 7, \"lottery\": 8, \"political\": 9, \"social\": 10, \"sports\": 11, \"stock\": 12,\r\n                      \"technology\": 13}\r\n    IDX_LABEL_DICT = {idx: label for label, idx in LABEL_IDX_DICT.items()}\r\n\r\n    def __init__(self, embeddings):\r\n        super(TextCNN, self).__init__()\r\n        self.embedding_layer = tfk.layers.Embedding(embeddings.shape[0], embeddings.shape[1], trainable=False,\r\n                                                    embeddings_initializer=tf.initializers.Constant(embeddings))\r\n        self.conv_layers = [tfk.layers.Conv1D(FLAGS.filters, FLAGS.kernel_size + idx * FLAGS.kernel_distance,\r\n                                              strides=FLAGS.conv_strides, padding=FLAGS.conv_padding)\r\n                            for idx in range(FLAGS.conv_pool_num)]\r\n        self.pool_layers = [tfk.layers.MaxPool1D(pool_size=FLAGS.pool_size, strides=FLAGS.pool_strides,\r\n                                                 padding=FLAGS.pool_padding)\r\n                            for idx in range(FLAGS.conv_pool_num)]\r\n        self.dense1_layer = tfk.layers.Dense(FLAGS.dense_units, activation=FLAGS.activation)\r\n        self.batchnorm_layer = tfk.layers.BatchNormalization()\r\n        self.dense2_layer = tfk.layers.Dense(len(self.LABEL_IDX_DICT), activation=tfk.activations.softmax)\r\n        self.dropout_layer = tfk.layers.Dropout(FLAGS.dropout_rate)\r\n\r\n    def call(self, inputs, training=None):\r\n        x = inputs\r\n        x_embed = self.embedding_layer(x)\r\n        assert FLAGS.conv_pool_num > 0, ValueError(\"conv_pool_num must > 0\")\r\n        encodings = [self.conv_layers[idx](x_embed) for idx in range(FLAGS.conv_pool_num)]\r\n        encodings_pool = [self.pool_layers[idx](encodings[idx]) for idx in range(FLAGS.conv_pool_num)]\r\n        encodings_concat = tf.concat(encodings_pool, axis=-1)\r\n        encodings_concat = self.batchnorm_layer(encodings_concat, training=training)\r\n        encodings_flatten = tfk.layers.Flatten()(encodings_concat)\r\n        encodings_flatten = self.dropout_layer(encodings_flatten, training=training)\r\n        hidden = self.dense1_layer(encodings_flatten)\r\n        y_pred = self.dense2_layer(hidden)\r\n        return y_pred\r\n```\r\n### 2. Train with model.fit\r\n```\r\nw2v = gensim.models.KeyedVectors.load_word2vec_format(FLAGS.embeddings_path)\r\nwords = list(w2v.vocab.keys())[:FLAGS.vocab_size]\r\ntokenizer = JiebaTokenizer(words)\r\ngpus = tf.config.experimental.list_physical_devices(\"GPU\")\r\nfor gpu in gpus:\r\n    tf.config.experimental.set_memory_growth(gpu, True)\r\nembeddings = np.zeros(shape=(FLAGS.vocab_size + 2, w2v.vector_size), dtype=np.float32)\r\nfor word, idx in tokenizer.word2idx_dict.items():\r\n    if word in w2v.vocab:\r\n        embeddings[idx] = w2v.word_vec(word)\r\nx, y = TextCNN.preprocess_dataset(tokenizer, FLAGS.trainset_path)\r\ntrainset = create_dataset([x, y])\r\ntrainset = trainset.batch(FLAGS.batch_size).shuffle(FLAGS.buffer_size)\r\nval_x, val_y = TextCNN.preprocess_dataset(tokenizer, FLAGS.valset_path)\r\nvalset = create_dataset([val_x, val_y])\r\nvalset = valset.batch(FLAGS.batch_size).shuffle(FLAGS.buffer_size)\r\nmodel = TextCNN(embeddings)\r\noptimizer = tf.optimizers.Adam(FLAGS.lr)\r\nmodel.compile(optimizer=optimizer, loss=tf.losses.sparse_categorical_crossentropy, metrics=[\"acc\"])\r\nmodel.fit(x=x, y=y, batch_size=FLAGS.batch_size, epochs=FLAGS.epochs, validation_data=(val_x, val_y))\r\n```\r\n### 3. Train with GradientTape\r\n```\r\nw2v = gensim.models.KeyedVectors.load_word2vec_format(FLAGS.embeddings_path)\r\nwords = list(w2v.vocab.keys())[:FLAGS.vocab_size]\r\ntokenizer = JiebaTokenizer(words)\r\ngpus = tf.config.experimental.list_physical_devices(\"GPU\")\r\nfor gpu in gpus:\r\n    tf.config.experimental.set_memory_growth(gpu, True)\r\nembeddings = np.zeros(shape=(FLAGS.vocab_size + 2, w2v.vector_size), dtype=np.float32)\r\nfor word, idx in tokenizer.word2idx_dict.items():\r\n    if word in w2v.vocab:\r\n        embeddings[idx] = w2v.word_vec(word)\r\nx, y = TextCNN.preprocess_dataset(tokenizer, FLAGS.trainset_path)\r\ntrainset = create_dataset([x, y])\r\ntrainset = trainset.batch(FLAGS.batch_size).shuffle(FLAGS.buffer_size)\r\nval_x, val_y = TextCNN.preprocess_dataset(tokenizer, FLAGS.valset_path)\r\nvalset = create_dataset([val_x, val_y])\r\nvalset = valset.batch(FLAGS.batch_size).shuffle(FLAGS.buffer_size)\r\nmodel = TextCNN(embeddings)\r\noptimizer = tf.optimizers.Adam(FLAGS.lr)\r\nloss_object = tf.losses.SparseCategoricalCrossentropy()\r\ntrain_acc = tf.metrics.SparseCategoricalAccuracy()\r\nval_acc = tf.metrics.SparseCategoricalAccuracy()\r\ntrain_loss = tf.metrics.Mean()\r\nval_loss = tf.metrics.Mean()\r\n\r\n@tf.function\r\ndef train_op(x, y):\r\n    with tf.GradientTape() as tape:\r\n        y_pred = model(x, training=True)\r\n        loss = loss_object(y, y_pred)\r\n        train_acc.update_state(y, y_pred)\r\n        train_loss.update_state(loss)\r\n        grads = tape.gradient(loss, model.trainable_variables)\r\n        optimizer.apply_gradients(grads_and_vars=zip(grads, model.trainable_variables))\r\n\r\n@tf.function\r\ndef val_op(x, y):\r\n    y_pred = model(x, training=False)\r\n    loss = loss_object(y, y_pred)\r\n    val_acc.update_state(y, y_pred)\r\n    val_loss.update_state(loss)\r\n\r\nfor epoch in range(FLAGS.epochs):\r\n    tf.print(\"Epoch {}/{}\".format(epoch + 1, FLAGS.epochs))\r\n    bar = tfk.utils.Progbar(target=len(x), unit_name=\"sample\")\r\n    train_acc.reset_states()\r\n    val_acc.reset_states()\r\n    train_loss.reset_states()\r\n    val_loss.reset_states()\r\n    for batch_x, batch_y in trainset:\r\n        train_op(batch_x, batch_y)\r\n        bar.add(len(batch_y))\r\n    for batch_x, batch_y in valset:\r\n        val_op(batch_x, batch_y)\r\n    template = \"loss: {:.4f}\\nacc: {:.4f}\\nval_loss: {:.4f}\\nval_acc: {:.4f}\"\r\n    message = template.format(train_loss.result().numpy(), train_acc.result().numpy(),\r\n                              val_loss.result().numpy(), val_acc.result().numpy())\r\n    tf.print(message)\r\n```\r\n### 4. model.fit result\r\n![image](https://user-images.githubusercontent.com/22722147/71655214-d452ba80-2d70-11ea-9ef8-294d90944ea1.png)\r\n### 5. GradientTape result\r\n![image](https://user-images.githubusercontent.com/22722147/71654550-3e696080-2d6d-11ea-896e-e72ade58974a.png)\r\n![image](https://user-images.githubusercontent.com/22722147/71654563-5214c700-2d6d-11ea-880b-10744b899d6f.png)\r\n![image](https://user-images.githubusercontent.com/22722147/71654570-5b059880-2d6d-11ea-896c-a132b383ee32.png)\r\n### 6. Question\r\nLike the result above, I use same parameter, but get very different result. Who can help me to figure out it. I have read some relevant tensorflow2.0 source code, but can't solve it.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35526", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35526/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35526/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35526/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35526", "id": 544430410, "node_id": "MDU6SXNzdWU1NDQ0MzA0MTA=", "number": 35526, "title": "iOS Demo Pod install error", "user": {"login": "WPDreamMelody", "id": 3898789, "node_id": "MDQ6VXNlcjM4OTg3ODk=", "avatar_url": "https://avatars2.githubusercontent.com/u/3898789?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WPDreamMelody", "html_url": "https://github.com/WPDreamMelody", "followers_url": "https://api.github.com/users/WPDreamMelody/followers", "following_url": "https://api.github.com/users/WPDreamMelody/following{/other_user}", "gists_url": "https://api.github.com/users/WPDreamMelody/gists{/gist_id}", "starred_url": "https://api.github.com/users/WPDreamMelody/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WPDreamMelody/subscriptions", "organizations_url": "https://api.github.com/users/WPDreamMelody/orgs", "repos_url": "https://api.github.com/users/WPDreamMelody/repos", "events_url": "https://api.github.com/users/WPDreamMelody/events{/privacy}", "received_events_url": "https://api.github.com/users/WPDreamMelody/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yyoon", "id": 1309817, "node_id": "MDQ6VXNlcjEzMDk4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1309817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yyoon", "html_url": "https://github.com/yyoon", "followers_url": "https://api.github.com/users/yyoon/followers", "following_url": "https://api.github.com/users/yyoon/following{/other_user}", "gists_url": "https://api.github.com/users/yyoon/gists{/gist_id}", "starred_url": "https://api.github.com/users/yyoon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yyoon/subscriptions", "organizations_url": "https://api.github.com/users/yyoon/orgs", "repos_url": "https://api.github.com/users/yyoon/repos", "events_url": "https://api.github.com/users/yyoon/events{/privacy}", "received_events_url": "https://api.github.com/users/yyoon/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yyoon", "id": 1309817, "node_id": "MDQ6VXNlcjEzMDk4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1309817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yyoon", "html_url": "https://github.com/yyoon", "followers_url": "https://api.github.com/users/yyoon/followers", "following_url": "https://api.github.com/users/yyoon/following{/other_user}", "gists_url": "https://api.github.com/users/yyoon/gists{/gist_id}", "starred_url": "https://api.github.com/users/yyoon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yyoon/subscriptions", "organizations_url": "https://api.github.com/users/yyoon/orgs", "repos_url": "https://api.github.com/users/yyoon/repos", "events_url": "https://api.github.com/users/yyoon/events{/privacy}", "received_events_url": "https://api.github.com/users/yyoon/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2020-01-02T02:55:40Z", "updated_at": "2020-03-06T03:53:54Z", "closed_at": null, "author_association": "NONE", "body": "i can search \"Tensorflow\", but can not install example : https://github.com/tensorflow/examples/tree/master/lite/examples/gesture_classification/ios\r\n\r\nError info:\r\n![image](https://user-images.githubusercontent.com/3898789/71649968-f6871100-2d4d-11ea-9225-f2b90fb8991b.png)\r\n![image](https://user-images.githubusercontent.com/3898789/71649972-fab32e80-2d4d-11ea-9878-d6fbca7548b5.png)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35524", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35524/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35524/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35524/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35524", "id": 544378981, "node_id": "MDU6SXNzdWU1NDQzNzg5ODE=", "number": 35524, "title": "Suspected memory leak - when loading multiple models with tf.keras.models.load_model()", "user": {"login": "farotem", "id": 27951762, "node_id": "MDQ6VXNlcjI3OTUxNzYy", "avatar_url": "https://avatars0.githubusercontent.com/u/27951762?v=4", "gravatar_id": "", "url": "https://api.github.com/users/farotem", "html_url": "https://github.com/farotem", "followers_url": "https://api.github.com/users/farotem/followers", "following_url": "https://api.github.com/users/farotem/following{/other_user}", "gists_url": "https://api.github.com/users/farotem/gists{/gist_id}", "starred_url": "https://api.github.com/users/farotem/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/farotem/subscriptions", "organizations_url": "https://api.github.com/users/farotem/orgs", "repos_url": "https://api.github.com/users/farotem/repos", "events_url": "https://api.github.com/users/farotem/events{/privacy}", "received_events_url": "https://api.github.com/users/farotem/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2020-01-01T17:14:31Z", "updated_at": "2020-01-21T11:13:02Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nyes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nLinux Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\nNA\r\n- TensorFlow installed from (source or binary): binary wheel via PyPI\r\n- TensorFlow version (use command below):\r\n2.1.0-dev20191231 (v1.12.1-21412-g3a094e6 2.1.0-dev20191231)\r\n- Python version:\r\n- Bazel version (if compiling from source):\r\nNA\r\n- GCC/Compiler version (if compiling from source):\r\nNA\r\n- CUDA/cuDNN version:\r\nCUDA 10.0 \r\n- GPU model and memory:\r\nV100 32 GB\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\nI'm suspecting a CPU memory leak when loading multiple models.\r\nWhen im running infinite loop that keeps loading the same model while using the same variable the memory (private bytes and working set) of the process keep increasing. At some points the working set seems to free some memory, but the trend is that the memory keeps on rising.\r\nI used a simple model (attached).\r\n\r\nThis trend happens even though I call gc.collect() on every iteration and tf.keras.backend.clear_session().\r\n\r\nthe issue also happens in TF 2.0 (v2.0.0-rc2-26-g64c3d38 2.0.0).\r\nfor a specific model:\r\n    running in TF 2.0 each iteration adds 16 MiB\r\n    running in TF 2.1 each iteration adds 2 MiB\r\n\r\n**Describe the expected behavior**\r\n\r\nThe memory shouldnt increase on each interation\r\n\r\n**Code to reproduce the issue**\r\n`\r\n```\r\nimport os\r\nimport tensorflow as tf\r\nimport gc # garbage collector\r\nimport objgraph\r\nfrom memory_profiler import profile\r\n\r\ndef mem_stat():\r\n  objs = gc.get_objects()\r\n  print(\"total objects count\", len(objs))\r\n\r\n@profile\r\ndef profile_own_model():\r\n    model = tf.keras.models.Sequential([\r\n        tf.keras.layers.Flatten(input_shape=(28, 28)),\r\n        tf.keras.layers.Dense(128, activation='relu'),\r\n        tf.keras.layers.Dropout(0.2),\r\n        tf.keras.layers.Dense(10, activation='softmax')\r\n    ])\r\n    # model.save('my_model')\r\n    tf.keras.backend.clear_session()\r\n    del model\r\n    gc.collect()\r\n\r\n@profile\r\ndef profile_load_model(path):\r\n    model = tf.keras.models.load_model(model_path, compile=False)\r\n    tf.keras.backend.clear_session()\r\n    del model\r\n    gc.collect()\r\n\r\n\r\n\r\nmodel_path = f'/my_model.hd5'\r\nprint(\"load model in loops:\")\r\n\r\nc = 1\r\nwhile True:\r\n    print(\"----------- iter\", c)\r\n    profile_load_model(model_path)\r\n\r\n    print(\"mem stat after model creation:\")\r\n    mem_stat()\r\n    objgraph.show_growth(limit=30)\r\n    c += 1\r\n```\r\n`\r\n\r\n**Other info / logs**\r\n![memory tf 2 1](https://user-images.githubusercontent.com/27951762/71644038-d9f5c500-2cca-11ea-96e3-b8aedd2e4efb.png)\r\n\r\n\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35519", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35519/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35519/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35519/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/35519", "id": 544265973, "node_id": "MDExOlB1bGxSZXF1ZXN0MzU4NDE4MDkx", "number": 35519, "title": "[ROCm] Unit-test updates for the ROCm platform.", "user": {"login": "deven-amd", "id": 36858332, "node_id": "MDQ6VXNlcjM2ODU4MzMy", "avatar_url": "https://avatars2.githubusercontent.com/u/36858332?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deven-amd", "html_url": "https://github.com/deven-amd", "followers_url": "https://api.github.com/users/deven-amd/followers", "following_url": "https://api.github.com/users/deven-amd/following{/other_user}", "gists_url": "https://api.github.com/users/deven-amd/gists{/gist_id}", "starred_url": "https://api.github.com/users/deven-amd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deven-amd/subscriptions", "organizations_url": "https://api.github.com/users/deven-amd/orgs", "repos_url": "https://api.github.com/users/deven-amd/repos", "events_url": "https://api.github.com/users/deven-amd/events{/privacy}", "received_events_url": "https://api.github.com/users/deven-amd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 987666414, "node_id": "MDU6TGFiZWw5ODc2NjY0MTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/ready%20to%20pull", "name": "ready to pull", "color": "2cd643", "default": false, "description": ""}, {"id": 1169365494, "node_id": "MDU6TGFiZWwxMTY5MzY1NDk0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:M", "name": "size:M", "color": "adafea", "default": false, "description": "CL Change Size: Medium"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 16, "created_at": "2019-12-31T20:33:46Z", "updated_at": "2020-03-17T03:54:08Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/35519", "html_url": "https://github.com/tensorflow/tensorflow/pull/35519", "diff_url": "https://github.com/tensorflow/tensorflow/pull/35519.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/35519.patch"}, "body": "This commit mostly either enables or disables unittests on the ROCM platform, details listed below\r\n* adding/removing no_rocm tag for tests in the //tensorflow/compiler/mlir dir\r\n* enabling / disabling subtests within //tensorflow/core/grappler/optimizers:constant_folding_test for the ROCm platform\r\n* disabling a subtest within //tensorflow/core/distributed_runtime:collective_param_resolver_distributed_test fir the ROCm platform\r\n* adding no_rocm tag to tests that are failing on the ROCm platform\r\n* minor bug fix to ensure that the //tensorflow/compiler/mlir/tensorflow:error_util_test passes on a consistent basis\r\n\r\n-----------------------\r\n\r\n/cc @whchung @chsigg "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35517", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35517/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35517/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35517/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35517", "id": 544248742, "node_id": "MDU6SXNzdWU1NDQyNDg3NDI=", "number": 35517, "title": "Building with OMP support compiles, but causes runtime error \"undefined symbol: omp_get_thread_num\"", "user": {"login": "ChristopherBrix", "id": 5114411, "node_id": "MDQ6VXNlcjUxMTQ0MTE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5114411?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChristopherBrix", "html_url": "https://github.com/ChristopherBrix", "followers_url": "https://api.github.com/users/ChristopherBrix/followers", "following_url": "https://api.github.com/users/ChristopherBrix/following{/other_user}", "gists_url": "https://api.github.com/users/ChristopherBrix/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChristopherBrix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChristopherBrix/subscriptions", "organizations_url": "https://api.github.com/users/ChristopherBrix/orgs", "repos_url": "https://api.github.com/users/ChristopherBrix/repos", "events_url": "https://api.github.com/users/ChristopherBrix/events{/privacy}", "received_events_url": "https://api.github.com/users/ChristopherBrix/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-12-31T18:46:03Z", "updated_at": "2020-03-06T16:01:33Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04.6 LTS (Xenial Xerus)\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 1.15\r\n- Python version: 3.5\r\n- Installed using virtualenv? pip? conda?: from source, within a virtualenv. Bazel creates a pip wheels which is then installed.\r\n- Bazel version (if compiling from source): 0.26.1\r\n- GCC/Compiler version (if compiling from source): gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.12) \r\n- CUDA/cuDNN version: not used, CPU only\r\n- GPU model and memory: not used, CPU only\r\n\r\n\r\n\r\n**Describe the problem**\r\nI am trying to build TF from source with support for `omp simd`. Compiling, creating and installing the pip wheel works fine using bazel. However, as soon as I try to import tensorflow, I get the error `ImportError: /work/venv/t2t/lib/python3.5/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so: undefined symbol: omp_get_thread_num` \r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nAs described in https://www.tensorflow.org/install/source, I first run `bazel clean`. Then I run `./configure` and always select the default values:\r\n\r\n```\r\n(t2t) brix@cluster:/work/tensorflow$ ./configure \r\nWARNING: Running Bazel server needs to be killed, because the startup options are different.\r\nWARNING: Waiting for server process to terminate (waited 5 seconds, waiting at most 60)\r\nWARNING: --batch mode is deprecated. Please instead explicitly shut down your Bazel server using the command \"bazel shutdown\".\r\nYou have bazel 0.26.1 installed.\r\nPlease specify the location of python. [Default is /work/venv/t2t/bin/python]: \r\n\r\nFound possible Python library paths:\r\n  /work/venv/t2t/lib/python3.5/site-packages\r\nPlease input the desired Python library path to use.  Default is [/work/venv/t2t/lib/python3.5/site-packages]\r\nDo you wish to build TensorFlow with XLA JIT support? [Y/n]: XLA JIT support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with OpenCL SYCL support? [y/N]: No OpenCL SYCL support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with ROCm support? [y/N]: No ROCm support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with CUDA support? [y/N]: No CUDA support will be enabled for TensorFlow.\r\n\r\nDo you wish to download a fresh release of clang? (Experimental) [y/N]: Clang will not be downloaded.\r\n\r\nDo you wish to build TensorFlow with MPI support? [y/N]: No MPI support will be enabled for TensorFlow.\r\n\r\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native -Wno-sign-compare]: \r\n\r\nWould you like to interactively configure ./WORKSPACE for Android builds? [y/N]: \r\nNot configuring the WORKSPACE for Android builds.\r\n\r\nPreconfigured Bazel build configs. You can use any of the below by adding \"--config=<>\" to your build command. See .bazelrc for more details.\r\n        --config=mkl            # Build with MKL support.\r\n        --config=monolithic     # Config for mostly static monolithic build.\r\n        --config=gdr            # Build with GDR support.\r\n        --config=verbs          # Build with libverbs support.\r\n        --config=ngraph         # Build with Intel nGraph support.\r\n        --config=numa           # Build with NUMA support.\r\n        --config=dynamic_kernels        # (Experimental) Build kernels into separate shared objects.\r\n        --config=v2             # Build TensorFlow 2.x instead of 1.x.\r\nPreconfigured Bazel build configs to DISABLE default on features:\r\n        --config=noaws          # Disable AWS S3 filesystem support.\r\n        --config=nogcp          # Disable GCP support.\r\n        --config=nohdfs         # Disable HDFS support.\r\n        --config=noignite       # Disable Apache Ignite support.\r\n        --config=nokafka        # Disable Apache Kafka support.\r\n        --config=nonccl         # Disable NVIDIA NCCL support.\r\nConfiguration finished\r\n\r\n```\r\n\r\nAfterwards, I run `bazel build -s --config=opt --copt=\"-fopenmp\" --copt=\"-lgomp\" //tensorflo\r\nw/tools/pip_package:build_pip_package`. Note that I've added `--copt=\"-fopenmp\" --copt=\"-lgomp\"` to ensure that `omp` is linked. This was suggested by the comment in this SO question: https://stackoverflow.com/questions/45667374/import-tensorlfow-failed-with-errors-undefined-symbol-omp-get-num-threads\r\n\r\nFinally, I create the pip package using `./bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg` and install it.\r\n\r\nUnfortunately, when I then run `python -c \"import tensorflow\"`, I get the following stack trace:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/work/venv/t2t/lib/python3.5/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/work/venv/t2t/lib/python3.5/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/work/venv/t2t/lib/python3.5/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/usr/lib/python3.5/imp.py\", line 242, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/usr/lib/python3.5/imp.py\", line 342, in load_dynamic\r\n    return _load(spec)\r\nImportError: /work/venv/t2t/lib/python3.5/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so: undefined symbol: omp_get_thread_num\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/work/venv/t2t/lib/python3.5/site-packages/tensorflow/__init__.py\", line 99, in <module>\r\n    from tensorflow_core import *\r\n  File \"/work/venv/t2t/lib/python3.5/site-packages/tensorflow_core/__init__.py\", line 28, in <module>\r\n    from tensorflow.python import pywrap_tensorflow  # pylint: disable=unused-import\r\n  File \"/work/venv/t2t/lib/python3.5/site-packages/tensorflow/__init__.py\", line 50, in __getattr__\r\n    module = self._load()\r\n  File \"/work/venv/t2t/lib/python3.5/site-packages/tensorflow/__init__.py\", line 44, in _load\r\n    module = _importlib.import_module(self.__name__)\r\n  File \"/usr/lib/python3.5/importlib/__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:], package, level)\r\n  File \"/work/venv/t2t/lib/python3.5/site-packages/tensorflow_core/python/__init__.py\", line 49, in <module>\r\n    from tensorflow.python import pywrap_tensorflow\r\n  File \"/work/venv/t2t/lib/python3.5/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 74, in <module>\r\n    raise ImportError(msg)\r\nImportError: Traceback (most recent call last):\r\n  File \"/work/venv/t2t/lib/python3.5/site-packages/tensorflow_core/python/pywrap_tensorflow.py\", line 58, in <module>\r\n    from tensorflow.python.pywrap_tensorflow_internal import *\r\n  File \"/work/venv/t2t/lib/python3.5/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 28, in <module>\r\n    _pywrap_tensorflow_internal = swig_import_helper()\r\n  File \"/work/venv/t2t/lib/python3.5/site-packages/tensorflow_core/python/pywrap_tensorflow_internal.py\", line 24, in swig_import_helper\r\n    _mod = imp.load_module('_pywrap_tensorflow_internal', fp, pathname, description)\r\n  File \"/usr/lib/python3.5/imp.py\", line 242, in load_module\r\n    return load_dynamic(name, filename, file)\r\n  File \"/usr/lib/python3.5/imp.py\", line 342, in load_dynamic\r\n    return _load(spec)\r\nImportError: /work/venv/t2t/lib/python3.5/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so: undefined symbol: omp_get_thread_num\r\n\r\n\r\nFailed to load the native TensorFlow runtime.\r\n\r\nSee https://www.tensorflow.org/install/errors\r\n\r\nfor some common reasons and solutions.  Include the entire stack trace\r\nabove this error message when asking for help.\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35509", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35509/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35509/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35509/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35509", "id": 544116464, "node_id": "MDU6SXNzdWU1NDQxMTY0NjQ=", "number": 35509, "title": "TFLite GPU Delegate on iOS: failed assertion `Cannot create a buffer of zero length.", "user": {"login": "rajeev-mirelz", "id": 55478122, "node_id": "MDQ6VXNlcjU1NDc4MTIy", "avatar_url": "https://avatars3.githubusercontent.com/u/55478122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rajeev-mirelz", "html_url": "https://github.com/rajeev-mirelz", "followers_url": "https://api.github.com/users/rajeev-mirelz/followers", "following_url": "https://api.github.com/users/rajeev-mirelz/following{/other_user}", "gists_url": "https://api.github.com/users/rajeev-mirelz/gists{/gist_id}", "starred_url": "https://api.github.com/users/rajeev-mirelz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rajeev-mirelz/subscriptions", "organizations_url": "https://api.github.com/users/rajeev-mirelz/orgs", "repos_url": "https://api.github.com/users/rajeev-mirelz/repos", "events_url": "https://api.github.com/users/rajeev-mirelz/events{/privacy}", "received_events_url": "https://api.github.com/users/rajeev-mirelz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yyoon", "id": 1309817, "node_id": "MDQ6VXNlcjEzMDk4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1309817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yyoon", "html_url": "https://github.com/yyoon", "followers_url": "https://api.github.com/users/yyoon/followers", "following_url": "https://api.github.com/users/yyoon/following{/other_user}", "gists_url": "https://api.github.com/users/yyoon/gists{/gist_id}", "starred_url": "https://api.github.com/users/yyoon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yyoon/subscriptions", "organizations_url": "https://api.github.com/users/yyoon/orgs", "repos_url": "https://api.github.com/users/yyoon/repos", "events_url": "https://api.github.com/users/yyoon/events{/privacy}", "received_events_url": "https://api.github.com/users/yyoon/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yyoon", "id": 1309817, "node_id": "MDQ6VXNlcjEzMDk4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1309817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yyoon", "html_url": "https://github.com/yyoon", "followers_url": "https://api.github.com/users/yyoon/followers", "following_url": "https://api.github.com/users/yyoon/following{/other_user}", "gists_url": "https://api.github.com/users/yyoon/gists{/gist_id}", "starred_url": "https://api.github.com/users/yyoon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yyoon/subscriptions", "organizations_url": "https://api.github.com/users/yyoon/orgs", "repos_url": "https://api.github.com/users/yyoon/repos", "events_url": "https://api.github.com/users/yyoon/events{/privacy}", "received_events_url": "https://api.github.com/users/yyoon/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-12-31T07:39:28Z", "updated_at": "2020-01-29T09:38:34Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): iPAD OS 13.2.2\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: iPAD Pro 2018\r\n- TensorFlow installed from (source or binary): Binary (TfLiteGPUExperimental)\r\n- TensorFlow version (use command below):\r\n- Python version: NA\r\n- Bazel version (if compiling from source): NA\r\n- GCC/Compiler version (if compiling from source): NA\r\n- CUDA/cuDNN version: NA\r\n- GPU model and memory: iPAD GPU\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nWhen running the model on iPAD using CPU, we are able to get the output. But when doing GPU delegate, we get the error the following error:\r\n_failed assertion `Cannot create a buffer of zero length._\r\n**Describe the expected behavior**\r\nNo error\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\ndelegate = NewGpuDelegate(nullptr);\r\n      interpreter->ModifyGraphWithDelegate(delegate);\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35504", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35504/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35504/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/35504/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/35504", "id": 544025137, "node_id": "MDU6SXNzdWU1NDQwMjUxMzc=", "number": 35504, "title": "AutoGraph: \"Entity could not be transformed and will be executed as-is\"", "user": {"login": "mpundurs", "id": 45009829, "node_id": "MDQ6VXNlcjQ1MDA5ODI5", "avatar_url": "https://avatars3.githubusercontent.com/u/45009829?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpundurs", "html_url": "https://github.com/mpundurs", "followers_url": "https://api.github.com/users/mpundurs/followers", "following_url": "https://api.github.com/users/mpundurs/following{/other_user}", "gists_url": "https://api.github.com/users/mpundurs/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpundurs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpundurs/subscriptions", "organizations_url": "https://api.github.com/users/mpundurs/orgs", "repos_url": "https://api.github.com/users/mpundurs/repos", "events_url": "https://api.github.com/users/mpundurs/events{/privacy}", "received_events_url": "https://api.github.com/users/mpundurs/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1190546177, "node_id": "MDU6TGFiZWwxMTkwNTQ2MTc3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:autograph", "name": "comp:autograph", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "mdanatg", "id": 26628547, "node_id": "MDQ6VXNlcjI2NjI4NTQ3", "avatar_url": "https://avatars1.githubusercontent.com/u/26628547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdanatg", "html_url": "https://github.com/mdanatg", "followers_url": "https://api.github.com/users/mdanatg/followers", "following_url": "https://api.github.com/users/mdanatg/following{/other_user}", "gists_url": "https://api.github.com/users/mdanatg/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdanatg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdanatg/subscriptions", "organizations_url": "https://api.github.com/users/mdanatg/orgs", "repos_url": "https://api.github.com/users/mdanatg/repos", "events_url": "https://api.github.com/users/mdanatg/events{/privacy}", "received_events_url": "https://api.github.com/users/mdanatg/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mdanatg", "id": 26628547, "node_id": "MDQ6VXNlcjI2NjI4NTQ3", "avatar_url": "https://avatars1.githubusercontent.com/u/26628547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdanatg", "html_url": "https://github.com/mdanatg", "followers_url": "https://api.github.com/users/mdanatg/followers", "following_url": "https://api.github.com/users/mdanatg/following{/other_user}", "gists_url": "https://api.github.com/users/mdanatg/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdanatg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdanatg/subscriptions", "organizations_url": "https://api.github.com/users/mdanatg/orgs", "repos_url": "https://api.github.com/users/mdanatg/repos", "events_url": "https://api.github.com/users/mdanatg/events{/privacy}", "received_events_url": "https://api.github.com/users/mdanatg/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-12-30T22:05:35Z", "updated_at": "2020-01-07T23:42:30Z", "closed_at": null, "author_association": "NONE", "body": "Got the following error output from Databricks; exported the notebook to the attached file; error occurs in cell 10.\r\n\r\nINFO:tensorflow:Converted call: <function read.<locals>.<lambda> at 0x7fbde97eae18>\r\n    args: (<tf.Tensor 'args_0:0' shape=() dtype=string>,)\r\n    kwargs: {}\r\n\r\nINFO:tensorflow:Not whitelisted: <method-wrapper '__call__' of function object at 0x7fbde97eae18>: default rule\r\nINFO:tensorflow:Not whitelisted: <function read.<locals>.<lambda> at 0x7fbde97eae18>: default rule\r\nINFO:tensorflow:Entity <function read.<locals>.<lambda> at 0x7fbde97eae18> is not cached for key <code object <lambda> at 0x7fbde9888f60, file \"<command-608347>\", line 138> subkey (<tensorflow.python.autograph.core.converter.ConversionOptions object at 0x7fbdddf7c0b8>, frozenset({'mean', 'var'}))\r\nINFO:tensorflow:Converting <function read.<locals>.<lambda> at 0x7fbde97eae18>\r\nINFO:tensorflow:Error transforming entity <function read.<locals>.<lambda> at 0x7fbde97eae18>\r\nTraceback (most recent call last):\r\n  File \"/databricks/python/lib/python3.7/site-packages/tensorflow_core/python/autograph/pyct/parser.py\", line 78, in parse_entity\r\n    return parse_str(source, preamble_len=len(future_features)), source\r\n  File \"/databricks/python/lib/python3.7/site-packages/tensorflow_core/python/autograph/pyct/parser.py\", line 139, in parse_str\r\n    module_node = gast.parse(src)\r\n  File \"/databricks/python/lib/python3.7/site-packages/gast/gast.py\", line 240, in parse\r\n    return ast_to_gast(_ast.parse(*args, **kwargs))\r\n  File \"/usr/lib/python3.7/ast.py\", line 35, in parse\r\n    return compile(source, filename, mode, PyCF_ONLY_AST)\r\n  File \"<unknown>\", line 4\r\n    .map(lambda x: decode(x, mean, var))\r\n    ^\r\nSyntaxError: invalid syntax\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/databricks/python/lib/python3.7/site-packages/tensorflow_core/python/autograph/impl/api.py\", line 506, in converted_call\r\n    converted_f = conversion.convert(target_entity, program_ctx)\r\n  File \"/databricks/python/lib/python3.7/site-packages/tensorflow_core/python/autograph/impl/conversion.py\", line 322, in convert\r\n    free_nonglobal_var_names)\r\n  File \"/databricks/python/lib/python3.7/site-packages/tensorflow_core/python/autograph/impl/conversion.py\", line 240, in _convert_with_cache\r\n    entity, program_ctx)\r\n  File \"/databricks/python/lib/python3.7/site-packages/tensorflow_core/python/autograph/impl/conversion.py\", line 469, in convert_entity_to_ast\r\n    nodes, name, entity_info = convert_func_to_ast(o, program_ctx)\r\n  File \"/databricks/python/lib/python3.7/site-packages/tensorflow_core/python/autograph/impl/conversion.py\", line 630, in convert_func_to_ast\r\n    node, source = parser.parse_entity(f, future_features=future_features)\r\n  File \"/databricks/python/lib/python3.7/site-packages/tensorflow_core/python/autograph/pyct/parser.py\", line 118, in parse_entity\r\n    return parse_str(source, preamble_len=len(future_features)), source\r\n  File \"/databricks/python/lib/python3.7/site-packages/tensorflow_core/python/autograph/pyct/parser.py\", line 145, in parse_str\r\n    raise ValueError('expected exactly one node node, found {}'.format(nodes))\r\nValueError: expected exactly one node node, found []\r\nWARNING:tensorflow:Entity <function read.<locals>.<lambda> at 0x7fbde97eae18> could not be transformed and will be executed as-is. Please report this to the AutoGraph\r\n team. When filing the bug, set the verbosity to 10 (on Linux, `export AUTOGRAPH_VERBOSITY=10`) and attach the full output. Cause: expected exactly one node node, found []\r\n[v2_compute_ndcg_geov4.02.ipynb.zip](https://github.com/tensorflow/tensorflow/files/4011226/v2_compute_ndcg_geov4.02.ipynb.zip)"}]