[{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34242", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34242/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34242/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34242/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34242", "id": 522417078, "node_id": "MDU6SXNzdWU1MjI0MTcwNzg=", "number": 34242, "title": "Eager context seems contradicting the distributed TensorFlow concept", "user": {"login": "pw2393", "id": 21228317, "node_id": "MDQ6VXNlcjIxMjI4MzE3", "avatar_url": "https://avatars1.githubusercontent.com/u/21228317?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pw2393", "html_url": "https://github.com/pw2393", "followers_url": "https://api.github.com/users/pw2393/followers", "following_url": "https://api.github.com/users/pw2393/following{/other_user}", "gists_url": "https://api.github.com/users/pw2393/gists{/gist_id}", "starred_url": "https://api.github.com/users/pw2393/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pw2393/subscriptions", "organizations_url": "https://api.github.com/users/pw2393/orgs", "repos_url": "https://api.github.com/users/pw2393/repos", "events_url": "https://api.github.com/users/pw2393/events{/privacy}", "received_events_url": "https://api.github.com/users/pw2393/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 736653459, "node_id": "MDU6TGFiZWw3MzY2NTM0NTk=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:eager", "name": "comp:eager", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-11-13T19:13:44Z", "updated_at": "2019-11-15T21:32:13Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- OS Platform and Distribution: Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): binary whl\r\n- TensorFlow version (use command below): `tensorflow-gpu==2.0.0`\r\n- Python version: 3.6.8\r\n- CUDA/cuDNN version: 10.0 / 7.6.4\r\n- GPU model and memory: GeForce GTX 1080 Ti\r\n\r\n\r\n**Describe the current behavior**\r\n```python\r\nimport argparse\r\n\r\nimport tensorflow as tf\r\nfrom tensorflow.core.protobuf.tensorflow_server_pb2 import ServerDef\r\nfrom tensorflow.python.eager import context\r\nfrom tensorflow.python.training.server_lib import ClusterSpec\r\n\r\n\r\nCLUSTER_SPEC = {\r\n    \"worker\": [\r\n        \"localhost:14286\",\r\n        \"localhost:14287\"\r\n    ]\r\n}\r\n\r\n\r\ndef test():\r\n    c = context.context()\r\n    c.set_server_def(\r\n        ServerDef(\r\n            cluster=ClusterSpec(CLUSTER_SPEC).as_cluster_def(),\r\n            job_name=FLAGS.job_name,\r\n            task_index=FLAGS.task_index,\r\n            protocol='grpc'\r\n        )\r\n    )\r\n    print(tf.constant(3))\r\n    print('lol')\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    parser = argparse.ArgumentParser()\r\n    parser.add_argument(\r\n        \"--job_name\",\r\n        type=str,\r\n    )\r\n    parser.add_argument(\r\n        \"--task_index\",\r\n        type=int,\r\n    )\r\n    FLAGS, _ = parser.parse_known_args()\r\n    test()\r\n```\r\n\r\nWe refer the above code as `a.py`.\r\nSTEP 1: we launch it by\r\n```bash\r\npython a.py --job_name=worker --task_index=0\r\n```\r\nwith the log\r\n```\r\n...\r\n2019-11-13 13:53:38.096726: I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:258] Initialize GrpcChannelCache for job worker -> {0 -> localhost:14286, 1 -> localhost:14287}\r\n2019-11-13 13:53:38.099209: I tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:365] Started server with target: grpc://localhost:14286\r\n```\r\nand it is waiting for another server as described in the `CLUSTER_SPEC`. Note that no `print` above has been executed yet.\r\n\r\nSTEP 2: we launch it as another process by\r\n```bash\r\npython a.py --job_name=worker --task_index=1\r\n```\r\nwith the log\r\n```\r\n...\r\n2019-11-13 14:00:01.431825: I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:258] Initialize GrpcChannelCache for job worker -> {0 -> localhost:14286, 1 -> localhost:14287}\r\n2019-11-13 14:00:01.433641: I tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:365] Started server with target: grpc://localhost:14287\r\n2019-11-13 14:00:01.471394: I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:258] Initialize GrpcChannelCache for job worker -> {0 -> localhost:14286, 1 -> localhost:14287}\r\ntf.Tensor(3, shape=(), dtype=int32)\r\nlol\r\n2019-11-13 14:00:01.585211: E tensorflow/core/distributed_runtime/rpc/eager/grpc_eager_client.cc:72] Remote EagerContext with id 2379290034739913425 does not seem to exist.\r\n```\r\nand the first processor with the `task_index=0` hangs forever.\r\n\r\n\r\n**Describe the expected behavior**\r\n\r\nIn TensorFlow graph mode, we know when multiple sessions talk to the same cluster (which is defined by `ClusterSpec`), everything works pretty smooth and natural. \r\n\r\nShould eager context behave similarly?  That is, both the above processes are expected to run naturally: print the contant and string and exited.\r\n\r\nIn other words, when multiple contexts talking to the same cluster (which is defined by `ClusterSpec`), should they know how to coordinate with each other, just as the TensorFlow core is architectured and designed before?\r\n\r\n(Or is there any other API that could help resolve this issue?)\r\n\r\n\r\n**Code to reproduce the issue**\r\nSee above\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34238", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34238/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34238/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34238/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34238", "id": 522378656, "node_id": "MDU6SXNzdWU1MjIzNzg2NTY=", "number": 34238, "title": "Tensorflow failed to find 'TRTEngineOp' when building pip-package and libtensorflow_cc.so", "user": {"login": "qcraftai", "id": 47136815, "node_id": "MDQ6VXNlcjQ3MTM2ODE1", "avatar_url": "https://avatars2.githubusercontent.com/u/47136815?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qcraftai", "html_url": "https://github.com/qcraftai", "followers_url": "https://api.github.com/users/qcraftai/followers", "following_url": "https://api.github.com/users/qcraftai/following{/other_user}", "gists_url": "https://api.github.com/users/qcraftai/gists{/gist_id}", "starred_url": "https://api.github.com/users/qcraftai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qcraftai/subscriptions", "organizations_url": "https://api.github.com/users/qcraftai/orgs", "repos_url": "https://api.github.com/users/qcraftai/repos", "events_url": "https://api.github.com/users/qcraftai/events{/privacy}", "received_events_url": "https://api.github.com/users/qcraftai/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1754777628, "node_id": "MDU6TGFiZWwxNzU0Nzc3NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu:tensorrt", "name": "comp:gpu:tensorrt", "color": "ea98ba", "default": false, "description": "Issues specific to TensorRT"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-11-13T17:51:20Z", "updated_at": "2019-12-26T18:34:21Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: \r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 1.14\r\n- Python version: 3.6\r\n- Installed using virtualenv? pip? conda?: Build from source\r\n- Bazel version (if compiling from source): 0.24.1\r\n- GCC/Compiler version (if compiling from source): gcc 7.4.0\r\n- CUDA/cuDNN version:10.0\r\n- GPU model and memory: 2080ti 11GB\r\n\r\n**Describe the problem**\r\n\r\nIn brief, I built tensorflow for both python (pip_package) and c++ (libtensorflow_cc.so), I want to train a model, convert it to tf-trt in python, then run it on c++. And it failed when running it on c++.\r\n\r\nHere are the details:\r\n\r\nI'm trying to build tensorflow python version by bazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package and build c++ version by bazel build --config=opt --config=monolithic --config=cuda //tensorflow:libtensorflow_cc.so. And I want them both with tensorrt support. After building it sequentially (configure first, build_pip_package and then libtensorflow_cc.so), I find that the python version could load tensorrt successfully, but when I'm trying to run session run on c++, it gives me the error saying:\r\n\r\n```\r\nCheck failed: status.ok() Loading error: Op type not registered 'TRTEngineOp' in binary running on my_dev_docker. Make sure the Op and Kernel are registered in the binary running in this process. Note that if you\r\nare loading a saved graph which used ops from tf.contrib, accessing (e.g.) `tf.contrib.resampler` should be done before importing the graph, as contrib ops are lazily registered when the module is first accessed.\r\n```\r\n\r\nSince I'm using tf 1.14 where the tensorrt has been promoted to first-class citizen from tf.contrib. So I believe that I don't need to dynatically load it in my c++ code using c api \"TF_LoadLibrary\". So I started to suspect that maybe the tensorrt support is successfully installed but not on the c++ one and I didn't find any good reference on the internet on how to enable tf-trt for tensorflow_cc.so.\r\n\r\nThe success of python tensorflow with tensorrt support is tested by running \"from tensorflow.python.compiler.tensorrt import trt_convert as trt\". Although I have to run \"export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/TensorRT-5.1.2.2/lib\" first otherwise it will say \"ImportError: libnvinfer.so.5: cannot open shared object file: No such file or directory\".\r\n\r\nThe following is the exact command:\r\n\r\n PYTHON_BIN_PATH=/usr/bin/python3.6 \\                                                                                                                                                                                                                                              \r\n PYTHON_LIB_PATH=/usr/local/lib/python3.6/dist-packages \\                                                                                                                                                                                                                          \r\n TF_ENABLE_XLA=1 \\                                                                                                                                                                                                                                                                 \r\n TF_NEED_OPENCL_SYCL=0 \\                                                                                                                                                                                                                                                           \r\n TF_NEED_ROCM=0 \\                                                                                                                                                                                                                                                                  \r\n TF_NEED_CUDA=1 \\                                                                                                                                                                                                                                                                  \r\n TF_CUDA_VERSION=10 \\                                                                                                                                                                                                                                                              \r\n TF_CUDA_PATHS=/usr/local/cuda,/usr/lib/x86_64-linux-gnu,/usr/include \\                                                                                                                                                                                                            \r\n CUDA_TOOLKIT_PATH=/usr/local/cuda \\                                                                                                                                                                                                                                               \r\n CUDNN_INSTALL_PATH=/usr/lib/x86_64-linux-gnu \\                                                                                                                                                                                                                                    \r\n TF_CUDNN_VERSION=7 \\                                                                                                                                                                                                                                                              \r\n TF_NEED_TENSORRT=1 \\                                                                                                                                                                                                                                                              \r\n TF_TENSORRT_VERSION=5 \\                                                                                                                                                                                                                                                           \r\n TENSORRT_INSTALL_PATH=/usr/local/TensorRT-5.1.2.2 \\                                                                                                                                                                                                                               \r\n TF_NCCL_VERSION=2 \\                                                                                                                                                                                                                                                               \r\n TF_CUDA_COMPUTE_CAPABILITIES=\"6.1,7.5\" \\                                                                                                                                                                                                                                          \r\n TF_CUDA_CLANG=0 \\                                                                                                                                                                                                                                                                 \r\n TF_DOWNLOAD_CLANG=0 \\                                                                                                                                                                                                                                                             \r\n GCC_HOST_COMPILER_PATH=/usr/bin/gcc \\                                                                                                                                                                                                                                             \r\n CLANG_CUDA_COMPILER_PATH=/usr/local/clang_8.0.0/bin/clang \\                                                                                                                                                                                                                       \r\n TF_NEED_MPI=0 \\                                                                                                                                                                                                                                                                   \r\n CC_OPT_FLAGS=\"-mavx -Wno-sign-compare\" \\                                                                                                                                                                                                                                          \r\n TF_SET_ANDROID_WORKSPACE=0 \\                                                                                                                                                                                                                                                      \r\n ./configure                                                                                                                                                                                                                                                                       \r\n                                                                                                                                                                                                                                                                                   \r\n bazel build --config=opt --config=cuda //tensorflow/tools/pip_package:build_pip_package                                                                                                                                                                                           \r\n ./bazel-bin/tensorflow/tools/pip_package/build_pip_package /tmp/tensorflow_pkg                                                                                                                                                                                                    \r\n pip3 install /tmp/tensorflow_pkg/tensorflow-1.14.0-cp36-cp36m-linux_x86_64.whl                                                                                                                                                                                                    \r\n                                                                                                                                                                                                                                                                                   \r\n bazel build --config=opt --config=monolithic --config=cuda //tensorflow:libtensorflow_cc.so\r\n\r\n**Any other info / logs**\r\n\r\nI run the conversion in python by:\r\n\r\nfrom tensorflow.python.compiler.tensorrt import trt_convert as trt\r\nconverter = trt.TrtGraphConverter(input_saved_model_dir=input_saved_model_dir)\r\nconverter.convert()\r\nconverter.save(output_saved_model_dir)\r\n\r\nI run the converted model in c++ by:\r\n\r\nconst auto status =                                                                                                                                                                                                                                                             \r\n       LoadSavedModel(session_options, run_options, net_param_.model_path(),                                                                                                                                                                                                       \r\n                      {tensorflow::kSavedModelTagServe}, &bundle_, gpu_id);\r\n\r\nAnd I get error message from status.error_message();\r\n\r\nCould you kindly provide some hints on what I might be doing wrong?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34230", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34230/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34230/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34230/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34230", "id": 522212503, "node_id": "MDU6SXNzdWU1MjIyMTI1MDM=", "number": 34230, "title": "Android - Posenet is slow/laggy", "user": {"login": "HBiSoft", "id": 35602540, "node_id": "MDQ6VXNlcjM1NjAyNTQw", "avatar_url": "https://avatars1.githubusercontent.com/u/35602540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/HBiSoft", "html_url": "https://github.com/HBiSoft", "followers_url": "https://api.github.com/users/HBiSoft/followers", "following_url": "https://api.github.com/users/HBiSoft/following{/other_user}", "gists_url": "https://api.github.com/users/HBiSoft/gists{/gist_id}", "starred_url": "https://api.github.com/users/HBiSoft/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/HBiSoft/subscriptions", "organizations_url": "https://api.github.com/users/HBiSoft/orgs", "repos_url": "https://api.github.com/users/HBiSoft/repos", "events_url": "https://api.github.com/users/HBiSoft/events{/privacy}", "received_events_url": "https://api.github.com/users/HBiSoft/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "yyoon", "id": 1309817, "node_id": "MDQ6VXNlcjEzMDk4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1309817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yyoon", "html_url": "https://github.com/yyoon", "followers_url": "https://api.github.com/users/yyoon/followers", "following_url": "https://api.github.com/users/yyoon/following{/other_user}", "gists_url": "https://api.github.com/users/yyoon/gists{/gist_id}", "starred_url": "https://api.github.com/users/yyoon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yyoon/subscriptions", "organizations_url": "https://api.github.com/users/yyoon/orgs", "repos_url": "https://api.github.com/users/yyoon/repos", "events_url": "https://api.github.com/users/yyoon/events{/privacy}", "received_events_url": "https://api.github.com/users/yyoon/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yyoon", "id": 1309817, "node_id": "MDQ6VXNlcjEzMDk4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1309817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yyoon", "html_url": "https://github.com/yyoon", "followers_url": "https://api.github.com/users/yyoon/followers", "following_url": "https://api.github.com/users/yyoon/following{/other_user}", "gists_url": "https://api.github.com/users/yyoon/gists{/gist_id}", "starred_url": "https://api.github.com/users/yyoon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yyoon/subscriptions", "organizations_url": "https://api.github.com/users/yyoon/orgs", "repos_url": "https://api.github.com/users/yyoon/repos", "events_url": "https://api.github.com/users/yyoon/events{/privacy}", "received_events_url": "https://api.github.com/users/yyoon/received_events", "type": "User", "site_admin": false}, {"login": "lintian06", "id": 8652095, "node_id": "MDQ6VXNlcjg2NTIwOTU=", "avatar_url": "https://avatars3.githubusercontent.com/u/8652095?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lintian06", "html_url": "https://github.com/lintian06", "followers_url": "https://api.github.com/users/lintian06/followers", "following_url": "https://api.github.com/users/lintian06/following{/other_user}", "gists_url": "https://api.github.com/users/lintian06/gists{/gist_id}", "starred_url": "https://api.github.com/users/lintian06/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lintian06/subscriptions", "organizations_url": "https://api.github.com/users/lintian06/orgs", "repos_url": "https://api.github.com/users/lintian06/repos", "events_url": "https://api.github.com/users/lintian06/events{/privacy}", "received_events_url": "https://api.github.com/users/lintian06/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2019-11-13T13:09:05Z", "updated_at": "2020-03-13T05:58:43Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- I'm using the posenet example\r\n- Samsung J7 Pro running Android 9\r\n\r\n**Describe the current behavior**\r\nThe preview is slow/laggy. The interpreter takes on avarage 300ms when using GPU and 400ms when using CPU\r\n\r\n**Describe the expected behavior**\r\nThe preview should display the frames smoothly\r\n\r\n**Code to reproduce the issue**\r\nI'm running the posenet example application\r\n\r\n**Other info / logs**\r\nThis issue is not present in the Tensorflow Detect example. \r\nI tried reducing the preview size, but the issue remains\r\n\r\n    org.tensorflow.lite.examples.posenet I/posenet: Interpreter took 305,41 ms\r\n    org.tensorflow.lite.examples.posenet I/posenet: Scaling to [-1,1] took 104,03 ms\r\n\r\nPlease let me know if you need more info.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34219", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34219/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34219/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34219/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34219", "id": 522044572, "node_id": "MDU6SXNzdWU1MjIwNDQ1NzI=", "number": 34219, "title": "STM32F7-Disco Hello World example fails to build", "user": {"login": "jomoengineer", "id": 10980402, "node_id": "MDQ6VXNlcjEwOTgwNDAy", "avatar_url": "https://avatars2.githubusercontent.com/u/10980402?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jomoengineer", "html_url": "https://github.com/jomoengineer", "followers_url": "https://api.github.com/users/jomoengineer/followers", "following_url": "https://api.github.com/users/jomoengineer/following{/other_user}", "gists_url": "https://api.github.com/users/jomoengineer/gists{/gist_id}", "starred_url": "https://api.github.com/users/jomoengineer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jomoengineer/subscriptions", "organizations_url": "https://api.github.com/users/jomoengineer/orgs", "repos_url": "https://api.github.com/users/jomoengineer/repos", "events_url": "https://api.github.com/users/jomoengineer/events{/privacy}", "received_events_url": "https://api.github.com/users/jomoengineer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rockyrhodes", "id": 7253968, "node_id": "MDQ6VXNlcjcyNTM5Njg=", "avatar_url": "https://avatars2.githubusercontent.com/u/7253968?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rockyrhodes", "html_url": "https://github.com/rockyrhodes", "followers_url": "https://api.github.com/users/rockyrhodes/followers", "following_url": "https://api.github.com/users/rockyrhodes/following{/other_user}", "gists_url": "https://api.github.com/users/rockyrhodes/gists{/gist_id}", "starred_url": "https://api.github.com/users/rockyrhodes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rockyrhodes/subscriptions", "organizations_url": "https://api.github.com/users/rockyrhodes/orgs", "repos_url": "https://api.github.com/users/rockyrhodes/repos", "events_url": "https://api.github.com/users/rockyrhodes/events{/privacy}", "received_events_url": "https://api.github.com/users/rockyrhodes/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rockyrhodes", "id": 7253968, "node_id": "MDQ6VXNlcjcyNTM5Njg=", "avatar_url": "https://avatars2.githubusercontent.com/u/7253968?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rockyrhodes", "html_url": "https://github.com/rockyrhodes", "followers_url": "https://api.github.com/users/rockyrhodes/followers", "following_url": "https://api.github.com/users/rockyrhodes/following{/other_user}", "gists_url": "https://api.github.com/users/rockyrhodes/gists{/gist_id}", "starred_url": "https://api.github.com/users/rockyrhodes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rockyrhodes/subscriptions", "organizations_url": "https://api.github.com/users/rockyrhodes/orgs", "repos_url": "https://api.github.com/users/rockyrhodes/repos", "events_url": "https://api.github.com/users/rockyrhodes/events{/privacy}", "received_events_url": "https://api.github.com/users/rockyrhodes/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2019-11-13T08:43:29Z", "updated_at": "2020-01-23T07:25:33Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nNAME=\"Ubuntu\"\r\nVERSION=\"18.04.3 LTS (Bionic Beaver)\"\r\nID=ubuntu\r\nID_LIKE=debian\r\nPRETTY_NAME=\"Ubuntu 18.04.3 LTS\"\r\nVERSION_ID=\"18.04\"\r\n\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version: Latest\r\n- Python version: 2.7.15+\r\n- Installed using virtualenv? pip? conda?: No, git\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source): gcc (Ubuntu 7.4.0-1ubuntu1~18.04.1) 7.4.0\r\n- CUDA/cuDNN version: \r\n- GPU model and memory: Genuine Intel(R) CPU T2400  @ 1.83GHz / 2Gb mem\r\n\r\n\r\n\r\n**Describe the problem**\r\nI am attempting to build the Hello World example for the STM32F7-Disco from the following link but it is failing to build as see below.\r\nExample link:\r\n[https://github.com/tensorflow/tensorflow/tree/master/tensorflow/lite/experimental/micro/examples/hello_world](url)\r\n\r\n**Build Error**\r\n\r\n```\r\n:~/developement/tensor-lite-mcu/tensorflow$ make -f tensorflow/lite/experimental/micro/tools/make/Makefile TARGET=mbed TAGS=\"CMSIS disco_f746ng\" generate_hello_world_mbed_project\r\ntensorflow/lite/experimental/micro/tools/make/download_and_extract.sh \"https://storage.googleapis.com/mirror.tensorflow.org/github.com/google/flatbuffers/archive/v1.11.0.tar.gz\" \"02c64880acb89dbd57eebacfd67200d8\" tensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers \r\ndownloading https://storage.googleapis.com/mirror.tensorflow.org/github.com/google/flatbuffers/archive/v1.11.0.tar.gz\r\ntensorflow/lite/experimental/micro/tools/make/download_and_extract.sh \"https://github.com/ARM-software/CMSIS_5/archive/01c7adb7685da540be9297b5a93e6640ea3333ce.zip\" \"3dec53cc74f1d5d79036952137be5d5e\" tensorflow/lite/experimental/micro/tools/make/downloads/cmsis \r\ndownloading https://github.com/ARM-software/CMSIS_5/archive/01c7adb7685da540be9297b5a93e6640ea3333ce.zip\r\ntensorflow/lite/experimental/micro/tools/make/download_and_extract.sh \"https://github.com/AmbiqMicro/TFLiteMicro_CustCMSIS/archive/8f63966c5692e6a3a83956efd2e4aed77c4c9949.zip\" \"4fb327201034ee0a820b72de1e807d27\" tensorflow/lite/experimental/micro/tools/make/downloads/CMSIS_ext \r\ndownloading https://github.com/AmbiqMicro/TFLiteMicro_CustCMSIS/archive/8f63966c5692e6a3a83956efd2e4aed77c4c9949.zip\r\ntensorflow/lite/experimental/micro/tools/make/download_and_extract.sh \"https://github.com/mborgerding/kissfft/archive/v130.zip\" \"438ba1fef5783cc5f5f201395cc477ca\" tensorflow/lite/experimental/micro/tools/make/downloads/kissfft patch_kissfft\r\ndownloading https://github.com/mborgerding/kissfft/archive/v130.zip\r\nFinished patching kissfft\r\ntensorflow/lite/experimental/micro/tools/make/download_and_extract.sh \"https://storage.googleapis.com/download.tensorflow.org/data/tf_lite_micro_person_data_grayscale_2019_11_07.zip\" \"e6430de25aa92bcb807d07278a1b5b90\" tensorflow/lite/experimental/micro/tools/make/downloads/person_model_grayscale \r\ndownloading https://storage.googleapis.com/download.tensorflow.org/data/tf_lite_micro_person_data_grayscale_2019_11_07.zip\r\nmake: *** No rule to make target 'tensorflow/lite/experimental/micro/tools/make/gen/mbed_cortex-m4/prj/hello_world/mbed/third_party/gemmlowp/fixedpoint/fixedpoint.h', needed by 'generate_hello_world_mbed_project'.  Stop.\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34218", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34218/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34218/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34218/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/34218", "id": 522037124, "node_id": "MDExOlB1bGxSZXF1ZXN0MzQwMzA0Mjgz", "number": 34218, "title": "Add empty linker_bin_path", "user": {"login": "Flamefire", "id": 309017, "node_id": "MDQ6VXNlcjMwOTAxNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/309017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Flamefire", "html_url": "https://github.com/Flamefire", "followers_url": "https://api.github.com/users/Flamefire/followers", "following_url": "https://api.github.com/users/Flamefire/following{/other_user}", "gists_url": "https://api.github.com/users/Flamefire/gists{/gist_id}", "starred_url": "https://api.github.com/users/Flamefire/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Flamefire/subscriptions", "organizations_url": "https://api.github.com/users/Flamefire/orgs", "repos_url": "https://api.github.com/users/Flamefire/repos", "events_url": "https://api.github.com/users/Flamefire/events{/privacy}", "received_events_url": "https://api.github.com/users/Flamefire/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-11-13T08:28:08Z", "updated_at": "2019-11-27T18:57:21Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/34218", "html_url": "https://github.com/tensorflow/tensorflow/pull/34218", "diff_url": "https://github.com/tensorflow/tensorflow/pull/34218.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/34218.patch"}, "body": "Fixes regression introduced in #34202"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34217", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34217/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34217/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34217/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34217", "id": 522007698, "node_id": "MDU6SXNzdWU1MjIwMDc2OTg=", "number": 34217, "title": "Incorrect predictions occur when using a custom quantized model", "user": {"login": "on-device-ai", "id": 44540872, "node_id": "MDQ6VXNlcjQ0NTQwODcy", "avatar_url": "https://avatars2.githubusercontent.com/u/44540872?v=4", "gravatar_id": "", "url": "https://api.github.com/users/on-device-ai", "html_url": "https://github.com/on-device-ai", "followers_url": "https://api.github.com/users/on-device-ai/followers", "following_url": "https://api.github.com/users/on-device-ai/following{/other_user}", "gists_url": "https://api.github.com/users/on-device-ai/gists{/gist_id}", "starred_url": "https://api.github.com/users/on-device-ai/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/on-device-ai/subscriptions", "organizations_url": "https://api.github.com/users/on-device-ai/orgs", "repos_url": "https://api.github.com/users/on-device-ai/repos", "events_url": "https://api.github.com/users/on-device-ai/events{/privacy}", "received_events_url": "https://api.github.com/users/on-device-ai/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MeghnaNatraj", "id": 8790823, "node_id": "MDQ6VXNlcjg3OTA4MjM=", "avatar_url": "https://avatars0.githubusercontent.com/u/8790823?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MeghnaNatraj", "html_url": "https://github.com/MeghnaNatraj", "followers_url": "https://api.github.com/users/MeghnaNatraj/followers", "following_url": "https://api.github.com/users/MeghnaNatraj/following{/other_user}", "gists_url": "https://api.github.com/users/MeghnaNatraj/gists{/gist_id}", "starred_url": "https://api.github.com/users/MeghnaNatraj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MeghnaNatraj/subscriptions", "organizations_url": "https://api.github.com/users/MeghnaNatraj/orgs", "repos_url": "https://api.github.com/users/MeghnaNatraj/repos", "events_url": "https://api.github.com/users/MeghnaNatraj/events{/privacy}", "received_events_url": "https://api.github.com/users/MeghnaNatraj/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MeghnaNatraj", "id": 8790823, "node_id": "MDQ6VXNlcjg3OTA4MjM=", "avatar_url": "https://avatars0.githubusercontent.com/u/8790823?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MeghnaNatraj", "html_url": "https://github.com/MeghnaNatraj", "followers_url": "https://api.github.com/users/MeghnaNatraj/followers", "following_url": "https://api.github.com/users/MeghnaNatraj/following{/other_user}", "gists_url": "https://api.github.com/users/MeghnaNatraj/gists{/gist_id}", "starred_url": "https://api.github.com/users/MeghnaNatraj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MeghnaNatraj/subscriptions", "organizations_url": "https://api.github.com/users/MeghnaNatraj/orgs", "repos_url": "https://api.github.com/users/MeghnaNatraj/repos", "events_url": "https://api.github.com/users/MeghnaNatraj/events{/privacy}", "received_events_url": "https://api.github.com/users/MeghnaNatraj/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-11-13T07:18:29Z", "updated_at": "2020-03-02T02:05:42Z", "closed_at": null, "author_association": "NONE", "body": "- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: STM32F746 Discovery kit\r\n- TensorFlow installed from (source or binary):binary\r\n- TensorFlow version (use command below):2.0.0\r\n- Python version:3.7.4\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:10.0\r\n- GPU model and memory:Quadro P4000 8GB\r\n\r\nThis is a issue with TensorFlow Lite for Microcontrollers. Incorrect predictions occur when my ClassifyHeartbeats ( https://github.com/on-device-ai/ClassifyHeartbeats/tree/quantized_model/ ) project uses the quantized model; however, if I use a no quantized model, it is normal predictions."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34215", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34215/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34215/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34215/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34215", "id": 521979151, "node_id": "MDU6SXNzdWU1MjE5NzkxNTE=", "number": 34215, "title": "build tf2.0 with gcc4.8.5", "user": {"login": "zh794390558", "id": 3038472, "node_id": "MDQ6VXNlcjMwMzg0NzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/3038472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zh794390558", "html_url": "https://github.com/zh794390558", "followers_url": "https://api.github.com/users/zh794390558/followers", "following_url": "https://api.github.com/users/zh794390558/following{/other_user}", "gists_url": "https://api.github.com/users/zh794390558/gists{/gist_id}", "starred_url": "https://api.github.com/users/zh794390558/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zh794390558/subscriptions", "organizations_url": "https://api.github.com/users/zh794390558/orgs", "repos_url": "https://api.github.com/users/zh794390558/repos", "events_url": "https://api.github.com/users/zh794390558/events{/privacy}", "received_events_url": "https://api.github.com/users/zh794390558/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-11-13T06:01:22Z", "updated_at": "2020-01-18T18:29:20Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n```\r\n[tensorflow]$ gcc -v\r\nUsing built-in specs.\r\nCOLLECT_GCC=gcc\r\nCOLLECT_LTO_WRAPPER=/usr/libexec/gcc/x86_64-redhat-linux/4.8.5/lto-wrapper\r\nTarget: x86_64-redhat-linux\r\nConfigured with: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-bootstrap --enable-shared --enable-threads=posix --enable-checking=release --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-linker-hash-style=gnu --enable-languages=c,c++,objc,obj-c++,java,fortran,ada,go,lto --enable-plugin --enable-initfini-array --disable-libgcj --with-isl=/builddir/build/BUILD/gcc-4.8.5-20150702/obj-x86_64-redhat-linux/isl-install --with-cloog=/builddir/build/BUILD/gcc-4.8.5-20150702/obj-x86_64-redhat-linux/cloog-install --enable-gnu-indirect-function --with-tune=generic --with-arch_32=x86-64 --build=x86_64-redhat-linux\r\nThread model: posix\r\ngcc version 4.8.5 20150623 (Red Hat 4.8.5-4) (GCC) \r\n[tensorflow]$ g++ -v\r\nUsing built-in specs.\r\nCOLLECT_GCC=g++\r\nCOLLECT_LTO_WRAPPER=/usr/libexec/gcc/x86_64-redhat-linux/4.8.5/lto-wrapper\r\nTarget: x86_64-redhat-linux\r\nConfigured with: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=http://bugzilla.redhat.com/bugzilla --enable-bootstrap --enable-shared --enable-threads=posix --enable-checking=release --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-gnu-unique-object --enable-linker-build-id --with-linker-hash-style=gnu --enable-languages=c,c++,objc,obj-c++,java,fortran,ada,go,lto --enable-plugin --enable-initfini-array --disable-libgcj --with-isl=/builddir/build/BUILD/gcc-4.8.5-20150702/obj-x86_64-redhat-linux/isl-install --with-cloog=/builddir/build/BUILD/gcc-4.8.5-20150702/obj-x86_64-redhat-linux/cloog-install --enable-gnu-indirect-function --with-tune=generic --with-arch_32=x86-64 --build=x86_64-redhat-linux\r\nThread model: posix\r\ngcc version 4.8.5 20150623 (Red Hat 4.8.5-4) (GCC) \r\n```\r\n\r\nI change the std++14 to std++11 in tensorflow/.bazelrc, and compile with bazel build -s -c opt //tensorflow:libtensorflow_cc.so\r\n\r\n**Other info / logs**\r\n```\r\n  /usr/bin/gcc -U_FORTIFY_SOURCE -fstack-protector -Wall -Wunused-but-set-parameter -Wno-free-nonheap-object -fno-omit-frame-pointer -g0 -O2 '-D_FORTIFY_SOURCE=1' -DNDEBUG -ffunction-sections -fdata-sections '-std=c++0x' -MD -MF bazel-out/k8-opt/bin/external/aws/_objs/aws/DeleteBucketMetricsConfigurationRequest.pic.d '-frandom-seed=bazel-out/k8-opt/bin/external/aws/_objs/aws/DeleteBucketMetricsConfigurationRequest.pic.o' -fPIC -DCURL_STATICLIB -DPLATFORM_LINUX -DENABLE_CURL_CLIENT -DENABLE_NO_ENCRYPTION -iquote external/aws -iquote bazel-out/k8-opt/bin/external/aws -iquote external/curl -iquote bazel-out/k8-opt/bin/external/curl -iquote external/zlib_archive -iquote bazel-out/k8-opt/bin/external/zlib_archive -iquote external/boringssl -iquote bazel-out/k8-opt/bin/external/boringssl -isystem external/aws/aws-cpp-sdk-core/include -isystem bazel-out/k8-opt/bin/external/aws/aws-cpp-sdk-core/include -isystem external/aws/aws-cpp-sdk-s3/include -isystem bazel-out/k8-opt/bin/external/aws/aws-cpp-sdk-s3/include -isystem external/curl/include -isystem bazel-out/k8-opt/bin/external/curl/include -isystem external/zlib_archive -isystem bazel-out/k8-opt/bin/external/zlib_archive -isystem external/boringssl/src/include -isystem bazel-out/k8-opt/bin/external/boringssl/src/include '-std=c++11' '-DAWS_SDK_VERSION_MAJOR=1' '-DAWS_SDK_VERSION_MINOR=5' '-DAWS_SDK_VERSION_PATCH=8' -fno-canonical-system-headers -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -c external/aws/aws-cpp-sdk-s3/source/model/DeleteBucketMetricsConfigurationRequest.cpp -o bazel-out/k8-opt/bin/external/aws/_objs/aws/DeleteBucketMetricsConfigurationRequest.pic.o)\r\nERROR: /home/odin/ethanzhanghui/.cache/bazel/_bazel_ethanzhanghui/6fbeba4478bcebc2af8a7fbe84821865/external/llvm/BUILD.bazel:3399:1: C++ compilation of rule '@llvm//:support' failed (Exit 1)\r\nIn file included from external/llvm/include/llvm/ADT/ArrayRef.h:15:0,\r\n                 from external/llvm/include/llvm/ADT/DenseMapInfo.h:16,\r\n                 from external/llvm/include/llvm/ADT/DenseMap.h:16,\r\n                 from external/llvm/include/llvm/ADT/DenseSet.h:16,\r\n                 from external/llvm/lib/Support/DynamicLibrary.cpp:15:\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:555:49: error: 'std::index_sequence' has not been declared\r\n   template <size_t... Ns> value_type deref(std::index_sequence<Ns...>) const {\r\n                                                 ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:555:63: error: expected ',' or '...' before '<' token\r\n   template <size_t... Ns> value_type deref(std::index_sequence<Ns...>) const {\r\n                                                               ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:560:36: error: 'std::index_sequence' has not been declared\r\n   decltype(iterators) tup_inc(std::index_sequence<Ns...>) const {\r\n                                    ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:560:50: error: expected ',' or '...' before '<' token\r\n   decltype(iterators) tup_inc(std::index_sequence<Ns...>) const {\r\n                                                  ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:565:36: error: 'std::index_sequence' has not been declared\r\n   decltype(iterators) tup_dec(std::index_sequence<Ns...>) const {\r\n                                    ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:565:50: error: expected ',' or '...' before '<' token\r\n   decltype(iterators) tup_dec(std::index_sequence<Ns...>) const {\r\n                                                  ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h: In member function 'llvm::detail::zip_common<ZipType, Iters>::value_type llvm::detail::zip_common<ZipType, Iters>::operator*()':\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:572:41: error: 'index_sequence_for' is not a member of 'std'\r\n   ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h: In member function 'llvm::concat_iterator<ValueT, IterTs>& llvm::concat_iterator<ValueT, IterTs>::operator++()':\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:897:15: error: 'index_sequence_for' is not a member of 'std'\r\n     increment(std::index_sequence_for<IterTs...>());\r\n               ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:897:45: error: expected primary-expression before '...' token\r\n     increment(std::index_sequence_for<IterTs...>());\r\n                                             ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h: In member function 'ValueT& llvm::concat_iterator<ValueT, IterTs>::operator*() const':\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:902:16: error: 'index_sequence_for' is not a member of 'std'\r\n     return get(std::index_sequence_for<IterTs...>());\r\n                ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:902:46: error: expected primary-expression before '...' token\r\n     return get(std::index_sequence_for<IterTs...>());\r\n                                              ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:902:52: error: there are no arguments to 'get' that depend on a template parameter, so a declaration of 'get' must be available [-fpermissive]\r\n     return get(std::index_sequence_for<IterTs...>());\r\n                                                    ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:902:52: note: (if you use '-fpermissive', G++ will accept your code, but allowing the use of an undeclared name is deprecated)\r\nexternal/llvm/include/llvm/ADT/STLExtras.h: At global scope:\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:926:52: error: 'std::index_sequence' has not been declared\r\n   template <size_t... Ns> iterator begin_impl(std::index_sequence<Ns...>) {\r\n                                                    ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:926:66: error: expected ',' or '...' before '<' token\r\n   template <size_t... Ns> iterator begin_impl(std::index_sequence<Ns...>) {\r\n                                                                  ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:929:50: error: 'std::index_sequence' has not been declared\r\n   template <size_t... Ns> iterator end_impl(std::index_sequence<Ns...>) {\r\n                                                  ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:929:64: error: expected ',' or '...' before '<' token\r\n   template <size_t... Ns> iterator end_impl(std::index_sequence<Ns...>) {\r\n                                                                ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h: In member function 'llvm::detail::concat_range<ValueT, RangeTs>::iterator llvm::detail::concat_range<ValueT, RangeTs>::begin()':\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:938:40: error: 'index_sequence_for' is not a member of 'std'\r\n   iterator begin() { return begin_impl(std::index_sequence_for<RangeTs...>{}); }\r\n                                        ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:938:71: error: expected primary-expression before '...' token\r\n   iterator begin() { return begin_impl(std::index_sequence_for<RangeTs...>{}); }\r\n                                                                       ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h: In member function 'llvm::detail::concat_range<ValueT, RangeTs>::iterator llvm::detail::concat_range<ValueT, RangeTs>::end()':\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:939:36: error: 'index_sequence_for' is not a member of 'std'\r\n   iterator end() { return end_impl(std::index_sequence_for<RangeTs...>{}); }\r\n                                    ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:939:67: error: expected primary-expression before '...' token\r\n   iterator end() { return end_impl(std::index_sequence_for<RangeTs...>{}); }\r\n                                                                   ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h: At global scope:\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:1507:46: error: 'std::index_sequence' has not been declared\r\n auto apply_tuple_impl(F &&f, Tuple &&t, std::index_sequence<I...>)\r\n                                              ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:1507:60: error: expected ',' or '...' before '<' token\r\n auto apply_tuple_impl(F &&f, Tuple &&t, std::index_sequence<I...>)\r\n                                                            ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:1520:5: error: 'make_index_sequence' is not a member of 'std'\r\n     std::make_index_sequence<\r\n     ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:1520:5: error: 'make_index_sequence' is not a member of 'std'\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:1521:66: error: expected primary-expression before '{' token\r\n         std::tuple_size<typename std::decay<Tuple>::type>::value>{})) {\r\n                                                                  ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:1521:66: error: expected ')' before '{' token\r\nexternal/llvm/include/llvm/ADT/STLExtras.h: In function 'decltype (llvm::detail::apply_tuple_impl(forward<F>(f), forward<Tuple>(t), ((<expression error> < std::tuple_size<typename std::decay<_Tp2>::type>::value) > <expression error>))) llvm::apply_tuple(F&&, Tuple&&)':\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:1522:19: error: expected type-specifier\r\n   using Indices = std::make_index_sequence<\r\n                   ^\r\nexternal/llvm/include/llvm/ADT/STLExtras.h:1526:35: error: 'Indices' was not declared in this scope\r\n                                   Indices{});\r\n                                   ^\r\nTarget //tensorflow:libtensorflow_cc.so failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nINFO: Elapsed time: 7.772s, Critical Path: 5.70s\r\nINFO: 138 processes: 138 local.\r\nFAILED: Build did NOT complete successfully\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34213", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34213/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34213/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34213/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34213", "id": 521921616, "node_id": "MDU6SXNzdWU1MjE5MjE2MTY=", "number": 34213, "title": "MultiWorkerMirroredStrategy distribution error BaseCollectiveExecutor::StartAbort Invalid argument: Lower bound check fail for input 1 from node Mkl2Tf/_30 to node scoped_allocator_concat_1_1", "user": {"login": "RogueLogix", "id": 9971693, "node_id": "MDQ6VXNlcjk5NzE2OTM=", "avatar_url": "https://avatars1.githubusercontent.com/u/9971693?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RogueLogix", "html_url": "https://github.com/RogueLogix", "followers_url": "https://api.github.com/users/RogueLogix/followers", "following_url": "https://api.github.com/users/RogueLogix/following{/other_user}", "gists_url": "https://api.github.com/users/RogueLogix/gists{/gist_id}", "starred_url": "https://api.github.com/users/RogueLogix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RogueLogix/subscriptions", "organizations_url": "https://api.github.com/users/RogueLogix/orgs", "repos_url": "https://api.github.com/users/RogueLogix/repos", "events_url": "https://api.github.com/users/RogueLogix/events{/privacy}", "received_events_url": "https://api.github.com/users/RogueLogix/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 1104829434, "node_id": "MDU6TGFiZWwxMTA0ODI5NDM0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:mkl", "name": "comp:mkl", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "TensorFlow-MKL", "id": 44416303, "node_id": "MDQ6VXNlcjQ0NDE2MzAz", "avatar_url": "https://avatars2.githubusercontent.com/u/44416303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TensorFlow-MKL", "html_url": "https://github.com/TensorFlow-MKL", "followers_url": "https://api.github.com/users/TensorFlow-MKL/followers", "following_url": "https://api.github.com/users/TensorFlow-MKL/following{/other_user}", "gists_url": "https://api.github.com/users/TensorFlow-MKL/gists{/gist_id}", "starred_url": "https://api.github.com/users/TensorFlow-MKL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TensorFlow-MKL/subscriptions", "organizations_url": "https://api.github.com/users/TensorFlow-MKL/orgs", "repos_url": "https://api.github.com/users/TensorFlow-MKL/repos", "events_url": "https://api.github.com/users/TensorFlow-MKL/events{/privacy}", "received_events_url": "https://api.github.com/users/TensorFlow-MKL/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "TensorFlow-MKL", "id": 44416303, "node_id": "MDQ6VXNlcjQ0NDE2MzAz", "avatar_url": "https://avatars2.githubusercontent.com/u/44416303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TensorFlow-MKL", "html_url": "https://github.com/TensorFlow-MKL", "followers_url": "https://api.github.com/users/TensorFlow-MKL/followers", "following_url": "https://api.github.com/users/TensorFlow-MKL/following{/other_user}", "gists_url": "https://api.github.com/users/TensorFlow-MKL/gists{/gist_id}", "starred_url": "https://api.github.com/users/TensorFlow-MKL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TensorFlow-MKL/subscriptions", "organizations_url": "https://api.github.com/users/TensorFlow-MKL/orgs", "repos_url": "https://api.github.com/users/TensorFlow-MKL/repos", "events_url": "https://api.github.com/users/TensorFlow-MKL/events{/privacy}", "received_events_url": "https://api.github.com/users/TensorFlow-MKL/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-11-13T02:41:19Z", "updated_at": "2020-02-12T00:33:52Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): no-ish, [keras multi-worker mirrored example](https://www.tensorflow.org/tutorials/distribute/multi_worker_with_keras)\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Fedora Server 31\r\n- TensorFlow installed from (source or binary): source (master branch, commit 73a34133f6a414a03e54971f4975584c3d6251cc), identical on both machines\r\n- TensorFlow version (use command below): v1.12.1-17924-g73a34133f6 2.0.0\r\n- Python version: 3.7.5\r\n- Bazel version (if compiling from source): 1.1.0\r\n- GCC/Compiler version (if compiling from source): GCC 9.2.1\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\nCrashes at model.fit\r\n\r\n**Describe the expected behavior**\r\nNot, crash?\r\n\r\n**Code to reproduce the issue**\r\nExact code used\r\n[Node0](https://pastebin.com/CtTjs146)\r\n[Node1](https://pastebin.com/5LtGA6Hd)\r\n\r\n**Other info / logs**\r\nLogs from run\r\n[Node0](https://pastebin.com/HQAQwtBg)\r\n[Node1](https://pastebin.com/ZFUjWkzf)\r\n\r\nTo compile on Fedora 31 I did need to use a grpc version patch, this patch can be found [here](https://github.com/tensorflow/tensorflow/issues/33758#issuecomment-547867642) in issue #33758. It consists of running this command before compiling tensorflow.\r\n```\r\ncurl -L https://github.com/tensorflow/tensorflow/compare/master...hi-ogawa:grpc-backport-pr-18950.patch | git apply\r\n```\r\n\r\nbazel configured with Python 3 directory, and default otherwise.\r\nbazel build command used is as follows\r\n```\r\nbazel build --config=mkl --config=opt //tensorflow/tools/pip_package:build_pip_package\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34201", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34201/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34201/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34201/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34201", "id": 521580377, "node_id": "MDU6SXNzdWU1MjE1ODAzNzc=", "number": 34201, "title": "keras.backend.function with learning phase gives AttributeError", "user": {"login": "StefReck", "id": 33060163, "node_id": "MDQ6VXNlcjMzMDYwMTYz", "avatar_url": "https://avatars2.githubusercontent.com/u/33060163?v=4", "gravatar_id": "", "url": "https://api.github.com/users/StefReck", "html_url": "https://github.com/StefReck", "followers_url": "https://api.github.com/users/StefReck/followers", "following_url": "https://api.github.com/users/StefReck/following{/other_user}", "gists_url": "https://api.github.com/users/StefReck/gists{/gist_id}", "starred_url": "https://api.github.com/users/StefReck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/StefReck/subscriptions", "organizations_url": "https://api.github.com/users/StefReck/orgs", "repos_url": "https://api.github.com/users/StefReck/repos", "events_url": "https://api.github.com/users/StefReck/events{/privacy}", "received_events_url": "https://api.github.com/users/StefReck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-11-12T14:20:34Z", "updated_at": "2020-01-23T09:30:25Z", "closed_at": null, "author_association": "NONE", "body": "I'm using the following script from the keras docu page to get the output of an intermediate layer in training phase:\r\n``` python\r\nfrom tensorflow.keras import backend as K\r\n\r\nK.function([model.layers[0].input, K.learning_phase()],\r\n           [model.layers[1].output])\r\n```\r\n\r\nWhich throws this error:\r\n``` python\r\nAttributeError                            Traceback (most recent call last)\r\n<ipython-input-2-d35d4dbf76cf> in <module>\r\n      2\r\n      3 K.function([model.layers[0].input, K.learning_phase()],\r\n----> 4            [model.layers[1].output])\r\n\r\n/home/woody/capn/mppi013h/conda_envs/orca_cpu_env/lib/python3.6/site-packages/tensorflow_core/python/keras/backend.py in function(inputs, outputs, updates, name, **kwargs)\r\n   3771       raise ValueError('Session keyword arguments are not support during '\r\n   3772                        'eager execution. You passed: %s' % (kwargs,))\r\n-> 3773     return EagerExecutionFunction(inputs, outputs, updates=updates, name=name)\r\n   3774\r\n   3775   if kwargs:\r\n\r\n/home/woody/capn/mppi013h/conda_envs/orca_cpu_env/lib/python3.6/site-packages/tensorflow_core/python/keras/backend.py in __init__(self, inputs, outputs, updates, name)\r\n   3668             add_sources=True,\r\n   3669             handle_captures=True,\r\n-> 3670             base_graph=source_graph)\r\n   3671\r\n   3672         inputs = [lifted_map[i] for i in inputs]\r\n\r\n/home/woody/capn/mppi013h/conda_envs/orca_cpu_env/lib/python3.6/site-packages/tensorflow_core/python/eager/lift_to_graph.py in lift_to_graph(tensors, graph, sources, disallowed_placeholders, add_sources, handle_captures, base_graph, op_map)\r\n    247   # Check that the initializer does not depend on any placeholders.\r\n    248   sources = object_identity.ObjectIdentitySet(sources or [])\r\n--> 249   visited_ops = set([x.op for x in sources])\r\n    250   op_outputs = collections.defaultdict(set)\r\n    251\r\n\r\n/home/woody/capn/mppi013h/conda_envs/orca_cpu_env/lib/python3.6/site-packages/tensorflow_core/python/eager/lift_to_graph.py in <listcomp>(.0)\r\n    247   # Check that the initializer does not depend on any placeholders.\r\n    248   sources = object_identity.ObjectIdentitySet(sources or [])\r\n--> 249   visited_ops = set([x.op for x in sources])\r\n    250   op_outputs = collections.defaultdict(set)\r\n    251\r\n\r\nAttributeError: 'int' object has no attribute 'op'\r\n``` \r\nUsing this simple model:\r\n``` python\r\nfrom tensorflow.keras.models import Sequential\r\nfrom tensorflow.keras.layers import Dense, Activation\r\n\r\nmodel = Sequential()\r\nmodel.add(Dense(32, input_dim=784))\r\nmodel.add(Activation('relu'))\r\n``` \r\nIf I use keras instead of tensorflow.keras, it works fine. \r\n\r\n- TensorFlow version: 2.0.0\r\n- Python version: 3.6.8\r\n`\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34200", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34200/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34200/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34200/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34200", "id": 521544077, "node_id": "MDU6SXNzdWU1MjE1NDQwNzc=", "number": 34200, "title": "OutOfRangeError when training estimator with filter in the input_fn", "user": {"login": "DenisUllmann", "id": 31477905, "node_id": "MDQ6VXNlcjMxNDc3OTA1", "avatar_url": "https://avatars1.githubusercontent.com/u/31477905?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DenisUllmann", "html_url": "https://github.com/DenisUllmann", "followers_url": "https://api.github.com/users/DenisUllmann/followers", "following_url": "https://api.github.com/users/DenisUllmann/following{/other_user}", "gists_url": "https://api.github.com/users/DenisUllmann/gists{/gist_id}", "starred_url": "https://api.github.com/users/DenisUllmann/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DenisUllmann/subscriptions", "organizations_url": "https://api.github.com/users/DenisUllmann/orgs", "repos_url": "https://api.github.com/users/DenisUllmann/repos", "events_url": "https://api.github.com/users/DenisUllmann/events{/privacy}", "received_events_url": "https://api.github.com/users/DenisUllmann/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-11-12T13:15:47Z", "updated_at": "2019-11-21T18:58:14Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code: YES\r\n- OS Platform and Distribution: WINDOWS 10, 64-bits\r\n- TensorFlow installed from (source or binary): conda install -c anaconda tensorflow-gpu\r\n- TensorFlow version (use command below): 2.0.0\r\n- Python version: 3.7.5\r\n- CUDA/cuDNN version: from conda installation\r\n- GPU model and memory: NVIDIA GE Force 730M, 4.8GB\r\n\r\n**Describe the current behavior**\r\nOutOfRangeError when training estimator with filter in the input_fn\r\nWhen I remove the `.filter(lambda x: x['label'] == 0)` in the `input_fn`, everything works fine.\r\nThe same error appears if I use:\r\n`tf.estimator.train_and_evaluate(KMeansEstimator, train_spec_kmeans, eval_spec_kmeans)`\r\nor\r\n`KMeansEstimator.train(input_fn = lambda: input_fn(data_files) , max_steps=10)`\r\n\r\n**Describe the expected behavior**\r\nNo error during the training with the filtered dataset in the `input_fn` of the estimator\r\n\r\n**Code to reproduce the issue**\r\ntfrecords_path is the path to mnist dataset as TFRecords files with the features described bellow:\r\n```\r\ndef parser(record):\r\n    features={\r\n            'label': tf.io.FixedLenFeature([], tf.int64),\r\n            'height': tf.io.FixedLenFeature([], tf.int64),\r\n            'width': tf.io.FixedLenFeature([], tf.int64),\r\n            'depth': tf.io.FixedLenFeature([], tf.int64),\r\n            'image_raw': tf.io.FixedLenFeature([], tf.string)\r\n            }\r\n    parsed = tf.io.parse_single_example(record, features)\r\n    feats = tf.io.decode_raw(parsed['image_raw'], tf.float64)\r\n    return {'image': feats, 'label': parsed['label']}\r\n\r\ndef input_fn(tfrecords_path):\r\n    dataset = (\r\n        tf.data.TFRecordDataset(tfrecords_path)\r\n        .map(\r\n            map_func=parser,\r\n            num_parallel_calls=int(multiprocessing.cpu_count() * 0.75)\r\n            )\r\n        .filter(lambda x: x['label'] == 0)\r\n        .batch(1024)\r\n        .prefetch(1024)\r\n     )\r\n    iterator = tf.compat.v1.data.make_one_shot_iterator(dataset)\r\n    batch_feats = iterator.get_next()\r\n    return batch_feats\r\n\r\ntrain_spec_kmeans = tf.estimator.TrainSpec(input_fn = lambda: input_fn(data_files) , max_steps=10)\r\neval_spec_kmeans = tf.estimator.EvalSpec(input_fn = lambda: input_fn(data_files) )\r\n\r\nKMeansEstimator = tf.compat.v1.estimator.experimental.KMeans(\r\n    num_clusters=number_of_clusters,\r\n    feature_columns = [tf.feature_column.numeric_column(\r\n        key='image',\r\n        dtype=tf.float64,\r\n        shape=(784,)\r\n    )],\r\n    use_mini_batch=True)\r\n\r\ntf.estimator.train_and_evaluate(KMeansEstimator, train_spec_kmeans, eval_spec_kmeans)\r\n```\r\n\r\n**Other info / logs**\r\n```\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_estimator\\python\\estimator\\estimator.py\", line 370, in train\r\n    loss = self._train_model(input_fn, hooks, saving_listeners)\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_estimator\\python\\estimator\\estimator.py\", line 1160, in _train_model\r\n    return self._train_model_default(input_fn, hooks, saving_listeners)\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_estimator\\python\\estimator\\estimator.py\", line 1194, in _train_model_default\r\n    saving_listeners)\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_estimator\\python\\estimator\\estimator.py\", line 1489, in _train_with_estimator_spec\r\n    log_step_count_steps=log_step_count_steps) as mon_sess:\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_core\\python\\training\\monitored_session.py\", line 584, in MonitoredTrainingSession\r\n    stop_grace_period_secs=stop_grace_period_secs)\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_core\\python\\training\\monitored_session.py\", line 1014, in __init__\r\n    stop_grace_period_secs=stop_grace_period_secs)\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_core\\python\\training\\monitored_session.py\", line 725, in __init__\r\n    self._sess = _RecoverableSession(self._coordinated_creator)\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_core\\python\\training\\monitored_session.py\", line 1207, in __init__\r\n    _WrappedSession.__init__(self, self._create_session())\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_core\\python\\training\\monitored_session.py\", line 1212, in _create_session\r\n    return self._sess_creator.create_session()\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_core\\python\\training\\monitored_session.py\", line 885, in create_session\r\n    hook.after_create_session(self.tf_sess, self.coord)\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_estimator\\python\\estimator\\canned\\kmeans.py\", line 105, in after_create_session\r\n    session.run(self._init_op)\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_core\\python\\client\\session.py\", line 956, in run\r\n    run_metadata_ptr)\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_core\\python\\client\\session.py\", line 1180, in _run\r\n    feed_dict_tensor, options, run_metadata)\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_core\\python\\client\\session.py\", line 1359, in _do_run\r\n    run_metadata)\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_core\\python\\client\\session.py\", line 1384, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.OutOfRangeError: 2 root error(s) found.\r\n  (0) Out of range: End of sequence\r\n         [[node IteratorGetNext (defined at C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_core\\python\\framework\\ops.py:1751) ]]\r\n         [[Shape_1/_37]]\r\n  (1) Out of range: End of sequence\r\n         [[node IteratorGetNext (defined at C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_core\\python\\framework\\ops.py:1751) ]]\r\n0 successful operations.\r\n0 derived errors ignored.\r\n\r\nOriginal stack trace for 'IteratorGetNext':\r\n  File \".\\main.py\", line 144, in <module>\r\n    tf.compat.v1.app.run()\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_core\\python\\platform\\app.py\", line 40, in run\r\n    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\absl\\app.py\", line 299, in run\r\n    _run_main(main, args)\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\absl\\app.py\", line 250, in _run_main\r\n    sys.exit(main(argv))\r\n  File \".\\main.py\", line 136, in main\r\n    launch_training_testing()\r\n  File \".\\main.py\", line 100, in launch_training_testing\r\n    km_ckpt, kmeans = train_test.train_quantizers(FLAGS)\r\n  File \"C:\\Users\\CUI\\ML\\Decentralized_class_V1_tf2\\src\\model\\train_test_tf2TFR.py\", line 334, in train_quantizers\r\n    km_ckpt, kmeans = label_train_quantizers(label, q_c, kmeans, km_ckpt, config)\r\n  File \"C:\\Users\\CUI\\ML\\Decentralized_class_V1_tf2\\src\\model\\train_test_tf2TFR.py\", line 296, in label_train_quantizers\r\n    kmeans[label][q_c].train(input_fn = lambda: kmtrain_input_fn(tfr_train_files) , max_steps=config.km_steps)\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_estimator\\python\\estimator\\estimator.py\", line 370, in train\r\n    loss = self._train_model(input_fn, hooks, saving_listeners)\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_estimator\\python\\estimator\\estimator.py\", line 1160, in _train_model\r\n    return self._train_model_default(input_fn, hooks, saving_listeners)\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_estimator\\python\\estimator\\estimator.py\", line 1187, in _train_model_default\r\n    input_fn, ModeKeys.TRAIN))\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_estimator\\python\\estimator\\estimator.py\", line 1024, in _get_features_and_labels_from_input_fn\r\n    self._call_input_fn(input_fn, mode))\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_estimator\\python\\estimator\\util.py\", line 65, in parse_input_fn_result\r\n    result = iterator.get_next()\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_core\\python\\data\\ops\\iterator_ops.py\", line 426, in get_next\r\n    name=name)\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_core\\python\\ops\\gen_dataset_ops.py\", line 2500, in iterator_get_next\r\n    output_shapes=output_shapes, name=name)\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_core\\python\\framework\\op_def_library.py\", line 793, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_core\\python\\util\\deprecation.py\", line 507, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_core\\python\\framework\\ops.py\", line 3360, in create_op\r\n    attrs, op_def, compute_device)\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_core\\python\\framework\\ops.py\", line 3429, in _create_op_internal\r\n    op_def=op_def)\r\n  File \"C:\\Users\\CUI\\.conda\\envs\\py3tf2_0\\lib\\site-packages\\tensorflow_core\\python\\framework\\ops.py\", line 1751, in __init__\r\n    self._traceback = tf_stack.extract_stack()\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34196", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34196/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34196/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34196/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34196", "id": 521477697, "node_id": "MDU6SXNzdWU1MjE0Nzc2OTc=", "number": 34196, "title": "Keras fails to combine predicted variable-sized sequences", "user": {"login": "shkarupa-alex", "id": 1289725, "node_id": "MDQ6VXNlcjEyODk3MjU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1289725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shkarupa-alex", "html_url": "https://github.com/shkarupa-alex", "followers_url": "https://api.github.com/users/shkarupa-alex/followers", "following_url": "https://api.github.com/users/shkarupa-alex/following{/other_user}", "gists_url": "https://api.github.com/users/shkarupa-alex/gists{/gist_id}", "starred_url": "https://api.github.com/users/shkarupa-alex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shkarupa-alex/subscriptions", "organizations_url": "https://api.github.com/users/shkarupa-alex/orgs", "repos_url": "https://api.github.com/users/shkarupa-alex/repos", "events_url": "https://api.github.com/users/shkarupa-alex/events{/privacy}", "received_events_url": "https://api.github.com/users/shkarupa-alex/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-11-12T10:57:16Z", "updated_at": "2019-11-16T00:38:32Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Google Colab\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v1.12.1-17764-gae26958 2.1.0-dev20191111\r\n- Python version: Google Colab py3\r\n- Bazel version (if compiling from source): No\r\n- GCC/Compiler version (if compiling from source): No\r\n- CUDA/cuDNN version: Google Colab\r\n- GPU model and memory: Google Colab\r\n\r\n**Describe the current behavior**\r\nException raised (from numpy concatenate) when predicting sequence labels with variable sequence length batches.\r\n\r\n**Describe the expected behavior**\r\nThere should be no error, as in fit/evaluate methods work fine.\r\n\r\n**Code to reproduce the issue**\r\nhttps://colab.research.google.com/drive/1IPIkj5PlUWKCpuTm9NWM5BLO_suL5VI3\r\n\r\n**Other info / logs**\r\n```python\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-23-e5e9890a3d75> in <module>()\r\n----> 1 model.predict(get_dataset(labels=False))\r\n\r\n5 frames\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/keras/engine/training.py in predict(self, x, batch_size, verbose, steps, callbacks, max_queue_size, workers, use_multiprocessing)\r\n    972         max_queue_size=max_queue_size,\r\n    973         workers=workers,\r\n--> 974         use_multiprocessing=use_multiprocessing)\r\n    975 \r\n    976   def reset_metrics(self):\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/keras/engine/training_v2.py in predict(self, model, x, batch_size, verbose, steps, callbacks, max_queue_size, workers, use_multiprocessing, **kwargs)\r\n    496         model, ModeKeys.PREDICT, x=x, batch_size=batch_size, verbose=verbose,\r\n    497         steps=steps, callbacks=callbacks, max_queue_size=max_queue_size,\r\n--> 498         workers=workers, use_multiprocessing=use_multiprocessing, **kwargs)\r\n    499 \r\n    500 \r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/keras/engine/training_v2.py in _model_iteration(self, model, mode, x, y, batch_size, verbose, sample_weight, steps, callbacks, max_queue_size, workers, use_multiprocessing, **kwargs)\r\n    473               mode=mode,\r\n    474               training_context=training_context,\r\n--> 475               total_epochs=1)\r\n    476           cbks.make_logs(model, epoch_logs, result, mode)\r\n    477 \r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/keras/engine/training_v2.py in run_one_epoch(model, iterator, execution_function, dataset_size, batch_size, strategy, steps_per_epoch, num_samples, mode, training_context, total_epochs)\r\n    185 \r\n    186   # End of an epoch.\r\n--> 187   aggregator.finalize()\r\n    188   return aggregator.results\r\n    189 \r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/keras/engine/training_utils.py in finalize(self)\r\n    349   def finalize(self):\r\n    350     for result in self.results:\r\n--> 351       result.finalize()\r\n    352     self.results = [i.results for i in self.results]\r\n    353     self.results = nest.pack_sequence_as(self._structure, self.results)\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/keras/engine/training_utils.py in finalize(self)\r\n    187 \r\n    188     else:\r\n--> 189       self.results = np.concatenate(self.results, axis=0)\r\n    190 \r\n    191     if isinstance(self.results, ops.EagerTensor):\r\n\r\n<__array_function__ internals> in concatenate(*args, **kwargs)\r\n\r\nValueError: all the input array dimensions for the concatenation axis must match exactly, but along dimension 1, the array at index 0 has size 7 and the array at index 1 has size 9\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34195", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34195/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34195/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34195/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34195", "id": 521457141, "node_id": "MDU6SXNzdWU1MjE0NTcxNDE=", "number": 34195, "title": "Problem with the Run API  in  C++", "user": {"login": "Yuhala", "id": 22815540, "node_id": "MDQ6VXNlcjIyODE1NTQw", "avatar_url": "https://avatars0.githubusercontent.com/u/22815540?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Yuhala", "html_url": "https://github.com/Yuhala", "followers_url": "https://api.github.com/users/Yuhala/followers", "following_url": "https://api.github.com/users/Yuhala/following{/other_user}", "gists_url": "https://api.github.com/users/Yuhala/gists{/gist_id}", "starred_url": "https://api.github.com/users/Yuhala/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Yuhala/subscriptions", "organizations_url": "https://api.github.com/users/Yuhala/orgs", "repos_url": "https://api.github.com/users/Yuhala/repos", "events_url": "https://api.github.com/users/Yuhala/events{/privacy}", "received_events_url": "https://api.github.com/users/Yuhala/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-11-12T10:19:41Z", "updated_at": "2019-11-15T23:04:12Z", "closed_at": null, "author_association": "NONE", "body": "Hello, I have a problem with the Run API in C++ with the following code:\r\n\r\n```\r\nstd::unique_ptr<tensorflow::Tensor> out_t;\r\nstd::vector<Tensor> res;\r\nstd::string entry_name = \"name\";\r\nstd::string target_ops_name = \"ops_name\";     \r\nTF_CHECK_OK(session.Run({{entry_name, *out_t}},{target_ops_name},{},&res));\r\n```\r\nNB: I have 2 Output tensors with the corresponding names (WithOpName(...)) \"name\" and \"ops_name\". \r\n\r\nI receive the following compilation error when I compile my project in bazel.\r\n```\r\nerror: no matching function for call to 'tensorflow::ClientSession::Run(<brace-enclosed initializer list>, <brace-enclosed initializer list>, <brace-enclosed initializer list>, std::vector<tensorflow::Tensor>*)'\r\n         TF_CHECK_OK(session.Run({{entry_name, *out_t}},{target_ops_name},{},&res));\r\n\r\n```\r\nI use the latest version of tensorflow compiled with bazel. Would be glad if someone could give my hints on what the problem could be. Thanks.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34191", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34191/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34191/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34191/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34191", "id": 521412492, "node_id": "MDU6SXNzdWU1MjE0MTI0OTI=", "number": 34191, "title": "TF2.1 build from source failure", "user": {"login": "sbushmanov", "id": 8139370, "node_id": "MDQ6VXNlcjgxMzkzNzA=", "avatar_url": "https://avatars3.githubusercontent.com/u/8139370?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sbushmanov", "html_url": "https://github.com/sbushmanov", "followers_url": "https://api.github.com/users/sbushmanov/followers", "following_url": "https://api.github.com/users/sbushmanov/following{/other_user}", "gists_url": "https://api.github.com/users/sbushmanov/gists{/gist_id}", "starred_url": "https://api.github.com/users/sbushmanov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sbushmanov/subscriptions", "organizations_url": "https://api.github.com/users/sbushmanov/orgs", "repos_url": "https://api.github.com/users/sbushmanov/repos", "events_url": "https://api.github.com/users/sbushmanov/events{/privacy}", "received_events_url": "https://api.github.com/users/sbushmanov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-11-12T08:56:18Z", "updated_at": "2019-12-06T18:23:31Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: `No`\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: `Linux Ubuntu 18.0.4`\r\n- **Python version tried**: `3.6/3.7`\r\n- **gcc/g++**: `7.4.0 (Ubuntu 7.4.0-1ubuntu1~18.04.1)`\r\n- **TensorFlow installed from (source or binary)**: `source`\r\n- **TensorFlow version (use command below)**: `2.1`\r\ngit clone https://github.com/tensorflow/tensorflow tensorflow  -b r2.1\r\n- **Bazel version (if compiling from source)**: `0.29.1`\r\nBuild label: 0.29.1\r\nBuild target: bazel-out/k8-opt/bin/src/main/java/com/google/devtools/build/lib/bazel/BazelServer_deploy.jar\r\nBuild time: Tue Sep 10 13:44:39 2019 (1568123079)\r\n- **CUDA/cuDNN version**: `V10.1.243/7.6.1`\r\n- **GPU model and memory**: `GeForce GTX 1080 TX 12Gb`\r\n- **Exact command to reproduce**:\r\n\r\n> bazel build --linkopt='-lrt' --copt=-mavx --copt=-mavx2 --copt=-mfma --copt=-mfpmath=both --copt=-mavx --copt=-msse4.1 --copt=-msse4.2 --config=noaws --config=nohdfs --config=nonccl --cxxopt=\"-D_GLIBCXX_USE_CXX11_ABI=0\" --config=cuda -k //tensorflow/tools/pip_package:build_pip_package --verbose_failures 2>&1 | tee bazel.log\r\n\r\n\r\n### Describe the problem\r\nFailed to build from source TF2.1 with CUDA (though able to builf TF2.0 without a problem)\r\n\r\n### Source code / logs\r\n\r\nConfig (all default options except enabling CUDA):\r\n\r\n(base) sergey@sergey-Bionic:~/tensorflow$ ./configure\r\nWARNING: --batch mode is deprecated. Please instead explicitly shut down your Bazel server using the command \"bazel shutdown\".\r\nYou have bazel 0.29.1 installed.\r\nPlease specify the location of python. [Default is /home/sergey/anaconda3/bin/python]: \r\n\r\n\r\nFound possible Python library paths:\r\n  /home/sergey/anaconda3/lib/python3.6/site-packages\r\nPlease input the desired Python library path to use.  Default is [/home/sergey/anaconda3/lib/python3.6/site-packages]\r\n\r\nDo you wish to build TensorFlow with XLA JIT support? [Y/n]: \r\nXLA JIT support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with OpenCL SYCL support? [y/N]: \r\nNo OpenCL SYCL support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with ROCm support? [y/N]: \r\nNo ROCm support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with CUDA support? [y/N]: y\r\nCUDA support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with TensorRT support? [y/N]: \r\nNo TensorRT support will be enabled for TensorFlow.\r\n\r\nFound CUDA 10.1 in:\r\n    /usr/local/cuda/lib64\r\n    /usr/local/cuda/include\r\nFound cuDNN 7 in:\r\n    /usr/lib64\r\n    /usr/include\r\n\r\n\r\nPlease specify a list of comma-separated CUDA compute capabilities you want to build with.\r\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\r\nPlease note that each additional compute capability significantly increases your build time and binary size, and that TensorFlow only supports compute capabilities >= 3.5 [Default is: 6.1]: \r\n\r\n\r\nDo you want to use clang as CUDA compiler? [y/N]: \r\nnvcc will be used as CUDA compiler.\r\n\r\nPlease specify which gcc should be used by nvcc as the host compiler. [Default is /usr/bin/gcc]: \r\n\r\n\r\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is -march=native -Wno-sign-compare]: \r\n\r\n\r\nWould you like to interactively configure ./WORKSPACE for Android builds? [y/N]: \r\nNot configuring the WORKSPACE for Android builds.\r\n\r\n\r\n### Example of Bazel error messages:\r\n\r\n> ERROR: /home/sergey/tensorflow/tensorflow/python/BUILD:2640:1: Couldn't build file tensorflow/python/gen_tpu_ops_py_wrappers_cc: Linking of rule '//tensorflow/python:gen_tpu_ops_py_wrappers_cc' failed (Exit 1)\r\n--\r\nbazel-out/host/bin/tensorflow/core/protobuf/tpu/libtpu_embedding_output_layout_proto_cc.lo(tpu_embedding_output_layout.pb.o):(.data.rel.ro._ZTVN10tensorflow3tpu24TPUEmbeddingOutputLayoutE[_ZTVN10tensorflow3tpu24TPUEmbeddingOutputLayoutE]+0x60): undefined reference to `google::protobuf::Message::CheckTypeAndMergeFrom(google::protobuf::MessageLite const&)'\r\nbazel-out/host/bin/tensorflow/core/protobuf/tpu/libtpu_embedding_output_layout_proto_cc.lo(tpu_embedding_output_layout.pb.o):(.data.rel.ro._ZTVN10tensorflow3tpu24TPUEmbeddingOutputLayoutE[_ZTVN10tensorflow3tpu24TPUEmbeddingOutputLayoutE]+0x80): undefined reference to `google::protobuf::MessageLite::SerializeWithCachedSizesToArray(unsigned char*) const'\r\nbazel-out/host/bin/tensorflow/core/protobuf/tpu/libtpu_embedding_output_layout_proto_cc.lo(tpu_embedding_output_layout.pb.o):(.data.rel.ro._ZTVN10tensorflow3tpu24TPUEmbeddingOutputLayoutE[_ZTVN10tensorflow3tpu24TPUEmbeddingOutputLayoutE]+0xb0): undefined reference to `google::protobuf::Message::DiscardUnknownFields()'\r\nbazel-out/host/bin/tensorflow/core/protobuf/tpu/libtpu_embedding_output_layout_proto_cc.lo(tpu_embedding_output_layout.pb.o):(.data.rel.ro._ZTVN10tensorflow3tpu24TPUEmbeddingOutputLayoutE[_ZTVN10tensorflow3tpu24TPUEmbeddingOutputLayoutE]+0xb8): undefined reference to `google::protobuf::Message::SpaceUsedLong() const'\r\ncollect2: error: ld returned 1 exit status\r\nERROR: /home/sergey/tensorflow/tensorflow/python/BUILD:2359:1: Couldn't build file tensorflow/python/gen_checkpoint_ops_py_wrappers_cc: Linking of rule '//tensorflow/python:gen_checkpoint_ops_py_wrappers_cc' failed (Exit 1)\r\n--\r\nbazel-out/host/bin/tensorflow/core/libcheckpoint_ops_op_lib.lo(checkpoint_ops.o): In function `__static_initialization_and_destruction_0(int, int) [clone .constprop.45]':\r\ncheckpoint_ops.cc:(.text.startup._Z41__static_initialization_and_destruction_0ii.constprop.45+0x19b): undefined reference to `tensorflow::register_op::OpDefBuilderReceiver::OpDefBuilderReceiver(tensorflow::register_op::OpDefBuilderWrapper<true> const&)'\r\ncheckpoint_ops.cc:(.text.startup._Z41__static_initialization_and_destruction_0ii.constprop.45+0x3ff): undefined reference to `tensorflow::OpDefBuilder::SetIsStateful()'\r\ncheckpoint_ops.cc:(.text.startup._Z41__static_initialization_and_destruction_0ii.constprop.45+0x424): undefined reference to `tensorflow::register_op::OpDefBuilderReceiver::OpDefBuilderReceiver(tensorflow::register_op::OpDefBuilderWrapper<true> const&)'\r\ncollect2: error: ld returned 1 exit status\r\nERROR: /home/sergey/tensorflow/tensorflow/python/BUILD:2339:1: Couldn't build file tensorflow/python/gen_audio_ops_py_wrappers_cc: Linking of rule '//tensorflow/python:gen_audio_ops_py_wrappers_cc' failed (Exit 1)\r\n--\r\naudio_ops.cc:(.text.startup._Z41__static_initialization_and_destruction_0ii.constprop.63+0x140): undefined reference to `tensorflow::register_op::OpDefBuilderReceiver::OpDefBuilderReceiver(tensorflow::register_op::OpDefBuilderWrapper<true> const&)'\r\naudio_ops.cc:(.text.startup._Z41__static_initialization_and_destruction_0ii.constprop.63+0x250): undefined reference to `tensorflow::register_op::OpDefBuilderReceiver::OpDefBuilderReceiver(tensorflow::register_op::OpDefBuilderWrapper<true> const&)'\r\naudio_ops.cc:(.text.startup._Z41__static_initialization_and_destruction_0ii.constprop.63+0x386): undefined reference to `tensorflow::register_op::OpDefBuilderReceiver::OpDefBuilderReceiver(tensorflow::register_op::OpDefBuilderWrapper<true> const&)'\r\naudio_ops.cc:(.text.startup._Z41__static_initialization_and_destruction_0ii.constprop.63+0x562): undefined reference to `tensorflow::register_op::OpDefBuilderReceiver::OpDefBuilderReceiver(tensorflow::register_op::OpDefBuilderWrapper<true> const&)'\r\ncollect2: error: ld returned 1 exit status\r\n\r\n### Full bazel error log see attached.\r\n[bazel_error.l og](https://github.com/tensorflow/models/files/3834933/bazel_error.log)\r\n "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34189", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34189/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34189/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34189/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34189", "id": 521391590, "node_id": "MDU6SXNzdWU1MjEzOTE1OTA=", "number": 34189, "title": "ValueError: Unknown layer: DenseFeatures for tensorflow2.0", "user": {"login": "muzixizhu", "id": 16936092, "node_id": "MDQ6VXNlcjE2OTM2MDky", "avatar_url": "https://avatars0.githubusercontent.com/u/16936092?v=4", "gravatar_id": "", "url": "https://api.github.com/users/muzixizhu", "html_url": "https://github.com/muzixizhu", "followers_url": "https://api.github.com/users/muzixizhu/followers", "following_url": "https://api.github.com/users/muzixizhu/following{/other_user}", "gists_url": "https://api.github.com/users/muzixizhu/gists{/gist_id}", "starred_url": "https://api.github.com/users/muzixizhu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/muzixizhu/subscriptions", "organizations_url": "https://api.github.com/users/muzixizhu/orgs", "repos_url": "https://api.github.com/users/muzixizhu/repos", "events_url": "https://api.github.com/users/muzixizhu/events{/privacy}", "received_events_url": "https://api.github.com/users/muzixizhu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-11-12T08:09:08Z", "updated_at": "2019-11-14T19:13:59Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):Y\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):Mac\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):N\r\n- TensorFlow version (use command below):2.0.0(stable)\r\n- Python version:3.7.3\r\n- Bazel version (if compiling from source):Y/N\r\n- GCC/Compiler version (if compiling from source):Y/N\r\n- CUDA/cuDNN version:N\r\n- GPU model and memory:N\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nloading a saved .h5 model which includes a DenseFeatures Layer fails:\r\nValueError: Unknown layer: DenseFeatures\r\n\r\n**Describe the expected behavior**\r\nmodel is loading, and i can use the pre_trained model for online service\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\nimport pandas as pd\r\n\r\n# pip install -q tensorflow==2.0.0-alpha0\r\nimport tensorflow as tf\r\nfrom tensorflow import feature_column\r\nfrom tensorflow.keras import layers\r\nfrom sklearn.model_selection import train_test_split\r\n\r\nURL = 'https://storage.googleapis.com/applied-dl/heart.csv'\r\ndataframe = pd.read_csv(URL)\r\ntrain, test = train_test_split(dataframe, test_size=0.2)\r\ntrain, val = train_test_split(train, test_size=0.2)\r\n\r\n# A utility method to create a tf.data dataset from a Pandas Dataframe\r\ndef df_to_dataset(dataframe, shuffle=True, batch_size=32):\r\n  dataframe = dataframe.copy()\r\n  labels = dataframe.pop('target')\r\n  ds = tf.data.Dataset.from_tensor_slices((dict(dataframe), labels))\r\n  if shuffle:\r\n    ds = ds.shuffle(buffer_size=len(dataframe))\r\n  ds = ds.batch(batch_size)\r\n  return ds\r\n\r\nfeature_columns = []\r\n\r\n# numeric cols\r\nfor header in ['age', 'trestbps', 'chol', 'thalach', 'oldpeak', 'slope', 'ca']:\r\n  feature_columns.append(feature_column.numeric_column(header))\r\n\r\nfeature_layer = tf.keras.layers.DenseFeatures(feature_columns)\r\n\r\nbatch_size = 32\r\ntrain_ds = df_to_dataset(train, batch_size=batch_size)\r\nval_ds = df_to_dataset(val, shuffle=False, batch_size=batch_size)\r\ntest_ds = df_to_dataset(test, shuffle=False, batch_size=batch_size)\r\n\r\nmodel = tf.keras.Sequential([\r\n  feature_layer,\r\n  layers.Dense(128, activation='relu'),\r\n  layers.Dense(128, activation='relu'),\r\n  layers.Dense(1, activation='sigmoid')\r\n])\r\n\r\nmodel.compile(optimizer='adam',\r\n              loss='binary_crossentropy')\r\n\r\nmodel.fit(train_ds, \r\n          validation_data=val_ds, \r\n          epochs=5)\r\n\r\n\r\nmodel.save('my_model.h5')\r\nfrom tensorflow import keras\r\nnew_model = keras.models.load_model('my_model.h5')\r\n\r\n\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n    ValueError: ('We expected a dictionary here. Instead we got: ', <tf.Tensor 'Placeholder:0' shape=(None,) dtype=float32>)\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34185", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34185/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34185/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34185/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34185", "id": 521331175, "node_id": "MDU6SXNzdWU1MjEzMzExNzU=", "number": 34185, "title": "TF-TRT optimized graph get wrong results when using batch size <=7", "user": {"login": "ArtificialNotImbecile", "id": 10048576, "node_id": "MDQ6VXNlcjEwMDQ4NTc2", "avatar_url": "https://avatars1.githubusercontent.com/u/10048576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ArtificialNotImbecile", "html_url": "https://github.com/ArtificialNotImbecile", "followers_url": "https://api.github.com/users/ArtificialNotImbecile/followers", "following_url": "https://api.github.com/users/ArtificialNotImbecile/following{/other_user}", "gists_url": "https://api.github.com/users/ArtificialNotImbecile/gists{/gist_id}", "starred_url": "https://api.github.com/users/ArtificialNotImbecile/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ArtificialNotImbecile/subscriptions", "organizations_url": "https://api.github.com/users/ArtificialNotImbecile/orgs", "repos_url": "https://api.github.com/users/ArtificialNotImbecile/repos", "events_url": "https://api.github.com/users/ArtificialNotImbecile/events{/privacy}", "received_events_url": "https://api.github.com/users/ArtificialNotImbecile/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1754777628, "node_id": "MDU6TGFiZWwxNzU0Nzc3NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu:tensorrt", "name": "comp:gpu:tensorrt", "color": "ea98ba", "default": false, "description": "Issues specific to TensorRT"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pooyadavoodi", "id": 7076961, "node_id": "MDQ6VXNlcjcwNzY5NjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/7076961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pooyadavoodi", "html_url": "https://github.com/pooyadavoodi", "followers_url": "https://api.github.com/users/pooyadavoodi/followers", "following_url": "https://api.github.com/users/pooyadavoodi/following{/other_user}", "gists_url": "https://api.github.com/users/pooyadavoodi/gists{/gist_id}", "starred_url": "https://api.github.com/users/pooyadavoodi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pooyadavoodi/subscriptions", "organizations_url": "https://api.github.com/users/pooyadavoodi/orgs", "repos_url": "https://api.github.com/users/pooyadavoodi/repos", "events_url": "https://api.github.com/users/pooyadavoodi/events{/privacy}", "received_events_url": "https://api.github.com/users/pooyadavoodi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pooyadavoodi", "id": 7076961, "node_id": "MDQ6VXNlcjcwNzY5NjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/7076961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pooyadavoodi", "html_url": "https://github.com/pooyadavoodi", "followers_url": "https://api.github.com/users/pooyadavoodi/followers", "following_url": "https://api.github.com/users/pooyadavoodi/following{/other_user}", "gists_url": "https://api.github.com/users/pooyadavoodi/gists{/gist_id}", "starred_url": "https://api.github.com/users/pooyadavoodi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pooyadavoodi/subscriptions", "organizations_url": "https://api.github.com/users/pooyadavoodi/orgs", "repos_url": "https://api.github.com/users/pooyadavoodi/repos", "events_url": "https://api.github.com/users/pooyadavoodi/events{/privacy}", "received_events_url": "https://api.github.com/users/pooyadavoodi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-11-12T05:06:55Z", "updated_at": "2019-12-26T18:34:21Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:10.2\r\n- GPU model and memory:Tesla T4 with 15001MiB memory\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nWhen using TF-TRT optimized graph to do inference, it only works as expected when batch size >=7(I tested batch size from 1-16). And the result is completely wrong when batch size <7\r\n**Describe the expected behavior**\r\nSmall batch size should also give me the correct result since my original un-optimized graph can handle small batch size.\r\n**Code to reproduce the issue**\r\nSetup according to  https://github.com/tensorflow/tensorrt/tree/master/tftrt/examples/object_detection:\r\n```\r\n# in path/to/tftrt/examples/object_detection/\r\nimport tensorflow as tf\r\nfrom tensorflow.python.compiler.tensorrt import trt_convert as trt\r\nimport cv2\r\nfrom collections import namedtuple\r\nfrom PIL import Image\r\nimport numpy as np\r\nimport time\r\nimport json\r\nimport subprocess\r\nimport os\r\nimport glob\r\nfrom tftrt.examples.object_detection.graph_utils import force_nms_cpu as f_force_nms_cpu\r\nfrom tftrt.examples.object_detection.graph_utils import replace_relu6 as f_replace_relu6\r\nfrom tftrt.examples.object_detection.graph_utils import remove_assert as f_remove_assert\r\n\r\ndef optimize_model(frozen_graph,\r\n                   use_trt=True,\r\n                   force_nms_cpu=True,\r\n                   replace_relu6=True,\r\n                   remove_assert=True,\r\n                   precision_mode='FP32',\r\n                   minimum_segment_size=2,\r\n                   max_workspace_size_bytes=1 << 32,\r\n                   maximum_cached_engines=100,\r\n                   calib_images_dir=None,\r\n                   num_calib_images=None,\r\n                   calib_batch_size=1,\r\n                   calib_image_shape=None,\r\n                   output_path=None):\r\n    #same function copied from  path/to/tftrt/examples/object_detection/object_detection.py#L328\r\n    pass\r\n# optimized a customed frozen graph\r\nfrozen_graph_path = 'path/to/frozen_graph.pb'\r\nfrozen_graph = tf.GraphDef()\r\nwith open(frozen_graph_path, 'rb') as f:\r\n    frozen_graph.ParseFromString(f.read())\r\nfrozen_graph = optimize_model(\r\n    frozen_graph,\r\n    force_nms_cpu=False,\r\n    replace_relu6=True,\r\n    remove_assert=True,\r\n    use_trt=True,\r\n    precision_mode=\"FP16\",\r\n    max_workspace_size_bytes=17179869184,\r\n    output_path='./trt_frozen_graph.pb'\r\n)\r\n\r\n# run inference\r\nfrozen_graph_path = './trt_frozen_graph.pb'\r\nfrozen_graph = tf.GraphDef()\r\nwith open(frozen_graph_path, 'rb') as f:\r\n    frozen_graph.ParseFromString(f.read())\r\n\r\n# images = [bs, h, w, 3]\r\nINPUT_NAME = 'input'\r\nBOXES_NAME = 'output/boxes'\r\nCLASSES_NAME = 'output/labels'\r\nSCORES_NAME = 'output/scores'\r\nNUM_DETECTIONS_NAME = 'output/num_detections'\r\nwith tf.Graph().as_default() as tf_graph:\r\n    with tf.Session(config=tf_config) as tf_sess:\r\n        tf.import_graph_def(frozen_graph, name='')\r\n        tf_input = tf_graph.get_tensor_by_name(INPUT_NAME + ':0')\r\n        tf_boxes = tf_graph.get_tensor_by_name(BOXES_NAME + ':0')\r\n        tf_classes = tf_graph.get_tensor_by_name(CLASSES_NAME + ':0')\r\n        tf_scores = tf_graph.get_tensor_by_name(SCORES_NAME + ':0')\r\n        tf_num_detections = tf_graph.get_tensor_by_name(\r\n            NUM_DETECTIONS_NAME + ':0')\r\n        boxes, classes, scores, num_detections = tf_sess.run(\r\n                    [tf_boxes, tf_classes, tf_scores, tf_num_detections],\r\n                    feed_dict={tf_input: batch_images})\r\n```\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\nMy frozen graph can be download at https://drive.google.com/open?id=1s_laMhRw8GC6I9brQjn6apKTfhWe734J\r\n```\r\nWARNING:tensorflow:From /notebooks/tensorrt/tftrt/examples/object_detection/graph_utils.py:31: The name tf.placeholder is deprecated. Please use tf.compat.v1.placeholder instead.\r\nWARNING:tensorflow:From /notebooks/tensorrt/tftrt/examples/object_detection/graph_utils.py:31: The name tf.placeholder is deprecated. Please use tf.compat.v1.placeholder instead.\r\n\r\nINFO:tensorflow:Linked TensorRT version: (6, 0, 1)\r\nINFO:tensorflow:Loaded TensorRT version: (6, 0, 1)\r\nINFO:tensorflow:Running against TensorRT version 6.0.1\r\ngraph_size(MB)(native_tf): 54.5\r\ngraph_size(MB)(trt): 106.0\r\nnum_nodes(native_tf): 10992\r\nnum_nodes(tftrt_total): 10156\r\nnum_nodes(trt_only): 290\r\ntime(s) (trt_conversion): 15.8726\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34183", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34183/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34183/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34183/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34183", "id": 521314903, "node_id": "MDU6SXNzdWU1MjEzMTQ5MDM=", "number": 34183, "title": "How to add custom ops to Tensorflow Lite Swift/ObjC ? ", "user": {"login": "scm-ns", "id": 7076367, "node_id": "MDQ6VXNlcjcwNzYzNjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/7076367?v=4", "gravatar_id": "", "url": "https://api.github.com/users/scm-ns", "html_url": "https://github.com/scm-ns", "followers_url": "https://api.github.com/users/scm-ns/followers", "following_url": "https://api.github.com/users/scm-ns/following{/other_user}", "gists_url": "https://api.github.com/users/scm-ns/gists{/gist_id}", "starred_url": "https://api.github.com/users/scm-ns/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/scm-ns/subscriptions", "organizations_url": "https://api.github.com/users/scm-ns/orgs", "repos_url": "https://api.github.com/users/scm-ns/repos", "events_url": "https://api.github.com/users/scm-ns/events{/privacy}", "received_events_url": "https://api.github.com/users/scm-ns/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yyoon", "id": 1309817, "node_id": "MDQ6VXNlcjEzMDk4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1309817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yyoon", "html_url": "https://github.com/yyoon", "followers_url": "https://api.github.com/users/yyoon/followers", "following_url": "https://api.github.com/users/yyoon/following{/other_user}", "gists_url": "https://api.github.com/users/yyoon/gists{/gist_id}", "starred_url": "https://api.github.com/users/yyoon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yyoon/subscriptions", "organizations_url": "https://api.github.com/users/yyoon/orgs", "repos_url": "https://api.github.com/users/yyoon/repos", "events_url": "https://api.github.com/users/yyoon/events{/privacy}", "received_events_url": "https://api.github.com/users/yyoon/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yyoon", "id": 1309817, "node_id": "MDQ6VXNlcjEzMDk4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1309817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yyoon", "html_url": "https://github.com/yyoon", "followers_url": "https://api.github.com/users/yyoon/followers", "following_url": "https://api.github.com/users/yyoon/following{/other_user}", "gists_url": "https://api.github.com/users/yyoon/gists{/gist_id}", "starred_url": "https://api.github.com/users/yyoon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yyoon/subscriptions", "organizations_url": "https://api.github.com/users/yyoon/orgs", "repos_url": "https://api.github.com/users/yyoon/repos", "events_url": "https://api.github.com/users/yyoon/events{/privacy}", "received_events_url": "https://api.github.com/users/yyoon/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-11-12T04:02:11Z", "updated_at": "2019-11-19T08:40:04Z", "closed_at": null, "author_association": "NONE", "body": "I can't find any straight forwards docs on how to add a custom op to tensorflow lite, swift/objc. I see the docs for adding to the c++ lib, but it seems unclear how to add them to the swift pods? \r\n\r\nDoes anyone have any pointers? "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34182", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34182/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34182/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34182/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34182", "id": 521296650, "node_id": "MDU6SXNzdWU1MjEyOTY2NTA=", "number": 34182, "title": "Can't load optimizer weights after adding layer without parameters", "user": {"login": "OverLordGoldDragon", "id": 16495490, "node_id": "MDQ6VXNlcjE2NDk1NDkw", "avatar_url": "https://avatars2.githubusercontent.com/u/16495490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/OverLordGoldDragon", "html_url": "https://github.com/OverLordGoldDragon", "followers_url": "https://api.github.com/users/OverLordGoldDragon/followers", "following_url": "https://api.github.com/users/OverLordGoldDragon/following{/other_user}", "gists_url": "https://api.github.com/users/OverLordGoldDragon/gists{/gist_id}", "starred_url": "https://api.github.com/users/OverLordGoldDragon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/OverLordGoldDragon/subscriptions", "organizations_url": "https://api.github.com/users/OverLordGoldDragon/orgs", "repos_url": "https://api.github.com/users/OverLordGoldDragon/repos", "events_url": "https://api.github.com/users/OverLordGoldDragon/events{/privacy}", "received_events_url": "https://api.github.com/users/OverLordGoldDragon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-11-12T02:50:40Z", "updated_at": "2020-03-16T20:44:44Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**MODEL A**:\r\n```python\r\nipt = Input(batch_shape=(32, 240, 4))\r\nx1  = Conv1D(16, 20,  strides=200, padding='same')(ipt)\r\nx1  = BatchNormalization()(x1)\r\nx2  = Conv1D(16, 200, strides=120, padding='same')(ipt)\r\nx2  = BatchNormalization()(x2) # ...\r\n```\r\n**MODEL B**:\r\n```python\r\nipt = Input(batch_shape=(32, 250, 4))\r\nx1  = Conv1D(16, 20,  strides=200)(ipt)\r\nx1  = BatchNormalization()(x1)\r\nx2  = Conv1D(16, 200, strides=120)(ipt)\r\nx2  = BatchNormalization()(x2) # ...\r\n```\r\n<hr>\r\nThe two have identical weight shapes - however, A's optimizer `weights` _cannot_ be loaded onto B, as B has a different build order (images & code below). \r\n\r\nThis is a tiny snippet of a much larger model which needs its `timesteps` parameter changed every X epochs, and `ZeroPadding1D` appears to _change layer build order_ whenever it's used; this doesn't affect _model_ weights, as they're mapped via a dictionary - whereas optimizer weights are mapped sequentially, list-to-list.\r\n\r\nReproducible in both TF1 & TF2, and w/ `keras` & `tf.keras` imports. What's the problem, and how to fix? [Relevant SO](https://stackoverflow.com/questions/58811292/why-does-zeropadding-change-optimizer-weights-order)\r\n\r\n\r\n<hr>\r\n\r\n**Environment**: Win-10 OS, CUDA 10.0.130, cuDNN 7.6.0, Python 3.7.4, GTX 1070\r\n\r\n**Observations**:\r\n\r\n - Swaps any other layer, not just `BatchNormalization` - and any _number of layers_ before `concatenate`; optimizer weights end up being simply swapped in `.get_weights()`\r\n - Can change `strides` instead of `batch_shape[1]`\r\n - Can use `MaxPooling1D` w/ `strides > 1`\r\n - `padding='valid'` leads to `ZeroPadding1D`, but it _doesn't_ change build order (don't know why)\r\n\r\n\r\n<hr>\r\n\r\n**`model_A.summary()`**:\r\n\r\n```python\r\nLayer (type)                    Output Shape         Param #     Connected to     \r\n==================================================================================\r\ninput_1 (InputLayer)            [(32, 240, 4)]       0                            \r\n__________________________________________________________________________________\r\nconv1d (Conv1D)                 (32, 2, 16)          1296        input_1[0][0]    \r\n__________________________________________________________________________________\r\nconv1d_1 (Conv1D)               (32, 2, 16)          12816       input_1[0][0]    \r\n__________________________________________________________________________________\r\nbn_1 (BatchNormalization)       (32, 2, 16)          64          conv1d[0][0]     \r\n__________________________________________________________________________________\r\nbn_2 (BatchNormalization)       (32, 2, 16)          64          conv1d_1[0][0]   \r\n__________________________________________________________________________________\r\nconcatenate (Concatenate)       (32, 2, 32)          0           bn_1[0][0]       \r\n                                                                 bn_2[0][0]       \r\n__________________________________________________________________________________\r\ngap_0 (GlobalAveragePooling1D)  (32, 32)             0           concatenate[0][0]\r\n__________________________________________________________________________________\r\ndense (Dense)                   (32, 1)              33          gap_0[0][0]      \r\n```\r\n\r\n**`model_B.summary()`** _(note the swapped layers)_\r\n\r\n```python\r\ninput_2 (InputLayer)            [(32, 250, 4)]       0                               \r\n_____________________________________________________________________________________\r\nconv1d_2 (Conv1D)               (32, 2, 16)          1296        input_2[0][0]       \r\n_____________________________________________________________________________________\r\nbn_1 (BatchNormalization)       (32, 2, 16)          64          conv1d_2[0][0]      \r\n_____________________________________________________________________________________\r\nconv1d_3 (Conv1D)               (32, 3, 16)          12816       input_2[0][0]       \r\n_____________________________________________________________________________________\r\nzero_padding1d (ZeroPadding1D)  (32, 3, 16)          0           bn_1[0][0]          \r\n_____________________________________________________________________________________\r\nbn_2 (BatchNormalization)       (32, 3, 16)          64          conv1d_3[0][0]      \r\n_____________________________________________________________________________________\r\nconcatenate_1 (Concatenate)     (32, 3, 32)          0           zero_padding1d[0][0]\r\n                                                                 bn_2[0][0]          \r\n_____________________________________________________________________________________\r\ngap_0 (GlobalAveragePooling1D)  (32, 32)             0           concatenate_1[0][0] \r\n_____________________________________________________________________________________\r\ndense_1 (Dense)                 (32, 1)              33          gap_0[0][0]  \r\n```\r\n\r\n<hr>\r\n\r\n**Minimally reproducible code**:\r\n\r\n```python\r\n# also works with `from keras`\r\nfrom tensorflow.keras.layers import Input, Conv1D, ZeroPadding1D, concatenate\r\nfrom tensorflow.keras.layers import BatchNormalization, Dense, GlobalAveragePooling1D\r\nfrom tensorflow.keras.models import Model\r\nimport numpy as np\r\n\r\ndef make_model(batch_shape):\r\n    ipt = Input(batch_shape=batch_shape)\r\n\r\n    x1  = Conv1D(16, 20,  strides=200, padding='same')(ipt)\r\n    x1  = BatchNormalization()(x1)\r\n    x2  = Conv1D(16, 200, strides=120, padding='same')(ipt)\r\n    x2  = BatchNormalization()(x2)\r\n\r\n    x1, x2 = zero_pad(x1, x2)\r\n    preout = concatenate([x1, x2])\r\n    preout = GlobalAveragePooling1D()(preout)\r\n    out    = Dense(1)(preout)\r\n\r\n    model  = Model(ipt, out)\r\n    model.compile('adam', 'mse')\r\n    return model \r\n\r\ndef zero_pad(x1, x2):\r\n    diff = int(x2.shape[1]) - int(x1.shape[1])\r\n    if   diff > 0:\r\n        x1 = ZeroPadding1D((diff, 0))(x1)\r\n    elif diff < 0:\r\n        x2 = ZeroPadding1D((abs(diff), 0))(x2)\r\n    return x1, x2\r\n    \r\ndef make_data(batch_shape):\r\n    return (np.random.randn(*batch_shape), \r\n            np.random.randint(0, 2, (batch_shape[0], 1)))\r\n\r\nbatch_shape_A = (32, 240, 4)\r\nbatch_shape_B = (32, 250, 4)\r\nbatch_shape_C = (32, 240, 4)\r\nmodel_A  = make_model(batch_shape_A)\r\nmodel_B  = make_model(batch_shape_B)\r\nmodel_C  = make_model(batch_shape_C) # 'control group'\r\nx_A, y_A = make_data(batch_shape_A)\r\nx_B, y_B = make_data(batch_shape_B)\r\nx_C, y_C = make_data(batch_shape_C)\r\n\r\nmodel_A.train_on_batch(x_A, y_A)\r\nmodel_B.train_on_batch(x_B, y_B)\r\nmodel_C.train_on_batch(x_C, y_C)\r\n\r\noptimizer_weights_A = model_A.optimizer.get_weights()\r\n\r\nmodel_C.optimizer.set_weights(optimizer_weights_A)\r\nprint(\"model_C optimizer weights set successfully\")\r\n\r\nmodel_B.optimizer.set_weights(optimizer_weights_A)\r\nprint(\"model_B optimizer weights set successfully\") # will not print\r\n```\r\n**Output**:\r\n```python\r\nmodel_C optimizer weights set successfully\r\n\r\nValueError: Optimizer weight shape (16,) not compatible with provided \r\nweight shape (200, 4, 16)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34181", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34181/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34181/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34181/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34181", "id": 521294208, "node_id": "MDU6SXNzdWU1MjEyOTQyMDg=", "number": 34181, "title": "transformer model for mobile crashes in iPhone XS, XR and 11 series", "user": {"login": "kweonwooj", "id": 7529838, "node_id": "MDQ6VXNlcjc1Mjk4Mzg=", "avatar_url": "https://avatars1.githubusercontent.com/u/7529838?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kweonwooj", "html_url": "https://github.com/kweonwooj", "followers_url": "https://api.github.com/users/kweonwooj/followers", "following_url": "https://api.github.com/users/kweonwooj/following{/other_user}", "gists_url": "https://api.github.com/users/kweonwooj/gists{/gist_id}", "starred_url": "https://api.github.com/users/kweonwooj/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kweonwooj/subscriptions", "organizations_url": "https://api.github.com/users/kweonwooj/orgs", "repos_url": "https://api.github.com/users/kweonwooj/repos", "events_url": "https://api.github.com/users/kweonwooj/events{/privacy}", "received_events_url": "https://api.github.com/users/kweonwooj/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yyoon", "id": 1309817, "node_id": "MDQ6VXNlcjEzMDk4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1309817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yyoon", "html_url": "https://github.com/yyoon", "followers_url": "https://api.github.com/users/yyoon/followers", "following_url": "https://api.github.com/users/yyoon/following{/other_user}", "gists_url": "https://api.github.com/users/yyoon/gists{/gist_id}", "starred_url": "https://api.github.com/users/yyoon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yyoon/subscriptions", "organizations_url": "https://api.github.com/users/yyoon/orgs", "repos_url": "https://api.github.com/users/yyoon/repos", "events_url": "https://api.github.com/users/yyoon/events{/privacy}", "received_events_url": "https://api.github.com/users/yyoon/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yyoon", "id": 1309817, "node_id": "MDQ6VXNlcjEzMDk4MTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1309817?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yyoon", "html_url": "https://github.com/yyoon", "followers_url": "https://api.github.com/users/yyoon/followers", "following_url": "https://api.github.com/users/yyoon/following{/other_user}", "gists_url": "https://api.github.com/users/yyoon/gists{/gist_id}", "starred_url": "https://api.github.com/users/yyoon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yyoon/subscriptions", "organizations_url": "https://api.github.com/users/yyoon/orgs", "repos_url": "https://api.github.com/users/yyoon/repos", "events_url": "https://api.github.com/users/yyoon/events{/privacy}", "received_events_url": "https://api.github.com/users/yyoon/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-11-12T02:41:02Z", "updated_at": "2020-03-06T04:03:34Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): no\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): iOS\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: iPhone XS, XR, iPhone 11 series\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): 1.5.1\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source): 0.5.4\r\n- GCC/Compiler version (if compiling from source): 4.8.5 20150623\r\n- CUDA/cuDNN version: NA\r\n- GPU model and memory: NA\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nI have transformer model trained with tensorflow==1.5.1. Frozen graph is optimized and further quantized for mobile usage. Together with quantized model, I have tensorflow==1.5.1 library built for ios via `./tensorflow/contrib/makefile/build_all_ios.sh`. \r\n\r\nModels from iPhone 6 up to 9 all works fine, but iPhone XS, XR and beyond crashes during inference (inference is equivalent to running `m_pSession->Run`) . When running the model N times, it randomly emits error as below : \r\n\r\n```\r\n# ./tensorflow/core/framework/function.cc:855\r\nInvalid argument: Retval[0] does not have value\r\n\r\n# this function is called from : \r\n./tensorflow/core/common_runtime/direct_session.cc:630\r\n```\r\n\r\n**Describe the expected behavior**\r\ninference should not crash, as it does not in other iOS devices\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n```\r\n// Initialize a session\r\nStatus status = NewSession(SessionOptions(), &m_pSession);\r\n    \r\n// Read binary proto file\r\nGraphDef graph_def;\r\nstatus = ReadBinaryProto(Env::Default(), model_file_path, &graph_def);\r\n\r\n// Create session\r\nstatus = m_pSession->Create(graph_def);\r\n\r\n// Setup inputs and outputs\r\nstring input_op_name = TENSORFLOW_INPUT_OP;\r\nstring input_length_op_name = TENSORFLOW_INPUT_LENGTH_OP;\r\nTensor input_tensor(DT_INT32, TensorShape({1, inputWordCnt}));\r\nTensor input_length_tensor(DT_INT32, TensorShape({1}));\r\n\r\n// inputWordArray is a vector with source words to translate\r\nauto input_tensor_mapped = input_tensor.tensor<int, 2>();\r\nfor(int i=0; i<inputWordCnt; i++) {\r\n    input_tensor_mapped(0, i) = inputWordArray[i];\r\n}\r\nauto input_length_tensor_mapped = input_length_tensor.tensor<int, 1>();\r\ninput_length_tensor_mapped(0) = inputWordCnt;\r\n\r\nstd::vector<Tensor> output_tensors;\r\n\r\n// Do Translate!\r\nStatus run_status = m_pSession->Run({{input_op_name, input_tensor},\r\n                                     {input_length_op_name, input_length_tensor}},\r\n                                     {TENSORFLOW_ONEBEST_OUTPUT_OP, TENSORFLOW_ATTENTION_MAP_OUTPUT_OP},\r\n                                     {},\r\n                                     &output_tensors);\r\n```\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nI intentionally added `std::cout` to track the value of `rets_`, and as you can see from the below, `rets_.[i]has_val` suddenly has value 0 in random chance.\r\n\r\n```\r\n[tensorflow | function.cc] rets_.size() = 2\r\n[tensorflow | function.cc] i = 0\r\n[tensorflow | function.cc] rets = 0x170a01c40\r\n[tensorflow | function.cc] rets.size() = 0\r\n[tensorflow | function.cc] rets_.[i]has_val = 1\r\n[tensorflow | function.cc] rets_[i].val) = Tensor<type: int32 shape: [1,53] values: [0 1 14]...>\r\n[tensorflow | function.cc] i = 1\r\n[tensorflow | function.cc] rets = 0x170a01c40\r\n[tensorflow | function.cc] rets.size() = 1\r\n[tensorflow | function.cc] rets_.[i]has_val = 1\r\n[tensorflow | function.cc] rets_[i].val) = Tensor<type: int32 shape: [1,53] values: [1 15939 0]...>\r\n\r\n[tensorflow | function.cc] rets_.size() = 2\r\n[tensorflow | function.cc] i = 0\r\n[tensorflow | function.cc] rets = 0x170029c40\r\n[tensorflow | function.cc] rets.size() = 0\r\n[tensorflow | function.cc] rets_.[i]has_val = 0\r\n[tensorflow | function.cc] rets_[i].val) = Tensor<type: float shape: [0] values: >\r\n[tensorflow_inference.cpp] Running model failed: Invalid argument: Retval[0] does not have value\r\n```\r\n\r\nError occurs due to accessing a missing value, which should not be missing in the first place.\r\nIs iPhone XS/XR interrupting the memory values of tensorflow ops?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34174", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34174/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34174/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34174/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34174", "id": 521204041, "node_id": "MDU6SXNzdWU1MjEyMDQwNDE=", "number": 34174, "title": "Performance regression with obj. det model from 1.14 to 1.15", "user": {"login": "dave-andersen", "id": 827870, "node_id": "MDQ6VXNlcjgyNzg3MA==", "avatar_url": "https://avatars3.githubusercontent.com/u/827870?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dave-andersen", "html_url": "https://github.com/dave-andersen", "followers_url": "https://api.github.com/users/dave-andersen/followers", "following_url": "https://api.github.com/users/dave-andersen/following{/other_user}", "gists_url": "https://api.github.com/users/dave-andersen/gists{/gist_id}", "starred_url": "https://api.github.com/users/dave-andersen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dave-andersen/subscriptions", "organizations_url": "https://api.github.com/users/dave-andersen/orgs", "repos_url": "https://api.github.com/users/dave-andersen/repos", "events_url": "https://api.github.com/users/dave-andersen/events{/privacy}", "received_events_url": "https://api.github.com/users/dave-andersen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-11-11T21:43:49Z", "updated_at": "2019-11-16T00:41:39Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "2.7x slowdown on a nearly-off-the-shelf tensorflow object detection API model (differences and pipeline config below) when going from 1.14 to 1.15.  The regression is _not_ present in 2.0.\r\n\r\nThis is a fine-tuned SSD mobilenets FPN coco config, with the only changes being:\r\n\r\nFixed size input of 1024x1024\r\nSingle class detection\r\n model draws from layers 2-5 instead of 3-6 and so is a fair bit larger than one might otherwise expect.\r\n\r\nI've attached my pipeline.config to reproduce the bug.\r\n\r\nI'm just running natively in TF with my own inference pipeline, doing the obvious feed_dict to get data in:\r\n\r\n```\r\n            out = sess.run(\r\n                [\r\n                    sess.graph.get_tensor_by_name(node) for node in [\r\n                        'num_detections:0', 'detection_scores:0',\r\n                        'detection_boxes:0', 'detection_classes:0'\r\n                    ]\r\n                ],\r\n                feed_dict={'image_tensor:0': img_batch})\r\n```\r\n[pipeline.config.txt](https://github.com/tensorflow/tensorflow/files/3833314/pipeline.config.txt)\r\n\r\n**System information**\r\nRunning on Ubuntu 18.04, Xeon, Titan V GPU, 12GB\r\n\r\nComparing between TF 1.14-GPU and 1.15 with conda/pip.\r\n```\r\npython 3.6.9 |Anaconda, Inc.| (default, Jul 30 2019, 19:07:31)\r\n[GCC 7.3.0] on linux\r\n```\r\n\r\nCUDA 10.0\r\nCuDNN 7.6\r\n\r\n**Describe the current behavior**\r\n\r\n2.7x slower in 1.15. :-)\r\n\r\n**Describe the expected behavior**\r\n\r\n**Code to reproduce the issue**\r\n\r\nSee attached pipeline.config (would need to specify some training/testing tfrecord)\r\n\r\n\r\n**Other info / logs**\r\nThis issue is related to an issue on tensorflow/serving:  https://github.com/tensorflow/serving/issues/1469\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34171", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34171/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34171/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34171/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34171", "id": 521186587, "node_id": "MDU6SXNzdWU1MjExODY1ODc=", "number": 34171, "title": "Bug in LSTMBlockCellBpropWithCUDA when using peephole connections", "user": {"login": "chaaland", "id": 5944266, "node_id": "MDQ6VXNlcjU5NDQyNjY=", "avatar_url": "https://avatars1.githubusercontent.com/u/5944266?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chaaland", "html_url": "https://github.com/chaaland", "followers_url": "https://api.github.com/users/chaaland/followers", "following_url": "https://api.github.com/users/chaaland/following{/other_user}", "gists_url": "https://api.github.com/users/chaaland/gists{/gist_id}", "starred_url": "https://api.github.com/users/chaaland/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chaaland/subscriptions", "organizations_url": "https://api.github.com/users/chaaland/orgs", "repos_url": "https://api.github.com/users/chaaland/repos", "events_url": "https://api.github.com/users/chaaland/events{/privacy}", "received_events_url": "https://api.github.com/users/chaaland/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-11-11T21:04:55Z", "updated_at": "2019-12-06T23:18:42Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nNo\r\n\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nWindows 10\r\n\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n\r\n- TensorFlow installed from (source or binary):\r\nSource\r\n- TensorFlow version (use command below):\r\nr2.0\r\n- Python version:\r\n3.6.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n9.0/7.4\r\n- GPU model and memory:\r\nQuadro M2200\r\n\r\n**Describe the current behavior**\r\nIn the backward propagation of the LSTM GPU code, there's a [broadcast operation included in the gradient computation](https://github.com/tensorflow/tensorflow/blob/722b96b22926dbc05881c35cb63fd342c6843112/tensorflow/core/kernels/rnn/lstm_ops_gpu.cu.cc#L398) of `cs_prev_grad` involving `wci` and `wcf`\r\n```c++\r\n  if (use_peephole) {\r\n    Eigen::array<Eigen::DenseIndex, 2> p_shape({1, cell_size});\r\n    Eigen::array<Eigen::DenseIndex, 2> p_broadcast_shape({batch_size, 1});\r\n    cs_prev_grad.device(d) =\r\n        cs_prev_grad + di * wci.reshape(p_shape).broadcast(p_broadcast_shape) +\r\n        df * wcf.reshape(p_shape).broadcast(p_broadcast_shape);\r\n    wci_grad.device(d) = (di * cs_prev).sum(Eigen::array<int, 1>({0}));\r\n    wcf_grad.device(d) = (df * cs_prev).sum(Eigen::array<int, 1>({0}));\r\n    wco_grad.device(d) = (do_ * cs).sum(Eigen::array<int, 1>({0}));\r\n  }\r\n}\r\n```\r\nJust before this code, the [GPU kernel](https://github.com/tensorflow/tensorflow/blob/722b96b22926dbc05881c35cb63fd342c6843112/tensorflow/core/kernels/rnn/lstm_ops_gpu.cu.cc#L358) `lstm_gates_bprop` is launched which calculates the gradient of `cs_prev_grad` using `wcf` and `wci`\r\n\r\n```c++\r\n__global__ void lstm_gates_bprop(\r\n    const T* cs_prev,  // [batch_size, cell_size]\r\n    const T* h_prev,   // [batch_size, cell_size]\r\n    const T* w,        // [input_size + cell_size, 4 * cell_size]\r\n    const T* wci,      // [cell_size]\r\n    const T* wcf,      // [cell_size]\r\n    const T* wco,      // [cell_size]\r\n    const T* b,        // [4 * cell_size]\r\n    const T* i,        // [batch_size, cell_size]\r\n    const T* cs,       // [batch_size, cell_size]\r\n    const T* f,        // [batch_size, cell_size]\r\n    const T* o,        // [batch_size, cell_size]\r\n    const T* ci,       // [batch_size, cell_size]\r\n    const T* co,       // [batch_size, cell_size]\r\n    const T* cs_grad,  // [batch_size, cell_size]\r\n    const T* h_grad,   // [batch_size, cell_size]\r\n    T* do_,            // [batch_size, cell_size]\r\n    T* dcs,            // [batch_size, cell_size]\r\n    T* dci,            // [batch_size, cell_size]\r\n    T* df,             // [batch_size, cell_size]\r\n    T* di,             // [batch_size, cell_size]\r\n    T* dgates,         // [input_size + cell_size, 4 * cell_size]\r\n    T* cs_prev_grad,   // [batch_size, cell_size]\r\n    const int batch_size, const int cell_size, const bool use_peephole) {\r\n  const int batch_id = blockIdx.x * blockDim.x + threadIdx.x;\r\n  const int act_id = blockIdx.y * blockDim.y + threadIdx.y;\r\n\r\n  if (batch_id >= batch_size || act_id >= cell_size) return;\r\n\r\n  const int gid = batch_id * cell_size * 4 + act_id;\r\n  const int cid = batch_id * cell_size + act_id;\r\n\r\n  // bunch of code\r\n\r\n  dgates[gid + 0 * cell_size] = di_local;\r\n  dgates[gate_c_offset(gate_layout, cell_size)] = dci_local;\r\n  dgates[gate_f_offset(gate_layout, cell_size)] = df_local;\r\n  dgates[gid + 3 * cell_size] = do_local;\r\n\r\n  cs_prev_grad[cid] = dcs_local * f_local;\r\n  if (use_peephole) {\r\n    cs_prev_grad[cid] += di_local * wci[act_id] + df_local * wcf[act_id];\r\n  }\r\n```\r\n\r\n**Describe the expected behavior**\r\nUnless I misunderstand, the gradient when using peephole connections is incorrect. The peephole gradient should be taken into account _either_ in the GPU kernel _or_ by the eigen computation, but not both.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34165", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34165/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34165/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34165/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34165", "id": 521133612, "node_id": "MDU6SXNzdWU1MjExMzM2MTI=", "number": 34165, "title": "tf.keras.backend.sqrt(tf.constant(1.0)) is 0 which is misleading and tf.sqrt(tf.constant(-1.0)) is 'nan' which is the way it should be.", "user": {"login": "saikumarGadde", "id": 16303389, "node_id": "MDQ6VXNlcjE2MzAzMzg5", "avatar_url": "https://avatars1.githubusercontent.com/u/16303389?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saikumarGadde", "html_url": "https://github.com/saikumarGadde", "followers_url": "https://api.github.com/users/saikumarGadde/followers", "following_url": "https://api.github.com/users/saikumarGadde/following{/other_user}", "gists_url": "https://api.github.com/users/saikumarGadde/gists{/gist_id}", "starred_url": "https://api.github.com/users/saikumarGadde/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saikumarGadde/subscriptions", "organizations_url": "https://api.github.com/users/saikumarGadde/orgs", "repos_url": "https://api.github.com/users/saikumarGadde/repos", "events_url": "https://api.github.com/users/saikumarGadde/events{/privacy}", "received_events_url": "https://api.github.com/users/saikumarGadde/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-11-11T19:06:57Z", "updated_at": "2020-01-15T10:23:30Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version (use command below): 1.15\r\n- Python version: 3.7\r\n- Bazel version (if compiling from source): No\r\n- GCC/Compiler version (if compiling from source): No\r\n- CUDA/cuDNN version: No\r\n- GPU model and memory: Run in CPU\r\n**Describe the current behavior**\r\ntf.keras.backend.sqrt(tf.constant(-1.0)) returns 0 as clip_by_value is being done in the source code (Which is highly misleading, as can be seen only in the source and not in the function document) whereas tf.sqrt(tf.constant(-1.0)) returns 'nan' which is the expected behavior of any sqrt function. This causes some bugs which are very difficult to track. \r\n\r\n**Describe the expected behavior**\r\nMake sqrt functions return only the expected behavior and remove the clip_by_value.\r\n\r\n**Code to reproduce the issue**\r\nimport tensorflow as tf\r\ntf.enable_eager_execution()\r\n\r\ntf.keras.backend.sqrt(tf.constant(-1.0)).numpy()\r\ntf.sqrt(tf.constant(-1.0)).numpy()\r\n\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34163", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34163/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34163/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34163/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34163", "id": 521116837, "node_id": "MDU6SXNzdWU1MjExMTY4Mzc=", "number": 34163, "title": "Do not get performance improvement on tf.matmul when building with AVX2", "user": {"login": "feihugis", "id": 5057740, "node_id": "MDQ6VXNlcjUwNTc3NDA=", "avatar_url": "https://avatars3.githubusercontent.com/u/5057740?v=4", "gravatar_id": "", "url": "https://api.github.com/users/feihugis", "html_url": "https://github.com/feihugis", "followers_url": "https://api.github.com/users/feihugis/followers", "following_url": "https://api.github.com/users/feihugis/following{/other_user}", "gists_url": "https://api.github.com/users/feihugis/gists{/gist_id}", "starred_url": "https://api.github.com/users/feihugis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/feihugis/subscriptions", "organizations_url": "https://api.github.com/users/feihugis/orgs", "repos_url": "https://api.github.com/users/feihugis/repos", "events_url": "https://api.github.com/users/feihugis/events{/privacy}", "received_events_url": "https://api.github.com/users/feihugis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-11-11T18:27:23Z", "updated_at": "2019-11-12T21:04:49Z", "closed_at": null, "author_association": "MEMBER", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): CentOS 7\r\n- TensorFlow version (use command below): v1.14\r\n- Python version: 3.6.5\r\n- Bazel version (if compiling from source): 0.26.1\r\n- GCC/Compiler version (if compiling from source): 8.3.1\r\n\r\n**Describe the current behavior**\r\nRun the benchmarking tests for `tf.matmul` operation under different TensorFlow packages: \r\n1. **the pip package v1.14 released by Tensorflow.** \r\n   This package is not compiled with AVX2 as indicated by this log info `tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA`\r\n2. **built the TensorFlow package with AVX2 from source** using the command `bazel build -c opt --copt=-march=native //tensorflow/tools/pip_package:build_pip_package`.\r\n\r\nHowever, there is no big performance difference between the above two packages:\r\n1. tensorflow-v1.14-cpu\r\n    8192 x 8192 matmul took: **1.54 sec, 713.30 G ops/sec**\r\n\r\n2. build from source with AVX2\r\n    8192 x 8192 matmul took: **1.60 sec, 687.73 G ops/sec**\r\n\r\n**Describe the expected behavior**\r\nThe benchmark with the second package should be faster than the first one.\r\n\r\n**Code to reproduce the issue**\r\nBorrow the benchmark code from [here](https://stackoverflow.com/a/41810634/3471050).\r\n```Python\r\nimport os\r\nimport sys\r\nimport tensorflow as tf\r\nimport time\r\n\r\nn = 8192\r\ndtype = tf.float32\r\n\r\nmatrix1 = tf.Variable(tf.ones((n, n), dtype=dtype))\r\nmatrix2 = tf.Variable(tf.ones((n, n), dtype=dtype))\r\nproduct = tf.matmul(matrix1, matrix2)\r\n\r\n\r\n# avoid optimizing away redundant nodes\r\nconfig = tf.ConfigProto(graph_options=tf.GraphOptions(optimizer_options=tf.OptimizerOptions(opt_level=tf.OptimizerOptions.L0)))\r\nsess = tf.Session(config=config)\r\n\r\nimport os\r\nimport sys\r\nimport tensorflow as tf\r\nimport time\r\n\r\nn = 8192\r\ndtype = tf.float32\r\n\r\nmatrix1 = tf.Variable(tf.ones((n, n), dtype=dtype))\r\nmatrix2 = tf.Variable(tf.ones((n, n), dtype=dtype))\r\nproduct = tf.matmul(matrix1, matrix2)\r\n\r\n\r\n# avoid optimizing away redundant nodes\r\nconfig = tf.ConfigProto(graph_options=tf.GraphOptions(optimizer_options=tf.OptimizerOptions(opt_level=tf.OptimizerOptions.L0)))\r\nsess = tf.Session(config=config)\r\n\r\n\r\nsess.run(tf.global_variables_initializer())\r\niters = 10\r\n\r\n# pre-warming\r\nsess.run(product.op)\r\n\r\nstart = time.time()\r\nfor i in range(iters):\r\n  sess.run(product.op)\r\nend = time.time()\r\nops = n**3 + (n-1)*n**2 # n^2*(n-1) additions, n^3 multiplications\r\nelapsed = (end - start)\r\nrate = iters*ops/elapsed/10**9\r\nprint('\\n %d x %d matmul took: %.2f sec, %.2f G ops/sec' % (n, n,\r\n                                                            elapsed/iters,\r\n                                                            rate,))\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34159", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34159/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34159/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34159/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34159", "id": 521070581, "node_id": "MDU6SXNzdWU1MjEwNzA1ODE=", "number": 34159, "title": "Unresolved external symbol, C++, Windows 7, TensorFlow 2.0", "user": {"login": "Randryn0", "id": 42965043, "node_id": "MDQ6VXNlcjQyOTY1MDQz", "avatar_url": "https://avatars0.githubusercontent.com/u/42965043?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Randryn0", "html_url": "https://github.com/Randryn0", "followers_url": "https://api.github.com/users/Randryn0/followers", "following_url": "https://api.github.com/users/Randryn0/following{/other_user}", "gists_url": "https://api.github.com/users/Randryn0/gists{/gist_id}", "starred_url": "https://api.github.com/users/Randryn0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Randryn0/subscriptions", "organizations_url": "https://api.github.com/users/Randryn0/orgs", "repos_url": "https://api.github.com/users/Randryn0/repos", "events_url": "https://api.github.com/users/Randryn0/events{/privacy}", "received_events_url": "https://api.github.com/users/Randryn0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-11-11T16:46:56Z", "updated_at": "2019-12-15T12:35:12Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code: No\r\n- OS Platform and Distribution: Windows 7 Enterprise\r\n- TensorFlow installed from: Source\r\n- TensorFlow version: 2.0\r\n- Python version: 3.6.8\r\n- Bazel version: 0.26.1\r\n- GCC/Compiler version: VS2017 15.7.5\r\n- GPU model and memory: Intel HD 530\r\n\r\n[edit]\r\nThe build was based on commit 1cf0898dd4331baf93fe77205550f2c2e6c90ee5 from the r2.0 branch.\r\n[/edit]\r\n\r\nI tried to build the shared C++ library on Windows 7 for TensorFlow 2 with the recommended version of bazel and I was quite happy that it seems to be a lot more straightforward now (previously I was only able to build 1.6 with cmake).\r\n\r\nHowever, the problem that now occurs when I try to use TensorFlow in a program. I have custom written code but for the time being I only tried to run a few simple examples.\r\n\r\nThis small program\r\n\r\n```\r\n#define NOMINMAX\r\n#define COMPILER_MSVC\r\n#include \"tensorflow/core/platform/logging.h\"\r\n\r\nint main(int argc, char * argv[])\r\n{\r\n  LOG(ERROR) << \"test\";\r\n}\r\n```\r\n\r\ncompiles and works without problems but when I try to run the [example trainer](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/cc/tutorials/example_trainer.cc) the program compiles but fails to link with the following errors:\r\n```\r\n1>  main.obj : error LNK2019: unresolved external symbol \"\"public: __cdecl tensorflow::Operation::Operation(class tensorflow::Node *)\" (??0Operation@tensorflow@@QEAA@PEAVNode@1@@Z)\" in function \"\"public: __cdecl tensorflow::Input::Input<int,void>(int const &)\" (??$?0HX@Input@tensorflow@@QEAA@AEBH@Z)\".\r\n1>  main.obj : error LNK2019: unresolved external symbol \"\"public: __cdecl tensorflow::Input::Initializer::Initializer(class std::initializer_list<struct tensorflow::Input::Initializer> const &)\" (??0Initializer@Input@tensorflow@@QEAA@AEBV?$initializer_list@UInitializer@Input@tensorflow@@@std@@@Z)\" in function \"\"class tensorflow::GraphDef __cdecl tensorflow::example::CreateGraphDef(void)\" (?CreateGraphDef@example@tensorflow@@YA?AVGraphDef@2@XZ)\".\r\n1>  main.obj : error LNK2019: unresolved external symbol \"\"public: __cdecl tensorflow::Scope::~Scope(void)\" (??1Scope@tensorflow@@QEAA@XZ)\" in function \"\"class tensorflow::GraphDef __cdecl tensorflow::example::CreateGraphDef(void)\" (?CreateGraphDef@example@tensorflow@@YA?AVGraphDef@2@XZ)\".\r\n1>  main.obj : error LNK2019: unresolved external symbol \"\"public: static class tensorflow::Scope __cdecl tensorflow::Scope::NewRootScope(void)\" (?NewRootScope@Scope@tensorflow@@SA?AV12@XZ)\" in function \"\"class tensorflow::GraphDef __cdecl tensorflow::example::CreateGraphDef(void)\" (?CreateGraphDef@example@tensorflow@@YA?AVGraphDef@2@XZ)\".\r\n1>  main.obj : error LNK2019: unresolved external symbol \"\"public: class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl tensorflow::Scope::GetUniqueNameForOp(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)const \" (?GetUniqueNameForOp@Scope@tensorflow@@QEBA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@AEBV34@@Z)\" in function \"\"class tensorflow::Output __cdecl tensorflow::ops::Const<float>(class tensorflow::Scope const &,struct tensorflow::Input::Initializer const &)\" (??$Const@M@ops@tensorflow@@YA?AVOutput@1@AEBVScope@1@AEBUInitializer@Input@1@@Z)\".\r\n1>  main.obj : error LNK2019: unresolved external symbol \"\"public: void __cdecl tensorflow::Scope::UpdateStatus(class tensorflow::Status)const \" (?UpdateStatus@Scope@tensorflow@@QEBAXVStatus@2@@Z)\" in function \"\"class tensorflow::Output __cdecl tensorflow::ops::Const<float>(class tensorflow::Scope const &,struct tensorflow::Input::Initializer const &)\" (??$Const@M@ops@tensorflow@@YA?AVOutput@1@AEBVScope@1@AEBUInitializer@Input@1@@Z)\".\r\n1>  main.obj : error LNK2019: unresolved external symbol \"\"public: void __cdecl tensorflow::Scope::UpdateBuilder(class tensorflow::NodeBuilder *)const \" (?UpdateBuilder@Scope@tensorflow@@QEBAXPEAVNodeBuilder@2@@Z)\" in function \"\"class tensorflow::Output __cdecl tensorflow::ops::Const<float>(class tensorflow::Scope const &,struct tensorflow::Input::Initializer const &)\" (??$Const@M@ops@tensorflow@@YA?AVOutput@1@AEBVScope@1@AEBUInitializer@Input@1@@Z)\".\r\n1>  main.obj : error LNK2019: unresolved external symbol \"\"public: bool __cdecl tensorflow::Scope::ok(void)const \" (?ok@Scope@tensorflow@@QEBA_NXZ)\" in function \"\"class tensorflow::Output __cdecl tensorflow::ops::Const<float>(class tensorflow::Scope const &,struct tensorflow::Input::Initializer const &)\" (??$Const@M@ops@tensorflow@@YA?AVOutput@1@AEBVScope@1@AEBUInitializer@Input@1@@Z)\".\r\n1>  main.obj : error LNK2019: unresolved external symbol \"\"public: class tensorflow::Graph * __cdecl tensorflow::Scope::graph(void)const \" (?graph@Scope@tensorflow@@QEBAPEAVGraph@2@XZ)\" in function \"\"class tensorflow::Output __cdecl tensorflow::ops::Const<float>(class tensorflow::Scope const &,struct tensorflow::Input::Initializer const &)\" (??$Const@M@ops@tensorflow@@YA?AVOutput@1@AEBVScope@1@AEBUInitializer@Input@1@@Z)\".\r\n1>  main.obj : error LNK2019: unresolved external symbol \"\"public: class tensorflow::Status __cdecl tensorflow::Scope::ToGraphDef(class tensorflow::GraphDef *)const \" (?ToGraphDef@Scope@tensorflow@@QEBA?AVStatus@2@PEAVGraphDef@2@@Z)\" in function \"\"class tensorflow::GraphDef __cdecl tensorflow::example::CreateGraphDef(void)\" (?CreateGraphDef@example@tensorflow@@YA?AVGraphDef@2@XZ)\".\r\n1>  main.obj : error LNK2019: unresolved external symbol \"\"public: class tensorflow::Status __cdecl tensorflow::Scope::DoShapeInference(class tensorflow::Node *)const \" (?DoShapeInference@Scope@tensorflow@@QEBA?AVStatus@2@PEAVNode@2@@Z)\" in function \"\"class tensorflow::Output __cdecl tensorflow::ops::Const<float>(class tensorflow::Scope const &,struct tensorflow::Input::Initializer const &)\" (??$Const@M@ops@tensorflow@@YA?AVOutput@1@AEBVScope@1@AEBUInitializer@Input@1@@Z)\".\r\n1>  main.obj : error LNK2019: unresolved external symbol \"\"private: class tensorflow::Scope __cdecl tensorflow::Scope::WithOpNameImpl(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)const \" (?WithOpNameImpl@Scope@tensorflow@@AEBA?AV12@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)\" in function \"\"class tensorflow::GraphDef __cdecl tensorflow::example::CreateGraphDef(void)\" (?CreateGraphDef@example@tensorflow@@YA?AVGraphDef@2@XZ)\".\r\n1>  main.obj : error LNK2019: unresolved external symbol \"\"class tensorflow::Output __cdecl tensorflow::ops::Const(class tensorflow::Scope const &,struct tensorflow::Input::Initializer const &)\" (?Const@ops@tensorflow@@YA?AVOutput@2@AEBVScope@2@AEBUInitializer@Input@2@@Z)\" in function \"\"class tensorflow::Output __cdecl tensorflow::ops::Const<float>(class tensorflow::Scope const &,struct tensorflow::Input::Initializer const &)\" (??$Const@M@ops@tensorflow@@YA?AVOutput@1@AEBVScope@1@AEBUInitializer@Input@1@@Z)\".\r\n1>  main.obj : error LNK2019: unresolved external symbol \"\"struct tensorflow::NodeBuilder::NodeOut __cdecl tensorflow::ops::AsNodeOut(class tensorflow::Scope const &,class tensorflow::Input const &)\" (?AsNodeOut@ops@tensorflow@@YA?AUNodeOut@NodeBuilder@2@AEBVScope@2@AEBVInput@2@@Z)\" in function \"\"class tensorflow::Output __cdecl tensorflow::ops::Const<float>(class tensorflow::Scope const &,struct tensorflow::Input::Initializer const &)\" (??$Const@M@ops@tensorflow@@YA?AVOutput@1@AEBVScope@1@AEBUInitializer@Input@1@@Z)\".\r\n1>  main.obj : error LNK2019: unresolved external symbol \"\"public: __cdecl tensorflow::ops::Div::Div(class tensorflow::Scope const &,class tensorflow::Input,class tensorflow::Input)\" (??0Div@ops@tensorflow@@QEAA@AEBVScope@2@VInput@2@1@Z)\" in function \"\"class tensorflow::GraphDef __cdecl tensorflow::example::CreateGraphDef(void)\" (?CreateGraphDef@example@tensorflow@@YA?AVGraphDef@2@XZ)\".\r\n1>  main.obj : error LNK2019: unresolved external symbol \"\"public: __cdecl tensorflow::ops::MatMul::MatMul(class tensorflow::Scope const &,class tensorflow::Input,class tensorflow::Input)\" (??0MatMul@ops@tensorflow@@QEAA@AEBVScope@2@VInput@2@1@Z)\" in function \"\"class tensorflow::GraphDef __cdecl tensorflow::example::CreateGraphDef(void)\" (?CreateGraphDef@example@tensorflow@@YA?AVGraphDef@2@XZ)\".\r\n1>  main.obj : error LNK2019: unresolved external symbol \"\"public: __cdecl tensorflow::ops::Sqrt::Sqrt(class tensorflow::Scope const &,class tensorflow::Input)\" (??0Sqrt@ops@tensorflow@@QEAA@AEBVScope@2@VInput@2@@Z)\" in function \"\"class tensorflow::GraphDef __cdecl tensorflow::example::CreateGraphDef(void)\" (?CreateGraphDef@example@tensorflow@@YA?AVGraphDef@2@XZ)\".\r\n1>  main.obj : error LNK2019: unresolved external symbol \"\"public: __cdecl tensorflow::ops::Square::Square(class tensorflow::Scope const &,class tensorflow::Input)\" (??0Square@ops@tensorflow@@QEAA@AEBVScope@2@VInput@2@@Z)\" in function \"\"class tensorflow::GraphDef __cdecl tensorflow::example::CreateGraphDef(void)\" (?CreateGraphDef@example@tensorflow@@YA?AVGraphDef@2@XZ)\".\r\n1>  main.obj : error LNK2019: unresolved external symbol \"\"public: __cdecl tensorflow::ops::Sum::Sum(class tensorflow::Scope const &,class tensorflow::Input,class tensorflow::Input)\" (??0Sum@ops@tensorflow@@QEAA@AEBVScope@2@VInput@2@1@Z)\" in function \"\"class tensorflow::GraphDef __cdecl tensorflow::example::CreateGraphDef(void)\" (?CreateGraphDef@example@tensorflow@@YA?AVGraphDef@2@XZ)\".\r\n1>  main.obj : error LNK2019: unresolved external symbol \"\"public: __cdecl tensorflow::SessionOptions::SessionOptions(void)\" (??0SessionOptions@tensorflow@@QEAA@XZ)\" in function \"\"void __cdecl tensorflow::example::ConcurrentSteps(struct tensorflow::example::Options const *,int)\" (?ConcurrentSteps@example@tensorflow@@YAXPEBUOptions@12@H@Z)\".\r\n1>  main.obj : error LNK2019: unresolved external symbol \"\"class tensorflow::Session * __cdecl tensorflow::NewSession(struct tensorflow::SessionOptions const &)\" (?NewSession@tensorflow@@YAPEAVSession@1@AEBUSessionOptions@1@@Z)\" in function \"\"void __cdecl tensorflow::example::ConcurrentSteps(struct tensorflow::example::Options const *,int)\" (?ConcurrentSteps@example@tensorflow@@YAXPEBUOptions@12@H@Z)\".\r\n1>  main.obj : error LNK2001: unresolved external symbol \"\"const tensorflow::GraphDef::`vftable'\" (??_7GraphDef@tensorflow@@6B@)\".\r\n```\r\n\r\nNow I read [here](https://github.com/tensorflow/tensorflow/issues/30647) in a post by [gunan](https://github.com/gunan) that this has to do with the fact that not all symbols are exported, however, I am not sure whether this is the case here since I find it strange that compiling a tensorflow .lib and .dll without any custom changes results in a library that is not able to compile/work with official example code.\r\nAm I missing something?\r\n\r\nCheers"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34157", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34157/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34157/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34157/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34157", "id": 520910178, "node_id": "MDU6SXNzdWU1MjA5MTAxNzg=", "number": 34157, "title": "Keras fails to feed ragged/sparse inputs with correct input placeholder", "user": {"login": "shkarupa-alex", "id": 1289725, "node_id": "MDQ6VXNlcjEyODk3MjU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1289725?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shkarupa-alex", "html_url": "https://github.com/shkarupa-alex", "followers_url": "https://api.github.com/users/shkarupa-alex/followers", "following_url": "https://api.github.com/users/shkarupa-alex/following{/other_user}", "gists_url": "https://api.github.com/users/shkarupa-alex/gists{/gist_id}", "starred_url": "https://api.github.com/users/shkarupa-alex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shkarupa-alex/subscriptions", "organizations_url": "https://api.github.com/users/shkarupa-alex/orgs", "repos_url": "https://api.github.com/users/shkarupa-alex/repos", "events_url": "https://api.github.com/users/shkarupa-alex/events{/privacy}", "received_events_url": "https://api.github.com/users/shkarupa-alex/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-11-11T11:45:52Z", "updated_at": "2019-11-12T08:11:11Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes, custom subclassed model\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Google Colab\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v1.12.1-17764-gae26958 2.1.0-dev20191111\r\n- Python version: Google Colab py3\r\n- Bazel version (if compiling from source): No\r\n- GCC/Compiler version (if compiling from source): No\r\n- CUDA/cuDNN version: Google Colab\r\n- GPU model and memory: Google Colab\r\n\r\n**Describe the current behavior**\r\nError raised when trying to feed ragged/sparse tensors to model with tf.data.Dataset\r\n\r\n**Describe the expected behavior**\r\nThere should be no error\r\n\r\n**Code to reproduce the issue**\r\nhttps://colab.research.google.com/drive/1Ysbe9uxWLn1eFWNMax9SAHewHMrXwG-R\r\n\r\n**Other info / logs**\r\n```python\r\n---------------------------------------------------------------------------\r\nInvalidArgumentError                      Traceback (most recent call last)\r\n<ipython-input-4-ed795b275880> in <module>()\r\n----> 1 sparse_model = MyModel(False)\r\n      2 sparse_input = my_dataset(False)\r\n      3 \r\n      4 sparse_model.compile(optimizer='Adam', loss='mse')\r\n      5 sparse_model.fit(sparse_input)\r\n\r\n13 frames\r\n<ipython-input-2-45855ec3bda4> in __init__(self, ragged_on, **kwargs)\r\n     13     outputs = tf.keras.layers.GlobalAveragePooling1D()(dense)\r\n     14 \r\n---> 15     super(MyModel, self).__init__(inputs=inputs, outputs=outputs)\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/keras/engine/training.py in __init__(self, *args, **kwargs)\r\n    144 \r\n    145   def __init__(self, *args, **kwargs):\r\n--> 146     super(Model, self).__init__(*args, **kwargs)\r\n    147     _keras_api_gauge.get_cell('model').set(True)\r\n    148     # initializing _distribution_strategy here since it is possible to call\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/keras/engine/network.py in __init__(self, *args, **kwargs)\r\n    167         'inputs' in kwargs and 'outputs' in kwargs):\r\n    168       # Graph network\r\n--> 169       self._init_graph_network(*args, **kwargs)\r\n    170     else:\r\n    171       # Subclassed network\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/training/tracking/base.py in _method_wrapper(self, *args, **kwargs)\r\n    455     self._self_setattr_tracking = False  # pylint: disable=protected-access\r\n    456     try:\r\n--> 457       result = method(self, *args, **kwargs)\r\n    458     finally:\r\n    459       self._self_setattr_tracking = previous_value  # pylint: disable=protected-access\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/keras/engine/network.py in _init_graph_network(self, inputs, outputs, name, **kwargs)\r\n    270 \r\n    271     if any(not hasattr(tensor, '_keras_history') for tensor in self.outputs):\r\n--> 272       base_layer_utils.create_keras_history(self._nested_outputs)\r\n    273 \r\n    274     self._base_init(name=name, **kwargs)\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/keras/engine/base_layer_utils.py in create_keras_history(tensors)\r\n    185     keras_tensors: The Tensors found that came from a Keras Layer.\r\n    186   \"\"\"\r\n--> 187   _, created_layers = _create_keras_history_helper(tensors, set(), [])\r\n    188   return created_layers\r\n    189 \r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/keras/engine/base_layer_utils.py in _create_keras_history_helper(tensors, processed_ops, created_layers)\r\n    245           else:\r\n    246             with ops.init_scope():\r\n--> 247               constants[i] = backend.function([], op_input)([])\r\n    248       processed_ops, created_layers = _create_keras_history_helper(\r\n    249           layer_inputs, processed_ops, created_layers)\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/keras/backend.py in __call__(self, inputs)\r\n   3725         value = math_ops.cast(value, tensor.dtype)\r\n   3726       converted_inputs.append(value)\r\n-> 3727     outputs = self._graph_fn(*converted_inputs)\r\n   3728 \r\n   3729     # EagerTensor.numpy() will often make a copy to ensure memory safety.\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/eager/function.py in __call__(self, *args, **kwargs)\r\n   1527       TypeError: For invalid positional/keyword argument combinations.\r\n   1528     \"\"\"\r\n-> 1529     return self._call_impl(args, kwargs)\r\n   1530 \r\n   1531   def _call_impl(self, args, kwargs, cancellation_manager=None):\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/eager/function.py in _call_impl(self, args, kwargs, cancellation_manager)\r\n   1567       raise TypeError(\"Keyword arguments {} unknown. Expected {}.\".format(\r\n   1568           list(kwargs.keys()), list(self._arg_keywords)))\r\n-> 1569     return self._call_flat(args, self.captured_inputs, cancellation_manager)\r\n   1570 \r\n   1571   def _filtered_call(self, args, kwargs):\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/eager/function.py in _call_flat(self, args, captured_inputs, cancellation_manager)\r\n   1668       # No tape is watching; skip to running the function.\r\n   1669       return self._build_call_outputs(self._inference_function.call(\r\n-> 1670           ctx, args, cancellation_manager=cancellation_manager))\r\n   1671     forward_backward = self._select_forward_and_backward_functions(\r\n   1672         args,\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/eager/function.py in call(self, ctx, args, cancellation_manager)\r\n    521               inputs=args,\r\n    522               attrs=(\"executor_type\", executor_type, \"config_proto\", config),\r\n--> 523               ctx=ctx)\r\n    524         else:\r\n    525           outputs = execute.execute_with_cancellation(\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/eager/execute.py in quick_execute(op_name, num_outputs, inputs, attrs, ctx, name)\r\n     65     else:\r\n     66       message = e.message\r\n---> 67     six.raise_from(core._status_to_exception(e.code, message), None)\r\n     68   except TypeError as e:\r\n     69     keras_symbolic_tensors = [\r\n\r\n/usr/local/lib/python3.6/dist-packages/six.py in raise_from(value, from_value)\r\n\r\nInvalidArgumentError:  You must feed a value for placeholder tensor 'data/values' with dtype float and shape [?]\r\n\t [[node data/values (defined at <ipython-input-2-45855ec3bda4>:15) ]] [Op:__inference_keras_scratch_graph_22]\r\n\r\nFunction call stack:\r\nkeras_scratch_graph\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34155", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34155/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34155/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34155/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34155", "id": 520907559, "node_id": "MDU6SXNzdWU1MjA5MDc1NTk=", "number": 34155, "title": "BERT-joint TF1 baseline fails on TPU training", "user": {"login": "mosicr", "id": 6726953, "node_id": "MDQ6VXNlcjY3MjY5NTM=", "avatar_url": "https://avatars0.githubusercontent.com/u/6726953?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mosicr", "html_url": "https://github.com/mosicr", "followers_url": "https://api.github.com/users/mosicr/followers", "following_url": "https://api.github.com/users/mosicr/following{/other_user}", "gists_url": "https://api.github.com/users/mosicr/gists{/gist_id}", "starred_url": "https://api.github.com/users/mosicr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mosicr/subscriptions", "organizations_url": "https://api.github.com/users/mosicr/orgs", "repos_url": "https://api.github.com/users/mosicr/repos", "events_url": "https://api.github.com/users/mosicr/events{/privacy}", "received_events_url": "https://api.github.com/users/mosicr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-11-11T11:40:23Z", "updated_at": "2019-11-12T07:58:03Z", "closed_at": null, "author_association": "NONE", "body": "BERT-joint baseline script [https://github.com/google-research/language/tree/master/language/question_answering/bert_joint#training-our-model](url)\r\n fails on TPU training with:\r\n\r\nE1111 11:25:56.709489 140509220771584 error_handling.py:81] Closing session due to error From /job:worker/replica:0/task:0:\r\nEnd of sequence\r\n\t [[node input_pipeline_task0/while/IteratorGetNext (defined at usr/local/lib/python3.6/dist-packages/tensorflow_core/python/framework/ops.py:1748) ]]\r\n2019-11-11 11:26:03.693223: W tensorflow/core/distributed_runtime/rpc/grpc_remote_master.cc:157] RPC failed with status = \"Unavailable: Socket closed\" and grpc_error_string = \"{\"created\":\"@1573471563.693073061\",\"description\":\"Error received from peer\",\"file\":\"external/grpc/src/core/lib/surface/call.cc\",\"file_line\":1039,\"grpc_message\":\"Socket closed\",\"grpc_status\":14}\", maybe retrying the RPC\r\n2019-11-11 11:26:03.693329: W tensorflow/core/distributed_runtime/rpc/grpc_remote_master.cc:157] RPC failed with status = \"Unavailable: Socket closed\" and grpc_error_string = \"{\"created\":\"@1573471563.693032484\",\"description\":\"Error received from peer\",\"file\":\"external/grpc/src/core/lib/surface/call.cc\",\"file_line\":1039,\"grpc_message\":\"Socket closed\",\"grpc_status\":14}\", maybe retrying the RPC\r\nERROR:tensorflow:Error recorded from outfeed: Step was cancelled by an explicit call to `Session::Close()`.\r\nE1111 11:26:17.120502 140509233358592 error_handling.py:75] Error recorded from outfeed: Step was cancelled by an explicit call to `Session::Close()`.\r\nINFO:tensorflow:An error was raised. This may be due to a preemption in a connected worker or parameter server. The current session will be closed and a new session will be created. This error may also occur due to a gRPC failure caused by high memory or network bandwidth usage in the parameter servers. If this error occurs repeatedly, try increasing the number of parameter servers assigned to the job. Error: Session c3d5a74e41ee70e5 is not found.\r\nI1111 11:26:17.120874 140510448183168 monitored_session.py:1269] An error was raised. This may be due to a preemption in a connected worker or parameter server. The current session will be closed and a new session will be created. This error may also occur due to a gRPC failure caused by high memory or network bandwidth usage in the parameter servers. If this error occurs repeatedly, try increasing the number of parameter servers assigned to the job. Error: Session c3d5a74e41ee70e5 is not found.\r\nERROR:tensorflow:\r\n\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nNo custom code - this is google provided example\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nGoogle Colab default\r\n- TensorFlow version (use command below):\r\nprint(tf.GIT_VERSION, tf.VERSION)\r\nv1.15.0-0-g590d6eef7e 1.15.0\r\n- Python version: 3.6.8 (default, Oct  7 2019, 12:59:55) \r\n[GCC 8.3.0]\r\nUsing TPU\r\n\r\n\r\n\r\n\r\n**Code to reproduce the issue**\r\nhttps://github.com/google-research/language/blob/master/language/question_answering/bert_joint/run_nq.py\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34154", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34154/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34154/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34154/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34154", "id": 520892831, "node_id": "MDU6SXNzdWU1MjA4OTI4MzE=", "number": 34154, "title": "tf.nn.moments with keras causes Invalid tape state", "user": {"login": "jackd", "id": 659115, "node_id": "MDQ6VXNlcjY1OTExNQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/659115?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jackd", "html_url": "https://github.com/jackd", "followers_url": "https://api.github.com/users/jackd/followers", "following_url": "https://api.github.com/users/jackd/following{/other_user}", "gists_url": "https://api.github.com/users/jackd/gists{/gist_id}", "starred_url": "https://api.github.com/users/jackd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jackd/subscriptions", "organizations_url": "https://api.github.com/users/jackd/orgs", "repos_url": "https://api.github.com/users/jackd/repos", "events_url": "https://api.github.com/users/jackd/events{/privacy}", "received_events_url": "https://api.github.com/users/jackd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-11-11T11:12:11Z", "updated_at": "2020-03-18T16:43:17Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "### System information\r\n- Have I written custom code: yes\r\n- OS Platform and Distribution: Linux Ubuntu 16.04\r\n- TensorFlow installed from : binary\r\n- TensorFlow version: v1.12.1-8709-gddde447 2.0.0-dev20190813\r\n- Python version: 3.6\r\n\r\nAlso reproducable with cuda 10.0 cudnn 7.something / GTX-1070 but I doubt it's a GPU issue...\r\n\r\n### Current Behaviour\r\nUsing output of `tf.nn.moments` causes `Invalid tape state` when training keras models in manual loops (i.e. not using `fit`).\r\n\r\n### Expected Behaviour\r\n`mean, var = tf.nn.moments(x, axes, keepdims=True)` (and use thereafter) should be equivalent to \r\n```\r\nmean = tf.reduce_mean(x, axis=axes, keepdims=True)\r\nxs = x - mean\r\nvar = tf.reduce_mean(xs**2, axis=axes, keepdims=True)\r\n```\r\n\r\n# Code\r\n```python\r\nfrom __future__ import absolute_import\r\nfrom __future__ import division\r\nfrom __future__ import print_function\r\n\r\nimport tensorflow as tf\r\n\r\n\r\ndef normalize_manual(x):\r\n    mean = tf.reduce_mean(x, axis=-1, keepdims=True)\r\n    x = x - mean\r\n    var = tf.reduce_mean(tf.square(x), axis=-1, keepdims=True)\r\n    return x / (tf.sqrt(var + 1e-6))\r\n\r\n\r\ndef normalize_with_moments(x):\r\n    mean, var = tf.nn.moments(x, [-1], keepdims=True)\r\n    x = x - mean\r\n    return x / tf.sqrt(var + 1e-6)\r\n\r\n\r\ndef run_model_custom(normalize=normalize_with_moments):\r\n    inp = tf.keras.layers.Input(shape=(8,))\r\n    x = inp\r\n    x = tf.keras.layers.Dense(8)(x)\r\n    x = normalize(x)\r\n    out = tf.squeeze(tf.keras.layers.Dense(1)(x), axis=-1)\r\n    model = tf.keras.Model(inputs=inp, outputs=out)\r\n\r\n    x = tf.random.normal(shape=((100, 8)))\r\n    y = tf.random.normal(shape=((100,)))\r\n    dataset = tf.data.Dataset.from_tensor_slices((x, y)).batch(5)\r\n\r\n    for x, y in dataset.take(1):\r\n        with tf.GradientTape() as tape:\r\n            out = model(x)\r\n            tape.gradient(out, model.trainable_weights)\r\n        break\r\n    print('passed run_model_custom with {}'.format(normalize.__name__))\r\n\r\n\r\ndef train_model_fit(normalize=normalize_with_moments):\r\n    inp = tf.keras.layers.Input(shape=(8,))\r\n    x = inp\r\n    x = tf.keras.layers.Dense(8)(x)\r\n    x = normalize(x)\r\n    out = tf.squeeze(tf.keras.layers.Dense(1)(x), axis=-1)\r\n    model = tf.keras.Model(inputs=inp, outputs=out)\r\n\r\n    x = tf.random.normal(shape=((100, 8)))\r\n    y = tf.random.normal(shape=((100,)))\r\n    dataset = tf.data.Dataset.from_tensor_slices((x, y)).batch(5)\r\n    model.compile(optimizer=tf.keras.optimizers.SGD(), loss='mse')\r\n    model.fit(dataset, epochs=1, steps_per_epoch=2)\r\n    print('passed train_model_fit with {}'.format(normalize.__name__))\r\n\r\n\r\ndef compute_graph_tf(normalize=normalize_with_moments):\r\n    x = tf.random.normal((10, 5))\r\n    with tf.GradientTape() as tape:\r\n        layer = tf.keras.layers.Dense(2)\r\n        y = layer(x)\r\n        y = tf.reduce_sum(normalize(y))\r\n        tape.gradient(y, layer.trainable_weights)\r\n    print('passed compute_graph_tf with {}'.format(normalize.__name__))\r\n\r\n\r\nrun_model_custom(normalize_with_moments)  # <----- fails\r\n\r\n###########\r\n# the below work\r\n###########\r\ntrain_model_fit(normalize_with_moments)\r\ncompute_graph_tf(normalize_with_moments)\r\nrun_model_custom(normalize_manual)\r\ntrain_model_fit(normalize_manual)\r\ncompute_graph_tf(normalize_manual)\r\n```\r\n\r\n# Logs\r\n```\r\nTraceback (most recent call last):\r\n  File \"norm_grad.py\", line 67, in <module>\r\n    run_model_custom(normalize_with_moments)  # <----- fails\r\n  File \"norm_grad.py\", line 36, in run_model_custom\r\n    tape.gradient(out, model.trainable_weights)\r\n  File \".../python3.6/site-packages/tensorflow_core/python/eager/backprop.py\", line 1008, in gradient\r\n    unconnected_gradients=unconnected_gradients)\r\n  File \".../python3.6/site-packages/tensorflow_core/python/eager/imperative_grad.py\", line 76, in imperative_grad\r\n    compat.as_str(unconnected_gradients.value))\r\ntensorflow.python.framework.errors_impl.InternalError: Invalid tape state.\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34152", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34152/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34152/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34152/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34152", "id": 520849315, "node_id": "MDU6SXNzdWU1MjA4NDkzMTU=", "number": 34152, "title": "Can't train a model using Java in Windows", "user": {"login": "jedakiah13", "id": 36043531, "node_id": "MDQ6VXNlcjM2MDQzNTMx", "avatar_url": "https://avatars1.githubusercontent.com/u/36043531?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jedakiah13", "html_url": "https://github.com/jedakiah13", "followers_url": "https://api.github.com/users/jedakiah13/followers", "following_url": "https://api.github.com/users/jedakiah13/following{/other_user}", "gists_url": "https://api.github.com/users/jedakiah13/gists{/gist_id}", "starred_url": "https://api.github.com/users/jedakiah13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jedakiah13/subscriptions", "organizations_url": "https://api.github.com/users/jedakiah13/orgs", "repos_url": "https://api.github.com/users/jedakiah13/repos", "events_url": "https://api.github.com/users/jedakiah13/events{/privacy}", "received_events_url": "https://api.github.com/users/jedakiah13/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sjamesr", "id": 4641539, "node_id": "MDQ6VXNlcjQ2NDE1Mzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/4641539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjamesr", "html_url": "https://github.com/sjamesr", "followers_url": "https://api.github.com/users/sjamesr/followers", "following_url": "https://api.github.com/users/sjamesr/following{/other_user}", "gists_url": "https://api.github.com/users/sjamesr/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjamesr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjamesr/subscriptions", "organizations_url": "https://api.github.com/users/sjamesr/orgs", "repos_url": "https://api.github.com/users/sjamesr/repos", "events_url": "https://api.github.com/users/sjamesr/events{/privacy}", "received_events_url": "https://api.github.com/users/sjamesr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sjamesr", "id": 4641539, "node_id": "MDQ6VXNlcjQ2NDE1Mzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/4641539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjamesr", "html_url": "https://github.com/sjamesr", "followers_url": "https://api.github.com/users/sjamesr/followers", "following_url": "https://api.github.com/users/sjamesr/following{/other_user}", "gists_url": "https://api.github.com/users/sjamesr/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjamesr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjamesr/subscriptions", "organizations_url": "https://api.github.com/users/sjamesr/orgs", "repos_url": "https://api.github.com/users/sjamesr/repos", "events_url": "https://api.github.com/users/sjamesr/events{/privacy}", "received_events_url": "https://api.github.com/users/sjamesr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-11-11T09:53:54Z", "updated_at": "2019-11-14T18:49:32Z", "closed_at": null, "author_association": "NONE", "body": "I know training a model is currently not supported for Java.\r\n\r\nI was just wondering when this is likely to be available?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34150", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34150/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34150/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34150/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34150", "id": 520829890, "node_id": "MDU6SXNzdWU1MjA4Mjk4OTA=", "number": 34150, "title": "TensorFlow Lite Op Request", "user": {"login": "sachaarbonel", "id": 18029834, "node_id": "MDQ6VXNlcjE4MDI5ODM0", "avatar_url": "https://avatars2.githubusercontent.com/u/18029834?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sachaarbonel", "html_url": "https://github.com/sachaarbonel", "followers_url": "https://api.github.com/users/sachaarbonel/followers", "following_url": "https://api.github.com/users/sachaarbonel/following{/other_user}", "gists_url": "https://api.github.com/users/sachaarbonel/gists{/gist_id}", "starred_url": "https://api.github.com/users/sachaarbonel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sachaarbonel/subscriptions", "organizations_url": "https://api.github.com/users/sachaarbonel/orgs", "repos_url": "https://api.github.com/users/sachaarbonel/repos", "events_url": "https://api.github.com/users/sachaarbonel/events{/privacy}", "received_events_url": "https://api.github.com/users/sachaarbonel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-11-11T09:18:06Z", "updated_at": "2020-02-05T00:35:44Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): OSX 10.14.6\r\n- TensorFlow installed from (source or binary): 2.0\r\n- TensorFlow version (or github SHA if from source):\r\n\r\n\r\n**Provide the text output from tflite_convert**\r\n\r\n```bash\r\nTensorFlow Lite currently doesn't support control flow ops: Enter, Exit, Merge, Switch. We are working on supporting control flow ops, please see github issue at https://github.com/tensorflow/tensorflow/issues/28485. Some of the operators in the model are not supported by the standard TensorFlow Lite runtime. If those are native TensorFlow operators, you might be able to use the extended runtime by passing --enable_select_tf_ops, or by setting target_ops=TFLITE_BUILTINS,SELECT_TF_OPS when calling tf.lite.TFLiteConverter(). Otherwise, if you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: ADD, CONCATENATION, CONV_2D, EQUAL, FLOOR, FULLY_CONNECTED, LESS, LOGICAL_AND, LOGISTIC, MAX_POOL_2D, MUL, RESHAPE, REVERSE_V2, SPLIT, TANH, TRANSPOSE. Here is a list of operators for which you will need custom implementations: CTC_BEAM_SEARCH_DECODER, LoopCond, RandomUniform, TensorArrayGatherV3, TensorArrayReadV3, TensorArrayScatterV3, TensorArrayV3, TensorArrayWriteV3.\r\n```\r\n\r\nAlso, please include a link to a GraphDef or the model if possible.\r\nThe model comes from this repository : https://github.com/MaybeShewill-CV/CRNN_Tensorflow\r\n\r\n**Any other info / logs**\r\n\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34143", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34143/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34143/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34143/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34143", "id": 520656530, "node_id": "MDU6SXNzdWU1MjA2NTY1MzA=", "number": 34143, "title": "Unable to convert .pb to .tflite ", "user": {"login": "Keyrainn", "id": 18519104, "node_id": "MDQ6VXNlcjE4NTE5MTA0", "avatar_url": "https://avatars2.githubusercontent.com/u/18519104?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Keyrainn", "html_url": "https://github.com/Keyrainn", "followers_url": "https://api.github.com/users/Keyrainn/followers", "following_url": "https://api.github.com/users/Keyrainn/following{/other_user}", "gists_url": "https://api.github.com/users/Keyrainn/gists{/gist_id}", "starred_url": "https://api.github.com/users/Keyrainn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Keyrainn/subscriptions", "organizations_url": "https://api.github.com/users/Keyrainn/orgs", "repos_url": "https://api.github.com/users/Keyrainn/repos", "events_url": "https://api.github.com/users/Keyrainn/events{/privacy}", "received_events_url": "https://api.github.com/users/Keyrainn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "srjoglekar246", "id": 2099293, "node_id": "MDQ6VXNlcjIwOTkyOTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/2099293?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srjoglekar246", "html_url": "https://github.com/srjoglekar246", "followers_url": "https://api.github.com/users/srjoglekar246/followers", "following_url": "https://api.github.com/users/srjoglekar246/following{/other_user}", "gists_url": "https://api.github.com/users/srjoglekar246/gists{/gist_id}", "starred_url": "https://api.github.com/users/srjoglekar246/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srjoglekar246/subscriptions", "organizations_url": "https://api.github.com/users/srjoglekar246/orgs", "repos_url": "https://api.github.com/users/srjoglekar246/repos", "events_url": "https://api.github.com/users/srjoglekar246/events{/privacy}", "received_events_url": "https://api.github.com/users/srjoglekar246/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "srjoglekar246", "id": 2099293, "node_id": "MDQ6VXNlcjIwOTkyOTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/2099293?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srjoglekar246", "html_url": "https://github.com/srjoglekar246", "followers_url": "https://api.github.com/users/srjoglekar246/followers", "following_url": "https://api.github.com/users/srjoglekar246/following{/other_user}", "gists_url": "https://api.github.com/users/srjoglekar246/gists{/gist_id}", "starred_url": "https://api.github.com/users/srjoglekar246/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srjoglekar246/subscriptions", "organizations_url": "https://api.github.com/users/srjoglekar246/orgs", "repos_url": "https://api.github.com/users/srjoglekar246/repos", "events_url": "https://api.github.com/users/srjoglekar246/events{/privacy}", "received_events_url": "https://api.github.com/users/srjoglekar246/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2019-11-10T20:58:25Z", "updated_at": "2020-01-16T10:25:22Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Window 10\r\n- TensorFlow installed from (source or binary): python -m pip install tensorflow==1.15\r\n- TensorFlow version (or github SHA if from source): 1.15\r\n\r\nI am currently trying to convert .pb file from export_tflite_ssd_graph.py into a .tflite file and encountered these error:\r\n\r\n>2019-11-11 06:45:44.042588: F tensorflow/lite/toco/tooling_util.cc:935] Check failed: GetOpWithOutput(model, output_array) Specified output array \"'TFLite_Detection_PostProcess'\" is not produced by any op in this graph. Is it a typo? This should not happen. If you trigger this error please send a bug report (with code to reporduce this error), to the TensorFlow Lite team.\r\nFatal Python error: Aborted\r\n\r\n\r\nThis is what i try to run\r\n```\r\ntflite_convert --output_file=C:/tensorflow1/models/research/object_detection/inference_graph/detect.tflite --graph_def_file=C:/tensorflow1/models/research/object_detection/inference_graph/tflite_graph.pb --inference_type=FLOAT --inference_input_type=QUANTIZED_UINT8 --input_arrays=normalized_input_image_tensor --input_shapes=1,300,300,3 --output_arrays='TFLite_Detection_PostProcess','TFLite_Detection_PostProcess:1','TFLite_Detection_PostProcess:2','TFLite_Detection_PostProcess:3' --mean_values=128 --std_dev_values=128 --change_concat_input_ranges=false --allow_custom_ops\r\n```\r\n\r\n\r\nLink is the full traceback:\r\nhttps://pastebin.com/xJ1vZGmd\r\n\r\nI've also check from https://stackoverflow.com/questions/52918051/how-to-convert-pb-to-tflite-format  and confirm that the output array is TFLite_Detection_PostProcess\r\n```\r\noutput name =\r\nTFLite_Detection_PostProcess\r\n\r\nInput name =\r\nnormalized_input_image_tensor\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34141", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34141/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34141/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34141/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34141", "id": 520626903, "node_id": "MDU6SXNzdWU1MjA2MjY5MDM=", "number": 34141, "title": "input_shape to build method is None when calling compute_output_shape on layer with overridden build method", "user": {"login": "chahld", "id": 8064384, "node_id": "MDQ6VXNlcjgwNjQzODQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/8064384?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chahld", "html_url": "https://github.com/chahld", "followers_url": "https://api.github.com/users/chahld/followers", "following_url": "https://api.github.com/users/chahld/following{/other_user}", "gists_url": "https://api.github.com/users/chahld/gists{/gist_id}", "starred_url": "https://api.github.com/users/chahld/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chahld/subscriptions", "organizations_url": "https://api.github.com/users/chahld/orgs", "repos_url": "https://api.github.com/users/chahld/repos", "events_url": "https://api.github.com/users/chahld/events{/privacy}", "received_events_url": "https://api.github.com/users/chahld/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-11-10T16:57:09Z", "updated_at": "2019-11-13T22:07:22Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\ncustom code to reproduce is included below.\r\n\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nUbuntu 18.04.3\r\n\r\n- TensorFlow installed from (source or binary):\r\npip install tensorflow-gpu\r\n\r\n- TensorFlow version (use command below):\r\nv2.0.0-rc2-26-g64c3d38 2.0.0\r\n\r\n- Python version:\r\n3.6.8\r\n\r\n**Describe the current behavior**\r\nbuild method called with input_shape = None\r\n\r\n**Describe the expected behavior**\r\nBuild method called with correct input shape\r\n\r\n**Code to reproduce the issue**\r\n\r\n```\r\nimport tensorflow as tf\r\n\r\nclass MyLayer(tf.keras.layers.Layer):\r\n    def build(self, input_shape):\r\n\r\n        if input_shape is None:\r\n            print('error: input shape is none')\r\n        else:\r\n            print('build:', input_shape)\r\n\r\n        super().build(input_shape)\r\n\r\n    def call(self, inputs):\r\n        print('call:', inputs.shape)\r\n\r\n        return inputs * 2\r\n\r\ndef main():\r\n\r\n    l = MyLayer()\r\n\r\n    inp = tf.keras.Input(shape=(5, 5, 1))\r\n    l.compute_output_shape((None, 5, 5, 1))\r\n\r\n    o = l(inp)\r\n\r\n    print(\"input_shape:\", l.input_shape)\r\n    print(\"count_params:\", l.count_params())\r\n    print('output:', o.shape)\r\n\r\nif __name__=='__main__':\r\n    main()\r\n```\r\n\r\n**Other info / logs**\r\n\r\nWhen run, program prints this: \r\n```\r\nerror: input shape is none\r\ncall: (None, 5, 5, 1)\r\ncall: (None, 5, 5, 1)\r\ninput_shape: (None, 5, 5, 1)\r\ncount_params: 0\r\noutput: (None, 5, 5, 1)\r\n```\r\n\r\nLooking at the code for compute_output_shape, I noticed that it calls self._mabye_build method, but this method expects actual tensors as inputs, not tensor shapes. So it fumbes and passes in a None. \r\n\r\nSuggested code to fix:\r\nat https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/keras/engine/base_layer.py#L620\r\n\r\nreplace _maybe_build with _maybe_build_from_shapes:\r\n(should probably adjust _maybe_build to call this method also)\r\n```\r\ndef _maybe_build_with_shapes(self, inputshapes):\r\n    # Check input assumptions set before layer building, e.g. input rank.\r\n    if not self.built:\r\n\r\n      # Only call `build` if the user has manually overridden the build method.\r\n      if not hasattr(self.build, '_is_default'):\r\n        # Any setup work performed only once should happen in an `init_scope`\r\n        # to avoid creating symbolic Tensors that will later pollute any eager\r\n        # operations.\r\n        with tf_utils.maybe_init_scope(self):\r\n          self.build(input_shapes)\r\n      # We must set self.built since user defined build functions are not\r\n      # constrained to set self.built.\r\n      self.built = True\r\n\r\n```\r\nI don't know what the code at the end of maybe_build is doing, so don't know if it belongs in this method or should just stay in _maybe_build:\r\n\r\n```\r\n    # Optionally load weight values specified at layer instantiation.\r\n    if getattr(self, '_initial_weights', None) is not None:\r\n      self.set_weights(self._initial_weights)\r\n      self._initial_weights = None\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34136", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34136/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34136/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34136/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34136", "id": 520572664, "node_id": "MDU6SXNzdWU1MjA1NzI2NjQ=", "number": 34136, "title": "TensorRT Segmentation Fault During Conversion", "user": {"login": "arielbenitah", "id": 10816903, "node_id": "MDQ6VXNlcjEwODE2OTAz", "avatar_url": "https://avatars0.githubusercontent.com/u/10816903?v=4", "gravatar_id": "", "url": "https://api.github.com/users/arielbenitah", "html_url": "https://github.com/arielbenitah", "followers_url": "https://api.github.com/users/arielbenitah/followers", "following_url": "https://api.github.com/users/arielbenitah/following{/other_user}", "gists_url": "https://api.github.com/users/arielbenitah/gists{/gist_id}", "starred_url": "https://api.github.com/users/arielbenitah/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/arielbenitah/subscriptions", "organizations_url": "https://api.github.com/users/arielbenitah/orgs", "repos_url": "https://api.github.com/users/arielbenitah/repos", "events_url": "https://api.github.com/users/arielbenitah/events{/privacy}", "received_events_url": "https://api.github.com/users/arielbenitah/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1754777628, "node_id": "MDU6TGFiZWwxNzU0Nzc3NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu:tensorrt", "name": "comp:gpu:tensorrt", "color": "ea98ba", "default": false, "description": "Issues specific to TensorRT"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "bixia1", "id": 35820639, "node_id": "MDQ6VXNlcjM1ODIwNjM5", "avatar_url": "https://avatars1.githubusercontent.com/u/35820639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bixia1", "html_url": "https://github.com/bixia1", "followers_url": "https://api.github.com/users/bixia1/followers", "following_url": "https://api.github.com/users/bixia1/following{/other_user}", "gists_url": "https://api.github.com/users/bixia1/gists{/gist_id}", "starred_url": "https://api.github.com/users/bixia1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bixia1/subscriptions", "organizations_url": "https://api.github.com/users/bixia1/orgs", "repos_url": "https://api.github.com/users/bixia1/repos", "events_url": "https://api.github.com/users/bixia1/events{/privacy}", "received_events_url": "https://api.github.com/users/bixia1/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bixia1", "id": 35820639, "node_id": "MDQ6VXNlcjM1ODIwNjM5", "avatar_url": "https://avatars1.githubusercontent.com/u/35820639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bixia1", "html_url": "https://github.com/bixia1", "followers_url": "https://api.github.com/users/bixia1/followers", "following_url": "https://api.github.com/users/bixia1/following{/other_user}", "gists_url": "https://api.github.com/users/bixia1/gists{/gist_id}", "starred_url": "https://api.github.com/users/bixia1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bixia1/subscriptions", "organizations_url": "https://api.github.com/users/bixia1/orgs", "repos_url": "https://api.github.com/users/bixia1/repos", "events_url": "https://api.github.com/users/bixia1/events{/privacy}", "received_events_url": "https://api.github.com/users/bixia1/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-11-10T08:52:46Z", "updated_at": "2020-02-03T16:07:30Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow):**\r\n  Yes, the code I'm running is taken from [here](https://github.com/qubvel/efficientnet). I used the script [here](https://github.com/aaroey/tensorflow/blob/tftrt20/tftrt20/test.py) provided by @aaroey and replaced **mobilenet** by **efficientnet**\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04):**\r\nUbuntu 16.04.3 LTS\r\n**- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:**\r\n**- TensorFlow installed from (source or binary):**\r\n**- TensorFlow version (use command below):**\r\nv2.0.0-rc2-26-g64c3d38 2.0.0\r\n**- Python version:**\r\nPython 3.5.2\r\n**- Bazel version (if compiling from source):**\r\nNot Applicable\r\n**- GCC/Compiler version (if compiling from source):**\r\n**- CUDA/cuDNN version:** \r\nCUDA: 10.0; CuDNN: 7.6.4\r\n**- GPU model and memory:**\r\nTesla M60 (AWS)\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nRunning the script attached above and provided by @aaroey with efficientnet give segmentation fault\r\n\r\n**Describe the expected behavior**\r\nRunning the same script provided above as is run smoothly\r\n\r\n**Code to reproduce the issue**\r\nRun the following code:\r\n\r\n`import datetime\r\nimport numpy as np\r\nimport tensorflow as tf\r\nfrom tensorflow.python.compiler.tensorrt import trt_convert as trt\r\n\r\nmsgs = []\r\ninp = np.random.random_sample([1, 224, 224, 3]).astype(np.float32)\r\ninpconst = tf.constant(inp)\r\n\r\n\r\ndef run_and_time(saved_model_dir, ref_result=None):\r\n  \"\"\"Helper method to measure the running time of a SavedModel.\"\"\"\r\n  NUM_RUNS = 100\r\n  root = tf.saved_model.load(saved_model_dir)\r\n  concrete_func = root.signatures[\"serving_default\"]\r\n  result = None\r\n  for _ in range(2):  # warm up\r\n    concrete_func(input_1=inpconst)\r\n\r\n  start_time = datetime.datetime.now()\r\n  for i in range(NUM_RUNS):\r\n    result = concrete_func(input_1=inpconst)\r\n  end_time = datetime.datetime.now()\r\n\r\n  elapsed = end_time - start_time\r\n  result = result[list(result.keys())[0]]\r\n\r\n  msgs.append(\"------> time for %d runs: %s\" % (NUM_RUNS, str(elapsed)))\r\n  if ref_result is not None:\r\n    msgs.append(\r\n        \"------> max diff: %s\" % str(np.max(np.abs(result - ref_result))))\r\n  return result\r\n\r\n\r\n\r\nsaved_model_dir = \"/tmp/efficientnet.original\"\r\n\r\nimport efficientnet.tfkeras as efn\r\nmodel = efn.EfficientNetB0(weights='imagenet')\r\ntf.saved_model.save(model, saved_model_dir)\r\n\r\n\r\nparams = trt.DEFAULT_TRT_CONVERSION_PARAMS._replace(\r\n    precision_mode='FP16',\r\n    is_dynamic_op=True,\r\n    minimum_segment_size=10)\r\n\r\nconverter = trt.TrtGraphConverterV2(\r\n    input_saved_model_dir=saved_model_dir,\r\n    conversion_params=params)\r\n\r\nconverter.convert()\r\nsaved_model_dir_trt = \"/tmp/efficientnet.trt\"\r\nconverter.save(saved_model_dir_trt)\r\nref_result = run_and_time(saved_model_dir)\r\nrun_and_time(saved_model_dir_trt, ref_result)\r\nfor m in msgs:\r\n  print(m)`\r\n\r\n\r\n**Other info / logs**\r\nusing GDB:\r\n\r\ngdb python\r\nGNU gdb (Ubuntu 7.11.1-0ubuntu1~16.5) 7.11.1\r\nCopyright (C) 2016 Free Software Foundation, Inc.\r\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\r\nThis is free software: you are free to change and redistribute it.\r\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\r\nand \"show warranty\" for details.\r\nThis GDB was configured as \"x86_64-linux-gnu\".\r\nType \"show configuration\" for configuration details.\r\nFor bug reporting instructions, please see:\r\n<http://www.gnu.org/software/gdb/bugs/>.\r\nFind the GDB manual and other documentation resources online at:\r\n<http://www.gnu.org/software/gdb/documentation/>.\r\nFor help, type \"help\".\r\nType \"apropos word\" to search for commands related to \"word\"...\r\nReading symbols from python...(no debugging symbols found)...done.\r\n(gdb) run effi.py \r\nStarting program: /home/ubuntu/tf20/bin/python effi.py\r\n[Thread debugging using libthread_db enabled]\r\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\r\n[New Thread 0x7ffff43e0700 (LWP 7815)]\r\n[New Thread 0x7ffff3bdf700 (LWP 7816)]\r\n[New Thread 0x7fffef3de700 (LWP 7817)]\r\n[New Thread 0x7fffecbdd700 (LWP 7818)]\r\n[New Thread 0x7fffea3dc700 (LWP 7819)]\r\n[New Thread 0x7fffe7bdb700 (LWP 7820)]\r\n[New Thread 0x7fffe53da700 (LWP 7821)]\r\n[New Thread 0x7fffe2bd9700 (LWP 7822)]\r\n[New Thread 0x7fffe03d8700 (LWP 7823)]\r\n[New Thread 0x7fffddbd7700 (LWP 7824)]\r\n[New Thread 0x7fffdd3d6700 (LWP 7825)]\r\n[New Thread 0x7fffdabd5700 (LWP 7826)]\r\n[New Thread 0x7fffda3d4700 (LWP 7827)]\r\n[New Thread 0x7fffd5bd3700 (LWP 7828)]\r\n[New Thread 0x7fffd33d2700 (LWP 7829)]\r\n[Thread 0x7fffdd3d6700 (LWP 7825) exited]\r\n[Thread 0x7fffddbd7700 (LWP 7824) exited]\r\n[Thread 0x7fffe03d8700 (LWP 7823) exited]\r\n[Thread 0x7fffe2bd9700 (LWP 7822) exited]\r\n[Thread 0x7fffd5bd3700 (LWP 7828) exited]\r\n[Thread 0x7fffda3d4700 (LWP 7827) exited]\r\n[Thread 0x7fffdabd5700 (LWP 7826) exited]\r\n[Thread 0x7fffe53da700 (LWP 7821) exited]\r\n[Thread 0x7fffe7bdb700 (LWP 7820) exited]\r\n[Thread 0x7fffd33d2700 (LWP 7829) exited]\r\n[Thread 0x7fffea3dc700 (LWP 7819) exited]\r\n[Thread 0x7fffecbdd700 (LWP 7818) exited]\r\n[Thread 0x7fffef3de700 (LWP 7817) exited]\r\n[Thread 0x7ffff3bdf700 (LWP 7816) exited]\r\n[Thread 0x7ffff43e0700 (LWP 7815) exited]\r\n[New Thread 0x7fffd33d2700 (LWP 7833)]\r\n[New Thread 0x7fffd5bd3700 (LWP 7834)]\r\n[New Thread 0x7fffda3d4700 (LWP 7835)]\r\n[New Thread 0x7fffdabd5700 (LWP 7836)]\r\n[New Thread 0x7fff7b306700 (LWP 7837)]\r\n[New Thread 0x7fff78b05700 (LWP 7838)]\r\n[New Thread 0x7fff76304700 (LWP 7839)]\r\n[New Thread 0x7fff73b03700 (LWP 7840)]\r\n[New Thread 0x7fff73302700 (LWP 7841)]\r\n[New Thread 0x7fff70b01700 (LWP 7842)]\r\n[New Thread 0x7fff6e300700 (LWP 7843)]\r\n[New Thread 0x7fff6daff700 (LWP 7844)]\r\n[New Thread 0x7fff672fe700 (LWP 7845)]\r\n[New Thread 0x7fff64afd700 (LWP 7846)]\r\n[New Thread 0x7fff642fc700 (LWP 7847)]\r\n2019-11-10 08:50:49.862529: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcuda.so.1\r\n[New Thread 0x7fff52cd2700 (LWP 7848)]\r\n2019-11-10 08:50:49.866720: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1006] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-11-10 08:50:49.867387: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1618] Found device 0 with properties: \r\nname: Tesla M60 major: 5 minor: 2 memoryClockRate(GHz): 1.1775\r\npciBusID: 0000:00:1e.0\r\n2019-11-10 08:50:49.872638: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.0\r\n2019-11-10 08:50:49.879677: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10.0\r\n2019-11-10 08:50:49.885164: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcufft.so.10.0\r\n2019-11-10 08:50:49.889850: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcurand.so.10.0\r\n2019-11-10 08:50:49.898681: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusolver.so.10.0\r\n2019-11-10 08:50:49.907196: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusparse.so.10.0\r\n2019-11-10 08:50:49.916626: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7\r\n2019-11-10 08:50:49.916725: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1006] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-11-10 08:50:49.917360: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1006] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-11-10 08:50:49.918021: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1746] Adding visible gpu devices: 0\r\n2019-11-10 08:50:49.918338: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n[New Thread 0x7fff52257700 (LWP 7849)]\r\n[New Thread 0x7fff51a56700 (LWP 7850)]\r\n[New Thread 0x7fff51255700 (LWP 7851)]\r\n[New Thread 0x7fff50a54700 (LWP 7852)]\r\n[New Thread 0x7fff0d9c1700 (LWP 7853)]\r\n[New Thread 0x7fff0d1c0700 (LWP 7854)]\r\n[New Thread 0x7fff0c9bf700 (LWP 7855)]\r\n[New Thread 0x7ffeeffff700 (LWP 7856)]\r\n[New Thread 0x7ffee7fff700 (LWP 7857)]\r\n[New Thread 0x7ffeef7fe700 (LWP 7858)]\r\n[New Thread 0x7ffeeeffd700 (LWP 7859)]\r\n[New Thread 0x7ffeee7fc700 (LWP 7860)]\r\n[New Thread 0x7ffeedffb700 (LWP 7861)]\r\n[New Thread 0x7ffeed7fa700 (LWP 7862)]\r\n[New Thread 0x7ffeecff9700 (LWP 7863)]\r\n[New Thread 0x7ffee77fe700 (LWP 7864)]\r\n[New Thread 0x7ffee6ffd700 (LWP 7865)]\r\n[New Thread 0x7ffee67fc700 (LWP 7866)]\r\n[New Thread 0x7ffee5ffb700 (LWP 7867)]\r\n2019-11-10 08:50:49.927704: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2300095000 Hz\r\n[Thread 0x7ffee67fc700 (LWP 7866) exited]\r\n[New Thread 0x7ffee67fc700 (LWP 7868)]\r\n[New Thread 0x7ffee57fa700 (LWP 7869)]\r\n[New Thread 0x7ffee4ff9700 (LWP 7870)]\r\n[New Thread 0x7ffeaffff700 (LWP 7871)]\r\n[New Thread 0x7ffeaf7fe700 (LWP 7872)]\r\n[New Thread 0x7ffeaeffd700 (LWP 7873)]\r\n[New Thread 0x7ffeae7fc700 (LWP 7874)]\r\n[New Thread 0x7ffeadffb700 (LWP 7875)]\r\n[New Thread 0x7ffead7fa700 (LWP 7876)]\r\n[New Thread 0x7ffeacff9700 (LWP 7877)]\r\n[New Thread 0x7ffe8ffff700 (LWP 7878)]\r\n[New Thread 0x7ffe8f7fe700 (LWP 7879)]\r\n[New Thread 0x7ffe8effd700 (LWP 7880)]\r\n[New Thread 0x7ffe8e7fc700 (LWP 7881)]\r\n[New Thread 0x7ffe8dffb700 (LWP 7882)]\r\n[New Thread 0x7ffe8d7fa700 (LWP 7883)]\r\n2019-11-10 08:50:49.929881: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x5181b90 executing computations on platform Host. Devices:\r\n2019-11-10 08:50:49.929908: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): Host, Default Version\r\n[New Thread 0x7ffe8cff9700 (LWP 7884)]\r\n[New Thread 0x7ffe6ffff700 (LWP 7885)]\r\n[New Thread 0x7ffe6f7fe700 (LWP 7886)]\r\n[New Thread 0x7ffe6effd700 (LWP 7887)]\r\n[New Thread 0x7ffe6e7fc700 (LWP 7888)]\r\n2019-11-10 08:50:49.991708: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1006] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-11-10 08:50:49.992298: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x51c4a30 executing computations on platform CUDA. Devices:\r\n2019-11-10 08:50:49.992329: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): Tesla M60, Compute Capability 5.2\r\n[Thread 0x7ffe6f7fe700 (LWP 7886) exited]\r\n2019-11-10 08:50:49.992513: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1006] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-11-10 08:50:49.993023: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1618] Found device 0 with properties: \r\nname: Tesla M60 major: 5 minor: 2 memoryClockRate(GHz): 1.1775\r\npciBusID: 0000:00:1e.0\r\n2019-11-10 08:50:49.993088: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.0\r\n2019-11-10 08:50:49.993123: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10.0\r\n2019-11-10 08:50:49.993156: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcufft.so.10.0\r\n2019-11-10 08:50:49.993185: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcurand.so.10.0\r\n2019-11-10 08:50:49.993214: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusolver.so.10.0\r\n2019-11-10 08:50:49.993241: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusparse.so.10.0\r\n2019-11-10 08:50:49.993307: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7\r\n2019-11-10 08:50:49.993392: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1006] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-11-10 08:50:49.993922: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1006] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-11-10 08:50:49.994402: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1746] Adding visible gpu devices: 0\r\n2019-11-10 08:50:49.994475: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.0\r\n2019-11-10 08:50:49.995502: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1159] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-11-10 08:50:49.995527: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1165]      0 \r\n2019-11-10 08:50:49.995545: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1178] 0:   N \r\n2019-11-10 08:50:49.995994: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1006] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-11-10 08:50:49.996530: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1006] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-11-10 08:50:49.997043: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1304] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7162 MB memory) -> physical GPU (device: 0, name: Tesla M60, pci bus id: 0000:00:1e.0, compute capability: 5.2)\r\n[New Thread 0x7ffe6f7fe700 (LWP 7889)]\r\n[New Thread 0x7ffe6dffb700 (LWP 7890)]\r\n[New Thread 0x7ffe6d7fa700 (LWP 7891)]\r\n[New Thread 0x7ffe6cff9700 (LWP 7892)]\r\n[New Thread 0x7ffe4ffff700 (LWP 7893)]\r\n[New Thread 0x7ffe4f7fe700 (LWP 7894)]\r\n[New Thread 0x7ffe4effd700 (LWP 7895)]\r\n[New Thread 0x7ffe4e7fc700 (LWP 7896)]\r\n[New Thread 0x7ffe4dffb700 (LWP 7897)]\r\n[New Thread 0x7ffe4d7fa700 (LWP 7898)]\r\n[New Thread 0x7ffe4cff9700 (LWP 7899)]\r\n[New Thread 0x7ffe2ffff700 (LWP 7900)]\r\n[New Thread 0x7ffe2f7fe700 (LWP 7901)]\r\n[New Thread 0x7ffe2effd700 (LWP 7902)]\r\n[New Thread 0x7ffe2e7fc700 (LWP 7903)]\r\n[New Thread 0x7ffe2dffb700 (LWP 7904)]\r\n[New Thread 0x7ffe2d7fa700 (LWP 7905)]\r\n[New Thread 0x7ffe2cff9700 (LWP 7906)]\r\n[New Thread 0x7ffe07a4e700 (LWP 7907)]\r\n[New Thread 0x7ffdf2027700 (LWP 7908)]\r\n[Thread 0x7ffdf2027700 (LWP 7908) exited]\r\n2019-11-10 08:51:09.523160: W tensorflow/python/util/util.cc:299] Sets are not currently considered sequences, but this may change in the future, so consider avoiding using them.\r\nWARNING: Logging before flag parsing goes to stderr.\r\nW1110 08:51:22.750380 140737353942784 deprecation.py:506] From /home/ubuntu/tf20/lib/python3.5/site-packages/tensorflow_core/python/ops/resource_variable_ops.py:1781: calling BaseResourceVariable.__init__ (from tensorflow.python.ops.resource_variable_ops) with constraint is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nIf using Keras pass *_constraint arguments to layers.\r\n2019-11-10 08:51:28.819439: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libnvinfer.so.5\r\n[New Thread 0x7ffdf2027700 (LWP 7909)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7910)]\r\n[New Thread 0x7ffdcffff700 (LWP 7911)]\r\n[Thread 0x7ffdcffff700 (LWP 7911) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7910) exited]\r\n[Thread 0x7ffdf2027700 (LWP 7909) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 7912)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7913)]\r\n[New Thread 0x7ffdf2027700 (LWP 7914)]\r\n[Thread 0x7ffdd5d34700 (LWP 7913) exited]\r\n[Thread 0x7ffdcffff700 (LWP 7912) exited]\r\n[Thread 0x7ffdf2027700 (LWP 7914) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 7915)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7916)]\r\n[New Thread 0x7ffdcffff700 (LWP 7917)]\r\n[Thread 0x7ffdcffff700 (LWP 7917) exited]\r\n[Thread 0x7ffdf2027700 (LWP 7915) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7916) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 7918)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7919)]\r\n[New Thread 0x7ffdf2027700 (LWP 7920)]\r\n[Thread 0x7ffdf2027700 (LWP 7920) exited]\r\n[Thread 0x7ffdcffff700 (LWP 7918) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7919) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 7921)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7922)]\r\n[New Thread 0x7ffdcffff700 (LWP 7923)]\r\n[Thread 0x7ffdd5d34700 (LWP 7922) exited]\r\n[Thread 0x7ffdf2027700 (LWP 7921) exited]\r\n[Thread 0x7ffdcffff700 (LWP 7923) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 7924)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7925)]\r\n[New Thread 0x7ffdf2027700 (LWP 7926)]\r\n[Thread 0x7ffdf2027700 (LWP 7926) exited]\r\n[Thread 0x7ffdcffff700 (LWP 7924) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7925) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 7927)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7928)]\r\n[New Thread 0x7ffdcffff700 (LWP 7929)]\r\n[Thread 0x7ffdcffff700 (LWP 7929) exited]\r\n[Thread 0x7ffdf2027700 (LWP 7927) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7928) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 7930)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7931)]\r\n[New Thread 0x7ffdf2027700 (LWP 7932)]\r\n[Thread 0x7ffdf2027700 (LWP 7932) exited]\r\n[Thread 0x7ffdcffff700 (LWP 7930) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7931) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 7933)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7934)]\r\n[New Thread 0x7ffdcffff700 (LWP 7935)]\r\n[Thread 0x7ffdcffff700 (LWP 7935) exited]\r\n[Thread 0x7ffdf2027700 (LWP 7933) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7934) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 7936)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7937)]\r\n[New Thread 0x7ffdf2027700 (LWP 7938)]\r\n[Thread 0x7ffdf2027700 (LWP 7938) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7937) exited]\r\n[Thread 0x7ffdcffff700 (LWP 7936) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 7939)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7940)]\r\n[New Thread 0x7ffdcffff700 (LWP 7941)]\r\n[Thread 0x7ffdcffff700 (LWP 7941) exited]\r\n[Thread 0x7ffdf2027700 (LWP 7939) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7940) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 7942)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7943)]\r\n[New Thread 0x7ffdf2027700 (LWP 7944)]\r\n[Thread 0x7ffdf2027700 (LWP 7944) exited]\r\n[Thread 0x7ffdcffff700 (LWP 7942) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7943) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 7945)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7946)]\r\n[New Thread 0x7ffdcffff700 (LWP 7947)]\r\n[Thread 0x7ffdcffff700 (LWP 7947) exited]\r\n[Thread 0x7ffdf2027700 (LWP 7945) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7946) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 7948)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7949)]\r\n[New Thread 0x7ffdf2027700 (LWP 7950)]\r\n[Thread 0x7ffdf2027700 (LWP 7950) exited]\r\n[Thread 0x7ffdcffff700 (LWP 7948) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7949) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 7951)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7952)]\r\n[New Thread 0x7ffdcffff700 (LWP 7953)]\r\n[Thread 0x7ffdcffff700 (LWP 7953) exited]\r\n[Thread 0x7ffdf2027700 (LWP 7951) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7952) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 7954)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7955)]\r\n[New Thread 0x7ffdf2027700 (LWP 7956)]\r\n[Thread 0x7ffdf2027700 (LWP 7956) exited]\r\n[Thread 0x7ffdcffff700 (LWP 7954) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7955) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 7957)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7958)]\r\n[New Thread 0x7ffdcffff700 (LWP 7959)]\r\n[Thread 0x7ffdcffff700 (LWP 7959) exited]\r\n[Thread 0x7ffdf2027700 (LWP 7957) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7958) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 7960)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7961)]\r\n[New Thread 0x7ffdf2027700 (LWP 7962)]\r\n[Thread 0x7ffdf2027700 (LWP 7962) exited]\r\n[Thread 0x7ffdcffff700 (LWP 7960) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7961) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 7963)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7964)]\r\n[New Thread 0x7ffdcffff700 (LWP 7965)]\r\n[Thread 0x7ffdcffff700 (LWP 7965) exited]\r\n[Thread 0x7ffdf2027700 (LWP 7963) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7964) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 7966)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7967)]\r\n[New Thread 0x7ffdf2027700 (LWP 7968)]\r\n[Thread 0x7ffdf2027700 (LWP 7968) exited]\r\n[Thread 0x7ffdcffff700 (LWP 7966) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7967) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 7969)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7970)]\r\n[New Thread 0x7ffdcffff700 (LWP 7971)]\r\n[Thread 0x7ffdcffff700 (LWP 7971) exited]\r\n[Thread 0x7ffdf2027700 (LWP 7969) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7970) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 7972)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7973)]\r\n[New Thread 0x7ffdf2027700 (LWP 7974)]\r\n[Thread 0x7ffdf2027700 (LWP 7974) exited]\r\n[Thread 0x7ffdcffff700 (LWP 7972) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7973) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 7975)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7976)]\r\n[New Thread 0x7ffdcffff700 (LWP 7977)]\r\n[Thread 0x7ffdcffff700 (LWP 7977) exited]\r\n[Thread 0x7ffdf2027700 (LWP 7975) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7976) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 7978)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7979)]\r\n[New Thread 0x7ffdf2027700 (LWP 7980)]\r\n[Thread 0x7ffdf2027700 (LWP 7980) exited]\r\n[Thread 0x7ffdcffff700 (LWP 7978) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7979) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 7981)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7982)]\r\n[New Thread 0x7ffdcffff700 (LWP 7983)]\r\n[Thread 0x7ffdcffff700 (LWP 7983) exited]\r\n[Thread 0x7ffdf2027700 (LWP 7981) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7982) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 7984)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7985)]\r\n[New Thread 0x7ffdf2027700 (LWP 7986)]\r\n[Thread 0x7ffdf2027700 (LWP 7986) exited]\r\n[Thread 0x7ffdcffff700 (LWP 7984) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7985) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 7987)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7988)]\r\n[New Thread 0x7ffdcffff700 (LWP 7989)]\r\n[Thread 0x7ffdcffff700 (LWP 7989) exited]\r\n[Thread 0x7ffdf2027700 (LWP 7987) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7988) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 7990)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7991)]\r\n[New Thread 0x7ffdf2027700 (LWP 7992)]\r\n[Thread 0x7ffdf2027700 (LWP 7992) exited]\r\n[Thread 0x7ffdcffff700 (LWP 7990) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7991) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 7993)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7994)]\r\n[New Thread 0x7ffdcffff700 (LWP 7995)]\r\n[Thread 0x7ffdcffff700 (LWP 7995) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 7994) exited]\r\n[Thread 0x7ffdf2027700 (LWP 7993) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 7996)]\r\n[New Thread 0x7ffdd5d34700 (LWP 7997)]\r\n[New Thread 0x7ffdf2027700 (LWP 7998)]\r\n[Thread 0x7ffdd5d34700 (LWP 7997) exited]\r\n[Thread 0x7ffdcffff700 (LWP 7996) exited]\r\n[Thread 0x7ffdf2027700 (LWP 7998) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 7999)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8000)]\r\n[New Thread 0x7ffdcffff700 (LWP 8001)]\r\n[Thread 0x7ffdcffff700 (LWP 8001) exited]\r\n[Thread 0x7ffdf2027700 (LWP 7999) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8000) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8002)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8003)]\r\n[New Thread 0x7ffdf2027700 (LWP 8004)]\r\n[Thread 0x7ffdd5d34700 (LWP 8003) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8002) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8004) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8005)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8006)]\r\n[New Thread 0x7ffdcffff700 (LWP 8007)]\r\n[Thread 0x7ffdcffff700 (LWP 8007) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8005) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8006) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8008)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8009)]\r\n[New Thread 0x7ffdf2027700 (LWP 8010)]\r\n[Thread 0x7ffdf2027700 (LWP 8010) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8008) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8009) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8011)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8012)]\r\n[New Thread 0x7ffdcffff700 (LWP 8013)]\r\n[Thread 0x7ffdcffff700 (LWP 8013) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8011) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8012) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8014)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8015)]\r\n[New Thread 0x7ffdf2027700 (LWP 8016)]\r\n[Thread 0x7ffdf2027700 (LWP 8016) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8014) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8015) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8017)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8018)]\r\n[New Thread 0x7ffdcffff700 (LWP 8019)]\r\n[Thread 0x7ffdd5d34700 (LWP 8018) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8017) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8019) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8020)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8021)]\r\n[New Thread 0x7ffdf2027700 (LWP 8022)]\r\n[Thread 0x7ffdf2027700 (LWP 8022) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8020) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8021) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8023)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8024)]\r\n[New Thread 0x7ffdcffff700 (LWP 8025)]\r\n[Thread 0x7ffdcffff700 (LWP 8025) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8023) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8024) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8026)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8027)]\r\n[New Thread 0x7ffdf2027700 (LWP 8028)]\r\n[Thread 0x7ffdd5d34700 (LWP 8027) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8026) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8028) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8029)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8030)]\r\n[New Thread 0x7ffdcffff700 (LWP 8031)]\r\n[Thread 0x7ffdcffff700 (LWP 8031) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8029) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8030) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8032)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8033)]\r\n[New Thread 0x7ffdf2027700 (LWP 8034)]\r\n[Thread 0x7ffdd5d34700 (LWP 8033) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8032) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8034) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8035)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8036)]\r\n[New Thread 0x7ffdcffff700 (LWP 8037)]\r\n[Thread 0x7ffdcffff700 (LWP 8037) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8035) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8036) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8038)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8039)]\r\n[New Thread 0x7ffdf2027700 (LWP 8040)]\r\n[Thread 0x7ffdf2027700 (LWP 8040) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8038) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8039) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8041)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8042)]\r\n[New Thread 0x7ffdcffff700 (LWP 8043)]\r\n[Thread 0x7ffdcffff700 (LWP 8043) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8041) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8042) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8044)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8045)]\r\n[New Thread 0x7ffdf2027700 (LWP 8046)]\r\n[Thread 0x7ffdf2027700 (LWP 8046) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8044) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8045) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8047)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8048)]\r\n[New Thread 0x7ffdcffff700 (LWP 8049)]\r\n[Thread 0x7ffdd5d34700 (LWP 8048) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8047) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8049) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8050)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8051)]\r\n[New Thread 0x7ffdf2027700 (LWP 8052)]\r\n[Thread 0x7ffdf2027700 (LWP 8052) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8050) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8051) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8053)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8054)]\r\n[New Thread 0x7ffdcffff700 (LWP 8055)]\r\n[Thread 0x7ffdcffff700 (LWP 8055) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8053) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8054) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8056)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8057)]\r\n[New Thread 0x7ffdf2027700 (LWP 8058)]\r\n[Thread 0x7ffdf2027700 (LWP 8058) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8056) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8057) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8059)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8060)]\r\n[New Thread 0x7ffdcffff700 (LWP 8061)]\r\n[Thread 0x7ffdcffff700 (LWP 8061) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8059) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8060) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8062)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8063)]\r\n[New Thread 0x7ffdf2027700 (LWP 8064)]\r\n[Thread 0x7ffdf2027700 (LWP 8064) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8062) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8063) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8065)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8066)]\r\n[New Thread 0x7ffdcffff700 (LWP 8067)]\r\n[Thread 0x7ffdcffff700 (LWP 8067) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8065) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8066) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8068)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8069)]\r\n[New Thread 0x7ffdf2027700 (LWP 8070)]\r\n[Thread 0x7ffdf2027700 (LWP 8070) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8068) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8069) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8071)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8072)]\r\n[New Thread 0x7ffdcffff700 (LWP 8073)]\r\n[Thread 0x7ffdcffff700 (LWP 8073) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8071) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8072) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8074)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8075)]\r\n[New Thread 0x7ffdf2027700 (LWP 8076)]\r\n[Thread 0x7ffdf2027700 (LWP 8076) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8074) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8075) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8077)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8078)]\r\n[New Thread 0x7ffdcffff700 (LWP 8079)]\r\n[Thread 0x7ffdcffff700 (LWP 8079) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8077) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8078) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8080)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8081)]\r\n[New Thread 0x7ffdf2027700 (LWP 8082)]\r\n[Thread 0x7ffdf2027700 (LWP 8082) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8080) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8081) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8083)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8084)]\r\n[New Thread 0x7ffdcffff700 (LWP 8085)]\r\n[Thread 0x7ffdcffff700 (LWP 8085) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8083) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8084) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8086)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8087)]\r\n[New Thread 0x7ffdf2027700 (LWP 8088)]\r\n[Thread 0x7ffdf2027700 (LWP 8088) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8086) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8087) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8089)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8090)]\r\n[New Thread 0x7ffdcffff700 (LWP 8091)]\r\n[Thread 0x7ffdcffff700 (LWP 8091) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8090) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8089) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8092)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8093)]\r\n[New Thread 0x7ffdf2027700 (LWP 8094)]\r\n[Thread 0x7ffdf2027700 (LWP 8094) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8092) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8093) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8095)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8096)]\r\n[New Thread 0x7ffdcffff700 (LWP 8097)]\r\n[Thread 0x7ffdcffff700 (LWP 8097) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8095) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8096) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8098)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8099)]\r\n[New Thread 0x7ffdf2027700 (LWP 8100)]\r\n[Thread 0x7ffdf2027700 (LWP 8100) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8098) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8099) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8101)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8102)]\r\n[New Thread 0x7ffdcffff700 (LWP 8103)]\r\n[Thread 0x7ffdcffff700 (LWP 8103) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8101) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8102) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8104)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8105)]\r\n[New Thread 0x7ffdf2027700 (LWP 8106)]\r\n[Thread 0x7ffdf2027700 (LWP 8106) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8104) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8105) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8107)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8108)]\r\n[New Thread 0x7ffdcffff700 (LWP 8109)]\r\n[Thread 0x7ffdcffff700 (LWP 8109) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8107) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8108) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8110)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8111)]\r\n[New Thread 0x7ffdf2027700 (LWP 8112)]\r\n[Thread 0x7ffdf2027700 (LWP 8112) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8110) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8111) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8113)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8114)]\r\n[New Thread 0x7ffdcffff700 (LWP 8115)]\r\n[Thread 0x7ffdcffff700 (LWP 8115) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8113) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8114) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8116)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8117)]\r\n[New Thread 0x7ffdf2027700 (LWP 8118)]\r\n[Thread 0x7ffdf2027700 (LWP 8118) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8116) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8117) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8119)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8120)]\r\n[New Thread 0x7ffdcffff700 (LWP 8121)]\r\n[Thread 0x7ffdcffff700 (LWP 8121) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8119) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8120) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8122)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8123)]\r\n[New Thread 0x7ffdf2027700 (LWP 8124)]\r\n[Thread 0x7ffdf2027700 (LWP 8124) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8122) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8123) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8125)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8126)]\r\n[New Thread 0x7ffdcffff700 (LWP 8127)]\r\n[Thread 0x7ffdcffff700 (LWP 8127) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8125) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8126) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8128)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8129)]\r\n[New Thread 0x7ffdf2027700 (LWP 8130)]\r\n[Thread 0x7ffdf2027700 (LWP 8130) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8128) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8129) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8131)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8132)]\r\n[New Thread 0x7ffdcffff700 (LWP 8133)]\r\n[Thread 0x7ffdcffff700 (LWP 8133) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8131) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8132) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8134)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8135)]\r\n[New Thread 0x7ffdf2027700 (LWP 8136)]\r\n[Thread 0x7ffdf2027700 (LWP 8136) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8134) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8135) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8137)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8138)]\r\n[New Thread 0x7ffdcffff700 (LWP 8139)]\r\n[Thread 0x7ffdcffff700 (LWP 8139) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8137) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8138) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8140)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8141)]\r\n[New Thread 0x7ffdf2027700 (LWP 8142)]\r\n[Thread 0x7ffdf2027700 (LWP 8142) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8140) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8141) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8143)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8144)]\r\n[New Thread 0x7ffdcffff700 (LWP 8145)]\r\n[Thread 0x7ffdcffff700 (LWP 8145) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8143) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8144) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8146)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8147)]\r\n[New Thread 0x7ffdf2027700 (LWP 8148)]\r\n[Thread 0x7ffdf2027700 (LWP 8148) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8146) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8147) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8149)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8150)]\r\n[New Thread 0x7ffdcffff700 (LWP 8151)]\r\n[Thread 0x7ffdcffff700 (LWP 8151) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8149) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8150) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8152)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8153)]\r\n[New Thread 0x7ffdf2027700 (LWP 8154)]\r\n[Thread 0x7ffdf2027700 (LWP 8154) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8152) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8153) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8155)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8156)]\r\n[New Thread 0x7ffdcffff700 (LWP 8157)]\r\n[Thread 0x7ffdcffff700 (LWP 8157) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8155) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8156) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8158)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8159)]\r\n[New Thread 0x7ffdf2027700 (LWP 8160)]\r\n[Thread 0x7ffdf2027700 (LWP 8160) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8158) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8159) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8161)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8162)]\r\n[New Thread 0x7ffdcffff700 (LWP 8163)]\r\n[Thread 0x7ffdcffff700 (LWP 8163) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8161) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8162) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8164)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8165)]\r\n[New Thread 0x7ffdf2027700 (LWP 8166)]\r\n[Thread 0x7ffdf2027700 (LWP 8166) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8164) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8165) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8167)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8168)]\r\n[New Thread 0x7ffdcffff700 (LWP 8169)]\r\n[Thread 0x7ffdcffff700 (LWP 8169) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8167) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8168) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8170)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8171)]\r\n[New Thread 0x7ffdf2027700 (LWP 8172)]\r\n[Thread 0x7ffdf2027700 (LWP 8172) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8170) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8171) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8173)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8174)]\r\n[New Thread 0x7ffdcffff700 (LWP 8175)]\r\n[Thread 0x7ffdcffff700 (LWP 8175) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8173) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8174) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8176)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8177)]\r\n[New Thread 0x7ffdf2027700 (LWP 8178)]\r\n[Thread 0x7ffdf2027700 (LWP 8178) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8176) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8177) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8179)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8180)]\r\n[New Thread 0x7ffdcffff700 (LWP 8181)]\r\n[Thread 0x7ffdcffff700 (LWP 8181) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8179) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8180) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8182)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8183)]\r\n[New Thread 0x7ffdf2027700 (LWP 8184)]\r\n[Thread 0x7ffdf2027700 (LWP 8184) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8182) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8183) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8185)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8186)]\r\n[New Thread 0x7ffdcffff700 (LWP 8187)]\r\n[Thread 0x7ffdcffff700 (LWP 8187) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8185) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8186) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8188)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8189)]\r\n[New Thread 0x7ffdf2027700 (LWP 8190)]\r\n[Thread 0x7ffdf2027700 (LWP 8190) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8188) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8189) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8191)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8192)]\r\n[New Thread 0x7ffdcffff700 (LWP 8193)]\r\n[Thread 0x7ffdcffff700 (LWP 8193) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8191) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8192) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8194)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8195)]\r\n[New Thread 0x7ffdf2027700 (LWP 8196)]\r\n[Thread 0x7ffdf2027700 (LWP 8196) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8194) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8195) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8197)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8198)]\r\n[New Thread 0x7ffdcffff700 (LWP 8199)]\r\n[Thread 0x7ffdcffff700 (LWP 8199) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8197) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8198) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8200)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8201)]\r\n[New Thread 0x7ffdf2027700 (LWP 8202)]\r\n[Thread 0x7ffdf2027700 (LWP 8202) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8200) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8201) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8203)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8204)]\r\n[New Thread 0x7ffdcffff700 (LWP 8205)]\r\n[Thread 0x7ffdcffff700 (LWP 8205) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8203) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8204) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8206)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8207)]\r\n[New Thread 0x7ffdf2027700 (LWP 8208)]\r\n[Thread 0x7ffdf2027700 (LWP 8208) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8206) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8207) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8209)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8210)]\r\n[New Thread 0x7ffdcffff700 (LWP 8211)]\r\n[Thread 0x7ffdcffff700 (LWP 8211) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8209) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8210) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8212)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8213)]\r\n[New Thread 0x7ffdf2027700 (LWP 8214)]\r\n[Thread 0x7ffdf2027700 (LWP 8214) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8212) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8213) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8215)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8216)]\r\n[New Thread 0x7ffdcffff700 (LWP 8217)]\r\n[Thread 0x7ffdcffff700 (LWP 8217) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8215) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8216) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8218)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8219)]\r\n[New Thread 0x7ffdf2027700 (LWP 8220)]\r\n[Thread 0x7ffdf2027700 (LWP 8220) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8218) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8219) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8221)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8222)]\r\n[New Thread 0x7ffdcffff700 (LWP 8223)]\r\n[Thread 0x7ffdcffff700 (LWP 8223) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8221) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8222) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8224)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8225)]\r\n[New Thread 0x7ffdf2027700 (LWP 8226)]\r\n[Thread 0x7ffdf2027700 (LWP 8226) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8224) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8225) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8227)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8228)]\r\n[New Thread 0x7ffdcffff700 (LWP 8229)]\r\n[Thread 0x7ffdcffff700 (LWP 8229) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8227) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8228) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8230)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8231)]\r\n[New Thread 0x7ffdf2027700 (LWP 8232)]\r\n[Thread 0x7ffdf2027700 (LWP 8232) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8230) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8231) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8233)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8234)]\r\n[New Thread 0x7ffdcffff700 (LWP 8235)]\r\n[Thread 0x7ffdcffff700 (LWP 8235) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8233) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8234) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8236)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8237)]\r\n[New Thread 0x7ffdf2027700 (LWP 8238)]\r\n[Thread 0x7ffdf2027700 (LWP 8238) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8236) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8237) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8239)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8240)]\r\n[New Thread 0x7ffdcffff700 (LWP 8241)]\r\n[Thread 0x7ffdcffff700 (LWP 8241) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8239) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8240) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8242)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8243)]\r\n[New Thread 0x7ffdf2027700 (LWP 8244)]\r\n[Thread 0x7ffdf2027700 (LWP 8244) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8242) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8243) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8245)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8246)]\r\n[New Thread 0x7ffdcffff700 (LWP 8247)]\r\n[Thread 0x7ffdcffff700 (LWP 8247) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8245) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8246) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8248)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8249)]\r\n[New Thread 0x7ffdf2027700 (LWP 8250)]\r\n[Thread 0x7ffdf2027700 (LWP 8250) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8248) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8249) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8251)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8252)]\r\n[New Thread 0x7ffdcffff700 (LWP 8253)]\r\n[Thread 0x7ffdcffff700 (LWP 8253) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8251) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8252) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8254)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8255)]\r\n[New Thread 0x7ffdf2027700 (LWP 8256)]\r\n[Thread 0x7ffdf2027700 (LWP 8256) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8254) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8255) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8257)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8258)]\r\n[New Thread 0x7ffdcffff700 (LWP 8259)]\r\n[Thread 0x7ffdcffff700 (LWP 8259) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8257) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8258) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8260)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8261)]\r\n[New Thread 0x7ffdf2027700 (LWP 8262)]\r\n[Thread 0x7ffdf2027700 (LWP 8262) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8260) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8261) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8263)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8264)]\r\n[New Thread 0x7ffdcffff700 (LWP 8265)]\r\n[Thread 0x7ffdcffff700 (LWP 8265) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8263) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8264) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8266)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8267)]\r\n[New Thread 0x7ffdf2027700 (LWP 8268)]\r\n[Thread 0x7ffdf2027700 (LWP 8268) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8266) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8267) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8269)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8270)]\r\n[New Thread 0x7ffdcffff700 (LWP 8271)]\r\n[Thread 0x7ffdcffff700 (LWP 8271) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8269) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8270) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8272)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8273)]\r\n[New Thread 0x7ffdf2027700 (LWP 8274)]\r\n[Thread 0x7ffdf2027700 (LWP 8274) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8272) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8273) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8275)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8276)]\r\n[New Thread 0x7ffdcffff700 (LWP 8277)]\r\n[Thread 0x7ffdcffff700 (LWP 8277) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8275) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8276) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8278)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8279)]\r\n[New Thread 0x7ffdf2027700 (LWP 8280)]\r\n[Thread 0x7ffdf2027700 (LWP 8280) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8278) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8279) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8281)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8282)]\r\n[New Thread 0x7ffdcffff700 (LWP 8283)]\r\n[Thread 0x7ffdcffff700 (LWP 8283) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8281) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8282) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8284)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8285)]\r\n[New Thread 0x7ffdf2027700 (LWP 8286)]\r\n[Thread 0x7ffdf2027700 (LWP 8286) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8284) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8285) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8287)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8288)]\r\n[New Thread 0x7ffdcffff700 (LWP 8289)]\r\n[Thread 0x7ffdcffff700 (LWP 8289) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8287) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8288) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8290)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8291)]\r\n[New Thread 0x7ffdf2027700 (LWP 8292)]\r\n[Thread 0x7ffdf2027700 (LWP 8292) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8290) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8291) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8293)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8294)]\r\n[New Thread 0x7ffdcffff700 (LWP 8295)]\r\n[Thread 0x7ffdcffff700 (LWP 8295) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8293) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8294) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8296)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8297)]\r\n[New Thread 0x7ffdf2027700 (LWP 8298)]\r\n[Thread 0x7ffdf2027700 (LWP 8298) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8296) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8297) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8299)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8300)]\r\n[New Thread 0x7ffdcffff700 (LWP 8301)]\r\n[Thread 0x7ffdcffff700 (LWP 8301) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8299) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8300) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8302)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8303)]\r\n[New Thread 0x7ffdf2027700 (LWP 8304)]\r\n[Thread 0x7ffdf2027700 (LWP 8304) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8302) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8303) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8305)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8306)]\r\n[New Thread 0x7ffdcffff700 (LWP 8307)]\r\n[Thread 0x7ffdcffff700 (LWP 8307) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8305) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8306) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8308)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8309)]\r\n[New Thread 0x7ffdf2027700 (LWP 8310)]\r\n[Thread 0x7ffdf2027700 (LWP 8310) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8308) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8309) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8311)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8312)]\r\n[New Thread 0x7ffdcffff700 (LWP 8313)]\r\n[Thread 0x7ffdcffff700 (LWP 8313) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8311) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8312) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8314)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8315)]\r\n[New Thread 0x7ffdf2027700 (LWP 8316)]\r\n[Thread 0x7ffdf2027700 (LWP 8316) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8314) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8315) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8317)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8318)]\r\n[New Thread 0x7ffdcffff700 (LWP 8319)]\r\n[Thread 0x7ffdcffff700 (LWP 8319) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8317) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8318) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8320)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8321)]\r\n[New Thread 0x7ffdf2027700 (LWP 8322)]\r\n[Thread 0x7ffdf2027700 (LWP 8322) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8320) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8321) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8323)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8324)]\r\n[New Thread 0x7ffdcffff700 (LWP 8325)]\r\n[Thread 0x7ffdcffff700 (LWP 8325) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8323) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8324) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8326)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8327)]\r\n[New Thread 0x7ffdf2027700 (LWP 8328)]\r\n[Thread 0x7ffdf2027700 (LWP 8328) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8326) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8327) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8329)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8330)]\r\n[New Thread 0x7ffdcffff700 (LWP 8331)]\r\n[Thread 0x7ffdcffff700 (LWP 8331) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8329) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8330) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8332)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8333)]\r\n[New Thread 0x7ffdf2027700 (LWP 8334)]\r\n[Thread 0x7ffdf2027700 (LWP 8334) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8332) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8333) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8335)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8336)]\r\n[New Thread 0x7ffdcffff700 (LWP 8337)]\r\n[Thread 0x7ffdcffff700 (LWP 8337) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8335) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8336) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8338)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8339)]\r\n[New Thread 0x7ffdf2027700 (LWP 8340)]\r\n[Thread 0x7ffdf2027700 (LWP 8340) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8338) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8339) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8341)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8342)]\r\n[New Thread 0x7ffdcffff700 (LWP 8343)]\r\n[Thread 0x7ffdcffff700 (LWP 8343) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8341) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8342) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8344)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8345)]\r\n[New Thread 0x7ffdf2027700 (LWP 8346)]\r\n[Thread 0x7ffdf2027700 (LWP 8346) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8344) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8345) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8347)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8348)]\r\n[New Thread 0x7ffdcffff700 (LWP 8349)]\r\n[Thread 0x7ffdcffff700 (LWP 8349) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8347) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8348) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8350)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8351)]\r\n[New Thread 0x7ffdf2027700 (LWP 8352)]\r\n[Thread 0x7ffdf2027700 (LWP 8352) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8350) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8351) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8353)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8354)]\r\n[New Thread 0x7ffdcffff700 (LWP 8355)]\r\n[Thread 0x7ffdcffff700 (LWP 8355) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8353) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8354) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8356)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8357)]\r\n[New Thread 0x7ffdf2027700 (LWP 8358)]\r\n[Thread 0x7ffdf2027700 (LWP 8358) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8356) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8357) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8359)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8360)]\r\n[New Thread 0x7ffdcffff700 (LWP 8361)]\r\n[Thread 0x7ffdcffff700 (LWP 8361) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8359) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8360) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8362)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8363)]\r\n[New Thread 0x7ffdf2027700 (LWP 8364)]\r\n[Thread 0x7ffdf2027700 (LWP 8364) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8362) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8363) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8365)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8366)]\r\n[New Thread 0x7ffdcffff700 (LWP 8367)]\r\n[Thread 0x7ffdcffff700 (LWP 8367) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8365) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8366) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8368)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8369)]\r\n[New Thread 0x7ffdf2027700 (LWP 8370)]\r\n[Thread 0x7ffdf2027700 (LWP 8370) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8368) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8369) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8371)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8372)]\r\n[New Thread 0x7ffdcffff700 (LWP 8373)]\r\n[Thread 0x7ffdcffff700 (LWP 8373) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8371) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8372) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8374)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8375)]\r\n[New Thread 0x7ffdf2027700 (LWP 8376)]\r\n[Thread 0x7ffdf2027700 (LWP 8376) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8374) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8375) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8377)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8378)]\r\n[New Thread 0x7ffdcffff700 (LWP 8379)]\r\n[Thread 0x7ffdcffff700 (LWP 8379) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8377) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8378) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8380)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8381)]\r\n[New Thread 0x7ffdf2027700 (LWP 8382)]\r\n[Thread 0x7ffdf2027700 (LWP 8382) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8380) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8381) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8383)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8384)]\r\n[New Thread 0x7ffdcffff700 (LWP 8385)]\r\n[Thread 0x7ffdcffff700 (LWP 8385) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8383) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8384) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8386)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8387)]\r\n[New Thread 0x7ffdf2027700 (LWP 8388)]\r\n[Thread 0x7ffdf2027700 (LWP 8388) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8386) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8387) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8389)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8390)]\r\n[New Thread 0x7ffdcffff700 (LWP 8391)]\r\n[Thread 0x7ffdcffff700 (LWP 8391) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8389) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8390) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8392)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8393)]\r\n[New Thread 0x7ffdf2027700 (LWP 8394)]\r\n[Thread 0x7ffdf2027700 (LWP 8394) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8392) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8393) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8395)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8396)]\r\n[New Thread 0x7ffdcffff700 (LWP 8397)]\r\n[Thread 0x7ffdcffff700 (LWP 8397) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8395) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8396) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8398)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8399)]\r\n[New Thread 0x7ffdf2027700 (LWP 8400)]\r\n[Thread 0x7ffdf2027700 (LWP 8400) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8398) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8399) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8401)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8402)]\r\n[New Thread 0x7ffdcffff700 (LWP 8403)]\r\n[Thread 0x7ffdcffff700 (LWP 8403) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8401) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8402) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8404)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8405)]\r\n[New Thread 0x7ffdf2027700 (LWP 8406)]\r\n[Thread 0x7ffdf2027700 (LWP 8406) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8404) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8405) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8407)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8408)]\r\n[New Thread 0x7ffdcffff700 (LWP 8409)]\r\n[Thread 0x7ffdcffff700 (LWP 8409) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8407) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8408) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8410)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8411)]\r\n[New Thread 0x7ffdf2027700 (LWP 8412)]\r\n[Thread 0x7ffdf2027700 (LWP 8412) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8410) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8411) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8413)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8414)]\r\n[New Thread 0x7ffdcffff700 (LWP 8415)]\r\n[Thread 0x7ffdcffff700 (LWP 8415) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8413) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8414) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8416)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8417)]\r\n[New Thread 0x7ffdf2027700 (LWP 8418)]\r\n[Thread 0x7ffdf2027700 (LWP 8418) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8416) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8417) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8419)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8420)]\r\n[New Thread 0x7ffdcffff700 (LWP 8421)]\r\n[Thread 0x7ffdcffff700 (LWP 8421) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8419) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8420) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8422)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8423)]\r\n[New Thread 0x7ffdf2027700 (LWP 8424)]\r\n[Thread 0x7ffdf2027700 (LWP 8424) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8422) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8423) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8425)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8426)]\r\n[New Thread 0x7ffdcffff700 (LWP 8427)]\r\n[Thread 0x7ffdcffff700 (LWP 8427) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8425) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8426) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8428)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8429)]\r\n[New Thread 0x7ffdf2027700 (LWP 8430)]\r\n[Thread 0x7ffdf2027700 (LWP 8430) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8428) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8429) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8431)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8432)]\r\n[New Thread 0x7ffdcffff700 (LWP 8433)]\r\n[Thread 0x7ffdcffff700 (LWP 8433) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8431) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8432) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8434)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8435)]\r\n[New Thread 0x7ffdf2027700 (LWP 8436)]\r\n[Thread 0x7ffdf2027700 (LWP 8436) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8434) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8435) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8437)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8438)]\r\n[New Thread 0x7ffdcffff700 (LWP 8439)]\r\n[Thread 0x7ffdcffff700 (LWP 8439) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8437) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8438) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8440)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8441)]\r\n[New Thread 0x7ffdf2027700 (LWP 8442)]\r\n[Thread 0x7ffdf2027700 (LWP 8442) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8440) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8441) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8443)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8444)]\r\n[New Thread 0x7ffdcffff700 (LWP 8445)]\r\n[Thread 0x7ffdcffff700 (LWP 8445) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8443) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8444) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8446)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8447)]\r\n[New Thread 0x7ffdf2027700 (LWP 8448)]\r\n[Thread 0x7ffdf2027700 (LWP 8448) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8446) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8447) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8449)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8450)]\r\n[New Thread 0x7ffdcffff700 (LWP 8451)]\r\n[Thread 0x7ffdcffff700 (LWP 8451) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8449) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8450) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8452)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8453)]\r\n[New Thread 0x7ffdf2027700 (LWP 8454)]\r\n[Thread 0x7ffdf2027700 (LWP 8454) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8452) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8453) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8455)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8456)]\r\n[New Thread 0x7ffdcffff700 (LWP 8457)]\r\n[Thread 0x7ffdcffff700 (LWP 8457) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8455) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8456) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8458)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8459)]\r\n[New Thread 0x7ffdf2027700 (LWP 8460)]\r\n[Thread 0x7ffdf2027700 (LWP 8460) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8458) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8459) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8461)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8462)]\r\n[New Thread 0x7ffdcffff700 (LWP 8463)]\r\n[Thread 0x7ffdcffff700 (LWP 8463) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8461) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8462) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8464)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8465)]\r\n[New Thread 0x7ffdf2027700 (LWP 8466)]\r\n[Thread 0x7ffdf2027700 (LWP 8466) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8464) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8465) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8467)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8468)]\r\n[New Thread 0x7ffdcffff700 (LWP 8469)]\r\n[Thread 0x7ffdcffff700 (LWP 8469) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8467) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8468) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8470)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8471)]\r\n[New Thread 0x7ffdf2027700 (LWP 8472)]\r\n[Thread 0x7ffdf2027700 (LWP 8472) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8470) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8471) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8473)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8474)]\r\n[New Thread 0x7ffdcffff700 (LWP 8475)]\r\n[Thread 0x7ffdcffff700 (LWP 8475) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8473) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8474) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8476)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8477)]\r\n[New Thread 0x7ffdf2027700 (LWP 8478)]\r\n[Thread 0x7ffdf2027700 (LWP 8478) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8476) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8477) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8479)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8480)]\r\n[New Thread 0x7ffdcffff700 (LWP 8481)]\r\n[Thread 0x7ffdcffff700 (LWP 8481) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8479) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8480) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8482)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8483)]\r\n[New Thread 0x7ffdf2027700 (LWP 8484)]\r\n[Thread 0x7ffdf2027700 (LWP 8484) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8482) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8483) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8485)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8486)]\r\n[New Thread 0x7ffdcffff700 (LWP 8487)]\r\n[Thread 0x7ffdcffff700 (LWP 8487) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8485) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8486) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8488)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8489)]\r\n[New Thread 0x7ffdf2027700 (LWP 8490)]\r\n[Thread 0x7ffdf2027700 (LWP 8490) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8488) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8489) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8491)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8492)]\r\n[New Thread 0x7ffdcffff700 (LWP 8493)]\r\n[Thread 0x7ffdcffff700 (LWP 8493) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8491) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8492) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8494)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8495)]\r\n[New Thread 0x7ffdf2027700 (LWP 8496)]\r\n[Thread 0x7ffdf2027700 (LWP 8496) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8494) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8495) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8497)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8498)]\r\n[New Thread 0x7ffdcffff700 (LWP 8499)]\r\n[Thread 0x7ffdcffff700 (LWP 8499) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8497) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8498) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8500)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8501)]\r\n[New Thread 0x7ffdf2027700 (LWP 8502)]\r\n[Thread 0x7ffdf2027700 (LWP 8502) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8500) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8501) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8503)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8504)]\r\n[New Thread 0x7ffdcffff700 (LWP 8505)]\r\n[Thread 0x7ffdcffff700 (LWP 8505) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8503) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8504) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8506)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8507)]\r\n[New Thread 0x7ffdf2027700 (LWP 8508)]\r\n[Thread 0x7ffdf2027700 (LWP 8508) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8506) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8507) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8509)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8510)]\r\n[New Thread 0x7ffdcffff700 (LWP 8511)]\r\n[Thread 0x7ffdcffff700 (LWP 8511) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8509) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8510) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8512)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8513)]\r\n[New Thread 0x7ffdf2027700 (LWP 8514)]\r\n[Thread 0x7ffdf2027700 (LWP 8514) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8512) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8513) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8515)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8516)]\r\n[New Thread 0x7ffdcffff700 (LWP 8517)]\r\n[Thread 0x7ffdcffff700 (LWP 8517) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8515) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8516) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8518)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8519)]\r\n[New Thread 0x7ffdf2027700 (LWP 8520)]\r\n[Thread 0x7ffdf2027700 (LWP 8520) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8518) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8519) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8521)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8522)]\r\n[New Thread 0x7ffdcffff700 (LWP 8523)]\r\n[Thread 0x7ffdcffff700 (LWP 8523) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8521) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8522) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8524)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8525)]\r\n[New Thread 0x7ffdf2027700 (LWP 8526)]\r\n[Thread 0x7ffdf2027700 (LWP 8526) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8524) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8525) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8527)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8528)]\r\n[New Thread 0x7ffdcffff700 (LWP 8529)]\r\n[Thread 0x7ffdcffff700 (LWP 8529) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8527) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8528) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8530)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8531)]\r\n[New Thread 0x7ffdf2027700 (LWP 8532)]\r\n[Thread 0x7ffdf2027700 (LWP 8532) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8530) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8531) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8533)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8534)]\r\n[New Thread 0x7ffdcffff700 (LWP 8535)]\r\n[Thread 0x7ffdcffff700 (LWP 8535) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8533) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8534) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8536)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8537)]\r\n[New Thread 0x7ffdf2027700 (LWP 8538)]\r\n[Thread 0x7ffdf2027700 (LWP 8538) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8536) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8537) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8539)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8540)]\r\n[New Thread 0x7ffdcffff700 (LWP 8541)]\r\n[Thread 0x7ffdcffff700 (LWP 8541) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8539) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8540) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8542)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8543)]\r\n[New Thread 0x7ffdf2027700 (LWP 8544)]\r\n[Thread 0x7ffdf2027700 (LWP 8544) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8542) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8543) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8545)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8546)]\r\n[New Thread 0x7ffdcffff700 (LWP 8547)]\r\n[Thread 0x7ffdcffff700 (LWP 8547) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8545) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8546) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8548)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8549)]\r\n[New Thread 0x7ffdf2027700 (LWP 8550)]\r\n[Thread 0x7ffdf2027700 (LWP 8550) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8548) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8549) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8551)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8552)]\r\n[New Thread 0x7ffdcffff700 (LWP 8553)]\r\n[Thread 0x7ffdcffff700 (LWP 8553) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8551) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8552) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8554)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8555)]\r\n[New Thread 0x7ffdf2027700 (LWP 8556)]\r\n[Thread 0x7ffdf2027700 (LWP 8556) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8554) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8555) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8557)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8558)]\r\n[New Thread 0x7ffdcffff700 (LWP 8559)]\r\n[Thread 0x7ffdcffff700 (LWP 8559) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8557) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8558) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8560)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8561)]\r\n[New Thread 0x7ffdf2027700 (LWP 8562)]\r\n[Thread 0x7ffdf2027700 (LWP 8562) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8560) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8561) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8563)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8564)]\r\n[New Thread 0x7ffdcffff700 (LWP 8565)]\r\n[Thread 0x7ffdcffff700 (LWP 8565) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8563) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8564) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8566)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8567)]\r\n[New Thread 0x7ffdf2027700 (LWP 8568)]\r\n[Thread 0x7ffdf2027700 (LWP 8568) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8566) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8567) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8569)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8570)]\r\n[New Thread 0x7ffdcffff700 (LWP 8571)]\r\n[Thread 0x7ffdcffff700 (LWP 8571) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8569) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8570) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8572)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8573)]\r\n[New Thread 0x7ffdf2027700 (LWP 8574)]\r\n[Thread 0x7ffdf2027700 (LWP 8574) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8572) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8573) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8575)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8576)]\r\n[New Thread 0x7ffdcffff700 (LWP 8577)]\r\n[Thread 0x7ffdcffff700 (LWP 8577) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8575) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8576) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8578)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8579)]\r\n[New Thread 0x7ffdf2027700 (LWP 8580)]\r\n[Thread 0x7ffdf2027700 (LWP 8580) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8578) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8579) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8581)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8582)]\r\n[New Thread 0x7ffdcffff700 (LWP 8583)]\r\n[Thread 0x7ffdcffff700 (LWP 8583) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8581) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8582) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8584)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8585)]\r\n[New Thread 0x7ffdf2027700 (LWP 8586)]\r\n[Thread 0x7ffdf2027700 (LWP 8586) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8584) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8585) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8587)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8588)]\r\n[New Thread 0x7ffdcffff700 (LWP 8589)]\r\n[Thread 0x7ffdcffff700 (LWP 8589) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8587) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8588) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8590)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8591)]\r\n[New Thread 0x7ffdf2027700 (LWP 8592)]\r\n[Thread 0x7ffdf2027700 (LWP 8592) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8590) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8591) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8593)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8594)]\r\n[New Thread 0x7ffdcffff700 (LWP 8595)]\r\n[Thread 0x7ffdcffff700 (LWP 8595) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8593) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8594) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8596)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8597)]\r\n[New Thread 0x7ffdf2027700 (LWP 8598)]\r\n[Thread 0x7ffdf2027700 (LWP 8598) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8596) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8597) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8599)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8600)]\r\n[New Thread 0x7ffdcffff700 (LWP 8601)]\r\n[Thread 0x7ffdcffff700 (LWP 8601) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8599) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8600) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8602)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8603)]\r\n[New Thread 0x7ffdf2027700 (LWP 8604)]\r\n[Thread 0x7ffdf2027700 (LWP 8604) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8602) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8603) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8605)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8606)]\r\n[New Thread 0x7ffdcffff700 (LWP 8607)]\r\n[Thread 0x7ffdcffff700 (LWP 8607) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8605) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8606) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8608)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8609)]\r\n[New Thread 0x7ffdf2027700 (LWP 8610)]\r\n[Thread 0x7ffdf2027700 (LWP 8610) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8608) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8609) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8611)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8612)]\r\n[New Thread 0x7ffdcffff700 (LWP 8613)]\r\n[Thread 0x7ffdcffff700 (LWP 8613) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8611) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8612) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8614)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8615)]\r\n[New Thread 0x7ffdf2027700 (LWP 8616)]\r\n[Thread 0x7ffdf2027700 (LWP 8616) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8615) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8614) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8617)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8618)]\r\n[New Thread 0x7ffdcffff700 (LWP 8619)]\r\n[Thread 0x7ffdcffff700 (LWP 8619) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8617) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8618) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8620)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8621)]\r\n[New Thread 0x7ffdf2027700 (LWP 8622)]\r\n[Thread 0x7ffdf2027700 (LWP 8622) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8620) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8621) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8623)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8624)]\r\n[New Thread 0x7ffdcffff700 (LWP 8625)]\r\n[Thread 0x7ffdcffff700 (LWP 8625) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8623) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8624) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8626)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8627)]\r\n[New Thread 0x7ffdf2027700 (LWP 8628)]\r\n[Thread 0x7ffdf2027700 (LWP 8628) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8626) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8627) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8629)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8630)]\r\n[New Thread 0x7ffdcffff700 (LWP 8631)]\r\n[Thread 0x7ffdcffff700 (LWP 8631) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8629) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8630) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8632)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8633)]\r\n[New Thread 0x7ffdf2027700 (LWP 8634)]\r\n[Thread 0x7ffdf2027700 (LWP 8634) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8632) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8633) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8635)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8636)]\r\n[New Thread 0x7ffdcffff700 (LWP 8637)]\r\n[Thread 0x7ffdcffff700 (LWP 8637) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8635) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8636) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8638)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8639)]\r\n[New Thread 0x7ffdf2027700 (LWP 8640)]\r\n[Thread 0x7ffdf2027700 (LWP 8640) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8638) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8639) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8641)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8642)]\r\n[New Thread 0x7ffdcffff700 (LWP 8643)]\r\n[Thread 0x7ffdcffff700 (LWP 8643) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8641) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8642) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8644)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8645)]\r\n[New Thread 0x7ffdf2027700 (LWP 8646)]\r\n[Thread 0x7ffdf2027700 (LWP 8646) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8644) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8645) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8647)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8648)]\r\n[New Thread 0x7ffdcffff700 (LWP 8649)]\r\n[Thread 0x7ffdcffff700 (LWP 8649) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8647) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8648) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8650)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8651)]\r\n[New Thread 0x7ffdf2027700 (LWP 8652)]\r\n[Thread 0x7ffdf2027700 (LWP 8652) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8650) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8651) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8653)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8654)]\r\n[New Thread 0x7ffdcffff700 (LWP 8655)]\r\n[Thread 0x7ffdcffff700 (LWP 8655) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8653) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8654) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8656)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8657)]\r\n[New Thread 0x7ffdf2027700 (LWP 8658)]\r\n[Thread 0x7ffdf2027700 (LWP 8658) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8656) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8657) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8659)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8660)]\r\n[New Thread 0x7ffdcffff700 (LWP 8661)]\r\n[Thread 0x7ffdcffff700 (LWP 8661) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8659) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8660) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8662)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8663)]\r\n[New Thread 0x7ffdf2027700 (LWP 8664)]\r\n[Thread 0x7ffdf2027700 (LWP 8664) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8662) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8663) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8665)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8666)]\r\n[New Thread 0x7ffdcffff700 (LWP 8667)]\r\n[Thread 0x7ffdcffff700 (LWP 8667) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8665) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8666) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8668)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8669)]\r\n[New Thread 0x7ffdf2027700 (LWP 8670)]\r\n[Thread 0x7ffdf2027700 (LWP 8670) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8668) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8669) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8671)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8672)]\r\n[New Thread 0x7ffdcffff700 (LWP 8673)]\r\n[Thread 0x7ffdcffff700 (LWP 8673) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8671) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8672) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8674)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8675)]\r\n[New Thread 0x7ffdf2027700 (LWP 8676)]\r\n[Thread 0x7ffdf2027700 (LWP 8676) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8674) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8675) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8677)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8678)]\r\n[New Thread 0x7ffdcffff700 (LWP 8679)]\r\n[Thread 0x7ffdcffff700 (LWP 8679) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8677) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8678) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8680)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8681)]\r\n[New Thread 0x7ffdf2027700 (LWP 8682)]\r\n[Thread 0x7ffdf2027700 (LWP 8682) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8680) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8681) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8683)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8684)]\r\n[New Thread 0x7ffdcffff700 (LWP 8685)]\r\n[Thread 0x7ffdcffff700 (LWP 8685) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8683) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8684) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8686)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8687)]\r\n[New Thread 0x7ffdf2027700 (LWP 8688)]\r\n[Thread 0x7ffdf2027700 (LWP 8688) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8686) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8687) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8689)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8690)]\r\n[New Thread 0x7ffdcffff700 (LWP 8691)]\r\n[Thread 0x7ffdcffff700 (LWP 8691) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8689) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8690) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8692)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8693)]\r\n[New Thread 0x7ffdf2027700 (LWP 8694)]\r\n[Thread 0x7ffdf2027700 (LWP 8694) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8692) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8693) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8695)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8696)]\r\n[New Thread 0x7ffdcffff700 (LWP 8697)]\r\n[Thread 0x7ffdcffff700 (LWP 8697) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8695) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8696) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8698)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8699)]\r\n[New Thread 0x7ffdf2027700 (LWP 8700)]\r\n[Thread 0x7ffdf2027700 (LWP 8700) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8698) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8699) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8701)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8702)]\r\n[New Thread 0x7ffdcffff700 (LWP 8703)]\r\n[Thread 0x7ffdcffff700 (LWP 8703) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8701) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8702) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8704)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8705)]\r\n[New Thread 0x7ffdf2027700 (LWP 8706)]\r\n[Thread 0x7ffdf2027700 (LWP 8706) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8704) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8705) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8707)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8708)]\r\n[New Thread 0x7ffdcffff700 (LWP 8709)]\r\n[Thread 0x7ffdcffff700 (LWP 8709) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8707) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8708) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8710)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8711)]\r\n[New Thread 0x7ffdf2027700 (LWP 8712)]\r\n[Thread 0x7ffdf2027700 (LWP 8712) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8710) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8711) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8713)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8714)]\r\n[New Thread 0x7ffdcffff700 (LWP 8715)]\r\n[Thread 0x7ffdcffff700 (LWP 8715) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8713) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8714) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8716)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8717)]\r\n[New Thread 0x7ffdf2027700 (LWP 8718)]\r\n[Thread 0x7ffdf2027700 (LWP 8718) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8716) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8717) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8719)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8720)]\r\n[New Thread 0x7ffdcffff700 (LWP 8721)]\r\n[Thread 0x7ffdcffff700 (LWP 8721) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8719) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8720) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8722)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8723)]\r\n[New Thread 0x7ffdf2027700 (LWP 8724)]\r\n[Thread 0x7ffdf2027700 (LWP 8724) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8722) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8723) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8725)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8726)]\r\n[New Thread 0x7ffdcffff700 (LWP 8727)]\r\n[Thread 0x7ffdcffff700 (LWP 8727) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8725) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8726) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8728)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8729)]\r\n[New Thread 0x7ffdf2027700 (LWP 8730)]\r\n[Thread 0x7ffdf2027700 (LWP 8730) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8728) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8729) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8731)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8732)]\r\n[New Thread 0x7ffdcffff700 (LWP 8733)]\r\n[Thread 0x7ffdcffff700 (LWP 8733) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8731) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8732) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8734)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8735)]\r\n[New Thread 0x7ffdf2027700 (LWP 8736)]\r\n[Thread 0x7ffdf2027700 (LWP 8736) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8734) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8735) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8737)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8738)]\r\n[New Thread 0x7ffdcffff700 (LWP 8739)]\r\n[Thread 0x7ffdcffff700 (LWP 8739) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8737) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8738) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8740)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8741)]\r\n[New Thread 0x7ffdf2027700 (LWP 8742)]\r\n[Thread 0x7ffdf2027700 (LWP 8742) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8740) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8741) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8743)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8744)]\r\n[New Thread 0x7ffdcffff700 (LWP 8745)]\r\n[Thread 0x7ffdcffff700 (LWP 8745) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8743) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8744) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8746)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8747)]\r\n[New Thread 0x7ffdf2027700 (LWP 8748)]\r\n[Thread 0x7ffdf2027700 (LWP 8748) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8746) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8747) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8749)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8750)]\r\n[New Thread 0x7ffdcffff700 (LWP 8751)]\r\n[Thread 0x7ffdcffff700 (LWP 8751) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8749) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8750) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8752)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8753)]\r\n[New Thread 0x7ffdf2027700 (LWP 8754)]\r\n[Thread 0x7ffdf2027700 (LWP 8754) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8752) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8753) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8755)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8756)]\r\n[New Thread 0x7ffdcffff700 (LWP 8757)]\r\n[Thread 0x7ffdcffff700 (LWP 8757) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8755) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8756) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8758)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8759)]\r\n[New Thread 0x7ffdf2027700 (LWP 8760)]\r\n[Thread 0x7ffdf2027700 (LWP 8760) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8758) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8759) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8761)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8762)]\r\n[New Thread 0x7ffdcffff700 (LWP 8763)]\r\n[Thread 0x7ffdcffff700 (LWP 8763) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8761) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8762) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8764)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8765)]\r\n[New Thread 0x7ffdf2027700 (LWP 8766)]\r\n[Thread 0x7ffdf2027700 (LWP 8766) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8764) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8765) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8767)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8768)]\r\n[New Thread 0x7ffdcffff700 (LWP 8769)]\r\n[Thread 0x7ffdcffff700 (LWP 8769) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8767) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8768) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8770)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8771)]\r\n[New Thread 0x7ffdf2027700 (LWP 8772)]\r\n[Thread 0x7ffdf2027700 (LWP 8772) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8770) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8771) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8773)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8774)]\r\n[New Thread 0x7ffdcffff700 (LWP 8775)]\r\n[Thread 0x7ffdcffff700 (LWP 8775) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8773) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8774) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8776)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8777)]\r\n[New Thread 0x7ffdf2027700 (LWP 8778)]\r\n[Thread 0x7ffdf2027700 (LWP 8778) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8776) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8777) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8779)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8780)]\r\n[New Thread 0x7ffdcffff700 (LWP 8781)]\r\n[Thread 0x7ffdcffff700 (LWP 8781) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8779) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8780) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8782)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8783)]\r\n[New Thread 0x7ffdf2027700 (LWP 8784)]\r\n[Thread 0x7ffdf2027700 (LWP 8784) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8782) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8783) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8785)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8786)]\r\n[New Thread 0x7ffdcffff700 (LWP 8787)]\r\n[Thread 0x7ffdcffff700 (LWP 8787) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8785) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8786) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8788)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8789)]\r\n[New Thread 0x7ffdf2027700 (LWP 8790)]\r\n[Thread 0x7ffdf2027700 (LWP 8790) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8788) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8789) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8791)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8792)]\r\n[New Thread 0x7ffdcffff700 (LWP 8793)]\r\n[Thread 0x7ffdcffff700 (LWP 8793) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8791) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8792) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8794)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8795)]\r\n[New Thread 0x7ffdf2027700 (LWP 8796)]\r\n[Thread 0x7ffdf2027700 (LWP 8796) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8794) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8795) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8797)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8798)]\r\n[New Thread 0x7ffdcffff700 (LWP 8799)]\r\n[Thread 0x7ffdcffff700 (LWP 8799) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8797) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8798) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8800)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8801)]\r\n[New Thread 0x7ffdf2027700 (LWP 8802)]\r\n[Thread 0x7ffdf2027700 (LWP 8802) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8800) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8801) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8803)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8804)]\r\n[New Thread 0x7ffdcffff700 (LWP 8805)]\r\n[Thread 0x7ffdcffff700 (LWP 8805) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8803) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8804) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8806)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8807)]\r\n[New Thread 0x7ffdf2027700 (LWP 8808)]\r\n[Thread 0x7ffdf2027700 (LWP 8808) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8807) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8806) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8809)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8810)]\r\n[New Thread 0x7ffdcffff700 (LWP 8811)]\r\n[Thread 0x7ffdcffff700 (LWP 8811) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8809) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8810) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8812)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8813)]\r\n[New Thread 0x7ffdf2027700 (LWP 8814)]\r\n[Thread 0x7ffdf2027700 (LWP 8814) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8812) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8813) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8815)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8816)]\r\n[New Thread 0x7ffdcffff700 (LWP 8817)]\r\n[Thread 0x7ffdcffff700 (LWP 8817) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8815) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8816) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8818)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8819)]\r\n[New Thread 0x7ffdf2027700 (LWP 8820)]\r\n[Thread 0x7ffdf2027700 (LWP 8820) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8818) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8819) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8821)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8822)]\r\n[New Thread 0x7ffdcffff700 (LWP 8823)]\r\n[Thread 0x7ffdcffff700 (LWP 8823) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8821) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8822) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8824)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8825)]\r\n[New Thread 0x7ffdf2027700 (LWP 8826)]\r\n[Thread 0x7ffdf2027700 (LWP 8826) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8824) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8825) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8827)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8828)]\r\n[New Thread 0x7ffdcffff700 (LWP 8829)]\r\n[Thread 0x7ffdcffff700 (LWP 8829) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8827) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8828) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8830)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8831)]\r\n[New Thread 0x7ffdf2027700 (LWP 8832)]\r\n[Thread 0x7ffdf2027700 (LWP 8832) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8830) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8831) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8833)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8834)]\r\n[New Thread 0x7ffdcffff700 (LWP 8835)]\r\n[Thread 0x7ffdcffff700 (LWP 8835) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8833) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8834) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8836)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8837)]\r\n[New Thread 0x7ffdf2027700 (LWP 8838)]\r\n[Thread 0x7ffdf2027700 (LWP 8838) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8836) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8837) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8839)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8840)]\r\n[New Thread 0x7ffdcffff700 (LWP 8841)]\r\n[Thread 0x7ffdcffff700 (LWP 8841) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8839) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8840) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8842)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8843)]\r\n[New Thread 0x7ffdf2027700 (LWP 8844)]\r\n[Thread 0x7ffdf2027700 (LWP 8844) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8842) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8843) exited]\r\n[New Thread 0x7ffdf2027700 (LWP 8845)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8846)]\r\n[New Thread 0x7ffdcffff700 (LWP 8847)]\r\n[Thread 0x7ffdcffff700 (LWP 8847) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8845) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8846) exited]\r\n[New Thread 0x7ffdcffff700 (LWP 8848)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8849)]\r\n[New Thread 0x7ffdf2027700 (LWP 8850)]\r\n[Thread 0x7ffdf2027700 (LWP 8850) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8848) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8849) exited]\r\n2019-11-10 08:51:40.041023: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1006] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-11-10 08:51:40.041373: I tensorflow/core/grappler/devices.cc:55] Number of eligible GPUs (core count >= 8, compute capability >= 0.0): 1\r\n[New Thread 0x7ffdf2027700 (LWP 8851)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8852)]\r\n2019-11-10 08:51:40.041879: I tensorflow/core/grappler/clusters/single_machine.cc:356] Starting new session\r\n[New Thread 0x7ffdcffff700 (LWP 8853)]\r\n[New Thread 0x7ffdd5533700 (LWP 8854)]\r\n[Thread 0x7ffdd5d34700 (LWP 8852) exited]\r\n[Thread 0x7ffdf2027700 (LWP 8851) exited]\r\n[New Thread 0x7ffdd5d34700 (LWP 8855)]\r\n[New Thread 0x7ffdf2027700 (LWP 8856)]\r\n[New Thread 0x7ffdd4d32700 (LWP 8857)]\r\n2019-11-10 08:51:40.043093: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1006] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-11-10 08:51:40.043334: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1618] Found device 0 with properties: \r\nname: Tesla M60 major: 5 minor: 2 memoryClockRate(GHz): 1.1775\r\npciBusID: 0000:00:1e.0\r\n2019-11-10 08:51:40.043393: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.0\r\n2019-11-10 08:51:40.043418: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10.0\r\n2019-11-10 08:51:40.043439: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcufft.so.10.0\r\n2019-11-10 08:51:40.043456: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcurand.so.10.0\r\n2019-11-10 08:51:40.043476: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusolver.so.10.0\r\n2019-11-10 08:51:40.043490: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusparse.so.10.0\r\n2019-11-10 08:51:40.043506: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7\r\n2019-11-10 08:51:40.043563: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1006] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-11-10 08:51:40.043824: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1006] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-11-10 08:51:40.044044: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1746] Adding visible gpu devices: 0\r\n2019-11-10 08:51:40.232781: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1159] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-11-10 08:51:40.232845: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1165]      0 \r\n2019-11-10 08:51:40.232866: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1178] 0:   N \r\n2019-11-10 08:51:40.233149: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1006] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-11-10 08:51:40.233473: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1006] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-11-10 08:51:40.233707: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1304] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7162 MB memory) -> physical GPU (device: 0, name: Tesla M60, pci bus id: 0000:00:1e.0, compute capability: 5.2)\r\n[New Thread 0x7ffdcf7fe700 (LWP 8858)]\r\n[New Thread 0x7ffdceffd700 (LWP 8859)]\r\n[New Thread 0x7ffdce7fc700 (LWP 8860)]\r\n[New Thread 0x7ffdcdffb700 (LWP 8861)]\r\n[New Thread 0x7ffdcd7fa700 (LWP 8862)]\r\n[New Thread 0x7ffdccff9700 (LWP 8863)]\r\n[New Thread 0x7ffda7fff700 (LWP 8864)]\r\n[New Thread 0x7ffda77fe700 (LWP 8865)]\r\n[New Thread 0x7ffda6ffd700 (LWP 8866)]\r\n[New Thread 0x7ffda67fc700 (LWP 8867)]\r\n[New Thread 0x7ffda5ffb700 (LWP 8868)]\r\n[New Thread 0x7ffda57fa700 (LWP 8869)]\r\n[New Thread 0x7ffda4ff9700 (LWP 8870)]\r\n[New Thread 0x7ffd87fff700 (LWP 8871)]\r\n[New Thread 0x7ffd877fe700 (LWP 8872)]\r\n[New Thread 0x7ffd86ffd700 (LWP 8873)]\r\n2019-11-10 08:51:40.320845: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:716] Optimization results for grappler item: graph_to_optimize\r\n2019-11-10 08:51:40.320889: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   function_optimizer: Graph size after: 1676 nodes (1362), 3172 edges (2858), time = 50.794ms.\r\n2019-11-10 08:51:40.320900: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   function_optimizer: function_optimizer did nothing. time = 0.832ms.\r\n[New Thread 0x7ffd867fc700 (LWP 8874)]\r\n[Thread 0x7ffdd5533700 (LWP 8854) exited]\r\n[Thread 0x7ffdcffff700 (LWP 8853) exited]\r\n[Thread 0x7ffd867fc700 (LWP 8874) exited]\r\n[Thread 0x7ffda57fa700 (LWP 8869) exited]\r\n[Thread 0x7ffda7fff700 (LWP 8864) exited]\r\n[Thread 0x7ffdcdffb700 (LWP 8861) exited]\r\n[Thread 0x7ffdcf7fe700 (LWP 8858) exited]\r\n[Thread 0x7ffd86ffd700 (LWP 8873) exited]\r\n[Thread 0x7ffda6ffd700 (LWP 8866) exited]\r\n[Thread 0x7ffdceffd700 (LWP 8859) exited]\r\n[Thread 0x7ffda4ff9700 (LWP 8870) exited]\r\n[Thread 0x7ffda5ffb700 (LWP 8868) exited]\r\n[Thread 0x7ffdccff9700 (LWP 8863) exited]\r\n[Thread 0x7ffdcd7fa700 (LWP 8862) exited]\r\n[Thread 0x7ffdce7fc700 (LWP 8860) exited]\r\n[Thread 0x7ffd877fe700 (LWP 8872) exited]\r\n[Thread 0x7ffda77fe700 (LWP 8865) exited]\r\n[Thread 0x7ffd87fff700 (LWP 8871) exited]\r\n[Thread 0x7ffda67fc700 (LWP 8867) exited]\r\n[Thread 0x7ffdd5d34700 (LWP 8855) exited]\r\n[Thread 0x7ffdd4d32700 (LWP 8857) exited]\r\nRun TRT optimizer in Grappler to convert the graph\r\n\r\n2019-11-10 08:51:41.984437: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1006] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-11-10 08:51:41.984749: I tensorflow/core/grappler/devices.cc:55] Number of eligible GPUs (core count >= 8, compute capability >= 0.0): 1\r\n[New Thread 0x7ffdd4d32700 (LWP 8875)]\r\n[New Thread 0x7ffdd5d34700 (LWP 8876)]\r\n2019-11-10 08:51:41.985406: I tensorflow/core/grappler/clusters/single_machine.cc:356] Starting new session\r\n[New Thread 0x7ffd86ffd700 (LWP 8877)]\r\n[New Thread 0x7ffd877fe700 (LWP 8878)]\r\n[Thread 0x7ffdd5d34700 (LWP 8876) exited]\r\n[Thread 0x7ffdd4d32700 (LWP 8875) exited]\r\n[New Thread 0x7ffdd5d34700 (LWP 8879)]\r\n[New Thread 0x7ffdd4d32700 (LWP 8880)]\r\n2019-11-10 08:51:41.986303: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1006] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-11-10 08:51:41.986526: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1618] Found device 0 with properties: \r\nname: Tesla M60 major: 5 minor: 2 memoryClockRate(GHz): 1.1775\r\npciBusID: 0000:00:1e.0\r\n2019-11-10 08:51:41.986594: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.0\r\n2019-11-10 08:51:41.986621: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10.0\r\n2019-11-10 08:51:41.986645: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcufft.so.10.0\r\n2019-11-10 08:51:41.986667: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcurand.so.10.0\r\n2019-11-10 08:51:41.986690: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusolver.so.10.0\r\n2019-11-10 08:51:41.986712: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcusparse.so.10.0\r\n2019-11-10 08:51:41.986736: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7\r\n2019-11-10 08:51:41.986788: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1006] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-11-10 08:51:41.987035: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1006] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-11-10 08:51:41.987240: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1746] Adding visible gpu devices: 0\r\n2019-11-10 08:51:41.987279: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1159] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-11-10 08:51:41.987294: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1165]      0 \r\n2019-11-10 08:51:41.987301: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1178] 0:   N \r\n2019-11-10 08:51:41.987447: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1006] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-11-10 08:51:41.987699: I tensorflow/stream_executor/cuda/cuda_gpu_executor.cc:1006] successful NUMA node read from SysFS had negative value (-1), but there must be at least one NUMA node, so returning NUMA node zero\r\n2019-11-10 08:51:41.987917: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1304] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 7162 MB memory) -> physical GPU (device: 0, name: Tesla M60, pci bus id: 0000:00:1e.0, compute capability: 5.2)\r\n[New Thread 0x7ffdd5533700 (LWP 8881)]\r\n[New Thread 0x7ffdcffff700 (LWP 8882)]\r\n[New Thread 0x7ffdcf7fe700 (LWP 8883)]\r\n[New Thread 0x7ffdceffd700 (LWP 8884)]\r\n[New Thread 0x7ffdce7fc700 (LWP 8885)]\r\n[New Thread 0x7ffdcdffb700 (LWP 8886)]\r\n[New Thread 0x7ffdcd7fa700 (LWP 8887)]\r\n[New Thread 0x7ffdccff9700 (LWP 8888)]\r\n[New Thread 0x7ffda7fff700 (LWP 8889)]\r\n[New Thread 0x7ffda77fe700 (LWP 8890)]\r\n[New Thread 0x7ffda6ffd700 (LWP 8891)]\r\n[New Thread 0x7ffda67fc700 (LWP 8892)]\r\n[New Thread 0x7ffda5ffb700 (LWP 8893)]\r\n[New Thread 0x7ffda57fa700 (LWP 8894)]\r\n[New Thread 0x7ffda4ff9700 (LWP 8895)]\r\n[New Thread 0x7ffd87fff700 (LWP 8896)]\r\n[New Thread 0x7ffd867fc700 (LWP 8897)]\r\n[New Thread 0x7ffd85ffb700 (LWP 8898)]\r\n[New Thread 0x7ffd857fa700 (LWP 8899)]\r\n[New Thread 0x7ffd84ff9700 (LWP 8900)]\r\n[New Thread 0x7ffd67fff700 (LWP 8901)]\r\n[New Thread 0x7ffd677fe700 (LWP 8902)]\r\n[New Thread 0x7ffd66ffd700 (LWP 8903)]\r\n[New Thread 0x7ffd667fc700 (LWP 8904)]\r\n[New Thread 0x7ffd65ffb700 (LWP 8905)]\r\n[New Thread 0x7ffd657fa700 (LWP 8906)]\r\n[New Thread 0x7ffd64ff9700 (LWP 8907)]\r\n[New Thread 0x7ffd47fff700 (LWP 8908)]\r\n[New Thread 0x7ffd477fe700 (LWP 8909)]\r\n[New Thread 0x7ffd46ffd700 (LWP 8910)]\r\n[New Thread 0x7ffd467fc700 (LWP 8911)]\r\n[New Thread 0x7ffd45ffb700 (LWP 8912)]\r\n[New Thread 0x7ffd457fa700 (LWP 8913)]\r\n[New Thread 0x7ffd44ff9700 (LWP 8914)]\r\n[New Thread 0x7ffd27fff700 (LWP 8915)]\r\n[New Thread 0x7ffd277fe700 (LWP 8916)]\r\n[New Thread 0x7ffd26ffd700 (LWP 8917)]\r\n[New Thread 0x7ffd267fc700 (LWP 8918)]\r\n[New Thread 0x7ffd25ffb700 (LWP 8919)]\r\n[New Thread 0x7ffd257fa700 (LWP 8920)]\r\n[New Thread 0x7ffd24ff9700 (LWP 8921)]\r\n[New Thread 0x7ffd07fff700 (LWP 8922)]\r\n[New Thread 0x7ffd077fe700 (LWP 8923)]\r\n[New Thread 0x7ffd06ffd700 (LWP 8924)]\r\n[New Thread 0x7ffd067fc700 (LWP 8925)]\r\n[New Thread 0x7ffd05ffb700 (LWP 8926)]\r\n[New Thread 0x7ffd057fa700 (LWP 8927)]\r\n[New Thread 0x7ffd04ff9700 (LWP 8928)]\r\n2019-11-10 08:51:42.597091: I tensorflow/compiler/tf2tensorrt/segment/segment.cc:460] There are 70 ops of 7 different types in the graph that are not converted to TensorRT: Identity, Placeholder, NoOp, Pack, Shape, StridedSlice, Reshape, (For more information see https://docs.nvidia.com/deeplearning/frameworks/tf-trt-user-guide/index.html#supported-ops).\r\n2019-11-10 08:51:42.982417: I tensorflow/compiler/tf2tensorrt/convert/convert_graph.cc:633] Number of TensorRT candidate segments: 17\r\n2019-11-10 08:51:43.059702: I tensorflow/compiler/tf2tensorrt/convert/convert_graph.cc:734] TensorRT node StatefulPartitionedCall/efficientnet-b0/TRTEngineOp_0 added for segment 0 consisting of 41 nodes succeeded.\r\n2019-11-10 08:51:43.060007: I tensorflow/compiler/tf2tensorrt/convert/convert_graph.cc:734] TensorRT node StatefulPartitionedCall/efficientnet-b0/TRTEngineOp_1 added for segment 1 consisting of 41 nodes succeeded.\r\n2019-11-10 08:51:43.060271: I tensorflow/compiler/tf2tensorrt/convert/convert_graph.cc:734] TensorRT node StatefulPartitionedCall/efficientnet-b0/TRTEngineOp_2 added for segment 2 consisting of 43 nodes succeeded.\r\n2019-11-10 08:51:43.060530: I tensorflow/compiler/tf2tensorrt/convert/convert_graph.cc:734] TensorRT node StatefulPartitionedCall/efficientnet-b0/TRTEngineOp_3 added for segment 3 consisting of 41 nodes succeeded.\r\n2019-11-10 08:51:43.060768: I tensorflow/compiler/tf2tensorrt/convert/convert_graph.cc:734] TensorRT node StatefulPartitionedCall/efficientnet-b0/TRTEngineOp_4 added for segment 4 consisting of 43 nodes succeeded.\r\n2019-11-10 08:51:43.061007: I tensorflow/compiler/tf2tensorrt/convert/convert_graph.cc:734] TensorRT node StatefulPartitionedCall/efficientnet-b0/TRTEngineOp_5 added for segment 5 consisting of 41 nodes succeeded.\r\n2019-11-10 08:51:43.061313: I tensorflow/compiler/tf2tensorrt/convert/convert_graph.cc:734] TensorRT node StatefulPartitionedCall/efficientnet-b0/TRTEngineOp_6 added for segment 6 consisting of 43 nodes succeeded.\r\n2019-11-10 08:51:43.061518: I tensorflow/compiler/tf2tensorrt/convert/convert_graph.cc:734] TensorRT node StatefulPartitionedCall/efficientnet-b0/TRTEngineOp_7 added for segment 7 consisting of 43 nodes succeeded.\r\n2019-11-10 08:51:43.061728: I tensorflow/compiler/tf2tensorrt/convert/convert_graph.cc:734] TensorRT node StatefulPartitionedCall/efficientnet-b0/TRTEngineOp_8 added for segment 8 consisting of 41 nodes succeeded.\r\n2019-11-10 08:51:43.061976: I tensorflow/compiler/tf2tensorrt/convert/convert_graph.cc:734] TensorRT node StatefulPartitionedCall/efficientnet-b0/TRTEngineOp_9 added for segment 9 consisting of 43 nodes succeeded.\r\n2019-11-10 08:51:43.062207: I tensorflow/compiler/tf2tensorrt/convert/convert_graph.cc:734] TensorRT node StatefulPartitionedCall/efficientnet-b0/TRTEngineOp_10 added for segment 10 consisting of 43 nodes succeeded.\r\n2019-11-10 08:51:43.062447: I tensorflow/compiler/tf2tensorrt/convert/convert_graph.cc:734] TensorRT node StatefulPartitionedCall/efficientnet-b0/TRTEngineOp_11 added for segment 11 consisting of 41 nodes succeeded.\r\n2019-11-10 08:51:43.062683: I tensorflow/compiler/tf2tensorrt/convert/convert_graph.cc:734] TensorRT node StatefulPartitionedCall/efficientnet-b0/TRTEngineOp_12 added for segment 12 consisting of 43 nodes succeeded.\r\n2019-11-10 08:51:43.062900: I tensorflow/compiler/tf2tensorrt/convert/convert_graph.cc:734] TensorRT node StatefulPartitionedCall/efficientnet-b0/TRTEngineOp_13 added for segment 13 consisting of 43 nodes succeeded.\r\n2019-11-10 08:51:43.063120: I tensorflow/compiler/tf2tensorrt/convert/convert_graph.cc:734] TensorRT node StatefulPartitionedCall/efficientnet-b0/TRTEngineOp_14 added for segment 14 consisting of 43 nodes succeeded.\r\n2019-11-10 08:51:43.063297: I tensorflow/compiler/tf2tensorrt/convert/convert_graph.cc:734] TensorRT node TRTEngineOp_15 added for segment 15 consisting of 40 nodes succeeded.\r\n\r\nThread 1 \"python\" received signal SIGSEGV, Segmentation fault.\r\n0x00007fff8bb8b820 in tensorflow::Node::name() const () from /home/ubuntu/tf20/lib/python3.5/site-packages/tensorflow_core/python/../libtensorflow_framework.so.2\r\n(gdb) bt\r\n#0  0x00007fff8bb8b820 in tensorflow::Node::name() const () from /home/ubuntu/tf20/lib/python3.5/site-packages/tensorflow_core/python/../libtensorflow_framework.so.2\r\n#1  0x00007fff919b8186 in tensorflow::tensorrt::convert::UpdateToEngineNode(std::vector<tensorflow::tensorrt::convert::EngineInfo, std::allocator<tensorflow::tensorrt::convert::EngineInfo> > const&, unsigned long, std::vector<tensorflow::Node*, std::allocator<tensorflow::Node*> > const&, bool, std::string const&, tensorflow::Node**, int*) ()\r\n   from /home/ubuntu/tf20/lib/python3.5/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n#2  0x00007fff919ba270 in tensorflow::tensorrt::convert::CreateTRTNode(tensorflow::tensorrt::convert::ConversionParams const&, std::vector<tensorflow::tensorrt::convert::EngineInfo, std::allocator<tensorflow::tensorrt::convert::EngineInfo> > const&, int, int, tensorflow::Graph*, nvinfer1::IGpuAllocator*, std::vector<tensorflow::Node*, std::allocator<tensorflow::Node*> >*) ()\r\n   from /home/ubuntu/tf20/lib/python3.5/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n#3  0x00007fff919bf334 in tensorflow::tensorrt::convert::ConvertAfterShapes(tensorflow::tensorrt::convert::ConversionParams const&) ()\r\n   from /home/ubuntu/tf20/lib/python3.5/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n#4  0x00007fff919f7b06 in tensorflow::tensorrt::convert::TRTOptimizationPass::Optimize(tensorflow::grappler::Cluster*, tensorflow::grappler::GrapplerItem const&, tensorflow::GraphDef*) ()\r\n   from /home/ubuntu/tf20/lib/python3.5/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n#5  0x00007fff94d674ac in tensorflow::grappler::MetaOptimizer::RunOptimizer(tensorflow::grappler::GraphOptimizer*, tensorflow::grappler::Cluster*, tensorflow::grappler::GrapplerItem*, tensorflow::GraphDef*, tensorflow::grappler::MetaOptimizer::GraphOptimizationResult*) () from /home/ubuntu/tf20/lib/python3.5/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n#6  0x00007fff94d68695 in tensorflow::grappler::MetaOptimizer::OptimizeGraph(tensorflow::grappler::Cluster*, tensorflow::grappler::GrapplerItem const&, tensorflow::GraphDef*) ()\r\n   from /home/ubuntu/tf20/lib/python3.5/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n#7  0x00007fff94d6a050 in tensorflow::grappler::MetaOptimizer::Optimize(tensorflow::grappler::Cluster*, tensorflow::grappler::GrapplerItem const&, tensorflow::GraphDef*) ()\r\n   from /home/ubuntu/tf20/lib/python3.5/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n#8  0x00007fff8eda048f in TF_OptimizeGraph(GCluster, tensorflow::ConfigProto const&, tensorflow::MetaGraphDef const&, bool, std::string const&, TF_Status*) ()\r\n   from /home/ubuntu/tf20/lib/python3.5/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n#9  0x00007fff8eda77c4 in _wrap_TF_OptimizeGraph () from /home/ubuntu/tf20/lib/python3.5/site-packages/tensorflow_core/python/_pywrap_tensorflow_internal.so\r\n#10 0x00000000004ea10f in PyCFunction_Call ()\r\n#11 0x0000000000536d94 in PyEval_EvalFrameEx ()\r\n#12 0x000000000053fc97 in ?? ()\r\n#13 0x000000000053b83f in PyEval_EvalFrameEx ()\r\n#14 0x000000000053b294 in PyEval_EvalFrameEx ()\r\n#15 0x000000000053fc97 in ?? ()\r\n#16 0x000000000053b83f in PyEval_EvalFrameEx ()\r\n#17 0x000000000053fc97 in ?? ()\r\n#18 0x00000000005409bf in PyEval_EvalCode ()\r\n#19 0x000000000060cb42 in ?? ()\r\n#20 0x000000000060efea in PyRun_FileExFlags ()\r\n#21 0x000000000060f7dc in PyRun_SimpleFileExFlags ()\r\n#22 0x0000000000640256 in Py_Main ()\r\n#23 0x00000000004d0001 in main ()\r\n(gdb) \r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34135", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34135/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34135/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34135/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34135", "id": 520567622, "node_id": "MDU6SXNzdWU1MjA1Njc2MjI=", "number": 34135, "title": "Failed to load delegate from libedgetpu.so.1.0", "user": {"login": "bsddemon", "id": 45821059, "node_id": "MDQ6VXNlcjQ1ODIxMDU5", "avatar_url": "https://avatars3.githubusercontent.com/u/45821059?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bsddemon", "html_url": "https://github.com/bsddemon", "followers_url": "https://api.github.com/users/bsddemon/followers", "following_url": "https://api.github.com/users/bsddemon/following{/other_user}", "gists_url": "https://api.github.com/users/bsddemon/gists{/gist_id}", "starred_url": "https://api.github.com/users/bsddemon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bsddemon/subscriptions", "organizations_url": "https://api.github.com/users/bsddemon/orgs", "repos_url": "https://api.github.com/users/bsddemon/repos", "events_url": "https://api.github.com/users/bsddemon/events{/privacy}", "received_events_url": "https://api.github.com/users/bsddemon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-11-10T07:55:43Z", "updated_at": "2020-03-12T14:08:51Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nRaspbian\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\nRaspberry Pi\r\n- TensorFlow installed from (source or binary):\r\nBinary\r\n- TensorFlow version:\r\n- Python version:\r\n3.5\r\n- Installed using virtualenv? pip? conda?:\r\npip\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n**Describe the problem**\r\n libedgetpu.so.1.0 fails to load for certain user.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n  interpreter = Interpreter(args.model, experimental_delegates=[load_delegate('libedgetpu.so.1.0')])\r\n\r\nIt works perfectly for the user I can sudo. But I want to use the library with a different user (that cannot do sudo). I found in another issue that I need to add this user to the plugdev group. Which I did with the following command:\r\nsudo usermod -aG plugdev [your username] \r\nThis did not solve the problem.\r\n\r\n**Any other info / logs**\r\n    interpreter = Interpreter(args.model, experimental_delegates=[load_delegate('libedgetpu.so.1.0')])\r\n  File \"/home/certain-user/.local/lib/python3.5/site-packages/tflite_runtime/interpreter.py\", line 168, in load_delegate\r\n    library, str(e)))\r\nValueError: Failed to load delegate from libedgetpu.so.1.0\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34133", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34133/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34133/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34133/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34133", "id": 520563244, "node_id": "MDU6SXNzdWU1MjA1NjMyNDQ=", "number": 34133, "title": "logits and labels must have the same first dimension", "user": {"login": "BhavinSuthar25", "id": 55599112, "node_id": "MDQ6VXNlcjU1NTk5MTEy", "avatar_url": "https://avatars3.githubusercontent.com/u/55599112?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BhavinSuthar25", "html_url": "https://github.com/BhavinSuthar25", "followers_url": "https://api.github.com/users/BhavinSuthar25/followers", "following_url": "https://api.github.com/users/BhavinSuthar25/following{/other_user}", "gists_url": "https://api.github.com/users/BhavinSuthar25/gists{/gist_id}", "starred_url": "https://api.github.com/users/BhavinSuthar25/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BhavinSuthar25/subscriptions", "organizations_url": "https://api.github.com/users/BhavinSuthar25/orgs", "repos_url": "https://api.github.com/users/BhavinSuthar25/repos", "events_url": "https://api.github.com/users/BhavinSuthar25/events{/privacy}", "received_events_url": "https://api.github.com/users/BhavinSuthar25/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jaeyoo", "id": 40815393, "node_id": "MDQ6VXNlcjQwODE1Mzkz", "avatar_url": "https://avatars1.githubusercontent.com/u/40815393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaeyoo", "html_url": "https://github.com/jaeyoo", "followers_url": "https://api.github.com/users/jaeyoo/followers", "following_url": "https://api.github.com/users/jaeyoo/following{/other_user}", "gists_url": "https://api.github.com/users/jaeyoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaeyoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaeyoo/subscriptions", "organizations_url": "https://api.github.com/users/jaeyoo/orgs", "repos_url": "https://api.github.com/users/jaeyoo/repos", "events_url": "https://api.github.com/users/jaeyoo/events{/privacy}", "received_events_url": "https://api.github.com/users/jaeyoo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jaeyoo", "id": 40815393, "node_id": "MDQ6VXNlcjQwODE1Mzkz", "avatar_url": "https://avatars1.githubusercontent.com/u/40815393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaeyoo", "html_url": "https://github.com/jaeyoo", "followers_url": "https://api.github.com/users/jaeyoo/followers", "following_url": "https://api.github.com/users/jaeyoo/following{/other_user}", "gists_url": "https://api.github.com/users/jaeyoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaeyoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaeyoo/subscriptions", "organizations_url": "https://api.github.com/users/jaeyoo/orgs", "repos_url": "https://api.github.com/users/jaeyoo/repos", "events_url": "https://api.github.com/users/jaeyoo/events{/privacy}", "received_events_url": "https://api.github.com/users/jaeyoo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-11-10T07:00:14Z", "updated_at": "2020-02-27T08:57:59Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- MAC OS 10.14.6\r\n- Tensorflow 1.14\r\n\r\n**Working model**\r\n```python\r\ninput_layer=Input(shape=(X.shape[1],))\r\nmodel=Embedding(input_dim=len(vocab)+1,output_dim=32,input_length=X.shape[1])(input_layer)\r\nmodel = Bidirectional(LSTM(units = 50, return_sequences=True, recurrent_dropout=0.2))(model)\r\noutput_layer= Dense(3, activation=\"softmax\")(model)\r\n\r\nmodel = Model(input_layer,output_layer)\r\nmodel.compile(optimizer=\"adam\", loss=\"sparse_categorical_crossentropy\", metrics=[\"acc\"])\r\nmodel.summary()\r\n```\r\n\r\n**Trying to create same model with tf-lite layers of bi-directional LSTM**\r\n\r\n```python\r\n\r\nimport os\r\nos.environ['TF_ENABLE_CONTROL_FLOW_V2'] = '1'\r\nimport tensorflow as tf\r\nimport numpy as np\r\nfrom tensorflow.lite.experimental.examples.lstm.rnn import bidirectional_dynamic_rnn\r\n\r\ndef build_LSTM_layer(num_layers):\r\n    lstm_layers=[]\r\n    for i in range(num_layers):\r\n        lstm_layers.append(tf.lite.experimental.nn.TFLiteLSTMCell(num_units=50,name='rnn{}'.format(i),forget_bias=1.0))\r\n    final_lstm_layer=tf.keras.layers.StackedRNNCells(lstm_layers)\r\n    return final_lstm_layer\r\ndef build_bidirectional(inputs,num_layers,use_dynamic_rnn=True):\r\n    lstm_inputs=transposed_inp=tf.transpose(inputs,[1,0,2])\r\n    outputs,output_states=bidirectional_dynamic_rnn(build_LSTM_layer(num_layers),build_LSTM_layer(num_layers),lstm_inputs,dtype=\"float\",time_major=True)\r\n    fw_lstm_output,bw_lstm_output=outputs\r\n    final_out=tf.concat([fw_lstm_output,bw_lstm_output],axis=2)\r\n    \r\n    final_out=tf.unstack(final_out,axis=0)\r\n   \r\n    resultant_out=final_out[-1]\r\n    \r\n    return resultant_out\r\n\r\ntf.reset_default_graph()\r\n\r\nmodel_tf = tf.keras.models.Sequential([\r\n  tf.keras.layers.Input(shape=(X.shape[1],), name='input'),  \r\n  tf.keras.layers.Embedding(input_dim=len(vocab)+1,output_dim=32,input_length=X.shape[1]),\r\n  tf.keras.layers.Lambda(build_bidirectional, arguments={'num_layers' : 2, 'use_dynamic_rnn': True}),\r\n  tf.keras.layers.Flatten(),\r\n  tf.keras.layers.Dense(3, activation=tf.nn.softmax, name='output')\r\n])\r\nmodel_tf.compile(optimizer='adam',loss='sparse_categorical_crossentropy',metrics=['accuracy'])\r\nmodel_tf.summary()\r\n```\r\n\r\n\r\n**Inputs are token sequence and output should be NER tags which i get from keras model but not from above model**\r\n```python\r\nX.shape = (30, 16)\r\ny.shape = (30, 16, 1)\r\n\r\nI/P = array([[15., 10., 38.,  4., 32., 57., 39.,  0.,  0.,  0.,  0.,  0.,  0., 0.,  0.,  0.],...])\r\nO/P = array([[[1.],[1.],[1.],[1.],[2.],[1.],[1.],[0.],[0.],[0.],\r\n         [0.],[0.],[0.],[0.],[0.],[0.]],...])\r\n```\r\n\r\n\r\n\r\n\r\n**Output logs**\r\n```Error\r\nEpoch 1/10\r\n---------------------------------------------------------------------------\r\nInvalidArgumentError                      Traceback (most recent call last)\r\n<ipython-input-503-89e5191da57e> in <module>\r\n      2 train_x,test_x,train_y,test_y = train_test_split(X,y,test_size=0.2)\r\n      3 \r\n----> 4 history = model_tf.fit(train_x,train_y,epochs=10,batch_size=3)\r\n\r\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow/python/keras/engine/training.py in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_freq, max_queue_size, workers, use_multiprocessing, **kwargs)\r\n    778           validation_steps=validation_steps,\r\n    779           validation_freq=validation_freq,\r\n--> 780           steps_name='steps_per_epoch')\r\n    781 \r\n    782   def evaluate(self,\r\n\r\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow/python/keras/engine/training_arrays.py in model_iteration(model, inputs, targets, sample_weights, batch_size, epochs, verbose, callbacks, val_inputs, val_targets, val_sample_weights, shuffle, initial_epoch, steps_per_epoch, validation_steps, validation_freq, mode, validation_in_fit, prepared_feed_values_from_dataset, steps_name, **kwargs)\r\n    361 \r\n    362         # Get outputs.\r\n--> 363         batch_outs = f(ins_batch)\r\n    364         if not isinstance(batch_outs, list):\r\n    365           batch_outs = [batch_outs]\r\n\r\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow/python/keras/backend.py in __call__(self, inputs)\r\n   3290 \r\n   3291     fetched = self._callable_fn(*array_vals,\r\n-> 3292                                 run_metadata=self.run_metadata)\r\n   3293     self._call_fetch_callbacks(fetched[-len(self._fetches):])\r\n   3294     output_structure = nest.pack_sequence_as(\r\n\r\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/tensorflow/python/client/session.py in __call__(self, *args, **kwargs)\r\n   1456         ret = tf_session.TF_SessionRunCallable(self._session._session,\r\n   1457                                                self._handle, args,\r\n-> 1458                                                run_metadata_ptr)\r\n   1459         if run_metadata:\r\n   1460           proto_data = tf_session.TF_GetBuffer(run_metadata_ptr)\r\n\r\nInvalidArgumentError: logits and labels must have the same first dimension, got logits shape [3,3] and labels shape [48]\r\n\t [[{{node loss/output_loss/SparseSoftmaxCrossEntropyWithLogits/SparseSoftmaxCrossEntropyWithLogits}}]]\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34131", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34131/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34131/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34131/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34131", "id": 520548229, "node_id": "MDU6SXNzdWU1MjA1NDgyMjk=", "number": 34131, "title": "Negative sampling / candidate sampling with Keras API", "user": {"login": "Santosh-Gupta", "id": 5524261, "node_id": "MDQ6VXNlcjU1MjQyNjE=", "avatar_url": "https://avatars1.githubusercontent.com/u/5524261?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Santosh-Gupta", "html_url": "https://github.com/Santosh-Gupta", "followers_url": "https://api.github.com/users/Santosh-Gupta/followers", "following_url": "https://api.github.com/users/Santosh-Gupta/following{/other_user}", "gists_url": "https://api.github.com/users/Santosh-Gupta/gists{/gist_id}", "starred_url": "https://api.github.com/users/Santosh-Gupta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Santosh-Gupta/subscriptions", "organizations_url": "https://api.github.com/users/Santosh-Gupta/orgs", "repos_url": "https://api.github.com/users/Santosh-Gupta/repos", "events_url": "https://api.github.com/users/Santosh-Gupta/events{/privacy}", "received_events_url": "https://api.github.com/users/Santosh-Gupta/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-11-10T03:34:33Z", "updated_at": "2019-11-15T23:15:11Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 2.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nIt looks like TF Keras has no built in functions to do candidate sampling like in TF 1.0. As far as I can tell, the official keras word2vec example doesn't have negative sampling https://www.tensorflow.org/tutorials/text/word_embeddings even though it's an integral part for producing quality word embeddings. \r\n\r\n**Will this change the current api? How?**\r\n\r\nThe original tensorflow losses had options for negative sampling, including different distributions to select from. So perhaps some new loss functions and candidate sampling options will need to be added. \r\n\r\n**Who will benefit with this feature?**\r\n\r\nAnyone who is training embedding models. \r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34119", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34119/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34119/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34119/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34119", "id": 520353789, "node_id": "MDU6SXNzdWU1MjAzNTM3ODk=", "number": 34119, "title": "TF2.0 Calling set_session before fit_generator causes training to freeze when using multiprocessing", "user": {"login": "moberweger", "id": 10559836, "node_id": "MDQ6VXNlcjEwNTU5ODM2", "avatar_url": "https://avatars2.githubusercontent.com/u/10559836?v=4", "gravatar_id": "", "url": "https://api.github.com/users/moberweger", "html_url": "https://github.com/moberweger", "followers_url": "https://api.github.com/users/moberweger/followers", "following_url": "https://api.github.com/users/moberweger/following{/other_user}", "gists_url": "https://api.github.com/users/moberweger/gists{/gist_id}", "starred_url": "https://api.github.com/users/moberweger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/moberweger/subscriptions", "organizations_url": "https://api.github.com/users/moberweger/orgs", "repos_url": "https://api.github.com/users/moberweger/repos", "events_url": "https://api.github.com/users/moberweger/events{/privacy}", "received_events_url": "https://api.github.com/users/moberweger/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-11-09T07:53:17Z", "updated_at": "2019-11-11T11:49:03Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code: No\r\n- OS Platform and Distribution: Linux Ubuntu 16.04\r\n- Mobile device if the issue happens on mobile device: N/A\r\n- TensorFlow installed from: binary\r\n- TensorFlow version: v2.0.0-rc2-26-g64c3d38 2.0.0\r\n- Python version: 3.6\r\n- Bazel version: N/A\r\n- GCC/Compiler version: N/A\r\n- CUDA/cuDNN version: 10.0 / 7\r\n- GPU model and memory: GTX 1080Ti\r\n\r\n**Describe the current behavior**\r\nI am trying to modify TF session parameters in combination with Keras (e.g. the allowed GPU memory) and use `set_session()` to store these parameters. However, if `set_session()` is called  before `fit_generator()`, it causes the training to freeze when using multiprocessing. To reproduce the error use the following code. The Colab gist to reproduce the error can be found [here](https://colab.research.google.com/gist/moberweger/2553560a5deeb2eaa5e3cfc23516ef34/untitled217.ipynb). The colab execution of the code in question is not responding, so I stopped executing after 10 min, which ultimately gives me the error. This problems seems to occur also in 1.14, but not 1.15 !? as indicated in #33973. The gist might work when executed the first time, but the error can be reproduce after running the script a few times.\r\n\r\n**Describe the expected behavior**\r\nNo freeze should occur.\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport numpy as np\r\nimport tensorflow as tf\r\nimport tensorflow.keras.backend as K\r\nfrom tensorflow.keras.layers import Input, Conv2D\r\nfrom tensorflow.keras.models import Model\r\nfrom tensorflow.keras.utils import Sequence\r\n\r\n\r\ndef get_model(input_shape, output_shape, compile_batch_size):\r\n    assert K.image_data_format() == 'channels_last'\r\n    m_input = Input(shape=input_shape, batch_size=compile_batch_size)\r\n    m_output = Conv2D(output_shape[-1], 1, activation=None)(m_input)\r\n    model = Model(inputs=m_input, outputs=m_output)\r\n    return model\r\n\r\n\r\nclass DataGenerator(Sequence):\r\n    def __init__(self, batch_size, image_size, num_batches):\r\n        assert K.image_data_format() == 'channels_last'\r\n\r\n        self.batch_size = batch_size\r\n        self.image_size = image_size\r\n        self.num_batches = num_batches\r\n        self.on_epoch_end()\r\n\r\n    def __len__(self):\r\n        assert self.num_batches > 0\r\n        return self.num_batches\r\n\r\n    def __getitem__(self, index):\r\n        return np.zeros((self.batch_size,) + self.image_size).astype('float32'), np.zeros(\r\n            (self.batch_size,) + self.image_size).astype('float32')\r\n\r\n    def on_epoch_end(self):\r\n        pass\r\n\r\n\r\nif __name__ == '__main__':\r\n    print(tf.version.GIT_VERSION, tf.version.VERSION)\r\n\r\n    # set to True to trigger infinite wait\r\n    if True:\r\n        # limit GPU memory\r\n        config = tf.compat.v1.ConfigProto()\r\n        config.gpu_options.allow_growth = True\r\n        config.gpu_options.per_process_gpu_memory_fraction = 0.5\r\n        tf.compat.v1.keras.backend.set_session(tf.compat.v1.Session(config=config))\r\n\r\n    inp_shape = (128, 64, 2)\r\n    outp_shape = (128, 64, 2)\r\n    batch_size = 16\r\n\r\n    gen = DataGenerator(batch_size, inp_shape, 10)\r\n    model = get_model(inp_shape, outp_shape, batch_size)\r\n    model.summary()\r\n    model.compile(loss=[\"mse\"], optimizer=\"adam\", metrics=[\"accuracy\"])\r\n    model.fit_generator(gen, steps_per_epoch=10, epochs=5, workers=2, use_multiprocessing=True)\r\n```\r\n\r\n**Other info / logs**\r\n```\r\nTraceback (most recent call last)\r\n\r\n<ipython-input-4-26fa57f6f7f8> in <module>()\r\n     55     model.summary()\r\n     56     model.compile(loss=[\"mse\"], optimizer=\"adam\", metrics=[\"accuracy\"])\r\n---> 57     model.fit_generator(gen, steps_per_epoch=10, epochs=5, workers=2, use_multiprocessing=True)\r\n\r\n7 frames\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/keras/engine/training.py in fit_generator(self, generator, steps_per_epoch, epochs, verbose, callbacks, validation_data, validation_steps, validation_freq, class_weight, max_queue_size, workers, use_multiprocessing, shuffle, initial_epoch)\r\n   1295         shuffle=shuffle,\r\n   1296         initial_epoch=initial_epoch,\r\n-> 1297         steps_name='steps_per_epoch')\r\n   1298 \r\n   1299   def evaluate_generator(self,\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/keras/engine/training_generator.py in model_iteration(model, data, steps_per_epoch, epochs, verbose, callbacks, validation_data, validation_steps, validation_freq, class_weight, max_queue_size, workers, use_multiprocessing, shuffle, initial_epoch, mode, batch_size, steps_name, **kwargs)\r\n    219     step = 0\r\n    220     while step < target_steps:\r\n--> 221       batch_data = _get_next_batch(generator)\r\n    222       if batch_data is None:\r\n    223         if is_dataset:\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/keras/engine/training_generator.py in _get_next_batch(generator)\r\n    361   \"\"\"Retrieves the next batch of input data.\"\"\"\r\n    362   try:\r\n--> 363     generator_output = next(generator)\r\n    364   except (StopIteration, errors.OutOfRangeError):\r\n    365     return None\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/keras/utils/data_utils.py in get(self)\r\n    777     try:\r\n    778       while self.is_running():\r\n--> 779         inputs = self.queue.get(block=True).get()\r\n    780         self.queue.task_done()\r\n    781         if inputs is not None:\r\n\r\n/usr/lib/python3.6/multiprocessing/pool.py in get(self, timeout)\r\n    636 \r\n    637     def get(self, timeout=None):\r\n--> 638         self.wait(timeout)\r\n    639         if not self.ready():\r\n    640             raise TimeoutError\r\n\r\n/usr/lib/python3.6/multiprocessing/pool.py in wait(self, timeout)\r\n    633 \r\n    634     def wait(self, timeout=None):\r\n--> 635         self._event.wait(timeout)\r\n    636 \r\n    637     def get(self, timeout=None):\r\n\r\n/usr/lib/python3.6/threading.py in wait(self, timeout)\r\n    549             signaled = self._flag\r\n    550             if not signaled:\r\n--> 551                 signaled = self._cond.wait(timeout)\r\n    552             return signaled\r\n    553 \r\n\r\n/usr/lib/python3.6/threading.py in wait(self, timeout)\r\n    293         try:    # restore state no matter what (e.g., KeyboardInterrupt)\r\n    294             if timeout is None:\r\n--> 295                 waiter.acquire()\r\n    296                 gotit = True\r\n    297             else:\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34114", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34114/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34114/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34114/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34114", "id": 520312991, "node_id": "MDU6SXNzdWU1MjAzMTI5OTE=", "number": 34114, "title": "Named dictionary inputs and outputs for tf.keras.Model", "user": {"login": "huyng", "id": 121183, "node_id": "MDQ6VXNlcjEyMTE4Mw==", "avatar_url": "https://avatars0.githubusercontent.com/u/121183?v=4", "gravatar_id": "", "url": "https://api.github.com/users/huyng", "html_url": "https://github.com/huyng", "followers_url": "https://api.github.com/users/huyng/followers", "following_url": "https://api.github.com/users/huyng/following{/other_user}", "gists_url": "https://api.github.com/users/huyng/gists{/gist_id}", "starred_url": "https://api.github.com/users/huyng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/huyng/subscriptions", "organizations_url": "https://api.github.com/users/huyng/orgs", "repos_url": "https://api.github.com/users/huyng/repos", "events_url": "https://api.github.com/users/huyng/events{/privacy}", "received_events_url": "https://api.github.com/users/huyng/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-11-09T01:50:31Z", "updated_at": "2020-02-25T05:18:28Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 2.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\n**feature request:**\r\n\r\nIf the user passes in dictionaries for the `inputs` or `outputs` argument during `tf.keras.Model` initialization, preserve the dictionary datatype in `tf.keras.Model.inputs` and `tf.keras.Model.outputs` (i.e. avoid normalizing these arguments to lists). \r\n\r\nThis would allow us to refer to inputs and outputs by name rather than by indices in a list.\r\n\r\n**current behavior/background:**\r\n\r\n`tf.keras.Model` allows us to construct a `Model` with `inputs` and `outputs` arguments that are passed in as dictionaries of tensors. This is a very nice feature because it  allows you to evaluate a model by passing in dictionaries of named data, and to refer to outputs using their named outputs.\r\n\r\nHowever, if one wants to *extend* a model by attaching more layers to a given output, we lose all of the naming information given to us during the model initialization. This is because the `inputs` and `outputs` arguments are always \"flattened\" to lists and assigned to `Model.outputs` and `Model.inputs` regardless if the user passed in a dictionary or not for these arguments.\r\n\r\nAs a result of losing this naming information, we have to fall back to using integer based indexing to retrieve the output tensor of interest that we want to extend. While not the end of the world, this is more error prone since layer ordering may move around due to changes in the initial model.\r\n\r\nIn the following example, I illustrate how defining, and extending a model with new layers currently works:\r\n\r\n```python\r\nfrom tensorflow.keras import Model\r\nfrom tensorflow.keras.layers import Input, Dense\r\n\r\ndef create_base_model():\r\n    # create initial model\r\n    a = Input([10], dtype=tf.float32)\r\n    b = Dense(4)(a)\r\n    c = Dense(8)(b)\r\n    model = Model(inputs={'a': a}, outputs={'b': b, 'c': c})\r\n    return model\r\n\r\ndef extend_base_model(model):\r\n    # create a new model to attach additional layers to tensor \"c\"\r\n    c = model.outputs[-2]\r\n    d = Dense(16)(c)\r\n    \r\n    # notice here, since model.inputs and model.outputs are flattened to a lists,\r\n    # we lose all naming information\r\n    new_model = Model(inputs=model.inputs, outputs=model.outputs+[d])\r\n    return new_model\r\n    \r\nbase = create_base_model()\r\nmodel = extend_base_model(base)\r\n\r\n# we lose all naming information in the inputs and outputs given by the base model\r\n# outputs: [<tensor>, <tensor> ,  <tensor>]\r\nmodel(tf.zeros([1, 10], dtype=tf.float32))\r\n```\r\n\r\nIf the feature request was adopted, here's how defining, extending, and executing models could work:\r\n\r\n```python\r\nfrom tensorflow.keras import Model\r\nfrom tensorflow.keras.layers import Input, Dense\r\n\r\ndef create_base_model():\r\n    # create initial model\r\n    a = Input([10], dtype=tf.float32)\r\n    b = Dense(4)(a)\r\n    c = Dense(8)(b)\r\n    model = Model(inputs={'a': a}, outputs={'b': b, 'c': c})\r\n    return model\r\n\r\ndef extend_base_model(model):\r\n    # create a new model to attach additional layers to tensor \"c\"\r\n    c = model.outputs[\"c\"]\r\n    d = Dense(16)(c)\r\n    \r\n    new_model = Model(inputs=model.inputs, outputs={'d': d, **model.outputs})\r\n    return new_model\r\n    \r\nbase = create_base_model()\r\nmodel = extend_base_model(base)\r\n\r\n# we preserve all naming information in the inputs and outputs given by the base model\r\n# outputs {\"b\": <tensor>, \"c\": <tensor> , \"d\": <tensor>}\r\nmodel({\"a\": tf.zeros([1, 10], dtype=tf.float32))\r\n```\r\n\r\n**Will this change the current api? How?**\r\n\r\nYes, it will change `Model.input` and `Model.output` data types *if* the user passes in a dictionary for these arguments during initialization. \r\n\r\ncurrent behavior:\r\n\r\n```python\r\na = Input([10], dtype=tf.float32)\r\nb = Dense(4)(a)\r\nmodel = Model(inputs={'a': a}, outputs={'b': b})\r\ntype(model.inputs)  # list\r\ntype(model.outputs) # list\r\n```\r\n\r\nnew behavior:\r\n\r\n```python\r\na = Input([10], dtype=tf.float32)\r\nb = Dense(4)(a)\r\nmodel = Model(inputs={'a': a}, outputs={'b': b})\r\ntype(model.inputs)  # dict\r\ntype(model.outputs) # dict\r\n```\r\n\r\n**Who will benefit with this feature?**\r\n\r\nPeople designing and developing models will be able to more easily and clearly expose output tensors for downstream users to access. \r\n\r\nDownstream users who need to extend a pre-defined models will more easily be able to access tensors using their named outputs.\r\n\r\n**Any Other info.**\r\n\r\nNot sure if this is the right way to implement this, but it looks like the `_nested_outputs` and `_nested_inputs` variables listed below preserve the data types of the inputs and outputs arguments that were initially passed into the Model constructor.\r\n\r\nhttps://github.com/tensorflow/tensorflow/blob/1cf0898dd4331baf93fe77205550f2c2e6c90ee5/tensorflow/python/keras/engine/network.py#L264-L265\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34112", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34112/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34112/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34112/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34112", "id": 520286928, "node_id": "MDU6SXNzdWU1MjAyODY5Mjg=", "number": 34112, "title": "DatasetVariantWrapper \"No unary variant device copy function found\"", "user": {"login": "mwalmsley", "id": 7740526, "node_id": "MDQ6VXNlcjc3NDA1MjY=", "avatar_url": "https://avatars1.githubusercontent.com/u/7740526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mwalmsley", "html_url": "https://github.com/mwalmsley", "followers_url": "https://api.github.com/users/mwalmsley/followers", "following_url": "https://api.github.com/users/mwalmsley/following{/other_user}", "gists_url": "https://api.github.com/users/mwalmsley/gists{/gist_id}", "starred_url": "https://api.github.com/users/mwalmsley/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mwalmsley/subscriptions", "organizations_url": "https://api.github.com/users/mwalmsley/orgs", "repos_url": "https://api.github.com/users/mwalmsley/repos", "events_url": "https://api.github.com/users/mwalmsley/events{/privacy}", "received_events_url": "https://api.github.com/users/mwalmsley/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, {"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2019-11-08T23:47:49Z", "updated_at": "2020-01-03T20:36:10Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes (but running on an official image)\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04, running the Ubuntu 18.04 tensorflow-gpu Docker image provided by GCloud\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: NA\r\n- TensorFlow installed from (source or binary): pip\r\n- TensorFlow version (use command below): tensorflow-gpu-2.0.0\r\n- Python version: 3.5\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source): NA\r\n- CUDA/cuDNN version: 10.0\r\n- GPU model and memory: P100 x1\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\nI'm running Tensorflow on GCloud using the gcr.io/deeplearning-platform-release/tf2-gpu.2-0 image. I'm attempting to train a subclassed tf.keras.Model. \r\n\r\nI can train my image both on my local machine and GCloud, provided the --runtime=nvidia arg is NOT provided. When I add that argument, the GCloud image fails with the following error:\r\n\r\ntensorflow.python.framework.errors_impl.InternalError:  No unary variant device copy function found for direction: 1 and Variant type_index: tensorflow::data::(anonymous namespace)::DatasetVariantWrapper\r\n\t [[{{node MapDataset/_8}}]] [Op:__inference_get_input_516]\r\n\r\n\r\n**Describe the expected behavior**\r\n\r\nI expect TensorFlow to continue to run successfully when using the --runtime=nvidia arg, i.e. enabling CUDA.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\nBecause I have no understanding of the origin of this internal error, I am not sure how to create such a minimal case. Please advise.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nFull failing log:\r\n\r\n  File \"/home/zoobot/zoobot/estimators/run_estimator.py\", line 33, in run_estimator\r\n    train_dataset = input_utils.get_input(config=config.train_config)\r\n  File \"/root/miniconda3/lib/python3.5/site-packages/tensorflow_core/python/eager/def_function.py\", line 457, in __call__\r\n    result = self._call(*args, **kwds)\r\n  File \"/root/miniconda3/lib/python3.5/site-packages/tensorflow_core/python/eager/def_function.py\", line 526, in _call\r\n    return self._concrete_stateful_fn._filtered_call(canon_args, canon_kwds)  # pylint: disable=protected-access\r\n  File \"/root/miniconda3/lib/python3.5/site-packages/tensorflow_core/python/eager/function.py\", line 1141, in _filtered_call\r\n    self.captured_inputs)\r\n  File \"/root/miniconda3/lib/python3.5/site-packages/tensorflow_core/python/eager/function.py\", line 1224, in _call_flat\r\n    ctx, args, cancellation_manager=cancellation_manager)\r\n  File \"/root/miniconda3/lib/python3.5/site-packages/tensorflow_core/python/eager/function.py\", line 511, in call\r\n    ctx=ctx)\r\n  File \"/root/miniconda3/lib/python3.5/site-packages/tensorflow_core/python/eager/execute.py\", line 67, in quick_execute\r\n    six.raise_from(core._status_to_exception(e.code, message), None)\r\n  File \"<string>\", line 3, in raise_from\r\ntensorflow.python.framework.errors_impl.InternalError:  No unary variant device copy function found for direction: 1 and Variant type_index: tensorflow::data::(anonymous namespace)::DatasetVariantWrapper\r\n\t [[{{node MapDataset/_8}}]] [Op:__inference_get_input_516]\r\n\r\nFull successful log, without using --runtime=nvidia:\r\n\r\n2019-11-08 23:34:49.753010: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudart.so.10.0\r\n2019-11-08 23:34:59.531666: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcuda.so.1'; dlerror: libcuda.so.1: cannot open shared object file: No such file or directory; LD_LIBRARY_PATH: /usr/local/nvidia/lib:/usr/local/nvidia/lib64\r\n2019-11-08 23:34:59.531739: E tensorflow/stream_executor/cuda/cuda_driver.cc:318] failed call to cuInit: UNKNOWN ERROR (303)\r\n2019-11-08 23:34:59.531778: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:163] no NVIDIA GPU device is present: /dev/nvidia0 does not exist\r\n2019-11-08 23:34:59.532239: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-11-08 23:34:59.540322: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2300000000 Hz\r\n2019-11-08 23:34:59.540738: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x55cf105c9a70 executing computations on platform Host. Devices:\r\n2019-11-08 23:34:59.540776: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): Host, Default Version\r\nWARNING:root:Loading multiple tfrecords with interleaving, shuffle=False\r\nWARNING:root:Loading multiple tfrecords with interleaving, shuffle=False\r\n2019-11-08 23:35:37.148322: I tensorflow/core/profiler/lib/profiler_session.cc:184] Profiler session started.\r\n2019-11-08 23:35:37.148432: E tensorflow/core/platform/default/device_tracer.cc:70] CUDA error: <unknown>\r\n...\r\nEpoch 1/100\r\n..."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34101", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34101/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34101/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34101/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34101", "id": 520052749, "node_id": "MDU6SXNzdWU1MjAwNTI3NDk=", "number": 34101, "title": "batch_gather_nd op <del>Size Op</del> missing for Tensorflow Lite", "user": {"login": "ThinerDAS", "id": 16000330, "node_id": "MDQ6VXNlcjE2MDAwMzMw", "avatar_url": "https://avatars3.githubusercontent.com/u/16000330?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ThinerDAS", "html_url": "https://github.com/ThinerDAS", "followers_url": "https://api.github.com/users/ThinerDAS/followers", "following_url": "https://api.github.com/users/ThinerDAS/following{/other_user}", "gists_url": "https://api.github.com/users/ThinerDAS/gists{/gist_id}", "starred_url": "https://api.github.com/users/ThinerDAS/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ThinerDAS/subscriptions", "organizations_url": "https://api.github.com/users/ThinerDAS/orgs", "repos_url": "https://api.github.com/users/ThinerDAS/repos", "events_url": "https://api.github.com/users/ThinerDAS/events{/privacy}", "received_events_url": "https://api.github.com/users/ThinerDAS/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-11-08T14:43:36Z", "updated_at": "2019-11-11T09:49:23Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): ubuntu 18.04\r\n- TensorFlow installed from (source or binary): binary docker latest\r\n- TensorFlow version (or github SHA if from source):v2.0.0-rc2-26-g64c3d38 2.0.0\r\n\r\nAny model using `batch_gather_nd` (`gather_nd` when `batch!=0` and input tensor has indefinite batch dimension) will rely on `Size` op (`batch_gather_nd`->`meshgrid`->`size`->`Size`) when the batch dim is -1 (unspecified). Lack of `Size` op renders `gather_nd` op useless in many cases.\r\n\r\nAnother possible fix here: decouple `batch_gather_nd` from `Size`. (Is that possible?)\r\n\r\nHere I used a monkey patch here to solve the problem: when batch dimension is 1, do not call `meshgrid` and directly use the `range` above the line since `range` does not rely on `size`.\r\n```\r\n    mesh_list = meshgrid(*dim_ranges, indexing=\"ij\") if dim_ranges else []\r\n```\r\nchanged into\r\n```\r\n    if len(dim_ranges)==0:\r\n      mesh_list = [] \r\n    elif len(dim_ranges)==1:\r\n      mesh_list = dim_ranges\r\n    else:\r\n      mesh_list = meshgrid(*dim_ranges, indexing=\"ij\") if dim_ranges else []\r\n```\r\nThat might be helpful if anyone want to use `batch_gather_nd` on tensorflow lite.\r\n\r\nUpdate: I am wrong here. `batch_gather_nd` is not supported in tensorflow lite at all. The reason lies in that `batch_gather_nd` used `range` with indefinite length, which makes the dimension of the output empty; however `range` is used later and `tile`d and `concatenated` etc, however in the eyes of tensorflow optimizer, the shape is always [] so they are noop and any operation related are noop, effectively makes shape of every tensor related empty (`shape=[]`). So it is the `batch_gather_nd` op that is missing\r\n\r\nUpdate: I have just noticed that Tensorflow Lite will always generate code for batch=1, so a fast solution is: set a export_lite flag in keras model definition part and make the lambda layer for batch_gather_nd act specially when exporting for tensorflow lite - return the tensor as if batch=1 even when batch=None actually.\r\nSo the problem remained for tensorflow devs here is: support the harmonious implementation of batch_gather_nd between tensorflow and tensorflow lite; or natively provide a GatherNd layer in keras that works correctly in tensorflow lite.\r\n\r\nSummary:\r\n\r\nExpected behavior: using gather_nd when batch=1 should generate correct graph when a keras model is exported into tensorflow lite\r\n\r\nActual behavior: batch_gather_nd fails to generate correct dimension for its output in tensorflow lite.\r\n\r\nReproduce: To reproduce behavior, use gather_nd in one lambda layer (with batch=1) and export the model into tensorflow lite\r\n\r\nProblem: gather_nd should be specially dealt with in exporting process.\r\n\r\nMonkey patch in user code: in the gather_nd function in your Lambda layer, check out whether you are exporting into a tensorflow lite binary. If an exporting is in progress, take as if the dim is 1 and keep the `batch_dims=0`. When `arg=[params,indices]`, simply `gather_nd(arg[0][0], arg[1])` will do the job.\r\n\r\nSolution: make a dedicated GatherNd layer in keras who can correctly handle the different behavior between tensorflow and tensorflow lite."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34100", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34100/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34100/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34100/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34100", "id": 520034382, "node_id": "MDU6SXNzdWU1MjAwMzQzODI=", "number": 34100, "title": "many proto files lack go_package", "user": {"login": "aronatkins", "id": 362187, "node_id": "MDQ6VXNlcjM2MjE4Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/362187?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aronatkins", "html_url": "https://github.com/aronatkins", "followers_url": "https://api.github.com/users/aronatkins/followers", "following_url": "https://api.github.com/users/aronatkins/following{/other_user}", "gists_url": "https://api.github.com/users/aronatkins/gists{/gist_id}", "starred_url": "https://api.github.com/users/aronatkins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aronatkins/subscriptions", "organizations_url": "https://api.github.com/users/aronatkins/orgs", "repos_url": "https://api.github.com/users/aronatkins/repos", "events_url": "https://api.github.com/users/aronatkins/events{/privacy}", "received_events_url": "https://api.github.com/users/aronatkins/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-11-08T14:09:01Z", "updated_at": "2019-11-17T19:52:16Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution: Linux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 1.15.0\r\n- Python version: N/A\r\n- Installed using virtualenv? pip? conda?: release .tar.gz\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the problem**\r\n\r\nAs noted in https://github.com/golang/protobuf/issues/984, a number of `*.proto` files lack `go_version` statements. \r\n\r\nThe commands:\r\n\r\n```bash\r\nprotoc \\\r\n       -I./github.com/tensorflow/tensorflow \\\r\n       --go_out=plugins=grpc:./ \\\r\n       ./github.com/tensorflow/tensorflow/tensorflow/core/framework/*.proto\r\nprotoc \\\r\n       -I./github.com/tensorflow/tensorflow \\\r\n       --go_out=plugins=grpc:./ \\\r\n       ./github.com/tensorflow/tensorflow/tensorflow/core/protobuf/{saver,saved_model,struct,trackable_object_graph,saved_object_graph,meta_graph}.proto\r\n```\r\n\r\ngive the error:\r\n\r\n```bash\r\n2019/11/07 14:43:01 protoc-gen-go: error:inconsistent package import paths: \"github.com/tensorflow/tensorflow/tensorflow/go/core/protobuf\", \"tensorflow/core/protobuf\"\r\n```\r\n\r\nI have worked around this locally by adding `go_package` statements to the following files so everything is emitted into `github.com/tensorflow/tensorflow/tensorflow/go/core`:\r\n\r\n* tensorflow/core/protobuf/saved_object_graph.proto\r\n* tensorflow/core/protobuf/struct.proto\r\n* tensorflow/core/protobuf/trackable_object_graph.proto\r\n\r\n```\r\noption go_package = \"github.com/tensorflow/tensorflow/tensorflow/go/core/protobuf\";\r\n```\r\n\r\nA number of other `*.proto` files also appear to lack `go_package`; not sure if they all need update:\r\n\r\n```\r\n$ grep -L go_package $(find tensorflow/core -name \"*.proto\")\r\ntensorflow/core/kernels/boosted_trees/boosted_trees.proto\r\ntensorflow/core/util/test_log.proto\r\ntensorflow/core/util/memmapped_file_system.proto\r\ntensorflow/core/util/saved_tensor_slice.proto\r\ntensorflow/core/util/example_proto_fast_parsing_test.proto\r\ntensorflow/core/util/event.proto\r\ntensorflow/core/grappler/costs/op_performance_data.proto\r\ntensorflow/core/profiler/tfprof_options.proto\r\ntensorflow/core/profiler/tfprof_output.proto\r\ntensorflow/core/profiler/profiler_analysis.proto\r\ntensorflow/core/profiler/tfprof_log.proto\r\ntensorflow/core/profiler/op_profile.proto\r\ntensorflow/core/profiler/profiler_service.proto\r\ntensorflow/core/profiler/profile.proto\r\ntensorflow/core/protobuf/trace_events.proto\r\ntensorflow/core/protobuf/conv_autotuning.proto\r\ntensorflow/core/protobuf/autotuning.proto\r\ntensorflow/core/protobuf/graph_debug_info.proto\r\ntensorflow/core/protobuf/eager_service.proto\r\ntensorflow/core/protobuf/replay_log.proto\r\ntensorflow/core/protobuf/transport_options.proto\r\ntensorflow/core/protobuf/tpu/compilation_result.proto\r\ntensorflow/core/protobuf/tpu/optimization_parameters.proto\r\ntensorflow/core/protobuf/tpu/tpu_embedding_output_layout.proto\r\ntensorflow/core/protobuf/tpu/topology.proto\r\ntensorflow/core/protobuf/tpu/tpu_embedding_configuration.proto\r\ntensorflow/core/protobuf/tpu/dynamic_padding.proto\r\ntensorflow/core/protobuf/data/experimental/snapshot.proto\r\ntensorflow/core/debug/debug_service.proto\r\ntensorflow/core/debug/debugger_event_metadata.proto\r\n```\r\n\r\nClosely related to https://github.com/tensorflow/tensorflow/issues/16282, https://github.com/tensorflow/tensorflow/issues/30093 and a few other issues/PRs that attempt to incrementally add `go_package` statements."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34096", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34096/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34096/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34096/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34096", "id": 519906478, "node_id": "MDU6SXNzdWU1MTk5MDY0Nzg=", "number": 34096, "title": "Cannot load saved model fitted via csv dataset", "user": {"login": "EdwarDDay", "id": 4127904, "node_id": "MDQ6VXNlcjQxMjc5MDQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/4127904?v=4", "gravatar_id": "", "url": "https://api.github.com/users/EdwarDDay", "html_url": "https://github.com/EdwarDDay", "followers_url": "https://api.github.com/users/EdwarDDay/followers", "following_url": "https://api.github.com/users/EdwarDDay/following{/other_user}", "gists_url": "https://api.github.com/users/EdwarDDay/gists{/gist_id}", "starred_url": "https://api.github.com/users/EdwarDDay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/EdwarDDay/subscriptions", "organizations_url": "https://api.github.com/users/EdwarDDay/orgs", "repos_url": "https://api.github.com/users/EdwarDDay/repos", "events_url": "https://api.github.com/users/EdwarDDay/events{/privacy}", "received_events_url": "https://api.github.com/users/EdwarDDay/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-11-08T09:30:34Z", "updated_at": "2019-12-15T02:18:57Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): MacOS 10.14.6\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.0.0\r\n- Python version: 3.7\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n**Describe the current behavior**\r\nI load data from a csv file to create the dataset for fitting my model. After saving the model, I can't load it again. I get the following error message:\r\n`ValueError: ('We expected a dictionary here. Instead we got: ', <tf.Tensor 'Placeholder:0' shape=(None,) dtype=float32>)`\r\n\r\n**Describe the expected behavior**\r\nThe program should load the model.\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport tensorflow as tf\r\nfrom tensorflow import keras\r\n\r\ndataset: tf.data.Dataset = tf.data.experimental.make_csv_dataset('xor.csv', 4, label_name='result')\r\ncolumns = [tf.feature_column.numeric_column('a'), tf.feature_column.numeric_column('b')]\r\ninput_column = keras.layers.DenseFeatures(columns)\r\nlayers = [input_column,\r\n          keras.layers.Dense(4, activation='relu'),\r\n          keras.layers.Dense(2)]\r\nmodel = keras.Sequential(layers)\r\nmodel.compile(loss='mean_squared_error', optimizer='adam', metrics=['binary_accuracy'])\r\nmodel.fit(dataset, steps_per_epoch=4, epochs=2000)\r\nkeras.models.save_model(model, 'test_model.h5')\r\n# model.save('test_model.h5')\r\nmodel = keras.models.load_model('test_model.h5')\r\n```\r\nxor.csv:\r\n```\r\na,b,result\r\n0,0,0\r\n0,1,1\r\n1,0,1\r\n1,1,0\r\n```\r\n\r\n**Other info / logs**\r\n```\r\nTraceback (most recent call last):\r\n...\r\n  File \"main.py\", line 76, in main\r\n    model = keras.models.load_model('test_model.h5')\r\n  File \"/.../lib/python3.7/site-packages/tensorflow_core/python/keras/saving/save.py\", line 146, in load_model\r\n    return hdf5_format.load_model_from_hdf5(filepath, custom_objects, compile)\r\n  File \"/.../lib/python3.7/site-packages/tensorflow_core/python/keras/saving/hdf5_format.py\", line 168, in load_model_from_hdf5\r\n    custom_objects=custom_objects)\r\n  File \"/.../lib/python3.7/site-packages/tensorflow_core/python/keras/saving/model_config.py\", line 55, in model_from_config\r\n    return deserialize(config, custom_objects=custom_objects)\r\n  File \"/.../lib/python3.7/site-packages/tensorflow_core/python/keras/layers/serialization.py\", line 106, in deserialize\r\n    printable_module_name='layer')\r\n  File \"/.../lib/python3.7/site-packages/tensorflow_core/python/keras/utils/generic_utils.py\", line 303, in deserialize_keras_object\r\n    list(custom_objects.items())))\r\n  File \"/.../lib/python3.7/site-packages/tensorflow_core/python/keras/engine/sequential.py\", line 380, in from_config\r\n    model.build(build_input_shape)\r\n  File \"/.../lib/python3.7/site-packages/tensorflow_core/python/keras/engine/sequential.py\", line 260, in build\r\n    super(Sequential, self).build(input_shape)\r\n  File \"/.../lib/python3.7/site-packages/tensorflow_core/python/keras/engine/network.py\", line 682, in build\r\n    self.call(x, **kwargs)\r\n  File \"/.../lib/python3.7/site-packages/tensorflow_core/python/keras/engine/sequential.py\", line 281, in call\r\n    outputs = layer(inputs, **kwargs)\r\n  File \"/.../lib/python3.7/site-packages/tensorflow_core/python/keras/engine/base_layer.py\", line 778, in __call__\r\n    outputs = call_fn(cast_inputs, *args, **kwargs)\r\n  File \"/.../lib/python3.7/site-packages/tensorflow_core/python/autograph/impl/api.py\", line 237, in wrapper\r\n    raise e.ag_error_metadata.to_exception(e)\r\nValueError: in converted code:\r\n    /.../lib/python3.7/site-packages/tensorflow_core/python/feature_column/dense_features.py:129 call\r\n        features)\r\n    ValueError: ('We expected a dictionary here. Instead we got: ', <tf.Tensor 'Placeholder:0' shape=(None,) dtype=float32>)\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34095", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34095/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34095/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34095/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34095", "id": 519899299, "node_id": "MDU6SXNzdWU1MTk4OTkyOTk=", "number": 34095, "title": "An op called \"int\" appears in Tensorflow", "user": {"login": "chenicel", "id": 28521373, "node_id": "MDQ6VXNlcjI4NTIxMzcz", "avatar_url": "https://avatars3.githubusercontent.com/u/28521373?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chenicel", "html_url": "https://github.com/chenicel", "followers_url": "https://api.github.com/users/chenicel/followers", "following_url": "https://api.github.com/users/chenicel/following{/other_user}", "gists_url": "https://api.github.com/users/chenicel/gists{/gist_id}", "starred_url": "https://api.github.com/users/chenicel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chenicel/subscriptions", "organizations_url": "https://api.github.com/users/chenicel/orgs", "repos_url": "https://api.github.com/users/chenicel/repos", "events_url": "https://api.github.com/users/chenicel/events{/privacy}", "received_events_url": "https://api.github.com/users/chenicel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1133285679, "node_id": "MDU6TGFiZWwxMTMzMjg1Njc5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:xla", "name": "comp:xla", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-11-08T09:15:43Z", "updated_at": "2019-11-26T04:10:32Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nThe dependency \"@com_google_ortools//ortools/constraint_solver:cp\" was introduced in the tensorflow/compiler/xla/service/cpu:cpu_compiler deps\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: python 3.6.8\r\n- Bazel version (if compiling from source): 0.25.1\r\n- GCC/Compiler version (if compiling from source): gcc (Ubuntu 7.4.0-1ubuntu1~18.04.1) 7.4.0\r\n- CUDA/cuDNN version: non\r\n- GPU model and memory: non\r\n\r\n\r\n**Describe the current behavior**\r\nI am trying to re-develop xla. When I introduce \"@com_google_ortools//ortools/constraint_solver:cp\" dependency in the tensorflow/compiler/xla/service/cpu:cpu_compiler deps, the source code can be passed and passed. Pip is installed normally, but once the tensorflow interface is called, an op registration error named \"int\" is thrown.\r\nThis is the change of tensorflow/compiler/xla/service/cpu:cpu_compiler\r\n```\r\ncc_library(\r\n    name = \"cpu_compiler\",\r\n    srcs = [\"cpu_compiler.cc\"],\r\n    hdrs = [\"cpu_compiler.h\"],\r\n    deps = [\r\n        \":compiler_functor\",\r\n        \":buffer_info_util\",\r\n        \":conv_canonicalization\",\r\n        \":cpu_executable\",\r\n        \":cpu_hlo_support_checker\",\r\n        \":cpu_instruction_fusion\",\r\n        \":cpu_layout_assignment\",\r\n        \":cpu_options\",\r\n        \":disassembler\",\r\n        \":dot_op_emitter\",\r\n        \":ir_emission_utils\",\r\n        \":ir_emitter\",\r\n        \":parallel_task_assignment\",\r\n        \":simple_orc_jit\",\r\n        \"@com_google_absl//absl/memory\",\r\n        \"@com_google_absl//absl/strings\",\r\n        \":target_machine_features\",\r\n        \"@com_google_absl//absl/types:span\",\r\n        \"//tensorflow/compiler/xla/service:copy_insertion\",\r\n        \"//tensorflow/compiler/xla/service:hlo_casting_utils\",\r\n        \"//tensorflow/compiler/xla/service:dump\",\r\n        \"//tensorflow/compiler/xla/service:map_inliner\",\r\n        \"//tensorflow/compiler/xla/service:hlo_get_dimension_size_rewriter\",\r\n        \"//tensorflow/compiler/xla/service:conditional_to_select\",\r\n        \"//tensorflow/compiler/xla/service:scatter_expander\",\r\n        \"//tensorflow/compiler/xla/service:slice_sinker\",\r\n        \"//tensorflow/compiler/xla:cpu_function_runtime\",\r\n        \"//tensorflow/compiler/xla:literal\",\r\n        \"//tensorflow/compiler/xla:protobuf_util\",\r\n        \"//tensorflow/compiler/xla:status_macros\",\r\n        \"//tensorflow/compiler/xla:statusor\",\r\n        \"//tensorflow/compiler/xla:types\",\r\n        \"//tensorflow/compiler/xla:util\",\r\n        \"//tensorflow/compiler/xla:xla_data_proto\",\r\n        \"//tensorflow/compiler/xla/service:algebraic_simplifier\",\r\n        \"//tensorflow/compiler/xla/service:batch_dot_simplification\",\r\n        \"//tensorflow/compiler/xla/service:batchnorm_expander\",\r\n        \"//tensorflow/compiler/xla/service:buffer_assignment\",\r\n        \"//tensorflow/compiler/xla/service:buffer_liveness\",\r\n        \"//tensorflow/compiler/xla/service:call_inliner\",\r\n        \"//tensorflow/compiler/xla/service:cholesky_expander\",\r\n        \"//tensorflow/compiler/xla/service:conditional_simplifier\",\r\n        \"//tensorflow/compiler/xla/service:convolution_group_converter\",\r\n        \"//tensorflow/compiler/xla/service:dot_decomposer\",\r\n        \"//tensorflow/compiler/xla/service:dynamic_index_splitter\",\r\n        \"//tensorflow/compiler/xla/service:executable\",\r\n        \"//tensorflow/compiler/xla/service:flatten_call_graph\",\r\n        \"//tensorflow/compiler/xla/service:hlo\",\r\n        \"//tensorflow/compiler/xla/service:hlo_constant_folding\",\r\n        \"//tensorflow/compiler/xla/service:hlo_cse\",\r\n        \"//tensorflow/compiler/xla/service:hlo_dce\",\r\n        \"//tensorflow/compiler/xla/service:hlo_element_type_converter\",\r\n        \"//tensorflow/compiler/xla/service:hlo_ordering\",\r\n        \"//tensorflow/compiler/xla/service:hlo_pass\",\r\n        \"//tensorflow/compiler/xla/service:hlo_pass_pipeline\",\r\n        \"//tensorflow/compiler/xla/service:hlo_proto\",\r\n        \"//tensorflow/compiler/xla/service:hlo_proto_util\",\r\n        \"//tensorflow/compiler/xla/service:hlo_memory_scheduler\",\r\n        \"//tensorflow/compiler/xla/service:hlo_subcomputation_unification\",\r\n        \"//tensorflow/compiler/xla/service:hlo_verifier\",\r\n        \"//tensorflow/compiler/xla/service:indexed_array_analysis\",\r\n        \"//tensorflow/compiler/xla/service:llvm_compiler\",\r\n        \"//tensorflow/compiler/xla/service:reduce_precision_insertion\",\r\n        \"//tensorflow/compiler/xla/service:reshape_mover\",\r\n        \"//tensorflow/compiler/xla/service:rng_expander\",\r\n        \"//tensorflow/compiler/xla/service:sort_simplifier\",\r\n        \"//tensorflow/compiler/xla/service:transpose_folding\",\r\n        \"//tensorflow/compiler/xla/service:triangular_solve_expander\",\r\n        \"//tensorflow/compiler/xla/service:tuple_simplifier\",\r\n        \"//tensorflow/compiler/xla/service:while_loop_constant_sinking\",\r\n        \"//tensorflow/compiler/xla/service:while_loop_invariant_code_motion\",\r\n        \"//tensorflow/compiler/xla/service:while_loop_simplifier\",\r\n        \"//tensorflow/compiler/xla/service:zero_sized_hlo_elimination\",\r\n        \"//tensorflow/compiler/xla/service/llvm_ir:llvm_util\",  # fixdeps: keep\r\n        \"//tensorflow/core:lib\",  # fixdeps: keep\r\n        \"//tensorflow/core:stream_executor_no_cuda\",\r\n        \"@llvm//:aarch64_code_gen\",  # fixdeps: keep\r\n        \"@llvm//:aarch64_disassembler\",  # fixdeps: keep\r\n        \"@llvm//:arm_code_gen\",  # fixdeps: keep\r\n        \"@llvm//:arm_disassembler\",  # fixdeps: keep\r\n        \"@llvm//:core\",\r\n        \"@llvm//:mc\",  # fixdeps: keep\r\n        \"@llvm//:object\",\r\n        \"@llvm//:support\",\r\n        \"@llvm//:target\",  # fixdeps: keep\r\n        \"@llvm//:x86_code_gen\",  # fixdeps: keep\r\n        \"@llvm//:x86_disassembler\",  # fixdeps: keep\r\n        \"@com_google_ortools//ortools/constraint_solver:cp\",\r\n    ] + select({\r\n        \"//tensorflow:linux_ppc64le\": [\r\n            \"@llvm//:powerpc_disassembler\",\r\n            \"@llvm//:powerpc_code_gen\",\r\n        ],\r\n        \"//conditions:default\": [\r\n        ],\r\n    }),\r\n    alwayslink = True,  # Contains compiler registration\r\n)\r\n```\r\n\r\nThis is where the introduction of ortools depends on third_party/ortools/workspace.bzl.\r\n\r\n```\r\nload(\"//third_party:repo.bzl\", \"third_party_http_archive\")\r\nload(\"@bazel_tools//tools/build_defs/repo:http.bzl\", \"http_archive\")\r\nload(\"@bazel_tools//tools/build_defs/repo:git.bzl\", \"git_repository\", \"new_git_repository\")\r\n\r\ndef repo():\r\n    git_repository(\r\n        name = \"com_google_protobuf_cc\",\r\n        commit = \"0974557\",  # release v3.8.0\r\n        remote = \"https://github.com/protocolbuffers/protobuf.git\",\r\n    )\r\n\r\n    http_archive(\r\n        name = \"com_google_ortools\",\r\n        urls = [\r\n            \"http://mirror.tensorflow.org/github.com/google/or-tools/archive/v7.2.tar.gz\",\r\n            \"https://github.com/google/or-tools/archive/v7.2.tar.gz\",\r\n        ],\r\n        sha256 = \"13a4de5dba1f64e2e490394f8f63fe0a301ee55466ef65fe309ffd5100358ea8\",\r\n        strip_prefix = \"or-tools-7.2\",\r\n        build_file = \"//third_party/ortools:BUILD.bazel\",\r\n        patch_cmds = [\r\n            \"find  -name 'BUILD' -print0 | xargs -0 sed -i 's/com_google_protobuf_cc/com_google_protobuf/g'\",\r\n        ],\r\n    )\r\n\r\n    http_archive(\r\n        name = \"com_github_glog_glog\",\r\n        urls = [\r\n            \"http://mirror.tensorflow.org/github.com/google/glog/archive/v0.4.0.tar.gz\",\r\n            \"https://github.com/google/glog/archive/v0.4.0.tar.gz\",\r\n        ],\r\n        sha256 = \"f28359aeba12f30d73d9e4711ef356dc842886968112162bc73002645139c39c\",\r\n        strip_prefix = \"glog-0.4.0\",\r\n        #        build_file = \"//com_github_glog_glog:BUILD\",\r\n        patch_cmds = [\r\n            \"mkdir glog_internal && mkdir build && cd build && cmake .. && cp config.h ../glog_internal && cp config.h ../src\",\r\n            \"sed -i 's/:config_h/src\\/config.h/g' bazel/glog.bzl\",\r\n        ],\r\n    )\r\n\r\n```\r\n\r\n**This is the running environment and error information after installing the Tensorflow source code.\r\n```\r\nPython 3.6.8 (default, Oct  7 2019, 12:59:55) \r\n[GCC 8.3.0] on linux\r\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\r\n>>> import tensorflow as tf\r\n/home/ubuntu/.virtualenvs/run/lib/python3.6/site-packages/tensorflow/python/framework/dtypes.py:516: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.\r\n  _np_qint8 = np.dtype([(\"qint8\", np.int8, 1)])\r\n/home/ubuntu/.virtualenvs/run/lib/python3.6/site-packages/tensorflow/python/framework/dtypes.py:517: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.\r\n  _np_quint8 = np.dtype([(\"quint8\", np.uint8, 1)])\r\n/home/ubuntu/.virtualenvs/run/lib/python3.6/site-packages/tensorflow/python/framework/dtypes.py:518: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.\r\n  _np_qint16 = np.dtype([(\"qint16\", np.int16, 1)])\r\n/home/ubuntu/.virtualenvs/run/lib/python3.6/site-packages/tensorflow/python/framework/dtypes.py:519: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.\r\n  _np_quint16 = np.dtype([(\"quint16\", np.uint16, 1)])\r\n/home/ubuntu/.virtualenvs/run/lib/python3.6/site-packages/tensorflow/python/framework/dtypes.py:520: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.\r\n  _np_qint32 = np.dtype([(\"qint32\", np.int32, 1)])\r\n/home/ubuntu/.virtualenvs/run/lib/python3.6/site-packages/tensorflow/python/framework/dtypes.py:525: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.\r\n  np_resource = np.dtype([(\"resource\", np.ubyte, 1)])\r\n/home/ubuntu/.virtualenvs/run/lib/python3.6/site-packages/tensorboard/compat/tensorflow_stub/dtypes.py:541: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.\r\n  _np_qint8 = np.dtype([(\"qint8\", np.int8, 1)])\r\n/home/ubuntu/.virtualenvs/run/lib/python3.6/site-packages/tensorboard/compat/tensorflow_stub/dtypes.py:542: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.\r\n  _np_quint8 = np.dtype([(\"quint8\", np.uint8, 1)])\r\n/home/ubuntu/.virtualenvs/run/lib/python3.6/site-packages/tensorboard/compat/tensorflow_stub/dtypes.py:543: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.\r\n  _np_qint16 = np.dtype([(\"qint16\", np.int16, 1)])\r\n/home/ubuntu/.virtualenvs/run/lib/python3.6/site-packages/tensorboard/compat/tensorflow_stub/dtypes.py:544: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.\r\n  _np_quint16 = np.dtype([(\"quint16\", np.uint16, 1)])\r\n/home/ubuntu/.virtualenvs/run/lib/python3.6/site-packages/tensorboard/compat/tensorflow_stub/dtypes.py:545: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.\r\n  _np_qint32 = np.dtype([(\"qint32\", np.int32, 1)])\r\n/home/ubuntu/.virtualenvs/run/lib/python3.6/site-packages/tensorboard/compat/tensorflow_stub/dtypes.py:550: FutureWarning: Passing (type, 1) or '1type' as a synonym of type is deprecated; in a future version of numpy, it will be understood as (type, (1,)) / '(1,)type'.\r\n  np_resource = np.dtype([(\"resource\", np.ubyte, 1)])\r\n>>> tf.Graph\r\n<class 'tensorflow.python.framework.ops.Graph'>\r\n>>> tf.Graph()\r\n2019-11-08 09:13:06.526896: F tensorflow/core/framework/op.cc:200] Non-OK-status: RegisterAlreadyLocked(deferred_[i]) status: Invalid argument: Invalid name: int (Did you use CamelCase?); in OpDef: name: \"int\" input_arg { name: \"int\" description: \"int\" type: DT_FLOAT type_attr: \"int\" number_attr: \"int\" type_list_attr: \"int\" } input_arg { name: \"int\" description: \"int\" type: DT_FLOAT type_attr: \"int\" number_attr: \"int\" type_list_attr: \"int\" } attr { name: \"int\" type: \"int\" default_value { i: -1 } description: \"int\" has_minimum: true minimum: -1 } attr { name: \"int\" type: \"int\" default_value { s: \"\" } description: \"int\" } attr { name: \"int\" type: \"int\" description: \"int\" } attr { name: \"int\" type: \"int\" description: \"int\" } summary: \"int\" description: \"int\" is_stateful: true\r\nAborted (core dumped)\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34094", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34094/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34094/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34094/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34094", "id": 519868892, "node_id": "MDU6SXNzdWU1MTk4Njg4OTI=", "number": 34094, "title": "When i try run the  `tf.keras.layers.Bidirectional` on my windows system, it turns out CancelledError!  ", "user": {"login": "shazhongcheng", "id": 15049049, "node_id": "MDQ6VXNlcjE1MDQ5MDQ5", "avatar_url": "https://avatars1.githubusercontent.com/u/15049049?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shazhongcheng", "html_url": "https://github.com/shazhongcheng", "followers_url": "https://api.github.com/users/shazhongcheng/followers", "following_url": "https://api.github.com/users/shazhongcheng/following{/other_user}", "gists_url": "https://api.github.com/users/shazhongcheng/gists{/gist_id}", "starred_url": "https://api.github.com/users/shazhongcheng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shazhongcheng/subscriptions", "organizations_url": "https://api.github.com/users/shazhongcheng/orgs", "repos_url": "https://api.github.com/users/shazhongcheng/repos", "events_url": "https://api.github.com/users/shazhongcheng/events{/privacy}", "received_events_url": "https://api.github.com/users/shazhongcheng/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "houtoms", "id": 4001424, "node_id": "MDQ6VXNlcjQwMDE0MjQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/4001424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/houtoms", "html_url": "https://github.com/houtoms", "followers_url": "https://api.github.com/users/houtoms/followers", "following_url": "https://api.github.com/users/houtoms/following{/other_user}", "gists_url": "https://api.github.com/users/houtoms/gists{/gist_id}", "starred_url": "https://api.github.com/users/houtoms/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/houtoms/subscriptions", "organizations_url": "https://api.github.com/users/houtoms/orgs", "repos_url": "https://api.github.com/users/houtoms/repos", "events_url": "https://api.github.com/users/houtoms/events{/privacy}", "received_events_url": "https://api.github.com/users/houtoms/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "houtoms", "id": 4001424, "node_id": "MDQ6VXNlcjQwMDE0MjQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/4001424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/houtoms", "html_url": "https://github.com/houtoms", "followers_url": "https://api.github.com/users/houtoms/followers", "following_url": "https://api.github.com/users/houtoms/following{/other_user}", "gists_url": "https://api.github.com/users/houtoms/gists{/gist_id}", "starred_url": "https://api.github.com/users/houtoms/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/houtoms/subscriptions", "organizations_url": "https://api.github.com/users/houtoms/orgs", "repos_url": "https://api.github.com/users/houtoms/repos", "events_url": "https://api.github.com/users/houtoms/events{/privacy}", "received_events_url": "https://api.github.com/users/houtoms/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 17, "created_at": "2019-11-08T08:01:56Z", "updated_at": "2020-02-25T21:52:24Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n    * no\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n    * windows 10 1903\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):\r\n    * source \r\n- TensorFlow version (use command below):\r\n    * tensorflow-gpu 2.0\r\n- Python version:\r\n    * Python 3.6.2\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n    * cuda10\r\n- GPU model and memory:\r\n    * gtx1060 6G\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\nthis is my model, from the [tutorials](https://tensorflow.google.cn/tutorials/text/text_classification_rnn?hl=en):\r\n```python\r\nembedding_dim=16\r\n\r\nmodel = keras.Sequential([\r\n    layers.Embedding(encoder.vocab_size, embedding_dim),\r\n    layers.Bidirectional(tf.keras.layers.LSTM(32)),\r\n    layers.Dense(1, activation='sigmoid')\r\n])\r\n```\r\n\r\nbut it train error on my computer:\r\n```python\r\n---------------------------------------------------------------------------\r\nCancelledError                            Traceback (most recent call last)\r\n<ipython-input-11-35c641747dc0> in <module>\r\n      6     train_batches,\r\n      7     epochs=10,\r\n----> 8     validation_data=test_batches, validation_steps=20,verbose=2)\r\n\r\nc:\\users\\sha\\anaconda3\\envs\\tensorflow2\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training.py in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_freq, max_queue_size, workers, use_multiprocessing, **kwargs)\r\n    726         max_queue_size=max_queue_size,\r\n    727         workers=workers,\r\n--> 728         use_multiprocessing=use_multiprocessing)\r\n    729 \r\n    730   def evaluate(self,\r\n\r\nc:\\users\\sha\\anaconda3\\envs\\tensorflow2\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_v2.py in fit(self, model, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_freq, **kwargs)\r\n    322                 mode=ModeKeys.TRAIN,\r\n    323                 training_context=training_context,\r\n--> 324                 total_epochs=epochs)\r\n    325             cbks.make_logs(model, epoch_logs, training_result, ModeKeys.TRAIN)\r\n    326 \r\n\r\nc:\\users\\sha\\anaconda3\\envs\\tensorflow2\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_v2.py in run_one_epoch(model, iterator, execution_function, dataset_size, batch_size, strategy, steps_per_epoch, num_samples, mode, training_context, total_epochs)\r\n    121         step=step, mode=mode, size=current_batch_size) as batch_logs:\r\n    122       try:\r\n--> 123         batch_outs = execution_function(iterator)\r\n    124       except (StopIteration, errors.OutOfRangeError):\r\n    125         # TODO(kaftan): File bug about tf function and errors.OutOfRangeError?\r\n\r\nc:\\users\\sha\\anaconda3\\envs\\tensorflow2\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_v2_utils.py in execution_function(input_fn)\r\n     84     # `numpy` translates Tensors to values in Eager mode.\r\n     85     return nest.map_structure(_non_none_constant_value,\r\n---> 86                               distributed_function(input_fn))\r\n     87 \r\n     88   return execution_function\r\n\r\nc:\\users\\sha\\anaconda3\\envs\\tensorflow2\\lib\\site-packages\\tensorflow_core\\python\\eager\\def_function.py in __call__(self, *args, **kwds)\r\n    455 \r\n    456     tracing_count = self._get_tracing_count()\r\n--> 457     result = self._call(*args, **kwds)\r\n    458     if tracing_count == self._get_tracing_count():\r\n    459       self._call_counter.called_without_tracing()\r\n\r\nc:\\users\\sha\\anaconda3\\envs\\tensorflow2\\lib\\site-packages\\tensorflow_core\\python\\eager\\def_function.py in _call(self, *args, **kwds)\r\n    485       # In this case we have created variables on the first call, so we run the\r\n    486       # defunned version which is guaranteed to never create variables.\r\n--> 487       return self._stateless_fn(*args, **kwds)  # pylint: disable=not-callable\r\n    488     elif self._stateful_fn is not None:\r\n    489       # Release the lock early so that multiple threads can perform the call\r\n\r\nc:\\users\\sha\\anaconda3\\envs\\tensorflow2\\lib\\site-packages\\tensorflow_core\\python\\eager\\function.py in __call__(self, *args, **kwargs)\r\n   1821     \"\"\"Calls a graph function specialized to the inputs.\"\"\"\r\n   1822     graph_function, args, kwargs = self._maybe_define_function(args, kwargs)\r\n-> 1823     return graph_function._filtered_call(args, kwargs)  # pylint: disable=protected-access\r\n   1824 \r\n   1825   @property\r\n\r\nc:\\users\\sha\\anaconda3\\envs\\tensorflow2\\lib\\site-packages\\tensorflow_core\\python\\eager\\function.py in _filtered_call(self, args, kwargs)\r\n   1139          if isinstance(t, (ops.Tensor,\r\n   1140                            resource_variable_ops.BaseResourceVariable))),\r\n-> 1141         self.captured_inputs)\r\n   1142 \r\n   1143   def _call_flat(self, args, captured_inputs, cancellation_manager=None):\r\n\r\nc:\\users\\sha\\anaconda3\\envs\\tensorflow2\\lib\\site-packages\\tensorflow_core\\python\\eager\\function.py in _call_flat(self, args, captured_inputs, cancellation_manager)\r\n   1222     if executing_eagerly:\r\n   1223       flat_outputs = forward_function.call(\r\n-> 1224           ctx, args, cancellation_manager=cancellation_manager)\r\n   1225     else:\r\n   1226       gradient_name = self._delayed_rewrite_functions.register()\r\n\r\nc:\\users\\sha\\anaconda3\\envs\\tensorflow2\\lib\\site-packages\\tensorflow_core\\python\\eager\\function.py in call(self, ctx, args, cancellation_manager)\r\n    509               inputs=args,\r\n    510               attrs=(\"executor_type\", executor_type, \"config_proto\", config),\r\n--> 511               ctx=ctx)\r\n    512         else:\r\n    513           outputs = execute.execute_with_cancellation(\r\n\r\nc:\\users\\sha\\anaconda3\\envs\\tensorflow2\\lib\\site-packages\\tensorflow_core\\python\\eager\\execute.py in quick_execute(op_name, num_outputs, inputs, attrs, ctx, name)\r\n     65     else:\r\n     66       message = e.message\r\n---> 67     six.raise_from(core._status_to_exception(e.code, message), None)\r\n     68   except TypeError as e:\r\n     69     keras_symbolic_tensors = [\r\n\r\nc:\\users\\sha\\anaconda3\\envs\\tensorflow2\\lib\\site-packages\\six.py in raise_from(value, from_value)\r\n\r\nCancelledError:  [_Derived_]RecvAsync is cancelled.\r\n\t [[{{node Adam/Adam/update/AssignSubVariableOp/_41}}]]\r\n\t [[Reshape_11/_38]] [Op:__inference_distributed_function_15971]\r\n\r\nFunction call stack:\r\ndistributed_function\r\n\r\n```\r\n**Describe the expected behavior**\r\nIt should train fluently, and i try on Google cloab, it try fluently, but it train error on my computer. \r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\nthe code\r\n```python\r\nfrom __future__ import absolute_import, division, print_function, unicode_literals\r\n\r\nimport tensorflow as tf\r\nfrom tensorflow import keras\r\nfrom tensorflow.keras import layers\r\n\r\nimport tensorflow_datasets as tfds\r\n# tfds.disable_progress_bar()\r\n(train_data, test_data), info = tfds.load(\r\n    'imdb_reviews/subwords8k', \r\n    split = (tfds.Split.TRAIN, tfds.Split.TEST), \r\n    with_info=True, as_supervised=True)\r\nencoder = info.features['text'].encoder\r\npadded_shapes = ([None],())\r\ntrain_batches = train_data.shuffle(1000).padded_batch(10, padded_shapes = padded_shapes)\r\ntest_batches = test_data.shuffle(1000).padded_batch(10, padded_shapes = padded_shapes)\r\n\r\nembedding_dim=16\r\n\r\nmodel = keras.Sequential([\r\n    layers.Embedding(encoder.vocab_size, embedding_dim,mask_zero=True),\r\n    layers.Bidirectional(tf.keras.layers.LSTM(32)),\r\n    layers.Dense(1, activation='sigmoid')\r\n])\r\n\r\nmodel.compile(optimizer='adam',\r\n              loss='binary_crossentropy',\r\n              metrics=['accuracy'])\r\n\r\nhistory = model.fit(\r\n    train_batches,\r\n    epochs=10,\r\n    validation_data=test_batches, validation_steps=20,verbose=2)\r\n```\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nthe error information is showed above \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34093", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34093/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34093/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34093/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34093", "id": 519845995, "node_id": "MDU6SXNzdWU1MTk4NDU5OTU=", "number": 34093, "title": "[TF2.0] GradientTape.gradient raise SystemError when calling embedding_column layer multiple times with tf.function", "user": {"login": "GoSz", "id": 15027728, "node_id": "MDQ6VXNlcjE1MDI3NzI4", "avatar_url": "https://avatars2.githubusercontent.com/u/15027728?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GoSz", "html_url": "https://github.com/GoSz", "followers_url": "https://api.github.com/users/GoSz/followers", "following_url": "https://api.github.com/users/GoSz/following{/other_user}", "gists_url": "https://api.github.com/users/GoSz/gists{/gist_id}", "starred_url": "https://api.github.com/users/GoSz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GoSz/subscriptions", "organizations_url": "https://api.github.com/users/GoSz/orgs", "repos_url": "https://api.github.com/users/GoSz/repos", "events_url": "https://api.github.com/users/GoSz/events{/privacy}", "received_events_url": "https://api.github.com/users/GoSz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1478826728, "node_id": "MDU6TGFiZWwxNDc4ODI2NzI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:core", "name": "comp:core", "color": "024391", "default": false, "description": ""}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jaingaurav", "id": 84372, "node_id": "MDQ6VXNlcjg0Mzcy", "avatar_url": "https://avatars1.githubusercontent.com/u/84372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaingaurav", "html_url": "https://github.com/jaingaurav", "followers_url": "https://api.github.com/users/jaingaurav/followers", "following_url": "https://api.github.com/users/jaingaurav/following{/other_user}", "gists_url": "https://api.github.com/users/jaingaurav/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaingaurav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaingaurav/subscriptions", "organizations_url": "https://api.github.com/users/jaingaurav/orgs", "repos_url": "https://api.github.com/users/jaingaurav/repos", "events_url": "https://api.github.com/users/jaingaurav/events{/privacy}", "received_events_url": "https://api.github.com/users/jaingaurav/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jaingaurav", "id": 84372, "node_id": "MDQ6VXNlcjg0Mzcy", "avatar_url": "https://avatars1.githubusercontent.com/u/84372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaingaurav", "html_url": "https://github.com/jaingaurav", "followers_url": "https://api.github.com/users/jaingaurav/followers", "following_url": "https://api.github.com/users/jaingaurav/following{/other_user}", "gists_url": "https://api.github.com/users/jaingaurav/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaingaurav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaingaurav/subscriptions", "organizations_url": "https://api.github.com/users/jaingaurav/orgs", "repos_url": "https://api.github.com/users/jaingaurav/repos", "events_url": "https://api.github.com/users/jaingaurav/events{/privacy}", "received_events_url": "https://api.github.com/users/jaingaurav/received_events", "type": "User", "site_admin": false}, {"login": "gadagashwini", "id": 48476109, "node_id": "MDQ6VXNlcjQ4NDc2MTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/48476109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadagashwini", "html_url": "https://github.com/gadagashwini", "followers_url": "https://api.github.com/users/gadagashwini/followers", "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}", "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions", "organizations_url": "https://api.github.com/users/gadagashwini/orgs", "repos_url": "https://api.github.com/users/gadagashwini/repos", "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}", "received_events_url": "https://api.github.com/users/gadagashwini/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-11-08T06:56:15Z", "updated_at": "2020-03-19T07:15:35Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): CentOS Linux release 7.4\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): pip install tf-nightly-gpu-2.0-preview\r\n- TensorFlow version (use command below): v1.12.1-14959-g9663619 2.0.0-dev20191002\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: cudatoolkit=10.0.130  cudnn=7.6.4\r\n- GPU model and memory:\r\n\r\n**Describe the current behavior**\r\nWhen calling a ```tf.keras.layers.DenseFeatures``` layer created from ```tf.feature_column.embedding_column``` multiple times and calculate the gradients with ```GradientTape.gradient```, using ```@tf.function``` may cause ```GradientTape.gradient``` raise ```SystemError```, depends on the number of times we call the same layer( error raise if we call it more than 4 times ).\r\n\r\nWithout ```@tf.function```, everything is fine. \r\n\r\n**Describe the expected behavior**\r\nThe gradients should be calculated well regardless of how many times we call the layer within a ```@tf.function```.\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport tensorflow as tf\r\n\r\n\r\nft_col_numeric = tf.feature_column.numeric_column(\"test_input\")\r\nft_col_buk     = tf.feature_column.bucketized_column(ft_col_numeric, boundaries=[1, 3, 5, 7])\r\nft_col_embed   = tf.feature_column.embedding_column(ft_col_buk, dimension=4)\r\nft_embed_layer = tf.keras.layers.DenseFeatures(ft_col_embed)\r\n\r\n# crash when the call number is greater than 4\r\nLAYER_CALL_NUM = 5\r\n\r\n@tf.function\r\ndef run(inputs):\r\n    with tf.GradientTape() as tape:\r\n        res_list = []\r\n        for i in range(LAYER_CALL_NUM):\r\n            x = ft_embed_layer(inputs)\r\n            res_list.append(x)\r\n        y = tf.reduce_sum(sum(res_list))\r\n    weights = ft_embed_layer.trainable_variables\r\n    gradients = tape.gradient(y, weights)\r\n    return gradients\r\n\r\ntest_input = tf.constant([0, 2, 4, 6, 8])\r\ninputs = { \"test_input\" : test_input }\r\nrun(inputs)\r\n```\r\n\r\n**Other info / logs**\r\n```\r\nTraceback (most recent call last):\r\n  File \"test.py\", line 26, in <module>\r\n    run(inputs)\r\n  File \"/home/user/anaconda3/envs/tf2_nt_last/lib/python3.6/site-packages/tensorflow_core/python/eager/def_function.py\", line 553, in __call__\r\n    result = self._call(*args, **kwds)\r\n  File \"/home/user/anaconda3/envs/tf2_nt_last/lib/python3.6/site-packages/tensorflow_core/python/eager/def_function.py\", line 599, in _call\r\n    self._initialize(args, kwds, add_initializers_to=initializers)\r\n  File \"/home/user/anaconda3/envs/tf2_nt_last/lib/python3.6/site-packages/tensorflow_core/python/eager/def_function.py\", line 492, in _initialize\r\n    *args, **kwds))\r\n  File \"/home/user/anaconda3/envs/tf2_nt_last/lib/python3.6/site-packages/tensorflow_core/python/eager/function.py\", line 2320, in _get_concrete_function_internal_garbage_collected\r\n    graph_function, _, _ = self._maybe_define_function(args, kwargs)\r\n  File \"/home/user/anaconda3/envs/tf2_nt_last/lib/python3.6/site-packages/tensorflow_core/python/eager/function.py\", line 2628, in _maybe_define_function\r\n    graph_function = self._create_graph_function(args, kwargs)\r\n  File \"/home/user/anaconda3/envs/tf2_nt_last/lib/python3.6/site-packages/tensorflow_core/python/eager/function.py\", line 2517, in _create_graph_function\r\n    capture_by_value=self._capture_by_value),\r\n  File \"/home/user/anaconda3/envs/tf2_nt_last/lib/python3.6/site-packages/tensorflow_core/python/framework/func_graph.py\", line 943, in func_graph_from_py_func\r\n    func_outputs = python_func(*func_args, **func_kwargs)\r\n  File \"/home/user/anaconda3/envs/tf2_nt_last/lib/python3.6/site-packages/tensorflow_core/python/eager/def_function.py\", line 434, in wrapped_fn\r\n    return weak_wrapped_fn().__wrapped__(*args, **kwds)\r\n  File \"/home/user/anaconda3/envs/tf2_nt_last/lib/python3.6/site-packages/tensorflow_core/python/framework/func_graph.py\", line 933, in wrapper\r\n    raise e.ag_error_metadata.to_exception(e)\r\ntensorflow.python.autograph.impl.api.StagingError: in converted code:\r\n\r\n    test.py:21 run  *\r\n        gradients = tape.gradient(y, weights)\r\n    /home/user/anaconda3/envs/tf2_nt_last/lib/python3.6/site-packages/tensorflow_core/python/eager/backprop.py:1023 gradient\r\n        unconnected_gradients=unconnected_gradients)\r\n    /home/user/anaconda3/envs/tf2_nt_last/lib/python3.6/site-packages/tensorflow_core/python/eager/imperative_grad.py:76 imperative_grad\r\n        compat.as_str(unconnected_gradients.value))\r\n\r\n    SystemError: <built-in function TFE_Py_TapeGradient> returned a result with an error set\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34087", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34087/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34087/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34087/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34087", "id": 519629864, "node_id": "MDU6SXNzdWU1MTk2Mjk4NjQ=", "number": 34087, "title": "[TF 2.0] Add batched gradient function to GradientTape", "user": {"login": "n-gao", "id": 9084670, "node_id": "MDQ6VXNlcjkwODQ2NzA=", "avatar_url": "https://avatars2.githubusercontent.com/u/9084670?v=4", "gravatar_id": "", "url": "https://api.github.com/users/n-gao", "html_url": "https://github.com/n-gao", "followers_url": "https://api.github.com/users/n-gao/followers", "following_url": "https://api.github.com/users/n-gao/following{/other_user}", "gists_url": "https://api.github.com/users/n-gao/gists{/gist_id}", "starred_url": "https://api.github.com/users/n-gao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/n-gao/subscriptions", "organizations_url": "https://api.github.com/users/n-gao/orgs", "repos_url": "https://api.github.com/users/n-gao/repos", "events_url": "https://api.github.com/users/n-gao/events{/privacy}", "received_events_url": "https://api.github.com/users/n-gao/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-11-08T02:58:17Z", "updated_at": "2019-11-15T23:13:36Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- TensorFlow version (you are using): 2.0.0\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nThere should be a feature for batched gradient computation in GradientTape similar to batched_jacobian.\r\n\r\n**Will this change the current api? How?**\r\n`GradientTape.batched_gradient` would exist.\r\n\r\n**Who will benefit with this feature?**\r\nIf someone wants to compute the second derivative of an output w.r.t. the input. Here is an example:\r\nLet's assume `x=(x_1, x_2, x_3)` and we have some function (network) which gives us a scalar output for every x `f(x)=y`. Computing the second derivative of the `f(x)` w.r.t. `x_i` `(d^2f(x)/dx_i^2)` involves either a gradient computation + jacobian computation or a gradient computation + loop:\r\n1. solution with jacobian:\r\n```\r\nwith tf.GradientTape(True) as g:\r\n  g.watch(x)\r\n  with tf.GradientTape() as gg:\r\n    gg.watch(x)\r\n    y = f(x)\r\n  dy_dx = gg.gradient(y, x)\r\nd2y_dx2 = g.jacobian(y, x) # here some filtering is requires to get only the diagonal elements\r\n```\r\n2. solution with loop of gradients:\r\n```\r\nwith tf.GradientTape(True) as g:\r\n  x_i = [x[i] for i in range(len(x))]\r\n  [g.watch(_x) for _x in x_i]\r\n  x = tf.stack(x_i, 0)\r\n  with tf.GradientTape() as gg:\r\n    gg.watch(x)\r\n    y = f(x)\r\n  dy_dx = gg.gradient(y, x)\r\n  dy_dx_i = [dy_dx[i] for i in range(len(dy_dx))]\r\nd2y_dx2 = tf.stack([g.gradient(grad, _x) for grad, _x in zip(dy_dx_i, x_i)])\r\n```\r\n\r\nThe first solution is expensive due to the jacobian computation and for the second one, one has to split up the tensor before and after and loop over gradient computation."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34075", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34075/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34075/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34075/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34075", "id": 519372398, "node_id": "MDU6SXNzdWU1MTkzNzIzOTg=", "number": 34075, "title": "Building TensorFlow 2 with bazel fails", "user": {"login": "ShaharATterrain", "id": 52371777, "node_id": "MDQ6VXNlcjUyMzcxNzc3", "avatar_url": "https://avatars3.githubusercontent.com/u/52371777?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ShaharATterrain", "html_url": "https://github.com/ShaharATterrain", "followers_url": "https://api.github.com/users/ShaharATterrain/followers", "following_url": "https://api.github.com/users/ShaharATterrain/following{/other_user}", "gists_url": "https://api.github.com/users/ShaharATterrain/gists{/gist_id}", "starred_url": "https://api.github.com/users/ShaharATterrain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ShaharATterrain/subscriptions", "organizations_url": "https://api.github.com/users/ShaharATterrain/orgs", "repos_url": "https://api.github.com/users/ShaharATterrain/repos", "events_url": "https://api.github.com/users/ShaharATterrain/events{/privacy}", "received_events_url": "https://api.github.com/users/ShaharATterrain/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-11-07T16:24:07Z", "updated_at": "2019-11-12T09:17:53Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (Windows 10):\r\n- TensorFlow installed from (source):\r\n- TensorFlow version: 2.0 (master branch on 07 Nov 2019, to be exact)\r\n- Python version: 3.7\r\n- Installed using virtualenv? pip? conda?: No\r\n- Bazel version (if compiling from source): 0.29.1\r\n- GCC/Compiler version (if compiling from source):  8.1.0\r\n- CUDA/cuDNN version: 10.0/7\r\n- GPU model and memory: GeForce GTX 1050 15.88 GB RAM\r\n\r\n\r\n\r\nTrying to compile TF 2.0 with Bazel, ends up in a failure.\r\nI am struggling this isssue for quite a while, looked it up online, but havn't found any solution. Several running configuration (with or w/o Cuda, with or w/o creating zip file, etc) eventually leading to the same failure.\r\n\r\nMy actions:\r\n1. git checkout master (in the TF git repo)\r\n2. bazel clean\r\n3. configure (all defaults except for python path and Cuda)\r\n4. bazel build --config=cuda --define=no_tensorflow_py_deps=true tensorflow:tensorflow_cc.dll\r\n\r\nFailure message:\r\nERROR: C:/users/shahar/git/tensorflow/tensorflow/core/BUILD:2537:1: Executing genrule //tensorflow/core:version_info_gen failed (Exit 5)\r\nLAUNCHER ERROR: Cannot launch process: \"C:/Program Files/WindowsApps/PythonSoftwareFoundation.Python.3.7_3.7.1520.0_x64__qbz5n2kfra8p0/python.exe\" C:\\users\\shahar\\_bazel_shahar\\duchsbgv\\execroot\\org_tensorflow\\bazel-out\\x64_windows-opt\\bin\\tensorflow\\tools\\git\\gen_git_source.zip --generate external/local_config_git/gen/spec.json external/local_config_git/gen/head external/local_config_git/gen/branch_ref bazel-out/x64_windows-opt/bin/tensorflow/core/util/version_info.cc --git_tag_override=\r\nReason: (error: 5): Access is denied.\r\n\r\nWhat am i doing wrong?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34074", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34074/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34074/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34074/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34074", "id": 519359702, "node_id": "MDU6SXNzdWU1MTkzNTk3MDI=", "number": 34074, "title": "build failed from source on windows 10", "user": {"login": "YujieLu", "id": 47878155, "node_id": "MDQ6VXNlcjQ3ODc4MTU1", "avatar_url": "https://avatars3.githubusercontent.com/u/47878155?v=4", "gravatar_id": "", "url": "https://api.github.com/users/YujieLu", "html_url": "https://github.com/YujieLu", "followers_url": "https://api.github.com/users/YujieLu/followers", "following_url": "https://api.github.com/users/YujieLu/following{/other_user}", "gists_url": "https://api.github.com/users/YujieLu/gists{/gist_id}", "starred_url": "https://api.github.com/users/YujieLu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/YujieLu/subscriptions", "organizations_url": "https://api.github.com/users/YujieLu/orgs", "repos_url": "https://api.github.com/users/YujieLu/repos", "events_url": "https://api.github.com/users/YujieLu/events{/privacy}", "received_events_url": "https://api.github.com/users/YujieLu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-11-07T16:03:34Z", "updated_at": "2019-11-20T17:42:34Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nWindows 10\r\n\r\n- TensorFlow version:\r\n1.14\r\n- Python version:\r\n3.5.4\r\n- Bazel version (if compiling from source):\r\n0.24.1\r\n\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\nCUDA10.0 & cuDNN7\r\n- GPU model and memory:\r\nGeForce GTX1050Ti\r\nCPU:\r\ni7-7700HQ\r\n\r\n- Command\r\nI've tried \r\n```\r\nbazel build --config=opt //tensorflow/tools/pip_package:build_pip_package\r\n```\r\nand \r\n```\r\nbazel build --config=opt --config=cuda --define=no_tensorflow_py_deps=true //tensorflow/tools/pip_package:build_pip_package\r\n```\r\nnone of them works.\r\n\r\n**Describe the problem**\r\n\r\nI just follow the instructions of [https://www.tensorflow.org/install/source_windows](url), but it doesn't work.\r\n\r\n**Error Log**\r\n```\r\nERROR: D:/libs/tensorflow/tensorflow/BUILD:745:1: Executing genrule //tensorflow:tf_python_api_gen_v1 failed (Exit 127): bash.exe failed: error executing command\r\n  cd C:/users/donke/_bazel_donkey/4aoyooqm/execroot/org_tensorflow\r\n  SET PATH=C:\\msys64\\usr\\bin;C:\\msys64\\bin;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.0\\bin;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.0\\libnvvp;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\Users\\donke\\.dnx\\bin;C:\\Program Files\\Microsoft DNX\\Dnvm\\;C:\\Program Files\\Microsoft SQL Server\\130\\Tools\\Binn\\;D:\\dev\\bin;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\Program Files\\CMake\\bin;C:\\Program Files\\MATLAB\\R2016a\\runtime\\win64;C:\\Program Files\\MATLAB\\R2016a\\bin;C:\\Program Files\\MATLAB\\R2016a\\polyspace\\bin;D:\\dev\\x86\\vc14\\bin;C:\\Program Files\\nodejs\\;D:\\mysql-8.0.16-winx64\\bin;C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v10.0\\extras\\CUPTI\\libx64;C:\\Program Files\\Git\\cmd;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\;C:\\WINDOWS\\System32\\OpenSSH\\;C:\\msys64\\usr\\bin;C:\\Users\\donke\\AppData\\Local\\Programs\\Python\\Python35;C:\\Users\\donke\\AppData\\Local\\Programs\\Python\\Python35\\Scripts;C:\\Program Files\\dotnet\\;C:\\Users\\donke\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\donke\\AppData\\Roaming\\npm;C:\\msys64\\usr\\bin;\r\n    SET PYTHON_BIN_PATH=C:/Users/donke/AppData/Local/Programs/Python/Python35/python.exe\r\n    SET PYTHON_LIB_PATH=C:/Users/donke/AppData/Local/Programs/Python/Python35/lib/site-packages\r\n    SET TF_CONFIGURE_IOS=0\r\n    SET TF_DOWNLOAD_CLANG=0\r\n    SET TF_NEED_CUDA=0\r\n    SET TF_NEED_OPENCL_SYCL=0\r\n    SET TF_NEED_ROCM=0\r\n  C:/msys64/usr/bin/bash.exe bazel-out/x64_windows-opt/genfiles/tensorflow/tf_python_api_gen_v1.genrule_script.sh\r\nExecution platform: @bazel_tools//platforms:host_platform\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nINFO: Elapsed time: 18.207s, Critical Path: 1.84s\r\nINFO: 1 process: 1 local.\r\nFAILED: Build did NOT complete successfully\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34066", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34066/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34066/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34066/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34066", "id": 519119112, "node_id": "MDU6SXNzdWU1MTkxMTkxMTI=", "number": 34066, "title": "TF2.0 distributed training fails after adding an embedding layer", "user": {"login": "psitronic", "id": 32975200, "node_id": "MDQ6VXNlcjMyOTc1MjAw", "avatar_url": "https://avatars3.githubusercontent.com/u/32975200?v=4", "gravatar_id": "", "url": "https://api.github.com/users/psitronic", "html_url": "https://github.com/psitronic", "followers_url": "https://api.github.com/users/psitronic/followers", "following_url": "https://api.github.com/users/psitronic/following{/other_user}", "gists_url": "https://api.github.com/users/psitronic/gists{/gist_id}", "starred_url": "https://api.github.com/users/psitronic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/psitronic/subscriptions", "organizations_url": "https://api.github.com/users/psitronic/orgs", "repos_url": "https://api.github.com/users/psitronic/repos", "events_url": "https://api.github.com/users/psitronic/events{/privacy}", "received_events_url": "https://api.github.com/users/psitronic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-11-07T08:38:07Z", "updated_at": "2019-11-11T15:21:06Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): somewhat\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):Linux Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v2.0.0-rc2-26-g64c3d38 2.0.0\r\n- Python version: 3.7.4\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n**Describe the current behavior**\r\nTry to train with `MultiWorkerMirroredStrategy` a simple model with and without an Embedding layer. In the former case the distribute training fails (see below). The following code is executed on two workers with `TF_CONFIG={\"cluster\": {\"worker\": [\"localhost:65535\",\"localhost:65532\"]}, \"task\": {\"index\": 0, \"type\": \"worker\"}}` and `TF_CONFIG={\"cluster\": {\"worker\": [\"localhost:65535\",\"localhost:65532\"]}, \"task\": {\"index\": 1, \"type\": \"worker\"}}`, respectively.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\nfrom tensorflow.keras.optimizers import Adam\r\nfrom tensorflow.keras import losses\r\nimport numpy as np\r\n\r\nbatch_size = 32\r\n\r\nstrategy = tf.distribute.experimental.MultiWorkerMirroredStrategy()\r\n\r\nNUM_WORKERS = strategy.num_replicas_in_sync\r\nGLOBAL_BATCH_SIZE = batch_size * NUM_WORKERS\r\nN_CAT = 47\r\n\r\ndef some_func(*args: tf.Tensor):\r\n    tensor_dict_x, tensor_dict_y = {}, {}\r\n\r\n    for index in range(1):\r\n        tensor_dict_x[\r\n            f\"input_{index+1}\"\r\n        ] = tf.expand_dims(args[index], axis=-1)\r\n        tensor_dict_y[\r\n            f\"dense\"\r\n        ] = tf.expand_dims(args[index], axis=-1)\r\n\r\n    return tensor_dict_x, tensor_dict_y\r\n\r\ndef read_data():\r\n    train_data = np.random.randint(1,N_CAT, size=9000)\r\n    val_data = np.random.randint(1,N_CAT, size=999)\r\n\r\n    dataset_train = (tf.data.Dataset.from_tensor_slices(train_data)\r\n                     .prefetch(-1)\r\n                     .map(map_func=some_func)\r\n                     .batch(batch_size=GLOBAL_BATCH_SIZE)\r\n                     .shuffle(1000)\r\n                     .repeat())\r\n    dataset_val = (tf.data.Dataset.from_tensor_slices(val_data)\r\n                   .prefetch(-1)\r\n                   .map(map_func=some_func)\r\n                   .batch(batch_size=GLOBAL_BATCH_SIZE)\r\n                   .shuffle(1000)\r\n                   .repeat())\r\n\r\n    return dataset_train, dataset_val\r\n\r\nwith strategy.scope():\r\n    optimizer = Adam(lr=0.1)\r\n    loss = losses.sparse_categorical_crossentropy\r\n    model = build_and_compile_model(optimizer, loss)\r\n\r\ndataset_train, dataset_val = read_data()\r\nmodel.fit(x=dataset_train,\r\n          epochs=5,\r\n          steps_per_epoch=9000//batch_size,\r\n          validation_data=dataset_val,\r\n          validation_steps=999//batch_size,\r\n)\r\n```\r\n\r\nwhere `build_and_compile_model`:\r\n```\r\ndef build_and_compile_model(optimizer, loss):\r\n    my_input = tf.keras.layers.Input(shape=(1,))\r\n    my_dense = tf.keras.layers.Dense(N_CAT)(my_input)\r\n\r\n    model = tf.keras.Model(my_input, my_dense)\r\n\r\n    model.compile(optimizer=optimizer,loss=loss)\r\n\r\n    return model\r\n```\r\nThe above case works fine with the output:\r\n```\r\n2019-11-07 09:23:57.387629: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-11-07 09:23:57.410325: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2208000000 Hz\r\n2019-11-07 09:23:57.411228: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x562e2c78c6a0 executing computations on platform Host. Devices:\r\n2019-11-07 09:23:57.411241: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): Host, Default Version\r\n2019-11-07 09:23:57.413306: I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:258] Initialize GrpcChannelCache for job worker -> {0 -> localhost:65535, 1 -> localhost:65532}\r\n2019-11-07 09:23:57.414734: I tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:365] Started server with target: grpc://localhost:65535\r\nWARNING:tensorflow:`eval_fn` is not passed in. The `worker_fn` will be used if an \"evaluator\" task exists in the cluster.\r\nWARNING:tensorflow:`eval_strategy` is not passed in. No distribution strategy will be used for evaluation.\r\nWARNING:tensorflow:ModelCheckpoint callback is not provided. Workers will need to restart training if any fails.\r\n2019-11-07 09:24:09.204390: W tensorflow/core/grappler/optimizers/data/auto_shard.cc:400] Cannot find shardable dataset, adding a shard node at the end of the dataset instead. This may have performance implications.\r\nTrain for 281 steps, validate for 31 steps\r\nEpoch 1/5\r\n2019-11-07 09:24:09.208710: W tensorflow/core/grappler/optimizers/data/auto_shard.cc:400] Cannot find shardable dataset, adding a shard node at the end of the dataset instead. This may have performance implications.\r\n281/281 [==============================] - 4s 13ms/step - loss: 15.9838 - val_loss: 16.1050\r\nEpoch 2/5\r\n281/281 [==============================] - 1s 3ms/step - loss: 16.0496 - val_loss: 16.1015\r\nEpoch 3/5\r\n281/281 [==============================] - 1s 3ms/step - loss: 16.0210 - val_loss: 16.1007\r\nEpoch 4/5\r\n281/281 [==============================] - 1s 3ms/step - loss: 16.0517 - val_loss: 16.0995\r\nEpoch 5/5\r\n281/281 [==============================] - 1s 3ms/step - loss: 16.0147 - val_loss: 16.0992\r\n2019-11-07 09:24:16.090800: W tensorflow/core/common_runtime/eager/context.cc:290] Unable to destroy server_ object, so releasing instead. Servers don't support clean shutdown.\r\n\r\nProcess finished with exit code 0\r\n```\r\n\r\nHowever, adding just one `Embedding` layer so that `build_and_compile_model` now is:\r\n```\r\ndef build_and_compile_model(optimizer, loss):\r\n\r\n    my_input = tf.keras.layers.Input(shape=(1,))\r\n    emb_layer = tf.keras.layers.Embedding(N_CAT,5)\r\n    emb_inp = emb_layer(my_input)\r\n    my_dense = tf.keras.layers.Dense(N_CAT)(emb_inp)\r\n\r\n    model = tf.keras.Model(my_input, my_dense)\r\n\r\n    model.compile(optimizer=optimizer,loss=loss)\r\n\r\n    return model\r\n```\r\n\r\nleads to the error:\r\n```\r\n2019-11-07 09:26:45.812362: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-11-07 09:26:45.834388: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2208000000 Hz\r\n2019-11-07 09:26:45.835018: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x55ea66430da0 executing computations on platform Host. Devices:\r\n2019-11-07 09:26:45.835032: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): Host, Default Version\r\n2019-11-07 09:26:45.836899: I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:258] Initialize GrpcChannelCache for job worker -> {0 -> localhost:65535, 1 -> localhost:65532}\r\n2019-11-07 09:26:45.838638: I tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:365] Started server with target: grpc://localhost:65535\r\nWARNING:tensorflow:`eval_fn` is not passed in. The `worker_fn` will be used if an \"evaluator\" task exists in the cluster.\r\nWARNING:tensorflow:`eval_strategy` is not passed in. No distribution strategy will be used for evaluation.\r\nWARNING:tensorflow:ModelCheckpoint callback is not provided. Workers will need to restart training if any fails.\r\n2019-11-07 09:26:50.351284: W tensorflow/core/grappler/optimizers/data/auto_shard.cc:400] Cannot find shardable dataset, adding a shard node at the end of the dataset instead. This may have performance implications.\r\nTrain for 281 steps, validate for 31 steps\r\nEpoch 1/5\r\n2019-11-07 09:26:50.355581: W tensorflow/core/grappler/optimizers/data/auto_shard.cc:400] Cannot find shardable dataset, adding a shard node at the end of the dataset instead. This may have performance implications.\r\n  1/281 [..............................] - ETA: 9:05 - loss: 9.83752019-11-07 09:26:52.321935: E tensorflow/core/common_runtime/ring_alg.cc:279] Aborting RingGather with Internal: [_Derived_]Inconsistent output shapes, got [16], but expected is [64].\r\n\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\r\nAdditional GRPC error information:\r\n{\"created\":\"@1573115212.321897522\",\"description\":\"Error received from peer\",\"file\":\"external/grpc/src/core/lib/surface/call.cc\",\"file_line\":1039,\"grpc_message\":\"[_Derived_]Inconsistent output shapes, got [16], but expected is [64].\\n\\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\",\"grpc_status\":13}\r\n2019-11-07 09:26:52.321956: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Internal: [_Derived_]Inconsistent output shapes, got [16], but expected is [64].\r\n\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\r\nAdditional GRPC error information:\r\n{\"created\":\"@1573115212.321897522\",\"description\":\"Error received from peer\",\"file\":\"external/grpc/src/core/lib/surface/call.cc\",\"file_line\":1039,\"grpc_message\":\"[_Derived_]Inconsistent output shapes, got [16], but expected is [64].\\n\\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\",\"grpc_status\":13}\r\n2019-11-07 09:26:52.321966: E tensorflow/core/common_runtime/ring_alg.cc:279] Aborting RingReduce with Internal: [_Derived_]Inconsistent output shapes, got [16], but expected is [64].\r\n\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\r\nAdditional GRPC error information:\r\n{\"created\":\"@1573115212.321897522\",\"description\":\"Error received from peer\",\"file\":\"external/grpc/src/core/lib/surface/call.cc\",\"file_line\":1039,\"grpc_message\":\"[_Derived_]Inconsistent output shapes, got [16], but expected is [64].\\n\\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\",\"grpc_status\":13}\r\n2019-11-07 09:26:52.321971: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Internal: [_Derived_]Inconsistent output shapes, got [16], but expected is [64].\r\n\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\r\nAdditional GRPC error information:\r\n{\"created\":\"@1573115212.321897522\",\"description\":\"Error received from peer\",\"file\":\"external/grpc/src/core/lib/surface/call.cc\",\"file_line\":1039,\"grpc_message\":\"[_Derived_]Inconsistent output shapes, got [16], but expected is [64].\\n\\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\",\"grpc_status\":13}\r\n2019-11-07 09:26:52.321976: E tensorflow/core/common_runtime/ring_alg.cc:279] Aborting RingGather with Internal: [_Derived_]Inconsistent output shapes, got [16], but expected is [64].\r\n\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\r\nAdditional GRPC error information:\r\n{\"created\":\"@1573115212.321897522\",\"description\":\"Error received from peer\",\"file\":\"external/grpc/src/core/lib/surface/call.cc\",\"file_line\":1039,\"grpc_message\":\"[_Derived_]Inconsistent output shapes, got [16], but expected is [64].\\n\\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\",\"grpc_status\":13}\r\n2019-11-07 09:26:52.321996: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Internal: [_Derived_]Inconsistent output shapes, got [16], but expected is [64].\r\n\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\r\nAdditional GRPC error information:\r\n{\"created\":\"@1573115212.321897522\",\"description\":\"Error received from peer\",\"file\":\"external/grpc/src/core/lib/surface/call.cc\",\"file_line\":1039,\"grpc_message\":\"[_Derived_]Inconsistent output shapes, got [16], but expected is [64].\\n\\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\",\"grpc_status\":13}\r\n2019-11-07 09:26:52.322010: E tensorflow/core/common_runtime/ring_alg.cc:279] Aborting RingReduce with Internal: [_Derived_]Inconsistent output shapes, got [16], but expected is [64].\r\n\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\r\nAdditional GRPC error information:\r\n{\"created\":\"@1573115212.321897522\",\"description\":\"Error received from peer\",\"file\":\"external/grpc/src/core/lib/surface/call.cc\",\"file_line\":1039,\"grpc_message\":\"[_Derived_]Inconsistent output shapes, got [16], but expected is [64].\\n\\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\",\"grpc_status\":13}\r\n2019-11-07 09:26:52.322017: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Internal: [_Derived_]Inconsistent output shapes, got [16], but expected is [64].\r\n\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\r\nAdditional GRPC error information:\r\n{\"created\":\"@1573115212.321897522\",\"description\":\"Error received from peer\",\"file\":\"external/grpc/src/core/lib/surface/call.cc\",\"file_line\":1039,\"grpc_message\":\"[_Derived_]Inconsistent output shapes, got [16], but expected is [64].\\n\\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\",\"grpc_status\":13}\r\n2019-11-07 09:26:52.322045: E tensorflow/core/common_runtime/ring_alg.cc:279] Aborting RingReduce with Cancelled: [_Derived_]Cancelled\r\nAdditional GRPC error information:\r\n{\"created\":\"@1573115212.321980682\",\"description\":\"Error received from peer\",\"file\":\"external/grpc/src/core/lib/surface/call.cc\",\"file_line\":1039,\"grpc_message\":\"Cancelled\",\"grpc_status\":1}\r\n2019-11-07 09:26:52.322051: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Cancelled: [_Derived_]Cancelled\r\nAdditional GRPC error information:\r\n{\"created\":\"@1573115212.321980682\",\"description\":\"Error received from peer\",\"file\":\"external/grpc/src/core/lib/surface/call.cc\",\"file_line\":1039,\"grpc_message\":\"Cancelled\",\"grpc_status\":1}\r\n2019-11-07 09:26:52.322053: W tensorflow/core/framework/op_kernel.cc:1622] OP_REQUIRES failed at collective_ops.cc:125 : Internal: [_Derived_]Inconsistent output shapes, got [16], but expected is [64].\r\n\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\r\nAdditional GRPC error information:\r\n{\"created\":\"@1573115212.321897522\",\"description\":\"Error received from peer\",\"file\":\"external/grpc/src/core/lib/surface/call.cc\",\"file_line\":1039,\"grpc_message\":\"[_Derived_]Inconsistent output shapes, got [16], but expected is [64].\\n\\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\",\"grpc_status\":13}\r\n2019-11-07 09:26:52.322054: W tensorflow/core/framework/op_kernel.cc:1622] OP_REQUIRES failed at collective_ops.cc:234 : Internal: [_Derived_]Inconsistent output shapes, got [16], but expected is [64].\r\n\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\r\nAdditional GRPC error information:\r\n{\"created\":\"@1573115212.321897522\",\"description\":\"Error received from peer\",\"file\":\"external/grpc/src/core/lib/surface/call.cc\",\"file_line\":1039,\"grpc_message\":\"[_Derived_]Inconsistent output shapes, got [16], but expected is [64].\\n\\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\",\"grpc_status\":13}\r\n2019-11-07 09:26:52.322101: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Internal: [_Derived_]Inconsistent output shapes, got [16], but expected is [64].\r\n\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\r\nAdditional GRPC error information:\r\n{\"created\":\"@1573115212.321897522\",\"description\":\"Error received from peer\",\"file\":\"external/grpc/src/core/lib/surface/call.cc\",\"file_line\":1039,\"grpc_message\":\"[_Derived_]Inconsistent output shapes, got [16], but expected is [64].\\n\\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\",\"grpc_status\":13}\r\n\t [[Adam/allreduce_1/CollectiveGather]]\r\n2019-11-07 09:26:52.322097: W tensorflow/core/framework/op_kernel.cc:1622] OP_REQUIRES failed at collective_ops.cc:125 : Internal: [_Derived_]Inconsistent output shapes, got [16], but expected is [64].\r\n\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\r\nAdditional GRPC error information:\r\n{\"created\":\"@1573115212.321897522\",\"description\":\"Error received from peer\",\"file\":\"external/grpc/src/core/lib/surface/call.cc\",\"file_line\":1039,\"grpc_message\":\"[_Derived_]Inconsistent output shapes, got [16], but expected is [64].\\n\\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\",\"grpc_status\":13}\r\n2019-11-07 09:26:52.322123: W tensorflow/core/framework/op_kernel.cc:1622] OP_REQUIRES failed at collective_ops.cc:234 : Cancelled: [_Derived_]Cancelled\r\nAdditional GRPC error information:\r\n{\"created\":\"@1573115212.321980682\",\"description\":\"Error received from peer\",\"file\":\"external/grpc/src/core/lib/surface/call.cc\",\"file_line\":1039,\"grpc_message\":\"Cancelled\",\"grpc_status\":1}\r\n2019-11-07 09:26:52.322108: W tensorflow/core/framework/op_kernel.cc:1622] OP_REQUIRES failed at collective_ops.cc:234 : Internal: [_Derived_]Inconsistent output shapes, got [16], but expected is [64].\r\n\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\r\nAdditional GRPC error information:\r\n{\"created\":\"@1573115212.321897522\",\"description\":\"Error received from peer\",\"file\":\"external/grpc/src/core/lib/surface/call.cc\",\"file_line\":1039,\"grpc_message\":\"[_Derived_]Inconsistent output shapes, got [16], but expected is [64].\\n\\t [[{{node Adam/allreduce_1/CollectiveGather_1}}]]\",\"grpc_status\":13}\r\nTraceback (most recent call last):\r\n  File \".../.PyCharmCE2019.2/config/scratches/scratch_4.py\", line 71, in <module>\r\n    validation_steps=999//batch_size,\r\n  File \".../lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training.py\", line 728, in fit\r\n    use_multiprocessing=use_multiprocessing)\r\n  File .../lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_distributed.py\", line 789, in fit\r\n    *args, **kwargs)\r\n  File \".../lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_distributed.py\", line 776, in wrapper\r\n    mode=dc.CoordinatorMode.INDEPENDENT_WORKER)\r\n  File \".../lib/python3.7/site-packages/tensorflow_core/python/distribute/distribute_coordinator.py\", line 853, in run_distribute_coordinator\r\n    task_id, session_config, rpc_layer)\r\n  File \".../mostly-engine-tf20-p374/lib/python3.7/site-packages/tensorflow_core/python/distribute/distribute_coordinator.py\", line 360, in _run_single_worker\r\n    return worker_fn(strategy)\r\n  File \".../mostly-engine-tf20-p374/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_distributed.py\", line 771, in _worker_fn\r\n    return method(model, **kwargs)\r\n  File \".../mostly-engine-tf20-p374/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_v2.py\", line 324, in fit\r\n    total_epochs=epochs)\r\n  File \".../mostly-engine-tf20-p374/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_v2.py\", line 123, in run_one_epoch\r\n    batch_outs = execution_function(iterator)\r\n  File \".../mostly-engine-tf20-p374/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_v2_utils.py\", line 86, in execution_function\r\n    distributed_function(input_fn))\r\n  File \".../mostly-engine-tf20-p374/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 457, in __call__\r\n    result = self._call(*args, **kwds)\r\n  File \".../mostly-engine-tf20-p374/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 487, in _call\r\n    return self._stateless_fn(*args, **kwds)  # pylint: disable=not-callable\r\n  File \".../mostly-engine-tf20-p374/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 1823, in __call__\r\n    return graph_function._filtered_call(args, kwargs)  # pylint: disable=protected-access\r\n  File \"/.../mostly-engine-tf20-p374/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 1141, in _filtered_call\r\n    self.captured_inputs)\r\n  File \".../lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 1224, in _call_flat\r\n    ctx, args, cancellation_manager=cancellation_manager)\r\n  File \".../lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 511, in call\r\n    ctx=ctx)\r\n  File \".../lib/python3.7/site-packages/tensorflow_core/python/eager/execute.py\", line 67, in quick_execute\r\n    six.raise_from(core._status_to_exception(e.code, message), None)\r\n  File \"<string>\", line 3, in raise_from\r\ntensorflow.python.framework.errors_impl.InternalError:  [_Derived_]Inconsistent output shapes, got [16], but expected is [64].\r\n\t [[node Adam/allreduce_1/CollectiveGather_1 (defined at /miniconda3/envs/mostly-engine-tf20-p374/lib/python3.7/site-packages/tensorflow_core/python/framework/ops.py:1751) ]]\r\nAdditional GRPC error information:\r\n{\"created\":\"@1573115212.321897522\",\"description\":\"Error received from peer\",\"file\":\"external/grpc/src/core/lib/surface/call.cc\",\"file_line\":1039,\"grpc_message\":\"[_Derived_]Inconsistent output shapes, got [16], but expected is [64].\\n\\t [[node Adam/allreduce_1/CollectiveGather_1 (defined at /miniconda3/envs/mostly-engine-tf20-p374/lib/python3.7/site-packages/tensorflow_core/python/framework/ops.py:1751) ]]\",\"grpc_status\":13}\r\n\t [[Adam/allreduce_1/CollectiveGather]] [Op:__inference_distributed_function_888]\r\n\r\nFunction call stack:\r\ndistributed_function\r\n\r\n2019-11-07 09:26:52.540347: W tensorflow/core/common_runtime/eager/context.cc:290] Unable to destroy server_ object, so releasing instead. Servers don't support clean shutdown.\r\n\r\nProcess finished with exit code 1\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34064", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34064/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34064/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34064/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34064", "id": 519099298, "node_id": "MDU6SXNzdWU1MTkwOTkyOTg=", "number": 34064, "title": "Work group size selection in OpenGL", "user": {"login": "Lumosis", "id": 30372757, "node_id": "MDQ6VXNlcjMwMzcyNzU3", "avatar_url": "https://avatars2.githubusercontent.com/u/30372757?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lumosis", "html_url": "https://github.com/Lumosis", "followers_url": "https://api.github.com/users/Lumosis/followers", "following_url": "https://api.github.com/users/Lumosis/following{/other_user}", "gists_url": "https://api.github.com/users/Lumosis/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lumosis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lumosis/subscriptions", "organizations_url": "https://api.github.com/users/Lumosis/orgs", "repos_url": "https://api.github.com/users/Lumosis/repos", "events_url": "https://api.github.com/users/Lumosis/events{/privacy}", "received_events_url": "https://api.github.com/users/Lumosis/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-11-07T07:50:29Z", "updated_at": "2019-11-12T17:47:51Z", "closed_at": null, "author_association": "NONE", "body": "\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): v2.0.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nHi, I am running tensorflow lite v2.0.0 on my Mali-G72 and Adreno 630 GPUs. I have read some of the tf lite source codes in order to see how you make use of OpenGL. \r\n\r\nIn /tensorflow/tensorflow/lite/delegates/gpu/gl/workgroups/calculator_from_metadata.cc, I noticed you are trying to choose a proper work group size. However, it seems it did not really use calculator_from_metadata but to use default_calculator_ when running on my GPUs. Intuitively, I believe that the choice of work group size influences the performance and a choice from calculator_from_metadata should be better. But calculator_from_metadata is not working because there is not any data saved in the vector workgroups_. \r\nHave you finished this part, yet? I would appreciate it if you can share any information about this.\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34062", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34062/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34062/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34062/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34062", "id": 519073938, "node_id": "MDU6SXNzdWU1MTkwNzM5Mzg=", "number": 34062, "title": "BatchNorm generates NaN moving_variance on GPU with fused set to True for some inputs", "user": {"login": "jnd77", "id": 3433639, "node_id": "MDQ6VXNlcjM0MzM2Mzk=", "avatar_url": "https://avatars3.githubusercontent.com/u/3433639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jnd77", "html_url": "https://github.com/jnd77", "followers_url": "https://api.github.com/users/jnd77/followers", "following_url": "https://api.github.com/users/jnd77/following{/other_user}", "gists_url": "https://api.github.com/users/jnd77/gists{/gist_id}", "starred_url": "https://api.github.com/users/jnd77/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jnd77/subscriptions", "organizations_url": "https://api.github.com/users/jnd77/orgs", "repos_url": "https://api.github.com/users/jnd77/repos", "events_url": "https://api.github.com/users/jnd77/events{/privacy}", "received_events_url": "https://api.github.com/users/jnd77/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-11-07T06:43:44Z", "updated_at": "2020-02-28T03:19:13Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.15.0\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory: the one on Colab\r\n\r\n\r\n**Describe the current behavior**\r\n\r\nI have an input of shape (1, 1, 1, num_channels), and I run it through a tf.keras.layers.BatchNormalization in training mode.\r\n\r\nWhen running on CPU (fused or not) or GPU (not fused), the batch norm has the expected moving_variance of [0.99, 0.99 ...]\r\n\r\nWhen running on GPU with fused=True, the moving_variance is [nan, nan, ...]\r\n\r\n**Describe the expected behavior**\r\n\r\nThe moving variance should not be nan\r\n\r\n**Code to reproduce the issue**\r\nCheck this [gist](https://colab.research.google.com/gist/jnd77/38ae530b17ee84e7b3907e3010c8529a/untitled0.ipynb)\r\n\r\n**Other info / logs**\r\nIt works fine on CPU.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34047", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34047/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34047/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34047/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34047", "id": 518582837, "node_id": "MDU6SXNzdWU1MTg1ODI4Mzc=", "number": 34047, "title": "ResourceApplyGradientDescent happens on CPU?", "user": {"login": "TobiasNorlund", "id": 2678217, "node_id": "MDQ6VXNlcjI2NzgyMTc=", "avatar_url": "https://avatars1.githubusercontent.com/u/2678217?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiasNorlund", "html_url": "https://github.com/TobiasNorlund", "followers_url": "https://api.github.com/users/TobiasNorlund/followers", "following_url": "https://api.github.com/users/TobiasNorlund/following{/other_user}", "gists_url": "https://api.github.com/users/TobiasNorlund/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiasNorlund/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiasNorlund/subscriptions", "organizations_url": "https://api.github.com/users/TobiasNorlund/orgs", "repos_url": "https://api.github.com/users/TobiasNorlund/repos", "events_url": "https://api.github.com/users/TobiasNorlund/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiasNorlund/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, {"login": "qqfish", "id": 1269299, "node_id": "MDQ6VXNlcjEyNjkyOTk=", "avatar_url": "https://avatars3.githubusercontent.com/u/1269299?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qqfish", "html_url": "https://github.com/qqfish", "followers_url": "https://api.github.com/users/qqfish/followers", "following_url": "https://api.github.com/users/qqfish/following{/other_user}", "gists_url": "https://api.github.com/users/qqfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/qqfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qqfish/subscriptions", "organizations_url": "https://api.github.com/users/qqfish/orgs", "repos_url": "https://api.github.com/users/qqfish/repos", "events_url": "https://api.github.com/users/qqfish/events{/privacy}", "received_events_url": "https://api.github.com/users/qqfish/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-11-06T16:25:23Z", "updated_at": "2019-12-27T18:21:38Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 19.10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): Binary\r\n- TensorFlow version (use command below): 2.0.0\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: CUDA Version: 10.1\r\n```bash\r\ntf-docker /opt/project/src > nvcc --version\r\nnvcc: NVIDIA (R) Cuda compiler driver\r\nCopyright (c) 2005-2018 NVIDIA Corporation\r\nBuilt on Sat_Aug_25_21:08:01_CDT_2018\r\nCuda compilation tools, release 10.0, V10.0.130\r\n```\r\n- GPU model and memory: GeForce GTX 1050, 4042MiB\r\n\r\nI use the official tensorflow docker image: `tensorflow/tensorflow:2.0.0-gpu-py3`\r\n\r\n**Describe the current behavior**\r\nI experience fluctuating GPU utilization when I train a simple language model on artificial data using a custom training loop.\r\n![Peek 2019-11-06 17-01](https://user-images.githubusercontent.com/2678217/68315470-197fa680-00b8-11ea-936d-b2c588259558.gif)\r\n\r\n**Describe the expected behavior**\r\nI would expect to get GPU utilization more stable at 100% (or very close to it), since the model is very simple and I expect all (heavy) ops to be able to run on the GPU.\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport tensorflow as tf\r\n#tf.debugging.set_log_device_placement(True)\r\n\r\nVOCAB_SIZE = 32000\r\nBATCH_SIZE = 20\r\nLEARNING_RATE = 0.001\r\n\r\nclass SimpleModel(tf.keras.Model):\r\n    def __init__(self, target_vocab_size):\r\n        super(SimpleModel, self).__init__()\r\n        self.d_model = 1024\r\n        self.embedding = tf.keras.layers.Embedding(target_vocab_size, self.d_model)\r\n        self.body = tf.keras.layers.Dense(self.d_model)\r\n\r\n    def call(self, input, training):\r\n        # input shape: (batch, seq_len)\r\n        x = self.embedding(input)  # (batch, seq_len, d_model)\r\n        x = self.body(x)\r\n        logits = tf.matmul(x, self.embedding.embeddings, transpose_b=True)\r\n        return logits\r\n\r\n\r\ndef get_dataset():\r\n    ds = tf.data.Dataset.from_tensor_slices(tf.random.uniform((1000, 20), 0, VOCAB_SIZE, dtype=tf.int64))\r\n    ds = ds.padded_batch(BATCH_SIZE, padded_shapes=[None])\r\n    ds = ds.repeat()\r\n    ds = ds.prefetch(2)\r\n    return ds\r\n\r\n\r\ndef train(ds, model, optimizer):\r\n\r\n    loss_object = tf.keras.losses.SparseCategoricalCrossentropy(from_logits=True)\r\n\r\n    def calculate_loss(real, pred):\r\n        loss_ = loss_object(real, pred)\r\n        return tf.reduce_mean(loss_)\r\n\r\n    @tf.function\r\n    def train_step(batch):\r\n        tar_inp = batch[:, :-1]\r\n        tar_real = batch[:, 1:]\r\n\r\n        with tf.GradientTape() as tape:\r\n            logits = model(tar_inp, True)\r\n            loss = calculate_loss(tar_real, logits)\r\n\r\n        gradients = tape.gradient(loss, model.trainable_variables)\r\n        optimizer.apply_gradients(zip(gradients, model.trainable_variables))\r\n        return None\r\n\r\n    #tf.summary.trace_on(graph=True, profiler=True)\r\n\r\n    for i, batch in enumerate(ds):\r\n        _ = train_step(batch)\r\n\r\n        #if i == 10:\r\n        #   tf.summary.trace_export(name=\"model_trace\", step=0, profiler_outdir=\"/tmp/profiling/5\")\r\n        #   break\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    ds = get_dataset()\r\n    model = SimpleModel(VOCAB_SIZE)\r\n    optimizer = tf.keras.optimizers.SGD(LEARNING_RATE)\r\n\r\n    train(ds, model, optimizer)\r\n```\r\n\r\n**Other info / logs**\r\nWhen inspecting the trace in Tensorboard I see two memcpys happening between training steps (green and blue boxes):\r\n![Screenshot from 2019-11-06 17-16-15](https://user-images.githubusercontent.com/2678217/68316249-7039b000-00b9-11ea-9b44-88f3f58fa5e1.png)\r\n\r\nZooming in between two steps, I also see a ResourceApplyGradientDescent op happening on the CPU:\r\n![Screenshot from 2019-11-06 17-19-48](https://user-images.githubusercontent.com/2678217/68316446-c73f8500-00b9-11ea-863a-b050eddeab8d.png)\r\n\r\nAre ResourceApply* ops supposed to happen on the host (CPU)?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34042", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34042/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34042/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34042/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34042", "id": 518464462, "node_id": "MDU6SXNzdWU1MTg0NjQ0NjI=", "number": 34042, "title": "Error building 1.13", "user": {"login": "issanospam", "id": 57445120, "node_id": "MDQ6VXNlcjU3NDQ1MTIw", "avatar_url": "https://avatars2.githubusercontent.com/u/57445120?v=4", "gravatar_id": "", "url": "https://api.github.com/users/issanospam", "html_url": "https://github.com/issanospam", "followers_url": "https://api.github.com/users/issanospam/followers", "following_url": "https://api.github.com/users/issanospam/following{/other_user}", "gists_url": "https://api.github.com/users/issanospam/gists{/gist_id}", "starred_url": "https://api.github.com/users/issanospam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/issanospam/subscriptions", "organizations_url": "https://api.github.com/users/issanospam/orgs", "repos_url": "https://api.github.com/users/issanospam/repos", "events_url": "https://api.github.com/users/issanospam/events{/privacy}", "received_events_url": "https://api.github.com/users/issanospam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-11-06T13:15:54Z", "updated_at": "2019-11-11T10:08:21Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version: 1.13\r\n- Python version: 2.7\r\n- Installed using virtualenv? pip? conda?: Pip\r\n- Bazel version (if compiling from source): 0.21\r\n- GCC/Compiler version (if compiling from source): 5.4.0\r\n- CUDA/cuDNN version: 10.0\r\n- GPU model and memory: NVIDIA GeForce RTX 2080 TI (x2), 32GB RAM\r\n\r\n\r\n\r\n**Describe the problem**\r\nError when trying to build Tensor Flow 1.13\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nsudo bazel build --config=opt --config=cuda --incompatible_strict_action_env=false //tensorflow/tools/pip_package:build_pip_package\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n`ERROR: /home/issa/Downloads/tensorflow/tensorflow/BUILD:579:1: Executing genrule //tensorflow:tf_python_api_gen_v1 failed (Exit 1)\r\nTraceback (most recent call last):\r\n  File \"/home/issa/.cache/bazel/_bazel_root/ee4098cabb6d80cd53ff67b126befee0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1_tf_python_api_gen_v1.runfiles/org_tensorflow/tensorflow/python/tools/api/generator/create_python_api.py\", line 27, in <module>\r\n    from tensorflow.python.tools.api.generator import doc_srcs\r\n  File \"/home/issa/.cache/bazel/_bazel_root/ee4098cabb6d80cd53ff67b126befee0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1_tf_python_api_gen_v1.runfiles/org_tensorflow/tensorflow/python/__init__.py\", line 63, in <module>\r\n    from tensorflow.python.framework.framework_lib import *  # pylint: disable=redefined-builtin\r\n  File \"/home/issa/.cache/bazel/_bazel_root/ee4098cabb6d80cd53ff67b126befee0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1_tf_python_api_gen_v1.runfiles/org_tensorflow/tensorflow/python/framework/framework_lib.py\", line 52, in <module>\r\n    from tensorflow.python.framework.importer import import_graph_def\r\n  File \"/home/issa/.cache/bazel/_bazel_root/ee4098cabb6d80cd53ff67b126befee0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1_tf_python_api_gen_v1.runfiles/org_tensorflow/tensorflow/python/framework/importer.py\", line 28, in <module>\r\n    from tensorflow.python.framework import function\r\n  File \"/home/issa/.cache/bazel/_bazel_root/ee4098cabb6d80cd53ff67b126befee0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1_tf_python_api_gen_v1.runfiles/org_tensorflow/tensorflow/python/framework/function.py\", line 36, in <module>\r\n    from tensorflow.python.ops import resource_variable_ops\r\n  File \"/home/issa/.cache/bazel/_bazel_root/ee4098cabb6d80cd53ff67b126befee0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1_tf_python_api_gen_v1.runfiles/org_tensorflow/tensorflow/python/ops/resource_variable_ops.py\", line 39, in <module>\r\n    from tensorflow.python.ops import variables\r\n  File \"/home/issa/.cache/bazel/_bazel_root/ee4098cabb6d80cd53ff67b126befee0/execroot/org_tensorflow/bazel-out/host/bin/tensorflow/create_tensorflow.python_api_1_tf_python_api_gen_v1.runfiles/org_tensorflow/tensorflow/python/ops/variables.py\", line 133, in <module>\r\n    \"* `ONLY_FIRST_TOWER`: Deprecated alias for `ONLY_FIRST_REPLICA`.\\n  \")\r\nAttributeError: attribute '__doc__' of 'type' objects is not writable\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\nINFO: Elapsed time: 2121.083s, Critical Path: 421.25s\r\nINFO: 10541 processes: 10541 local.\r\nFAILED: Build did NOT complete successfully\r\n`\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34041", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34041/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34041/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34041/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34041", "id": 518442470, "node_id": "MDU6SXNzdWU1MTg0NDI0NzA=", "number": 34041, "title": "Training with TPU model.fit error, while GPU works well", "user": {"login": "MikeOfZen", "id": 28424677, "node_id": "MDQ6VXNlcjI4NDI0Njc3", "avatar_url": "https://avatars2.githubusercontent.com/u/28424677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MikeOfZen", "html_url": "https://github.com/MikeOfZen", "followers_url": "https://api.github.com/users/MikeOfZen/followers", "following_url": "https://api.github.com/users/MikeOfZen/following{/other_user}", "gists_url": "https://api.github.com/users/MikeOfZen/gists{/gist_id}", "starred_url": "https://api.github.com/users/MikeOfZen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MikeOfZen/subscriptions", "organizations_url": "https://api.github.com/users/MikeOfZen/orgs", "repos_url": "https://api.github.com/users/MikeOfZen/repos", "events_url": "https://api.github.com/users/MikeOfZen/events{/privacy}", "received_events_url": "https://api.github.com/users/MikeOfZen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rxsang", "id": 6399870, "node_id": "MDQ6VXNlcjYzOTk4NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/6399870?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rxsang", "html_url": "https://github.com/rxsang", "followers_url": "https://api.github.com/users/rxsang/followers", "following_url": "https://api.github.com/users/rxsang/following{/other_user}", "gists_url": "https://api.github.com/users/rxsang/gists{/gist_id}", "starred_url": "https://api.github.com/users/rxsang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rxsang/subscriptions", "organizations_url": "https://api.github.com/users/rxsang/orgs", "repos_url": "https://api.github.com/users/rxsang/repos", "events_url": "https://api.github.com/users/rxsang/events{/privacy}", "received_events_url": "https://api.github.com/users/rxsang/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rxsang", "id": 6399870, "node_id": "MDQ6VXNlcjYzOTk4NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/6399870?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rxsang", "html_url": "https://github.com/rxsang", "followers_url": "https://api.github.com/users/rxsang/followers", "following_url": "https://api.github.com/users/rxsang/following{/other_user}", "gists_url": "https://api.github.com/users/rxsang/gists{/gist_id}", "starred_url": "https://api.github.com/users/rxsang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rxsang/subscriptions", "organizations_url": "https://api.github.com/users/rxsang/orgs", "repos_url": "https://api.github.com/users/rxsang/repos", "events_url": "https://api.github.com/users/rxsang/events{/privacy}", "received_events_url": "https://api.github.com/users/rxsang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-11-06T12:32:19Z", "updated_at": "2019-11-12T00:05:23Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):No\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):Using Colab\r\n- TensorFlow version (use command below):v2.0.0-rc2-26-g64c3d38\r\n- Python version:3.6\r\n- Bazel version (if compiling from source):N/A\r\n- GCC/Compiler version (if compiling from source):N/A\r\n- CUDA/cuDNN version:N/A\r\n- GPU model and memory:TPU\r\n\r\n**Describe the current behavior**\r\nDoing a transfer learning with InceptionV3 model on a medium-sized dataset (tfds, CatsVsDogs).\r\nFor the same code, when training with GPU, the code runs smoothly.\r\nSwitching to TPU produces this (And often other various) errors\r\n\r\n```\r\nInternalError: Failed copying input tensor from /job:localhost/replica:0/task:0/device:CPU:0 to /job:worker/replica:0/task:0/device:CPU:0 in order to run DatasetCardinality: Unable to parse tensor proto\r\nAdditional GRPC error information:\r\n{\"created\":\"@1573042445.409490969\",\"description\":\"Error received from peer\",\"file\":\"external/grpc/src/core/lib/surface/call.cc\",\"file_line\":1039,\"grpc_message\":\"Unable to parse tensor proto\",\"grpc_status\":3} [Op:DatasetCardinality]\r\n```\r\n\r\n**Describe the expected behavior**\r\nTPU training should run similarly to GPU training (without errors in this case)\r\n\r\n**Code to reproduce the issue**\r\nPlease find the Colab gist to reproduce the issue [\"https://gist.github.com/MikeOfZen/abadf58b9c68acd1b33c6e39af7b3f7a.js\"](url)\r\n\r\n**Other info / logs**\r\n*The issue occurs in both TF 1.15 and 2.0 versions.\r\nAttempting to use .take() to provide cardinality to the dataset didn't help (I've used it successfully to solve a similar issue before)\r\n\r\nOverall, I've gotten a number of various odd errors when trying to do TPU training.\r\nSpecifically, if caching for this dataset is enabled (should be ~25Gb) all sorts of wild errors pop up from the TPU side, probably due to OOM or buffer overflows.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34040", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34040/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34040/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34040/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34040", "id": 518421749, "node_id": "MDU6SXNzdWU1MTg0MjE3NDk=", "number": 34040, "title": "tf.keras.model_to_estimator() fails with custom loss/custom metrics", "user": {"login": "JosPolfliet", "id": 12380065, "node_id": "MDQ6VXNlcjEyMzgwMDY1", "avatar_url": "https://avatars0.githubusercontent.com/u/12380065?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JosPolfliet", "html_url": "https://github.com/JosPolfliet", "followers_url": "https://api.github.com/users/JosPolfliet/followers", "following_url": "https://api.github.com/users/JosPolfliet/following{/other_user}", "gists_url": "https://api.github.com/users/JosPolfliet/gists{/gist_id}", "starred_url": "https://api.github.com/users/JosPolfliet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JosPolfliet/subscriptions", "organizations_url": "https://api.github.com/users/JosPolfliet/orgs", "repos_url": "https://api.github.com/users/JosPolfliet/repos", "events_url": "https://api.github.com/users/JosPolfliet/events{/privacy}", "received_events_url": "https://api.github.com/users/JosPolfliet/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-11-06T11:49:17Z", "updated_at": "2019-11-08T23:52:07Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): YES\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): MacOS 10.14.4 \r\n- TensorFlow installed from (source or binary): binary\r\n```\r\nnumpy                              1.17.2     \r\nnumpydoc                           0.9.1      \r\nprotobuf                           3.9.2      \r\ntensorflow                         2.0.0      \r\ntensorflow-addons                  0.6.0      \r\ntensorflow-estimator               2.0.0      \r\ntensorflow-serving-api             2.0.0    \r\npython                             3.7.4\r\n```\r\n**Describe the current behavior**\r\nI am using a custom loss function that requires extra input (the number of words in the sentence). When compiling the model, the InputLayer used in the custom loss function does not get transferred into the new graph. Since the function is stateful, I receive the following error:\r\n```Traceback (most recent call last):\r\n  File \"/src/automated-document-processing/nlp-tfx/bugreport.py\", line 93, in <module>\r\n    estimator = tf.keras.estimator.model_to_estimator(keras_model=model, model_dir=params[\"eval_dir\"])\r\n  File \"/src/.anaconda/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/keras/estimator/__init__.py\", line 166, in model_to_estimator_v2\r\n    use_v2_estimator=True)\r\n  File \"/src/.anaconda/anaconda3/lib/python3.7/site-packages/tensorflow_estimator/python/estimator/keras.py\", line 576, in model_to_estimator\r\n    config, save_object_ckpt)\r\n  File \"/src/.anaconda/anaconda3/lib/python3.7/site-packages/tensorflow_estimator/python/estimator/keras.py\", line 381, in _save_first_checkpoint\r\n    custom_objects)\r\n  File \"/src/.anaconda/anaconda3/lib/python3.7/site-packages/tensorflow_estimator/python/estimator/keras.py\", line 227, in _clone_and_build_model\r\n    optimizer_config=optimizer_config)\r\n  File \"/src/.anaconda/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/keras/models.py\", line 679, in clone_and_build_model\r\n    target_tensors=target_tensors)\r\n  File \"/src/.anaconda/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/training/tracking/base.py\", line 457, in _method_wrapper\r\n    result = method(self, *args, **kwargs)\r\n  File \"/src/.anaconda/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training.py\", line 373, in compile\r\n    self._compile_weights_loss_and_weighted_metrics()\r\n  File \"/src/.anaconda/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/training/tracking/base.py\", line 457, in _method_wrapper\r\n    result = method(self, *args, **kwargs)\r\n  File \"/src/.anaconda/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training.py\", line 1653, in _compile_weights_loss_and_weighted_metrics\r\n    self.total_loss = self._prepare_total_loss(masks)\r\n  File \"/src/.anaconda/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training.py\", line 1713, in _prepare_total_loss\r\n    per_sample_losses = loss_fn.call(y_true, y_pred)\r\n  File \"/src/.anaconda/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/keras/losses.py\", line 221, in call\r\n    return self.fn(y_true, y_pred, **self._fn_kwargs)\r\n  File \"/src/automated-document-processing/nlp-tfx/bugreport.py\", line 80, in CRFLoss\r\n    transition_params=transition_params,\r\n  File \"/src/.anaconda/anaconda3/lib/python3.7/site-packages/tensorflow_addons/text/crf.py\", line 196, in crf_log_likelihood\r\n    transition_params)\r\n  File \"/src/.anaconda/anaconda3/lib/python3.7/site-packages/tensorflow_addons/text/crf.py\", line 68, in crf_sequence_score\r\n    return _multi_seq_fn()\r\n  File \"/src/.anaconda/anaconda3/lib/python3.7/site-packages/tensorflow_addons/text/crf.py\", line 59, in _multi_seq_fn\r\n    unary_scores = crf_unary_score(tag_indices, sequence_lengths, inputs)\r\n  File \"/src/.anaconda/anaconda3/lib/python3.7/site-packages/tensorflow_addons/text/crf.py\", line 232, in crf_unary_score\r\n    sequence_lengths, maxlen=tf.shape(tag_indices)[1], dtype=tf.float32)\r\n  File \"/src/.anaconda/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/ops/array_ops.py\", line 3568, in sequence_mask\r\n    with ops.name_scope(name, \"SequenceMask\", [lengths, maxlen]):\r\n  File \"/src/.anaconda/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/framework/ops.py\", line 6337, in __enter__\r\n    g_from_inputs = _get_graph_from_inputs(self._values)\r\n  File \"/src/.anaconda/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/framework/ops.py\", line 5982, in _get_graph_from_inputs\r\n    _assert_same_graph(original_graph_element, graph_element)\r\n  File \"/src/.anaconda/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/framework/ops.py\", line 5917, in _assert_same_graph\r\n    (item, original_item))\r\nValueError: Tensor(\"loss/myscores_loss/strided_slice_3:0\", shape=(), dtype=int32) must be from the same graph as Tensor(\"nwords:0\", shape=(None,), dtype=int32).\r\n```\r\n\r\n**Describe the expected behavior**\r\nAllow custom stateful loss/metrics functions in `model_to_estimator` or update the documentation that it is not supported. \r\n\r\n**Code to reproduce the issue**\r\n```from typing import Any, Dict\r\n\r\nimport tensorflow as tf\r\n\r\n\r\nfrom typing import Text, Tuple, List, Dict, Any, Union\r\n\r\nimport numpy as np\r\nimport tensorflow as tf\r\nimport tensorflow_addons as tfa\r\nfrom tensorflow.python.ops import math_ops\r\n\r\n\r\ndef _split_iob_tag(tag: Text) -> Tuple[Text, Union[Text, None]]:\r\n    \"\"\"Handle tags <pad>, <unk>, O, B-foo, and I-foo.\"\"\"\r\n    if tag[:2] not in [\"B-\", \"I-\"]:\r\n        return (tag, None)\r\n    return tuple(tag.split(\"-\", maxsplit=2))  # type: ignore\r\n\r\n\r\ndef iob_transition_params(tags: List[Text]) -> tf.constant:\r\n    \"\"\"Return transition matrix suitable for tf.contrib.crf.crf_decode.\"\"\"\r\n    mat = np.zeros((len(tags), len(tags)))\r\n    for i, i_tag in enumerate(tags):\r\n        i_type, i_name = _split_iob_tag(i_tag)\r\n        for j, j_tag in enumerate(tags):\r\n            j_type, j_name = _split_iob_tag(j_tag)\r\n            if (i_type == \"O\" and j_type == \"I\") or (\r\n                i_type in [\"B\", \"I\"] and j_type == \"I\" and i_name != j_name\r\n            ):\r\n                mat[i][j] = -np.inf\r\n    return tf.constant(mat, dtype=tf.float32)\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    params: Dict[str, Any] = {\r\n        \"dim\": 300,\r\n        \"dropout\": 0.5,\r\n        \"batch_size\": 3,\r\n        \"buffer\": 15000,\r\n        \"lstm_size\": 10,\r\n        \"eval_dir\": \"../results/\",\r\n        \"saved_model_dir\": \"../final_model/\",\r\n        \"training_data\": \"some_data\",\r\n        \"window_length\": 512,\r\n        \"embedding_dimension\": 300,\r\n    }\r\n\r\n    tags = {'I-tag1', 'B-tag1','I-tag2', 'B-tag2','I-tag3', 'B-tag3', 'O'}\r\n\r\n    dropout = params[\"dropout\"]\r\n\r\n    embeddings = tf.keras.Input(\r\n        shape=(params[\"window_length\"], params[\"embedding_dimension\"],),\r\n        dtype=tf.float32,\r\n        name=\"embedding_sequence\",\r\n    )\r\n    nwords = tf.keras.Input(shape=(), dtype=tf.int32, name=\"nwords\",)\r\n    lstm_cell_fw = tf.keras.layers.LSTM(params[\"lstm_size\"], return_sequences=True)(\r\n        embeddings\r\n    )\r\n    output = tf.keras.layers.Dropout(rate=dropout)(lstm_cell_fw)\r\n    logits = tf.keras.layers.Dense(len(tags), name=\"myscores\")(output)\r\n\r\n    # CRF\r\n    transition_params = iob_transition_params(tags)\r\n\r\n    def custom_loss(seqlen):\r\n        def CRFLoss(y_true, y_pred):\r\n            y_true = math_ops.cast(y_true, tf.int32)\r\n            y_true = tf.reshape(y_true, [-1, 512])\r\n\r\n            log_likelihood, _ = tfa.text.crf.crf_log_likelihood(\r\n                inputs=y_pred,\r\n                tag_indices=y_true,\r\n                sequence_lengths=seqlen,\r\n                transition_params=transition_params,\r\n            )\r\n\r\n            return tf.reduce_mean(-log_likelihood)\r\n\r\n        return CRFLoss\r\n\r\n    model = tf.keras.Model(\r\n        inputs=[embeddings, nwords], outputs=logits, name=\"ner_simple\"\r\n    )\r\n\r\n    model.compile(optimizer=\"adam\", loss=custom_loss(nwords), metrics=[\"accuracy\"])\r\n    estimator = tf.keras.estimator.model_to_estimator(keras_model=model, model_dir=params[\"eval_dir\"])\r\n```\r\n**Other info / logs**\r\nRelated to https://github.com/netrack/keras-metrics/issues/39\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34037", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34037/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34037/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34037/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34037", "id": 518360784, "node_id": "MDU6SXNzdWU1MTgzNjA3ODQ=", "number": 34037, "title": "Support key mapping in TFRecord", "user": {"login": "Officium", "id": 13431221, "node_id": "MDQ6VXNlcjEzNDMxMjIx", "avatar_url": "https://avatars1.githubusercontent.com/u/13431221?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Officium", "html_url": "https://github.com/Officium", "followers_url": "https://api.github.com/users/Officium/followers", "following_url": "https://api.github.com/users/Officium/following{/other_user}", "gists_url": "https://api.github.com/users/Officium/gists{/gist_id}", "starred_url": "https://api.github.com/users/Officium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Officium/subscriptions", "organizations_url": "https://api.github.com/users/Officium/orgs", "repos_url": "https://api.github.com/users/Officium/repos", "events_url": "https://api.github.com/users/Officium/events{/privacy}", "received_events_url": "https://api.github.com/users/Officium/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-11-06T09:55:36Z", "updated_at": "2019-11-08T18:08:04Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- TensorFlow version (you are using): 2.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nFor multiple features situation like recommendation, names of features will take a lot of spaces in tfrecord files. A simple solution is replacing name by feature's index. Do this compression automatically needs change tfrecord file. Support a user-specific option maybe better.\r\n\r\n**Will this change the current api? How?**\r\nAdd a key mapping parameter to `tf.data.TFRecordDataset`, `tf.io.TFRecordWriter` and `tf.data.FixedLengthRecordDataset`.\r\n\r\n**Who will benefit with this feature?**\r\nSave disk space for industry situations.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34036", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34036/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34036/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34036/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34036", "id": 518347445, "node_id": "MDU6SXNzdWU1MTgzNDc0NDU=", "number": 34036, "title": "Please let load_weights load only weights as its name describes", "user": {"login": "netw0rkf10w", "id": 8569515, "node_id": "MDQ6VXNlcjg1Njk1MTU=", "avatar_url": "https://avatars1.githubusercontent.com/u/8569515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/netw0rkf10w", "html_url": "https://github.com/netw0rkf10w", "followers_url": "https://api.github.com/users/netw0rkf10w/followers", "following_url": "https://api.github.com/users/netw0rkf10w/following{/other_user}", "gists_url": "https://api.github.com/users/netw0rkf10w/gists{/gist_id}", "starred_url": "https://api.github.com/users/netw0rkf10w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/netw0rkf10w/subscriptions", "organizations_url": "https://api.github.com/users/netw0rkf10w/orgs", "repos_url": "https://api.github.com/users/netw0rkf10w/repos", "events_url": "https://api.github.com/users/netw0rkf10w/events{/privacy}", "received_events_url": "https://api.github.com/users/netw0rkf10w/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-11-06T09:31:48Z", "updated_at": "2019-11-11T23:13:14Z", "closed_at": null, "author_association": "NONE", "body": "\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 2.0.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current confusing/bad behavior/state.**\r\n\r\nLook at the end of [this tutorial](https://www.tensorflow.org/guide/keras/save_and_serialize):\r\n\r\n```\r\n# Recreate the model\r\nnew_model = get_model()\r\nnew_model.compile(loss='sparse_categorical_crossentropy',\r\n                  optimizer=keras.optimizers.RMSprop())\r\n\r\n# This initializes the variables used by the optimizers,\r\n# as well as any stateful metric variables\r\nnew_model.train_on_batch(x_train[:1], y_train[:1])\r\n\r\n# Load the state of the old model\r\nnew_model.load_weights('path_to_my_weights')\r\n\r\n# Check that the model state has been preserved\r\nnew_predictions = new_model.predict(x_test)\r\nnp.testing.assert_allclose(predictions, new_predictions, rtol=1e-6, atol=1e-6)\r\n\r\n# The optimizer state is preserved as well,\r\n# so you can resume training where you left off\r\nnew_first_batch_loss = new_model.train_on_batch(x_train[:64], y_train[:64])\r\nassert first_batch_loss == new_first_batch_loss\r\n```\r\n\r\nLook more closely:\r\n\r\n```\r\n# Load the state of the old model\r\nnew_model.load_weights('path_to_my_weights')\r\n# The optimizer state is preserved as well\r\n```\r\n\r\nI'm sorry, but, are you serious? Why on earth do you think it's a good idea to let a **load_weights** function restore anything other than the **WEIGHTS** of the model? Is this deep learning from 3019? Maybe it's a documentation issue?\r\n\r\nIf you mean to give the users the option to save or load other variables in addition to the model's weights, please create new functions, e.g. **save_variables()** and **load_variables()**.\r\n\r\n**Will this change the current api? How?**\r\nYes, in a good way.\r\n\r\n**Who will benefit with this feature?**\r\nEverybody.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34035", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34035/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34035/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34035/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34035", "id": 518315269, "node_id": "MDU6SXNzdWU1MTgzMTUyNjk=", "number": 34035, "title": "Issues converting recurrent ML-Agents model to TFLite (Tensorflow 1.15)", "user": {"login": "wrd90", "id": 3441341, "node_id": "MDQ6VXNlcjM0NDEzNDE=", "avatar_url": "https://avatars1.githubusercontent.com/u/3441341?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wrd90", "html_url": "https://github.com/wrd90", "followers_url": "https://api.github.com/users/wrd90/followers", "following_url": "https://api.github.com/users/wrd90/following{/other_user}", "gists_url": "https://api.github.com/users/wrd90/gists{/gist_id}", "starred_url": "https://api.github.com/users/wrd90/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wrd90/subscriptions", "organizations_url": "https://api.github.com/users/wrd90/orgs", "repos_url": "https://api.github.com/users/wrd90/repos", "events_url": "https://api.github.com/users/wrd90/events{/privacy}", "received_events_url": "https://api.github.com/users/wrd90/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-11-06T08:27:22Z", "updated_at": "2019-11-20T09:39:27Z", "closed_at": null, "author_association": "NONE", "body": "Hi\r\n\r\nI have been tryingt to convert a frozen graph def created by [ML-Agents](https://github.com/Unity-Technologies/ml-agents) to TFLite. However, there is an input variable to the model, which is defined by:\r\n\r\n```\r\nself.sequence_length = tf.placeholder(\r\n            shape=None, dtype=tf.int32, name=\"sequence_length\"\r\n        )\r\n```\r\n\r\nwhich seems to cause problems in the conversion.\r\n\r\nIf I convert without passing shapes the following happens:\r\n\r\n```\r\ntflite_convert --output_file=model.tflite --graph_def_file=unity/ml-agents/models/ppo-0/RoverLearning/frozen_graph_def.pb --input_arrays=vector_observation,epsilon,recurrent_in,sequence_length --output_arrays=action\r\n```\r\n\r\n```\r\n2019-11-05 13:59:21.589574: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-11-05 13:59:21.602134: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x7fe2bf9e7280 initialized for platform Host (this does not guarantee that XLA will be used). Devices:\r\n2019-11-05 13:59:21.602151: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version\r\nTraceback (most recent call last):\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/bin/tflite_convert\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/lib/python3.6/site-packages/tensorflow_core/lite/python/tflite_convert.py\", line 515, in main\r\n    app.run(main=run_main, argv=sys.argv[:1])\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/lib/python3.6/site-packages/tensorflow_core/python/platform/app.py\", line 40, in run\r\n    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/lib/python3.6/site-packages/absl/app.py\", line 299, in run\r\n    _run_main(main, args)\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/lib/python3.6/site-packages/absl/app.py\", line 250, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/lib/python3.6/site-packages/tensorflow_core/lite/python/tflite_convert.py\", line 511, in run_main\r\n    _convert_tf1_model(tflite_flags)\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/lib/python3.6/site-packages/tensorflow_core/lite/python/tflite_convert.py\", line 199, in _convert_tf1_model\r\n    output_data = converter.convert()\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/lib/python3.6/site-packages/tensorflow_core/lite/python/lite.py\", line 898, in convert\r\n    self._set_batch_size(batch_size=1)\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/lib/python3.6/site-packages/tensorflow_core/lite/python/lite.py\", line 1032, in _set_batch_size\r\n    shape = tensor.shape.as_list()\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/lib/python3.6/site-packages/tensorflow_core/python/framework/tensor_shape.py\", line 1171, in as_list\r\n    raise ValueError(\"as_list() is not defined on an unknown TensorShape.\")\r\nValueError: as_list() is not defined on an unknown TensorShape.\r\n```\r\nI added some debut messages to `lite.py` and found that the issue is with the variable `sequence_length`\r\n\r\n\r\nIf I pass the shapes to the command like this: \r\n\r\n```\r\ntflite_convert --output_file=model.tflite --graph_def_file=unity/ml-agents/models/ppo-0/RoverLearning/frozen_graph_def.pb --input_arrays=vector_observation,epsilon,recurrent_in,sequence_length --output_arrays=action --input_shapes=1,7:1,2:7,40:1\r\n```\r\n\r\nI get a similar error:\r\n\r\n```\r\n2019-11-05 14:25:44.658772: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-11-05 14:25:44.677569: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x7fee79ed3960 initialized for platform Host (this does not guarantee that XLA will be used). Devices:\r\n2019-11-05 14:25:44.677591: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version\r\n2019-11-05 14:25:44.741840: I tensorflow/core/grappler/devices.cc:60] Number of eligible GPUs (core count >= 8, compute capability >= 0.0): 0 (Note: TensorFlow was not compiled with CUDA support)\r\n2019-11-05 14:25:44.741948: I tensorflow/core/grappler/clusters/single_machine.cc:356] Starting new session\r\n2019-11-05 14:25:44.819310: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:786] Optimization results for grappler item: graph_to_optimize\r\n2019-11-05 14:25:44.819337: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:788]   constant_folding: Graph size after: 304 nodes (-81), 371 edges (-83), time = 56.212ms.\r\n2019-11-05 14:25:44.819342: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:788]   constant_folding: Graph size after: 304 nodes (0), 371 edges (0), time = 8.713ms.\r\nTraceback (most recent call last):\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/bin/tflite_convert\", line 8, in <module>\r\n    sys.exit(main())\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/lib/python3.6/site-packages/tensorflow_core/lite/python/tflite_convert.py\", line 515, in main\r\n    app.run(main=run_main, argv=sys.argv[:1])\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/lib/python3.6/site-packages/tensorflow_core/python/platform/app.py\", line 40, in run\r\n    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/lib/python3.6/site-packages/absl/app.py\", line 299, in run\r\n    _run_main(main, args)\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/lib/python3.6/site-packages/absl/app.py\", line 250, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/lib/python3.6/site-packages/tensorflow_core/lite/python/tflite_convert.py\", line 511, in run_main\r\n    _convert_tf1_model(tflite_flags)\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/lib/python3.6/site-packages/tensorflow_core/lite/python/tflite_convert.py\", line 199, in _convert_tf1_model\r\n    output_data = converter.convert()\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/lib/python3.6/site-packages/tensorflow_core/lite/python/lite.py\", line 983, in convert\r\n    **converter_kwargs)\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/lib/python3.6/site-packages/tensorflow_core/lite/python/convert.py\", line 449, in toco_convert_impl\r\n    enable_mlir_converter=enable_mlir_converter)\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/lib/python3.6/site-packages/tensorflow_core/lite/python/convert.py\", line 200, in toco_convert_protos\r\n    raise ConverterError(\"See console for info.\\n%s\\n%s\\n\" % (stdout, stderr))\r\ntensorflow.lite.python.convert.ConverterError: See console for info.\r\n2019-11-05 14:25:46.811578: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2019-11-05 14:25:46.811623: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2019-11-05 14:25:46.811639: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2019-11-05 14:25:46.811649: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2019-11-05 14:25:46.811675: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2019-11-05 14:25:46.811685: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2019-11-05 14:25:46.811695: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2019-11-05 14:25:46.811705: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2019-11-05 14:25:46.811986: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2019-11-05 14:25:46.812009: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2019-11-05 14:25:46.812022: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2019-11-05 14:25:46.812033: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2019-11-05 14:25:46.812378: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorArrayV3\r\n2019-11-05 14:25:46.812411: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 20\r\n2019-11-05 14:25:46.812433: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorArrayV3\r\n2019-11-05 14:25:46.812448: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 20\r\n2019-11-05 14:25:46.812468: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2019-11-05 14:25:46.812497: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorArrayV3\r\n2019-11-05 14:25:46.812507: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 20\r\n2019-11-05 14:25:46.812525: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2019-11-05 14:25:46.812544: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2019-11-05 14:25:46.812559: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2019-11-05 14:25:46.812567: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 20\r\n2019-11-05 14:25:46.812580: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2019-11-05 14:25:46.812588: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 20\r\n2019-11-05 14:25:46.812613: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorArrayScatterV3\r\n2019-11-05 14:25:46.812631: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2019-11-05 14:25:46.812640: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 20\r\n2019-11-05 14:25:46.812661: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorArrayScatterV3\r\n2019-11-05 14:25:46.812680: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2019-11-05 14:25:46.812694: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2019-11-05 14:25:46.812708: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2019-11-05 14:25:46.812724: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Enter\r\n2019-11-05 14:25:46.812751: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: LoopCond\r\n2019-11-05 14:25:46.812763: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: LoopCond\r\n2019-11-05 14:25:46.812864: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Exit\r\n2019-11-05 14:25:46.812928: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorArrayReadV3\r\n2019-11-05 14:25:46.812951: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorArraySizeV3\r\n2019-11-05 14:25:46.813037: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorArrayReadV3\r\n2019-11-05 14:25:46.813111: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorArrayGatherV3\r\n2019-11-05 14:25:46.813301: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorArrayWriteV3\r\n2019-11-05 14:25:46.816417: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 185 operators, 322 arrays (0 quantized)\r\n2019-11-05 14:25:46.818204: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After Removing unused ops pass 1: 103 operators, 180 arrays (0 quantized)\r\n2019-11-05 14:25:46.819853: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 103 operators, 180 arrays (0 quantized)\r\n2019-11-05 14:25:46.819987: F tensorflow/lite/toco/graph_transformations/propagate_fixed_sizes.cc:1616] Check failed: *packed_shape == shape All input arrays to Pack operators must have the same shape. Input \"sequence_length\" is different.\r\nFatal Python error: Aborted\r\n\r\nCurrent thread 0x0000000111d5b5c0 (most recent call first):\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/lib/python3.6/site-packages/tensorflow_core/lite/toco/python/toco_from_protos.py\", line 52 in execute\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/lib/python3.6/site-packages/absl/app.py\", line 250 in _run_main\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/lib/python3.6/site-packages/absl/app.py\", line 299 in run\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/lib/python3.6/site-packages/tensorflow_core/python/platform/app.py\", line 40 in run\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/lib/python3.6/site-packages/tensorflow_core/lite/toco/python/toco_from_protos.py\", line 89 in main\r\n  File \"/Users/dwright/anaconda3/envs/mlagents/bin/toco_from_protos\", line 8 in <module>\r\n```\r\n\r\nAny help is highly appreciated! "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34032", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34032/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34032/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34032/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34032", "id": 518265594, "node_id": "MDU6SXNzdWU1MTgyNjU1OTQ=", "number": 34032, "title": "build tensorflow com_google_protobuf//:protobuf_lite' failed ", "user": {"login": "horo2016", "id": 22364845, "node_id": "MDQ6VXNlcjIyMzY0ODQ1", "avatar_url": "https://avatars0.githubusercontent.com/u/22364845?v=4", "gravatar_id": "", "url": "https://api.github.com/users/horo2016", "html_url": "https://github.com/horo2016", "followers_url": "https://api.github.com/users/horo2016/followers", "following_url": "https://api.github.com/users/horo2016/following{/other_user}", "gists_url": "https://api.github.com/users/horo2016/gists{/gist_id}", "starred_url": "https://api.github.com/users/horo2016/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/horo2016/subscriptions", "organizations_url": "https://api.github.com/users/horo2016/orgs", "repos_url": "https://api.github.com/users/horo2016/repos", "events_url": "https://api.github.com/users/horo2016/events{/privacy}", "received_events_url": "https://api.github.com/users/horo2016/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-11-06T06:23:36Z", "updated_at": "2019-12-23T02:44:04Z", "closed_at": null, "author_association": "NONE", "body": "                                                                     ^\r\ntensorflow/python/framework/python_op_gen_internal.cc:565:48: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\r\n   for (int i = 0; i < params_with_default.size(); ++i) {\r\n                                                ^\r\nERROR: /home/lid/.cache/bazel/_bazel_root/61773a13f73ad6653303d056b5da0c0b/external/com_google_protobuf/BUILD:106:1: C++ compilation of rule '@com_google_protobuf//:protobuf_lite' failed (Exit 1): arm-linux-gnueabi-gcc failed: error executing command \r\n  (cd /home/lid/.cache/bazel/_bazel_root/61773a13f73ad6653303d056b5da0c0b/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin \\\r\n    PWD=/proc/self/cwd \\\r\n  /sources/toolchain/gcc-linaro-4.9.4-2017.01-x86_64_arm-linux-gnueabi/bin/arm-linux-gnueabi-gcc -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -g0 -O2 -DNDEBUG -ffunction-sections -fdata-sections '-std=c++11' -isystem /usr/include -isystem /usr/include/arm-linux-gnueabi -MD -MF bazel-out/armeabi-opt/bin/external/com_google_protobuf/_objs/protobuf_lite/strutil.pic.d '-frandom-seed=bazel-out/armeabi-opt/bin/external/com_google_protobuf/_objs/protobuf_lite/strutil.pic.o' -fPIC -iquote external/com_google_protobuf -iquote bazel-out/armeabi-opt/genfiles/external/com_google_protobuf -iquote bazel-out/armeabi-opt/bin/external/com_google_protobuf -isystem external/com_google_protobuf/src -isystem bazel-out/armeabi-opt/genfiles/external/com_google_protobuf/src -isystem bazel-out/armeabi-opt/bin/external/com_google_protobuf/src '-march=armv7-a' '-mfpu=neon-vfpv4' '-mfloat-abi=hard' -O3 '-std=c++11' '-DS_IREAD=S_IRUSR' '-DS_IWRITE=S_IWUSR' -funsafe-math-optimizations -ftree-vectorize -fomit-frame-pointer -DRASPBERRY_PI -DHAVE_PTHREAD -DHAVE_ZLIB -Woverloaded-virtual -Wno-sign-compare -Wno-unused-function -Wno-write-strings -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -no-canonical-prefixes -fno-canonical-system-headers -c external/com_google_protobuf/src/google/protobuf/stubs/strutil.cc -o bazel-out/armeabi-opt/bin/external/com_google_protobuf/_objs/protobuf_lite/strutil.pic.o)\r\nExecution platform: @bazel_tools//platforms:host_platform\r\nIn file included from /usr/include/bits/byteswap.h:35:0,\r\n                 from /usr/include/endian.h:60,\r\n                 from /usr/include/bits/waitstatus.h:64,\r\n                 from /usr/include/stdlib.h:42,\r\n                 from external/com_google_protobuf/src/google/protobuf/stubs/strutil.h:36,\r\n                 from external/com_google_protobuf/src/google/protobuf/stubs/strutil.cc:33:\r\nexternal/com_google_protobuf/src/google/protobuf/stubs/port.h: In function 'int google::protobuf::Base64EscapeInternal(const unsigned char*, int, char*, int, const char*, bool)':\r\nexternal/com_google_protobuf/src/google/protobuf/stubs/port.h:380:45: error: invalid 'asm': invalid operand for code 'w'\r\n   static uint16 ToHost16(uint16 x) { return bswap_16(x); }\r\n                                             ^\r\nexternal/com_google_protobuf/src/google/protobuf/stubs/port.h:380:45: error: invalid 'asm': invalid operand for code 'w'\r\n   static uint16 ToHost16(uint16 x) { return bswap_16(x); }\r\n                                             ^\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nINFO: Elapsed time: 1203.894s, Critical Path: 62.17s\r\nINFO: 901 processes: 901 local.\r\nFAILED: Build did NOT complete successfully\r\nlid@lid-VirtualBox:~/cc_work/tensorflow-on-arm-2.0.0/build_tensorflow$ \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34025", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34025/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34025/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34025/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34025", "id": 518163928, "node_id": "MDU6SXNzdWU1MTgxNjM5Mjg=", "number": 34025, "title": "Understanding warning \"5 out of the last 5 calls to <function XXX> triggered tf.function retracing\"", "user": {"login": "ywpkwon", "id": 18429284, "node_id": "MDQ6VXNlcjE4NDI5Mjg0", "avatar_url": "https://avatars1.githubusercontent.com/u/18429284?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ywpkwon", "html_url": "https://github.com/ywpkwon", "followers_url": "https://api.github.com/users/ywpkwon/followers", "following_url": "https://api.github.com/users/ywpkwon/following{/other_user}", "gists_url": "https://api.github.com/users/ywpkwon/gists{/gist_id}", "starred_url": "https://api.github.com/users/ywpkwon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ywpkwon/subscriptions", "organizations_url": "https://api.github.com/users/ywpkwon/orgs", "repos_url": "https://api.github.com/users/ywpkwon/repos", "events_url": "https://api.github.com/users/ywpkwon/events{/privacy}", "received_events_url": "https://api.github.com/users/ywpkwon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-11-06T00:45:43Z", "updated_at": "2020-03-09T06:18:55Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code: Yes, below.\r\n- Linux Ubuntu 16.04 \r\n- TensorFlow 2.1.0-dev20191103, binary install.\r\n- Python 3.6\r\n- CUDA 10.0 / cnDNN 7.6.4\r\n- 4 * NVIDIA TITAN X (12GB)\r\n\r\nI defined a very simple training script with a custom loss function and `.fit()` as below. The `loss_fn`  is very simple and I think every time it takes tensors **of the same shape and type**. But I'm getting the **following warning message**. Interesting is that I'm getting the message only when training **with multiple GPUs**. Is it a bug? Is it harmful? Is it really affecting the computational cost?\r\n\r\nWarning message:\r\n```\r\nWARNING:tensorflow:5 out of the last 5 calls to <function loss_fn at 0x7f0070ef0e18> triggered tf.function retracing. Tracing is expensive and the excessive number of tracings is likely due to passing python objects instead of tensors. Also, tf.function has experimental_re\r\nlax_shapes=True option that relaxes argument shapes that can avoid unnecessary retracing. Please refer to https://www.tensorflow.org/tutorials/customization/performance#python_or_tensor_args and https://www.tensorflow.org/api_docs/python/tf/function for more details.\r\n```\r\nCode:\r\n````python\r\nfrom __future__ import absolute_import, division, print_function, unicode_literals\r\nimport numpy as np\r\nimport tensorflow as tf\r\nfrom tensorflow import keras\r\nfrom tensorflow.keras.layers import (Conv2D, Conv3D, Dense)\r\n\r\n\r\n@tf.function\r\ndef loss_fn(y_pred, y_true):\r\n    return tf.reduce_mean(tf.math.square(y_pred - y_true))\r\n\r\nif __name__ == \"__main__\":\r\n\r\n    BATCH_SIZE_PER_SYNC = 4\r\n    strategy = tf.distribute.MirroredStrategy()\r\n    num_gpus = strategy.num_replicas_in_sync\r\n    global_batch_size = BATCH_SIZE_PER_SYNC * num_gpus\r\n    print('num GPUs: {}, global batch size: {}'.format(num_gpus, global_batch_size))\r\n\r\n\r\n    # fake data ------------------------------------------------------\r\n    fakea = np.random.rand(global_batch_size, 10, 200, 200, 128).astype(np.float32)\r\n    targets = np.random.rand(global_batch_size, 200, 200, 14).astype(np.float32)\r\n\r\n    fakea = tf.constant(fakea)\r\n    targets = tf.constant(targets)\r\n\r\n    # tf.Dataset ------------------------------------------------------\r\n    def gen():\r\n        while True:\r\n            yield (fakea, targets)\r\n\r\n    dataset = tf.data.Dataset.from_generator(gen,\r\n        (tf.float32, tf.float32),\r\n        (tf.TensorShape(fakea.shape), tf.TensorShape(targets.shape)))\r\n\r\n    dataset = dataset.prefetch(buffer_size=tf.data.experimental.AUTOTUNE)\r\n\r\n    # training ------------------------------------------------------\r\n    callbacks = [tf.keras.callbacks.TensorBoard(log_dir='./logs')]\r\n    training = True\r\n    with strategy.scope():\r\n        va = keras.Input(shape=(10, 200, 200, 128), dtype=tf.float32, name='va')\r\n        x = Conv3D(64, kernel_size=3, strides=1, padding='same')(va)\r\n        x = Conv3D(64, kernel_size=3, strides=1, padding='same')(x)\r\n        x = Conv3D(64, kernel_size=3, strides=1, padding='same')(x)\r\n        x = tf.reduce_max(x, axis=1, name='maxpool')                         \r\n        b = Conv2D(14, kernel_size=3, padding='same')(x)\r\n        model = keras.Model(inputs=va, outputs=b, name='net')\r\n        optimizer = keras.optimizers.RMSprop()\r\n\r\n        model.compile(optimizer=optimizer, loss=loss_fn)\r\n        model.fit(x=dataset, epochs=10, steps_per_epoch=100, callbacks=callbacks)\r\n````\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34021", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34021/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34021/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34021/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34021", "id": 518077502, "node_id": "MDU6SXNzdWU1MTgwNzc1MDI=", "number": 34021, "title": "Unable to save TensorFlow Keras LSTM model to SavedModel format", "user": {"login": "tmartin293", "id": 25806180, "node_id": "MDQ6VXNlcjI1ODA2MTgw", "avatar_url": "https://avatars3.githubusercontent.com/u/25806180?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmartin293", "html_url": "https://github.com/tmartin293", "followers_url": "https://api.github.com/users/tmartin293/followers", "following_url": "https://api.github.com/users/tmartin293/following{/other_user}", "gists_url": "https://api.github.com/users/tmartin293/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmartin293/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmartin293/subscriptions", "organizations_url": "https://api.github.com/users/tmartin293/orgs", "repos_url": "https://api.github.com/users/tmartin293/repos", "events_url": "https://api.github.com/users/tmartin293/events{/privacy}", "received_events_url": "https://api.github.com/users/tmartin293/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-11-05T22:07:28Z", "updated_at": "2020-03-06T01:13:10Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): pip installed\r\n- TensorFlow version (use command below): v2.0.0-rc2-26-g64c3d382ca 2.0.0\r\n- Python version: 3.7.1\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nUnable to save TensorFlow Keras LSTM model to SavedModel format for exporting to Google Cloud and Google AI platform.\r\n\r\nError message: ValueError: Attempted to save a function b'__inference_lstm_2_layer_call_fn_36083' which references a symbolic Tensor Tensor(\"dropout/mul_1:0\", shape=(None, 1280), dtype=float32) that is not a simple constant. This is not supported.\r\n\r\n**Describe the expected behavior**\r\nLSTM model would be saved in the SavedModel format to be exported into a Google Cloud bucket to work with Google's AI platform.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n`import tensorflow as tf\r\nimport os\r\nimport cv2\r\nimport numpy as np\r\nimport matplotlib.pyplot as plt\r\nimport tqdm\r\nimport datetime\r\nfrom sklearn.preprocessing import LabelBinarizer \r\n\r\nmodel = tf.keras.Sequential([\r\n    tf.keras.layers.Masking(mask_value=0.),\r\n    tf.keras.layers.LSTM(512, dropout=0.5, recurrent_dropout=0.5),\r\n    tf.keras.layers.Dense(256, activation='relu'),\r\n    tf.keras.layers.Dropout(0.5),\r\n    tf.keras.layers.Dense(len(LABELS), activation='softmax')\r\n])\r\n\r\nmodel.compile(loss='categorical_crossentropy',\r\n              optimizer='rmsprop',\r\n              metrics=['accuracy', 'top_k_categorical_accuracy'])\r\n\r\ntest_file = 'C:/.../testlist01.txt'\r\ntrain_file = 'C:/.../trainlist01.txt'\r\n\r\nwith open(test_file) as f:\r\n    test_list = [row.strip() for row in list(f)]\r\n\r\nwith open(train_file) as f:\r\n    train_list = [row.strip() for row in list(f)]\r\n    train_list = [row.split(' ')[0] for row in train_list]\r\n\r\ndef make_generator(file_list):\r\n    def generator():\r\n        np.random.shuffle(file_list)\r\n        for path in file_list:\r\n            full_path = os.path.join(BASE_PATH, path).replace('.avi', '.npy')\r\n\r\n            label = os.path.basename(os.path.dirname(path))\r\n            features = np.load(full_path)\r\n\r\n            padded_sequence = np.zeros((SEQUENCE_LENGTH, 1280))\r\n            padded_sequence[0:len(features)] = np.array(features)\r\n\r\n            transformed_label = encoder.transform([label])\r\n            yield padded_sequence, transformed_label[0]\r\n    return generator\r\n\r\ntrain_dataset = tf.data.Dataset.from_generator(make_generator(train_list),\r\n                 output_types=(tf.float32, tf.int16),\r\n                 output_shapes=((SEQUENCE_LENGTH, 1280), (len(LABELS))))\r\ntrain_dataset = train_dataset.batch(16).prefetch(tf.data.experimental.AUTOTUNE)\r\n\r\nvalid_dataset = tf.data.Dataset.from_generator(make_generator(test_list),\r\n                 output_types=(tf.float32, tf.int16),\r\n                 output_shapes=((SEQUENCE_LENGTH, 1280), (len(LABELS))))\r\nvalid_dataset = valid_dataset.batch(16).prefetch(tf.data.experimental.AUTOTUNE)\r\n\r\nmodel.fit(train_dataset, epochs=17, validation_data=valid_dataset)\r\n\r\nBASE_DIRECTORY = 'C:\\\\...\\\\saved_model\\\\LSTM\\\\1\\\\';\r\ntf.saved_model.save(model, BASE_DIRECTORY)\r\n`\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34010", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34010/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34010/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34010/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34010", "id": 517760147, "node_id": "MDU6SXNzdWU1MTc3NjAxNDc=", "number": 34010, "title": "TFLite 5D Tensors with the OpenCL Back-End", "user": {"login": "guydavid", "id": 49722543, "node_id": "MDQ6VXNlcjQ5NzIyNTQz", "avatar_url": "https://avatars1.githubusercontent.com/u/49722543?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guydavid", "html_url": "https://github.com/guydavid", "followers_url": "https://api.github.com/users/guydavid/followers", "following_url": "https://api.github.com/users/guydavid/following{/other_user}", "gists_url": "https://api.github.com/users/guydavid/gists{/gist_id}", "starred_url": "https://api.github.com/users/guydavid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guydavid/subscriptions", "organizations_url": "https://api.github.com/users/guydavid/orgs", "repos_url": "https://api.github.com/users/guydavid/repos", "events_url": "https://api.github.com/users/guydavid/events{/privacy}", "received_events_url": "https://api.github.com/users/guydavid/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, {"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-11-05T13:04:09Z", "updated_at": "2019-11-22T20:43:52Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "I am planning to gradually add support for 5D tensors in TFLite in the OpenCL GPU back-end, which was not available in r2.0.\r\nMy main concern with the OpenGL API was the limit on the number of dimensions that work groups have, but that's no longer the issue with OpenCL as it seems to allow N-dimensional work groups.\r\n\r\nWhat is the status of the OpenCL back-end? What about 5D tensors? (this is a massive re-write so it would be cool to know there's no duplicate work)\r\nWhy was the initial GPU back-end implemented with OpenGL and not OpenCL?\r\n\r\nMy ultimate goal is to support Conv3D. #19658\r\n\r\nEDIT:\r\nWhile its true that OpenCL's API allows N-dimensional work groups, I came across the CL_DEVICE_MAX_WORK_ITEM_DIMENSIONS. This setting is bound to 3 on all of the GPUs I queried, any tips to how go around it? or should I do multiple enqueue's?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34007", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34007/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34007/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/34007/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/34007", "id": 517719682, "node_id": "MDU6SXNzdWU1MTc3MTk2ODI=", "number": 34007, "title": "Comments on the \"Custom model_fn with TF 2.0 symbols\" section of the \"Migrate your TensorFlow 1 code to TensorFlow 2\" guide", "user": {"login": "durandg12", "id": 45902885, "node_id": "MDQ6VXNlcjQ1OTAyODg1", "avatar_url": "https://avatars0.githubusercontent.com/u/45902885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/durandg12", "html_url": "https://github.com/durandg12", "followers_url": "https://api.github.com/users/durandg12/followers", "following_url": "https://api.github.com/users/durandg12/following{/other_user}", "gists_url": "https://api.github.com/users/durandg12/gists{/gist_id}", "starred_url": "https://api.github.com/users/durandg12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/durandg12/subscriptions", "organizations_url": "https://api.github.com/users/durandg12/orgs", "repos_url": "https://api.github.com/users/durandg12/repos", "events_url": "https://api.github.com/users/durandg12/events{/privacy}", "received_events_url": "https://api.github.com/users/durandg12/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "lamberta", "id": 43051, "node_id": "MDQ6VXNlcjQzMDUx", "avatar_url": "https://avatars2.githubusercontent.com/u/43051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lamberta", "html_url": "https://github.com/lamberta", "followers_url": "https://api.github.com/users/lamberta/followers", "following_url": "https://api.github.com/users/lamberta/following{/other_user}", "gists_url": "https://api.github.com/users/lamberta/gists{/gist_id}", "starred_url": "https://api.github.com/users/lamberta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lamberta/subscriptions", "organizations_url": "https://api.github.com/users/lamberta/orgs", "repos_url": "https://api.github.com/users/lamberta/repos", "events_url": "https://api.github.com/users/lamberta/events{/privacy}", "received_events_url": "https://api.github.com/users/lamberta/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lamberta", "id": 43051, "node_id": "MDQ6VXNlcjQzMDUx", "avatar_url": "https://avatars2.githubusercontent.com/u/43051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lamberta", "html_url": "https://github.com/lamberta", "followers_url": "https://api.github.com/users/lamberta/followers", "following_url": "https://api.github.com/users/lamberta/following{/other_user}", "gists_url": "https://api.github.com/users/lamberta/gists{/gist_id}", "starred_url": "https://api.github.com/users/lamberta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lamberta/subscriptions", "organizations_url": "https://api.github.com/users/lamberta/orgs", "repos_url": "https://api.github.com/users/lamberta/repos", "events_url": "https://api.github.com/users/lamberta/events{/privacy}", "received_events_url": "https://api.github.com/users/lamberta/received_events", "type": "User", "site_admin": false}, {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-11-05T11:36:55Z", "updated_at": "2019-11-17T19:45:19Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\n\r\nPlease provide a link to the documentation entry, for example:\r\nhttps://www.tensorflow.org/guide/migrate#custom_model_fn_with_tf_20_symbols\r\n\r\n## Description of issue (what needs changing):\r\n\r\nMy comments are about this piece of code:\r\n```\r\ndef my_model_fn(features, labels, mode):\r\n  model = make_model()\r\n\r\n  training = (mode == tf.estimator.ModeKeys.TRAIN)\r\n  loss_obj = tf.keras.losses.SparseCategoricalCrossentropy()\r\n  predictions = model(features, training=training)\r\n\r\n  # Get both the unconditional losses (the None part)\r\n  # and the input-conditional losses (the features part).\r\n  reg_losses = model.get_losses_for(None) + model.get_losses_for(features)\r\n  total_loss = loss_obj(labels, predictions) + tf.math.add_n(reg_losses)\r\n\r\n  # Upgrade to tf.keras.metrics.\r\n  accuracy_obj = tf.keras.metrics.Accuracy(name='acc_obj')\r\n  accuracy = accuracy_obj.update_state(\r\n      y_true=labels, y_pred=tf.math.argmax(predictions, axis=1))\r\n\r\n  train_op = None\r\n  if training:\r\n    # Upgrade to tf.keras.optimizers.\r\n    optimizer = tf.keras.optimizers.Adam()\r\n    # Manually assign tf.compat.v1.global_step variable to optimizer.iterations\r\n    # to make tf.compat.v1.train.global_step increased correctly.\r\n    # This assignment is a must for any `tf.train.SessionRunHook` specified in\r\n    # estimator, as SessionRunHooks rely on global step.\r\n    optimizer.iterations = tf.compat.v1.train.get_or_create_global_step()\r\n    # Get both the unconditional updates (the None part)\r\n    # and the input-conditional updates (the features part).\r\n    update_ops = model.get_updates_for(None) + model.get_updates_for(features)\r\n    # Compute the minimize_op.\r\n    minimize_op = optimizer.get_updates(\r\n        total_loss,\r\n        model.trainable_variables)[0]\r\n    train_op = tf.group(minimize_op, *update_ops)\r\n\r\n  return tf.estimator.EstimatorSpec(\r\n    mode=mode,\r\n    predictions=predictions,\r\n    loss=total_loss,\r\n    train_op=train_op,\r\n    eval_metric_ops={'Accuracy': accuracy_obj})\r\n\r\n# Create the Estimator & Train.\r\nestimator = tf.estimator.Estimator(model_fn=my_model_fn)\r\ntf.estimator.train_and_evaluate(estimator, train_spec, eval_spec)\r\n```\r\nMy first comment is: why write\r\n```\r\naccuracy = accuracy_obj.update_state(\r\n      y_true=labels, y_pred=tf.math.argmax(predictions, axis=1))\r\n```\r\ninstead of just `accuracy_obj.update_state(y_true=labels, y_pred=tf.math.argmax(predictions, axis=1))` ? First, `accuracy`is never used. Second, this may lead the reader to believe that the `tf.keras.metrics.Metric.update_state` outputs the accuracy value, just like the `tf.keras.metrics.Metric.result` method, whereas the output of `update_state` is `accuracy_obj.count`. See on the code below:\r\n```\r\nimport tensorflow as tf\r\n\r\naccuracy_obj = tf.keras.metrics.Accuracy(name='acc_obj')\r\naccuracy = accuracy_obj.update_state(\r\n      y_true=[0, 1], y_pred=tf.math.argmax([[0.3, 0.7], [0.3, 0.7]], axis=1))\r\n\r\ntf.print(accuracy)\r\n# 2\r\ntf.print(accuracy_obj.result())\r\n# 0.5\r\ntf.print(accuracy_obj.count)\r\n# 2\r\n```\r\n\r\nMy other comment is that we have the line `train_op = tf.group(minimize_op, *update_ops)` whereas in the [\"Custom model_fn with minimal changes\" section](https://www.tensorflow.org/guide/migrate#custom_model_fn_with_minimal_changes) the corresponding line is `train_op = tf.group(minimize_op, update_ops)` without the `*`. Why is that? Is this a mistake?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33998", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33998/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33998/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33998/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33998", "id": 517567341, "node_id": "MDU6SXNzdWU1MTc1NjczNDE=", "number": 33998, "title": "tf.tensor_scatter_nd_update() doesn't work in custom layer/graph to update a  2D Tensor with indices", "user": {"login": "Sawatdatta", "id": 25773698, "node_id": "MDQ6VXNlcjI1NzczNjk4", "avatar_url": "https://avatars1.githubusercontent.com/u/25773698?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Sawatdatta", "html_url": "https://github.com/Sawatdatta", "followers_url": "https://api.github.com/users/Sawatdatta/followers", "following_url": "https://api.github.com/users/Sawatdatta/following{/other_user}", "gists_url": "https://api.github.com/users/Sawatdatta/gists{/gist_id}", "starred_url": "https://api.github.com/users/Sawatdatta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Sawatdatta/subscriptions", "organizations_url": "https://api.github.com/users/Sawatdatta/orgs", "repos_url": "https://api.github.com/users/Sawatdatta/repos", "events_url": "https://api.github.com/users/Sawatdatta/events{/privacy}", "received_events_url": "https://api.github.com/users/Sawatdatta/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-11-05T06:12:41Z", "updated_at": "2020-02-22T11:20:47Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): **Yes**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): **Linux Ubuntu 18.04**\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: **NA**\r\n- TensorFlow installed from (source or binary): **binary**\r\n- TensorFlow version (use command below): **2.0**\r\n- Python version: **3.7**\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:*10.0/7.3.0*                                                                                                                    \r\n                                                                                                                                                              \r\n                                                                    **\r\n- GPU model and memory: GeForce 940m\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**  ValueError: Shape must be at least rank 1 but is rank 0 for 'TensorScatterUpdate' (op: 'TensorScatterUpdate') with input shapes: [64,64], [2], [].\r\n\r\n**Describe the expected behavior** : it should update the tensor given the row, column position\r\n\r\n**Code to reproduce the issue**\r\n**The following code is part of the custom layer and written in call function, the layer is not trainable hence I used Tensor instead of tf.Variable, size of sub_sub_mapl Tensor is 64,64, temp_val will be scalar, and m, n are a row & column position to be updated**\r\n\r\n                 ```\r\n temp_val = tf.convert_to_tensor(\r\n                    tf.add(tf.math.reduce_max(mat[i, j:j + 2]), tf.math.reduce_max(mat[i, l:l + 2])) / 2)\r\n                  indices = tf.constant([m, n], dtype=tf.int32)\r\n                  tf.tensor_scatter_nd_update(self.sub_sub_mapl, indices, temp_val)\r\n```\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nTraceback (most recent call last):\r\n  File \"F:/pom/pom_cust_layer_parallel_v5.py\", line 93, in <module>\r\n    tf.keras.layers.Dense(num_classes, activation='softmax')])\r\n  File \"F:\\tf2venv\\lib\\site-packages\\tensorflow_core\\python\\training\\tracking\\base.py\", line 457, in _method_wrapper\r\n    result = method(self, *args, **kwargs)\r\n  File \"F:\\tf2venv\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\sequential.py\", line 114, in __init__\r\n    self.add(layer)\r\n  File \"F:\\tf2venv\\lib\\site-packages\\tensorflow_core\\python\\training\\tracking\\base.py\", line 457, in _method_wrapper\r\n    result = method(self, *args, **kwargs)\r\n  File \"F:\\tf2venv\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\sequential.py\", line 196, in add\r\n    output_tensor = layer(self.outputs[0])\r\n  File \"F:\\tf2venv\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\base_layer.py\", line 842, in __call__\r\n    outputs = call_fn(cast_inputs, *args, **kwargs)\r\n  File \"F:\\tf2venv\\lib\\site-packages\\tensorflow_core\\python\\autograph\\impl\\api.py\", line 237, in wrapper\r\n    raise e.ag_error_metadata.to_exception(e)\r\nValueError: in converted code:\r\n    relative to F::\r\n\r\n    pom/pom_cust_layer_parallel_v5.py:71 call  *\r\n        self.MAPL = tf.map_fn(fn=self.get_avg_pool, elems=input)\r\n    tf2venv\\lib\\site-packages\\tensorflow_core\\python\\ops\\map_fn.py:268 map_fn\r\n        maximum_iterations=n)\r\n    tf2venv\\lib\\site-packages\\tensorflow_core\\python\\ops\\control_flow_ops.py:2675 while_loop\r\n        back_prop=back_prop)\r\n    tf2venv\\lib\\site-packages\\tensorflow_core\\python\\ops\\while_v2.py:198 while_loop\r\n        add_control_dependencies=add_control_dependencies)\r\n    tf2venv\\lib\\site-packages\\tensorflow_core\\python\\framework\\func_graph.py:915 func_graph_from_py_func\r\n        func_outputs = python_func(*func_args, **func_kwargs)\r\n    tf2venv\\lib\\site-packages\\tensorflow_core\\python\\ops\\while_v2.py:176 wrapped_body\r\n        outputs = body(*_pack_sequence_as(orig_loop_vars, args))\r\n    tf2venv\\lib\\site-packages\\tensorflow_core\\python\\ops\\map_fn.py:257 compute\r\n        packed_fn_values = fn(packed_values)\r\n    pom/pom_cust_layer_parallel_v5.py:62 get_avg_pool\r\n        self.sub_mapl = tf.map_fn(fn=self.get_avg_pool_channel, elems=mat_unstacked)\r\n    tf2venv\\lib\\site-packages\\tensorflow_core\\python\\ops\\map_fn.py:268 map_fn\r\n        maximum_iterations=n)\r\n    tf2venv\\lib\\site-packages\\tensorflow_core\\python\\ops\\control_flow_ops.py:2675 while_loop\r\n        back_prop=back_prop)\r\n    tf2venv\\lib\\site-packages\\tensorflow_core\\python\\ops\\while_v2.py:198 while_loop\r\n        add_control_dependencies=add_control_dependencies)\r\n    tf2venv\\lib\\site-packages\\tensorflow_core\\python\\framework\\func_graph.py:915 func_graph_from_py_func\r\n        func_outputs = python_func(*func_args, **func_kwargs)\r\n    tf2venv\\lib\\site-packages\\tensorflow_core\\python\\ops\\while_v2.py:176 wrapped_body\r\n        outputs = body(*_pack_sequence_as(orig_loop_vars, args))\r\n    tf2venv\\lib\\site-packages\\tensorflow_core\\python\\ops\\map_fn.py:257 compute\r\n        packed_fn_values = fn(packed_values)\r\n    pom/pom_cust_layer_parallel_v5.py:50 get_avg_pool_channel\r\n        tf.tensor_scatter_nd_update(self.sub_sub_mapl, indices, temp_val)\r\n    tf2venv\\lib\\site-packages\\tensorflow_core\\python\\ops\\gen_array_ops.py:11087 tensor_scatter_update\r\n        updates=updates, name=name)\r\n    tf2venv\\lib\\site-packages\\tensorflow_core\\python\\framework\\op_def_library.py:793 _apply_op_helper\r\n        op_def=op_def)\r\n    tf2venv\\lib\\site-packages\\tensorflow_core\\python\\framework\\func_graph.py:548 create_op\r\n        compute_device)\r\n    tf2venv\\lib\\site-packages\\tensorflow_core\\python\\framework\\ops.py:3429 _create_op_internal\r\n        op_def=op_def)\r\n    tf2venv\\lib\\site-packages\\tensorflow_core\\python\\framework\\ops.py:1773 __init__\r\n        control_input_ops)\r\n    tf2venv\\lib\\site-packages\\tensorflow_core\\python\\framework\\ops.py:1613 _create_c_op\r\n        raise ValueError(str(e))\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33988", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33988/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33988/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33988/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33988", "id": 517369935, "node_id": "MDU6SXNzdWU1MTczNjk5MzU=", "number": 33988, "title": "Keras .fit() yields incorrect results when using a custom loss function", "user": {"login": "netw0rkf10w", "id": 8569515, "node_id": "MDQ6VXNlcjg1Njk1MTU=", "avatar_url": "https://avatars1.githubusercontent.com/u/8569515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/netw0rkf10w", "html_url": "https://github.com/netw0rkf10w", "followers_url": "https://api.github.com/users/netw0rkf10w/followers", "following_url": "https://api.github.com/users/netw0rkf10w/following{/other_user}", "gists_url": "https://api.github.com/users/netw0rkf10w/gists{/gist_id}", "starred_url": "https://api.github.com/users/netw0rkf10w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/netw0rkf10w/subscriptions", "organizations_url": "https://api.github.com/users/netw0rkf10w/orgs", "repos_url": "https://api.github.com/users/netw0rkf10w/repos", "events_url": "https://api.github.com/users/netw0rkf10w/events{/privacy}", "received_events_url": "https://api.github.com/users/netw0rkf10w/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-11-04T20:01:28Z", "updated_at": "2019-11-08T09:31:51Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Colab\r\n- TensorFlow version (use command below): 2.0.0\r\n\r\n**Describe the current behavior**\r\nWhen using a custom loss function, Keras' `.fit()` produces incorrect results.\r\n\r\n**Code to reproduce the issue**\r\nSee this [Colab Notebook](https://colab.research.google.com/drive/1Q5hVfxVKdeqtIPWrYuvsPQ-IE0dUOeWO)."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33987", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33987/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33987/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33987/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33987", "id": 517360115, "node_id": "MDU6SXNzdWU1MTczNjAxMTU=", "number": 33987, "title": "Update `nogpu` tag references to be `no_gpu` instead?", "user": {"login": "deven-amd", "id": 36858332, "node_id": "MDQ6VXNlcjM2ODU4MzMy", "avatar_url": "https://avatars2.githubusercontent.com/u/36858332?v=4", "gravatar_id": "", "url": "https://api.github.com/users/deven-amd", "html_url": "https://github.com/deven-amd", "followers_url": "https://api.github.com/users/deven-amd/followers", "following_url": "https://api.github.com/users/deven-amd/following{/other_user}", "gists_url": "https://api.github.com/users/deven-amd/gists{/gist_id}", "starred_url": "https://api.github.com/users/deven-amd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/deven-amd/subscriptions", "organizations_url": "https://api.github.com/users/deven-amd/orgs", "repos_url": "https://api.github.com/users/deven-amd/repos", "events_url": "https://api.github.com/users/deven-amd/events{/privacy}", "received_events_url": "https://api.github.com/users/deven-amd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "chsigg", "id": 7523982, "node_id": "MDQ6VXNlcjc1MjM5ODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/7523982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chsigg", "html_url": "https://github.com/chsigg", "followers_url": "https://api.github.com/users/chsigg/followers", "following_url": "https://api.github.com/users/chsigg/following{/other_user}", "gists_url": "https://api.github.com/users/chsigg/gists{/gist_id}", "starred_url": "https://api.github.com/users/chsigg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chsigg/subscriptions", "organizations_url": "https://api.github.com/users/chsigg/orgs", "repos_url": "https://api.github.com/users/chsigg/repos", "events_url": "https://api.github.com/users/chsigg/events{/privacy}", "received_events_url": "https://api.github.com/users/chsigg/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "chsigg", "id": 7523982, "node_id": "MDQ6VXNlcjc1MjM5ODI=", "avatar_url": "https://avatars3.githubusercontent.com/u/7523982?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chsigg", "html_url": "https://github.com/chsigg", "followers_url": "https://api.github.com/users/chsigg/followers", "following_url": "https://api.github.com/users/chsigg/following{/other_user}", "gists_url": "https://api.github.com/users/chsigg/gists{/gist_id}", "starred_url": "https://api.github.com/users/chsigg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chsigg/subscriptions", "organizations_url": "https://api.github.com/users/chsigg/orgs", "repos_url": "https://api.github.com/users/chsigg/repos", "events_url": "https://api.github.com/users/chsigg/events{/privacy}", "received_events_url": "https://api.github.com/users/chsigg/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-11-04T19:42:28Z", "updated_at": "2020-01-31T18:44:58Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "Currently the scripts used to run TF unit tests on the ROCm platform filter out tests that are tagged with the `no_gpu` tag\r\n\r\n* https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/ci_build/linux/rocm/run_cc_core.sh\r\n* https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/ci_build/linux/rocm/run_csb_tests.sh\r\n* https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/ci_build/linux/rocm/run_py3_core.sh\r\n* https://github.com/tensorflow/tensorflow/blob/master/tensorflow/tools/ci_build/xla/linux/rocm/run_py3.sh\r\n\r\nThe same applies for scripts for the CUDA platform as well.\r\n\r\nThere seem to be some tests that are tagged with the `nogpu` tag instead of the `no_gpu` tag.\r\nOne example is \r\n\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/tpu/tpu.bzl#L44\r\n\r\nSuch tests do not get filtered out by the test scripts above, and as a consequence they get reported as regression failures when those test scripts are run.\r\n\r\nSo the question here is \r\n* should we update all references to the `nogpu` tag to instead be `no_gpu`\r\nOR\r\n* should we update all the scripts instead to also filter out the `nogpu` tagged tests?\r\n\r\n-----------------------\r\n\r\n@chsigg \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33986", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33986/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33986/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33986/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33986", "id": 517346497, "node_id": "MDU6SXNzdWU1MTczNDY0OTc=", "number": 33986, "title": "Errors when instantiating multiple tf.keras models on different threads concurrently", "user": {"login": "josephcappadona", "id": 8142179, "node_id": "MDQ6VXNlcjgxNDIxNzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/8142179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/josephcappadona", "html_url": "https://github.com/josephcappadona", "followers_url": "https://api.github.com/users/josephcappadona/followers", "following_url": "https://api.github.com/users/josephcappadona/following{/other_user}", "gists_url": "https://api.github.com/users/josephcappadona/gists{/gist_id}", "starred_url": "https://api.github.com/users/josephcappadona/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/josephcappadona/subscriptions", "organizations_url": "https://api.github.com/users/josephcappadona/orgs", "repos_url": "https://api.github.com/users/josephcappadona/repos", "events_url": "https://api.github.com/users/josephcappadona/events{/privacy}", "received_events_url": "https://api.github.com/users/josephcappadona/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2019-11-04T19:13:36Z", "updated_at": "2019-11-25T18:32:23Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\nI am running custom code on a MacBook Pro running Mac OS Mojave 10.14.6:\r\n```\r\n Model Name:\tMacBook Pro\r\n  Model Identifier:\tMacBookPro15,1\r\n  Processor Name:\tIntel Core i9\r\n  Processor Speed:\t2.3 GHz\r\n  Number of Processors:\t1\r\n  Total Number of Cores:\t8\r\n  L2 Cache (per Core):\t256 KB\r\n  L3 Cache:\t16 MB\r\n  Hyper-Threading Technology:\tEnabled\r\n  Memory:\t16 GB\r\n```\r\n\r\nI am running Python 3.7.3 installed via homebrew and Tensorflow 2.0.0 (v2.0.0-rc2-26-g64c3d382ca 2.0.0) installed via pip.\r\n\r\n**Describe the current behavior**\r\n\r\nWhen instantiating multiple `tf.keras.Sequential` models concurrently on different threads, I sometimes get errors in certain calls within `site-packages/tensorflow_core/python/framework/ops.py`. Tracebacks are included below.\r\n\r\n**Describe the expected behavior**\r\n\r\nExpected behavior is that multiple tf.keras models can be instantiated on multiple threads without conflict.\r\n\r\n**Code to reproduce the issue + Other info / logs**\r\n\r\nThe error that I am getting in my development code is this:\r\n\r\n```\r\nTraceback (most recent call last):\r\n...\r\n  File \"/Users/josephcappadona/Documents/demo/demo/models/models.py\", line 24, in __init__\r\n    super().__init__([logit_layer, activation_layer], name)\r\n  File \"/Users/josephcappadona/.local/share/virtualenvs/demo-qfKwvgY4/lib/python3.7/site-packages/tensorflow_core/python/training/tracking/base.py\", line 457, in _method_wrapper\r\n    result = method(self, *args, **kwargs)\r\n  File \"/Users/josephcappadona/.local/share/virtualenvs/demo-qfKwvgY4/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/sequential.py\", line 114, in __init__\r\n    self.add(layer)\r\n  File \"/Users/josephcappadona/.local/share/virtualenvs/demo-qfKwvgY4/lib/python3.7/site-packages/tensorflow_core/python/training/tracking/base.py\", line 457, in _method_wrapper\r\n    result = method(self, *args, **kwargs)\r\n  File \"/Users/josephcappadona/.local/share/virtualenvs/demo-qfKwvgY4/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/sequential.py\", line 174, in add\r\n    batch_shape=batch_shape, dtype=dtype, name=layer.name + '_input')\r\n  File \"/Users/josephcappadona/.local/share/virtualenvs/demo-qfKwvgY4/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/input_layer.py\", line 263, in Input\r\n    input_tensor=tensor)\r\n  File \"/Users/josephcappadona/.local/share/virtualenvs/demo-qfKwvgY4/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/input_layer.py\", line 125, in __init__\r\n    ragged=ragged)\r\n  File \"/Users/josephcappadona/.local/share/virtualenvs/demo-qfKwvgY4/lib/python3.7/site-packages/tensorflow_core/python/keras/backend.py\", line 1057, in placeholder\r\n    x = array_ops.placeholder(dtype, shape=shape, name=name)\r\n  File \"/Users/josephcappadona/.local/share/virtualenvs/demo-qfKwvgY4/lib/python3.7/site-packages/tensorflow_core/python/ops/array_ops.py\", line 2630, in placeholder\r\n    return gen_array_ops.placeholder(dtype=dtype, shape=shape, name=name)\r\n  File \"/Users/josephcappadona/.local/share/virtualenvs/demo-qfKwvgY4/lib/python3.7/site-packages/tensorflow_core/python/ops/gen_array_ops.py\", line 6671, in placeholder\r\n    \"Placeholder\", dtype=dtype, shape=shape, name=name)\r\n  File \"/Users/josephcappadona/.local/share/virtualenvs/demo-qfKwvgY4/lib/python3.7/site-packages/tensorflow_core/python/framework/op_def_library.py\", line 793, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"/Users/josephcappadona/.local/share/virtualenvs/demo-qfKwvgY4/lib/python3.7/site-packages/tensorflow_core/python/framework/func_graph.py\", line 548, in create_op\r\n    compute_device)\r\n  File \"/Users/josephcappadona/.local/share/virtualenvs/demo-qfKwvgY4/lib/python3.7/site-packages/tensorflow_core/python/framework/ops.py\", line 3430, in _create_op_internal\r\n    self._create_op_helper(ret, compute_device=compute_device)\r\n  File \"/Users/josephcappadona/.local/share/virtualenvs/demo-qfKwvgY4/lib/python3.7/site-packages/tensorflow_core/python/framework/ops.py\", line 3469, in _create_op_helper\r\n    for key, value in self._attr_scope_map.items():\r\nRuntimeError: dictionary changed size during iteration\r\n```\r\nhowever I cannot reproduce this error reliably. It seems to happen a very small percentage of the time, making debugging it very difficult. Essentially, this happens when running a Flask app in which multiple models are instantiated concurrently across different threads at the same time.\r\n\r\nIn trying to write some code that reproduces something similar so that I could include something in this issue, I was able to use this code\r\n```python\r\nimport tensorflow as tf\r\nfrom threading import Thread\r\n\r\ndef build_model():\r\n    layer_1 = tf.keras.layers.Dense(1, input_shape=(20,))\r\n    layer_2 = tf.keras.layers.Activation(tf.sigmoid)\r\n    tf.keras.Sequential([layer_1, layer_2])\r\n\r\nfor i in range(100):\r\n    t = Thread(target=build_model)\r\n    t.start()\r\n```\r\n\r\nin a jupyter notebook to generate this error\r\n\r\n```\r\nException in thread Thread-369:\r\nTraceback (most recent call last):\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py\", line 917, in _bootstrap_inner\r\n    self.run()\r\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/threading.py\", line 865, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"<ipython-input-8-c7ffb35bc6af>\", line 4, in build_model\r\n    tf.keras.Sequential([layer_1, layer_2])\r\n  File \"/Users/josephcappadona/.local/share/virtualenvs/demo-qfKwvgY4/lib/python3.7/site-packages/tensorflow_core/python/training/tracking/base.py\", line 457, in _method_wrapper\r\n    result = method(self, *args, **kwargs)\r\n  File \"/Users/josephcappadona/.local/share/virtualenvs/demo-qfKwvgY4/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/sequential.py\", line 114, in __init__\r\n    self.add(layer)\r\n  File \"/Users/josephcappadona/.local/share/virtualenvs/demo-qfKwvgY4/lib/python3.7/site-packages/tensorflow_core/python/training/tracking/base.py\", line 457, in _method_wrapper\r\n    result = method(self, *args, **kwargs)\r\n  File \"/Users/josephcappadona/.local/share/virtualenvs/demo-qfKwvgY4/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/sequential.py\", line 196, in add\r\n    output_tensor = layer(self.outputs[0])\r\n  File \"/Users/josephcappadona/.local/share/virtualenvs/demo-qfKwvgY4/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/base_layer.py\", line 845, in __call__\r\n    outputs = base_layer_utils.mark_as_return(outputs, acd)\r\n  File \"/Users/josephcappadona/.local/share/virtualenvs/demo-qfKwvgY4/lib/python3.7/site-packages/tensorflow_core/python/framework/auto_control_deps.py\", line 300, in __exit__\r\n    if op.type == \"Switch\" and op.inputs[0].dtype == dtypes_module.resource:\r\n  File \"/Users/josephcappadona/.local/share/virtualenvs/demo-qfKwvgY4/lib/python3.7/site-packages/tensorflow_core/python/framework/ops.py\", line 2259, in type\r\n    return c_api.TF_OperationOpType(self._c_op)\r\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0xf2 in position 0: invalid continuation byte\r\n```\r\nwhich, while obviously is a different error, also happens in `tensorflow_core/python/framework/ops.py` and also involves the use of an instance variable (in this case `self._c_op`).\r\n\r\nPlease let me know if there's any other information I need to provide to help debug. I assume this has something to do with shared global state across a tensorflow session, but I'm not sure if there is something that I am supposed to do to prevent these types of errors."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33983", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33983/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33983/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33983/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33983", "id": 517318708, "node_id": "MDU6SXNzdWU1MTczMTg3MDg=", "number": 33983, "title": "Build error in Macbook (tensorflow lite)", "user": {"login": "ek9852", "id": 6452203, "node_id": "MDQ6VXNlcjY0NTIyMDM=", "avatar_url": "https://avatars1.githubusercontent.com/u/6452203?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ek9852", "html_url": "https://github.com/ek9852", "followers_url": "https://api.github.com/users/ek9852/followers", "following_url": "https://api.github.com/users/ek9852/following{/other_user}", "gists_url": "https://api.github.com/users/ek9852/gists{/gist_id}", "starred_url": "https://api.github.com/users/ek9852/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ek9852/subscriptions", "organizations_url": "https://api.github.com/users/ek9852/orgs", "repos_url": "https://api.github.com/users/ek9852/repos", "events_url": "https://api.github.com/users/ek9852/events{/privacy}", "received_events_url": "https://api.github.com/users/ek9852/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-11-04T18:12:50Z", "updated_at": "2019-11-08T00:14:37Z", "closed_at": null, "author_association": "NONE", "body": "- OS Platform and Distribution Macbook\r\n- TensorFlow installed from (source or binary): github latest bf282dece59bdf88f7a58bcf1064723cb3eea51e \r\n- TensorFlow version:trunk\r\n- Bazel version (if compiling from source):  1.0.0-homebrew\r\n- GCC/Compiler version (if compiling from source): Apple clang version 11.0.0 (clang-1100.0.33.8)\r\n\r\nRun ./tensorflow/lite/tools/make/build_lib.sh or ./tensorflow/lite/tools/make/build_ios_universal_lib.sh\r\nSame build problem:\r\n\r\ng++ -O3 -DNDEBUG -fPIC  --std=c++11 -I. -I/Users/kmok/workspaces/tensorflow/tensorflow/lite/tools/make/../../../../../ -I/Users/kmok/workspaces/tensorflow/tensorflow/lite/tools/make/../../../../../../ -I/Users/kmok/workspaces/tensorflow/tensorflow/lite/tools/make/downloads/ -I/Users/kmok/workspaces/tensorflow/tensorflow/lite/tools/make/downloads/eigen -I/Users/kmok/workspaces/tensorflow/tensorflow/lite/tools/make/downloads/absl -I/Users/kmok/workspaces/tensorflow/tensorflow/lite/tools/make/downloads/gemmlowp -I/Users/kmok/workspaces/tensorflow/tensorflow/lite/tools/make/downloads/neon_2_sse -I/Users/kmok/workspaces/tensorflow/tensorflow/lite/tools/make/downloads/farmhash/src -I/Users/kmok/workspaces/tensorflow/tensorflow/lite/tools/make/downloads/flatbuffers/include -I -I/usr/local/include -c tensorflow/lite/experimental/ruy/block_map.cc -o /Users/kmok/workspaces/tensorflow/tensorflow/lite/tools/make/gen/osx_x86_64/obj/tensorflow/lite/experimental/ruy/block_map.o\r\nIn file included from tensorflow/lite/core/api/op_resolver.cc:16:\r\nIn file included from ./tensorflow/lite/core/api/op_resolver.h:20:\r\n**./tensorflow/lite/schema/schema_generated.h:2660:8: error: ISO C++ forbids forward references to 'enum' types**\r\nIn file included from tensorflow/lite/core/api/flatbuffer_conversions.cc:  enum FlatBuffersVTableOffset FLATBUFFERS_VTABLE_UNDERLYING_TYPE {\r\n16:\r\n       ^In file included from \r\n./tensorflow/lite/core/api/flatbuffer_conversions.h:24:\r\nIn file included from ./tensorflow/lite/core/api/op_resolver.h:20:\r\n**./tensorflow/lite/schema/schema_generated.h:2660:8: error: ISO C++ forbids forward references to 'enum' types**\r\n**./tensorflow/lite/schema/schema_generated.h:2660:32: error: field has incomplete type 'enum FlatBuffersVTableOffset'**\r\n  enum FlatBuffersVTableOffset FLATBUFFERS_VTABLE_UNDERLYING_TYPE {\r\n       ^\r\n  enum FlatBuffersVTableOffset FLATBUFFERS_VTABLE_UNDERLYING_TYPE {\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33978", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33978/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33978/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33978/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33978", "id": 517283034, "node_id": "MDU6SXNzdWU1MTcyODMwMzQ=", "number": 33978, "title": "Keras load weights fails to load model from directory containing [[", "user": {"login": "racinmat", "id": 5525771, "node_id": "MDQ6VXNlcjU1MjU3NzE=", "avatar_url": "https://avatars1.githubusercontent.com/u/5525771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/racinmat", "html_url": "https://github.com/racinmat", "followers_url": "https://api.github.com/users/racinmat/followers", "following_url": "https://api.github.com/users/racinmat/following{/other_user}", "gists_url": "https://api.github.com/users/racinmat/gists{/gist_id}", "starred_url": "https://api.github.com/users/racinmat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/racinmat/subscriptions", "organizations_url": "https://api.github.com/users/racinmat/orgs", "repos_url": "https://api.github.com/users/racinmat/repos", "events_url": "https://api.github.com/users/racinmat/events{/privacy}", "received_events_url": "https://api.github.com/users/racinmat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yhliang2018", "id": 36285763, "node_id": "MDQ6VXNlcjM2Mjg1NzYz", "avatar_url": "https://avatars1.githubusercontent.com/u/36285763?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yhliang2018", "html_url": "https://github.com/yhliang2018", "followers_url": "https://api.github.com/users/yhliang2018/followers", "following_url": "https://api.github.com/users/yhliang2018/following{/other_user}", "gists_url": "https://api.github.com/users/yhliang2018/gists{/gist_id}", "starred_url": "https://api.github.com/users/yhliang2018/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yhliang2018/subscriptions", "organizations_url": "https://api.github.com/users/yhliang2018/orgs", "repos_url": "https://api.github.com/users/yhliang2018/repos", "events_url": "https://api.github.com/users/yhliang2018/events{/privacy}", "received_events_url": "https://api.github.com/users/yhliang2018/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yhliang2018", "id": 36285763, "node_id": "MDQ6VXNlcjM2Mjg1NzYz", "avatar_url": "https://avatars1.githubusercontent.com/u/36285763?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yhliang2018", "html_url": "https://github.com/yhliang2018", "followers_url": "https://api.github.com/users/yhliang2018/followers", "following_url": "https://api.github.com/users/yhliang2018/following{/other_user}", "gists_url": "https://api.github.com/users/yhliang2018/gists{/gist_id}", "starred_url": "https://api.github.com/users/yhliang2018/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yhliang2018/subscriptions", "organizations_url": "https://api.github.com/users/yhliang2018/orgs", "repos_url": "https://api.github.com/users/yhliang2018/repos", "events_url": "https://api.github.com/users/yhliang2018/events{/privacy}", "received_events_url": "https://api.github.com/users/yhliang2018/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-11-04T17:01:44Z", "updated_at": "2020-03-18T02:01:58Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): CentOS Linux release 7.6.1810 (Core)\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary, using conda\r\n- TensorFlow version (use command below): unknown 1.14.0, with intel MKL\r\n- Python version: 3.7.4\r\n- CUDA/cuDNN version: no gpu\r\n- GPU model and memory: no gpu\r\n\r\n**Describe the current behavior**\r\nWhen model checkpoint is stored in a directory containing `[[` in its name, the model fails to load, looks like the model files are missing, throwing NotFoundError\r\n\r\n`model.load_weights(osp.join(model_dir, 'model'))` throws exception when for example, the model_dir='/home/projects/my_ml/data/sims/bs=2048_dataset=[[2019_9_13],[2019_9_12,2019_9_11,2019_9_10,2019_9_9]]'\r\n\r\n**Describe the expected behavior**\r\n\r\n`model.load_weights(osp.join(model_dir, 'model'))` should load the data without problems\r\n\r\n**Code to reproduce the issue**\r\nHere is [google colab code](https://colab.research.google.com/drive/1N1oPDXcmijzXs49C3DDLjm2pVHsUQvYP) with mnist example.\r\n\r\n**Other info / logs**\r\nThe error is NotFoundError: Unsuccessful TensorSliceReader constructor: Failed to find any matching files for bs=2048_dataset=[[2019_9_13],[2019_9_12,2019_9_11,2019_9_10,2019_9_9]]/model"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33975", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33975/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33975/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33975/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33975", "id": 517176876, "node_id": "MDU6SXNzdWU1MTcxNzY4NzY=", "number": 33975, "title": "Bazel build does not pick up correct compiler include paths", "user": {"login": "Flamefire", "id": 309017, "node_id": "MDQ6VXNlcjMwOTAxNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/309017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Flamefire", "html_url": "https://github.com/Flamefire", "followers_url": "https://api.github.com/users/Flamefire/followers", "following_url": "https://api.github.com/users/Flamefire/following{/other_user}", "gists_url": "https://api.github.com/users/Flamefire/gists{/gist_id}", "starred_url": "https://api.github.com/users/Flamefire/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Flamefire/subscriptions", "organizations_url": "https://api.github.com/users/Flamefire/orgs", "repos_url": "https://api.github.com/users/Flamefire/repos", "events_url": "https://api.github.com/users/Flamefire/events{/privacy}", "received_events_url": "https://api.github.com/users/Flamefire/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1104829434, "node_id": "MDU6TGFiZWwxMTA0ODI5NDM0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:mkl", "name": "comp:mkl", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-11-04T14:09:42Z", "updated_at": "2020-02-18T17:54:13Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): RHEL 7.5\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 2.0.0\r\n- Python version: 3.7.5\r\n- Installed using virtualenv? pip? conda?: no\r\n- Bazel version (if compiling from source): 0.26.1\r\n- GCC/Compiler version (if compiling from source): GCC 8.2.0\r\n- CUDA/cuDNN version: 10.1\r\n\r\n\r\n**Describe the problem**\r\n\r\nBazel does not pick up the correct include paths of GCC and returns errors such as:\r\n\r\n```\r\nERROR: /tmp/easybuild-tmp/eb-5QGVSJ/tmpMZolLj-bazel-build/external/fft2d/BUILD.bazel:27:1: undeclared inclusion(s) in rule '@fft2d//:fft2d':\r\nthis rule is missing dependency declarations for the following files included by 'external/fft2d/fft2d/fftsg2d.c':\r\n  '/sw/installed/GCCcore/8.2.0/lib/gcc/x86_64-pc-linux-gnu/8.2.0/include/stddef.h'\r\n  '/sw/installed/GCCcore/8.2.0/lib/gcc/x86_64-pc-linux-gnu/8.2.0/include/stdarg.h'\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\n```\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n- `TF_NEED_CUDA=1 ./configure`\r\n- `export TF_MKL_DOWNLOAD=1 &&   bazel --output_base=/tmp/easybuild-tmp/eb-5QGVSJ/tmpMZolLj-bazel-build --install_base=/tmp/easybuild-tmp/eb-5QGVSJ/tmpMZolLj-bazel-build/inst_base --output_user_root=/tmp/easybuild-tmp/eb-5QGVSJ/tmp514aJM-user_root build --compilation_mode=opt --config=opt --subcommands --verbose_failures --jobs=24 --action_env=PYTHONPATH --action_env=EBPYTHONPREFIXES --distinct_host_configuration=false  --config=mkl //tensorflow/tools/pip_package:build_pip_package`\r\n\r\nNote that the installation is triggered via EasyBuild\r\n\r\n**Any other info / logs**\r\n[command.log](https://github.com/tensorflow/tensorflow/files/3804323/command.log)\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33969", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33969/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33969/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33969/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33969", "id": 517097623, "node_id": "MDU6SXNzdWU1MTcwOTc2MjM=", "number": 33969, "title": "2 issues: tf.train.Checkpoint does not seem to save optimizer state, impossible to load_weights using skip_mismatch=True", "user": {"login": "netw0rkf10w", "id": 8569515, "node_id": "MDQ6VXNlcjg1Njk1MTU=", "avatar_url": "https://avatars1.githubusercontent.com/u/8569515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/netw0rkf10w", "html_url": "https://github.com/netw0rkf10w", "followers_url": "https://api.github.com/users/netw0rkf10w/followers", "following_url": "https://api.github.com/users/netw0rkf10w/following{/other_user}", "gists_url": "https://api.github.com/users/netw0rkf10w/gists{/gist_id}", "starred_url": "https://api.github.com/users/netw0rkf10w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/netw0rkf10w/subscriptions", "organizations_url": "https://api.github.com/users/netw0rkf10w/orgs", "repos_url": "https://api.github.com/users/netw0rkf10w/repos", "events_url": "https://api.github.com/users/netw0rkf10w/events{/privacy}", "received_events_url": "https://api.github.com/users/netw0rkf10w/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-11-04T11:40:19Z", "updated_at": "2020-02-28T15:52:11Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes, with minor modifications from the official documentation\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Colab\r\n- TensorFlow installed from (source or binary): `!pip install tf-nightly-gpu`\r\n- TensorFlow version (use command below): \r\n- Python version: `v1.12.1-17291-ga2a3b22 2.1.0-dev20191103`\r\n\r\n**Describe the current behavior**\r\n\r\n1. When restoring from a tf.train.Checkpoint, training does not seem to resume from exactly where it was left off.\r\n\r\n2. It is not possible to load pretrained weights to the same model with different output dimension, even with `skip_mismatch=True`.\r\n\r\n**Code to reproduce the issue**\r\nThe two issues can be reproduced using [this Colab Notebook](https://colab.research.google.com/drive/1M0PDxTsXfL0lvFcsEhNTvNG-titdARYo).\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33967", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33967/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33967/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33967/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33967", "id": 517076095, "node_id": "MDU6SXNzdWU1MTcwNzYwOTU=", "number": 33967, "title": "Cannot use dictionary embeddings metadata for keras callbacks", "user": {"login": "ouakif", "id": 9073291, "node_id": "MDQ6VXNlcjkwNzMyOTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/9073291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ouakif", "html_url": "https://github.com/ouakif", "followers_url": "https://api.github.com/users/ouakif/followers", "following_url": "https://api.github.com/users/ouakif/following{/other_user}", "gists_url": "https://api.github.com/users/ouakif/gists{/gist_id}", "starred_url": "https://api.github.com/users/ouakif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ouakif/subscriptions", "organizations_url": "https://api.github.com/users/ouakif/orgs", "repos_url": "https://api.github.com/users/ouakif/repos", "events_url": "https://api.github.com/users/ouakif/events{/privacy}", "received_events_url": "https://api.github.com/users/ouakif/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-11-04T10:55:37Z", "updated_at": "2020-03-18T13:04:41Z", "closed_at": null, "author_association": "NONE", "body": "Using dictionary as embeddings_metadata does not seem to be handled correctly in the Keras callbacks v2.\r\nIndeed, while trying to do so I get the following error message:\r\n```ValueError: Unrecognized `Embedding` layer names passed to `keras.callbacks.TensorBoard` `embeddings_metadata` argument: dict_keys(['embedding_1', 'embedding_2'])```\r\nAfter looking at the source code (see [here](https://github.com/tensorflow/tensorflow/blob/32d76ec3e633e0ef5c980b5a91a510bb71d668ed/tensorflow/python/keras/callbacks.py#L1575)), I figured that, when the metadata is not a string, it checked if the layer names was in `embedding.metadata_path`. However, this variable is never set in this case and it is an empty string by default.\r\n\r\nLooking at how it is handled in the [v1](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/keras/callbacks_v1.py), I think the check should be done on `self.embeddings_metadata` (assuming if it is not a string it is a dictionary). So\r\n```if layer.name in embedding.metadata_path:```\r\nshould be something like\r\n```if layer.name in self.embeddings_metadata:```\r\nMaybe it should be a copy of this dictionary or there should be a test to check that this is indeed a dictionary."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33955", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33955/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33955/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33955/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/33955", "id": 516915603, "node_id": "MDExOlB1bGxSZXF1ZXN0MzM2MDg4NTY3", "number": 33955, "title": "comp:micro - Set g_pdm_dma_error_reporter pointer to the error_reporter passed to InitAudioRecording()", "user": {"login": "suphoff", "id": 2333473, "node_id": "MDQ6VXNlcjIzMzM0NzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/2333473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suphoff", "html_url": "https://github.com/suphoff", "followers_url": "https://api.github.com/users/suphoff/followers", "following_url": "https://api.github.com/users/suphoff/following{/other_user}", "gists_url": "https://api.github.com/users/suphoff/gists{/gist_id}", "starred_url": "https://api.github.com/users/suphoff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suphoff/subscriptions", "organizations_url": "https://api.github.com/users/suphoff/orgs", "repos_url": "https://api.github.com/users/suphoff/repos", "events_url": "https://api.github.com/users/suphoff/events{/privacy}", "received_events_url": "https://api.github.com/users/suphoff/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1589976566, "node_id": "MDU6TGFiZWwxNTg5OTc2NTY2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:micro", "name": "comp:micro", "color": "3e2eea", "default": false, "description": "Related to TensorFlow Lite Microcontrollers"}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-11-04T00:33:48Z", "updated_at": "2020-03-11T08:40:12Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/33955", "html_url": "https://github.com/tensorflow/tensorflow/pull/33955", "diff_url": "https://github.com/tensorflow/tensorflow/pull/33955.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/33955.patch"}, "body": "Fix for micro_speech example on apollo3evb boards:\r\n\r\nThe pointer g_pdm_dma_error_reporter is used to report DMA errors on apollo3evb boards.\r\nHowever currently it is always set to a nullptr due to an initialization bug.\r\nThis causes crashes on DMA errors like fifo overflows.\r\n \r\nPlease add the following labels:\r\n**comp:lite**\r\n**comp:micro**"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33951", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33951/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33951/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33951/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33951", "id": 516870120, "node_id": "MDU6SXNzdWU1MTY4NzAxMjA=", "number": 33951, "title": "tf.volume.resize ", "user": {"login": "wanderine", "id": 4303816, "node_id": "MDQ6VXNlcjQzMDM4MTY=", "avatar_url": "https://avatars3.githubusercontent.com/u/4303816?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wanderine", "html_url": "https://github.com/wanderine", "followers_url": "https://api.github.com/users/wanderine/followers", "following_url": "https://api.github.com/users/wanderine/following{/other_user}", "gists_url": "https://api.github.com/users/wanderine/gists{/gist_id}", "starred_url": "https://api.github.com/users/wanderine/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wanderine/subscriptions", "organizations_url": "https://api.github.com/users/wanderine/orgs", "repos_url": "https://api.github.com/users/wanderine/repos", "events_url": "https://api.github.com/users/wanderine/events{/privacy}", "received_events_url": "https://api.github.com/users/wanderine/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-11-03T18:36:46Z", "updated_at": "2019-11-04T23:01:37Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- TensorFlow version (you are using): 1.14\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\ntf.image.resize works for 2D images, would be nice with tf.volume.resize for 3D volumes, instead of using tf.keras.layers.UpSampling3D that only performs nearest neighbor interpolation.\r\n\r\n**Will this change the current api? How?**\r\n\r\nI don't think so\r\n\r\n**Who will benefit with this feature?**\r\n\r\nMany working with 3D data\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33948", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33948/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33948/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33948/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33948", "id": 516827829, "node_id": "MDU6SXNzdWU1MTY4Mjc4Mjk=", "number": 33948, "title": "ValueError: Shapes (8334, 256) and (8335, 256) are incompatible", "user": {"login": "TheBlackPlague", "id": 44123859, "node_id": "MDQ6VXNlcjQ0MTIzODU5", "avatar_url": "https://avatars3.githubusercontent.com/u/44123859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TheBlackPlague", "html_url": "https://github.com/TheBlackPlague", "followers_url": "https://api.github.com/users/TheBlackPlague/followers", "following_url": "https://api.github.com/users/TheBlackPlague/following{/other_user}", "gists_url": "https://api.github.com/users/TheBlackPlague/gists{/gist_id}", "starred_url": "https://api.github.com/users/TheBlackPlague/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TheBlackPlague/subscriptions", "organizations_url": "https://api.github.com/users/TheBlackPlague/orgs", "repos_url": "https://api.github.com/users/TheBlackPlague/repos", "events_url": "https://api.github.com/users/TheBlackPlague/events{/privacy}", "received_events_url": "https://api.github.com/users/TheBlackPlague/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-11-03T13:28:37Z", "updated_at": "2019-11-08T06:37:24Z", "closed_at": null, "author_association": "NONE", "body": "# **System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): \r\nTwo OS used:\r\n  - Windows 10\r\n  - Google Compute Engine (GPU) OS (whatever that might be?)\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.0.0 (on both OS)\r\n- Python version: \r\n  - Windows 10 (running Python 3.6.6)\r\n  - Google Compute Engine OS (running Python 3.6)\r\n\r\n# **Describe the current behavior**\r\nA model is compiled and trained using `script A` on the Google Compute Engine. The weights are saved separately rather than altogether due to #33947 , using the `model.save_weights()`.\r\n\r\nThe weights are then saved as a zip, and transferred to a Windows-based machine.\r\n\r\nOn the Windows-based machine, the same code is run to compile the model but instead of training the model again - the weights are loaded using `model.load_weights()`.\r\n\r\nThis results in a \r\n```\r\nValueError: Shapes (8334, 256) and (8335, 256) are incompatible\r\n```\r\n\r\n# **Describe the expected behavior**\r\nA model is compiled and trained using `script A` on the Google Compute Engine. The weights are saved separately rather than altogether due to #33947 , using the `model.save_weights()`.\r\n\r\nThe weights are then saved as a zip, and transferred to a Windows-based machine.\r\n\r\nOn the Windows-based machine, the same code is run to compile the model but instead of training the model again - the weights are loaded using `model.load_weights()`.\r\n\r\nThe weights are loaded successfully.\r\n\r\n# **Possible Cause**\r\n**Model Summary on the two machines are different... which is likely causing the issue.**\r\n- Google Compute Engine (GPU):\r\n```\r\nModel: \"transformer\"\r\n__________________________________________________________________________________________________\r\nLayer (type)                    Output Shape         Param #     Connected to                     \r\n==================================================================================================\r\ninputs (InputLayer)             [(None, None)]       0                                            \r\n__________________________________________________________________________________________________\r\ndec_inputs (InputLayer)         [(None, None)]       0                                            \r\n__________________________________________________________________________________________________\r\nenc_padding_mask (Lambda)       (None, 1, 1, None)   0           inputs[0][0]                     \r\n__________________________________________________________________________________________________\r\nencoder (Model)                 (None, None, 256)    3187968     inputs[0][0]                     \r\n                                                                 enc_padding_mask[0][0]           \r\n__________________________________________________________________________________________________\r\nlook_ahead_mask (Lambda)        (None, 1, None, None 0           dec_inputs[0][0]                 \r\n__________________________________________________________________________________________________\r\ndec_padding_mask (Lambda)       (None, 1, 1, None)   0           inputs[0][0]                     \r\n__________________________________________________________________________________________________\r\ndecoder (Model)                 (None, None, 256)    3715328     dec_inputs[0][0]                 \r\n                                                                 encoder[1][0]                    \r\n                                                                 look_ahead_mask[0][0]            \r\n                                                                 dec_padding_mask[0][0]           \r\n__________________________________________________________________________________________________\r\noutputs (Dense)                 (None, None, 8335)   2142095     decoder[1][0]                    \r\n==================================================================================================\r\nTotal params: 9,045,391\r\nTrainable params: 9,045,391\r\nNon-trainable params: 0\r\n__________________________________________________________________________________________________\r\n```\r\n- Windows-based Machine:\r\n```\r\nModel: \"transformer\"\r\n__________________________________________________________________________________________________\r\nLayer (type)                    Output Shape         Param #     Connected to\r\n==================================================================================================\r\ninputs (InputLayer)             [(None, None)]       0\r\n__________________________________________________________________________________________________\r\ndec_inputs (InputLayer)         [(None, None)]       0\r\n__________________________________________________________________________________________________\r\nenc_padding_mask (Lambda)       (None, 1, 1, None)   0           inputs[0][0]\r\n__________________________________________________________________________________________________\r\nencoder (Model)                 (None, None, 256)    3187712     inputs[0][0]\r\n                                                                 enc_padding_mask[0][0]\r\n__________________________________________________________________________________________________\r\nlook_ahead_mask (Lambda)        (None, 1, None, None 0           dec_inputs[0][0]\r\n__________________________________________________________________________________________________\r\ndec_padding_mask (Lambda)       (None, 1, 1, None)   0           inputs[0][0]\r\n__________________________________________________________________________________________________\r\ndecoder (Model)                 (None, None, 256)    3715072     dec_inputs[0][0]\r\n                                                                 encoder[1][0]\r\n                                                                 look_ahead_mask[0][0]\r\n                                                                 dec_padding_mask[0][0]\r\n__________________________________________________________________________________________________\r\noutputs (Dense)                 (None, None, 8334)   2141838     decoder[1][0]\r\n==================================================================================================\r\nTotal params: 9,044,622\r\nTrainable params: 9,044,622\r\nNon-trainable params: 0\r\n__________________________________________________________________________________________________\r\n```\r\n\r\n# **Other info / logs**\r\n[log.txt](https://github.com/tensorflow/tensorflow/files/3801603/log.txt)\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33945", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33945/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33945/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33945/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/33945", "id": 516794036, "node_id": "MDExOlB1bGxSZXF1ZXN0MzM2MDAxNjU3", "number": 33945, "title": "Add gelu", "user": {"login": "WindQAQ", "id": 11615393, "node_id": "MDQ6VXNlcjExNjE1Mzkz", "avatar_url": "https://avatars2.githubusercontent.com/u/11615393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WindQAQ", "html_url": "https://github.com/WindQAQ", "followers_url": "https://api.github.com/users/WindQAQ/followers", "following_url": "https://api.github.com/users/WindQAQ/following{/other_user}", "gists_url": "https://api.github.com/users/WindQAQ/gists{/gist_id}", "starred_url": "https://api.github.com/users/WindQAQ/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WindQAQ/subscriptions", "organizations_url": "https://api.github.com/users/WindQAQ/orgs", "repos_url": "https://api.github.com/users/WindQAQ/repos", "events_url": "https://api.github.com/users/WindQAQ/events{/privacy}", "received_events_url": "https://api.github.com/users/WindQAQ/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1178505529, "node_id": "MDU6TGFiZWwxMTc4NTA1NTI5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/prtype:bugfix", "name": "prtype:bugfix", "color": "159b2e", "default": false, "description": "PR to fix a bug"}, {"id": 1169365682, "node_id": "MDU6TGFiZWwxMTY5MzY1Njgy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:L", "name": "size:L", "color": "adafea", "default": false, "description": "CL Change Size: Large"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-11-03T07:54:48Z", "updated_at": "2020-02-03T18:30:02Z", "closed_at": null, "author_association": "MEMBER", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/33945", "html_url": "https://github.com/tensorflow/tensorflow/pull/33945", "diff_url": "https://github.com/tensorflow/tensorflow/pull/33945.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/33945.patch"}, "body": "Closes #32783. Migrate gelu activation from addons https://github.com/tensorflow/addons/issues/550.\r\n\r\nSome benchmark between C++ and python implementation.\r\n\r\nWithout XLA: 10 times faster than composite python operations \r\nhttps://colab.research.google.com/drive/1P14w9KjnBLjnyEIs2k7Oy3w0QAa5BxKM\r\n\r\nWith XLA: 2 times faster than python operations when enabling XLA\r\nhttps://colab.research.google.com/drive/1pQFOp5sEp3Gw0LGHlZ6dPsNGfZPWXcgc\r\n\r\nNote that addons implementation does not have XLA ops. Would like to deal with XLA and mixed precision part if this gets merges."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33944", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33944/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33944/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33944/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33944", "id": 516791328, "node_id": "MDU6SXNzdWU1MTY3OTEzMjg=", "number": 33944, "title": "TPU support has regressed in tf-nightly (worked well in tf=2.0.0) - operation or function not registered in the binary running in this process", "user": {"login": "dbonner", "id": 241474, "node_id": "MDQ6VXNlcjI0MTQ3NA==", "avatar_url": "https://avatars3.githubusercontent.com/u/241474?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dbonner", "html_url": "https://github.com/dbonner", "followers_url": "https://api.github.com/users/dbonner/followers", "following_url": "https://api.github.com/users/dbonner/following{/other_user}", "gists_url": "https://api.github.com/users/dbonner/gists{/gist_id}", "starred_url": "https://api.github.com/users/dbonner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dbonner/subscriptions", "organizations_url": "https://api.github.com/users/dbonner/orgs", "repos_url": "https://api.github.com/users/dbonner/repos", "events_url": "https://api.github.com/users/dbonner/events{/privacy}", "received_events_url": "https://api.github.com/users/dbonner/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-11-03T07:20:13Z", "updated_at": "2019-11-15T22:49:40Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes (see below).  The code has been adopted from the Colab notebook (https://colab.research.google.com/drive/1yWaLpCWImXZE2fPV0ZYDdWWI8f52__9A#scrollTo=mnhwpzb73KIL) with instructions below on how to run a TPU using ctpu.  I have 90 days free access with TFRC.\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Google Cloud TPU pair (Master VM is Linux 4.9.0-11-amd64 #1 SMP Debian 4.9.189-3+deb9u1 (2019-09-20) x86_64 GNU/Linux and TPU is v3.8 8 corel)\r\n- TensorFlow installed from (source or binary):  binary (pip)\r\n- TensorFlow version (use command below): Tested on tf-nightly binary (2.1.0-dev20191102) from pip.\r\n- Python version: conda-forge 3.7.3\r\n\r\n**Describe the current behavior**\r\nWhen tf-nightly is installed, following the setup instructions below and running the attached code (yourcode.py) gives an error.  It occurs at lines 54-56 (traceback line 56) of yourcode.py:\r\ntpu = tf.distribute.cluster_resolver.TPUClusterResolver()\r\ntf.config.experimental_connect_to_cluster(tpu)\r\ntf.tpu.experimental.initialize_tpu_system(tpu)\r\n\r\nI have marked the place at line 58 with \"# This is where the error occurs\".\r\n\r\nThe full output including the error is (follow the steps under \"Code to reproduce this issue\"):\r\n\r\n2019-11-03 06:59:16.549391: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcudart.so.10.0'; dlerror: libcudart.so.10.0: cannot open shared object file: No such file or directory\r\n2019-11-03 06:59:16.549450: I tensorflow/stream_executor/cuda/cudart_stub.cc:29] Ignore above cudart dlerror if you do not have a GPU set up on your machine.\r\n2.1.0-dev20191102\r\n2019-11-03 06:59:18.662355: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcuda.so.1'; dlerror: libcuda.so.1: cannot open shared object file: No such file or directory\r\n2019-11-03 06:59:18.662422: E tensorflow/stream_executor/cuda/cuda_driver.cc:351] failed call to cuInit: UNKNOWN ERROR (303)\r\n2019-11-03 06:59:18.662459: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:156] kernel driver does not appear to be running on this host (mimetic): /proc/driver/nvidia/version does not exist\r\n2019-11-03 06:59:18.663151: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-11-03 06:59:18.672455: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2300000000 Hz\r\n2019-11-03 06:59:18.673297: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x55ca94e697b0 initialized for platform Host (this does not guarantee that XLA will be used). Devices:\r\n2019-11-03 06:59:18.673382: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version\r\nINFO:absl:Overwrite dataset info from restored data version.\r\nINFO:absl:Reusing dataset glue (gs://mimetic_store/glue/mrpc/0.0.2)\r\nINFO:absl:Constructing tf.data.Dataset for split None, from gs://mimetic_store/glue/mrpc/0.0.2\r\nSaved glue_mnli_train.\r\nSaved glue_mnli_valid.\r\n2019-11-03 07:00:41.886095: I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:300] Initialize GrpcChannelCache for job worker -> {0 -> 10.240.1.2:8470}\r\n2019-11-03 07:00:41.886162: I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:300] Initialize GrpcChannelCache for job localhost -> {0 -> localhost:54535}\r\n2019-11-03 07:01:53.957214: I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:300] Initialize GrpcChannelCache for job worker -> {0 -> 10.240.1.2:8470}\r\n2019-11-03 07:01:53.957297: I tensorflow/core/distributed_runtime/rpc/grpc_channel.cc:300] Initialize GrpcChannelCache for job localhost -> {0 -> localhost:54535}\r\n2019-11-03 07:01:53.958220: I tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:390] Started server with target: grpc://localhost:54535\r\nINFO:absl:Entering into master device scope: /job:worker/replica:0/task:0/device:CPU:0\r\nTraceback (most recent call last):\r\n  File \"yourcode.py\", line 56, in <module>\r\n    tf.tpu.experimental.initialize_tpu_system(tpu)\r\n  File \"/home/daniel_bonner_anu_edu_au/anaconda3/envs/tfgpu/lib/python3.7/site-packages/tensorflow_core/python/tpu/tpu_strategy_util.py\", line 103, in initialize_tpu_system\r\n    serialized_topology = output.numpy()\r\n  File \"/home/daniel_bonner_anu_edu_au/anaconda3/envs/tfgpu/lib/python3.7/site-packages/tensorflow_core/python/framework/ops.py\", line 942, in numpy\r\n    maybe_arr = self._numpy()  # pylint: disable=protected-access\r\n  File \"/home/daniel_bonner_anu_edu_au/anaconda3/envs/tfgpu/lib/python3.7/site-packages/tensorflow_core/python/framework/ops.py\", line 910, in _numpy\r\n    six.raise_from(core._status_to_exception(e.code, e.message), None)\r\n  File \"<string>\", line 3, in raise_from\r\ntensorflow.python.framework.errors_impl.NotFoundError: '__inference__tpu_init_fn_4206710' is neither a type of a primitive operation nor a name of a function registered in binary running on n-48a744b7-w-0. Make sure the operation or function is registered in the binary running in this process.\r\n2019-11-03 07:01:54.492446: W tensorflow/core/distributed_runtime/eager/remote_tensor_handle_data.cc:75] Unable to destroy remote tensor handles. If you are running a tf.function, it usually indicates some op in the graph gets an error: '__inference__tpu_init_fn_4206710' is neither a type of a primitive operation nor a name of a function registered in binary running on n-48a744b7-w-0. Make sure the operation or function is registered in the binary running in this process.\r\n\r\n**Describe the expected behavior**\r\nWhen tested on tensorflow==2.0.0 from pip, the code completes. \r\nThe whole process (with tf2.0.0) outputs at the end:\r\nEpoch: [2] Validation accuracy = 0.843137264251709\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\nCreate a Google Cloud master VM and TPU pair:\r\n\r\nctpu up --name=yourtpupair --zone=us-central1-a --tpu-size=v3-8 --machine-type=n1-standard-8 --disk-size-gb=40\r\n\r\nSet up a conda python 3.7 development environment with tf-nightly on the master VM\r\n\r\nsudo apt update && sudo apt install bzip2 libxml2-dev libxslt-dev -y && wget https://repo.anaconda.com/archive/Anaconda3-2019.10-Linux-x86_64.sh && bash Anaconda3-2019.10-Linux-x86_64.sh\r\n\r\nAccept the defaults and initialize Anaconda\r\n\r\nrm Anaconda3-2019.10-Linux-x86_64.sh && . ~/.bashrc && conda config --add channels anaconda && conda config --add channels conda-forge && conda config --set channel_priority strict && conda create -n yourconda python=3.7 -y && conda activate yourconda\r\n\r\nconda install tqdm\r\n\r\npip install tensorflow-datasets transformers && pip install --upgrade google-api-python-client && pip install --upgrade oauth2client && pip install --ignore-installed --upgrade tf-nightly\r\n\r\nDownload the \"glue/mrpc\" dataset to ~/tensorflow_datasets in a python shell:\r\n\r\npython\r\nimport tensorflow as tf\r\nimport tensorflow_datasets\r\ndata = tensorflow_datasets.load(\"glue/mrpc\")\r\n\r\nCreate a Google storage bucket named \"your_bucket\".\r\n\r\nCopy the entire folder (~/tensorflow_datasets/glue) to gs://your_bucket\r\n\r\nRun the code in yourcode.py on a Google Cloud VM master's conda environment (yourconda) connected to TPU:\r\n\r\npython yourcode.py\r\n\r\nThe output above (including the error) is produced.\r\n\r\nNow install tensorflow==2.0.0 and rerun it and training will complete:\r\n\r\npip install --ignore-installed --upgrade tensorflow==2.0.0\r\npython yourcode.py\r\n\r\n[yourcode.py.txt](https://github.com/tensorflow/tensorflow/files/3801308/yourcode.py.txt)\r\n(rename it yourcode.py)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33943", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33943/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33943/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33943/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33943", "id": 516767114, "node_id": "MDU6SXNzdWU1MTY3NjcxMTQ=", "number": 33943, "title": "The current session will be closed and a new session will be created. Error: Stream IDs exhausted", "user": {"login": "zhangwj0101", "id": 12271825, "node_id": "MDQ6VXNlcjEyMjcxODI1", "avatar_url": "https://avatars0.githubusercontent.com/u/12271825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhangwj0101", "html_url": "https://github.com/zhangwj0101", "followers_url": "https://api.github.com/users/zhangwj0101/followers", "following_url": "https://api.github.com/users/zhangwj0101/following{/other_user}", "gists_url": "https://api.github.com/users/zhangwj0101/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhangwj0101/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhangwj0101/subscriptions", "organizations_url": "https://api.github.com/users/zhangwj0101/orgs", "repos_url": "https://api.github.com/users/zhangwj0101/repos", "events_url": "https://api.github.com/users/zhangwj0101/events{/privacy}", "received_events_url": "https://api.github.com/users/zhangwj0101/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-11-03T01:24:28Z", "updated_at": "2019-11-05T09:27:17Z", "closed_at": null, "author_association": "NONE", "body": "System information\r\nTensorFlow:\r\n\r\nOS Platform and Distribution (e.g., centos7):\r\nTensorFlow installed from ( binary):\r\nTensorFlow version (1.8):\r\nin Distrubuted TensorFlow, train 38 days, we get the error \" INFO:tensorflow:An error was raised. This may be due to a preemption in a connected worker or parameter server. The current session will be closed and a new session will be created. Error: Stream IDs exhausted \" ,\r\nany better to solve this quesution?\r\n\r\nmore info\r\nINFO:tensorflow:An error was raised. This may be due to a preemption in a connected worker or parameter server. The current session will be closed and a new session will be created. Error: Stream IDs exhausted\r\n\t [[Node: Embedding/emb_D_DOCID_lookup_sparse/embedding_lookup/DynamicPartition_S9663 = _Recv[client_terminated=false, recv_device=\"/job:ps/replica:0/task:0/device:CPU:0\", send_device=\"/job:worker/replica:0/task:0/device:CPU:0\", send_device_incarnation=-1272333736861591317, tensor_name=\"edge_636_Embedding/emb_D_DOCID_lookup_sparse/embedding_lookup/DynamicPartition\", tensor_type=DT_INT64, _device=\"/job:ps/replica:0/task:0/device:CPU:0\"]()]]\r\n\t [[Node: Embedding/emb_U_USERID_lookup_sparse/embedding_lookup/GatherV2_85_S10351 = _HostRecv[client_terminated=false, recv_device=\"/job:worker/replica:0/task:0/device:GPU:0\", send_device=\"/job:ps/replica:0/task:0/device:CPU:0\", send_device_incarnation=-4470066425874193753, tensor_name=\"edge_1755_Embedding/emb_U_USERID_lookup_sparse/embedding_lookup/GatherV2_85\", tensor_type=DT_FLOAT, _device=\"/job:worker/replica:0/task:0/device:GPU:0\"]()]]\r\n\t [[Node: Embedding/emb_U_USERID_lookup_sparse/embedding_lookup/DynamicPartition_S9895 = _Recv[client_terminated=false, recv_device=\"/job:ps/replica:0/task:1/device:CPU:0\", send_device=\"/job:worker/replica:0/task:0/device:CPU:0\", send_device_incarnation=-1272333736861591317, tensor_name=\"edge_1132_...cPartition\", tensor_type=DT_INT64, _device=\"/job:ps/replica:0/task:1/device:CPU:0\"]()]]\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33941", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33941/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33941/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33941/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33941", "id": 516742680, "node_id": "MDU6SXNzdWU1MTY3NDI2ODA=", "number": 33941, "title": "Visualize accuracy on tensorboard", "user": {"login": "abdou31", "id": 19480228, "node_id": "MDQ6VXNlcjE5NDgwMjI4", "avatar_url": "https://avatars3.githubusercontent.com/u/19480228?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abdou31", "html_url": "https://github.com/abdou31", "followers_url": "https://api.github.com/users/abdou31/followers", "following_url": "https://api.github.com/users/abdou31/following{/other_user}", "gists_url": "https://api.github.com/users/abdou31/gists{/gist_id}", "starred_url": "https://api.github.com/users/abdou31/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abdou31/subscriptions", "organizations_url": "https://api.github.com/users/abdou31/orgs", "repos_url": "https://api.github.com/users/abdou31/repos", "events_url": "https://api.github.com/users/abdou31/events{/privacy}", "received_events_url": "https://api.github.com/users/abdou31/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 284285184, "node_id": "MDU6TGFiZWwyODQyODUxODQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tensorboard", "name": "comp:tensorboard", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "nfelt", "id": 710113, "node_id": "MDQ6VXNlcjcxMDExMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/710113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nfelt", "html_url": "https://github.com/nfelt", "followers_url": "https://api.github.com/users/nfelt/followers", "following_url": "https://api.github.com/users/nfelt/following{/other_user}", "gists_url": "https://api.github.com/users/nfelt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nfelt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nfelt/subscriptions", "organizations_url": "https://api.github.com/users/nfelt/orgs", "repos_url": "https://api.github.com/users/nfelt/repos", "events_url": "https://api.github.com/users/nfelt/events{/privacy}", "received_events_url": "https://api.github.com/users/nfelt/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nfelt", "id": 710113, "node_id": "MDQ6VXNlcjcxMDExMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/710113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nfelt", "html_url": "https://github.com/nfelt", "followers_url": "https://api.github.com/users/nfelt/followers", "following_url": "https://api.github.com/users/nfelt/following{/other_user}", "gists_url": "https://api.github.com/users/nfelt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nfelt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nfelt/subscriptions", "organizations_url": "https://api.github.com/users/nfelt/orgs", "repos_url": "https://api.github.com/users/nfelt/repos", "events_url": "https://api.github.com/users/nfelt/events{/privacy}", "received_events_url": "https://api.github.com/users/nfelt/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2019-11-02T22:27:41Z", "updated_at": "2019-12-19T00:39:58Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):binary\r\n- TensorFlow version (use command below):1.13.1\r\n- Python version:3.6.4\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:9/7.4\r\n- GPU model and memory: Nvidia Geforce 840m 4 Go\r\n\r\n**Describe the current behavior**\r\nHello,\r\nI'm trained a model and I have all .ckpts files with `graph.pbtxt` and `checkpoint` file.\r\nI would like to visualize all parameters, for e.g ( accuracy , precision , valid loss and train loss ) using Tensorboard.\r\nThe problem is that I can only visualize the loss and the learning_rate graph\r\n\r\nHow can I see all the metrics and graphs on Tensorboard? \r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33939", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33939/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33939/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33939/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33939", "id": 516717572, "node_id": "MDU6SXNzdWU1MTY3MTc1NzI=", "number": 33939, "title": "Laconic error when validation_steps ommitted for model.fit in TF 2.0.0", "user": {"login": "MikeOfZen", "id": 28424677, "node_id": "MDQ6VXNlcjI4NDI0Njc3", "avatar_url": "https://avatars2.githubusercontent.com/u/28424677?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MikeOfZen", "html_url": "https://github.com/MikeOfZen", "followers_url": "https://api.github.com/users/MikeOfZen/followers", "following_url": "https://api.github.com/users/MikeOfZen/following{/other_user}", "gists_url": "https://api.github.com/users/MikeOfZen/gists{/gist_id}", "starred_url": "https://api.github.com/users/MikeOfZen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MikeOfZen/subscriptions", "organizations_url": "https://api.github.com/users/MikeOfZen/orgs", "repos_url": "https://api.github.com/users/MikeOfZen/repos", "events_url": "https://api.github.com/users/MikeOfZen/events{/privacy}", "received_events_url": "https://api.github.com/users/MikeOfZen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yhliang2018", "id": 36285763, "node_id": "MDQ6VXNlcjM2Mjg1NzYz", "avatar_url": "https://avatars1.githubusercontent.com/u/36285763?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yhliang2018", "html_url": "https://github.com/yhliang2018", "followers_url": "https://api.github.com/users/yhliang2018/followers", "following_url": "https://api.github.com/users/yhliang2018/following{/other_user}", "gists_url": "https://api.github.com/users/yhliang2018/gists{/gist_id}", "starred_url": "https://api.github.com/users/yhliang2018/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yhliang2018/subscriptions", "organizations_url": "https://api.github.com/users/yhliang2018/orgs", "repos_url": "https://api.github.com/users/yhliang2018/repos", "events_url": "https://api.github.com/users/yhliang2018/events{/privacy}", "received_events_url": "https://api.github.com/users/yhliang2018/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yhliang2018", "id": 36285763, "node_id": "MDQ6VXNlcjM2Mjg1NzYz", "avatar_url": "https://avatars1.githubusercontent.com/u/36285763?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yhliang2018", "html_url": "https://github.com/yhliang2018", "followers_url": "https://api.github.com/users/yhliang2018/followers", "following_url": "https://api.github.com/users/yhliang2018/following{/other_user}", "gists_url": "https://api.github.com/users/yhliang2018/gists{/gist_id}", "starred_url": "https://api.github.com/users/yhliang2018/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yhliang2018/subscriptions", "organizations_url": "https://api.github.com/users/yhliang2018/orgs", "repos_url": "https://api.github.com/users/yhliang2018/repos", "events_url": "https://api.github.com/users/yhliang2018/events{/privacy}", "received_events_url": "https://api.github.com/users/yhliang2018/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-11-02T20:50:28Z", "updated_at": "2019-11-07T23:36:19Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): **Colab**\r\n- TensorFlow version (use command below): v2.0.0-rc2-26-g64c3d38 2.0.0\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory: **TPU selected Colab**\r\n\r\n**Describe the current behavior**\r\nWhen running the script below on TF 1.15, it runs well throughout.\r\nRunning in TF 2.0, it crashes on the validation stage of the first epoch.\r\nif `validation_steps` in `model.fit` is included it does run throughout.\r\nhowever, if it's omitted (which is natural to assume, as the dataset itself is not repeated)\r\na strange error message `TypeError: 'function' object is not subscriptable` is given.\r\n\r\n**Describe the expected behavior**\r\nEither, TF 2 should behave similarly to TF 1, ie use up the entire validation set.\r\nOr report a more informative error regarding 'validation_steps' requirement (similar to the error if steps_per_epoch are omitted for the training data).\r\n\r\n**Code to reproduce the issue**\r\n```\r\n%tensorflow_version 2.x  #(commented out for TF 1.x case)\r\nimport tensorflow as tf\r\nimport numpy as np\r\nimport matplotlib.pyplot as plt\r\nimport tensorflow_datasets as tfds\r\nimport os\r\n\r\nresolver = tf.distribute.cluster_resolver.TPUClusterResolver(tpu='grpc://' + os.environ['COLAB_TPU_ADDR'])\r\ntf.config.experimental_connect_to_cluster(resolver)\r\ntf.tpu.experimental.initialize_tpu_system(resolver)\r\nstrategy = tf.distribute.experimental.TPUStrategy(resolver)\r\n\r\nIMG_HEIGHT=IMG_WIDTH=200\r\nBATCH_SIZE=128\r\n\r\ndef create_model():\r\n  model = tf.keras.models.Sequential()\r\n  model.add(tf.keras.layers.BatchNormalization(input_shape=(IMG_HEIGHT,IMG_WIDTH,1)))\r\n  model.add(tf.keras.layers.Conv2D(64, (3, 3), activation='elu'))\r\n  model.add(tf.keras.layers.MaxPooling2D(2))\r\n  model.add(tf.keras.layers.Dropout(0.25))\r\n\r\n  model.add(tf.keras.layers.BatchNormalization(input_shape=(IMG_HEIGHT,IMG_WIDTH,3)))\r\n  model.add(tf.keras.layers.Conv2D(64, (3, 3), activation='elu'))\r\n  model.add(tf.keras.layers.MaxPooling2D(2))\r\n  model.add(tf.keras.layers.Dropout(0.25))\r\n\r\n  model.add(tf.keras.layers.BatchNormalization(input_shape=(IMG_HEIGHT,IMG_WIDTH,3)))\r\n  model.add(tf.keras.layers.Conv2D(64, (5, 5), activation='elu'))\r\n  model.add(tf.keras.layers.MaxPooling2D(2))\r\n  model.add(tf.keras.layers.Dropout(0.25))\r\n\r\n  model.add(tf.keras.layers.BatchNormalization())\r\n  model.add(tf.keras.layers.Conv2D(128, (3, 3),  activation='elu'))\r\n  model.add(tf.keras.layers.MaxPooling2D(2))\r\n  model.add(tf.keras.layers.Dropout(0.25))\r\n\r\n  model.add(tf.keras.layers.BatchNormalization())\r\n  model.add(tf.keras.layers.Conv2D(256, (3, 3),  activation='elu'))\r\n  #model.add(tf.keras.layers.MaxPooling2D(2))\r\n  model.add(tf.keras.layers.Dropout(0.25))\r\n\r\n  model.add(tf.keras.layers.BatchNormalization())\r\n  model.add(tf.keras.layers.Conv2D(512, (3, 3),  activation='elu'))\r\n  model.add(tf.keras.layers.MaxPooling2D(2))\r\n  model.add(tf.keras.layers.Dropout(0.25))\r\n\r\n  model.add(tf.keras.layers.Flatten())\r\n  model.add(tf.keras.layers.Dense(256))\r\n  model.add(tf.keras.layers.Activation('elu'))\r\n  model.add(tf.keras.layers.Dropout(0.5))\r\n  model.add(tf.keras.layers.Dense(10))\r\n  model.add(tf.keras.layers.Activation('softmax'))\r\n  return model\r\n\r\n\r\nwith strategy.scope():\r\n  train_ds = (tfds.load(\"mnist:3.*.*\", split=\"train\", as_supervised=True, try_gcs=True)\r\n    .map(lambda image,label:(tf.image.convert_image_dtype(image, tf.float32),label))\r\n    .map(lambda image,label:(tf.image.resize(image,(IMG_HEIGHT,IMG_WIDTH)),label))\r\n    #.map(lambda image,label:(tf.cast(image, tf.float32)/255.0,tf.cast(label, tf.float32)))\r\n    .batch(BATCH_SIZE))\r\n\r\n  #distributed_train_ds=strategy.experimental_distribute_dataset(train_ds)\r\n\r\n  validation_ds = (tfds.load(\"mnist:3.*.*\", split=\"test\", as_supervised=True, try_gcs=True)\r\n    .map(lambda image,label:(tf.image.convert_image_dtype(image, tf.float32),label))\r\n    .map(lambda image,label:(tf.image.resize(image,(IMG_HEIGHT,IMG_WIDTH)),label))\r\n    #.map(lambda image,label:(tf.cast(image, tf.float32)/255.0,tf.cast(label, tf.float32)))\r\n    .batch(BATCH_SIZE))\r\n\r\n  #distributed_validation_ds=strategy.experimental_distribute_dataset(validation_ds)\r\n\r\n  model=create_model()\r\n  model.compile(\r\n        optimizer=tf.keras.optimizers.Adam(),\r\n        loss=\"sparse_categorical_crossentropy\",\r\n        metrics=['sparse_categorical_accuracy'])\r\n\r\nmodel.fit(train_ds,epochs=3,steps_per_epoch=100,validation_data=validation_ds)\r\n```\r\nthis produces this output, after going through the training fine, it crashes on the validation set\r\n```\r\nTrain on 100 steps\r\nEpoch 1/3\r\n 99/100 [============================>.] - ETA: 0s - loss: 1.4453 - sparse_categorical_accuracy: 0.7015\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-10-fd27085b00aa> in <module>()\r\n----> 1 model.fit(train_ds,epochs=3,steps_per_epoch=100,validation_data=validation_ds)\r\n\r\n5 frames\r\n/tensorflow-2.0.0/python3.6/tensorflow_core/python/keras/engine/training_utils.py in check_num_samples(ins, batch_size, steps, steps_name)\r\n    425     return None\r\n    426 \r\n--> 427   if hasattr(ins[0], 'shape'):\r\n    428     return int(ins[0].shape[0])\r\n    429   return None  # Edge case where ins == [static_learning_phase]\r\n\r\nTypeError: 'function' object is not subscriptable\r\n\r\n```\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33936", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33936/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33936/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33936/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33936", "id": 516634980, "node_id": "MDU6SXNzdWU1MTY2MzQ5ODA=", "number": 33936, "title": "sigmoid is ignored when calculating loss by calling method model.fit", "user": {"login": "tornadoyi", "id": 6438369, "node_id": "MDQ6VXNlcjY0MzgzNjk=", "avatar_url": "https://avatars3.githubusercontent.com/u/6438369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tornadoyi", "html_url": "https://github.com/tornadoyi", "followers_url": "https://api.github.com/users/tornadoyi/followers", "following_url": "https://api.github.com/users/tornadoyi/following{/other_user}", "gists_url": "https://api.github.com/users/tornadoyi/gists{/gist_id}", "starred_url": "https://api.github.com/users/tornadoyi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tornadoyi/subscriptions", "organizations_url": "https://api.github.com/users/tornadoyi/orgs", "repos_url": "https://api.github.com/users/tornadoyi/repos", "events_url": "https://api.github.com/users/tornadoyi/events{/privacy}", "received_events_url": "https://api.github.com/users/tornadoyi/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yhliang2018", "id": 36285763, "node_id": "MDQ6VXNlcjM2Mjg1NzYz", "avatar_url": "https://avatars1.githubusercontent.com/u/36285763?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yhliang2018", "html_url": "https://github.com/yhliang2018", "followers_url": "https://api.github.com/users/yhliang2018/followers", "following_url": "https://api.github.com/users/yhliang2018/following{/other_user}", "gists_url": "https://api.github.com/users/yhliang2018/gists{/gist_id}", "starred_url": "https://api.github.com/users/yhliang2018/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yhliang2018/subscriptions", "organizations_url": "https://api.github.com/users/yhliang2018/orgs", "repos_url": "https://api.github.com/users/yhliang2018/repos", "events_url": "https://api.github.com/users/yhliang2018/events{/privacy}", "received_events_url": "https://api.github.com/users/yhliang2018/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yhliang2018", "id": 36285763, "node_id": "MDQ6VXNlcjM2Mjg1NzYz", "avatar_url": "https://avatars1.githubusercontent.com/u/36285763?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yhliang2018", "html_url": "https://github.com/yhliang2018", "followers_url": "https://api.github.com/users/yhliang2018/followers", "following_url": "https://api.github.com/users/yhliang2018/following{/other_user}", "gists_url": "https://api.github.com/users/yhliang2018/gists{/gist_id}", "starred_url": "https://api.github.com/users/yhliang2018/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yhliang2018/subscriptions", "organizations_url": "https://api.github.com/users/yhliang2018/orgs", "repos_url": "https://api.github.com/users/yhliang2018/repos", "events_url": "https://api.github.com/users/yhliang2018/events{/privacy}", "received_events_url": "https://api.github.com/users/yhliang2018/received_events", "type": "User", "site_admin": false}, {"login": "gadagashwini", "id": 48476109, "node_id": "MDQ6VXNlcjQ4NDc2MTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/48476109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadagashwini", "html_url": "https://github.com/gadagashwini", "followers_url": "https://api.github.com/users/gadagashwini/followers", "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}", "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions", "organizations_url": "https://api.github.com/users/gadagashwini/orgs", "repos_url": "https://api.github.com/users/gadagashwini/repos", "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}", "received_events_url": "https://api.github.com/users/gadagashwini/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-11-02T15:47:03Z", "updated_at": "2020-03-18T10:26:57Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Windoiws\r\n\r\nVersion: ('v2.0.0-rc2-26-g64c3d382ca', '2.0.0')\r\n\r\n**Describe the current behavior**\r\n    I got a incorrect loss from history returned by calling model.fit.  You can see the correct and  incorrect result by change parameter \"error \" from my code.\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport math\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\nerror = True\r\nn_features = 100\r\nbatch = 2\r\n\r\n\"\"\"\r\nmodel\r\n\"\"\"\r\nx = tf.keras.Input(shape=(n_features,), dtype=tf.float32)\r\nw = tf.Variable([1.0] * n_features)\r\nb = tf.Variable(1.0)\r\nz = tf.reduce_sum(w * x, axis=1, keepdims=True) + b\r\n\r\n\"\"\"\r\nloss is incorrect if error is true\r\n\"\"\"\r\nif error:\r\n    y_ = tf.sigmoid(z)\r\nelse:\r\n    y_ = 1.0 / (1.0 + math.e ** (-z))\r\n\r\nm = tf.keras.Model(inputs=x, outputs=y_)\r\n\r\n\"\"\"\r\nloss\r\n\"\"\"\r\noptimizer=tf.keras.optimizers.SGD(learning_rate=0.001)\r\nloss = tf.keras.losses.BinaryCrossentropy()\r\nm.compile(optimizer = optimizer, loss = loss)\r\n\r\n\"\"\"\r\ntrain dataset\r\n\"\"\"\r\nx = np.array([[1.0 for i in range(n_features)]] * batch, dtype=np.float32)\r\ny = np.array([0.0] * batch, dtype=np.float32)\r\n\r\n\"\"\"\r\nget correct loss\r\n\"\"\"\r\nlogits = m(x)\r\nl = loss(y, logits)\r\n\r\n\"\"\"\r\nget incorrect loss\r\n\"\"\"\r\nhistory = m.fit(x, y)\r\n\r\n\"\"\"\r\nhistory.history['loss'] != l.numpy()\r\n\"\"\"\r\nprint(history.history)\r\nprint(l.numpy())\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33929", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33929/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33929/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33929/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33929", "id": 516472596, "node_id": "MDU6SXNzdWU1MTY0NzI1OTY=", "number": 33929, "title": "Optimizer clipvalue and clipnorm not working in Tensorflow 2.0", "user": {"login": "bloc97", "id": 567732, "node_id": "MDQ6VXNlcjU2NzczMg==", "avatar_url": "https://avatars0.githubusercontent.com/u/567732?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bloc97", "html_url": "https://github.com/bloc97", "followers_url": "https://api.github.com/users/bloc97/followers", "following_url": "https://api.github.com/users/bloc97/following{/other_user}", "gists_url": "https://api.github.com/users/bloc97/gists{/gist_id}", "starred_url": "https://api.github.com/users/bloc97/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bloc97/subscriptions", "organizations_url": "https://api.github.com/users/bloc97/orgs", "repos_url": "https://api.github.com/users/bloc97/repos", "events_url": "https://api.github.com/users/bloc97/events{/privacy}", "received_events_url": "https://api.github.com/users/bloc97/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tomerk", "id": 676357, "node_id": "MDQ6VXNlcjY3NjM1Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/676357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomerk", "html_url": "https://github.com/tomerk", "followers_url": "https://api.github.com/users/tomerk/followers", "following_url": "https://api.github.com/users/tomerk/following{/other_user}", "gists_url": "https://api.github.com/users/tomerk/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomerk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomerk/subscriptions", "organizations_url": "https://api.github.com/users/tomerk/orgs", "repos_url": "https://api.github.com/users/tomerk/repos", "events_url": "https://api.github.com/users/tomerk/events{/privacy}", "received_events_url": "https://api.github.com/users/tomerk/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tomerk", "id": 676357, "node_id": "MDQ6VXNlcjY3NjM1Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/676357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomerk", "html_url": "https://github.com/tomerk", "followers_url": "https://api.github.com/users/tomerk/followers", "following_url": "https://api.github.com/users/tomerk/following{/other_user}", "gists_url": "https://api.github.com/users/tomerk/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomerk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomerk/subscriptions", "organizations_url": "https://api.github.com/users/tomerk/orgs", "repos_url": "https://api.github.com/users/tomerk/repos", "events_url": "https://api.github.com/users/tomerk/events{/privacy}", "received_events_url": "https://api.github.com/users/tomerk/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2019-11-02T04:43:08Z", "updated_at": "2020-03-18T08:23:05Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- Python 3 Google Compute Engine backend (GPU)\r\n\r\n**Describe the current behavior**\r\nclipvalue and clipnorm in Optimizers does nothing!\r\n\r\n**Describe the expected behavior**\r\nBy setting clipvalue=0 or clipnorm=0 no training should occur (gradients should be 0!), but the network still trains, and if using a large learning rate, loss goes to nan.\r\n\r\n**Code to reproduce the issue**\r\n![image](https://user-images.githubusercontent.com/567732/68066124-4d01b000-fd09-11e9-8e41-51ece3684869.png)\r\n**Gradient is clearly not zero since the network is getting modified at each iteration.**\r\n\r\n![image](https://user-images.githubusercontent.com/567732/68066145-7589aa00-fd09-11e9-8c94-1ae4bcf33e45.png)\r\n**Sanity check by setting lr=0**\r\n**No training occurs when lr=0, as expected.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33925", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33925/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33925/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33925/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33925", "id": 516358350, "node_id": "MDU6SXNzdWU1MTYzNTgzNTA=", "number": 33925, "title": "RuntimeError: Quantization not yet supported for op: CUSTOM in Post Training Quantization", "user": {"login": "shelkesagar29", "id": 25697952, "node_id": "MDQ6VXNlcjI1Njk3OTUy", "avatar_url": "https://avatars0.githubusercontent.com/u/25697952?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shelkesagar29", "html_url": "https://github.com/shelkesagar29", "followers_url": "https://api.github.com/users/shelkesagar29/followers", "following_url": "https://api.github.com/users/shelkesagar29/following{/other_user}", "gists_url": "https://api.github.com/users/shelkesagar29/gists{/gist_id}", "starred_url": "https://api.github.com/users/shelkesagar29/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shelkesagar29/subscriptions", "organizations_url": "https://api.github.com/users/shelkesagar29/orgs", "repos_url": "https://api.github.com/users/shelkesagar29/repos", "events_url": "https://api.github.com/users/shelkesagar29/events{/privacy}", "received_events_url": "https://api.github.com/users/shelkesagar29/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-11-01T21:34:31Z", "updated_at": "2020-03-04T16:08:16Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (or github SHA if from source): r1.15\r\n\r\nFollowing error occurs when implementing post training [full integer quantizati](https://www.tensorflow.org/lite/performance/post_training_quantization#full_integer_quantization_of_weights_and_activations)on of weights and activations. \r\nI am using [SSD Mobilenet 2](http://download.tensorflow.org/models/object_detection/ssd_mobilenet_v2_coco_2018_03_29.tar.gz) model from TensorFlow model zoo.\r\n\r\nI am following exact steps given on TensorFlow website.\r\nI think it is due to [add_postprocessing_op](https://github.com/tensorflow/models/blob/9df6a3d6d09b360c8775426a8746783ad2d0d4a6/research/object_detection/export_tflite_ssd_graph.py#L39) parameter in export_tflite_ssd_graph.py. \r\nINT8 implementation is not available for that. \r\n\r\nHow this issue can be solved for post training quantization? Is there any temporary work around?\r\n \r\n**Any other info / logs**\r\nCode to Reproduce\r\n\r\n```\r\nimport tensorflow as tf\r\ndef representative_dataset_gen():\r\n  for _ in range(num_calibration_steps):\r\n    # Get sample input data as a numpy array in a method of your choosing.\r\n    yield [input]\r\n\r\nconverter = tf.lite.TFLiteConverter.from_saved_model(saved_model_dir)\r\nconverter.optimizations = [tf.lite.Optimize.DEFAULT]\r\nconverter.target_spec.supported_ops = [tf.lite.OpsSet.TFLITE_BUILTINS_INT8]\r\nconverter.inference_input_type = tf.uint8\r\nconverter.inference_output_type = tf.uint8\r\nconverter.representative_dataset = representative_dataset_gen\r\ntflite_quant_model = converter.convert()\r\n```\r\n\r\nTraceback (most recent call last):\r\n  File \"weight_quantize.py\", line 46, in <module>\r\n    tflite_quant_model = converter.convert()\r\n  File \"/home/morrisc/.local/lib/python3.5/site-packages/tensorflow_core/lite/python/lite.py\", line 993, in convert\r\n    inference_output_type)\r\n  File \"/home/morrisc/.local/lib/python3.5/site-packages/tensorflow_core/lite/python/lite.py\", line 239, in _calibrate_quantize_model\r\n    inference_output_type, allow_float)\r\n  File \"/home/morrisc/.local/lib/python3.5/site-packages/tensorflow_core/lite/python/optimize/calibrator.py\", line 78, in calibrate_and_quantize\r\n    np.dtype(output_type.as_numpy_dtype()).num, allow_float)\r\n  File \"/home/morrisc/.local/lib/python3.5/site-packages/tensorflow_core/lite/python/optimize/tensorflow_lite_wrap_calibration_wrapper.py\", line 115, in QuantizeModel\r\n    return _tensorflow_lite_wrap_calibration_wrapper.CalibrationWrapper_QuantizeModel(self, input_py_type, output_py_type, allow_float)\r\nRuntimeError: Quantization not yet supported for op: CUSTOM\r\n\r\nHowever, if I don't enforce full integer quantization for all ops and use integer input and output. It works. But such model won't run Edge TPU\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33924", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33924/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33924/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33924/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33924", "id": 516349009, "node_id": "MDU6SXNzdWU1MTYzNDkwMDk=", "number": 33924, "title": "Bidirectional LSTM fail on TF2.0", "user": {"login": "PierrePivert", "id": 41760701, "node_id": "MDQ6VXNlcjQxNzYwNzAx", "avatar_url": "https://avatars2.githubusercontent.com/u/41760701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PierrePivert", "html_url": "https://github.com/PierrePivert", "followers_url": "https://api.github.com/users/PierrePivert/followers", "following_url": "https://api.github.com/users/PierrePivert/following{/other_user}", "gists_url": "https://api.github.com/users/PierrePivert/gists{/gist_id}", "starred_url": "https://api.github.com/users/PierrePivert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PierrePivert/subscriptions", "organizations_url": "https://api.github.com/users/PierrePivert/orgs", "repos_url": "https://api.github.com/users/PierrePivert/repos", "events_url": "https://api.github.com/users/PierrePivert/events{/privacy}", "received_events_url": "https://api.github.com/users/PierrePivert/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "houtoms", "id": 4001424, "node_id": "MDQ6VXNlcjQwMDE0MjQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/4001424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/houtoms", "html_url": "https://github.com/houtoms", "followers_url": "https://api.github.com/users/houtoms/followers", "following_url": "https://api.github.com/users/houtoms/following{/other_user}", "gists_url": "https://api.github.com/users/houtoms/gists{/gist_id}", "starred_url": "https://api.github.com/users/houtoms/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/houtoms/subscriptions", "organizations_url": "https://api.github.com/users/houtoms/orgs", "repos_url": "https://api.github.com/users/houtoms/repos", "events_url": "https://api.github.com/users/houtoms/events{/privacy}", "received_events_url": "https://api.github.com/users/houtoms/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "houtoms", "id": 4001424, "node_id": "MDQ6VXNlcjQwMDE0MjQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/4001424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/houtoms", "html_url": "https://github.com/houtoms", "followers_url": "https://api.github.com/users/houtoms/followers", "following_url": "https://api.github.com/users/houtoms/following{/other_user}", "gists_url": "https://api.github.com/users/houtoms/gists{/gist_id}", "starred_url": "https://api.github.com/users/houtoms/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/houtoms/subscriptions", "organizations_url": "https://api.github.com/users/houtoms/orgs", "repos_url": "https://api.github.com/users/houtoms/repos", "events_url": "https://api.github.com/users/houtoms/events{/privacy}", "received_events_url": "https://api.github.com/users/houtoms/received_events", "type": "User", "site_admin": false}, {"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 54, "created_at": "2019-11-01T21:10:27Z", "updated_at": "2020-03-06T20:29:01Z", "closed_at": null, "author_association": "NONE", "body": "I tried to reproduce the \"Text classification with an RNN\" article from tensorflow main page (https://www.tensorflow.org/tutorials/text/text_classification_rnn), but it seems that the code is not running properly when it's executed on my local machine. Unfortunatly, I'm not able to reproduce the error on Colab.\r\n\r\nIt run for few iteration, but no more than 1 epochs..\r\n\r\n**System information**\r\n- Code is provided by TensorFlow\r\n- Running on Windows 10\r\n- TensorFlow installed from pip\r\n- TensorFlow version 2.0\r\n- Python version 3.6\r\n- CUDA 10.0 /cuDNN 7.6.4.38\r\n- GeForce GTX 1060\r\n\r\n\r\n****\r\n\r\n**I get the following error**\r\n\r\n2019-11-01 21:49:02.287950: E tensorflow/stream_executor/dnn.cc:588] CUDNN_STATUS_INTERNAL_ERROR\r\nin tensorflow/stream_executor/cuda/cuda_dnn.cc(1915): 'cudnnRNNBackwardData( cudnn.handle(), rnn_desc.handle(), model_dims.max_seq_length, output_desc.handles(), output_data.opaque(), output_desc.handles(), output_backprop_data.opaque(), output_h_desc.handle(), output_h_backprop_data.opaque(), output_c_desc.handle(), output_c_backprop_data.opaque(), rnn_desc.params_handle(), params.opaque(), input_h_desc.handle(), input_h_data.opaque(), input_c_desc.handle(), input_c_data.opaque(), input_desc.handles(), input_backprop_data->opaque(), input_h_desc.handle(), input_h_backprop_data->opaque(), input_c_desc.handle(), input_c_backprop_data->opaque(), workspace.opaque(), workspace.size(), reserve_space_data->opaque(), reserve_space_data->size())'\r\n2019-11-01 21:49:02.289212: W tensorflow/core/framework/op_kernel.cc:1622] OP_REQUIRES failed at cudnn_rnn_ops.cc:1899 : Internal: Failed to call ThenRnnBackward with model config: [rnn_mode, rnn_input_mode, rnn_direction_mode]: 2, 0, 0 , [num_layers, input_size, num_units, dir_count, max_seq_length, batch_size, cell_num_units]: [1, 64, 64, 1, 1974, 64, 64] \r\n2019-11-01 21:49:02.289778: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Internal: Failed to call ThenRnnBackward with model config: [rnn_mode, rnn_input_mode, rnn_direction_mode]: 2, 0, 0 , [num_layers, input_size, num_units, dir_count, max_seq_length, batch_size, cell_num_units]: [1, 64, 64, 1, 1974, 64, 64] \r\n\t [[{{node gradients/CudnnRNN_grad/CudnnRNNBackprop}}]]\r\n2019-11-01 21:49:02.290428: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Cancelled: [_Derived_]RecvAsync is cancelled.\r\n\t [[{{node Reshape_11/_38}}]]\r\n\t [[Adam/Adam/update/AssignSubVariableOp/_41]]\r\n2019-11-01 21:49:02.291354: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Cancelled: [_Derived_]RecvAsync is cancelled.\r\n\t [[{{node Reshape_11/_38}}]]\r\n    313/Unknown - 40s 128ms/step - loss: 0.6864 - accuracy: 0.5492\r\n    313/Unknown - 40s 128ms/step - loss: 0.6864 - accuracy: 0.5492Traceback (most recent call last):\r\n  File \"C:\\Program Files\\JetBrains\\PyCharm Community Edition 2019.2.3\\helpers\\pydev\\_pydevd_bundle\\pydevd_exec2.py\", line 3, in Exec\r\n    exec(exp, global_vars, local_vars)\r\n  File \"<string>\", line 4, in <module>\r\n  File \"C:\\Users\\Woody\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training.py\", line 728, in fit\r\n    use_multiprocessing=use_multiprocessing)\r\n  File \"C:\\Users\\Woody\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_v2.py\", line 324, in fit\r\n    total_epochs=epochs)\r\n  File \"C:\\Users\\Woody\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_v2.py\", line 123, in run_one_epoch\r\n    batch_outs = execution_function(iterator)\r\n  File \"C:\\Users\\Woody\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow_core\\python\\keras\\engine\\training_v2_utils.py\", line 86, in execution_function\r\n    distributed_function(input_fn))\r\n  File \"C:\\Users\\Woody\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow_core\\python\\eager\\def_function.py\", line 457, in __call__\r\n    result = self._call(*args, **kwds)\r\n  File \"C:\\Users\\Woody\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow_core\\python\\eager\\def_function.py\", line 487, in _call\r\n    return self._stateless_fn(*args, **kwds)  # pylint: disable=not-callable\r\n  File \"C:\\Users\\Woody\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow_core\\python\\eager\\function.py\", line 1823, in __call__\r\n    return graph_function._filtered_call(args, kwargs)  # pylint: disable=protected-access\r\n  File \"C:\\Users\\Woody\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow_core\\python\\eager\\function.py\", line 1141, in _filtered_call\r\n    self.captured_inputs)\r\n  File \"C:\\Users\\Woody\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow_core\\python\\eager\\function.py\", line 1224, in _call_flat\r\n    ctx, args, cancellation_manager=cancellation_manager)\r\n  File \"C:\\Users\\Woody\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow_core\\python\\eager\\function.py\", line 511, in call\r\n    ctx=ctx)\r\n  File \"C:\\Users\\Woody\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow_core\\python\\eager\\execute.py\", line 67, in quick_execute\r\n    six.raise_from(core._status_to_exception(e.code, message), None)\r\n  File \"<string>\", line 3, in raise_from\r\ntensorflow.python.framework.errors_impl.CancelledError:  [_Derived_]RecvAsync is cancelled.\r\n\t [[{{node Reshape_11/_38}}]] [Op:__inference_distributed_function_7835]\r\n\r\nFunction call stack:\r\ndistributed_function\r\n\r\nException ignored in: <bound method _RandomSeedGeneratorDeleter.__del__ of <tensorflow.python.data.ops.dataset_ops._RandomSeedGeneratorDeleter object at 0x000001D23EA44278>>\r\nTraceback (most recent call last):\r\n  File \"C:\\Users\\Woody\\AppData\\Local\\Programs\\Python\\Python36\\lib\\site-packages\\tensorflow_core\\python\\data\\ops\\dataset_ops.py\", line 3009, in __del__\r\nAttributeError: 'NoneType' object has no attribute 'device'\r\n\r\n****\r\nI tried to change the optimizer, use GRU or other RNN, but as soon as I get the Bidirectional wrapper, I get this error.\r\nTensorFlow-gpu is up to date, drivers are as well.\r\n\r\n****\r\n**The Code to reproduce the error is litterally the one from the webpage**\r\nhttps://www.tensorflow.org/tutorials/text/text_classification_rnn\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33923", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33923/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33923/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33923/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33923", "id": 516324374, "node_id": "MDU6SXNzdWU1MTYzMjQzNzQ=", "number": 33923, "title": "Insert Windows command line in the tutorials", "user": {"login": "raffaem", "id": 54762742, "node_id": "MDQ6VXNlcjU0NzYyNzQy", "avatar_url": "https://avatars0.githubusercontent.com/u/54762742?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raffaem", "html_url": "https://github.com/raffaem", "followers_url": "https://api.github.com/users/raffaem/followers", "following_url": "https://api.github.com/users/raffaem/following{/other_user}", "gists_url": "https://api.github.com/users/raffaem/gists{/gist_id}", "starred_url": "https://api.github.com/users/raffaem/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raffaem/subscriptions", "organizations_url": "https://api.github.com/users/raffaem/orgs", "repos_url": "https://api.github.com/users/raffaem/repos", "events_url": "https://api.github.com/users/raffaem/events{/privacy}", "received_events_url": "https://api.github.com/users/raffaem/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-11-01T20:15:49Z", "updated_at": "2019-11-16T06:27:32Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\n\r\nExample: https://www.tensorflow.org/tutorials/keras/save_and_load\r\n\r\n## Description of issue (what needs changing):\r\n \r\nThe tutorial uses POSIX commands like:\r\n\r\n`!ls {checkpoint_dir}`\r\n\r\nUnfortunately I am on Windows so those commands does not work. Is there no way to condition the command on the OS?\r\n\r\n`!dir {checkpoint_dir}`\r\n\r\nThe alternative way would be to use Python straightaway:\r\n\r\n```\r\nonlyfiles = [f for f in os.listdir(mypath) if os.path.isfile(os.path.join(mypath, f))]\r\nprint(onlyfiles)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33920", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33920/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33920/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33920/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33920", "id": 516291881, "node_id": "MDU6SXNzdWU1MTYyOTE4ODE=", "number": 33920, "title": "Collective AllReduce ops cannot run with variables shared across tasks in between-graph replication", "user": {"login": "zhisbug", "id": 1654062, "node_id": "MDQ6VXNlcjE2NTQwNjI=", "avatar_url": "https://avatars0.githubusercontent.com/u/1654062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhisbug", "html_url": "https://github.com/zhisbug", "followers_url": "https://api.github.com/users/zhisbug/followers", "following_url": "https://api.github.com/users/zhisbug/following{/other_user}", "gists_url": "https://api.github.com/users/zhisbug/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhisbug/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhisbug/subscriptions", "organizations_url": "https://api.github.com/users/zhisbug/orgs", "repos_url": "https://api.github.com/users/zhisbug/repos", "events_url": "https://api.github.com/users/zhisbug/events{/privacy}", "received_events_url": "https://api.github.com/users/zhisbug/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-11-01T18:58:28Z", "updated_at": "2019-11-04T20:11:06Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): installed by `pip install tensorflow-gpu`\r\n- TensorFlow version (use command below): v2.0.0-rc2-26-g64c3d38 2.0.0\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: CUDA 10.0 and cudnn 7.6\r\n- GPU model and memory:   Tesla V100, ~16Gb\r\n\r\n**Describe the current behavior**\r\nThe collective ops executor will fail with the following program.\r\n\r\n**Describe the expected behavior**\r\nThe expected behavior is that the program should run correctly in a between-graph replication as if the graph does not contain collective ops everything will run correctly.\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport threading\r\nfrom multiprocessing import Process\r\n\r\nimport tensorflow as tf\r\nfrom tensorflow.core.protobuf import config_pb2\r\nfrom tensorflow.python import ops\r\nfrom tensorflow.python.client.session import Session\r\nfrom tensorflow.python.ops import collective_ops\r\n\r\ncluster_spec = {\r\n    \"worker\": [\r\n        \"localhost:14286\",\r\n        \"localhost:14287\"\r\n    ]\r\n}\r\ninputs = [0.1, 1.1, 2.1, 3.1, 4.1, 5.1, 6.1, 7.1]\r\ngroup_size = 4\r\ngroup_key = 1\r\ninstance_key = 1\r\nuse_nccl = False\r\nnum_gpus_per_node = 2\r\n\r\n\r\ndef _configure(group_size):\r\n    gpu_options = config_pb2.GPUOptions(\r\n        visible_device_list='0,1',\r\n        per_process_gpu_memory_fraction=0.7 / (group_size))\r\n    experimental = config_pb2.ConfigProto.Experimental(collective_nccl=use_nccl)\r\n    experimental.collective_group_leader = '/job:worker/replica:0/task:0'\r\n    return config_pb2.ConfigProto(gpu_options=gpu_options, experimental=experimental)\r\n\r\n\r\nclass TFCluster(object):\r\n    def __init__(self, cluster_spec):\r\n        self._cluster_spec = cluster_spec\r\n        self._num_worker = 0\r\n        self._tf_servers = []\r\n\r\n    def start(self):\r\n        def server(job_name: str, task_index: int):\r\n            server = tf.distribute.Server(self._cluster_spec,\r\n                                          job_name=job_name,\r\n                                          task_index=task_index,\r\n                                          config=_configure(group_size))\r\n            server.join()\r\n\r\n        self._num_worker = len(cluster_spec.get(\"worker\", []))\r\n        assert self._num_worker >= 1\r\n        for i in range(self._num_worker):\r\n            self._tf_servers.append(Process(target=server,\r\n                                            args=(\"worker\", i), daemon=True))\r\n        for proc in self._tf_servers:\r\n            proc.start()\r\n\r\n    def stop(self):\r\n        for proc in self._tf_servers:\r\n            proc.terminate()\r\n\r\n\r\ndef between_graph_test():\r\n    def run_between_graph_clients(client_fn, cluster_spec, num_gpus, *args,\r\n                                  **kwargs):\r\n        threads = []\r\n        for task_type in ['chief', 'worker']:\r\n            for task_id in range(len(cluster_spec.get(task_type, []))):\r\n                t = threading.Thread(\r\n                    target=test_reduction,\r\n                    args=(task_type, task_id, num_gpus) + args,\r\n                    kwargs=kwargs)\r\n                t.start()\r\n                threads.append(t)\r\n        for t in threads:\r\n            t.join()\r\n\r\n    def test_reduction(task_type,\r\n                       task_id,\r\n                       num_gpus):\r\n        worker_device = \"/job:%s/task:%d\" % (task_type, task_id)\r\n        master_target = \"grpc://\" + cluster_spec[task_type][0]\r\n        with ops.Graph().as_default(), Session(target=master_target) as sess:\r\n            collectives = []\r\n            for i in range(num_gpus):\r\n                with ops.device('/job:worker/task:0/device:CPU:0'):  # make sure all use the same variable\r\n                    t = tf.Variable(inputs)\r\n                with ops.device(worker_device + '/device:GPU:' + str(i)):\r\n                    collectives.append(collective_ops.all_reduce(\r\n                        t, group_size, group_key, instance_key, 'Add', 'Div'))\r\n            run_options = config_pb2.RunOptions()\r\n            run_options.experimental.collective_graph_key = 6\r\n            sess.run(tf.compat.v1.global_variables_initializer())\r\n            res_m = sess.run(collectives, options=run_options)\r\n            print(res_m)\r\n\r\n    run_between_graph_clients(\r\n        test_reduction,\r\n        cluster_spec,\r\n        num_gpus_per_node)\r\n\r\n# launch in-process clusters\r\ncluster = TFCluster(cluster_spec)\r\ncluster.start()\r\n\r\n# run between graph execution\r\nbetween_graph_test()\r\ncluster.stop()\r\n\r\n```\r\n\r\n\r\n**Other info / logs**\r\n```\r\n2019-11-01 18:37:48.066477: I tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:365] Started server with target: grpc://localhost:14286\r\n2019-11-01 18:37:48.066556: I tensorflow/core/distributed_runtime/rpc/grpc_server_lib.cc:365] Started server with target: grpc://localhost:14287\r\n2019-11-01 18:37:48.733123: I tensorflow/core/distributed_runtime/base_rendezvous_mgr.cc:161] Skipping rendezvous re-initialization.\r\n2019-11-01 18:37:50.385293: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Aborted: [_Derived_]Cleanup 95609632845199527\r\n\t [[{{node CollectiveReduce}}]]\r\n2019-11-01 18:37:50.385319: W tensorflow/core/distributed_runtime/rpc/grpc_worker_service.cc:510] RecvTensor cancelled for 95609632845199527\r\n[array([0.1, 1.1, 2.1, 3.1, 4.1, 5.1, 6.1, 7.1], dtype=float32), array([0.1, 1.1, 2.1, 3.1, 4.1, 5.1, 6.1, 7.1], dtype=float32)]\r\nException in thread Thread-2:\r\nTraceback (most recent call last):\r\n  File \"/home/ubuntu/arion/arion-env/lib/python3.6/site-packages/tensorflow_core/python/client/session.py\", line 1365, in _do_call\r\n    return fn(*args)\r\n  File \"/home/ubuntu/arion/arion-env/lib/python3.6/site-packages/tensorflow_core/python/client/session.py\", line 1350, in _run_fn\r\n    target_list, run_metadata)\r\n  File \"/home/ubuntu/arion/arion-env/lib/python3.6/site-packages/tensorflow_core/python/client/session.py\", line 1443, in _call_tf_sessionrun\r\n    run_metadata)\r\ntensorflow.python.framework.errors_impl.AbortedError: From /job:worker/replica:0/task:0:\r\n[_Derived_]Cleanup 95609632845199527\r\n\t [[{{node CollectiveReduce}}]]\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/ubuntu/anaconda3/lib/python3.6/threading.py\", line 916, in _bootstrap_inner\r\n    self.run()\r\n  File \"/home/ubuntu/anaconda3/lib/python3.6/threading.py\", line 864, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/home/ubuntu/pycharm/examples/allreduce/test_collective.py\", line 91, in test_reduction\r\n    res_m = sess.run(collectives, options=run_options)\r\n  File \"/home/ubuntu/arion/arion-env/lib/python3.6/site-packages/tensorflow_core/python/client/session.py\", line 956, in run\r\n    run_metadata_ptr)\r\n  File \"/home/ubuntu/arion/arion-env/lib/python3.6/site-packages/tensorflow_core/python/client/session.py\", line 1180, in _run\r\n    feed_dict_tensor, options, run_metadata)\r\n  File \"/home/ubuntu/arion/arion-env/lib/python3.6/site-packages/tensorflow_core/python/client/session.py\", line 1359, in _do_run\r\n    run_metadata)\r\n  File \"/home/ubuntu/arion/arion-env/lib/python3.6/site-packages/tensorflow_core/python/client/session.py\", line 1384, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.AbortedError: From /job:worker/replica:0/task:0:\r\n[_Derived_]Cleanup 95609632845199527\r\n\t [[node CollectiveReduce (defined at /arion/arion-env/lib/python3.6/site-packages/tensorflow_core/python/framework/ops.py:1751) ]]\r\n\r\nOriginal stack trace for 'CollectiveReduce':\r\n  File \"/anaconda3/lib/python3.6/threading.py\", line 884, in _bootstrap\r\n    self._bootstrap_inner()\r\n  File \"/anaconda3/lib/python3.6/threading.py\", line 916, in _bootstrap_inner\r\n    self.run()\r\n  File \"/anaconda3/lib/python3.6/threading.py\", line 864, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/pycharm/examples/allreduce/test_collective.py\", line 87, in test_reduction\r\n    t, group_size, group_key, instance_key, 'Add', 'Div'))\r\n  File \"/arion/arion-env/lib/python3.6/site-packages/tensorflow_core/python/ops/collective_ops.py\", line 58, in all_reduce\r\n    subdiv_offsets=subdiv_offsets)\r\n  File \"/arion/arion-env/lib/python3.6/site-packages/tensorflow_core/python/ops/gen_collective_ops.py\", line 349, in collective_reduce\r\n    name=name)\r\n  File \"/arion/arion-env/lib/python3.6/site-packages/tensorflow_core/python/framework/op_def_library.py\", line 793, in _apply_op_helper\r\n    op_def=op_def)\r\n  File \"/arion/arion-env/lib/python3.6/site-packages/tensorflow_core/python/util/deprecation.py\", line 507, in new_func\r\n    return func(*args, **kwargs)\r\n  File \"/arion/arion-env/lib/python3.6/site-packages/tensorflow_core/python/framework/ops.py\", line 3360, in create_op\r\n    attrs, op_def, compute_device)\r\n  File \"/arion/arion-env/lib/python3.6/site-packages/tensorflow_core/python/framework/ops.py\", line 3429, in _create_op_internal\r\n    op_def=op_def)\r\n  File \"/arion/arion-env/lib/python3.6/site-packages/tensorflow_core/python/framework/ops.py\", line 1751, in __init__\r\n    self._traceback = tf_stack.extract_stack()\r\n\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33914", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33914/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33914/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33914/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33914", "id": 516097141, "node_id": "MDU6SXNzdWU1MTYwOTcxNDE=", "number": 33914, "title": "Writing tflite file from Keras model throws \"Cycle found! We already encountered that input array\"", "user": {"login": "ChaiKnight", "id": 14553782, "node_id": "MDQ6VXNlcjE0NTUzNzgy", "avatar_url": "https://avatars2.githubusercontent.com/u/14553782?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChaiKnight", "html_url": "https://github.com/ChaiKnight", "followers_url": "https://api.github.com/users/ChaiKnight/followers", "following_url": "https://api.github.com/users/ChaiKnight/following{/other_user}", "gists_url": "https://api.github.com/users/ChaiKnight/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChaiKnight/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChaiKnight/subscriptions", "organizations_url": "https://api.github.com/users/ChaiKnight/orgs", "repos_url": "https://api.github.com/users/ChaiKnight/repos", "events_url": "https://api.github.com/users/ChaiKnight/events{/privacy}", "received_events_url": "https://api.github.com/users/ChaiKnight/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-11-01T12:58:55Z", "updated_at": "2019-11-05T06:26:10Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version (use command below): v1.12.1-7396-g12481e7e74 1.15.0-dev20190730\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 9.1, 10.0, 10.1\r\n- GPU model and memory: GTX 1050ti 4GB\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\nI'm trying to write convert a (pure) Keras model to .pb file in order to write it to tflite. It's a few conv layers and some end logic. In order to do so, I freeze it with `convert_variables_to_constants` and reload it using the `TFLiteConverter.from_frozen_graph()`. However, I get the following error: \r\n```\r\nF tensorflow/lite/toco/tooling_util.cc:1182] Cycle found! We already encountered that input array, decoded_predictions/loop_over_batch/while/NextIteration, earlier in the above trace! We expect graphs to be acyclic, even RNNs. Let us know if some graph actually needs to have cycles, but first, please check if it really is an *inference* graph. *Training* graphs are out-of-scope for toco.\r\nFatal Python error: Aborted\r\n```\r\n\r\n**Describe the expected behavior**\r\n\r\nI would expect `convert_variables_to_constants` to write a frozen graph readable by the `from_frozen_graph` method and simply convert my model. I've tried many things, like writing it with different methods, setting learning phase, changing the final layer (which is causing the problem), etc.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n```\r\ndef freeze_session(session, model, keep_var_names=None, clear_devices=None):\r\n    graph = session.graph\r\n    with graph.as_default():\r\n        freeze_var_names = list(set(v.op.name for v in tf.global_variables()).difference(keep_var_names or []))\r\n        output_names = [out.op.name for out in model.outputs]\r\n        output_names += [v.op.name for v in tf.global_variables()]\r\n        input_graph_def = graph.as_graph_def()\r\n        if clear_devices:\r\n            for node in input_graph_def.node:\r\n                node.device = \"\"\r\n        frozen_graph = convert_variables_to_constants(session, input_graph_def, output_names)#, freeze_var_names)\r\n        return frozen_graph\r\n\r\ndef save_model(model, iteration):\r\n    # K.clear_session()\r\n    K.set_learning_phase(0)\r\n    new_model = get_out_model(model)\r\n    \r\n    frozen_graph = freeze_session(K.get_session(), new_model)\r\n    with tf.gfile.GFile('./model/model.pb', \"wb\") as f:\r\n        f.write(frozen_graph.SerializeToString())\r\n    # path = tf.train.write_graph(frozen_graph, './model', 'model' + str(iteration) + '.pb')\r\n\r\n    \r\n    converter = tf.lite.TFLiteConverter.from_frozen_graph('./model/model.pb',\r\n                                                          input_arrays=new_model.input_names,\r\n                                                          # output_arrays=['predictions/concat'])\r\n                                                          output_arrays=['decoded_predictions/loop_over_batch/TensorArrayStack/TensorArrayGatherV3'])\r\n    converter.optimizations = [tf.lite.Optimize.DEFAULT]\r\n    converter.target_spec.supported_ops = set([tf.lite.OpsSet.SELECT_TF_OPS])\r\n    converter.allow_custom_ops = True\r\n    converter.drop_control_dependency = False\r\n    tflite_model = converter.convert()\r\n    with open(\"./model.tflite\", 'wb') as tfile:\r\n        tfile.write(tflite_model)\r\n        \r\n    K.set_learning_phase(1)\r\n```\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n```\r\nCurrent thread 0x00007f8956f0f740 (most recent call first):\r\n  File \"/home/oliver/.local/lib/python3.6/site-packages/tensorflow_core/lite/toco/python/toco_from_protos.py\", line 52 in execute\r\n  File \"/home/oliver/.local/lib/python3.6/site-packages/absl/app.py\", line 250 in _run_main\r\n  File \"/home/oliver/.local/lib/python3.6/site-packages/absl/app.py\", line 299 in run\r\n  File \"/home/oliver/.local/lib/python3.6/site-packages/tensorflow_core/python/platform/app.py\", line 40 in run\r\n  File \"/home/oliver/.local/lib/python3.6/site-packages/tensorflow_core/lite/toco/python/toco_from_protos.py\", line 89 in main\r\n  File \"/home/oliver/.local/bin/toco_from_protos\", line 11 in <module>\r\nAborted (core dumped)\r\n\r\n\r\n\r\nNone\r\n  File \"/home/oliver/Projects/DataGen/Retrainer/Retrainer.py\", line 189, in <module>\r\n    loss = train_saved_model(model, socket)\r\n  File \"/home/oliver/Projects/DataGen/Retrainer/Retrainer.py\", line 168, in train_saved_model\r\n    save_model(model, i)\r\n  File \"/home/oliver/Projects/DataGen/Retrainer/Retrainer.py\", line 121, in save_model\r\n    tflite_model = converter.convert()\r\n  File \"/home/oliver/.local/lib/python3.6/site-packages/tensorflow_core/lite/python/lite.py\", line 983, in convert\r\n    **converter_kwargs)\r\n  File \"/home/oliver/.local/lib/python3.6/site-packages/tensorflow_core/lite/python/convert.py\", line 449, in toco_convert_impl\r\n    enable_mlir_converter=enable_mlir_converter)\r\n  File \"/home/oliver/.local/lib/python3.6/site-packages/tensorflow_core/lite/python/convert.py\", line 200, in toco_convert_protos\r\n    raise ConverterError(\"See console for info.\\n%s\\n%s\\n\" % (stdout, stderr))\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33912", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33912/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33912/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33912/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/33912", "id": 516053847, "node_id": "MDExOlB1bGxSZXF1ZXN0MzM1Mzc2OTMx", "number": 33912, "title": "Support dynamic shapes for IndexedSlices in the _num_elements function", "user": {"login": "alexeyr", "id": 24733, "node_id": "MDQ6VXNlcjI0NzMz", "avatar_url": "https://avatars2.githubusercontent.com/u/24733?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexeyr", "html_url": "https://github.com/alexeyr", "followers_url": "https://api.github.com/users/alexeyr/followers", "following_url": "https://api.github.com/users/alexeyr/following{/other_user}", "gists_url": "https://api.github.com/users/alexeyr/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexeyr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexeyr/subscriptions", "organizations_url": "https://api.github.com/users/alexeyr/orgs", "repos_url": "https://api.github.com/users/alexeyr/repos", "events_url": "https://api.github.com/users/alexeyr/events{/privacy}", "received_events_url": "https://api.github.com/users/alexeyr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}, {"id": 474725938, "node_id": "MDU6TGFiZWw0NzQ3MjU5Mzg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stalled", "name": "stalled", "color": "d4c5f9", "default": false, "description": null}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2019-11-01T11:17:31Z", "updated_at": "2020-03-08T00:45:52Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/33912", "html_url": "https://github.com/tensorflow/tensorflow/pull/33912", "diff_url": "https://github.com/tensorflow/tensorflow/pull/33912.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/33912.patch"}, "body": "Fixes #33681."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33910", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33910/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33910/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33910/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33910", "id": 515984597, "node_id": "MDU6SXNzdWU1MTU5ODQ1OTc=", "number": 33910, "title": "build tensorflow from source failed on Linux", "user": {"login": "dongxiao92", "id": 22977274, "node_id": "MDQ6VXNlcjIyOTc3Mjc0", "avatar_url": "https://avatars1.githubusercontent.com/u/22977274?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dongxiao92", "html_url": "https://github.com/dongxiao92", "followers_url": "https://api.github.com/users/dongxiao92/followers", "following_url": "https://api.github.com/users/dongxiao92/following{/other_user}", "gists_url": "https://api.github.com/users/dongxiao92/gists{/gist_id}", "starred_url": "https://api.github.com/users/dongxiao92/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dongxiao92/subscriptions", "organizations_url": "https://api.github.com/users/dongxiao92/orgs", "repos_url": "https://api.github.com/users/dongxiao92/repos", "events_url": "https://api.github.com/users/dongxiao92/events{/privacy}", "received_events_url": "https://api.github.com/users/dongxiao92/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-11-01T08:47:47Z", "updated_at": "2020-01-17T12:41:33Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: NA\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: r1.14\r\n- Python version: Python 3.7.3 (default, Mar 27 2019, 22:11:17) [GCC 7.3.0] :: Anaconda, Inc. on linux\r\n- Installed using virtualenv? pip? conda?: NA\r\n- Bazel version (if compiling from source): 0.25.0\r\n- GCC/Compiler version (if compiling from source): gcc (Ubuntu 5.4.0-6ubuntu1~16.04.10) 5.4.0 20160609; nvcc release 9.1, V9.1.85\r\n- CUDA/cuDNN version: 9.1/7.3.0\r\n- GPU model and memory: Nvidia Titan XP with 12 GB memory\r\n\r\n**Describe the problem**\r\nbuild tensorflow from source on branch r1.14 on ubuntu 16.04 with GPU and XLA support failed. Errors related to undefiend symbols in cublas occured. I can ensure the cublas library has been installed in the $CUDA_HOME/lib64 (/usr/local/cuda/lib64) which has been added to $LD_LIBRARY_PATH. I also print the symbols in the installed cublas.so and the two undefined symbols can be found:\r\n\r\n> dongxiao@178-ubuntu ~/working/tensorflow                                                                                                                                  \r\n> (base) > $ nm -D /usr/local/cuda/lib64/libcublas.so | grep \"cublasGemmStridedBatchedEx\"                                                                                   \r\n> 0000000000398e70 T cublasGemmStridedBatchedEx\r\n> dongxiao@178-ubuntu ~/working/tensorflow                                                                                                                                  \r\n> (base) > $ nm -D /usr/local/cuda/lib64/libcublas.so | grep \"cublasGemmBatchedEx\"                                                                                          \r\n> 0000000000399e20 T cublasGemmBatchedEx\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n```\r\ngit clone https://github.com/tensorflow/tensorflow.git\r\ngit checkout r1.14\r\n./configure  #only enable GPU and XLA support\r\nbazel build --verbose_failures --config=noaws --config=nogcp --config=nohdfs --config=noignite --config=nokafka --config=nonccl --action_env=LD_LIBRARY_PATH=/usr/local/cuda/lib64/ --config=cuda --config=opt //tensorflow/tools/pip_package:build_pip_package\r\n```\r\n\r\n**Any other info / logs**\r\n\r\n> ERROR: /home/dongxiao/working/tensorflow/tensorflow/contrib/ffmpeg/BUILD:100:1: Linking of rule '//tensorflow/contrib/ffmpeg:gen_decode_video_op_py_py_wrappers_cc' failed (Exit 1): crosstool_wrapper_driver_is_not_gcc failed: error executing command\r\n>   (cd /home/dongxiao/.cache/bazel/_bazel_dongxiao/09108a4ee4f3be79160332645b3550ec/execroot/org_tensorflow && \\\r\n>   exec env - \\\r\n>     LD_LIBRARY_PATH=/usr/local/cuda/lib64: \\\r\n>     PATH=/home/dongxiao/anaconda3/bin:/home/dongxiao/anaconda3/condabin:/usr/local/cuda/bin:/home/dongxiao/tools/login/node-v8.2.1-linux-x64/bin:/home/dongxiao/tools/llvm-4.0.0.src/build/bin:/home/dongxiao/tools/cfe-4.0.1.src/build/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games \\\r\n>     PWD=/proc/self/cwd \\\r\n>   external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -o bazel-out/host/bin/tensorflow/contrib/ffmpeg/gen_decode_video_op_py_py_wrappers_cc '-Wl,-rpath,$ORIGIN/../../../_solib_local/_U_S_Stensorflow_Scontrib_Sffmpeg_Cgen_Udecode_Uvideo_Uop_Upy_Upy_Uwrappers_Ucc___Utensorflow' -Lbazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sffmpeg_Cgen_Udecode_Uvideo_Uop_Upy_Upy_Uwrappers_Ucc___Utensorflow -Wl,-ldl '-Wl,-rpath,$ORIGIN/,-rpath,$ORIGIN/..,-rpath,$ORIGIN/../..' -pthread -pthread -pthread -pthread -Wl,-S -Wl,-no-as-needed -pie -Wl,-z,relro,-z,now '-Wl,--build-id=md5' '-Wl,--hash-style=gnu' -no-canonical-prefixes -fno-canonical-system-headers -B/usr/bin -Wl,--gc-sections -Wl,@bazel-out/host/bin/tensorflow/contrib/ffmpeg/gen_decode_video_op_py_py_wrappers_cc-2.params)\r\n> Execution platform: @bazel_tools//platforms:host_platform\r\n> bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sffmpeg_Cgen_Udecode_Uvideo_Uop_Upy_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so.1: undefined reference to `cublasGemmBatchedEx'\r\n> bazel-out/host/bin/_solib_local/_U_S_Stensorflow_Scontrib_Sffmpeg_Cgen_Udecode_Uvideo_Uop_Upy_Upy_Uwrappers_Ucc___Utensorflow/libtensorflow_framework.so.1: undefined reference to `cublasGemmStridedBatchedEx'\r\n> collect2: error: ld returned 1 exit status\r\n> Target //tensorflow/tools/pip_package:build_pip_package failed to build\r\n> INFO: Elapsed time: 348.727s, Critical Path: 79.30s\r\n> INFO: 1621 processes: 1621 local.\r\n> FAILED: Build did NOT complete successfully\r\n\r\nIt seems the cublas linking options are not added in the command properly, which should be '-lcublas -L/usr/local/cuda/lib64'. But I'm not sure about that. I have not found propoer place to add these options to try."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33906", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33906/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33906/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33906/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33906", "id": 515936006, "node_id": "MDU6SXNzdWU1MTU5MzYwMDY=", "number": 33906, "title": "Update sample session for build from source instruction docs", "user": {"login": "nikochiko", "id": 37668193, "node_id": "MDQ6VXNlcjM3NjY4MTkz", "avatar_url": "https://avatars3.githubusercontent.com/u/37668193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikochiko", "html_url": "https://github.com/nikochiko", "followers_url": "https://api.github.com/users/nikochiko/followers", "following_url": "https://api.github.com/users/nikochiko/following{/other_user}", "gists_url": "https://api.github.com/users/nikochiko/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikochiko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikochiko/subscriptions", "organizations_url": "https://api.github.com/users/nikochiko/orgs", "repos_url": "https://api.github.com/users/nikochiko/repos", "events_url": "https://api.github.com/users/nikochiko/events{/privacy}", "received_events_url": "https://api.github.com/users/nikochiko/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-11-01T06:26:40Z", "updated_at": "2019-11-17T02:36:47Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "## URL(s) with the issue:\r\nhttps://www.tensorflow.org/install/source_windows\r\nhttps://www.tensorflow.org/install/source\r\n\r\n## Description of issue (what needs changing):\r\nThe sample sessions given in the docs are old (Bazel 0.15.1, TensorFlow 1.11, python 2.7)\r\nA new session-copy with the more recent TensorFlow 2.x with Bazel 0.26.1 would be more helpful.\r\nAlso, python 2.7 is reaching end-of-life in Jan 2020.\r\n\r\n### Submit a pull request?\r\n\r\nAre you planning to also submit a pull request to fix the issue? Yes. \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33905", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33905/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33905/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33905/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33905", "id": 515932255, "node_id": "MDU6SXNzdWU1MTU5MzIyNTU=", "number": 33905, "title": "'Copy link to this section' feature not working for certain sections.", "user": {"login": "nikochiko", "id": 37668193, "node_id": "MDQ6VXNlcjM3NjY4MTkz", "avatar_url": "https://avatars3.githubusercontent.com/u/37668193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikochiko", "html_url": "https://github.com/nikochiko", "followers_url": "https://api.github.com/users/nikochiko/followers", "following_url": "https://api.github.com/users/nikochiko/following{/other_user}", "gists_url": "https://api.github.com/users/nikochiko/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikochiko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikochiko/subscriptions", "organizations_url": "https://api.github.com/users/nikochiko/orgs", "repos_url": "https://api.github.com/users/nikochiko/repos", "events_url": "https://api.github.com/users/nikochiko/events{/privacy}", "received_events_url": "https://api.github.com/users/nikochiko/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "lamberta", "id": 43051, "node_id": "MDQ6VXNlcjQzMDUx", "avatar_url": "https://avatars2.githubusercontent.com/u/43051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lamberta", "html_url": "https://github.com/lamberta", "followers_url": "https://api.github.com/users/lamberta/followers", "following_url": "https://api.github.com/users/lamberta/following{/other_user}", "gists_url": "https://api.github.com/users/lamberta/gists{/gist_id}", "starred_url": "https://api.github.com/users/lamberta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lamberta/subscriptions", "organizations_url": "https://api.github.com/users/lamberta/orgs", "repos_url": "https://api.github.com/users/lamberta/repos", "events_url": "https://api.github.com/users/lamberta/events{/privacy}", "received_events_url": "https://api.github.com/users/lamberta/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "lamberta", "id": 43051, "node_id": "MDQ6VXNlcjQzMDUx", "avatar_url": "https://avatars2.githubusercontent.com/u/43051?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lamberta", "html_url": "https://github.com/lamberta", "followers_url": "https://api.github.com/users/lamberta/followers", "following_url": "https://api.github.com/users/lamberta/following{/other_user}", "gists_url": "https://api.github.com/users/lamberta/gists{/gist_id}", "starred_url": "https://api.github.com/users/lamberta/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lamberta/subscriptions", "organizations_url": "https://api.github.com/users/lamberta/orgs", "repos_url": "https://api.github.com/users/lamberta/repos", "events_url": "https://api.github.com/users/lamberta/events{/privacy}", "received_events_url": "https://api.github.com/users/lamberta/received_events", "type": "User", "site_admin": false}, {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-11-01T06:13:10Z", "updated_at": "2019-11-05T06:26:09Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "## URL(s) with the issue:\r\n- https://www.tensorflow.org/install/source_windows\r\n- https://www.tensorflow.org/install/source\r\n\r\n## Browser used:\r\nTried on Microsoft Edge and Mozilla Firefox up-to-date versions.\r\n\r\n## Description of issue (what needs changing):\r\nThe 'Copy link to this section' feature is not working for the `View sample configuration session` sections for the Linux and Windows build-from-source instruction docs.\r\n### Clear description:\r\nThe issue-causing sections are located under these sections: \r\n- https://www.tensorflow.org/install/source#sample_session (Linux)\r\n- https://www.tensorflow.org/install/source_windows#configure_the_build (Windows)\r\n\r\n### Submit a pull request?\r\n\r\nAre you planning to also submit a pull request to fix the issue?:  Yes, I can fix the markdown to correct the issue.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33899", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33899/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33899/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33899/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33899", "id": 515838915, "node_id": "MDU6SXNzdWU1MTU4Mzg5MTU=", "number": 33899, "title": "Porting gradients to C++ from python", "user": {"login": "Craigacp", "id": 729696, "node_id": "MDQ6VXNlcjcyOTY5Ng==", "avatar_url": "https://avatars1.githubusercontent.com/u/729696?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Craigacp", "html_url": "https://github.com/Craigacp", "followers_url": "https://api.github.com/users/Craigacp/followers", "following_url": "https://api.github.com/users/Craigacp/following{/other_user}", "gists_url": "https://api.github.com/users/Craigacp/gists{/gist_id}", "starred_url": "https://api.github.com/users/Craigacp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Craigacp/subscriptions", "organizations_url": "https://api.github.com/users/Craigacp/orgs", "repos_url": "https://api.github.com/users/Craigacp/repos", "events_url": "https://api.github.com/users/Craigacp/events{/privacy}", "received_events_url": "https://api.github.com/users/Craigacp/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 404586558, "node_id": "MDU6TGFiZWw0MDQ1ODY1NTg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:community%20support", "name": "stat:community support", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 3, "created_at": "2019-11-01T00:27:39Z", "updated_at": "2019-11-06T20:13:21Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): v2\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nI'm writing a Java gradient optimizer to allow training models on the JVM. I've got pretty much everything working, but some of the gradients can't be calculated as they aren't available in C++, and so I get errors of the form `Exception in thread \"main\" org.tensorflow.TensorFlowException: No gradient defined for op: SparseSoftmaxCrossEntropyWithLogits.`. What's the roadmap for porting gradients from Python to C++? If there isn't a roadmap, would a pull request to add this gradient be accepted (and is there any relevant guidance for working in the TF C++ codebase)? The relevant issues according to GitHub are all from 2016/7 and the internals might be quite different after the v2 release.\r\n\r\n**Will this change the current api? How?**\r\nIt will expand the set of models that can be trained using languages other than python. It should only add API endpoints and won't change any of the existing ones.\r\n\r\n**Who will benefit with this feature?**\r\nUsers of the the TF Java API, users of the C API, and other languages which bind the C API. Without the ability to train models using a specific language binding it's very hard to say Tensorflow actually supports that language.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33897", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33897/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33897/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33897/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33897", "id": 515744482, "node_id": "MDU6SXNzdWU1MTU3NDQ0ODI=", "number": 33897, "title": "TF Real Op Not Supported for TFLite when generating MFCCs", "user": {"login": "mattc-eostar", "id": 53350908, "node_id": "MDQ6VXNlcjUzMzUwOTA4", "avatar_url": "https://avatars3.githubusercontent.com/u/53350908?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mattc-eostar", "html_url": "https://github.com/mattc-eostar", "followers_url": "https://api.github.com/users/mattc-eostar/followers", "following_url": "https://api.github.com/users/mattc-eostar/following{/other_user}", "gists_url": "https://api.github.com/users/mattc-eostar/gists{/gist_id}", "starred_url": "https://api.github.com/users/mattc-eostar/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mattc-eostar/subscriptions", "organizations_url": "https://api.github.com/users/mattc-eostar/orgs", "repos_url": "https://api.github.com/users/mattc-eostar/repos", "events_url": "https://api.github.com/users/mattc-eostar/events{/privacy}", "received_events_url": "https://api.github.com/users/mattc-eostar/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-10-31T21:03:29Z", "updated_at": "2020-01-03T09:36:40Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04.2\r\n- TensorFlow installed from (source or binary): Binary\r\n- TensorFlow version (or github SHA if from source): 2.1.0-dev20191023\r\n\r\nCode throwing error is from TF2.0 docs about generating MFCCs from audio. Using the SELECT_TF_OPS flag helps with RFFT and ComplexAbs, but now Real (assuming tf.math.real) is not able to convert. Is there any way to add a custom op for this or is there something I am missing?\r\n\r\n```python\r\ndef generate_mfcc_features(audio_tensor):\r\n    sample_rate = 16000.0\r\n\r\n    # A 1024-point STFT with frames of 64 ms and 75% overlap.\r\n    stfts = tf.signal.stft(audio_tensor, frame_length=1024, frame_step=256,fft_length=1024)\r\n    spectrograms = tf.cast(tf.abs(stfts), tf.float32)\r\n\r\n    # Warp the linear scale spectrograms into the mel-scale.\r\n    num_spectrogram_bins = stfts.shape[-1]\r\n    lower_edge_hertz, upper_edge_hertz, num_mel_bins = 80.0, 7600.0, 80\r\n    linear_to_mel_weight_matrix = tf.cast(tf.signal.linear_to_mel_weight_matrix(num_mel_bins, num_spectrogram_bins, sample_rate, lower_edge_hertz, upper_edge_hertz), tf.float32)\r\n    mel_spectrograms = tf.tensordot(spectrograms, linear_to_mel_weight_matrix, 1)\r\n    mel_spectrograms.set_shape(spectrograms.shape[:-1].concatenate(linear_to_mel_weight_matrix.shape[-1:]))\r\n\r\n    # Compute a stabilized log to get log-magnitude mel-scale spectrograms.\r\n    log_mel_spectrograms = tf.math.log(mel_spectrograms + 1e-6)\r\n\r\n    # Compute MFCCs from log_mel_spectrograms and take the first 13.\r\n    return tf.signal.mfccs_from_log_mel_spectrograms(log_mel_spectrograms)[..., :13]\r\n```\r\nwhen converting like this:\r\n```python\r\nconverter = tf.lite.TFLiteConverter.from_concrete_functions([enc_to_save])\r\n# converter.optimizations = [tf.lite.Optimize.OPTIMIZE_FOR_SIZE]\r\nconverter.target_spec.supported_ops = set([tf.lite.OpsSet.TFLITE_BUILTINS, tf.lite.OpsSet.SELECT_TF_OPS])\r\ntflite_model_enc = converter.convert()\r\n```\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nConverterError                            Traceback (most recent call last)\r\n<ipython-input-275-096221475907> in <module>()\r\n      6 # converter.optimizations = [tf.lite.Optimize.OPTIMIZE_FOR_SIZE]\r\n      7 converter.target_spec.supported_ops = set([tf.lite.OpsSet.TFLITE_BUILTINS, tf.lite.OpsSet.SELECT_TF_OPS])\r\n----> 8 tflite_model_enc = converter.convert()\r\n      9 \r\n     10 converter = tf.lite.TFLiteConverter.from_concrete_functions([dec_to_save])\r\n\r\n~/anaconda3/envs/main/lib/python3.6/site-packages/tensorflow_core/lite/python/lite.py in convert(self)\r\n    460         input_tensors=input_tensors,\r\n    461         output_tensors=output_tensors,\r\n--> 462         **converter_kwargs)\r\n    463 \r\n    464     if self._is_calibration_quantize():\r\n\r\n~/anaconda3/envs/main/lib/python3.6/site-packages/tensorflow_core/lite/python/convert.py in toco_convert_impl(input_data, input_tensors, output_tensors, enable_mlir_converter, *args, **kwargs)\r\n    450       input_data.SerializeToString(),\r\n    451       debug_info_str=debug_info_str,\r\n--> 452       enable_mlir_converter=enable_mlir_converter)\r\n    453   return data\r\n    454 \r\n\r\n~/anaconda3/envs/main/lib/python3.6/site-packages/tensorflow_core/lite/python/convert.py in toco_convert_protos(model_flags_str, toco_flags_str, input_data_str, debug_info_str, enable_mlir_converter)\r\n    201       stdout = _try_convert_to_unicode(stdout)\r\n    202       stderr = _try_convert_to_unicode(stderr)\r\n--> 203       raise ConverterError(\"See console for info.\\n%s\\n%s\\n\" % (stdout, stderr))\r\n    204   finally:\r\n    205     # Must manually cleanup files.\r\n\r\nConverterError: See console for info.\r\n2019-10-31 16:49:07.859294: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: RFFT\r\n2019-10-31 16:49:07.859376: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: ComplexAbs\r\n2019-10-31 16:49:07.859438: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: RFFT\r\n2019-10-31 16:49:07.859470: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: Real\r\n2019-10-31 16:49:07.879329: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 403 operators, 705 arrays (0 quantized)\r\n2019-10-31 16:49:07.897088: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 403 operators, 705 arrays (0 quantized)\r\n2019-10-31 16:49:08.185116: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 351 operators, 648 arrays (0 quantized)\r\n2019-10-31 16:49:08.199468: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 2: 350 operators, 647 arrays (0 quantized)\r\n2019-10-31 16:49:08.213695: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Group bidirectional sequence lstm/rnn: 350 operators, 647 arrays (0 quantized)\r\n2019-10-31 16:49:08.224572: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before dequantization graph transformations: 350 operators, 647 arrays (0 quantized)\r\n2019-10-31 16:49:08.307894: I tensorflow/lite/toco/allocate_transient_arrays.cc:345] Total transient array allocated size: 384 bytes, theoretical optimal value: 192 bytes.\r\n2019-10-31 16:49:08.309673: I tensorflow/lite/toco/toco_tooling.cc:454] Number of parameters: 3677275\r\n2019-10-31 16:49:08.310492: W tensorflow/lite/toco/tflite/operator.cc:2024] Op Real is a valid TensorFlow op but has not been whitelisted for the TensorFlow Lite flex op set.\r\n2019-10-31 16:49:08.311448: W tensorflow/lite/toco/tflite/operator.cc:2024] Op Real is a valid TensorFlow op but has not been whitelisted for the TensorFlow Lite flex op set.\r\n2019-10-31 16:49:08.312363: E tensorflow/lite/toco/toco_tooling.cc:481] We are continually in the process of adding support to TensorFlow Lite for more ops. It would be helpful if you could inform us of how this conversion went by opening a github issue at https://github.com/tensorflow/tensorflow/issues/new?template=40-tflite-op-request.md\r\n and pasting the following:\r\n\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime and are not recognized by TensorFlow. If you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: ADD, CONCATENATION, CONV_2D, EXPAND_DIMS, FLOOR_DIV, FULLY_CONNECTED, GATHER, LEAKY_RELU, LOG, LOGISTIC, MAXIMUM, MAX_POOL_2D, MUL, PACK, PAD, RANGE, RESHAPE, SHAPE, SPLIT, SPLIT_V, SQUEEZE, STRIDED_SLICE, SUB, TANH, TRANSPOSE, UNPACK. Here is a list of operators for which you will need custom implementations: Real.\r\nTraceback (most recent call last):\r\n  File \"/home/mattc/anaconda3/envs/main/bin/toco_from_protos\", line 10, in <module>\r\n    sys.exit(main())\r\n  File \"/home/mattc/anaconda3/envs/main/lib/python3.6/site-packages/tensorflow_core/lite/toco/python/toco_from_protos.py\", line 93, in main\r\n    app.run(main=execute, argv=[sys.argv[0]] + unparsed)\r\n  File \"/home/mattc/anaconda3/envs/main/lib/python3.6/site-packages/tensorflow_core/python/platform/app.py\", line 40, in run\r\n    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)\r\n  File \"/home/mattc/anaconda3/envs/main/lib/python3.6/site-packages/absl/app.py\", line 300, in run\r\n    _run_main(main, args)\r\n  File \"/home/mattc/anaconda3/envs/main/lib/python3.6/site-packages/absl/app.py\", line 251, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"/home/mattc/anaconda3/envs/main/lib/python3.6/site-packages/tensorflow_core/lite/toco/python/toco_from_protos.py\", line 56, in execute\r\n    enable_mlir_converter)\r\nException: We are continually in the process of adding support to TensorFlow Lite for more ops. It would be helpful if you could inform us of how this conversion went by opening a github issue at https://github.com/tensorflow/tensorflow/issues/new?template=40-tflite-op-request.md\r\n and pasting the following:\r\n\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime and are not recognized by TensorFlow. If you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: ADD, CONCATENATION, CONV_2D, EXPAND_DIMS, FLOOR_DIV, FULLY_CONNECTED, GATHER, LEAKY_RELU, LOG, LOGISTIC, MAXIMUM, MAX_POOL_2D, MUL, PACK, PAD, RANGE, RESHAPE, SHAPE, SPLIT, SPLIT_V, SQUEEZE, STRIDED_SLICE, SUB, TANH, TRANSPOSE, UNPACK. Here is a list of operators for which you will need custom implementations: Real.\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33892", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33892/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33892/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33892/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33892", "id": 515651536, "node_id": "MDU6SXNzdWU1MTU2NTE1MzY=", "number": 33892, "title": "tf.image.per_image_standardization return wrong values", "user": {"login": "skyap", "id": 8363227, "node_id": "MDQ6VXNlcjgzNjMyMjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/8363227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skyap", "html_url": "https://github.com/skyap", "followers_url": "https://api.github.com/users/skyap/followers", "following_url": "https://api.github.com/users/skyap/following{/other_user}", "gists_url": "https://api.github.com/users/skyap/gists{/gist_id}", "starred_url": "https://api.github.com/users/skyap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skyap/subscriptions", "organizations_url": "https://api.github.com/users/skyap/orgs", "repos_url": "https://api.github.com/users/skyap/repos", "events_url": "https://api.github.com/users/skyap/events{/privacy}", "received_events_url": "https://api.github.com/users/skyap/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-10-31T18:27:06Z", "updated_at": "2019-11-15T22:18:08Z", "closed_at": null, "author_association": "NONE", "body": "Tensorflow version = 1.15\r\ntf.image.per_image_standardization does not standardize value to [-1,1] \r\ni test in tensorflow 1.12 it work correctly\r\n \r\n```python\r\nimport tensorflow as tf \r\nimport numpy as np \r\nprint(tf.__version__)\r\na = tf.constant([[[1,2,3],[4,5,6]]])\r\nb = tf.image.per_image_standardization(a)\r\nwith tf.Session() as sess:\r\n    sess.run(tf.global_variables_initializer())\r\n    print(sess.run(b))\r\nx = np.asarray([[[1,2,3],[4,5,6]]], dtype=np.float64)\r\n\r\ndef normalize_meanstd(a, axis=None): \r\n    # axis param denotes axes along which mean & std reductions are to be performed\r\n    mean = np.mean(a, axis=axis, keepdims=True)\r\n    std = np.sqrt(((a - mean)**2).mean(axis=axis, keepdims=True))\r\n    return (a - mean) / std\r\n\r\nprint(normalize_meanstd(x))\r\n```\r\n```\r\n1.15.0\r\n[[[-6 -3 -1]\r\n  [ 1  3  6]]]\r\n[[[-1.46385011 -0.87831007 -0.29277002]\r\n  [ 0.29277002  0.87831007  1.46385011]]]\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33881", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33881/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33881/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33881/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33881", "id": 515454086, "node_id": "MDU6SXNzdWU1MTU0NTQwODY=", "number": 33881, "title": "Setting Log Level via Java API?", "user": {"login": "lucaro", "id": 246519, "node_id": "MDQ6VXNlcjI0NjUxOQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/246519?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lucaro", "html_url": "https://github.com/lucaro", "followers_url": "https://api.github.com/users/lucaro/followers", "following_url": "https://api.github.com/users/lucaro/following{/other_user}", "gists_url": "https://api.github.com/users/lucaro/gists{/gist_id}", "starred_url": "https://api.github.com/users/lucaro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lucaro/subscriptions", "organizations_url": "https://api.github.com/users/lucaro/orgs", "repos_url": "https://api.github.com/users/lucaro/repos", "events_url": "https://api.github.com/users/lucaro/events{/privacy}", "received_events_url": "https://api.github.com/users/lucaro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sjamesr", "id": 4641539, "node_id": "MDQ6VXNlcjQ2NDE1Mzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/4641539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjamesr", "html_url": "https://github.com/sjamesr", "followers_url": "https://api.github.com/users/sjamesr/followers", "following_url": "https://api.github.com/users/sjamesr/following{/other_user}", "gists_url": "https://api.github.com/users/sjamesr/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjamesr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjamesr/subscriptions", "organizations_url": "https://api.github.com/users/sjamesr/orgs", "repos_url": "https://api.github.com/users/sjamesr/repos", "events_url": "https://api.github.com/users/sjamesr/events{/privacy}", "received_events_url": "https://api.github.com/users/sjamesr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sjamesr", "id": 4641539, "node_id": "MDQ6VXNlcjQ2NDE1Mzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/4641539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjamesr", "html_url": "https://github.com/sjamesr", "followers_url": "https://api.github.com/users/sjamesr/followers", "following_url": "https://api.github.com/users/sjamesr/following{/other_user}", "gists_url": "https://api.github.com/users/sjamesr/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjamesr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjamesr/subscriptions", "organizations_url": "https://api.github.com/users/sjamesr/orgs", "repos_url": "https://api.github.com/users/sjamesr/repos", "events_url": "https://api.github.com/users/sjamesr/events{/privacy}", "received_events_url": "https://api.github.com/users/sjamesr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-10-31T13:56:57Z", "updated_at": "2019-11-07T23:43:47Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version: 1.14 (via Java API)\r\n\r\n**Describe the current behavior**\r\n\r\nWhen using the current Java bindings for TensorFlow, the log gets filled with output from every operation when a model is evaluated. I was unable to find a way to set the log level via the Java API. Is this at all possible?\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33880", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33880/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33880/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33880/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33880", "id": 515425301, "node_id": "MDU6SXNzdWU1MTU0MjUzMDE=", "number": 33880, "title": "Embedding layer for sparse inputs in tf.keras.layers.", "user": {"login": "workingloong", "id": 18071380, "node_id": "MDQ6VXNlcjE4MDcxMzgw", "avatar_url": "https://avatars1.githubusercontent.com/u/18071380?v=4", "gravatar_id": "", "url": "https://api.github.com/users/workingloong", "html_url": "https://github.com/workingloong", "followers_url": "https://api.github.com/users/workingloong/followers", "following_url": "https://api.github.com/users/workingloong/following{/other_user}", "gists_url": "https://api.github.com/users/workingloong/gists{/gist_id}", "starred_url": "https://api.github.com/users/workingloong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/workingloong/subscriptions", "organizations_url": "https://api.github.com/users/workingloong/orgs", "repos_url": "https://api.github.com/users/workingloong/repos", "events_url": "https://api.github.com/users/workingloong/events{/privacy}", "received_events_url": "https://api.github.com/users/workingloong/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-10-31T13:16:46Z", "updated_at": "2020-03-13T07:42:44Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 2.0.0\r\n- Are you willing to contribute it (Yes/No): Yes. And the code change is ready.\r\n\r\n**Describe the feature and the current behavior/state.**\r\nThe tf.keras.layers.Embedding only can be used with dense inputs. The user must customize a layer for sparse tensor inputs by using tf.nn.embedding_lookup_sparse.  Or, the user needs to use tf.feature_columns.embedding_columns to transform sparse inputs to tf.layer.DenseFeature.\r\n\r\n**Will this change the current api? How?**\r\nThe Embedding layer should add the `combiner` argument for sparse inputs. The value of `combiner` can be \"sum\", \"mean\" and so on.\r\n\r\n**Who will benefit with this feature?**\r\nEmbedding with sparse inputs is commonly used in advertising and recommendation system in which the input ids of a sample are very sparse. \r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33878", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33878/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33878/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33878/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33878", "id": 515400284, "node_id": "MDU6SXNzdWU1MTU0MDAyODQ=", "number": 33878, "title": "Strange behaviour of tf.sigmoid", "user": {"login": "georgesterpu", "id": 6018251, "node_id": "MDQ6VXNlcjYwMTgyNTE=", "avatar_url": "https://avatars0.githubusercontent.com/u/6018251?v=4", "gravatar_id": "", "url": "https://api.github.com/users/georgesterpu", "html_url": "https://github.com/georgesterpu", "followers_url": "https://api.github.com/users/georgesterpu/followers", "following_url": "https://api.github.com/users/georgesterpu/following{/other_user}", "gists_url": "https://api.github.com/users/georgesterpu/gists{/gist_id}", "starred_url": "https://api.github.com/users/georgesterpu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/georgesterpu/subscriptions", "organizations_url": "https://api.github.com/users/georgesterpu/orgs", "repos_url": "https://api.github.com/users/georgesterpu/repos", "events_url": "https://api.github.com/users/georgesterpu/events{/privacy}", "received_events_url": "https://api.github.com/users/georgesterpu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-10-31T12:40:06Z", "updated_at": "2019-11-26T22:00:07Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- OS Platform and Distribution: Manjaro Linux testing\r\n- TensorFlow installed from: binary (pip tf-nightly)\r\n- TensorFlow version: v1.12.1-17077-ge9a3aa1 2.1.0-dev20191030\r\n- Python version: 3.7.4\r\n- CPU Model: Intel m3-6Y30\r\n\r\n**Describe the current behavior**\r\nIt seems that `tf.sigmoid` returns different values for identical inputs.\r\n\r\n**Describe the expected behavior**\r\nReturn identical outputs for identical inputs, regardless of the error scale.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\n\r\na = tf.convert_to_tensor(\r\n    [[0.2, 0.2],\r\n     [0.2, 0.2],\r\n     [0.2, 0.2],\r\n     [0.2, 0.2],\r\n     [0.2, 0.2],],\r\n    dtype=tf.float32)\r\n\r\nsigm = tf.sigmoid(a)\r\n\r\nif tf.__version__.startswith('1'):\r\n  tf.InteractiveSession()\r\n  sigm = sigm.eval()\r\nelif tf.__version__.startswith('2'):\r\n  sigm = sigm.numpy()\r\nelse:\r\n  raise ValueError()\r\n\r\nassert((sigm[0] == sigm[1]).all()); print(\"*\"*1)\r\nassert((sigm[0] == sigm[2]).all()); print(\"*\"*2)\r\nassert((sigm[0] == sigm[3]).all()); print(\"*\"*3)\r\nassert((sigm[0] == sigm[4]).all()); print(\"*\"*4)\r\n```\r\n\r\n**Other info / logs**\r\nI can reproduce this in TensorFlow 1.x, 2.0, on GPU and CPU, on my laptop or in Google Colab.\r\n`1 / (1 + tf.exp(-a))` seems to return the expected output.\r\n\r\nTensorFlow appears to use the sigmoid implementation from the Eigen library, so I am trying to notify the contributors listed in the source files @benoitsteiner @ebrevdo @ggael \r\nI know that the differences are very small, yet the sigmoid function is at the core of some stateful operations such as LSTM, posing the risk of error accumulation. Besides that, I am simply curious to find out what causes this difference."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33873", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33873/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33873/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33873/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/33873", "id": 515303592, "node_id": "MDExOlB1bGxSZXF1ZXN0MzM0Nzg1MzEx", "number": 33873, "title": "Add tests in TFLite micro for Logistic Int8", "user": {"login": "giorgio-arenarm", "id": 52670029, "node_id": "MDQ6VXNlcjUyNjcwMDI5", "avatar_url": "https://avatars1.githubusercontent.com/u/52670029?v=4", "gravatar_id": "", "url": "https://api.github.com/users/giorgio-arenarm", "html_url": "https://github.com/giorgio-arenarm", "followers_url": "https://api.github.com/users/giorgio-arenarm/followers", "following_url": "https://api.github.com/users/giorgio-arenarm/following{/other_user}", "gists_url": "https://api.github.com/users/giorgio-arenarm/gists{/gist_id}", "starred_url": "https://api.github.com/users/giorgio-arenarm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/giorgio-arenarm/subscriptions", "organizations_url": "https://api.github.com/users/giorgio-arenarm/orgs", "repos_url": "https://api.github.com/users/giorgio-arenarm/repos", "events_url": "https://api.github.com/users/giorgio-arenarm/events{/privacy}", "received_events_url": "https://api.github.com/users/giorgio-arenarm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1589976566, "node_id": "MDU6TGFiZWwxNTg5OTc2NTY2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:micro", "name": "comp:micro", "color": "3e2eea", "default": false, "description": "Related to TensorFlow Lite Microcontrollers"}, {"id": 1169365494, "node_id": "MDU6TGFiZWwxMTY5MzY1NDk0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:M", "name": "size:M", "color": "adafea", "default": false, "description": "CL Change Size: Medium"}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2019-10-31T10:00:51Z", "updated_at": "2020-03-04T13:01:51Z", "closed_at": null, "author_association": "CONTRIBUTOR", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/33873", "html_url": "https://github.com/tensorflow/tensorflow/pull/33873", "diff_url": "https://github.com/tensorflow/tensorflow/pull/33873.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/33873.patch"}, "body": ""}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33869", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33869/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33869/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33869/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33869", "id": 515237650, "node_id": "MDU6SXNzdWU1MTUyMzc2NTA=", "number": 33869, "title": "How to save model, multi-worker training with Keras ", "user": {"login": "aefuimn", "id": 33046665, "node_id": "MDQ6VXNlcjMzMDQ2NjY1", "avatar_url": "https://avatars1.githubusercontent.com/u/33046665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aefuimn", "html_url": "https://github.com/aefuimn", "followers_url": "https://api.github.com/users/aefuimn/followers", "following_url": "https://api.github.com/users/aefuimn/following{/other_user}", "gists_url": "https://api.github.com/users/aefuimn/gists{/gist_id}", "starred_url": "https://api.github.com/users/aefuimn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aefuimn/subscriptions", "organizations_url": "https://api.github.com/users/aefuimn/orgs", "repos_url": "https://api.github.com/users/aefuimn/repos", "events_url": "https://api.github.com/users/aefuimn/events{/privacy}", "received_events_url": "https://api.github.com/users/aefuimn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-10-31T08:01:33Z", "updated_at": "2019-11-15T22:39:33Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- TensorFlow installed from (source or binary):  binary\uff08pip install tensorflow-gpu\uff09\r\n- TensorFlow version (use command below):  2.0.0\r\n- Python version: 3.7.4\r\n- CUDA/cuDNN version:  CUDA-10.0/cuDNN 7 \r\n- GPU model and memory: 1X1080TI+2X1070Ti    11GB   8GB\r\n\r\n**Describe the current behavior**\r\nFailure to save model\r\n\r\n**Describe the expected behavior**\r\nSave model\r\n\r\n**Code to reproduce the issue**\r\n`\r\n\r\n    # multi worker strategy\r\n    strategy = tf.distribute.experimental.MultiWorkerMirroredStrategy()\r\n    with strategy.scope():\r\n        train_dataset, validation_dataset, test_dataset = load_data()\r\n        multi_worker_model = Alexnet()\r\n        multi_worker_model.compile(loss=tf.keras.losses.sparse_categorical_crossentropy,\r\n                                   optimizer=tf.keras.optimizers.Adam(learning_rate=1e-2),\r\n                                   metrics=['accuracy'])\r\n    # fit\r\n    multi_worker_model.fit(train_dataset,\r\n                           epochs=EPOCHS,\r\n                           validation_steps=6,\r\n                           validation_data=validation_dataset,\r\n                           steps_per_epoch=45000//BATCH_SIZE,\r\n                           callbacks=callbacks,\r\n                           verbose=2)\r\n\r\n    # eval\r\n    multi_worker_model.evaluate(test_dataset)\r\n\r\n    # save model\r\n    # multi_worker_model.save(os.path.join(OUTPUT_PATH, 'model'))\r\n    tf.saved_model.save(multi_worker_model, os.path.join(OUTPUT_PATH, 'model'))\r\n`\r\n**Other info / logs**\r\nTraceback (most recent call last):\r\n  File \"training_cifar10_with_multi-woker.py\", line 197, in <module>\r\n    tf.saved_model.save(multi_worker_model, os.path.join(OUTPUT_PATH, 'model'))\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/saved_model/save.py\", line 893, in save\r\n    meta_graph_def, saveable_view, signatures, options.namespace_whitelist)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/saved_model/save.py\", line 596, in _fill_meta_graph_def\r\n    saver_def = saver.to_proto()\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/training/saving/functional_saver.py\", line 150, in to_proto\r\n    save_tensor = self._traced_save(filename_tensor)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 457, in __call__\r\n    result = self._call(*args, **kwds)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 503, in _call\r\n    self._initialize(args, kwds, add_initializers_to=initializer_map)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 408, in _initialize\r\n    *args, **kwds))\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 1848, in _get_concrete_function_internal_garbage_collected\r\n    graph_function, _, _ = self._maybe_define_function(args, kwargs)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 2150, in _maybe_define_function\r\n    graph_function = self._create_graph_function(args, kwargs)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 2041, in _create_graph_function\r\n    capture_by_value=self._capture_by_value),\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/framework/func_graph.py\", line 915, in func_graph_from_py_func\r\n    func_outputs = python_func(*func_args, **func_kwargs)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py\", line 358, in wrapped_fn\r\n    return weak_wrapped_fn().__wrapped__(*args, **kwds)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py\", line 2653, in bound_method_wrapper\r\n    return wrapped_fn(weak_instance(), *args, **kwargs)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/training/saving/functional_saver.py\", line 162, in _traced_save\r\n    save_op = self.save(file_prefix)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/training/saving/functional_saver.py\", line 230, in save\r\n    sharded_saves.append(saver.save(shard_prefix))\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/training/saving/functional_saver.py\", line 69, in save\r\n    tensors.append(spec.tensor)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/training/saving/saveable_object.py\", line 52, in tensor\r\n    return self._tensor() if callable(self._tensor) else self._tensor\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/distribute/values.py\", line 1151, in tensor\r\n    return strategy.extended.read_var(sync_on_read_variable)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/distribute/mirrored_strategy.py\", line 736, in read_var\r\n    return replica_local_var._get_cross_replica()  # pylint: disable=protected-access\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/distribute/values.py\", line 1237, in _get_cross_replica\r\n    self, axis=None)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/distribute/distribute_lib.py\", line 805, in reduce\r\n    return self._extended._reduce(reduce_op, value)  # pylint: disable=protected-access\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/distribute/distribute_lib.py\", line 1436, in _reduce\r\n    device_util.current() or \"/device:CPU:0\"))[0]\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/distribute/collective_all_reduce_strategy.py\", line 490, in _reduce_to\r\n    reduce_op, value, destinations=destinations)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/distribute/cross_device_ops.py\", line 282, in reduce\r\n    destinations)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/distribute/cross_device_ops.py\", line 1025, in reduce_implementation\r\n    all_reduced = self._batch_all_reduce(reduce_op, [per_replica_value])[0]\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/distribute/cross_device_ops.py\", line 1091, in _batch_all_reduce\r\n    dense_results = self._do_batch_all_reduce_dense(reduce_op, dense_values)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/distribute/cross_device_ops.py\", line 1120, in _do_batch_all_reduce_dense\r\n    \"Id\")\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/distribute/cross_device_utils.py\", line 345, in build_collective_reduce\r\n    group_key = collective_keys.get_group_key(devices)\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/distribute/cross_device_utils.py\", line 295, in get_group_key\r\n    names = sorted(['%s:%d' % (d.device_type, d.device_index) for d in parsed])\r\n  File \"/home/ubuntu/anaconda3/lib/python3.7/site-packages/tensorflow_core/python/distribute/cross_device_utils.py\", line 295, in <listcomp>\r\n    names = sorted(['%s:%d' % (d.device_type, d.device_index) for d in parsed])\r\nTypeError: %d format: a number is required, not NoneType\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33867", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33867/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33867/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33867/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33867", "id": 515230488, "node_id": "MDU6SXNzdWU1MTUyMzA0ODg=", "number": 33867, "title": "How does the graphdef file provided in simple audio recognition tutorial can be converted to tflite file?", "user": {"login": "vihari1729", "id": 44723763, "node_id": "MDQ6VXNlcjQ0NzIzNzYz", "avatar_url": "https://avatars2.githubusercontent.com/u/44723763?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vihari1729", "html_url": "https://github.com/vihari1729", "followers_url": "https://api.github.com/users/vihari1729/followers", "following_url": "https://api.github.com/users/vihari1729/following{/other_user}", "gists_url": "https://api.github.com/users/vihari1729/gists{/gist_id}", "starred_url": "https://api.github.com/users/vihari1729/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vihari1729/subscriptions", "organizations_url": "https://api.github.com/users/vihari1729/orgs", "repos_url": "https://api.github.com/users/vihari1729/repos", "events_url": "https://api.github.com/users/vihari1729/events{/privacy}", "received_events_url": "https://api.github.com/users/vihari1729/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-10-31T07:46:27Z", "updated_at": "2020-02-27T08:58:05Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):Linux Ubuntu 16.04\r\n- TensorFlow installed from (source or binary):source\r\n- TensorFlow version (or github SHA if from [source):tensorflow 1.14\r\n\r\n\r\n**Provide the text output from tflite_convert**\r\n\r\n```\r\n# Copy and paste here\r\n```ValueError: std_dev and mean must be defined when inference_input_type is QUANTIZED_UINT8.\r\n\r\nwhere i dont know mean and std_dev values \r\n\r\nAlso, please include a link to a GraphDef or the model if possible.\r\nhttps://github.com/tensorflow/docs/blob/master/site/en/r1/tutorials/sequences/audio_recognition.md\r\n**Any other info / logs**\r\n\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\ntflite_convert \\\r\n--output_file=model.tflite \\\r\n--graph_def_file=/home/unizen/Downloads/my_frozen_graph.pb \\\r\n--inference_type=QUANTIZED_UINT8 \\\r\n--input_shapes=16000,1:  \\\r\n--input_arrays=decoded_sample_data,decoded_sample_data:1 \\\r\n--output_arrays=labels_softmax \\\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33865", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33865/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33865/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33865/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33865", "id": 515169727, "node_id": "MDU6SXNzdWU1MTUxNjk3Mjc=", "number": 33865, "title": "TensorFlow GPU version uses Eigen for convolution.", "user": {"login": "yunxiangz", "id": 31947769, "node_id": "MDQ6VXNlcjMxOTQ3NzY5", "avatar_url": "https://avatars1.githubusercontent.com/u/31947769?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yunxiangz", "html_url": "https://github.com/yunxiangz", "followers_url": "https://api.github.com/users/yunxiangz/followers", "following_url": "https://api.github.com/users/yunxiangz/following{/other_user}", "gists_url": "https://api.github.com/users/yunxiangz/gists{/gist_id}", "starred_url": "https://api.github.com/users/yunxiangz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yunxiangz/subscriptions", "organizations_url": "https://api.github.com/users/yunxiangz/orgs", "repos_url": "https://api.github.com/users/yunxiangz/repos", "events_url": "https://api.github.com/users/yunxiangz/events{/privacy}", "received_events_url": "https://api.github.com/users/yunxiangz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-10-31T05:12:01Z", "updated_at": "2019-12-09T06:27:29Z", "closed_at": null, "author_association": "NONE", "body": "I am debugging the Tensorflow conv_ops_test in the core/kernel folder via VS code. \r\nI found that TensorFlow uses Eigen for GPU version convolution. Not sure why coz I heard that it should call cuBLAS library for GPU things. Hope someone could help me.\r\n\r\nThe settings and commands that I used are as follows:\r\n\r\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\r\nMobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\nTensorFlow installed from (source or binary): Source\r\nTensorFlow version (use command below): 1.4\r\nPython version: 3.5\r\nBazel version (if compiling from source): 0.54\r\nGCC/Compiler version (if compiling from source): 5.5\r\nCUDA/cuDNN version: 8/6\r\nGPU model and memory: GTX 1080Ti\r\nExact command to reproduce: bazel build --spawn_strategy=standalone --verbose_failures --config=cuda --copt=\"-fPIC\" --copt=\"-DNDEBUG\" --local_resources 11048,2.0,2.0 -c dbg --copt -g //tensorflow/tools/pip_package:build_pip_package\r\nand then: bazel build --config=cuda -c dbg --copt -g //tensorflow/core/kernels:conv_ops_test"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33863", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33863/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33863/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33863/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33863", "id": 515137592, "node_id": "MDU6SXNzdWU1MTUxMzc1OTI=", "number": 33863, "title": "Build breaks: The value 'REPOSITORY_NAME' has been removed in favor of 'repository_name()', please use the latter (https://docs.bazel.build/versions/master/skylark/lib/native.html#repository_name).", "user": {"login": "yurivict", "id": 271906, "node_id": "MDQ6VXNlcjI3MTkwNg==", "avatar_url": "https://avatars2.githubusercontent.com/u/271906?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yurivict", "html_url": "https://github.com/yurivict", "followers_url": "https://api.github.com/users/yurivict/followers", "following_url": "https://api.github.com/users/yurivict/following{/other_user}", "gists_url": "https://api.github.com/users/yurivict/gists{/gist_id}", "starred_url": "https://api.github.com/users/yurivict/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yurivict/subscriptions", "organizations_url": "https://api.github.com/users/yurivict/orgs", "repos_url": "https://api.github.com/users/yurivict/repos", "events_url": "https://api.github.com/users/yurivict/events{/privacy}", "received_events_url": "https://api.github.com/users/yurivict/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "nikochiko", "id": 37668193, "node_id": "MDQ6VXNlcjM3NjY4MTkz", "avatar_url": "https://avatars3.githubusercontent.com/u/37668193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikochiko", "html_url": "https://github.com/nikochiko", "followers_url": "https://api.github.com/users/nikochiko/followers", "following_url": "https://api.github.com/users/nikochiko/following{/other_user}", "gists_url": "https://api.github.com/users/nikochiko/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikochiko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikochiko/subscriptions", "organizations_url": "https://api.github.com/users/nikochiko/orgs", "repos_url": "https://api.github.com/users/nikochiko/repos", "events_url": "https://api.github.com/users/nikochiko/events{/privacy}", "received_events_url": "https://api.github.com/users/nikochiko/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nikochiko", "id": 37668193, "node_id": "MDQ6VXNlcjM3NjY4MTkz", "avatar_url": "https://avatars3.githubusercontent.com/u/37668193?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikochiko", "html_url": "https://github.com/nikochiko", "followers_url": "https://api.github.com/users/nikochiko/followers", "following_url": "https://api.github.com/users/nikochiko/following{/other_user}", "gists_url": "https://api.github.com/users/nikochiko/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikochiko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikochiko/subscriptions", "organizations_url": "https://api.github.com/users/nikochiko/orgs", "repos_url": "https://api.github.com/users/nikochiko/repos", "events_url": "https://api.github.com/users/nikochiko/events{/privacy}", "received_events_url": "https://api.github.com/users/nikochiko/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-10-31T03:38:45Z", "updated_at": "2019-10-31T18:34:48Z", "closed_at": null, "author_association": "NONE", "body": "TF 2.0.0 fails to be built by bazel-1.1.0:\r\n\r\n```\r\nINFO: Found applicable config definition build:opt in file /usr/ports/science/py-tensorflow/work-py36/tensorflow-2.0.0/.tf_configure.bazelrc: --copt=-march=native --copt=-I/usr/local/include --host_copt=-march=native --define with_default_optimizations=true\r\nERROR: /usr/ports/science/py-tensorflow/work-py36/bazel_out/05d0f16da4b074c80492981824445ee0/external/com_google_protobuf/protobuf.bzl:274:40: The value 'REPOSITORY_NAME' has been removed in favor of 'repository_name()', please use the latter (https://docs.bazel.build/versions/master/skylark/lib/native.html#repository_name).\r\nERROR: /usr/ports/science/py-tensorflow/work-py36/bazel_out/05d0f16da4b074c80492981824445ee0/external/com_google_protobuf/protobuf.bzl:275:33: The value 'PACKAGE_NAME' has been removed in favor of 'package_name()', please use the latter (https://docs.bazel.build/versions/master/skylark/lib/native.html#package_name). \r\nERROR: /usr/ports/science/py-tensorflow/work-py36/bazel_out/05d0f16da4b074c80492981824445ee0/external/com_google_protobuf/protobuf.bzl:275:11: The value 'PACKAGE_NAME' has been removed in favor of 'package_name()', please use the latter (https://docs.bazel.build/versions/master/skylark/lib/native.html#package_name). \r\nINFO: Call stack for the definition of repository 'local_config_syslibs' which is a syslibs_configure (rule definition at /usr/ports/science/py-tensorflow/work-py36/tensorflow-2.0.0/third_party/systemlibs/syslibs_configure.bzl:154:21):\r\n - /usr/ports/science/py-tensorflow/work-py36/tensorflow-2.0.0/tensorflow/workspace.bzl:73:5\r\n - /usr/ports/science/py-tensorflow/work-py36/tensorflow-2.0.0/WORKSPACE:19:1\r\nERROR: Skipping '//tensorflow:libtensorflow_cc.so': error loading package 'tensorflow': in /usr/ports/science/py-tensorflow/work-py36/tensorflow-2.0.0/tensorflow/core/platform/default/build_config.bzl: Extension 'protobuf.bzl' has errors\r\nERROR: error loading package 'tensorflow': in /usr/ports/science/py-tensorflow/work-py36/tensorflow-2.0.0/tensorflow/core/platform/default/build_config.bzl: Extension 'protobuf.bzl' has errors\r\n```\r\n\r\nBoth bazel and TF are of the latest versions. What's going on?"}]