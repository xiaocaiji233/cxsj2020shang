[{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31039", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31039/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31039/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31039/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31039", "id": 472978301, "node_id": "MDU6SXNzdWU0NzI5NzgzMDE=", "number": 31039, "title": "TensorRT Slowdown Native->FP32 and FP16->INT8; File Size Increase", "user": {"login": "nseidl", "id": 22090294, "node_id": "MDQ6VXNlcjIyMDkwMjk0", "avatar_url": "https://avatars0.githubusercontent.com/u/22090294?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nseidl", "html_url": "https://github.com/nseidl", "followers_url": "https://api.github.com/users/nseidl/followers", "following_url": "https://api.github.com/users/nseidl/following{/other_user}", "gists_url": "https://api.github.com/users/nseidl/gists{/gist_id}", "starred_url": "https://api.github.com/users/nseidl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nseidl/subscriptions", "organizations_url": "https://api.github.com/users/nseidl/orgs", "repos_url": "https://api.github.com/users/nseidl/repos", "events_url": "https://api.github.com/users/nseidl/events{/privacy}", "received_events_url": "https://api.github.com/users/nseidl/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1754777628, "node_id": "MDU6TGFiZWwxNzU0Nzc3NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu:tensorrt", "name": "comp:gpu:tensorrt", "color": "ea98ba", "default": false, "description": "Issues specific to TensorRT"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pooyadavoodi", "id": 7076961, "node_id": "MDQ6VXNlcjcwNzY5NjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/7076961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pooyadavoodi", "html_url": "https://github.com/pooyadavoodi", "followers_url": "https://api.github.com/users/pooyadavoodi/followers", "following_url": "https://api.github.com/users/pooyadavoodi/following{/other_user}", "gists_url": "https://api.github.com/users/pooyadavoodi/gists{/gist_id}", "starred_url": "https://api.github.com/users/pooyadavoodi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pooyadavoodi/subscriptions", "organizations_url": "https://api.github.com/users/pooyadavoodi/orgs", "repos_url": "https://api.github.com/users/pooyadavoodi/repos", "events_url": "https://api.github.com/users/pooyadavoodi/events{/privacy}", "received_events_url": "https://api.github.com/users/pooyadavoodi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pooyadavoodi", "id": 7076961, "node_id": "MDQ6VXNlcjcwNzY5NjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/7076961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pooyadavoodi", "html_url": "https://github.com/pooyadavoodi", "followers_url": "https://api.github.com/users/pooyadavoodi/followers", "following_url": "https://api.github.com/users/pooyadavoodi/following{/other_user}", "gists_url": "https://api.github.com/users/pooyadavoodi/gists{/gist_id}", "starred_url": "https://api.github.com/users/pooyadavoodi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pooyadavoodi/subscriptions", "organizations_url": "https://api.github.com/users/pooyadavoodi/orgs", "repos_url": "https://api.github.com/users/pooyadavoodi/repos", "events_url": "https://api.github.com/users/pooyadavoodi/events{/privacy}", "received_events_url": "https://api.github.com/users/pooyadavoodi/received_events", "type": "User", "site_admin": false}, {"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-07-25T17:13:48Z", "updated_at": "2020-02-22T04:42:39Z", "closed_at": null, "author_association": "NONE", "body": "## **System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04, [nvcr.io/nvidia/tensorrt:19.02-py3](https://docs.nvidia.com/deeplearning/sdk/tensorrt-container-release-notes/rel_19-02.html#rel_19-02)\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: NA\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v1.12.1-7024-g24b3e6cf73 1.15.0-dev20190725\r\n- Python version: 3.5.2\r\n- Bazel version (if compiling from source): NA\r\n- GCC/Compiler version (if compiling from source): NA\r\n- CUDA/cuDNN version: 10.0.130 / 7.4.2 as per the above linked container\r\n- GPU model and memory: Tesla V100 32GB\r\n\r\nRelevant output from `pip freeze`:\r\n```\r\ntf-estimator-nightly==1.14.0.dev2019072201\r\ntf-nightly-gpu==1.15.0.dev20190725\r\n```\r\n\r\n## **Describe the current behavior**\r\n\r\n**Inference Speed (frames per second)**\r\n\r\n| Model | Native | FP32 | FP16 | INT8 | \r\n| - | - | - | - | - |\r\n| tiny-yolo | 348 | 333 | 402 | 415 |\r\n| big-yolo | 125 | 140 | 243 | 208 |\r\n\r\n**1. Why is there a slowdown for tiny native->FP32?** (@pooyadavoodi same as [here](https://github.com/tensorflow/tensorflow/issues/30717#issuecomment-513938562))\r\n**2. Why is this slowdown not consistent for big?**\r\n**3. Why is there a slowdown for big FP16->INT8?**\r\n\r\n**Model Size (megabytes)**\r\n\r\n| Model | Native | FP32 | FP16 | INT8 | \r\n| - | - | - | - | - |\r\n| tiny-yolo | 35 | 67 | 44 | 51 |\r\n| big-yolo | 238 | 439 | 288 | 332 |\r\n\r\nI understand that there is currently an issue where new graph weights are saved twice to the .pb file (#30717, #30789). Once the weights in the table are adjusted for this double weight saving, the resulting sizes for fp32 and fp16 seem reasonable.\r\n\r\n**1. Why is there an increase in size for fp16->int8?**\r\n\r\n## **Describe the expected behavior**\r\n\r\nI am trying to quantize two different YOLO models (one tiny, one normal) with TensorRT. The goals of this quantization are:\r\n\r\n1. speed up inference\r\n2. decrease model size\r\n\r\nAs quantization and conversion proceeds from native->fp32->fp16->int8, I expect inference time to decrease (FPS to increase), and model size to decrease.\r\n\r\n## **Code to reproduce the issue**\r\n\r\nI am using [this](https://github.com/tensorflow/models/blob/master/research/tensorrt/tensorrt.py) script and a few helper functions from [here](https://github.com/tensorflow/tensorrt/blob/master/tftrt/examples/object_detection/graph_utils.py). The two exact scripts that I use are [do.py](https://github.com/tensorflow/tensorflow/files/3432597/do.py.txt) and [utilities.py](https://github.com/tensorflow/tensorflow/files/3432598/utilities.py.txt). Here are the [tiny model](https://drive.google.com/open?id=1Bgj9h6TJLwedtrhnritRs9eYm_iczG4v) and the [big model](https://drive.google.com/open?id=19BzNDCHpDnxj9wU26BsGM4ewS9bKNmpO).\r\n\r\nMy command for running the experiments:\r\n```bash\r\npython do.py \\\r\n--frozen_graph=big-yolov3_frozen.pb \\ # or tiny-yolov3_frozen.pb\r\n--native --fp32 --fp16 --int8 \\\r\n--batch_size=32 \\ # or 128 for tiny\r\n--output_dir=/workspace \\\r\n--input_node=inputs --output_node=output_boxes\r\n```\r\n\r\n\r\n## **Other info / logs**\r\n\r\nI ran a couple of experiments just to make sure that the results were consistent.\r\n\r\n```\r\n==========================\r\nnetwork: native_tiny-yolov3_frozen.pb,   batchsize 128, steps 100\r\n  fps   median: 350.2,  mean: 348.0,    uncertainty: 1.4,       jitter: 5.1\r\n  latency       median: 0.36551,        mean: 0.36846,  99th_p: 0.42946,        99th_uncertainty: 0.01453\r\n\r\n==========================\r\nnetwork: tftrt_fp32_tiny-yolov3_frozen.pb,       batchsize 128, steps 100\r\n  fps   median: 340.9,  mean: 333.4,    uncertainty: 1.5,       jitter: 4.4\r\n  latency       median: 0.37546,        mean: 0.38470,  99th_p: 0.47469,        99th_uncertainty: 0.06110\r\n\r\n==========================\r\nnetwork: tftrt_fp16_tiny-yolov3_frozen.pb,       batchsize 128, steps 100\r\n  fps   median: 403.3,  mean: 402.3,    uncertainty: 0.6,       jitter: 3.6\r\n  latency       median: 0.31740,        mean: 0.31824,  99th_p: 0.34266,        99th_uncertainty: 0.00263\r\n\r\n==========================\r\nnetwork: tftrt_int8_tiny-yolov3_frozen.pb,       batchsize 128, steps 100\r\n  fps   median: 417.7,  mean: 414.9,    uncertainty: 1.1,       jitter: 4.4\r\n  latency       median: 0.30641,        mean: 0.30873,  99th_p: 0.35451,        99th_uncertainty: 0.01511\r\n\r\n==========================\r\nnetwork: native_big-yolov3_frozen.pb,    batchsize 32, steps 100\r\n  fps   median: 125.2,  mean: 124.7,    uncertainty: 0.3,       jitter: 1.4\r\n  latency       median: 0.25553,        mean: 0.25677,  99th_p: 0.28257,        99th_uncertainty: 0.00308\r\n\r\n==========================\r\nnetwork: tftrt_fp32_big-yolov3_frozen.pb,        batchsize 32, steps 100\r\n  fps   median: 140.3,  mean: 140.2,    uncertainty: 0.4,       jitter: 1.9\r\n  latency       median: 0.22802,        mean: 0.22839,  99th_p: 0.25419,        99th_uncertainty: 0.00890\r\n\r\n==========================\r\nnetwork: tftrt_fp16_big-yolov3_frozen.pb,        batchsize 32, steps 100\r\n  fps   median: 237.6,  mean: 242.5,    uncertainty: 1.4,       jitter: 5.4\r\n  latency       median: 0.13469,        mean: 0.13245,  99th_p: 0.17733,        99th_uncertainty: 0.04387\r\n\r\n==========================\r\nnetwork: tftrt_int8_big-yolov3_frozen.pb,        batchsize 32, steps 100\r\n  fps   median: 210.1,  mean: 207.5,    uncertainty: 1.5,       jitter: 2.7\r\n  latency       median: 0.15231,        mean: 0.15657,  99th_p: 0.16928,        99th_uncertainty: 0.16613\r\n```\r\n\r\n```\r\n==========================\r\nnetwork: native_tiny-yolov3_frozen.pb,   batchsize 128, steps 100\r\n  fps   median: 357.4,  mean: 354.3,    uncertainty: 1.7,       jitter: 14.5\r\n  latency       median: 0.35814,        mean: 0.36215,  99th_p: 0.44575,        99th_uncertainty: 0.00629\r\n\r\n==========================\r\nnetwork: tftrt_fp32_tiny-yolov3_frozen.pb,       batchsize 128, steps 100\r\n  fps   median: 324.9,  mean: 319.4,    uncertainty: 1.4,       jitter: 2.5\r\n  latency       median: 0.39401,        mean: 0.40173,  99th_p: 0.49218,        99th_uncertainty: 0.06484\r\n\r\n==========================\r\nnetwork: tftrt_fp16_tiny-yolov3_frozen.pb,       batchsize 128, steps 100\r\n  fps   median: 376.1,  mean: 372.8,    uncertainty: 1.1,       jitter: 1.7\r\n  latency       median: 0.34036,        mean: 0.34363,  99th_p: 0.38601,        99th_uncertainty: 0.02051\r\n\r\n==========================\r\nnetwork: tftrt_int8_tiny-yolov3_frozen.pb,       batchsize 128, steps 100\r\n  fps   median: 392.1,  mean: 391.3,    uncertainty: 0.5,       jitter: 1.8\r\n  latency       median: 0.32645,        mean: 0.32717,  99th_p: 0.33765,        99th_uncertainty: 0.01967\r\n\r\n==========================\r\nnetwork: native_big-yolov3_frozen.pb,    batchsize 32, steps 100\r\n  fps   median: 124.3,  mean: 124.0,    uncertainty: 0.4,       jitter: 1.7\r\n  latency       median: 0.25737,        mean: 0.25842,  99th_p: 0.31292,        99th_uncertainty: 0.00355\r\n\r\n==========================\r\nnetwork: tftrt_fp32_big-yolov3_frozen.pb,        batchsize 32, steps 100\r\n  fps   median: 141.0,  mean: 140.7,    uncertainty: 0.3,       jitter: 0.3\r\n  latency       median: 0.22690,        mean: 0.22761,  99th_p: 0.24239,        99th_uncertainty: 0.00581\r\n\r\n==========================\r\nnetwork: tftrt_fp16_big-yolov3_frozen.pb,        batchsize 32, steps 100\r\n  fps   median: 247.4,  mean: 245.9,    uncertainty: 1.0,       jitter: 4.4\r\n  latency       median: 0.12934,        mean: 0.13044,  99th_p: 0.16018,        99th_uncertainty: 0.02011\r\n\r\n==========================\r\nnetwork: tftrt_int8_big-yolov3_frozen.pb,        batchsize 32, steps 100\r\n  fps   median: 206.0,  mean: 204.5,    uncertainty: 1.4,       jitter: 1.0\r\n  latency       median: 0.15536,        mean: 0.15885,  99th_p: 0.16454,        99th_uncertainty: 0.17423\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31020", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31020/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31020/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31020/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31020", "id": 472740525, "node_id": "MDU6SXNzdWU0NzI3NDA1MjU=", "number": 31020, "title": "Symbolic Links Aren't Created When Needed Using TF_SYSTEM_LIBS", "user": {"login": "Amzo", "id": 44259387, "node_id": "MDQ6VXNlcjQ0MjU5Mzg3", "avatar_url": "https://avatars0.githubusercontent.com/u/44259387?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Amzo", "html_url": "https://github.com/Amzo", "followers_url": "https://api.github.com/users/Amzo/followers", "following_url": "https://api.github.com/users/Amzo/following{/other_user}", "gists_url": "https://api.github.com/users/Amzo/gists{/gist_id}", "starred_url": "https://api.github.com/users/Amzo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Amzo/subscriptions", "organizations_url": "https://api.github.com/users/Amzo/orgs", "repos_url": "https://api.github.com/users/Amzo/repos", "events_url": "https://api.github.com/users/Amzo/events{/privacy}", "received_events_url": "https://api.github.com/users/Amzo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "perfinion", "id": 363227, "node_id": "MDQ6VXNlcjM2MzIyNw==", "avatar_url": "https://avatars3.githubusercontent.com/u/363227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/perfinion", "html_url": "https://github.com/perfinion", "followers_url": "https://api.github.com/users/perfinion/followers", "following_url": "https://api.github.com/users/perfinion/following{/other_user}", "gists_url": "https://api.github.com/users/perfinion/gists{/gist_id}", "starred_url": "https://api.github.com/users/perfinion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/perfinion/subscriptions", "organizations_url": "https://api.github.com/users/perfinion/orgs", "repos_url": "https://api.github.com/users/perfinion/repos", "events_url": "https://api.github.com/users/perfinion/events{/privacy}", "received_events_url": "https://api.github.com/users/perfinion/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "perfinion", "id": 363227, "node_id": "MDQ6VXNlcjM2MzIyNw==", "avatar_url": "https://avatars3.githubusercontent.com/u/363227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/perfinion", "html_url": "https://github.com/perfinion", "followers_url": "https://api.github.com/users/perfinion/followers", "following_url": "https://api.github.com/users/perfinion/following{/other_user}", "gists_url": "https://api.github.com/users/perfinion/gists{/gist_id}", "starred_url": "https://api.github.com/users/perfinion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/perfinion/subscriptions", "organizations_url": "https://api.github.com/users/perfinion/orgs", "repos_url": "https://api.github.com/users/perfinion/repos", "events_url": "https://api.github.com/users/perfinion/events{/privacy}", "received_events_url": "https://api.github.com/users/perfinion/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-07-25T08:45:38Z", "updated_at": "2019-08-09T21:21:26Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS: FreeBSD\r\n- Building from source \r\n- TensorFlow version: V1.14.0\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source):  0.28\r\n- GCC/Compiler version (if compiling from source): Clang 6.0.1\r\n\r\n**Describe the problem**\r\n\r\nWhen using _TF_SYSTEM_LIBS_ to build Tensorflow from source. It tries to include files which it has yet to create. In the file third_party/systemlibs/protobuf.BUILD. It creates symbolic links to the header files when building with _TF_SYSTEM_LIBS_. However it tries to compile code which relies on these headers before these headers have been created. If I continue the build without cleaning the build continues as normal. \r\n\r\nSetting jobs to 1 even causes this problem. As the files either haven't been created or haven't finished creating them. I can't tell if this is an issue with Bazel or Tensorflow, but it's either not waiting for the sub command to complete and create these files, or when using _TF_SYSTEM_LIBS_ it is compiling code which relies on these before they're created.\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n**Compile Tensorflow with the following _TF_SYSTEM_LIBS:_**\r\n\r\n```\r\nabsl_py astor_archive \r\nboringssl\r\ncom_github_googleapis_googleapis\r\ncom_github_googlecloudplatform_google_cloud_cpp\r\ncom_google_protobuf\r\ncom_google_protobuf_cc\r\ncom_googlesource_code_re2\r\ncurl\r\ncython\r\ndouble_conversion\r\nenum34_archive\r\nflatbuffers\r\ngast_archive\r\ngif_archive grpc\r\nhwloc\r\nicu\r\njpeg\r\njsoncpp_git\r\nkeras_applications_archive\r\nlmdb\r\nnasm\r\nnsync org_sqlite\r\npasta\r\npcre\r\npng_archive\r\nprotobuf_archive\r\nsix_archive\r\nsnappy\r\nswig\r\ntermcolor_archive\r\nwrapt\r\nzlib_archive\"\r\n```\r\n\r\n**Additional enviroment variables for building:**\r\n\r\n```\r\nPYTHON_BIN_PATH=${PYTHON_CMD}\"\r\nPYTHON_LIB_PATH=\"${PYTHON_SITELIBDIR}\"\r\nTF_NEED_JEMALLOC=0\r\nTF_NEED_KAFKA=0\r\nTF_NEED_OPENCL_SYCL=0\r\nTF_NEED_AWS=0\r\nTF_NEED_GCP=0\r\nTF_NEED_HDFS=0\r\nTF_NEED_S3=0\r\nTF_ENABLE_XLA=0\r\nTF_NEED_GDR=0\r\nTF_NEED_VERBS=0\r\nTF_NEED_OPENCL=0\r\nTF_NEED_MPI=0\r\nTF_NEED_TENSORRT=0\r\nTF_NEED_NGRAPH=0\r\nTF_NEED_IGNITE=0\r\nTF_NEED_ROCM=0\r\nTF_NEED_CUDA=0\r\nTF_SET_ANDROID_WORKSPACE=0\r\nTF_DOWNLOAD_CLANG=0\r\nTF_NEED_NCCL=0\r\nTF_NEED_OPENCL=0\r\nTF_IGNORE_MAX_BAZEL_VERSION=1\r\nCC_OPT_FLAGS=\"-march=${CPU_TARGET}\"\r\nPREFIX=\"${LOCALBASE}\"\r\n```\r\n\r\n**Using the follow bazelrc file:**\r\n\r\n```\r\nstartup --batch\r\n\r\nbuild --strip=never\r\nbuild --verbose_failures --noshow_loading_progress\r\ntest --verbose_test_summary --verbose_failures --noshow_loading_progress\r\n\r\nbuild --spawn_strategy=local --genrule_strategy=local\r\ntest --spawn_strategy=local --genrule_strategy=local\r\n\r\nfetch --repository_cache=\"%%BAZEL_DIR%%/bazel-cache/\" --distdir=\"%%BAZEL_DIST%%/bazel-distdir/\"\r\nbuild --repository_cache=\"%%BAZEL_DIR%%/bazel-cache/\" --distdir=\"%%BAZEL_DIST%%/bazel-distdir/\"\r\n\r\nbuild --define=PREFIX=%%LOCALBASE%%\r\nbuild --define=LIBDIR=%%LOCALBASE%%/lib\r\n\r\nbuild --config=noaws --config=nohdfs --config=noignite --config=nokafka\r\n```\r\n\r\n** Build Command Used**\r\n\r\n```\r\nbazel --bazelrc=\"${WRKDIR}/bazelrc\" ${BAZEL_BOOT} build ${BAZEL_COPT} --host_copt=\"-I${LOCALBASE}/include\" \\\r\n\t\t--host_linkopt=\"-L${LOCALBASE}/lib\" --linkopt=\"-L${LOCALBASE}/lib\" --config=opt \\\r\n\t\t--incompatible_no_support_tools_in_action_inputs=false \\\r\n\t\t--verbose_failures -s \\\r\n\t\t//tensorflow:libtensorflow.so \\\r\n\t\t//tensorflow:libtensorflow_cc.so \\\r\n\t\t//tensorflow:install_headers \\\r\n\t\t//tensorflow/tools/pip_package:build_pip_package\r\n```\r\n\r\n**Any other info / logs**\r\n\r\nCompilation log:\r\n\r\n\r\n```\r\nSUBCOMMAND: # //tensorflow/core:conv_autotuning_proto_cc_genproto [action 'ProtoCompile tensorflow/core/protobuf/conv_autotuning\r\n.pb.cc [for host]']\r\n(cd /usr/home/Amzo/FreeBSD-Tensorflow/science/py-tensorflow/work-py36/bazel_out/f19d4b0a99d0cb4c4a90e3adec2fef45/execroot/org_te\r\nnsorflow && \\\r\n  exec env - \\\r\n    PATH=/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin:/home/Amzo/bin \\\r\n  bazel-out/host/bin/external/protobuf_archive/protoc.bin '--cpp_out=bazel-out/host/bin/' -I. -I. -Iexternal/protobuf_archive -I\r\nbazel-out/host/bin/external/protobuf_archive -Iexternal/protobuf_archive -Ibazel-out/host/bin/external/protobuf_archive tensorfl\r\now/core/protobuf/conv_autotuning.proto)\r\nSUBCOMMAND: # //tensorflow/core:autotuning_proto_cc_genproto [action 'ProtoCompile tensorflow/core/protobuf/autotuning.pb.cc [fo\r\nr host]']\r\n(cd /usr/home/Amzo/FreeBSD-Tensorflow/science/py-tensorflow/work-py36/bazel_out/f19d4b0a99d0cb4c4a90e3adec2fef45/execroot/org_te\r\nnsorflow && \\\r\n  exec env - \\\r\n    PATH=/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin:/home/Amzo/bin \\\r\n  bazel-out/host/bin/external/protobuf_archive/protoc.bin '--cpp_out=bazel-out/host/bin/' -I. -Iexternal/protobuf_archive -Ibaze\r\nl-out/host/bin/external/protobuf_archive tensorflow/core/protobuf/autotuning.proto)\r\nERROR: /usr/home/Amzo/FreeBSD-Tensorflow/science/py-tensorflow/work-py36/tensorflow-1.14.0/tensorflow/core/BUILD:2255:1: ProtoCo\r\nmpile tensorflow/core/protobuf/autotuning.pb.cc failed (Exit 1)\r\ngoogle/protobuf/any.proto: File not found.\r\ngoogle/protobuf/duration.proto: File not found.\r\ntensorflow/core/protobuf/autotuning.proto:10:1: Import \"google/protobuf/any.proto\" was not found or had errors.\r\ntensorflow/core/protobuf/autotuning.proto:11:1: Import \"google/protobuf/duration.proto\" was not found or had errors.\r\ntensorflow/core/protobuf/autotuning.proto:52:3: \"google.protobuf.Duration\" is not defined.\r\n```\r\n\r\nWhile I know FreeBSD isn't a supported platform, I just need help finding the culprit to this issue. As the problem only occasionally occurs. If I create a new jail and build, then sometimes it will succeed and sometimes it will fail due to trying to compile source before the proto headers have been linked. This is just based on luck as to whether or not another job has created them.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31008", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31008/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31008/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31008/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31008", "id": 472633401, "node_id": "MDU6SXNzdWU0NzI2MzM0MDE=", "number": 31008, "title": "throw std::out_of_range while convert Lite quantization model with representative_dataset", "user": {"login": "eric4337", "id": 4446235, "node_id": "MDQ6VXNlcjQ0NDYyMzU=", "avatar_url": "https://avatars3.githubusercontent.com/u/4446235?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eric4337", "html_url": "https://github.com/eric4337", "followers_url": "https://api.github.com/users/eric4337/followers", "following_url": "https://api.github.com/users/eric4337/following{/other_user}", "gists_url": "https://api.github.com/users/eric4337/gists{/gist_id}", "starred_url": "https://api.github.com/users/eric4337/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eric4337/subscriptions", "organizations_url": "https://api.github.com/users/eric4337/orgs", "repos_url": "https://api.github.com/users/eric4337/repos", "events_url": "https://api.github.com/users/eric4337/events{/privacy}", "received_events_url": "https://api.github.com/users/eric4337/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-07-25T02:28:12Z", "updated_at": "2019-07-25T09:00:50Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v1.14.0-rc1-22-gaf24dc91b5 1.14.0\r\n- Python version: 3.6.3\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n**Describe the current behavior**\r\nWhen convert to Lite quantized model with representative_dataset, it throws `std::out_of_range`, when model includes `tf.split()`\r\nMy model implement Pixel Shuffle with some split and concat operation,\r\nI narrow down to tf.split() which is causing the issue\r\n\r\n**Describe the expected behavior**\r\nConvert sucessfully\r\n\r\n**Code to reproduce the issue**\r\n```\r\ninputs_raw = tf.placeholder(tf.float32, shape=[1, 32, 32, 1], name='inputs_raw')\r\noutputs = tf.split(value = inputs_raw, num_or_size_splits = 2, axis = 1)[0]\r\n\r\nwith tf.Session() as sess:\r\n    sess.run(tf.global_variables_initializer())\r\n\r\n    converter = lite.TFLiteConverter.from_session(sess, [inputs_raw], [outputs])\r\n\r\n    converter.optimizations = [lite.Optimize.DEFAULT]\r\n    def representative_data_gen():\r\n        for i in range(1):\r\n            yield [np.random.random_sample((1, 32, 32, 1)).astype(np.float32)]\r\n            #yield [sess.run(tf.random.normal(inputs_raw.get_shape(), dtype = tf.float32, seed = 1))] # both have issue\r\n    converter.representative_dataset = representative_data_gen\r\n    tflite_model = converter.convert()\r\n```\r\n**Other info / logs**\r\nW0725 10:03:24.455737 140039335962368 deprecation_wrapper.py:119] From main.py:419: The name tf.placeholder is deprecated. Please use tf.compat.v1.placeholder instead.\r\n\r\nTensor(\"split:0\", shape=(1, 16, 32, 1), dtype=float32)\r\nW0725 10:03:24.459982 140039335962368 deprecation_wrapper.py:119] From main.py:431: The name tf.Session is deprecated. Please use tf.compat.v1.Session instead.\r\n\r\n2019-07-25 10:03:24.464880: I tensorflow/stream_executor/platform/default/dso_loader.cc:53] Could not dlopen library 'libcuda.so.1'; dlerror: libcuda.so.1: cannot open shared object file: No such file or directory; LD_LIBRARY_PATH: /xxxoss/Python3/3.6.3_gpu_tf1131_cuda10-ubuntu16/x86_64/lib:/xxxtools/LSF/10/10.1/linux2.6-glibc2.3-x86_64/lib:/xxxoss/tcl/8.4.19/x86_64/lib:/xxxoss/tcl/8.4.19/x86_64/lib/tcl8.4:/xxxoss/tcl/8.4.19/x86_64/lib/tclx8.4:/lib64:/usr/lib64:/lib:\r\n2019-07-25 10:03:24.464949: E tensorflow/stream_executor/cuda/cuda_driver.cc:318] failed call to cuInit: UNKNOWN ERROR (303)\r\n2019-07-25 10:03:24.465006: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:156] kernel driver does not appear to be running on this host (a07ws012123): /proc/driver/nvidia/version does not exist\r\n2019-07-25 10:03:24.465369: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-07-25 10:03:24.508462: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2394230000 Hz\r\n2019-07-25 10:03:24.508764: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x4283070 executing computations on platform Host. Devices:\r\n2019-07-25 10:03:24.508788: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): <undefined>, <undefined>\r\nW0725 10:03:24.521992 140039335962368 deprecation_wrapper.py:119] From main.py:432: The name tf.global_variables_initializer is deprecated. Please use tf.compat.v1.global_variables_initializer instead.\r\n\r\n2019-07-25 10:03:24.525090: W tensorflow/compiler/jit/mark_for_compilation_pass.cc:1412] (One-time warning): Not using XLA:CPU for cluster because envvar TF_XLA_FLAGS=--tf_xla_cpu_global_jit was not set.  If you want XLA:CPU, either set that envvar, or use experimental_jit_scope to enable XLA:CPU.  To confirm that XLA is active, pass --vmodule=xla_compilation_cache=1 (as a proper command-line flag, not via TF_XLA_FLAGS) or set the envvar XLA_FLAGS=--xla_hlo_profile.\r\n2019-07-25 10:03:24.526496: I tensorflow/core/grappler/devices.cc:55] Number of eligible GPUs (core count >= 8, compute capability >= 0.0): 0\r\n2019-07-25 10:03:24.526607: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\r\n2019-07-25 10:03:24.528117: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:716] Optimization results for grappler item: graph_to_optimize\r\n2019-07-25 10:03:24.528143: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   function_optimizer: function_optimizer did nothing. time = 0.001ms.\r\n2019-07-25 10:03:24.528153: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   function_optimizer: function_optimizer did nothing. time = 0.001ms.\r\n2019-07-25 10:03:24.530117: I tensorflow/core/grappler/devices.cc:55] Number of eligible GPUs (core count >= 8, compute capability >= 0.0): 0\r\n2019-07-25 10:03:24.530193: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\r\n2019-07-25 10:03:24.532220: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:716] Optimization results for grappler item: graph_to_optimize\r\n2019-07-25 10:03:24.532249: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   constant folding: Graph size after: 3 nodes (-2), 2 edges (0), time = 0.465ms.\r\nINFO: Initialized TensorFlow Lite runtime.\r\nterminate called after throwing an instance of 'std::out_of_range'\r\n  what():  _Map_base::at\r\nAbort (core dumped)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31005", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31005/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31005/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/31005/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/31005", "id": 472613852, "node_id": "MDU6SXNzdWU0NzI2MTM4NTI=", "number": 31005, "title": "\"Not found: Resource does not exist\" exception thrown in runtime", "user": {"login": "lengoanhcat", "id": 1382227, "node_id": "MDQ6VXNlcjEzODIyMjc=", "avatar_url": "https://avatars3.githubusercontent.com/u/1382227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lengoanhcat", "html_url": "https://github.com/lengoanhcat", "followers_url": "https://api.github.com/users/lengoanhcat/followers", "following_url": "https://api.github.com/users/lengoanhcat/following{/other_user}", "gists_url": "https://api.github.com/users/lengoanhcat/gists{/gist_id}", "starred_url": "https://api.github.com/users/lengoanhcat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lengoanhcat/subscriptions", "organizations_url": "https://api.github.com/users/lengoanhcat/orgs", "repos_url": "https://api.github.com/users/lengoanhcat/repos", "events_url": "https://api.github.com/users/lengoanhcat/events{/privacy}", "received_events_url": "https://api.github.com/users/lengoanhcat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-07-25T00:51:10Z", "updated_at": "2019-08-12T23:55:44Z", "closed_at": null, "author_association": "NONE", "body": "I am facing a similar error mentioned above. I will try my best to help resolve this issue as it benefits my work as well. It is the same problme with issue #22631, \r\n\r\nOS Platform and Distribution: Linux Ubuntu x86_64 - 4.15.0-52-generic (kernel)\r\nTensorFlow installed from: conda 4.7.5\r\nTensorFlow version: 1.13.1\r\nBazel version: N/A\r\nCUDA/cuDNN version: 10.0\r\nGPU model and memory: Tesla V100-SXM2-16GB\r\nExact command to reproduce:\r\nMobile device: N/A\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\nconfig = tf.ConfigProto()\r\nconfig.gpu_options.allow_growth = True\r\n\r\ndef discriminative_loss(y_true, y_pred):\r\n    \"\"\"Computes loss for a batch of images\r\n    Args:\r\n        y_true: (n, h, w) where each elements contains the ground truth instance id\r\n        y_pred: (n, h, w, d) d-dimensional vector for each pixel for each image in the batch\r\n    Returns:\r\n        loss\r\n    \"\"\"\r\n    # Compute the loss for each image in the batch\r\n    def compute_loss(input):\r\n        prediction = input[1]\r\n        label = input[0]\r\n\r\n        # Number of clusters in ground truth\r\n        clusters,_ = tf.unique(tf.reshape(label, [-1]))\r\n\r\n        # Compute cluster means and variances for each cluster\r\n        def compute_mean(c):\r\n            mask = tf.equal(label[:,:,0], c)\r\n            masked_pixels = tf.boolean_mask(prediction, mask)\r\n            cluster_mean = tf.reduce_mean(masked_pixels, axis=0)\r\n\r\n            return cluster_mean\r\n\r\n        cluster_means = tf.map_fn(compute_mean, clusters, dtype=(tf.float32))\r\n        return tf.reduce_mean(cluster_means)\r\n\r\n    # We want to know the loss for each image in the batch\r\n    losses = tf.map_fn(compute_loss, (y_true,y_pred), dtype=(tf.float32))\r\n    return losses\r\n\r\ndef discriminative_loss_working(y_true, y_pred):\r\n    # Compute the loss for only the first image in the batch\r\n\r\n    prediction = y_pred[0]\r\n    label = y_true[0]\r\n\r\n    # Number of clusters in ground truth\r\n    clusters,_ = tf.unique(tf.reshape(label, [-1]))\r\n\r\n    # Compute cluster means and variances for each cluster\r\n    def compute_mean(c):\r\n        mask = tf.equal(label[:,:,0], c)\r\n        masked_pixels = tf.boolean_mask(prediction, mask)\r\n        cluster_mean = tf.reduce_mean(masked_pixels, axis=0)\r\n\r\n        return cluster_mean\r\n\r\n    cluster_means = tf.map_fn(compute_mean, clusters, dtype=(tf.float32))\r\n    return tf.reduce_mean(cluster_means)\r\n\r\nclass MyModel(tf.keras.Model):\r\n    def __init__(self, input_shape):\r\n        super(MyModel, self).__init__()\r\n        self.conv = tf.keras.layers.Conv2D(filters=4, kernel_size=(1,1))\r\n\r\n    def call(self, input):\r\n        return self.conv(input)\r\n\r\ninput_shape = (1,128,128,3)\r\ndef my_gen():\r\n    while True:\r\n        x = np.random.rand(1,input_shape[1], input_shape[2],3)\r\n        y = np.random.randint(11000, 11015, (input_shape[1], input_shape[2],1))\r\n        yield x,y\r\n\r\ntrain_dataset = tf.data.Dataset.from_generator(\r\n                    my_gen,\r\n                    (tf.float32, tf.float32),\r\n                    (tf.TensorShape([1,128,128,3]),\r\n                     tf.TensorShape([128,128,1])))\r\ntrain_dataset = train_dataset.batch(1)\r\ntrain_dataset = train_dataset.repeat()\r\n\r\nmodel = MyModel(input_shape=input_shape)\r\n\r\n# This is a fix to make loading weights possible\r\n# x = tf.zeros((1,) + input_shape)\r\nx = tf.zeros(input_shape)\r\ny = model(x)\r\n\r\nwith tf.Session(config=config):\r\n    optimizer = tf.keras.optimizers.SGD(lr=0.0001)\r\n    model.compile(loss=discriminative_loss,optimizer=optimizer)\r\n    model.fit(train_dataset, epochs=5, steps_per_epoch=2)\r\n```\r\n[tf_error.log](https://github.com/tensorflow/tensorflow/files/3415129/tf_error.log)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30991", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30991/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30991/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30991/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30991", "id": 472317281, "node_id": "MDU6SXNzdWU0NzIzMTcyODE=", "number": 30991, "title": "Name Scope Automatic Handling According to the Model Architectures blocks", "user": {"login": "Uiuran", "id": 1892703, "node_id": "MDQ6VXNlcjE4OTI3MDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/1892703?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Uiuran", "html_url": "https://github.com/Uiuran", "followers_url": "https://api.github.com/users/Uiuran/followers", "following_url": "https://api.github.com/users/Uiuran/following{/other_user}", "gists_url": "https://api.github.com/users/Uiuran/gists{/gist_id}", "starred_url": "https://api.github.com/users/Uiuran/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Uiuran/subscriptions", "organizations_url": "https://api.github.com/users/Uiuran/orgs", "repos_url": "https://api.github.com/users/Uiuran/repos", "events_url": "https://api.github.com/users/Uiuran/events{/privacy}", "received_events_url": "https://api.github.com/users/Uiuran/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "mdanatg", "id": 26628547, "node_id": "MDQ6VXNlcjI2NjI4NTQ3", "avatar_url": "https://avatars1.githubusercontent.com/u/26628547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdanatg", "html_url": "https://github.com/mdanatg", "followers_url": "https://api.github.com/users/mdanatg/followers", "following_url": "https://api.github.com/users/mdanatg/following{/other_user}", "gists_url": "https://api.github.com/users/mdanatg/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdanatg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdanatg/subscriptions", "organizations_url": "https://api.github.com/users/mdanatg/orgs", "repos_url": "https://api.github.com/users/mdanatg/repos", "events_url": "https://api.github.com/users/mdanatg/events{/privacy}", "received_events_url": "https://api.github.com/users/mdanatg/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mdanatg", "id": 26628547, "node_id": "MDQ6VXNlcjI2NjI4NTQ3", "avatar_url": "https://avatars1.githubusercontent.com/u/26628547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdanatg", "html_url": "https://github.com/mdanatg", "followers_url": "https://api.github.com/users/mdanatg/followers", "following_url": "https://api.github.com/users/mdanatg/following{/other_user}", "gists_url": "https://api.github.com/users/mdanatg/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdanatg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdanatg/subscriptions", "organizations_url": "https://api.github.com/users/mdanatg/orgs", "repos_url": "https://api.github.com/users/mdanatg/repos", "events_url": "https://api.github.com/users/mdanatg/events{/privacy}", "received_events_url": "https://api.github.com/users/mdanatg/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-07-24T14:30:26Z", "updated_at": "2019-08-08T14:42:38Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using):\r\n- Are you willing to contribute it (Yes/No):\r\nYes\r\n**Describe the feature and the current behavior/state.**\r\nTensorflow must be able to give name scopes more logically according to the architecture being built and automatically. Also, must be able to update the names automatically according to the \r\nArchitecture without the dev having to explicity name the things (this should be optional).\r\n\r\nToday it only automatically adds numbers sequentially to name/var scope when it is identical\r\nto any other in the collections and you dont add '/' to it\r\n\r\n**Will this change the current api? How?**\r\nAdd a Name/Var Scope handler. \r\n\r\nThis class/template must be used to implement logic of names according to the architecture block connection. E.G. if a block is just the same from the other in the sequence them it must be named as if is a deep part of the same architecture blocks. If it is a ramification of the block given in a sequence but the same arch them he must be named with another tag.\r\n When duplicating some block to architectonic use, E.G. if you need to frame your data or feature, them each frame must have an coeherent name space block, like the today ordimatlicly done for repeated name space block, but this must be automaticly done for identical built blocks of the model, without the need to explicity code it.\r\nNames must be given as unique ID according to te input-output architecture connection, if it has the same IO from previous Block in the sequence, then each Input-ArchBlock-Output that is IDentical must have the same name with the appropriated tag for deepness in the sequence of blocks.\r\n\r\nSomethings still to be cleared, like if you have a sequence of CNN of deepness, say 100, then many of them will have same IO arch type (name), but they must not be enclosed in a name scope according to IO, since it obviously has the same IO pattern.\r\n\r\n\r\n**Who will benefit with this feature?**\r\n\r\nMuch more self contained and manageable architectonic blocks, idenpendent of its Variable parameters configuration. This will rapid increase how we search for relevant new Neural Networks architecture, since it is a management tools as much as a vizualization tool and a graph construction tool.\r\n\r\n**Any Other info.**\r\n\r\nObs: These Features could be something for the future in Autograph module, if it still dosnt do it"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30988", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30988/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30988/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30988/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30988", "id": 472254519, "node_id": "MDU6SXNzdWU0NzIyNTQ1MTk=", "number": 30988, "title": "Relations/differences between Container and Scopes in Context Manager are not Clear", "user": {"login": "Uiuran", "id": 1892703, "node_id": "MDQ6VXNlcjE4OTI3MDM=", "avatar_url": "https://avatars3.githubusercontent.com/u/1892703?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Uiuran", "html_url": "https://github.com/Uiuran", "followers_url": "https://api.github.com/users/Uiuran/followers", "following_url": "https://api.github.com/users/Uiuran/following{/other_user}", "gists_url": "https://api.github.com/users/Uiuran/gists{/gist_id}", "starred_url": "https://api.github.com/users/Uiuran/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Uiuran/subscriptions", "organizations_url": "https://api.github.com/users/Uiuran/orgs", "repos_url": "https://api.github.com/users/Uiuran/repos", "events_url": "https://api.github.com/users/Uiuran/events{/privacy}", "received_events_url": "https://api.github.com/users/Uiuran/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-07-24T12:27:02Z", "updated_at": "2019-07-25T09:59:50Z", "closed_at": null, "author_association": "NONE", "body": "From respective docs\r\nhttps://www.tensorflow.org/api_docs/python/tf/container\r\nhttps://www.tensorflow.org/api_docs/python/tf/VariableScope\r\n\r\nThe relation between these two context manager is not clear (although variable scope and name scope inter-relation are fine). \r\n\r\nBut from the source code ones can see that they are clearly two things that inter-relates but not the same thing. \r\n\r\nShould i use Container only in the eager mode ? why not use only variable scope or name scope instead? also, maybe other questions will come as people uses low-level API to specialize in tensorflow dev.\r\n\r\nSo i think its an Issue.\r\n\r\nThankyou \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30983", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30983/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30983/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30983/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30983", "id": 472201404, "node_id": "MDU6SXNzdWU0NzIyMDE0MDQ=", "number": 30983, "title": "Sample weights being expanded to match y_true/y_pred before they're sliced using a class_id in keras metrics.", "user": {"login": "simian-typist", "id": 14922878, "node_id": "MDQ6VXNlcjE0OTIyODc4", "avatar_url": "https://avatars2.githubusercontent.com/u/14922878?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simian-typist", "html_url": "https://github.com/simian-typist", "followers_url": "https://api.github.com/users/simian-typist/followers", "following_url": "https://api.github.com/users/simian-typist/following{/other_user}", "gists_url": "https://api.github.com/users/simian-typist/gists{/gist_id}", "starred_url": "https://api.github.com/users/simian-typist/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simian-typist/subscriptions", "organizations_url": "https://api.github.com/users/simian-typist/orgs", "repos_url": "https://api.github.com/users/simian-typist/repos", "events_url": "https://api.github.com/users/simian-typist/events{/privacy}", "received_events_url": "https://api.github.com/users/simian-typist/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-07-24T10:21:19Z", "updated_at": "2019-11-19T00:55:21Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: n/a\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v2.0.0-beta0-16-g1d91213fe7 2.0.0-beta1\r\n- Python version: 3.6.7\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 10.0\r\n- GPU model and memory: 7.5\r\n\r\n**Describe the current behavior**\r\nWhen passing sample weights and a class id to a metric class `sample_weights` is expanded to match the shape of y_true in [line 306 of this file](https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/keras/utils/metrics_utils.py#L306), then the slicing using `class_id` is done in [line 312](https://github.com/tensorflow/tensorflow/blob/8e423e3d56390671f0d954c90f4fd163ab02a9c1/tensorflow/python/keras/utils/metrics_utils.py#L312) which means the broadcast weights op in [line 339-340](https://github.com/tensorflow/tensorflow/blob/8e423e3d56390671f0d954c90f4fd163ab02a9c1/tensorflow/python/keras/utils/metrics_utils.py#L339) fails as the shapes don't match anymore.\r\n\r\n**Describe the expected behavior**\r\nSample weights should be squeezed or expanded to match the new shape of y_true and y_pred after they're sliced. Or it could be enforced to be the same shape as y_true and y_pred and then sliced as well.\r\n\r\n**Code to reproduce the issue**\r\nThis code should illustrate the problem\r\n\r\n    import tensorflow as tf\r\n    import numpy as np\r\n\r\n\r\n    class MaskedRecall(tf.keras.metrics.Metric):\r\n\r\n        def __init__(self, class_id=None, name=None, dtype=None):\r\n            super().__init__(name, dtype)\r\n            self.inner = tf.keras.metrics.Recall(class_id=class_id)\r\n\r\n        def result(self):\r\n            return self.inner.result()\r\n\r\n        def update_state(self, y_true, y_pred, sample_weight=None):\r\n            sample_weight = tf.where(tf.equal(y_true[..., self.inner.class_id], -1),\r\n                                    tf.zeros_like(y_true[..., self.inner.class_id]),\r\n                                    tf.ones_like(y_true[..., self.inner.class_id]))\r\n            self.inner.update_state(y_true, y_pred, sample_weight)\r\n\r\n        def reset_states(self):\r\n            self.inner.reset_states()\r\n\r\n\r\n    if __name__ == \"__main__\":\r\n        # metric = tf.keras.metrics.Recall()\r\n        metric = MaskedRecall(class_id=0)  # 0)\r\n        y_true = np.array([[[1], [0], [-1]], [[0], [1], [0]]])\r\n        y_pred = np.array([[[1], [0], [0]], [[0], [1], [0]]])\r\n\r\n        tf.config.experimental_run_functions_eagerly(True)\r\n        metric.reset_states()\r\n        metric.update_state(y_true, y_pred)\r\n        print(\"Metric result: \", metric.result())\r\n\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nTraceback from the above:\r\nTraceback (most recent call last):\r\n~                                                                                                                                                             \u2502  File \"/home/tbradley/Downloads/metric.py\", line 34, in <module>\r\n~                                                                                                                                                             \u2502    metric.update_state(y_true, y_pred)\r\n~                                                                                                                                                             \u2502  File \"/home/tbradley/.virtualenvs/anim/lib/python3.6/site-packages/tensorflow/python/keras/utils/metrics_utils.py\", line 75, in decorated\r\n~                                                                                                                                                             \u2502    update_op = update_state_fn(*args, **kwargs)\r\n~                                                                                                                                                             \u2502  File \"/home/tbradley/.virtualenvs/anim/lib/python3.6/site-packages/tensorflow/python/eager/def_function.py\", line 400, in __call__\r\n~                                                                                                                                                             \u2502    return self._python_function(*args, **kwds)\r\n~                                                                                                                                                             \u2502  File \"/home/tbradley/Downloads/metric.py\", line 20, in update_state\r\n~                                                                                                                                                             \u2502    self.inner.update_state(y_true, y_pred, sample_weight)\r\n~                                                                                                                                                             \u2502  File \"/home/tbradley/.virtualenvs/anim/lib/python3.6/site-packages/tensorflow/python/keras/utils/metrics_utils.py\", line 75, in decorated\r\n~                                                                                                                                                             \u2502    update_op = update_state_fn(*args, **kwargs)\r\n~                                                                                                                                                             \u2502  File \"/home/tbradley/.virtualenvs/anim/lib/python3.6/site-packages/tensorflow/python/keras/metrics.py\", line 1318, in update_state\r\n~                                                                                                                                                             \u2502    sample_weight=sample_weight)\r\n~                                                                                                                                                             \u2502  File \"/home/tbradley/.virtualenvs/anim/lib/python3.6/site-packages/tensorflow/python/keras/utils/metrics_utils.py\", line 340, in update_confusion_matrix_vari\r\n~                                                                                                                                                             \u2502ables\r\n~                                                                                                                                                             \u2502    math_ops.cast(sample_weight, dtype=dtypes.float32), y_pred)\r\n~                                                                                                                                                             \u2502  File \"/home/tbradley/.virtualenvs/anim/lib/python3.6/site-packages/tensorflow/python/ops/weights_broadcast_ops.py\", line 167, in broadcast_weights\r\n~                                                                                                                                                             \u2502    with ops.control_dependencies((assert_broadcastable(weights, values),)):\r\n~                                                                                                                                                             \u2502  File \"/home/tbradley/.virtualenvs/anim/lib/python3.6/site-packages/tensorflow/python/ops/weights_broadcast_ops.py\", line 103, in assert_broadcastable\r\n~                                                                                                                                                             \u2502    weights_rank_static, values.shape, weights.shape))\r\n~                                                                                                                                                             \u2502ValueError: weights can not be broadcast to values. values.rank=1. weights.rank=2. values.shape=(2,). weights.shape=(2, 1).\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30981", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30981/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30981/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30981/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30981", "id": 472179460, "node_id": "MDU6SXNzdWU0NzIxNzk0NjA=", "number": 30981, "title": "does pip wheels support hdfs on default?", "user": {"login": "colmantse", "id": 20071323, "node_id": "MDQ6VXNlcjIwMDcxMzIz", "avatar_url": "https://avatars2.githubusercontent.com/u/20071323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/colmantse", "html_url": "https://github.com/colmantse", "followers_url": "https://api.github.com/users/colmantse/followers", "following_url": "https://api.github.com/users/colmantse/following{/other_user}", "gists_url": "https://api.github.com/users/colmantse/gists{/gist_id}", "starred_url": "https://api.github.com/users/colmantse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/colmantse/subscriptions", "organizations_url": "https://api.github.com/users/colmantse/orgs", "repos_url": "https://api.github.com/users/colmantse/repos", "events_url": "https://api.github.com/users/colmantse/events{/privacy}", "received_events_url": "https://api.github.com/users/colmantse/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 12, "created_at": "2019-07-24T09:35:31Z", "updated_at": "2019-08-08T11:52:55Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary?\r\n- TensorFlow version: 1.12\r\n- Python version: 3.5\r\n- Installed using virtualenv? pip? conda?: pip\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: \r\n- GPU model and memory:\r\n\r\n\r\n\r\n**Describe the problem**\r\nUncertain if pip tensorflow_gpu 1.12 for python 3.5 supports hdfs by default\r\n\r\n**Any other info / logs**\r\nutil.NativeCodeLoader: Unable to load native-hadoop library for your platform\r\ninfo retry.RetryInvocationHandler org.apache.hadoop.net.ConnectTimeoutException: Call From ... failed on socket timeout exception: org.apache.hadoop.net.ConnectTimeoutException: 20000 millis timeout while waiting for channel to be ready for connect. ch : java.nio.channels.SocketChannel[connection-pending remote=...] while invoking ClientNameNodeProtocolTranslatorPB.getFileinfo over ... after 1 failover attempts. Trying to failover after sleeping for 781ms\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30972", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30972/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30972/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30972/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30972", "id": 472058529, "node_id": "MDU6SXNzdWU0NzIwNTg1Mjk=", "number": 30972, "title": "Excessive overhead with dense layer", "user": {"login": "ekuznetsov139", "id": 12205429, "node_id": "MDQ6VXNlcjEyMjA1NDI5", "avatar_url": "https://avatars2.githubusercontent.com/u/12205429?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ekuznetsov139", "html_url": "https://github.com/ekuznetsov139", "followers_url": "https://api.github.com/users/ekuznetsov139/followers", "following_url": "https://api.github.com/users/ekuznetsov139/following{/other_user}", "gists_url": "https://api.github.com/users/ekuznetsov139/gists{/gist_id}", "starred_url": "https://api.github.com/users/ekuznetsov139/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ekuznetsov139/subscriptions", "organizations_url": "https://api.github.com/users/ekuznetsov139/orgs", "repos_url": "https://api.github.com/users/ekuznetsov139/repos", "events_url": "https://api.github.com/users/ekuznetsov139/events{/privacy}", "received_events_url": "https://api.github.com/users/ekuznetsov139/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-07-24T03:16:35Z", "updated_at": "2019-08-08T01:46:12Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "Under normal circumstances, propagation through the dense layer should reduce to a matmul operation and possibly an activation operation. However, in tensorflow 1.14, it sometimes does not. This situation arises if the input to the dense layer is at least 3D and its dimensions are not fully determined at the time of graph construction.\r\nIf this happens, the framework calls the method tensordot(), which calls the internal method _tensordot_reshape(), which then attempts to determine how to reshape the tensor before calling matmul.\r\nThe GPU trace of the whole thing ends up looking like so:\r\n\r\n```\r\n\r\n[CUDA memcpy HtoD]\r\nvoid tensorflow::GatherOpKernel<int, int, bool=1>(int const *, int const *, tensorflow::GatherOpKernel<int, int, bool=1>*, __int64, __int64, __int64, __int64)\r\nvoid tensorflow::GatherOpKernel<int, int, bool=1>(int const *, int const *, tensorflow::GatherOpKernel<int, int, bool=1>*, __int64, __int64, __int64, __int64)\r\n[CUDA memcpy DtoH]\r\nvoid tensorflow::functor::BlockReduceKernel<int*, int*, int=256, tensorflow::functor::Prod<int>>(int*, int*, int, int, std::iterator_traits<tensorflow::functor::BlockReduceKernel<int*, int*, int=256, tensorflow::functor::Prod<int>>>::value_type)\r\n[CUDA memcpy DtoH]\r\n[CUDA memcpy DtoH]\r\nvolta_fp16_s884gemm_fp16_256x128_ldg8_f2f_nn\r\n```\r\n\r\nNote that these memcpy's are all for 4-8 bytes, but each one involves a syscall and a pointer validity check, so, they are not exactly free. \r\n\r\nAnd it is all unnecessary, because the framework does know how big the tensor is, on the CPU side, and something along these lines https://github.com/ekuznetsov139/tensor2tensor/commit/079f51f2c736d547cbd2b4bcfdcedb039827b93a would compute the shape without the use of the GPU.\r\n\r\nIt might seem trivial, but, in a graph with lots of small dense layers and especially when tensor cores are in play (so that the actual convolution is fairly fast), the overhead may become significant.\r\n\r\nThe above change to the tensor2tensor project reduces training time per step (NVIDIA Tesla V100, fp16) by at least 10%. Since the issue is fundamental and not specific to tensor2tensor, it would make sense to address it at the framework level."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30969", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30969/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30969/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30969/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30969", "id": 472008984, "node_id": "MDU6SXNzdWU0NzIwMDg5ODQ=", "number": 30969, "title": "TF-TRT does not return  correct batch size.", "user": {"login": "sgambient", "id": 42156923, "node_id": "MDQ6VXNlcjQyMTU2OTIz", "avatar_url": "https://avatars0.githubusercontent.com/u/42156923?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sgambient", "html_url": "https://github.com/sgambient", "followers_url": "https://api.github.com/users/sgambient/followers", "following_url": "https://api.github.com/users/sgambient/following{/other_user}", "gists_url": "https://api.github.com/users/sgambient/gists{/gist_id}", "starred_url": "https://api.github.com/users/sgambient/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sgambient/subscriptions", "organizations_url": "https://api.github.com/users/sgambient/orgs", "repos_url": "https://api.github.com/users/sgambient/repos", "events_url": "https://api.github.com/users/sgambient/events{/privacy}", "received_events_url": "https://api.github.com/users/sgambient/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1754777628, "node_id": "MDU6TGFiZWwxNzU0Nzc3NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu:tensorrt", "name": "comp:gpu:tensorrt", "color": "ea98ba", "default": false, "description": "Issues specific to TensorRT"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-07-23T23:20:04Z", "updated_at": "2019-12-26T18:34:17Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below):1.13.1\r\n- Python version:2.7\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:10.1\r\n- GPU model and memory:T4\r\n\r\n\r\n**Describe the current behavior**\r\nTF-TRT  seems to return max_batch_size instead of returning the feed batch size.  This breaks current code badly.\r\n\r\n**Describe the expected behavior**\r\nReturn the batch size as plain TF.\r\n\r\n**Code to reproduce the issue**\r\nShould be simple to reproduce. \r\n\r\n**Other info / logs**\r\nNone\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30956", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30956/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30956/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30956/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30956", "id": 471764324, "node_id": "MDU6SXNzdWU0NzE3NjQzMjQ=", "number": 30956, "title": "Segfault in custom op with TensorFlow 1.14, Python 3.6 and GCC 5.", "user": {"login": "nfergu", "id": 1291583, "node_id": "MDQ6VXNlcjEyOTE1ODM=", "avatar_url": "https://avatars1.githubusercontent.com/u/1291583?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nfergu", "html_url": "https://github.com/nfergu", "followers_url": "https://api.github.com/users/nfergu/followers", "following_url": "https://api.github.com/users/nfergu/following{/other_user}", "gists_url": "https://api.github.com/users/nfergu/gists{/gist_id}", "starred_url": "https://api.github.com/users/nfergu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nfergu/subscriptions", "organizations_url": "https://api.github.com/users/nfergu/orgs", "repos_url": "https://api.github.com/users/nfergu/repos", "events_url": "https://api.github.com/users/nfergu/events{/privacy}", "received_events_url": "https://api.github.com/users/nfergu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-07-23T15:25:34Z", "updated_at": "2019-07-30T00:34:55Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04 (Linux 93fd36b9ffb5 4.9.125-linuxkit #1 SMP Fri Sep 7 08:20:28 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux)\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): Binary\r\n- TensorFlow version (use command below): v1.14.0-rc1-22-gaf24dc91b5 1.14.0\r\n- Python version: Python 3.6.8\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): g++-5 (Ubuntu 5.5.0-12ubuntu1) 5.5.0 20171010\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\n\r\nWhen compiling the example custom op from https://www.tensorflow.org/guide/extend/op with GCC 5, a segfault is encountered when running with TensorFlow 1.14 and Python 3.6 (on Linux).\r\n\r\nThe same code works fine when running with either Python 3.7 (instead of Python 3.6) or compiling with GCC 4.8 (instead of GCC 5). The code also works fine on Mac.\r\n\r\nValgrind shows the following:\r\n\r\n```\r\n==8208== Process terminating with default action of signal 11 (SIGSEGV)\r\n==8208==  Access not within mapped region at address 0x88\r\n==8208==    at 0x40292BC0: {lambda(tensorflow::shape_inference::InferenceContext*)#1}::_FUN(tensorflow::shape_inference::InferenceContext*) (in /tmp/tmp1vwpnrsl)\r\n==8208==    by 0x40292D0F: std::_Function_handler<tensorflow::Status (tensorflow::shape_inference::InferenceContext*), tensorflow::Status (*)(tensorflow::shape_inference::InferenceContext*)>::_M_invoke(std::_Any_data const&, tensorflow::shape_inference::InferenceContext*&&) (in /tmp/tmp1vwpnrsl)\r\n==8208==    by 0x2119ED1C: tensorflow::shape_inference::InferenceContext::Run(std::function<tensorflow::Status (tensorflow::shape_inference::InferenceContext*)> const&) (in /home/nferguson/venv_cholesky_segfault/lib/python3.6/site-packages/tensorflow/libtensorflow_framework.so.1)\r\n==8208==    by 0x1BF7871F: tensorflow::ShapeRefiner::RunShapeFn(tensorflow::Node const*, tensorflow::OpRegistrationData const*, tensorflow::ExtendedInferenceContext*) (in /home/nferguson/venv_cholesky_segfault/lib/python3.6/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so)\r\n==8208==    by 0x1BF7A247: tensorflow::ShapeRefiner::AddNode(tensorflow::Node const*) (in /home/nferguson/venv_cholesky_segfault/lib/python3.6/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so)\r\n==8208==    by 0x19932F19: TF_FinishOperation (in /home/nferguson/venv_cholesky_segfault/lib/python3.6/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so)\r\n==8208==    by 0x179A3DB5: _wrap_TF_FinishOperation (in /home/nferguson/venv_cholesky_segfault/lib/python3.6/site-packages/tensorflow/python/_pywrap_tensorflow_internal.so)\r\n==8208==    by 0x4F858C: ??? (in /usr/bin/python3.6)\r\n==8208==    by 0x4F98C6: _PyEval_EvalFrameDefault (in /usr/bin/python3.6)\r\n==8208==    by 0x4F7A27: ??? (in /usr/bin/python3.6)\r\n==8208==    by 0x4F876C: ??? (in /usr/bin/python3.6)\r\n==8208==    by 0x4F98C6: _PyEval_EvalFrameDefault (in /usr/bin/python3.6)\r\n```\r\n\r\n**Describe the expected behavior**\r\n\r\nMy understanding is that both GCC 5 and Python 3.6 are both supported when building and running custom ops, so the code that uses the op should be able to run fine without segfaulting.\r\n\r\n**Code to reproduce the issue**\r\n\r\nMake a file called `zero_out.cc` with the following contents (as per the example from https://www.tensorflow.org/guide/extend/op):\r\n\r\n```\r\n#include \"tensorflow/core/framework/op.h\"\r\n#include \"tensorflow/core/framework/shape_inference.h\"\r\n#include \"tensorflow/core/framework/op_kernel.h\"\r\n\r\n\r\nusing namespace tensorflow;\r\n\r\nREGISTER_OP(\"ZeroOut\")\r\n    .Input(\"to_zero: int32\")\r\n    .Output(\"zeroed: int32\")\r\n    .SetShapeFn([](::tensorflow::shape_inference::InferenceContext* c) {\r\n      c->set_output(0, c->input(0));\r\n      return Status::OK();\r\n    });\r\n\r\nclass ZeroOutOp : public OpKernel {\r\n public:\r\n  explicit ZeroOutOp(OpKernelConstruction* context) : OpKernel(context) {}\r\n\r\n  void Compute(OpKernelContext* context) override {\r\n    // Grab the input tensor\r\n    const Tensor& input_tensor = context->input(0);\r\n    auto input = input_tensor.flat<int32>();\r\n\r\n    // Create an output tensor\r\n    Tensor* output_tensor = NULL;\r\n    OP_REQUIRES_OK(context, context->allocate_output(0, input_tensor.shape(),\r\n                                                     &output_tensor));\r\n    auto output_flat = output_tensor->flat<int32>();\r\n\r\n    // Set all but the first element of the output tensor to 0.\r\n    const int N = input.size();\r\n    for (int i = 1; i < N; i++) {\r\n      output_flat(i) = 0;\r\n    }\r\n\r\n    // Preserve the first input value if possible.\r\n    if (N > 0) output_flat(0) = input(0);\r\n  }\r\n};\r\n\r\nREGISTER_KERNEL_BUILDER(Name(\"ZeroOut\").Device(DEVICE_CPU), ZeroOutOp);\r\n```\r\n\r\nMake another file called `test_zero_out.py` with the following contents: \r\n\r\n```\r\nimport os\r\nfrom tempfile import NamedTemporaryFile\r\n\r\nimport tensorflow as tf\r\nfrom numpy.testing import assert_array_equal\r\nimport numpy as np\r\n\r\nBUILD_COMMAND = 'g++-5 -std=c++11 -shared zero_out.cc -o {0} -fPIC {1} {2} -O2'\r\n\r\n\r\ndef test_zero_out():\r\n\r\n    with NamedTemporaryFile() as temp_file:\r\n\r\n        compile_args = ' '.join(tf.sysconfig.get_compile_flags())\r\n        link_args = ' '.join(tf.sysconfig.get_link_flags()).replace(\r\n            '-l:libtensorflow_framework.1.dylib', '-ltensorflow_framework.1')\r\n\r\n        os.system(BUILD_COMMAND.format(temp_file.name, compile_args, link_args))\r\n\r\n        zero_out_module = tf.load_op_library(temp_file.name)\r\n        with tf.Graph().as_default():\r\n            with tf.Session().as_default():\r\n                result = zero_out_module.zero_out([5, 4, 3, 2, 1])\r\n                assert_array_equal(result.eval(), np.asarray([5, 0, 0, 0, 0]))\r\n                print('SUCCESS')\r\n\r\n\r\ntest_zero_out()\r\n```\r\n\r\nEnsure that GCC 5 is installed, along with Python 3.6 (on Ubuntu 18.04), and execute the following:\r\n\r\n```\r\npython3 test_zero_out.py\r\n```\r\n\r\nThis compiles and runs the custom op. This should cause a segfault.\r\n\r\nEnsure that Python 3.7 is installed and try the same thing:\r\n\r\n```\r\npython3.7 test_zero_out.py\r\n```\r\n\r\nThis should run successfully and print \"SUCCESS\".\r\n\r\nNow create an equivalent test file for GCC 4.8 called `test_zero_out-4.8.py`\r\n\r\n```\r\nimport os\r\nfrom tempfile import NamedTemporaryFile\r\n\r\nimport tensorflow as tf\r\nfrom numpy.testing import assert_array_equal\r\nimport numpy as np\r\n\r\nBUILD_COMMAND = 'g++-4.8 -std=c++11 -shared zero_out.cc -o {0} -fPIC {1} {2} -O2'\r\n\r\n\r\ndef test_zero_out():\r\n\r\n    with NamedTemporaryFile() as temp_file:\r\n\r\n        compile_args = ' '.join(tf.sysconfig.get_compile_flags())\r\n        link_args = ' '.join(tf.sysconfig.get_link_flags()).replace(\r\n            '-l:libtensorflow_framework.1.dylib', '-ltensorflow_framework.1')\r\n\r\n        os.system(BUILD_COMMAND.format(temp_file.name, compile_args, link_args))\r\n\r\n        zero_out_module = tf.load_op_library(temp_file.name)\r\n        with tf.Graph().as_default():\r\n            with tf.Session().as_default():\r\n                result = zero_out_module.zero_out([5, 4, 3, 2, 1])\r\n                assert_array_equal(result.eval(), np.asarray([5, 0, 0, 0, 0]))\r\n                print('SUCCESS')\r\n\r\n\r\ntest_zero_out()\r\n\r\n```\r\n\r\nEnsure GCC 4.8 is installed and run:\r\n\r\n```\r\npython3 test_zero_out-4.8.py\r\n```\r\n\r\nThis will compile and run the same code with GCC 4.8. This should succeed and print \"SUCCESS\"."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30954", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30954/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30954/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30954/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30954", "id": 471637900, "node_id": "MDU6SXNzdWU0NzE2Mzc5MDA=", "number": 30954, "title": "Potential bugs found with static analysis", "user": {"login": "alexeyr", "id": 24733, "node_id": "MDQ6VXNlcjI0NzMz", "avatar_url": "https://avatars2.githubusercontent.com/u/24733?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexeyr", "html_url": "https://github.com/alexeyr", "followers_url": "https://api.github.com/users/alexeyr/followers", "following_url": "https://api.github.com/users/alexeyr/following{/other_user}", "gists_url": "https://api.github.com/users/alexeyr/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexeyr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexeyr/subscriptions", "organizations_url": "https://api.github.com/users/alexeyr/orgs", "repos_url": "https://api.github.com/users/alexeyr/repos", "events_url": "https://api.github.com/users/alexeyr/events{/privacy}", "received_events_url": "https://api.github.com/users/alexeyr/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-07-23T11:20:49Z", "updated_at": "2019-07-26T12:30:57Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: 2.7.12\r\n- Bazel version (if compiling from source): 0.26.1\r\n- GCC/Compiler version (if compiling from source): c++ (Ubuntu 5.4.0-6ubuntu1~16.04.9) 5.4.0 20160609\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\n**Issue 1:**\r\nhttps://github.com/tensorflow/tensorflow/blob/1ee51a3b868a3ccd5f80724f6b9389fd0a9aed07/tensorflow/compiler/tf2xla/functionalize_cond.cc#L445-L447\r\n`dst_copy != nullptr` is checked immediately after `if (dst_copy == nullptr) continue;`. Is one of comparisons supposed to be different, or can the `TF_RET_CHECK` be removed?\r\n\r\n**Issue 2:**\r\nhttps://github.com/tensorflow/tensorflow/blob/9d67841e6c1f852516abf6ff44490b5d5a8331af/tensorflow/contrib/ignite/kernels/dataset/ignite_dataset_iterator.cc#L126-L128\r\nThis code is unreachable, because both branches of `if` above return. Either it should be deleted or some part of `if` modified.\r\n\r\n**Issue 3:**\r\nhttps://github.com/tensorflow/tensorflow/blob/514004a2347058214d1e7b13b9769a2abdd06830/tensorflow/core/profiler/rpc/client/capture_profile.cc#L218-L220\r\nThe condition is always true. My guess is that `==` is intended instead of `!=`.\r\n\r\n**Issue 4:**\r\nhttps://github.com/tensorflow/tensorflow/blob/9590c4c32dd4346ea5c35673336f5912c6072bf2/tensorflow/core/profiler/internal/tfprof_tensor.h#L55\r\nShould this be `void` since nothing gets returned in any branch?\r\n\r\n**Issue 5:**\r\nhttps://github.com/tensorflow/tensorflow/blob/9380a41290e8fb8b9ea85f614472deab56dbc481/tensorflow/stream_executor/stream_executor_pimpl.cc#L112-L125\r\n`ScopedTracer` doesn't obey the rule of 3, but this `SCOPED_TRACE` macro expands to calling its copy constructor. This should be safe in practice because of copy elision, I believe, but undesirable to rely on. Unfortunately, changing to `auto tracer{MakeScopedTracer(this, &LOC##Begin, &LOC##Complete, ##__VA_ARGS__)};` will infer `initializer_list<...>` (is that right?).\r\n\r\n**Describe the expected behavior**\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30953", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30953/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30953/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30953/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30953", "id": 471634735, "node_id": "MDU6SXNzdWU0NzE2MzQ3MzU=", "number": 30953, "title": "TF-Lite micro low performance", "user": {"login": "dimtass", "id": 16341076, "node_id": "MDQ6VXNlcjE2MzQxMDc2", "avatar_url": "https://avatars1.githubusercontent.com/u/16341076?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dimtass", "html_url": "https://github.com/dimtass", "followers_url": "https://api.github.com/users/dimtass/followers", "following_url": "https://api.github.com/users/dimtass/following{/other_user}", "gists_url": "https://api.github.com/users/dimtass/gists{/gist_id}", "starred_url": "https://api.github.com/users/dimtass/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dimtass/subscriptions", "organizations_url": "https://api.github.com/users/dimtass/orgs", "repos_url": "https://api.github.com/users/dimtass/repos", "events_url": "https://api.github.com/users/dimtass/events{/privacy}", "received_events_url": "https://api.github.com/users/dimtass/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2019-07-23T11:13:44Z", "updated_at": "2020-03-14T10:09:42Z", "closed_at": null, "author_association": "NONE", "body": "This issue regards the tflite micro.\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04.2\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: STM32F746NG\r\n- TensorFlow installed from (source or binary): github\r\n- TensorFlow version (use command below): 1.14.0-718503b075d\r\n- Python version:\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nI've ported a model from Keras to TF and trained it. Then I've converted the model to tflite.\r\n\r\nOne issue is that the tf.lite.Optimize.OPTIMIZE_FOR_SIZE doesn't work as the tflite-micro complains that one of the layers is not compatible with int8 types. Anyway, I've converted the model without quantization and also used CMSIS-NN. The performance is extremely slow. It's 40x times slower on the same CPU compared to X-CUBE-AI API. \r\n\r\n**Describe the expected behavior**\r\nI expected the inference to be much faster especially for the depthwise_conv.cc kernel which supports the cmsis-nn. It seems that using cmsis-nn, makes an insignificant difference.\r\n\r\n**Code to reproduce the issue**\r\nI have a repo here that you can use for validation:\r\nhttps://bitbucket.org/dimtass/stm32f746-tflite-micro-mnist\r\n\r\n**Other info / logs**\r\nAlso, I've written a blog post with the issue here:\r\nhttps://www.stupid-projects.com/machine-learning-on-embedded-part-3/\r\n\r\n**Edit**: I've found out that I haven't enabled the FPU during the g++ compilation. With the correct architecture flags (-mthumb -mcpu=cortex-m7 -mfpu=fpv5-sp-d16 -mfloat-abi=hard), the performance is now 3x times faster, but it's still ~12x times slower than the x-cube-ai.\r\n\r\nThis is the execution time for each layer with comparison to x-cube-ai. Have in mind that the x-cube-ai merges some layers, so I'm using '-' and the sum in the next layer:\r\n\r\nLayer | tflite-micro /soft-float (msec) | tflite-micro /hard-float (msec) | x-cube-ai (msec)\r\n-|-|-|-\r\nDEPTHWISE_CONV_2D | 235 | 69 | -\r\nMAX_POOL_2D | 23 | 7 | 11.2\r\nCONV_2D | 2346 | 733 | -\r\nMAX_POOL_2D | 7 | 2 | 57.19\r\nCONV_2D | 348 | 108 | 8.69\r\nFULLY_CONNECTED | 5 | 3 | -\r\nFULLY_CONNECTED | 0 | 0 | -\r\nSOFTMAX | 0 | 0 | 2\r\nTOTAL TIME | 2964 | 922 | 78.2\r\n\r\nThat's almost 40 times slower on the same MCU. I'm not sure if I'm doing something so terribly wrong or this is the real performance of the API.\r\n\r\nI really hope for some input. Thanks!"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30948", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30948/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30948/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30948/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30948", "id": 471593932, "node_id": "MDU6SXNzdWU0NzE1OTM5MzI=", "number": 30948, "title": "The use of List and Tuple is vague in Tensorflow tf.data.Dataset.map.", "user": {"login": "kzhangair", "id": 5152826, "node_id": "MDQ6VXNlcjUxNTI4MjY=", "avatar_url": "https://avatars1.githubusercontent.com/u/5152826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kzhangair", "html_url": "https://github.com/kzhangair", "followers_url": "https://api.github.com/users/kzhangair/followers", "following_url": "https://api.github.com/users/kzhangair/following{/other_user}", "gists_url": "https://api.github.com/users/kzhangair/gists{/gist_id}", "starred_url": "https://api.github.com/users/kzhangair/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kzhangair/subscriptions", "organizations_url": "https://api.github.com/users/kzhangair/orgs", "repos_url": "https://api.github.com/users/kzhangair/repos", "events_url": "https://api.github.com/users/kzhangair/events{/privacy}", "received_events_url": "https://api.github.com/users/kzhangair/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-07-23T09:45:58Z", "updated_at": "2019-07-31T19:27:43Z", "closed_at": null, "author_association": "NONE", "body": "System information\r\nHave I written custom code (as opposed to using a stock example script provided in TensorFlow): no\r\nOS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\nTensorFlow installed from (source or binary): binary\r\nTensorFlow version (use command below): 1.14.0\r\nPython version: 3.7.3\r\nCUDA/cuDNN version: 10.1.168 / 7.6.0 but also failing in CPU-only mode\r\nGPU model and memory: GTX 1080 8G\r\nExact command to reproduce:\r\n```\r\nimport tensorflow as tf\r\ninput = tf.constant([10,20,30])\r\nds = tf.data.Dataset.from_tensor_slices(input)\r\n#Out: <DatasetV1Adapter shapes: (), types: tf.int32>\r\n\r\nds1=ds.map(lambda x: [x+1, x+2, x+3])\r\n#Out: <DatasetV1Adapter shapes: ((), (), ()), types: (tf.int32, tf.int32, tf.int32)>\r\nds2=ds.map(lambda x: [[x+1, x+2, x+3]])\r\n#Out: <DatasetV1Adapter shapes: ((3,),), types: (tf.int32,)>\r\nds3=ds.map(lambda x: ([x+1, x+2, x+3]))\r\n#Out: <DatasetV1Adapter shapes: ((), (), ()), types: (tf.int32, tf.int32, tf.int32)>\r\n```\r\nI think tensorflow treats tuple as nested structures of Tensor and list as tensor, as shown in [link](https://github.com/tensorflow/tensorflow/issues/20481). \r\nHowever, `tf.data.Dataset.map` doesn't behave like this in above code. I expect `ds1, d2, ds3` to be of shape `[3, ], [1, 3], ([3, ], )` respectively,  rather than `((), (), ()), ((3,),), ((), (), ())` since top-level list [] should be treated as tensor rather than nested structure.\r\nA [solution](https://stackoverflow.com/questions/57142462/something-strange-about-output-tensor-shape-of-tf-data-dataset-map/57146524?noredirect=1#comment100834064_57146524) is that I use `tf.convert_to_tensor` to force convert `[x+1, x+2, x+3]` to a single tensor but it's not elegant.\r\n\r\nps: It's confusing to output shape only with tuple, why not using list to represent shape and using tuple to represent nested structure of tensor jsut like \r\nthe output of Tensor.shape and Tensor.get_shape. e.g. `#Out: <DatasetV1Adapter shapes: ([],[],[]), types: (tf.int32, tf.int32, tf.int32)>`"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30947", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30947/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30947/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30947/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30947", "id": 471590530, "node_id": "MDU6SXNzdWU0NzE1OTA1MzA=", "number": 30947, "title": "[TF 2.0 nightly] tf.keras.estimator.model_to_estimator with strategy=tf.distribute.MirroredStrategy() -> Method requires being in cross-replica context, use get_replica_context().merge_call()", "user": {"login": "tarrade", "id": 12021701, "node_id": "MDQ6VXNlcjEyMDIxNzAx", "avatar_url": "https://avatars0.githubusercontent.com/u/12021701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tarrade", "html_url": "https://github.com/tarrade", "followers_url": "https://api.github.com/users/tarrade/followers", "following_url": "https://api.github.com/users/tarrade/following{/other_user}", "gists_url": "https://api.github.com/users/tarrade/gists{/gist_id}", "starred_url": "https://api.github.com/users/tarrade/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tarrade/subscriptions", "organizations_url": "https://api.github.com/users/tarrade/orgs", "repos_url": "https://api.github.com/users/tarrade/repos", "events_url": "https://api.github.com/users/tarrade/events{/privacy}", "received_events_url": "https://api.github.com/users/tarrade/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 1345373822, "node_id": "MDU6TGFiZWwxMzQ1MzczODIy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:ds-triaged", "name": "stat:ds-triaged", "color": "f2dea7", "default": false, "description": "Internal label for triaging"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 7, "created_at": "2019-07-23T09:39:19Z", "updated_at": "2020-02-20T01:02:37Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Mac OS 10.14.5\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary from pip\r\n- TensorFlow version (use command below): tf-nightly-2.0-preview==2.0.0.dev20190722\r\n- Python version: 3.6.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n>>> import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\r\nv1.12.1-6737-gb4e5625437 2.0.0-dev20190722\r\n\r\n**Describe the current behavior**\r\nwhen using `strategy = tf.distribute.MirroredStrategy()`, `tf.keras.estimator.model_to_estimator()`\r\n\r\nis crashing during training with \r\n`\r\nRuntimeError: Method requires being in cross-replica context, use get_replica_context().merge_call()`\r\n\r\n**Describe the expected behavior**\r\nShould work as before and without any error messages\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n```\r\nimport tensorflow as tf\r\nimport tensorflow_datasets as tfds\r\nfrom absl import logging\r\n\r\nlogging.set_verbosity(logging.INFO)\r\n# Define the estimator's input_fn\r\nSTEPS_PER_EPOCH = 5\r\nBATCH_SIZE = 64\r\nNUM_EPOCHS = 5\r\n\r\n\r\ndef input_fn():\r\n    datasets, ds_info = tfds.load(name='mnist', with_info=True, as_supervised=True)\r\n    mnist_train, mnist_test = datasets['train'], datasets['test']\r\n\r\n    BUFFER_SIZE = 10000\r\n    BATCH_SIZE = 64\r\n\r\n    def scale(image, label):\r\n        image = tf.cast(image, tf.float32)\r\n        image /= 255\r\n    \r\n        return image, label[..., tf.newaxis]\r\n\r\n    train_data = mnist_train.map(scale).shuffle(BUFFER_SIZE).batch(BATCH_SIZE)\r\n    return train_data.repeat()\r\n\r\n# Define train & eval specs\r\ntrain_spec = tf.estimator.TrainSpec(input_fn=input_fn,\r\n                                    max_steps=STEPS_PER_EPOCH * NUM_EPOCHS)\r\neval_spec = tf.estimator.EvalSpec(input_fn=input_fn,\r\n                                  steps=STEPS_PER_EPOCH)\r\n\r\ndef make_model():\r\n    return tf.keras.Sequential([\r\n        tf.keras.layers.Conv2D(32, 3, activation='relu',\r\n                               kernel_regularizer=tf.keras.regularizers.l2(0.02),\r\n                               input_shape=(28, 28, 1)),\r\n        tf.keras.layers.MaxPooling2D(),\r\n        tf.keras.layers.Flatten(),\r\n        tf.keras.layers.Dropout(0.1),\r\n        tf.keras.layers.Dense(64, activation='relu'),\r\n        tf.keras.layers.BatchNormalization(),\r\n        tf.keras.layers.Dense(10, activation='softmax')\r\n    ])\r\n\r\nmodel = make_model()\r\n\r\nmodel.compile(optimizer='adam',\r\n              loss='sparse_categorical_crossentropy',\r\n              metrics=['accuracy'])\r\n\r\n#####\r\n#strategy=None \r\n# crashing\r\nstrategy = tf.distribute.MirroredStrategy()\r\n\r\n# config tf.estimator to use a give strategy\r\ntraining_config = tf.estimator.RunConfig(train_distribute=strategy)\r\n#####\r\n\r\nestimator = tf.keras.estimator.model_to_estimator(\r\n    keras_model = model,\r\n    config=training_config\r\n)\r\n\r\ntf.estimator.train_and_evaluate(estimator, train_spec, eval_spec)\r\n```\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n```\r\nW0723 11:29:42.079696 4746859968 cross_device_ops.py:1207] There is non-GPU devices in `tf.distribute.Strategy`, not using nccl allreduce.\r\nI0723 11:29:42.087183 4746859968 run_config.py:554] Initializing RunConfig with distribution strategies.\r\nI0723 11:29:42.088423 4746859968 estimator_training.py:167] Not using Distribute Coordinator.\r\nW0723 11:29:42.097567 4746859968 estimator.py:1812] Using temporary folder as model directory: /var/folders/l7/00kxfwvs0vbbqxtrp3rpf3yh0000gn/T/tmp8lhzz88_\r\nI0723 11:29:42.098804 4746859968 keras.py:527] Using the Keras model provided.\r\nI0723 11:29:43.420326 4746859968 estimator.py:209] Using config: {'_model_dir': '/var/folders/l7/00kxfwvs0vbbqxtrp3rpf3yh0000gn/T/tmp8lhzz88_', '_tf_random_seed': None, '_save_summary_steps': 100, '_save_checkpoints_steps': None, '_save_checkpoints_secs': 600, '_session_config': allow_soft_placement: true\r\ngraph_options {\r\n  rewrite_options {\r\n    meta_optimizer_iterations: ONE\r\n  }\r\n}\r\n, '_keep_checkpoint_max': 5, '_keep_checkpoint_every_n_hours': 10000, '_log_step_count_steps': 100, '_train_distribute': <tensorflow.python.distribute.mirrored_strategy.MirroredStrategy object at 0xb3aa517b8>, '_device_fn': None, '_protocol': None, '_eval_distribute': None, '_experimental_distribute': None, '_experimental_max_worker_delay_secs': None, '_service': None, '_cluster_spec': <tensorflow.python.training.server_lib.ClusterSpec object at 0xb3aa51a90>, '_task_type': 'worker', '_task_id': 0, '_global_id_in_cluster': 0, '_master': '', '_evaluation_master': '', '_is_chief': True, '_num_ps_replicas': 0, '_num_worker_replicas': 1, '_distribute_coordinator_mode': None}\r\nI0723 11:29:43.421994 4746859968 estimator_training.py:186] Not using Distribute Coordinator.\r\nI0723 11:29:43.422926 4746859968 training.py:612] Running training and evaluation locally (non-distributed).\r\nI0723 11:29:43.423843 4746859968 training.py:700] Start train and evaluate loop. The evaluate will happen after every checkpoint. Checkpoint frequency is determined based on RunConfig arguments: save_checkpoints_steps None or save_checkpoints_secs 600.\r\nI0723 11:29:43.429722 4746859968 dataset_builder.py:184] Overwrite dataset info from restored data version.\r\nI0723 11:29:43.434206 4746859968 dataset_info.py:380] Field info.location from disk and from code do not match. Keeping the one from code.\r\nI0723 11:29:43.435199 4746859968 dataset_builder.py:253] Reusing dataset mnist (/Users/tarrade/tensorflow_datasets/mnist/1.0.0)\r\nI0723 11:29:43.435896 4746859968 dataset_builder.py:399] Constructing tf.data.Dataset for split None, from /Users/tarrade/tensorflow_datasets/mnist/1.0.0\r\nW0723 11:29:43.586170 4746859968 dataset_builder.py:439] Warning: Setting shuffle_files=True because split=TRAIN and shuffle_files=None. This behavior will be deprecated on 2019-08-06, at which point shuffle_files=False will be the default for all splits.\r\nI0723 11:29:43.751439 4746859968 cross_device_ops.py:425] Reduce to /replica:0/task:0/device:CPU:0 then broadcast to ('/replica:0/task:0/device:CPU:0',).\r\nI0723 11:29:43.764024 123145625903104 estimator.py:1145] Calling model_fn.\r\nI0723 11:29:43.943940 4746859968 cross_device_ops.py:425] Reduce to /replica:0/task:0/device:CPU:0 then broadcast to ('/replica:0/task:0/device:CPU:0',).\r\nI0723 11:29:43.948454 4746859968 cross_device_ops.py:425] Reduce to /replica:0/task:0/device:CPU:0 then broadcast to ('/replica:0/task:0/device:CPU:0',).\r\nI0723 11:29:43.952039 4746859968 cross_device_ops.py:425] Reduce to /replica:0/task:0/device:CPU:0 then broadcast to ('/replica:0/task:0/device:CPU:0',).\r\nI0723 11:29:43.954842 4746859968 cross_device_ops.py:425] Reduce to /replica:0/task:0/device:CPU:0 then broadcast to ('/replica:0/task:0/device:CPU:0',).\r\nI0723 11:29:44.504832 123145625903104 coordinator.py:219] Error reported to Coordinator: Method requires being in cross-replica context, use get_replica_context().merge_call()\r\nTraceback (most recent call last):\r\n  File \"/Users/tarrade/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/training/coordinator.py\", line 297, in stop_on_exception\r\n    yield\r\n  File \"/Users/tarrade/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/distribute/mirrored_strategy.py\", line 865, in run\r\n    self.main_result = self.main_fn(*self.main_args, **self.main_kwargs)\r\n  File \"/Users/tarrade/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/estimator.py\", line 1146, in _call_model_fn\r\n    model_fn_results = self._model_fn(features=features, **kwargs)\r\n  File \"/Users/tarrade/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/keras.py\", line 326, in model_fn\r\n    saver = saver_lib.Saver(var_list=var_list, sharded=True)\r\n  File \"/Users/tarrade/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/training/saver.py\", line 828, in __init__\r\n    self.build()\r\n  File \"/Users/tarrade/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/training/saver.py\", line 840, in build\r\n    self._build(self._filename, build_save=True, build_restore=True)\r\n  File \"/Users/tarrade/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/training/saver.py\", line 878, in _build\r\n    build_restore=build_restore)\r\n  File \"/Users/tarrade/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/training/saver.py\", line 497, in _build_internal\r\n    per_device = self._GroupByDevices(saveables)\r\n  File \"/Users/tarrade/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/training/saver.py\", line 404, in _GroupByDevices\r\n    pydev.canonical_name(spec.tensor.device) for spec in saveable.specs)\r\n  File \"/Users/tarrade/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/training/saver.py\", line 404, in <genexpr>\r\n    pydev.canonical_name(spec.tensor.device) for spec in saveable.specs)\r\n  File \"/Users/tarrade/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/training/saving/saveable_object.py\", line 52, in tensor\r\n    return self._tensor() if callable(self._tensor) else self._tensor\r\n  File \"/Users/tarrade/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/distribute/values.py\", line 1136, in tensor\r\n    return strategy.extended.read_var(sync_on_read_variable)\r\n  File \"/Users/tarrade/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/distribute/mirrored_strategy.py\", line 722, in read_var\r\n    return replica_local_var._get_cross_replica()  # pylint: disable=protected-access\r\n  File \"/Users/tarrade/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/distribute/values.py\", line 1222, in _get_cross_replica\r\n    self, axis=None)\r\n  File \"/Users/tarrade/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/distribute/distribute_lib.py\", line 794, in reduce\r\n    _require_cross_replica_or_default_context_extended(self._extended)\r\n  File \"/Users/tarrade/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/distribute/distribute_lib.py\", line 206, in _require_cross_replica_or_default_context_extended\r\n    raise RuntimeError(\"Method requires being in cross-replica context, use \"\r\nRuntimeError: Method requires being in cross-replica context, use get_replica_context().merge_call()\r\n\r\n---------------------------------------------------------------------------\r\nRuntimeError                              Traceback (most recent call last)\r\n<ipython-input-3-f33ca3103e62> in <module>\r\n     64 )\r\n     65 \r\n---> 66 tf.estimator.train_and_evaluate(estimator, train_spec, eval_spec)\r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/training.py in train_and_evaluate(estimator, train_spec, eval_spec)\r\n    471         '(with task id 0).  Given task id {}'.format(config.task_id))\r\n    472 \r\n--> 473   return executor.run()\r\n    474 \r\n    475 \r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/training.py in run(self)\r\n    611         config.task_type != run_config_lib.TaskType.EVALUATOR):\r\n    612       logging.info('Running training and evaluation locally (non-distributed).')\r\n--> 613       return self.run_local()\r\n    614 \r\n    615     # Distributed case.\r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/training.py in run_local(self)\r\n    712         max_steps=self._train_spec.max_steps,\r\n    713         hooks=train_hooks,\r\n--> 714         saving_listeners=saving_listeners)\r\n    715 \r\n    716     eval_result = listener_for_eval.eval_result or _EvalResult(\r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/estimator.py in train(self, input_fn, hooks, steps, max_steps, saving_listeners)\r\n    365 \r\n    366       saving_listeners = _check_listeners_type(saving_listeners)\r\n--> 367       loss = self._train_model(input_fn, hooks, saving_listeners)\r\n    368       logging.info('Loss for final step: %s.', loss)\r\n    369       return self\r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/estimator.py in _train_model(self, input_fn, hooks, saving_listeners)\r\n   1154   def _train_model(self, input_fn, hooks, saving_listeners):\r\n   1155     if self._train_distribution:\r\n-> 1156       return self._train_model_distributed(input_fn, hooks, saving_listeners)\r\n   1157     else:\r\n   1158       return self._train_model_default(input_fn, hooks, saving_listeners)\r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/estimator.py in _train_model_distributed(self, input_fn, hooks, saving_listeners)\r\n   1217       self._config._train_distribute.configure(self._config.session_config)\r\n   1218       return self._actual_train_model_distributed(\r\n-> 1219           self._config._train_distribute, input_fn, hooks, saving_listeners)\r\n   1220     # pylint: enable=protected-access\r\n   1221 \r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/estimator.py in _actual_train_model_distributed(self, strategy, input_fn, hooks, saving_listeners)\r\n   1297                     labels,  # although this will be None it seems\r\n   1298                     ModeKeys.TRAIN,\r\n-> 1299                     self.config))\r\n   1300           loss = strategy.reduce(\r\n   1301               _get_loss_reduce_op_for_reporting(),\r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/distribute/distribute_lib.py in call_for_each_replica(self, fn, args, kwargs)\r\n   1769       kwargs = {}\r\n   1770     with self._container_strategy().scope():\r\n-> 1771       return self._call_for_each_replica(fn, args, kwargs)\r\n   1772 \r\n   1773   def _call_for_each_replica(self, fn, args, kwargs):\r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/distribute/mirrored_strategy.py in _call_for_each_replica(self, fn, args, kwargs)\r\n    645                           self._container_strategy().__class__.__name__, 5)\r\n    646     return _call_for_each_replica(self._container_strategy(), self._device_map,\r\n--> 647                                   fn, args, kwargs)\r\n    648 \r\n    649   def _configure(self,\r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/distribute/mirrored_strategy.py in _call_for_each_replica(distribution, device_map, fn, args, kwargs)\r\n    194     for t in threads:\r\n    195       t.should_run.set()\r\n--> 196     coord.join(threads)\r\n    197 \r\n    198   return values.regroup(device_map, tuple(t.main_result for t in threads))\r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/training/coordinator.py in join(self, threads, stop_grace_period_secs, ignore_live_threads)\r\n    387       self._registered_threads = set()\r\n    388       if self._exc_info_to_raise:\r\n--> 389         six.reraise(*self._exc_info_to_raise)\r\n    390       elif stragglers:\r\n    391         if ignore_live_threads:\r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/six.py in reraise(tp, value, tb)\r\n    691             if value.__traceback__ is not tb:\r\n    692                 raise value.with_traceback(tb)\r\n--> 693             raise value\r\n    694         finally:\r\n    695             value = None\r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/training/coordinator.py in stop_on_exception(self)\r\n    295     \"\"\"\r\n    296     try:\r\n--> 297       yield\r\n    298     except:  # pylint: disable=bare-except\r\n    299       self.request_stop(ex=sys.exc_info())\r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/distribute/mirrored_strategy.py in run(self)\r\n    863               self._var_scope, reuse=self.replica_id > 0), \\\r\n    864           variable_scope.variable_creator_scope(self.variable_creator_fn):\r\n--> 865         self.main_result = self.main_fn(*self.main_args, **self.main_kwargs)\r\n    866         self.done = True\r\n    867     finally:\r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/estimator.py in _call_model_fn(self, features, labels, mode, config)\r\n   1144 \r\n   1145     logging.info('Calling model_fn.')\r\n-> 1146     model_fn_results = self._model_fn(features=features, **kwargs)\r\n   1147     logging.info('Done calling model_fn.')\r\n   1148 \r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_estimator/python/estimator/keras.py in model_fn(features, labels, mode)\r\n    324       object_graph = graph_view.ObjectGraphView(model)\r\n    325       var_list = object_graph.frozen_saveable_objects()\r\n--> 326       saver = saver_lib.Saver(var_list=var_list, sharded=True)\r\n    327       saver._object_restore_saver = trackable_util.frozen_saver(model)\r\n    328       scaffold = monitored_session.Scaffold(saver=saver)\r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/training/saver.py in __init__(self, var_list, reshape, sharded, max_to_keep, keep_checkpoint_every_n_hours, name, restore_sequentially, saver_def, builder, defer_build, allow_empty, write_version, pad_step_number, save_relative_paths, filename)\r\n    826           time.time() + self._keep_checkpoint_every_n_hours * 3600)\r\n    827     elif not defer_build:\r\n--> 828       self.build()\r\n    829     if self.saver_def:\r\n    830       self._check_saver_def()\r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/training/saver.py in build(self)\r\n    838     if context.executing_eagerly():\r\n    839       raise RuntimeError(\"Use save/restore instead of build in eager mode.\")\r\n--> 840     self._build(self._filename, build_save=True, build_restore=True)\r\n    841 \r\n    842   def _build_eager(self, checkpoint_path, build_save, build_restore):\r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/training/saver.py in _build(self, checkpoint_path, build_save, build_restore)\r\n    876           filename=checkpoint_path,\r\n    877           build_save=build_save,\r\n--> 878           build_restore=build_restore)\r\n    879     elif self.saver_def and self._name:\r\n    880       # Since self._name is used as a name_scope by builder(), we are\r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/training/saver.py in _build_internal(self, names_to_saveables, reshape, sharded, max_to_keep, keep_checkpoint_every_n_hours, name, restore_sequentially, filename, build_save, build_restore)\r\n    495       # Add the save ops.\r\n    496       if sharded:\r\n--> 497         per_device = self._GroupByDevices(saveables)\r\n    498         if build_save:\r\n    499           save_tensor = self._AddShardedSaveOps(filename_tensor, per_device)\r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/training/saver.py in _GroupByDevices(self, saveables)\r\n    402     for saveable in saveables:\r\n    403       canonical_device = set(\r\n--> 404           pydev.canonical_name(spec.tensor.device) for spec in saveable.specs)\r\n    405       if len(canonical_device) != 1:\r\n    406         raise ValueError(\"All tensors of a saveable object must be \"\r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/training/saver.py in <genexpr>(.0)\r\n    402     for saveable in saveables:\r\n    403       canonical_device = set(\r\n--> 404           pydev.canonical_name(spec.tensor.device) for spec in saveable.specs)\r\n    405       if len(canonical_device) != 1:\r\n    406         raise ValueError(\"All tensors of a saveable object must be \"\r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/training/saving/saveable_object.py in tensor(self)\r\n     50   @property\r\n     51   def tensor(self):\r\n---> 52     return self._tensor() if callable(self._tensor) else self._tensor\r\n     53 \r\n     54 \r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/distribute/values.py in tensor()\r\n   1134     def tensor():\r\n   1135       strategy = sync_on_read_variable._distribute_strategy  # pylint: disable=protected-access\r\n-> 1136       return strategy.extended.read_var(sync_on_read_variable)\r\n   1137 \r\n   1138     spec = saver.BaseSaverBuilder.SaveSpec(\r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/distribute/mirrored_strategy.py in read_var(self, replica_local_var)\r\n    720     \"\"\"Read the aggregate value of a replica-local variable.\"\"\"\r\n    721     if isinstance(replica_local_var, values.SyncOnReadVariable):\r\n--> 722       return replica_local_var._get_cross_replica()  # pylint: disable=protected-access\r\n    723     assert isinstance(replica_local_var, values.Mirrored)\r\n    724     return array_ops.identity(replica_local_var.get())\r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/distribute/values.py in _get_cross_replica(self)\r\n   1220       return self._distribute_strategy.reduce(\r\n   1221           reduce_util.ReduceOp.from_variable_aggregation(self.aggregation),\r\n-> 1222           self, axis=None)\r\n   1223 \r\n   1224   def _as_graph_element(self):\r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/distribute/distribute_lib.py in reduce(self, reduce_op, value, axis)\r\n    792     \"\"\"\r\n    793     # TODO(josh11b): support `value` being a nest.\r\n--> 794     _require_cross_replica_or_default_context_extended(self._extended)\r\n    795     if isinstance(reduce_op, six.string_types):\r\n    796       reduce_op = reduce_util.ReduceOp(reduce_op.upper())\r\n\r\n~/anaconda-release/conda-env/env_gcp_dl_2_0_nightly/lib/python3.6/site-packages/tensorflow_core/python/distribute/distribute_lib.py in _require_cross_replica_or_default_context_extended(extended)\r\n    204     _wrong_strategy_scope(strategy, context)\r\n    205   assert cross_replica is None\r\n--> 206   raise RuntimeError(\"Method requires being in cross-replica context, use \"\r\n    207                      \"get_replica_context().merge_call()\")\r\n    208 \r\n\r\nRuntimeError: Method requires being in cross-replica context, use get_replica_context().merge_call()\r\n\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30943", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30943/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30943/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30943/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30943", "id": 471481575, "node_id": "MDU6SXNzdWU0NzE0ODE1NzU=", "number": 30943, "title": "TensorFlow C API Nightly URLs", "user": {"login": "VivekPanyam", "id": 1181904, "node_id": "MDQ6VXNlcjExODE5MDQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/1181904?v=4", "gravatar_id": "", "url": "https://api.github.com/users/VivekPanyam", "html_url": "https://github.com/VivekPanyam", "followers_url": "https://api.github.com/users/VivekPanyam/followers", "following_url": "https://api.github.com/users/VivekPanyam/following{/other_user}", "gists_url": "https://api.github.com/users/VivekPanyam/gists{/gist_id}", "starred_url": "https://api.github.com/users/VivekPanyam/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/VivekPanyam/subscriptions", "organizations_url": "https://api.github.com/users/VivekPanyam/orgs", "repos_url": "https://api.github.com/users/VivekPanyam/repos", "events_url": "https://api.github.com/users/VivekPanyam/events{/privacy}", "received_events_url": "https://api.github.com/users/VivekPanyam/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-07-23T04:31:00Z", "updated_at": "2019-07-24T08:49:29Z", "closed_at": null, "author_association": "NONE", "body": "[This README](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/c/README.md) mentions the following URLs for nightly builds of libtensorflow:\r\n- https://storage.googleapis.com/tensorflow-nightly/github/tensorflow/lib_package/libtensorflow-cpu-linux-x86_64.tar.gz\r\n- https://storage.googleapis.com/tensorflow-nightly/github/tensorflow/lib_package/libtensorflow-gpu-linux-x86_64.tar.gz\r\n- https://storage.googleapis.com/tensorflow-nightly/github/tensorflow/lib_package/libtensorflow-cpu-darwin-x86_64.tar.gz\r\n\r\nAre there any versions of these including dates? Maybe something matching the naming convention used by the nightly pip packages (e.g. `libtensorflow-cpu-linux-x86_64-1.15.0.dev20190722.tar.gz`)?\r\n\r\nI looked through some issues and RFCs  (including https://github.com/tensorflow/tensorflow/issues/21524 and https://github.com/tensorflow/community/blob/master/rfcs/20181026-tf-nightly.md), but didn't see anything about versioned nightly builds.\r\n\r\nThank you!"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30929", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30929/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30929/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30929/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30929", "id": 471136089, "node_id": "MDU6SXNzdWU0NzExMzYwODk=", "number": 30929, "title": "tf.data.experimental.prefetch_to_device(\"/gpu:0\") moves tensors back to CPU", "user": {"login": "OutSorcerer", "id": 5833256, "node_id": "MDQ6VXNlcjU4MzMyNTY=", "avatar_url": "https://avatars1.githubusercontent.com/u/5833256?v=4", "gravatar_id": "", "url": "https://api.github.com/users/OutSorcerer", "html_url": "https://github.com/OutSorcerer", "followers_url": "https://api.github.com/users/OutSorcerer/followers", "following_url": "https://api.github.com/users/OutSorcerer/following{/other_user}", "gists_url": "https://api.github.com/users/OutSorcerer/gists{/gist_id}", "starred_url": "https://api.github.com/users/OutSorcerer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/OutSorcerer/subscriptions", "organizations_url": "https://api.github.com/users/OutSorcerer/orgs", "repos_url": "https://api.github.com/users/OutSorcerer/repos", "events_url": "https://api.github.com/users/OutSorcerer/events{/privacy}", "received_events_url": "https://api.github.com/users/OutSorcerer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, {"login": "gadagashwini", "id": 48476109, "node_id": "MDQ6VXNlcjQ4NDc2MTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/48476109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadagashwini", "html_url": "https://github.com/gadagashwini", "followers_url": "https://api.github.com/users/gadagashwini/followers", "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}", "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions", "organizations_url": "https://api.github.com/users/gadagashwini/orgs", "repos_url": "https://api.github.com/users/gadagashwini/repos", "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}", "received_events_url": "https://api.github.com/users/gadagashwini/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-07-22T14:42:27Z", "updated_at": "2020-03-15T19:12:45Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04.2 LTS\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: none\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v2.0.0-beta0-16-g1d91213fe7 2.0.0-beta1\r\n- Python version: Python 3.6.8\r\n- CUDA/cuDNN version: CUDA Version: 10.0 / cuDNN 7.6.0\r\n- GPU model and memory: Tesla T4  15079MiB\r\n\r\n**Describe the current behavior**\r\n`tf.data.experimental.prefetch_to_device(\"/gpu:0\")` moves tensors back to CPU.\r\n\r\n**Describe the expected behavior**\r\n`tf.data.experimental.prefetch_to_device(\"/gpu:0\")` should leave tensors on GPU.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\ndata = np.array([[1, 2],[3, 4]])\r\n\r\ndataset = tf.data.Dataset.from_tensor_slices(data)\r\ndataset = dataset.apply(tf.data.experimental.prefetch_to_device(\"/gpu:0\"))\r\n\r\n#dataset = dataset.apply(tf.data.experimental.copy_to_device(\"/gpu:0\"))\r\n#\r\n#Uncommenting the line above line will print:\r\n#\r\n#Tensor [1 2] is on device /job:localhost/replica:0/task:0/device:GPU:0\r\n#Tensor [3 4] is on device /job:localhost/replica:0/task:0/device:GPU:0\r\n\r\nfor datum in dataset:\r\n  print(f'Tensor {datum} is on device {datum.device}')\r\n  #Prints\r\n  #Tensor [1 2] is on device /job:localhost/replica:0/task:0/device:CPU:0\r\n  #Tensor [3 4] is on device /job:localhost/replica:0/task:0/device:CPU:0\r\n```\r\n\r\nIt is convinient to reproduce it as [a notebook in Google Colaboratory](https://colab.research.google.com/drive/1LpOX04L6l8SW3krQvzFdQVvXE-LK3ehH).\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30918", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30918/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30918/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30918/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30918", "id": 470927721, "node_id": "MDU6SXNzdWU0NzA5Mjc3MjE=", "number": 30918, "title": "Keras fails to initiate training with custom BERT layer.", "user": {"login": "jordanparker6", "id": 29700471, "node_id": "MDQ6VXNlcjI5NzAwNDcx", "avatar_url": "https://avatars0.githubusercontent.com/u/29700471?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jordanparker6", "html_url": "https://github.com/jordanparker6", "followers_url": "https://api.github.com/users/jordanparker6/followers", "following_url": "https://api.github.com/users/jordanparker6/following{/other_user}", "gists_url": "https://api.github.com/users/jordanparker6/gists{/gist_id}", "starred_url": "https://api.github.com/users/jordanparker6/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jordanparker6/subscriptions", "organizations_url": "https://api.github.com/users/jordanparker6/orgs", "repos_url": "https://api.github.com/users/jordanparker6/repos", "events_url": "https://api.github.com/users/jordanparker6/events{/privacy}", "received_events_url": "https://api.github.com/users/jordanparker6/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-07-22T07:03:36Z", "updated_at": "2019-09-25T08:22:58Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I manipulated custom code in attempt to build a Keras layer for BERT. Following this example: https://towardsdatascience.com/bert-in-keras-with-tensorflow-hub-76bcbc9417b \r\n- Windows 10:\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version: 1.14\r\n- Python version: 3.7\r\n- CUDA/cuDNN version: CUDA 10\r\n- GPU model and memory:  NVIDIA GTX1080ti\r\n\r\n**Describe the current behavior**\r\nThe training data is pre-processed and loaded into memory. The model is compiled and the correct model output is produced with model.summary(). See logs bellow...\r\n\r\nOn model.fit(), nothing happens... The GPU is at 3% utilization and one CPU core is at 100%.\r\n\r\n**Describe the expected behavior**\r\nI was expecting the keras training logging to be printed post model.fit(). It doesn't appear to be training at all.\r\n\r\n**Code to reproduce the issue**\r\n\r\n**Custom Code:**\r\n```\r\nimport tensorflow as tf\r\nfrom sklearn.preprocessing import OneHotEncoder\r\nimport matplotlib.pyplot as plt\r\nimport numpy as np\r\nfrom tensorflow.keras import backend as K\r\nimport sys\r\n\r\nfrom BertLayer import BertLayer\r\nfrom preprocessing import MyDocs\r\n\r\nsess = tf.Session()\r\n\r\ndef build_model(bert_path, max_seq_length):\r\n    in_id = tf.keras.layers.Input(shape=(max_seq_length,), name=\"input_ids\")\r\n    in_mask = tf.keras.layers.Input(shape=(max_seq_length,), name=\"input_masks\")\r\n    in_segment = tf.keras.layers.Input(shape=(max_seq_length,), name=\"segment_ids\")\r\n    bert_inputs = [in_id, in_mask, in_segment]\r\n\r\n    bert_output = BertLayer(n_fine_tune_layers=3, bert_path=bert_path, pooling=\"first\")(bert_inputs)\r\n    dense = tf.keras.layers.Dense(256, activation=\"relu\")(bert_output)\r\n    pred = tf.keras.layers.Dense(5, activation=\"sigmoid\")(dense)  # change this to build classifier\r\n\r\n    model = tf.keras.models.Model(inputs=bert_inputs, outputs=pred)\r\n    model.compile(loss=\"binary_crossentropy\", optimizer=\"adam\",  metrics=['binary_accuracy', 'categorical_accuracy'])\r\n    model.summary()\r\n\r\n    return model\r\n\r\n\r\ndef initialize_vars(sess):\r\n    sess.run(tf.compat.v1.local_variables_initializer())\r\n    sess.run(tf.compat.v1.global_variables_initializer())\r\n    sess.run(tf.compat.v1.tables_initializer())\r\n    K.set_session(sess)\r\n\r\ndef main():\r\n    # Params for bert model and tokenization\r\n    bert_path = \"https://tfhub.dev/google/bert_uncased_L-12_H-768_A-12/1\"\r\n    max_seq_length = 256\r\n\r\n    corpus = MyDocs(\"datasets/bbc/raw\", bert_path, max_seq_length)\r\n\r\n    ids = []\r\n    masks = []\r\n    segment_ids = []\r\n    for id, mask, segment, label in corpus:\r\n        ids.append(id)\r\n        masks.append(masks)\r\n        segment_ids.append(segment)\r\n    X = [ids, masks, segment_ids]\r\n\r\n    labels = corpus.labels\r\n    label_encoder = OneHotEncoder()\r\n    y = label_encoder.fit_transform(np.array(labels).reshape(-1, 1)).todense()\r\n    print('Dimension of labels input is {}.'.format(y.shape))\r\n\r\n    print('Building model...')\r\n    model = build_model(bert_path, max_seq_length)\r\n\r\n    print('Training model...')\r\n    history = model.fit(X, y,\r\n                        validation_split=0.2,\r\n                        epochs=1,\r\n                        batch_size=1,\r\n                        verbose=2,\r\n                        use_multiprocessing=True)\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n```\r\n\r\n**BertLayer**\r\n```\r\nimport tensorflow as tf\r\nfrom tensorflow.keras import backend as K\r\nimport tensorflow_hub as hub\r\n\r\nclass BertLayer(tf.keras.layers.Layer):\r\n    def __init__(\r\n        self,\r\n        n_fine_tune_layers=10,\r\n        pooling=\"mean\",\r\n        bert_path=\"https://tfhub.dev/google/bert_uncased_L-12_H-768_A-12/1\",\r\n        **kwargs,\r\n    ):\r\n        self.n_fine_tune_layers = n_fine_tune_layers\r\n        self.trainable = True\r\n        self.output_size = 768\r\n        self.pooling = pooling\r\n        self.bert_path = bert_path\r\n\r\n        if self.pooling not in [\"first\", \"mean\"]:\r\n            raise NameError(\r\n                f\"Undefined pooling type (must be either first or mean, but is {self.pooling}\"\r\n                )\r\n\r\n        super(BertLayer, self).__init__(**kwargs)\r\n\r\n    def build(self, input_shape):\r\n        self.bert = hub.Module(\r\n            self.bert_path, trainable=self.trainable, name=f\"{self.name}_module\"\r\n        )\r\n\r\n        # Remove unused layers\r\n        trainable_vars = self.bert.variables\r\n        if self.pooling == \"first\":\r\n            trainable_vars = [var for var in trainable_vars if not \"/cls/\" in var.name]\r\n            trainable_layers = [\"pooler/dense\"]\r\n\r\n        elif self.pooling == \"mean\":\r\n            trainable_vars = [\r\n                var\r\n                for var in trainable_vars\r\n                if not \"/cls/\" in var.name and not \"/pooler/\" in var.name\r\n            ]\r\n            trainable_layers = []\r\n        else:\r\n            raise NameError(\r\n                f\"Undefined pooling type (must be either first or mean, but is {self.pooling}\"\r\n            )\r\n\r\n        # Select how many layers to fine tune\r\n        for i in range(self.n_fine_tune_layers):\r\n            trainable_layers.append(f\"encoder/layer_{str(11 - i)}\")\r\n\r\n        # Update trainable vars to contain only the specified layers\r\n        trainable_vars = [\r\n            var\r\n            for var in trainable_vars\r\n            if any([l in var.name for l in trainable_layers])\r\n        ]\r\n\r\n        # Add to trainable weights\r\n        for var in trainable_vars:\r\n            self._trainable_weights.append(var)\r\n\r\n        for var in self.bert.variables:\r\n            if var not in self._trainable_weights:\r\n                self._non_trainable_weights.append(var)\r\n\r\n        super(BertLayer, self).build(input_shape)\r\n\r\n    def call(self, inputs):\r\n        inputs = [K.cast(x, dtype=\"int32\") for x in inputs]\r\n        input_ids, input_mask, segment_ids = inputs\r\n        bert_inputs = dict(\r\n            input_ids=input_ids, input_mask=input_mask, segment_ids=segment_ids\r\n        )\r\n        if self.pooling == \"first\":\r\n            # pooled output of the entire sequence [batch, hidden_size]\r\n            pooled = self.bert(inputs=bert_inputs, signature=\"tokens\", as_dict=True)[\"pooled_output\"]\r\n        elif self.pooling == \"mean\":\r\n            # representation of every token in the sequence [batch, max_seq_length, hidden_size]\r\n            result = self.bert(inputs=bert_inputs, signature=\"tokens\", as_dict=True)[\"sequence_output\"]\r\n\r\n            mul_mask = lambda x, m: x * tf.expand_dims(m, axis=-1)\r\n            masked_reduce_mean = lambda x, m: tf.reduce_sum(mul_mask(x, m), axis=1) / (\r\n                    tf.reduce_sum(m, axis=1, keepdims=True) + 1e-10)\r\n            input_mask = tf.cast(input_mask, tf.float32)\r\n            pooled = masked_reduce_mean(result, input_mask)\r\n        else:\r\n            raise NameError(f\"Undefined pooling type (must be either first or mean, but is {self.pooling}\")\r\n\r\n        return pooled\r\n\r\n    def compute_output_shape(self, input_shape):\r\n        return (input_shape[0], self.output_size)\r\n```\r\n\r\n**Other info / logs**\r\n\r\nmodel.summary()\r\n```\r\n__________________________________________________________________________________________________\r\nLayer (type)                    Output Shape         Param #     Connected to                     \r\n==================================================================================================\r\ninput_ids (InputLayer)          [(None, 256)]        0                                            \r\n__________________________________________________________________________________________________\r\ninput_masks (InputLayer)        [(None, 256)]        0                                            \r\n__________________________________________________________________________________________________\r\nsegment_ids (InputLayer)        [(None, 256)]        0                                            \r\n__________________________________________________________________________________________________\r\nbert_layer (BertLayer)          (None, 768)          110104890   input_ids[0][0]                  \r\n                                                                 input_masks[0][0]                \r\n                                                                 segment_ids[0][0]                \r\n__________________________________________________________________________________________________\r\ndense (Dense)                   (None, 256)          196864      bert_layer[0][0]                 \r\n__________________________________________________________________________________________________\r\ndense_1 (Dense)                 (None, 5)            1285        dense[0][0]                      \r\n==================================================================================================\r\nTotal params: 110,303,039\r\nTrainable params: 22,052,357\r\nNon-trainable params: 88,250,682\r\n__________________________________________________________________________________________________\r\n```\r\n\r\nOther logs:\r\n```\r\nWARNING: Logging before flag parsing goes to stderr.\r\nW0722 16:38:28.879759 14352 deprecation_wrapper.py:119] From C:\\Users\\jorda\\OneDrive\\Documents\\Programs\\aria_projects\\document_classifier\\BERT\\venv\\preprocessing.py:7: The name tf.Session is deprecated. Please use tf.compat.v1.Session instead.\r\n\r\n2019-07-22 16:38:28.917117: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library nvcuda.dll\r\n2019-07-22 16:38:29.034609: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 0 with properties: \r\nname: GeForce GTX 1080 Ti major: 6 minor: 1 memoryClockRate(GHz): 1.6325\r\npciBusID: 0000:08:00.0\r\n2019-07-22 16:38:29.034810: I tensorflow/stream_executor/platform/default/dlopen_checker_stub.cc:25] GPU libraries are statically linked, skip dlopen check.\r\n2019-07-22 16:38:29.035881: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1763] Adding visible gpu devices: 0\r\n2019-07-22 16:38:29.041192: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2\r\n2019-07-22 16:38:29.044644: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 0 with properties: \r\nname: GeForce GTX 1080 Ti major: 6 minor: 1 memoryClockRate(GHz): 1.6325\r\npciBusID: 0000:08:00.0\r\n2019-07-22 16:38:29.044900: I tensorflow/stream_executor/platform/default/dlopen_checker_stub.cc:25] GPU libraries are statically linked, skip dlopen check.\r\n2019-07-22 16:38:29.045354: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1763] Adding visible gpu devices: 0\r\n2019-07-22 16:38:30.462499: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1181] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-07-22 16:38:30.462613: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1187]      0 \r\n2019-07-22 16:38:30.462745: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1200] 0:   N \r\n2019-07-22 16:38:30.464681: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1326] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 8788 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080 Ti, pci bus id: 0000:08:00.0, compute capability: 6.1)\r\n2019-07-22 16:38:30.470977: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 0 with properties: \r\nname: GeForce GTX 1080 Ti major: 6 minor: 1 memoryClockRate(GHz): 1.6325\r\npciBusID: 0000:08:00.0\r\n2019-07-22 16:38:30.471127: I tensorflow/stream_executor/platform/default/dlopen_checker_stub.cc:25] GPU libraries are statically linked, skip dlopen check.\r\nBuilding docs...\r\n2019-07-22 16:38:30.471801: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1763] Adding visible gpu devices: 0\r\n2019-07-22 16:38:30.471966: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1181] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-07-22 16:38:30.472067: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1187]      0 \r\n2019-07-22 16:38:30.472126: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1200] 0:   N \r\n2019-07-22 16:38:30.472605: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1326] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 8788 MB memory) -> physical GPU (device: 0, name: GeForce GTX 1080 Ti, pci bus id: 0000:08:00.0, compute capability: 6.1)\r\nW0722 16:38:34.138283 14352 deprecation_wrapper.py:119] From C:\\Users\\jorda\\OneDrive\\Documents\\Programs\\aria_projects\\document_classifier\\BERT\\venv\\bert\\tokenization.py:125: The name tf.gfile.GFile is deprecated. Please use tf.io.gfile.GFile instead.\r\n\r\nDimension of labels input is (2225, 5).\r\nBuilding model...\r\nW0722 16:39:05.050155 14352 deprecation.py:506] From C:\\Program Files\\Python37\\lib\\site-packages\\tensorflow\\python\\ops\\init_ops.py:1251: calling VarianceScaling.__init__ (from tensorflow.python.ops.init_ops) with dtype is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nCall initializer instance with the dtype argument instead of passing it to the constructor\r\nW0722 16:39:05.109156 14352 deprecation.py:323] From C:\\Program Files\\Python37\\lib\\site-packages\\tensorflow\\python\\ops\\nn_impl.py:180: add_dispatch_support.<locals>.wrapper (from tensorflow.python.ops.array_ops) is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nUse tf.where in 2.0, which has the same broadcast rule as np.where\r\nModel: \"model\"\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30914", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30914/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30914/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30914/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30914", "id": 470865329, "node_id": "MDU6SXNzdWU0NzA4NjUzMjk=", "number": 30914, "title": "CPU.ModifyGraphWithDelegate is disallowed when graph is immutable. Delegate should run on the same thread where it was initialized.Node number 64 (TfLiteGpuDelegate) failed to invoke.ed to invoke.", "user": {"login": "Gmrevo", "id": 11976260, "node_id": "MDQ6VXNlcjExOTc2MjYw", "avatar_url": "https://avatars3.githubusercontent.com/u/11976260?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gmrevo", "html_url": "https://github.com/Gmrevo", "followers_url": "https://api.github.com/users/Gmrevo/followers", "following_url": "https://api.github.com/users/Gmrevo/following{/other_user}", "gists_url": "https://api.github.com/users/Gmrevo/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gmrevo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gmrevo/subscriptions", "organizations_url": "https://api.github.com/users/Gmrevo/orgs", "repos_url": "https://api.github.com/users/Gmrevo/repos", "events_url": "https://api.github.com/users/Gmrevo/events{/privacy}", "received_events_url": "https://api.github.com/users/Gmrevo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-07-22T02:39:39Z", "updated_at": "2019-08-14T15:54:12Z", "closed_at": null, "author_association": "NONE", "body": "<em>\r\n-We are trying to enable GPU using GPU delegate in TensorFlow[ object detection sample project](https://github.com/tensorflow/examples/tree/master/lite/examples/object_detection/android), by taking reference from GPU enabled sample project of [Object  Classification](https://github.com/tensorflow/examples/tree/master/lite/examples/image_classification/android).-- we are also using Float Model for detection. </em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Android Studio installed on Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: Realme One\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version (use command below):\r\ndependencies added:\r\n`implementation 'org.tensorflow:tensorflow-lite:0.0.0-nightly'\r\nimplementation 'org.tensorflow:tensorflow-lite-gpu:0.0.0-nightly'`\r\n- Python version:\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory: OpenGL ES 3.2 available on the phone\r\n\r\nThe project has been compiled in Android Studio using these dependencies:\r\n`dependencies { implementation fileTree(dir: 'libs', include: ['*.jar','*.aar']) implementation 'com.android.support:appcompat-v7:28.0.0' implementation 'com.android.support:design:28.0.0' implementation 'org.tensorflow:tensorflow-lite:0.0.0-nightly' implementation 'org.tensorflow:tensorflow-lite-gpu:0.0.0-nightly' } \r\n`\r\n**Describe the current behavior**\r\nWe are facing this error unable to understand the exact issue:\r\n`CPU.ModifyGraphWithDelegate is disallowed when graph is immutable.\r\n       at org.tensorflow.lite.NativeInterpreterWrapper.run(Native Method)\r\n\r\n   java.lang.IllegalArgumentException: Internal error: Failed to run on the given Interpreter: Next operations are not supported by GPU delegate:\r\n   CUSTOM TFLite_Detection_PostProcess: Operation is not supported.\r\n   First 63 operations will run on the GPU, and the remaining 1 on the CPU.TfLiteGpuDelegate Invoke: Delegate should run on the same thread where it was initialized.Node number 64 (TfLiteGpuDelegate) failed to invoke.\r\n   \r\n       at org.tensorflow.lite.NativeInterpreterWrapper.run(Native Method)\r\n       at org.tensorflow.lite.NativeInterpreterWrapper.run(NativeInterpreterWrapper.java:149)\r\n       at org.tensorflow.lite.Interpreter.runForMultipleInputsOutputs(Interpreter.java:275)\r\n       at org.tensorflow.lite.examples.detection.tflite.TFLiteObjectDetectionAPIModel.recognizeImage(TFLiteObjectDetectionAPIModel.java:228)\r\n       at com.demo.webview.bt.webviewbtdemo.basic.TFLiteWrapper$5.run(TFLiteWrapper.java:360)\r\n       at android.os.Handler.handleCallback(Handler.java:873)`\r\n**Describe the expected behavior**\r\n\r\n**Code to reproduce the issue**\r\n`public class TFLiteObjectDetectionAPIModel implements Classifier {\r\n  private static final Logger LOGGER = new Logger();\r\n\r\n  // Only return this many results.\r\n  private static final int NUM_DETECTIONS = 10;\r\n  // Float model\r\n  private static final float IMAGE_MEAN = 128.0f;\r\n  private static final float IMAGE_STD = 128.0f;\r\n  // Number of threads in the java app\r\n  private static final int NUM_THREADS = 4;\r\n  private boolean isModelQuantized;\r\n  // Config values.\r\n  private int inputSize;\r\n  // Pre-allocated buffers.\r\n  private Vector<String> labels = new Vector<String>();\r\n  private int[] intValues;\r\n  // outputLocations: array of shape [Batchsize, NUM_DETECTIONS,4]\r\n  // contains the location of detected boxes\r\n  private float[][][] outputLocations;\r\n  // outputClasses: array of shape [Batchsize, NUM_DETECTIONS]\r\n  // contains the classes of detected boxes\r\n  private float[][] outputClasses;\r\n  // outputScores: array of shape [Batchsize, NUM_DETECTIONS]\r\n  // contains the scores of detected boxes\r\n  private float[][] outputScores;\r\n  // numDetections: array of shape [Batchsize]\r\n  // contains the number of detected boxes\r\n  private float[] numDetections;\r\n\r\n  private ByteBuffer imgData;\r\n\r\n  private Interpreter tflite;\r\n\r\n  /** Options for configuring the Interpreter. */\r\n  private final Interpreter.Options tfliteOptions = new Interpreter.Options();\r\n\r\n  /** The loaded TensorFlow Lite model. */\r\n  private MappedByteBuffer tfliteModel;\r\n\r\n\r\n  private TFLiteObjectDetectionAPIModel() {}\r\n\r\n  /** holds a gpu delegate */\r\n  GpuDelegate gpuDelegate = null;\r\n\r\n  /** Memory-map the model file in Assets. */\r\n  private static MappedByteBuffer loadModelFile(AssetManager assets, String modelFilename)\r\n      throws IOException {\r\n    AssetFileDescriptor fileDescriptor = assets.openFd(modelFilename);\r\n    FileInputStream inputStream = new FileInputStream(fileDescriptor.getFileDescriptor());\r\n    FileChannel fileChannel = inputStream.getChannel();\r\n    long startOffset = fileDescriptor.getStartOffset();\r\n    long declaredLength = fileDescriptor.getDeclaredLength();\r\n\r\n    return fileChannel.map(FileChannel.MapMode.READ_ONLY, startOffset, declaredLength);\r\n  }\r\n\r\n\r\n  private void recreateInterpreter() {\r\n    if (tflite != null) {\r\n      tflite.close();\r\n      tflite = new Interpreter(tfliteModel, tfliteOptions);\r\n    }\r\n  }\r\n\r\n  public void useGpu() {\r\n    if (gpuDelegate == null) {\r\n      gpuDelegate = new GpuDelegate();\r\n      tfliteOptions.addDelegate(gpuDelegate);\r\n      recreateInterpreter();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initializes a native TensorFlow session for classifying images.\r\n   *\r\n   * @param assetManager The asset manager to be used to load assets.\r\n   * @param modelFilename The filepath of the model GraphDef protocol buffer.\r\n   * @param labelFilename The filepath of label file for classes.\r\n   * @param inputSize The size of image input\r\n   * @param isQuantized Boolean representing model is quantized or not\r\n   */\r\n  public static Classifier create(\r\n      final AssetManager assetManager,\r\n      final String modelFilename,\r\n      final String labelFilename,\r\n      final int inputSize,\r\n      final boolean isQuantized)\r\n      throws IOException {\r\n    final TFLiteObjectDetectionAPIModel d = new TFLiteObjectDetectionAPIModel();\r\n    //d.setUseNNAPI(true);\r\n    d.useGpu();\r\n    InputStream labelsInput = null;\r\n    String actualFilename = labelFilename.split(\"file:///android_asset/\")[1];\r\n    labelsInput = assetManager.open(actualFilename);\r\n    BufferedReader br = null;\r\n    br = new BufferedReader(new InputStreamReader(labelsInput));\r\n    String line;\r\n    while ((line = br.readLine()) != null) {\r\n      LOGGER.w(line);\r\n      d.labels.add(line);\r\n    }\r\n    br.close();\r\n\r\n    d.inputSize = inputSize;\r\n\r\n    try {\r\n      d.tflite = new Interpreter(loadModelFile(assetManager, modelFilename));\r\n    } catch (Exception e) {\r\n      throw new RuntimeException(e);\r\n    }\r\n\r\n    d.isModelQuantized = isQuantized;\r\n    // Pre-allocate buffers.\r\n    int numBytesPerChannel;\r\n    if (isQuantized) {\r\n      numBytesPerChannel = 1; // Quantized\r\n    } else {\r\n      numBytesPerChannel = 4; // Floating point\r\n    }\r\n    d.imgData = ByteBuffer.allocateDirect(1 * d.inputSize * d.inputSize * 3 * numBytesPerChannel);\r\n    d.imgData.order(ByteOrder.nativeOrder());\r\n    d.intValues = new int[d.inputSize * d.inputSize];\r\n\r\n    d.tflite.setNumThreads(NUM_THREADS);\r\n    d.outputLocations = new float[1][NUM_DETECTIONS][4];\r\n    d.outputClasses = new float[1][NUM_DETECTIONS];\r\n    d.outputScores = new float[1][NUM_DETECTIONS];\r\n    d.numDetections = new float[1];\r\n    return d;\r\n  }\r\n\r\n  @Override\r\n  public List<Recognition> recognizeImage(final Bitmap bitmap) {\r\n    // Log this method so that it can be analyzed with systrace.\r\n    Trace.beginSection(\"recognizeImage\");\r\n\r\n    Trace.beginSection(\"preprocessBitmap\");\r\n    // Preprocess the image data from 0-255 int to normalized float based\r\n    // on the provided parameters.\r\n    bitmap.getPixels(intValues, 0, bitmap.getWidth(), 0, 0, bitmap.getWidth(), bitmap.getHeight());\r\n  //  useGpu();\r\n    imgData.rewind();\r\n    for (int i = 0; i < inputSize; ++i) {\r\n      for (int j = 0; j < inputSize; ++j) {\r\n        int pixelValue = intValues[i * inputSize + j];\r\n        if (isModelQuantized) {\r\n          // Quantized model\r\n          imgData.put((byte) ((pixelValue >> 16) & 0xFF));\r\n          imgData.put((byte) ((pixelValue >> 8) & 0xFF));\r\n          imgData.put((byte) (pixelValue & 0xFF));\r\n        } else { // Float model\r\n          imgData.putFloat((((pixelValue >> 16) & 0xFF) - IMAGE_MEAN) / IMAGE_STD);\r\n          imgData.putFloat((((pixelValue >> 8) & 0xFF) - IMAGE_MEAN) / IMAGE_STD);\r\n          imgData.putFloat(((pixelValue & 0xFF) - IMAGE_MEAN) / IMAGE_STD);\r\n        }\r\n      }\r\n    }\r\n    Trace.endSection(); // preprocessBitmap\r\n\r\n    // Copy the input data into TensorFlow.\r\n    Trace.beginSection(\"feed\");\r\n    outputLocations = new float[1][NUM_DETECTIONS][4];\r\n    outputClasses = new float[1][NUM_DETECTIONS];\r\n    outputScores = new float[1][NUM_DETECTIONS];\r\n    numDetections = new float[1];\r\n\r\n    Object[] inputArray = {imgData};\r\n    Map<Integer, Object> outputMap = new HashMap<>();\r\n    outputMap.put(0, outputLocations);\r\n    outputMap.put(1, outputClasses);\r\n    outputMap.put(2, outputScores);\r\n    outputMap.put(3, numDetections);\r\n    Trace.endSection();\r\n\r\n    // Run the inference call.\r\n    Trace.beginSection(\"run\");\r\n    tflite.runForMultipleInputsOutputs(inputArray, outputMap);\r\n    Trace.endSection();\r\n\r\n    // Show the best detections.\r\n    // after scaling them back to the input size.\r\n    final ArrayList<Recognition> recognitions = new ArrayList<>(NUM_DETECTIONS);\r\n    for (int i = 0; i < NUM_DETECTIONS; ++i) {\r\n      final RectF detection =\r\n          new RectF(\r\n              outputLocations[0][i][1] * inputSize,\r\n              outputLocations[0][i][0] * inputSize,\r\n              outputLocations[0][i][3] * inputSize,\r\n              outputLocations[0][i][2] * inputSize);\r\n      // SSD Mobilenet V1 Model assumes class 0 is background class\r\n      // in label file and class labels start from 1 to number_of_classes+1,\r\n      // while outputClasses correspond to class index from 0 to number_of_classes\r\n      int labelOffset = 1;\r\n      recognitions.add(\r\n          new Recognition(\r\n              \"\" + i,\r\n              labels.get((int) outputClasses[0][i] + labelOffset),\r\n              outputScores[0][i],\r\n              detection));\r\n    }\r\n    Trace.endSection(); // \"recognizeImage\"\r\n   // runInference();\r\n    return recognitions;\r\n  }`\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n**Please provide help or suggestion to resolve this issue**\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30898", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30898/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30898/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30898/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30898", "id": 470666150, "node_id": "MDU6SXNzdWU0NzA2NjYxNTA=", "number": 30898, "title": "Makefile build does not create contrib ops", "user": {"login": "themightyoarfish", "id": 11613312, "node_id": "MDQ6VXNlcjExNjEzMzEy", "avatar_url": "https://avatars0.githubusercontent.com/u/11613312?v=4", "gravatar_id": "", "url": "https://api.github.com/users/themightyoarfish", "html_url": "https://github.com/themightyoarfish", "followers_url": "https://api.github.com/users/themightyoarfish/followers", "following_url": "https://api.github.com/users/themightyoarfish/following{/other_user}", "gists_url": "https://api.github.com/users/themightyoarfish/gists{/gist_id}", "starred_url": "https://api.github.com/users/themightyoarfish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/themightyoarfish/subscriptions", "organizations_url": "https://api.github.com/users/themightyoarfish/orgs", "repos_url": "https://api.github.com/users/themightyoarfish/repos", "events_url": "https://api.github.com/users/themightyoarfish/events{/privacy}", "received_events_url": "https://api.github.com/users/themightyoarfish/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1104829434, "node_id": "MDU6TGFiZWwxMTA0ODI5NDM0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:mkl", "name": "comp:mkl", "color": "0052cc", "default": false, "description": ""}, {"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-07-20T11:44:33Z", "updated_at": "2019-09-27T15:48:23Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- OS Platform and Distribution: MacOS\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version: c6352706d6280d7ed34964969503b104471a9335\r\n- Bazel version (if compiling from source): not used\r\n- GCC/Compiler version (if compiling from source):\r\n```\r\nConfigured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.14.sdk/usr/include/c++/4.2.1\r\nApple LLVM version 10.0.1 (clang-1001.0.46.4)\r\nTarget: x86_64-apple-darwin18.6.0\r\nThread model: posix\r\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\r\n```\r\n\r\n**Describe the problem**\r\n\r\nWhen compiling with `tensorflow/contrib/makefile/build_all_linux.sh`, the following inclusion does not work:\r\n```\r\n#include <tensorflow/cc/ops/standard_ops.h>\r\n```\r\nbecause the header `#includes` something that's not there:\r\n```\r\n<tfdir>/tensorflow/tensorflow/cc/ops/standard_ops.h:19:10: fatal error: 'tensorflow/cc/ops/array_ops.h' file not found\r\n#include \"tensorflow/cc/ops/array_ops.h\"\r\n         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n1 error generated.\r\n```\r\n\r\nSearching for `array_ops` in the repository e.g. reveals a CMake macro named `GENERATE_CONTRIB_OP_LIBRARY` defined in in `tensorflow/contrib/cmake/tf_core_ops.cmake`.\r\n\r\nhttps://github.com/tensorflow/tensorflow/blob/6c7c3bb0f3563e8a147935597617cf3d052c7852/tensorflow/contrib/cmake/tf_core_ops.cmake#L76\r\n\r\nObviously, the Makefile does not use this. Is it intentional that these ops are not being built with the makefile? Even if I remove the header, a program does not work at runtime due to missing ops.\r\n\r\nI can provide a minimal C++ file and build scripts if desired, but would like to know first if it's supposed to be like this.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30896", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30896/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30896/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30896/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30896", "id": 470649499, "node_id": "MDU6SXNzdWU0NzA2NDk0OTk=", "number": 30896, "title": "Standard way of sharing architectures?", "user": {"login": "SamuelMarks", "id": 807580, "node_id": "MDQ6VXNlcjgwNzU4MA==", "avatar_url": "https://avatars0.githubusercontent.com/u/807580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SamuelMarks", "html_url": "https://github.com/SamuelMarks", "followers_url": "https://api.github.com/users/SamuelMarks/followers", "following_url": "https://api.github.com/users/SamuelMarks/following{/other_user}", "gists_url": "https://api.github.com/users/SamuelMarks/gists{/gist_id}", "starred_url": "https://api.github.com/users/SamuelMarks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SamuelMarks/subscriptions", "organizations_url": "https://api.github.com/users/SamuelMarks/orgs", "repos_url": "https://api.github.com/users/SamuelMarks/repos", "events_url": "https://api.github.com/users/SamuelMarks/events{/privacy}", "received_events_url": "https://api.github.com/users/SamuelMarks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-07-20T08:15:12Z", "updated_at": "2019-09-11T23:13:17Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using):\r\n1.14, and sometimes the latest v2 pre-release\r\n- Are you willing to contribute it (Yes/No):\r\nYes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nFound a number of interesting architectures on GitHub. Starting making PRs to them, to support Python 2.7\u20133.6, and soon for proper setuptools integration.\r\n\r\nThe [Dataset](https://www.tensorflow.org/api_docs/python/tf/data/Dataset) API, and [tfds in general](https://www.tensorflow.org/datasets/api_docs/python/tfds) are both useful approaches for preparing data, and exposing it for others to consume.\r\n\r\nHowever, AFAIK, there is no standard way of sharing, say: Keras models. Internally have moved to [`gin`](https://github.com/google/gin-config), but not sure if that's the best approach for all.\r\n\r\n**Will this change the current api? How?**\r\nIntroduce a new module, similar to how tfds was introduced for preparing and packaging datasets.\r\n\r\n**Who will benefit with this feature?**\r\nEveryone. Especially those that want to combine multiple architectures from different sources\u2014or in my scenario\u2014to experiment with different architectures.\r\n\r\n**Any Other info.**\r\nConcept:\r\n```python\r\nimport some_broke_arch\r\nimport other_neat_arch\r\nimport horrible_v_arch\r\n\r\nmodel   = some_broke_arch.get_arch(   **standard_arch_params  )\r\nmetrics = other_neat_arch.get_metrics(**standard_metric_params)\r\nloss    = horrible_v_arch.get_loss(   **standard_loss_params  )\r\n\r\nmodel.compile(loss=loss, optimizer=keras.optimizers.RMSprop, metrics=metrics)\r\nprint(model.summary())\r\n# &etc.\r\n````"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30891", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30891/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30891/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30891/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30891", "id": 470603630, "node_id": "MDU6SXNzdWU0NzA2MDM2MzA=", "number": 30891, "title": "ffmpeg not found when build in Raspberry Pi 3 B+ Raspbian 10", "user": {"login": "base0", "id": 14952346, "node_id": "MDQ6VXNlcjE0OTUyMzQ2", "avatar_url": "https://avatars2.githubusercontent.com/u/14952346?v=4", "gravatar_id": "", "url": "https://api.github.com/users/base0", "html_url": "https://github.com/base0", "followers_url": "https://api.github.com/users/base0/followers", "following_url": "https://api.github.com/users/base0/following{/other_user}", "gists_url": "https://api.github.com/users/base0/gists{/gist_id}", "starred_url": "https://api.github.com/users/base0/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/base0/subscriptions", "organizations_url": "https://api.github.com/users/base0/orgs", "repos_url": "https://api.github.com/users/base0/repos", "events_url": "https://api.github.com/users/base0/events{/privacy}", "received_events_url": "https://api.github.com/users/base0/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1194756584, "node_id": "MDU6TGFiZWwxMTk0NzU2NTg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20raspberry%20pi", "name": "subtype: raspberry pi", "color": "b619ea", "default": false, "description": "Raspberry Pi Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-07-19T23:20:10Z", "updated_at": "2019-07-21T02:48:24Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS : Raspbian 10\r\n- Device : Rasberry Pi 3 B+\r\n- TensorFlow installed from source\r\n- TensorFlow version: 1.9\r\n- Python version: 3\r\n- Installed using : I followed the instruction from https://www.tensorflow.org/install/source_rpi \r\n\r\nI followed the instruction from https://www.tensorflow.org/install/source_rpi   The commands are copy from the link as follows:\r\n\r\n`git clone https://github.com/tensorflow/tensorflow.git`\r\n\r\n`cd tensorflow`\r\n\r\n`git checkout r1.9`\r\n\r\n`CI_DOCKER_EXTRA_PARAMS=\"-e CI_BUILD_PYTHON=python3 -e CROSSTOOL_PYTHON_INCLUDE_PATH=/usr/include/python3.4\" `\r\n`    tensorflow/tools/ci_build/ci_build.sh PI-PYTHON3 \\`\r\n`    tensorflow/tools/ci_build/pi/build_raspberry_pi.sh`\r\n\r\nI got the following error.\r\n\r\n> Package ffmpeg is not available, but is referred to by another package.\r\n> This may mean that the package is missing, has been obsoleted, or\r\n> is only available from another source\r\n> \r\n> E: Package 'ffmpeg' has no installation candidate\r\n> The command '/bin/sh -c /install/install_deb_packages.sh' returned a non-zero code: 100\r\n> ERROR: docker build failed. Dockerfile is at /home/pi/tensorflow/tensorflow/tools/ci_build/Dockerfile.pi-python3\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30887", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30887/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30887/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30887/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30887", "id": 470545794, "node_id": "MDU6SXNzdWU0NzA1NDU3OTQ=", "number": 30887, "title": "TF 2.0: tf.distribute example not working (NCCL all reduce issue)", "user": {"login": "mjlbach", "id": 13316262, "node_id": "MDQ6VXNlcjEzMzE2MjYy", "avatar_url": "https://avatars1.githubusercontent.com/u/13316262?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mjlbach", "html_url": "https://github.com/mjlbach", "followers_url": "https://api.github.com/users/mjlbach/followers", "following_url": "https://api.github.com/users/mjlbach/following{/other_user}", "gists_url": "https://api.github.com/users/mjlbach/gists{/gist_id}", "starred_url": "https://api.github.com/users/mjlbach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mjlbach/subscriptions", "organizations_url": "https://api.github.com/users/mjlbach/orgs", "repos_url": "https://api.github.com/users/mjlbach/repos", "events_url": "https://api.github.com/users/mjlbach/events{/privacy}", "received_events_url": "https://api.github.com/users/mjlbach/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 1345373822, "node_id": "MDU6TGFiZWwxMzQ1MzczODIy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:ds-triaged", "name": "stat:ds-triaged", "color": "f2dea7", "default": false, "description": "Internal label for triaging"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "dubey", "id": 2314265, "node_id": "MDQ6VXNlcjIzMTQyNjU=", "avatar_url": "https://avatars0.githubusercontent.com/u/2314265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dubey", "html_url": "https://github.com/dubey", "followers_url": "https://api.github.com/users/dubey/followers", "following_url": "https://api.github.com/users/dubey/following{/other_user}", "gists_url": "https://api.github.com/users/dubey/gists{/gist_id}", "starred_url": "https://api.github.com/users/dubey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dubey/subscriptions", "organizations_url": "https://api.github.com/users/dubey/orgs", "repos_url": "https://api.github.com/users/dubey/repos", "events_url": "https://api.github.com/users/dubey/events{/privacy}", "received_events_url": "https://api.github.com/users/dubey/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dubey", "id": 2314265, "node_id": "MDQ6VXNlcjIzMTQyNjU=", "avatar_url": "https://avatars0.githubusercontent.com/u/2314265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dubey", "html_url": "https://github.com/dubey", "followers_url": "https://api.github.com/users/dubey/followers", "following_url": "https://api.github.com/users/dubey/following{/other_user}", "gists_url": "https://api.github.com/users/dubey/gists{/gist_id}", "starred_url": "https://api.github.com/users/dubey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dubey/subscriptions", "organizations_url": "https://api.github.com/users/dubey/orgs", "repos_url": "https://api.github.com/users/dubey/repos", "events_url": "https://api.github.com/users/dubey/events{/privacy}", "received_events_url": "https://api.github.com/users/dubey/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 15, "created_at": "2019-07-19T20:56:28Z", "updated_at": "2020-01-30T23:54:29Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): Binary\r\n- TensorFlow version (use command below): 2.0b1\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 10/7.4\r\n- GPU model and memory: Titan Xp\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nWhen I try to run one of the distributed examples, the model fails using the default NCCL all reduce cross devices ops:\r\n\r\n<details>\r\n        <summary> NCCL All Reduce Error </summary>\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nInternalError                             Traceback (most recent call last)\r\n<ipython-input-15-df42e8590c26> in <module>\r\n----> 1 model.fit(train_dataset, epochs=50, callbacks=callbacks)\r\n\r\n~/.virtualenvs/physics3/lib/python3.6/site-packages/tensorflow/python/keras/engine/training.py in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_freq, max_queue_size, workers, use_multiprocessing, **kwargs)\r\n    641         max_queue_size=max_queue_size,\r\n    642         workers=workers,\r\n--> 643         use_multiprocessing=use_multiprocessing)\r\n    644 \r\n    645   def evaluate(self,\r\n\r\n~/.virtualenvs/physics3/lib/python3.6/site-packages/tensorflow/python/keras/engine/training_distributed.py in fit(self, model, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_freq, **kwargs)\r\n    679           validation_steps=validation_steps,\r\n    680           validation_freq=validation_freq,\r\n--> 681           steps_name='steps_per_epoch')\r\n    682 \r\n    683   def evaluate(self,\r\n\r\n~/.virtualenvs/physics3/lib/python3.6/site-packages/tensorflow/python/keras/engine/training_arrays.py in model_iteration(model, inputs, targets, sample_weights, batch_size, epochs, verbose, callbacks, val_inputs, val_targets, val_sample_weights, shuffle, initial_epoch, steps_per_epoch, validation_steps, validation_freq, mode, validation_in_fit, prepared_feed_values_from_dataset, steps_name, **kwargs)\r\n    292           else:\r\n    293             actual_inputs = ins()\r\n--> 294           batch_outs = f(actual_inputs)\r\n    295         except errors.OutOfRangeError:\r\n    296           if is_dataset:\r\n\r\n~/.virtualenvs/physics3/lib/python3.6/site-packages/tensorflow/python/keras/distribute/distributed_training_utils.py in execution_function(input_fn)\r\n    811     def execution_function(input_fn):\r\n    812       # `numpy` translates Tensors to values in Eager mode.\r\n--> 813       return [out.numpy() for out in distributed_function(input_fn)]\r\n    814     return execution_function\r\n    815 \r\n\r\n~/.virtualenvs/physics3/lib/python3.6/site-packages/tensorflow/python/eager/def_function.py in __call__(self, *args, **kwds)\r\n    426         # Lifting succeeded, so variables are initialized and we can run the\r\n    427         # stateless function.\r\n--> 428         return self._stateless_fn(*args, **kwds)\r\n    429     else:\r\n    430       canon_args, canon_kwds = \\\r\n\r\n~/.virtualenvs/physics3/lib/python3.6/site-packages/tensorflow/python/eager/function.py in __call__(self, *args, **kwargs)\r\n   1333     \"\"\"Calls a graph function specialized to the inputs.\"\"\"\r\n   1334     graph_function, args, kwargs = self._maybe_define_function(args, kwargs)\r\n-> 1335     return graph_function._filtered_call(args, kwargs)  # pylint: disable=protected-access\r\n   1336 \r\n   1337   @property\r\n\r\n~/.virtualenvs/physics3/lib/python3.6/site-packages/tensorflow/python/eager/function.py in _filtered_call(self, args, kwargs)\r\n    587     \"\"\"\r\n    588     return self._call_flat(\r\n--> 589         (t for t in nest.flatten((args, kwargs), expand_composites=True)\r\n    590          if isinstance(t, (ops.Tensor,\r\n    591                            resource_variable_ops.ResourceVariable))))\r\n\r\n~/.virtualenvs/physics3/lib/python3.6/site-packages/tensorflow/python/eager/function.py in _call_flat(self, args)\r\n    669     # Only need to override the gradient in graph mode and when we have outputs.\r\n    670     if context.executing_eagerly() or not self.outputs:\r\n--> 671       outputs = self._inference_function.call(ctx, args)\r\n    672     else:\r\n    673       self._register_gradient()\r\n\r\n~/.virtualenvs/physics3/lib/python3.6/site-packages/tensorflow/python/eager/function.py in call(self, ctx, args)\r\n    443             attrs=(\"executor_type\", executor_type,\r\n    444                    \"config_proto\", config),\r\n--> 445             ctx=ctx)\r\n    446       # Replace empty list with None\r\n    447       outputs = outputs or None\r\n\r\n~/.virtualenvs/physics3/lib/python3.6/site-packages/tensorflow/python/eager/execute.py in quick_execute(op_name, num_outputs, inputs, attrs, ctx, name)\r\n     65     else:\r\n     66       message = e.message\r\n---> 67     six.raise_from(core._status_to_exception(e.code, message), None)\r\n     68   except TypeError as e:\r\n     69     if any(ops._is_keras_symbolic_tensor(x) for x in inputs):\r\n\r\n~/.virtualenvs/physics3/lib/python3.6/site-packages/six.py in raise_from(value, from_value)\r\n\r\nInternalError: 2 root error(s) found.\r\n  (0) Internal:  internal error\r\n\t [[node Adam/NcclAllReduce_8 (defined at <ipython-input-15-df42e8590c26>:1) ]]\r\n  (1) Internal:  internal error\r\n\t [[node Adam/NcclAllReduce_8 (defined at <ipython-input-15-df42e8590c26>:1) ]]\r\n\t [[GroupCrossDeviceControlEdges_4/Adam/Adam/update_9/Const/_679]]\r\n0 successful operations.\r\n9 derived errors ignored. [Op:__inference_distributed_function_9447]\r\n\r\nFunction call stack:\r\ndistributed_function -> distributed_function\r\n```\r\n\r\n</details>\r\n\r\nSwitching to hierarchical all reduce in the scope allows the code to run, but with a performance penalty and more errrors:\r\n\r\n<details>\r\n        <summary> Hierarchical All Reduce Error </summary>\r\n\r\n```\r\n2019-07-19 15:06:47.632060: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcublas.so.10.0\r\n2019-07-19 15:06:47.947109: W tensorflow/core/framework/model.cc:475] Failed to find a tunable parameter that would decrease the output time. This means that the autotuning optimization got stuck in a local maximum. The optimization attempt will be aborted.\r\n2019-07-19 15:06:48.925479: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudnn.so.7\r\n2019-07-19 15:07:02.595311: I tensorflow/core/profiler/lib/profiler_session.cc:174] Profiler session started.\r\n2019-07-19 15:07:02.610888: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcupti.so.10.0\r\n2019-07-19 15:07:07.254401: I tensorflow/core/platform/default/device_tracer.cc:641] Collecting 1045 kernel records, 173 memcpy records.\r\n2019-07-19 15:07:12.732921: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext_8}}]]\r\n\t [[GroupCrossDeviceControlEdges_8/Adam/Adam/update_9/Const/_879]]\r\n2019-07-19 15:07:12.732922: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext_8}}]]\r\n\t [[replica_4/metrics/accuracy/AssignAddVariableOp_1/_375]]\r\n2019-07-19 15:07:12.732962: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext_8}}]]\r\n\t [[Adam/Adam/group_deps/_951]]\r\n2019-07-19 15:07:12.733034: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext_8}}]]\r\n\t [[replica_9/metrics/accuracy/AssignAddVariableOp_1/_203]]\r\n2019-07-19 15:07:12.732989: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext_8}}]]\r\n\t [[GroupCrossDeviceControlEdges_0/Adam/Adam/update_9/Const/_631]]\r\n2019-07-19 15:07:12.732981: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext_8}}]]\r\n\t [[replica_3/metrics/accuracy/AssignAddVariableOp_1/_359]]\r\n2019-07-19 15:07:12.733029: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext_8}}]]\r\n\t [[metrics/accuracy/div_no_nan/ReadVariableOp_16/_450]]\r\n2019-07-19 15:07:12.732962: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext_9}}]]\r\n2019-07-19 15:07:12.733232: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext_8}}]]\r\n\t [[GroupCrossDeviceControlEdges_2/Adam/Adam/update_9/Const/_727]]\r\n2019-07-19 15:07:12.733380: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext_8}}]]\r\n\t [[GroupCrossDeviceControlEdges_0/Adam/Adam/update_9/Const/_763]]\r\n2019-07-19 15:07:12.735619: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext_8}}]]\r\n[I 15:08:10.336 LabApp] Saving file at /k\r\n```\r\n\r\n</details>\r\n\r\nFurther investigation has revealed that this only occurs when I add the 10th GPU on the node to the strategy... Using the *first* 9 GPUs is fine, but including the 10th GPU with any other combination of GPUs leads to this behavior. Confirmed on multiple independent systems after reinstalling cuda/drivers and restarting nodes. I still get an out-of-range error, but the model trains. The model also trains when *only* using the 10th gpu.\r\n\r\n<details>\r\n\r\n<summary> out of range error with nccl all reduce </summary>\r\n\r\n```\r\nname: TITAN Xp major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:1c:00.0\r\n2019-07-20 12:10:09.708295: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 1 with properties:\r\nname: TITAN Xp major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:1d:00.0\r\n2019-07-20 12:10:09.710603: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 2 with properties:\r\nname: TITAN Xp major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:1e:00.0\r\n2019-07-20 12:10:09.712948: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 3 with properties:\r\nname: TITAN Xp major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:3d:00.0\r\n2019-07-20 12:10:09.715631: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 4 with properties:\r\nname: TITAN Xp major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:3e:00.0\r\n2019-07-20 12:10:09.717939: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 5 with properties:\r\nname: TITAN Xp major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:3f:00.0\r\n2019-07-20 12:10:09.720316: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 6 with properties:\r\nname: TITAN Xp major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:40:00.0\r\n2019-07-20 12:10:09.720644: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudart.so.10.0\r\n2019-07-20 12:10:09.722035: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcublas.so.10.0\r\n2019-07-20 12:10:09.723341: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcufft.so.10.0\r\n2019-07-20 12:10:09.723662: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcurand.so.10.0\r\n2019-07-20 12:10:09.725225: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcusolver.so.10.0\r\n2019-07-20 12:10:09.726450: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcusparse.so.10.0\r\n2019-07-20 12:10:09.730176: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudnn.so.7\r\n2019-07-20 12:10:09.761821: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1763] Adding visible gpu devices: 0, 1, 2, 3, 4, 5, 6\r\n2019-07-20 12:10:09.762583: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 AVX512F FMA\r\n2019-07-20 12:10:11.263993: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x3c306c0 executing computations on platform CUDA. Devices:\r\n2019-07-20 12:10:11.264051: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): TITAN Xp, Compute Capability 6.1\r\n2019-07-20 12:10:11.264071: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (1): TITAN Xp, Compute Capability 6.1\r\n2019-07-20 12:10:11.264088: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (2): TITAN Xp, Compute Capability 6.1\r\n2019-07-20 12:10:11.264104: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (3): TITAN Xp, Compute Capability 6.1\r\n2019-07-20 12:10:11.264119: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (4): TITAN Xp, Compute Capability 6.1\r\n2019-07-20 12:10:11.264135: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (5): TITAN Xp, Compute Capability 6.1\r\n2019-07-20 12:10:11.264151: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (6): TITAN Xp, Compute Capability 6.1\r\n2019-07-20 12:10:11.273304: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2300010000 Hz\r\n2019-07-20 12:10:11.275776: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x45d7fb0 executing computations on platform Host. Devices:\r\n2019-07-20 12:10:11.275796: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): <undefined>, <undefined>\r\n2019-07-20 12:10:11.308790: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 0 with properties:\r\nname: TITAN Xp major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:1c:00.0\r\n2019-07-20 12:10:11.310775: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 1 with properties:\r\nname: TITAN Xp major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:1d:00.0\r\n2019-07-20 12:10:11.312785: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 2 with properties:\r\nname: TITAN Xp major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:1e:00.0\r\n2019-07-20 12:10:11.314726: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 3 with properties:\r\nname: TITAN Xp major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:3d:00.0\r\n2019-07-20 12:10:11.316719: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 4 with properties:\r\nname: TITAN Xp major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:3e:00.0\r\n2019-07-20 12:10:11.318675: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 5 with properties:\r\nname: TITAN Xp major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:3f:00.0\r\n2019-07-20 12:10:11.320680: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 6 with properties:\r\nname: TITAN Xp major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:40:00.0\r\n2019-07-20 12:10:11.320722: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudart.so.10.0\r\n2019-07-20 12:10:11.320732: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcublas.so.10.0\r\n2019-07-20 12:10:11.320741: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcufft.so.10.0\r\n2019-07-20 12:10:11.320767: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcurand.so.10.0\r\n2019-07-20 12:10:11.320778: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcusolver.so.10.0\r\n2019-07-20 12:10:11.320787: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcusparse.so.10.0\r\n2019-07-20 12:10:11.320797: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudnn.so.7\r\n2019-07-20 12:10:11.347344: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1763] Adding visible gpu devices: 0, 1, 2, 3, 4, 5, 6\r\n2019-07-20 12:10:11.347438: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudart.so.10.0\r\n2019-07-20 12:10:11.362271: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1181] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-07-20 12:10:11.362286: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1187]      0 1 2 3 4 5 6\r\n2019-07-20 12:10:11.362292: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1200] 0:   N Y Y Y Y Y Y\r\n2019-07-20 12:10:11.362296: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1200] 1:   Y N Y Y Y Y Y\r\n2019-07-20 12:10:11.362300: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1200] 2:   Y Y N Y Y Y Y\r\n2019-07-20 12:10:11.362304: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1200] 3:   Y Y Y N Y Y Y\r\n2019-07-20 12:10:11.362309: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1200] 4:   Y Y Y Y N Y Y\r\n2019-07-20 12:10:11.362313: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1200] 5:   Y Y Y Y Y N Y\r\n2019-07-20 12:10:11.362317: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1200] 6:   Y Y Y Y Y Y N\r\n2019-07-20 12:10:11.378594: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1326] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 11424 MB memory) -> physical GPU (device: 0, name: TITAN Xp, pci bus id: 0000:1c:00.0, compute capability: 6.1)\r\n2019-07-20 12:10:11.380969: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1326] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:1 with 11424 MB memory) -> physical GPU (device: 1, name: TITAN Xp, pci bus id: 0000:1d:00.0, compute capability: 6.1)\r\n2019-07-20 12:10:11.385188: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1326] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:2 with 11424 MB memory) -> physical GPU (device: 2, name: TITAN Xp, pci bus id: 0000:1e:00.0, compute capability: 6.1)\r\n2019-07-20 12:10:11.389861: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1326] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:3 with 11424 MB memory) -> physical GPU (device: 3, name: TITAN Xp, pci bus id: 0000:3d:00.0, compute capability: 6.1)\r\n2019-07-20 12:10:11.393361: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1326] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:4 with 11424 MB memory) -> physical GPU (device: 4, name: TITAN Xp, pci bus id: 0000:3e:00.0, compute capability: 6.1)\r\n2019-07-20 12:10:11.397087: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1326] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:5 with 11424 MB memory) -> physical GPU (device: 5, name: TITAN Xp, pci bus id: 0000:3f:00.0, compute capability: 6.1)\r\n2019-07-20 12:10:11.400702: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1326] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:6 with 11424 MB memory) -> physical GPU (device: 6, name: TITAN Xp, pci bus id: 0000:40:00.0, compute capability: 6.1)\r\n2019-07-20 12:10:11.579203: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 0 with properties:\r\nname: TITAN Xp major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:1c:00.0\r\n2019-07-20 12:10:11.581543: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 1 with properties:\r\nname: TITAN Xp major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:1d:00.0\r\n2019-07-20 12:10:11.583872: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 2 with properties:\r\nname: TITAN Xp major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:1e:00.0\r\n2019-07-20 12:10:11.585869: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 3 with properties:\r\nname: TITAN Xp major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:3d:00.0\r\n2019-07-20 12:10:11.587873: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 4 with properties:\r\nname: TITAN Xp major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:3e:00.0\r\n2019-07-20 12:10:11.589889: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 5 with properties:\r\nname: TITAN Xp major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:3f:00.0\r\n2019-07-20 12:10:11.591870: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1640] Found device 6 with properties:\r\nname: TITAN Xp major: 6 minor: 1 memoryClockRate(GHz): 1.582\r\npciBusID: 0000:40:00.0\r\n2019-07-20 12:10:11.591903: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudart.so.10.0\r\n2019-07-20 12:10:11.591913: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcublas.so.10.0\r\n2019-07-20 12:10:11.591921: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcufft.so.10.0\r\n2019-07-20 12:10:11.591931: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcurand.so.10.0\r\n2019-07-20 12:10:11.591957: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcusolver.so.10.0\r\n2019-07-20 12:10:11.591967: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcusparse.so.10.0\r\n2019-07-20 12:10:11.591978: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudnn.so.7\r\n2019-07-20 12:10:11.618747: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1763] Adding visible gpu devices: 0, 1, 2, 3, 4, 5, 6\r\n2019-07-20 12:10:11.619236: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1181] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-07-20 12:10:11.619246: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1187]      0 1 2 3 4 5 6\r\n2019-07-20 12:10:11.619255: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1200] 0:   N Y Y Y Y Y Y\r\n2019-07-20 12:10:11.619261: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1200] 1:   Y N Y Y Y Y Y\r\n2019-07-20 12:10:11.619292: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1200] 2:   Y Y N Y Y Y Y\r\n2019-07-20 12:10:11.619297: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1200] 3:   Y Y Y N Y Y Y\r\n2019-07-20 12:10:11.619303: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1200] 4:   Y Y Y Y N Y Y\r\n2019-07-20 12:10:11.619320: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1200] 5:   Y Y Y Y Y N Y\r\n2019-07-20 12:10:11.619326: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1200] 6:   Y Y Y Y Y Y N\r\n2019-07-20 12:10:11.635672: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1326] Created TensorFlow device (/device:GPU:0 with 11424 MB memory) -> physical GPU (device: 0, name: TITAN Xp, pci bus id: 0000:1c:00.0, compute capability: 6.1)\r\n2019-07-20 12:10:11.637653: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1326] Created TensorFlow device (/device:GPU:1 with 11424 MB memory) -> physical GPU (device: 1, name: TITAN Xp, pci bus id: 0000:1d:00.0, compute capability: 6.1)\r\n2019-07-20 12:10:11.639716: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1326] Created TensorFlow device (/device:GPU:2 with 11424 MB memory) -> physical GPU (device: 2, name: TITAN Xp, pci bus id: 0000:1e:00.0, compute capability: 6.1)\r\n2019-07-20 12:10:11.641688: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1326] Created TensorFlow device (/device:GPU:3 with 11424 MB memory) -> physical GPU (device: 3, name: TITAN Xp, pci bus id: 0000:3d:00.0, compute capability: 6.1)\r\n2019-07-20 12:10:11.643693: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1326] Created TensorFlow device (/device:GPU:4 with 11424 MB memory) -> physical GPU (device: 4, name: TITAN Xp, pci bus id: 0000:3e:00.0, compute capability: 6.1)\r\n2019-07-20 12:10:11.645687: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1326] Created TensorFlow device (/device:GPU:5 with 11424 MB memory) -> physical GPU (device: 5, name: TITAN Xp, pci bus id: 0000:3f:00.0, compute capability: 6.1)\r\n2019-07-20 12:10:11.647730: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1326] Created TensorFlow device (/device:GPU:6 with 11424 MB memory) -> physical GPU (device: 6, name: TITAN Xp, pci bus id: 0000:40:00.0, compute capability: 6.1)\r\n2019-07-20 12:10:26.189075: W tensorflow/compiler/jit/mark_for_compilation_pass.cc:1483] (One-time warning): Not using XLA:CPU for cluster because envvar TF_XLA_FLAGS=--tf_xla_cpu_global_jit was not set.  If you want XLA:CPU, either set that envvar, or use experimental_jit_scope to enable XLA:CPU.  To confirm that XLA is active, pass --vmodule=xla_compilation_cache=1 (as a proper command-line flag, not via TF_XLA_FLAGS) or set the envvar XLA_FLAGS=--xla_hlo_profile.\r\n2019-07-20 12:10:26.273130: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcublas.so.10.0\r\n2019-07-20 12:10:28.489688: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcudnn.so.7\r\n2019-07-20 12:10:36.757915: I tensorflow/core/profiler/lib/profiler_session.cc:174] Profiler session started.\r\n2019-07-20 12:10:36.759100: I tensorflow/stream_executor/platform/default/dso_loader.cc:42] Successfully opened dynamic library libcupti.so.10.0\r\n2019-07-20 12:10:40.328991: I tensorflow/core/platform/default/device_tracer.cc:641] Collecting 722 kernel records, 110 memcpy records.\r\n2019-07-20 12:10:45.501340: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext_2}}]]\r\n\t [[GroupCrossDeviceControlEdges_0/Adam/Adam/update_6/Const/_297]]\r\n2019-07-20 12:10:45.501340: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext_2}}]]\r\n\t [[replica_3/metrics/accuracy/AssignAddVariableOp_1/_187]]\r\n2019-07-20 12:10:45.501340: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext_2}}]]\r\n\t [[GroupCrossDeviceControlEdges_5/Adam/Adam/update_5_1/Const/_365]]\r\n2019-07-20 12:10:45.501340: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext_2}}]]\r\n\t [[PermConstNCHWToNHWC-LayoutOptimizer/_16]]\r\n2019-07-20 12:10:45.501348: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext_2}}]]\r\n\t [[GroupCrossDeviceControlEdges_2/Adam/Adam/update_6/Const/_421]]\r\n2019-07-20 12:10:45.501348: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext_2}}]]\r\n\t [[GroupCrossDeviceControlEdges_2/Identity_1/_523]]\r\n2019-07-20 12:10:45.501354: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext_2}}]]\r\n\t [[replica_5/loss/mul/_260]]\r\n2019-07-20 12:10:45.502198: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Out of range: End of sequence\r\n\t [[{{node IteratorGetNext_2}}]]\r\n```\r\n</details>\r\n\r\n**Describe the expected behavior**\r\n\r\n**Code to reproduce the issue**\r\n\r\nhttps://www.tensorflow.org/beta/tutorials/distribute/keras\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30885", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30885/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30885/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30885/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30885", "id": 470483184, "node_id": "MDU6SXNzdWU0NzA0ODMxODQ=", "number": 30885, "title": "Possible GPU Memory Leak in Non-Distributed Use of `tf.estimator.train_and_evaluate`", "user": {"login": "corynezin", "id": 30993572, "node_id": "MDQ6VXNlcjMwOTkzNTcy", "avatar_url": "https://avatars1.githubusercontent.com/u/30993572?v=4", "gravatar_id": "", "url": "https://api.github.com/users/corynezin", "html_url": "https://github.com/corynezin", "followers_url": "https://api.github.com/users/corynezin/followers", "following_url": "https://api.github.com/users/corynezin/following{/other_user}", "gists_url": "https://api.github.com/users/corynezin/gists{/gist_id}", "starred_url": "https://api.github.com/users/corynezin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/corynezin/subscriptions", "organizations_url": "https://api.github.com/users/corynezin/orgs", "repos_url": "https://api.github.com/users/corynezin/repos", "events_url": "https://api.github.com/users/corynezin/events{/privacy}", "received_events_url": "https://api.github.com/users/corynezin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-07-19T18:39:54Z", "updated_at": "2019-09-01T15:58:07Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Red Hat 7\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): Binary\r\n- TensorFlow version (use command below): 1.10.0\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 9.0\r\n- GPU model and memory: K80 12GB\r\n\r\n**Describe the current behavior**\r\n\r\nWhen running `tf.estimator.train_and_evaluate` it seems the graph or session is somehow not properly destroyed when `max_steps` is `None` or less than the number of steps in the `input_fn`.  This can result in OOM errors when running prediction afterward on GPU.\r\n\r\n**Describe the expected behavior**\r\n\r\nUsing `tf.estimator.train_and_evaluate` should destroy the graph/session when either the max steps has been reached, OR the input_fn raises an `OutOfRangeError`\r\n\r\n**Code to reproduce the issue**\r\n\r\n`python min.py bad`\r\n\r\nFor expected behavior:\r\n\r\n`python min.py good`\r\n\r\nNOTE: Your running the bad code may or may not crash depending on your GPU memory.  To force crashing, you can increase the array size: `np.random.rand(xx, yy)`\r\n\r\n```python\r\nimport sys\r\n\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\nfrom hooks import InitHook\r\n\r\ndef input_fn():\r\n  dataset = tf.data.Dataset.range(100)\r\n  # Make sequence data\r\n  dataset = dataset.map(lambda x: {'x': [x]})\r\n  dataset = dataset.repeat(3)\r\n  return dataset\r\n\r\ndef model_fn(features, labels, mode, params):\r\n  seq = features['x']\r\n  with tf.device('/gpu:0'):\r\n    arr = np.random.rand(3000000, 400)\r\n    var = tf.get_variable('big', arr.shape, trainable=False)\r\n    emb = tf.nn.embedding_lookup(var, seq)\r\n  logits = tf.layers.dense(emb, 1000)\r\n  predictions = tf.greater(logits, 0.0)\r\n  # Don't care about loss but have to provide something\r\n  loss = tf.reduce_mean(logits)\r\n  trainable_vars = tf.trainable_variables()\r\n  global_step = tf.train.get_or_create_global_step()\r\n  saveable_vars = trainable_vars + [global_step]\r\n  def init_fn(scaffold, sess):\r\n    sess.run(var.initializer, {var.initial_value: arr})\r\n  saver = tf.train.Saver(var_list=saveable_vars)\r\n  if mode == tf.estimator.ModeKeys.TRAIN:\r\n    scaffold = tf.train.Scaffold(init_fn=init_fn, saver=saver)\r\n    optimizer = tf.train.GradientDescentOptimizer(0.1)\r\n    train_op = optimizer.minimize(loss, global_step=global_step)\r\n    output_spec = tf.estimator.EstimatorSpec(\r\n      mode=mode,\r\n      loss=loss,\r\n      scaffold=scaffold,\r\n      train_op=train_op)\r\n  elif mode == tf.estimator.ModeKeys.EVAL:\r\n    hooks = [InitHook(var.initializer, {var.initial_value: arr})]\r\n    ready_for_local_init_op = tf.constant([], dtype=tf.string)\r\n    ready_op = tf.constant([], dtype=tf.string)\r\n    scaffold = tf.train.Scaffold(init_fn=init_fn, saver=saver, ready_for_local_init_op=ready_for_local_init_op, ready_op=ready_op)\r\n    output_spec = tf.estimator.EstimatorSpec(\r\n      scaffold=scaffold,\r\n      mode=mode,\r\n      evaluation_hooks=hooks,\r\n      loss=loss)\r\n  elif mode == tf.estimator.ModeKeys.PREDICT:\r\n    ready_for_local_init_op = tf.constant([], dtype=tf.string)\r\n    ready_op = tf.constant([], dtype=tf.string)\r\n    scaffold = tf.train.Scaffold(ready_for_local_init_op=ready_for_local_init_op, ready_op=ready_op, saver=saver)\r\n    hooks = [InitHook(var.initializer, {var.initial_value: arr})]\r\n    predictions = {\r\n      'predictions': predictions\r\n    }\r\n    output_spec = tf.estimator.EstimatorSpec(\r\n      mode=mode,\r\n      predictions=predictions,\r\n      scaffold=scaffold,\r\n      prediction_hooks=hooks)\r\n  return output_spec\r\n\r\ntf.logging.set_verbosity(tf.logging.INFO)\r\nestimator = tf.estimator.Estimator(model_fn=model_fn, config=tf.estimator.RunConfig())\r\neval_spec = tf.estimator.EvalSpec(input_fn=input_fn, start_delay_secs=0, throttle_secs=3)\r\nif sys.argv[1] == 'bad':\r\n  train_spec = tf.estimator.TrainSpec(input_fn=input_fn)\r\n  tf.estimator.train_and_evaluate(estimator, train_spec, eval_spec)\r\nelif sys.argv[1] == 'good':\r\n  train_spec = tf.estimator.TrainSpec(input_fn=input_fn, max_steps=100)\r\n  estimator.evaluate(input_fn=input_fn)\r\nresults = estimator.predict(input_fn=input_fn)\r\nfor result in results:\r\n  pass\r\n```\r\n\r\nEdit:\r\nIn the same directory is `hooks.py` containing the following:\r\n```python\r\nclass InitHook(training.SessionRunHook):\r\n  def __init__(self, op, feed_dict):\r\n    self.op = op\r\n    self.feed_dict = feed_dict\r\n\r\n  def after_create_session(self, session, coord):  # pylint: disable=unused-argument\r\n    session.run(self.op, feed_dict=self.feed_dict)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30881", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30881/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30881/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30881/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30881", "id": 470413499, "node_id": "MDU6SXNzdWU0NzA0MTM0OTk=", "number": 30881, "title": "Inference on TFLite object detection model fails on run : \"(num_classes_with_background - num_classes <= 1) was not true\"", "user": {"login": "tnodelan", "id": 53090929, "node_id": "MDQ6VXNlcjUzMDkwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/53090929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tnodelan", "html_url": "https://github.com/tnodelan", "followers_url": "https://api.github.com/users/tnodelan/followers", "following_url": "https://api.github.com/users/tnodelan/following{/other_user}", "gists_url": "https://api.github.com/users/tnodelan/gists{/gist_id}", "starred_url": "https://api.github.com/users/tnodelan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tnodelan/subscriptions", "organizations_url": "https://api.github.com/users/tnodelan/orgs", "repos_url": "https://api.github.com/users/tnodelan/repos", "events_url": "https://api.github.com/users/tnodelan/events{/privacy}", "received_events_url": "https://api.github.com/users/tnodelan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "achowdhery", "id": 4723042, "node_id": "MDQ6VXNlcjQ3MjMwNDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4723042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/achowdhery", "html_url": "https://github.com/achowdhery", "followers_url": "https://api.github.com/users/achowdhery/followers", "following_url": "https://api.github.com/users/achowdhery/following{/other_user}", "gists_url": "https://api.github.com/users/achowdhery/gists{/gist_id}", "starred_url": "https://api.github.com/users/achowdhery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/achowdhery/subscriptions", "organizations_url": "https://api.github.com/users/achowdhery/orgs", "repos_url": "https://api.github.com/users/achowdhery/repos", "events_url": "https://api.github.com/users/achowdhery/events{/privacy}", "received_events_url": "https://api.github.com/users/achowdhery/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "achowdhery", "id": 4723042, "node_id": "MDQ6VXNlcjQ3MjMwNDI=", "avatar_url": "https://avatars3.githubusercontent.com/u/4723042?v=4", "gravatar_id": "", "url": "https://api.github.com/users/achowdhery", "html_url": "https://github.com/achowdhery", "followers_url": "https://api.github.com/users/achowdhery/followers", "following_url": "https://api.github.com/users/achowdhery/following{/other_user}", "gists_url": "https://api.github.com/users/achowdhery/gists{/gist_id}", "starred_url": "https://api.github.com/users/achowdhery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/achowdhery/subscriptions", "organizations_url": "https://api.github.com/users/achowdhery/orgs", "repos_url": "https://api.github.com/users/achowdhery/repos", "events_url": "https://api.github.com/users/achowdhery/events{/privacy}", "received_events_url": "https://api.github.com/users/achowdhery/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-07-19T16:15:53Z", "updated_at": "2019-08-23T07:27:05Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes, however greatly adapted from scripts\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10 64bit\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: Lenovo PB2-690M Android 6.0.1 API 23\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): 1.13.1\r\n- Python version: 3.7.3\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: CUDA toolkit 10.0.130 / cuDNN 7.3.1\r\n- GPU model and memory: Intel i7-6700 3.7GHz 16Go\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nThe script is in two parts :\r\nFirst few pictures are taken on phone to re-train a model with overfiting (ssd_resnet_50_fpn_coco) on the server, which produces a .tflite model, then sends it back to the device. \r\n\r\nProblem emerges when I try to run the inference with a newly taken image and the .tflite model as in the associated TFLite object detection example script : \r\nCaused by: java.lang.IllegalArgumentException: Internal error: Failed to run on the given Interpreter: tensorflow/lite/kernels/detection_postprocess.cc:688 (num_classes_with_background - num_classes <= 1) was not true.Node number 228 (TFLite_Detection_PostProcess) failed to invoke. \r\nat org.tensorflow.lite.NativeInterpreterWrapper.run(Native Method)\r\n        at org.tensorflow.lite.NativeInterpreterWrapper.run(NativeInterpreterWrapper.java:149)\r\n        at org.tensorflow.lite.Interpreter.runForMultipleInputsOutputs(Interpreter.java:275)\r\n        at tflite.TFLiteObjectDetectionAPIModel.recognizeImage(TFLiteObjectDetectionAPIModel.java:164)\r\n\r\n**Describe the expected behavior**\r\nAs you can guess, it would be expected to run without failure. Note that using the .tflite model given by the TFLite object detection example script produces no error with the same picture (although it wouldn't yield any pertinent result). \r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\nServer Python Part, used to convert the exported graph into .tflite file\r\n\r\n  ```\r\n    graph_def_file=os.path.join(BOX_PATH, \"tflite_graph.pb\")\r\n    input_arrays=[\"normalized_input_image_tensor\"]\r\n    output_arrays=['TFLite_Detection_PostProcess','TFLite_Detection_PostProcess:1','TFLite_Detection_PostProcess:2','TFLite_Detection_PostProcess:3']\r\n    input_tensor={\"normalized_input_image_tensor\":[1, 640, 640, 3]}\r\n    converter = tf.lite.TFLiteConverter.from_frozen_graph(graph_def_file, input_arrays, output_arrays, input_tensor)\r\n    converter.target_ops = [tf.lite.OpsSet.TFLITE_BUILTINS, tf.lite.OpsSet.SELECT_TF_OPS]\r\n    converter.allow_custom_ops = True;\r\n    tflite_quant_model = converter.convert()\r\n    open(os.path.join(BOX_PATH, \"frozen_inference_graph.tflite\", \"wb\").write(tflite_quant_model)\r\n\r\n```\r\nHere is the principal change in script for the inference run (Java code part):\r\n[TFLiteObjectDetectionAPIModel.txt](https://github.com/tensorflow/tensorflow/files/3411835/TFLiteObjectDetectionAPIModel.txt)\r\n\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\nInference script taken from https://github.com/tensorflow/examples/tree/master/lite/examples/object_detection/android\r\nModel tested with following script prior to .tflite conversion\r\nhttps://github.com/tiangolo/tensorflow-models/blob/master/research/object_detection/object_detection_tutorial.ipynb\r\n\r\nHere it is, thanks for your reply and help !\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30877", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30877/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30877/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30877/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30877", "id": 470290916, "node_id": "MDU6SXNzdWU0NzAyOTA5MTY=", "number": 30877, "title": "Feature request: 24-bit audio support in tf.audio.decode_wav", "user": {"login": "carlthome", "id": 1595907, "node_id": "MDQ6VXNlcjE1OTU5MDc=", "avatar_url": "https://avatars3.githubusercontent.com/u/1595907?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carlthome", "html_url": "https://github.com/carlthome", "followers_url": "https://api.github.com/users/carlthome/followers", "following_url": "https://api.github.com/users/carlthome/following{/other_user}", "gists_url": "https://api.github.com/users/carlthome/gists{/gist_id}", "starred_url": "https://api.github.com/users/carlthome/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carlthome/subscriptions", "organizations_url": "https://api.github.com/users/carlthome/orgs", "repos_url": "https://api.github.com/users/carlthome/repos", "events_url": "https://api.github.com/users/carlthome/events{/privacy}", "received_events_url": "https://api.github.com/users/carlthome/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-07-19T12:05:29Z", "updated_at": "2019-10-09T09:01:23Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- TensorFlow version (you are using): 1.14\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nI'm working with music data of \"DVD-quality\" i.e. 48 kHz / 24-bit WAV and want to read the files into a `tf.data` pipeline for model training via `tf.io.read_file` and `tf.audio.decode_wav` but unfortunately I got caught up on this exception:\r\n\r\n> InvalidArgumentError: Can only read 16-bit WAV files, but received 24 [Op:DecodeWav]\r\n\r\nWhile mastered mixes tend to end up being 44.1 kHz / 16-bit, in my experience 24-bit audio is extremely common among music producers as that format has a good trade-off between disk space and noise floor so the mic gain isn't as finicky etc.\r\n\r\n**Will this change the current api? How?**\r\nNo.\r\n\r\n**Who will benefit with this feature?**\r\nAudio researchers\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30871", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30871/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30871/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30871/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30871", "id": 470153958, "node_id": "MDU6SXNzdWU0NzAxNTM5NTg=", "number": 30871, "title": "TensorRT INT8 Calibration Table is Missing", "user": {"login": "jiarongqiu", "id": 17984404, "node_id": "MDQ6VXNlcjE3OTg0NDA0", "avatar_url": "https://avatars3.githubusercontent.com/u/17984404?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jiarongqiu", "html_url": "https://github.com/jiarongqiu", "followers_url": "https://api.github.com/users/jiarongqiu/followers", "following_url": "https://api.github.com/users/jiarongqiu/following{/other_user}", "gists_url": "https://api.github.com/users/jiarongqiu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jiarongqiu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jiarongqiu/subscriptions", "organizations_url": "https://api.github.com/users/jiarongqiu/orgs", "repos_url": "https://api.github.com/users/jiarongqiu/repos", "events_url": "https://api.github.com/users/jiarongqiu/events{/privacy}", "received_events_url": "https://api.github.com/users/jiarongqiu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1754777628, "node_id": "MDU6TGFiZWwxNzU0Nzc3NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu:tensorrt", "name": "comp:gpu:tensorrt", "color": "ea98ba", "default": false, "description": "Issues specific to TensorRT"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-07-19T06:06:26Z", "updated_at": "2019-12-26T18:34:16Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\r\n- TensorFlow installed from (source or binary):binary\r\n- TensorFlow version (use command below): v1.13.0-rc1-0-g54c5616308\r\n- Python version:3.5.2\r\n- CUDA/cuDNN version: CUDA 10\r\n- GPU model and memory: Tesla V100 16GB\r\n\r\n**Describe the current behavior**\r\nTFTRT failed to collect calibration info and cannot create the INT8 inference graph. \r\n\r\n**Code to reproduce the issue**\r\nHere is the model [link](https://drive.google.com/drive/folders/1hi23VeNomhHGj6Ai94Z44S6NRJ6uByJ5?usp=sharing).\r\n```\r\ndef run_calibration(calib_graph, dataset):\r\n    tf.reset_default_graph()\r\n    tf_config = tf.ConfigProto()\r\n    tf_config.gpu_options.allow_growth = True\r\n    x = np.random.randint(0,10000,(1,40))\r\n    with tf.Graph().as_default() as g:\r\n        input, output = tf.import_graph_def(graph_def=calib_graph, return_elements=[\"X\", \"model/dense/BiasAdd\"],\r\n                                            name='')\r\n        input = input.outputs[0]\r\n        output = output.outputs[0]\r\n        sess = tf.Session(config=tf_config, graph=g)\r\n\r\n        for i in range(10):\r\n            val = sess.run(output, {input: x})\r\n        return calib_graph\r\n\r\n\r\ndef int8quant():\r\n    with tf.Session() as sess:\r\n        saver = tf.train.import_meta_graph(\"/workspace/exps/ptb/ptb_rnn_128/ptb_rnn_128-72600.meta\")\r\n        saver.restore(sess, \"/workspace/exps/ptb/ptb_rnn_128/ptb_rnn_128-72600\")\r\n        your_outputs = ['model/dense/BiasAdd']\r\n        frozen_graph = tf.graph_util.convert_variables_to_constants(\r\n            sess,\r\n            tf.get_default_graph().as_graph_def(),\r\n            output_node_names=your_outputs)\r\n        trt_graph = trt.create_inference_graph(\r\n            input_graph_def=frozen_graph,\r\n            outputs=your_outputs,\r\n            max_batch_size=10,\r\n            max_workspace_size_bytes=2 << 30,\r\n            precision_mode='INT8',\r\n            minimum_segment_size=2  # minimum number of nodes in an engine\r\n       )\r\n    int8graph = run_calibration(trt_graph, None)\r\n    int8_graph = trt.calib_graph_to_infer_graph(int8graph)\r\n```\r\n\r\n**Other info / logs**\r\nHere is the trace logs.\r\n```\r\n2019-07-19 03:47:34.167937: E tensorflow/contrib/tensorrt/log/trt_logger.cc:38] DefaultLogger Tensor TensorRTOutputPH_0cannot be both input and output\r\n2019-07-19 03:47:34.167960: E tensorflow/contrib/tensorrt/log/trt_logger.cc:38] DefaultLogger Network must have at least one output\r\n2019-07-19 03:47:38.553760: E tensorflow/contrib/tensorrt/log/trt_logger.cc:38] DefaultLogger Tensor (Unnamed ITensor* 3) is uniformly zero; network calibration failed.\r\n2019-07-19 03:47:38.578654: E tensorflow/contrib/tensorrt/convert/convert_graph.cc:220] Calibration table is empty\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.5/runpy.py\", line 184, in _run_module_as_main\r\n    \"__main__\", mod_spec)\r\n  File \"/usr/lib/python3.5/runpy.py\", line 85, in _run_code\r\n    exec(code, run_globals)\r\n  File \"/workspace/code/rnnquant/trt/convert.py\", line 99, in <module>\r\n    main()\r\n  File \"/workspace/code/rnnquant/trt/convert.py\", line 95, in main\r\n    int8quant()\r\n  File \"/workspace/code/rnnquant/trt/convert.py\", line 89, in int8quant\r\n    int8_graph = trt.calib_graph_to_infer_graph(int8graph)\r\n  File \"/usr/local/lib/python3.5/dist-packages/tensorflow/contrib/tensorrt/python/trt_convert.py\", line 416, in calib_graph_to_infer_graph\r\n    int(msg[0]))\r\ntensorflow.python.framework.errors_impl.UnknownError: Calibration table is missing. This shouldn't have happened!\r\n\r\n```\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30851", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30851/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30851/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30851/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30851", "id": 469887885, "node_id": "MDU6SXNzdWU0Njk4ODc4ODU=", "number": 30851, "title": "Can not Exporting a GraphDef from file", "user": {"login": "wendy518", "id": 31964713, "node_id": "MDQ6VXNlcjMxOTY0NzEz", "avatar_url": "https://avatars1.githubusercontent.com/u/31964713?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wendy518", "html_url": "https://github.com/wendy518", "followers_url": "https://api.github.com/users/wendy518/followers", "following_url": "https://api.github.com/users/wendy518/following{/other_user}", "gists_url": "https://api.github.com/users/wendy518/gists{/gist_id}", "starred_url": "https://api.github.com/users/wendy518/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wendy518/subscriptions", "organizations_url": "https://api.github.com/users/wendy518/orgs", "repos_url": "https://api.github.com/users/wendy518/repos", "events_url": "https://api.github.com/users/wendy518/events{/privacy}", "received_events_url": "https://api.github.com/users/wendy518/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-07-18T17:09:14Z", "updated_at": "2019-07-19T05:36:57Z", "closed_at": null, "author_association": "NONE", "body": "Hi, i used code provided in https://github.com/tensorflow/tensorflow/blob/master/tensorflow/lite/g3doc/convert/cmdline_examples.md. \r\n\r\nConvert a TensorFlow GraphDef \r\n\r\n```\r\ncurl https://storage.googleapis.com/download.tensorflow.org/models/mobilenet_v1_0.50_128_frozen.tgz \\\r\n  | tar xzv -C /tmp\r\ntflite_convert \\\r\n  --output_file=/tmp/foo.tflite \\\r\n  --graph_def_file=/tmp/mobilenet_v1_0.50_128/frozen_graph.pb \\\r\n  --input_arrays=input \\\r\n  --output_arrays=MobilenetV1/Predictions/Reshape_1**\r\n```\r\n\r\n### error\r\n Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-07-18 17:14:34.558992: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2494150000 Hz\r\n2019-07-18 17:14:34.559779: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x560a0f59d790 executing computations on platform Host. Devices:\r\n2019-07-18 17:14:34.559868: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): <undefined>, <undefined>\r\n2019-07-18 17:14:35.103189: I tensorflow/core/grappler/devices.cc:60] Number of eligible GPUs (core count >= 8, compute capability >= 0.0): 0 (Note: TensorFlow was not compiled with CUDA support)\r\n2019-07-18 17:14:35.103362: I tensorflow/core/grappler/clusters/single_machine.cc:356] Starting new session\r\n2019-07-18 17:14:35.426148: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:716] Optimization results for grappler item: graph_to_optimize\r\n2019-07-18 17:14:35.426184: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   constant folding: Graph size after: 174 nodes (-381), 173 edges (-408), time = 270.209ms.\r\n2019-07-18 17:14:35.426195: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   constant folding: Graph size after: 174 nodes (0), 173 edges (0), time = 14.101ms.\r\nTraceback (most recent call last):\r\n  File \"/home/wangxy/miniconda3/envs/ml/bin/tflite_convert\", line 10, in <module>\r\n    sys.exit(main())\r\n  File \"/home/wangxy/miniconda3/envs/ml/lib/python3.6/site-packages/tensorflow_core/lite/python/tflite_convert.py\", line 515, in main\r\n    app.run(main=run_main, argv=sys.argv[:1])\r\n  File \"/home/wangxy/miniconda3/envs/ml/lib/python3.6/site-packages/tensorflow_core/python/platform/app.py\", line 40, in run\r\n    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)\r\n  File \"/home/wangxy/miniconda3/envs/ml/lib/python3.6/site-packages/absl/app.py\", line 300, in run\r\n    _run_main(main, args)\r\n  File \"/home/wangxy/miniconda3/envs/ml/lib/python3.6/site-packages/absl/app.py\", line 251, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"/home/wangxy/miniconda3/envs/ml/lib/python3.6/site-packages/tensorflow_core/lite/python/tflite_convert.py\", line 511, in run_main\r\n    _convert_tf1_model(tflite_flags)\r\n  File \"/home/wangxy/miniconda3/envs/ml/lib/python3.6/site-packages/tensorflow_core/lite/python/tflite_convert.py\", line 199, in _convert_tf1_model\r\n    output_data = converter.convert()\r\n  File \"/home/wangxy/miniconda3/envs/ml/lib/python3.6/site-packages/tensorflow_core/lite/python/lite.py\", line 983, in convert\r\n    **converter_kwargs)\r\n  File \"/home/wangxy/miniconda3/envs/ml/lib/python3.6/site-packages/tensorflow_core/lite/python/convert.py\", line 437, in toco_convert_impl\r\n    enable_mlir_converter=enable_mlir_converter)\r\n  File \"/home/wangxy/miniconda3/envs/ml/lib/python3.6/site-packages/tensorflow_core/lite/python/convert.py\", line 155, in toco_convert_protos\r\n    fp_debug.write(debug_info_str)\r\n  File \"/home/wangxy/miniconda3/envs/ml/lib/python3.6/tempfile.py\", line 485, in func_wrapper\r\n    return func(*args, **kwargs)\r\nTypeError: a bytes-like object is required, not 'str'\r\nException ignored in: <bound method _TensorCacheDeleter.__del__ of <tensorflow.python.eager.context._TensorCacheDeleter object at 0x7f484fd2c550>>\r\nTraceback (most recent call last):\r\n  File \"/home/wangxy/miniconda3/envs/ml/lib/python3.6/site-packages/tensorflow_core/python/eager/context.py\", line 316, in __del__\r\nTypeError: argument of type 'NoneType' is not iterable\r\n\r\n\r\nI also try code fromhttps://www.tensorflow.org/lite/convert/cmdline_examples?source=post_page\r\nthere still appears mistake and it can not get tflite\r\n\r\n```\r\nimport tensorflow as tf\r\ngraph_def_file = \"/path/to/Downloads/mobilenet_v1_1.0_224/frozen_graph.pb\"\r\ninput_arrays = [\"input\"]\r\noutput_arrays = [\"MobilenetV1/Predictions/Softmax\"]\r\n\r\nconverter = tf.lite.TFLiteConverter.from_frozen_graph(\r\n  graph_def_file, input_arrays, output_arrays)\r\ntflite_model = converter.convert()\r\nopen(\"converted_model.tflite\", \"wb\").write(tflite_model)\r\n```\r\n\r\n### error:\r\n2019-07-18 17:51:00.100545: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-07-18 17:51:00.130812: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2494150000 Hz\r\n2019-07-18 17:51:00.131427: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x564072ecb610 executing computations on platform Host. Devices:\r\n2019-07-18 17:51:00.131468: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): <undefined>, <undefined>\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 2, in <module>\r\n  File \"/home/wangxy/miniconda3/envs/ml/lib/python3.6/site-packages/tensorflow_core/lite/python/lite.py\", line 668, in from_frozen_graph\r\n    raise IOError(\"File '{0}' does not exist.\".format(graph_def_file))\r\nOSError: File '/home/python/frozen_graph.pb' does not exist.\r\n>>> tflite_model = converter.convert()\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nNameError: name 'converter' is not defined\r\n>>> open(\"converted_model.tflite\", \"wb\").write(tflite_model)\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\nNameError: name 'tflite_model' is not defined\r\n>>> \r\nException ignored in: <bound method _TensorCacheDeleter.__del__ of <tensorflow.python.eager.context._TensorCacheDeleter object at 0x7fa9c5d9c278>>\r\nTypeError: argument of type 'NoneType' is not iterable\r\n\r\n\r\n**System information**\r\n- OS Platform is Linux Ubuntu 18.04\r\n- TensorFlow installed from binary and its version is 1.15.0-dev20190717 \r\n- environment is anaconda  \r\n- Python version:Python 3.6.8\r\n\r\n\r\nSo, if anyone have the solution please tell me, thank you very much\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30847", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30847/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30847/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30847/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30847", "id": 469861199, "node_id": "MDU6SXNzdWU0Njk4NjExOTk=", "number": 30847, "title": "DistributedDataset iteration fails with data of type string", "user": {"login": "michaelbenayoun", "id": 25418079, "node_id": "MDQ6VXNlcjI1NDE4MDc5", "avatar_url": "https://avatars0.githubusercontent.com/u/25418079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelbenayoun", "html_url": "https://github.com/michaelbenayoun", "followers_url": "https://api.github.com/users/michaelbenayoun/followers", "following_url": "https://api.github.com/users/michaelbenayoun/following{/other_user}", "gists_url": "https://api.github.com/users/michaelbenayoun/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelbenayoun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelbenayoun/subscriptions", "organizations_url": "https://api.github.com/users/michaelbenayoun/orgs", "repos_url": "https://api.github.com/users/michaelbenayoun/repos", "events_url": "https://api.github.com/users/michaelbenayoun/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelbenayoun/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jaingaurav", "id": 84372, "node_id": "MDQ6VXNlcjg0Mzcy", "avatar_url": "https://avatars1.githubusercontent.com/u/84372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaingaurav", "html_url": "https://github.com/jaingaurav", "followers_url": "https://api.github.com/users/jaingaurav/followers", "following_url": "https://api.github.com/users/jaingaurav/following{/other_user}", "gists_url": "https://api.github.com/users/jaingaurav/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaingaurav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaingaurav/subscriptions", "organizations_url": "https://api.github.com/users/jaingaurav/orgs", "repos_url": "https://api.github.com/users/jaingaurav/repos", "events_url": "https://api.github.com/users/jaingaurav/events{/privacy}", "received_events_url": "https://api.github.com/users/jaingaurav/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jaingaurav", "id": 84372, "node_id": "MDQ6VXNlcjg0Mzcy", "avatar_url": "https://avatars1.githubusercontent.com/u/84372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaingaurav", "html_url": "https://github.com/jaingaurav", "followers_url": "https://api.github.com/users/jaingaurav/followers", "following_url": "https://api.github.com/users/jaingaurav/following{/other_user}", "gists_url": "https://api.github.com/users/jaingaurav/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaingaurav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaingaurav/subscriptions", "organizations_url": "https://api.github.com/users/jaingaurav/orgs", "repos_url": "https://api.github.com/users/jaingaurav/repos", "events_url": "https://api.github.com/users/jaingaurav/events{/privacy}", "received_events_url": "https://api.github.com/users/jaingaurav/received_events", "type": "User", "site_admin": false}, {"login": "rxsang", "id": 6399870, "node_id": "MDQ6VXNlcjYzOTk4NzA=", "avatar_url": "https://avatars0.githubusercontent.com/u/6399870?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rxsang", "html_url": "https://github.com/rxsang", "followers_url": "https://api.github.com/users/rxsang/followers", "following_url": "https://api.github.com/users/rxsang/following{/other_user}", "gists_url": "https://api.github.com/users/rxsang/gists{/gist_id}", "starred_url": "https://api.github.com/users/rxsang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rxsang/subscriptions", "organizations_url": "https://api.github.com/users/rxsang/orgs", "repos_url": "https://api.github.com/users/rxsang/repos", "events_url": "https://api.github.com/users/rxsang/events{/privacy}", "received_events_url": "https://api.github.com/users/rxsang/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-07-18T16:12:29Z", "updated_at": "2020-02-06T21:02:33Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04.5 LTS \r\n- TensorFlow installed from (source or binary): conda\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: 3.6.8\r\n- CUDA/cuDNN version: 10.0\r\n- GPU model and memory: 8 x Tesla P100-PCIE-16GB \r\n\r\n**Describe the current behavior**\r\nI have noticed an issue while iterating over a DistributedDataset (using a tf.distribute.MirroredStrategy) that contains data of type string, with eager execution enabled.\r\nIterating works perfectly well, but a RuntimeError is raised once the end of the dataset is reached (cf logs below).\r\n\r\n**Describe the expected behavior**\r\nThe exception is never raised if the dataset does not contain string data, iteration stops and the rest of the code is executed. \r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\ntf.enable_eager_execution()\r\nprint('TensorFlow version: {}'.format(tf.__version__))\r\n\r\nraw = tf.random.uniform([256, 20], maxval=10, dtype=tf.int32)\r\n\r\nstrategy = tf.distribute.MirroredStrategy()\r\nprint('Number of replicas: {}'.format(strategy.num_replicas_in_sync))\r\n\r\ndataset_1 = tf.data.Dataset.from_tensor_slices(raw)\r\ndataset_1 = dataset_1.batch(64)\r\n\r\ndataset_2 = tf.data.Dataset.from_tensors(['This is a test']).repeat(256).batch(64)\r\n\r\ndist_dataset_1 = strategy.experimental_distribute_dataset(dataset_1)\r\ndist_dataset_2 = strategy.experimental_distribute_dataset(dataset_2)\r\n\r\nprint('Iterating over datataset_2')\r\nfor i, example in enumerate(dataset_2):\r\n    print('Batch #{}'.format(i))\r\n\r\nprint('Iterating over distributed dataset_1')\r\nfor i, example in enumerate(dist_dataset_1):\r\n    print('Batch #{}'.format(i))\r\n    \r\nprint('Iterating over distributed datataset_2')\r\nfor i, example in enumerate(dist_dataset_2):\r\n    print('Batch #{}'.format(i))\r\n```\r\n**Other info / logs**\r\n```\r\nTensorFlow version: 1.14.0\r\nNumber of replicas: 8\r\nIterating over datataset_2\r\nBatch #0\r\nBatch #1\r\nBatch #2\r\nBatch #3\r\nIterating over distributed dataset_1\r\nBatch #0\r\nBatch #1\r\nBatch #2\r\nBatch #3\r\nIterating over distributed datataset_2\r\nBatch #0\r\nBatch #1\r\nBatch #2\r\nBatch #3\r\n---------------------------------------------------------------------------\r\nRuntimeError                              Traceback (most recent call last)\r\n<ipython-input-18-730d6b0450e9> in <module>\r\n     25 \r\n     26 print('Iterating over distributed datataset_2')\r\n---> 27 for i, example in enumerate(dist_dataset_2):\r\n     28     print('Batch #{}'.format(i))\r\n\r\n~/.conda/envs/py36/lib/python3.6/site-packages/tensorflow/python/distribute/input_lib.py in __next__(self)\r\n    225   def __next__(self):\r\n    226     try:\r\n--> 227       return self.get_next()\r\n    228     except errors.OutOfRangeError:\r\n    229       raise StopIteration\r\n\r\n~/.conda/envs/py36/lib/python3.6/site-packages/tensorflow/python/distribute/input_lib.py in get_next(self, name)\r\n    254       return data\r\n    255 \r\n--> 256     global_has_value, replicas = _get_next_as_optional(self, self._strategy)\r\n    257     results = []\r\n    258     for i, worker in enumerate(self._input_workers.worker_devices):\r\n\r\n~/.conda/envs/py36/lib/python3.6/site-packages/tensorflow/python/distribute/input_lib.py in _get_next_as_optional(iterator, strategy, name)\r\n    160     with ops.device(worker):\r\n    161       worker_has_value, next_element = (\r\n--> 162           iterator._iterators[i].get_next_as_list(new_name))  # pylint: disable=protected-access\r\n    163       # Collective all-reduce requires explict devices for inputs.\r\n    164       with ops.device(\"/cpu:0\"):\r\n\r\n~/.conda/envs/py36/lib/python3.6/site-packages/tensorflow/python/distribute/input_lib.py in get_next_as_list(***failed resolving arguments***)\r\n    719               data.has_value(),\r\n    720               lambda: data.get_value(),\r\n--> 721               lambda: _dummy_tensor_fn(data.value_structure))\r\n    722           result.append(real_data)\r\n    723           # pylint: enable=cell-var-from-loop\r\n\r\n~/.conda/envs/py36/lib/python3.6/site-packages/tensorflow/python/util/deprecation.py in new_func(*args, **kwargs)\r\n    505                 'in a future version' if date is None else ('after %s' % date),\r\n    506                 instructions)\r\n--> 507       return func(*args, **kwargs)\r\n    508 \r\n    509     doc = _add_deprecated_arg_notice_to_docstring(\r\n\r\n~/.conda/envs/py36/lib/python3.6/site-packages/tensorflow/python/ops/control_flow_ops.py in cond(pred, true_fn, false_fn, strict, name, fn1, fn2)\r\n   1955         result = true_fn()\r\n   1956       else:\r\n-> 1957         result = false_fn()\r\n   1958       if not strict:\r\n   1959         result = _UnpackIfSingleton(result)\r\n\r\n~/.conda/envs/py36/lib/python3.6/site-packages/tensorflow/python/distribute/input_lib.py in <lambda>()\r\n    719               data.has_value(),\r\n    720               lambda: data.get_value(),\r\n--> 721               lambda: _dummy_tensor_fn(data.value_structure))\r\n    722           result.append(real_data)\r\n    723           # pylint: enable=cell-var-from-loop\r\n\r\n~/.conda/envs/py36/lib/python3.6/site-packages/tensorflow/python/distribute/input_lib.py in _dummy_tensor_fn(value_structure)\r\n    637   for feature_shape, feature_type in zip(value_structure._flat_shapes,\r\n    638                                          value_structure._flat_types):\r\n--> 639     result.append(create_dummy_tensor(feature_shape, feature_type))\r\n    640 \r\n    641   if isinstance(value_structure, structure.NestedStructure):\r\n\r\n~/.conda/envs/py36/lib/python3.6/site-packages/tensorflow/python/distribute/input_lib.py in create_dummy_tensor(feature_shape, feature_type)\r\n    630 \r\n    631     # Create the dummy tensor.\r\n--> 632     dummy_tensor = array_ops.zeros(tensor_shape.TensorShape(dims), feature_type)\r\n    633     return dummy_tensor\r\n    634 \r\n\r\n~/.conda/envs/py36/lib/python3.6/site-packages/tensorflow/python/ops/array_ops.py in zeros(shape, dtype, name)\r\n   1869         # Create a constant if it won't be very big. Otherwise create a fill op\r\n   1870         # to prevent serialized GraphDefs from becoming too large.\r\n-> 1871         output = _constant_if_small(zero, shape, dtype, name)\r\n   1872         if output is not None:\r\n   1873           return output\r\n\r\n~/.conda/envs/py36/lib/python3.6/site-packages/tensorflow/python/ops/array_ops.py in _constant_if_small(value, shape, dtype, name)\r\n   1827   try:\r\n   1828     if np.prod(shape) < 1000:\r\n-> 1829       return constant(value, shape=shape, dtype=dtype, name=name)\r\n   1830   except TypeError:\r\n   1831     # Happens when shape is a Tensor, list with Tensor elements, etc.\r\n\r\n~/.conda/envs/py36/lib/python3.6/site-packages/tensorflow/python/framework/constant_op.py in constant(value, dtype, shape, name)\r\n    244   \"\"\"\r\n    245   return _constant_impl(value, dtype, shape, name, verify_shape=False,\r\n--> 246                         allow_broadcast=True)\r\n    247 \r\n    248 \r\n\r\n~/.conda/envs/py36/lib/python3.6/site-packages/tensorflow/python/framework/constant_op.py in _constant_impl(value, dtype, shape, name, verify_shape, allow_broadcast)\r\n    252   ctx = context.context()\r\n    253   if ctx.executing_eagerly():\r\n--> 254     t = convert_to_eager_tensor(value, ctx, dtype)\r\n    255     if shape is None:\r\n    256       return t\r\n\r\n~/.conda/envs/py36/lib/python3.6/site-packages/tensorflow/python/framework/constant_op.py in convert_to_eager_tensor(value, ctx, dtype)\r\n    113     return t\r\n    114   else:\r\n--> 115     return ops.EagerTensor(value, handle, device, dtype)\r\n    116 \r\n    117 \r\n\r\nRuntimeError: Error copying tensor to device: /job:localhost/replica:0/task:0/device:GPU:0. Can't copy Tensor with type string to device /job:localhost/replica:0/task:0/device:GPU:0.\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30846", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30846/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30846/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30846/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30846", "id": 469838058, "node_id": "MDU6SXNzdWU0Njk4MzgwNTg=", "number": 30846, "title": " mismatch in the description of BatchDot and TensorFlow's implementation. ", "user": {"login": "zachmayer", "id": 581590, "node_id": "MDQ6VXNlcjU4MTU5MA==", "avatar_url": "https://avatars2.githubusercontent.com/u/581590?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zachmayer", "html_url": "https://github.com/zachmayer", "followers_url": "https://api.github.com/users/zachmayer/followers", "following_url": "https://api.github.com/users/zachmayer/following{/other_user}", "gists_url": "https://api.github.com/users/zachmayer/gists{/gist_id}", "starred_url": "https://api.github.com/users/zachmayer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zachmayer/subscriptions", "organizations_url": "https://api.github.com/users/zachmayer/orgs", "repos_url": "https://api.github.com/users/zachmayer/repos", "events_url": "https://api.github.com/users/zachmayer/events{/privacy}", "received_events_url": "https://api.github.com/users/zachmayer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-07-18T15:29:08Z", "updated_at": "2019-07-19T22:57:25Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\nhttps://www.tensorflow.org/api_docs/python/tf/keras/backend/batch_dot\r\n\r\n## Description of issue (what needs changing):\r\nI raised [an issue on the plaidML repo](https://github.com/plaidml/plaidml/issues/358), and after some back and forth we determined the documentation for BatchDot doesn't quite match the actual implementation in the tensorflow code.\r\n\r\n### Clear description\r\nA BatchDot with x.shape=(1,2,6,2) and y.shape=(1,2,2,3) and axes = (3, 1)has an output shape of (1,2,6,3)) whereas by the TF definition for output shape \"A tensor with shape equal to the concatenation of x's shape (less the dimension that was summed over) and y's shape (less the batch dimension and the dimension that was summed over). If the final rank is 1, we reshape it to (batch_size, 1).\" sounds like it should have an output shape of (1,2,6,2,3).\r\n\r\n### Submit a pull request?\r\nI am not planning to submit a PR at this time, but I may do it later"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30839", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30839/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30839/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30839/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30839", "id": 469751967, "node_id": "MDU6SXNzdWU0Njk3NTE5Njc=", "number": 30839, "title": "Tensorflow 2.0 - Build From Source not creating Python Wrappers such as _pywrap_tensorflow_internal.lib", "user": {"login": "oracle3001", "id": 20092212, "node_id": "MDQ6VXNlcjIwMDkyMjEy", "avatar_url": "https://avatars1.githubusercontent.com/u/20092212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oracle3001", "html_url": "https://github.com/oracle3001", "followers_url": "https://api.github.com/users/oracle3001/followers", "following_url": "https://api.github.com/users/oracle3001/following{/other_user}", "gists_url": "https://api.github.com/users/oracle3001/gists{/gist_id}", "starred_url": "https://api.github.com/users/oracle3001/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oracle3001/subscriptions", "organizations_url": "https://api.github.com/users/oracle3001/orgs", "repos_url": "https://api.github.com/users/oracle3001/repos", "events_url": "https://api.github.com/users/oracle3001/events{/privacy}", "received_events_url": "https://api.github.com/users/oracle3001/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2019-07-18T12:51:15Z", "updated_at": "2020-02-26T16:49:44Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS : Windows 10\r\n- TensorFlow installed from : source \r\n- TensorFlow : 2.0.0\r\n- Python version : 3.7.3\r\n- Bazel version (if compiling from source): 0.25.2\r\n- GCC/Compiler version (if compiling from source): VS2017\r\n- CUDA/cuDNN version: 10.0\r\n- GPU model and memory: Nvidia 960m\r\n\r\nWhen building tensorflow v1.14 from source, using configure.py script then building the resulting bazel --config=opt, in the bazel-bin/tensorflow output directory, it creates a /python directory containing python wrapper libraries such as _pywrap_tensorflow_internal.lib (which is required when creating custom ops).\r\n\r\nFollowing the same procedure with v2.0.0, it doesn't produce this (using exactly the same config settings) i.e. for whatever reason the build script is now building the python wrappers libraries.\r\n\r\nThe source code is in the same location as for v1.14, and checking the prebuilt version that can be installed via pip, this directory and associated library are deployed.\r\n\r\nIs an additional flag now required to create this additional set of python wrapper libraries?\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30818", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30818/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30818/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30818/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30818", "id": 469390361, "node_id": "MDU6SXNzdWU0NjkzOTAzNjE=", "number": 30818, "title": "tf.py_function in tf.data.Dataset pipeline doesn't work with TPUEstimator", "user": {"login": "sharvil", "id": 391004, "node_id": "MDQ6VXNlcjM5MTAwNA==", "avatar_url": "https://avatars1.githubusercontent.com/u/391004?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sharvil", "html_url": "https://github.com/sharvil", "followers_url": "https://api.github.com/users/sharvil/followers", "following_url": "https://api.github.com/users/sharvil/following{/other_user}", "gists_url": "https://api.github.com/users/sharvil/gists{/gist_id}", "starred_url": "https://api.github.com/users/sharvil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sharvil/subscriptions", "organizations_url": "https://api.github.com/users/sharvil/orgs", "repos_url": "https://api.github.com/users/sharvil/repos", "events_url": "https://api.github.com/users/sharvil/events{/privacy}", "received_events_url": "https://api.github.com/users/sharvil/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-07-17T18:57:03Z", "updated_at": "2020-01-09T16:23:59Z", "closed_at": null, "author_association": "NONE", "body": "Environment is Google Colab with TPU runtime.\r\n\r\n**Describe the current behavior**\r\nI have an input pipeline that contains tf.py_function as one of its processing steps when training a model with TPUEstimator. When I run the code, I get the following error:\r\n\r\n```\r\nNo registered 'EagerPyFunc' OpKernel for CPU devices compatible with node {{node EagerPyFunc}}\r\n\t.  Registered:  <no registered kernels>\r\n\r\n\t [[EagerPyFunc]]\r\n\t [[input_pipeline_task0/MakeIterator]]\r\n```\r\n\r\nAccording to the documentation (https://www.tensorflow.org/guide/using_tpu) \"The input pipeline generated by your input_fn is run on CPU.\" Running the same input code with a standard Estimator on CPU/GPU works just fine. Manually placing the Dataset + all processing steps on the CPU with `tf.device('/cpu:0')` also fails with the same error when training with TPUEstimator.\r\n\r\n**Describe the expected behavior**\r\nI should be able to run Python code on the CPU as part of my input pipeline when training on TPUs.\r\n\r\n**Code to reproduce the issue**\r\nhttps://colab.research.google.com/drive/15KuVkukIWdN753ffNjY6jVzT1gyhsBRQ\r\n\r\nThe notebook linked above is nearly identical to https://colab.research.google.com/github/tensorflow/tpu/blob/master/tools/colab/shakespeare_with_tpuestimator.ipynb. I've just added the following line to the Training Data code cell:\r\n\r\n```idx = tf.py_function(lambda x: x, [idx], tf.int32)```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30815", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30815/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30815/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30815/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30815", "id": 469375015, "node_id": "MDU6SXNzdWU0NjkzNzUwMTU=", "number": 30815, "title": "Feedback on Tensorflow 2.0 beta - documentation issues?", "user": {"login": "emrul", "id": 674888, "node_id": "MDQ6VXNlcjY3NDg4OA==", "avatar_url": "https://avatars0.githubusercontent.com/u/674888?v=4", "gravatar_id": "", "url": "https://api.github.com/users/emrul", "html_url": "https://github.com/emrul", "followers_url": "https://api.github.com/users/emrul/followers", "following_url": "https://api.github.com/users/emrul/following{/other_user}", "gists_url": "https://api.github.com/users/emrul/gists{/gist_id}", "starred_url": "https://api.github.com/users/emrul/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/emrul/subscriptions", "organizations_url": "https://api.github.com/users/emrul/orgs", "repos_url": "https://api.github.com/users/emrul/repos", "events_url": "https://api.github.com/users/emrul/events{/privacy}", "received_events_url": "https://api.github.com/users/emrul/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-07-17T18:25:04Z", "updated_at": "2019-10-01T23:19:28Z", "closed_at": null, "author_association": "NONE", "body": "Hi,\r\n\r\nPlease accept the following as feedback on my experience of Tensorflow 2.0 (beta):\r\n1. Read the [migration guide](https://www.tensorflow.org/beta/guide/migration_guide) and figured I would give it a go.\r\n2. Installed without issues on my Mac Conda environment.  This was to be the highlight of my successes.\r\n3. The [documentation site](https://www.tensorflow.org/versions/r2.0/api_docs/python/tf) isn't searchable by version and given the frequency and amount of change here it would be nice to find a way to locate where various things have moved to.\r\n4.  By way of example, PhasedLSTMCell, I knew the contrib module is gone in 2.0 but its still in the GitHub 2.0 branch which is misleading.  Further misleading is the comments [here](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/contrib/rnn/__init__.py): \r\n> Created in contrib, eventual plans to move to core.\r\n\r\nNo indication of where one might currently find it.\r\n5. Figured it might be in in [Addons](https://github.com/tensorflow/addons) but no luck there.\r\n6. I wanted to use tf.keras for the first time.  Maybe its my Pip/Conda environment but no matter what I did I could not get it to import unless I did import tensorflow._python._keras.  Did I miss this in the docs because I swear I didn't read it anywhere.  \r\nAfter some more poking around I decided I had enough exposure to 2.0 and went back to 1.14 - it did give me some minutes of excitement.\r\n\r\nHowever, I would love 2.0 to be speedily and widely adopted.  The API looks a lot cleaner (from what I read of it, I didn't get to use any ultimately) and I think some improvements around how the documentation is accessible would help uptake.  I'm willing to contribute to help this along if I can.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30807", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30807/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30807/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30807/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30807", "id": 469290784, "node_id": "MDU6SXNzdWU0NjkyOTA3ODQ=", "number": 30807, "title": "Memory Leak in `tf.estimator.experimental.InMemoryEvaluatorHook`", "user": {"login": "corynezin", "id": 30993572, "node_id": "MDQ6VXNlcjMwOTkzNTcy", "avatar_url": "https://avatars1.githubusercontent.com/u/30993572?v=4", "gravatar_id": "", "url": "https://api.github.com/users/corynezin", "html_url": "https://github.com/corynezin", "followers_url": "https://api.github.com/users/corynezin/followers", "following_url": "https://api.github.com/users/corynezin/following{/other_user}", "gists_url": "https://api.github.com/users/corynezin/gists{/gist_id}", "starred_url": "https://api.github.com/users/corynezin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/corynezin/subscriptions", "organizations_url": "https://api.github.com/users/corynezin/orgs", "repos_url": "https://api.github.com/users/corynezin/repos", "events_url": "https://api.github.com/users/corynezin/events{/privacy}", "received_events_url": "https://api.github.com/users/corynezin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-07-17T15:33:20Z", "updated_at": "2020-01-09T17:34:51Z", "closed_at": null, "author_association": "NONE", "body": "------------------------\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Red Hat Enterprise Linux 7\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: N/A\r\n- **TensorFlow installed from (source or binary)**: binary (pip)\r\n- **TensorFlow version (use command below)**: 1.10.0\r\n- **Python version**: 3.6.8\r\n- **Bazel version (if compiling from source)**:\r\n- **GCC/Compiler version (if compiling from source)**:\r\n- **CUDA/cuDNN version**: 9.0\r\n- **GPU model and memory**: Tesla K80 11441MiB\r\n- **Exact command to reproduce**: python min.py\r\n\r\n### Describe the problem\r\nThere seems to be some kind of memory leak in `tf.estimator.experimental.InMemoryEvaluatorHook`\r\n\r\nMy example is a little bit messy - because I had to copy over the `InMemoryEvaluatorHook` from a future version of TensorFlow and modify it very slightly (because I'm not able to upgrade) So technically, this might be a bug with TF1.14.0 which is where I copied the source code from.  \r\n\r\nEssentially, if I feed a large constant tensor (a 3.6GB embedding in my case) in the scaffold of the training model, CPU memory usage seems to balloon, expanding every time an evaluation is run, eventually exceeding 64GB.  I checked memory usage simply by using `htop` and looking for my python instance.\r\n\r\nAre there are any alternatives to what I'm doing here that would result in reasonable memory usage?\r\n\r\n### Source code / logs\r\n```python\r\n# min.py\r\nimport tensorflow as tf\r\nfrom hooks import InMemoryEvaluatorHook\r\nimport numpy as np\r\n\r\ndef train_input_fn():\r\n  dataset = tf.data.Dataset.range(100)\r\n  # Make sequence data\r\n  dataset = dataset.map(lambda x: {'x': [x]*10})\r\n  dataset = dataset.repeat(100)\r\n  return dataset\r\n\r\ndef eval_input_fn():\r\n  dataset = tf.data.Dataset.range(100)\r\n  # Make sequence data\r\n  dataset = dataset.map(lambda x: {'x': [x]*10})\r\n  return dataset\r\n\r\ndef model_fn(features, labels, mode, params):\r\n  seq = features['x']\r\n  with tf.device('/cpu:0'):\r\n    arr = np.random.rand(3000000, 300)\r\n    var = tf.get_variable('big', arr.shape, trainable=False)\r\n    emb = tf.nn.embedding_lookup(var, seq)\r\n  logits = tf.layers.dense(emb, 2)\r\n  # Don't care about loss but have to provide something\r\n  loss = tf.reduce_mean(logits)\r\n  if mode == tf.estimator.ModeKeys.TRAIN:\r\n    def init_fn(scaffold, sess):\r\n      sess.run(var.initializer, {var.initial_value: arr})\r\n    trainable_vars = tf.trainable_variables()\r\n    saver = tf.train.Saver(var_list=trainable_vars)\r\n    scaffold = tf.train.Scaffold(init_fn=init_fn, saver=saver)\r\n    global_step = tf.train.get_or_create_global_step()\r\n    optimizer = tf.train.GradientDescentOptimizer(0.1)\r\n    train_op = optimizer.minimize(loss, global_step=global_step)\r\n    output_spec = tf.estimator.EstimatorSpec(\r\n      mode=mode,\r\n      loss=loss,\r\n      scaffold=scaffold,\r\n      train_op=train_op)\r\n  elif mode == tf.estimator.ModeKeys.EVAL:\r\n    output_spec = tf.estimator.EstimatorSpec(\r\n      mode=mode,\r\n      loss=loss)\r\n  return output_spec\r\n\r\nestimator = tf.estimator.Estimator(model_fn=model_fn)\r\nevaluator = InMemoryEvaluatorHook(\r\n    estimator,\r\n    eval_input_fn,\r\n    every_n_iter=300)\r\nestimator.train(train_input_fn, hooks=[evaluator])\r\n```\r\n```python\r\n# hooks.py\r\nimport os\r\n\r\nimport tensorflow as tf\r\nfrom tensorflow.python.framework import ops\r\nfrom tensorflow.python.ops import array_ops\r\nfrom tensorflow.python.ops import control_flow_ops\r\nfrom tensorflow.python.ops import state_ops\r\nfrom tensorflow.python.training import training\r\n\r\n\r\nclass InMemoryEvaluatorHook(training.SessionRunHook):\r\n  \"\"\"Hook to run evaluation in training without a checkpoint.\r\n  Example:\r\n  python\r\n  def train_input_fn():\r\n    ...\r\n    return train_dataset\r\n  def eval_input_fn():\r\n    ...\r\n    return eval_dataset\r\n  estimator = tf.estimator.DNNClassifier(...)\r\n  evaluator = tf.estimator.experimental.InMemoryEvaluatorHook(\r\n      estimator, eval_input_fn)\r\n  estimator.train(train_input_fn, hooks=[evaluator])\r\n  \r\n  Current limitations of this approach are:\r\n  * It doesn't support multi-node distributed mode.\r\n  * It doesn't support saveable objects other than variables (such as boosted\r\n    tree support)\r\n  * It doesn't support custom saver logic (such as ExponentialMovingAverage\r\n    support)\r\n\r\n  COPIED FROM TENSORFLOW REPO (FUTURE VERSION 1.14.0), PERMALINK BELOW\r\n  https://github.com/tensorflow/estimator/blob/faa1058f2664b952c246e9097e898fab8042b0ce/tensorflow_estimator/python/estimator/hooks/hooks.py#L66\r\n  \"\"\"\r\n\r\n  def __init__(self,\r\n               estimator,\r\n               input_fn,\r\n               steps=None,\r\n               hooks=None,\r\n               name=None,\r\n               every_n_iter=100):\r\n    \"\"\"Initializes a `InMemoryEvaluatorHook`.\r\n    Args:\r\n      estimator: A `tf.estimator.Estimator` instance to call evaluate.\r\n      input_fn:  Equivalent to the `input_fn` arg to `estimator.evaluate`. A\r\n        function that constructs the input data for evaluation.\r\n        See [Createing input functions](\r\n        https://tensorflow.org/guide/premade_estimators#create_input_functions)\r\n        for more information. The function should construct and return one of\r\n        the following:\r\n          * A 'tf.data.Dataset' object: Outputs of `Dataset` object must be a\r\n            tuple (features, labels) with same constraints as below.\r\n          * A tuple (features, labels): Where `features` is a `Tensor` or a\r\n            dictionary of string feature name to `Tensor` and `labels` is a\r\n            `Tensor` or a dictionary of string label name to `Tensor`. Both\r\n            `features` and `labels` are consumed by `model_fn`. They should\r\n            satisfy the expectation of `model_fn` from inputs.\r\n      steps: Equivalent to the `steps` arg to `estimator.evaluate`.  Number of\r\n        steps for which to evaluate model. If `None`, evaluates until `input_fn`\r\n        raises an end-of-input exception.\r\n      hooks: Equivalent to the `hooks` arg to `estimator.evaluate`. List of\r\n        `SessionRunHook` subclass instances. Used for callbacks inside the\r\n        evaluation call.\r\n      name:  Equivalent to the `name` arg to `estimator.evaluate`. Name of the\r\n        evaluation if user needs to run multiple evaluations on different data\r\n        sets, such as on training data vs test data. Metrics for different\r\n        evaluations are saved in separate folders, and appear separately in\r\n        tensorboard.\r\n      every_n_iter: `int`, runs the evaluator once every N training iteration.\r\n    Raises:\r\n      ValueError: if `every_n_iter` is non-positive or it's not a single machine\r\n        training\r\n    \"\"\"\r\n    if every_n_iter is None or every_n_iter <= 0:\r\n      raise ValueError('invalid every_n_iter=%s.' % every_n_iter)\r\n    if (estimator.config.num_ps_replicas > 0 or\r\n        estimator.config.num_worker_replicas > 1):\r\n      raise ValueError(\r\n          'InMemoryEvaluator supports only single machine (aka Local) setting.')\r\n    self._estimator = estimator\r\n    self._input_fn = input_fn\r\n    self._steps = steps\r\n    self._name = name\r\n    self._every_n_iter = every_n_iter\r\n    self._eval_dir = os.path.join(self._estimator.model_dir, 'eval'\r\n                                  if not name else 'eval_' + name)\r\n\r\n    self._graph = None\r\n    self._hooks = _check_hooks_type(hooks)\r\n    self._hooks.extend(self._estimator._convert_eval_steps_to_hooks(steps))\r\n    self._timer = training.SecondOrStepTimer(every_steps=every_n_iter)\r\n\r\n  def begin(self):\r\n    \"\"\"Build eval graph and restoring op.\"\"\"\r\n    self._timer.reset()\r\n    self._iter_count = 0\r\n    self._graph = ops.Graph()\r\n    with self._graph.as_default():\r\n      (self._scaffold, self._update_op, self._eval_dict,\r\n       self._all_hooks) = self._estimator._evaluate_build_graph(\r\n           self._input_fn, self._hooks, checkpoint_path=None)\r\n\r\n      if self._scaffold.saver is not None:\r\n        raise ValueError('InMemoryEvaluator does not support custom saver')\r\n      if self._scaffold.init_fn is not None:\r\n        raise ValueError('InMemoryEvaluator does not support custom init_fn')\r\n\r\n      self._var_name_to_eval_var = {\r\n          v.name: v for v in ops.get_collection(ops.GraphKeys.GLOBAL_VARIABLES)\r\n      }\r\n      self._var_name_to_placeholder = {\r\n          v.name: array_ops.placeholder(v.dtype)\r\n          for v in ops.get_collection(ops.GraphKeys.GLOBAL_VARIABLES)\r\n      }\r\n\r\n  def after_create_session(self, session, coord):  # pylint: disable=unused-argument\r\n    \"\"\"Does first run which shows the eval metrics before training.\"\"\"\r\n    if ops.get_collection(ops.GraphKeys.SAVEABLE_OBJECTS):\r\n      raise ValueError(\r\n          'InMemoryEvaluator does not support saveables other than global '\r\n          'variables.')\r\n    self._var_name_to_train_var = {\r\n        v.name: v for v in ops.get_collection(ops.GraphKeys.GLOBAL_VARIABLES)\r\n    }\r\n    var_names_to_transfer = set(self._var_name_to_placeholder.keys()) & set(\r\n        self._var_name_to_train_var.keys())\r\n    # Filter training var names that do not exist in evaluation\r\n    self._var_name_to_train_var = {\r\n        v_name: self._var_name_to_train_var[v_name]\r\n        for v_name in var_names_to_transfer\r\n    }\r\n    # Filter eval var names that do not exist in training\r\n    self._var_name_to_eval_var = {\r\n        v_name: self._var_name_to_eval_var[v_name]\r\n        for v_name in var_names_to_transfer\r\n    }\r\n\r\n    with self._graph.as_default():\r\n      self._var_feed_op = control_flow_ops.group([\r\n          state_ops.assign(self._var_name_to_eval_var[v_name],\r\n                           self._var_name_to_placeholder[v_name])\r\n          for v_name in var_names_to_transfer\r\n      ])\r\n\r\n    self._evaluate(session)\r\n\r\n  def _evaluate(self, train_session):\r\n    var_name_to_value = train_session.run(self._var_name_to_train_var)\r\n    placeholder_to_value = {\r\n        self._var_name_to_placeholder[v_name]: var_name_to_value[v_name]\r\n        for v_name in var_name_to_value\r\n    }\r\n\r\n    def feed_variables(scaffold, session):\r\n      del scaffold\r\n      session.run(self._var_feed_op, feed_dict=placeholder_to_value)\r\n\r\n    scaffold = training.Scaffold(\r\n        init_fn=feed_variables, copy_from_scaffold=self._scaffold)\r\n\r\n    with self._graph.as_default():\r\n      self._estimator._evaluate_run(\r\n          checkpoint_path=None,\r\n          scaffold=scaffold,\r\n          update_op=self._update_op,\r\n          eval_dict=self._eval_dict,\r\n          all_hooks=self._all_hooks,\r\n          output_dir=self._eval_dir)\r\n\r\n    self._timer.update_last_triggered_step(self._iter_count)\r\n\r\n  def after_run(self, run_context, run_values):  # pylint: disable=unused-argument\r\n    \"\"\"Runs evaluator.\"\"\"\r\n    self._iter_count += 1\r\n    if self._timer.should_trigger_for_step(self._iter_count):\r\n      self._evaluate(run_context.session)\r\n\r\n  def end(self, session):  # pylint: disable=unused-argument\r\n    \"\"\"Runs evaluator for final model.\"\"\"\r\n    self._evaluate(session)\r\n\r\n\r\ndef _check_hooks_type(hooks):\r\n  \"\"\"Returns hooks if all are `SessionRunHook`, raises TypeError otherwise.\"\"\"\r\n  hooks = list(hooks or [])\r\n  for h in hooks:\r\n    if not isinstance(h, training.SessionRunHook):\r\n      raise TypeError('Hooks must be a SessionRunHook, given: {}'.format(h))\r\n  return hooks\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30806", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30806/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30806/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30806/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30806", "id": 469225327, "node_id": "MDU6SXNzdWU0NjkyMjUzMjc=", "number": 30806, "title": "Inference on Larger Data Size on Edge ", "user": {"login": "vibhatha", "id": 12179219, "node_id": "MDQ6VXNlcjEyMTc5MjE5", "avatar_url": "https://avatars3.githubusercontent.com/u/12179219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vibhatha", "html_url": "https://github.com/vibhatha", "followers_url": "https://api.github.com/users/vibhatha/followers", "following_url": "https://api.github.com/users/vibhatha/following{/other_user}", "gists_url": "https://api.github.com/users/vibhatha/gists{/gist_id}", "starred_url": "https://api.github.com/users/vibhatha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vibhatha/subscriptions", "organizations_url": "https://api.github.com/users/vibhatha/orgs", "repos_url": "https://api.github.com/users/vibhatha/repos", "events_url": "https://api.github.com/users/vibhatha/events{/privacy}", "received_events_url": "https://api.github.com/users/vibhatha/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1501014628, "node_id": "MDU6TGFiZWwxNTAxMDE0NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0-rc0", "name": "TF 2.0-rc0", "color": "12ce7d", "default": false, "description": "Issues related to TF 2.0-rc0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}, {"login": "Saduf2019", "id": 59822926, "node_id": "MDQ6VXNlcjU5ODIyOTI2", "avatar_url": "https://avatars2.githubusercontent.com/u/59822926?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Saduf2019", "html_url": "https://github.com/Saduf2019", "followers_url": "https://api.github.com/users/Saduf2019/followers", "following_url": "https://api.github.com/users/Saduf2019/following{/other_user}", "gists_url": "https://api.github.com/users/Saduf2019/gists{/gist_id}", "starred_url": "https://api.github.com/users/Saduf2019/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Saduf2019/subscriptions", "organizations_url": "https://api.github.com/users/Saduf2019/orgs", "repos_url": "https://api.github.com/users/Saduf2019/repos", "events_url": "https://api.github.com/users/Saduf2019/events{/privacy}", "received_events_url": "https://api.github.com/users/Saduf2019/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-07-17T14:04:17Z", "updated_at": "2020-03-19T14:43:34Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (Custom Code using resources and my own design):\r\n- OS Platform and Distribution (Linux Ubuntu 16.04):\r\n- Mobile device (trying inference on google coral dev board)\r\n- TensorFlow installed from (pip3 install tensorflow==2.0.0-beta1):\r\n- TensorFlow version (2.0.0-beta1):\r\n- Python version: 3.6.9\r\n- Bazel version (not used):\r\n- GCC/Compiler version (not used):\r\n- CUDA/cuDNN version: not used\r\n- GPU model and memory: not used \r\n- Run On CPU \r\n\r\nArchitecture:          x86_64\r\nCPU op-mode(s):        32-bit, 64-bit\r\nByte Order:            Little Endian\r\nCPU(s):                8\r\nOn-line CPU(s) list:   0-7\r\nThread(s) per core:    2\r\nCore(s) per socket:    4\r\nSocket(s):             1\r\nNUMA node(s):          1\r\nVendor ID:             GenuineIntel\r\nCPU family:            6\r\nModel:                 94\r\nModel name:            Intel(R) Core(TM) i7-6700HQ CPU @ 2.60GHz\r\nStepping:              3\r\nCPU MHz:               800.210\r\nCPU max MHz:           3500.0000\r\nCPU min MHz:           800.0000\r\nBogoMIPS:              5183.86\r\nVirtualization:        VT-x\r\nL1d cache:             32K\r\nL1i cache:             32K\r\nL2 cache:              256K\r\nL3 cache:              6144K\r\n\r\n32 GB RAM\r\n\r\n```\r\n# The full neural network code!\r\n###############################\r\nimport numpy as np\r\nimport tensorflow as tf\r\nfrom tensorflow import keras\r\nfrom tensorflow.keras.models import Sequential\r\nfrom tensorflow.keras.layers import Dense\r\nfrom tensorflow.keras.utils import to_categorical\r\nfrom tensorflow.keras.layers import UpSampling1D\r\n\r\n#Reference:https://colab.research.google.com/gist/ohtaman/c1cf119c463fd94b0da50feea320ba1e/edgetpu-with-keras.ipynb\r\ndef UpSamplingCustom2D(scale=(2, 2)):\r\n  if isinstance(scale, int):\r\n    scale = (scale, scale)\r\n\r\n  def upsampling(x):\r\n    shape = x.shape\r\n    print(\"Upsampling : \", shape)\r\n    x = keras.layers.Concatenate(-2)([x] * scale[0])\r\n    x = keras.layers.Reshape([shape[1] * scale[0], shape[2], shape[3]])(x)\r\n    x = keras.layers.Concatenate(-1)([x] * scale[1])\r\n    x = keras.layers.Reshape([shape[1] * scale[0], shape[2] * scale[1], shape[3]])(x)\r\n    return x\r\n\r\n  return upsampling\r\n\r\n\r\nimage_size = 28\r\noutput_image_size = image_size * 2\r\n\r\ntrain_images = np.random.rand(10,image_size,image_size,3)\r\ntrain_images_labels = np.random.rand(10,output_image_size,output_image_size,3)\r\n\r\n\r\ntest_images = np.random.rand(10,image_size,image_size,3)\r\ntest_images_labels = np.random.rand(10,output_image_size,output_image_size,3)\r\n\r\ninputs = keras.layers.Input(shape=(image_size, image_size, 3))\r\nx = keras.layers.Dense(image_size, activation='relu')(inputs)\r\nx = keras.layers.Dense(image_size, activation='relu')(x)\r\nx = UpSamplingCustom2D()(x)\r\ndecoded = keras.layers.Dense(3, activation='relu')(x)\r\nmodel = keras.models.Model(inputs, decoded)\r\n\r\n#Compile the model.\r\nmodel.compile(\r\n  optimizer='adam',\r\n  loss='binary_crossentropy',\r\n)\r\n\r\n#Train the model.\r\nmodel.fit(\r\n  train_images,\r\n  train_images_labels,\r\n  epochs=1,\r\n  batch_size=32,\r\n)\r\n\r\n#Evaluate the model.\r\nmodel.evaluate(\r\n  test_images,\r\n  test_images_labels\r\n)\r\n\r\n\r\n\r\n#Save the model to disk.\r\nmodel.save_weights('model.h5')\r\n\r\n#Load the model from disk later using:\r\nmodel.load_weights('model.h5')\r\n\r\n#Predict on the first 5 test images.\r\npredictions = model.predict(test_images)\r\n\r\nprint(predictions[0].shape)\r\n\r\n\r\ndef representative_dataset_gen():\r\n  for i in range(5):\r\n    yield [train_images[i: i + 1].astype(np.float32)]\r\n\r\nkeras_file = \"upsampling2d.h5\"\r\ntf.keras.models.save_model(model, keras_file)\r\n\r\n#Convert to TensorFlow Lite model.\r\nif (tf.__version__ == '1.14.0'):\r\n  converter = tf.compat.v1.lite.TFLiteConverter.from_keras_model_file(keras_file)\r\nif (tf.__version__ == '2.0.0-beta1'):\r\n  converter = tf.compat.v1.lite.TFLiteConverter.from_keras_model_file(keras_file)\r\nconverter.representative_dataset = representative_dataset_gen\r\nconverter.target_spec.supported_ops = [tf.lite.OpsSet.TFLITE_BUILTINS_INT8]\r\nconverter.inference_input_type = tf.uint8\r\nconverter.inference_output_type = tf.uint8\r\nconverter.optimizations = [tf.lite.Optimize.DEFAULT]\r\ntflite_model = converter.convert()\r\ntflite_fname = \"upsampling2d_\" + str(tf.__version__) + \".tflite\"\r\nopen(tflite_fname, \"wb\").write(tflite_model)\r\n\r\ninterpreter = tf.lite.Interpreter(model_path=tflite_fname)\r\ninterpreter.allocate_tensors()\r\n\r\ninput_detail = interpreter.get_input_details()[0]\r\noutput_detail = interpreter.get_output_details()[0]\r\n\r\nprint(\"Input Details : \", input_detail)\r\nprint(\"Output Details : \", output_detail)\r\n\r\ndef quantize(real_value):\r\n  std, mean = input_detail['quantization']\r\n  return (real_value / std + mean).astype(np.uint8)\r\n\r\n\r\nsample_input = quantize(test_images[0]).reshape(input_detail['shape'])\r\nprint(\"Sample Input Shape : \", sample_input.shape)\r\nprint(\"Inference Sample Input Shape : \", sample_input.shape)\r\n\r\ninterpreter.set_tensor(input_detail['index'], sample_input)\r\ninterpreter.invoke()\r\n\r\n#original_image = test_images[0].reshape((28, 28))\r\npred_original_model = model.predict(test_images[:1])\r\npred_quantized_model = interpreter.get_tensor(output_detail['index'])\r\n\r\nprint(\"Prediction : \",pred_quantized_model.shape)\r\n```\r\n\r\nBecause of quantization issue for UpSampling2D, I used a snippet from \r\n`https://colab.research.google.com/gist/ohtaman/c1cf119c463fd94b0da50feea320ba1e/edgetpu-with-keras.ipynb`\r\n\r\nMy issue is when I use image sizes from 28 till 256 (I just used powers of 2 and used 28 just to check), it worked fine for inferencing. I tested inferencing on the CPU itself using the interpreter package. But 512 or anything above freezes the machine and gives the following error. \r\n\r\n`2019-07-17 08:33:18.567609: W tensorflow/core/framework/cpu_allocator_impl.cc:81] Allocation of 5368709120 exceeds 10% of system memory.\r\n2019-07-17 08:33:20.626046: W tensorflow/core/framework/cpu_allocator_impl.cc:81] Allocation of 5368709120 exceeds 10% of system memory.\r\n2019-07-17 08:33:26.517300: W tensorflow/core/framework/cpu_allocator_impl.cc:81] Allocation of 10737418240 exceeds 10% of system memory.\r\n2019-07-17 08:33:27.836867: W tensorflow/core/framework/cpu_allocator_impl.cc:81] Allocation of 21474836480 exceeds 10% of system memory.\r\nterminate called after throwing an instance of 'std::bad_alloc'\r\n  what():  std::bad_alloc\r\nAborted (core dumped)\r\n`\r\nIs there a limit for the array size that can be used at inferencing after making the input array flatten. Or am I doing something wrong here? \r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30801", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30801/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30801/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30801/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30801", "id": 469153312, "node_id": "MDU6SXNzdWU0NjkxNTMzMTI=", "number": 30801, "title": "fit_generator with use_multiprocessing=True causes memory usage grow (leakage) on TF 1.13+", "user": {"login": "jsnowacki", "id": 1014323, "node_id": "MDQ6VXNlcjEwMTQzMjM=", "avatar_url": "https://avatars0.githubusercontent.com/u/1014323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsnowacki", "html_url": "https://github.com/jsnowacki", "followers_url": "https://api.github.com/users/jsnowacki/followers", "following_url": "https://api.github.com/users/jsnowacki/following{/other_user}", "gists_url": "https://api.github.com/users/jsnowacki/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsnowacki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsnowacki/subscriptions", "organizations_url": "https://api.github.com/users/jsnowacki/orgs", "repos_url": "https://api.github.com/users/jsnowacki/repos", "events_url": "https://api.github.com/users/jsnowacki/events{/privacy}", "received_events_url": "https://api.github.com/users/jsnowacki/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 0, "created_at": "2019-07-17T12:03:37Z", "updated_at": "2020-02-08T01:10:07Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Debian 9 (GCP AI Platform Jobs and notebooks), Ubuntu 18.04 (custom) \r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): preinstalled via official GCP deep learning VM image, also via pip and conda\r\n- TensorFlow version (use command below): 1.13 and 1.14\r\n- Python version: 3.5\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 10\r\n- GPU model and memory: NVIDIA Tesla K80 and GFX 1080\r\n\r\n**Describe the current behavior**\r\nWe use `fit_generator` with a custom build on `tensorflow.keras.utils.Sequence`, but we also have seen similar behavior with `tensorflow.keras.preprocessing.image.ImageDataGenerator`. Namely, when we have the default `use_multiprocessing=False`, the training process is slow but the memory usage saturates at some point and everything works fine. When we use `use_multiprocessing=True`, despite the number of workers or `max_queue_size` the memory keeps growing linearly up to the point when the process gets killed by the system. See the enclosed memory graph from GCP AI Platform Job monitoring: \r\n![ai_job_mem](https://user-images.githubusercontent.com/1014323/61370638-2bcc9f00-a893-11e9-829e-7ed1ee16039d.png)\r\nThe same code worked fine on TF 1.12, i.e. the memory saturated at some point, but broke from 1.13, and we see the same effect with 1.14. \r\n**Describe the expected behavior**\r\nThe memory shouldn't grow indefinitely as it did in TF 1.12. See the memory timeseries for TF 1.12 below:\r\n![ai_job_mem_ok](https://user-images.githubusercontent.com/1014323/61373323-ca5bfe80-a899-11e9-857d-47c85f985a78.png)\r\n\r\n**Code to reproduce the issue**\r\nOur Data Generator looks as follows:\r\n```python\r\nclass DataGenerator(tf.keras.utils.Sequence):\r\n    def __init__(self, affect_net_dir, data_file, batch_size, aug=True):\r\n        self.affect_net_dir = affect_net_dir\r\n        with FileIO(os.path.join(self.affect_net_dir, data_file), 'r') as fr:\r\n            self.data = pd.read_csv(fr)\r\n        self.batch_size = batch_size\r\n        self.aug = aug\r\n        self.indexes = np.arange(self.data.shape[0])\r\n        np.random.shuffle(self.indexes)\r\n\r\n    @property\r\n    def steps(self):\r\n        return int(np.floor(self.data.shape[0] / self.batch_size))\r\n\r\n    def __getitem__(self, index):\r\n        batch_indexes = self.indexes[index * self.batch_size: (index + 1) * self.batch_size]\r\n\r\n        x = np.zeros(shape=(self.batch_size, 224, 224, 3))\r\n        y = np.zeros(shape=(self.batch_size, 11))\r\n\r\n        for i, b_index in enumerate(batch_indexes):\r\n            file_path = self.data.iloc[b_index]['subDirectory_filePath']\r\n            with FileIO(os.path.join(self.affect_net_dir, file_path), 'rb') as fr:\r\n                face_img = Image.open(BytesIO(fr.read()))\r\n            face_x = self.data.iloc[b_index]['face_x']\r\n            face_y = self.data.iloc[b_index]['face_y']\r\n            face_width = self.data.iloc[b_index]['face_width']\r\n            face_height = self.data.iloc[b_index]['face_height']\r\n            expression = self.data.iloc[b_index]['expression']\r\n            # crop face from image\r\n            face_img = face_img.crop([face_x, face_y, face_x + face_width, face_y + face_height])\r\n            face_img = face_img.resize(size=(224, 224), resample=Image.LANCZOS)\r\n            face_img = tf.keras.preprocessing.image.img_to_array(face_img)\r\n\r\n            # face augmentation if needed\r\n            if self.aug:\r\n                if np.random.rand() >= 0.5:\r\n                    face_img = face_aug.random_brightness(face_img)\r\n                if np.random.rand() >= 0.5:\r\n                    face_img = face_aug.random_hue(face_img)\r\n                if np.random.rand() >= 0.5:\r\n                    face_img = face_aug.random_saturation(face_img)\r\n                if np.random.rand() >= 0.5:\r\n                    face_img = face_aug.random_contrast(face_img)\r\n                if np.random.rand() >= 0.5:\r\n                    face_img = face_aug.horizontal_mirror(face_img)\r\n\r\n            x[i] = face_img\r\n            y[i] = tf.keras.utils.to_categorical(expression, num_classes=11)\r\n\r\n        return tf.keras.applications.resnet50.preprocess_input(x), y\r\n\r\n    def __len__(self):\r\n        return int(np.floor(self.data.shape[0] / self.batch_size))\r\n```\r\nBut it is quite problem specific and we use it with a large data set O(100k) samples. \r\n\r\nYou can reproduce a similar memory growing behaviour with the Flower example https://colab.research.google.com/github/tensorflow/examples/blob/master/courses/udacity_intro_to_tensorflow_for_deep_learning/l05c04_exercise_flowers_with_data_augmentation_solution.ipynb. When I run it on GCP AI Platform notebook with TF 1.14 and NVIDIA Tesla K80, with multiprocessing on, i.e. (train the model section):\r\n```python\r\nepochs = 80\r\n\r\nhistory = model.fit_generator(\r\n    train_data_gen,\r\n    steps_per_epoch=int(np.ceil(train_data_gen.n / float(batch_size))),\r\n    epochs=epochs,\r\n    validation_data=val_data_gen,\r\n    validation_steps=int(np.ceil(val_data_gen.n / float(batch_size))),\r\n    use_multiprocessing=True,\r\n    workers=3,\r\n)\r\n```\r\nI get the below memory plot in Stackdriver:\r\n![ai_job_mem_sample](https://user-images.githubusercontent.com/1014323/61373689-bf559e00-a89a-11e9-95e5-397ce8c1113f.png)\r\nIt is not as profound but the same trace remains quite flat when train with `use_multiprocessing=False`. I guess in our case the number of iteration within one epoch, combined with the linear memory growth kills the machine.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30799", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30799/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30799/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30799/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30799", "id": 469139774, "node_id": "MDU6SXNzdWU0NjkxMzk3NzQ=", "number": 30799, "title": "Unable to find implementation of Select TensorFlow operators", "user": {"login": "Jnasic", "id": 49069674, "node_id": "MDQ6VXNlcjQ5MDY5Njc0", "avatar_url": "https://avatars1.githubusercontent.com/u/49069674?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Jnasic", "html_url": "https://github.com/Jnasic", "followers_url": "https://api.github.com/users/Jnasic/followers", "following_url": "https://api.github.com/users/Jnasic/following{/other_user}", "gists_url": "https://api.github.com/users/Jnasic/gists{/gist_id}", "starred_url": "https://api.github.com/users/Jnasic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Jnasic/subscriptions", "organizations_url": "https://api.github.com/users/Jnasic/orgs", "repos_url": "https://api.github.com/users/Jnasic/repos", "events_url": "https://api.github.com/users/Jnasic/events{/privacy}", "received_events_url": "https://api.github.com/users/Jnasic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-07-17T11:31:24Z", "updated_at": "2019-07-20T06:24:52Z", "closed_at": null, "author_association": "NONE", "body": "I am trying to use Select tensorflow operators ( https://www.tensorflow.org/lite/guide/ops_select ). I have successfully created AAR file. But android studio is unable to find implementation of \r\n**implementation 'org.tensorflow:tensorflow-lite-with-select-tf-ops:0.1.100'**\r\n\r\n> ERROR: Failed to resolve: org.tensorflow:tensorflow-lite-with-select-tf-ops:0.1.100\r\n\r\n\r\nas described in (https://www.tensorflow.org/lite/guide/ops_select). \r\nKindly tell me how should I implement select-tf-ops tflite version ?\r\nThanks\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30793", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30793/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30793/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30793/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30793", "id": 469046032, "node_id": "MDU6SXNzdWU0NjkwNDYwMzI=", "number": 30793, "title": "2019-07-17 12:43:20.046568: F tensorflow/contrib/lite/toco/allocate_transient_arrays.cc:180] An array, resize/ResizeNearestNeighbor, still does not have a known data type after all graph transformations have run.", "user": {"login": "mabdullahrafique", "id": 32646935, "node_id": "MDQ6VXNlcjMyNjQ2OTM1", "avatar_url": "https://avatars0.githubusercontent.com/u/32646935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mabdullahrafique", "html_url": "https://github.com/mabdullahrafique", "followers_url": "https://api.github.com/users/mabdullahrafique/followers", "following_url": "https://api.github.com/users/mabdullahrafique/following{/other_user}", "gists_url": "https://api.github.com/users/mabdullahrafique/gists{/gist_id}", "starred_url": "https://api.github.com/users/mabdullahrafique/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mabdullahrafique/subscriptions", "organizations_url": "https://api.github.com/users/mabdullahrafique/orgs", "repos_url": "https://api.github.com/users/mabdullahrafique/repos", "events_url": "https://api.github.com/users/mabdullahrafique/events{/privacy}", "received_events_url": "https://api.github.com/users/mabdullahrafique/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-07-17T08:03:42Z", "updated_at": "2019-07-20T06:24:50Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code NO\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version (use command below): 1.14\r\n- Python version:3.6\r\n- Bazel version (if compiling from source):0.24\r\n- GCC/Compiler version (if compiling from source):7.4.0\r\n- CUDA/cuDNN version:10.0/7.6\r\n- GPU model and memory:Gtx 1060, 16 GB ram\r\n\r\n\r\n\r\n@suharshs Hello I am trying to convert mobilenet model to tflite with following commands.\r\n\r\n`bazel-bin/tensorflow/contrib/lite/toco/toco toco --input_file=/home/abdullah/models-master/research/frozen_casted.pb --input_format=TENSORFLOW_GRAPHDEF --output_format=TFLITE --output_file=let_see.tflite --inference_type=FLOAT --inference_input_type=QUANTIZED_UINT8 --input_arrays=ImageTensor --output_arrays=SemanticPredictions --input_shapes=1,1024,1024,3 --default_ranges_min=0 --default_ranges_max=255 --architecture=mobilenet_v2 --std_dev_values=128 --mean_values=1`\r\n\r\nBut I am getting the following error:\r\n\r\n`2019-07-17 12:43:19.954318: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1055] Converting unsupported operation: ResizeNearestNeighbor\r\n2019-07-17 12:43:19.963358: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 813 operators, 1238 arrays (0 quantized)\r\n2019-07-17 12:43:19.988357: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After Removing unused ops pass 1: 801 operators, 1216 arrays (0 quantized)\r\n2019-07-17 12:43:20.017312: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 801 operators, 1216 arrays (0 quantized)\r\n2019-07-17 12:43:20.036581: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 132 operators, 328 arrays (0 quantized)\r\n2019-07-17 12:43:20.039009: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 2: 132 operators, 328 arrays (0 quantized)\r\n2019-07-17 12:43:20.041679: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 3: 132 operators, 328 arrays (0 quantized)\r\n2019-07-17 12:43:20.044543: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before dequantization graph transformations: 132 operators, 328 arrays (0 quantized)\r\n2019-07-17 12:43:20.046568: F tensorflow/contrib/lite/toco/allocate_transient_arrays.cc:180] An array, resize/ResizeNearestNeighbor, still does not have a known data type after all graph transformations have run.\r\nAborted (core dumped)\r\n`\r\nI am using **tensorflow1.14 from source**. Kindly tell me why this issue is occurring ?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30791", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30791/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30791/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30791/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30791", "id": 469010124, "node_id": "MDU6SXNzdWU0NjkwMTAxMjQ=", "number": 30791, "title": "Use XLA to Tacotron2 is slower than without XLA", "user": {"login": "lee-bin", "id": 29224933, "node_id": "MDQ6VXNlcjI5MjI0OTMz", "avatar_url": "https://avatars2.githubusercontent.com/u/29224933?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lee-bin", "html_url": "https://github.com/lee-bin", "followers_url": "https://api.github.com/users/lee-bin/followers", "following_url": "https://api.github.com/users/lee-bin/following{/other_user}", "gists_url": "https://api.github.com/users/lee-bin/gists{/gist_id}", "starred_url": "https://api.github.com/users/lee-bin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lee-bin/subscriptions", "organizations_url": "https://api.github.com/users/lee-bin/orgs", "repos_url": "https://api.github.com/users/lee-bin/repos", "events_url": "https://api.github.com/users/lee-bin/events{/privacy}", "received_events_url": "https://api.github.com/users/lee-bin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 1133285679, "node_id": "MDU6TGFiZWwxMTMzMjg1Njc5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:xla", "name": "comp:xla", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, {"login": "tpopp", "id": 1491091, "node_id": "MDQ6VXNlcjE0OTEwOTE=", "avatar_url": "https://avatars0.githubusercontent.com/u/1491091?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tpopp", "html_url": "https://github.com/tpopp", "followers_url": "https://api.github.com/users/tpopp/followers", "following_url": "https://api.github.com/users/tpopp/following{/other_user}", "gists_url": "https://api.github.com/users/tpopp/gists{/gist_id}", "starred_url": "https://api.github.com/users/tpopp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tpopp/subscriptions", "organizations_url": "https://api.github.com/users/tpopp/orgs", "repos_url": "https://api.github.com/users/tpopp/repos", "events_url": "https://api.github.com/users/tpopp/events{/privacy}", "received_events_url": "https://api.github.com/users/tpopp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 12, "created_at": "2019-07-17T06:27:14Z", "updated_at": "2019-08-16T01:52:35Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):centos\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):binary\r\n- TensorFlow version (use command below):v1.12.0-0-ga6d8ffae09 1.12.0\r\n- Python version:3.6.8\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:V9.0.176 / 7\r\n- GPU model and memory: P40\r\n\r\n**Describe the current behavior**\r\nBefore using XLA, the [Tacotron 2](https://github.com/Rayhane-mamah/Tacotron-2) runs about 0.5s, however after using XLA, it increases to about 0.7s which is much slower.\r\n```python\r\nconfig = tf.ConfigProto()\r\nconfig.graph_options.optimizer_options.global_jit_level = tf.OptimizerOptions.ON_1              \r\nself.session = tf.Session(config=config) \r\n```\r\nI use XLA like above. Any thoughts would be appreciated. Thanks."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30773", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30773/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30773/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30773/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30773", "id": 468848824, "node_id": "MDU6SXNzdWU0Njg4NDg4MjQ=", "number": 30773, "title": "[TF 2.0] Can not compile model more than once without running out of memory", "user": {"login": "jbgh2", "id": 140016, "node_id": "MDQ6VXNlcjE0MDAxNg==", "avatar_url": "https://avatars0.githubusercontent.com/u/140016?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jbgh2", "html_url": "https://github.com/jbgh2", "followers_url": "https://api.github.com/users/jbgh2/followers", "following_url": "https://api.github.com/users/jbgh2/following{/other_user}", "gists_url": "https://api.github.com/users/jbgh2/gists{/gist_id}", "starred_url": "https://api.github.com/users/jbgh2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jbgh2/subscriptions", "organizations_url": "https://api.github.com/users/jbgh2/orgs", "repos_url": "https://api.github.com/users/jbgh2/repos", "events_url": "https://api.github.com/users/jbgh2/events{/privacy}", "received_events_url": "https://api.github.com/users/jbgh2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2019-07-16T20:29:31Z", "updated_at": "2019-12-26T22:22:21Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.0.0-dev20190702\r\n- Python version: 3.6.7\r\n- Bazel version (if compiling from source): None\r\n- GCC/Compiler version (if compiling from source): None\r\n- CUDA/cuDNN version: V10.0.130, 7.3.1\r\n- GPU model and memory: Surface Book 1 Nvidia GPU\r\n\r\n**Describe the current behavior**\r\n\r\nBuild a Keras model, compile it, run it.\r\nTry and rebuild model with new parameters.\r\nResult: OOM on GPU. Memory has not been freed or re-used.\r\n\r\n**Describe the expected behavior**\r\n\r\nCompile a model more than once without the GPU running out of memory.\r\nMore specifically, be able to hyper-parameter tuning without restarting the Jupyter kernel.\r\n\r\nI've tried:\r\n-  set_memory_growth on the GPU\r\n- del model + gc.collect\r\n- clear_session\r\nnone of them help.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n```\r\n#Import basics and check everything works\r\nimport tensorflow as tf\r\nfrom tensorflow import keras\r\n\r\nAUTOTUNE = tf.data.experimental.AUTOTUNE\r\n\r\nprint(\"Versions:\", tf.version.VERSION, tf.version.GIT_VERSION)\r\nprint(\"GPU availablilty:\", tf.test.is_gpu_available())\r\nprint(\"Eager execution:\", tf.executing_eagerly())\r\n\r\n#Quick test\r\nx = [[2.]]\r\nm = tf.matmul(x, x)\r\nprint(\"hello, {}\".format(m))\r\n\r\ndef make_model(input_shape, n_hidden1=2049, n_hidden2=500, n_hidden3=180, batch_n_mom=0.99, dropout_rate=0.1):\r\n\r\n    from tensorflow.keras.initializers import he_normal\r\n    \r\n    stacked_ae = keras.models.Sequential([\r\n        keras.layers.Flatten(input_shape=input_shape),\r\n        keras.layers.BatchNormalization(axis=1, momentum=batch_n_mom),\r\n        \r\n        keras.layers.Dense(n_hidden1, activation=\"selu\", name=\"he1\", kernel_initializer=he_normal(seed=27)),\r\n        keras.layers.BatchNormalization(axis=1, momentum=batch_n_mom),\r\n        keras.layers.Dropout(dropout_rate),\r\n        \r\n        keras.layers.Dense(n_hidden2, activation=\"selu\", name=\"he2\", kernel_initializer=he_normal(seed=42)),\r\n        keras.layers.BatchNormalization(axis=1, momentum=batch_n_mom),\r\n        \r\n        keras.layers.Dense(n_hidden3, activation=\"selu\", name=\"he3\", kernel_initializer=he_normal(seed=65)),\r\n        keras.layers.BatchNormalization(axis=1, momentum=batch_n_mom),\r\n        \r\n        keras.layers.Dense(n_hidden2, activation=\"selu\", name=\"hd2\", kernel_initializer=he_normal(seed=42)),\r\n        keras.layers.BatchNormalization(axis=1, momentum=batch_n_mom),\r\n        \r\n        keras.layers.Dense(n_hidden1, activation=\"selu\", name=\"hd1\", kernel_initializer=he_normal(seed=27)),\r\n        keras.layers.BatchNormalization(axis=1, momentum=batch_n_mom),\r\n        keras.layers.Dropout(dropout_rate),\r\n        \r\n        keras.layers.Dense(input_shape[0] * input_shape[1], name=\"output\", kernel_initializer=he_normal(seed=62)),\r\n        keras.layers.Reshape(input_shape)\r\n    ])\r\n    \r\n    return stacked_ae\r\n\r\nimport numpy as np\r\n\r\n#Data doesn't matter\r\nx_train = np.ones((32,60,80))\r\ny_train = np.ones((32,60,80))\r\n\r\n#Once runs ok\r\ninput_shape = [60,80]\r\nae_model = make_model(input_shape)\r\nae_model.compile(loss=\"mse\",\r\n                 optimizer=keras.optimizers.Adam(learning_rate=0.001, decay=1e-6),\r\n                metrics=['accuracy'])\r\nprint(ae_model.summary())\r\n\r\n#Do something with the model\r\nhistory = ae_model.fit(x=x_train, y=y_train,  epochs=1, steps_per_epoch=1)\r\n\r\n#Second run, new model\r\nae_model = make_model(input_shape, n_hidden1=2150)\r\nae_model.compile(loss=\"mse\",\r\n                 optimizer=keras.optimizers.Adam(learning_rate=0.001, decay=1e-6),\r\n                metrics=['accuracy'])\r\nprint(ae_model.summary())\r\n\r\n#Run again. GPU OOM.\r\nhistory = ae_model.fit(x=x_train, y=y_train,  epochs=1, steps_per_epoch=1)\r\n\r\n```\r\n\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n2019-07-16 16:24:06.019147: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1746] Adding visible gpu devices: 0\r\n2019-07-16 16:24:12.775543: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1159] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-07-16 16:24:12.789530: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1165]      0\r\n2019-07-16 16:24:12.799822: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1178] 0:   N\r\n2019-07-16 16:24:12.813163: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1304] Created TensorFlow device (/device:GPU:0 with 517 MB memory) -> physical GPU (device: 0, name: GeForce GPU, pci bus id: 0000:01:00.0, compute capability: 5.0)\r\n2019-07-16 16:24:12.847183: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1618] Found device 0 with properties:\r\nname: GeForce GPU major: 5 minor: 0 memoryClockRate(GHz): 0.993\r\npciBusID: 0000:01:00.0\r\n2019-07-16 16:24:12.868383: I tensorflow/stream_executor/platform/default/dlopen_checker_stub.cc:25] GPU libraries are statically linked, skip dlopen check.\r\n2019-07-16 16:24:12.887076: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1746] Adding visible gpu devices: 0\r\n2019-07-16 16:24:12.902106: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1618] Found device 0 with properties:\r\nname: GeForce GPU major: 5 minor: 0 memoryClockRate(GHz): 0.993\r\npciBusID: 0000:01:00.0\r\n2019-07-16 16:24:12.925257: I tensorflow/stream_executor/platform/default/dlopen_checker_stub.cc:25] GPU libraries are statically linked, skip dlopen check.\r\n2019-07-16 16:24:12.946163: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1746] Adding visible gpu devices: 0\r\n2019-07-16 16:24:12.958309: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1159] Device interconnect StreamExecutor with strength 1 edge matrix:\r\n2019-07-16 16:24:12.977399: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1165]      0\r\n2019-07-16 16:24:12.988725: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1178] 0:   N\r\n2019-07-16 16:24:13.001442: I tensorflow/core/common_runtime/gpu/gpu_device.cc:1304] Created TensorFlow device (/job:localhost/replica:0/task:0/device:GPU:0 with 517 MB memory) -> physical GPU (device: 0, name: GeForce GPU, pci bus id: 0000:01:00.0, compute capability: 5.0)\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30768", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30768/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30768/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30768/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30768", "id": 468815295, "node_id": "MDU6SXNzdWU0Njg4MTUyOTU=", "number": 30768, "title": "Cryptic error message when assigning to a variable in a tf.function", "user": {"login": "ageron", "id": 76661, "node_id": "MDQ6VXNlcjc2NjYx", "avatar_url": "https://avatars3.githubusercontent.com/u/76661?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ageron", "html_url": "https://github.com/ageron", "followers_url": "https://api.github.com/users/ageron/followers", "following_url": "https://api.github.com/users/ageron/following{/other_user}", "gists_url": "https://api.github.com/users/ageron/gists{/gist_id}", "starred_url": "https://api.github.com/users/ageron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ageron/subscriptions", "organizations_url": "https://api.github.com/users/ageron/orgs", "repos_url": "https://api.github.com/users/ageron/repos", "events_url": "https://api.github.com/users/ageron/events{/privacy}", "received_events_url": "https://api.github.com/users/ageron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 736653459, "node_id": "MDU6TGFiZWw3MzY2NTM0NTk=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:eager", "name": "comp:eager", "color": "0052cc", "default": false, "description": ""}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jaingaurav", "id": 84372, "node_id": "MDQ6VXNlcjg0Mzcy", "avatar_url": "https://avatars1.githubusercontent.com/u/84372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaingaurav", "html_url": "https://github.com/jaingaurav", "followers_url": "https://api.github.com/users/jaingaurav/followers", "following_url": "https://api.github.com/users/jaingaurav/following{/other_user}", "gists_url": "https://api.github.com/users/jaingaurav/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaingaurav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaingaurav/subscriptions", "organizations_url": "https://api.github.com/users/jaingaurav/orgs", "repos_url": "https://api.github.com/users/jaingaurav/repos", "events_url": "https://api.github.com/users/jaingaurav/events{/privacy}", "received_events_url": "https://api.github.com/users/jaingaurav/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jaingaurav", "id": 84372, "node_id": "MDQ6VXNlcjg0Mzcy", "avatar_url": "https://avatars1.githubusercontent.com/u/84372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaingaurav", "html_url": "https://github.com/jaingaurav", "followers_url": "https://api.github.com/users/jaingaurav/followers", "following_url": "https://api.github.com/users/jaingaurav/following{/other_user}", "gists_url": "https://api.github.com/users/jaingaurav/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaingaurav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaingaurav/subscriptions", "organizations_url": "https://api.github.com/users/jaingaurav/orgs", "repos_url": "https://api.github.com/users/jaingaurav/repos", "events_url": "https://api.github.com/users/jaingaurav/events{/privacy}", "received_events_url": "https://api.github.com/users/jaingaurav/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-07-16T19:04:21Z", "updated_at": "2019-07-21T09:40:07Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nYes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nMacOSX 10.13.6\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\nN/A\r\n- TensorFlow installed from (source or binary):\r\nbinary\r\n- TensorFlow version (use command below):\r\nVERSION=2.0.0-dev20190716\r\nGIT_VERSION=v1.12.1-6367-gb51a1b258b\r\n- Python version:\r\n3.6.8\r\n- Bazel version (if compiling from source):\r\nN/A\r\n- GCC/Compiler version (if compiling from source):\r\nN/A\r\n- CUDA/cuDNN version:\r\nN/A\r\n- GPU model and memory:\r\nN/A\r\n\r\n**Describe the current behavior**\r\nWhen assigning to a TF variable with the `=` operator in a TF Function, I get a really cryptic error message.\r\nThis issue is about the error message, not the error itself (I should have called the variable's assign() method).\r\n\r\n**Describe the expected behavior**\r\nI was hoping for a more explicit error message.\r\n\r\n**Code to reproduce the issue**\r\n\r\n```python\r\nimport tensorflow as tf\r\n\r\nv = tf.Variable(0.)\r\n\r\n@tf.function\r\ndef f(x):\r\n    global v\r\n    v = v + x  # no problem if use v.assign(v + x)\r\n    return v\r\n\r\nf(42.0)\r\n```\r\n\r\n**Other info / logs**\r\n```\r\n2019-07-16 21:02:26.141110: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-07-16 21:02:26.154309: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x7fe6734a6e50 executing computations on platform Host. Devices:\r\n2019-07-16 21:02:26.154329: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): <undefined>, <undefined>\r\n2019-07-16 21:02:26.222272: W tensorflow/compiler/jit/mark_for_compilation_pass.cc:1558] (One-time warning): Not using XLA:CPU for cluster because envvar TF_XLA_FLAGS=--tf_xla_cpu_global_jit was not set.  If you want XLA:CPU, either set that envvar, or use experimental_jit_scope to enable XLA:CPU.  To confirm that XLA is active, pass --vmodule=xla_compilation_cache=1 (as a proper command-line flag, not via TF_XLA_FLAGS) or set the envvar XLA_FLAGS=--xla_hlo_profile.\r\n2019-07-16 21:02:26.223137: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Failed precondition: Error while reading resource variable _AnonymousVar0 from Container: localhost. This could mean that the variable was uninitialized. Not found: Resource localhost/_AnonymousVar0/N10tensorflow3VarE does not exist.\r\n\t [[{{node ReadVariableOp}}]]\r\n---------------------------------------------------------------------------\r\nFailedPreconditionError                   Traceback (most recent call last)\r\n<ipython-input-1-a1cd73b43975> in <module>\r\n      9     return v\r\n     10\r\n---> 11 f(42.0)\r\n\r\n~/miniconda3/envs/tf2/lib/python3.6/site-packages/tensorflow_core/python/eager/def_function.py in __call__(self, *args, **kwds)\r\n    433               *args, **kwds)\r\n    434       # If we did not create any variables the trace we have is good enough.\r\n--> 435       return self._concrete_stateful_fn._filtered_call(canon_args, canon_kwds)  # pylint: disable=protected-access\r\n    436\r\n    437     def fn_with_cond(*inner_args, **inner_kwds):\r\n\r\n~/miniconda3/envs/tf2/lib/python3.6/site-packages/tensorflow_core/python/eager/function.py in _filtered_call(self, args, kwargs)\r\n    633          if isinstance(t, (ops.Tensor,\r\n    634                            resource_variable_ops.BaseResourceVariable))),\r\n--> 635         self.captured_inputs)\r\n    636\r\n    637   def _call_flat(self, args, captured_inputs):\r\n\r\n~/miniconda3/envs/tf2/lib/python3.6/site-packages/tensorflow_core/python/eager/function.py in _call_flat(self, args, captured_inputs)\r\n    743     # Only need to override the gradient in graph mode and when we have outputs.\r\n    744     if context.executing_eagerly() or not self.outputs:\r\n--> 745       outputs = self._inference_function.call(ctx, args)\r\n    746     else:\r\n    747       self._register_gradient()\r\n\r\n~/miniconda3/envs/tf2/lib/python3.6/site-packages/tensorflow_core/python/eager/function.py in call(self, ctx, args)\r\n    457             attrs=(\"executor_type\", executor_type,\r\n    458                    \"config_proto\", config),\r\n--> 459             ctx=ctx)\r\n    460       # Replace empty list with None\r\n    461       outputs = outputs or None\r\n\r\n~/miniconda3/envs/tf2/lib/python3.6/site-packages/tensorflow_core/python/eager/execute.py in quick_execute(op_name, num_outputs, inputs, attrs, ctx, name)\r\n     65     else:\r\n     66       message = e.message\r\n---> 67     six.raise_from(core._status_to_exception(e.code, message), None)\r\n     68   except TypeError as e:\r\n     69     keras_symbolic_tensors = [\r\n\r\n~/miniconda3/envs/tf2/lib/python3.6/site-packages/six.py in raise_from(value, from_value)\r\n\r\nFailedPreconditionError:  Error while reading resource variable _AnonymousVar0 from Container: localhost. This could mean that the variable was uninitialized. Not found: Resource localhost/_AnonymousVar0/N10tensorflow3VarE does not exist.\r\n\t [[node ReadVariableOp (defined at /Users/ageron/miniconda3/envs/tf2/lib/python3.6/site-packages/tensorflow_core/python/framework/ops.py:1657) ]] [Op:__inference_f_15]\r\n\r\nFunction call stack:\r\nf\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30767", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30767/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30767/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30767/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30767", "id": 468795355, "node_id": "MDU6SXNzdWU0Njg3OTUzNTU=", "number": 30767, "title": "Minimum number of epochs before termination for tf.keras.callbacks.EarlyStopping()", "user": {"login": "joglekara", "id": 13438206, "node_id": "MDQ6VXNlcjEzNDM4MjA2", "avatar_url": "https://avatars1.githubusercontent.com/u/13438206?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joglekara", "html_url": "https://github.com/joglekara", "followers_url": "https://api.github.com/users/joglekara/followers", "following_url": "https://api.github.com/users/joglekara/following{/other_user}", "gists_url": "https://api.github.com/users/joglekara/gists{/gist_id}", "starred_url": "https://api.github.com/users/joglekara/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joglekara/subscriptions", "organizations_url": "https://api.github.com/users/joglekara/orgs", "repos_url": "https://api.github.com/users/joglekara/repos", "events_url": "https://api.github.com/users/joglekara/events{/privacy}", "received_events_url": "https://api.github.com/users/joglekara/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-07-16T18:15:29Z", "updated_at": "2020-03-17T19:00:08Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using):\r\n1.14\r\n- Are you willing to contribute it (Yes/No):\r\nYes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nThis feature is not yet implemented but is simple to implement. It requires an additional flag, storing one more `int`, and few more `if`-statements in tf.keras.callbacks.EarlyStopping().\r\n\r\n**Will this change the current api? How?**\r\nYes, in that one more variable will be available to be assigned when calling the EarlyStopping callback.\r\n\r\n**Who will benefit with this feature?**\r\nAnyone who wishes to use EarlyStopping but wants to let the model train for a certain number of epochs before EarlyStopping is activated.\r\n\r\n**Any Other info.**\r\nN/A"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30766", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30766/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30766/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30766/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30766", "id": 468790159, "node_id": "MDU6SXNzdWU0Njg3OTAxNTk=", "number": 30766, "title": "implementation of tf.dense_tensor_sparse_matmul() such that a matrix product AB can be computed where A is dense and B is sparse.", "user": {"login": "joglekara", "id": 13438206, "node_id": "MDQ6VXNlcjEzNDM4MjA2", "avatar_url": "https://avatars1.githubusercontent.com/u/13438206?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joglekara", "html_url": "https://github.com/joglekara", "followers_url": "https://api.github.com/users/joglekara/followers", "following_url": "https://api.github.com/users/joglekara/following{/other_user}", "gists_url": "https://api.github.com/users/joglekara/gists{/gist_id}", "starred_url": "https://api.github.com/users/joglekara/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joglekara/subscriptions", "organizations_url": "https://api.github.com/users/joglekara/orgs", "repos_url": "https://api.github.com/users/joglekara/repos", "events_url": "https://api.github.com/users/joglekara/events{/privacy}", "received_events_url": "https://api.github.com/users/joglekara/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-07-16T18:02:51Z", "updated_at": "2019-07-17T19:27:00Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using):\r\n1.14\r\n- Are you willing to contribute it (Yes/No):\r\nYes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nThe feature is not implemented in a transparent fashion. The operation can be performed by using tf.sparse.sparse_tensor_dense_matmul() and some matrix algebra. It is a python-only implementation and does not require going into the C/CUDA code.\r\n\r\n**Will this change the current api? How?**\r\nIt will add a new function call within tf.sparse.\r\n\r\n**Who will benefit with this feature?**\r\nMost people who use the Sparse library.\r\n\r\n**Any Other info.**\r\nI've already implemented and tested this feature against NumPy's matrix math library. I wanted to bring it up and see if this is a desirable feature.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30758", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30758/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30758/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30758/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30758", "id": 468651396, "node_id": "MDU6SXNzdWU0Njg2NTEzOTY=", "number": 30758, "title": "MAXIMUM and RESIZE_NEAREST_NEIGHBOR not available for tensorflow-lite-gpu", "user": {"login": "hvalev", "id": 8068533, "node_id": "MDQ6VXNlcjgwNjg1MzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/8068533?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hvalev", "html_url": "https://github.com/hvalev", "followers_url": "https://api.github.com/users/hvalev/followers", "following_url": "https://api.github.com/users/hvalev/following{/other_user}", "gists_url": "https://api.github.com/users/hvalev/gists{/gist_id}", "starred_url": "https://api.github.com/users/hvalev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hvalev/subscriptions", "organizations_url": "https://api.github.com/users/hvalev/orgs", "repos_url": "https://api.github.com/users/hvalev/repos", "events_url": "https://api.github.com/users/hvalev/events{/privacy}", "received_events_url": "https://api.github.com/users/hvalev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-07-16T13:21:36Z", "updated_at": "2019-12-25T06:15:33Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution: Android Oreo\r\n- TensorFlow installed from: source\r\n- TensorFlow version (or github SHA if from source):\r\nUsing both tensorflow-lite and tensorflow-lite-gpu libraries\r\nimplementation 'org.tensorflow:tensorflow-lite:0.0.0-nightly'\r\nimplementation 'org.tensorflow:tensorflow-lite-gpu:0.0.0-nightly'\r\n\r\n**Provide the text output from tflite-gpu**\r\n\r\n```\r\njava.lang.IllegalArgumentException: Internal error: Failed to apply delegate: Next operations are not supported by GPU delegate:\r\n    MAXIMUM: Operation is not supported.\r\n    RESIZE_NEAREST_NEIGHBOR: Operation is not supported.\r\n    First 3 operations will run on the GPU, and the remaining 74 on the CPU.TfLiteGpuDelegate Prepare: Output tensor is not found in the graph.Node number 77 (TfLiteGpuDelegate) failed to prepare.\r\n```\r\n\r\nDo you plan on implementing the MAXIMUM and RESIZE_NEAREST_NEIGHBOR ops to run on the gpu build of tensorflow-lite-gpu? I'm using a neural network, which up-samples from feature vectors.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30746", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30746/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30746/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30746/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30746", "id": 468548378, "node_id": "MDU6SXNzdWU0Njg1NDgzNzg=", "number": 30746, "title": "Couldn't find and import the 'graph_transforms' module in tensorflow1.14", "user": {"login": "Leslie-Fang", "id": 16850179, "node_id": "MDQ6VXNlcjE2ODUwMTc5", "avatar_url": "https://avatars2.githubusercontent.com/u/16850179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Leslie-Fang", "html_url": "https://github.com/Leslie-Fang", "followers_url": "https://api.github.com/users/Leslie-Fang/followers", "following_url": "https://api.github.com/users/Leslie-Fang/following{/other_user}", "gists_url": "https://api.github.com/users/Leslie-Fang/gists{/gist_id}", "starred_url": "https://api.github.com/users/Leslie-Fang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Leslie-Fang/subscriptions", "organizations_url": "https://api.github.com/users/Leslie-Fang/orgs", "repos_url": "https://api.github.com/users/Leslie-Fang/repos", "events_url": "https://api.github.com/users/Leslie-Fang/events{/privacy}", "received_events_url": "https://api.github.com/users/Leslie-Fang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097545273, "node_id": "MDU6TGFiZWwxMDk3NTQ1Mjcz", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:grappler", "name": "comp:grappler", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2019-07-16T09:33:17Z", "updated_at": "2019-11-15T01:22:46Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Centos7.6\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source \r\n- TensorFlow version (use command below): 1.14\r\n- Python version: 2.7\r\n- Bazel version (if compiling from source): 24.1\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n```\r\nimport tensorflow.tools.graph_transforms as graph_transforms\r\n```\r\nError message:\r\n```\r\nAttributeError: 'module' object has no attribute 'graph_transforms'\r\n```\r\n\r\n**Describe the expected behavior**\r\nSuccessfully import the graph_transforms module.\r\n This code succesfully run with tf 1.13 but failed on tf 1.14.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n```\r\nimport tensorflow.tools.graph_transforms as graph_transforms\r\n```\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\nThe installed 'graph_transforms' module seems has been moved to tensorflow_core folder in site-packages.\r\nIs this as expected? \r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30744", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30744/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30744/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30744/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30744", "id": 468537841, "node_id": "MDU6SXNzdWU0Njg1Mzc4NDE=", "number": 30744, "title": "why GetLocalGPUInfo() using cuda runtime api, I guess it should use cudart_stub instead.", "user": {"login": "chengleiwang", "id": 11610520, "node_id": "MDQ6VXNlcjExNjEwNTIw", "avatar_url": "https://avatars3.githubusercontent.com/u/11610520?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chengleiwang", "html_url": "https://github.com/chengleiwang", "followers_url": "https://api.github.com/users/chengleiwang/followers", "following_url": "https://api.github.com/users/chengleiwang/following{/other_user}", "gists_url": "https://api.github.com/users/chengleiwang/gists{/gist_id}", "starred_url": "https://api.github.com/users/chengleiwang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chengleiwang/subscriptions", "organizations_url": "https://api.github.com/users/chengleiwang/orgs", "repos_url": "https://api.github.com/users/chengleiwang/repos", "events_url": "https://api.github.com/users/chengleiwang/events{/privacy}", "received_events_url": "https://api.github.com/users/chengleiwang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-07-16T09:11:36Z", "updated_at": "2019-07-31T13:18:24Z", "closed_at": null, "author_association": "NONE", "body": "Base on below commit, cuda Runtime API should wrapped in dynamic load\uff0c but I still see  tensorflow/core/grappler/clusters/utils.cc using cuda Runtime API.\r\n\r\ncommit: 7c5aed39f0148f93cebef850d939558a938b41e7\r\nRemove tensorflow core runtime's explicit dependency on cuda runtime.\r\n- Add stub implementation which is wrapped in dynamic loader\r\n- Replace the runtime dependency with stub in tf_cuda_library\r\n\r\nAdopted csigg@'s method in cl/230858143 to work around the issue where the cuda runtime calls in Eigen::initializeDeviceProp() cannot be wrapped with the macro method.\r\n\r\nPiperOrigin-RevId: 232063778"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30730", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30730/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30730/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30730/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30730", "id": 468369173, "node_id": "MDU6SXNzdWU0NjgzNjkxNzM=", "number": 30730, "title": "Unable to find documentation for framework/ common run time files", "user": {"login": "sthomdev", "id": 7721892, "node_id": "MDQ6VXNlcjc3MjE4OTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/7721892?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sthomdev", "html_url": "https://github.com/sthomdev", "followers_url": "https://api.github.com/users/sthomdev/followers", "following_url": "https://api.github.com/users/sthomdev/following{/other_user}", "gists_url": "https://api.github.com/users/sthomdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/sthomdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sthomdev/subscriptions", "organizations_url": "https://api.github.com/users/sthomdev/orgs", "repos_url": "https://api.github.com/users/sthomdev/repos", "events_url": "https://api.github.com/users/sthomdev/events{/privacy}", "received_events_url": "https://api.github.com/users/sthomdev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "wolffg", "id": 874510, "node_id": "MDQ6VXNlcjg3NDUxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/874510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wolffg", "html_url": "https://github.com/wolffg", "followers_url": "https://api.github.com/users/wolffg/followers", "following_url": "https://api.github.com/users/wolffg/following{/other_user}", "gists_url": "https://api.github.com/users/wolffg/gists{/gist_id}", "starred_url": "https://api.github.com/users/wolffg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wolffg/subscriptions", "organizations_url": "https://api.github.com/users/wolffg/orgs", "repos_url": "https://api.github.com/users/wolffg/repos", "events_url": "https://api.github.com/users/wolffg/events{/privacy}", "received_events_url": "https://api.github.com/users/wolffg/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "wolffg", "id": 874510, "node_id": "MDQ6VXNlcjg3NDUxMA==", "avatar_url": "https://avatars2.githubusercontent.com/u/874510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wolffg", "html_url": "https://github.com/wolffg", "followers_url": "https://api.github.com/users/wolffg/followers", "following_url": "https://api.github.com/users/wolffg/following{/other_user}", "gists_url": "https://api.github.com/users/wolffg/gists{/gist_id}", "starred_url": "https://api.github.com/users/wolffg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wolffg/subscriptions", "organizations_url": "https://api.github.com/users/wolffg/orgs", "repos_url": "https://api.github.com/users/wolffg/repos", "events_url": "https://api.github.com/users/wolffg/events{/privacy}", "received_events_url": "https://api.github.com/users/wolffg/received_events", "type": "User", "site_admin": false}, {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-07-15T22:51:54Z", "updated_at": "2020-02-21T18:43:08Z", "closed_at": null, "author_association": "NONE", "body": "Hello TF team,\r\n\r\nI've been combing the documentation for any reference to OpKernels, Graphs defs, the executor, rendezvous, ect... the important abstractions that seem to be near the core of tensorflow. So far I haven't been able to find any kind of high level overview of how they all come together. I'm working on a feature that involves adding a new device and I don't want to miss any important abstractions in my implementation.\r\n\r\nDoes anyone know where I could find documentation that is concerned with how the tensorflow framework / run time work?\r\nThanks,\r\nScott\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30727", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30727/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30727/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30727/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30727", "id": 468302521, "node_id": "MDU6SXNzdWU0NjgzMDI1MjE=", "number": 30727, "title": "TOCO unable to convert unsupported operation using --allow_custom_ops", "user": {"login": "mabdullahrafique", "id": 32646935, "node_id": "MDQ6VXNlcjMyNjQ2OTM1", "avatar_url": "https://avatars0.githubusercontent.com/u/32646935?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mabdullahrafique", "html_url": "https://github.com/mabdullahrafique", "followers_url": "https://api.github.com/users/mabdullahrafique/followers", "following_url": "https://api.github.com/users/mabdullahrafique/following{/other_user}", "gists_url": "https://api.github.com/users/mabdullahrafique/gists{/gist_id}", "starred_url": "https://api.github.com/users/mabdullahrafique/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mabdullahrafique/subscriptions", "organizations_url": "https://api.github.com/users/mabdullahrafique/orgs", "repos_url": "https://api.github.com/users/mabdullahrafique/repos", "events_url": "https://api.github.com/users/mabdullahrafique/events{/privacy}", "received_events_url": "https://api.github.com/users/mabdullahrafique/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-07-15T19:43:48Z", "updated_at": "2019-11-16T12:25:27Z", "closed_at": null, "author_association": "NONE", "body": "\r\n\r\n**System information**\r\n- Have I written custom code **No**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): **Ubuntu 18.04**\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) **PIXEL 2 api 27**\r\n- TensorFlow installed from (source or binary): **Binary (pip installed)**\r\n- TensorFlow version (use command below): **tensorflow=='1.6.0-rc1'**\r\n- Python version:**3.68**\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: **10.0/7/4**\r\n- GPU model and memory:**GTX 1060 6GB, 16 GB RAM**\r\n\r\n\r\n\r\n@aquariusjay I am trying to convert mobilenet_v2 model trained on pascal voc dataset (https://github.com/tensorflow/models/blob/master/research/deeplab/g3doc/model_zoo.md).\r\n\r\nI want to infer with 1024x1024 resolution therefore I exported model with following commands.\r\n\r\n` python export_model.py \\\r\n--checkpoint_path model/model.ckpt-30000 \\\r\n--export_path ./frozen_inference_graph.pb \\\r\n--model_variant=\"mobilenet_v2\" \\\r\n--num_classes=21 \\\r\n--crop_size=1024 \\\r\n--crop_size=1024 \\\r\n--inference_scales=1.0\r\n`\r\n\r\n\r\nAnd then I convert model to tflite using toco command.\r\n\r\n`toco --graph_def_file=/home/abdullah/models-master/research   /frozen_casted.pb --input_format=TENSORFLOW_GRAPHDEF                                                         \r\n--output_format=TFLITE  \r\n--output_file=deeplabv3_mnv2_pascal_trainval.tflite   \r\n--inference_type=FLOAT --inference_input_type=QUANTIZED_UINT8\r\n--input_arrays=ImageTensor \r\n--output_arrays=SemanticPredictions\r\n--input_shapes=1,1024,1024,3 --default_ranges_min=0 \r\n--default_ranges_max=255 --allow_custom_ops  \r\n--std_dev_values=128 --mean_values=1\r\n`\r\n\r\nAnd then model is converted to tflite without errors :\r\n`\r\n    2019-07-16 00:28:18.188009: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1171] Converting unsupported operation: Equal\r\n2019-07-16 00:28:18.188052: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1171] Converting unsupported operation: Equal\r\n2019-07-16 00:28:18.188067: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1171] Converting unsupported operation: LogicalOr\r\n2019-07-16 00:28:18.188093: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1171] Converting unsupported operation: Unpack\r\n2019-07-16 00:28:18.188134: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1171] Converting unsupported operation: LogicalAnd\r\n2019-07-16 00:28:18.192256: I tensorflow/contrib/lite/toco/import_tensorflow.cc:1171] Converting unsupported operation: ResizeNearestNeighbor\r\n2019-07-16 00:28:18.203603: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 813 operators, 1237 arrays (0 quantized)\r\n2019-07-16 00:28:18.232795: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After Removing unused ops pass 1: 801 operators, 1215 arrays (0 quantized)\r\n2019-07-16 00:28:18.269909: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 801 operators, 1215 arrays (0 quantized)\r\n2019-07-16 00:28:18.293777: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 132 operators, 325 arrays (0 quantized)\r\n2019-07-16 00:28:18.296414: I tensorflow/contrib/lite/toco/graph_transformations/graph_transformations.cc:39] Before dequantization graph transformations: 132 operators, 325 arrays (0 quantized)\r\n2019-07-16 00:28:18.298905: I tensorflow/contrib/lite/toco/allocate_transient_arrays.cc:311] Total transient array allocated size: 28311552 bytes, theoretical optimal value: 25165824 bytes.\r\n2019-07-16 00:28:18.299732: W tensorflow/contrib/lite/toco/tflite/operator.cc:661] Ignoring unsupported attribute type with key '_output_shapes'\r\n2019-07-16 00:28:18.299743: W tensorflow/contrib/lite/toco/tflite/operator.cc:661] Ignoring unsupported attribute type with key 'T'\r\n2019-07-16 00:28:18.299946: W tensorflow/contrib/lite/toco/tflite/operator.cc:661] Ignoring unsupported attribute type with key 'T'\r\n2019-07-16 00:28:18.299956: W tensorflow/contrib/lite/toco/tflite/operator.cc:661] Ignoring unsupported attribute type with key '_output_shapes'\r\n`\r\n\r\n\r\nBut when I run the model on tflite it gives the following error.\r\n\r\n    java.lang.IllegalArgumentException: Internal error: Cannot create interpreter: Didn't find           \r\n    custom op for name 'ExpandDims' with version 1 Registration failed.\r\n\r\nFollowing are the details of environment.\r\n\r\n    For conversion I used tensorflow tensorflow=='1.6.0-rc1'\r\n\r\n    And tflite implementation in build.gradle is implementation 'org.tensorflow:tensorflow-lite:+'\r\n\r\nI don't know where I am failing, please help me.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30722", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30722/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30722/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30722/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30722", "id": 468281197, "node_id": "MDU6SXNzdWU0NjgyODExOTc=", "number": 30722, "title": "TensorFlow Lite build fatal error: gtest/gtest.h: No such file or directory", "user": {"login": "akotlarsky", "id": 45774958, "node_id": "MDQ6VXNlcjQ1Nzc0OTU4", "avatar_url": "https://avatars2.githubusercontent.com/u/45774958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/akotlarsky", "html_url": "https://github.com/akotlarsky", "followers_url": "https://api.github.com/users/akotlarsky/followers", "following_url": "https://api.github.com/users/akotlarsky/following{/other_user}", "gists_url": "https://api.github.com/users/akotlarsky/gists{/gist_id}", "starred_url": "https://api.github.com/users/akotlarsky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/akotlarsky/subscriptions", "organizations_url": "https://api.github.com/users/akotlarsky/orgs", "repos_url": "https://api.github.com/users/akotlarsky/repos", "events_url": "https://api.github.com/users/akotlarsky/events{/privacy}", "received_events_url": "https://api.github.com/users/akotlarsky/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-07-15T18:51:28Z", "updated_at": "2019-07-16T22:49:27Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Raspberry Pi 3\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version:  1.14.0\r\n\r\n**Describe the problem**\r\n\r\nWhen natively compiling TensorFlow Lite 1.14.0 in Raspberry Pi 3, I am getting the following compile error:\r\nfatal error: gtest/gtest.h: No such file or directory\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nHere is the error log:\r\narm-linux-gnueabihf-g++ -O3 -DNDEBUG -fPIC  --std=c++11 -march=armv7-a -mfpu=neon-vfpv4 -funsafe-math-optimizations -ftree-vectorize -fPIC -I. -I/home/pi/tensorflow-1.14.0/tensorflow/lite/tools/make/../../../../../ -I/home/pi/tensorflow-1.14.0/tensorflow/lite/tools/make/../../../../../../ -I/home/pi/tensorflow-1.14.0/tensorflow/lite/tools/make/downloads/ -I/home/pi/tensorflow-1.14.0/tensorflow/lite/tools/make/downloads/eigen -I/home/pi/tensorflow-1.14.0/tensorflow/lite/tools/make/downloads/absl -I/home/pi/tensorflow-1.14.0/tensorflow/lite/tools/make/downloads/gemmlowp -I/home/pi/tensorflow-1.14.0/tensorflow/lite/tools/make/downloads/neon_2_sse -I/home/pi/tensorflow-1.14.0/tensorflow/lite/tools/make/downloads/farmhash/src -I/home/pi/tensorflow-1.14.0/tensorflow/lite/tools/make/downloads/flatbuffers/include -I -I/usr/local/include -c tensorflow/lite/kernels/test_main.cc -o /home/pi/tensorflow-1.14.0/tensorflow/lite/tools/make/gen/rpi_armv7l/obj/tensorflow/lite/kernels/test_main.o\r\ntensorflow/lite/kernels/test_main.cc:17:25: fatal error: gtest/gtest.h: No such file or directory\r\n #include <gtest/gtest.h>\r\n                         ^\r\ncompilation terminated.\r\ntensorflow/lite/tools/make/Makefile:241: recipe for target '/home/pi/tensorflow-1.14.0/tensorflow/lite/tools/make/gen/rpi_armv7l/obj/tensorflow/lite/kernels/test_main.o' failed\r\nmake: *** [/home/pi/tensorflow-1.14.0/tensorflow/lite/tools/make/gen/rpi_armv7l/obj/tensorflow/lite/kernels/test_main.o] Error 1\r\nmake: *** Waiting for unfinished jobs....\r\nIn file included from ./tensorflow/lite/kernels/cpu_backend_gemm.h:22:0,\r\n                 from ./tensorflow/lite/kernels/internal/optimized/optimized_ops.h:42,\r\n                 from tensorflow/lite/kernels/sub.cc:18:\r\n./tensorflow/lite/kernels/cpu_backend_gemm_custom_gemv.h: In static member function \u2018static void tflite::cpu_backend_gemm::detail::CustomGemvImpl<LhsScalar, RhsScalar, int, DstScalar, quantization_flavor>::Run(const tflite::cpu_backend_gemm::MatrixParams<LhsScalar>&, const LhsScalar*, const tflite::cpu_backend_gemm::MatrixParams<RhsScalar>&, const RhsScalar*, const tflite::cpu_backend_gemm::MatrixParams<DstScalar>&, DstScalar*, const tflite::cpu_backend_gemm::GemmParams<int, DstScalar, quantization_flavor>&, int, int)\u2019:\r\n./tensorflow/lite/kernels/cpu_backend_gemm_custom_gemv.h:484:13: warning: attributes at the beginning of statement are ignored [-Wattributes]\r\n             [[clang::fallthrough]];\r\n             ^\r\n./tensorflow/lite/kernels/cpu_backend_gemm_custom_gemv.h:487:13: warning: attributes at the beginning of statement are ignored [-Wattributes]\r\n             [[clang::fallthrough]];\r\n             ^\r\n./tensorflow/lite/kernels/cpu_backend_gemm_custom_gemv.h:490:13: warning: attributes at the beginning of statement are ignored [-Wattributes]\r\n             [[clang::fallthrough]];\r\n             ^\r\n./tensorflow/lite/kernels/cpu_backend_gemm_custom_gemv.h:493:13: warning: attributes at the beginning of statement are ignored [-Wattributes]\r\n             [[clang::fallthrough]];\r\n             ^\r\n./tensorflow/lite/kernels/cpu_backend_gemm_custom_gemv.h:496:13: warning: attributes at the beginning of statement are ignored [-Wattributes]\r\n             [[clang::fallthrough]];\r\n             ^\r\n./tensorflow/lite/kernels/cpu_backend_gemm_custom_gemv.h:499:13: warning: attributes at the beginning of statement are ignored [-Wattributes]\r\n             [[clang::fallthrough]];\r\n             ^\r\npi@raspberrypi:~/tensorflow $ \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30716", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30716/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30716/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30716/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30716", "id": 468237981, "node_id": "MDU6SXNzdWU0NjgyMzc5ODE=", "number": 30716, "title": "Provide Raspberry Pi #aarch64 cross-compile instructions", "user": {"login": "marianopeck", "id": 1032834, "node_id": "MDQ6VXNlcjEwMzI4MzQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/1032834?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marianopeck", "html_url": "https://github.com/marianopeck", "followers_url": "https://api.github.com/users/marianopeck/followers", "following_url": "https://api.github.com/users/marianopeck/following{/other_user}", "gists_url": "https://api.github.com/users/marianopeck/gists{/gist_id}", "starred_url": "https://api.github.com/users/marianopeck/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marianopeck/subscriptions", "organizations_url": "https://api.github.com/users/marianopeck/orgs", "repos_url": "https://api.github.com/users/marianopeck/repos", "events_url": "https://api.github.com/users/marianopeck/events{/privacy}", "received_events_url": "https://api.github.com/users/marianopeck/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1194756584, "node_id": "MDU6TGFiZWwxMTk0NzU2NTg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20raspberry%20pi", "name": "subtype: raspberry pi", "color": "b619ea", "default": false, "description": "Raspberry Pi Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-07-15T17:06:30Z", "updated_at": "2019-07-17T17:43:41Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 1.13.1\r\n- Are you willing to contribute it (Yes/No): yes, at least as a tester\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nThere is no pre-build binary for Raspberry Pi / ARM and the instructions to build from scratch [here](https://www.tensorflow.org/install/source_rpi#build_from_source). However, there is nothing for any kind of SBC (like Raspberry Pi, ODroid, Pine64, etc) with a aarch64 architecture. \r\n\r\nI cannot use the Python wheel. I need the C library to bind to a different language. \r\n\r\n**Will this change the current api? How?**\r\n\r\nNo. \r\n\r\n**Who will benefit with this feature?**\r\n\r\nAnyone using a SBC with a aarch64 OS. \r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30715", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30715/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30715/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30715/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30715", "id": 468213655, "node_id": "MDU6SXNzdWU0NjgyMTM2NTU=", "number": 30715, "title": "Low GPU usage of RNN layers under MirroredStrategy", "user": {"login": "guillaumekln", "id": 4805513, "node_id": "MDQ6VXNlcjQ4MDU1MTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/4805513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guillaumekln", "html_url": "https://github.com/guillaumekln", "followers_url": "https://api.github.com/users/guillaumekln/followers", "following_url": "https://api.github.com/users/guillaumekln/following{/other_user}", "gists_url": "https://api.github.com/users/guillaumekln/gists{/gist_id}", "starred_url": "https://api.github.com/users/guillaumekln/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guillaumekln/subscriptions", "organizations_url": "https://api.github.com/users/guillaumekln/orgs", "repos_url": "https://api.github.com/users/guillaumekln/repos", "events_url": "https://api.github.com/users/guillaumekln/events{/privacy}", "received_events_url": "https://api.github.com/users/guillaumekln/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 1345373822, "node_id": "MDU6TGFiZWwxMzQ1MzczODIy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:ds-triaged", "name": "stat:ds-triaged", "color": "f2dea7", "default": false, "description": "Internal label for triaging"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-07-15T16:09:25Z", "updated_at": "2019-09-19T17:48:54Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code: Yes\r\n- OS Platform and Distribution: Ubuntu 14.04\r\n- TensorFlow installed from: binary\r\n- TensorFlow version: `2.0.0b1`\r\n- Python version: 3.6.8\r\n- CUDA/cuDNN version: 10.0 / \r\n- GPU model and memory: TITAN X\r\n\r\n**Describe the current behavior**\r\n\r\nRNN layers have poor performance and low GPU usage when used with `MirroredStrategy`. By monitoring `nvidia-smi`, part of the execution seems to run sequentially on each GPU.\r\n\r\n**Describe the expected behavior**\r\n\r\nWith `MirroredStrategy`, the model is expected to be run in parallel.\r\n\r\n**Code to reproduce the issue**\r\n\r\nConsider the dummy training code below. It generates examples with random shapes and apply a stack of `LSTMCell` on batches of sequences on 3 GPUs. If you replace the RNN layer by e.g. a stack of Dense layers, the parallelism is visibly improved.\r\n\r\n```python\r\nimport tensorflow as tf\r\n\r\nclass MyModel(tf.keras.layers.Layer):\r\n\r\n    def __init__(self):\r\n        super(MyModel, self).__init__()\r\n        cell = tf.keras.layers.StackedRNNCells(\r\n            [tf.keras.layers.LSTMCell(512) for _ in range(12)])\r\n        self.rnn = tf.keras.layers.RNN(cell)\r\n\r\n    def call(self, inputs):\r\n        return self.rnn(inputs)\r\n\r\ndataset = tf.data.Dataset.from_tensor_slices(\r\n    tf.random.uniform([10000], minval=1, maxval=80, dtype=tf.int32))\r\ndataset = dataset.shuffle(10000)\r\ndataset = dataset.map(lambda t: tf.zeros([t, 512]))\r\ndataset = dataset.padded_batch(\r\n    64, padded_shapes=tf.compat.v1.data.get_output_shapes(dataset))\r\ndataset = dataset.repeat()\r\ndataset = dataset.prefetch(1)\r\n\r\ndevices = [\"/gpu:0\", \"/gpu:1\", \"/gpu:2\"]\r\nstrategy = tf.distribute.MirroredStrategy(devices=devices)\r\n\r\nwith strategy.scope():\r\n    dataset = strategy.experimental_distribute_dataset(dataset)\r\n    model = MyModel()\r\n    optimizer = tf.keras.optimizers.Adam()\r\n\r\ndef step(inputs):\r\n    outputs = model(inputs)\r\n    loss = tf.keras.losses.MeanSquaredError(reduction=tf.keras.losses.Reduction.SUM)(\r\n        tf.zeros_like(outputs), outputs)\r\n    variables = model.trainable_variables\r\n    gradients = optimizer.get_gradients(loss, variables)\r\n    optimizer.apply_gradients(zip(gradients, variables))\r\n    return loss\r\n\r\n@tf.function\r\ndef train():\r\n    with strategy.scope():\r\n        for inputs in dataset:\r\n            loss = strategy.experimental_run_v2(step, args=(inputs,))\r\n\r\ntrain()\r\n```\r\n\r\ncc @jkamalu."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30712", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30712/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30712/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30712/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30712", "id": 468167749, "node_id": "MDU6SXNzdWU0NjgxNjc3NDk=", "number": 30712, "title": "Duplicate variables for models whose layers share weights", "user": {"login": "jkamalu", "id": 11124194, "node_id": "MDQ6VXNlcjExMTI0MTk0", "avatar_url": "https://avatars1.githubusercontent.com/u/11124194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkamalu", "html_url": "https://github.com/jkamalu", "followers_url": "https://api.github.com/users/jkamalu/followers", "following_url": "https://api.github.com/users/jkamalu/following{/other_user}", "gists_url": "https://api.github.com/users/jkamalu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkamalu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkamalu/subscriptions", "organizations_url": "https://api.github.com/users/jkamalu/orgs", "repos_url": "https://api.github.com/users/jkamalu/repos", "events_url": "https://api.github.com/users/jkamalu/events{/privacy}", "received_events_url": "https://api.github.com/users/jkamalu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-07-15T14:41:18Z", "updated_at": "2019-09-09T22:54:21Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.14 and 2\r\n- Python version: 3.6\r\n- CUDA/cuDNN version: 10/7\r\n- GPU model and memory: NA\r\n\r\n**Describe the current behavior**\r\n\r\nImagine you extend the tf.keras.layers.Layer with the class MyLayer, which is a wrapper for the tf.keras.layers.Dense layer class (this class extension could also be a Model, but that's not important).\r\n\r\nNow imagine you instantiate a Dense layer `dense` (w/ no bias) and initialize two independent MyLayer instances `dense1` and `dense2` using `dense`...\r\n\r\nNow, we extend the Model class to take two MyLayer instances on init. We do this because we want to use dense1 and dense2 to perform different tasks but we want their weights to be shared (in a realistic example, MyLayer would be split into MyLayer1 and MyLayer2, which would perform different operations on `call` but would both depend on `dense`). We run data through our model pipeline and compute a loss, gathering gradients by using either the GradientTape or keras optimizers. However, when we gather and apply gradients with respect to Model.trainable_variables, even though our model has one unique weight, the kernel for `dense`, Model.trainable_variables will return two variables, and the gradients will be calculated and thus applied twice, which I would say is a bug, insofar as it's unexpected.\r\n\r\n**Describe the expected behavior**\r\n\r\nModels whose layers have shared/tied weights should not return duplicate weights when accessing the trainable_variables property. A super simple work-around is to call list(set(model.trainable_variables)) but the real issue is the unexpected behavior: \"Why would I ever think that model.trainable_variables would return duplicates of the same variable ?!\" \r\n\r\nThe two calls to test in the code below should have the same output.\r\n\r\n**Code to reproduce the issue**\r\n`\r\ncode\r\n\r\n    import numpy as np\r\n    import tensorflow as tf\r\n\r\n    tf.enable_eager_execution()\r\n\r\n    class MyDense(tf.keras.layers.Layer):\r\n      def __init__(self, dense, **kwargs):\r\n        super().__init__(**kwargs)\r\n        self.dense = dense\r\n      def call(self, inputs):\r\n        return self.dense(inputs)\r\n\r\n    class MyModel(tf.keras.Model):\r\n      def __init__(self, dense1, dense2, **kwargs):\r\n        super().__init__(**kwargs)\r\n        self.dense1 = dense1\r\n        self.dense2 = dense2\r\n      def call(self, inputs):\r\n        return self.dense1(inputs) + self.dense2(inputs)\r\n\r\n    def test(unique):\r\n      x = tf.ones(shape=(10, 5))\r\n      y = tf.ones(shape=(10, 1)) + 2\r\n\r\n      dense = tf.keras.layers.Dense(1, kernel_initializer=tf.keras.initializers.constant(0.2), use_bias=False)\r\n      dense1 = MyDense(dense)\r\n      dense2 = MyDense(dense)\r\n      model = MyModel(dense1, dense2)\r\n\r\n      adam = tf.keras.optimizers.Adam(0.001)\r\n\r\n      with tf.GradientTape() as tape:\r\n        y_hat = model(x)\r\n        loss = tf.keras.losses.mse(y, y_hat)\r\n        variables = model.trainable_variables if unique else list(set(model.trainable_variables))\r\n        print(f\"# trainable variables: {len(variables)}\")\r\n\r\n        pre_weight = variables[0][0]\r\n\r\n        grads = tape.gradient(loss, variables)\r\n        adam.apply_gradients(list(zip(grads, variables)))\r\n\r\n        post_weight = variables[0][0]\r\n\r\n        return post_weight - pre_weight\r\n\r\n    ex1 = test(True)\r\n    print(ex1)\r\n    print(\"\\n+=+=+=+=\\n\")\r\n    ex2 = test(False)\r\n    print(ex2)\r\n\r\n`\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30697", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30697/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30697/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30697/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30697", "id": 467923893, "node_id": "MDU6SXNzdWU0Njc5MjM4OTM=", "number": 30697, "title": "Freeze_graph not supporting tf.control_dependencies", "user": {"login": "ghostplant", "id": 12099308, "node_id": "MDQ6VXNlcjEyMDk5MzA4", "avatar_url": "https://avatars2.githubusercontent.com/u/12099308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ghostplant", "html_url": "https://github.com/ghostplant", "followers_url": "https://api.github.com/users/ghostplant/followers", "following_url": "https://api.github.com/users/ghostplant/following{/other_user}", "gists_url": "https://api.github.com/users/ghostplant/gists{/gist_id}", "starred_url": "https://api.github.com/users/ghostplant/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ghostplant/subscriptions", "organizations_url": "https://api.github.com/users/ghostplant/orgs", "repos_url": "https://api.github.com/users/ghostplant/repos", "events_url": "https://api.github.com/users/ghostplant/events{/privacy}", "received_events_url": "https://api.github.com/users/ghostplant/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097545273, "node_id": "MDU6TGFiZWwxMDk3NTQ1Mjcz", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:grappler", "name": "comp:grappler", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-07-15T03:14:33Z", "updated_at": "2019-07-24T18:41:26Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): binary (pypi: tensorflow-gpu==1.14.0)\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: CUDA-10/CUDNN-7\r\n- GPU model and memory: NVIDIA 1080\r\n\r\n**Describe the current behavior**\r\nThis is the simple code I want to freeze, where `out` node is as the output node names:\r\n```py\r\n  print_op = tf.print(tf.ones([2, 2]))\r\n  with tf.control_dependencies([print_op]):\r\n    out = tf.zeros([3,])\r\n```\r\nBy freezing the `out` node with `freeze_graph.freeze_graph(...)`, what I got from the protobuf only contains nodes like `StringFormat`, `PrintV2` and `Ones`. No else information to show there execution order. Seems like the execution order managed by the `tf.control_dependencies` is lost from the frozen graph.\r\n\r\n**Code to reproduce the issue**\r\n\r\nFreeze any large or small graph that contains using `tf.control_dependencies`, and check how it is described in the frozen protobuf data.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30686", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30686/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30686/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30686/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30686", "id": 467755292, "node_id": "MDU6SXNzdWU0Njc3NTUyOTI=", "number": 30686, "title": "`tf.reduce_*` called on the result of `tf.TensorArray.concat` of unknown rank return corrupted Tensor", "user": {"login": "mdanatg", "id": 26628547, "node_id": "MDQ6VXNlcjI2NjI4NTQ3", "avatar_url": "https://avatars1.githubusercontent.com/u/26628547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdanatg", "html_url": "https://github.com/mdanatg", "followers_url": "https://api.github.com/users/mdanatg/followers", "following_url": "https://api.github.com/users/mdanatg/following{/other_user}", "gists_url": "https://api.github.com/users/mdanatg/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdanatg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdanatg/subscriptions", "organizations_url": "https://api.github.com/users/mdanatg/orgs", "repos_url": "https://api.github.com/users/mdanatg/repos", "events_url": "https://api.github.com/users/mdanatg/events{/privacy}", "received_events_url": "https://api.github.com/users/mdanatg/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 386191887, "node_id": "MDU6TGFiZWwzODYxOTE4ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20response", "name": "stat:awaiting response", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jaingaurav", "id": 84372, "node_id": "MDQ6VXNlcjg0Mzcy", "avatar_url": "https://avatars1.githubusercontent.com/u/84372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaingaurav", "html_url": "https://github.com/jaingaurav", "followers_url": "https://api.github.com/users/jaingaurav/followers", "following_url": "https://api.github.com/users/jaingaurav/following{/other_user}", "gists_url": "https://api.github.com/users/jaingaurav/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaingaurav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaingaurav/subscriptions", "organizations_url": "https://api.github.com/users/jaingaurav/orgs", "repos_url": "https://api.github.com/users/jaingaurav/repos", "events_url": "https://api.github.com/users/jaingaurav/events{/privacy}", "received_events_url": "https://api.github.com/users/jaingaurav/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jaingaurav", "id": 84372, "node_id": "MDQ6VXNlcjg0Mzcy", "avatar_url": "https://avatars1.githubusercontent.com/u/84372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaingaurav", "html_url": "https://github.com/jaingaurav", "followers_url": "https://api.github.com/users/jaingaurav/followers", "following_url": "https://api.github.com/users/jaingaurav/following{/other_user}", "gists_url": "https://api.github.com/users/jaingaurav/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaingaurav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaingaurav/subscriptions", "organizations_url": "https://api.github.com/users/jaingaurav/orgs", "repos_url": "https://api.github.com/users/jaingaurav/repos", "events_url": "https://api.github.com/users/jaingaurav/events{/privacy}", "received_events_url": "https://api.github.com/users/jaingaurav/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-07-13T18:58:56Z", "updated_at": "2020-03-13T07:17:04Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- TensorFlow version (use command below): 2.0\r\n- Python version: 3\r\n\r\n**Describe the current behavior**\r\n\r\nSee the reproducing code. When `tf.reduce_mean` is called on the output of a `TensorArray.concat` which had a fully dynamic shape (including rank), it produces a `Tensor` of scalar shape, but whose value is a 1-element vector.\r\n\r\n**Describe the expected behavior**\r\n\r\nThe resulting `Tensor` should have a scalar value, consistent with its static shape.\r\n\r\n**Code to reproduce the issue**\r\n\r\nNote that the bug does not reproduce if the unknown-shape Tensor is passed directly to `reduce_mean`, which would suggest some interaction between the two.\r\n\r\n```\r\nimport numpy as np\r\n\r\ndef unknown_shape_constant(val):\r\n  # This is one way to create tensors of unknown shape.\r\n  return tf.py_function(lambda: np.array(val), (), tf.int32)\r\n\r\n@tf.function\r\ndef reduce_mean_bug():\r\n  arr = tf.TensorArray(tf.int32, size=1, dynamic_size=True)\r\n  arr = arr.write(0, unknown_shape_constant([[1], [3]]))\r\n  c = arr.concat()\r\n  m1 = tf.reduce_mean(c)\r\n\r\n  arr = tf.TensorArray(tf.int32, size=1, dynamic_size=True)\r\n  arr = arr.write(0, tf.constant([[1], [3]]))\r\n  c = arr.concat()\r\n  m2 = tf.reduce_mean(c)\r\n\r\n  return m1, m2\r\n\r\nm1, m2 = reduce_mean_bug()\r\nassert m1.shape == m2.shape  # Fails\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30682", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30682/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30682/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30682/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30682", "id": 467717078, "node_id": "MDU6SXNzdWU0Njc3MTcwNzg=", "number": 30682, "title": "TFLite speech example failing to train with -output_representation='spec'or'mfcc' examples/lite/examples/speech_commands/ml", "user": {"login": "KauthamMurugan", "id": 41481829, "node_id": "MDQ6VXNlcjQxNDgxODI5", "avatar_url": "https://avatars2.githubusercontent.com/u/41481829?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KauthamMurugan", "html_url": "https://github.com/KauthamMurugan", "followers_url": "https://api.github.com/users/KauthamMurugan/followers", "following_url": "https://api.github.com/users/KauthamMurugan/following{/other_user}", "gists_url": "https://api.github.com/users/KauthamMurugan/gists{/gist_id}", "starred_url": "https://api.github.com/users/KauthamMurugan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KauthamMurugan/subscriptions", "organizations_url": "https://api.github.com/users/KauthamMurugan/orgs", "repos_url": "https://api.github.com/users/KauthamMurugan/repos", "events_url": "https://api.github.com/users/KauthamMurugan/events{/privacy}", "received_events_url": "https://api.github.com/users/KauthamMurugan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-07-13T12:53:37Z", "updated_at": "2019-07-30T13:10:56Z", "closed_at": null, "author_association": "NONE", "body": "My Environment \r\nWorking sample Link : https://github.com/tensorflow/examples/tree/master/lite/examples/speech_commands/ml\r\nVirtual environment : Anaconda Navigator\r\nEditor : VS Code\r\nMode of execution : VS Code integrated Terminal with Conda envs\r\nOS : Mac OSX\r\n\r\nTensorflow Version : 1.13.1 (as required in the samples requirement)\r\n\r\nWhen i download the sample and run it as it is as per the ReadMe file, everything works perfectly fine. \r\nBut when i try to change the \"-output_representation\" parameter value to 'spec' or 'mfcc' it doesn't work. I get the error `ValueError: total size of new array must be unchanged` in the `model.py line no : 59 x = Reshape([800, 20])(x)`. After a quick traceback i found that the spectrogram fingerprint size is taken as 257x98 for every second. So i change that line to `x = Reshape([257, 98])(x)` and it successfully passed through this line. \r\nBut instead i get the following \r\n```\r\nTraceback (most recent call last):\r\n  File \"/Users/minimaci73/anaconda3/envs/Samples/lib/python3.6/site-packages/tensorflow/python/framework/ops.py\", line 1659, in _create_c_op\r\n    c_op = c_api.TF_FinishOperation(op_desc)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Negative dimension size caused by subtracting 3 from 1 for 'conv1d_12/convolution/Conv2D' (op: 'Conv2D') with input shapes: [?,1,1,192], [1,3,192,256].\r\n```\r\nThis happens in the line no 99: `x = _reduce_conv(x, 256, 3)`.\r\n\r\nWhen i downloaded the ios example model and opened it in Netron i can clearly see that it uses audio spectrogram. \r\n\r\nWhat are all the changes that are to be done to train the model with 'spec', 'mfcc' and the 'mfcc_and_raw' ?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30673", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30673/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30673/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30673/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30673", "id": 467681192, "node_id": "MDU6SXNzdWU0Njc2ODExOTI=", "number": 30673, "title": "Support Conv3D in profiler for FLOPS counting", "user": {"login": "patzm", "id": 5219726, "node_id": "MDQ6VXNlcjUyMTk3MjY=", "avatar_url": "https://avatars1.githubusercontent.com/u/5219726?v=4", "gravatar_id": "", "url": "https://api.github.com/users/patzm", "html_url": "https://github.com/patzm", "followers_url": "https://api.github.com/users/patzm/followers", "following_url": "https://api.github.com/users/patzm/following{/other_user}", "gists_url": "https://api.github.com/users/patzm/gists{/gist_id}", "starred_url": "https://api.github.com/users/patzm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/patzm/subscriptions", "organizations_url": "https://api.github.com/users/patzm/orgs", "repos_url": "https://api.github.com/users/patzm/repos", "events_url": "https://api.github.com/users/patzm/events{/privacy}", "received_events_url": "https://api.github.com/users/patzm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097548274, "node_id": "MDU6TGFiZWwxMDk3NTQ4Mjc0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tfdbg", "name": "comp:tfdbg", "color": "0052cc", "default": false, "description": "tf debugger"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "trisolaran", "id": 33339844, "node_id": "MDQ6VXNlcjMzMzM5ODQ0", "avatar_url": "https://avatars1.githubusercontent.com/u/33339844?v=4", "gravatar_id": "", "url": "https://api.github.com/users/trisolaran", "html_url": "https://github.com/trisolaran", "followers_url": "https://api.github.com/users/trisolaran/followers", "following_url": "https://api.github.com/users/trisolaran/following{/other_user}", "gists_url": "https://api.github.com/users/trisolaran/gists{/gist_id}", "starred_url": "https://api.github.com/users/trisolaran/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/trisolaran/subscriptions", "organizations_url": "https://api.github.com/users/trisolaran/orgs", "repos_url": "https://api.github.com/users/trisolaran/repos", "events_url": "https://api.github.com/users/trisolaran/events{/privacy}", "received_events_url": "https://api.github.com/users/trisolaran/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "trisolaran", "id": 33339844, "node_id": "MDQ6VXNlcjMzMzM5ODQ0", "avatar_url": "https://avatars1.githubusercontent.com/u/33339844?v=4", "gravatar_id": "", "url": "https://api.github.com/users/trisolaran", "html_url": "https://github.com/trisolaran", "followers_url": "https://api.github.com/users/trisolaran/followers", "following_url": "https://api.github.com/users/trisolaran/following{/other_user}", "gists_url": "https://api.github.com/users/trisolaran/gists{/gist_id}", "starred_url": "https://api.github.com/users/trisolaran/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/trisolaran/subscriptions", "organizations_url": "https://api.github.com/users/trisolaran/orgs", "repos_url": "https://api.github.com/users/trisolaran/repos", "events_url": "https://api.github.com/users/trisolaran/events{/privacy}", "received_events_url": "https://api.github.com/users/trisolaran/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-07-13T06:50:13Z", "updated_at": "2019-07-26T17:50:10Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- TensorFlow version (you are using): 1.13.1\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nThe [TensorFlow Profiler](https://www.tensorflow.org/api_docs/python/tf/profiler/profile) currently does not support counting operations / FLOPS of Conv3D layers. I request that we add this feature. This [nice readme](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/profiler/g3doc/profile_model_architecture.md#profile-model-float-operations) describes how to add this, if I am not mistaken.\r\n\r\n**Will this change the current api? How?**\r\nNo.\r\n\r\n**Who will benefit with this feature?**\r\nEveryone that uses 3D convolutions and wants to profile the compute complexity of a model.\r\n\r\n**Any Other info.**\r\nCode to quickly see that Conv3D operations are indeed not supported:\r\n```python\r\nimport tensorflow as tf\r\n\r\nwith tf.Graph().as_default() as graph:\r\n    inputs = tf.ones(shape=(1, 5, 32, 32, 3))\r\n    tf.layers.conv3d(\r\n        inputs,\r\n        filters=6,\r\n        kernel_size=(3, 3, 3),\r\n        strides=(1, 1, 1),\r\n        padding=\"valid\",\r\n        use_bias=True,\r\n    )\r\n\r\nprofiling_options = tf.profiler.ProfileOptionBuilder.float_operation()\r\ntf_profile = tf.profiler.profile(graph, options=profiling_options)\r\n```\r\noutput\r\n```\r\nProfile:\r\nnode name | # float_ops\r\n_TFProfRoot (--/17.17k flops)\r\n  conv3d/BiasAdd (16.20k/16.20k flops)\r\n  conv3d/kernel/Initializer/random_uniform (486/973 flops)\r\n    conv3d/kernel/Initializer/random_uniform/mul (486/486 flops)\r\n    conv3d/kernel/Initializer/random_uniform/sub (1/1 flops)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30672", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30672/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30672/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30672/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30672", "id": 467661260, "node_id": "MDU6SXNzdWU0Njc2NjEyNjA=", "number": 30672, "title": "Backpropagate through tf.data", "user": {"login": "ufimtsev", "id": 4195569, "node_id": "MDQ6VXNlcjQxOTU1Njk=", "avatar_url": "https://avatars3.githubusercontent.com/u/4195569?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ufimtsev", "html_url": "https://github.com/ufimtsev", "followers_url": "https://api.github.com/users/ufimtsev/followers", "following_url": "https://api.github.com/users/ufimtsev/following{/other_user}", "gists_url": "https://api.github.com/users/ufimtsev/gists{/gist_id}", "starred_url": "https://api.github.com/users/ufimtsev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ufimtsev/subscriptions", "organizations_url": "https://api.github.com/users/ufimtsev/orgs", "repos_url": "https://api.github.com/users/ufimtsev/repos", "events_url": "https://api.github.com/users/ufimtsev/events{/privacy}", "received_events_url": "https://api.github.com/users/ufimtsev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jsimsa", "id": 1072079, "node_id": "MDQ6VXNlcjEwNzIwNzk=", "avatar_url": "https://avatars2.githubusercontent.com/u/1072079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsimsa", "html_url": "https://github.com/jsimsa", "followers_url": "https://api.github.com/users/jsimsa/followers", "following_url": "https://api.github.com/users/jsimsa/following{/other_user}", "gists_url": "https://api.github.com/users/jsimsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsimsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsimsa/subscriptions", "organizations_url": "https://api.github.com/users/jsimsa/orgs", "repos_url": "https://api.github.com/users/jsimsa/repos", "events_url": "https://api.github.com/users/jsimsa/events{/privacy}", "received_events_url": "https://api.github.com/users/jsimsa/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-07-13T03:01:27Z", "updated_at": "2020-01-01T20:20:47Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): n/a\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: n/a\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.14\r\n- Python version: 3.6\r\n- Bazel version (if compiling from source): n/a\r\n- GCC/Compiler version (if compiling from source): n/a\r\n- CUDA/cuDNN version: n/a\r\n- GPU model and memory: n/a\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nGradients are not propagated through tf.data\r\n\r\n**Describe the expected behavior**\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\nThis code snippet returns [None]:\r\n\r\nimport tensorflow as tf\r\n_ = tf.layers.conv1d(tf.ones((1,1,2)), 1, 1, use_bias=False, name='name')\r\ndata = tf.data.Dataset.from_tensors(tf.ones((10,2))).repeat().batch(4)\\\r\n    .map(lambda x: tf.layers.conv1d(x, 1, 1, use_bias=False, name='name', reuse=True))\r\ni = data.make_initializable_iterator()\r\nx = i.get_next()\r\ng = tf.gradients(x, tf.trainable_variables())\r\nprint (g)\r\n\r\n>>> [None]\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30658", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30658/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30658/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30658/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30658", "id": 467523262, "node_id": "MDU6SXNzdWU0Njc1MjMyNjI=", "number": 30658, "title": "TPUEstimator function requires `train_batch_size` to be set when `use_tpu` is True", "user": {"login": "jaymody", "id": 26451316, "node_id": "MDQ6VXNlcjI2NDUxMzE2", "avatar_url": "https://avatars3.githubusercontent.com/u/26451316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaymody", "html_url": "https://github.com/jaymody", "followers_url": "https://api.github.com/users/jaymody/followers", "following_url": "https://api.github.com/users/jaymody/following{/other_user}", "gists_url": "https://api.github.com/users/jaymody/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaymody/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaymody/subscriptions", "organizations_url": "https://api.github.com/users/jaymody/orgs", "repos_url": "https://api.github.com/users/jaymody/repos", "events_url": "https://api.github.com/users/jaymody/events{/privacy}", "received_events_url": "https://api.github.com/users/jaymody/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-07-12T17:30:34Z", "updated_at": "2019-07-23T17:11:18Z", "closed_at": null, "author_association": "NONE", "body": "The [TPUEstimator constructor](https://github.com/JayMody/estimator/blob/e794e634ba52f9e8b04971e74fe24b91857f2228/tensorflow_estimator/python/estimator/tpu/tpu_estimator.py#L2590) requires `train_batch_size` to be set if `use_tpu` is True. \r\n\r\nIn cases when I only want to use a TPU estimator to predict, that means I have to pass in an arbitrary value in for `train_batch_size`. Looking deeper into the code, I can't pinpoint why `train_batch_size` needs to be set when on a TPU, but I'm assuming it's required somewhere deeper in the code. \r\n\r\nIt was very confusing for me, especially since the documentation is conflicting [pull request #37](https://github.com/tensorflow/estimator/pull/37#issue-297115525). \r\n\r\nMaybe an option should be added that if `train_batch_size` is not set, but one of the other two (eval and predict) are, then provide a warning and pass an arbitrary value for `train_batch_size`. Otherwise maybe be more clear with the documentation that `train_batch_size` must always be set when on a TPU, even if you are only predicting or evaluating."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30655", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30655/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30655/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30655/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30655", "id": 467451160, "node_id": "MDU6SXNzdWU0Njc0NTExNjA=", "number": 30655, "title": "About Quantization Full Integer: Test with Yolo Tiny v2", "user": {"login": "Izabellaaaq", "id": 8125226, "node_id": "MDQ6VXNlcjgxMjUyMjY=", "avatar_url": "https://avatars0.githubusercontent.com/u/8125226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Izabellaaaq", "html_url": "https://github.com/Izabellaaaq", "followers_url": "https://api.github.com/users/Izabellaaaq/followers", "following_url": "https://api.github.com/users/Izabellaaaq/following{/other_user}", "gists_url": "https://api.github.com/users/Izabellaaaq/gists{/gist_id}", "starred_url": "https://api.github.com/users/Izabellaaaq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Izabellaaaq/subscriptions", "organizations_url": "https://api.github.com/users/Izabellaaaq/orgs", "repos_url": "https://api.github.com/users/Izabellaaaq/repos", "events_url": "https://api.github.com/users/Izabellaaaq/events{/privacy}", "received_events_url": "https://api.github.com/users/Izabellaaaq/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-07-12T14:41:28Z", "updated_at": "2019-11-16T06:27:23Z", "closed_at": null, "author_association": "NONE", "body": "Hello, \r\n\r\nWe tested the integer quantization in the scenarios of the table below, but we did not succeed in testing with Yolo Tiny v2, we would like to know what kind of optimization there is in mobilenet, inception and resnet so that we can apply in Yolo so that I can quantize and obtain a smaller inference time for the quantized model.\r\n\r\n![image](https://user-images.githubusercontent.com/8125226/61136270-b11e1100-a499-11e9-8d52-efb148f6ab10.png)\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30649", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30649/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30649/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30649/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30649", "id": 467411094, "node_id": "MDU6SXNzdWU0Njc0MTEwOTQ=", "number": 30649, "title": "tf.distribute.MirroredStrategy incompatible with tf.estimator training when defining tf.train.Scaffold with saver ", "user": {"login": "CasiaFan", "id": 10608984, "node_id": "MDQ6VXNlcjEwNjA4OTg0", "avatar_url": "https://avatars3.githubusercontent.com/u/10608984?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CasiaFan", "html_url": "https://github.com/CasiaFan", "followers_url": "https://api.github.com/users/CasiaFan/followers", "following_url": "https://api.github.com/users/CasiaFan/following{/other_user}", "gists_url": "https://api.github.com/users/CasiaFan/gists{/gist_id}", "starred_url": "https://api.github.com/users/CasiaFan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CasiaFan/subscriptions", "organizations_url": "https://api.github.com/users/CasiaFan/orgs", "repos_url": "https://api.github.com/users/CasiaFan/repos", "events_url": "https://api.github.com/users/CasiaFan/events{/privacy}", "received_events_url": "https://api.github.com/users/CasiaFan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-07-12T13:21:12Z", "updated_at": "2019-07-19T06:23:18Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**: \r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No \r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: 3.7.3\r\n- CUDA/cuDNN version: 10.0/7.1\r\n- GPU model and memory: TitanXp 12G x 4\r\n\r\n**Describe the current behavior**\r\nWhen I use `tf.estimator` together with `tf.distribute.MirroredStrategy()` for single worker multiple GPUs training, I meet the following error if I try to define `tf.train.Scaffold` for `tf.estimator.EstimatorSpec()` to configure the saver parameters. Everything works fine JUST I remove the scafflold and the multiple gpu training for estimator is referred this [tutorial](https://colab.research.google.com/github/tensorflow/docs/blob/master/site/en/r2/guide/distribute_strategy.ipynb#scrollTo=_098zB3vVhuV).\r\n```\r\n...\r\nFile \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow/python/distribute/distribute_lib.py\", line 126, in _require_cross_replica_or_default_context_extended\r\n    raise RuntimeError(\"Method requires being in cross-replica context, use \"\r\nRuntimeError: Method requires being in cross-replica context, use get_replica_context().merge_call()\r\n```\r\n\r\n**Code to reproduce the issue**\r\nHere is my minimum snippet of code to reproduce this error.\r\n```python\r\nimport tensorflow as tf \r\nfrom tensorflow.python.keras.applications import MobileNetV2\r\n\r\nl = tf.keras.layers\r\n\r\ndef input_fn(): \r\n    dataset = tf.data.Dataset.from_tensor_slices({\"feature\": tf.random_normal(shape=(1, 224, 224, 3), dtype=tf.float32),\r\n                                                  \"label\": tf.random.uniform(shape=[1], minval=0, maxval=2, dtype=tf.int32)})\r\n    dataset = dataset.repeat()\r\n    dataset = dataset.batch(2)\r\n    return dataset\r\n\r\ndef model_fn(features, labels, mode):\r\n    input_tensor = features['feature']\r\n    label = features['label']\r\n    if mode == tf.estimator.ModeKeys.TRAIN:\r\n        model = MobileNetV2(input_shape=(224, 224, 3), classes=2, weights=None)\r\n        output = model(input_tensor)\r\n\r\n        loss = tf.losses.sparse_softmax_cross_entropy(label, output)\r\n        train_op = tf.train.GradientDescentOptimizer(0.1).minimize(loss, global_step=tf.train.get_global_step())\r\n        # define scaffold\r\n        saver = tf.train.Saver(\r\n            sharded=True,\r\n            keep_checkpoint_every_n_hours=1,\r\n            save_relative_paths=True)\r\n        tf.add_to_collection(tf.GraphKeys.SAVERS, saver)\r\n        scaffold = tf.train.Scaffold(saver=saver)\r\n        # remove scaffold this code could work\r\n        return tf.estimator.EstimatorSpec(mode=mode, loss=loss, train_op=train_op, scaffold=scaffold)\r\n\r\n# multiple gpu configuration for estimator    \r\ndevices = [\"/device:GPU:0\", \"/device:GPU:1\"]\r\nstrategy = tf.distribute.MirroredStrategy(devices=devices)\r\n\r\nconfig = tf.estimator.RunConfig(model_dir=\"test_multi_gpu\",)\r\n                                train_distribute=strategy)\r\nestimator = tf.estimator.Estimator(model_fn=model_fn, config=config)\r\nestimator.train(input_fn=input_fn, steps=1000)\r\n```\r\n\r\n**Other info / logs**\r\nThe total error log is here:\r\n```\r\nTraceback (most recent call last):\r\n  File \"test_multi_gpus.py\", line 45, in <module>\r\n    estimator.train(input_fn=input_fn, steps=1000)\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow_estimator/python/estimator/estimator.py\", line 367, in train\r\n    loss = self._train_model(input_fn, hooks, saving_listeners)\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow_estimator/python/estimator/estimator.py\", line 1156, in _train_model\r\n    return self._train_model_distributed(input_fn, hooks, saving_listeners)\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow_estimator/python/estimator/estimator.py\", line 1219, in _train_model_distributed\r\n    self._config._train_distribute, input_fn, hooks, saving_listeners)\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow_estimator/python/estimator/estimator.py\", line 1299, in _actual_train_model_distributed\r\n    self.config))\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow/python/distribute/distribute_lib.py\", line 1555, in call_for_each_replica\r\n    return self._call_for_each_replica(fn, args, kwargs)\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow/python/distribute/mirrored_strategy.py\", line 693, in _call_for_each_replica\r\n    fn, args, kwargs)\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow/python/distribute/mirrored_strategy.py\", line 195, in _call_for_each_replica\r\n    coord.join(threads)\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow/python/training/coordinator.py\", line 389, in join\r\n    six.reraise(*self._exc_info_to_raise)\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/six.py\", line 693, in reraise\r\n    raise value\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow/python/training/coordinator.py\", line 297, in stop_on_exception\r\n    yield\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow/python/distribute/mirrored_strategy.py\", line 911, in run\r\n    self.main_result = self.main_fn(*self.main_args, **self.main_kwargs)\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow_estimator/python/estimator/estimator.py\", line 1146, in _call_model_fn\r\n    model_fn_results = self._model_fn(features=features, **kwargs)\r\n  File \"test_multi_gpus.py\", line 34, in model_fn\r\n    save_relative_paths=True)\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow/python/training/saver.py\", line 825, in __init__\r\n    self.build()\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow/python/training/saver.py\", line 837, in build\r\n    self._build(self._filename, build_save=True, build_restore=True)\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow/python/training/saver.py\", line 875, in _build\r\n    build_restore=build_restore)\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow/python/training/saver.py\", line 497, in _build_internal\r\n    per_device = self._GroupByDevices(saveables)\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow/python/training/saver.py\", line 404, in _GroupByDevices\r\n    pydev.canonical_name(spec.tensor.device) for spec in saveable.specs)\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow/python/training/saver.py\", line 404, in <genexpr>\r\n    pydev.canonical_name(spec.tensor.device) for spec in saveable.specs)\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow/python/training/saving/saveable_object.py\", line 52, in tensor\r\n    return self._tensor() if callable(self._tensor) else self._tensor\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow/python/distribute/values.py\", line 1358, in tensor\r\n    return strategy.extended.read_var(sync_on_read_variable)\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow/python/distribute/mirrored_strategy.py\", line 768, in read_var\r\n    return replica_local_var._get_cross_replica()  # pylint: disable=protected-access\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow/python/distribute/values.py\", line 1424, in _get_cross_replica\r\n    axis=None)\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow/python/distribute/distribute_lib.py\", line 832, in reduce\r\n    return super(StrategyV1, self).reduce(reduce_op, value, axis)\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow/python/distribute/distribute_lib.py\", line 552, in reduce\r\n    _require_cross_replica_or_default_context_extended(self._extended)\r\n  File \"/data/fanzong/miniconda3/envs/tf_cuda10/lib/python3.7/site-packages/tensorflow/python/distribute/distribute_lib.py\", line 126, in _require_cross_replica_or_default_context_extended\r\n    raise RuntimeError(\"Method requires being in cross-replica context, use \"\r\nRuntimeError: Method requires being in cross-replica context, use get_replica_context().merge_call()\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30647", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30647/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30647/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30647/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30647", "id": 467394332, "node_id": "MDU6SXNzdWU0NjczOTQzMzI=", "number": 30647, "title": "Unresolved External Symbols Windows C++Tensorflow v1.14.0", "user": {"login": "hashishoya", "id": 29784227, "node_id": "MDQ6VXNlcjI5Nzg0MjI3", "avatar_url": "https://avatars3.githubusercontent.com/u/29784227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hashishoya", "html_url": "https://github.com/hashishoya", "followers_url": "https://api.github.com/users/hashishoya/followers", "following_url": "https://api.github.com/users/hashishoya/following{/other_user}", "gists_url": "https://api.github.com/users/hashishoya/gists{/gist_id}", "starred_url": "https://api.github.com/users/hashishoya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hashishoya/subscriptions", "organizations_url": "https://api.github.com/users/hashishoya/orgs", "repos_url": "https://api.github.com/users/hashishoya/repos", "events_url": "https://api.github.com/users/hashishoya/events{/privacy}", "received_events_url": "https://api.github.com/users/hashishoya/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 20, "created_at": "2019-07-12T12:44:02Z", "updated_at": "2020-02-05T17:54:15Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- Windows 10\r\n- Built from source\r\n- Tensorflow v1.14.0\r\n- Bazel v0.25.2\r\n- MSVC 14.16.27023\r\n- CUDA 10.0 Cudnn 7.6.0\r\n- GTX 1060\r\n\r\n### Describe the problem\r\nI have built tenosrflow c++ library using the following commands \r\n\r\n```bash\r\nbazel build //tensorflow:tensorflow_cc.lib\r\n```\r\n\r\n```bash\r\nbazel build //tensorflow:tensorflow_cc.dll\r\n```\r\n\r\nhowever, after including the necessary headers and building/compiling my c++ code, I got the following 20 unresolved externals. \r\n\r\n### Source code / logs\r\nIncluded tensorflow headers: \r\n```\r\n#include \"tensorflow/cc/ops/const_op.h\"\r\n#include \"tensorflow/cc/ops/image_ops.h\"\r\n#include \"tensorflow/cc/ops/standard_ops.h\"\r\n#include \"tensorflow/core/framework/graph.pb.h\"\r\n#include \"tensorflow/core/framework/tensor.h\"\r\n#include \"tensorflow/core/graph/default_device.h\"\r\n#include \"tensorflow/core/graph/graph_def_builder.h\"\r\n#include \"tensorflow/core/lib/core/errors.h\"\r\n#include \"tensorflow/core/lib/core/stringpiece.h\"\r\n#include \"tensorflow/core/lib/core/threadpool.h\"\r\n#include \"tensorflow/core/lib/io/path.h\"\r\n#include \"tensorflow/core/lib/strings/str_util.h\"\r\n#include \"tensorflow/core/lib/strings/stringprintf.h\"\r\n#include \"tensorflow/core/platform/env.h\"\r\n#include \"tensorflow/core/platform/init_main.h\"\r\n#include \"tensorflow/core/platform/logging.h\"\r\n#include \"tensorflow/core/platform/types.h\"\r\n#include \"tensorflow/core/public/session.h\"\r\n#include \"tensorflow/core/util/command_line_flags.h\"\r\n\r\n```\r\nMissing external symbols:\r\n\r\n```\r\n1>main.obj : error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::Operation::Operation(class tensorflow::Node *)\" (??0Operation@tensorflow@@QEAA@PEAVNode@1@@Z) referenced in function \"public: __cdecl tensorflow::Input::Input(struct tensorflow::Input::Initializer const &)\" (??0Input@tensorflow@@QEAA@AEBUInitializer@01@@Z)\r\n1>main.obj : error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::Input::Initializer::Initializer(class std::initializer_list<struct tensorflow::Input::Initializer> const &)\" (??0Initializer@Input@tensorflow@@QEAA@AEBV?$initializer_list@UInitializer@Input@tensorflow@@@std@@@Z) referenced in function \"public: __cdecl tensorflow::Input::Input(class std::initializer_list<struct tensorflow::Input::Initializer> const &)\" (??0Input@tensorflow@@QEAA@AEBV?$initializer_list@UInitializer@Input@tensorflow@@@std@@@Z)\r\n1>main.obj : error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::Scope::~Scope(void)\" (??1Scope@tensorflow@@QEAA@XZ) referenced in function \"class tensorflow::Status __cdecl ReadTensorFromImageFile(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,int,int,float,float,class std::vector<class tensorflow::Tensor,class std::allocator<class tensorflow::Tensor> > *)\" (?ReadTensorFromImageFile@@YA?AVStatus@tensorflow@@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@HHMMPEAV?$vector@VTensor@tensorflow@@V?$allocator@VTensor@tensorflow@@@std@@@4@@Z)\r\n1>main.obj : error LNK2019: unresolved external symbol \"public: static class tensorflow::Scope __cdecl tensorflow::Scope::NewRootScope(void)\" (?NewRootScope@Scope@tensorflow@@SA?AV12@XZ) referenced in function \"class tensorflow::Status __cdecl ReadTensorFromImageFile(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,int,int,float,float,class std::vector<class tensorflow::Tensor,class std::allocator<class tensorflow::Tensor> > *)\" (?ReadTensorFromImageFile@@YA?AVStatus@tensorflow@@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@HHMMPEAV?$vector@VTensor@tensorflow@@V?$allocator@VTensor@tensorflow@@@std@@@4@@Z)\r\n1>main.obj : error LNK2019: unresolved external symbol \"public: class tensorflow::Status __cdecl tensorflow::Scope::ToGraphDef(class tensorflow::GraphDef *)const \" (?ToGraphDef@Scope@tensorflow@@QEBA?AVStatus@2@PEAVGraphDef@2@@Z) referenced in function \"class tensorflow::Status __cdecl ReadTensorFromImageFile(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,int,int,float,float,class std::vector<class tensorflow::Tensor,class std::allocator<class tensorflow::Tensor> > *)\" (?ReadTensorFromImageFile@@YA?AVStatus@tensorflow@@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@HHMMPEAV?$vector@VTensor@tensorflow@@V?$allocator@VTensor@tensorflow@@@std@@@4@@Z)\r\n1>main.obj : error LNK2019: unresolved external symbol \"private: class tensorflow::Scope __cdecl tensorflow::Scope::WithOpNameImpl(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)const \" (?WithOpNameImpl@Scope@tensorflow@@AEBA?AV12@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z) referenced in function \"public: class tensorflow::Scope __cdecl tensorflow::Scope::WithOpName<char const *>(char const *)const \" (??$WithOpName@PEBD@Scope@tensorflow@@QEBA?AV01@PEBD@Z)\r\n1>main.obj : error LNK2019: unresolved external symbol \"class tensorflow::Output __cdecl tensorflow::ops::Const(class tensorflow::Scope const &,struct tensorflow::Input::Initializer const &)\" (?Const@ops@tensorflow@@YA?AVOutput@2@AEBVScope@2@AEBUInitializer@Input@2@@Z) referenced in function \"class tensorflow::Status __cdecl ReadTensorFromImageFile(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,int,int,float,float,class std::vector<class tensorflow::Tensor,class std::allocator<class tensorflow::Tensor> > *)\" (?ReadTensorFromImageFile@@YA?AVStatus@tensorflow@@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@HHMMPEAV?$vector@VTensor@tensorflow@@V?$allocator@VTensor@tensorflow@@@std@@@4@@Z)\r\n1>main.obj : error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::ops::DecodeBmp::DecodeBmp(class tensorflow::Scope const &,class tensorflow::Input)\" (??0DecodeBmp@ops@tensorflow@@QEAA@AEBVScope@2@VInput@2@@Z) referenced in function \"class tensorflow::Status __cdecl ReadTensorFromImageFile(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,int,int,float,float,class std::vector<class tensorflow::Tensor,class std::allocator<class tensorflow::Tensor> > *)\" (?ReadTensorFromImageFile@@YA?AVStatus@tensorflow@@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@HHMMPEAV?$vector@VTensor@tensorflow@@V?$allocator@VTensor@tensorflow@@@std@@@4@@Z)\r\n1>main.obj : error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::ops::DecodeGif::DecodeGif(class tensorflow::Scope const &,class tensorflow::Input)\" (??0DecodeGif@ops@tensorflow@@QEAA@AEBVScope@2@VInput@2@@Z) referenced in function \"class tensorflow::Status __cdecl ReadTensorFromImageFile(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,int,int,float,float,class std::vector<class tensorflow::Tensor,class std::allocator<class tensorflow::Tensor> > *)\" (?ReadTensorFromImageFile@@YA?AVStatus@tensorflow@@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@HHMMPEAV?$vector@VTensor@tensorflow@@V?$allocator@VTensor@tensorflow@@@std@@@4@@Z)\r\n1>main.obj : error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::ops::DecodeJpeg::DecodeJpeg(class tensorflow::Scope const &,class tensorflow::Input,struct tensorflow::ops::DecodeJpeg::Attrs const &)\" (??0DecodeJpeg@ops@tensorflow@@QEAA@AEBVScope@2@VInput@2@AEBUAttrs@012@@Z) referenced in function \"class tensorflow::Status __cdecl ReadTensorFromImageFile(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,int,int,float,float,class std::vector<class tensorflow::Tensor,class std::allocator<class tensorflow::Tensor> > *)\" (?ReadTensorFromImageFile@@YA?AVStatus@tensorflow@@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@HHMMPEAV?$vector@VTensor@tensorflow@@V?$allocator@VTensor@tensorflow@@@std@@@4@@Z)\r\n1>main.obj : error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::ops::DecodePng::DecodePng(class tensorflow::Scope const &,class tensorflow::Input,struct tensorflow::ops::DecodePng::Attrs const &)\" (??0DecodePng@ops@tensorflow@@QEAA@AEBVScope@2@VInput@2@AEBUAttrs@012@@Z) referenced in function \"class tensorflow::Status __cdecl ReadTensorFromImageFile(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,int,int,float,float,class std::vector<class tensorflow::Tensor,class std::allocator<class tensorflow::Tensor> > *)\" (?ReadTensorFromImageFile@@YA?AVStatus@tensorflow@@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@HHMMPEAV?$vector@VTensor@tensorflow@@V?$allocator@VTensor@tensorflow@@@std@@@4@@Z)\r\n1>main.obj : error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::ops::ResizeBilinear::ResizeBilinear(class tensorflow::Scope const &,class tensorflow::Input,class tensorflow::Input)\" (??0ResizeBilinear@ops@tensorflow@@QEAA@AEBVScope@2@VInput@2@1@Z) referenced in function \"class tensorflow::Status __cdecl ReadTensorFromImageFile(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,int,int,float,float,class std::vector<class tensorflow::Tensor,class std::allocator<class tensorflow::Tensor> > *)\" (?ReadTensorFromImageFile@@YA?AVStatus@tensorflow@@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@HHMMPEAV?$vector@VTensor@tensorflow@@V?$allocator@VTensor@tensorflow@@@std@@@4@@Z)\r\n1>main.obj : error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::ops::ExpandDims::ExpandDims(class tensorflow::Scope const &,class tensorflow::Input,class tensorflow::Input)\" (??0ExpandDims@ops@tensorflow@@QEAA@AEBVScope@2@VInput@2@1@Z) referenced in function \"class tensorflow::Status __cdecl ReadTensorFromImageFile(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,int,int,float,float,class std::vector<class tensorflow::Tensor,class std::allocator<class tensorflow::Tensor> > *)\" (?ReadTensorFromImageFile@@YA?AVStatus@tensorflow@@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@HHMMPEAV?$vector@VTensor@tensorflow@@V?$allocator@VTensor@tensorflow@@@std@@@4@@Z)\r\n1>main.obj : error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::ops::Placeholder::Placeholder(class tensorflow::Scope const &,enum tensorflow::DataType)\" (??0Placeholder@ops@tensorflow@@QEAA@AEBVScope@2@W4DataType@2@@Z) referenced in function \"class tensorflow::Status __cdecl ReadTensorFromImageFile(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,int,int,float,float,class std::vector<class tensorflow::Tensor,class std::allocator<class tensorflow::Tensor> > *)\" (?ReadTensorFromImageFile@@YA?AVStatus@tensorflow@@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@HHMMPEAV?$vector@VTensor@tensorflow@@V?$allocator@VTensor@tensorflow@@@std@@@4@@Z)\r\n1>main.obj : error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::ops::Squeeze::Squeeze(class tensorflow::Scope const &,class tensorflow::Input)\" (??0Squeeze@ops@tensorflow@@QEAA@AEBVScope@2@VInput@2@@Z) referenced in function \"class tensorflow::Status __cdecl ReadTensorFromImageFile(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,int,int,float,float,class std::vector<class tensorflow::Tensor,class std::allocator<class tensorflow::Tensor> > *)\" (?ReadTensorFromImageFile@@YA?AVStatus@tensorflow@@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@HHMMPEAV?$vector@VTensor@tensorflow@@V?$allocator@VTensor@tensorflow@@@std@@@4@@Z)\r\n1>main.obj : error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::ops::Cast::Cast(class tensorflow::Scope const &,class tensorflow::Input,enum tensorflow::DataType)\" (??0Cast@ops@tensorflow@@QEAA@AEBVScope@2@VInput@2@W4DataType@2@@Z) referenced in function \"class tensorflow::Status __cdecl ReadTensorFromImageFile(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,int,int,float,float,class std::vector<class tensorflow::Tensor,class std::allocator<class tensorflow::Tensor> > *)\" (?ReadTensorFromImageFile@@YA?AVStatus@tensorflow@@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@HHMMPEAV?$vector@VTensor@tensorflow@@V?$allocator@VTensor@tensorflow@@@std@@@4@@Z)\r\n1>main.obj : error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::ops::Div::Div(class tensorflow::Scope const &,class tensorflow::Input,class tensorflow::Input)\" (??0Div@ops@tensorflow@@QEAA@AEBVScope@2@VInput@2@1@Z) referenced in function \"class tensorflow::Status __cdecl ReadTensorFromImageFile(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,int,int,float,float,class std::vector<class tensorflow::Tensor,class std::allocator<class tensorflow::Tensor> > *)\" (?ReadTensorFromImageFile@@YA?AVStatus@tensorflow@@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@HHMMPEAV?$vector@VTensor@tensorflow@@V?$allocator@VTensor@tensorflow@@@std@@@4@@Z)\r\n1>main.obj : error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::ops::Subtract::Subtract(class tensorflow::Scope const &,class tensorflow::Input,class tensorflow::Input)\" (??0Subtract@ops@tensorflow@@QEAA@AEBVScope@2@VInput@2@1@Z) referenced in function \"class tensorflow::Status __cdecl ReadTensorFromImageFile(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,int,int,float,float,class std::vector<class tensorflow::Tensor,class std::allocator<class tensorflow::Tensor> > *)\" (?ReadTensorFromImageFile@@YA?AVStatus@tensorflow@@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@HHMMPEAV?$vector@VTensor@tensorflow@@V?$allocator@VTensor@tensorflow@@@std@@@4@@Z)\r\n1>main.obj : error LNK2019: unresolved external symbol \"public: __cdecl tensorflow::SessionOptions::SessionOptions(void)\" (??0SessionOptions@tensorflow@@QEAA@XZ) referenced in function \"class tensorflow::Status __cdecl LoadGraph(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class std::unique_ptr<class tensorflow::Session,struct std::default_delete<class tensorflow::Session> > *)\" (?LoadGraph@@YA?AVStatus@tensorflow@@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@PEAV?$unique_ptr@VSession@tensorflow@@U?$default_delete@VSession@tensorflow@@@std@@@4@@Z)\r\n1>main.obj : error LNK2019: unresolved external symbol \"class tensorflow::Session * __cdecl tensorflow::NewSession(struct tensorflow::SessionOptions const &)\" (?NewSession@tensorflow@@YAPEAVSession@1@AEBUSessionOptions@1@@Z) referenced in function \"class tensorflow::Status __cdecl LoadGraph(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class std::unique_ptr<class tensorflow::Session,struct std::default_delete<class tensorflow::Session> > *)\" (?LoadGraph@@YA?AVStatus@tensorflow@@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@PEAV?$unique_ptr@VSession@tensorflow@@U?$default_delete@VSession@tensorflow@@@std@@@4@@Z)\r\n1>C:\\Sources\\Projects\\UDAE_cc_interface\\x64\\Debug\\UDAE_cc_interface.exe : fatal error LNK1120: 20 unresolved externals\r\n```\r\n\r\nI'm using Microsoft Visual Studio and linked tensorflow_cc.lib library and included the headers .. \r\nWhat are the other libraries I should link against other than the generated tensorflow c++ library, protobuf, abseil and eigen? I tried to export these missing symbols but didn't work .. \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30636", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30636/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30636/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30636/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30636", "id": 467292138, "node_id": "MDU6SXNzdWU0NjcyOTIxMzg=", "number": 30636, "title": "[Mirrored Strategy] You dataset iterator ran out of data; interrupting training. ", "user": {"login": "edwardyehuang", "id": 3354448, "node_id": "MDQ6VXNlcjMzNTQ0NDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3354448?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edwardyehuang", "html_url": "https://github.com/edwardyehuang", "followers_url": "https://api.github.com/users/edwardyehuang/followers", "following_url": "https://api.github.com/users/edwardyehuang/following{/other_user}", "gists_url": "https://api.github.com/users/edwardyehuang/gists{/gist_id}", "starred_url": "https://api.github.com/users/edwardyehuang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edwardyehuang/subscriptions", "organizations_url": "https://api.github.com/users/edwardyehuang/orgs", "repos_url": "https://api.github.com/users/edwardyehuang/repos", "events_url": "https://api.github.com/users/edwardyehuang/events{/privacy}", "received_events_url": "https://api.github.com/users/edwardyehuang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 17, "created_at": "2019-07-12T08:39:23Z", "updated_at": "2020-02-26T01:54:50Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):YES\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):Ubuntu 18.04\r\n- TensorFlow installed from (source or binary):Pip tensorflow-gpu 2.0 beta1\r\n- TensorFlow version (use command below):2.0 beta1\r\n- Python version:3.7\r\n- GPU model and memory:Titan RTX x 2 (2 x 24GB) / P100 x 2 (2 x 16GB)\r\n\r\nError in keras.Model.fit.\r\nWhen using the mirroredstrategy with tensorflow dataset in both training and validation.\r\nSingle GPU card works fine, whether using the mirroredstertegy or not. (When using the mirroredstertegy, set the devices = /gpu:0). This problem only occurs when using multiple gpu cards.\r\n\r\nThe error displayed:\r\n[training_arrays.py 325] Your dataset iterator ran out of data; interrupting training. Make sure that your iterator can geretate at least \"validation_steps * epochs\" batches.\r\n\r\nCurrently the only worked solutation for me is manully set the \"validation_steps\" in keras.Model.fit.\r\n\r\nTensorflow dataset repeat or/and take, will not work. By setting the validation batch size to 2 (1 for each GPU) also does not work\r\n\r\nSimliar issues in here [https://github.com/tensorflow/tensorflow/issues/25254](https://github.com/tensorflow/tensorflow/issues/25254), but closed"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30635", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30635/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30635/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30635/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30635", "id": 467265359, "node_id": "MDU6SXNzdWU0NjcyNjUzNTk=", "number": 30635, "title": "Java version upgrade from 1.13.1 to 1.14.0 got error", "user": {"login": "larryrxu", "id": 24725896, "node_id": "MDQ6VXNlcjI0NzI1ODk2", "avatar_url": "https://avatars1.githubusercontent.com/u/24725896?v=4", "gravatar_id": "", "url": "https://api.github.com/users/larryrxu", "html_url": "https://github.com/larryrxu", "followers_url": "https://api.github.com/users/larryrxu/followers", "following_url": "https://api.github.com/users/larryrxu/following{/other_user}", "gists_url": "https://api.github.com/users/larryrxu/gists{/gist_id}", "starred_url": "https://api.github.com/users/larryrxu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/larryrxu/subscriptions", "organizations_url": "https://api.github.com/users/larryrxu/orgs", "repos_url": "https://api.github.com/users/larryrxu/repos", "events_url": "https://api.github.com/users/larryrxu/events{/privacy}", "received_events_url": "https://api.github.com/users/larryrxu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sjamesr", "id": 4641539, "node_id": "MDQ6VXNlcjQ2NDE1Mzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/4641539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjamesr", "html_url": "https://github.com/sjamesr", "followers_url": "https://api.github.com/users/sjamesr/followers", "following_url": "https://api.github.com/users/sjamesr/following{/other_user}", "gists_url": "https://api.github.com/users/sjamesr/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjamesr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjamesr/subscriptions", "organizations_url": "https://api.github.com/users/sjamesr/orgs", "repos_url": "https://api.github.com/users/sjamesr/repos", "events_url": "https://api.github.com/users/sjamesr/events{/privacy}", "received_events_url": "https://api.github.com/users/sjamesr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sjamesr", "id": 4641539, "node_id": "MDQ6VXNlcjQ2NDE1Mzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/4641539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjamesr", "html_url": "https://github.com/sjamesr", "followers_url": "https://api.github.com/users/sjamesr/followers", "following_url": "https://api.github.com/users/sjamesr/following{/other_user}", "gists_url": "https://api.github.com/users/sjamesr/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjamesr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjamesr/subscriptions", "organizations_url": "https://api.github.com/users/sjamesr/orgs", "repos_url": "https://api.github.com/users/sjamesr/repos", "events_url": "https://api.github.com/users/sjamesr/events{/privacy}", "received_events_url": "https://api.github.com/users/sjamesr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 25, "created_at": "2019-07-12T07:32:29Z", "updated_at": "2020-01-02T11:53:43Z", "closed_at": null, "author_association": "NONE", "body": "<em>Java version upgrade from 1.13.1 to 1.14.0 got error</em>\r\n\r\n**System information**\r\n- Ubuntu 18.04.2 LTS (GNU/Linux 4.18.0-1013-azure x86_64):\r\n- TensorFlow 1.14.0:\r\n- Java 1.8:\r\n\r\nLog with 1.13.1(Worked):\r\n ``` .   ____          _            __ _ _\r\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::        (v2.1.3.RELEASE)\r\n\r\n2019-07-12 07:15:28.366  INFO 21194 --- [           main] com.springWeb.App                        : Starting App v0.0.1-SNAPSHOT on RaTceUbt2019 with PID 21194 (/home/RaTce2019/od/springWeb-0.0.1-SNAPSHOT.jar started by RaTce2019 in /home/RaTce2019/od)\r\n2019-07-12 07:15:28.375  INFO 21194 --- [           main] com.springWeb.App                        : No active profile set, falling back to default profiles: default\r\n2019-07-12 07:15:31.058  INFO 21194 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8765 (http)\r\n2019-07-12 07:15:31.143  INFO 21194 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2019-07-12 07:15:31.143  INFO 21194 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.16]\r\n2019-07-12 07:15:31.171  INFO 21194 --- [           main] o.a.catalina.core.AprLifecycleListener   : The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: [/usr/java/packages/lib/amd64:/usr/lib/x86_64-linux-gnu/jni:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:/usr/lib/jni:/lib:/usr/lib]\r\n2019-07-12 07:15:31.362  INFO 21194 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2019-07-12 07:15:31.362  INFO 21194 --- [           main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 2885 ms\r\n2019-07-12 07:15:31.940  INFO 21194 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'\r\n2019-07-12 07:15:32.424  INFO 21194 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8765 (http) with context path ''\r\n2019-07-12 07:15:32.432  INFO 21194 --- [           main] com.springWeb.App                        : Started App in 4.883 seconds (JVM running for 5.79)\r\n2019-07-12 07:15:36.232  INFO 21194 --- [nio-8765-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'\r\n2019-07-12 07:15:36.233  INFO 21194 --- [nio-8765-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\r\n2019-07-12 07:15:36.249  INFO 21194 --- [nio-8765-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 16 ms\r\n2019-07-12 07:15:38.465576: I tensorflow/cc/saved_model/reader.cc:31] Reading SavedModel from: models/pepsi/ssd/saved_model\r\n2019-07-12 07:15:38.574596: I tensorflow/cc/saved_model/reader.cc:54] Reading meta graph with tags { serve }\r\n2019-07-12 07:15:38.614832: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX\r\n2019-07-12 07:15:38.621862: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2200000000 Hz\r\n2019-07-12 07:15:38.623574: I tensorflow/compiler/xla/service/service.cc:150] XLA service 0x7fe1c435d720 executing computations on platform Host. Devices:\r\n2019-07-12 07:15:38.623614: I tensorflow/compiler/xla/service/service.cc:158]   StreamExecutor device (0): <undefined>, <undefined>\r\n2019-07-12 07:15:38.716123: I tensorflow/cc/saved_model/loader.cc:182] Restoring SavedModel bundle.\r\n2019-07-12 07:15:38.716231: I tensorflow/cc/saved_model/loader.cc:192] The specified SavedModel has no variables; no checkpoints were restored. File does not exist: models/pepsi/ssd/saved_model/variables/variables.index\r\n2019-07-12 07:15:38.716265: I tensorflow/cc/saved_model/loader.cc:285] SavedModel load for tags { serve }; Status: success. Took 250701 microseconds.\r\n```\r\n\r\nLog with 1.14.0(Failed):\r\n```\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::        (v2.1.3.RELEASE)\r\n\r\n2019-07-12 06:59:43.499  INFO 19308 --- [           main] com.springWeb.App                        : Starting App v0.0.1-SNAPSHOT on RaTceUbt2019 with PID 19308 (/home/RaTce2019/od/springWeb-0.0.1-SNAPSHOT.jar started by RaTce2019 in /home/RaTce2019/od)\r\n2019-07-12 06:59:43.507  INFO 19308 --- [           main] com.springWeb.App                        : No active profile set, falling back to default profiles: default\r\n2019-07-12 06:59:46.150  INFO 19308 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8765 (http)\r\n2019-07-12 06:59:46.236  INFO 19308 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2019-07-12 06:59:46.237  INFO 19308 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.16]\r\n2019-07-12 06:59:46.279  INFO 19308 --- [           main] o.a.catalina.core.AprLifecycleListener   : The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: [/usr/java/packages/lib/amd64:/usr/lib/x86_64-linux-gnu/jni:/lib/x86_64-linux-gnu:/usr/lib/x86_64-linux-gnu:/usr/lib/jni:/lib:/usr/lib]\r\n2019-07-12 06:59:46.447  INFO 19308 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2019-07-12 06:59:46.447  INFO 19308 --- [           main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 2844 ms\r\n2019-07-12 06:59:47.007  INFO 19308 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'\r\n2019-07-12 06:59:47.481  INFO 19308 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8765 (http) with context path ''\r\n2019-07-12 06:59:47.490  INFO 19308 --- [           main] com.springWeb.App                        : Started App in 4.798 seconds (JVM running for 5.729)\r\n2019-07-12 07:00:05.710  INFO 19308 --- [nio-8765-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'\r\n2019-07-12 07:00:05.710  INFO 19308 --- [nio-8765-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\r\n2019-07-12 07:00:05.723  INFO 19308 --- [nio-8765-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 13 ms\r\n2019-07-12 07:00:08.082 ERROR 19308 --- [nio-8765-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed; nested exception is java.lang.UnsatisfiedLinkError: /tmp/tensorflow_native_libraries-1562914806051-0/libtensorflow_jni.so: libtensorflow_framework.so.1: cannot open shared object file: No such file or directory] with root cause\r\n\r\njava.lang.UnsatisfiedLinkError: /tmp/tensorflow_native_libraries-1562914806051-0/libtensorflow_jni.so: libtensorflow_framework.so.1: cannot open shared object file: No such file or directory\r\n\tat java.lang.ClassLoader$NativeLibrary.load(Native Method) ~[na:1.8.0_212]\r\n\tat java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1941) ~[na:1.8.0_212]\r\n\tat java.lang.ClassLoader.loadLibrary(ClassLoader.java:1824) ~[na:1.8.0_212]\r\n\tat java.lang.Runtime.load0(Runtime.java:809) ~[na:1.8.0_212]\r\n\tat java.lang.System.load(System.java:1086) ~[na:1.8.0_212]\r\n\tat org.tensorflow.NativeLibrary.load(NativeLibrary.java:101) ~[libtensorflow-1.14.0.jar!/:na]\r\n\tat org.tensorflow.TensorFlow.init(TensorFlow.java:66) ~[libtensorflow-1.14.0.jar!/:na]\r\n\tat org.tensorflow.TensorFlow.<clinit>(TensorFlow.java:70) ~[libtensorflow-1.14.0.jar!/:na]\r\n\tat org.tensorflow.SavedModelBundle.<clinit>(SavedModelBundle.java:170) ~[libtensorflow-1.14.0.jar!/:na]\r\n\tat com.springWeb.controller.Controller.detectImage(Controller.java:73) ~[classes!/:0.0.1-SNAPSHOT]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_212]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_212]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_212]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_212]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:189) ~[spring-web-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) ~[spring-web-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005) ~[spring-webmvc-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:908) ~[spring-webmvc-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882) ~[spring-webmvc-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:200) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) [tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) [tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) [tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) [tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) [tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) [tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) [tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:834) [tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) [tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_212]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_212]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat java.lang.Thread.run(Thread.java:748) [na:1.8.0_212]\r\n\r\n2019-07-12 07:00:26.038 ERROR 19308 --- [nio-8765-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Handler dispatch failed; nested exception is java.lang.NoClassDefFoundError: Could not initialize class org.tensorflow.SavedModelBundle] with root cause\r\n\r\njava.lang.NoClassDefFoundError: Could not initialize class org.tensorflow.SavedModelBundle\r\n\tat com.springWeb.controller.Controller.detectImage(Controller.java:73) ~[classes!/:0.0.1-SNAPSHOT]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_212]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_212]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_212]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_212]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:189) ~[spring-web-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138) ~[spring-web-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102) ~[spring-webmvc-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:800) ~[spring-webmvc-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1038) ~[spring-webmvc-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:942) ~[spring-webmvc-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1005) ~[spring-webmvc-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:908) ~[spring-webmvc-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:660) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:882) ~[spring-webmvc-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:741) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99) ~[spring-web-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:92) ~[spring-web-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:93) ~[spring-web-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.1.5.RELEASE.jar!/:5.1.5.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:200) ~[tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) [tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:490) [tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:139) [tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) [tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) [tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:408) [tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) [tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:834) [tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1415) [tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_212]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_212]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.16.jar!/:9.0.16]\r\n\tat java.lang.Thread.run(Thread.java:748) [na:1.8.0_212]\r\n```\r\nThis is my pom.xml:\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\r\n\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n\txsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n\t<modelVersion>4.0.0</modelVersion>\r\n\r\n\t<groupId>springWeb</groupId>\r\n\t<artifactId>springWeb</artifactId>\r\n\t<version>0.0.1-SNAPSHOT</version>\r\n\t<packaging>jar</packaging>\r\n\r\n\t<name>springWeb</name>\r\n\t<url>http://maven.apache.org</url>\r\n\r\n\t<properties>\r\n\t\t<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\r\n\t\t<java.version>1.8</java.version>\r\n\t\t<maven.compiler.source>1.8</maven.compiler.source>\r\n\t\t<maven.compiler.target>1.8</maven.compiler.target>\r\n\t</properties>\r\n\r\n\t<parent>\r\n\t\t<groupId>org.springframework.boot</groupId>\r\n\t\t<artifactId>spring-boot-starter-parent</artifactId>\r\n\t\t<version>2.1.3.RELEASE</version>\r\n\t</parent>\r\n\r\n\t<dependencies>\r\n\t\t<dependency>\r\n\t\t\t<groupId>junit</groupId>\r\n\t\t\t<artifactId>junit</artifactId>\r\n\t\t\t<scope>test</scope>\r\n\t\t</dependency>\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.springframework.boot</groupId>\r\n\t\t\t<artifactId>spring-boot-starter-web</artifactId>\r\n\t\t</dependency>\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.tensorflow</groupId>\r\n\t\t\t<artifactId>tensorflow</artifactId>\r\n\t\t\t<version>1.14.0</version>\r\n\t\t</dependency>\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.tensorflow</groupId>\r\n\t\t\t<artifactId>proto</artifactId>\r\n\t\t\t<version>1.14.0</version>\r\n\t\t</dependency>\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.json</groupId>\r\n\t\t\t<artifactId>json</artifactId>\r\n\t\t\t<version>20180813</version>\r\n\t\t</dependency>\r\n\t</dependencies>\r\n\r\n\t<build>\r\n\t\t<plugins>\r\n\t\t\t<plugin>\r\n\t\t\t\t<groupId>org.springframework.boot</groupId>\r\n\t\t\t\t<artifactId>spring-boot-maven-plugin</artifactId>\r\n\t\t\t</plugin>\r\n\t\t</plugins>\r\n\t</build>\r\n</project>\r\n\r\n`And what I did was changed version from 1.13.1 to 1.14.0.`\r\n\r\nAnd I tried official Java start up got the same error:\r\n**System information**\r\n- macOS High Sierra Version 10.13.6 (17G6030):\r\n- TensorFlow 1.14.0:\r\n- Java 1.8:\r\n\r\npom.xml:\r\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\r\n\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n\txsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\r\n\t<modelVersion>4.0.0</modelVersion>\r\n\r\n\t<groupId>tftest</groupId>\r\n\t<artifactId>tftest</artifactId>\r\n\t<version>0.0.1-SNAPSHOT</version>\r\n\t<packaging>jar</packaging>\r\n\r\n\t<name>tftest</name>\r\n\t<url>http://maven.apache.org</url>\r\n\r\n\t<properties>\r\n\t\t<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\r\n\t</properties>\r\n\r\n\t<dependencies>\r\n\t\t<dependency>\r\n\t\t\t<groupId>junit</groupId>\r\n\t\t\t<artifactId>junit</artifactId>\r\n\t\t\t<version>3.8.1</version>\r\n\t\t\t<scope>test</scope>\r\n\t\t</dependency>\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.tensorflow</groupId>\r\n\t\t\t<artifactId>tensorflow</artifactId>\r\n\t\t\t<version>1.14.0</version>\r\n\t\t</dependency>\r\n\t\t<dependency>\r\n\t\t\t<groupId>org.tensorflow</groupId>\r\n\t\t\t<artifactId>libtensorflow</artifactId>\r\n\t\t\t<version>1.14.0</version>\r\n\t\t</dependency>\r\n\t</dependencies>\r\n</project>\r\n\r\n\r\nApp.java:\r\n```package tftest.tftest;\r\n\r\nimport org.tensorflow.Graph;\r\nimport org.tensorflow.Session;\r\nimport org.tensorflow.Tensor;\r\nimport org.tensorflow.TensorFlow;\r\n\r\npublic class App {\r\n\tpublic static void main(String[] args) throws Exception {\r\n\t\ttry (Graph g = new Graph()) {\r\n\t\t\tfinal String value = \"Hello from \" + TensorFlow.version();\r\n\t\t\t// Construct the computation graph with a single operation, a constant\r\n\t\t\t// named \"MyConst\" with a value \"value\".\r\n\t\t\ttry (Tensor t = Tensor.create(value.getBytes(\"UTF-8\"))) {\r\n\t\t\t\t// The Java API doesn't yet include convenience functions for adding operations.\r\n\t\t\t\tg.opBuilder(\"Const\", \"MyConst\").setAttr(\"dtype\", t.dataType()).setAttr(\"value\", t).build();\r\n\t\t\t}\r\n\t\t\t// Execute the \"MyConst\" operation in a Session.\r\n\t\t\ttry (Session s = new Session(g);\r\n\t\t\t\t\t// Generally, there may be multiple output tensors,\r\n\t\t\t\t\t// all of them must be closed to prevent resource leaks.\r\n\t\t\t\t\tTensor output = s.runner().fetch(\"MyConst\").run().get(0)) {\r\n\t\t\t\tSystem.out.println(new String(output.bytesValue(), \"UTF-8\"));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nLog:\r\n```\r\nException in thread \"main\" java.lang.UnsatisfiedLinkError: /private/var/folders/0c/nz0823ps085b_1zcq6l8ry441kqw10/T/tensorflow_native_libraries-1562915587706-0/libtensorflow_jni.dylib: dlopen(/private/var/folders/0c/nz0823ps085b_1zcq6l8ry441kqw10/T/tensorflow_native_libraries-1562915587706-0/libtensorflow_jni.dylib, 1): Library not loaded: @rpath/libtensorflow_framework.1.dylib\r\n  Referenced from: /private/var/folders/0c/nz0823ps085b_1zcq6l8ry441kqw10/T/tensorflow_native_libraries-1562915587706-0/libtensorflow_jni.dylib\r\n  Reason: image not found\r\n\tat java.lang.ClassLoader$NativeLibrary.load(Native Method)\r\n\tat java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1938)\r\n\tat java.lang.ClassLoader.loadLibrary(ClassLoader.java:1821)\r\n\tat java.lang.Runtime.load0(Runtime.java:809)\r\n\tat java.lang.System.load(System.java:1086)\r\n\tat org.tensorflow.NativeLibrary.load(NativeLibrary.java:101)\r\n\tat org.tensorflow.TensorFlow.init(TensorFlow.java:66)\r\n\tat org.tensorflow.TensorFlow.<clinit>(TensorFlow.java:70)\r\n\tat org.tensorflow.Graph.<clinit>(Graph.java:479)\r\n\tat tftest.tftest.App.main(App.java:10)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30634", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30634/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30634/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30634/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30634", "id": 467261968, "node_id": "MDU6SXNzdWU0NjcyNjE5Njg=", "number": 30634, "title": "[Documentation][TF 1.14] Missing documentation for `batch_dims` in `tf.gather`", "user": {"login": "MartinusR", "id": 23496521, "node_id": "MDQ6VXNlcjIzNDk2NTIx", "avatar_url": "https://avatars0.githubusercontent.com/u/23496521?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MartinusR", "html_url": "https://github.com/MartinusR", "followers_url": "https://api.github.com/users/MartinusR/followers", "following_url": "https://api.github.com/users/MartinusR/following{/other_user}", "gists_url": "https://api.github.com/users/MartinusR/gists{/gist_id}", "starred_url": "https://api.github.com/users/MartinusR/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MartinusR/subscriptions", "organizations_url": "https://api.github.com/users/MartinusR/orgs", "repos_url": "https://api.github.com/users/MartinusR/repos", "events_url": "https://api.github.com/users/MartinusR/events{/privacy}", "received_events_url": "https://api.github.com/users/MartinusR/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-07-12T07:22:57Z", "updated_at": "2019-07-18T21:55:32Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\n\r\nhttps://www.tensorflow.org/api_docs/python/tf/gather\r\n\r\n## Description of issue (what needs changing):\r\n\r\nIn TF 1.14, `tf.batch_gather` is marked as deprecated, and the keyword `batch_dims` has been added to `tf.gather` to handle the batch version. Though, the documentation of `tf.gather` has only been updated with the **type** of `batch_dims`, but not **how to use** it neither **what it does**.\r\n\r\nThe old [`tf.batch_gather`](https://www.tensorflow.org/versions/r1.13/api_docs/python/tf/batch_gather) function was documented in TF 1.13. Though, `tf.gather` is a bit more complex than the old `tf.batch_gather`, so maybe the [documentation of the underlying `_batch_gather`](https://github.com/tensorflow/tensorflow/blob/2aca283764bbbd54a5556319eb7cc0ed323c81f1/tensorflow/python/ops/array_ops.py#L3514) function could be used.\r\n\r\nThese two existing documentations could be used to complete the existing documentation of `tf.gather`.\r\n\r\n### Correct links\r\n\r\nYes.\r\n\r\n### Parameters defined\r\n\r\nYes\r\n\r\n### Returns defined\r\n\r\nYes\r\n\r\n### Raises listed and defined\r\n\r\nYes\r\n\r\n### Usage example\r\n\r\nNot for using `batch_dims`.\r\n\r\n### Submit a pull request?\r\n\r\nNo.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30620", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30620/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30620/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30620/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30620", "id": 467139962, "node_id": "MDU6SXNzdWU0NjcxMzk5NjI=", "number": 30620, "title": "Feature: Add safe division in reciprocal operation", "user": {"login": "kmh4321", "id": 32885872, "node_id": "MDQ6VXNlcjMyODg1ODcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32885872?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kmh4321", "html_url": "https://github.com/kmh4321", "followers_url": "https://api.github.com/users/kmh4321/followers", "following_url": "https://api.github.com/users/kmh4321/following{/other_user}", "gists_url": "https://api.github.com/users/kmh4321/gists{/gist_id}", "starred_url": "https://api.github.com/users/kmh4321/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kmh4321/subscriptions", "organizations_url": "https://api.github.com/users/kmh4321/orgs", "repos_url": "https://api.github.com/users/kmh4321/repos", "events_url": "https://api.github.com/users/kmh4321/events{/privacy}", "received_events_url": "https://api.github.com/users/kmh4321/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "kmh4321", "id": 32885872, "node_id": "MDQ6VXNlcjMyODg1ODcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32885872?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kmh4321", "html_url": "https://github.com/kmh4321", "followers_url": "https://api.github.com/users/kmh4321/followers", "following_url": "https://api.github.com/users/kmh4321/following{/other_user}", "gists_url": "https://api.github.com/users/kmh4321/gists{/gist_id}", "starred_url": "https://api.github.com/users/kmh4321/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kmh4321/subscriptions", "organizations_url": "https://api.github.com/users/kmh4321/orgs", "repos_url": "https://api.github.com/users/kmh4321/repos", "events_url": "https://api.github.com/users/kmh4321/events{/privacy}", "received_events_url": "https://api.github.com/users/kmh4321/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "kmh4321", "id": 32885872, "node_id": "MDQ6VXNlcjMyODg1ODcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32885872?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kmh4321", "html_url": "https://github.com/kmh4321", "followers_url": "https://api.github.com/users/kmh4321/followers", "following_url": "https://api.github.com/users/kmh4321/following{/other_user}", "gists_url": "https://api.github.com/users/kmh4321/gists{/gist_id}", "starred_url": "https://api.github.com/users/kmh4321/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kmh4321/subscriptions", "organizations_url": "https://api.github.com/users/kmh4321/orgs", "repos_url": "https://api.github.com/users/kmh4321/repos", "events_url": "https://api.github.com/users/kmh4321/events{/privacy}", "received_events_url": "https://api.github.com/users/kmh4321/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-07-11T22:42:47Z", "updated_at": "2019-07-16T15:22:47Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.14 / 2.0 alpha\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nHello, \r\nI wanted to add a feature to the `tf.math.reciprocal` operation to optionally perform \"safe\" reciprocal. If the input is zero, it returns zero instead of NaN. I found this feature useful when implementing one of the recent [PR](https://github.com/tensorflow/tensorflow/pull/30152/files#diff-614af081276f42dbb98e5d731d7a1a86R158). This is similar to the [`tf.math.div_no_nan`](https://github.com/tensorflow/tensorflow/pull/21621) operation/PR. \r\n\r\nShould this feature request be approved, I can either add an optional argument to the current `tf.math.reciprocal()` operation which indicates whether to perform safe division. The default for this would be False, thus retaining the current interface. OR I can create a new tf.math operation called `tf.math.reciprocal_no_nan()` similar to the safe division op. Would love inputs on this!\r\n\r\n**Will this change the current api? How?**\r\nDepending on the two options laid out above, the first option would change the current API slightly, while the second option adds a new operation. \r\n\r\n**Who will benefit with this feature?**\r\nAny researcher designing algorithms involving reciprocals as well as engineers/developers who would otherwise write wrapper functions to perform safe reciprocals. \r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30617", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30617/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30617/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30617/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30617", "id": 467129624, "node_id": "MDU6SXNzdWU0NjcxMjk2MjQ=", "number": 30617, "title": "Save and Load keras model in multi-gpu environment changing the input and output tensor names", "user": {"login": "anilknayak", "id": 4894147, "node_id": "MDQ6VXNlcjQ4OTQxNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/4894147?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anilknayak", "html_url": "https://github.com/anilknayak", "followers_url": "https://api.github.com/users/anilknayak/followers", "following_url": "https://api.github.com/users/anilknayak/following{/other_user}", "gists_url": "https://api.github.com/users/anilknayak/gists{/gist_id}", "starred_url": "https://api.github.com/users/anilknayak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anilknayak/subscriptions", "organizations_url": "https://api.github.com/users/anilknayak/orgs", "repos_url": "https://api.github.com/users/anilknayak/repos", "events_url": "https://api.github.com/users/anilknayak/events{/privacy}", "received_events_url": "https://api.github.com/users/anilknayak/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-07-11T22:07:34Z", "updated_at": "2019-07-20T20:51:30Z", "closed_at": null, "author_association": "NONE", "body": "API Used:\r\nKerras==2.2.4\r\nTensorflow=1.13.1\r\n\r\nProblem Statement:\r\nAfter I load my saved keras model for retraining, it changes the input and output tensor names.\r\n\r\nCode to replicate:\r\n```\r\nfrom keras.applications import MobileNet\r\nfrom keras.layers import Input\r\nfrom keras.utils import multi_gpu_model\r\nfrom keras.models import model_from_json, load_model\r\n\r\ninput_tensor = Input(shape=(224, 224, 3), name=\"input\")\r\npre_trained_model = MobileNet(input_shape=(224,224,3),\r\n                                       alpha=1,\r\n                                       depth_multiplier=1,\r\n                                       dropout=1e-3,\r\n                                       include_top=True,\r\n                                       weights='imagenet',\r\n                                       input_tensor=input_tensor,\r\n                                       classes=1000)\r\nlast_layer = pre_trained_model.layers[-1].output\r\noutput_tensor = Dense(10, activation='softmax', name='output')(last_layer)\r\nmodel = Model(inputs=input_tensor, outputs=output_tensor)\r\nmodel = multi_gpu_model(model, gpus=4)\r\nmodel.compile(\r\n            optimizer='adam',\r\n            loss='binary_crossentropy',\r\n            metrics='accuracy',\r\n        )\r\n\r\n---- Training ----\r\n\r\narchitecture_file=\"model_arch.json\"\r\nweight_file=\"model_weights.h5\"\r\nmodel.save_weights(weight_file)\r\nwith open(architecture_file, 'w') as f:\r\n     f.write(model.to_json())\r\n\r\n```\r\nAfter the first training, when I froze the model and loaded into the testing environment, I could feed to ```input``` node and get output from ```output```\r\n\r\n\r\nThen reload and train again\r\n```\r\n with open(architecture_file, 'r') as f:\r\n      model = model_from_json(f.read())\r\n      model.load_weights(weight_file, by_name=True)\r\n\r\nmodel.compile(\r\n            optimizer='adam',\r\n            loss='binary_crossentropy',\r\n            metrics='accuracy',\r\n        )\r\n\r\n---- training ----\r\narchitecture_file=\"model_arch.json\"\r\nweight_file=\"model_weights.h5\"\r\nmodel.save_weights(weight_file)\r\nwith open(architecture_file, 'w') as f:\r\n     f.write(model.to_json())\r\n````\r\n\r\nAfter the second training from the saved model, when I froze the model and loaded into the testing environment,\r\nI could feed to input to ```input``` node the input node has changed to ```input_1``` "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30616", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30616/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30616/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30616/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30616", "id": 467128204, "node_id": "MDU6SXNzdWU0NjcxMjgyMDQ=", "number": 30616, "title": "[Documentation] In TF 1.13.1, tf.keras.experimental.export does not exist despite being documented", "user": {"login": "zmjjmz", "id": 1694612, "node_id": "MDQ6VXNlcjE2OTQ2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1694612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zmjjmz", "html_url": "https://github.com/zmjjmz", "followers_url": "https://api.github.com/users/zmjjmz/followers", "following_url": "https://api.github.com/users/zmjjmz/following{/other_user}", "gists_url": "https://api.github.com/users/zmjjmz/gists{/gist_id}", "starred_url": "https://api.github.com/users/zmjjmz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zmjjmz/subscriptions", "organizations_url": "https://api.github.com/users/zmjjmz/orgs", "repos_url": "https://api.github.com/users/zmjjmz/repos", "events_url": "https://api.github.com/users/zmjjmz/events{/privacy}", "received_events_url": "https://api.github.com/users/zmjjmz/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-07-11T22:03:06Z", "updated_at": "2019-07-12T17:19:13Z", "closed_at": null, "author_association": "NONE", "body": "\r\n## URL(s) with the issue:\r\n\r\nhttps://www.tensorflow.org/versions/r1.13/api_docs/python/tf/keras/experimental/export\r\n\r\n## Description of issue (what needs changing):\r\n\r\nOk, so let's say for some arbitrary reason out of your control (*cough* sagemaker *cough*) you are pegged to TensorFlow <= 1.13.1. The cool new `tf.keras.experimental.export` feature looks a _lot_ easier than building all that stuff yourself, so you go to try and use it.\r\n\r\nUnfortunately, you get hit with the following error:\r\n```\r\nTraceback (most recent call last):\r\n  File \"documented_example.py\", line 10, in <module>\r\n    saved_to_path = tf.keras.experimental.export(\r\nAttributeError: 'module' object has no attribute 'export'\r\n```\r\n\r\n### Correct links\r\n\r\nIt is not -- the part that is `Defined in tensorflow/python/keras/saving/saved_model.py.` links to `https://github.com/tensorflow/tensorflow/blob/r1.13/tensorflow/python/keras/saving/saved_model.py` which gets a 404!\r\n\r\n### Parameters defined\r\n\r\nProbably.\r\n\r\n### Returns defined\r\n\r\nVery possible\r\n\r\n### Raises listed and defined\r\n\r\nYep.\r\n\r\n### Usage example\r\n\r\nYes! In fact, it doesn't work.\r\n\r\nFor posterity here's that usage example copy-pasted into a Github gist: https://gist.github.com/zmjjmz/fcc73dad9f49d34f9c047c108fdd0e3f\r\n\r\n### Submit a pull request?\r\n\r\nNope."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30606", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30606/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30606/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30606/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30606", "id": 466980705, "node_id": "MDU6SXNzdWU0NjY5ODA3MDU=", "number": 30606, "title": "Additional command line arguments needed for tflite conversion of a very simple model", "user": {"login": "DocDriven", "id": 30296124, "node_id": "MDQ6VXNlcjMwMjk2MTI0", "avatar_url": "https://avatars2.githubusercontent.com/u/30296124?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DocDriven", "html_url": "https://github.com/DocDriven", "followers_url": "https://api.github.com/users/DocDriven/followers", "following_url": "https://api.github.com/users/DocDriven/following{/other_user}", "gists_url": "https://api.github.com/users/DocDriven/gists{/gist_id}", "starred_url": "https://api.github.com/users/DocDriven/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DocDriven/subscriptions", "organizations_url": "https://api.github.com/users/DocDriven/orgs", "repos_url": "https://api.github.com/users/DocDriven/repos", "events_url": "https://api.github.com/users/DocDriven/events{/privacy}", "received_events_url": "https://api.github.com/users/DocDriven/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-07-11T16:02:29Z", "updated_at": "2019-07-16T00:36:39Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: -\r\n- TensorFlow installed from (source or binary): Docker image tensorflow/tensorflow:latest-gpu\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: 2.7.15+\r\n- Bazel version (if compiling from source): -\r\n- GCC/Compiler version (if compiling from source): -\r\n- CUDA/cuDNN version: 10.1\r\n- GPU model and memory: GeForce RTX 2080 Ti\r\n\r\nI am trying to deploy a simple, custom fully-quantized model with Coral Edge TPU support. When trying to convert the frozen graph into a tflite model, I run into errors, unless I provide more command line arguments. Considering how simple the model is (e.g. using very basic layers), I did not expect to run into problems.\r\n\r\n**Code to reproduce the issue**\r\n\r\nI create and train a model that fits the function f(x) = 2 x - 1 with the following code:\r\n\r\n```\r\nimport tensorflow as tf\r\nfrom tensorflow import keras\r\nimport numpy as np\r\n\r\nprint(tf.__version__)\r\n\r\ntrain_input = np.array([ -1.0, 0.0, 1.0, 2.0, 3.0, 4.0], dtype=float)\r\ntrain_truth = np.array([ -3.0, -1.0, 1.0, 3.0, 5.0, 7.0], dtype=float)\r\n\r\ndef build_keras_model():\r\n\treturn keras.models.Sequential([\r\n\t\tkeras.layers.Dense(units=1, input_shape=[1]),\r\n\t])\r\n\r\n### train the model\r\ntrain_graph = tf.Graph()\r\ntrain_sess = tf.Session(graph=train_graph)\r\n\r\nkeras.backend.set_session(train_sess)\r\n\r\nwith train_graph.as_default():\r\n\tkeras.backend.set_learning_phase(1)\r\n\ttrain_model = build_keras_model()\r\n\r\n\ttf.contrib.quantize.create_training_graph(input_graph=train_graph, quant_delay=100)\r\n\ttrain_sess.run(tf.global_variables_initializer())\r\n\r\n\ttrain_model.compile(\r\n\t\toptimizer='sgd',\r\n\t\tloss='mean_squared_error'\r\n\t)\r\n\ttrain_model.fit(train_input, train_truth, epochs=250)\r\n\r\n\tsaver = tf.train.Saver()\r\n\tsaver.save(train_sess, 'linear.ckpt')\r\n```\r\n\r\nAfterwards, I create an eval graph and freeze the model with the help of this script:\r\n\r\n```\r\nimport tensorflow as tf\r\nfrom tensorflow import keras\r\nimport numpy as np\r\n\r\ndef build_keras_model():\r\n\treturn keras.models.Sequential([\r\n\t\tkeras.layers.Dense(units=1, input_shape=[1]),\r\n\t])\r\n\r\n# eval\r\neval_graph = tf.Graph()\r\neval_sess = tf.Session(graph=eval_graph)\r\n\r\nkeras.backend.set_session(eval_sess)\r\n\r\nwith eval_graph.as_default():\r\n\tkeras.backend.set_learning_phase(0)\r\n\teval_model = build_keras_model()\r\n\r\n\ttf.contrib.quantize.create_eval_graph(input_graph=eval_graph)\r\n\r\n\teval_graph_def = eval_graph.as_graph_def()\r\n\tsaver = tf.train.Saver()\r\n\tsaver.restore(eval_sess, 'linear.ckpt')\r\n\r\n\tfrozen_graph_def = tf.graph_util.convert_variables_to_constants(\r\n\t\teval_sess,\r\n\t\teval_graph_def,\r\n\t\t[eval_model.output.op.name]\r\n\t)\r\n\r\n\twith open('frozen_model.pb', 'wb') as f:\r\n\t\tf.write(frozen_graph_def.SerializeToString())\r\n```\r\n\r\nWhen I try to convert the frozen graph to a tflite model, using the following command\r\n\r\n```\r\ntflite_convert \\\r\n--output_file=model.tflite \\\r\n--graph_def_file=frozen_model.pb \\\r\n--inference_type=QUANTIZED_UINT8 \\\r\n--input_arrays=dense_input \\\r\n--output_arrays=dense/BiasAdd \\\r\n--mean_values=0 \\\r\n--std_dev_values=255\r\n```\r\nI run into an error:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/usr/local/bin/tflite_convert\", line 10, in <module>\r\n    sys.exit(main())\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/lite/python/tflite_convert.py\", line 503, in main\r\n    app.run(main=run_main, argv=sys.argv[:1])\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/platform/app.py\", line 40, in run\r\n    _run(main=main, argv=argv, flags_parser=_parse_flags_tolerate_undef)\r\n  File \"/usr/local/lib/python2.7/dist-packages/absl/app.py\", line 300, in run\r\n    _run_main(main, args)\r\n  File \"/usr/local/lib/python2.7/dist-packages/absl/app.py\", line 251, in _run_main\r\n    sys.exit(main(argv))\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/lite/python/tflite_convert.py\", line 499, in run_main\r\n    _convert_tf1_model(tflite_flags)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/lite/python/tflite_convert.py\", line 193, in _convert_tf1_model\r\n    output_data = converter.convert()\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/lite/python/lite.py\", line 898, in convert\r\n    **converter_kwargs)\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/lite/python/convert.py\", line 404, in toco_convert_impl\r\n    input_data.SerializeToString())\r\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/lite/python/convert.py\", line 172, in toco_convert_protos\r\n    \"TOCO failed. See console for info.\\n%s\\n%s\\n\" % (stdout, stderr))\r\ntensorflow.lite.python.convert.ConverterError: TOCO failed. See console for info.\r\n2019-07-11 15:54:26.995204: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 7 operators, 12 arrays (0 quantized)\r\n2019-07-11 15:54:26.995314: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 7 operators, 12 arrays (0 quantized)\r\n2019-07-11 15:54:26.995465: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 2 operators, 5 arrays (1 quantized)\r\n2019-07-11 15:54:26.995497: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before pre-quantization graph transformations: 2 operators, 5 arrays (1 quantized)\r\n2019-07-11 15:54:26.995512: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Group bidirectional sequence lstm/rnn: 2 operators, 5 arrays (1 quantized)\r\n2019-07-11 15:54:26.995528: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before quantization graph transformations: 2 operators, 5 arrays (1 quantized)\r\n2019-07-11 15:54:26.995558: F tensorflow/lite/toco/graph_transformations/quantize.cc:149] Array dense/BiasAdd does not have MinMax information, and is not a constant array. Cannot proceed with quantization.\r\nAborted (core dumped)\r\n```\r\n\r\nThis error vanishes, when I provide two additional command line arguments with any value:\r\n`--default_ranges_min=-128 --default_ranges_max=127`\r\n\r\nFirst and foremost, shouldn't a simple model like this be convertible without these args? Also, I am still only guessing on how to determine the default ranges as well as the values for mean_values and std_dev_values. This should be added to the documentation for clarity."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30605", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30605/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30605/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30605/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30605", "id": 466973751, "node_id": "MDU6SXNzdWU0NjY5NzM3NTE=", "number": 30605, "title": "Share tf.distribute.strategy scopes across multiple sets of GPUs for multithreaded data gather and training", "user": {"login": "mjlbach", "id": 13316262, "node_id": "MDQ6VXNlcjEzMzE2MjYy", "avatar_url": "https://avatars1.githubusercontent.com/u/13316262?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mjlbach", "html_url": "https://github.com/mjlbach", "followers_url": "https://api.github.com/users/mjlbach/followers", "following_url": "https://api.github.com/users/mjlbach/following{/other_user}", "gists_url": "https://api.github.com/users/mjlbach/gists{/gist_id}", "starred_url": "https://api.github.com/users/mjlbach/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mjlbach/subscriptions", "organizations_url": "https://api.github.com/users/mjlbach/orgs", "repos_url": "https://api.github.com/users/mjlbach/repos", "events_url": "https://api.github.com/users/mjlbach/events{/privacy}", "received_events_url": "https://api.github.com/users/mjlbach/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "guptapriya", "id": 14104855, "node_id": "MDQ6VXNlcjE0MTA0ODU1", "avatar_url": "https://avatars1.githubusercontent.com/u/14104855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guptapriya", "html_url": "https://github.com/guptapriya", "followers_url": "https://api.github.com/users/guptapriya/followers", "following_url": "https://api.github.com/users/guptapriya/following{/other_user}", "gists_url": "https://api.github.com/users/guptapriya/gists{/gist_id}", "starred_url": "https://api.github.com/users/guptapriya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guptapriya/subscriptions", "organizations_url": "https://api.github.com/users/guptapriya/orgs", "repos_url": "https://api.github.com/users/guptapriya/repos", "events_url": "https://api.github.com/users/guptapriya/events{/privacy}", "received_events_url": "https://api.github.com/users/guptapriya/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "guptapriya", "id": 14104855, "node_id": "MDQ6VXNlcjE0MTA0ODU1", "avatar_url": "https://avatars1.githubusercontent.com/u/14104855?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guptapriya", "html_url": "https://github.com/guptapriya", "followers_url": "https://api.github.com/users/guptapriya/followers", "following_url": "https://api.github.com/users/guptapriya/following{/other_user}", "gists_url": "https://api.github.com/users/guptapriya/gists{/gist_id}", "starred_url": "https://api.github.com/users/guptapriya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guptapriya/subscriptions", "organizations_url": "https://api.github.com/users/guptapriya/orgs", "repos_url": "https://api.github.com/users/guptapriya/repos", "events_url": "https://api.github.com/users/guptapriya/events{/privacy}", "received_events_url": "https://api.github.com/users/guptapriya/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-07-11T15:49:10Z", "updated_at": "2019-07-25T01:24:37Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.14/2.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nIn some RL models, an agent will gather data in one thread/process while an update loop in a second thread calculates the gradients/updates the model. Often for model-based RL, the time spent performing forward passes through the model can be large, so this has many advantages if it can be a non-blocking procedure in parallel with the update calls. It would be useful to be able to use the new tf.distribute strategies to share weights across multiple *sets* of GPUs (for instance, one GPU performs continual forward passes through the model while the remaining 7 on the node perform the updates on the model) across threads/processes. In the current parameter server model, I can simply pass the tf.Server configuration and build the graph in multiple workers, sharing the same set of variables on the parameter server.\r\n\r\n**Will this change the current api? How?**\r\n\r\n**Who will benefit with this feature?**\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30600", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30600/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30600/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30600/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30600", "id": 466854969, "node_id": "MDU6SXNzdWU0NjY4NTQ5Njk=", "number": 30600, "title": "TFTRT: Can I specify the computation precision for a specific layer?", "user": {"login": "x10000year", "id": 22427780, "node_id": "MDQ6VXNlcjIyNDI3Nzgw", "avatar_url": "https://avatars0.githubusercontent.com/u/22427780?v=4", "gravatar_id": "", "url": "https://api.github.com/users/x10000year", "html_url": "https://github.com/x10000year", "followers_url": "https://api.github.com/users/x10000year/followers", "following_url": "https://api.github.com/users/x10000year/following{/other_user}", "gists_url": "https://api.github.com/users/x10000year/gists{/gist_id}", "starred_url": "https://api.github.com/users/x10000year/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/x10000year/subscriptions", "organizations_url": "https://api.github.com/users/x10000year/orgs", "repos_url": "https://api.github.com/users/x10000year/repos", "events_url": "https://api.github.com/users/x10000year/events{/privacy}", "received_events_url": "https://api.github.com/users/x10000year/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1754777628, "node_id": "MDU6TGFiZWwxNzU0Nzc3NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu:tensorrt", "name": "comp:gpu:tensorrt", "color": "ea98ba", "default": false, "description": "Issues specific to TensorRT"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pooyadavoodi", "id": 7076961, "node_id": "MDQ6VXNlcjcwNzY5NjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/7076961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pooyadavoodi", "html_url": "https://github.com/pooyadavoodi", "followers_url": "https://api.github.com/users/pooyadavoodi/followers", "following_url": "https://api.github.com/users/pooyadavoodi/following{/other_user}", "gists_url": "https://api.github.com/users/pooyadavoodi/gists{/gist_id}", "starred_url": "https://api.github.com/users/pooyadavoodi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pooyadavoodi/subscriptions", "organizations_url": "https://api.github.com/users/pooyadavoodi/orgs", "repos_url": "https://api.github.com/users/pooyadavoodi/repos", "events_url": "https://api.github.com/users/pooyadavoodi/events{/privacy}", "received_events_url": "https://api.github.com/users/pooyadavoodi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pooyadavoodi", "id": 7076961, "node_id": "MDQ6VXNlcjcwNzY5NjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/7076961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pooyadavoodi", "html_url": "https://github.com/pooyadavoodi", "followers_url": "https://api.github.com/users/pooyadavoodi/followers", "following_url": "https://api.github.com/users/pooyadavoodi/following{/other_user}", "gists_url": "https://api.github.com/users/pooyadavoodi/gists{/gist_id}", "starred_url": "https://api.github.com/users/pooyadavoodi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pooyadavoodi/subscriptions", "organizations_url": "https://api.github.com/users/pooyadavoodi/orgs", "repos_url": "https://api.github.com/users/pooyadavoodi/repos", "events_url": "https://api.github.com/users/pooyadavoodi/events{/privacy}", "received_events_url": "https://api.github.com/users/pooyadavoodi/received_events", "type": "User", "site_admin": false}, {"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-07-11T12:12:45Z", "updated_at": "2019-12-26T18:34:16Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using):\r\n1.14\r\n\r\n**Describe the feature and the current behavior/state.**\r\nSupport blacklist of ops that cannot use lower precision when converting a graph into tftrt with precision mode of fp16 or int8. Or provide a way to specify a subgraph that cannot be optimized by tftrt.\r\n\r\n**Who will benefit with this feature?**\r\nAll users that need a mixed precision of their model and want to optimize the model by tftrt.\r\n\r\n**Any Other info.**\r\n\r\nIn my product I'm developing a model that needs full precision for a few layers (which include elementwise ops and conv ops). The layers need full precision because they are doing some math computation that cannot sacrifice precision. I also want to use tftrt to optimize the graph because most of other layers can use precision as low as fp16 or int8. However, i cannot find a way in tftrt to specify a blacklist of ops that cannot use lower precision. And there is no way to specify a subgraph that cannot be optimized by tftrt. Tensorrt supports specifying a precision for a layer but my model uses many ops that don't exist in tensorrt so I cannot convert it into tensorrt.\r\n\r\nThank you.\r\n\r\n@trevor-m "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30598", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30598/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30598/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30598/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30598", "id": 466848616, "node_id": "MDU6SXNzdWU0NjY4NDg2MTY=", "number": 30598, "title": "gfile for S3 uploads corrupt data when called concurrently", "user": {"login": "yasushi-saito", "id": 546227, "node_id": "MDQ6VXNlcjU0NjIyNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/546227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yasushi-saito", "html_url": "https://github.com/yasushi-saito", "followers_url": "https://api.github.com/users/yasushi-saito/followers", "following_url": "https://api.github.com/users/yasushi-saito/following{/other_user}", "gists_url": "https://api.github.com/users/yasushi-saito/gists{/gist_id}", "starred_url": "https://api.github.com/users/yasushi-saito/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yasushi-saito/subscriptions", "organizations_url": "https://api.github.com/users/yasushi-saito/orgs", "repos_url": "https://api.github.com/users/yasushi-saito/repos", "events_url": "https://api.github.com/users/yasushi-saito/events{/privacy}", "received_events_url": "https://api.github.com/users/yasushi-saito/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-07-11T11:58:41Z", "updated_at": "2019-11-11T13:16:50Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n\r\nUbuntu 16.04\r\n\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):\r\n\r\nAmazon DLAMI\r\n- TensorFlow version (use command below):\r\n1.13.1\r\n- Python version:\r\n3.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\nI have code that writes .npz files from multiple python processes. python code is single-threaded, and each process writes a separate .npz file. The files are sometimes corrupted on S3. I checked a sha256 checksum of the data in memory, and they differ from the checksum of the written data on S3.\r\n\r\n**Describe the expected behavior**\r\n\r\nthe contents should be identical.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\nI can create a repro if needed.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nThe reason seems to be that the gfile writer doesn't create a unique tempfile when it is invoked within a millisecond.\r\n\r\nhttps://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/platform/s3/s3_file_system.cc#L213\r\n\r\nHere, the writer creates a tempfile. and the corresponding aws-sdk-cpp code is:\r\n\r\nhttps://github.com/aws/aws-sdk-cpp/blob/master/aws-cpp-sdk-core/source/platform/linux-shared/FileSystem.cpp#L262\r\n\r\nThe latter code only has a millisecond granularity, so if gfile is called within the same millisecond, it creates the same tempfile and they overwrite each other.\r\n\r\nAlso, the \"XXXXXX\" part in s3_file_system.c doesn't do anything, although it's not the cause of this problem.\r\n\r\nI created a separate issue in\r\n\r\nhttps://github.com/aws/aws-sdk-cpp/issues/1192\r\n\r\n\r\n\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30595", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30595/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30595/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30595/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30595", "id": 466823718, "node_id": "MDU6SXNzdWU0NjY4MjM3MTg=", "number": 30595, "title": "TFTRT calib_graph/infer_graph has different output", "user": {"login": "CLIsVeryOK", "id": 31000591, "node_id": "MDQ6VXNlcjMxMDAwNTkx", "avatar_url": "https://avatars3.githubusercontent.com/u/31000591?v=4", "gravatar_id": "", "url": "https://api.github.com/users/CLIsVeryOK", "html_url": "https://github.com/CLIsVeryOK", "followers_url": "https://api.github.com/users/CLIsVeryOK/followers", "following_url": "https://api.github.com/users/CLIsVeryOK/following{/other_user}", "gists_url": "https://api.github.com/users/CLIsVeryOK/gists{/gist_id}", "starred_url": "https://api.github.com/users/CLIsVeryOK/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/CLIsVeryOK/subscriptions", "organizations_url": "https://api.github.com/users/CLIsVeryOK/orgs", "repos_url": "https://api.github.com/users/CLIsVeryOK/repos", "events_url": "https://api.github.com/users/CLIsVeryOK/events{/privacy}", "received_events_url": "https://api.github.com/users/CLIsVeryOK/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1754777628, "node_id": "MDU6TGFiZWwxNzU0Nzc3NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu:tensorrt", "name": "comp:gpu:tensorrt", "color": "ea98ba", "default": false, "description": "Issues specific to TensorRT"}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-07-11T11:03:40Z", "updated_at": "2019-12-26T18:34:16Z", "closed_at": null, "author_association": "NONE", "body": "I am doing tftrt convert to accelerate tf model.\r\nfirst, get calib_graph\r\ncalibration_graph = trt.create_inference_graph()\r\n\r\nsecond run calib_graph\r\nthe output is a tensor with batch_size = 16, output like this\r\n\r\nthird, I get the int8 graph\r\nint8Graph = trt.calib_graph_to_infer_graph(calibration_graph)\r\n('length and output: ', [array([-0.999994  ,  0.99682164,  0.9992819 ,  0.95060456, -0.8617101 ,\r\n        0.9993279 , -0.994945  ,  0.99960554, -0.99968964,  0.99943244,\r\n        0.9990337 ,  0.9889959 ,  0.91563284,  0.99274397,  0.99358046,\r\n        0.9925939 ], dtype=float32)])\r\n\r\nBut when I run the int8Graph using the same input data as step2, I get output like this, \r\n('length and output: ', array([0.952391  , 0.94719326, 0.9581959 , 0.86539173, 0.92513335,\r\n       0.97020185, 0.88829505, 0.97703993, 0.87482417, 0.9612503 ,\r\n       0.95443654, 0.8331325 , 0.9141325 , 0.92734456, 0.94608974,\r\n       0.9845928 ], dtype=float32))\r\n\r\nIt's really confused, any one met this problem?\r\n\r\n\r\nby the way, I run origin pb with the same data, I get \r\n('length and output: ', array([-0.999994  ,  0.99682164,  0.9992819 ,  0.9506048 , -0.8617081 ,\r\n        0.9993279 , -0.9949451 ,  0.99960554, -0.99968964,  0.99943244,\r\n        0.9990337 ,  0.9889959 ,  0.9156331 ,  0.99274397,  0.99358046,\r\n        0.9925939 ], dtype=float32)),\r\nsame as my calib_graph result.\r\n\r\nSo, what's wrong with the int8_graph???\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30593", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30593/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30593/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30593/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30593", "id": 466809308, "node_id": "MDU6SXNzdWU0NjY4MDkzMDg=", "number": 30593, "title": "(Aborted (core dumped)) - Check failed: GetOpGradFactory()->insert({op, func}).second Duplicated gradient for MapAccumulate", "user": {"login": "milinddeore", "id": 1849168, "node_id": "MDQ6VXNlcjE4NDkxNjg=", "avatar_url": "https://avatars0.githubusercontent.com/u/1849168?v=4", "gravatar_id": "", "url": "https://api.github.com/users/milinddeore", "html_url": "https://github.com/milinddeore", "followers_url": "https://api.github.com/users/milinddeore/followers", "following_url": "https://api.github.com/users/milinddeore/following{/other_user}", "gists_url": "https://api.github.com/users/milinddeore/gists{/gist_id}", "starred_url": "https://api.github.com/users/milinddeore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/milinddeore/subscriptions", "organizations_url": "https://api.github.com/users/milinddeore/orgs", "repos_url": "https://api.github.com/users/milinddeore/repos", "events_url": "https://api.github.com/users/milinddeore/events{/privacy}", "received_events_url": "https://api.github.com/users/milinddeore/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-07-11T10:33:42Z", "updated_at": "2019-07-19T18:33:47Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):  Stock example script. \r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): CentOS Linux release 7.6.1810 (Core)\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: On my laptop,\r\n- TensorFlow installed from (source or binary): From source for c++ application. \r\n- TensorFlow version (use command below): v1.8.0\r\n- Python version: 2.7\r\n- Bazel version (if compiling from source): 0.15.1\r\n- GCC/Compiler version (if compiling from source): g++ (GCC) 4.8.5 20150623 (Red Hat 4.8.5-36)\r\n- CUDA/cuDNN version: CPU only\r\n- GPU model and memory: None.\r\n\r\n\r\n**Describe the current behavior**\r\nI have a [Standalone c++ build](https://medium.com/@tomdeore/standalone-c-build-tensorflow-opencv-6dc9d8a1412d) process for ubuntu and it works fine with my own code as well as with the c++ [example code](https://www.tensorflow.org/guide/extend/cc) on tensorflow. \r\n\r\nBut when i run the same code on CentOS platform. I get following runtime error message and the executable core dumps:\r\n\r\n```\r\n2019-07-11 10:20:42.027023: F tensorflow/core/framework/function.cc:1329] Check failed: GetOpGradFactory()->insert({op, func}).second Duplicated gradient for MapAccumulate\r\nAborted (core dumped)\r\n```\r\nMy compilation command is as: \r\n\r\n```\r\ng++ -std=gnu++11 -Wl,-rpath='$ORIGIN/lib' -fPIC -Iinclude -Llib  example.cc -ltensorflow_cc -ltensorflow_framework   -o example\r\n```\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\nPlease follow the steps provided on [blog](https://medium.com/@tomdeore/standalone-c-build-tensorflow-opencv-6dc9d8a1412d). \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30581", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30581/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30581/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30581/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30581", "id": 466588849, "node_id": "MDU6SXNzdWU0NjY1ODg4NDk=", "number": 30581, "title": "Restoring only a PART of the graph from warm_start_from in Estimator", "user": {"login": "cocosci", "id": 13812977, "node_id": "MDQ6VXNlcjEzODEyOTc3", "avatar_url": "https://avatars3.githubusercontent.com/u/13812977?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cocosci", "html_url": "https://github.com/cocosci", "followers_url": "https://api.github.com/users/cocosci/followers", "following_url": "https://api.github.com/users/cocosci/following{/other_user}", "gists_url": "https://api.github.com/users/cocosci/gists{/gist_id}", "starred_url": "https://api.github.com/users/cocosci/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cocosci/subscriptions", "organizations_url": "https://api.github.com/users/cocosci/orgs", "repos_url": "https://api.github.com/users/cocosci/repos", "events_url": "https://api.github.com/users/cocosci/events{/privacy}", "received_events_url": "https://api.github.com/users/cocosci/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "yhliang2018", "id": 36285763, "node_id": "MDQ6VXNlcjM2Mjg1NzYz", "avatar_url": "https://avatars1.githubusercontent.com/u/36285763?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yhliang2018", "html_url": "https://github.com/yhliang2018", "followers_url": "https://api.github.com/users/yhliang2018/followers", "following_url": "https://api.github.com/users/yhliang2018/following{/other_user}", "gists_url": "https://api.github.com/users/yhliang2018/gists{/gist_id}", "starred_url": "https://api.github.com/users/yhliang2018/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yhliang2018/subscriptions", "organizations_url": "https://api.github.com/users/yhliang2018/orgs", "repos_url": "https://api.github.com/users/yhliang2018/repos", "events_url": "https://api.github.com/users/yhliang2018/events{/privacy}", "received_events_url": "https://api.github.com/users/yhliang2018/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "yhliang2018", "id": 36285763, "node_id": "MDQ6VXNlcjM2Mjg1NzYz", "avatar_url": "https://avatars1.githubusercontent.com/u/36285763?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yhliang2018", "html_url": "https://github.com/yhliang2018", "followers_url": "https://api.github.com/users/yhliang2018/followers", "following_url": "https://api.github.com/users/yhliang2018/following{/other_user}", "gists_url": "https://api.github.com/users/yhliang2018/gists{/gist_id}", "starred_url": "https://api.github.com/users/yhliang2018/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yhliang2018/subscriptions", "organizations_url": "https://api.github.com/users/yhliang2018/orgs", "repos_url": "https://api.github.com/users/yhliang2018/repos", "events_url": "https://api.github.com/users/yhliang2018/events{/privacy}", "received_events_url": "https://api.github.com/users/yhliang2018/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-07-11T00:16:56Z", "updated_at": "2019-11-18T11:42:37Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.14\r\n- Are you willing to contribute it (Yes/No):\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nWhen restoring a TF estimator, we can use warm_start_from. However, that means all variables will be restored from the checkpoint. (see https://www.tensorflow.org/api_docs/python/tf/estimator/Estimator)\r\nHowever, what if my model_fn is changed with some more variables being added? In that case, we can't use warm_start_from.\r\nWe hope those newly added variables can be initialized by some default initializer while others are loaded from the checkpoint. That way, the estimator can be incrementally defined. Much more flexible!\r\n\r\n**Will this change the current api? How?**\r\nNo\r\n\r\n**Who will benefit with this feature?**\r\nBERT users and Wide-n-deep estimator users.\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30571", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30571/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30571/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30571/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30571", "id": 466423679, "node_id": "MDU6SXNzdWU0NjY0MjM2Nzk=", "number": 30571, "title": "Trace/Wallclock Performance Discrepancy ", "user": {"login": "iiSeymour", "id": 4310904, "node_id": "MDQ6VXNlcjQzMTA5MDQ=", "avatar_url": "https://avatars2.githubusercontent.com/u/4310904?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iiSeymour", "html_url": "https://github.com/iiSeymour", "followers_url": "https://api.github.com/users/iiSeymour/followers", "following_url": "https://api.github.com/users/iiSeymour/following{/other_user}", "gists_url": "https://api.github.com/users/iiSeymour/gists{/gist_id}", "starred_url": "https://api.github.com/users/iiSeymour/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iiSeymour/subscriptions", "organizations_url": "https://api.github.com/users/iiSeymour/orgs", "repos_url": "https://api.github.com/users/iiSeymour/repos", "events_url": "https://api.github.com/users/iiSeymour/events{/privacy}", "received_events_url": "https://api.github.com/users/iiSeymour/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-07-10T17:11:04Z", "updated_at": "2019-07-18T17:16:38Z", "closed_at": null, "author_association": "NONE", "body": "**Describe the bug**\r\n\r\nRunning a converted PyTorch model has some curious performance characteristics were running the `.pb` model directly in TensorFlow is ~2.5 times slower than the onnx runtime.\r\n\r\n```bash\r\n$ ./benchmark model\r\n> onnx runtime took 4.83842\r\n> tensorflow took 12.63854\r\n```\r\n\r\nLooking at the trace information shows that work is only being done for about 3.5 seconds so the question is what is `session.run` doing for the other ~9 seconds?  \r\n\r\n![onnx-tf-rnn-perf](https://user-images.githubusercontent.com/4310904/60820118-b547e700-a198-11e9-8c3f-f48c54e3952e.png)\r\n\r\n**To Reproduce**\r\n\r\n```python\r\n#!/usr/bin/env python\r\n\r\n\"\"\"\r\nBenchmark ONNX model\r\n\"\"\"\r\n\r\nimport time\r\nfrom argparse import ArgumentParser\r\n\r\nimport numpy as np\r\nimport numpy.testing\r\n\r\nimport onnxruntime as runtime\r\n\r\nimport tensorflow as tf\r\nfrom tensorflow.python.client import timeline\r\n\r\ndef main(args):\r\n\r\n    x = np.random.randn(args.chunksize, args.batchsize, 1).astype(np.float32)\r\n\r\n    # == ONNX Runtime ==\r\n\r\n    options = runtime.SessionOptions()\r\n    session = runtime.InferenceSession(args.model + \".onnx\", options)\r\n\r\n    input_name = session.get_inputs()[0].name\r\n    output_name = session.get_outputs()[0].name\r\n\r\n    t0 = time.time()\r\n    onnxrt_out = session.run([output_name], {input_name: x})\r\n    onnxrt_out = np.array(onnxrt_out[0])\r\n    t1 = time.time()\r\n    print(\"> onnx runtime took %.5f\" % (t1 - t0))\r\n \r\n    # == TensorFlow ==\r\n\r\n    with tf.compat.v1.Session() as session:\r\n        with tf.io.gfile.GFile(args.model + \".pb\", \"rb\") as graph:\r\n            g = tf.compat.v1.GraphDef()\r\n            g.ParseFromString(graph.read())\r\n            tf.import_graph_def(g)\r\n\r\n        graph = tf.get_default_graph()\r\n        first = graph.get_tensor_by_name(\"import/input:0\")\r\n        last = graph.get_operations()[-1].outputs[0]\r\n\r\n        run_options = tf.RunOptions(trace_level=tf.RunOptions.FULL_TRACE)\r\n        run_metadata = tf.RunMetadata()\r\n\r\n        t0 = time.time()\r\n        tensorflow_out = session.run(\r\n            last,\r\n            feed_dict={first: x},\r\n            options=run_options,\r\n            run_metadata=run_metadata\r\n        )\r\n        t1 = time.time()\r\n\r\n        tl = timeline.Timeline(run_metadata.step_stats)\r\n        ctf = tl.generate_chrome_trace_format()\r\n        with open('trace_file.json', 'w') as f:\r\n            f.write(ctf)\r\n\r\n    print(\"> tensorflow took %.5f\" % (t1 - t0))\r\n\r\n    numpy.testing.assert_allclose(\r\n        onnxrt_out,\r\n        tensorflow_out,\r\n        atol=1e-4\r\n    )\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    parser = ArgumentParser()\r\n    parser.add_argument(\"model\")\r\n    parser.add_argument('--batchsize', type=int, default=1000)\r\n    parser.add_argument('--chunksize', type=int, default=1000)\r\n    main(parser.parse_args())\r\n```\r\n\r\n**Model files**\r\n\r\n - ONNX https://www.dropbox.com/s/jv0hk9h62eymax2/model.onnx\r\n - TensorFlow https://www.dropbox.com/s/t2n4ut7kwfjq8j2/model.pb\r\n\r\n**Python, ONNX, Tensorflow version**\r\n\r\n - Python version: 3.5.3\r\n - ONNX version: 1.5.0\r\n - Tensorflow version: 1.14.0\r\n\r\n**Additional context**\r\n\r\n - Trace file https://www.dropbox.com/s/vhaq5ykt6vlu5ij/trace_file.json\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30552", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30552/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30552/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30552/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30552", "id": 466138119, "node_id": "MDU6SXNzdWU0NjYxMzgxMTk=", "number": 30552, "title": "VS linkage fails with \"unresolved external symbol\"", "user": {"login": "AndreyPlotkinOr", "id": 46108258, "node_id": "MDQ6VXNlcjQ2MTA4MjU4", "avatar_url": "https://avatars0.githubusercontent.com/u/46108258?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndreyPlotkinOr", "html_url": "https://github.com/AndreyPlotkinOr", "followers_url": "https://api.github.com/users/AndreyPlotkinOr/followers", "following_url": "https://api.github.com/users/AndreyPlotkinOr/following{/other_user}", "gists_url": "https://api.github.com/users/AndreyPlotkinOr/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndreyPlotkinOr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndreyPlotkinOr/subscriptions", "organizations_url": "https://api.github.com/users/AndreyPlotkinOr/orgs", "repos_url": "https://api.github.com/users/AndreyPlotkinOr/repos", "events_url": "https://api.github.com/users/AndreyPlotkinOr/events{/privacy}", "received_events_url": "https://api.github.com/users/AndreyPlotkinOr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2019-07-10T07:08:46Z", "updated_at": "2020-02-06T05:47:08Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10 x64\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: git tag v2.0.0_beta1\r\n- Python version: 3.6.7\r\n- Installed using virtualenv? pip? conda?:\r\n- Bazel version (if compiling from source): bazel release 0.24.1\r\n- GCC/Compiler version (if compiling from source): \"C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC//bin/amd64/cl.exe\"\r\n- Microsoft (R) C/C++ Optimizing Compiler Version 19.00.24234.1 for x64\r\n- CUDA/cuDNN version: 10.1/7.6.1\r\n- GPU model and memory: GeForce GTX 1060 (6GB)\r\n\r\n\r\n\r\n**Describe the problem**\r\nCan't link the code. I get this error:\r\n1>a.obj : error LNK2001: unresolved external symbol \"public: int __cdecl google::protobuf::RepeatedPtrField<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > >::size(void)const \" (?size@?$RepeatedPtrField@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@protobuf@google@@QEBAHXZ)\r\n1>a.obj : error LNK2001: unresolved external symbol \"public: __cdecl tensorflow::SessionOptions::SessionOptions(void)\" (??0SessionOptions@tensorflow@@QEAA@XZ)\r\n1>a.obj : error LNK2001: unresolved external symbol \"class tensorflow::Session * __cdecl tensorflow::NewSession(struct tensorflow::SessionOptions const &)\" (?NewSession@tensorflow@@YAPEAVSession@1@AEBUSessionOptions@1@@Z)\r\n1>b.obj : error LNK2001: unresolved external symbol \"public: bool __cdecl google::protobuf::MessageLite::ParseFromArray(void const *,int)\" (?ParseFromArray@MessageLite@protobuf@google@@QEAA_NPEBXH@Z)\r\n\r\nI checked with dumpbin and didn't find this symbols/exports.\r\nI also tried to patch missing symbols, and it didn't help (https://github.com/guikarist/tensorflow-windows-build-script/blob/master/patches/tf_exported_symbols_msvc.lds)\r\n\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nI built a tensorflow.dll & tensorflow.lib using this command:\r\nbazel build --config=opt //tensorflow:tensorflow_dll_import_lib\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30545", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30545/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30545/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30545/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30545", "id": 465934346, "node_id": "MDU6SXNzdWU0NjU5MzQzNDY=", "number": 30545, "title": "MSVC compiler gives warning C4190 when include Tensorflow header", "user": {"login": "yijiew", "id": 4919062, "node_id": "MDQ6VXNlcjQ5MTkwNjI=", "avatar_url": "https://avatars2.githubusercontent.com/u/4919062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yijiew", "html_url": "https://github.com/yijiew", "followers_url": "https://api.github.com/users/yijiew/followers", "following_url": "https://api.github.com/users/yijiew/following{/other_user}", "gists_url": "https://api.github.com/users/yijiew/gists{/gist_id}", "starred_url": "https://api.github.com/users/yijiew/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yijiew/subscriptions", "organizations_url": "https://api.github.com/users/yijiew/orgs", "repos_url": "https://api.github.com/users/yijiew/repos", "events_url": "https://api.github.com/users/yijiew/events{/privacy}", "received_events_url": "https://api.github.com/users/yijiew/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-07-09T18:54:17Z", "updated_at": "2019-09-30T07:43:47Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\nYes. \r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\nWindows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\nNo\r\n- TensorFlow installed from (source or binary):\r\nNo\r\n- TensorFlow version (use command below):\r\nTensorFlow 1.10\r\n- Python version:\r\nNone\r\n- Bazel version (if compiling from source):\r\nNone\r\n- GCC/Compiler version (if compiling from source):\r\nNone\r\n- CUDA/cuDNN version:\r\nCUDA 10.0 / cuDNN 7.5\r\n- GPU model and memory:\r\nGTX 1070\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nWhen include tensorflow header to use the C API in my project, it always gives me warnings warning C4190: 'TF_NewWhile' has C-linkage specified, but returns UDT 'TF_WhileParams' which is incompatible with C. It is a bug introduced by the Tensorflow C API header.\r\n\r\n**Describe the expected behavior**\r\nNo warnings should be come from the Tensorflow header. \r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30537", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30537/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30537/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30537/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30537", "id": 465880585, "node_id": "MDU6SXNzdWU0NjU4ODA1ODU=", "number": 30537, "title": "Colocation error with SparseApply* ops and ResourceVariables", "user": {"login": "drasmuss", "id": 1952220, "node_id": "MDQ6VXNlcjE5NTIyMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/1952220?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drasmuss", "html_url": "https://github.com/drasmuss", "followers_url": "https://api.github.com/users/drasmuss/followers", "following_url": "https://api.github.com/users/drasmuss/following{/other_user}", "gists_url": "https://api.github.com/users/drasmuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/drasmuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drasmuss/subscriptions", "organizations_url": "https://api.github.com/users/drasmuss/orgs", "repos_url": "https://api.github.com/users/drasmuss/repos", "events_url": "https://api.github.com/users/drasmuss/events{/privacy}", "received_events_url": "https://api.github.com/users/drasmuss/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, {"login": "saxenasaurabh", "id": 3967488, "node_id": "MDQ6VXNlcjM5Njc0ODg=", "avatar_url": "https://avatars0.githubusercontent.com/u/3967488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saxenasaurabh", "html_url": "https://github.com/saxenasaurabh", "followers_url": "https://api.github.com/users/saxenasaurabh/followers", "following_url": "https://api.github.com/users/saxenasaurabh/following{/other_user}", "gists_url": "https://api.github.com/users/saxenasaurabh/gists{/gist_id}", "starred_url": "https://api.github.com/users/saxenasaurabh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saxenasaurabh/subscriptions", "organizations_url": "https://api.github.com/users/saxenasaurabh/orgs", "repos_url": "https://api.github.com/users/saxenasaurabh/repos", "events_url": "https://api.github.com/users/saxenasaurabh/events{/privacy}", "received_events_url": "https://api.github.com/users/saxenasaurabh/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-07-09T16:37:29Z", "updated_at": "2019-07-15T15:52:07Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: 10.0/7.4.1\r\n- GPU model and memory: GeForce GTX 980 Ti\r\n\r\n**Describe the current behavior**\r\n\r\nTensorFlow attempts to colocate ops with incompatible devices (when the ops are related to `SparseApply*`, e.g. `SparseApplyRMSProp`, operations), which results in an error.  This only occurs when using ResourceVariables (not RefVariables).\r\n\r\n**Describe the expected behavior**\r\n\r\nThere should be no error, and ops should be assigned to their appropriate devices (CPU vs GPU).\r\n\r\n**Code to reproduce the issue**\r\n``` python\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\ndo_error = True\r\n\r\nwith tf.Graph().as_default() as graph:\r\n    my_var = tf.Variable(np.ones(5), use_resource=True)\r\n    with tf.device(\"/gpu:0\" if do_error else None):\r\n        gather = tf.gather(my_var, [0, 2, 4])\r\n    opt_op = tf.train.MomentumOptimizer(0.1, 0.1).minimize(gather)\r\n\r\nwith tf.Session(graph=graph) as sess:\r\n    sess.run(tf.global_variables_initializer())\r\n    sess.run(opt_op)\r\n```\r\n\r\n**Other info / logs**\r\nColocation debug info:\r\n```\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Cannot assign a device for operation Variable/IsInitialized/VarIsInitializedOp: Could not satisfy explicit device specification '' because the node node Variable/IsInitialized/VarIsInitializedOp (defined at tmp.py:7) placed on device No device assignments were active during op 'Variable/IsInitiali\r\nzed/VarIsInitializedOp' creation.  was colocated with a group of nodes that required incompatible device '/device:GPU:0'. All available devices [/job:localhost/replica:0/task:0/device:CPU:0, /job:localhost/replica:0/task:0/device:GPU:0].\r\nColocation Debug Info:\r\nColocation group had the following types and supported devices:\r\nRoot Member(assigned_device_name_index_=-1 requested_device_name_='/device:GPU:0' assigned_device_name_='' resource_device_name_='' supported_device_types_=[CPU] possible_devices_=[]\r\nConst: GPU CPU\r\nVarHandleOp: GPU CPU\r\nAssignVariableOp: GPU CPU\r\nVarIsInitializedOp: GPU CPU\r\nResourceGather: GPU CPU\r\nReadVariableOp: GPU CPU\r\nStridedSlice: GPU CPU\r\nUnique: GPU CPU\r\nShape: GPU CPU\r\nUnsortedSegmentSum: GPU CPU\r\nCast: GPU CPU\r\nResourceSparseApplyMomentum: CPU\r\n\r\nColocation members, user-requested devices, and framework assigned devices, if any:\r\n  Variable/Initializer/initial_value (Const)\r\n  Variable (VarHandleOp)\r\n  Variable/IsInitialized/VarIsInitializedOp (VarIsInitializedOp)\r\n  Variable/Assign (AssignVariableOp)\r\n  Variable/Read/ReadVariableOp (ReadVariableOp)\r\n  Gather (ResourceGather) /device:GPU:0\r\n  Variable/Momentum/Initializer/zeros (Const)\r\n  Variable/Momentum (VarHandleOp)\r\n  Variable/Momentum/IsInitialized/VarIsInitializedOp (VarIsInitializedOp)\r\n  Variable/Momentum/Assign (AssignVariableOp)\r\n  Variable/Momentum/Read/ReadVariableOp (ReadVariableOp)\r\n  Momentum/update_Variable/Unique (Unique)\r\n  Momentum/update_Variable/Shape (Shape)\r\n  Momentum/update_Variable/strided_slice/stack (Const)\r\n  Momentum/update_Variable/strided_slice/stack_1 (Const)\r\n  Momentum/update_Variable/strided_slice/stack_2 (Const)\r\n  Momentum/update_Variable/strided_slice (StridedSlice)\r\n  Momentum/update_Variable/UnsortedSegmentSum (UnsortedSegmentSum)\r\n  Momentum/update_Variable/Cast (Cast)\r\n  Momentum/update_Variable/Cast_1 (Cast)\r\n  Momentum/update_Variable/ResourceSparseApplyMomentum (ResourceSparseApplyMomentum)\r\n\r\n         [[node Variable/IsInitialized/VarIsInitializedOp (defined at tmp.py:7) ]]Additional information about colocations:No node-device colocations were active during op 'Variable/IsInitialized/VarIsInitializedOp' creation.\r\nNo device assignments were active during op 'Variable/IsInitialized/VarIsInitializedOp' creation.\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30535", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30535/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30535/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30535/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30535", "id": 465870525, "node_id": "MDU6SXNzdWU0NjU4NzA1MjU=", "number": 30535, "title": "Argument to force CuDNN implementation for tf.keras.layers.LSTM", "user": {"login": "jkamalu", "id": 11124194, "node_id": "MDQ6VXNlcjExMTI0MTk0", "avatar_url": "https://avatars1.githubusercontent.com/u/11124194?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jkamalu", "html_url": "https://github.com/jkamalu", "followers_url": "https://api.github.com/users/jkamalu/followers", "following_url": "https://api.github.com/users/jkamalu/following{/other_user}", "gists_url": "https://api.github.com/users/jkamalu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jkamalu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jkamalu/subscriptions", "organizations_url": "https://api.github.com/users/jkamalu/orgs", "repos_url": "https://api.github.com/users/jkamalu/repos", "events_url": "https://api.github.com/users/jkamalu/events{/privacy}", "received_events_url": "https://api.github.com/users/jkamalu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-07-09T16:14:05Z", "updated_at": "2019-07-10T21:38:22Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 2 beta1\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nBoolean `force_cudnn` argument for tf.keras.layers.LSTM. When True, would raise an error if the user's configurations or usage (masking) are incompatible with the CuDNN implementation. \r\n\r\nCurrently, the LSTM layer logic dynamically uses the CuDNN implementation depending on the given arguments to the `__init__` and `call` functions. It does not report which it ends up using.\r\n\r\n**Will this change the current api? How?**\r\n\r\nThis will add an argument to the tf.keras.layers.LSTM `__init__` function.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nAnyone for whom the CuDNN implementation is both essential and viable and who is debugging their architecture for this reason. For example... \"My model is very slow, but I haven't run it before. I wonder if the LSTM implementation is optimized for GPU? I wish I could verify that it is.\""}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30532", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30532/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30532/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30532/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30532", "id": 465832790, "node_id": "MDU6SXNzdWU0NjU4MzI3OTA=", "number": 30532, "title": "How can i make sure the hash is consistent when saving the same model?", "user": {"login": "bojangus", "id": 28045561, "node_id": "MDQ6VXNlcjI4MDQ1NTYx", "avatar_url": "https://avatars0.githubusercontent.com/u/28045561?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bojangus", "html_url": "https://github.com/bojangus", "followers_url": "https://api.github.com/users/bojangus/followers", "following_url": "https://api.github.com/users/bojangus/following{/other_user}", "gists_url": "https://api.github.com/users/bojangus/gists{/gist_id}", "starred_url": "https://api.github.com/users/bojangus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bojangus/subscriptions", "organizations_url": "https://api.github.com/users/bojangus/orgs", "repos_url": "https://api.github.com/users/bojangus/repos", "events_url": "https://api.github.com/users/bojangus/events{/privacy}", "received_events_url": "https://api.github.com/users/bojangus/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-07-09T15:01:39Z", "updated_at": "2019-07-21T03:41:10Z", "closed_at": null, "author_association": "NONE", "body": "I'm using the Keras model.save('my_model.h5') function. Every time i save it, the hash changes, even though no changes were made to the weights or settings etc. \r\n\r\nOn this page: [link](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/keras/saving/saved_model/save.py), it shows there's a KERAS_CACHE_KEY, is that the culprit? or is some other change/timestamp happening on save? \r\n\r\nI need to identify the specific model in the future and really just want to store it's hash for verification, but if i save the same model twice, i'll never know it was the same one. Can you please help point me in the right direction? "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30531", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30531/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30531/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30531/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30531", "id": 465831407, "node_id": "MDU6SXNzdWU0NjU4MzE0MDc=", "number": 30531, "title": "tf.keras becuase Tensorflow Version Update to 1.14.0 Not Running", "user": {"login": "blackhu", "id": 5728454, "node_id": "MDQ6VXNlcjU3Mjg0NTQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/5728454?v=4", "gravatar_id": "", "url": "https://api.github.com/users/blackhu", "html_url": "https://github.com/blackhu", "followers_url": "https://api.github.com/users/blackhu/followers", "following_url": "https://api.github.com/users/blackhu/following{/other_user}", "gists_url": "https://api.github.com/users/blackhu/gists{/gist_id}", "starred_url": "https://api.github.com/users/blackhu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/blackhu/subscriptions", "organizations_url": "https://api.github.com/users/blackhu/orgs", "repos_url": "https://api.github.com/users/blackhu/repos", "events_url": "https://api.github.com/users/blackhu/events{/privacy}", "received_events_url": "https://api.github.com/users/blackhu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 19, "created_at": "2019-07-09T14:59:11Z", "updated_at": "2019-12-01T10:40:59Z", "closed_at": null, "author_association": "NONE", "body": "Tensorflow Version: 1.14.0\r\nException : \r\n```\r\n---------------------------------------------------------------------------\r\n\r\nAttributeError                            Traceback (most recent call last)\r\n\r\n<ipython-input-14-dcf9102c1887> in <module>()\r\n----> 1 trainModel()\r\n\r\n3 frames\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/contrib/tpu/python/tpu/keras_support.py in __init__(self, cpu_model, strategy)\r\n   1426           self._cpu_model.sample_weight_mode,\r\n   1427           self._cpu_model._compile_weighted_metrics,\r\n-> 1428           self._cpu_model.target_tensors,\r\n   1429       )\r\n   1430 \r\n\r\nAttributeError: 'Model' object has no attribute 'target_tensors'\r\n```\r\nBut My Code in Tensorflow Version 1.13.1 is Normal Working.\r\n\r\nMy Code:\r\n```\r\n\u00b7\u00b7\u00b7\r\n\ttuneModel = Model(inputs=base_model.input, outputs = output)\r\n\ttuneModel.compile(loss='sparse_categorical_crossentropy', optimizer= tf.train.RMSPropOptimizer(learning_rate=1e-4) ,metrics=['accuracy'])\r\n\r\n\u00b7\u00b7\u00b7\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30494", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30494/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30494/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30494/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30494", "id": 465247851, "node_id": "MDU6SXNzdWU0NjUyNDc4NTE=", "number": 30494, "title": "Null Pointer Bug for InferenceContext* in Linux", "user": {"login": "zicofish", "id": 2431336, "node_id": "MDQ6VXNlcjI0MzEzMzY=", "avatar_url": "https://avatars0.githubusercontent.com/u/2431336?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zicofish", "html_url": "https://github.com/zicofish", "followers_url": "https://api.github.com/users/zicofish/followers", "following_url": "https://api.github.com/users/zicofish/following{/other_user}", "gists_url": "https://api.github.com/users/zicofish/gists{/gist_id}", "starred_url": "https://api.github.com/users/zicofish/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zicofish/subscriptions", "organizations_url": "https://api.github.com/users/zicofish/orgs", "repos_url": "https://api.github.com/users/zicofish/repos", "events_url": "https://api.github.com/users/zicofish/events{/privacy}", "received_events_url": "https://api.github.com/users/zicofish/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-07-08T13:07:34Z", "updated_at": "2019-08-11T01:50:44Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution: Linux CentOS 7 \r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: 3.6.8\r\n\r\n**Describe the current behavior**\r\nWhen adding a custom op in C++, the shape function passes a NULL InferenceContext pointer.\r\n\r\n**Describe the expected behavior**\r\nThe pointer should not be NULL. (I have also tested it on Mac OS, and it works fine. But on Linux, it gives a null pointer.)\r\n\r\n**Code to reproduce the issue**\r\nThis code (as a file `zero_out.cc`) is taken directly from `https://www.tensorflow.org/guide/extend/op`.\r\n```\r\n#include \"tensorflow/core/framework/op.h\"\r\n#include \"tensorflow/core/framework/shape_inference.h\"\r\n#include \"tensorflow/core/framework/op_kernel.h\"\r\n#include <iostream>\r\n\r\nusing namespace tensorflow;\r\nusing shape_inference::InferenceContext;\r\n\r\nREGISTER_OP(\"ZeroOut\")\r\n    .Input(\"to_zero: int32\")\r\n    .Output(\"zeroed: int32\")\r\n    .SetShapeFn([](InferenceContext* c) {\r\n      std::cout << \"c address: \" << c << std::endl;\r\n      c->set_output(0, c->input(0));\r\n      return Status::OK();\r\n    });\r\n\r\nclass ZeroOutOp : public OpKernel {\r\n public:\r\n  explicit ZeroOutOp(OpKernelConstruction* context) : OpKernel(context) {}\r\n\r\n  void Compute(OpKernelContext* context) override {\r\n      // Just leave it empty\r\n  }\r\n};\r\n\r\nREGISTER_KERNEL_BUILDER(\r\n    Name(\"ZeroOut\")\r\n    .Device(DEVICE_CPU),\r\n    ZeroOutOp);\r\n\r\n```\r\nCompile the op with the commands:\r\n```\r\nTF_CFLAGS=( $(python -c 'import tensorflow as tf; print(\" \".join(tf.sysconfig.get_compile_flags()))') )\r\nTF_LFLAGS=( $(python -c 'import tensorflow as tf; print(\" \".join(tf.sysconfig.get_link_flags()))') )\r\ng++ -std=c++11 -shared zero_out.cc -o zero_out.so -fPIC ${TF_CFLAGS[@]} ${TF_LFLAGS[@]} -O2\r\n```\r\nRun the op:\r\n```\r\nimport tensorflow as tf\r\nzero_out_module = tf.load_op_library('./zero_out.so')\r\nwith tf.Session(''):\r\n  zero_out_module.zero_out([[1, 2], [3, 4]]).eval()\r\n```\r\nThis prints the following:\r\n```\r\nc address: 0\r\nSegmentation fault\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30492", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30492/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30492/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30492/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30492", "id": 465222294, "node_id": "MDU6SXNzdWU0NjUyMjIyOTQ=", "number": 30492, "title": "Custom OP Documentation: `-D_GLIBCXX_USE_CXX11_ABI=0` not required anymore?", "user": {"login": "PhilJd", "id": 16101605, "node_id": "MDQ6VXNlcjE2MTAxNjA1", "avatar_url": "https://avatars2.githubusercontent.com/u/16101605?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PhilJd", "html_url": "https://github.com/PhilJd", "followers_url": "https://api.github.com/users/PhilJd/followers", "following_url": "https://api.github.com/users/PhilJd/following{/other_user}", "gists_url": "https://api.github.com/users/PhilJd/gists{/gist_id}", "starred_url": "https://api.github.com/users/PhilJd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PhilJd/subscriptions", "organizations_url": "https://api.github.com/users/PhilJd/orgs", "repos_url": "https://api.github.com/users/PhilJd/repos", "events_url": "https://api.github.com/users/PhilJd/events{/privacy}", "received_events_url": "https://api.github.com/users/PhilJd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, {"login": "yifeif", "id": 1192265, "node_id": "MDQ6VXNlcjExOTIyNjU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1192265?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yifeif", "html_url": "https://github.com/yifeif", "followers_url": "https://api.github.com/users/yifeif/followers", "following_url": "https://api.github.com/users/yifeif/following{/other_user}", "gists_url": "https://api.github.com/users/yifeif/gists{/gist_id}", "starred_url": "https://api.github.com/users/yifeif/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yifeif/subscriptions", "organizations_url": "https://api.github.com/users/yifeif/orgs", "repos_url": "https://api.github.com/users/yifeif/repos", "events_url": "https://api.github.com/users/yifeif/events{/privacy}", "received_events_url": "https://api.github.com/users/yifeif/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-07-08T12:11:06Z", "updated_at": "2019-07-09T20:46:04Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "## URL(s) with the issue:\r\n\r\nhttps://www.tensorflow.org/guide/extend/op#compile_the_op_using_your_system_compiler_tensorflow_binary_installation\r\n(Last Note of the paragraph).\r\n\r\n## Description of issue (what needs changing):\r\nThe documentation states that customs ops for the binary pip packages should be compiled with `-D_GLIBCXX_USE_CXX11_ABI=0`. For me this actually had to be removed (python 3.7, tensorflow-gpu==1.14.0  from pip), so I guess tf-1.14 is now built with `gcc > 4`?\r\nIf someone can confirm, I could open a PR :)\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30491", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30491/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30491/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30491/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30491", "id": 465196986, "node_id": "MDU6SXNzdWU0NjUxOTY5ODY=", "number": 30491, "title": "padding parameter of conv2d layer is not saved correctly with dilation > 1", "user": {"login": "guoyejun", "id": 10448440, "node_id": "MDQ6VXNlcjEwNDQ4NDQw", "avatar_url": "https://avatars1.githubusercontent.com/u/10448440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guoyejun", "html_url": "https://github.com/guoyejun", "followers_url": "https://api.github.com/users/guoyejun/followers", "following_url": "https://api.github.com/users/guoyejun/following{/other_user}", "gists_url": "https://api.github.com/users/guoyejun/gists{/gist_id}", "starred_url": "https://api.github.com/users/guoyejun/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guoyejun/subscriptions", "organizations_url": "https://api.github.com/users/guoyejun/orgs", "repos_url": "https://api.github.com/users/guoyejun/repos", "events_url": "https://api.github.com/users/guoyejun/events{/privacy}", "received_events_url": "https://api.github.com/users/guoyejun/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-07-08T11:12:13Z", "updated_at": "2019-07-10T18:19:45Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):Linux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.13.1\r\n- Python version: 3.5.2\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n\r\n**Describe the current behavior**\r\ntf.layers.conv2d(padding='same') is saved as padding is VALID.\r\n\r\n**Describe the expected behavior**\r\ntf.layers.conv2d(padding='same') is saved as padding is SAME.\r\n\r\n**Code to reproduce the issue**\r\ni use the below code to generate .pb file, the key is that padding parameter is same, and dilation_rate is 2.\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\nx = tf.placeholder(tf.float32, shape=[1, None, None, 1])\r\nconv = tf.layers.conv2d(x, 64, 5, activation=tf.nn.tanh, padding='same', dilation_rate=(2, 2), kernel_initializer=tf.keras.initializers.he_normal())\r\ny = tf.identity(conv, name='y')\r\n\r\n\r\nwith tf.Session() as sess:\r\n    sess.run(tf.global_variables_initializer())\r\n    output_graph_def = tf.graph_util.convert_variables_to_constants(sess, sess.graph_def, ['y'])\r\n    tf.train.write_graph(output_graph_def, '.', 'same.pb', as_text=False)\r\n```\r\n\r\nI use the following code to load and check the .pb file, but the padding parameter is not same, but VALID.\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\nwith open('same.pb', 'rb') as f:\r\n    graph_def = tf.GraphDef()\r\n    graph_def.ParseFromString(f.read())\r\n    nodes = graph_def.node\r\n    for node in nodes:\r\n        if node.op == 'Conv2D':\r\n            print(node.attr['padding'].s)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30483", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30483/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30483/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30483/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30483", "id": 465124699, "node_id": "MDU6SXNzdWU0NjUxMjQ2OTk=", "number": 30483, "title": "Hwloc mirror - download issue", "user": {"login": "DimaK-tracxpoint", "id": 25501695, "node_id": "MDQ6VXNlcjI1NTAxNjk1", "avatar_url": "https://avatars1.githubusercontent.com/u/25501695?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DimaK-tracxpoint", "html_url": "https://github.com/DimaK-tracxpoint", "followers_url": "https://api.github.com/users/DimaK-tracxpoint/followers", "following_url": "https://api.github.com/users/DimaK-tracxpoint/following{/other_user}", "gists_url": "https://api.github.com/users/DimaK-tracxpoint/gists{/gist_id}", "starred_url": "https://api.github.com/users/DimaK-tracxpoint/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DimaK-tracxpoint/subscriptions", "organizations_url": "https://api.github.com/users/DimaK-tracxpoint/orgs", "repos_url": "https://api.github.com/users/DimaK-tracxpoint/repos", "events_url": "https://api.github.com/users/DimaK-tracxpoint/events{/privacy}", "received_events_url": "https://api.github.com/users/DimaK-tracxpoint/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1194756584, "node_id": "MDU6TGFiZWwxMTk0NzU2NTg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20raspberry%20pi", "name": "subtype: raspberry pi", "color": "b619ea", "default": false, "description": "Raspberry Pi Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-07-08T08:32:46Z", "updated_at": "2019-11-07T19:36:44Z", "closed_at": null, "author_association": "NONE", "body": "I am trying to cross-compile TF for Raspberry Pi via Docker container - as described in documentation. Unfortunately. it breaks with the following message:\r\n\r\nERROR: /workspace/tensorflow/core/BUILD:2432:1: no such package '@hwloc//': java.io.IOException: Error downloading [http://mirror.tensorflow.org/download.open-mpi.org/release/hwloc/v2.0/hwloc-2.0.3.tar.gz, https://download.open-mpi.org/release/hwloc/v2.0/hwloc-2.0.3.tar.gz] to /home/dmitry/tensorflow/bazel-ci_build-cache/.cache/bazel/_bazel_dmitry/eab0d61a99b6696edb3d2aff87b585e8/external/hwloc/hwloc-2.0.3.tar.gz: Tried to reconnect at offset 6,391,630 but server didn't support it and referenced by '//tensorflow/core:lib_internal_impl'\r\nERROR: Analysis of target '//tensorflow/tools/pip_package:build_pip_package' failed; build aborted: no such package '@hwloc//': java.io.IOException: Error downloading [http://mirror.tensorflow.org/download.open-mpi.org/release/hwloc/v2.0/hwloc-2.0.3.tar.gz, https://download.open-mpi.org/release/hwloc/v2.0/hwloc-2.0.3.tar.gz] to /home/dmitry/tensorflow/bazel-ci_build-cache/.cache/bazel/_bazel_dmitry/eab0d61a99b6696edb3d2aff87b585e8/external/hwloc/hwloc-2.0.3.tar.gz: Tried to reconnect at offset 6,391,630 but server didn't support it\r\n\r\nFixes tried with no luck:\r\n- remove a semi-downloaded package from Bazel cache\r\n- download it from the original site and put to a cache\r\n- download from a mirror with Chrome (breaks in two parts)\r\n\r\n**System information**\r\nTF_BUILD_INFO = {\r\ncontainer_type: \"pi-python3\", \r\ncommand: \"tensorflow/tools/ci_build/pi/build_raspberry_pi.sh PI_ONE\", \r\nsource_HEAD: \"c407b045b8802f9eded430ef48be18cd85e4788c\", \r\nsource_remote_origin: \"https://github.com/tensorflow/tensorflow.git\", \r\nOS: \"Linux\", \r\nkernel: \"4.15.0-54-generic\", \r\narchitecture: \"x86_64\", \r\nprocessor: \"Intel(R) Core(TM) i7-8550U CPU @ 1.80GHz\", \r\nprocessor_count: \"8\", \r\nmemory_total: \"16305540 kB\", \r\nswap_total: \"16657404 kB\", \r\nBazel_version: \"Build label: 0.24.1\", \r\nJava_version: \"1.8.0_222-ea\", \r\nPython_version: \"2.7.6\", \r\ngpp_version: \"g++ (Ubuntu 4.8.4-2ubuntu1~14.04.4) 4.8.4\", \r\nswig_version: \"\", \r\nNVIDIA_driver_version: \"418.56\", \r\nCUDA_device_count: \"0\", \r\nCUDA_device_names: \"\", \r\nCUDA_toolkit_version: \"\"\r\n}\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nCI_DOCKER_EXTRA_PARAMS=\"-e CI_BUILD_PYTHON=python3 -e CROSSTOOL_PYTHON_INCLUDE_PATH=/usr/include/python3.4\"     tensorflow/tools/ci_build/ci_build.sh PI-PYTHON3     tensorflow/tools/ci_build/pi/build_raspberry_pi.sh PI_ONE\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30475", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30475/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30475/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30475/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30475", "id": 465070260, "node_id": "MDU6SXNzdWU0NjUwNzAyNjA=", "number": 30475, "title": "Tensorflow v1.14.0 with MKL and eigen on osx", "user": {"login": "skrisna", "id": 2131842, "node_id": "MDQ6VXNlcjIxMzE4NDI=", "avatar_url": "https://avatars2.githubusercontent.com/u/2131842?v=4", "gravatar_id": "", "url": "https://api.github.com/users/skrisna", "html_url": "https://github.com/skrisna", "followers_url": "https://api.github.com/users/skrisna/followers", "following_url": "https://api.github.com/users/skrisna/following{/other_user}", "gists_url": "https://api.github.com/users/skrisna/gists{/gist_id}", "starred_url": "https://api.github.com/users/skrisna/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/skrisna/subscriptions", "organizations_url": "https://api.github.com/users/skrisna/orgs", "repos_url": "https://api.github.com/users/skrisna/repos", "events_url": "https://api.github.com/users/skrisna/events{/privacy}", "received_events_url": "https://api.github.com/users/skrisna/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1104829434, "node_id": "MDU6TGFiZWwxMTA0ODI5NDM0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:mkl", "name": "comp:mkl", "color": "0052cc", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "TensorFlow-MKL", "id": 44416303, "node_id": "MDQ6VXNlcjQ0NDE2MzAz", "avatar_url": "https://avatars2.githubusercontent.com/u/44416303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TensorFlow-MKL", "html_url": "https://github.com/TensorFlow-MKL", "followers_url": "https://api.github.com/users/TensorFlow-MKL/followers", "following_url": "https://api.github.com/users/TensorFlow-MKL/following{/other_user}", "gists_url": "https://api.github.com/users/TensorFlow-MKL/gists{/gist_id}", "starred_url": "https://api.github.com/users/TensorFlow-MKL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TensorFlow-MKL/subscriptions", "organizations_url": "https://api.github.com/users/TensorFlow-MKL/orgs", "repos_url": "https://api.github.com/users/TensorFlow-MKL/repos", "events_url": "https://api.github.com/users/TensorFlow-MKL/events{/privacy}", "received_events_url": "https://api.github.com/users/TensorFlow-MKL/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "TensorFlow-MKL", "id": 44416303, "node_id": "MDQ6VXNlcjQ0NDE2MzAz", "avatar_url": "https://avatars2.githubusercontent.com/u/44416303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TensorFlow-MKL", "html_url": "https://github.com/TensorFlow-MKL", "followers_url": "https://api.github.com/users/TensorFlow-MKL/followers", "following_url": "https://api.github.com/users/TensorFlow-MKL/following{/other_user}", "gists_url": "https://api.github.com/users/TensorFlow-MKL/gists{/gist_id}", "starred_url": "https://api.github.com/users/TensorFlow-MKL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TensorFlow-MKL/subscriptions", "organizations_url": "https://api.github.com/users/TensorFlow-MKL/orgs", "repos_url": "https://api.github.com/users/TensorFlow-MKL/repos", "events_url": "https://api.github.com/users/TensorFlow-MKL/events{/privacy}", "received_events_url": "https://api.github.com/users/TensorFlow-MKL/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-07-08T06:06:11Z", "updated_at": "2019-09-27T01:27:38Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Mac OSX Mojave 10.14.5\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: on master branch, commit 3e5418c3d6\r\n- Python version: 3.7.3\r\n- Installed using virtualenv? pip? conda?: conda\r\n- Bazel version (if compiling from source): 0.25.2\r\n- GCC/Compiler version (if compiling from source): clang-1001.0.46.4\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n\r\n\r\n**Describe the problem**\r\nI tried to install tensorflow along with MKL and eigen\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n```shell\r\n# conda 4.7.5\r\nconda create -n idp-6 -c defaults python=3 pip six numpy wheel setuptools mock 'future>=0.17.1' 'keras-preprocessing=1.0.5' 'keras-applications=1.0.6' mkl mklml\r\nconda activate idp-6\r\ncd tensorflow\r\nexport TF_MKL_ROOT=$HOME/miniconda3/envs/idp-6\r\n# This is needed since license.txt does not exist in $TF_MKL_ROOT and the build system expects it\r\ntouch $TF_MKL_ROOT/license.txt\r\nyes \"\" | ./configure\r\nbazel build -c opt --verbose_failures --config=mkl --copt=\"-DEIGEN_USE_MKL_VML\" --config=opt //tensorflow/tools/pip_package:build_pip_package\r\n```\r\n\r\n**Any other info / logs**\r\nWhen I ran it, I got an error at some point in through the build that mkl.h was not found.\r\n\r\nAs a quick fix, I made the following update and it worked (below). While this is not particularly elegant, but it works for me.\r\n\r\nIf there is interest, I can provide a pull request that does the right thing for win/osx/linux using third_party/mkl/BUILD as a template.\r\n\r\n```diff\r\ndiff --git i/third_party/eigen3/BUILD w/third_party/eigen3/BUILD\r\nindex bd6cb868a9..fb6970ee36 100644\r\n--- i/third_party/eigen3/BUILD\r\n+++ w/third_party/eigen3/BUILD\r\n@@ -35,6 +35,8 @@ cc_library(\r\n     deps = [\r\n         \"@eigen_archive//:eigen\",\r\n         \"@local_config_sycl//sycl\",\r\n+        \"@mkl_darwin//:mkl_headers\",\r\n+        \"@mkl_darwin//:mkl_libs_darwin\",\r\n     ],\r\n )\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30469", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30469/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30469/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30469/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30469", "id": 465029682, "node_id": "MDU6SXNzdWU0NjUwMjk2ODI=", "number": 30469, "title": "TensorflowLite model for On-Device Speech Recognizer", "user": {"login": "dattachandan", "id": 2154248, "node_id": "MDQ6VXNlcjIxNTQyNDg=", "avatar_url": "https://avatars3.githubusercontent.com/u/2154248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dattachandan", "html_url": "https://github.com/dattachandan", "followers_url": "https://api.github.com/users/dattachandan/followers", "following_url": "https://api.github.com/users/dattachandan/following{/other_user}", "gists_url": "https://api.github.com/users/dattachandan/gists{/gist_id}", "starred_url": "https://api.github.com/users/dattachandan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dattachandan/subscriptions", "organizations_url": "https://api.github.com/users/dattachandan/orgs", "repos_url": "https://api.github.com/users/dattachandan/repos", "events_url": "https://api.github.com/users/dattachandan/events{/privacy}", "received_events_url": "https://api.github.com/users/dattachandan/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-07-08T02:43:54Z", "updated_at": "2019-09-01T18:11:31Z", "closed_at": null, "author_association": "NONE", "body": "# Description of issue\r\n\r\nThere a mention of a tensorflowlite model in the Google AI team [blog](https://ai.googleblog.com/2019/03/an-all-neural-on-device-speech.html)\r\n\r\n> made publicly available through the model optimization toolkit in the TensorFlow Lite library \r\n\r\nWhere can I find this model? Is this the right place: https://github.com/tensorflow/tensorflow/tree/master/tensorflow/lite/g3doc/models"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30468", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30468/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30468/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30468/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30468", "id": 464992984, "node_id": "MDU6SXNzdWU0NjQ5OTI5ODQ=", "number": 30468, "title": "tensorflow 2.0 variable slice assign_add not supported", "user": {"login": "motionlife", "id": 8056257, "node_id": "MDQ6VXNlcjgwNTYyNTc=", "avatar_url": "https://avatars0.githubusercontent.com/u/8056257?v=4", "gravatar_id": "", "url": "https://api.github.com/users/motionlife", "html_url": "https://github.com/motionlife", "followers_url": "https://api.github.com/users/motionlife/followers", "following_url": "https://api.github.com/users/motionlife/following{/other_user}", "gists_url": "https://api.github.com/users/motionlife/gists{/gist_id}", "starred_url": "https://api.github.com/users/motionlife/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/motionlife/subscriptions", "organizations_url": "https://api.github.com/users/motionlife/orgs", "repos_url": "https://api.github.com/users/motionlife/repos", "events_url": "https://api.github.com/users/motionlife/events{/privacy}", "received_events_url": "https://api.github.com/users/motionlife/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1605791310, "node_id": "MDU6TGFiZWwxNjA1NzkxMzEw", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.1", "name": "TF 2.1", "color": "c2e0c6", "default": false, "description": "for tracking issues in 2.1 release"}, {"id": 736653459, "node_id": "MDU6TGFiZWw3MzY2NTM0NTk=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:eager", "name": "comp:eager", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jaingaurav", "id": 84372, "node_id": "MDQ6VXNlcjg0Mzcy", "avatar_url": "https://avatars1.githubusercontent.com/u/84372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaingaurav", "html_url": "https://github.com/jaingaurav", "followers_url": "https://api.github.com/users/jaingaurav/followers", "following_url": "https://api.github.com/users/jaingaurav/following{/other_user}", "gists_url": "https://api.github.com/users/jaingaurav/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaingaurav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaingaurav/subscriptions", "organizations_url": "https://api.github.com/users/jaingaurav/orgs", "repos_url": "https://api.github.com/users/jaingaurav/repos", "events_url": "https://api.github.com/users/jaingaurav/events{/privacy}", "received_events_url": "https://api.github.com/users/jaingaurav/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jaingaurav", "id": 84372, "node_id": "MDQ6VXNlcjg0Mzcy", "avatar_url": "https://avatars1.githubusercontent.com/u/84372?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaingaurav", "html_url": "https://github.com/jaingaurav", "followers_url": "https://api.github.com/users/jaingaurav/followers", "following_url": "https://api.github.com/users/jaingaurav/following{/other_user}", "gists_url": "https://api.github.com/users/jaingaurav/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaingaurav/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaingaurav/subscriptions", "organizations_url": "https://api.github.com/users/jaingaurav/orgs", "repos_url": "https://api.github.com/users/jaingaurav/repos", "events_url": "https://api.github.com/users/jaingaurav/events{/privacy}", "received_events_url": "https://api.github.com/users/jaingaurav/received_events", "type": "User", "site_admin": false}, {"login": "gadagashwini", "id": 48476109, "node_id": "MDQ6VXNlcjQ4NDc2MTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/48476109?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gadagashwini", "html_url": "https://github.com/gadagashwini", "followers_url": "https://api.github.com/users/gadagashwini/followers", "following_url": "https://api.github.com/users/gadagashwini/following{/other_user}", "gists_url": "https://api.github.com/users/gadagashwini/gists{/gist_id}", "starred_url": "https://api.github.com/users/gadagashwini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gadagashwini/subscriptions", "organizations_url": "https://api.github.com/users/gadagashwini/orgs", "repos_url": "https://api.github.com/users/gadagashwini/repos", "events_url": "https://api.github.com/users/gadagashwini/events{/privacy}", "received_events_url": "https://api.github.com/users/gadagashwini/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-07-07T21:01:22Z", "updated_at": "2020-03-13T07:13:28Z", "closed_at": null, "author_association": "NONE", "body": "Could anybody tell me in tf 2.0 rc1, why is variable slice assignment (varaible[...].assign function) works well but the assign_add is not supported?\r\ne.g. :\r\n\r\n`var = tf.Variable(tf.ones([2,3,3]))`\r\n`var[:, :, 1].assign(tf.zeros([2,3]))  # this will work`\r\n\r\n`var[:, :, 1].assign_add(tf.zeros([2,3]))  # this will NOT work`\r\n`AttributeError: 'tensorflow.python.framework.ops.EagerTensor' object has no attribute 'assign_add'`\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30466", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30466/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30466/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30466/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30466", "id": 464970844, "node_id": "MDU6SXNzdWU0NjQ5NzA4NDQ=", "number": 30466, "title": "Batched tf.linalg.eigh is much slower on GPU than on CPU for many small matrices", "user": {"login": "calincru", "id": 5479131, "node_id": "MDQ6VXNlcjU0NzkxMzE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5479131?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calincru", "html_url": "https://github.com/calincru", "followers_url": "https://api.github.com/users/calincru/followers", "following_url": "https://api.github.com/users/calincru/following{/other_user}", "gists_url": "https://api.github.com/users/calincru/gists{/gist_id}", "starred_url": "https://api.github.com/users/calincru/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calincru/subscriptions", "organizations_url": "https://api.github.com/users/calincru/orgs", "repos_url": "https://api.github.com/users/calincru/repos", "events_url": "https://api.github.com/users/calincru/events{/privacy}", "received_events_url": "https://api.github.com/users/calincru/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-07-07T16:44:01Z", "updated_at": "2019-10-31T23:36:49Z", "closed_at": null, "author_association": "NONE", "body": "**Describe the current behavior**\r\nSee title.\r\n\r\n**Describe the expected behavior**\r\nThere shouldn't be such a big discrepancy between the two (see below).\r\n\r\n**Code to reproduce the issue**\r\n```python\r\nimport tensorflow as tf\r\nsym = lambda a: 0.5 * (a + tf.matrix_transpose(a))\r\nwith tf.device('cpu:0'):\r\n    _ = tf.linalg.eigh(sym(tf.random.uniform((100000, 2, 2))))  # fast (~0.02s)\r\nwith tf.device('gpu:0'):\r\n    _ = tf.linalg.eigh(sym(tf.random.uniform((100000, 2, 2))))  # slow (~7.3s)\r\n```\r\n\r\n**System information**\r\n- os platform: Linux-4.4.0-154-generic-x86_64-with-debian-stretch-sid\r\n- gpu: GeForce GTX TITAN X\r\n- python version: 3.7.3\r\n- tf.version.VERSION = 1.13.1\r\n- tf.version.COMPILER_VERSION = 5.4.0\r\n- CUDA 10, cuDNN 7"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30465", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30465/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30465/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30465/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30465", "id": 464969322, "node_id": "MDU6SXNzdWU0NjQ5NjkzMjI=", "number": 30465, "title": "problem about creating my own model", "user": {"login": "WendyWangxyue", "id": 51722072, "node_id": "MDQ6VXNlcjUxNzIyMDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/51722072?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WendyWangxyue", "html_url": "https://github.com/WendyWangxyue", "followers_url": "https://api.github.com/users/WendyWangxyue/followers", "following_url": "https://api.github.com/users/WendyWangxyue/following{/other_user}", "gists_url": "https://api.github.com/users/WendyWangxyue/gists{/gist_id}", "starred_url": "https://api.github.com/users/WendyWangxyue/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WendyWangxyue/subscriptions", "organizations_url": "https://api.github.com/users/WendyWangxyue/orgs", "repos_url": "https://api.github.com/users/WendyWangxyue/repos", "events_url": "https://api.github.com/users/WendyWangxyue/events{/privacy}", "received_events_url": "https://api.github.com/users/WendyWangxyue/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-07-07T16:25:47Z", "updated_at": "2019-08-14T00:37:40Z", "closed_at": null, "author_association": "NONE", "body": "when i run the code which is write in https://github.com/tensorflow/tensorflow/tree/master/tensorflow/lite/experimental/micro/examples/micro_speech#creating-your-own-model\r\nbazel run -c opt --copt=-mavx2 --copt=-mfma \\\r\ntensorflow/examples/speech_commands:train -- \\\r\n--model_architecture=tiny_conv --window_stride=20 --preprocess=micro \\\r\n--wanted_words=\"yes,no\" --silence_percentage=25 --unknown_percentage=25 --quantize=1\r\nit also said\r\nERROR: An error occurred during the fetch of repository 'local_config_python':\r\n   Traceback (most recent call last):\r\n\tFile \"/home/wxy/tensorflow-master/third_party/py/python_configure.bzl\", line 344\r\n\t\t_create_local_python_repository(repository_ctx)\r\n\tFile \"/home/wxy/tensorflow-master/third_party/py/python_configure.bzl\", line 296, in _create_local_python_repository\r\n\t\t_get_numpy_include(repository_ctx, python_bin)\r\n\tFile \"/home/wxy/tensorflow-master/third_party/py/python_configure.bzl\", line 276, in _get_numpy_include\r\n\t\t_execute(repository_ctx, [python_bin, \"-c\",...\"], <2 more arguments>)\r\n\tFile \"/home/wxy/tensorflow-master/third_party/py/python_configure.bzl\", line 56, in _execute\r\n\t\t_fail(\"\\n\".join([error_msg.strip() if ... \"\"]))\r\n\tFile \"/home/wxy/tensorflow-master/third_party/py/python_configure.bzl\", line 27, in _fail\r\n\t\tfail((\"%sPython Configuration Error:%...)))\r\nPython Configuration Error: Problem getting numpy include path.\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\nImportError: No module named numpy\r\nIs numpy installed?\r\nERROR: /home/wxy/tensorflow-master/third_party/python_runtime/BUILD:5:1: no such package '@local_config_python//': Traceback (most recent call last):\r\n\tFile \"/home/wxy/tensorflow-master/third_party/py/python_configure.bzl\", line 344\r\n\t\t_create_local_python_repository(repository_ctx)\r\n\tFile \"/home/wxy/tensorflow-master/third_party/py/python_configure.bzl\", line 296, in _create_local_python_repository\r\n\t\t_get_numpy_include(repository_ctx, python_bin)\r\n\tFile \"/home/wxy/tensorflow-master/third_party/py/python_configure.bzl\", line 276, in _get_numpy_include\r\n\t\t_execute(repository_ctx, [python_bin, \"-c\",...\"], <2 more arguments>)\r\n\tFile \"/home/wxy/tensorflow-master/third_party/py/python_configure.bzl\", line 56, in _execute\r\n\t\t_fail(\"\\n\".join([error_msg.strip() if ... \"\"]))\r\n\tFile \"/home/wxy/tensorflow-master/third_party/py/python_configure.bzl\", line 27, in _fail\r\n\t\tfail((\"%sPython Configuration Error:%...)))\r\nPython Configuration Error: Problem getting numpy include path.\r\nTraceback (most recent call last):\r\n  File \"<string>\", line 1, in <module>\r\nImportError: No module named numpy\r\nIs numpy installed?\r\n and referenced by '//third_party/python_runtime:headers'\r\nERROR: Analysis of target '//tensorflow/examples/speech_commands:train' failed; build aborted: Analysis failed\r\nINFO: Elapsed time: 8.612s\r\nINFO: 0 processes.\r\nFAILED: Build did NOT complete successfully (33 packages loaded, 707 targets c\\\r\nFAILED: Build did NOT complete successfully (33 packages loaded, 707 targets c\\\r\nonfigured)\r\n\r\ni run it in Ubuntu 16.04 and i install the numpy whatever in python 2.x or python 3.n\r\nthank you"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30464", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30464/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30464/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30464/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30464", "id": 464967386, "node_id": "MDU6SXNzdWU0NjQ5NjczODY=", "number": 30464, "title": "Tensorboard does not display more then 100 bounding boxes", "user": {"login": "wkoziej", "id": 138819, "node_id": "MDQ6VXNlcjEzODgxOQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/138819?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wkoziej", "html_url": "https://github.com/wkoziej", "followers_url": "https://api.github.com/users/wkoziej/followers", "following_url": "https://api.github.com/users/wkoziej/following{/other_user}", "gists_url": "https://api.github.com/users/wkoziej/gists{/gist_id}", "starred_url": "https://api.github.com/users/wkoziej/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wkoziej/subscriptions", "organizations_url": "https://api.github.com/users/wkoziej/orgs", "repos_url": "https://api.github.com/users/wkoziej/repos", "events_url": "https://api.github.com/users/wkoziej/events{/privacy}", "received_events_url": "https://api.github.com/users/wkoziej/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}, {"id": 284285184, "node_id": "MDU6TGFiZWwyODQyODUxODQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tensorboard", "name": "comp:tensorboard", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "derekjchow", "id": 1195088, "node_id": "MDQ6VXNlcjExOTUwODg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1195088?v=4", "gravatar_id": "", "url": "https://api.github.com/users/derekjchow", "html_url": "https://github.com/derekjchow", "followers_url": "https://api.github.com/users/derekjchow/followers", "following_url": "https://api.github.com/users/derekjchow/following{/other_user}", "gists_url": "https://api.github.com/users/derekjchow/gists{/gist_id}", "starred_url": "https://api.github.com/users/derekjchow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/derekjchow/subscriptions", "organizations_url": "https://api.github.com/users/derekjchow/orgs", "repos_url": "https://api.github.com/users/derekjchow/repos", "events_url": "https://api.github.com/users/derekjchow/events{/privacy}", "received_events_url": "https://api.github.com/users/derekjchow/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "derekjchow", "id": 1195088, "node_id": "MDQ6VXNlcjExOTUwODg=", "avatar_url": "https://avatars2.githubusercontent.com/u/1195088?v=4", "gravatar_id": "", "url": "https://api.github.com/users/derekjchow", "html_url": "https://github.com/derekjchow", "followers_url": "https://api.github.com/users/derekjchow/followers", "following_url": "https://api.github.com/users/derekjchow/following{/other_user}", "gists_url": "https://api.github.com/users/derekjchow/gists{/gist_id}", "starred_url": "https://api.github.com/users/derekjchow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/derekjchow/subscriptions", "organizations_url": "https://api.github.com/users/derekjchow/orgs", "repos_url": "https://api.github.com/users/derekjchow/repos", "events_url": "https://api.github.com/users/derekjchow/events{/privacy}", "received_events_url": "https://api.github.com/users/derekjchow/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-07-07T16:03:44Z", "updated_at": "2019-10-01T21:30:04Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No. (I've prepared pipeline.config, classes.bptxt and one tfrecord\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04.01 (Linux smok 4.15.0-45-generic #48-Ubuntu SMP Tue Jan 29 16:28:13 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux) \r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below):\r\nv1.12.0-0-ga6d8ffae09 1.12.0\r\n(I've also tried b'v1.12.0-6120-gdaab2673f2' 1.13.0-dev20190116 and results are the same)\r\n- Python version: 3.5.2\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:10.0\r\n- GPU model and memory: GTX 1080Ti, RTX 2080\r\n\r\n**Describe the current behavior**\r\nI run training \r\n```\r\npython object_detection/model_main.py --pipeline_config_path=/mnt/data/environments/bag/100bboxes/pipeline.config --model_dir=/mnt/data/environments/bag/100bboxes/exp\r\n```\r\nThis is only one step training and its goal is to visualize bounding boxes in tensorboard images tam. \r\nOn the \"IMAGES\" tab in tensorboard I don't see all bounding boxes which are in the tfrecord file. \r\nOptions provided in the pipeline.config\r\n```\r\nnum_visualizations: 200                                                                                                                   \r\nmax_num_boxes_to_visualize: 200\r\n```\r\nhave no effect on this. \r\n\r\n**Describe the expected behavior**\r\nI see all bounding boxes (ground thruth) in the tensorboard>images (pictures on the right)\r\n\r\n**Code to reproduce the issue**\r\nI've created [repo](https://github.com/wkoziej/100bboxes) where you can find\r\n * pipeline.config - one step training,  the same tfrecord for training and evaluation\r\n * classes.pbtxt - two sample classes\r\n * t.tfrecord - containg two white images: one with 100 bounding boxes and second with 200 bounding boxes\r\n * notebook-images-view.png - view from notebook when I've tried visualise bboxes \r\n * tensorboard-images-view.png - tensorboard images view \r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30459", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30459/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30459/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30459/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30459", "id": 464949470, "node_id": "MDU6SXNzdWU0NjQ5NDk0NzA=", "number": 30459, "title": "Memory leak when using `tf.linalg.expm` in `tf.keras.layers.Layer`", "user": {"login": "liemonade", "id": 2351787, "node_id": "MDQ6VXNlcjIzNTE3ODc=", "avatar_url": "https://avatars3.githubusercontent.com/u/2351787?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liemonade", "html_url": "https://github.com/liemonade", "followers_url": "https://api.github.com/users/liemonade/followers", "following_url": "https://api.github.com/users/liemonade/following{/other_user}", "gists_url": "https://api.github.com/users/liemonade/gists{/gist_id}", "starred_url": "https://api.github.com/users/liemonade/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liemonade/subscriptions", "organizations_url": "https://api.github.com/users/liemonade/orgs", "repos_url": "https://api.github.com/users/liemonade/repos", "events_url": "https://api.github.com/users/liemonade/events{/privacy}", "received_events_url": "https://api.github.com/users/liemonade/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1501014628, "node_id": "MDU6TGFiZWwxNTAxMDE0NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0-rc0", "name": "TF 2.0-rc0", "color": "12ce7d", "default": false, "description": "Issues related to TF 2.0-rc0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-07-07T12:50:34Z", "updated_at": "2019-09-26T06:29:23Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code: *Yes*\r\n- OS Platform and Distribution: *Arch Linux*\r\n- TensorFlow installed from (source or binary): *Binary*\r\n- TensorFlow version (use command below): *2.0.0 Beta 1*\r\n- Python version: *3.7.3*\r\n- CUDA/cuDNN version: *10.0.130* / *7.6.0*\r\n- GPU model and memory: *Nvidia GTX 1060, 6GB*\r\n\r\n\r\n**Describe the current behavior**\r\nI'm currently working on a costum Keras Layer and need to use `tf.linalg.expm` several times. \r\nWhile training my model I noticed that my system would be out of memory after a few minutes. \r\nReducing the Layer definition step by step I noticed that the error should be related to `tf.linalg.expm`. \r\nEvery time the layers `call` method is invoked more and more memory get's allocated.\r\nReplacing `return tf.linalg.expm(X)` in the following code example with e.g. `return tf.matmal(X,X)` does not yield this extreme leak of memory.\r\n\r\n**Describe the expected behavior**\r\nThe memory allocated by an invocation of a`call` method using `tf.linalg.expm` should be freed.\r\n![Number of `call` invocations plotted against memory allocated in Gigabytes](https://user-images.githubusercontent.com/2351787/60768608-18b51480-a0c6-11e9-9d0f-baad36136cc8.png)\r\n\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n```python\r\nimport numpy as np\r\nimport tensorflow as tf\r\nimport os\r\nimport matplotlib.pyplot as plt\r\nimport psutil\r\n\r\n\r\ndef memory():\r\n    pid = os.getpid()\r\n    py = psutil.Process(pid)\r\n    memory_use = py.memory_info()[0] / 2. ** 30\r\n    return memory_use\r\n\r\nclass TestLayer(tf.keras.layers.Layer):\r\n\r\n    def __init__(self, **kwargs):\r\n        \r\n        super(TestLayer, self).__init__(**kwargs)\r\n\r\n    def build(self, input_shape):\r\n        self.s = input_shape\r\n\r\n    @tf.function\r\n    def call(self, inputs, training=None):\r\n        \r\n        X = tf.matmul(tf.transpose(inputs),inputs)\r\n        \r\n        return tf.linalg.expm(X)\r\n    \r\n\r\n\r\nS = tf.keras.Input(shape=(1,), name=\"sequence\", dtype=tf.float64)\r\nT = TestLayer()(S)\r\nmodel = tf.keras.Model(inputs=S,outputs=T)\r\ndataset = tf.data.Dataset.from_tensors(tf.constant(1)).repeat().map(lambda x: tf.ones([tf.random.uniform([1], minval=100, maxval=3000, dtype=tf.int32)[0],1],dtype=tf.float64))\r\n\r\nmemory_usage = []\r\n\r\ni = 0\r\nfor data in dataset:\r\n    s = model(data)\r\n    \r\n    memory_usage.append(memory())\r\n\r\n    if i == 1000:\r\n        break\r\n        \r\n    i = i+1\r\n    \r\nplt.figure()\r\nplt.plot(memory_usage)\r\nplt.xlabel(\"iterations\")\r\nplt.ylabel(\"memory usage\")\r\nplt.show()\r\n```\r\n\r\n**Other info / logs**\r\nWarning produced when using `tf.linalg.expm`: \r\n```\r\n    WARNING: Logging before flag parsing goes to stderr.\r\n    W0707 13:40:07.108526 139932625143616 deprecation.py:323] From /home/darvin/.conda/envs/tf2/lib/python3.7/site-packages/tensorflow/python/ops/linalg/linalg_impl.py:280: add_dispatch_support.<locals>.wrapper (from tensorflow.python.ops.array_ops) is deprecated and will be removed in a future version.\r\n    Instructions for updating:\r\n    Use tf.where in 2.0, which has the same broadcast rule as np.where\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30453", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30453/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30453/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30453/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30453", "id": 464911640, "node_id": "MDU6SXNzdWU0NjQ5MTE2NDA=", "number": 30453, "title": "[TF 2.0] categorical_column_with_vocabulary_list not usable in custom training loop", "user": {"login": "IanQS", "id": 6968573, "node_id": "MDQ6VXNlcjY5Njg1NzM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6968573?v=4", "gravatar_id": "", "url": "https://api.github.com/users/IanQS", "html_url": "https://github.com/IanQS", "followers_url": "https://api.github.com/users/IanQS/followers", "following_url": "https://api.github.com/users/IanQS/following{/other_user}", "gists_url": "https://api.github.com/users/IanQS/gists{/gist_id}", "starred_url": "https://api.github.com/users/IanQS/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/IanQS/subscriptions", "organizations_url": "https://api.github.com/users/IanQS/orgs", "repos_url": "https://api.github.com/users/IanQS/repos", "events_url": "https://api.github.com/users/IanQS/events{/privacy}", "received_events_url": "https://api.github.com/users/IanQS/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-07-07T03:45:23Z", "updated_at": "2020-01-02T10:09:06Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): MacOS\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): Source\r\n- TensorFlow version (use command below): v2.0.0-beta0-16-g1d91213fe7 2.0.0-beta1\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n**Describe the current behavior**\r\n\r\nOutside of `fit`, e.g in a custom training loop, `categorical_column_with_vocabulary_list` results in an error. I have provided a modified version of [Classifying Structured data](https://www.tensorflow.org/beta/tutorials/keras/feature_columns) which demonstrates this.\r\n\r\nThe error is `ValueError: Column dtype and SparseTensors dtype must be compatible. key: thal, column dtype: <dtype: 'string'>, tensor dtype: <dtype: 'int32'>`\r\n\r\n**Describe the expected behavior**\r\n\r\nCode runs without causing an error\r\n\r\n**Code to reproduce the issue**\r\n\r\nIt should be directly copy-paste-able \r\n\r\n```\r\nimport pandas as pd\r\nimport tensorflow as tf\r\nfrom sklearn.model_selection import train_test_split\r\n\r\n\r\ndef df_to_dataset(df, shuffle=True, batch_size=32):\r\n    df = df.copy()\r\n    labels = df.pop('target')\r\n    ds = tf.data.Dataset.from_tensor_slices(\r\n        (dict(df), labels)\r\n    )\r\n    if shuffle:\r\n        ds = ds.shuffle(buffer_size=len(df))\r\n    ds = ds.batch(batch_size)\r\n    return ds\r\n\r\n\r\ndef generate_features():\r\n    feature_columns = []\r\n    feature_layer_inputs = {}\r\n\r\n\r\n    thal = tf.feature_column.categorical_column_with_vocabulary_list(\r\n          'thal', ['fixed', 'normal', 'reversible'])\r\n    thal_one_hot = tf.feature_column.indicator_column(thal)\r\n    feature_columns.append(thal_one_hot)\r\n    feature_layer_inputs['thal'] = tf.keras.Input(shape=(1,), name='thal', dtype=tf.string)\r\n\r\n    return feature_columns, feature_layer_inputs\r\n\r\n\r\ndef create_model(feature_columns, feature_layer_inputs):\r\n    input_layer = tf.keras.layers.DenseFeatures(feature_columns)\r\n    inputs = input_layer(feature_layer_inputs)\r\n\r\n    l1 = tf.keras.layers.Dense(128, activation='relu')(inputs)\r\n    l2 = tf.keras.layers.Dense(128, activation='relu')(l1)\r\n\r\n    output = tf.keras.layers.Dense(1, activation='sigmoid')(l2)\r\n\r\n    model = tf.keras.Model(\r\n        inputs=[v for v in feature_layer_inputs.values()],\r\n        outputs=[output]\r\n    )\r\n    return model\r\n\r\n\r\ndef make_loss(loss_object):\r\n    def loss(model, x, y):\r\n        y_pred = model(x)\r\n        return loss_object(y_true=y, y_pred=y_pred)\r\n    return loss\r\n\r\n\r\ndef grad(model, inputs, targets, loss):\r\n    with tf.GradientTape() as tape:\r\n        loss_value = loss(model, inputs, targets)\r\n    return loss_value, tape.gradient(loss_value, model.trainable_variables)\r\n\r\n\r\ndef fit(epochs, train_ds, model, optimizer, loss_obj):\r\n    loss = make_loss(loss_obj)\r\n    for epoch in range(epochs):\r\n        for i, (x, y) in enumerate(train_ds):\r\n            loss_values, grad_values = grad(model, x, y, loss)\r\n            optimizer.apply_gradients(zip(grad_values, model.trainable_variables))\r\n\r\n\r\nif __name__ == '__main__':\r\n    URL = 'https://storage.googleapis.com/applied-dl/heart.csv'\r\n    df = pd.read_csv(URL)\r\n    CUSTOM_TRAINING = True\r\n\r\n    train, test = train_test_split(df, test_size=0.2)\r\n    train, val = train_test_split(train, test_size=0.2)\r\n\r\n    # hardcoded stuff\r\n    batch_size = 32\r\n    train_ds = df_to_dataset(train, batch_size=batch_size)\r\n\r\n    # Create model and features\r\n    feature_columns, feature_layer_inputs = generate_features()\r\n    model = create_model(feature_columns, feature_layer_inputs)\r\n\r\n    if CUSTOM_TRAINING:\r\n        print('Trying custom training')\r\n        bce = tf.keras.losses.BinaryCrossentropy()\r\n        adam = tf.keras.optimizers.Adam()\r\n        fit(epochs=5, train_ds=train_ds,\r\n            model=model, optimizer=adam, loss_obj=bce)\r\n    else:\r\n        print('Using pre-defined fit')\r\n        model.compile(optimizer='adam',\r\n                      loss='binary_crossentropy',\r\n                      metrics=['accuracy'])\r\n        model.fit(train_ds, epochs=5)\r\n```\r\n\r\nIf you flip the `CUSTOM_TRAINING` variable between `True` and `False` (line 72) you'll see what I mean. \r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n1) The complete (relevant) stacktrace is \r\n\r\n```\r\n  File \"/Applications/PyCharm CE.app/Contents/helpers/pydev/pydevd.py\", line 1758, in <module>\r\n    main()\r\n  File \"/Applications/PyCharm CE.app/Contents/helpers/pydev/pydevd.py\", line 1752, in main\r\n    globals = debugger.run(setup['file'], None, None, is_module)\r\n  File \"/Applications/PyCharm CE.app/Contents/helpers/pydev/pydevd.py\", line 1147, in run\r\n    pydev_imports.execfile(file, globals, locals)  # execute the script\r\n  File \"/Applications/PyCharm CE.app/Contents/helpers/pydev/_pydev_imps/_pydev_execfile.py\", line 18, in execfile\r\n    exec(compile(contents+\"\\n\", file, 'exec'), glob, loc)\r\n  File \"/Users/ian.quah/PycharmProjects/tf2/datasets/issues.py\", line 90, in <module>\r\n    model=model, optimizer=adam, loss_obj=bce)\r\n  File \"/Users/ian.quah/PycharmProjects/tf2/datasets/issues.py\", line 65, in fit\r\n    loss_values, grad_values = grad(model, x, y, loss)\r\n  File \"/Users/ian.quah/PycharmProjects/tf2/datasets/issues.py\", line 57, in grad\r\n    loss_value = loss(model, inputs, targets)\r\n  File \"/Users/ian.quah/PycharmProjects/tf2/datasets/issues.py\", line 50, in loss\r\n    y_pred = model(x)\r\n  File \"/anaconda3/envs/mlpl/lib/python3.6/site-packages/tensorflow/python/keras/engine/base_layer.py\", line 712, in __call__\r\n    outputs = self.call(inputs, *args, **kwargs)\r\n  File \"/anaconda3/envs/mlpl/lib/python3.6/site-packages/tensorflow/python/keras/engine/network.py\", line 753, in call\r\n    return self._run_internal_graph(inputs, training=training, mask=mask)\r\n  File \"/anaconda3/envs/mlpl/lib/python3.6/site-packages/tensorflow/python/keras/engine/network.py\", line 895, in _run_internal_graph\r\n    output_tensors = layer(computed_tensors, **kwargs)\r\n  File \"/anaconda3/envs/mlpl/lib/python3.6/site-packages/tensorflow/python/keras/engine/base_layer.py\", line 712, in __call__\r\n    outputs = self.call(inputs, *args, **kwargs)\r\n  File \"/anaconda3/envs/mlpl/lib/python3.6/site-packages/tensorflow/python/feature_column/feature_column_v2.py\", line 474, in call\r\n    self._state_manager)\r\n  File \"/anaconda3/envs/mlpl/lib/python3.6/site-packages/tensorflow/python/feature_column/feature_column_v2.py\", line 4299, in get_dense_tensor\r\n    return transformation_cache.get(self, state_manager)\r\n  File \"/anaconda3/envs/mlpl/lib/python3.6/site-packages/tensorflow/python/feature_column/feature_column_v2.py\", line 2562, in get\r\n    transformed = column.transform_feature(self, state_manager)\r\n  File \"/anaconda3/envs/mlpl/lib/python3.6/site-packages/tensorflow/python/feature_column/feature_column_v2.py\", line 4238, in transform_feature\r\n    transformation_cache, state_manager)\r\n  File \"/anaconda3/envs/mlpl/lib/python3.6/site-packages/tensorflow/python/feature_column/feature_column_v2.py\", line 3714, in get_sparse_tensors\r\n    transformation_cache.get(self, state_manager), None)\r\n  File \"/anaconda3/envs/mlpl/lib/python3.6/site-packages/tensorflow/python/feature_column/feature_column_v2.py\", line 2562, in get\r\n    transformed = column.transform_feature(self, state_manager)\r\n  File \"/anaconda3/envs/mlpl/lib/python3.6/site-packages/tensorflow/python/feature_column/feature_column_v2.py\", line 3692, in transform_feature\r\n    return self._transform_input_tensor(input_tensor)\r\n  File \"/anaconda3/envs/mlpl/lib/python3.6/site-packages/tensorflow/python/feature_column/feature_column_v2.py\", line 3668, in _transform_input_tensor\r\n    self.key, self.dtype, input_tensor.dtype))\r\nValueError: Column dtype and SparseTensors dtype must be compatible. key: thal, column dtype: <dtype: 'string'>, tensor dtype: <dtype: 'int32'>\r\n```\r\n\r\n2)  Placing a debugger on line 50 leads me to `feature_column_v2.py` specifically `_transform_input_tensor`\r\n\r\nThe `input_tensor` arg to `_transform_input_tensor` is \r\n\r\n```\r\nSparseTensor(indices=tf.Tensor(\r\n[[ 0  0]\r\n [ 1  0]\r\n [ 2  0]\r\n [ 3  0]\r\n [ 4  0]\r\n [ 5  0]\r\n [ 6  0]\r\n [ 7  0]\r\n [ 8  0]\r\n [ 9  0]\r\n [10  0]\r\n [11  0]\r\n [12  0]\r\n [13  0]\r\n [14  0]\r\n [15  0]\r\n [16  0]\r\n [17  0]\r\n [18  0]\r\n [19  0]\r\n [20  0]\r\n [21  0]\r\n [22  0]\r\n [23  0]\r\n [24  0]\r\n [25  0]\r\n [26  0]\r\n [27  0]\r\n [28  0]\r\n [29  0]\r\n [30  0]\r\n [31  0]], shape=(32, 2), dtype=int64), values=tf.Tensor(\r\n[49 34 58 46 59 47 55 58 41 68 62 51 61 46 39 48 37 41 51 59 51 70 60 57\r\n 54 60 52 44 65 49 44 59], shape=(32,), dtype=int32), dense_shape=tf.Tensor([32  1], shape=(2,), dtype=int64))\r\n```\r\n\r\nwhich seems strange? It's like it forgot that it had transformed those variables? "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30444", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30444/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30444/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30444/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30444", "id": 464847771, "node_id": "MDU6SXNzdWU0NjQ4NDc3NzE=", "number": 30444, "title": "ctc_* api support custom blank_index", "user": {"login": "zh794390558", "id": 3038472, "node_id": "MDQ6VXNlcjMwMzg0NzI=", "avatar_url": "https://avatars1.githubusercontent.com/u/3038472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zh794390558", "html_url": "https://github.com/zh794390558", "followers_url": "https://api.github.com/users/zh794390558/followers", "following_url": "https://api.github.com/users/zh794390558/following{/other_user}", "gists_url": "https://api.github.com/users/zh794390558/gists{/gist_id}", "starred_url": "https://api.github.com/users/zh794390558/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zh794390558/subscriptions", "organizations_url": "https://api.github.com/users/zh794390558/orgs", "repos_url": "https://api.github.com/users/zh794390558/repos", "events_url": "https://api.github.com/users/zh794390558/events{/privacy}", "received_events_url": "https://api.github.com/users/zh794390558/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-07-06T12:01:56Z", "updated_at": "2019-07-15T19:02:02Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "since `ctc_loss_v2(labels, logits, label_length, logit_length, logits_time_major=True, unique=None, blank_index=None, name=None) ` has supporting `blank_index`,  I think the `ctc_greed_decode_v2` and `ctc_beam_search_decode_v2` also should support it."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30438", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30438/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30438/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30438/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30438", "id": 464641671, "node_id": "MDU6SXNzdWU0NjQ2NDE2NzE=", "number": 30438, "title": "Calibration with Post-training quantization fails on networks that have multiple placeholders", "user": {"login": "kmonachopoulos", "id": 3832904, "node_id": "MDQ6VXNlcjM4MzI5MDQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/3832904?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kmonachopoulos", "html_url": "https://github.com/kmonachopoulos", "followers_url": "https://api.github.com/users/kmonachopoulos/followers", "following_url": "https://api.github.com/users/kmonachopoulos/following{/other_user}", "gists_url": "https://api.github.com/users/kmonachopoulos/gists{/gist_id}", "starred_url": "https://api.github.com/users/kmonachopoulos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kmonachopoulos/subscriptions", "organizations_url": "https://api.github.com/users/kmonachopoulos/orgs", "repos_url": "https://api.github.com/users/kmonachopoulos/repos", "events_url": "https://api.github.com/users/kmonachopoulos/events{/privacy}", "received_events_url": "https://api.github.com/users/kmonachopoulos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097545273, "node_id": "MDU6TGFiZWwxMDk3NTQ1Mjcz", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:grappler", "name": "comp:grappler", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jianlijianli", "id": 43797323, "node_id": "MDQ6VXNlcjQzNzk3MzIz", "avatar_url": "https://avatars3.githubusercontent.com/u/43797323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jianlijianli", "html_url": "https://github.com/jianlijianli", "followers_url": "https://api.github.com/users/jianlijianli/followers", "following_url": "https://api.github.com/users/jianlijianli/following{/other_user}", "gists_url": "https://api.github.com/users/jianlijianli/gists{/gist_id}", "starred_url": "https://api.github.com/users/jianlijianli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jianlijianli/subscriptions", "organizations_url": "https://api.github.com/users/jianlijianli/orgs", "repos_url": "https://api.github.com/users/jianlijianli/repos", "events_url": "https://api.github.com/users/jianlijianli/events{/privacy}", "received_events_url": "https://api.github.com/users/jianlijianli/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jianlijianli", "id": 43797323, "node_id": "MDQ6VXNlcjQzNzk3MzIz", "avatar_url": "https://avatars3.githubusercontent.com/u/43797323?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jianlijianli", "html_url": "https://github.com/jianlijianli", "followers_url": "https://api.github.com/users/jianlijianli/followers", "following_url": "https://api.github.com/users/jianlijianli/following{/other_user}", "gists_url": "https://api.github.com/users/jianlijianli/gists{/gist_id}", "starred_url": "https://api.github.com/users/jianlijianli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jianlijianli/subscriptions", "organizations_url": "https://api.github.com/users/jianlijianli/orgs", "repos_url": "https://api.github.com/users/jianlijianli/repos", "events_url": "https://api.github.com/users/jianlijianli/events{/privacy}", "received_events_url": "https://api.github.com/users/jianlijianli/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-07-05T13:29:08Z", "updated_at": "2019-07-24T06:36:00Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: -\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: Python 3.5.2\r\n- Bazel version (if compiling from source): -\r\n- GCC/Compiler version (if compiling from source): -\r\n- CUDA/cuDNN version: -\r\n- GPU model and memory: -\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\nI am trying to use post-training quantisation with a calibration data-set to capture the activation ranges. The network is an unrolled lstm-based model. This model has multiple placeholders (3 ph) and the post-training quantisation process breaks because of that.\r\n\r\n**Describe the expected behavior**\r\n\r\nIt is expected the post-training quantisation method to accept networks with multiple placeholders. Trying the same code as below in other networks that has only one placeholder works as expected (although the reference implementations of quantise/de-quantise which are located at the beginning and at the end of the network is extremely slow, but this is another issue).\r\n\r\n**Code to reproduce the issue**\r\n```\r\ndef representative_dataset_gen():\r\n    for _ in range(1):\r\n        input_node = np.array(np.random.rand(1,16,19,26), dtype=np.float32)\r\n        new_state_c = np.array(np.random.rand(1,2048), dtype=np.float32)\r\n        new_state_h = np.array(np.random.rand(1,2048), dtype=np.float32)\r\n        yield [input_node,new_state_c,new_state_h]\r\n```\r\n\r\n```\r\ndef load_graph_and_post_train():\r\n\r\n    converter = tf.lite.TFLiteConverter.from_frozen_graph(args.graph, \r\n        input_arrays=[ \"input_node\",\"previous_state_c\",\"previous_state_h\" ], \r\n        output_arrays=[\"logits\"], \r\n        input_shapes={\"input_node\": [1,16,19,26], \"previous_state_c\":[1,2048], \"previous_state_h\":[1,2048]} )\r\n\r\n    converter.optimizations = [tf.lite.Optimize.DEFAULT]\r\n    converter.representative_dataset = representative_dataset_gen\r\n\r\n    tflite_quant_model = converter.convert()\r\n    open(\"./models/post_train_calibration_model.tflite\", \"wb\").write(tflite_quant_model)\r\n\r\nif __name__ == '__main__':\r\n    parser = ArgumentParser(description='post-training quantisation')\r\n    parser.add_argument('-graph', required=True, type=str, help='The pb model')\r\n    args = parser.parse_args()\r\n    load_graph_and_post_train()\r\n```\r\n\r\n\r\n**Other info / logs**\r\n2019-07-05 14:03:13.996584: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-07-05 14:03:14.003163: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 3192860000 Hz\r\n2019-07-05 14:03:14.007918: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x6b0b650 executing computations on platform Host. Devices:\r\n2019-07-05 14:03:14.007953: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): <undefined>, <undefined>\r\nWARNING: Logging before flag parsing goes to stderr.\r\nW0705 14:03:15.397149 140670832994048 deprecation_wrapper.py:119] From post-trainin-quantisation-calib.py:96: The name tf.logging.set_verbosity is deprecated. Please use tf.compat.v1.logging.set_verbosity instead.\r\n\r\nW0705 14:03:15.397516 140670832994048 deprecation_wrapper.py:119] From post-trainin-quantisation-calib.py:96: The name tf.logging.INFO is deprecated. Please use tf.compat.v1.logging.INFO instead.\r\n\r\n2019-07-05 14:03:15.401800: I tensorflow/core/grappler/devices.cc:60] Number of eligible GPUs (core count >= 8, compute capability >= 0.0): 0 (Note: TensorFlow was not compiled with CUDA support)\r\n2019-07-05 14:03:15.401952: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\r\n2019-07-05 14:03:31.757150: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:716] Optimization results for grappler item: graph_to_optimize\r\n2019-07-05 14:03:31.757222: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   constant folding: Graph size after: 388 nodes (-14), 510 edges (-14), time = 10271.6318ms.\r\n2019-07-05 14:03:31.757235: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   constant folding: Graph size after: 388 nodes (0), 510 edges (0), time = 5687.64893ms.\r\nINFO: Initialized TensorFlow Lite runtime.\r\nterminate called after throwing an instance of 'std::out_of_range'\r\n  what():  _Map_base::at\r\nAbort (core dumped)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30437", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30437/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30437/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30437/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30437", "id": 464629081, "node_id": "MDU6SXNzdWU0NjQ2MjkwODE=", "number": 30437, "title": "Remove \"global_step\" in usage example of CosineDecay and other related classes", "user": {"login": "vsuryamurthy", "id": 6622378, "node_id": "MDQ6VXNlcjY2MjIzNzg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6622378?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vsuryamurthy", "html_url": "https://github.com/vsuryamurthy", "followers_url": "https://api.github.com/users/vsuryamurthy/followers", "following_url": "https://api.github.com/users/vsuryamurthy/following{/other_user}", "gists_url": "https://api.github.com/users/vsuryamurthy/gists{/gist_id}", "starred_url": "https://api.github.com/users/vsuryamurthy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vsuryamurthy/subscriptions", "organizations_url": "https://api.github.com/users/vsuryamurthy/orgs", "repos_url": "https://api.github.com/users/vsuryamurthy/repos", "events_url": "https://api.github.com/users/vsuryamurthy/events{/privacy}", "received_events_url": "https://api.github.com/users/vsuryamurthy/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-07-05T12:56:59Z", "updated_at": "2019-07-09T18:08:34Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "Thank you for submitting a TensorFlow documentation issue. Per our GitHub\r\npolicy, we only address code/doc bugs, performance issues, feature requests, and\r\nbuild/installation issues on GitHub.\r\n\r\nThe TensorFlow docs are open source! To get involved, read the documentation\r\ncontributor guide: https://www.tensorflow.org/community/contribute/docs\r\n\r\n## URL(s) with the issue:\r\n\r\nhttps://github.com/tensorflow/tensorflow/blob/r1.14/tensorflow/python/keras/optimizer_v2/learning_rate_schedule.py\r\n\r\n## Description of issue (what needs changing):\r\nUsage example of CosineDecay, CosineDecayRestarts, LinearCosineDecay, NoisyLinearCosineDecay takes a parameter \"global_step\" which does not correspond to the definition. \r\n\r\n### Clear description\r\n\r\nThe script defines the various learning rate decay classes used for network training.\r\n\r\n### Usage example\r\n\r\nThere is a usage example. However, it does not correspond to the definition. \r\n\r\n### Submit a pull request?\r\n\r\nI can if required\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30433", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30433/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30433/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30433/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30433", "id": 464591402, "node_id": "MDU6SXNzdWU0NjQ1OTE0MDI=", "number": 30433, "title": "Unable to build micro_speech for bluepill target (region `FLASH' overflowed by 9656 bytes)", "user": {"login": "KBacsa", "id": 32411643, "node_id": "MDQ6VXNlcjMyNDExNjQz", "avatar_url": "https://avatars2.githubusercontent.com/u/32411643?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KBacsa", "html_url": "https://github.com/KBacsa", "followers_url": "https://api.github.com/users/KBacsa/followers", "following_url": "https://api.github.com/users/KBacsa/following{/other_user}", "gists_url": "https://api.github.com/users/KBacsa/gists{/gist_id}", "starred_url": "https://api.github.com/users/KBacsa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KBacsa/subscriptions", "organizations_url": "https://api.github.com/users/KBacsa/orgs", "repos_url": "https://api.github.com/users/KBacsa/repos", "events_url": "https://api.github.com/users/KBacsa/events{/privacy}", "received_events_url": "https://api.github.com/users/KBacsa/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "petewarden", "id": 161459, "node_id": "MDQ6VXNlcjE2MTQ1OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/161459?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petewarden", "html_url": "https://github.com/petewarden", "followers_url": "https://api.github.com/users/petewarden/followers", "following_url": "https://api.github.com/users/petewarden/following{/other_user}", "gists_url": "https://api.github.com/users/petewarden/gists{/gist_id}", "starred_url": "https://api.github.com/users/petewarden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petewarden/subscriptions", "organizations_url": "https://api.github.com/users/petewarden/orgs", "repos_url": "https://api.github.com/users/petewarden/repos", "events_url": "https://api.github.com/users/petewarden/events{/privacy}", "received_events_url": "https://api.github.com/users/petewarden/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-07-05T11:12:29Z", "updated_at": "2019-07-10T06:38:03Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- TensorFlow version: r1.14\r\n- Python version:\r\n- GCC/Compiler version (if compiling from source):\r\narm-none-eabi-gcc (15:4.9.3+svn231177-1) 4.9.3 20150529 (prerelease)\r\narm-none-eabi-g++ (15:4.9.3+svn231177-1) 4.9.3 20150529 (prerelease)\r\n\r\n**Describe the problem**\r\nI am unable to generate the binary for micro_speech_bin. The error log says that the FLASH memory is not big enough. I have had a similar issue with different build tests. If I increase the size of the FLASH memory (say to 90K), the executables and .bin can be generated and tested with renode. However, these can now not be ported to the Blue Pill development board (I assume, our dev board has not arrived yet).\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n```make -f tensorflow/lite/experimental/micro/tools/make/Makefile TARGET=bluepill micro_speech_bin```\r\n\r\n**Any other info / logs**\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/main.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/main.o\r\nIn file included from ./tensorflow/lite/core/api/op_resolver.h:20:0,\r\n                 from ./tensorflow/lite/experimental/micro/micro_mutable_op_resolver.h:18,\r\n                 from ./tensorflow/lite/experimental/micro/kernels/all_ops_resolver.h:16,\r\n                 from tensorflow/lite/experimental/micro/examples/micro_speech/main.cc:22:\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameTensorType(tflite::TensorType)':\r\n./tensorflow/lite/schema/schema_generated.h:374:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < TensorType_FLOAT32 || e > TensorType_INT8) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameQuantizationDetails(tflite::QuantizationDetails)':\r\n./tensorflow/lite/schema/schema_generated.h:404:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < QuantizationDetails_NONE || e > QuantizationDetails_CustomQuantization) return \"\";\r\n         ^\r\nIn file included from ./tensorflow/lite/core/api/op_resolver.h:20:0,\r\n                 from ./tensorflow/lite/experimental/micro/micro_mutable_op_resolver.h:18,\r\n                 from ./tensorflow/lite/experimental/micro/kernels/all_ops_resolver.h:16,\r\n                 from tensorflow/lite/experimental/micro/examples/micro_speech/main.cc:22:\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameBuiltinOperator(tflite::BuiltinOperator)':\r\n./tensorflow/lite/schema/schema_generated.h:833:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < BuiltinOperator_ADD || e > BuiltinOperator_HARD_SWISH) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameBuiltinOptions(tflite::BuiltinOptions)':\r\n./tensorflow/lite/schema/schema_generated.h:1133:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < BuiltinOptions_NONE || e > BuiltinOptions_HardSwishOptions) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNamePadding(tflite::Padding)':\r\n./tensorflow/lite/schema/schema_generated.h:2296:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < Padding_SAME || e > Padding_VALID) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameActivationFunctionType(tflite::ActivationFunctionType)':\r\n./tensorflow/lite/schema/schema_generated.h:2338:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < ActivationFunctionType_NONE || e > ActivationFunctionType_SIGN_BIT) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameLSHProjectionType(tflite::LSHProjectionType)':\r\n./tensorflow/lite/schema/schema_generated.h:2371:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < LSHProjectionType_UNKNOWN || e > LSHProjectionType_DENSE) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameFullyConnectedOptionsWeightsFormat(tflite::FullyConnectedOptionsWeightsFormat)':\r\n./tensorflow/lite/schema/schema_generated.h:2401:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < FullyConnectedOptionsWeightsFormat_DEFAULT || e > FullyConnectedOptionsWeightsFormat_SHUFFLED4x16INT8) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameLSTMKernelType(tflite::LSTMKernelType)':\r\n./tensorflow/lite/schema/schema_generated.h:2431:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < LSTMKernelType_FULL || e > LSTMKernelType_BASIC) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameCombinerType(tflite::CombinerType)':\r\n./tensorflow/lite/schema/schema_generated.h:2464:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < CombinerType_SUM || e > CombinerType_SQRTN) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameMirrorPadMode(tflite::MirrorPadMode)':\r\n./tensorflow/lite/schema/schema_generated.h:2494:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < MirrorPadMode_REFLECT || e > MirrorPadMode_SYMMETRIC) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameCustomOptionsFormat(tflite::CustomOptionsFormat)':\r\n./tensorflow/lite/schema/schema_generated.h:2521:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < CustomOptionsFormat_FLEXBUFFERS || e > CustomOptionsFormat_FLEXBUFFERS) return \"\";\r\n         ^\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/audio_provider.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/audio_provider.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/feature_provider.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/feature_provider.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/no_micro_features_data.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/no_micro_features_data.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/yes_micro_features_data.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/yes_micro_features_data.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/tiny_conv_micro_features_model_data.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/tiny_conv_micro_features_model_data.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/recognize_commands.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/recognize_commands.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/command_responder.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/command_responder.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/micro_features_generator.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/micro_features_generator.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/micro_model_settings.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/micro_model_settings.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/fft.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/fft.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/fft_util.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/fft_util.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/filterbank.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/filterbank.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/filterbank_util.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/filterbank_util.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/frontend.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/frontend.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/frontend_util.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/frontend_util.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/log_lut.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/log_lut.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/log_scale.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/log_scale.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/log_scale_util.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/log_scale_util.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/noise_reduction.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/noise_reduction.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/noise_reduction_util.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/noise_reduction_util.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/pcan_gain_control.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/pcan_gain_control.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/pcan_gain_control_util.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/pcan_gain_control_util.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/window.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/window.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/window_util.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/window_util.o\r\narm-none-eabi-gcc -DNDEBUG -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/tools/make/downloads/kissfft/kiss_fft.c -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/tools/make/downloads/kissfft/kiss_fft.o\r\ncc1: warning: command line option '-std=gnu++11' is valid for C++/ObjC++ but not for C\r\ncc1: warning: command line option '-fno-rtti' is valid for C++/ObjC++ but not for C\r\ncc1: warning: command line option '-fpermissive' is valid for C++/ObjC++ but not for C\r\narm-none-eabi-gcc -DNDEBUG -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/tools/make/downloads/kissfft/tools/kiss_fftr.c -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/tools/make/downloads/kissfft/tools/kiss_fftr.o\r\ncc1: warning: command line option '-std=gnu++11' is valid for C++/ObjC++ but not for C\r\ncc1: warning: command line option '-fno-rtti' is valid for C++/ObjC++ but not for C\r\ncc1: warning: command line option '-fpermissive' is valid for C++/ObjC++ but not for C\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/micro_error_reporter.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/micro_error_reporter.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/micro_mutable_op_resolver.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/micro_mutable_op_resolver.o\r\nIn file included from ./tensorflow/lite/core/api/op_resolver.h:20:0,\r\n                 from ./tensorflow/lite/experimental/micro/micro_mutable_op_resolver.h:18,\r\n                 from tensorflow/lite/experimental/micro/micro_mutable_op_resolver.cc:16:\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameTensorType(tflite::TensorType)':\r\n./tensorflow/lite/schema/schema_generated.h:374:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < TensorType_FLOAT32 || e > TensorType_INT8) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameQuantizationDetails(tflite::QuantizationDetails)':\r\n./tensorflow/lite/schema/schema_generated.h:404:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < QuantizationDetails_NONE || e > QuantizationDetails_CustomQuantization) return \"\";\r\n         ^\r\nIn file included from ./tensorflow/lite/core/api/op_resolver.h:20:0,\r\n                 from ./tensorflow/lite/experimental/micro/micro_mutable_op_resolver.h:18,\r\n                 from tensorflow/lite/experimental/micro/micro_mutable_op_resolver.cc:16:\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameBuiltinOperator(tflite::BuiltinOperator)':\r\n./tensorflow/lite/schema/schema_generated.h:833:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < BuiltinOperator_ADD || e > BuiltinOperator_HARD_SWISH) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameBuiltinOptions(tflite::BuiltinOptions)':\r\n./tensorflow/lite/schema/schema_generated.h:1133:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < BuiltinOptions_NONE || e > BuiltinOptions_HardSwishOptions) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNamePadding(tflite::Padding)':\r\n./tensorflow/lite/schema/schema_generated.h:2296:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < Padding_SAME || e > Padding_VALID) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameActivationFunctionType(tflite::ActivationFunctionType)':\r\n./tensorflow/lite/schema/schema_generated.h:2338:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < ActivationFunctionType_NONE || e > ActivationFunctionType_SIGN_BIT) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameLSHProjectionType(tflite::LSHProjectionType)':\r\n./tensorflow/lite/schema/schema_generated.h:2371:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < LSHProjectionType_UNKNOWN || e > LSHProjectionType_DENSE) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameFullyConnectedOptionsWeightsFormat(tflite::FullyConnectedOptionsWeightsFormat)':\r\n./tensorflow/lite/schema/schema_generated.h:2401:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < FullyConnectedOptionsWeightsFormat_DEFAULT || e > FullyConnectedOptionsWeightsFormat_SHUFFLED4x16INT8) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameLSTMKernelType(tflite::LSTMKernelType)':\r\n./tensorflow/lite/schema/schema_generated.h:2431:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < LSTMKernelType_FULL || e > LSTMKernelType_BASIC) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameCombinerType(tflite::CombinerType)':\r\n./tensorflow/lite/schema/schema_generated.h:2464:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < CombinerType_SUM || e > CombinerType_SQRTN) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameMirrorPadMode(tflite::MirrorPadMode)':\r\n./tensorflow/lite/schema/schema_generated.h:2494:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < MirrorPadMode_REFLECT || e > MirrorPadMode_SYMMETRIC) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameCustomOptionsFormat(tflite::CustomOptionsFormat)':\r\n./tensorflow/lite/schema/schema_generated.h:2521:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < CustomOptionsFormat_FLEXBUFFERS || e > CustomOptionsFormat_FLEXBUFFERS) return \"\";\r\n         ^\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/simple_tensor_allocator.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/simple_tensor_allocator.o\r\nIn file included from ./tensorflow/lite/experimental/micro/simple_tensor_allocator.h:21:0,\r\n                 from tensorflow/lite/experimental/micro/simple_tensor_allocator.cc:16:\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameTensorType(tflite::TensorType)':\r\n./tensorflow/lite/schema/schema_generated.h:374:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < TensorType_FLOAT32 || e > TensorType_INT8) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameQuantizationDetails(tflite::QuantizationDetails)':\r\n./tensorflow/lite/schema/schema_generated.h:404:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < QuantizationDetails_NONE || e > QuantizationDetails_CustomQuantization) return \"\";\r\n         ^\r\nIn file included from ./tensorflow/lite/experimental/micro/simple_tensor_allocator.h:21:0,\r\n                 from tensorflow/lite/experimental/micro/simple_tensor_allocator.cc:16:\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameBuiltinOperator(tflite::BuiltinOperator)':\r\n./tensorflow/lite/schema/schema_generated.h:833:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < BuiltinOperator_ADD || e > BuiltinOperator_HARD_SWISH) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameBuiltinOptions(tflite::BuiltinOptions)':\r\n./tensorflow/lite/schema/schema_generated.h:1133:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < BuiltinOptions_NONE || e > BuiltinOptions_HardSwishOptions) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNamePadding(tflite::Padding)':\r\n./tensorflow/lite/schema/schema_generated.h:2296:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < Padding_SAME || e > Padding_VALID) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameActivationFunctionType(tflite::ActivationFunctionType)':\r\n./tensorflow/lite/schema/schema_generated.h:2338:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < ActivationFunctionType_NONE || e > ActivationFunctionType_SIGN_BIT) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameLSHProjectionType(tflite::LSHProjectionType)':\r\n./tensorflow/lite/schema/schema_generated.h:2371:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < LSHProjectionType_UNKNOWN || e > LSHProjectionType_DENSE) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameFullyConnectedOptionsWeightsFormat(tflite::FullyConnectedOptionsWeightsFormat)':\r\n./tensorflow/lite/schema/schema_generated.h:2401:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < FullyConnectedOptionsWeightsFormat_DEFAULT || e > FullyConnectedOptionsWeightsFormat_SHUFFLED4x16INT8) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameLSTMKernelType(tflite::LSTMKernelType)':\r\n./tensorflow/lite/schema/schema_generated.h:2431:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < LSTMKernelType_FULL || e > LSTMKernelType_BASIC) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameCombinerType(tflite::CombinerType)':\r\n./tensorflow/lite/schema/schema_generated.h:2464:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < CombinerType_SUM || e > CombinerType_SQRTN) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameMirrorPadMode(tflite::MirrorPadMode)':\r\n./tensorflow/lite/schema/schema_generated.h:2494:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < MirrorPadMode_REFLECT || e > MirrorPadMode_SYMMETRIC) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameCustomOptionsFormat(tflite::CustomOptionsFormat)':\r\n./tensorflow/lite/schema/schema_generated.h:2521:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < CustomOptionsFormat_FLEXBUFFERS || e > CustomOptionsFormat_FLEXBUFFERS) return \"\";\r\n         ^\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/bluepill/debug_log.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/bluepill/debug_log.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/debug_log_numbers.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/debug_log_numbers.o\r\ntensorflow/lite/experimental/micro/debug_log_numbers.cc: In function 'char* {anonymous}::FastFloatToBufferLeft(float, char*)':\r\ntensorflow/lite/experimental/micro/debug_log_numbers.cc:117:53: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing]\r\n   const uint32_t u = *reinterpret_cast<uint32_t*>(&f);\r\n                                                     ^\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/micro_interpreter.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/micro_interpreter.o\r\nIn file included from ./tensorflow/lite/core/api/op_resolver.h:20:0,\r\n                 from ./tensorflow/lite/experimental/micro/micro_interpreter.h:20,\r\n                 from tensorflow/lite/experimental/micro/micro_interpreter.cc:15:\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameTensorType(tflite::TensorType)':\r\n./tensorflow/lite/schema/schema_generated.h:374:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < TensorType_FLOAT32 || e > TensorType_INT8) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameQuantizationDetails(tflite::QuantizationDetails)':\r\n./tensorflow/lite/schema/schema_generated.h:404:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < QuantizationDetails_NONE || e > QuantizationDetails_CustomQuantization) return \"\";\r\n         ^\r\nIn file included from ./tensorflow/lite/core/api/op_resolver.h:20:0,\r\n                 from ./tensorflow/lite/experimental/micro/micro_interpreter.h:20,\r\n                 from tensorflow/lite/experimental/micro/micro_interpreter.cc:15:\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameBuiltinOperator(tflite::BuiltinOperator)':\r\n./tensorflow/lite/schema/schema_generated.h:833:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < BuiltinOperator_ADD || e > BuiltinOperator_HARD_SWISH) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameBuiltinOptions(tflite::BuiltinOptions)':\r\n./tensorflow/lite/schema/schema_generated.h:1133:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < BuiltinOptions_NONE || e > BuiltinOptions_HardSwishOptions) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNamePadding(tflite::Padding)':\r\n./tensorflow/lite/schema/schema_generated.h:2296:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < Padding_SAME || e > Padding_VALID) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameActivationFunctionType(tflite::ActivationFunctionType)':\r\n./tensorflow/lite/schema/schema_generated.h:2338:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < ActivationFunctionType_NONE || e > ActivationFunctionType_SIGN_BIT) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameLSHProjectionType(tflite::LSHProjectionType)':\r\n./tensorflow/lite/schema/schema_generated.h:2371:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < LSHProjectionType_UNKNOWN || e > LSHProjectionType_DENSE) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameFullyConnectedOptionsWeightsFormat(tflite::FullyConnectedOptionsWeightsFormat)':\r\n./tensorflow/lite/schema/schema_generated.h:2401:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < FullyConnectedOptionsWeightsFormat_DEFAULT || e > FullyConnectedOptionsWeightsFormat_SHUFFLED4x16INT8) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameLSTMKernelType(tflite::LSTMKernelType)':\r\n./tensorflow/lite/schema/schema_generated.h:2431:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < LSTMKernelType_FULL || e > LSTMKernelType_BASIC) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameCombinerType(tflite::CombinerType)':\r\n./tensorflow/lite/schema/schema_generated.h:2464:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < CombinerType_SUM || e > CombinerType_SQRTN) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameMirrorPadMode(tflite::MirrorPadMode)':\r\n./tensorflow/lite/schema/schema_generated.h:2494:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < MirrorPadMode_REFLECT || e > MirrorPadMode_SYMMETRIC) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameCustomOptionsFormat(tflite::CustomOptionsFormat)':\r\n./tensorflow/lite/schema/schema_generated.h:2521:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < CustomOptionsFormat_FLEXBUFFERS || e > CustomOptionsFormat_FLEXBUFFERS) return \"\";\r\n         ^\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/kernels/depthwise_conv.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/kernels/depthwise_conv.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/kernels/pooling.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/kernels/pooling.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/kernels/softmax.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/kernels/softmax.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/kernels/conv.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/kernels/conv.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/kernels/elementwise.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/kernels/elementwise.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/kernels/all_ops_resolver.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/kernels/all_ops_resolver.o\r\nIn file included from ./tensorflow/lite/core/api/op_resolver.h:20:0,\r\n                 from ./tensorflow/lite/experimental/micro/micro_mutable_op_resolver.h:18,\r\n                 from ./tensorflow/lite/experimental/micro/kernels/all_ops_resolver.h:16,\r\n                 from tensorflow/lite/experimental/micro/kernels/all_ops_resolver.cc:13:\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameTensorType(tflite::TensorType)':\r\n./tensorflow/lite/schema/schema_generated.h:374:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < TensorType_FLOAT32 || e > TensorType_INT8) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameQuantizationDetails(tflite::QuantizationDetails)':\r\n./tensorflow/lite/schema/schema_generated.h:404:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < QuantizationDetails_NONE || e > QuantizationDetails_CustomQuantization) return \"\";\r\n         ^\r\nIn file included from ./tensorflow/lite/core/api/op_resolver.h:20:0,\r\n                 from ./tensorflow/lite/experimental/micro/micro_mutable_op_resolver.h:18,\r\n                 from ./tensorflow/lite/experimental/micro/kernels/all_ops_resolver.h:16,\r\n                 from tensorflow/lite/experimental/micro/kernels/all_ops_resolver.cc:13:\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameBuiltinOperator(tflite::BuiltinOperator)':\r\n./tensorflow/lite/schema/schema_generated.h:833:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < BuiltinOperator_ADD || e > BuiltinOperator_HARD_SWISH) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameBuiltinOptions(tflite::BuiltinOptions)':\r\n./tensorflow/lite/schema/schema_generated.h:1133:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < BuiltinOptions_NONE || e > BuiltinOptions_HardSwishOptions) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNamePadding(tflite::Padding)':\r\n./tensorflow/lite/schema/schema_generated.h:2296:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < Padding_SAME || e > Padding_VALID) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameActivationFunctionType(tflite::ActivationFunctionType)':\r\n./tensorflow/lite/schema/schema_generated.h:2338:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < ActivationFunctionType_NONE || e > ActivationFunctionType_SIGN_BIT) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameLSHProjectionType(tflite::LSHProjectionType)':\r\n./tensorflow/lite/schema/schema_generated.h:2371:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < LSHProjectionType_UNKNOWN || e > LSHProjectionType_DENSE) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameFullyConnectedOptionsWeightsFormat(tflite::FullyConnectedOptionsWeightsFormat)':\r\n./tensorflow/lite/schema/schema_generated.h:2401:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < FullyConnectedOptionsWeightsFormat_DEFAULT || e > FullyConnectedOptionsWeightsFormat_SHUFFLED4x16INT8) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameLSTMKernelType(tflite::LSTMKernelType)':\r\n./tensorflow/lite/schema/schema_generated.h:2431:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < LSTMKernelType_FULL || e > LSTMKernelType_BASIC) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameCombinerType(tflite::CombinerType)':\r\n./tensorflow/lite/schema/schema_generated.h:2464:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < CombinerType_SUM || e > CombinerType_SQRTN) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameMirrorPadMode(tflite::MirrorPadMode)':\r\n./tensorflow/lite/schema/schema_generated.h:2494:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < MirrorPadMode_REFLECT || e > MirrorPadMode_SYMMETRIC) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameCustomOptionsFormat(tflite::CustomOptionsFormat)':\r\n./tensorflow/lite/schema/schema_generated.h:2521:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < CustomOptionsFormat_FLEXBUFFERS || e > CustomOptionsFormat_FLEXBUFFERS) return \"\";\r\n         ^\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/kernels/fully_connected.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/kernels/fully_connected.o\r\narm-none-eabi-gcc -DNDEBUG -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/c/c_api_internal.c -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/c/c_api_internal.o\r\ncc1: warning: command line option '-std=gnu++11' is valid for C++/ObjC++ but not for C\r\ncc1: warning: command line option '-fno-rtti' is valid for C++/ObjC++ but not for C\r\ncc1: warning: command line option '-fpermissive' is valid for C++/ObjC++ but not for C\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/core/api/error_reporter.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/core/api/error_reporter.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/core/api/flatbuffer_conversions.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/core/api/flatbuffer_conversions.o\r\nIn file included from ./tensorflow/lite/core/api/op_resolver.h:20:0,\r\n                 from ./tensorflow/lite/core/api/flatbuffer_conversions.h:24,\r\n                 from tensorflow/lite/core/api/flatbuffer_conversions.cc:16:\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameTensorType(tflite::TensorType)':\r\n./tensorflow/lite/schema/schema_generated.h:374:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < TensorType_FLOAT32 || e > TensorType_INT8) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameQuantizationDetails(tflite::QuantizationDetails)':\r\n./tensorflow/lite/schema/schema_generated.h:404:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < QuantizationDetails_NONE || e > QuantizationDetails_CustomQuantization) return \"\";\r\n         ^\r\nIn file included from ./tensorflow/lite/core/api/op_resolver.h:20:0,\r\n                 from ./tensorflow/lite/core/api/flatbuffer_conversions.h:24,\r\n                 from tensorflow/lite/core/api/flatbuffer_conversions.cc:16:\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameBuiltinOperator(tflite::BuiltinOperator)':\r\n./tensorflow/lite/schema/schema_generated.h:833:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < BuiltinOperator_ADD || e > BuiltinOperator_HARD_SWISH) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameBuiltinOptions(tflite::BuiltinOptions)':\r\n./tensorflow/lite/schema/schema_generated.h:1133:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < BuiltinOptions_NONE || e > BuiltinOptions_HardSwishOptions) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNamePadding(tflite::Padding)':\r\n./tensorflow/lite/schema/schema_generated.h:2296:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < Padding_SAME || e > Padding_VALID) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameActivationFunctionType(tflite::ActivationFunctionType)':\r\n./tensorflow/lite/schema/schema_generated.h:2338:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < ActivationFunctionType_NONE || e > ActivationFunctionType_SIGN_BIT) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameLSHProjectionType(tflite::LSHProjectionType)':\r\n./tensorflow/lite/schema/schema_generated.h:2371:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < LSHProjectionType_UNKNOWN || e > LSHProjectionType_DENSE) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameFullyConnectedOptionsWeightsFormat(tflite::FullyConnectedOptionsWeightsFormat)':\r\n./tensorflow/lite/schema/schema_generated.h:2401:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < FullyConnectedOptionsWeightsFormat_DEFAULT || e > FullyConnectedOptionsWeightsFormat_SHUFFLED4x16INT8) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameLSTMKernelType(tflite::LSTMKernelType)':\r\n./tensorflow/lite/schema/schema_generated.h:2431:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < LSTMKernelType_FULL || e > LSTMKernelType_BASIC) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameCombinerType(tflite::CombinerType)':\r\n./tensorflow/lite/schema/schema_generated.h:2464:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < CombinerType_SUM || e > CombinerType_SQRTN) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameMirrorPadMode(tflite::MirrorPadMode)':\r\n./tensorflow/lite/schema/schema_generated.h:2494:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < MirrorPadMode_REFLECT || e > MirrorPadMode_SYMMETRIC) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameCustomOptionsFormat(tflite::CustomOptionsFormat)':\r\n./tensorflow/lite/schema/schema_generated.h:2521:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < CustomOptionsFormat_FLEXBUFFERS || e > CustomOptionsFormat_FLEXBUFFERS) return \"\";\r\n         ^\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/core/api/op_resolver.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/core/api/op_resolver.o\r\nIn file included from ./tensorflow/lite/core/api/op_resolver.h:20:0,\r\n                 from tensorflow/lite/core/api/op_resolver.cc:16:\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameTensorType(tflite::TensorType)':\r\n./tensorflow/lite/schema/schema_generated.h:374:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < TensorType_FLOAT32 || e > TensorType_INT8) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameQuantizationDetails(tflite::QuantizationDetails)':\r\n./tensorflow/lite/schema/schema_generated.h:404:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < QuantizationDetails_NONE || e > QuantizationDetails_CustomQuantization) return \"\";\r\n         ^\r\nIn file included from ./tensorflow/lite/core/api/op_resolver.h:20:0,\r\n                 from tensorflow/lite/core/api/op_resolver.cc:16:\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameBuiltinOperator(tflite::BuiltinOperator)':\r\n./tensorflow/lite/schema/schema_generated.h:833:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < BuiltinOperator_ADD || e > BuiltinOperator_HARD_SWISH) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameBuiltinOptions(tflite::BuiltinOptions)':\r\n./tensorflow/lite/schema/schema_generated.h:1133:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < BuiltinOptions_NONE || e > BuiltinOptions_HardSwishOptions) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNamePadding(tflite::Padding)':\r\n./tensorflow/lite/schema/schema_generated.h:2296:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < Padding_SAME || e > Padding_VALID) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameActivationFunctionType(tflite::ActivationFunctionType)':\r\n./tensorflow/lite/schema/schema_generated.h:2338:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < ActivationFunctionType_NONE || e > ActivationFunctionType_SIGN_BIT) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameLSHProjectionType(tflite::LSHProjectionType)':\r\n./tensorflow/lite/schema/schema_generated.h:2371:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < LSHProjectionType_UNKNOWN || e > LSHProjectionType_DENSE) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameFullyConnectedOptionsWeightsFormat(tflite::FullyConnectedOptionsWeightsFormat)':\r\n./tensorflow/lite/schema/schema_generated.h:2401:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < FullyConnectedOptionsWeightsFormat_DEFAULT || e > FullyConnectedOptionsWeightsFormat_SHUFFLED4x16INT8) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameLSTMKernelType(tflite::LSTMKernelType)':\r\n./tensorflow/lite/schema/schema_generated.h:2431:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < LSTMKernelType_FULL || e > LSTMKernelType_BASIC) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameCombinerType(tflite::CombinerType)':\r\n./tensorflow/lite/schema/schema_generated.h:2464:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < CombinerType_SUM || e > CombinerType_SQRTN) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameMirrorPadMode(tflite::MirrorPadMode)':\r\n./tensorflow/lite/schema/schema_generated.h:2494:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < MirrorPadMode_REFLECT || e > MirrorPadMode_SYMMETRIC) return \"\";\r\n         ^\r\n./tensorflow/lite/schema/schema_generated.h: In function 'const char* tflite::EnumNameCustomOptionsFormat(tflite::CustomOptionsFormat)':\r\n./tensorflow/lite/schema/schema_generated.h:2521:9: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n   if (e < CustomOptionsFormat_FLEXBUFFERS || e > CustomOptionsFormat_FLEXBUFFERS) return \"\";\r\n         ^\r\ntensorflow/lite/core/api/op_resolver.cc: In function 'TfLiteStatus tflite::GetRegistrationFromOpCode(const tflite::OperatorCode*, const tflite::OpResolver&, tflite::ErrorReporter*, const TfLiteRegistration**)':\r\ntensorflow/lite/core/api/op_resolver.cc:29:20: warning: comparison is always false due to limited range of data type [-Wtype-limits]\r\n       builtin_code < BuiltinOperator_MIN) {\r\n                    ^\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/kernels/kernel_util.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/kernels/kernel_util.o\r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/kernels/internal/quantization_util.cc -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/kernels/internal/quantization_util.o\r\narm-none-eabi-gcc -DNDEBUG -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/timers.c -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/timers.o\r\ncc1: warning: command line option '-std=gnu++11' is valid for C++/ObjC++ but not for C\r\ncc1: warning: command line option '-fno-rtti' is valid for C++/ObjC++ but not for C\r\ncc1: warning: command line option '-fpermissive' is valid for C++/ObjC++ but not for C\r\narm-none-eabi-gcc -DNDEBUG -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/strings.c -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/strings.o\r\ncc1: warning: command line option '-std=gnu++11' is valid for C++/ObjC++ but not for C\r\ncc1: warning: command line option '-fno-rtti' is valid for C++/ObjC++ but not for C\r\ncc1: warning: command line option '-fpermissive' is valid for C++/ObjC++ but not for C\r\ntensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/strings.c: In function 'FastFloatToBufferLeft':\r\ntensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/strings.c:72:3: warning: dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing]\r\n   const uint32_t u = *(uint32_t*)(&i);\r\n   ^\r\ntensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/strings.c: In function 'StrCatInt32':\r\ntensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/strings.c:135:3: warning: variable length array 'number_string' is used [-Wvla]\r\n   char number_string[kFastToBufferSize];\r\n   ^\r\ntensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/strings.c: In function 'StrCatUInt32':\r\ntensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/strings.c:142:3: warning: variable length array 'number_string' is used [-Wvla]\r\n   char number_string[kFastToBufferSize];\r\n   ^\r\narm-none-eabi-gcc -DNDEBUG -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -c tensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/startup.c -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/startup.o\r\ncc1: warning: command line option '-std=gnu++11' is valid for C++/ObjC++ but not for C\r\ncc1: warning: command line option '-fno-rtti' is valid for C++/ObjC++ but not for C\r\ncc1: warning: command line option '-fpermissive' is valid for C++/ObjC++ but not for C\r\ntensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/startup.c: In function 'HardFaultHandler':\r\ntensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/startup.c:62:3: warning: variable length array 'log' is used [-Wvla]\r\n   LOG_HEX32(SCB->HFSR);\r\n   ^\r\ntensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/startup.c:64:5: warning: variable length array 'log' is used [-Wvla]\r\n     LOG_HEX32(SCB->CFSR);\r\n     ^\r\ntensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/startup.c:65:5: warning: variable length array 'log' is used [-Wvla]\r\n     LOG_HEX32(SCB_CFSR_IBUSERR_Msk);\r\n     ^\r\ntensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/startup.c:92:3: warning: variable length array 'log' is used [-Wvla]\r\n   LOG_HEX32(r0);\r\n   ^\r\ntensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/startup.c:93:3: warning: variable length array 'log' is used [-Wvla]\r\n   LOG_HEX32(r1);\r\n   ^\r\ntensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/startup.c:94:3: warning: variable length array 'log' is used [-Wvla]\r\n   LOG_HEX32(r2);\r\n   ^\r\ntensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/startup.c:95:3: warning: variable length array 'log' is used [-Wvla]\r\n   LOG_HEX32(r3);\r\n   ^\r\ntensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/startup.c:96:3: warning: variable length array 'log' is used [-Wvla]\r\n   LOG_HEX32(r12);\r\n   ^\r\ntensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/startup.c:97:3: warning: variable length array 'log' is used [-Wvla]\r\n   LOG_HEX32(lr);\r\n   ^\r\ntensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/startup.c:98:3: warning: variable length array 'log' is used [-Wvla]\r\n   LOG_HEX32(pc);\r\n   ^\r\ntensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/startup.c:99:3: warning: variable length array 'log' is used [-Wvla]\r\n   LOG_HEX32(psr);\r\n   ^\r\narm-none-eabi-ar -r tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/lib/libtensorflow-microlite.a tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/micro_error_reporter.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/micro_mutable_op_resolver.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/simple_tensor_allocator.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/bluepill/debug_log.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/debug_log_numbers.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/micro_interpreter.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/kernels/depthwise_conv.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/kernels/pooling.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/kernels/softmax.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/kernels/conv.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/kernels/elementwise.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/kernels/all_ops_resolver.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/kernels/fully_connected.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/c/c_api_internal.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/core/api/error_reporter.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/core/api/flatbuffer_conversions.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/core/api/op_resolver.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/kernels/kernel_util.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/kernels/internal/quantization_util.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/timers.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/strings.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/source/startup.o \r\narm-none-eabi-g++ -O3 -DNDEBUG -std=c++11 -g -DTF_LITE_STATIC_MEMORY -DGEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK -DTF_LITE_STATIC_MEMORY -DTF_LITE_MCU_DEBUG_LOG -fno-rtti -fmessage-length=0 -fno-exceptions -fno-unwind-tables -fno-builtin -ffunction-sections -fdata-sections -funsigned-char -MMD -mcpu=cortex-m3 -mthumb -std=gnu++11 -Wvla -Wall -Wextra -Wno-unused-parameter -Wno-missing-field-initializers -Wno-write-strings -Wno-sign-compare -fno-delete-null-pointer-checks -fomit-frame-pointer -fpermissive -nostdlib -g -Os -I. -Itensorflow/lite/experimental/micro/tools/make/downloads/ -Itensorflow/lite/experimental/micro/tools/make/downloads/gemmlowp -Itensorflow/lite/experimental/micro/tools/make/downloads/flatbuffers/include -isystemtensorflow/lite/experimental/micro/tools/make/downloads/cmsis/CMSIS/Core/Include/ -Itensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/include -Itensorflow/lite/experimental/micro/tools/make/downloads/kissfft -o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/bin/micro_speech tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/main.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/audio_provider.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/feature_provider.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/no_micro_features_data.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/yes_micro_features_data.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/tiny_conv_micro_features_model_data.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/recognize_commands.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/command_responder.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/micro_features_generator.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/micro_model_settings.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/fft.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/fft_util.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/filterbank.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/filterbank_util.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/frontend.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/frontend_util.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/log_lut.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/log_scale.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/log_scale_util.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/noise_reduction.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/noise_reduction_util.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/pcan_gain_control.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/pcan_gain_control_util.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/window.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/examples/micro_speech/micro_features/window_util.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/tools/make/downloads/kissfft/kiss_fft.o tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/obj/tensorflow/lite/experimental/micro/tools/make/downloads/kissfft/tools/kiss_fftr.o  tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/lib/libtensorflow-microlite.a -T tensorflow/lite/experimental/micro/tools/make/downloads/stm32_bare_lib/stm32_linker_layout.lds -Wl,-Map=tensorflow/lite/experimental/micro/tools/make/gen/bluepill.map,--cref -Wl,--gc-sections -lm\r\n/usr/lib/gcc/arm-none-eabi/4.9.3/../../../arm-none-eabi/bin/ld: tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/bin/micro_speech section `.rodata' will not fit in region `FLASH'\r\n/usr/lib/gcc/arm-none-eabi/4.9.3/../../../arm-none-eabi/bin/ld: region `FLASH' overflowed by 9656 bytes\r\ncollect2: error: ld returned 1 exit status\r\ntensorflow/lite/experimental/micro/examples/micro_speech/Makefile.inc:370: recipe for target 'tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/bin/micro_speech' failed\r\nmake: *** [tensorflow/lite/experimental/micro/tools/make/gen/bluepill_cortex-m3/bin/micro_speech] Error 1"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30418", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30418/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30418/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30418/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30418", "id": 464392200, "node_id": "MDU6SXNzdWU0NjQzOTIyMDA=", "number": 30418, "title": "Memory Saving Gradients for TF2", "user": {"login": "mpafla", "id": 19714779, "node_id": "MDQ6VXNlcjE5NzE0Nzc5", "avatar_url": "https://avatars1.githubusercontent.com/u/19714779?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpafla", "html_url": "https://github.com/mpafla", "followers_url": "https://api.github.com/users/mpafla/followers", "following_url": "https://api.github.com/users/mpafla/following{/other_user}", "gists_url": "https://api.github.com/users/mpafla/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpafla/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpafla/subscriptions", "organizations_url": "https://api.github.com/users/mpafla/orgs", "repos_url": "https://api.github.com/users/mpafla/repos", "events_url": "https://api.github.com/users/mpafla/events{/privacy}", "received_events_url": "https://api.github.com/users/mpafla/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "alextp", "id": 5061, "node_id": "MDQ6VXNlcjUwNjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/5061?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alextp", "html_url": "https://github.com/alextp", "followers_url": "https://api.github.com/users/alextp/followers", "following_url": "https://api.github.com/users/alextp/following{/other_user}", "gists_url": "https://api.github.com/users/alextp/gists{/gist_id}", "starred_url": "https://api.github.com/users/alextp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alextp/subscriptions", "organizations_url": "https://api.github.com/users/alextp/orgs", "repos_url": "https://api.github.com/users/alextp/repos", "events_url": "https://api.github.com/users/alextp/events{/privacy}", "received_events_url": "https://api.github.com/users/alextp/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2019-07-04T20:52:07Z", "updated_at": "2020-03-10T13:37:43Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow 2.0 beta\r\n\r\nThere are libraries for TF1 that are able to calculate more memory efficient gradients such as [gradient-checkpointing](https://github.com/cybertronai/gradient-checkpointing). They edit the graph with the [tf.contrib.graph_editor](https://www.tensorflow.org/api_docs/python/tf/contrib/graph_editor) to save memory. However, tf.contrib does not exist anymore which is why I cannot run large models such as GPT2 in TF2 (converted with `tf_upgrade_v2`) as it overflows my GPU memory in Google Colab. Is there a TF2 feature that can help me? \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30416", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30416/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30416/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30416/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30416", "id": 464331373, "node_id": "MDU6SXNzdWU0NjQzMzEzNzM=", "number": 30416, "title": "Build doesn't find files that exist", "user": {"login": "AndreyPlotkinOr", "id": 46108258, "node_id": "MDQ6VXNlcjQ2MTA4MjU4", "avatar_url": "https://avatars0.githubusercontent.com/u/46108258?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndreyPlotkinOr", "html_url": "https://github.com/AndreyPlotkinOr", "followers_url": "https://api.github.com/users/AndreyPlotkinOr/followers", "following_url": "https://api.github.com/users/AndreyPlotkinOr/following{/other_user}", "gists_url": "https://api.github.com/users/AndreyPlotkinOr/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndreyPlotkinOr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndreyPlotkinOr/subscriptions", "organizations_url": "https://api.github.com/users/AndreyPlotkinOr/orgs", "repos_url": "https://api.github.com/users/AndreyPlotkinOr/repos", "events_url": "https://api.github.com/users/AndreyPlotkinOr/events{/privacy}", "received_events_url": "https://api.github.com/users/AndreyPlotkinOr/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2019-07-04T15:57:15Z", "updated_at": "2019-07-18T08:34:08Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10 x64\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: git tag v2.0.0_beta1\r\n- Python version: 3.6.7\r\n- Installed using virtualenv? pip? conda?: \r\n- Bazel version (if compiling from source): bazel release 0.24.1\r\n- GCC/Compiler version (if compiling from source): \"C:/Program Files (x86)/Microsoft Visual Studio 14.0/VC//bin/amd64/cl.exe\"\r\nMicrosoft (R) C/C++ Optimizing Compiler Version 19.00.24234.1 for x64\r\n- CUDA/cuDNN version: 10.1/7.6.1\r\n- GPU model and memory: GeForce GTX 1060 (6GB)\r\n\r\n\r\n\r\n**Describe the problem**\r\nBuild fails, each time with other .h file, that it can't find.\r\nAll files are available.\r\n\r\nRun 1:\r\nERROR: D:/data/users/andrey/projects/tensorflow_gpu_v2.0_3/tensorflow/core/kernels/data/BUILD:1012:1: C++ compilation of rule '//tensorflow/core/kernels/data:optional_ops_gpu' failed (Exit 2): python.exe failed: error executing command\r\n  cd C:/users/andrey/_bazel_andrey/ntapso4i/execroot/org_tensorflow\r\n  SET CUDA_TOOLKIT_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.1\r\n    SET INCLUDE=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\INCLUDE;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\ucrt;C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\include\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\shared;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\winrt;\r\n    SET LIB=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\LIB\\amd64;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\LIB\\amd64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.17763.0\\ucrt\\x64;C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\lib\\um\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.17763.0\\um\\x64;\r\n    SET PATH=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\BIN\\amd64;C:\\windows\\Microsoft.NET\\Framework64\\v4.0.30319;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\Tools;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\x86;C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v10.0A\\bin\\NETFX 4.6.1 Tools\\x64\\;;C:\\windows\\system32\r\n    SET PWD=/proc/self/cwd\r\n    SET PYTHON_BIN_PATH=D:/Data/Users/andrey/AppData/Local/Programs/Python/Python36/python.exe\r\n    SET PYTHON_LIB_PATH=D:/Data/Users/andrey/AppData/Local/Programs/Python/Python36/lib/site-packages\r\n    SET TEMP=C:\\Users\\andrey\\AppData\\Local\\Temp\r\n    SET TF_CONFIGURE_IOS=0\r\n    SET TF_CUDA_COMPUTE_CAPABILITIES=6.1\r\n    SET TF_CUDA_PATHS=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.1,C:/Program Files/cudnn-10.1-windows10-x64-v7.6.1.34\r\n    SET TF_CUDA_VERSION=10.1\r\n    SET TF_CUDNN_VERSION=7.6.1\r\n    SET TF_NEED_CUDA=1\r\n    SET TMP=C:\\Users\\andrey\\AppData\\Local\\Temp\r\n  D:/Data/Users/andrey/AppData/Local/Programs/Python/Python36/python.exe -B external/local_config_cuda/crosstool/windows/msvc_wrapper_for_nvcc.py /nologo /DCOMPILER_MSVC /DNOMINMAX /D_WIN32_WINNT=0x0600 /D_CRT_SECURE_NO_DEPRECATE /D_CRT_SECURE_NO_WARNINGS /D_SILENCE_STDEXT_HASH_DEPRECATION_WARNINGS /bigobj /Zm500 /J /Gy /GF /EHsc /wd4351 /wd4291 /wd4250 /wd4996 /I. /Ibazel-out/x64_windows-opt/genfiles /Ibazel-out/x64_windows-opt/bin /Iexternal/com_google_absl /Ibazel-out/x64_windows-opt/genfiles/external/com_google_absl /Ibazel-out/x64_windows-opt/bin/external/com_google_absl /Iexternal/eigen_archive /Ibazel-out/x64_windows-opt/genfiles/external/eigen_archive /Ibazel-out/x64_windows-opt/bin/external/eigen_archive /Iexternal/local_config_sycl /Ibazel-out/x64_windows-opt/genfiles/external/local_config_sycl /Ibazel-out/x64_windows-opt/bin/external/local_config_sycl /Iexternal/nsync /Ibazel-out/x64_windows-opt/genfiles/external/nsync /Ibazel-out/x64_windows-opt/bin/external/nsync /Iexternal/gif_archive /Ibazel-out/x64_windows-opt/genfiles/external/gif_archive /Ibazel-out/x64_windows-opt/bin/external/gif_archive /Iexternal/jpeg /Ibazel-out/x64_windows-opt/genfiles/external/jpeg /Ibazel-out/x64_windows-opt/bin/external/jpeg /Iexternal/protobuf_archive /Ibazel-out/x64_windows-opt/genfiles/external/protobuf_archive /Ibazel-out/x64_windows-opt/bin/external/protobuf_archive /Iexternal/com_googlesource_code_re2 /Ibazel-out/x64_windows-opt/genfiles/external/com_googlesource_code_re2 /Ibazel-out/x64_windows-opt/bin/external/com_googlesource_code_re2 /Iexternal/farmhash_archive /Ibazel-out/x64_windows-opt/genfiles/external/farmhash_archive /Ibazel-out/x64_windows-opt/bin/external/farmhash_archive /Iexternal/fft2d /Ibazel-out/x64_windows-opt/genfiles/external/fft2d /Ibazel-out/x64_windows-opt/bin/external/fft2d /Iexternal/highwayhash /Ibazel-out/x64_windows-opt/genfiles/external/highwayhash /Ibazel-out/x64_windows-opt/bin/external/highwayhash /Iexternal/zlib_archive /Ibazel-out/x64_windows-opt/genfiles/external/zlib_archive /Ibazel-out/x64_windows-opt/bin/external/zlib_archive /Iexternal/double_conversion /Ibazel-out/x64_windows-opt/genfiles/external/double_conversion /Ibazel-out/x64_windows-opt/bin/external/double_conversion /Iexternal/snappy /Ibazel-out/x64_windows-opt/genfiles/external/snappy /Ibazel-out/x64_windows-opt/bin/external/snappy /Iexternal/local_config_cuda /Ibazel-out/x64_windows-opt/genfiles/external/local_config_cuda /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda/cuda/_virtual_includes/cuda_headers_virtual /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda/cuda/_virtual_includes/cudnn_header /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda/cuda/_virtual_includes/cublas_headers_virtual /Iexternal/eigen_archive /Ibazel-out/x64_windows-opt/genfiles/external/eigen_archive /Ibazel-out/x64_windows-opt/bin/external/eigen_archive /Iexternal/nsync/public /Ibazel-out/x64_windows-opt/genfiles/external/nsync/public /Ibazel-out/x64_windows-opt/bin/external/nsync/public /Iexternal/gif_archive/lib /Ibazel-out/x64_windows-opt/genfiles/external/gif_archive/lib /Ibazel-out/x64_windows-opt/bin/external/gif_archive/lib /Iexternal/gif_archive/windows /Ibazel-out/x64_windows-opt/genfiles/external/gif_archive/windows /Ibazel-out/x64_windows-opt/bin/external/gif_archive/windows /Iexternal/protobuf_archive/src /Ibazel-out/x64_windows-opt/genfiles/external/protobuf_archive/src /Ibazel-out/x64_windows-opt/bin/external/protobuf_archive/src /Iexternal/farmhash_archive/src /Ibazel-out/x64_windows-opt/genfiles/external/farmhash_archive/src /Ibazel-out/x64_windows-opt/bin/external/farmhash_archive/src /Iexternal/zlib_archive /Ibazel-out/x64_windows-opt/genfiles/external/zlib_archive /Ibazel-out/x64_windows-opt/bin/external/zlib_archive /Iexternal/double_conversion /Ibazel-out/x64_windows-opt/genfiles/external/double_conversion /Ibazel-out/x64_windows-opt/bin/external/double_conversion /Iexternal/local_config_cuda/cuda /Ibazel-out/x64_windows-opt/genfiles/external/local_config_cuda/cuda /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda/cuda /Iexternal/local_config_cuda/cuda/cuda/include /Ibazel-out/x64_windows-opt/genfiles/external/local_config_cuda/cuda/cuda/include /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda/cuda/cuda/include /Iexternal/local_config_cuda/cuda/cublas/include /Ibazel-out/x64_windows-opt/genfiles/external/local_config_cuda/cuda/cublas/include /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda/cuda/cublas/include /D__CLANG_SUPPORT_DYN_ANNOTATION__ /DEIGEN_MPL2_ONLY /DEIGEN_MAX_ALIGN_BYTES=64 /DEIGEN_HAS_TYPE_TRAITS=0 /DTF_USE_SNAPPY /showIncludes /MD /O2 /DNDEBUG -w -DWIN32_LEAN_AND_MEAN -DNOGDI /arch:AVX2 -nvcc_options=disable-warnings -DGOOGLE_CUDA=1 -DTENSORFLOW_MONOLITHIC_BUILD /DPLATFORM_WINDOWS /DEIGEN_HAS_C99_MATH /DTENSORFLOW_USE_EIGEN_THREADPOOL /DEIGEN_AVOID_STL_ARRAY /Iexternal/gemmlowp /wd4018 /wd4577 /DNOGDI /DTF_COMPILE_LIBRARY -x cuda -DGOOGLE_CUDA=1 -nvcc_options=relaxed-constexpr -nvcc_options=ftz=true /Fobazel-out/x64_windows-opt/bin/tensorflow/core/kernels/data/_objs/optional_ops_gpu/optional_ops.cu.o /c tensorflow/core/kernels/data/optional_ops.cu.cc\r\nExecution platform: @bazel_tools//platforms:host_platform\r\nc1xx: fatal error C1083: Cannot open source file: 'tensorflow/core/kernels/data/optional_ops.cu.cc': No such file or directory\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\n\r\nRun 2:\r\nERROR: D:/data/users/andrey/projects/tensorflow_gpu_v2.0_3/tensorflow/contrib/framework/BUILD:111:1: C++ compilation of rule '//tensorflow/contrib/framework:python/ops/_variable_ops_gpu' failed (Exit 2): python.exe failed: error executing command\r\n  cd C:/users/andrey/_bazel_andrey/ntapso4i/execroot/org_tensorflow\r\n  SET CUDA_TOOLKIT_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.1\r\n    SET INCLUDE=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\INCLUDE;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\ucrt;C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\include\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\shared;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\winrt;\r\n    SET LIB=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\LIB\\amd64;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\LIB\\amd64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.17763.0\\ucrt\\x64;C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\lib\\um\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.17763.0\\um\\x64;\r\n    SET PATH=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\BIN\\amd64;C:\\windows\\Microsoft.NET\\Framework64\\v4.0.30319;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\Tools;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\x86;C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v10.0A\\bin\\NETFX 4.6.1 Tools\\x64\\;;C:\\windows\\system32\r\n    SET PWD=/proc/self/cwd\r\n    SET PYTHON_BIN_PATH=D:/Data/Users/andrey/AppData/Local/Programs/Python/Python36/python.exe\r\n    SET PYTHON_LIB_PATH=D:/Data/Users/andrey/AppData/Local/Programs/Python/Python36/lib/site-packages\r\n    SET TEMP=C:\\Users\\andrey\\AppData\\Local\\Temp\r\n    SET TF_CONFIGURE_IOS=0\r\n    SET TF_CUDA_COMPUTE_CAPABILITIES=6.1\r\n    SET TF_CUDA_PATHS=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.1,C:/Program Files/cudnn-10.1-windows10-x64-v7.6.1.34\r\n    SET TF_CUDA_VERSION=10.1\r\n    SET TF_CUDNN_VERSION=7.6.1\r\n    SET TF_NEED_CUDA=1\r\n    SET TMP=C:\\Users\\andrey\\AppData\\Local\\Temp\r\n  D:/Data/Users/andrey/AppData/Local/Programs/Python/Python36/python.exe -B external/local_config_cuda/crosstool/windows/msvc_wrapper_for_nvcc.py /nologo /DCOMPILER_MSVC /DNOMINMAX /D_WIN32_WINNT=0x0600 /D_CRT_SECURE_NO_DEPRECATE /D_CRT_SECURE_NO_WARNINGS /D_SILENCE_STDEXT_HASH_DEPRECATION_WARNINGS /bigobj /Zm500 /J /Gy /GF /EHsc /wd4351 /wd4291 /wd4250 /wd4996 /I. /Ibazel-out/x64_windows-opt/genfiles /Ibazel-out/x64_windows-opt/bin /Iexternal/protobuf_archive /Ibazel-out/x64_windows-opt/genfiles/external/protobuf_archive /Ibazel-out/x64_windows-opt/bin/external/protobuf_archive /Iexternal/eigen_archive /Ibazel-out/x64_windows-opt/genfiles/external/eigen_archive /Ibazel-out/x64_windows-opt/bin/external/eigen_archive /Iexternal/local_config_sycl /Ibazel-out/x64_windows-opt/genfiles/external/local_config_sycl /Ibazel-out/x64_windows-opt/bin/external/local_config_sycl /Iexternal/com_google_absl /Ibazel-out/x64_windows-opt/genfiles/external/com_google_absl /Ibazel-out/x64_windows-opt/bin/external/com_google_absl /Iexternal/local_config_cuda /Ibazel-out/x64_windows-opt/genfiles/external/local_config_cuda /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda/cuda/_virtual_includes/cuda_headers_virtual /Iexternal/protobuf_archive/src /Ibazel-out/x64_windows-opt/genfiles/external/protobuf_archive/src /Ibazel-out/x64_windows-opt/bin/external/protobuf_archive/src /Iexternal/eigen_archive /Ibazel-out/x64_windows-opt/genfiles/external/eigen_archive /Ibazel-out/x64_windows-opt/bin/external/eigen_archive /Iexternal/local_config_cuda/cuda /Ibazel-out/x64_windows-opt/genfiles/external/local_config_cuda/cuda /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda/cuda /Iexternal/local_config_cuda/cuda/cuda/include /Ibazel-out/x64_windows-opt/genfiles/external/local_config_cuda/cuda/cuda/include /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda/cuda/cuda/include /DEIGEN_MPL2_ONLY /DEIGEN_MAX_ALIGN_BYTES=64 /DEIGEN_HAS_TYPE_TRAITS=0 /D__CLANG_SUPPORT_DYN_ANNOTATION__ /showIncludes /MD /O2 /DNDEBUG -w -DWIN32_LEAN_AND_MEAN -DNOGDI /arch:AVX2 -nvcc_options=disable-warnings /DEIGEN_STRONG_INLINE=inline -x cuda -DGOOGLE_CUDA=1 -nvcc_options=relaxed-constexpr -nvcc_options=ftz=true /Fobazel-out/x64_windows-opt/bin/tensorflow/contrib/framework/_objs/python/ops/_variable_ops_gpu/zero_initializer_op_gpu.cu.o /c tensorflow/contrib/framework/kernels/zero_initializer_op_gpu.cu.cc\r\nExecution platform: @bazel_tools//platforms:host_platform\r\nc1xx: fatal error C1083: Cannot open source file: 'tensorflow/contrib/framework/kernels/zero_initializer_op_gpu.cu.cc': No such file or directory\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\n\r\n\r\nRun 3:\r\nERROR: D:/data/users/andrey/projects/tensorflow_gpu_v2.0_3/tensorflow/contrib/rnn/BUILD:199:1: C++ compilation of rule '//tensorflow/contrib/rnn:python/ops/_gru_ops_gpu' failed (Exit 2): python.exe failed: error executing command\r\n  cd C:/users/andrey/_bazel_andrey/ntapso4i/execroot/org_tensorflow\r\n  SET CUDA_TOOLKIT_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.1\r\n    SET INCLUDE=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\INCLUDE;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\ucrt;C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\include\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\shared;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\winrt;\r\n    SET LIB=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\LIB\\amd64;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\LIB\\amd64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.17763.0\\ucrt\\x64;C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\lib\\um\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.17763.0\\um\\x64;\r\n    SET PATH=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\BIN\\amd64;C:\\windows\\Microsoft.NET\\Framework64\\v4.0.30319;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\Tools;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\x86;C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v10.0A\\bin\\NETFX 4.6.1 Tools\\x64\\;;C:\\windows\\system32\r\n    SET PWD=/proc/self/cwd\r\n    SET PYTHON_BIN_PATH=D:/Data/Users/andrey/AppData/Local/Programs/Python/Python36/python.exe\r\n    SET PYTHON_LIB_PATH=D:/Data/Users/andrey/AppData/Local/Programs/Python/Python36/lib/site-packages\r\n    SET TEMP=C:\\Users\\andrey\\AppData\\Local\\Temp\r\n    SET TF_CONFIGURE_IOS=0\r\n    SET TF_CUDA_COMPUTE_CAPABILITIES=6.1\r\n    SET TF_CUDA_PATHS=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.1,C:/Program Files/cudnn-10.1-windows10-x64-v7.6.1.34\r\n    SET TF_CUDA_VERSION=10.1\r\n    SET TF_CUDNN_VERSION=7.6.1\r\n    SET TF_NEED_CUDA=1\r\n    SET TMP=C:\\Users\\andrey\\AppData\\Local\\Temp\r\n  D:/Data/Users/andrey/AppData/Local/Programs/Python/Python36/python.exe -B external/local_config_cuda/crosstool/windows/msvc_wrapper_for_nvcc.py /nologo /DCOMPILER_MSVC /DNOMINMAX /D_WIN32_WINNT=0x0600 /D_CRT_SECURE_NO_DEPRECATE /D_CRT_SECURE_NO_WARNINGS /D_SILENCE_STDEXT_HASH_DEPRECATION_WARNINGS /bigobj /Zm500 /J /Gy /GF /EHsc /wd4351 /wd4291 /wd4250 /wd4996 /I. /Ibazel-out/x64_windows-opt/genfiles /Ibazel-out/x64_windows-opt/bin /Iexternal/eigen_archive /Ibazel-out/x64_windows-opt/genfiles/external/eigen_archive /Ibazel-out/x64_windows-opt/bin/external/eigen_archive /Iexternal/local_config_sycl /Ibazel-out/x64_windows-opt/genfiles/external/local_config_sycl /Ibazel-out/x64_windows-opt/bin/external/local_config_sycl /Iexternal/protobuf_archive /Ibazel-out/x64_windows-opt/genfiles/external/protobuf_archive /Ibazel-out/x64_windows-opt/bin/external/protobuf_archive /Iexternal/com_google_absl /Ibazel-out/x64_windows-opt/genfiles/external/com_google_absl /Ibazel-out/x64_windows-opt/bin/external/com_google_absl /Iexternal/local_config_cuda /Ibazel-out/x64_windows-opt/genfiles/external/local_config_cuda /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda/cuda/_virtual_includes/cuda_headers_virtual /Iexternal/eigen_archive /Ibazel-out/x64_windows-opt/genfiles/external/eigen_archive /Ibazel-out/x64_windows-opt/bin/external/eigen_archive /Iexternal/protobuf_archive/src /Ibazel-out/x64_windows-opt/genfiles/external/protobuf_archive/src /Ibazel-out/x64_windows-opt/bin/external/protobuf_archive/src /Iexternal/local_config_cuda/cuda /Ibazel-out/x64_windows-opt/genfiles/external/local_config_cuda/cuda /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda/cuda /Iexternal/local_config_cuda/cuda/cuda/include /Ibazel-out/x64_windows-opt/genfiles/external/local_config_cuda/cuda/cuda/include /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda/cuda/cuda/include /DEIGEN_MPL2_ONLY /DEIGEN_MAX_ALIGN_BYTES=64 /DEIGEN_HAS_TYPE_TRAITS=0 /D__CLANG_SUPPORT_DYN_ANNOTATION__ /showIncludes /MD /O2 /DNDEBUG -w -DWIN32_LEAN_AND_MEAN -DNOGDI /arch:AVX2 -nvcc_options=disable-warnings /DEIGEN_STRONG_INLINE=inline -x cuda -DGOOGLE_CUDA=1 -nvcc_options=relaxed-constexpr -nvcc_options=ftz=true /Fobazel-out/x64_windows-opt/bin/tensorflow/contrib/rnn/_objs/python/ops/_gru_ops_gpu/gru_ops_gpu.cu.o /c tensorflow/contrib/rnn/kernels/gru_ops_gpu.cu.cc\r\nExecution platform: @bazel_tools//platforms:host_platform\r\nc1xx: fatal error C1083: Cannot open source file: 'tensorflow/contrib/rnn/kernels/gru_ops_gpu.cu.cc': No such file or directory\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\n\r\n\r\nRun 4:\r\nERROR: D:/data/users/andrey/projects/tensorflow_gpu_v2.0_3/tensorflow/core/kernels/BUILD:321:1: C++ compilation of rule '//tensorflow/core/kernels:extract_volume_patches_op_gpu' failed (Exit 2): python.exe failed: error executing command\r\n  cd C:/users/andrey/_bazel_andrey/ntapso4i/execroot/org_tensorflow\r\n  SET CUDA_TOOLKIT_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.1\r\n    SET INCLUDE=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\INCLUDE;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\INCLUDE;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\ucrt;C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\include\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\shared;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.17763.0\\winrt;\r\n    SET LIB=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\LIB\\amd64;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\ATLMFC\\LIB\\amd64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.17763.0\\ucrt\\x64;C:\\Program Files (x86)\\Windows Kits\\NETFXSDK\\4.6.1\\lib\\um\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.17763.0\\um\\x64;\r\n    SET PATH=C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\BIN\\amd64;C:\\windows\\Microsoft.NET\\Framework64\\v4.0.30319;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\IDE;C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\Common7\\Tools;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\x86;C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v10.0A\\bin\\NETFX 4.6.1 Tools\\x64\\;;C:\\windows\\system32\r\n    SET PWD=/proc/self/cwd\r\n    SET PYTHON_BIN_PATH=D:/Data/Users/andrey/AppData/Local/Programs/Python/Python36/python.exe\r\n    SET PYTHON_LIB_PATH=D:/Data/Users/andrey/AppData/Local/Programs/Python/Python36/lib/site-packages\r\n    SET TEMP=C:\\Users\\andrey\\AppData\\Local\\Temp\r\n    SET TF_CONFIGURE_IOS=0\r\n    SET TF_CUDA_COMPUTE_CAPABILITIES=6.1\r\n    SET TF_CUDA_PATHS=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.1,C:/Program Files/cudnn-10.1-windows10-x64-v7.6.1.34\r\n    SET TF_CUDA_VERSION=10.1\r\n    SET TF_CUDNN_VERSION=7.6.1\r\n    SET TF_NEED_CUDA=1\r\n    SET TMP=C:\\Users\\andrey\\AppData\\Local\\Temp\r\n  D:/Data/Users/andrey/AppData/Local/Programs/Python/Python36/python.exe -B external/local_config_cuda/crosstool/windows/msvc_wrapper_for_nvcc.py /nologo /DCOMPILER_MSVC /DNOMINMAX /D_WIN32_WINNT=0x0600 /D_CRT_SECURE_NO_DEPRECATE /D_CRT_SECURE_NO_WARNINGS /D_SILENCE_STDEXT_HASH_DEPRECATION_WARNINGS /bigobj /Zm500 /J /Gy /GF /EHsc /wd4351 /wd4291 /wd4250 /wd4996 /I. /Ibazel-out/x64_windows-opt/genfiles /Ibazel-out/x64_windows-opt/bin /Iexternal/com_google_absl /Ibazel-out/x64_windows-opt/genfiles/external/com_google_absl /Ibazel-out/x64_windows-opt/bin/external/com_google_absl /Iexternal/eigen_archive /Ibazel-out/x64_windows-opt/genfiles/external/eigen_archive /Ibazel-out/x64_windows-opt/bin/external/eigen_archive /Iexternal/local_config_sycl /Ibazel-out/x64_windows-opt/genfiles/external/local_config_sycl /Ibazel-out/x64_windows-opt/bin/external/local_config_sycl /Iexternal/mkl_dnn /Ibazel-out/x64_windows-opt/genfiles/external/mkl_dnn /Ibazel-out/x64_windows-opt/bin/external/mkl_dnn /Iexternal/nsync /Ibazel-out/x64_windows-opt/genfiles/external/nsync /Ibazel-out/x64_windows-opt/bin/external/nsync /Iexternal/gif_archive /Ibazel-out/x64_windows-opt/genfiles/external/gif_archive /Ibazel-out/x64_windows-opt/bin/external/gif_archive /Iexternal/jpeg /Ibazel-out/x64_windows-opt/genfiles/external/jpeg /Ibazel-out/x64_windows-opt/bin/external/jpeg /Iexternal/protobuf_archive /Ibazel-out/x64_windows-opt/genfiles/external/protobuf_archive /Ibazel-out/x64_windows-opt/bin/external/protobuf_archive /Iexternal/com_googlesource_code_re2 /Ibazel-out/x64_windows-opt/genfiles/external/com_googlesource_code_re2 /Ibazel-out/x64_windows-opt/bin/external/com_googlesource_code_re2 /Iexternal/farmhash_archive /Ibazel-out/x64_windows-opt/genfiles/external/farmhash_archive /Ibazel-out/x64_windows-opt/bin/external/farmhash_archive /Iexternal/fft2d /Ibazel-out/x64_windows-opt/genfiles/external/fft2d /Ibazel-out/x64_windows-opt/bin/external/fft2d /Iexternal/highwayhash /Ibazel-out/x64_windows-opt/genfiles/external/highwayhash /Ibazel-out/x64_windows-opt/bin/external/highwayhash /Iexternal/zlib_archive /Ibazel-out/x64_windows-opt/genfiles/external/zlib_archive /Ibazel-out/x64_windows-opt/bin/external/zlib_archive /Iexternal/double_conversion /Ibazel-out/x64_windows-opt/genfiles/external/double_conversion /Ibazel-out/x64_windows-opt/bin/external/double_conversion /Iexternal/snappy /Ibazel-out/x64_windows-opt/genfiles/external/snappy /Ibazel-out/x64_windows-opt/bin/external/snappy /Iexternal/local_config_cuda /Ibazel-out/x64_windows-opt/genfiles/external/local_config_cuda /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda/cuda/_virtual_includes/cuda_headers_virtual /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda/cuda/_virtual_includes/cublas_headers_virtual /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda/cuda/_virtual_includes/cudnn_header /Iexternal/eigen_archive /Ibazel-out/x64_windows-opt/genfiles/external/eigen_archive /Ibazel-out/x64_windows-opt/bin/external/eigen_archive /Iexternal/mkl_dnn/include /Ibazel-out/x64_windows-opt/genfiles/external/mkl_dnn/include /Ibazel-out/x64_windows-opt/bin/external/mkl_dnn/include /Iexternal/mkl_dnn/src /Ibazel-out/x64_windows-opt/genfiles/external/mkl_dnn/src /Ibazel-out/x64_windows-opt/bin/external/mkl_dnn/src /Iexternal/mkl_dnn/src/common /Ibazel-out/x64_windows-opt/genfiles/external/mkl_dnn/src/common /Ibazel-out/x64_windows-opt/bin/external/mkl_dnn/src/common /Iexternal/mkl_dnn/src/cpu /Ibazel-out/x64_windows-opt/genfiles/external/mkl_dnn/src/cpu /Ibazel-out/x64_windows-opt/bin/external/mkl_dnn/src/cpu /Iexternal/mkl_dnn/src/cpu/gemm /Ibazel-out/x64_windows-opt/genfiles/external/mkl_dnn/src/cpu/gemm /Ibazel-out/x64_windows-opt/bin/external/mkl_dnn/src/cpu/gemm /Iexternal/mkl_dnn/src/cpu/xbyak /Ibazel-out/x64_windows-opt/genfiles/external/mkl_dnn/src/cpu/xbyak /Ibazel-out/x64_windows-opt/bin/external/mkl_dnn/src/cpu/xbyak /Iexternal/nsync/public /Ibazel-out/x64_windows-opt/genfiles/external/nsync/public /Ibazel-out/x64_windows-opt/bin/external/nsync/public /Iexternal/gif_archive/lib /Ibazel-out/x64_windows-opt/genfiles/external/gif_archive/lib /Ibazel-out/x64_windows-opt/bin/external/gif_archive/lib /Iexternal/gif_archive/windows /Ibazel-out/x64_windows-opt/genfiles/external/gif_archive/windows /Ibazel-out/x64_windows-opt/bin/external/gif_archive/windows /Iexternal/protobuf_archive/src /Ibazel-out/x64_windows-opt/genfiles/external/protobuf_archive/src /Ibazel-out/x64_windows-opt/bin/external/protobuf_archive/src /Iexternal/farmhash_archive/src /Ibazel-out/x64_windows-opt/genfiles/external/farmhash_archive/src /Ibazel-out/x64_windows-opt/bin/external/farmhash_archive/src /Iexternal/zlib_archive /Ibazel-out/x64_windows-opt/genfiles/external/zlib_archive /Ibazel-out/x64_windows-opt/bin/external/zlib_archive /Iexternal/double_conversion /Ibazel-out/x64_windows-opt/genfiles/external/double_conversion /Ibazel-out/x64_windows-opt/bin/external/double_conversion /Iexternal/local_config_cuda/cuda /Ibazel-out/x64_windows-opt/genfiles/external/local_config_cuda/cuda /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda/cuda /Iexternal/local_config_cuda/cuda/cuda/include /Ibazel-out/x64_windows-opt/genfiles/external/local_config_cuda/cuda/cuda/include /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda/cuda/cuda/include /Iexternal/local_config_cuda/cuda/cublas/include /Ibazel-out/x64_windows-opt/genfiles/external/local_config_cuda/cuda/cublas/include /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda/cuda/cublas/include /D__CLANG_SUPPORT_DYN_ANNOTATION__ /DEIGEN_MPL2_ONLY /DEIGEN_MAX_ALIGN_BYTES=64 /DEIGEN_HAS_TYPE_TRAITS=0 /DTENSORFLOW_USE_CUSTOM_CONTRACTION_KERNEL /DTENSORFLOW_USE_MKLDNN_CONTRACTION_KERNEL /DTF_USE_SNAPPY /showIncludes /MD /O2 /DNDEBUG -w -DWIN32_LEAN_AND_MEAN -DNOGDI /arch:AVX2 -nvcc_options=disable-warnings -DGOOGLE_CUDA=1 -DTENSORFLOW_MONOLITHIC_BUILD /DPLATFORM_WINDOWS /DEIGEN_HAS_C99_MATH /DTENSORFLOW_USE_EIGEN_THREADPOOL /DEIGEN_AVOID_STL_ARRAY /Iexternal/gemmlowp /wd4018 /wd4577 /DNOGDI /DTF_COMPILE_LIBRARY -x cuda -DGOOGLE_CUDA=1 -nvcc_options=relaxed-constexpr -nvcc_options=ftz=true /Fobazel-out/x64_windows-opt/bin/tensorflow/core/kernels/_objs/extract_volume_patches_op_gpu/extract_volume_patches_op_gpu.cu.o /c tensorflow/core/kernels/extract_volume_patches_op_gpu.cu.cc\r\nExecution platform: @bazel_tools//platforms:host_platform\r\nc1xx: fatal error C1083: Cannot open source file: 'tensorflow/core/kernels/extract_volume_patches_op_gpu.cu.cc': No such file or directory\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\n\r\n\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nbazel build --config=opt --config=cuda --copt=-nvcc_options=disable-warnings //tensorflow/tools/pip_package:build_pip_package\r\n\r\n**Any other info / logs**\r\n.tf_configure.bazelrc\r\nbuild --action_env PYTHON_BIN_PATH=\"D:/Data/Users/andrey/AppData/Local/Programs/Python/Python36/python.exe\"\r\nbuild --action_env PYTHON_LIB_PATH=\"D:/Data/Users/andrey/AppData/Local/Programs/Python/Python36/lib/site-packages\"\r\nbuild --python_path=\"D:/Data/Users/andrey/AppData/Local/Programs/Python/Python36/python.exe\"\r\nbuild:xla --define with_xla_support=false\r\nbuild --action_env TF_CUDA_VERSION=\"10.1\"\r\nbuild --action_env TF_CUDNN_VERSION=\"7.6.1\"\r\nbuild --action_env TF_CUDA_PATHS=\"C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.1,C:/Program Files/cudnn-10.1-windows10-x64-v7.6.1.34\"\r\nbuild --action_env CUDA_TOOLKIT_PATH=\"C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.1\"\r\nbuild --action_env TF_CUDA_COMPUTE_CAPABILITIES=\"6.1\"\r\nbuild --config=cuda\r\nbuild:opt --copt=/arch:AVX2\r\nbuild:opt --define with_default_optimizations=true\r\nbuild --config monolithic\r\nbuild --copt=-w --host_copt=-w\r\nbuild --copt=-DWIN32_LEAN_AND_MEAN --host_copt=-DWIN32_LEAN_AND_MEAN --copt=-DNOGDI --host_copt=-DNOGDI\r\nbuild --verbose_failures\r\nbuild --distinct_host_configuration=false\r\nbuild --define=override_eigen_strong_inline=true\r\nbuild:v2 --define=tf_api_version=2\r\ntest --flaky_test_attempts=3\r\ntest --test_size_filters=small,medium\r\ntest --test_tag_filters=-benchmark-test,-no_oss,-oss_serial\r\ntest --build_tag_filters=-benchmark-test,-no_oss\r\ntest --test_tag_filters=-no_windows,-gpu\r\ntest --build_tag_filters=-no_windows,-gpu\r\nbuild --action_env TF_CONFIGURE_IOS=\"0\""}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30412", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30412/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30412/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/30412/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/30412", "id": 464243310, "node_id": "MDU6SXNzdWU0NjQyNDMzMTA=", "number": 30412, "title": " I noticed that MonitoredSession is a very inefficient method.How to save the model according to the set conditions, not periodically.", "user": {"login": "mk123qwe", "id": 32999545, "node_id": "MDQ6VXNlcjMyOTk5NTQ1", "avatar_url": "https://avatars2.githubusercontent.com/u/32999545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mk123qwe", "html_url": "https://github.com/mk123qwe", "followers_url": "https://api.github.com/users/mk123qwe/followers", "following_url": "https://api.github.com/users/mk123qwe/following{/other_user}", "gists_url": "https://api.github.com/users/mk123qwe/gists{/gist_id}", "starred_url": "https://api.github.com/users/mk123qwe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mk123qwe/subscriptions", "organizations_url": "https://api.github.com/users/mk123qwe/orgs", "repos_url": "https://api.github.com/users/mk123qwe/repos", "events_url": "https://api.github.com/users/mk123qwe/events{/privacy}", "received_events_url": "https://api.github.com/users/mk123qwe/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1162044565, "node_id": "MDU6TGFiZWwxMTYyMDQ0NTY1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.12", "name": "TF 1.12", "color": "c2e0c6", "default": false, "description": "Issues related to TF 1.12"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "karmel", "id": 667809, "node_id": "MDQ6VXNlcjY2NzgwOQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/667809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karmel", "html_url": "https://github.com/karmel", "followers_url": "https://api.github.com/users/karmel/followers", "following_url": "https://api.github.com/users/karmel/following{/other_user}", "gists_url": "https://api.github.com/users/karmel/gists{/gist_id}", "starred_url": "https://api.github.com/users/karmel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karmel/subscriptions", "organizations_url": "https://api.github.com/users/karmel/orgs", "repos_url": "https://api.github.com/users/karmel/repos", "events_url": "https://api.github.com/users/karmel/events{/privacy}", "received_events_url": "https://api.github.com/users/karmel/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-07-04T12:35:42Z", "updated_at": "2019-07-09T19:04:51Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**win10\r\n- TensorFlow version (you are using):1.12\r\n- Are you willing to contribute it (Yes/No):no\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n I noticed that MonitoredSession is a very inefficient method.Saving the model periodically.\r\n**Will this change the current api? How?**\r\nSetting conditions to save the model, not periodically.\r\n**Who will benefit with this feature?**\r\neveryone\r\n**Any Other info.**\r\n"}]