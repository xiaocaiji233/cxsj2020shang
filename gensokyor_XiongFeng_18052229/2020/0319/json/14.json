[{"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33437", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33437/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33437/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33437/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33437", "id": 508040282, "node_id": "MDU6SXNzdWU1MDgwNDAyODI=", "number": 33437, "title": "IPython Tab Completion causes logged warnings", "user": {"login": "alanhdu", "id": 1914111, "node_id": "MDQ6VXNlcjE5MTQxMTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1914111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alanhdu", "html_url": "https://github.com/alanhdu", "followers_url": "https://api.github.com/users/alanhdu/followers", "following_url": "https://api.github.com/users/alanhdu/following{/other_user}", "gists_url": "https://api.github.com/users/alanhdu/gists{/gist_id}", "starred_url": "https://api.github.com/users/alanhdu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alanhdu/subscriptions", "organizations_url": "https://api.github.com/users/alanhdu/orgs", "repos_url": "https://api.github.com/users/alanhdu/repos", "events_url": "https://api.github.com/users/alanhdu/events{/privacy}", "received_events_url": "https://api.github.com/users/alanhdu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2019-10-16T19:03:14Z", "updated_at": "2020-03-18T17:08:10Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): Binary\r\n- TensorFlow version (use command below):  `.1.15.0` (git version `v1.15.0-rc3-22-g590d6ee`, `1.15.0`)\r\n- Python version: 3.6.6\r\n\r\n**Describe the current behavior**\r\nTab-completions in IPython spam the console with `The name ___ is deprecated` logging warnings.\r\n\r\n**Code to reproduce the issue**\r\nI am using Python 3.6.6 with IPython 7.8.0. If you do:\r\n\r\n```\r\n$ ipython\r\nimporPython 3.6.6 | packaged by conda-forge | (default, Oct 12 2018, 14:43:46) \r\nType 'copyright', 'credits' or 'license' for more information\r\nIPython 7.8.0 -- An enhanced Interactive Python. Type '?' for help.\r\n\r\nIn [1]: import tensorflow as tf                                                                                                                                                                                                        \r\n\r\nIn [2]: tf.\r\n```\r\n\r\nand press `tab` after the `.`, you get dozens of warnings like:\r\n\r\n```\r\nWARNING:tensorflow:From /opt/anaconda/envs/ctrldev/lib/python3.6/site-packages/jedi/evaluate/compiled/access.py:347: The name tf.parse_example is deprecated. Please use tf.io.parse_example instead.\r\n\r\nWARNING:tensorflow:From /opt/anaconda/envs/ctrldev/lib/python3.6/site-packages/jedi/evaluate/compiled/access.py:347: The name tf.parse_single_example is deprecated. Please use tf.io.parse_single_example instead.\r\n\r\nWARNING:tensorflow:From /opt/anaconda/envs/ctrldev/lib/python3.6/site-packages/jedi/evaluate/compiled/access.py:347: The name tf.parse_single_sequence_example is deprecated. Please use tf.io.parse_single_sequence_example instead.\r\n\r\nWARNING:tensorflow:From /opt/anaconda/envs/ctrldev/lib/python3.6/site-packages/jedi/evaluate/compiled/access.py:347: The name tf.parse_tensor is deprecated. Please use tf.io.parse_tensor instead.\r\n```\r\n\r\nYou can actually reproduce this with the docker images, although that produces fewer deprecation warnings than the released package does:\r\n\r\n```\r\n$ docker run -it tensorflow/tensorflow:1.15.0rc1-py3-jupyter ipython\r\nPython 3.6.8 (default, Aug 20 2019, 17:12:48) \r\nType 'copyright', 'credits' or 'license' for more information\r\nIPython 7.8.0 -- An enhanced Interactive Python. Type '?' for help.\r\n\r\nIn [1]: import tensorflow as tf                                                                                                                                                                                                        \r\ntf.\r\nIn [2]: tf.WARNING:tensorflow:From /usr/local/lib/python3.6/dist-packages/jedi/evaluate/compiled/access.py:347: The name tf.AUTO_REUSE is deprecated. Please use tf.compat.v1.AUTO_REUSE instead.  \r\n```\r\n\r\n(Unfortunately, I wasn't able to find a more up-to-date official docker image)."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33431", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33431/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33431/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33431/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33431", "id": 507908373, "node_id": "MDU6SXNzdWU1MDc5MDgzNzM=", "number": 33431, "title": "internal compiler error: in assign_temp, at function.c:968", "user": {"login": "dbl001", "id": 3105499, "node_id": "MDQ6VXNlcjMxMDU0OTk=", "avatar_url": "https://avatars2.githubusercontent.com/u/3105499?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dbl001", "html_url": "https://github.com/dbl001", "followers_url": "https://api.github.com/users/dbl001/followers", "following_url": "https://api.github.com/users/dbl001/following{/other_user}", "gists_url": "https://api.github.com/users/dbl001/gists{/gist_id}", "starred_url": "https://api.github.com/users/dbl001/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dbl001/subscriptions", "organizations_url": "https://api.github.com/users/dbl001/orgs", "repos_url": "https://api.github.com/users/dbl001/repos", "events_url": "https://api.github.com/users/dbl001/events{/privacy}", "received_events_url": "https://api.github.com/users/dbl001/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 19, "created_at": "2019-10-16T14:57:56Z", "updated_at": "2020-02-20T22:55:46Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version: 2.0\r\n- Python version: 3.6\r\n- Installed using virtualenv? pip? conda?: \r\n- Bazel version (if compiling from source): Build label: 0.26.1\r\n- GCC/Compiler version (if compiling from source): \r\n```gcc (Ubuntu 5.5.0-12ubuntu1~16.04) 5.5.0 20171010```\r\nand\r\n```gcc (Ubuntu 7.4.0-1ubuntu1~16.04~ppa1) 7.4.0```\r\n\r\n- CUDA/cuDNN version: off\r\n- GPU model and memory: off\r\n\r\n\r\n\r\n**Describe the problem**\r\n```\r\nERROR: /home/ubuntu/tensorflow/tensorflow/compiler/mlir/xla/BUILD:226:1: C++ compilation of rule '//tensorflow/compiler/mlir/xla:hlo' failed (Exit 1)\r\ntensorflow/compiler/mlir/xla/ir/hlo_ops.cc: In function 'mlir::Type {anonymous}::GetBroadcastType(mlir::Builder*, mlir::Type, mlir::Type, mlir::Type, mlir::DenseIntElementsAttr)':\r\ntensorflow/compiler/mlir/xla/ir/hlo_ops.cc:622:23: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]\r\n     for (int i = 0; i < shape_x.size(); i++) {\r\n                     ~~^~~~~~~~~~~~~~~~\r\nIn file included from ./tensorflow/compiler/mlir/xla/ir/hlo_ops.h:22:0,\r\n                 from tensorflow/compiler/mlir/xla/ir/hlo_ops.cc:18:\r\nexternal/local_config_mlir/include/mlir/IR/Attributes.h: In member function 'T mlir::DenseElementsAttr::getValue(llvm::ArrayRef<long unsigned int>) const [with T = mlir::IntegerAttr]':\r\nexternal/local_config_mlir/include/mlir/IR/Attributes.h:783:20: internal compiler error: in assign_temp, at function.c:968\r\n     auto castFn = [](Attribute attr) { return attr.template cast<T>(); };\r\n                    ^\r\nPlease submit a full bug report,\r\n```\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n```\r\n$ bazel build --config=opt  //tensorflow/tools/pip_package:build_pip_package\r\n```\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33419", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33419/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33419/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33419/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33419", "id": 507782923, "node_id": "MDU6SXNzdWU1MDc3ODI5MjM=", "number": 33419, "title": "save_weights does not work for scalars in keras subclass when using h5 format", "user": {"login": "cottrell", "id": 223276, "node_id": "MDQ6VXNlcjIyMzI3Ng==", "avatar_url": "https://avatars2.githubusercontent.com/u/223276?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cottrell", "html_url": "https://github.com/cottrell", "followers_url": "https://api.github.com/users/cottrell/followers", "following_url": "https://api.github.com/users/cottrell/following{/other_user}", "gists_url": "https://api.github.com/users/cottrell/gists{/gist_id}", "starred_url": "https://api.github.com/users/cottrell/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cottrell/subscriptions", "organizations_url": "https://api.github.com/users/cottrell/orgs", "repos_url": "https://api.github.com/users/cottrell/repos", "events_url": "https://api.github.com/users/cottrell/events{/privacy}", "received_events_url": "https://api.github.com/users/cottrell/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-10-16T11:12:53Z", "updated_at": "2019-10-18T12:23:04Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.0.0\r\n- Python version: 3.7.3\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\nI tried three cases and they all result in the same problem:\r\n\r\n```\r\nimport os\r\nimport tensorflow as tf\r\nimport tempfile\r\nimport glob\r\n\r\nclass A(tf.keras.models.Model):\r\n    def __init__(self):\r\n        self.something = tf.keras.backend.variable(name='something', value=1.0)\r\n        super().__init__()\r\n\r\n        \r\nfor fmt in ['tf', 'h5']:\r\n    print(f'fmt={fmt}')\r\n    filename_a = os.path.join(tempfile.mkdtemp(), 'data_{fmt}')\r\n    filename_b = os.path.join(tempfile.mkdtemp(), 'data_{fmt}')\r\n\r\n    a = A()\r\n    a.save_weights(filename_a, save_format=fmt)\r\n    a.something.assign(1.2)\r\n    a.save_weights(filename_b, save_format=fmt)\r\n    print('trainable_variables', a.trainable_variables)\r\n\r\n    b = A()\r\n    b.load_weights(filename_b)\r\n    value = float(b.something.numpy())\r\n    check = np.abs(value - 1.2) < 1e-4\r\n    print(value, f'fmt={fmt}. class var PASS={check}. The value should be 1.2')\r\n    \r\n    value = float(b.trainable_variables[0].numpy())\r\n    check = np.abs(value - 1.2) < 1e-4\r\n    print(value, f'fmt={fmt}. trainable_variables PASS={check}. The value should be 1.2')\r\n\r\n\r\n```\r\n\r\n```\r\nimport os\r\nimport tensorflow as tf\r\nimport tempfile\r\nimport glob\r\n\r\nclass A(tf.keras.models.Model):\r\n    def __init__(self):\r\n        self.something = tf.Variable(1.0, dtype='float32', trainable=True)\r\n        super().__init__()\r\n\r\n        \r\nfor fmt in ['tf', 'h5']:\r\n    print(f'fmt={fmt}')\r\n    filename_a = os.path.join(tempfile.mkdtemp(), 'data_{fmt}')\r\n    filename_b = os.path.join(tempfile.mkdtemp(), 'data_{fmt}')\r\n\r\n    a = A()\r\n    a.save_weights(filename_a, save_format=fmt)\r\n    a.something.assign(1.2)\r\n    a.save_weights(filename_b, save_format=fmt)\r\n    print('trainable_variables', a.trainable_variables)\r\n\r\n    b = A()\r\n    b.load_weights(filename_b)\r\n    value = float(b.something.numpy())\r\n    check = np.abs(value - 1.2) < 1e-4\r\n    print(value, f'fmt={fmt}. class var PASS={check}. The value should be 1.2')\r\n    \r\n    value = float(b.trainable_variables[0].numpy())\r\n    check = np.abs(value - 1.2) < 1e-4\r\n    print(value, f'fmt={fmt}. trainable_variables PASS={check}. The value should be 1.2')\r\n```\r\n\r\n```\r\nimport os\r\nimport tensorflow as tf\r\nimport tempfile\r\nimport glob\r\n\r\nclass A(tf.keras.models.Model):\r\n    def __init__(self):\r\n        super().__init__()\r\n\r\n    def build(self, input_shape):\r\n        self.something = self.add_weight(initializer=tf.keras.initializers.Ones(), dtype=tf.float32, shape=(1,), name='something')\r\n\r\n    def call(self, x):\r\n        return x\r\n\r\n\r\nfor fmt in ['tf', 'h5']:\r\n    print(f'fmt={fmt}')\r\n    filename_a = os.path.join(tempfile.mkdtemp(), 'data_{fmt}')\r\n    filename_b = os.path.join(tempfile.mkdtemp(), 'data_{fmt}')\r\n\r\n    a = A()\r\n    a(np.random.randn(3, 4).astype(np.float32))\r\n    a.save_weights(filename_a, save_format=fmt)\r\n    a.something.assign([1.2])\r\n    a.save_weights(filename_b, save_format=fmt)\r\n    print('trainable_variables', a.trainable_variables)\r\n\r\n    b = A()\r\n    b(np.random.randn(3, 4).astype(np.float32))\r\n    b.load_weights(filename_b)\r\n    value = float(b.something.numpy())\r\n    check = np.abs(value - 1.2) < 1e-4\r\n    print(value, f'fmt={fmt}. class var PASS={check}. The value should be 1.2')\r\n    \r\n    value = float(b.trainable_variables[0].numpy())\r\n    check = np.abs(value - 1.2) < 1e-4\r\n    print(value, f'fmt={fmt}. trainable_variables PASS={check}. The value should be 1.2')\r\n```\r\n\r\n\r\nOutput is:\r\n\r\n```\r\nfmt=tf\r\ntrainable_variables [<tf.Variable 'something:0' shape=() dtype=float32, numpy=1.2>]\r\n1.2000000476837158 fmt=tf. class var PASS=True. The value should be 1.2\r\n1.2000000476837158 fmt=tf. trainable_variables PASS=True. The value should be 1.2\r\nfmt=h5\r\ntrainable_variables [<tf.Variable 'something:0' shape=() dtype=float32, numpy=1.2>]\r\n1.0 fmt=h5. class var PASS=False. The value should be 1.2\r\n1.0 fmt=h5. trainable_variables PASS=False. The value should be 1.2\r\n```\r\n\r\n\r\nThe value of 1.2 is not coming back in the h5 case\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33412", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33412/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33412/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33412/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33412", "id": 507715497, "node_id": "MDU6SXNzdWU1MDc3MTU0OTc=", "number": 33412, "title": "tf2.0 takes more than twice memory than 1.14", "user": {"login": "saintthor", "id": 3753880, "node_id": "MDQ6VXNlcjM3NTM4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/3753880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/saintthor", "html_url": "https://github.com/saintthor", "followers_url": "https://api.github.com/users/saintthor/followers", "following_url": "https://api.github.com/users/saintthor/following{/other_user}", "gists_url": "https://api.github.com/users/saintthor/gists{/gist_id}", "starred_url": "https://api.github.com/users/saintthor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/saintthor/subscriptions", "organizations_url": "https://api.github.com/users/saintthor/orgs", "repos_url": "https://api.github.com/users/saintthor/repos", "events_url": "https://api.github.com/users/saintthor/events{/privacy}", "received_events_url": "https://api.github.com/users/saintthor/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2019-10-16T09:03:46Z", "updated_at": "2019-11-09T04:58:53Z", "closed_at": null, "author_association": "NONE", "body": "I have 2 environments. tf 1.14 installed for python 3.5 and tf 2 for python 3.7.\r\n\r\nI run the same code and load the same keras model in both environments. in py3.5, after model loaded, the process takes 560MB memory. while in py3.7, it takes 1.2GB.\r\n\r\nis there any way to reduce the memory for tf 2 ?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33410", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33410/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33410/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33410/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33410", "id": 507687910, "node_id": "MDU6SXNzdWU1MDc2ODc5MTA=", "number": 33410, "title": "tfliteGpuDelegate Invoke write to buffer failed source data is larger than buffer", "user": {"login": "manchengfenxu", "id": 10613133, "node_id": "MDQ6VXNlcjEwNjEzMTMz", "avatar_url": "https://avatars2.githubusercontent.com/u/10613133?v=4", "gravatar_id": "", "url": "https://api.github.com/users/manchengfenxu", "html_url": "https://github.com/manchengfenxu", "followers_url": "https://api.github.com/users/manchengfenxu/followers", "following_url": "https://api.github.com/users/manchengfenxu/following{/other_user}", "gists_url": "https://api.github.com/users/manchengfenxu/gists{/gist_id}", "starred_url": "https://api.github.com/users/manchengfenxu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/manchengfenxu/subscriptions", "organizations_url": "https://api.github.com/users/manchengfenxu/orgs", "repos_url": "https://api.github.com/users/manchengfenxu/repos", "events_url": "https://api.github.com/users/manchengfenxu/events{/privacy}", "received_events_url": "https://api.github.com/users/manchengfenxu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-10-16T08:12:02Z", "updated_at": "2019-10-22T00:36:34Z", "closed_at": null, "author_association": "NONE", "body": "\r\n\r\nI followed the steps in https://www.tensorflow.org/lite/performance/gpu and added gpu to tflite interpreter. The mobilenet model given by an android project called tensorflow/lite/jave/demo can work using this project on Pixel 2. However, when it was put into another project with the follwing code. Here comes the errors: \r\n```\r\nTfLiteGpuDelegate Invoke: Write to buffer failed. Source data is larger than buffer\r\nNode number 31 (TfLiteGpuDelegateV2) failed to invoke.\r\n```\r\nimgData, outputClasses are already checked and have the same size with those in tensorflow/lite/jave/demo project.\r\n\r\nVersions of TfLite and TfLiteGpu are also kept the same with that in tensorflow/lite/jave/demo project.\r\n\r\n```\r\nimport  org.tensorflow.lite.TensorFlowLite;\r\nimport org.tensorflow.lite.gpu.GpuDelegate;\r\n\r\n/**\r\n * Wrapper for frozen detection models trained using the Tensorflow Object Detection API:\r\n * github.com/tensorflow/models/tree/master/research/object_detection\r\n */\r\npublic class TFLiteObjectDetectionAPIModel implements Classifier {\r\n  private static final Logger LOGGER = new Logger();\r\n\r\n  // Only return this many results.\r\n  private static final int NUM_DETECTIONS = 1001; // hand landmark ,21, mobilenet, 1001\r\n  // Float model\r\n  private static final float IMAGE_MEAN = 128.0f;\r\n  private static final float IMAGE_STD = 128.0f;\r\n  private boolean isModelQuantized;\r\n  private int inputSize;\r\n  private Vector<String> labels = new Vector<String>();\r\n  private int[] intValues;\r\n  private float[][][] outputLocations;\r\n  private float[][] outputClasses;\r\n  private float[][] outputScores;\r\n  private float[] numDetections;\r\n\r\n  private GpuDelegate gpuDelegate = new GpuDelegate();\r\n  private final Interpreter.Options options = (new Interpreter.Options()).addDelegate(gpuDelegate);\r\n  private ByteBuffer imgData;\r\n\r\n  private Interpreter tfLite;\r\n  private ArrayList<Recognition> recognitions = new ArrayList<Recognition>();\r\n\r\n  private TFLiteObjectDetectionAPIModel() {}\r\n\r\n  /** Memory-map the model file in Assets. */\r\n  private static MappedByteBuffer loadModelFile(AssetManager assets, String modelFilename)\r\n      throws IOException {\r\n    FileInputStream inputStream = new FileInputStream(new File(\"/sdcard/sunny/data/\"+modelFilename+\".tflite\"));\r\n\r\n    FileChannel fileChannel = inputStream.getChannel();\r\n    long startOffset = fileChannel.position();\r\n    long declaredLength = fileChannel.size();\r\n    return fileChannel.map(FileChannel.MapMode.READ_ONLY, startOffset, declaredLength);\r\n  }\r\n\r\n  /**\r\n   * Initializes a native TensorFlow session for classifying images.\r\n   *\r\n   * @param assetManager The asset manager to be used to load assets.\r\n   * @param modelFilename The filepath of the model GraphDef protocol buffer.\r\n   * @param labelFilename The filepath of label file for classes.\r\n   * @param inputSize The size of image input\r\n   * @param isQuantized Boolean representing model is quantized or not\r\n   */\r\n  public static Classifier create(\r\n      final AssetManager assetManager,\r\n      final String modelFilename,\r\n      final String labelFilename,\r\n      final int inputSize,\r\n      final boolean isQuantized)\r\n      throws IOException {\r\n    final TFLiteObjectDetectionAPIModel d = new TFLiteObjectDetectionAPIModel();\r\n\r\n    InputStream labelsInput = null;\r\n    String actualFilename = labelFilename.split(\"file:///android_asset/\")[1];\r\n    labelsInput = assetManager.open(actualFilename);\r\n    BufferedReader br = null;\r\n    br = new BufferedReader(new InputStreamReader(labelsInput));\r\n    String line;\r\n    while ((line = br.readLine()) != null) {\r\n      LOGGER.w(line);\r\n      d.labels.add(line);\r\n    }\r\n    br.close();\r\n\r\n    d.inputSize = inputSize;\r\n    try {\r\n      d.tfLite = new Interpreter(loadModelFile(assetManager, modelFilename),d.options);\r\n    } catch (Exception e) {\r\n      throw new RuntimeException(e);\r\n    }\r\n\r\n    d.isModelQuantized = isQuantized;\r\n    // Pre-allocate buffers.\r\n    int numBytesPerChannel;\r\n    if (isQuantized) {\r\n      numBytesPerChannel = 1; // Quantized\r\n    } else {\r\n      numBytesPerChannel = 4; // Floating point\r\n    }\r\n    d.imgData = ByteBuffer.allocateDirect(1 * d.inputSize * d.inputSize * 3 * 4);\r\n    d.imgData.order(ByteOrder.nativeOrder());\r\n    d.intValues = new int[d.inputSize * d.inputSize];\r\n\r\n    d.outputClasses = new float[1][NUM_DETECTIONS];\r\n\r\n    return d;\r\n  }\r\n\r\n  @Override\r\n  public List<Recognition> processImage(final AssetManager assetManager, Classifier.Recognition.inputFormat imageFormat, int[] intValues){\r\n    Trace.beginSection(\"preprocessBitmap\");\r\n\r\n    imgData.rewind();\r\n    for (int i = 0; i < inputSize; ++i) {\r\n      for (int j = 0; j < inputSize; ++j) {\r\n        int pixelValue = intValues[i * inputSize + j];\r\n        if (isModelQuantized) {\r\n          // Quantized model\r\n          imgData.put((byte) ((pixelValue >> 16) & 0xFF));\r\n          imgData.put((byte) ((pixelValue >> 8) & 0xFF));\r\n          imgData.put((byte) (pixelValue & 0xFF));\r\n        } else { // Float model\r\n          imgData.putFloat((((pixelValue >> 16) & 0xFF) - IMAGE_MEAN) / IMAGE_STD);\r\n          imgData.putFloat((((pixelValue >> 8) & 0xFF) - IMAGE_MEAN) / IMAGE_STD);\r\n          imgData.putFloat(((pixelValue & 0xFF) - IMAGE_MEAN) / IMAGE_STD);\r\n        }\r\n      }\r\n    }\r\n    Trace.endSection(); // preprocessBitmap\r\n\r\n    // Copy the input data into TensorFlow.\r\n    Trace.beginSection(\"feed\");\r\n    outputClasses = new float[1][NUM_DETECTIONS];\r\n    Trace.endSection();\r\n\r\n    // Run the inference call.\r\n    Trace.beginSection(\"run\");\r\n    tfLite.run(imgData, outputClasses);\r\n    Trace.endSection();\r\n\r\n    return recognitions;\r\n  }\r\n\r\n\r\n  @Override\r\n  public void enableStatLogging(final boolean logStats) {}\r\n\r\n  @Override\r\n  public String getStatString() {\r\n    return \"\";\r\n  }\r\n\r\n  @Override\r\n  public void close() {\r\n    tfLite.close();\r\n    tfLite = null;\r\n    recognitions.clear();\r\n    recognitions=null;\r\n    gpuDelegate.close();\r\n    gpuDelegate = null;\r\n}\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33407", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33407/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33407/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33407/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33407", "id": 507612262, "node_id": "MDU6SXNzdWU1MDc2MTIyNjI=", "number": 33407, "title": "Eager mode not being disabled tf 1.14.0", "user": {"login": "shashankg7", "id": 3889592, "node_id": "MDQ6VXNlcjM4ODk1OTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/3889592?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shashankg7", "html_url": "https://github.com/shashankg7", "followers_url": "https://api.github.com/users/shashankg7/followers", "following_url": "https://api.github.com/users/shashankg7/following{/other_user}", "gists_url": "https://api.github.com/users/shashankg7/gists{/gist_id}", "starred_url": "https://api.github.com/users/shashankg7/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shashankg7/subscriptions", "organizations_url": "https://api.github.com/users/shashankg7/orgs", "repos_url": "https://api.github.com/users/shashankg7/repos", "events_url": "https://api.github.com/users/shashankg7/events{/privacy}", "received_events_url": "https://api.github.com/users/shashankg7/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 736653459, "node_id": "MDU6TGFiZWw3MzY2NTM0NTk=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:eager", "name": "comp:eager", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-10-16T04:50:29Z", "updated_at": "2019-11-01T18:19:06Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):\r\n- TensorFlow version (use command below):\r\n- Python version:\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\n**Describe the expected behavior**\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nTrying out example from Tensorflow Probability with the following code:\r\n\r\n```\r\nimport tensorflow as tf\r\nimport tensorflow_probability as tfp\r\nimport numpy as np\r\n\r\ntfd = tfp.distributions\r\ndtype = np.float32\r\n\r\nwith tf.Session(graph=tf.Graph()) as sess:\r\n  # Set up random seed for the optimizer\r\n  tf.set_random_seed(42)\r\n  true_mean = dtype([0, 0, 0])\r\n  true_cov = dtype([[1, 0.25, 0.25], [0.25, 1, 0.25], [0.25, 0.25, 1]])\r\n  # Loss is defined through the Cholesky decomposition\r\n  chol = tf.linalg.cholesky(true_cov)\r\n\r\n  var_1 = tf.Variable(name='var_1', initial_value=[1., 1.])\r\n  var_2 = tf.Variable(name='var_2', initial_value=[1.])\r\n\r\n  def loss_fn():\r\n    var = tf.concat([var_1, var_2], axis=-1)\r\n    loss_part = tf.linalg.cholesky_solve(chol, tf.expand_dims(var, -1))\r\n    return tf.linalg.matvec(loss_part, var, transpose_a=True)\r\n\r\n  # Set up the learning rate with a polynomial decay\r\n  step = tf.Variable(0, dtype=tf.int64)\r\n  starter_learning_rate = .3\r\n  end_learning_rate = 1e-4\r\n  decay_steps = 1e4\r\n  learning_rate = tf.compat.v1.train.polynomial_decay(\r\n      starter_learning_rate,\r\n      step,\r\n      decay_steps,\r\n      end_learning_rate,\r\n      power=1.)\r\n\r\n  # Set up the optimizer\r\n  optimizer_kernel = tfp.optimizer.StochasticGradientLangevinDynamics(\r\n      learning_rate=learning_rate, preconditioner_decay_rate=0.99)\r\n  optimizer_kernel.iterations = step\r\n  optimizer = optimizer_kernel.minimize(loss_fn, var_list=[var_1, var_2])\r\n\r\n  # Number of training steps\r\n  training_steps = 5000\r\n  # Record the steps as and treat them as samples\r\n  samples = [np.zeros([training_steps, 2]), np.zeros([training_steps, 1])]\r\n  sess.run(tf.compat.v1.global_variables_initializer())\r\n  for step in range(training_steps):\r\n    sess.run(optimizer)\r\n    sample = [sess.run(var_1), sess.run(var_2)]\r\n    samples[0][step, :] = sample[0]\r\n    samples[1][step, :] = sample[1]\r\n\r\n  samples_ = np.concatenate(samples, axis=-1)\r\n  sample_mean = np.mean(samples_, 0)\r\n  print('sample mean', sample_mean)\r\n\r\n```\r\nGetting following error:\r\n\r\n```\r\nFile \"/Users/shashank.gupta/miniconda2/lib/python2.7/site-packages/tensorflow/python/keras/optimizer_v2/optimizer_v2.py\", line 318, in minimize\r\n    loss, var_list=var_list, grad_loss=grad_loss)\r\n  File \"/Users/shashank.gupta/miniconda2/lib/python2.7/site-packages/tensorflow/python/keras/optimizer_v2/optimizer_v2.py\", line 351, in _compute_gradients\r\n    tape.watch(var_list)\r\n  File \"/Users/shashank.gupta/miniconda2/lib/python2.7/site-packages/tensorflow/python/eager/backprop.py\", line 816, in watch\r\n    for t in nest.flatten(tensor):\r\nAttributeError: 'RefVariable' object has no attribute '_id'\r\n\r\n```\r\nLooks like eager mode is enabled. Have added a command to disable it still it's getting activated."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33402", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33402/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33402/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33402/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33402", "id": 507577937, "node_id": "MDU6SXNzdWU1MDc1Nzc5Mzc=", "number": 33402, "title": "Please add TPU kernels for tf.linalg.[[s]log]det", "user": {"login": "sharvil", "id": 391004, "node_id": "MDQ6VXNlcjM5MTAwNA==", "avatar_url": "https://avatars1.githubusercontent.com/u/391004?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sharvil", "html_url": "https://github.com/sharvil", "followers_url": "https://api.github.com/users/sharvil/followers", "following_url": "https://api.github.com/users/sharvil/following{/other_user}", "gists_url": "https://api.github.com/users/sharvil/gists{/gist_id}", "starred_url": "https://api.github.com/users/sharvil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sharvil/subscriptions", "organizations_url": "https://api.github.com/users/sharvil/orgs", "repos_url": "https://api.github.com/users/sharvil/repos", "events_url": "https://api.github.com/users/sharvil/events{/privacy}", "received_events_url": "https://api.github.com/users/sharvil/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rmlarsen", "id": 16907534, "node_id": "MDQ6VXNlcjE2OTA3NTM0", "avatar_url": "https://avatars2.githubusercontent.com/u/16907534?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rmlarsen", "html_url": "https://github.com/rmlarsen", "followers_url": "https://api.github.com/users/rmlarsen/followers", "following_url": "https://api.github.com/users/rmlarsen/following{/other_user}", "gists_url": "https://api.github.com/users/rmlarsen/gists{/gist_id}", "starred_url": "https://api.github.com/users/rmlarsen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rmlarsen/subscriptions", "organizations_url": "https://api.github.com/users/rmlarsen/orgs", "repos_url": "https://api.github.com/users/rmlarsen/repos", "events_url": "https://api.github.com/users/rmlarsen/events{/privacy}", "received_events_url": "https://api.github.com/users/rmlarsen/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-10-16T02:39:42Z", "updated_at": "2019-10-22T22:00:44Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.15\r\n- Are you willing to contribute it (Yes/No): No\r\n\r\n**Describe the feature and the current behavior/state.**\r\nAdding determinant kernels (along with gradients) will allow us to train Normalizing Flow models on TPUs.\r\n\r\n**Will this change the current api? How?**\r\n\r\n**Who will benefit with this feature?**\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33391", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33391/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33391/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33391/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33391", "id": 507434939, "node_id": "MDU6SXNzdWU1MDc0MzQ5Mzk=", "number": 33391, "title": "TensorFlow documentation should be associated with the applicable specific versions of TensorFlow", "user": {"login": "nbro", "id": 9349000, "node_id": "MDQ6VXNlcjkzNDkwMDA=", "avatar_url": "https://avatars2.githubusercontent.com/u/9349000?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nbro", "html_url": "https://github.com/nbro", "followers_url": "https://api.github.com/users/nbro/followers", "following_url": "https://api.github.com/users/nbro/following{/other_user}", "gists_url": "https://api.github.com/users/nbro/gists{/gist_id}", "starred_url": "https://api.github.com/users/nbro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nbro/subscriptions", "organizations_url": "https://api.github.com/users/nbro/orgs", "repos_url": "https://api.github.com/users/nbro/repos", "events_url": "https://api.github.com/users/nbro/events{/privacy}", "received_events_url": "https://api.github.com/users/nbro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "dynamicwebpaige", "id": 3712347, "node_id": "MDQ6VXNlcjM3MTIzNDc=", "avatar_url": "https://avatars2.githubusercontent.com/u/3712347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dynamicwebpaige", "html_url": "https://github.com/dynamicwebpaige", "followers_url": "https://api.github.com/users/dynamicwebpaige/followers", "following_url": "https://api.github.com/users/dynamicwebpaige/following{/other_user}", "gists_url": "https://api.github.com/users/dynamicwebpaige/gists{/gist_id}", "starred_url": "https://api.github.com/users/dynamicwebpaige/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dynamicwebpaige/subscriptions", "organizations_url": "https://api.github.com/users/dynamicwebpaige/orgs", "repos_url": "https://api.github.com/users/dynamicwebpaige/repos", "events_url": "https://api.github.com/users/dynamicwebpaige/events{/privacy}", "received_events_url": "https://api.github.com/users/dynamicwebpaige/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-10-15T19:22:26Z", "updated_at": "2019-10-16T11:32:50Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\n\r\nPlease provide a link to the documentation entry, for example:\r\nhttps://www.tensorflow.org/guide/gpu\r\n\r\n## Description of issue (what needs changing):\r\n\r\nI was reading this documentation page https://www.tensorflow.org/guide/gpu, but it is **unclear** which TensorFlow version the documentation applies to. Especially now that a stable version of TF 2 has been released, it is important to clarify which TF version the documentation refers to. \r\n\r\nOn the top bar of the linked webpage, there is a menu called API, where you can select the API you are interested in. Right now, the sub-menu corresponding to the specific version of TF I am reading is not even highlighted, so I don't know if I am reading the documentation for TF 1 or 2. To confuse people even further, even though I think I am reading the documentation for TF 2, in another top bar, it is written `TF 1`. \r\n\r\nGiven that I am confused, another person can also be confused, so the documentation needs to be clarified. So, I suggest that every documentation page is associated (**in a very clear way**) with all applicable TF versions."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33390", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33390/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33390/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33390/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33390", "id": 507434762, "node_id": "MDU6SXNzdWU1MDc0MzQ3NjI=", "number": 33390, "title": "Docker Image with a pre-built Tensorflow-gpu with a compute capability 3.0 GPUs", "user": {"login": "dmitryr117", "id": 5959314, "node_id": "MDQ6VXNlcjU5NTkzMTQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/5959314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dmitryr117", "html_url": "https://github.com/dmitryr117", "followers_url": "https://api.github.com/users/dmitryr117/followers", "following_url": "https://api.github.com/users/dmitryr117/following{/other_user}", "gists_url": "https://api.github.com/users/dmitryr117/gists{/gist_id}", "starred_url": "https://api.github.com/users/dmitryr117/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dmitryr117/subscriptions", "organizations_url": "https://api.github.com/users/dmitryr117/orgs", "repos_url": "https://api.github.com/users/dmitryr117/repos", "events_url": "https://api.github.com/users/dmitryr117/events{/privacy}", "received_events_url": "https://api.github.com/users/dmitryr117/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 1, "created_at": "2019-10-15T19:22:01Z", "updated_at": "2019-10-18T18:02:24Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 2.0\r\n\r\n**Describe the feature and the current behavior/state.**\r\nCurrently if someone has an older GPU - they have to build from source. However this is time-consuming and error-prone. I tried building it as per instructions with no luck.\r\n\r\n**Will this change the current api? How?**\r\n\r\n**Who will benefit with this feature?**\r\n If there was a docker image for legacy GPU CUDA support - it would help many people who still have a legacy GPU cards to make use of them to train their models without having to dash out hundreds of dollars on a new GPU card right away. Building from source is very time consuming and error prone.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33387", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33387/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33387/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33387/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33387", "id": 507392522, "node_id": "MDU6SXNzdWU1MDczOTI1MjI=", "number": 33387, "title": "[TF 2.0] Custom objects", "user": {"login": "tgpsantos", "id": 48353485, "node_id": "MDQ6VXNlcjQ4MzUzNDg1", "avatar_url": "https://avatars3.githubusercontent.com/u/48353485?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tgpsantos", "html_url": "https://github.com/tgpsantos", "followers_url": "https://api.github.com/users/tgpsantos/followers", "following_url": "https://api.github.com/users/tgpsantos/following{/other_user}", "gists_url": "https://api.github.com/users/tgpsantos/gists{/gist_id}", "starred_url": "https://api.github.com/users/tgpsantos/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tgpsantos/subscriptions", "organizations_url": "https://api.github.com/users/tgpsantos/orgs", "repos_url": "https://api.github.com/users/tgpsantos/repos", "events_url": "https://api.github.com/users/tgpsantos/events{/privacy}", "received_events_url": "https://api.github.com/users/tgpsantos/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "raziel", "id": 129535, "node_id": "MDQ6VXNlcjEyOTUzNQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/129535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raziel", "html_url": "https://github.com/raziel", "followers_url": "https://api.github.com/users/raziel/followers", "following_url": "https://api.github.com/users/raziel/following{/other_user}", "gists_url": "https://api.github.com/users/raziel/gists{/gist_id}", "starred_url": "https://api.github.com/users/raziel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raziel/subscriptions", "organizations_url": "https://api.github.com/users/raziel/orgs", "repos_url": "https://api.github.com/users/raziel/repos", "events_url": "https://api.github.com/users/raziel/events{/privacy}", "received_events_url": "https://api.github.com/users/raziel/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "raziel", "id": 129535, "node_id": "MDQ6VXNlcjEyOTUzNQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/129535?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raziel", "html_url": "https://github.com/raziel", "followers_url": "https://api.github.com/users/raziel/followers", "following_url": "https://api.github.com/users/raziel/following{/other_user}", "gists_url": "https://api.github.com/users/raziel/gists{/gist_id}", "starred_url": "https://api.github.com/users/raziel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raziel/subscriptions", "organizations_url": "https://api.github.com/users/raziel/orgs", "repos_url": "https://api.github.com/users/raziel/repos", "events_url": "https://api.github.com/users/raziel/events{/privacy}", "received_events_url": "https://api.github.com/users/raziel/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-10-15T17:51:33Z", "updated_at": "2019-10-17T09:21:15Z", "closed_at": null, "author_association": "NONE", "body": "Hello all,\r\n\r\nI have a keras file (.hdf5) that I've saved using TF 1.14 with custom operations (eg loss function). \r\nI recently upgraded to Tensorflow 2.0 and I was trying to convert this model to .tflite but I've seen that there is no 'custom_objects' argument. \r\nIs this an unnecessary argument had I saved the .hdf5 using the latest TF 2.0? Or is there any other new way to include this custom object when converting to .tflite?\r\n\r\nThank you in advance"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33382", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33382/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33382/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33382/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33382", "id": 507308549, "node_id": "MDU6SXNzdWU1MDczMDg1NDk=", "number": 33382, "title": "Bugs about dequantize operator calculation formula in SCALED mode", "user": {"login": "BluePaladin", "id": 29921062, "node_id": "MDQ6VXNlcjI5OTIxMDYy", "avatar_url": "https://avatars1.githubusercontent.com/u/29921062?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BluePaladin", "html_url": "https://github.com/BluePaladin", "followers_url": "https://api.github.com/users/BluePaladin/followers", "following_url": "https://api.github.com/users/BluePaladin/following{/other_user}", "gists_url": "https://api.github.com/users/BluePaladin/gists{/gist_id}", "starred_url": "https://api.github.com/users/BluePaladin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BluePaladin/subscriptions", "organizations_url": "https://api.github.com/users/BluePaladin/orgs", "repos_url": "https://api.github.com/users/BluePaladin/repos", "events_url": "https://api.github.com/users/BluePaladin/events{/privacy}", "received_events_url": "https://api.github.com/users/BluePaladin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ymodak", "id": 42785357, "node_id": "MDQ6VXNlcjQyNzg1MzU3", "avatar_url": "https://avatars1.githubusercontent.com/u/42785357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ymodak", "html_url": "https://github.com/ymodak", "followers_url": "https://api.github.com/users/ymodak/followers", "following_url": "https://api.github.com/users/ymodak/following{/other_user}", "gists_url": "https://api.github.com/users/ymodak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ymodak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ymodak/subscriptions", "organizations_url": "https://api.github.com/users/ymodak/orgs", "repos_url": "https://api.github.com/users/ymodak/repos", "events_url": "https://api.github.com/users/ymodak/events{/privacy}", "received_events_url": "https://api.github.com/users/ymodak/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-10-15T15:06:52Z", "updated_at": "2019-10-31T06:59:50Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: -\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: Python 2.7.12\r\n- Bazel version (if compiling from source): -\r\n- GCC/Compiler version (if compiling from source): -\r\n- CUDA/cuDNN version: -\r\n- GPU model and memory: -\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nUsing numpy to simulate the calculation formula in SCALED mode of the dequantize operator in tensorflow, you can't get the correct result.\r\n```\r\n# This is the method of dequantize operator in tensorflow kernel code written by me.\r\nif mode == \"SCALED\":\r\n    num_bits = size * 8\r\n    if dtype == \"uint8\":\r\n        limit_min = 0\r\n        limit_max = 1 << num_bits - 1\r\n        scalar_factor = max_range / limit_max\r\n    if dtype in (\"int8\", \"int32\"):\r\n        limit_min = -(1 << (num_bits - 1))\r\n        limit_max = -1 * limit_min - 1\r\n        scalar_factor = max(min_range / limit_min, max_range / limit_max)\r\n    res = input_tensor * scalar_factor\r\n```\r\n```\r\n# This is the code of dequantize operator in tensorflow kernel code written by c++.\r\nelse if (mode_ == QUANTIZE_MODE_SCALED) {\r\n    const float scale_factor =\r\n        std::numeric_limits<T>::min() == 0\r\n            ? (max_range / std::numeric_limits<T>::max())\r\n            : std::max(min_range / std::numeric_limits<T>::min(),\r\n                       max_range / std::numeric_limits<T>::max());\r\n    const auto& input_tensor = input.flat<T>();\r\n    output->flat<float>() =\r\n    input_tensor.template cast<int>().template cast<float>() * scale_factor;\r\n}\r\n```\r\n**Describe the expected behavior**\r\nthe code written by me should get the same result as the tensorflow c++ code.\r\nHowever, I got much different result.\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n```\r\n# Then, I write the code that can get the same result as the actual result of the tensorflow\r\nif mode == \"SCALED\":\r\n    m = max_range  # float32\r\n    if dtype == \"int8\" or dtype == \"int16\" or dtype == \"int32\":\r\n        # min&max fixed is float32\r\n        [min_fixed, max_fixed] = [-((1 << (num_bits - 1)) - 1), (1 << (num_bits - 1))-1]\r\n        s = 2.0 * m / (max_fixed - min_fixed)\r\n    if dtype == \"uint8\" or dtype == \"uint16\":\r\n        [min_fixed, max_fixed] = [0, (1 << num_bits) - 1]\r\n        s = m / (max_fixed - min_fixed)\r\n    z = input_tensor * s\r\n```\r\nIn my code, the _input_min_range_ param is redundant.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33381", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33381/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33381/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33381/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33381", "id": 507299659, "node_id": "MDU6SXNzdWU1MDcyOTk2NTk=", "number": 33381, "title": "[TFLite, Converter] Converting error on unusual dense layer", "user": {"login": "Vooblin", "id": 39566915, "node_id": "MDQ6VXNlcjM5NTY2OTE1", "avatar_url": "https://avatars2.githubusercontent.com/u/39566915?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Vooblin", "html_url": "https://github.com/Vooblin", "followers_url": "https://api.github.com/users/Vooblin/followers", "following_url": "https://api.github.com/users/Vooblin/following{/other_user}", "gists_url": "https://api.github.com/users/Vooblin/gists{/gist_id}", "starred_url": "https://api.github.com/users/Vooblin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Vooblin/subscriptions", "organizations_url": "https://api.github.com/users/Vooblin/orgs", "repos_url": "https://api.github.com/users/Vooblin/repos", "events_url": "https://api.github.com/users/Vooblin/events{/privacy}", "received_events_url": "https://api.github.com/users/Vooblin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "srjoglekar246", "id": 2099293, "node_id": "MDQ6VXNlcjIwOTkyOTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/2099293?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srjoglekar246", "html_url": "https://github.com/srjoglekar246", "followers_url": "https://api.github.com/users/srjoglekar246/followers", "following_url": "https://api.github.com/users/srjoglekar246/following{/other_user}", "gists_url": "https://api.github.com/users/srjoglekar246/gists{/gist_id}", "starred_url": "https://api.github.com/users/srjoglekar246/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srjoglekar246/subscriptions", "organizations_url": "https://api.github.com/users/srjoglekar246/orgs", "repos_url": "https://api.github.com/users/srjoglekar246/repos", "events_url": "https://api.github.com/users/srjoglekar246/events{/privacy}", "received_events_url": "https://api.github.com/users/srjoglekar246/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "srjoglekar246", "id": 2099293, "node_id": "MDQ6VXNlcjIwOTkyOTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/2099293?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srjoglekar246", "html_url": "https://github.com/srjoglekar246", "followers_url": "https://api.github.com/users/srjoglekar246/followers", "following_url": "https://api.github.com/users/srjoglekar246/following{/other_user}", "gists_url": "https://api.github.com/users/srjoglekar246/gists{/gist_id}", "starred_url": "https://api.github.com/users/srjoglekar246/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srjoglekar246/subscriptions", "organizations_url": "https://api.github.com/users/srjoglekar246/orgs", "repos_url": "https://api.github.com/users/srjoglekar246/repos", "events_url": "https://api.github.com/users/srjoglekar246/events{/privacy}", "received_events_url": "https://api.github.com/users/srjoglekar246/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-10-15T14:53:12Z", "updated_at": "2019-10-21T16:26:50Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: No\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): GIT_VERSION: 'v1.12.1-15611-g025365a736', VERSION: '2.0.0''\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source): 0.26.1\r\n- GCC/Compiler version (if compiling from source): GCC 8.3.0\r\n- CUDA/cuDNN version: No\r\n- GPU model and memory: No\r\n\r\n**Describe the current behavior**\r\nWhen run the code below, conversion errors appear that are in the logs below.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\n\r\nclass MyDense(tf.keras.layers.Layer):\r\n  def __init__(self, num_units, **kwargs):\r\n    super(MyDense, self).__init__(**kwargs)\r\n    self.num_units = num_units\r\n\r\n  def build(self, input_shape):\r\n    kernel_shape = [input_shape[-1], self.num_units * 2, self.num_units]\r\n    bias_shape = [self.num_units]\r\n\r\n    self.kernel = self.add_weight(\"kernel\", shape=kernel_shape, trainable=True)\r\n    self.bias = self.add_weight(\"bias\", shape=bias_shape, trainable=True)\r\n    super(MyDense, self).build(input_shape)\r\n\r\n  def call(self, inputs):\r\n    return tf.einsum(\"ac,cde->ade\", inputs, self.kernel) + self.bias\r\n\r\ninputs = tf.keras.Input(shape=(10,), dtype=tf.float32)\r\noutputs = MyDense(15)(inputs)\r\nmodel = tf.keras.Model(inputs=inputs, outputs=outputs)\r\nmodel.summary()\r\n\r\nconverter = tf.lite.TFLiteConverter.from_keras_model(model)\r\ntflite_model = converter.convert()\r\nprint(\"SUCCESS!\")\r\n```\r\n\r\n**Logs**\r\n```\r\n2019-10-15 14:43:59.548878: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: SSE4.1 SSE4.2 AVX AVX2 AVX512F FMA\r\n2019-10-15 14:43:59.566412: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 3100000000 Hz\r\n2019-10-15 14:43:59.567598: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x3502840 initialized for platform Host (this does not guarantee that XLA will be used). Devices:\r\n2019-10-15 14:43:59.567616: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version\r\nModel: \"model\"\r\n_________________________________________________________________\r\nLayer (type)                 Output Shape              Param #\r\n=================================================================\r\ninput_1 (InputLayer)         [(None, 10)]              0\r\n_________________________________________________________________\r\nmy_dense (MyDense)           (None, 30, 15)            4515\r\n=================================================================\r\nTotal params: 4,515\r\nTrainable params: 4,515\r\nNon-trainable params: 0\r\n_________________________________________________________________\r\n2019-10-15 14:43:59.640959: I tensorflow/core/grappler/devices.cc:60] Number of eligible GPUs (core count >= 8, compute capability >= 0.0): 0 (Note: TensorFlow was not compiled with CUDA support)\r\n2019-10-15 14:43:59.641037: I tensorflow/core/grappler/clusters/single_machine.cc:356] Starting new session\r\n2019-10-15 14:43:59.642744: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:829] Optimization results for grappler item: graph_to_optimize\r\n2019-10-15 14:43:59.642759: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:831]   function_optimizer: function_optimizer did nothing. time = 0.003ms.\r\n2019-10-15 14:43:59.642763: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:831]   function_optimizer: function_optimizer did nothing. time = 0ms.\r\n2019-10-15 14:43:59.657830: I tensorflow/core/grappler/devices.cc:60] Number of eligible GPUs (core count >= 8, compute capability >= 0.0): 0 (Note: TensorFlow was not compiled with CUDA support)\r\n2019-10-15 14:43:59.657896: I tensorflow/core/grappler/clusters/single_machine.cc:356] Starting new session\r\n2019-10-15 14:43:59.660184: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:829] Optimization results for grappler item: graph_to_optimize\r\n2019-10-15 14:43:59.660198: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:831]   constant_folding: Graph size after: 21 nodes (-3), 23 edges (-4), time = 0.76ms.\r\n2019-10-15 14:43:59.660203: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:831]   constant_folding: Graph size after: 21 nodes (0), 23 edges (0), time = 0.248ms.\r\nTraceback (most recent call last):\r\n File \"convert_error.py\", line 25, in <module>\r\n   tflite_model = converter.convert()\r\n File \"/workspace/.local/lib/python3.6/site-packages/tensorflow_core/lite/python/lite.py\", line 447, in convert\r\n   **converter_kwargs)\r\n File \"/workspace/.local/lib/python3.6/site-packages/tensorflow_core/lite/python/convert.py\", line 449, in toco_convert_impl\r\n   enable_mlir_converter=enable_mlir_converter)\r\n File \"/workspace/.local/lib/python3.6/site-packages/tensorflow_core/lite/python/convert.py\", line 200, in toco_convert_protos\r\n   raise ConverterError(\"See console for info.\\n%s\\n%s\\n\" % (stdout, stderr))\r\ntensorflow.lite.python.convert.ConverterError: See console for info.\r\n2019-10-15 14:44:00.554744: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before Removing unused ops: 10 operators, 19 arrays (0 quantized)\r\n2019-10-15 14:44:00.554825: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] Before general graph transformations: 10 operators, 19 arrays (0 quantized)\r\n2019-10-15 14:44:00.554930: I tensorflow/lite/toco/graph_transformations/graph_transformations.cc:39] After general graph transformations pass 1: 3 operators, 8 arrays (0 quantized)\r\n2019-10-15 14:44:00.554945: F tensorflow/lite/toco/graph_transformations/propagate_fixed_sizes.cc:118] Check failed: dim_x == dim_y (450 vs. 15)Dimensions must match\r\nFatal Python error: Aborted\r\nCurrent thread 0x00007f4cae2e4740 (most recent call first):\r\n File \"/workspace/.local/lib/python3.6/site-packages/tensorflow_core/lite/toco/python/toco_from_protos.py\", line 52 in execute\r\n File \"/workspace/.local/lib/python3.6/site-packages/absl/app.py\", line 250 in _run_main\r\n File \"/workspace/.local/lib/python3.6/site-packages/absl/app.py\", line 299 in run\r\n File \"/workspace/.local/lib/python3.6/site-packages/tensorflow_core/python/platform/app.py\", line 40 in run\r\n File \"/workspace/.local/lib/python3.6/site-packages/tensorflow_core/lite/toco/python/toco_from_protos.py\", line 89 in main\r\n File \"/workspace/.local/bin//toco_from_protos\", line 10 in <module>\r\nAborted (core dumped)\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33374", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33374/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33374/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33374/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33374", "id": 507237780, "node_id": "MDU6SXNzdWU1MDcyMzc3ODA=", "number": 33374, "title": "can't install with python3.8", "user": {"login": "amitport", "id": 1131991, "node_id": "MDQ6VXNlcjExMzE5OTE=", "avatar_url": "https://avatars1.githubusercontent.com/u/1131991?v=4", "gravatar_id": "", "url": "https://api.github.com/users/amitport", "html_url": "https://github.com/amitport", "followers_url": "https://api.github.com/users/amitport/followers", "following_url": "https://api.github.com/users/amitport/following{/other_user}", "gists_url": "https://api.github.com/users/amitport/gists{/gist_id}", "starred_url": "https://api.github.com/users/amitport/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/amitport/subscriptions", "organizations_url": "https://api.github.com/users/amitport/orgs", "repos_url": "https://api.github.com/users/amitport/repos", "events_url": "https://api.github.com/users/amitport/events{/privacy}", "received_events_url": "https://api.github.com/users/amitport/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 79, "created_at": "2019-10-15T13:15:44Z", "updated_at": "2020-03-16T17:08:14Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): pip\r\n- TensorFlow version: 2\r\n- Python version: 3.8\r\n- Installed using virtualenv? pip? conda?: venv\r\n- Bazel version (if compiling from source): NA\r\n- GCC/Compiler version (if compiling from source): NA\r\n- CUDA/cuDNN version: NA\r\n- GPU model and memory: NA\r\n\r\n\r\n\r\n**Describe the problem**\r\n cant install tensorflow\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\ninstall python 3.8\r\ncreate a new venv\r\n`venv> pip install tensorflow`\r\nfails with `ERROR: Could not find a version that satisfies the requirement tensorflow (from versions: none)\r\nERROR: No matching distribution found for tensorflow`\r\n\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\n\r\nEDIT: I guess you don't provide binaries for python 3.8 (https://pypi.org/project/tensorflow/#files)\r\nis there another issue I can subscribe for about support for python 3.8? (couldn't find one, so keeping this open for now)"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33360", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33360/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33360/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33360/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33360", "id": 506939034, "node_id": "MDU6SXNzdWU1MDY5MzkwMzQ=", "number": 33360, "title": "TensorFlow source cannot be compiled with -c dbg", "user": {"login": "bas-aarts", "id": 10091048, "node_id": "MDQ6VXNlcjEwMDkxMDQ4", "avatar_url": "https://avatars1.githubusercontent.com/u/10091048?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bas-aarts", "html_url": "https://github.com/bas-aarts", "followers_url": "https://api.github.com/users/bas-aarts/followers", "following_url": "https://api.github.com/users/bas-aarts/following{/other_user}", "gists_url": "https://api.github.com/users/bas-aarts/gists{/gist_id}", "starred_url": "https://api.github.com/users/bas-aarts/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bas-aarts/subscriptions", "organizations_url": "https://api.github.com/users/bas-aarts/orgs", "repos_url": "https://api.github.com/users/bas-aarts/repos", "events_url": "https://api.github.com/users/bas-aarts/events{/privacy}", "received_events_url": "https://api.github.com/users/bas-aarts/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 1222092379, "node_id": "MDU6TGFiZWwxMjIyMDkyMzc5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:bazel", "name": "subtype:bazel", "color": "b619ea", "default": false, "description": "Bazel related Build_Installation issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-10-15T00:40:07Z", "updated_at": "2020-01-09T10:41:30Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "When compiling the TensorFlow sources (at 776b99925c1fe0d045b363f7437c21a5a9ce2357) with:\r\nbazel build -c dbg -j 24 --config=opt //tensorflow/tools/pip_package:build_pip_package\r\n\r\nit produces many errors like:\r\n```\r\nexternal/arm_neon_2_x86_sse/NEON_2_SSE.h:2296:30: error: selector must be an integer constant in the range 0..7\r\n     #define _MM_INSERT_EPI16 _mm_insert_epi16\r\n                              ^\r\nexternal/arm_neon_2_x86_sse/NEON_2_SSE.h:9369:40: note: in expansion of macro '_MM_INSERT_EPI16'\r\n #define vld1q_lane_s16(ptr, vec, lane) _MM_INSERT_EPI16(vec, *(ptr), lane)\r\n                                        ^~~~~~~~~~~~~~~~\r\nexternal/arm_neon_2_x86_sse/NEON_2_SSE.h:12090:12: note: in expansion of macro 'vld1q_lane_s16'\r\n     return vld1q_lane_s16(&val, vec,  lane);\r\n```\r\nThis started when the TF build moved to C++14 compilation. It works fine with C++11.\r\nI distilled it down to the following piece of code:\r\n```\r\ntypedef short __v8hi __attribute__ ((__vector_size__ (16)));\r\nextern inline __attribute__((__gnu_inline__, __always_inline__, __artificial__))\r\n__v8hi vsetq_lane_s16(__v8hi x,const int l)\r\n{ return __builtin_ia32_vec_set_v8hi(x,0,(l)); }\r\nvoid ff(__v8hi x) { vsetq_lane_s16(x,0);}```\r\n\r\nWhen compiling this with\r\ng++ -std=c++11 x.cc -c\r\nit compiles just fine. When compiling with\r\ng++ -std=c++14 x.cc -c\r\nit produces:\r\nx.cc: In function \u2018void ff(__v8hi)\u2019:\r\nx.cc:6:47: error: selector must be an integer constant in the range 0..7\r\n     return __builtin_ia32_vec_set_v8hi(x,0,(l));\r\n```\r\n\r\nsome details:\r\n- removing the \"const\" from the formal argument makes C++11 fail as well\r\n- removing the () around \"l\" makes c++14 pass\r\n- int(l) in stead of (l) make c++14 pass, but (int)(l) still fails\r\n\r\nTried gcc 7.4.0 with glibc 2.27 on ubuntu 18.04\r\nand gcc 5.4.0 with glibc 2.23 on ubuntu 16.04"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33345", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33345/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33345/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33345/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33345", "id": 506787789, "node_id": "MDU6SXNzdWU1MDY3ODc3ODk=", "number": 33345, "title": "keras optimizer `apply_gradients` arg `grads_and_vars` has wrong type in documentation", "user": {"login": "koenhelwegen", "id": 29484762, "node_id": "MDQ6VXNlcjI5NDg0NzYy", "avatar_url": "https://avatars1.githubusercontent.com/u/29484762?v=4", "gravatar_id": "", "url": "https://api.github.com/users/koenhelwegen", "html_url": "https://github.com/koenhelwegen", "followers_url": "https://api.github.com/users/koenhelwegen/followers", "following_url": "https://api.github.com/users/koenhelwegen/following{/other_user}", "gists_url": "https://api.github.com/users/koenhelwegen/gists{/gist_id}", "starred_url": "https://api.github.com/users/koenhelwegen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/koenhelwegen/subscriptions", "organizations_url": "https://api.github.com/users/koenhelwegen/orgs", "repos_url": "https://api.github.com/users/koenhelwegen/repos", "events_url": "https://api.github.com/users/koenhelwegen/events{/privacy}", "received_events_url": "https://api.github.com/users/koenhelwegen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-10-14T17:40:44Z", "updated_at": "2019-10-16T10:44:56Z", "closed_at": null, "author_association": "NONE", "body": "## URL(s) with the issue:\r\n\r\nhttps://github.com/tensorflow/tensorflow/blob/516c98da7b7d8526c153827c426c675a4ece9543/tensorflow/python/keras/optimizer_v2/optimizer_v2.py#L414\r\n\r\n## Description of issue (what needs changing):\r\n\r\n`grads_and_vars` is documented as list but is actually passed as `zip object`.\r\n\r\n### Clear description\r\n\r\nThis can be problematic when writing custom optimizers that iterate over the `grads_and_vars` multiple times, as in that case a `zip object` will not give the intended behaviour.\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33341", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33341/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33341/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33341/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33341", "id": 506733497, "node_id": "MDU6SXNzdWU1MDY3MzM0OTc=", "number": 33341, "title": "TF lite implementation for RandomStandardNormal", "user": {"login": "DocDriven", "id": 30296124, "node_id": "MDQ6VXNlcjMwMjk2MTI0", "avatar_url": "https://avatars2.githubusercontent.com/u/30296124?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DocDriven", "html_url": "https://github.com/DocDriven", "followers_url": "https://api.github.com/users/DocDriven/followers", "following_url": "https://api.github.com/users/DocDriven/following{/other_user}", "gists_url": "https://api.github.com/users/DocDriven/gists{/gist_id}", "starred_url": "https://api.github.com/users/DocDriven/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DocDriven/subscriptions", "organizations_url": "https://api.github.com/users/DocDriven/orgs", "repos_url": "https://api.github.com/users/DocDriven/repos", "events_url": "https://api.github.com/users/DocDriven/events{/privacy}", "received_events_url": "https://api.github.com/users/DocDriven/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "miaout17", "id": 22063, "node_id": "MDQ6VXNlcjIyMDYz", "avatar_url": "https://avatars0.githubusercontent.com/u/22063?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miaout17", "html_url": "https://github.com/miaout17", "followers_url": "https://api.github.com/users/miaout17/followers", "following_url": "https://api.github.com/users/miaout17/following{/other_user}", "gists_url": "https://api.github.com/users/miaout17/gists{/gist_id}", "starred_url": "https://api.github.com/users/miaout17/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miaout17/subscriptions", "organizations_url": "https://api.github.com/users/miaout17/orgs", "repos_url": "https://api.github.com/users/miaout17/repos", "events_url": "https://api.github.com/users/miaout17/events{/privacy}", "received_events_url": "https://api.github.com/users/miaout17/received_events", "type": "User", "site_admin": false}, {"login": "jaeyoo", "id": 40815393, "node_id": "MDQ6VXNlcjQwODE1Mzkz", "avatar_url": "https://avatars1.githubusercontent.com/u/40815393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jaeyoo", "html_url": "https://github.com/jaeyoo", "followers_url": "https://api.github.com/users/jaeyoo/followers", "following_url": "https://api.github.com/users/jaeyoo/following{/other_user}", "gists_url": "https://api.github.com/users/jaeyoo/gists{/gist_id}", "starred_url": "https://api.github.com/users/jaeyoo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jaeyoo/subscriptions", "organizations_url": "https://api.github.com/users/jaeyoo/orgs", "repos_url": "https://api.github.com/users/jaeyoo/repos", "events_url": "https://api.github.com/users/jaeyoo/events{/privacy}", "received_events_url": "https://api.github.com/users/jaeyoo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-10-14T15:43:20Z", "updated_at": "2019-12-09T01:50:21Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): Docker image tf-nightly-gpu-py3\r\n- TensorFlow version (or github SHA if from source): 3.6.8\r\n\r\n\r\n**Provide the text output from tflite_convert**\r\n\r\n```\r\nSome of the operators in the model are not supported by the standard TensorFlow Lite runtime. If those are native TensorFlow operators, you might be able to use the extended runtime by passing --enable_select_tf_ops, or by setting target_ops=TFLITE_BUILTINS,SELECT_TF_OPS when calling tf.lite.TFLiteConverter(). Otherwise, if you have a custom implementation for them you can disable this error with --allow_custom_ops, or by setting allow_custom_ops=True when calling tf.lite.TFLiteConverter(). Here is a list of builtin operators you are using: ADD, EXP, FULLY_CONNECTED, LEAKY_RELU, LOG, MUL. Here is a list of operators for which you will need custom implementations: RandomStandardNormal.\r\n```\r\n\r\nVAE model was taken from your custom layers and models site ([here](https://www.tensorflow.org/guide/keras/custom_layers_and_models#building_models)). The line of code producing this exception is\r\n`epsilon = tf.keras.backend.random_normal(shape=(batch, dim))`.\r\n\r\nIt might be a good idea to add a tflite implementation for this function so that people can try a conversion with your existing examples.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33336", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33336/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33336/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33336/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33336", "id": 506646575, "node_id": "MDU6SXNzdWU1MDY2NDY1NzU=", "number": 33336, "title": "tf.sparse.sparse_dense_matmul can't broadcast as tf.linalg.matmul does.", "user": {"login": "breadbread1984", "id": 1930282, "node_id": "MDQ6VXNlcjE5MzAyODI=", "avatar_url": "https://avatars0.githubusercontent.com/u/1930282?v=4", "gravatar_id": "", "url": "https://api.github.com/users/breadbread1984", "html_url": "https://github.com/breadbread1984", "followers_url": "https://api.github.com/users/breadbread1984/followers", "following_url": "https://api.github.com/users/breadbread1984/following{/other_user}", "gists_url": "https://api.github.com/users/breadbread1984/gists{/gist_id}", "starred_url": "https://api.github.com/users/breadbread1984/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/breadbread1984/subscriptions", "organizations_url": "https://api.github.com/users/breadbread1984/orgs", "repos_url": "https://api.github.com/users/breadbread1984/repos", "events_url": "https://api.github.com/users/breadbread1984/events{/privacy}", "received_events_url": "https://api.github.com/users/breadbread1984/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-10-14T13:15:06Z", "updated_at": "2019-11-15T23:38:42Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 2.1.0\r\n- Are you willing to contribute it (Yes/No): No\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\ntf.sparse.sparse_dense_matmul can't broadcast on the leading dimensions. the following code is an example.\r\n\r\n```python\r\n#!/usr/bin/python3\r\n\r\nimport numpy as np;\r\nimport tensorflow as tf;\r\n\r\ndef main():\r\n\r\n    a = tf.sparse.SparseTensor(\r\n        indices = [[0, 0, 1], [0, 0, 2], [0, 1, 2], [0, 1, 3], [0, 2, 1], [0, 2, 3]],\r\n        values = [1., 1., 1., 1., 1., 1.],\r\n        dense_shape = [1, 3, 4]\r\n    ); # a.shape = (1,3,4)\r\n    b = tf.constant(np.random.normal(size = (4, 4, 5)), dtype = tf.float32);\r\n    c = tf.linalg.matmul(tf.sparse.to_dense(a),b); # will be succeed\r\n    c = tf.sparse.sparse_dense_matmul(a,b); # will be fail\r\n\r\nif __name__ == \"__main__\":\r\n\r\n    main();\r\n```\r\n\r\n**Will this change the current api? How?**\r\n\r\nno api need to be changed.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nuser handling sparse matrices will be benefit from the change.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33332", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33332/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33332/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33332/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33332", "id": 506630874, "node_id": "MDU6SXNzdWU1MDY2MzA4NzQ=", "number": 33332, "title": "How can I change variable on the layer ( fine tuning )", "user": {"login": "abdou31", "id": 19480228, "node_id": "MDQ6VXNlcjE5NDgwMjI4", "avatar_url": "https://avatars3.githubusercontent.com/u/19480228?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abdou31", "html_url": "https://github.com/abdou31", "followers_url": "https://api.github.com/users/abdou31/followers", "following_url": "https://api.github.com/users/abdou31/following{/other_user}", "gists_url": "https://api.github.com/users/abdou31/gists{/gist_id}", "starred_url": "https://api.github.com/users/abdou31/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abdou31/subscriptions", "organizations_url": "https://api.github.com/users/abdou31/orgs", "repos_url": "https://api.github.com/users/abdou31/repos", "events_url": "https://api.github.com/users/abdou31/events{/privacy}", "received_events_url": "https://api.github.com/users/abdou31/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 1105108936, "node_id": "MDU6TGFiZWwxMTA1MTA4OTM2", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:model", "name": "comp:model", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-10-14T12:45:54Z", "updated_at": "2019-10-16T06:31:54Z", "closed_at": null, "author_association": "NONE", "body": "\r\n------------------------\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: Yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Windows 10 x64\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\n- **TensorFlow installed from (source or binary)**: binary\r\n- **TensorFlow version (use command below)**:1.13.1\r\n- **Python version**:3.6.4\r\n- **Bazel version (if compiling from source)**:\r\n- **GCC/Compiler version (if compiling from source)**:\r\n- **CUDA/cuDNN version**:9.0/7.4\r\n- **GPU model and memory**:Nvidia Geforce 840m\r\n- **Exact command to reproduce**: N/A\r\n\r\n### Describe the problem\r\nI have a pre-trained model that detects the whole face with 68 key points, I would like to use this pre-trained model to train my dataset for detecting only the eye region ( 40 points ).\r\nSo I need to change the value of units on the logits layer from 136(68 * 2) to 80(40 * 2).\r\nI see an answer on Stackoverflow that I should use the fine-tuning, how can I use this technique to change some variables on the frozen model (.pb) ?\r\n\r\n![mdlrp](https://user-images.githubusercontent.com/19480228/66752207-2f22f700-ee91-11e9-802c-3a40c540078d.PNG)\r\n\r\nHope I get an answer.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33316", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33316/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33316/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33316/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33316", "id": 506430396, "node_id": "MDU6SXNzdWU1MDY0MzAzOTY=", "number": 33316, "title": "With lazy_import tensorflow cannot be imported", "user": {"login": "wookayin", "id": 1009873, "node_id": "MDQ6VXNlcjEwMDk4NzM=", "avatar_url": "https://avatars3.githubusercontent.com/u/1009873?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wookayin", "html_url": "https://github.com/wookayin", "followers_url": "https://api.github.com/users/wookayin/followers", "following_url": "https://api.github.com/users/wookayin/following{/other_user}", "gists_url": "https://api.github.com/users/wookayin/gists{/gist_id}", "starred_url": "https://api.github.com/users/wookayin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wookayin/subscriptions", "organizations_url": "https://api.github.com/users/wookayin/orgs", "repos_url": "https://api.github.com/users/wookayin/repos", "events_url": "https://api.github.com/users/wookayin/events{/privacy}", "received_events_url": "https://api.github.com/users/wookayin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-10-14T03:25:14Z", "updated_at": "2019-11-01T15:34:11Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 16.04 (and gLinux)\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): pip binary\r\n- TensorFlow version: 1.15.0.{rc1,rc2,rc3}\r\n- Python version: python 3.6.8\r\n- Installed using virtualenv? pip? conda?: anaconda\r\n- Bazel version (if compiling from source): -\r\n- GCC/Compiler version (if compiling from source): -\r\n- CUDA/cuDNN version: -\r\n- GPU model and memory: -\r\n\r\n\r\n**Describe the problem**\r\n\r\nThe following works correctly:\r\n\r\n```bash \r\n$ python -c 'import tensorflow as tf; print(tf.__version__)'\r\n1.15.0-rc3\r\n```\r\n\r\nIn an interactive shell:\r\n\r\n```python\r\nimport tensorflow as tf\r\n```\r\n\r\nI get the following error: `ValueError: operator __getitem__ cannot be overwritten again on class <class 'tensorflow.python.framework.ops.Tensor'>`.\r\n\r\n**This happens when [`lazy_import`](https://github.com/mnmelo/lazy_import) is installed.** I think tensorflow's internal lazy_import has a conflict with some external library. TF 1.14 has no problem.\r\n\r\nThough lazy_import is a third-party library, I think what it is doing is pretty non-hacky. Since this bug has appeared since 1.15.dev, we will need to have this fixed in the release version (given that 1.15 will be the last 1.x release).\r\n\r\nTraceback:\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/$HOME/.miniconda3/envs/ace-base/lib/python3.6/site-packages/tensorflow/__init__.py\", line 99, in <module>\r\n    from tensorflow_core import *\r\n  File \"/$HOME/.miniconda3/envs/ace-base/lib/python3.6/site-packages/tensorflow_core/__init__.py\", line 34, in <module>\r\n    from tensorflow._api.v1 import autograph\r\n  File \"/$HOME/.miniconda3/envs/ace-base/lib/python3.6/site-packages/tensorflow_core/_api/v1/autograph/__init__.py\", line 22, in <module>\r\n    from tensorflow._api.v1.autograph import experimental\r\n  File \"/$HOME/.miniconda3/envs/ace-base/lib/python3.6/site-packages/tensorflow_core/_api/v1/autograph/experimental/__init__.py\", line 10, in <module>\r\n    from tensorflow.python.autograph.core.converter import Feature\r\n  File \"/$HOME/.miniconda3/envs/ace-base/lib/python3.6/site-packages/tensorflow_core/python/autograph/__init__.py\", line 35, in <module>\r\n    from tensorflow.python.autograph import operators\r\n  File \"/$HOME/.miniconda3/envs/ace-base/lib/python3.6/site-packages/tensorflow_core/python/autograph/operators/__init__.py\", line 40, in <module>\r\n    from tensorflow.python.autograph.operators.control_flow import for_stmt\r\n  File \"/$HOME/.miniconda3/envs/ace-base/lib/python3.6/site-packages/tensorflow_core/python/autograph/operators/control_flow.py\", line 65, in <module>\r\n    from tensorflow.python.autograph.operators import py_builtins\r\n  File \"/$HOME/.miniconda3/envs/ace-base/lib/python3.6/site-packages/tensorflow_core/python/autograph/operators/py_builtins.py\", line 28, in <module>\r\n    from tensorflow.python.autograph.utils import py_func\r\n  File \"/$HOME/.miniconda3/envs/ace-base/lib/python3.6/site-packages/tensorflow_core/python/autograph/utils/__init__.py\", line 21, in <module>\r\n    from tensorflow.python.autograph.utils.context_managers import control_dependency_on_returns\r\n  File \"/$HOME/.miniconda3/envs/ace-base/lib/python3.6/site-packages/tensorflow_core/python/autograph/utils/context_managers.py\", line 24, in <module>\r\n    from tensorflow.python.ops import tensor_array_ops\r\n  File \"/$HOME/.miniconda3/envs/ace-base/lib/python3.6/site-packages/tensorflow_core/python/ops/tensor_array_ops.py\", line 35, in <module>\r\n    from tensorflow.python.ops import array_ops\r\n  File \"/$HOME/.miniconda3/envs/ace-base/lib/python3.6/site-packages/tensorflow_core/python/ops/array_ops.py\", line 1045, in <module>\r\n    ops.Tensor._override_operator(\"__getitem__\", _slice_helper)\r\n  File \"/$HOME/.miniconda3/envs/ace-base/lib/python3.6/site-packages/tensorflow_core/python/framework/ops.py\", line 745, in _override_operator\r\n    _override_helper(Tensor, operator, func)\r\n  File \"/$HOME/.miniconda3/envs/ace-base/lib/python3.6/site-packages/tensorflow_core/python/framework/ops.py\", line 177, in _override_helper\r\n    (operator, clazz_object))\r\nValueError: operator __getitem__ cannot be overwritten again on class <class 'tensorflow.python.framework.ops.Tensor'>.\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33315", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33315/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33315/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33315/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33315", "id": 506422669, "node_id": "MDU6SXNzdWU1MDY0MjI2Njk=", "number": 33315, "title": "Training slows down with repeated calls to Model.fit()", "user": {"login": "dlop", "id": 10569080, "node_id": "MDQ6VXNlcjEwNTY5MDgw", "avatar_url": "https://avatars3.githubusercontent.com/u/10569080?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dlop", "html_url": "https://github.com/dlop", "followers_url": "https://api.github.com/users/dlop/followers", "following_url": "https://api.github.com/users/dlop/following{/other_user}", "gists_url": "https://api.github.com/users/dlop/gists{/gist_id}", "starred_url": "https://api.github.com/users/dlop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dlop/subscriptions", "organizations_url": "https://api.github.com/users/dlop/orgs", "repos_url": "https://api.github.com/users/dlop/repos", "events_url": "https://api.github.com/users/dlop/events{/privacy}", "received_events_url": "https://api.github.com/users/dlop/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": null, "assignees": [], "milestone": null, "comments": 5, "created_at": "2019-10-14T02:40:04Z", "updated_at": "2020-02-08T01:09:37Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10 Version 1903\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): Binary\r\n- TensorFlow version (use command below): v2.0.0-rc2-26-g64c3d382ca 2.0.0\r\n- Python version: 3.6.5 (v3.6.5:f59c0932b4, Mar 28 2018, 17:00:18) [MSC v.1900 64 bit (AMD64)]\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n**Describe the current behavior**\r\nCalls to `tf.keras.Model.fit()` run slower and slower the more there have been. The sample code below reports about 200 us/sample at the start but after running for 20 minutes report about 400 us per sample. This continues to increase with no apparent upper limit. It remains slow even when training subsequent models but resets to fast after restarting the program.\r\n\r\n**Describe the expected behavior**\r\nNo long term upward trend in training time.\r\n\r\n**Code to reproduce the issue**\r\n\r\n    import numpy\r\n    import tensorflow as tf\r\n    input = tf.keras.Input(shape=(1600,))\r\n    z = tf.keras.layers.Dense(units=200, activation='relu')(input)\r\n    z = tf.keras.layers.Dense(units=1)(z)\r\n    model = tf.keras.Model(inputs=input, outputs=z)\r\n    model.compile(loss='mse')\r\n    x = numpy.full((100,1600), fill_value=2.34, dtype=numpy.float32)\r\n    y = numpy.full((100,1), fill_value=1.23, dtype=numpy.float32)\r\n    while True:\r\n      tf.keras.backend.clear_session()\r\n      model.fit(x=x, y=y)\r\n\r\n\r\n**Other info / logs**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33312", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33312/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33312/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33312/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/33312", "id": 506365284, "node_id": "MDExOlB1bGxSZXF1ZXN0MzI3NTgyNDg4", "number": 33312, "title": "Fix discrepancy between tf.io.gfile.mkdir and os.mkdir's created mode", "user": {"login": "yongtang", "id": 6932348, "node_id": "MDQ6VXNlcjY5MzIzNDg=", "avatar_url": "https://avatars0.githubusercontent.com/u/6932348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yongtang", "html_url": "https://github.com/yongtang", "followers_url": "https://api.github.com/users/yongtang/followers", "following_url": "https://api.github.com/users/yongtang/following{/other_user}", "gists_url": "https://api.github.com/users/yongtang/gists{/gist_id}", "starred_url": "https://api.github.com/users/yongtang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yongtang/subscriptions", "organizations_url": "https://api.github.com/users/yongtang/orgs", "repos_url": "https://api.github.com/users/yongtang/repos", "events_url": "https://api.github.com/users/yongtang/events{/privacy}", "received_events_url": "https://api.github.com/users/yongtang/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1178505529, "node_id": "MDU6TGFiZWwxMTc4NTA1NTI5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/prtype:bugfix", "name": "prtype:bugfix", "color": "159b2e", "default": false, "description": "PR to fix a bug"}, {"id": 1169364458, "node_id": "MDU6TGFiZWwxMTY5MzY0NDU4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:S", "name": "size:S", "color": "adafea", "default": false, "description": "CL Change Size: Small"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-10-13T18:55:06Z", "updated_at": "2020-03-11T08:35:22Z", "closed_at": null, "author_association": "MEMBER", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/33312", "html_url": "https://github.com/tensorflow/tensorflow/pull/33312", "diff_url": "https://github.com/tensorflow/tensorflow/pull/33312.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/33312.patch"}, "body": "This fix tries to address the issue raised in #32963 where the modes of the directory created between tf.io.gfile.mkdir and os.mkdir are different (one is 0777 and another is 0755).\r\n\r\nThis fix fixes the issue.\r\n\r\nThis fix fixes #32963.\r\n\r\nSigned-off-by: Yong Tang <yong.tang.github@outlook.com>\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33309", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33309/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33309/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33309/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33309", "id": 506346918, "node_id": "MDU6SXNzdWU1MDYzNDY5MTg=", "number": 33309, "title": "tf_upgrade_v2 is not reporting issues related to invalid imports in TensorFlow 2", "user": {"login": "nbro", "id": 9349000, "node_id": "MDQ6VXNlcjkzNDkwMDA=", "avatar_url": "https://avatars2.githubusercontent.com/u/9349000?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nbro", "html_url": "https://github.com/nbro", "followers_url": "https://api.github.com/users/nbro/followers", "following_url": "https://api.github.com/users/nbro/following{/other_user}", "gists_url": "https://api.github.com/users/nbro/gists{/gist_id}", "starred_url": "https://api.github.com/users/nbro/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nbro/subscriptions", "organizations_url": "https://api.github.com/users/nbro/orgs", "repos_url": "https://api.github.com/users/nbro/repos", "events_url": "https://api.github.com/users/nbro/events{/privacy}", "received_events_url": "https://api.github.com/users/nbro/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "martinwicke", "id": 577277, "node_id": "MDQ6VXNlcjU3NzI3Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/577277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinwicke", "html_url": "https://github.com/martinwicke", "followers_url": "https://api.github.com/users/martinwicke/followers", "following_url": "https://api.github.com/users/martinwicke/following{/other_user}", "gists_url": "https://api.github.com/users/martinwicke/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinwicke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinwicke/subscriptions", "organizations_url": "https://api.github.com/users/martinwicke/orgs", "repos_url": "https://api.github.com/users/martinwicke/repos", "events_url": "https://api.github.com/users/martinwicke/events{/privacy}", "received_events_url": "https://api.github.com/users/martinwicke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "martinwicke", "id": 577277, "node_id": "MDQ6VXNlcjU3NzI3Nw==", "avatar_url": "https://avatars2.githubusercontent.com/u/577277?v=4", "gravatar_id": "", "url": "https://api.github.com/users/martinwicke", "html_url": "https://github.com/martinwicke", "followers_url": "https://api.github.com/users/martinwicke/followers", "following_url": "https://api.github.com/users/martinwicke/following{/other_user}", "gists_url": "https://api.github.com/users/martinwicke/gists{/gist_id}", "starred_url": "https://api.github.com/users/martinwicke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/martinwicke/subscriptions", "organizations_url": "https://api.github.com/users/martinwicke/orgs", "repos_url": "https://api.github.com/users/martinwicke/repos", "events_url": "https://api.github.com/users/martinwicke/events{/privacy}", "received_events_url": "https://api.github.com/users/martinwicke/received_events", "type": "User", "site_admin": false}, {"login": "tomerk", "id": 676357, "node_id": "MDQ6VXNlcjY3NjM1Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/676357?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tomerk", "html_url": "https://github.com/tomerk", "followers_url": "https://api.github.com/users/tomerk/followers", "following_url": "https://api.github.com/users/tomerk/following{/other_user}", "gists_url": "https://api.github.com/users/tomerk/gists{/gist_id}", "starred_url": "https://api.github.com/users/tomerk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tomerk/subscriptions", "organizations_url": "https://api.github.com/users/tomerk/orgs", "repos_url": "https://api.github.com/users/tomerk/repos", "events_url": "https://api.github.com/users/tomerk/events{/privacy}", "received_events_url": "https://api.github.com/users/tomerk/received_events", "type": "User", "site_admin": false}, {"login": "annarev", "id": 22060313, "node_id": "MDQ6VXNlcjIyMDYwMzEz", "avatar_url": "https://avatars0.githubusercontent.com/u/22060313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/annarev", "html_url": "https://github.com/annarev", "followers_url": "https://api.github.com/users/annarev/followers", "following_url": "https://api.github.com/users/annarev/following{/other_user}", "gists_url": "https://api.github.com/users/annarev/gists{/gist_id}", "starred_url": "https://api.github.com/users/annarev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/annarev/subscriptions", "organizations_url": "https://api.github.com/users/annarev/orgs", "repos_url": "https://api.github.com/users/annarev/repos", "events_url": "https://api.github.com/users/annarev/events{/privacy}", "received_events_url": "https://api.github.com/users/annarev/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-10-13T16:26:10Z", "updated_at": "2019-11-22T06:30:39Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Mac OS Catalina\r\n- TensorFlow installed from (source or binary): binary (pip install tensorflow)\r\n- TensorFlow version (use command below): 2.0.0\r\n- Python version: 3.7.4\r\n- CUDA/cuDNN version: None\r\n- GPU model and memory: Intel Iris Pro 1536 MB\r\n\r\n**Describe the current behavior**\r\n\r\nI am trying to use the script `tf_upgrade_v2` as follows \r\n\r\n```\r\ntf_upgrade_v2 --infile bayesian_nn.py --outfile bayesian_nn2.py\r\n```\r\nThe new file `bayesian_nn2.py` is created and the `report.txt` file is also generated, but `report.txt` does not report any issues, while in `bayesian_nn2.py` there is still code that cannot be run in TF2. For example, `report.txt` does not report that I have the import `from tensorflow.contrib.learn.python.learn.datasets import mnist`, which is no longer valid in TF2.\r\n\r\nMore specifically, this is my `report.txt`\r\n\r\n```\r\nTensorFlow 2.0 Upgrade Script\r\n-----------------------------\r\nConverted 1 files\r\nDetected 0 issues that require attention\r\n--------------------------------------------------------------------------------\r\n================================================================================\r\nDetailed log follows:\r\n\r\n================================================================================\r\n--------------------------------------------------------------------------------\r\nProcessing file 'bayesian_nn.py'\r\n outputting to 'bayesian_nn2.py'\r\n--------------------------------------------------------------------------------\r\n```\r\n\r\nI am trying to port the following module https://github.com/tensorflow/probability/blob/master/tensorflow_probability/examples/bayesian_neural_network.py to TF2.\r\n\r\nAccording to the documentation, the upgrade script should report these issues: https://www.tensorflow.org/guide/upgrade, but it does not."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33303", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33303/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33303/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33303/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33303", "id": 506314022, "node_id": "MDU6SXNzdWU1MDYzMTQwMjI=", "number": 33303, "title": "Convert to tflite will change output order for models with multiple outputs", "user": {"login": "shayantabatabaee", "id": 28183901, "node_id": "MDQ6VXNlcjI4MTgzOTAx", "avatar_url": "https://avatars0.githubusercontent.com/u/28183901?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shayantabatabaee", "html_url": "https://github.com/shayantabatabaee", "followers_url": "https://api.github.com/users/shayantabatabaee/followers", "following_url": "https://api.github.com/users/shayantabatabaee/following{/other_user}", "gists_url": "https://api.github.com/users/shayantabatabaee/gists{/gist_id}", "starred_url": "https://api.github.com/users/shayantabatabaee/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shayantabatabaee/subscriptions", "organizations_url": "https://api.github.com/users/shayantabatabaee/orgs", "repos_url": "https://api.github.com/users/shayantabatabaee/repos", "events_url": "https://api.github.com/users/shayantabatabaee/events{/privacy}", "received_events_url": "https://api.github.com/users/shayantabatabaee/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gargn", "id": 1900612, "node_id": "MDQ6VXNlcjE5MDA2MTI=", "avatar_url": "https://avatars2.githubusercontent.com/u/1900612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gargn", "html_url": "https://github.com/gargn", "followers_url": "https://api.github.com/users/gargn/followers", "following_url": "https://api.github.com/users/gargn/following{/other_user}", "gists_url": "https://api.github.com/users/gargn/gists{/gist_id}", "starred_url": "https://api.github.com/users/gargn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gargn/subscriptions", "organizations_url": "https://api.github.com/users/gargn/orgs", "repos_url": "https://api.github.com/users/gargn/repos", "events_url": "https://api.github.com/users/gargn/events{/privacy}", "received_events_url": "https://api.github.com/users/gargn/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-10-13T11:46:38Z", "updated_at": "2020-03-18T22:18:15Z", "closed_at": null, "author_association": "NONE", "body": "Hello everyone, \r\n\r\nCurrently I have a model with one input and multiple outputs. I train my model with tensorflow eager execution mode and saved trained model into keras format. after that I converted model to tflite format to use in mobile devices. The issue is when I converted my model to tflite the output order will changed. I tested same image with keras model and tflite model and the output order is different.\r\n \r\n**System information**\r\n- OS Platform and Distribution (Mac OS Mojave)\r\n- TensorFlow version : 2.0.0\r\n- Number of outputs: 16\r\n- Base Model: MobilenetV1(0.25)\r\n\r\n\r\nHere is my outputs for both keras and tflite :\r\n\r\ntflite :6157037319861035\r\n\r\nkeras :6219861085157097\r\n\r\nand here is a picture of output layer of my model :\r\n\r\n\r\n![Screen Shot 2019-10-13 at 3 06 29 PM](https://user-images.githubusercontent.com/28183901/66715108-1c92ba00-edcc-11e9-8f26-eaa147e49e76.png)\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33289", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33289/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33289/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33289/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33289", "id": 506197442, "node_id": "MDU6SXNzdWU1MDYxOTc0NDI=", "number": 33289, "title": "Cannot import tensorflow.train", "user": {"login": "ageron", "id": 76661, "node_id": "MDQ6VXNlcjc2NjYx", "avatar_url": "https://avatars3.githubusercontent.com/u/76661?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ageron", "html_url": "https://github.com/ageron", "followers_url": "https://api.github.com/users/ageron/followers", "following_url": "https://api.github.com/users/ageron/following{/other_user}", "gists_url": "https://api.github.com/users/ageron/gists{/gist_id}", "starred_url": "https://api.github.com/users/ageron/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ageron/subscriptions", "organizations_url": "https://api.github.com/users/ageron/orgs", "repos_url": "https://api.github.com/users/ageron/repos", "events_url": "https://api.github.com/users/ageron/events{/privacy}", "received_events_url": "https://api.github.com/users/ageron/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "annarev", "id": 22060313, "node_id": "MDQ6VXNlcjIyMDYwMzEz", "avatar_url": "https://avatars0.githubusercontent.com/u/22060313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/annarev", "html_url": "https://github.com/annarev", "followers_url": "https://api.github.com/users/annarev/followers", "following_url": "https://api.github.com/users/annarev/following{/other_user}", "gists_url": "https://api.github.com/users/annarev/gists{/gist_id}", "starred_url": "https://api.github.com/users/annarev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/annarev/subscriptions", "organizations_url": "https://api.github.com/users/annarev/orgs", "repos_url": "https://api.github.com/users/annarev/repos", "events_url": "https://api.github.com/users/annarev/events{/privacy}", "received_events_url": "https://api.github.com/users/annarev/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "annarev", "id": 22060313, "node_id": "MDQ6VXNlcjIyMDYwMzEz", "avatar_url": "https://avatars0.githubusercontent.com/u/22060313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/annarev", "html_url": "https://github.com/annarev", "followers_url": "https://api.github.com/users/annarev/followers", "following_url": "https://api.github.com/users/annarev/following{/other_user}", "gists_url": "https://api.github.com/users/annarev/gists{/gist_id}", "starred_url": "https://api.github.com/users/annarev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/annarev/subscriptions", "organizations_url": "https://api.github.com/users/annarev/orgs", "repos_url": "https://api.github.com/users/annarev/repos", "events_url": "https://api.github.com/users/annarev/events{/privacy}", "received_events_url": "https://api.github.com/users/annarev/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-10-12T14:58:14Z", "updated_at": "2020-02-15T18:45:46Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): MacOSX 10.14.6\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v2.0.0-rc2-26-g64c3d382ca 2.0.0\r\n- Python version: 3.7.4\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\n\r\nImporting tensorflow.train raises a `ModuleNotFoundError: No module named 'tensorflow.train'`.\r\n\r\n**Describe the expected behavior**\r\n\r\nNo error.\r\nNote: this used to work fine in tf-nightly-2.0-preview.\r\n\r\n**Code to reproduce the issue**\r\n\r\n```python\r\nimport tensorflow.train\r\n```\r\n\r\n**Other info / logs**\r\n\r\nTraceback:\r\n\r\n```\r\nModuleNotFoundError                       Traceback (most recent call last)\r\n<ipython-input-1-0b4f8a92bbad> in <module>\r\n----> 1 import tensorflow.train\r\n\r\nModuleNotFoundError: No module named 'tensorflow.train'\r\n```\r\n\r\n**Workaround**\r\n\r\nInstead of:\r\n\r\n```python\r\nfrom tensorflow.train import BytesList\r\n```\r\n\r\nuse:\r\n\r\n```python\r\nimport tensorflow as tf\r\nBytesList = tf.train.BytesList\r\n```\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33277", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33277/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33277/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33277/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33277", "id": 506141719, "node_id": "MDU6SXNzdWU1MDYxNDE3MTk=", "number": 33277, "title": "INT8 calibration error using TrtGraphConverterV2 in TensorFlow2.0", "user": {"login": "ay27", "id": 3942031, "node_id": "MDQ6VXNlcjM5NDIwMzE=", "avatar_url": "https://avatars3.githubusercontent.com/u/3942031?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ay27", "html_url": "https://github.com/ay27", "followers_url": "https://api.github.com/users/ay27/followers", "following_url": "https://api.github.com/users/ay27/following{/other_user}", "gists_url": "https://api.github.com/users/ay27/gists{/gist_id}", "starred_url": "https://api.github.com/users/ay27/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ay27/subscriptions", "organizations_url": "https://api.github.com/users/ay27/orgs", "repos_url": "https://api.github.com/users/ay27/repos", "events_url": "https://api.github.com/users/ay27/events{/privacy}", "received_events_url": "https://api.github.com/users/ay27/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1754777628, "node_id": "MDU6TGFiZWwxNzU0Nzc3NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu:tensorrt", "name": "comp:gpu:tensorrt", "color": "ea98ba", "default": false, "description": "Issues specific to TensorRT"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, {"login": "pooyadavoodi", "id": 7076961, "node_id": "MDQ6VXNlcjcwNzY5NjE=", "avatar_url": "https://avatars0.githubusercontent.com/u/7076961?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pooyadavoodi", "html_url": "https://github.com/pooyadavoodi", "followers_url": "https://api.github.com/users/pooyadavoodi/followers", "following_url": "https://api.github.com/users/pooyadavoodi/following{/other_user}", "gists_url": "https://api.github.com/users/pooyadavoodi/gists{/gist_id}", "starred_url": "https://api.github.com/users/pooyadavoodi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pooyadavoodi/subscriptions", "organizations_url": "https://api.github.com/users/pooyadavoodi/orgs", "repos_url": "https://api.github.com/users/pooyadavoodi/repos", "events_url": "https://api.github.com/users/pooyadavoodi/events{/privacy}", "received_events_url": "https://api.github.com/users/pooyadavoodi/received_events", "type": "User", "site_admin": false}, {"login": "aaroey", "id": 31743510, "node_id": "MDQ6VXNlcjMxNzQzNTEw", "avatar_url": "https://avatars0.githubusercontent.com/u/31743510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aaroey", "html_url": "https://github.com/aaroey", "followers_url": "https://api.github.com/users/aaroey/followers", "following_url": "https://api.github.com/users/aaroey/following{/other_user}", "gists_url": "https://api.github.com/users/aaroey/gists{/gist_id}", "starred_url": "https://api.github.com/users/aaroey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aaroey/subscriptions", "organizations_url": "https://api.github.com/users/aaroey/orgs", "repos_url": "https://api.github.com/users/aaroey/repos", "events_url": "https://api.github.com/users/aaroey/events{/privacy}", "received_events_url": "https://api.github.com/users/aaroey/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-10-12T06:34:30Z", "updated_at": "2020-01-07T06:34:02Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): pip install tensorflow-gpu\r\n- TensorFlow version (use command below): v2.0.0-rc2-26-g64c3d38\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: cuda10.0\r\n- GPU model and memory: TITAN V, 12GB\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nUsing TensorRT version in: 5.1.5\r\nWhen using TrtGraphConverterV2 to convert a saved model and trying to calibrate with INT8 support, it will raise the error shown as follow.\r\nShould be mentioned that, the FP16 and FP32 conversation is work fine but only the INT8 is failed.\r\n```\r\n2019-10-12 06:33:06.015951: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libnvinfer_plugin.so.5\r\n2019-10-12 06:33:06.142792: E tensorflow/compiler/tf2tensorrt/kernels/trt_engine_op.cc:838] Calibration failed: Invalid argument: Pad only supports explicit padding on 4 dimensional tensor, at StatefulPartitionedCall/resnet50/conv1_pad/Pad\r\n2019-10-12 06:33:06.142978: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Internal: Failed to feed calibration data\r\n         [[{{node TRTEngineOp_0}}]]\r\nTraceback (most recent call last):\r\n  File \"calibration.py\", line 16, in <module>\r\n    converter.convert(calibration_input_fn=input_fn)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/compiler/tensorrt/trt_convert.py\", line 984, in convert\r\n    self._converted_func(*map(ops.convert_to_tensor, inp))\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/eager/function.py\", line 1081, in __call__\r\n    return self._call_impl(args, kwargs)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/eager/function.py\", line 1121, in _call_impl\r\n    return self._call_flat(args, self.captured_inputs, cancellation_manager)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/eager/function.py\", line 1224, in _call_flat\r\n    ctx, args, cancellation_manager=cancellation_manager)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/eager/function.py\", line 511, in call\r\n    ctx=ctx)\r\n  File \"/usr/local/lib/python3.6/dist-packages/tensorflow_core/python/eager/execute.py\", line 67, in quick_execute\r\n    six.raise_from(core._status_to_exception(e.code, message), None)\r\n  File \"<string>\", line 3, in raise_from\r\ntensorflow.python.framework.errors_impl.InternalError:  Failed to feed calibration data\r\n         [[node TRTEngineOp_0 (defined at /usr/local/lib/python3.6/dist-packages/tensorflow_core/python/framework/ops.py:1751) ]] [Op:__inference_pruned_79677]\r\n\r\nFunction call stack:\r\npruned\r\n\r\nterminate called without an active exception\r\n```\r\n**Describe the expected behavior**\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n```python\r\nfrom tensorflow.python.compiler.tensorrt import trt_convert as trt\r\nimport tensorflow as tf\r\n\r\nmodel = tf.keras.applications.ResNet50(weights=None)\r\nout = model(tf.random.normal((2, 224, 224, 3)))\r\ntf.saved_model.save(model, './saved_model/')\r\nprint(model.input_names, model.output_names)\r\n\r\nparams = trt.DEFAULT_TRT_CONVERSION_PARAMS._replace(precision_mode='INT8',\r\n                                                    use_calibration=True)\r\nconverter = trt.TrtGraphConverterV2(input_saved_model_dir='./saved_model/', conversion_params=params)\r\n\r\ndef input_fn():\r\n    for i in range(10):\r\n        yield tf.random.normal((1, 224, 224, 3))\r\nconverter.convert(calibration_input_fn=input_fn)  #  raise error here\r\nconverter.save('./model.trt')\r\n```\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33274", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33274/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33274/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33274/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33274", "id": 506120500, "node_id": "MDU6SXNzdWU1MDYxMjA1MDA=", "number": 33274, "title": "overlap backward and optimization in TensorFlow 2.0", "user": {"login": "QiJune", "id": 22017000, "node_id": "MDQ6VXNlcjIyMDE3MDAw", "avatar_url": "https://avatars0.githubusercontent.com/u/22017000?v=4", "gravatar_id": "", "url": "https://api.github.com/users/QiJune", "html_url": "https://github.com/QiJune", "followers_url": "https://api.github.com/users/QiJune/followers", "following_url": "https://api.github.com/users/QiJune/following{/other_user}", "gists_url": "https://api.github.com/users/QiJune/gists{/gist_id}", "starred_url": "https://api.github.com/users/QiJune/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/QiJune/subscriptions", "organizations_url": "https://api.github.com/users/QiJune/orgs", "repos_url": "https://api.github.com/users/QiJune/repos", "events_url": "https://api.github.com/users/QiJune/events{/privacy}", "received_events_url": "https://api.github.com/users/QiJune/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 996845227, "node_id": "MDU6TGFiZWw5OTY4NDUyMjc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:dist-strat", "name": "comp:dist-strat", "color": "0052cc", "default": false, "description": "Distribution Strategy related issues"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-10-12T02:48:49Z", "updated_at": "2019-12-31T00:29:24Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 2.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nA typical training process in TensorFlow 2.0 could be as following:\r\n\r\n```python\r\ndef train(model, dataset, optimizer):\r\n  for x, y in dataset:\r\n    with tf.GradientTape() as tape:\r\n      prediction = model(x)\r\n      loss = loss_fn(prediction, y)\r\n    gradients = tape.gradient(loss, model.trainable_variables)\r\n    optimizer.apply_gradients(zip(gradients, model.trainable_variables))\r\n```\r\nFirst, it does backward computation and gets all gradients. Then, the gradients will be updated in local, or send to a remote node to do optimization. The backward computation and gradient optimization are sequential.\r\n\r\nIn a distributed training scenario, sending gradients will be time-consuming. It's better to overlap communication and computation. Once one layer completes its backward computation, it could start sending its gradients out, and do optimization.\r\n\r\nI am wondering if there is any approach to achieve such a goal.\r\n\r\nThanks!\r\n\r\n**Will this change the current api? How?**\r\n\r\nOr could we expose a callback interface, to let users insert customized processing logic after a gradient is calculated?\r\n\r\nThere are different cases:\r\n\r\n- Case 1, optimization in the remote parameter server\r\n\r\n```python\r\ngradients = tape.gradient(loss, model.trainable_variables, send_callback)\r\n```\r\n\r\n- Case 2, gradients need to be averaged by allreduce operation across nodes.\r\n\r\n```python\r\ngradients = tape.gradient(loss, model.trainable_variables, allreduce_callback)\r\noptimizer.apply_gradients(zip(gradients, model.trainable_variables))\r\n```\r\n\r\n- Case 3, gradients are applied in local\r\n\r\n```python\r\ngradients = tape.gradient(loss, model.trainable_variables, None)\r\noptimizer.apply_gradients(zip(gradients, model.trainable_variables))\r\n```\r\n\r\n**Who will benefit with this feature?**\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33267", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33267/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33267/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33267/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33267", "id": 506084145, "node_id": "MDU6SXNzdWU1MDYwODQxNDU=", "number": 33267, "title": "An application using tensorflow_cc.dll crashes whenever the Tensorflow API is invoked.", "user": {"login": "dbergh", "id": 5503133, "node_id": "MDQ6VXNlcjU1MDMxMzM=", "avatar_url": "https://avatars0.githubusercontent.com/u/5503133?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dbergh", "html_url": "https://github.com/dbergh", "followers_url": "https://api.github.com/users/dbergh/followers", "following_url": "https://api.github.com/users/dbergh/following{/other_user}", "gists_url": "https://api.github.com/users/dbergh/gists{/gist_id}", "starred_url": "https://api.github.com/users/dbergh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dbergh/subscriptions", "organizations_url": "https://api.github.com/users/dbergh/orgs", "repos_url": "https://api.github.com/users/dbergh/repos", "events_url": "https://api.github.com/users/dbergh/events{/privacy}", "received_events_url": "https://api.github.com/users/dbergh/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-10-11T22:35:16Z", "updated_at": "2019-11-29T22:23:39Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code: Yes\r\n- OS Platform and Distribution: Windows 10\r\n- TensorFlow installed from: source\r\n- TensorFlow version: tensorflow v2.0.0 commit 64c3d382cadf7bbe8e7e99884bede8284ff67f56 (HEAD, tag: v2.0.0, origin/r2.0)\r\n- Python version: 3.6.9\r\n- Bazel version: 0.24.1\r\n- Compiler version: Visual Studio, 2017 14.16.27023\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\nA tensorflow dynamic link library is built using \r\n\r\n`bazel build --config=opt //tensorflow:tensorflow_cc.dll`\r\n\r\nwith the default configuration (no GPU), except that /arch:AVX2 is used instead of /arch:AVX. The patch \r\n\r\n\tdiff --git a/tensorflow/tools/def_file_filter/def_file_filter.py.tpl b/tensorflow/tools/def_file_filter/def_file_filter.py.tpl\r\n\tindex 329a9bb94e..82146ec933 100644\r\n\t--- a/tensorflow/tools/def_file_filter/def_file_filter.py.tpl\r\n\t+++ b/tensorflow/tools/def_file_filter/def_file_filter.py.tpl\r\n\t@@ -154,6 +154,9 @@ def main():\r\n\t\t   else:\r\n\t\t\t def_fp.write(\"\\t\" + decorated + \" DATA\\n\")\r\n\t\t   taken.add(decorated)\r\n\t+    def_fp.write(\"\\t??0SessionOptions@tensorflow@@QEAA@XZ\\n\")\r\n\t+    def_fp.write(\"\\t?LoadSavedModel@tensorflow@@YA?AVStatus@1@AEBUSessionOptions@1@AEBVRunOptions@1@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@AEBV?$unordered_set@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@U?$hash@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@2@U?$equal_to@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@2@V?$allocator@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@2@@6@QEAUSavedModelBundle@1@@Z\\n\")\r\n\t+\r\n\t\t def_fp.close()\r\n\r\n\t   exit_code = proc.wait()\r\n\r\nis applied to the source before the build in order to account for missing symbols (The need for this patch should perhaps be filed in a separate bug-report).\r\n\r\n**Describe the current behavior**\r\nAfter much work I was able to build `tensorflow_cc.dll` and linking it to a custom application without errors. However, the application using the `.dll` crashes whenever `LOG(INFO/WARNING/ERROR)` is called.\r\nAfter inspecting the source code, I see that the macro `LOG(ERROR)` expands to a constructor of the class `tensorflow::internal::LogMessage` which inherits from `std::basic_ostringstream<char>`.\r\nA heap error occurs when the destructor of the base class deletes its internal buffer.\r\n\r\nThe error also seems to occur when calling any function in the tensorflow api which in turn calls the log function, effectively rendering the `.dll` useless.\r\n\r\n**Describe the expected behavior**\r\nThe application should not crash when calling (almost) any function in the tensorflow api.\r\n\r\nI am no expert on dynamic libraries on Windows, but I have read that the `.dll` and the `.exe` have separate heaps. One might speculate that the error could have something to do with this (but in that case I do not understand how). Has anyone actually managed to use `tensorflow_cc.dll` (on Windows) at all? I don't have the same issue on Linux.\r\n\r\nA possible workaround might be to build a static `tensorflow_cc.lib`. Is this possible? For my purposes, it does not matter much if I use a dynamically or a statically linked library.\r\n\r\n**Code to reproduce the issue**\r\n```c++\r\n#define NOMINMAX\r\n#define COMPILER_MSVC\r\n#include \"tensorflow/core/platform/logging.h\"\r\n\r\nint main(int argc, char* argv[]) {\r\n\tLOG(ERROR) << \"Test\";\r\n}\r\n```\r\n\r\n**Other info / logs**\r\nHere is the stack trace produced by the debugger when the crash occurs.\r\n\r\n\tntdll.dll!RtlpBreakPointHeap()\r\n\tntdll.dll!RtlpValidateHeapEntry()\r\n\tntdll.dll!RtlValidateHeap()\r\n\tKernelBase.dll!HeapValidate()\r\n\tucrtbased.dll!_CrtIsValidHeapPointer(const void * block) Line 1407\r\n\t\tat minkernel\\crts\\ucrt\\src\\appcrt\\heap\\debug_heap.cpp(1407)\r\n\tucrtbased.dll!free_dbg_nolock(void * const block, const int block_use) Line 904\r\n\t\tat minkernel\\crts\\ucrt\\src\\appcrt\\heap\\debug_heap.cpp(904)\r\n\tucrtbased.dll!_free_dbg(void * block, int block_use) Line 1030\r\n\t\tat minkernel\\crts\\ucrt\\src\\appcrt\\heap\\debug_heap.cpp(1030)\r\n\tucrtbased.dll!free(void * block) Line 32\r\n\t\tat minkernel\\crts\\ucrt\\src\\appcrt\\heap\\free.cpp(32)\r\n\tmsvcp140d.dll!std::_Crt_new_delete::operator delete(void * _Ptr) Line 73\r\n\t\tat d:\\agent\\_work\\3\\s\\src\\vctools\\crt\\crtw32\\stdhpp\\xlocale(73)\r\n\tmsvcp140d.dll!std::locale::`scalar deleting destructor'(unsigned int)\r\n\tmsvcp140d.dll!std::ios_base::_Ios_base_dtor(std::ios_base * _This) Line 44\r\n\t\tat d:\\agent\\_work\\3\\s\\src\\vctools\\crt\\crtw32\\stdcpp\\ios.cpp(44)\r\n\tmsvcp140d.dll!std::ios_base::~ios_base() Line 478\r\n\t\tat d:\\agent\\_work\\3\\s\\src\\vctools\\crt\\crtw32\\stdhpp\\xiosbase(478)\r\n\tmsvcp140d.dll!std::basic_ios<char,std::char_traits<char> >::~basic_ios<char,std::char_traits<char> >() Line 34\r\n\t\tat d:\\agent\\_work\\3\\s\\src\\vctools\\crt\\crtw32\\stdhpp\\ios(34)\r\n\tmain.exe!tensorflow::internal::LogMessage::`vbase destructor'()\r\n\tmain.exe!main(int argc, char * * argv) Line 7\r\n\t\tat (PATH_TO_PROJECT)\\main.cpp(7)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33264", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33264/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33264/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33264/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33264", "id": 506061748, "node_id": "MDU6SXNzdWU1MDYwNjE3NDg=", "number": 33264, "title": "Difference between Tensor and EagerTensor?", "user": {"login": "OverLordGoldDragon", "id": 16495490, "node_id": "MDQ6VXNlcjE2NDk1NDkw", "avatar_url": "https://avatars2.githubusercontent.com/u/16495490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/OverLordGoldDragon", "html_url": "https://github.com/OverLordGoldDragon", "followers_url": "https://api.github.com/users/OverLordGoldDragon/followers", "following_url": "https://api.github.com/users/OverLordGoldDragon/following{/other_user}", "gists_url": "https://api.github.com/users/OverLordGoldDragon/gists{/gist_id}", "starred_url": "https://api.github.com/users/OverLordGoldDragon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/OverLordGoldDragon/subscriptions", "organizations_url": "https://api.github.com/users/OverLordGoldDragon/orgs", "repos_url": "https://api.github.com/users/OverLordGoldDragon/repos", "events_url": "https://api.github.com/users/OverLordGoldDragon/events{/privacy}", "received_events_url": "https://api.github.com/users/OverLordGoldDragon/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gowthamkpr", "id": 47574994, "node_id": "MDQ6VXNlcjQ3NTc0OTk0", "avatar_url": "https://avatars0.githubusercontent.com/u/47574994?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gowthamkpr", "html_url": "https://github.com/gowthamkpr", "followers_url": "https://api.github.com/users/gowthamkpr/followers", "following_url": "https://api.github.com/users/gowthamkpr/following{/other_user}", "gists_url": "https://api.github.com/users/gowthamkpr/gists{/gist_id}", "starred_url": "https://api.github.com/users/gowthamkpr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gowthamkpr/subscriptions", "organizations_url": "https://api.github.com/users/gowthamkpr/orgs", "repos_url": "https://api.github.com/users/gowthamkpr/repos", "events_url": "https://api.github.com/users/gowthamkpr/events{/privacy}", "received_events_url": "https://api.github.com/users/gowthamkpr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-10-11T21:17:10Z", "updated_at": "2019-11-16T00:56:09Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "[Relevant issue](https://github.com/tensorflow/tensorflow/issues/33227) w/ full code; excerpt:\r\n\r\n```python\r\nvar_delta = m_t / (K.sqrt(v_t) + epsilon_t)\r\nvar_update = state_ops.assign_sub(var, lr_t * var_delta, use_locking=self._use_locking)\r\n```\r\nAbove fails to update `var`, but using `math_ops.sqrt` fixes it. To differentiate, below are some `print` statements & their outputs. Code also included demonstrating introspection limitation.\r\n\r\nIt appears that `K.sqrt` yields a Keras `Tensor`, whereas `math_ops.sqrt` yields a `tf.Tensor`, with former not showing its value even though eager is on. However, calling `K.eval` on `K.sqrt` shows the same value, so it isn't 'lost' or different. \r\n\r\nAll considered: why does `state_ops.assign_sub` work with an `EagerTensor` but fail with a `Tensor`? How are they different? -- (TF2, Keras 2.3.0)\r\n\r\n<hr>\r\n\r\n```python\r\nX1 = math_ops.sqrt(v_t)\r\nX2 = K.sqrt(v_t)\r\nY1 = m_t / (math_ops.sqrt(v_t) + epsilon_t)\r\nY2 = m_t / (K.sqrt(v_t) + epsilon_t)\r\n\r\nprint(X1);       print(X2);       print()\r\nprint(Y1);       print(Y2);       print()\r\nprint(type(X1)); print(type(X2)); print()\r\nprint(type(Y1)); print(type(Y2)); print()\r\nprint(\"type(ref) =\", type(var))\r\n```\r\n```python\r\ntf.Tensor(\r\n[[0.0002048  0.00189643]\r\n [0.00204984 0.00426161]\r\n [0.0013686  0.0048186 ]\r\n [0.00296201 0.00318883]], shape=(4, 2), dtype=float32)\r\nTensor(\"Sqrt:0\", shape=(4, 2), dtype=float32, device=/job:localhost/\r\nreplica:0/task:0/device:CPU:0)\r\n\r\ntf.Tensor(\r\n[[ 3.1607556 -3.1621318]\r\n [-3.162145  -3.1622243]\r\n [ 3.1620677  3.162233 ]\r\n [-3.1621926 -3.1621997]], shape=(4, 2), dtype=float32)\r\nTensor(\"truediv:0\", shape=(4, 2), dtype=float32, device=/job:localhost/\r\nreplica:0/task:0/device:CPU:0)\r\n\r\n<class 'tensorflow.python.framework.ops.EagerTensor'>\r\n<class 'tensorflow.python.framework.ops.Tensor'>\r\n\r\n<class 'tensorflow.python.framework.ops.EagerTensor'>\r\n<class 'tensorflow.python.framework.ops.Tensor'>\r\n\r\ntype(ref) = <class 'tensorflow.python.ops.resource_variable_ops.ResourceVariable'>\r\n```\r\n\r\n<hr>\r\n\r\n**UPDATE**: The _type_ information may be more relevant; (`tf.`) `Tensor` vs. (Keras) `EagerTensor`. However, one lacks reasonable introspection:\r\n\r\n```python\r\nfrom tensorflow.python.framework.ops import Tensor, EagerTensor\r\nprint(Tensor.__doc__) # OK\r\nprint(EagerTensor.__doc__) # returns None\r\n\r\nfrom inspect import getsource\r\nprint(getsource(EagerTensor)) # OSError: could not find class definition\r\n```\r\nLooking into the parent module, apparently I'll need to look into the C API to find out:\r\n\r\n```python\r\nEagerTensor = c_api.TFE_Py_InitEagerTensor(_EagerTensorBase)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33260", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33260/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33260/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33260/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33260", "id": 506001398, "node_id": "MDU6SXNzdWU1MDYwMDEzOTg=", "number": 33260, "title": "Keras does not verify supports_masking", "user": {"login": "asadovsky", "id": 538767, "node_id": "MDQ6VXNlcjUzODc2Nw==", "avatar_url": "https://avatars0.githubusercontent.com/u/538767?v=4", "gravatar_id": "", "url": "https://api.github.com/users/asadovsky", "html_url": "https://github.com/asadovsky", "followers_url": "https://api.github.com/users/asadovsky/followers", "following_url": "https://api.github.com/users/asadovsky/following{/other_user}", "gists_url": "https://api.github.com/users/asadovsky/gists{/gist_id}", "starred_url": "https://api.github.com/users/asadovsky/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/asadovsky/subscriptions", "organizations_url": "https://api.github.com/users/asadovsky/orgs", "repos_url": "https://api.github.com/users/asadovsky/repos", "events_url": "https://api.github.com/users/asadovsky/events{/privacy}", "received_events_url": "https://api.github.com/users/asadovsky/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-10-11T18:41:55Z", "updated_at": "2020-02-20T12:32:59Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): OS X Mojave\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): \"pip install\"\r\n- TensorFlow version (use command below): v2.0.0-rc2-26-g64c3d382ca 2.0.0\r\n- Python version: 3.7.4\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\nI add an Embedding layer with mask_zero=True. Then I add another layer, either Flatten or GlobalAvgPool1D or GlobalMaxPool1D.\r\nOf these, only GlobalAvgPool1D supports masking.\r\nBut when I compile and fit the model, no error is raised. (I believe in the past, prior to TF 2.0, an error would be raised.)\r\n\r\n**Describe the expected behavior**\r\nAn error should be raised when using a layer that doesn't support masking on top of a layer that performs masking.\r\n\r\n**Code to reproduce the issue**\r\nCode for repro: https://github.com/asadovsky/nn/blob/master/text_classification.py\r\nWhen setting \"arch\" to \"max_pool\" or \"flatten\", the train_and_evaluate_model(hp) function should raise an error. But instead, no error is raised."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33250", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33250/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33250/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33250/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33250", "id": 505885445, "node_id": "MDU6SXNzdWU1MDU4ODU0NDU=", "number": 33250, "title": "ValueError: Tensor Tensor by tf.keras.backend.function", "user": {"login": "KLzC", "id": 5106837, "node_id": "MDQ6VXNlcjUxMDY4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/5106837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KLzC", "html_url": "https://github.com/KLzC", "followers_url": "https://api.github.com/users/KLzC/followers", "following_url": "https://api.github.com/users/KLzC/following{/other_user}", "gists_url": "https://api.github.com/users/KLzC/gists{/gist_id}", "starred_url": "https://api.github.com/users/KLzC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KLzC/subscriptions", "organizations_url": "https://api.github.com/users/KLzC/orgs", "repos_url": "https://api.github.com/users/KLzC/repos", "events_url": "https://api.github.com/users/KLzC/events{/privacy}", "received_events_url": "https://api.github.com/users/KLzC/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-10-11T14:26:27Z", "updated_at": "2020-02-12T23:30:09Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS Mojave\r\n- TensorFlow installed from (source or binary): pip install tensorflow\r\n- TensorFlow version: Tensorflow 2.0.0\r\n- Python version: Python 3.7.2\r\n- Installed using virtualenv? pip? conda?: Anaconda\r\n\r\n**Describe the problem**\r\n> ValueError: Tensor Tensor(\"Mean:0\", shape=(512,), dtype=float32) is not an element of this graph.\r\n\r\nI'm run this line of code show above error message, `iterate = tf.keras.backend.function([model.input], [pooled_grads, last_conv_layer.output[0]])`\r\n\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n```\r\nfrom tensorflow.keras.applications.vgg16 import VGG16\r\nfrom tensorflow.keras.preprocessing import image\r\nfrom tensorflow.keras.applications.vgg16 import preprocess_input, decode_predictions\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\ntf.compat.v1.disable_eager_execution()\r\ntf.keras.backend.clear_session()\r\n\r\nimg_path = '/Users/Klaus/downloads/flower_photos/daisy/5547758_eea9edfd54_n.jpg'\r\n\r\nimg = image.load_img(img_path, target_size=(224, 224))\r\nx = image.img_to_array(img)\r\nx = np.expand_dims(x, axis=0)\r\nx = preprocess_input(x)\r\n\r\n# Bug: loading multiple models is by manually specifying different graph and session for each loaded model\r\ngraph = tf.Graph()\r\nwith graph.as_default():\r\n       session = tf.compat.v1.Session()\r\n       with session.as_default():\r\n          ## your load model code\r\n          model = VGG16(weights='imagenet')\r\n# save each graph and session value to some variable for later prediction use.\r\ngraph_var = graph\r\nsession_var = session\r\nwith graph_var.as_default():\r\n     with session_var.as_default():\r\n            preds = model.predict(x)\r\n\r\nprint('Predicted:', decode_predictions(preds, top=3)[0])\r\n\r\nnp.argmax(preds[0])\r\n\r\nflower_output = model.output[:, 309]\r\nlast_conv_layer = model.get_layer('block5_conv3')\r\n\r\ngrads = tf.keras.backend.gradients(flower_output, last_conv_layer.output)[0]\r\npooled_grads = tf.keras.backend.mean(grads, axis=(0, 1, 2))\r\n\r\niterate = tf.keras.backend.function([model.input], [pooled_grads, last_conv_layer.output[0]])\r\n```\r\n\r\n**Whole error mesage**\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-360-5ea87dd3ba6a> in <module>\r\n----> 1 iterate = tf.keras.backend.function([model.input], [pooled_grads, last_conv_layer.output[0]])\r\n\r\n~/Library/Python/3.7/lib/python/site-packages/tensorflow_core/python/keras/backend.py in function(inputs, outputs, updates, name, **kwargs)\r\n   3780                'backend') % key\r\n   3781         raise ValueError(msg)\r\n-> 3782   return GraphExecutionFunction(inputs, outputs, updates=updates, **kwargs)\r\n   3783 \r\n   3784 \r\n\r\n~/Library/Python/3.7/lib/python/site-packages/tensorflow_core/python/keras/backend.py in __init__(self, inputs, outputs, updates, name, **session_kwargs)\r\n   3432     # dependencies in call.\r\n   3433     # Index 0 = total loss or model output for `predict`.\r\n-> 3434     with ops.control_dependencies([self.outputs[0]]):\r\n   3435       updates_ops = []\r\n   3436       for update in updates:\r\n\r\n~/Library/Python/3.7/lib/python/site-packages/tensorflow_core/python/framework/ops.py in control_dependencies(control_inputs)\r\n   5255     return NullContextmanager()\r\n   5256   else:\r\n-> 5257     return get_default_graph().control_dependencies(control_inputs)\r\n   5258 \r\n   5259 \r\n\r\n~/Library/Python/3.7/lib/python/site-packages/tensorflow_core/python/framework/ops.py in control_dependencies(self, control_inputs)\r\n   4689           (hasattr(c, \"_handle\") and hasattr(c, \"op\"))):\r\n   4690         c = c.op\r\n-> 4691       c = self.as_graph_element(c)\r\n   4692       if isinstance(c, Tensor):\r\n   4693         c = c.op\r\n\r\n~/Library/Python/3.7/lib/python/site-packages/tensorflow_core/python/framework/ops.py in as_graph_element(self, obj, allow_tensor, allow_operation)\r\n   3608 \r\n   3609     with self._lock:\r\n-> 3610       return self._as_graph_element_locked(obj, allow_tensor, allow_operation)\r\n   3611 \r\n   3612   def _as_graph_element_locked(self, obj, allow_tensor, allow_operation):\r\n\r\n~/Library/Python/3.7/lib/python/site-packages/tensorflow_core/python/framework/ops.py in _as_graph_element_locked(self, obj, allow_tensor, allow_operation)\r\n   3687       # Actually obj is just the object it's referring to.\r\n   3688       if obj.graph is not self:\r\n-> 3689         raise ValueError(\"Tensor %s is not an element of this graph.\" % obj)\r\n   3690       return obj\r\n   3691     elif isinstance(obj, Operation) and allow_operation:\r\n\r\nValueError: Tensor Tensor(\"Mean:0\", shape=(512,), dtype=float32) is not an element of this graph.\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33239", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33239/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33239/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33239/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33239", "id": 505733122, "node_id": "MDU6SXNzdWU1MDU3MzMxMjI=", "number": 33239, "title": "need some Ops in RNN", "user": {"login": "ucasiggcas", "id": 35590066, "node_id": "MDQ6VXNlcjM1NTkwMDY2", "avatar_url": "https://avatars0.githubusercontent.com/u/35590066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ucasiggcas", "html_url": "https://github.com/ucasiggcas", "followers_url": "https://api.github.com/users/ucasiggcas/followers", "following_url": "https://api.github.com/users/ucasiggcas/following{/other_user}", "gists_url": "https://api.github.com/users/ucasiggcas/gists{/gist_id}", "starred_url": "https://api.github.com/users/ucasiggcas/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ucasiggcas/subscriptions", "organizations_url": "https://api.github.com/users/ucasiggcas/orgs", "repos_url": "https://api.github.com/users/ucasiggcas/repos", "events_url": "https://api.github.com/users/ucasiggcas/events{/privacy}", "received_events_url": "https://api.github.com/users/ucasiggcas/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "haozha111", "id": 6316921, "node_id": "MDQ6VXNlcjYzMTY5MjE=", "avatar_url": "https://avatars3.githubusercontent.com/u/6316921?v=4", "gravatar_id": "", "url": "https://api.github.com/users/haozha111", "html_url": "https://github.com/haozha111", "followers_url": "https://api.github.com/users/haozha111/followers", "following_url": "https://api.github.com/users/haozha111/following{/other_user}", "gists_url": "https://api.github.com/users/haozha111/gists{/gist_id}", "starred_url": "https://api.github.com/users/haozha111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/haozha111/subscriptions", "organizations_url": "https://api.github.com/users/haozha111/orgs", "repos_url": "https://api.github.com/users/haozha111/repos", "events_url": "https://api.github.com/users/haozha111/events{/privacy}", "received_events_url": "https://api.github.com/users/haozha111/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-10-11T09:10:36Z", "updated_at": "2019-11-15T05:12:27Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n- TensorFlow installed from (source):\r\n- TensorFlow version (github):\r\n\r\n\r\n\r\n\r\n```\r\nbazel-bin/tensorflow/lite/toco/toco \\\r\n--input_file=../mydlstm.pb --output_file=../mydlstmfloat.tflite \\\r\n--output_format=TFLITE --input_shapes=1,5,513 --input_arrays=x_mixed \\\r\n--output_arrays=y_out1,y_out2 --inference_type=FLOAT \\\r\n--inference_input_type=FLOAT\r\n```\r\nand the error is here\r\n\r\n'''\r\n2019-10-11 17:02:20.357549: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorListReserve\r\n2019-10-11 17:02:20.357612: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 21\r\n2019-10-11 17:02:20.357628: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorListFromTensor\r\n2019-10-11 17:02:20.357638: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 21\r\n2019-10-11 17:02:20.360078: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: While\r\n2019-10-11 17:02:20.360126: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 21\r\n2019-10-11 17:02:20.360134: I tensorflow/lite/toco/import_tensorflow.cc:193] Unsupported data type in placeholder op: 21\r\n2019-10-11 17:02:20.360162: I tensorflow/lite/toco/import_tensorflow.cc:659] Converting unsupported operation: TensorListStack\r\n\r\n'''\r\n\r\nmodel is here\r\n[mydlstm.zip](https://github.com/tensorflow/tensorflow/files/3716604/mydlstm.zip)\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33238", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33238/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33238/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33238/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33238", "id": 505724627, "node_id": "MDU6SXNzdWU1MDU3MjQ2Mjc=", "number": 33238, "title": "redzone_checker appears a lot while profiling tf-2.0", "user": {"login": "mahmoodn", "id": 11626212, "node_id": "MDQ6VXNlcjExNjI2MjEy", "avatar_url": "https://avatars1.githubusercontent.com/u/11626212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mahmoodn", "html_url": "https://github.com/mahmoodn", "followers_url": "https://api.github.com/users/mahmoodn/followers", "following_url": "https://api.github.com/users/mahmoodn/following{/other_user}", "gists_url": "https://api.github.com/users/mahmoodn/gists{/gist_id}", "starred_url": "https://api.github.com/users/mahmoodn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mahmoodn/subscriptions", "organizations_url": "https://api.github.com/users/mahmoodn/orgs", "repos_url": "https://api.github.com/users/mahmoodn/repos", "events_url": "https://api.github.com/users/mahmoodn/events{/privacy}", "received_events_url": "https://api.github.com/users/mahmoodn/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097548274, "node_id": "MDU6TGFiZWwxMDk3NTQ4Mjc0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tfdbg", "name": "comp:tfdbg", "color": "0052cc", "default": false, "description": "tf debugger"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-10-11T08:53:40Z", "updated_at": "2019-11-27T06:56:05Z", "closed_at": null, "author_association": "NONE", "body": "I have downloaded and built tf-2.0.0 from source. As I profile the label_image example with nvprof, I see that `redzone_checker` kernel is the most time consuming kernel (25%). Is that normal? I remember that this kernel wasn't time consuming in previous versions.\r\n\r\nAlso I didn't find any useful information about what does this kernel doing in a typical run. The same happens with multibox_detector example with a large percent of 87%. I don't think that is normal.\r\n\r\n![Screenshot from 2019-10-11 12-22-49](https://user-images.githubusercontent.com/11626212/66638471-de599700-ec21-11e9-8c9c-c7f82257c86b.png)\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33233", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33233/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33233/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33233/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33233", "id": 505693876, "node_id": "MDU6SXNzdWU1MDU2OTM4NzY=", "number": 33233, "title": "[tflite2.0] tf.lite.Interpreter fails with 'post-training quantization' (tf.matmul).", "user": {"login": "paanguin", "id": 24224076, "node_id": "MDQ6VXNlcjI0MjI0MDc2", "avatar_url": "https://avatars0.githubusercontent.com/u/24224076?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paanguin", "html_url": "https://github.com/paanguin", "followers_url": "https://api.github.com/users/paanguin/followers", "following_url": "https://api.github.com/users/paanguin/following{/other_user}", "gists_url": "https://api.github.com/users/paanguin/gists{/gist_id}", "starred_url": "https://api.github.com/users/paanguin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paanguin/subscriptions", "organizations_url": "https://api.github.com/users/paanguin/orgs", "repos_url": "https://api.github.com/users/paanguin/repos", "events_url": "https://api.github.com/users/paanguin/events{/privacy}", "received_events_url": "https://api.github.com/users/paanguin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-10-11T07:47:33Z", "updated_at": "2019-10-17T05:34:23Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution: Linux Ubuntu 16.04\r\n- TensorFlow installed from source\r\n- TensorFlow version (use command below): ('v2.0.0-0-g64c3d38', '2.0.0')\r\n- Python version: 2.7.12\r\n- Bazel version (if compiling from source): 0.24.1\r\n- GCC/Compiler version (if compiling from source): gcc (Ubuntu 5.4.0-6ubuntu1~16.04.11) 5.4.0 20160609\r\n- CUDA/cuDNN version: 10.0 / 7.5\r\n- GPU model and memory: GeForce GTX TITAN\r\n\r\n**Describe the current behavior**\r\n'Post-training integer quantization' fails with tf.matmul() in a certain condition.\r\n(https://www.tensorflow.org/lite/performance/post_training_integer_quant)\r\n\r\nFollowing code is a testing code for converting a dummy tensorflow graph with quantization. This code fails if shape_b[-1] > 15 for me. When I analyzed the visualization result ((bazel run //tensorflow/lite/tools:visualize model.tflite visualized_model.html)), I think it is a result of graph transformation issue.\r\n\r\nSuppose that shape_b = (None, 16, 4, 5). Then each tf.matmul op is replaced by 16 FULLY_CONNECTED ops in the tflite model. And each FULLY_CONNECTED op has its own bias tensor, with shape=[5], as third input. In this case, tflite_convert works in both cases that quantization=True or quantization=False.\r\n\r\nWhen Suppose that shape_b = (None, 16, 4, 16). When quantization=True, the interpreter fails at the allocation step with following output:\r\n```\r\nINFO: Initialized TensorFlow Lite runtime.\r\nTraceback (most recent call last):\r\n  File \"tflite_matmul_v2.py\", line 89, in <module>\r\n    main()\r\n  File \"tflite_matmul_v2.py\", line 67, in main\r\n    interpreter.allocate_tensors()\r\n  File \"/home/hh1208-kang/venv_py2_tf_nightly/local/lib/python2.7/site-packages/tensorflow_core/lite/python/interpreter.py\", line 244, in allocate_tensors\r\n    return self._interpreter.AllocateTensors()\r\n  File \"/home/hh1208-kang/venv_py2_tf_nightly/local/lib/python2.7/site-packages/tensorflow_core/lite/python/interpreter_wrapper/tensorflow_wrap_interpreter_wrapper.py\", line 106, in AllocateTensors\r\n    return _tensorflow_wrap_interpreter_wrapper.InterpreterWrapper_AllocateTensors(self)\r\nRuntimeError: tensorflow/lite/kernels/kernel_util.cc:119 std::abs(input_product_scale - bias_scale) <= 1e-6 * std::min(input_product_scale, bias_scale) was not true.Node number 282 (FULLY_CONNECTED) failed to prepare.\r\n```\r\nBut the code still works if quantization=False. When I check the visualization result, I noticed that the bias tensors for FULLY_CONNECTED ops are merged into a single bias tensor, with shape [16]. It seems that tflite_convert try to remove redundant zero bias tensors when it becomes large.\r\n\r\nHowever that makes problem in the quantization. Because in that case, the quantization parameters of the bias tensor is shared by all the FULLY_CONNECTED ops. Thus the check std::abs(input_product_scale - bias_scale) <= 1e-6 * std::min(input_product_scale, bias_scale) fails, since 'input_product_scale' may be different in some FULLY_CONNECTED op, while 'bias_scale' are the same.\r\n\r\nHow can I suppress the transformation behavior? I think somehow if I could prevent the transformation that merges all the bias tensors, the quantization success.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport numpy as np\r\nimport tensorflow as tf\r\n\r\ndef test_tflite_model(tflite_filename, examples):\r\n    print(\"Loading TFLite interpreter for %s...\" % tflite_filename)\r\n    interpreter = tf.lite.Interpreter(model_path=tflite_filename)\r\n    interpreter.allocate_tensors()\r\n    input_details = interpreter.get_input_details()\r\n    output_details = interpreter.get_output_details()\r\n    print(\"input details: %s\" % input_details)\r\n    print(\"output details: %s\" % output_details)\r\n\r\n    for i, input_tensor in enumerate(input_details):\r\n        interpreter.set_tensor(input_tensor['index'], examples[i])\r\n    interpreter.invoke()\r\n    model_output = []\r\n    for i, output_tensor in enumerate(output_details):\r\n        model_output.append(interpreter.get_tensor(output_tensor['index']))\r\n    return model_output\r\n\r\ndef main():\r\n    nsamples=1\r\n    quantization=True\r\n    tflite_filename = \"matmul_model_v2.tflite\"\r\n    shape_a = (None, 16, 3, 4)\r\n    shape_b = (None, 16, 4, 15) # quantization fails if shape_b[-1] >= 16\r\n\r\n    @tf.function(input_signature=[\r\n    \ttf.TensorSpec(shape=shape_a, dtype=tf.float32, name='a'), \r\n        tf.TensorSpec(shape=shape_b, dtype=tf.float32, name='b')])\r\n    def model(a,b):\r\n\tc = tf.matmul(a,b) #[16, 3, 5]\r\n\r\n\tdef submodule(c,b):\r\n\t\tnb = tf.transpose(b, [0, 1, 3, 2])\r\n\t\t#nb = tf.nn.softmax(nb)\r\n\t\tc = tf.matmul(c,nb) # [16,3,4]\r\n\t\tc = tf.matmul(c,b)  # [16,3,5]\r\n\t\treturn c\r\n\tc = submodule(c,b)\r\n\treturn c\r\n\r\n\r\n    def _representative_dataset_gen():\r\n\tfor i in range(50):\r\n\t\ta_ = np.random.random_sample((1,)+shape_a[1:]).astype(np.float32)\r\n\t        b_ = np.random.random_sample((1,)+shape_b[1:]).astype(np.float32)\r\n\t\tyield [a_,b_]\r\n\r\n    # tflite_convert\r\n    cfunc = model.get_concrete_function()\r\n    converter = tf.lite.TFLiteConverter.from_concrete_functions([cfunc])\r\n    if (quantization):\r\n\tconverter.representative_dataset = _representative_dataset_gen # with quantization\r\n\tconverter.optimizations = [tf.lite.Optimize.DEFAULT]\r\n    tflite_model = converter.convert()\r\n    open(tflite_filename, \"wb\").write(tflite_model)\r\n\r\n    # run tensorflow model (not converted)\r\n    np.random.seed(1234)\r\n    a_ = np.random.random_sample((nsamples,)+shape_a[1:]).astype(np.float32)\r\n    b_ = np.random.random_sample((nsamples,)+shape_b[1:]).astype(np.float32)\r\n    session_output = model(a_,b_)\r\n\r\n    # load and run tflite model (converted_)\r\n    interpreter = tf.lite.Interpreter(model_path=tflite_filename)\r\n    interpreter.allocate_tensors()\r\n    output_details = interpreter.get_output_details()\r\n    output_shape = interpreter.get_tensor(output_details[0]['index']).shape\r\n    tflite_output = np.zeros((nsamples,)+output_shape[1:], np.float32)\r\n    for n in range(nsamples):\r\n\ttflite_output[n,:] = test_tflite_model(tflite_filename, \r\n\t\t[np.expand_dims(a_[n,:],0), np.expand_dims(b_[n,:],0)])[0]\r\n\r\n    print(\"Input example:\")\r\n    print(a_)\r\n    print(a_.shape)\r\n    print(b_)\r\n    print(b_.shape)\r\n    print(\"Session output:\")\r\n    print(session_output)\r\n    print(session_output.shape)\r\n    print(\"TFLite output:\")\r\n    print(tflite_output)\r\n    print(tflite_output.shape)\r\n    print(np.allclose(session_output, tflite_output))\r\n\r\nif __name__ == '__main__':\r\n    main()\r\n```\r\nNote that this code is inspired by https://github.com/tensorflow/tensorflow/issues/27640.\r\n\r\n\r\np.s. (2019.10.17)\r\nI corrected the post since I made a mistake. The problem is not about converting, but about the interpreter, especially in the allocation. I'm sorry.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33230", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33230/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33230/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33230/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33230", "id": 505641824, "node_id": "MDU6SXNzdWU1MDU2NDE4MjQ=", "number": 33230, "title": "Embedding visualization in tf.keras / TensorFlow 2.0", "user": {"login": "KristianHolsheimer", "id": 8200332, "node_id": "MDQ6VXNlcjgyMDAzMzI=", "avatar_url": "https://avatars0.githubusercontent.com/u/8200332?v=4", "gravatar_id": "", "url": "https://api.github.com/users/KristianHolsheimer", "html_url": "https://github.com/KristianHolsheimer", "followers_url": "https://api.github.com/users/KristianHolsheimer/followers", "following_url": "https://api.github.com/users/KristianHolsheimer/following{/other_user}", "gists_url": "https://api.github.com/users/KristianHolsheimer/gists{/gist_id}", "starred_url": "https://api.github.com/users/KristianHolsheimer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/KristianHolsheimer/subscriptions", "organizations_url": "https://api.github.com/users/KristianHolsheimer/orgs", "repos_url": "https://api.github.com/users/KristianHolsheimer/repos", "events_url": "https://api.github.com/users/KristianHolsheimer/events{/privacy}", "received_events_url": "https://api.github.com/users/KristianHolsheimer/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-10-11T05:12:56Z", "updated_at": "2019-10-15T22:41:57Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "I'm trying to visualize some embeddings in Tensorboard. In pure keras this was possible, for example:\r\n- https://keras.io/examples/tensorboard_embeddings_mnist/\r\n\r\nThere was already a regression in `tf.keras`, breaking this functionality, see [this bug](https://github.com/keras-team/keras/issues/12808).\r\n\r\nI thought I'd try out tensorflow 2.0 and it seems that the functionality is removed altogether. I now get the message:\r\n\r\n> WARNING:tensorflow:`embeddings_layer_names` is not supported in TensorFlow 2.0. Instead, all `Embedding` layers will be visualized.\r\n\r\nI generally don't care about visualizing my `Embedding` layers. Instead, I'd like to visualize the output of my bottleneck layer, which is typically just a `Dense` layer.\r\n\r\nAs I'm writing this, I do realize that the way tensorboard/projector works is that is extracts the embedding `Variable` (weights) from a checkpoint. In the case of an `Embedding` layer this is very natural. The interesting case, I would argue, is the visualization of **activations**, i.e. a generic `Tensor`.\r\n\r\nIs this supported by `tf.keras` or should I write a custom callback class to do this?\r\n\r\nThanks!\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33223", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33223/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33223/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33223/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33223", "id": 505544608, "node_id": "MDU6SXNzdWU1MDU1NDQ2MDg=", "number": 33223, "title": "tf.summary.image log spam", "user": {"login": "yasushi-saito", "id": 546227, "node_id": "MDQ6VXNlcjU0NjIyNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/546227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yasushi-saito", "html_url": "https://github.com/yasushi-saito", "followers_url": "https://api.github.com/users/yasushi-saito/followers", "following_url": "https://api.github.com/users/yasushi-saito/following{/other_user}", "gists_url": "https://api.github.com/users/yasushi-saito/gists{/gist_id}", "starred_url": "https://api.github.com/users/yasushi-saito/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yasushi-saito/subscriptions", "organizations_url": "https://api.github.com/users/yasushi-saito/orgs", "repos_url": "https://api.github.com/users/yasushi-saito/repos", "events_url": "https://api.github.com/users/yasushi-saito/events{/privacy}", "received_events_url": "https://api.github.com/users/yasushi-saito/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 284285184, "node_id": "MDU6TGFiZWwyODQyODUxODQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tensorboard", "name": "comp:tensorboard", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "nfelt", "id": 710113, "node_id": "MDQ6VXNlcjcxMDExMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/710113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nfelt", "html_url": "https://github.com/nfelt", "followers_url": "https://api.github.com/users/nfelt/followers", "following_url": "https://api.github.com/users/nfelt/following{/other_user}", "gists_url": "https://api.github.com/users/nfelt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nfelt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nfelt/subscriptions", "organizations_url": "https://api.github.com/users/nfelt/orgs", "repos_url": "https://api.github.com/users/nfelt/repos", "events_url": "https://api.github.com/users/nfelt/events{/privacy}", "received_events_url": "https://api.github.com/users/nfelt/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nfelt", "id": 710113, "node_id": "MDQ6VXNlcjcxMDExMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/710113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nfelt", "html_url": "https://github.com/nfelt", "followers_url": "https://api.github.com/users/nfelt/followers", "following_url": "https://api.github.com/users/nfelt/following{/other_user}", "gists_url": "https://api.github.com/users/nfelt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nfelt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nfelt/subscriptions", "organizations_url": "https://api.github.com/users/nfelt/orgs", "repos_url": "https://api.github.com/users/nfelt/repos", "events_url": "https://api.github.com/users/nfelt/events{/privacy}", "received_events_url": "https://api.github.com/users/nfelt/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-10-10T22:35:04Z", "updated_at": "2019-10-28T22:09:17Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.0.0\r\n- Python version: 3.7\r\n- Bazel version (if compiling from source): \r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 10.0, 7.6.2\r\n- GPU model and memory: Tesla v100 16GiB (AWS EC2 p3.2x instance).\r\n\r\n**Describe the current behavior**\r\n\r\nI'm running TF in a lazy mode by calling tf.compat.v1.disable_v2_behavior().\r\n\r\nI have code that calls tf.summary.image in a trivial way:\r\n  tf.summary.image(\"name\", sometensor)\r\n\r\nTF shows a following error message. TF continues functioning properly, but these messages are eyesore.\r\n\r\n```\r\nERROR:tensorflow:==================================                                                                                                                                           \r\nObject was never used (type <class 'tensorflow.python.framework.ops.Operation'>):                                                                                                             \r\n<tf.Operation 'channel_multiplicity/assert_non_negative/assert_less_equal/Assert/Assert' type=Assert>                                                                                         \r\nIf you want to mark it as used call its \"mark_used()\" method.                                                                                                                                 \r\nIt was originally created here:                                                                                                                                                               \r\n  File \"/home/ubuntu/.local/lib/python3.7/site-packages/tensorboard/plugins/image/summary_v2.py\", line 72, in image                                                                           \r\n    tf.debugging.assert_non_negative(max_outputs)  File \"/home/ubuntu/.local/lib/python3.7/site-packages/tensorflow_core/python/ops/check_ops.py\", line 302, in assert_non_negative_v2        \r\n    name=name)  File \"/home/ubuntu/.local/lib/python3.7/site-packages/tensorflow_core/python/ops/check_ops.py\", line 345, in assert_non_negative                                              \r\n    return assert_less_equal(zero, x, data=data, summarize=summarize)  File \"/home/ubuntu/.local/lib/python3.7/site-packages/tensorflow_core/python/ops/check_ops.py\", line 952, in assert_le\\\r\nss_equal                                                                                                                                                                                      \r\n    return control_flow_ops.Assert(condition, data, summarize=summarize)  File \"/home/ubuntu/.local/lib/python3.7/site-packages/tensorflow_core/python/util/tf_should_use.py\", line 198, in w\\\r\nrapped                                                                                                                                                                                        \r\n    return _add_should_use_warning(fn(*args, **kwargs))                                                                                                                                       \r\n==================================                           \r\n```\r\n\r\n**Describe the expected behavior**\r\n\r\nThese error messages shouldn't be shown.\r\n\r\n**Code to reproduce the issue**\r\nI can create a repro if needed.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33215", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33215/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33215/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33215/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33215", "id": 505387517, "node_id": "MDU6SXNzdWU1MDUzODc1MTc=", "number": 33215, "title": "[TF2]'Tensor' object has no attribute '_keras_history'", "user": {"login": "SmileTM", "id": 19524544, "node_id": "MDQ6VXNlcjE5NTI0NTQ0", "avatar_url": "https://avatars3.githubusercontent.com/u/19524544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SmileTM", "html_url": "https://github.com/SmileTM", "followers_url": "https://api.github.com/users/SmileTM/followers", "following_url": "https://api.github.com/users/SmileTM/following{/other_user}", "gists_url": "https://api.github.com/users/SmileTM/gists{/gist_id}", "starred_url": "https://api.github.com/users/SmileTM/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SmileTM/subscriptions", "organizations_url": "https://api.github.com/users/SmileTM/orgs", "repos_url": "https://api.github.com/users/SmileTM/repos", "events_url": "https://api.github.com/users/SmileTM/events{/privacy}", "received_events_url": "https://api.github.com/users/SmileTM/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-10-10T16:42:47Z", "updated_at": "2019-10-29T20:24:32Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): MacOS\r\n- TensorFlow installed from (source or binary): source\r\n- TensorFlow version (use command below): 2.0\r\n- Python version: 3.7\r\n\r\n\r\n### Problem\r\nin TF2.0 use Keras to save model.h5 ,then load model.h5.\r\n\r\nI have saved model.h5 from official.nlp.bert_models.py by use model.save(\"model.h5\") .\r\neverything is ok , but when I load the model.h5 there have some problems.\r\n```python\r\nmodel =tf.keras.models.load_model('./my_model1.h5', custom_objects={'BertModel':bert_modeling.BertModel})\r\n\r\n```\r\nemmmmm, how to solve this problem????\r\nI am not sure this is BUG, but in this link someone say this maybe is a bug.\r\nhttps://github.com/tensorflow/models/issues/7643\r\n\r\n### Traceback\r\nTraceback (most recent call last):\r\nFile \"/Users/lollipop/Documents/tf2g/false_news/test.py\", line 30, in\r\nmodel =tf.keras.models.load_model('./my_model1.h5', custom_objects={'BertModel':bert_modeling.BertModel})\r\nFile \"/Users/lollipop/.conda/envs/tf2/lib/python3.7/site-packages/tensorflow_core/python/keras/saving/save.py\", line 146, in load_model\r\nreturn hdf5_format.load_model_from_hdf5(filepath, custom_objects, compile)\r\nFile \"/Users/lollipop/.conda/envs/tf2/lib/python3.7/site-packages/tensorflow_core/python/keras/saving/hdf5_format.py\", line 168, in load_model_from_hdf5\r\ncustom_objects=custom_objects)\r\nFile \"/Users/lollipop/.conda/envs/tf2/lib/python3.7/site-packages/tensorflow_core/python/keras/saving/model_config.py\", line 55, in model_from_config\r\nreturn deserialize(config, custom_objects=custom_objects)\r\nFile \"/Users/lollipop/.conda/envs/tf2/lib/python3.7/site-packages/tensorflow_core/python/keras/layers/serialization.py\", line 102, in deserialize\r\nprintable_module_name='layer')\r\nFile \"/Users/lollipop/.conda/envs/tf2/lib/python3.7/site-packages/tensorflow_core/python/keras/utils/generic_utils.py\", line 191, in deserialize_keras_object\r\nlist(custom_objects.items())))\r\nFile \"/Users/lollipop/.conda/envs/tf2/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/network.py\", line 906, in from_config\r\nconfig, custom_objects)\r\nFile \"/Users/lollipop/.conda/envs/tf2/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/network.py\", line 1852, in reconstruct_from_config\r\nprocess_node(layer, node_data)\r\nFile \"/Users/lollipop/.conda/envs/tf2/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/network.py\", line 1802, in process_node\r\noutput_index = nest.flatten(output_tensors)[0]._keras_history.node_index\r\nAttributeError: 'Tensor' object has no attribute '_keras_history'\r\n\r\nProcess finished with exit code 1"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33211", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33211/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33211/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33211/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33211", "id": 505335526, "node_id": "MDU6SXNzdWU1MDUzMzU1MjY=", "number": 33211, "title": "Fail build librensorflow_cc.so with cuda support", "user": {"login": "andrejlevkovitch", "id": 29674023, "node_id": "MDQ6VXNlcjI5Njc0MDIz", "avatar_url": "https://avatars1.githubusercontent.com/u/29674023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrejlevkovitch", "html_url": "https://github.com/andrejlevkovitch", "followers_url": "https://api.github.com/users/andrejlevkovitch/followers", "following_url": "https://api.github.com/users/andrejlevkovitch/following{/other_user}", "gists_url": "https://api.github.com/users/andrejlevkovitch/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrejlevkovitch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrejlevkovitch/subscriptions", "organizations_url": "https://api.github.com/users/andrejlevkovitch/orgs", "repos_url": "https://api.github.com/users/andrejlevkovitch/repos", "events_url": "https://api.github.com/users/andrejlevkovitch/events{/privacy}", "received_events_url": "https://api.github.com/users/andrejlevkovitch/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-10-10T15:09:36Z", "updated_at": "2019-11-04T09:56:06Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- Debian 10\r\n- TensorFlow version: 1.15.0\r\n- Python version: 3\r\n- Bazel version (if compiling from source): 0.26.1\r\n- GCC/Compiler version (if compiling from source): nvcc (gcc-7)\r\n- CUDA/cuDNN version: 10.1\r\n- GPU model and memory: GeForce RTX 2070 SUPER, 8192 MB\r\n\r\n\r\n\r\n**Describe the problem**\r\nWhen I try compile tensorflow I get error: `nvcc fatal   : Unknown option 'MD'`. \r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nWhile configuring I allow only: `python3`, compilation with `cuda` and cuda compiler as `nvcc` (with complete path to it). After it I try run `bazel` for build `libtensorflow_cc.so` but, almost immediately I get the error: `nvcc fatal   : Unknown option 'MD'`\r\n\r\n\r\n**Any other info / logs**\r\n```bash\r\nbazel build --config=cuda //tensorflow:libtensorflow_cc.so --verbose_failures\r\n\r\n...\r\n\r\nINFO: Analyzed target //tensorflow:libtensorflow_cc.so (1 packages loaded, 2 targets configured).\r\nINFO: Found 1 target...\r\nWARNING: failed to create one or more convenience symlinks for prefix 'bazel-':\r\n  cannot create symbolic link bazel-bin -> /home/levkovitch/.cache/bazel/_bazel_levkovitch/81f9c3cb5093a9779b51fe05f62c9c35/execroot/org_tensorflow/bazel-out/k8-opt/bin:  /tmp/tensorflow_dir/bazel-bin (Permission denied)\r\n  cannot create symbolic link bazel-testlogs -> /home/levkovitch/.cache/bazel/_bazel_levkovitch/81f9c3cb5093a9779b51fe05f62c9c35/execroot/org_tensorflow/bazel-out/k8-opt/testlogs:  /tmp/tensorflow_dir/bazel-testlogs (Permission denied)\r\n  cannot create symbolic link bazel-genfiles -> /home/levkovitch/.cache/bazel/_bazel_levkovitch/81f9c3cb5093a9779b51fe05f62c9c35/execroot/org_tensorflow/bazel-out/k8-opt/bin:  /tmp/tensorflow_dir/bazel-genfiles (Permission denied)\r\n  cannot create symbolic link bazel-out -> /home/levkovitch/.cache/bazel/_bazel_levkovitch/81f9c3cb5093a9779b51fe05f62c9c35/execroot/org_tensorflow/bazel-out:  /tmp/tensorflow_dir/bazel-out (Permission denied)\r\n  cannot create symbolic link bazel-tensorflow_dir -> /home/levkovitch/.cache/bazel/_bazel_levkovitch/81f9c3cb5093a9779b51fe05f62c9c35/execroot/org_tensorflow:  /tmp/tensorflow_dir/bazel-tensorflow_dir (Permission denied)\r\nERROR: /home/levkovitch/.cache/bazel/_bazel_levkovitch/81f9c3cb5093a9779b51fe05f62c9c35/external/com_google_protobuf/BUILD:294:1: C++ compilation of rule '@com_google_protobuf//:protoc_lib' failed (Exit 1): crosstool_wrapper_driver_is_not_gcc failed: error executing command \r\n  (cd /home/levkovitch/.cache/bazel/_bazel_levkovitch/81f9c3cb5093a9779b51fe05f62c9c35/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    PATH=/tmp/bazel_dir/bin:/usr/sbin:/usr/local/sbin:/usr/local/cuda-10.1/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games \\\r\n    PWD=/proc/self/cwd \\\r\n  external/local_config_cuda/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc -MD -MF bazel-out/host/bin/external/com_google_protobuf/_objs/protoc_lib/code_generator.d '-frandom-seed=bazel-out/host/bin/external/com_google_protobuf/_objs/protoc_lib/code_generator.o' -iquote external/com_google_protobuf -iquote bazel-out/host/bin/external/com_google_protobuf -iquote external/zlib_archive -iquote bazel-out/host/bin/external/zlib_archive -isystem external/com_google_protobuf/src -isystem bazel-out/host/bin/external/com_google_protobuf/src -isystem external/zlib_archive -isystem bazel-out/host/bin/external/zlib_archive '-std=c++11' -Wno-builtin-macro-redefined '-D__DATE__=\"redacted\"' '-D__TIMESTAMP__=\"redacted\"' '-D__TIME__=\"redacted\"' -fPIE -U_FORTIFY_SOURCE '-D_FORTIFY_SOURCE=1' -fstack-protector -Wall -fno-omit-frame-pointer -no-canonical-prefixes -fno-canonical-system-headers -DNDEBUG -g0 -O2 -ffunction-sections -fdata-sections -g0 -g0 -DHAVE_PTHREAD -DHAVE_ZLIB -Woverloaded-virtual -Wno-sign-compare -Wno-unused-function -Wno-write-strings -c external/com_google_protobuf/src/google/protobuf/compiler/code_generator.cc -o bazel-out/host/bin/external/com_google_protobuf/_objs/protoc_lib/code_generator.o)\r\nExecution platform: @bazel_tools//platforms:host_platform\r\nnvcc fatal   : Unknown option 'MD'\r\nTarget //tensorflow:libtensorflow_cc.so failed to build\r\nINFO: Elapsed time: 0.421s, Critical Path: 0.04s\r\nINFO: 2 processes: 2 local.\r\nFAILED: Build did NOT complete successfully\r\n```\r\n\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33210", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33210/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33210/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33210/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33210", "id": 505309026, "node_id": "MDU6SXNzdWU1MDUzMDkwMjY=", "number": 33210, "title": "Error using TensorBoard callback with histogram_freq > 0", "user": {"login": "agchitu", "id": 9414100, "node_id": "MDQ6VXNlcjk0MTQxMDA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9414100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agchitu", "html_url": "https://github.com/agchitu", "followers_url": "https://api.github.com/users/agchitu/followers", "following_url": "https://api.github.com/users/agchitu/following{/other_user}", "gists_url": "https://api.github.com/users/agchitu/gists{/gist_id}", "starred_url": "https://api.github.com/users/agchitu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agchitu/subscriptions", "organizations_url": "https://api.github.com/users/agchitu/orgs", "repos_url": "https://api.github.com/users/agchitu/repos", "events_url": "https://api.github.com/users/agchitu/events{/privacy}", "received_events_url": "https://api.github.com/users/agchitu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-10-10T14:27:32Z", "updated_at": "2019-10-14T23:28:47Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: \r\n- TensorFlow installed from (source or binary): installed with pip \r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: Python 3.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: cuda_10.1.243_426.00_win10, cudnn-10.1-windows10-x64-v7.6.3.30\r\n- GPU model and memory: GeForce GTX 1060, 6GB dedicated\r\n\r\n**Describe the current behavior**\r\nThe code in the section bellow results in an error on this line:\r\nhttps://github.com/tensorflow/tensorflow/blob/025365a736ed10185c1a68c2c896cf5c54b9f69f/tensorflow/python/keras/callbacks_v1.py#L385\r\n\r\nThe test_function does not have fetch_callbacks defined. The error I get is:\r\n```Python\r\ntensorflow_gpu\\lib\\site-packages\\tensorflow\\python\\keras\\callbacks_v1.py\", line 386, in on_epoch_begin\r\n    self.merged] = self._fetch_callback\r\nAttributeError: 'Function' object has no attribute 'fetch_callbacks'\r\n```\r\n**Describe the expected behavior**\r\nThere should be no error. The code works only when ```histogram_freq=0```\r\n**Code to reproduce the issue**\r\n```python \r\nimport numpy as np\r\nimport tensorflow as tf\r\nfrom keras.layers import Input, Dense\r\nfrom keras.models import Model\r\n\r\nfrom keras.optimizers import SGD\r\n\r\nnum_features = 100\r\ntrain_x = np.random.rand(40, num_features)\r\ntrain_y = np.random.randint(2, size=40)\r\n\r\n# The input layer\r\ninput_layer = Input(shape=(num_features,), name=\"Input\")\r\noutput = Dense(10, activation='sigmoid', name=\"Hidden_1\")(input_layer)\r\noutput = Dense(1, activation='sigmoid', name=\"Output\")(output)\r\nmodel = Model(inputs=input_layer, outputs=output)\r\n\r\nsgd = SGD(lr=0.01, decay=1e-4, momentum=0.9, nesterov=True)\r\nmodel.compile(loss='binary_crossentropy',\r\n                     optimizer=sgd,\r\n                      metrics=['accuracy'])\r\n\r\ntensorboard_callback = tf.keras.callbacks.TensorBoard(\r\n            log_dir=os.path.join(\"out_dir\", datetime.now().strftime(\"%Y%m%d-%H%M%S\")),\r\n            histogram_freq=2, write_graph=True, write_images=True)\r\nmy_callbacks = [tensorboard_callback]\r\n\r\nmodel.fit(x=train_x, y=train_y,\r\n                  validation_split=.2,\r\n                  epochs=5,\r\n                  callbacks=my_callbacks)\r\n```\r\n**Other info / logs**\r\nmodel summary \r\n```\r\n_________________________________________________________________\r\nLayer (type)                 Output Shape              Param #   \r\n=================================================================\r\nInput (InputLayer)           (None, 100)               0         \r\n_________________________________________________________________\r\nHidden_1 (Dense)             (None, 10)                1010      \r\n_________________________________________________________________\r\nOutput (Dense)               (None, 1)                 11        \r\n=================================================================\r\nTotal params: 1,021\r\nTrainable params: 1,021\r\nNon-trainable params: 0\r\n_________________________________________________________________\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33193", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33193/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33193/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33193/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33193", "id": 505021021, "node_id": "MDU6SXNzdWU1MDUwMjEwMjE=", "number": 33193, "title": "AutoGraph returns an empty array when I use a for-loop and TensorArray", "user": {"login": "Rendok", "id": 39846664, "node_id": "MDQ6VXNlcjM5ODQ2NjY0", "avatar_url": "https://avatars1.githubusercontent.com/u/39846664?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Rendok", "html_url": "https://github.com/Rendok", "followers_url": "https://api.github.com/users/Rendok/followers", "following_url": "https://api.github.com/users/Rendok/following{/other_user}", "gists_url": "https://api.github.com/users/Rendok/gists{/gist_id}", "starred_url": "https://api.github.com/users/Rendok/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Rendok/subscriptions", "organizations_url": "https://api.github.com/users/Rendok/orgs", "repos_url": "https://api.github.com/users/Rendok/repos", "events_url": "https://api.github.com/users/Rendok/events{/privacy}", "received_events_url": "https://api.github.com/users/Rendok/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1190546177, "node_id": "MDU6TGFiZWwxMTkwNTQ2MTc3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:autograph", "name": "comp:autograph", "color": "0052cc", "default": false, "description": ""}, {"id": 1478826728, "node_id": "MDU6TGFiZWwxNDc4ODI2NzI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:core", "name": "comp:core", "color": "024391", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "kkimdev", "id": 503414, "node_id": "MDQ6VXNlcjUwMzQxNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/503414?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kkimdev", "html_url": "https://github.com/kkimdev", "followers_url": "https://api.github.com/users/kkimdev/followers", "following_url": "https://api.github.com/users/kkimdev/following{/other_user}", "gists_url": "https://api.github.com/users/kkimdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/kkimdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kkimdev/subscriptions", "organizations_url": "https://api.github.com/users/kkimdev/orgs", "repos_url": "https://api.github.com/users/kkimdev/repos", "events_url": "https://api.github.com/users/kkimdev/events{/privacy}", "received_events_url": "https://api.github.com/users/kkimdev/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "kkimdev", "id": 503414, "node_id": "MDQ6VXNlcjUwMzQxNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/503414?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kkimdev", "html_url": "https://github.com/kkimdev", "followers_url": "https://api.github.com/users/kkimdev/followers", "following_url": "https://api.github.com/users/kkimdev/following{/other_user}", "gists_url": "https://api.github.com/users/kkimdev/gists{/gist_id}", "starred_url": "https://api.github.com/users/kkimdev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kkimdev/subscriptions", "organizations_url": "https://api.github.com/users/kkimdev/orgs", "repos_url": "https://api.github.com/users/kkimdev/repos", "events_url": "https://api.github.com/users/kkimdev/events{/privacy}", "received_events_url": "https://api.github.com/users/kkimdev/received_events", "type": "User", "site_admin": false}, {"login": "mdanatg", "id": 26628547, "node_id": "MDQ6VXNlcjI2NjI4NTQ3", "avatar_url": "https://avatars1.githubusercontent.com/u/26628547?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdanatg", "html_url": "https://github.com/mdanatg", "followers_url": "https://api.github.com/users/mdanatg/followers", "following_url": "https://api.github.com/users/mdanatg/following{/other_user}", "gists_url": "https://api.github.com/users/mdanatg/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdanatg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdanatg/subscriptions", "organizations_url": "https://api.github.com/users/mdanatg/orgs", "repos_url": "https://api.github.com/users/mdanatg/repos", "events_url": "https://api.github.com/users/mdanatg/events{/privacy}", "received_events_url": "https://api.github.com/users/mdanatg/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-10-10T04:09:35Z", "updated_at": "2019-10-24T06:25:28Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): MacOS 10.14.6\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.0.0\r\n- Python version: 3.6.x\r\n- Bazel version (if compiling from source): - \r\n- GCC/Compiler version (if compiling from source): - \r\n- CUDA/cuDNN version: - \r\n- GPU model and memory: -\r\n\r\nHello! Here is a sniped of code:\r\n```python\r\na = np.array([1, 2, 3], np.int32)\r\n\r\n@tf.function  # works without the decorator\r\ndef foo(a):\r\n  b = tf.TensorArray(tf.string, 4)\r\n  b.write(0, \"test\")\r\n  for i in tf.range(3):\r\n    if a[i] == 2:\r\n      b.write(i, \"fuzz\")\r\n    elif a[i] == 3:\r\n      b.write(i, \"buzz\")\r\n  return b.stack()\r\n\r\nprint(foo(a))\r\n```\r\nWith the decorator, the AutoGraph returns an empty array:\r\n`tf.Tensor([b'' b'' b'' b''], shape=(4,), dtype=string)`\r\n\r\nHowever, it shoud return:\r\n`tf.Tensor([b'test' b'fuzz' b'buzz' b''], shape=(4,), dtype=string)`\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33190", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33190/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33190/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33190/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33190", "id": 504997024, "node_id": "MDU6SXNzdWU1MDQ5OTcwMjQ=", "number": 33190, "title": "A bug in 'MoveBinaryOperatorBeforeReshape' graph_transformations  during tflite_convert.", "user": {"login": "paanguin", "id": 24224076, "node_id": "MDQ6VXNlcjI0MjI0MDc2", "avatar_url": "https://avatars0.githubusercontent.com/u/24224076?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paanguin", "html_url": "https://github.com/paanguin", "followers_url": "https://api.github.com/users/paanguin/followers", "following_url": "https://api.github.com/users/paanguin/following{/other_user}", "gists_url": "https://api.github.com/users/paanguin/gists{/gist_id}", "starred_url": "https://api.github.com/users/paanguin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paanguin/subscriptions", "organizations_url": "https://api.github.com/users/paanguin/orgs", "repos_url": "https://api.github.com/users/paanguin/repos", "events_url": "https://api.github.com/users/paanguin/events{/privacy}", "received_events_url": "https://api.github.com/users/paanguin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-10-10T02:38:05Z", "updated_at": "2019-10-11T06:11:35Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution: Linux Ubuntu 16.04\r\n- TensorFlow installed from source\r\n- TensorFlow version (use command below): ('v2.0.0-0-g64c3d38', '2.0.0')\r\n- Python version: 2.7.12\r\n- Bazel version (if compiling from source): 0.24.1\r\n- GCC/Compiler version (if compiling from source): gcc (Ubuntu 5.4.0-6ubuntu1~16.04.11) 5.4.0 20160609\r\n- CUDA/cuDNN version: 10.0 / 7.5\r\n- GPU model and memory: GeForce GTX TITAN\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nThe outputs of the tflite model (*.tflite), converted by the tflite_convert, are totally different from the original pre-trained saved_model.\r\n\r\nWhen I tries to fix that, I finally got the right outputs by suppressing 'MoveBinaryOperatorBeforeReshape' of the graph_transformations (tensorflow/lite/toco/graph_transformations).  To do this, I removed the operations from parts of the source codes (tensorflow/lite/toco/BUILD, tensorflow/lite/toco/toco_tooling.cc, ,tensorflow/lite/toco/graph_transformations/graph_transformations.h) and built a package from it.\r\n\r\nI compared the two versions of the tflite models, by using the visualization tool (bazel run //tensorflow/lite/tools:visualize model.tflite visualized_model.html). I found out that when the MoveBinaryOperatorBeforeReshape is turned on, the tflite_convert removes a specific ADD op and its one constant input tensor from my graph. Then it was the very reason I got the different output. \r\n\r\nThis seems a bug to me so that I want to report this.\r\n\r\nSince my graph is too big, and I cannot share my codes, models nor figures, I want to share the responsible part of the visualization results. I strongly recommend to draw graphs for better understanding.\r\n\r\nConsider following as tables,  columns are seperated by '|'.\r\n\r\n***Original Graph (which gives wrong output)***\r\nOperations\r\n```\r\nindex | inputs | outputs | builtin_options | opcode_index\r\n69 | [175, 43, 4154] | [185] | {u'fused_activation_function':   u'NONE', u'stride_h': 1, u'padding': u'VALID', u'stride_w': 1,   u'dilation_h_factor': 1, u'dilation_w_factor': 1} | CONV_2D (2)\r\n100 | [185, 186] | [190] | {u'new_shape': [1, 600, 512]} | RESHAPE (5)\r\n126 | [190, 1518] | [1517] | {u'keep_dims': True} | MEAN (10)\r\n127 | [190, 1517] | [1529] | {u'fused_activation_function':   u'NONE'} | SUB (11)\r\n128 | [190, 1517] | [1528] | {u'fused_activation_function':   u'NONE'} | SUB (11)\r\n341 | [1539, 190] | [1516] | {u'fused_activation_function':   u'NONE'} | ADD (0)\r\n```\r\nTensors\r\n```\r\nindex | name | type | shape | buffer | quantization\r\n43 | Identity_16 | FLOAT32 | [512, 1, 1, 240] | 2051 | {u'quantized_dimension': 0,   u'details_type': 0}\r\n175 | body/model/parallel_0/body/ExpandDims_2 | FLOAT32 | [1, 600, 1, 240] | 1816 | {u'quantized_dimension': 0,   u'details_type': 0}\r\n4154 | body/model/parallel_0/body/prepare_transform_before_single/Conv2D_bias | FLOAT32 | [512] | 2053 | {u'quantized_dimension': 0,   u'details_type': 0}\r\n185 | body/model/parallel_0/body/Squeeze | FLOAT32 | [1, 600, 1, 512] | 2338 | {u'quantized_dimension': 0,   u'details_type': 0}\r\n186 | body/model/parallel_0/body/Squeeze_shape | INT32 | [3] | 2110 | {u'quantized_dimension': 0,   u'details_type': 0}\r\n190 | body/model/parallel_0/body/add_1 | FLOAT32 | [1, 600, 512] | 1098 | {u'quantized_dimension': 0,   u'details_type': 0}\r\n```\r\n\r\n\r\n\r\n***Fixed Graph ('MoveBinaryOperatorBeforeReshape' suppressed and gives the right outputs)***\r\nOperations\r\n```\r\nindex | inputs | outputs | builtin_options | opcode_index\r\n69 | [175, 43, 4156] | [4155] | {u'fused_activation_function':   u'NONE', u'stride_h': 1, u'padding': u'VALID', u'stride_w': 1,   u'dilation_h_factor': 1, u'dilation_w_factor': 1} | CONV_2D (2)\r\n98 | [4155, 186] | [185] | {u'new_shape': [1, 600, 512]} | RESHAPE (5)\r\n101 | [190, 185] | [191] | {u'fused_activation_function':   u'NONE'} | ADD (0)\r\n127 | [191, 1519] | [1518] | {u'keep_dims': True} | MEAN (10)\r\n128 | [191, 1518] | [1530] | {u'fused_activation_function':   u'NONE'} | SUB (11)\r\n129 | [191, 1518] | [1529] | {u'fused_activation_function':   u'NONE'} | SUB (11)\r\n342 | [1540, 191] | [1517] | {u'fused_activation_function':   u'NONE'} | ADD (0)\r\n```\r\nTensors \r\n```\r\nindex | name | type | shape | buffer | quantization\r\n43 | Identity_16 | FLOAT32 | [512, 1, 1, 240] | 2055 | {u'quantized_dimension': 0,   u'details_type': 0}\r\n175 | body/model/parallel_0/body/ExpandDims_2 | FLOAT32 | [1, 600, 1, 240] | 1819 | {u'quantized_dimension': 0,   u'details_type': 0}\r\n4156 | body/model/parallel_0/body/prepare_transform_before_single/Conv2D_bias | FLOAT32 | [512] | 2057 | {u'quantized_dimension': 0,   u'details_type': 0}\r\n4155 | body/model/parallel_0/body/prepare_transform_before_single/BiasAdd | FLOAT32 | [1, 600, 1, 512] | 1547 | {u'quantized_dimension': 0,   u'details_type': 0}\r\n186 | body/model/parallel_0/body/Squeeze_shape | INT32 | [3] | 2114 | {u'quantized_dimension': 0,   u'details_type': 0}\r\n190 | body/model/parallel_0/body/add | FLOAT32 | [1, 600, 512] | 1845 | {u'quantized_dimension': 0,   u'details_type': 0}\r\n185 | body/model/parallel_0/body/Squeeze | FLOAT32 | [1, 600, 512] | 2342 | {u'quantized_dimension': 0,   u'details_type': 0}\r\n191 | body/model/parallel_0/body/add_1 | FLOAT32 | [1, 600, 512] | 1098 | {u'quantized_dimension': 0,   u'details_type': 0}\r\n```\r\n\r\nRest of the operations are the same. Total number of graphs are different only by 1. In the fixed graph, the ADD op 101 has one constant tensor (with none-zero values) and one variable tensor input. It is missing from the original graph, I don't understand why the tflite_convert removes it.\r\n\r\n\r\n**Code to reproduce the issue**\r\nI could not find reproducing code.\r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33189", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33189/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33189/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33189/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33189", "id": 504995303, "node_id": "MDU6SXNzdWU1MDQ5OTUzMDM=", "number": 33189, "title": "TFTRT:  Huge events file generated.", "user": {"login": "sgambient", "id": 42156923, "node_id": "MDQ6VXNlcjQyMTU2OTIz", "avatar_url": "https://avatars0.githubusercontent.com/u/42156923?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sgambient", "html_url": "https://github.com/sgambient", "followers_url": "https://api.github.com/users/sgambient/followers", "following_url": "https://api.github.com/users/sgambient/following{/other_user}", "gists_url": "https://api.github.com/users/sgambient/gists{/gist_id}", "starred_url": "https://api.github.com/users/sgambient/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sgambient/subscriptions", "organizations_url": "https://api.github.com/users/sgambient/orgs", "repos_url": "https://api.github.com/users/sgambient/repos", "events_url": "https://api.github.com/users/sgambient/events{/privacy}", "received_events_url": "https://api.github.com/users/sgambient/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1754777628, "node_id": "MDU6TGFiZWwxNzU0Nzc3NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu:tensorrt", "name": "comp:gpu:tensorrt", "color": "ea98ba", "default": false, "description": "Issues specific to TensorRT"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-10-10T02:31:55Z", "updated_at": "2019-12-26T18:34:19Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):binary\r\n- TensorFlow version (use command below):1.14\r\n- Python version:2.7\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:10.1\r\n- GPU model and memory:T4\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nVery very large events files  are generated  when TF-TRT is enabled.  These files are so big that Tensorboard is able to handle those.  For example,  in one network, TF produces an event file of 4.6 MB size. The  same network after TF-TRT compile, generates an event file of 1.3 GB !! \r\n\r\n\r\n**Describe the expected behavior**\r\n\r\nA reasonable size. \r\n\r\n**Code to reproduce the issue**\r\nNot able to provide any code at this point.   However, the sympton is possibly reproducible with any large network such as ResNet1XX . \r\n\r\n**Other info / logs**\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33187", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33187/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33187/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33187/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33187", "id": 504989304, "node_id": "MDU6SXNzdWU1MDQ5ODkzMDQ=", "number": 33187, "title": "Support \"fetch_skip_sync=false\" in Callable", "user": {"login": "GuanLuo", "id": 41310872, "node_id": "MDQ6VXNlcjQxMzEwODcy", "avatar_url": "https://avatars0.githubusercontent.com/u/41310872?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuanLuo", "html_url": "https://github.com/GuanLuo", "followers_url": "https://api.github.com/users/GuanLuo/followers", "following_url": "https://api.github.com/users/GuanLuo/following{/other_user}", "gists_url": "https://api.github.com/users/GuanLuo/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuanLuo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuanLuo/subscriptions", "organizations_url": "https://api.github.com/users/GuanLuo/orgs", "repos_url": "https://api.github.com/users/GuanLuo/repos", "events_url": "https://api.github.com/users/GuanLuo/events{/privacy}", "received_events_url": "https://api.github.com/users/GuanLuo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-10-10T02:10:01Z", "updated_at": "2019-12-05T22:52:48Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 1.15.0\r\n- Are you willing to contribute it (Yes/No): yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nAs suggested in #5902, feeding / fetching GPU tensors is possible with Callable, however, [`fetch_skip_sync`](https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/protobuf/config.proto#L764) must be set to true as the otherwise is not implemented. Based on the comment for `fetch_skip_sync` field, then the user will need to invoke `Device::Sync()`, which can be bad if the device is being shared with other models.\r\n\r\n**Will this change the current api? How?**\r\n\r\n**Who will benefit with this feature?**\r\nUse case that serves multiple models on the same GPU device.\r\n\r\n**Any Other info.**\r\nAfter some digging around, it seems like Callable just adds a \"RetVal\" op to the original graph and take the original output as its input, which I don't see any data movement. So my other question is whether the `Device::Sync()` is necessary?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33184", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33184/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33184/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33184/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33184", "id": 504940156, "node_id": "MDU6SXNzdWU1MDQ5NDAxNTY=", "number": 33184, "title": "TF-TRT batchSize > 0 && batchSize <= MAX_BATCH_SIZE", "user": {"login": "sgambient", "id": 42156923, "node_id": "MDQ6VXNlcjQyMTU2OTIz", "avatar_url": "https://avatars0.githubusercontent.com/u/42156923?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sgambient", "html_url": "https://github.com/sgambient", "followers_url": "https://api.github.com/users/sgambient/followers", "following_url": "https://api.github.com/users/sgambient/following{/other_user}", "gists_url": "https://api.github.com/users/sgambient/gists{/gist_id}", "starred_url": "https://api.github.com/users/sgambient/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sgambient/subscriptions", "organizations_url": "https://api.github.com/users/sgambient/orgs", "repos_url": "https://api.github.com/users/sgambient/repos", "events_url": "https://api.github.com/users/sgambient/events{/privacy}", "received_events_url": "https://api.github.com/users/sgambient/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547538, "node_id": "MDU6TGFiZWwxMDk3NTQ3NTM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu", "name": "comp:gpu", "color": "0052cc", "default": false, "description": ""}, {"id": 1754777628, "node_id": "MDU6TGFiZWwxNzU0Nzc3NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:gpu:tensorrt", "name": "comp:gpu:tensorrt", "color": "ea98ba", "default": false, "description": "Issues specific to TensorRT"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "bixia1", "id": 35820639, "node_id": "MDQ6VXNlcjM1ODIwNjM5", "avatar_url": "https://avatars1.githubusercontent.com/u/35820639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bixia1", "html_url": "https://github.com/bixia1", "followers_url": "https://api.github.com/users/bixia1/followers", "following_url": "https://api.github.com/users/bixia1/following{/other_user}", "gists_url": "https://api.github.com/users/bixia1/gists{/gist_id}", "starred_url": "https://api.github.com/users/bixia1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bixia1/subscriptions", "organizations_url": "https://api.github.com/users/bixia1/orgs", "repos_url": "https://api.github.com/users/bixia1/repos", "events_url": "https://api.github.com/users/bixia1/events{/privacy}", "received_events_url": "https://api.github.com/users/bixia1/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "bixia1", "id": 35820639, "node_id": "MDQ6VXNlcjM1ODIwNjM5", "avatar_url": "https://avatars1.githubusercontent.com/u/35820639?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bixia1", "html_url": "https://github.com/bixia1", "followers_url": "https://api.github.com/users/bixia1/followers", "following_url": "https://api.github.com/users/bixia1/following{/other_user}", "gists_url": "https://api.github.com/users/bixia1/gists{/gist_id}", "starred_url": "https://api.github.com/users/bixia1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bixia1/subscriptions", "organizations_url": "https://api.github.com/users/bixia1/orgs", "repos_url": "https://api.github.com/users/bixia1/repos", "events_url": "https://api.github.com/users/bixia1/events{/privacy}", "received_events_url": "https://api.github.com/users/bixia1/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 10, "created_at": "2019-10-09T23:01:54Z", "updated_at": "2020-01-27T16:01:43Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below):1.14.0\r\n- Python version:2.7\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:10.1\r\n- GPU model and memory:T4\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nSeeing the following error.\r\n\r\n```\r\n2019-10-09 22:38:11.629630: I tensorflow/compiler/tf2tensorrt/kernels/trt_engine_op.cc:632] Building a new TensorRT engine for XXX input shapes: [[0,28,28,128]]\r\n2019-10-09 22:38:11.629841: E tensorflow/compiler/tf2tensorrt/utils/trt_logger.cc:41] DefaultLogger Parameter check failed at: ../builder/builder.cpp::setMaxBatchSize::113, condition: batchSize > 0 && batchSize <= MAX_BATCH_SIZE\r\n```\r\n\r\n**Describe the expected behavior**\r\nIdeally, would not like to see the error.   As currently seeing  the error,  more information along the following line will help a lot determining the root cause.\r\n\r\n1.  See more detailed  log on what the offending  layers and tensors are. \r\n2.  What  exactly is the value that is the issue, in this case batchSize ? \r\n3. Where  in  code this is  occurring - do not see any file called builder* in TF 1.14 source. \r\n    If error in happening elsewhere in third-party code ( in this case , may be in NVIDIA  TensorRT closed source )  - making that explicit. \r\n4. In this case, where is it getting 0 for batch size. \r\n\r\n**Code to reproduce the issue**\r\nIt is not possible to provide code for every issue.  Better logging is a much more  efficient way to root cause and resolve issues. \r\n\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33182", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33182/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33182/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33182/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33182", "id": 504863202, "node_id": "MDU6SXNzdWU1MDQ4NjMyMDI=", "number": 33182, "title": "tf.compat.v1.keras.backend.get_session gives erroneous deprecation warning", "user": {"login": "drasmuss", "id": 1952220, "node_id": "MDQ6VXNlcjE5NTIyMjA=", "avatar_url": "https://avatars1.githubusercontent.com/u/1952220?v=4", "gravatar_id": "", "url": "https://api.github.com/users/drasmuss", "html_url": "https://github.com/drasmuss", "followers_url": "https://api.github.com/users/drasmuss/followers", "following_url": "https://api.github.com/users/drasmuss/following{/other_user}", "gists_url": "https://api.github.com/users/drasmuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/drasmuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/drasmuss/subscriptions", "organizations_url": "https://api.github.com/users/drasmuss/orgs", "repos_url": "https://api.github.com/users/drasmuss/repos", "events_url": "https://api.github.com/users/drasmuss/events{/privacy}", "received_events_url": "https://api.github.com/users/drasmuss/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-10-09T20:02:12Z", "updated_at": "2020-01-17T16:29:31Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: N/A\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 2.0.0\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\n\r\nAccessing `tf.compat.v1.keras.backend.get_session` gives a deprecation warning telling you to use `tf.compat.v1.keras.backend.get_session`.\r\n\r\n**Describe the expected behavior**\r\n\r\nAccessing `tf.compat.v1.keras.backend.get_session` should not give a deprecation warning (since we're explicitly accessing the `compat.v1` namespace). Or it should direct the user to the correct function, if `tf.compat.v1.keras.backend.get_session` is not the right access point, rather than telling the user to use the namespace they're already using.\r\n\r\n**Code to reproduce the issue**\r\n``` python\r\nimport tensorflow as tf\r\n\r\ntf.compat.v1.keras.backend.get_session\r\n```\r\n\r\nThis results in the warning\r\n```\r\nThe name tf.keras.backend.get_session is deprecated. Please use tf.compat.v1.keras.backend.get_session instead.\r\n```\r\n(note that we're accessing `tf.compat.v1.keras.backend.get_session`, not `tf.keras.backend.get_session`).\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33172", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33172/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33172/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33172/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33172", "id": 504569696, "node_id": "MDU6SXNzdWU1MDQ1Njk2OTY=", "number": 33172, "title": "add expm_multiply functionality", "user": {"login": "ziofil", "id": 8944955, "node_id": "MDQ6VXNlcjg5NDQ5NTU=", "avatar_url": "https://avatars2.githubusercontent.com/u/8944955?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ziofil", "html_url": "https://github.com/ziofil", "followers_url": "https://api.github.com/users/ziofil/followers", "following_url": "https://api.github.com/users/ziofil/following{/other_user}", "gists_url": "https://api.github.com/users/ziofil/gists{/gist_id}", "starred_url": "https://api.github.com/users/ziofil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ziofil/subscriptions", "organizations_url": "https://api.github.com/users/ziofil/orgs", "repos_url": "https://api.github.com/users/ziofil/repos", "events_url": "https://api.github.com/users/ziofil/events{/privacy}", "received_events_url": "https://api.github.com/users/ziofil/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-10-09T10:49:01Z", "updated_at": "2019-10-11T22:33:43Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 2.0.0\r\n- Are you willing to contribute it (Yes/No): Yes, but I need help\r\n\r\n**Describe the feature and the current behavior/state.**\r\nIt would be great to implement the equivalent of `scipy.sparse.linalg.expm_multiply`, so that one doesn't have to create a whole matrix exponential before multiplying it with a vector, and instead compute the result directly. \r\n\r\n**Will this change the current api? How?**\r\nIt will add a new function\r\n\r\n**Who will benefit with this feature?**\r\nThose who need to use the matrix exponential on vectors\r\n\r\n**Any Other info.**\r\nSee [this paper](http://eprints.ma.man.ac.uk/1591/)  and [this paper](http://eprints.ma.man.ac.uk/1451/) for the implementation "}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33162", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33162/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33162/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33162/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33162", "id": 504434291, "node_id": "MDU6SXNzdWU1MDQ0MzQyOTE=", "number": 33162, "title": "Continue training on SavedModel or load checkpoint from SavedModel", "user": {"login": "davislf2", "id": 6715615, "node_id": "MDQ6VXNlcjY3MTU2MTU=", "avatar_url": "https://avatars1.githubusercontent.com/u/6715615?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davislf2", "html_url": "https://github.com/davislf2", "followers_url": "https://api.github.com/users/davislf2/followers", "following_url": "https://api.github.com/users/davislf2/following{/other_user}", "gists_url": "https://api.github.com/users/davislf2/gists{/gist_id}", "starred_url": "https://api.github.com/users/davislf2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davislf2/subscriptions", "organizations_url": "https://api.github.com/users/davislf2/orgs", "repos_url": "https://api.github.com/users/davislf2/repos", "events_url": "https://api.github.com/users/davislf2/events{/privacy}", "received_events_url": "https://api.github.com/users/davislf2/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "k-w-w", "id": 31663267, "node_id": "MDQ6VXNlcjMxNjYzMjY3", "avatar_url": "https://avatars2.githubusercontent.com/u/31663267?v=4", "gravatar_id": "", "url": "https://api.github.com/users/k-w-w", "html_url": "https://github.com/k-w-w", "followers_url": "https://api.github.com/users/k-w-w/followers", "following_url": "https://api.github.com/users/k-w-w/following{/other_user}", "gists_url": "https://api.github.com/users/k-w-w/gists{/gist_id}", "starred_url": "https://api.github.com/users/k-w-w/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/k-w-w/subscriptions", "organizations_url": "https://api.github.com/users/k-w-w/orgs", "repos_url": "https://api.github.com/users/k-w-w/repos", "events_url": "https://api.github.com/users/k-w-w/events{/privacy}", "received_events_url": "https://api.github.com/users/k-w-w/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-10-09T06:02:13Z", "updated_at": "2020-01-10T23:40:41Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.14\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nIn tensorflow 1.14, it's obvious that tf.compat.v1.train.init_from_checkpoint can load ckpt to continue training (or to warm start). However, I couldn't find any corresponding approaches in SavedModel, and tf.estimator.WarmStartSetting only supports ckpt as well. It would be helpful if we could either load checkpoint in SavedModel or warm-start training from SavedModel.\r\n\r\n**Will this change the current api? How?**\r\n1. train.init_from_checkpoint could load SavedModel \r\n2. tf.estimator.WarmStartSettings could load SavedModel\r\n\r\n**Who will benefit with this feature?**\r\nThose who store models in SavedModel format and want to keep training (or warm start).\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33153", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33153/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33153/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33153/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33153", "id": 504238164, "node_id": "MDU6SXNzdWU1MDQyMzgxNjQ=", "number": 33153, "title": "tflite_runtime standalone always results in \"ModuleNotFoundError: No module named '_interpreter_wrapper'\"", "user": {"login": "wmol4", "id": 24555661, "node_id": "MDQ6VXNlcjI0NTU1NjYx", "avatar_url": "https://avatars1.githubusercontent.com/u/24555661?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wmol4", "html_url": "https://github.com/wmol4", "followers_url": "https://api.github.com/users/wmol4/followers", "following_url": "https://api.github.com/users/wmol4/following{/other_user}", "gists_url": "https://api.github.com/users/wmol4/gists{/gist_id}", "starred_url": "https://api.github.com/users/wmol4/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wmol4/subscriptions", "organizations_url": "https://api.github.com/users/wmol4/orgs", "repos_url": "https://api.github.com/users/wmol4/repos", "events_url": "https://api.github.com/users/wmol4/events{/privacy}", "received_events_url": "https://api.github.com/users/wmol4/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 8, "created_at": "2019-10-08T19:39:13Z", "updated_at": "2019-11-23T05:14:03Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): openSUSE Leap 15.1\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): \r\n- TensorFlow version: tflite_runtime 1.14.0\r\n- Python version: 3.6.5\r\n- Installed using virtualenv? pip? conda?: pip3 (followed the instructions from https://www.tensorflow.org/lite/guide/python)\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version: 10.0\r\n- GPU model and memory: NVIDIA 2080ti 11GB\r\n\r\n\r\n\r\n**Describe the problem**\r\nWhen trying to install just the TensorFlow Lite interpreter, I'm able to install everything with no errors and I can even import tflite_runtime, but when I put in \"from tflite_runtime.interpreter import Interpreter\", I always run into a ModuleNotFoundError\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\n\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\n\r\nI also installed Miniconda, installed python 3.7, pip3 installed the correct tflite_runtime for python 3.7, and ran into the exact same ModuleNotFoundError.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33152", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33152/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33152/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33152/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33152", "id": 504211207, "node_id": "MDU6SXNzdWU1MDQyMTEyMDc=", "number": 33152, "title": "TPU has XLA compilation issue on TF 1.15rc3", "user": {"login": "elyasmehtabuddin", "id": 44978436, "node_id": "MDQ6VXNlcjQ0OTc4NDM2", "avatar_url": "https://avatars2.githubusercontent.com/u/44978436?v=4", "gravatar_id": "", "url": "https://api.github.com/users/elyasmehtabuddin", "html_url": "https://github.com/elyasmehtabuddin", "followers_url": "https://api.github.com/users/elyasmehtabuddin/followers", "following_url": "https://api.github.com/users/elyasmehtabuddin/following{/other_user}", "gists_url": "https://api.github.com/users/elyasmehtabuddin/gists{/gist_id}", "starred_url": "https://api.github.com/users/elyasmehtabuddin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/elyasmehtabuddin/subscriptions", "organizations_url": "https://api.github.com/users/elyasmehtabuddin/orgs", "repos_url": "https://api.github.com/users/elyasmehtabuddin/repos", "events_url": "https://api.github.com/users/elyasmehtabuddin/events{/privacy}", "received_events_url": "https://api.github.com/users/elyasmehtabuddin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1133285679, "node_id": "MDU6TGFiZWwxMTMzMjg1Njc5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:xla", "name": "comp:xla", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-10-08T18:41:23Z", "updated_at": "2019-10-25T00:33:02Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\npython: `3.7.3`\r\ntensorflow version: `1.15.0rc3`\r\n[tf_env.txt](https://github.com/tensorflow/tensorflow/files/3704020/tf_env.txt)\r\n\r\n**Describe the current behavior**\r\n\r\nError message I get is the following:\r\n\r\n```\r\nWARNING:tensorflow:From /usr/local/lib/python3.7/site-packages/tensorflow_core/python/keras/initializers.py:119: calling RandomUniform.__init__ (from tensorflow.python.ops.init_ops) with dtype is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nCall initializer instance with the dtype argument instead of passing it to the constructor\r\nWARNING:tensorflow:From /usr/local/lib/python3.7/site-packages/tensorflow_core/python/ops/resource_variable_ops.py:1630: calling BaseResourceVariable.__init__ (from tensorflow.python.ops.resource_variable_ops) with constraint is deprecated and will be removed in a future version.\r\nInstructions for updating:\r\nIf using Keras pass *_constraint arguments to layers.\r\nWARNING:tensorflow:From issue.py:19: The name tf.train.MomentumOptimizer is deprecated. Please use tf.compat.v1.train.MomentumOptimizer instead.\r\n\r\nWARNING:tensorflow:From issue.py:30: The name tf.Session is deprecated. Please use tf.compat.v1.Session instead.\r\n\r\n2019-10-08 11:14:04.056451: W tensorflow/stream_executor/platform/default/dso_loader.cc:55] Could not load dynamic library 'libcuda.so.1'; dlerror: libcuda.so.1: cannot open shared object file: No such file or directory\r\n2019-10-08 11:14:04.056480: E tensorflow/stream_executor/cuda/cuda_driver.cc:318] failed call to cuInit: UNKNOWN ERROR (303)\r\n2019-10-08 11:14:04.056497: I tensorflow/stream_executor/cuda/cuda_diagnostics.cc:156] kernel driver does not appear to be running on this host (cs-6000-devshell-vm-8cf51c20-59fd-4dc8-ad36-465b49377d09): /proc/driver/nvidia/version does not exist\r\n2019-10-08 11:14:04.056770: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-10-08 11:14:04.069196: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2200000000 Hz\r\n2019-10-08 11:14:04.070092: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x560554da1f40 initialized for platform Host (this does not guarantee that XLA will be used). Devices:\r\n2019-10-08 11:14:04.070105: I tensorflow/compiler/xla/service/service.cc:176]   StreamExecutor device (0): Host, Default Version\r\nWARNING:tensorflow:From issue.py:31: The name tf.global_variables_initializer is deprecated. Please use tf.compat.v1.global_variables_initializer instead.\r\n\r\n2019-10-08 11:14:04.154903: W tensorflow/core/framework/op_kernel.cc:1651] OP_REQUIRES failed at xla_ops.cc:361 : Invalid argument: Detected unsupported operations when trying to compile graph cluster_3267298482081017018[] on XLA_CPU_JIT: Unique (No registered 'Unique' OpKernel for XLA_CPU_JIT devices compatible with node {{node sgd_momentum/update_embedding/embeddings/Unique}}\r\n\t.  Registered:  device='CPU'; T in [DT_BOOL]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_BOOL]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_STRING]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_STRING]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_DOUBLE]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_DOUBLE]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_FLOAT]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_FLOAT]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_BFLOAT16]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_BFLOAT16]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_HALF]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_HALF]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_INT8]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_INT8]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_UINT8]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_UINT8]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_INT16]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_INT16]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_UINT16]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_UINT16]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_INT32]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_INT32]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_INT64]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_INT64]; out_idx in [DT_INT32]\r\n  device='GPU'; T in [DT_INT64]; out_idx in [DT_INT64]\r\n  device='GPU'; T in [DT_INT64]; out_idx in [DT_INT32]\r\n  device='GPU'; T in [DT_INT32]; out_idx in [DT_INT64]\r\n  device='GPU'; T in [DT_INT32]; out_idx in [DT_INT32]\r\n){{node sgd_momentum/update_embedding/embeddings/Unique}}\r\n\tThis error might be occurring with the use of xla.compile. If it is not necessary that every Op be compiled with XLA, an alternative is to use auto_jit with OptimizerOptions.global_jit_level = ON_2 or the environment variable TF_XLA_FLAGS=\"tf_xla_auto_jit=2\" which will attempt to use xla to compile as much of the graph as the compiler is able to.\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.7/site-packages/tensorflow_core/python/client/session.py\", line 1365, in _do_call\r\n    return fn(*args)\r\n  File \"/usr/local/lib/python3.7/site-packages/tensorflow_core/python/client/session.py\", line 1350, in _run_fn\r\n    target_list, run_metadata)\r\n  File \"/usr/local/lib/python3.7/site-packages/tensorflow_core/python/client/session.py\", line 1443, in _call_tf_sessionrun\r\n    run_metadata)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Detected unsupported operations when trying to compile graph cluster_3267298482081017018[] on XLA_CPU_JIT: Unique (No registered 'Unique' OpKernel for XLA_CPU_JIT devices compatible with node {{node sgd_momentum/update_embedding/embeddings/Unique}}\r\n\t.  Registered:  device='CPU'; T in [DT_BOOL]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_BOOL]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_STRING]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_STRING]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_DOUBLE]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_DOUBLE]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_FLOAT]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_FLOAT]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_BFLOAT16]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_BFLOAT16]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_HALF]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_HALF]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_INT8]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_INT8]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_UINT8]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_UINT8]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_INT16]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_INT16]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_UINT16]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_UINT16]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_INT32]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_INT32]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_INT64]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_INT64]; out_idx in [DT_INT32]\r\n  device='GPU'; T in [DT_INT64]; out_idx in [DT_INT64]\r\n  device='GPU'; T in [DT_INT64]; out_idx in [DT_INT32]\r\n  device='GPU'; T in [DT_INT32]; out_idx in [DT_INT64]\r\n  device='GPU'; T in [DT_INT32]; out_idx in [DT_INT32]\r\n){{node sgd_momentum/update_embedding/embeddings/Unique}}\r\n\tThis error might be occurring with the use of xla.compile. If it is not necessary that every Op be compiled with XLA, an alternative is to use auto_jit with OptimizerOptions.global_jit_level = ON_2 or the environment variable TF_XLA_FLAGS=\"tf_xla_auto_jit=2\" which will attempt to use xla to compile as much of the graph as the compiler is able to.\r\n\t [[cluster]]\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"issue.py\", line 32, in <module>\r\n    sess.run(loss)\r\n  File \"/usr/local/lib/python3.7/site-packages/tensorflow_core/python/client/session.py\", line 956, in run\r\n    run_metadata_ptr)\r\n  File \"/usr/local/lib/python3.7/site-packages/tensorflow_core/python/client/session.py\", line 1180, in _run\r\n    feed_dict_tensor, options, run_metadata)\r\n  File \"/usr/local/lib/python3.7/site-packages/tensorflow_core/python/client/session.py\", line 1359, in _do_run\r\n    run_metadata)\r\n  File \"/usr/local/lib/python3.7/site-packages/tensorflow_core/python/client/session.py\", line 1384, in _do_call\r\n    raise type(e)(node_def, op, message)\r\ntensorflow.python.framework.errors_impl.InvalidArgumentError: Detected unsupported operations when trying to compile graph cluster_3267298482081017018[] on XLA_CPU_JIT: Unique (No registered 'Unique' OpKernel for XLA_CPU_JIT devices compatible with node node sgd_momentum/update_embedding/embeddings/Unique (defined at /usr/local/lib/python3.7/site-packages/tensorflow_core/python/framework/ops.py:1748) \r\n\t.  Registered:  device='CPU'; T in [DT_BOOL]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_BOOL]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_STRING]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_STRING]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_DOUBLE]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_DOUBLE]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_FLOAT]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_FLOAT]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_BFLOAT16]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_BFLOAT16]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_HALF]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_HALF]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_INT8]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_INT8]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_UINT8]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_UINT8]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_INT16]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_INT16]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_UINT16]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_UINT16]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_INT32]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_INT32]; out_idx in [DT_INT32]\r\n  device='CPU'; T in [DT_INT64]; out_idx in [DT_INT64]\r\n  device='CPU'; T in [DT_INT64]; out_idx in [DT_INT32]\r\n  device='GPU'; T in [DT_INT64]; out_idx in [DT_INT64]\r\n  device='GPU'; T in [DT_INT64]; out_idx in [DT_INT32]\r\n  device='GPU'; T in [DT_INT32]; out_idx in [DT_INT64]\r\n  device='GPU'; T in [DT_INT32]; out_idx in [DT_INT32]\r\n)node sgd_momentum/update_embedding/embeddings/Unique (defined at /usr/local/lib/python3.7/site-packages/tensorflow_core/python/framework/ops.py:1748) \r\n\tThis error might be occurring with the use of xla.compile. If it is not necessary that every Op be compiled with XLA, an alternative is to use auto_jit with OptimizerOptions.global_jit_level = ON_2 or the environment variable TF_XLA_FLAGS=\"tf_xla_auto_jit=2\" which will attempt to use xla to compile as much of the graph as the compiler is able to.\r\n\t [[cluster]]\r\n```\r\n\r\n**Describe the expected behavior**\r\nIf I used tf.train.GradientDescentOptimizer instead it would work, I expect using momentum optimizer to work as well.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport os\r\nimport tensorflow as tf\r\nfrom tensorflow.python.compiler.xla import xla\r\nfrom tensorflow.keras.layers import Embedding\r\n\r\nLEARNING_RATE = 0.1\r\nVOCAB_SIZE = 100\r\nHIDDEN_SIZE = 200\r\nMAX_SEQ_LEN = 150\r\n\r\ndef my_model(features, labels):\r\n    emb = Embedding(VOCAB_SIZE, HIDDEN_SIZE)(features)\r\n    logits = tf.keras.layers.Dense(units=VOCAB_SIZE)(emb)\r\n    crossent = tf.nn.sparse_softmax_cross_entropy_with_logits(\r\n        labels=labels,\r\n        logits=logits\r\n    )\r\n    loss = tf.reduce_mean(crossent)\r\n    optimizer = tf.train.MomentumOptimizer(\r\n        learning_rate=LEARNING_RATE,\r\n        momentum=0.9,\r\n        name='sgd_momentum')\r\n    train_op = optimizer.minimize(loss)\r\n    return loss\r\n\r\nsrc = tf.constant(0, dtype=tf.int32, shape=[MAX_SEQ_LEN])\r\ntgt = tf.constant(1, dtype=tf.int32, shape=[MAX_SEQ_LEN])\r\n(loss,) = xla.compile(my_model, [src, tgt])\r\n\r\nsess = tf.Session()\r\nsess.run(tf.global_variables_initializer())\r\nsess.run(loss)\r\nsess.close()\r\n```\r\n\r\n**Other info / logs**\r\n\r\nIssue occurs when using keras `Embedding` layer alongside an optimizer that is not sgd.\r\nThe issue can be fixed by modifying keras implementation by changing:\r\n```\r\ntf.gather(weights, inputs)\r\n```\r\nto\r\n```\r\ntf.gather(tf.multiply(weights,1), inputs)\r\n```\r\n\r\nThe issue is in the weights being an IndexedSlice which causes any non-sgd optimizer to use the `unique` operation which is unsupported by XLA. However, if you do `tf.multiply(weights,1)` it makes that expression the IndexedSlice and weights itself doesn't become an IndexedSlice but rather a tensor so the optimizer implementation in tensorflow doesn't call `unique`.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33148", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33148/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33148/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33148/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33148", "id": 504114243, "node_id": "MDU6SXNzdWU1MDQxMTQyNDM=", "number": 33148, "title": "Masking LSTM: OP_REQUIRES failed at cudnn_rnn_ops.cc:1498 : Unknown: CUDNN_STATUS_BAD_PARAM", "user": {"login": "mimxrt", "id": 53339396, "node_id": "MDQ6VXNlcjUzMzM5Mzk2", "avatar_url": "https://avatars1.githubusercontent.com/u/53339396?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mimxrt", "html_url": "https://github.com/mimxrt", "followers_url": "https://api.github.com/users/mimxrt/followers", "following_url": "https://api.github.com/users/mimxrt/following{/other_user}", "gists_url": "https://api.github.com/users/mimxrt/gists{/gist_id}", "starred_url": "https://api.github.com/users/mimxrt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mimxrt/subscriptions", "organizations_url": "https://api.github.com/users/mimxrt/orgs", "repos_url": "https://api.github.com/users/mimxrt/repos", "events_url": "https://api.github.com/users/mimxrt/events{/privacy}", "received_events_url": "https://api.github.com/users/mimxrt/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "houtoms", "id": 4001424, "node_id": "MDQ6VXNlcjQwMDE0MjQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/4001424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/houtoms", "html_url": "https://github.com/houtoms", "followers_url": "https://api.github.com/users/houtoms/followers", "following_url": "https://api.github.com/users/houtoms/following{/other_user}", "gists_url": "https://api.github.com/users/houtoms/gists{/gist_id}", "starred_url": "https://api.github.com/users/houtoms/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/houtoms/subscriptions", "organizations_url": "https://api.github.com/users/houtoms/orgs", "repos_url": "https://api.github.com/users/houtoms/repos", "events_url": "https://api.github.com/users/houtoms/events{/privacy}", "received_events_url": "https://api.github.com/users/houtoms/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "houtoms", "id": 4001424, "node_id": "MDQ6VXNlcjQwMDE0MjQ=", "avatar_url": "https://avatars3.githubusercontent.com/u/4001424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/houtoms", "html_url": "https://github.com/houtoms", "followers_url": "https://api.github.com/users/houtoms/followers", "following_url": "https://api.github.com/users/houtoms/following{/other_user}", "gists_url": "https://api.github.com/users/houtoms/gists{/gist_id}", "starred_url": "https://api.github.com/users/houtoms/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/houtoms/subscriptions", "organizations_url": "https://api.github.com/users/houtoms/orgs", "repos_url": "https://api.github.com/users/houtoms/repos", "events_url": "https://api.github.com/users/houtoms/events{/privacy}", "received_events_url": "https://api.github.com/users/houtoms/received_events", "type": "User", "site_admin": false}, {"login": "qlzh727", "id": 5118881, "node_id": "MDQ6VXNlcjUxMTg4ODE=", "avatar_url": "https://avatars3.githubusercontent.com/u/5118881?v=4", "gravatar_id": "", "url": "https://api.github.com/users/qlzh727", "html_url": "https://github.com/qlzh727", "followers_url": "https://api.github.com/users/qlzh727/followers", "following_url": "https://api.github.com/users/qlzh727/following{/other_user}", "gists_url": "https://api.github.com/users/qlzh727/gists{/gist_id}", "starred_url": "https://api.github.com/users/qlzh727/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/qlzh727/subscriptions", "organizations_url": "https://api.github.com/users/qlzh727/orgs", "repos_url": "https://api.github.com/users/qlzh727/repos", "events_url": "https://api.github.com/users/qlzh727/events{/privacy}", "received_events_url": "https://api.github.com/users/qlzh727/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 45, "created_at": "2019-10-08T15:25:27Z", "updated_at": "2020-02-29T00:09:39Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code**: Yes\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: Linux Ubuntu 18.04.2 LTS\r\n- **TensorFlow installed from (source or binary)**: Binary, pip\r\n- **TensorFlow version (use command below)**: v2.0.0-rc2-26-g64c3d38 2.0.0\r\n- **Python version**: Python 3.7.3\r\n- **CUDA/cuDNN version**: CUDA=10.0, CUDNN=7.6.2.24-1\r\n- **GPU model and memory**: Quadro RTX 6000 major: 7 minor: 5 memoryClockRate(GHz): 1.77\r\n\r\n### Describe the problem\r\nIt seems there is an issue with the CuDNN LSTM implementation when using a `tf.keras.layers.Masking` layer. \r\n\r\n```\r\nbatch_size = 256\r\nnum_tsteps = 144\r\nnum_features = 130\r\nnum_units = 88\r\nmodel = tf.keras.Sequential([\r\n    tf.keras.layers.InputLayer(input_shape=(num_tsteps, num_features), batch_size=batch_size),\r\n    tf.keras.layers.Masking(mask_value=0.0, input_shape=(num_tsteps, num_features)),\r\n    tf.keras.layers.LSTM(num_units,  batch_input_shape=(batch_size, num_tsteps, num_features), return_sequences=True, stateful=False),\r\n    tf.keras.layers.TimeDistributed(tf.keras.layers.Dense(1)),\r\n    tf.keras.layers.Activation('sigmoid'),\r\n])\r\n```\r\nSimilar to #33069 I receive this error during training and I have strictly right-padded data (I am doing trimming and right-padding manually). However, in contrast to this issue, I confirmed that I do not have any inputs containing only zeroes via the following snippet:\r\n\r\n```\r\nfor i, e in enumerate(ds_train):\r\n    res = []\r\n    f, l = [x.numpy() for x in e]\r\n    for j in range(f.shape[0]):\r\n        if not (f[j] == 0.0).all():\r\n            res.append(1)\r\n        else:\r\n            res.append(0)\r\n    fin = [res[0]]\r\n    for e in res[1:]:\r\n        if e != fin[-1]:\r\n            fin.append(e)\r\n    print(\"i {}: {}\".format(i, fin))\r\n\r\n# Result:\r\ni 0: [1, 0]\r\ni 1: [1, 0]\r\ni 2: [1, 0]\r\ni 3: [1, 0]\r\ni 4: [1]\r\ni 5: [1, 0]\r\n...\r\n```\r\nIf I remove the Masking-layer, the error does not occur. I confirmed this by running a complete epoch (2324 batches), however, the training is probably pretty pointless when including the padded data.\r\n\r\nIs there any other pitfall that I am missing that could cause this issue?\r\n\r\n### Source code / logs\r\nPython output:\r\n```\r\nEpoch 1/1000\r\nWARNING:tensorflow:Early stopping conditioned on metric `val_loss` which is not available. Available metrics are: \r\n\r\n\r\nCancelledErrorTraceback (most recent call last)\r\n<ipython-input-7-1c503c2dd55c> in <module>\r\n----> 1 m.fit(train=True)\r\n\r\n/ws/tf/vol_local/_model_lstm.py in fit(self, train, verbose)\r\n    315             ]\r\n    316             self.model.fit(ds_train, epochs=num_epochs, verbose=verbose, shuffle=False,\r\n--> 317                                 validation_data=ds_val, validation_steps=None, callbacks=cbs)\r\n    318             #self.model.save(sess_hdf5_path)\r\n    319             self.model.save_weights(self.sess_h5_path.as_posix())\r\n\r\n/ws/miniconda3/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training.py in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_freq, max_queue_size, workers, use_multiprocessing, **kwargs)\r\n    726         max_queue_size=max_queue_size,\r\n    727         workers=workers,\r\n--> 728         use_multiprocessing=use_multiprocessing)\r\n    729 \r\n    730   def evaluate(self,\r\n\r\n/ws/miniconda3/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_v2.py in fit(self, model, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, validation_freq, **kwargs)\r\n    322                 mode=ModeKeys.TRAIN,\r\n    323                 training_context=training_context,\r\n--> 324                 total_epochs=epochs)\r\n    325             cbks.make_logs(model, epoch_logs, training_result, ModeKeys.TRAIN)\r\n    326 \r\n\r\n/ws/miniconda3/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_v2.py in run_one_epoch(model, iterator, execution_function, dataset_size, batch_size, strategy, steps_per_epoch, num_samples, mode, training_context, total_epochs)\r\n    121         step=step, mode=mode, size=current_batch_size) as batch_logs:\r\n    122       try:\r\n--> 123         batch_outs = execution_function(iterator)\r\n    124       except (StopIteration, errors.OutOfRangeError):\r\n    125         # TODO(kaftan): File bug about tf function and errors.OutOfRangeError?\r\n\r\n/ws/miniconda3/lib/python3.7/site-packages/tensorflow_core/python/keras/engine/training_v2_utils.py in execution_function(input_fn)\r\n     84     # `numpy` translates Tensors to values in Eager mode.\r\n     85     return nest.map_structure(_non_none_constant_value,\r\n---> 86                               distributed_function(input_fn))\r\n     87 \r\n     88   return execution_function\r\n\r\n/ws/miniconda3/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py in __call__(self, *args, **kwds)\r\n    455 \r\n    456     tracing_count = self._get_tracing_count()\r\n--> 457     result = self._call(*args, **kwds)\r\n    458     if tracing_count == self._get_tracing_count():\r\n    459       self._call_counter.called_without_tracing()\r\n\r\n/ws/miniconda3/lib/python3.7/site-packages/tensorflow_core/python/eager/def_function.py in _call(self, *args, **kwds)\r\n    518         # Lifting succeeded, so variables are initialized and we can run the\r\n    519         # stateless function.\r\n--> 520         return self._stateless_fn(*args, **kwds)\r\n    521     else:\r\n    522       canon_args, canon_kwds = \\\r\n\r\n/ws/miniconda3/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py in __call__(self, *args, **kwargs)\r\n   1821     \"\"\"Calls a graph function specialized to the inputs.\"\"\"\r\n   1822     graph_function, args, kwargs = self._maybe_define_function(args, kwargs)\r\n-> 1823     return graph_function._filtered_call(args, kwargs)  # pylint: disable=protected-access\r\n   1824 \r\n   1825   @property\r\n\r\n/ws/miniconda3/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py in _filtered_call(self, args, kwargs)\r\n   1139          if isinstance(t, (ops.Tensor,\r\n   1140                            resource_variable_ops.BaseResourceVariable))),\r\n-> 1141         self.captured_inputs)\r\n   1142 \r\n   1143   def _call_flat(self, args, captured_inputs, cancellation_manager=None):\r\n\r\n/ws/miniconda3/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py in _call_flat(self, args, captured_inputs, cancellation_manager)\r\n   1222     if executing_eagerly:\r\n   1223       flat_outputs = forward_function.call(\r\n-> 1224           ctx, args, cancellation_manager=cancellation_manager)\r\n   1225     else:\r\n   1226       gradient_name = self._delayed_rewrite_functions.register()\r\n\r\n/ws/miniconda3/lib/python3.7/site-packages/tensorflow_core/python/eager/function.py in call(self, ctx, args, cancellation_manager)\r\n    509               inputs=args,\r\n    510               attrs=(\"executor_type\", executor_type, \"config_proto\", config),\r\n--> 511               ctx=ctx)\r\n    512         else:\r\n    513           outputs = execute.execute_with_cancellation(\r\n\r\n/ws/miniconda3/lib/python3.7/site-packages/tensorflow_core/python/eager/execute.py in quick_execute(op_name, num_outputs, inputs, attrs, ctx, name)\r\n     65     else:\r\n     66       message = e.message\r\n---> 67     six.raise_from(core._status_to_exception(e.code, message), None)\r\n     68   except TypeError as e:\r\n     69     keras_symbolic_tensors = [\r\n\r\n/ws/miniconda3/lib/python3.7/site-packages/six.py in raise_from(value, from_value)\r\n\r\nCancelledError:  [_Derived_]RecvAsync is cancelled.\r\n\t [[{{node metrics/accuracy/broadcast_weights/assert_broadcastable/AssertGuard/else/_36/Assert/data_2/_62}}]]\r\n\t [[loss/activation_loss/weighted_loss/broadcast_weights/assert_broadcastable/is_valid_shape/else/_1/has_valid_nonscalar_shape/then/_106/has_invalid_dims/concat/_28]] [Op:__inference_distributed_function_172102]\r\n\r\nFunction call stack:\r\ndistributed_function\r\n```\r\n\r\nCommand line log:\r\n```\r\n2019-10-08 14:38:27.367875: W tensorflow/core/grappler/optimizers/implementation_selector.cc:310] Skipping optimization due to error while loading function libraries: Invalid argument: Functions '__inference___backward_cudnn_lstm_with_fallback_169668_171093' and '__inference___backward_cudnn_lstm_with_fallback_169668_171093_specialized_for_StatefulPartitionedCall_at___inference_distributed_function_172102' both implement 'lstm_dce676f4-acdd-4bb5-88d9-e8dd57573aba' but their signatures do not match.\r\n2019-10-08 14:38:27.536666: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcublas.so.10.0\r\n2019-10-08 14:38:39.982582: I tensorflow/stream_executor/platform/default/dso_loader.cc:44] Successfully opened dynamic library libcudnn.so.7\r\n2019-10-08 14:38:41.215567: W tensorflow/core/framework/op_kernel.cc:1622] OP_REQUIRES failed at cudnn_rnn_ops.cc:1498 : Unknown: CUDNN_STATUS_BAD_PARAM\r\nin tensorflow/stream_executor/cuda/cuda_dnn.cc(1424): 'cudnnSetRNNDataDescriptor( data_desc.get(), data_type, layout, max_seq_length, batch_size, data_size, seq_lengths_array, (void*)&padding_fill)'\r\n2019-10-08 14:38:41.215616: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Unknown: CUDNN_STATUS_BAD_PARAM\r\nin tensorflow/stream_executor/cuda/cuda_dnn.cc(1424): 'cudnnSetRNNDataDescriptor( data_desc.get(), data_type, layout, max_seq_length, batch_size, data_size, seq_lengths_array, (void*)&padding_fill)'\r\n\t [[{{node cond_64/then/_0/CudnnRNNV3}}]]\r\n2019-10-08 14:38:41.215638: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Cancelled: [_Derived_]RecvAsync is cancelled.\r\n\t [[{{node metrics/accuracy/broadcast_weights/assert_broadcastable/AssertGuard/else/_36/Assert/data_2/_62}}]]\r\n\t [[loss/activation_loss/weighted_loss/broadcast_weights/assert_broadcastable/is_valid_shape/else/_1/has_valid_nonscalar_shape/then/_106/has_invalid_dims/concat/_28]]\r\n2019-10-08 14:38:41.215693: W tensorflow/core/common_runtime/base_collective_executor.cc:216] BaseCollectiveExecutor::StartAbort Cancelled: [_Derived_]RecvAsync is cancelled.\r\n\t [[{{node metrics/accuracy/broadcast_weights/assert_broadcastable/AssertGuard/else/_36/Assert/data_2/_62}}]]\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33147", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33147/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33147/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33147/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33147", "id": 504077297, "node_id": "MDU6SXNzdWU1MDQwNzcyOTc=", "number": 33147, "title": "Regularisation losses in nested layers", "user": {"login": "georgesterpu", "id": 6018251, "node_id": "MDQ6VXNlcjYwMTgyNTE=", "avatar_url": "https://avatars0.githubusercontent.com/u/6018251?v=4", "gravatar_id": "", "url": "https://api.github.com/users/georgesterpu", "html_url": "https://github.com/georgesterpu", "followers_url": "https://api.github.com/users/georgesterpu/followers", "following_url": "https://api.github.com/users/georgesterpu/following{/other_user}", "gists_url": "https://api.github.com/users/georgesterpu/gists{/gist_id}", "starred_url": "https://api.github.com/users/georgesterpu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/georgesterpu/subscriptions", "organizations_url": "https://api.github.com/users/georgesterpu/orgs", "repos_url": "https://api.github.com/users/georgesterpu/repos", "events_url": "https://api.github.com/users/georgesterpu/events{/privacy}", "received_events_url": "https://api.github.com/users/georgesterpu/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-10-08T14:24:32Z", "updated_at": "2020-01-07T18:13:35Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "**System information**\r\n- Have I written custom code: Yes\r\n- OS Platform and Distribution: Manjaro testing, x86_64\r\n- TensorFlow installed from (source or binary): pypi binary\r\n- TensorFlow version (use command below): v2.0.0-rc2-26-g64c3d38 2.0.0\r\n- Python version: 3.7.4\r\n\r\n**Describe the current behavior**\r\nTensorFlow returns duplicated regularisation losses for layers which hold references to regularised variables built in other layers.\r\n\r\n**Describe the expected behavior**\r\nReturn a single regularisation loss per variable.\r\n\r\n**Code to reproduce the issue**\r\n```\r\nimport tensorflow as tf\r\n\r\n\r\nclass A(tf.keras.layers.Layer):\r\n    def __init__(self, layer):\r\n        super(A, self).__init__()\r\n        self.layer = layer\r\n\r\n    def call(self, inputs):\r\n        return self.layer(inputs)\r\n\r\n\r\nclass B(tf.keras.layers.Layer):\r\n    def __init__(self):\r\n        super(B, self).__init__()\r\n        self.obj = tf.keras.layers.Dense(13, kernel_regularizer=tf.keras.regularizers.l1(5))\r\n        self.layerB = A(self.obj)\r\n\r\n    def call(self, inputs):\r\n        return self.layerB(inputs)\r\n\r\nmodel = B()\r\n\r\noutput = model(tf.ones([5, 10]))\r\nprint(len(model.losses))\r\n```\r\nOnce we rename self.obj to obj, i.e. not saving it as a class member, we end up with a single regularisation loss.\r\n\r\n**Other info / logs**\r\nMore info and logs in https://github.com/tensorflow/addons/issues/577\r\nPlus @guillaumekln 's response https://github.com/tensorflow/addons/issues/577#issuecomment-539530375"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33144", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33144/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33144/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33144/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33144", "id": 504027218, "node_id": "MDU6SXNzdWU1MDQwMjcyMTg=", "number": 33144, "title": "Tensorflow Lite  fully integer quantization error :Got tensor of type STRING but expected type FLOAT32", "user": {"login": "Eagle223", "id": 24238491, "node_id": "MDQ6VXNlcjI0MjM4NDkx", "avatar_url": "https://avatars3.githubusercontent.com/u/24238491?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Eagle223", "html_url": "https://github.com/Eagle223", "followers_url": "https://api.github.com/users/Eagle223/followers", "following_url": "https://api.github.com/users/Eagle223/following{/other_user}", "gists_url": "https://api.github.com/users/Eagle223/gists{/gist_id}", "starred_url": "https://api.github.com/users/Eagle223/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Eagle223/subscriptions", "organizations_url": "https://api.github.com/users/Eagle223/orgs", "repos_url": "https://api.github.com/users/Eagle223/repos", "events_url": "https://api.github.com/users/Eagle223/events{/privacy}", "received_events_url": "https://api.github.com/users/Eagle223/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-10-08T12:55:44Z", "updated_at": "2020-03-18T06:51:46Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):Linux Ubuntu 18.04\r\n- TensorFlow installed from (source or binary):binary(pip)\r\n- TensorFlow version (or github SHA if from source):1.14.0\r\n\r\n\r\n**Provide the text output from tflite_convert**\r\n\r\n```\r\n2019-10-08 20:47:37.470691: I tensorflow/core/platform/cpu_feature_guard.cc:142] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\r\n2019-10-08 20:47:37.491949: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 2194920000 Hz\r\n2019-10-08 20:47:37.492291: I tensorflow/compiler/xla/service/service.cc:168] XLA service 0x5600095b3a90 executing computations on platform Host. Devices:\r\n2019-10-08 20:47:37.492321: I tensorflow/compiler/xla/service/service.cc:175]   StreamExecutor device (0): <undefined>, <undefined>\r\n2019-10-08 20:47:39.487818: I tensorflow/core/grappler/devices.cc:60] Number of eligible GPUs (core count >= 8, compute capability >= 0.0): 0 (Note: TensorFlow was not compiled with CUDA support)\r\n2019-10-08 20:47:39.487989: I tensorflow/core/grappler/clusters/single_machine.cc:359] Starting new session\r\n2019-10-08 20:47:41.530815: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:716] Optimization results for grappler item: graph_to_optimize\r\n2019-10-08 20:47:41.576395: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   constant folding: Graph size after: 941 nodes (-544), 973 edges (-544), time = 1222.25598ms.\r\n2019-10-08 20:47:41.576429: I tensorflow/core/grappler/optimizers/meta_optimizer.cc:718]   constant folding: Graph size after: 941 nodes (0), 973 edges (0), time = 214.279ms.\r\nINFO: Initialized TensorFlow Lite runtime.\r\nTraceback (most recent call last):\r\n  File \"/home/eagle/PycharmProjects/TFLite/main.py\", line 30, in <module>\r\n    quantized_model = converter.convert()\r\n  File \"/home/eagle/anaconda3/lib/python3.7/site-packages/tensorflow/lite/python/lite.py\", line 908, in convert\r\n    inference_output_type)\r\n  File \"/home/eagle/anaconda3/lib/python3.7/site-packages/tensorflow/lite/python/lite.py\", line 200, in _calibrate_quantize_model\r\n    inference_output_type, allow_float)\r\n  File \"/home/eagle/anaconda3/lib/python3.7/site-packages/tensorflow/lite/python/optimize/calibrator.py\", line 75, in calibrate_and_quantize\r\n    self._calibrator.FeedTensor(calibration_sample)\r\n  File \"/home/eagle/anaconda3/lib/python3.7/site-packages/tensorflow/lite/python/optimize/tensorflow_lite_wrap_calibration_wrapper.py\", line 112, in FeedTensor\r\n    return _tensorflow_lite_wrap_calibration_wrapper.CalibrationWrapper_FeedTensor(self, input_value)\r\nValueError: Cannot set tensor: Got tensor of type STRING but expected type FLOAT32 for input 0, name: input \r\n```\r\n\r\nAlso, please include a link to a GraphDef or the model if possible.\r\n\r\n**Any other info / logs**\r\n\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\nSource Code:\r\n\r\nimport tensorflow as tf\r\nimport os\r\n\r\nos.environ[\"CUDA_VISIBLE_DEVICES\"]=\"-2\"\r\n\r\nsaved_model_dir = \"./tmp/resnet/resnet_v2_101_299_frozen.pb\"\r\n\r\nif __name__ == \"__main__\":\r\n    input_arrays = [\"input\"]\r\n    output_arrays = [\"output\"]\r\n\r\n    converter = tf.lite.TFLiteConverter.from_frozen_graph(\r\n        str(saved_model_dir), input_arrays, output_arrays, input_shapes={\"input\": [1, 299, 299, 3]})\r\n\r\n    (resnet_train, _), (_, _) = tf.keras.datasets.cifar10.load_data()\r\n    images = tf.cast(resnet_train[0], tf.float32)/255.0\r\n    resnet_ds = tf.data.Dataset.from_tensor_slices(images).batch(1)\r\n\r\n    def representative_data_gen():\r\n        for input_value in resnet_ds.take(100):\r\n            yield [input_value]\r\n\r\n\r\n    converter.optimizations = [tf.lite.Optimize.DEFAULT]\r\n    converter.representative_dataset = representative_data_gen\r\n    converter.target_ops = [tf.lite.OpsSet.TFLITE_BUILTINS_INT8]\r\n    converter.inference_input_type = tf.qint8\r\n    converter.inference_output_type = tf.qint8\r\n    quantized_model = converter.convert()\r\n    open(\"./tmp/resnet/resnet_v2_101_299_frozen_weight_quantized.tflite\", \"wb\").write(quantized_model)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33138", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33138/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33138/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33138/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33138", "id": 503936214, "node_id": "MDU6SXNzdWU1MDM5MzYyMTQ=", "number": 33138, "title": "keras.LSTM in Tensorflow built with mkl is 5 times slower on CPU", "user": {"login": "npuichigo", "id": 11533479, "node_id": "MDQ6VXNlcjExNTMzNDc5", "avatar_url": "https://avatars3.githubusercontent.com/u/11533479?v=4", "gravatar_id": "", "url": "https://api.github.com/users/npuichigo", "html_url": "https://github.com/npuichigo", "followers_url": "https://api.github.com/users/npuichigo/followers", "following_url": "https://api.github.com/users/npuichigo/following{/other_user}", "gists_url": "https://api.github.com/users/npuichigo/gists{/gist_id}", "starred_url": "https://api.github.com/users/npuichigo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/npuichigo/subscriptions", "organizations_url": "https://api.github.com/users/npuichigo/orgs", "repos_url": "https://api.github.com/users/npuichigo/repos", "events_url": "https://api.github.com/users/npuichigo/events{/privacy}", "received_events_url": "https://api.github.com/users/npuichigo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1104829434, "node_id": "MDU6TGFiZWwxMTA0ODI5NDM0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:mkl", "name": "comp:mkl", "color": "0052cc", "default": false, "description": ""}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "penpornk", "id": 38085909, "node_id": "MDQ6VXNlcjM4MDg1OTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/38085909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/penpornk", "html_url": "https://github.com/penpornk", "followers_url": "https://api.github.com/users/penpornk/followers", "following_url": "https://api.github.com/users/penpornk/following{/other_user}", "gists_url": "https://api.github.com/users/penpornk/gists{/gist_id}", "starred_url": "https://api.github.com/users/penpornk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/penpornk/subscriptions", "organizations_url": "https://api.github.com/users/penpornk/orgs", "repos_url": "https://api.github.com/users/penpornk/repos", "events_url": "https://api.github.com/users/penpornk/events{/privacy}", "received_events_url": "https://api.github.com/users/penpornk/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "penpornk", "id": 38085909, "node_id": "MDQ6VXNlcjM4MDg1OTA5", "avatar_url": "https://avatars3.githubusercontent.com/u/38085909?v=4", "gravatar_id": "", "url": "https://api.github.com/users/penpornk", "html_url": "https://github.com/penpornk", "followers_url": "https://api.github.com/users/penpornk/followers", "following_url": "https://api.github.com/users/penpornk/following{/other_user}", "gists_url": "https://api.github.com/users/penpornk/gists{/gist_id}", "starred_url": "https://api.github.com/users/penpornk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/penpornk/subscriptions", "organizations_url": "https://api.github.com/users/penpornk/orgs", "repos_url": "https://api.github.com/users/penpornk/repos", "events_url": "https://api.github.com/users/penpornk/events{/privacy}", "received_events_url": "https://api.github.com/users/penpornk/received_events", "type": "User", "site_admin": false}, {"login": "TensorFlow-MKL", "id": 44416303, "node_id": "MDQ6VXNlcjQ0NDE2MzAz", "avatar_url": "https://avatars2.githubusercontent.com/u/44416303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TensorFlow-MKL", "html_url": "https://github.com/TensorFlow-MKL", "followers_url": "https://api.github.com/users/TensorFlow-MKL/followers", "following_url": "https://api.github.com/users/TensorFlow-MKL/following{/other_user}", "gists_url": "https://api.github.com/users/TensorFlow-MKL/gists{/gist_id}", "starred_url": "https://api.github.com/users/TensorFlow-MKL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TensorFlow-MKL/subscriptions", "organizations_url": "https://api.github.com/users/TensorFlow-MKL/orgs", "repos_url": "https://api.github.com/users/TensorFlow-MKL/repos", "events_url": "https://api.github.com/users/TensorFlow-MKL/events{/privacy}", "received_events_url": "https://api.github.com/users/TensorFlow-MKL/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 13, "created_at": "2019-10-08T09:36:47Z", "updated_at": "2019-10-19T01:46:55Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Ubuntu 16.04\r\n- TensorFlow installed from (source or binary): source (with or without mkl)\r\n- TensorFlow version (use command below): 2.0.0\r\n- Python version: 3.6.8\r\n- Bazel version (if compiling from source): 0.20.0\r\n- GCC/Compiler version (if compiling from source):  7.4.0\r\n- CUDA/cuDNN version: 7.6.2\r\n\r\n**Describe the current behavior**\r\nkeras.LSTM in Tensorflow built with mkl is 5 times slower on CPU\r\n\r\n**Other info / logs**\r\ntf.matmul and tf.keras.Conv2D are also tested and mkl version is faster.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33136", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33136/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33136/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33136/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33136", "id": 503888701, "node_id": "MDU6SXNzdWU1MDM4ODg3MDE=", "number": 33136, "title": "[tf1.14][TPU] Can not save model trained on TPU using tf.saved_model.save", "user": {"login": "rishabhsahrawat", "id": 15910460, "node_id": "MDQ6VXNlcjE1OTEwNDYw", "avatar_url": "https://avatars2.githubusercontent.com/u/15910460?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rishabhsahrawat", "html_url": "https://github.com/rishabhsahrawat", "followers_url": "https://api.github.com/users/rishabhsahrawat/followers", "following_url": "https://api.github.com/users/rishabhsahrawat/following{/other_user}", "gists_url": "https://api.github.com/users/rishabhsahrawat/gists{/gist_id}", "starred_url": "https://api.github.com/users/rishabhsahrawat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rishabhsahrawat/subscriptions", "organizations_url": "https://api.github.com/users/rishabhsahrawat/orgs", "repos_url": "https://api.github.com/users/rishabhsahrawat/repos", "events_url": "https://api.github.com/users/rishabhsahrawat/events{/privacy}", "received_events_url": "https://api.github.com/users/rishabhsahrawat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-10-08T07:59:28Z", "updated_at": "2019-12-30T10:52:52Z", "closed_at": null, "author_association": "NONE", "body": "I want to deploy the model using TF serving, for which I require to save the model using low level API `tf.saved_model.save()`. I am using [this](https://colab.research.google.com/drive/1C2JLKR3Rn1j2cZ_z_ZrTIc36Ou2s1H0-) exact tutorial on TPU with everything default. In found this tutorial [here](https://cloud.google.com/tpu/docs/colabs). After `model.fit()` if I try to save the model using `tf.saved_model.save()`, it throws the error `AttributeError: 'TPUMirroredVariable' object has no attribute '_constraint'`\r\n\r\nHowever, this works fine with GPU strategies. Please help, or share some info. on how to deploy model which is trained on TPU.\r\n\r\nThank you,\r\nRishabh Sahrawat"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33132", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33132/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33132/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33132/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33132", "id": 503813964, "node_id": "MDU6SXNzdWU1MDM4MTM5NjQ=", "number": 33132, "title": "fully_connect cannot  be quantilized", "user": {"login": "sunzhe09", "id": 30410113, "node_id": "MDQ6VXNlcjMwNDEwMTEz", "avatar_url": "https://avatars0.githubusercontent.com/u/30410113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sunzhe09", "html_url": "https://github.com/sunzhe09", "followers_url": "https://api.github.com/users/sunzhe09/followers", "following_url": "https://api.github.com/users/sunzhe09/following{/other_user}", "gists_url": "https://api.github.com/users/sunzhe09/gists{/gist_id}", "starred_url": "https://api.github.com/users/sunzhe09/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sunzhe09/subscriptions", "organizations_url": "https://api.github.com/users/sunzhe09/orgs", "repos_url": "https://api.github.com/users/sunzhe09/repos", "events_url": "https://api.github.com/users/sunzhe09/events{/privacy}", "received_events_url": "https://api.github.com/users/sunzhe09/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "suharshs", "id": 1450614, "node_id": "MDQ6VXNlcjE0NTA2MTQ=", "avatar_url": "https://avatars1.githubusercontent.com/u/1450614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/suharshs", "html_url": "https://github.com/suharshs", "followers_url": "https://api.github.com/users/suharshs/followers", "following_url": "https://api.github.com/users/suharshs/following{/other_user}", "gists_url": "https://api.github.com/users/suharshs/gists{/gist_id}", "starred_url": "https://api.github.com/users/suharshs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/suharshs/subscriptions", "organizations_url": "https://api.github.com/users/suharshs/orgs", "repos_url": "https://api.github.com/users/suharshs/repos", "events_url": "https://api.github.com/users/suharshs/events{/privacy}", "received_events_url": "https://api.github.com/users/suharshs/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-10-08T04:11:46Z", "updated_at": "2019-10-09T17:34:56Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):16.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):pip\r\n- TensorFlow version (use command below):1.14.0\r\n- Python version:3.6\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:10/7.0\r\n- GPU model and memory:32G\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\ntflite_convert  the pb ,it said fully_connect  lacking min/max\r\n\r\n**Describe the expected behavior**\r\nit should be passed\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\ntflite_convert --output_file landmark.tflite --graph_def_file landmark.pb --inference_type QUANTIZED_UINT8 --input_arrays image_batch --input_shapes 1,112,112,3 --output_arrays pfld_inference/output --std_dev_values 255 --mean_values 0\r\n**Other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\nArray pfld_inference/fc/Tensordot, which is an input to the Reshape operator producing the output array pfld_inference/output, is lacking min/max data, which is necessary for quantization. If accuracy matters, either target a non-quantized output format, or run quantized training with your model from a floating point checkpoint to change the input graph to contain min/max information. If you don't care about accuracy, you can pass --default_ranges_min= and --default_ranges_max= for easy experimentation.\r\nFatal Python error: Aborted\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33127", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33127/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33127/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33127/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33127", "id": 503774068, "node_id": "MDU6SXNzdWU1MDM3NzQwNjg=", "number": 33127, "title": "TensorflowLite Upsampling2D does not change output shape when resize_input_tensor is called", "user": {"login": "stephen-systemfriend", "id": 49134747, "node_id": "MDQ6VXNlcjQ5MTM0NzQ3", "avatar_url": "https://avatars3.githubusercontent.com/u/49134747?v=4", "gravatar_id": "", "url": "https://api.github.com/users/stephen-systemfriend", "html_url": "https://github.com/stephen-systemfriend", "followers_url": "https://api.github.com/users/stephen-systemfriend/followers", "following_url": "https://api.github.com/users/stephen-systemfriend/following{/other_user}", "gists_url": "https://api.github.com/users/stephen-systemfriend/gists{/gist_id}", "starred_url": "https://api.github.com/users/stephen-systemfriend/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/stephen-systemfriend/subscriptions", "organizations_url": "https://api.github.com/users/stephen-systemfriend/orgs", "repos_url": "https://api.github.com/users/stephen-systemfriend/repos", "events_url": "https://api.github.com/users/stephen-systemfriend/events{/privacy}", "received_events_url": "https://api.github.com/users/stephen-systemfriend/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-10-08T01:31:43Z", "updated_at": "2019-11-20T07:46:18Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes (code can be found here https://github.com/benjamintanweihao/YOLOv3)\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows, but probably all\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: 3.7.3\r\n- CUDA/cuDNN version: 10.0\r\n- GPU model and memory: NVIDIA GTX 1070 8GB\r\n\r\n**Describe the current behavior**\r\nUpsampling 2D set to twice the size of the input always outputs the size set at convert time, even when resize inputs are called.\r\n\r\n**Describe the expected behavior**\r\nUpsampling2D outputs size times the size of the new input\r\n\r\n**Code to reproduce the issue**\r\n\r\n```\r\nimport tensorflow.keras as keras\r\nfrom tensorflow.lite.python import lite, interpreter\r\n\r\n#define model that uses upsampling 2D and depends on it's output changing with the input size\r\ndef DemoModel():\r\n  inputs = keras.layers.Input(shape=[None,None, 3], name=\"input_1\")\r\n  a = keras.layers.MaxPooling2D((2,2))(inputs)\r\n  b = keras.layers.UpSampling2D(size=(2,2))(a)\r\n  c = keras.layers.Concatenate()([b, inputs])\r\n  return keras.models.Model(inputs=[inputs], outputs=[a, c])\r\n\r\n#convert to tflite\r\nmodel = DemoModel()\r\nmodel.compile(optimizer=\"sgd\", loss=\"mean_squared_error\")\r\nmodel.save(\"testModel.h5\")\r\n\r\nconverter = lite.TFLiteConverter.from_keras_model_file(\"testModel.h5\", input_shapes={'input_1': [1,32,64,3]})\r\ntflite_model=converter.convert()\r\n\r\n\r\n#run the tflite model\r\n\r\ninter = interpreter.Interpreter(model_content=tflite_model)\r\nprint(inter.get_input_details())\r\ninter.resize_tensor_input(1, [1,16,32,3])\r\ninter.allocate_tensors()\r\nprint(inter.get_input_details())\r\n\r\n\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33113", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33113/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33113/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33113/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33113", "id": 503561694, "node_id": "MDU6SXNzdWU1MDM1NjE2OTQ=", "number": 33113, "title": "Warning on why compute devices aren't being used ", "user": {"login": "victorflorintsev", "id": 27743853, "node_id": "MDQ6VXNlcjI3NzQzODUz", "avatar_url": "https://avatars2.githubusercontent.com/u/27743853?v=4", "gravatar_id": "", "url": "https://api.github.com/users/victorflorintsev", "html_url": "https://github.com/victorflorintsev", "followers_url": "https://api.github.com/users/victorflorintsev/followers", "following_url": "https://api.github.com/users/victorflorintsev/following{/other_user}", "gists_url": "https://api.github.com/users/victorflorintsev/gists{/gist_id}", "starred_url": "https://api.github.com/users/victorflorintsev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/victorflorintsev/subscriptions", "organizations_url": "https://api.github.com/users/victorflorintsev/orgs", "repos_url": "https://api.github.com/users/victorflorintsev/repos", "events_url": "https://api.github.com/users/victorflorintsev/events{/privacy}", "received_events_url": "https://api.github.com/users/victorflorintsev/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097548274, "node_id": "MDU6TGFiZWwxMDk3NTQ4Mjc0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tfdbg", "name": "comp:tfdbg", "color": "0052cc", "default": false, "description": "tf debugger"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "caisq", "id": 16824702, "node_id": "MDQ6VXNlcjE2ODI0NzAy", "avatar_url": "https://avatars2.githubusercontent.com/u/16824702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/caisq", "html_url": "https://github.com/caisq", "followers_url": "https://api.github.com/users/caisq/followers", "following_url": "https://api.github.com/users/caisq/following{/other_user}", "gists_url": "https://api.github.com/users/caisq/gists{/gist_id}", "starred_url": "https://api.github.com/users/caisq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/caisq/subscriptions", "organizations_url": "https://api.github.com/users/caisq/orgs", "repos_url": "https://api.github.com/users/caisq/repos", "events_url": "https://api.github.com/users/caisq/events{/privacy}", "received_events_url": "https://api.github.com/users/caisq/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-10-07T16:31:49Z", "updated_at": "2019-10-07T20:07:04Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 2.0.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nAs of now, if \"tf.debugging.set_log_device_placement(True)\" is set, there is useful feedback on which device is being used for computation. \r\n\r\nIt would be helpful however, if feedback was given as to why a TPU, GPU, XLA_GPU or CPU wasn't used. Especially if a lower-power device was chosen instead (GPU instead of TPU, or CPU used instead of GPU for instance). \r\n\r\nInformation and hints about CUDA versions, incompatibility and other setup flaws would greatly speed up debugging and getting things going.\r\n\r\n**Will this change the current api? How?**\r\nNo, it will simply add information to the device placement log.\r\n\r\n**Who will benefit with this feature?**\r\nAny users trying to set up their TPU, GPU or cluster.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33108", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33108/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33108/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33108/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33108", "id": 503443064, "node_id": "MDU6SXNzdWU1MDM0NDMwNjQ=", "number": 33108, "title": "Tensorflow 2.0 - bazel build from source fails (can't exec cc1plus)", "user": {"login": "lutel", "id": 10489309, "node_id": "MDQ6VXNlcjEwNDg5MzA5", "avatar_url": "https://avatars2.githubusercontent.com/u/10489309?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lutel", "html_url": "https://github.com/lutel", "followers_url": "https://api.github.com/users/lutel/followers", "following_url": "https://api.github.com/users/lutel/following{/other_user}", "gists_url": "https://api.github.com/users/lutel/gists{/gist_id}", "starred_url": "https://api.github.com/users/lutel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lutel/subscriptions", "organizations_url": "https://api.github.com/users/lutel/orgs", "repos_url": "https://api.github.com/users/lutel/repos", "events_url": "https://api.github.com/users/lutel/events{/privacy}", "received_events_url": "https://api.github.com/users/lutel/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1222092379, "node_id": "MDU6TGFiZWwxMjIyMDkyMzc5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:bazel", "name": "subtype:bazel", "color": "b619ea", "default": false, "description": "Bazel related Build_Installation issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "perfinion", "id": 363227, "node_id": "MDQ6VXNlcjM2MzIyNw==", "avatar_url": "https://avatars3.githubusercontent.com/u/363227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/perfinion", "html_url": "https://github.com/perfinion", "followers_url": "https://api.github.com/users/perfinion/followers", "following_url": "https://api.github.com/users/perfinion/following{/other_user}", "gists_url": "https://api.github.com/users/perfinion/gists{/gist_id}", "starred_url": "https://api.github.com/users/perfinion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/perfinion/subscriptions", "organizations_url": "https://api.github.com/users/perfinion/orgs", "repos_url": "https://api.github.com/users/perfinion/repos", "events_url": "https://api.github.com/users/perfinion/events{/privacy}", "received_events_url": "https://api.github.com/users/perfinion/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "perfinion", "id": 363227, "node_id": "MDQ6VXNlcjM2MzIyNw==", "avatar_url": "https://avatars3.githubusercontent.com/u/363227?v=4", "gravatar_id": "", "url": "https://api.github.com/users/perfinion", "html_url": "https://github.com/perfinion", "followers_url": "https://api.github.com/users/perfinion/followers", "following_url": "https://api.github.com/users/perfinion/following{/other_user}", "gists_url": "https://api.github.com/users/perfinion/gists{/gist_id}", "starred_url": "https://api.github.com/users/perfinion/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/perfinion/subscriptions", "organizations_url": "https://api.github.com/users/perfinion/orgs", "repos_url": "https://api.github.com/users/perfinion/repos", "events_url": "https://api.github.com/users/perfinion/events{/privacy}", "received_events_url": "https://api.github.com/users/perfinion/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 14, "created_at": "2019-10-07T13:11:31Z", "updated_at": "2019-12-25T16:38:51Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\nSystem: Gentoo\r\nTensorflow 2.0, 1.14\r\nPython 3.6\r\nInstalled from source\r\nBazel 0.26.1\r\nGCC 8.3.0, 7.4.0 (both fails, both have c++ installed - /usr/libexec/gcc/x86_64-pc-linux-gnu/8.3.0/cc1plus)\r\nCUDA 10.1\r\nCuDNN 7.6.4\r\n\r\n\r\n```\r\n# bazel build --config=v2 //tensorflow/tools/pip_package:build_pip_package\r\n\r\n...\r\n\r\nINFO: Analyzed target //tensorflow/tools/pip_package:build_pip_package (278 packages loaded, 21924 targets configured).\r\nINFO: Found 1 target...\r\nERROR: /w/pip/.cache/bazel/_bazel_pip/667008e4969ed3eba4f1f491903cb254/external/com_google_protobuf/BUILD:106:1: C++ compilation of rule '@com_google_protobuf//:protobuf_lite' failed (Exit 1)\r\ngcc: error trying to exec 'cc1plus': execvp: No such file or directory\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nUse --verbose_failures to see the command lines of failed build steps.\r\n\r\n```\r\n\r\n\r\ng++ is installed on system...\r\n\r\n```\r\n # g++ --print-prog-name=cc1plus\r\n/usr/libexec/gcc/x86_64-pc-linux-gnu/8.3.0/cc1plus\r\n```\r\n\r\nPlease help, I get the same error for every other release."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33103", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33103/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33103/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33103/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33103", "id": 503312852, "node_id": "MDU6SXNzdWU1MDMzMTI4NTI=", "number": 33103, "title": "TPU, model.fit : 2GB of RAM limit", "user": {"login": "agsci2017", "id": 27484172, "node_id": "MDQ6VXNlcjI3NDg0MTcy", "avatar_url": "https://avatars0.githubusercontent.com/u/27484172?v=4", "gravatar_id": "", "url": "https://api.github.com/users/agsci2017", "html_url": "https://github.com/agsci2017", "followers_url": "https://api.github.com/users/agsci2017/followers", "following_url": "https://api.github.com/users/agsci2017/following{/other_user}", "gists_url": "https://api.github.com/users/agsci2017/gists{/gist_id}", "starred_url": "https://api.github.com/users/agsci2017/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/agsci2017/subscriptions", "organizations_url": "https://api.github.com/users/agsci2017/orgs", "repos_url": "https://api.github.com/users/agsci2017/repos", "events_url": "https://api.github.com/users/agsci2017/events{/privacy}", "received_events_url": "https://api.github.com/users/agsci2017/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097541661, "node_id": "MDU6TGFiZWwxMDk3NTQxNjYx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tpus", "name": "comp:tpus", "color": "0052cc", "default": false, "description": "tpu, tpuestimator"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jhseu", "id": 170179, "node_id": "MDQ6VXNlcjE3MDE3OQ==", "avatar_url": "https://avatars1.githubusercontent.com/u/170179?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jhseu", "html_url": "https://github.com/jhseu", "followers_url": "https://api.github.com/users/jhseu/followers", "following_url": "https://api.github.com/users/jhseu/following{/other_user}", "gists_url": "https://api.github.com/users/jhseu/gists{/gist_id}", "starred_url": "https://api.github.com/users/jhseu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jhseu/subscriptions", "organizations_url": "https://api.github.com/users/jhseu/orgs", "repos_url": "https://api.github.com/users/jhseu/repos", "events_url": "https://api.github.com/users/jhseu/events{/privacy}", "received_events_url": "https://api.github.com/users/jhseu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-10-07T08:48:15Z", "updated_at": "2019-10-24T06:25:26Z", "closed_at": null, "author_association": "NONE", "body": "\r\n\r\n\r\n**Describe the current behavior**\r\n\r\nThere is an error (\"Session is not found\"), when trying to use a dataset with the size more than 2GB of RAM.\r\nError is reproducible for different step size (256,1024,8192).\r\n\r\n**Describe the expected behavior**\r\n\r\nNo error when feeding a dataset which is more than 2GB of RAM.\r\n\r\n**Code to reproduce the issue**\r\n\r\nTo reproduce, just copy the following code to Colab with TPU enabled.\r\n```\r\nimport tensorflow as tf\r\nimport numpy as np\r\n\r\nimport distutils\r\nif distutils.version.LooseVersion(tf.__version__) < '1.14':\r\n    raise Exception('This notebook is compatible with TensorFlow 1.14 or higher, for TensorFlow 1.13 or lower please use the previous version at https://github.com/tensorflow/tpu/blob/r1.13/tools/colab/fashion_mnist.ipynb')\r\n\r\nimport os\r\n\r\nresolver = tf.contrib.cluster_resolver.TPUClusterResolver('grpc://' + os.environ['COLAB_TPU_ADDR'])\r\ntf.contrib.distribute.initialize_tpu_system(resolver)\r\nstrategy = tf.contrib.distribute.TPUStrategy(resolver)\r\n\r\noptimizer = tf.contrib.tpu.CrossShardOptimizer(tf.train.GradientDescentOptimizer(0.01))\r\n\r\nwith strategy.scope():\r\n  model = tf.keras.applications.VGG16(input_shape=(32,32,3),classes=10, weights=None)#  create_model()\r\n  model.compile(\r\n      optimizer=optimizer,\r\n      loss='mse',\r\n      metrics=['mse'])\r\n\r\n# 1024*192 * 32*32*3 * 4bytes = 2 415 919 104 bytes\r\nX = np.zeros((1024*192, 32,32,3),dtype=np.float32)\r\ny = np.ones((1024*192, 10),dtype=np.float32)\r\n\r\nmodel.fit(\r\n    X,y,\r\n    epochs=10,\r\n    steps_per_epoch=1024, #batch size is 192 per TPU\r\n)\r\n```\r\n\r\n**Other info / logs**\r\n\r\n```\r\n---------------------------------------------------------------------------\r\n\r\nAbortedError                              Traceback (most recent call last)\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py in _do_call(self, fn, *args)\r\n   1355     try:\r\n-> 1356       return fn(*args)\r\n   1357     except errors.OpError as e:\r\n\r\n13 frames\r\n\r\nAbortedError: Session 14acf315e768e91c is not found.\r\n\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nAbortedError                              Traceback (most recent call last)\r\n\r\n/usr/local/lib/python3.6/dist-packages/tensorflow/python/client/session.py in _do_call(self, fn, *args)\r\n   1368           pass\r\n   1369       message = error_interpolation.interpolate(message, self._graph)\r\n-> 1370       raise type(e)(node_def, op, message)\r\n   1371 \r\n   1372   def _extend_graph(self):\r\n\r\nAbortedError: Session 14acf315e768e91c is not found.\r\n```\r\n\r\n```\r\nprint(tf.GIT_VERSION)\r\nv1.14.0-0-g87989f6959\r\nprint(tf.VERSION)\r\n1.14.0\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33092", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33092/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33092/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33092/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33092", "id": 503164100, "node_id": "MDU6SXNzdWU1MDMxNjQxMDA=", "number": 33092, "title": "Prebuilt libtensorflow (C API)", "user": {"login": "jtavrisov", "id": 7612877, "node_id": "MDQ6VXNlcjc2MTI4Nzc=", "avatar_url": "https://avatars2.githubusercontent.com/u/7612877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtavrisov", "html_url": "https://github.com/jtavrisov", "followers_url": "https://api.github.com/users/jtavrisov/followers", "following_url": "https://api.github.com/users/jtavrisov/following{/other_user}", "gists_url": "https://api.github.com/users/jtavrisov/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtavrisov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtavrisov/subscriptions", "organizations_url": "https://api.github.com/users/jtavrisov/orgs", "repos_url": "https://api.github.com/users/jtavrisov/repos", "events_url": "https://api.github.com/users/jtavrisov/events{/privacy}", "received_events_url": "https://api.github.com/users/jtavrisov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}], "state": "open", "locked": false, "assignee": {"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gunan", "id": 7946809, "node_id": "MDQ6VXNlcjc5NDY4MDk=", "avatar_url": "https://avatars3.githubusercontent.com/u/7946809?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gunan", "html_url": "https://github.com/gunan", "followers_url": "https://api.github.com/users/gunan/followers", "following_url": "https://api.github.com/users/gunan/following{/other_user}", "gists_url": "https://api.github.com/users/gunan/gists{/gist_id}", "starred_url": "https://api.github.com/users/gunan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gunan/subscriptions", "organizations_url": "https://api.github.com/users/gunan/orgs", "repos_url": "https://api.github.com/users/gunan/repos", "events_url": "https://api.github.com/users/gunan/events{/privacy}", "received_events_url": "https://api.github.com/users/gunan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-10-06T21:35:50Z", "updated_at": "2020-01-02T17:34:24Z", "closed_at": null, "author_association": "NONE", "body": "The link in \r\nhttps://www.tensorflow.org/install/lang_c\r\n\r\ncontain the 1.14 library. Are there any prebuilt link for the C API for 2.0 stable?\r\n\r\nThis also holds true for the install for java page\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33089", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33089/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33089/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33089/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33089", "id": 503141654, "node_id": "MDU6SXNzdWU1MDMxNDE2NTQ=", "number": 33089, "title": "tf silently rounding to integer when converting to PIL format", "user": {"login": "WildTangles", "id": 2264510, "node_id": "MDQ6VXNlcjIyNjQ1MTA=", "avatar_url": "https://avatars1.githubusercontent.com/u/2264510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WildTangles", "html_url": "https://github.com/WildTangles", "followers_url": "https://api.github.com/users/WildTangles/followers", "following_url": "https://api.github.com/users/WildTangles/following{/other_user}", "gists_url": "https://api.github.com/users/WildTangles/gists{/gist_id}", "starred_url": "https://api.github.com/users/WildTangles/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WildTangles/subscriptions", "organizations_url": "https://api.github.com/users/WildTangles/orgs", "repos_url": "https://api.github.com/users/WildTangles/repos", "events_url": "https://api.github.com/users/WildTangles/events{/privacy}", "received_events_url": "https://api.github.com/users/WildTangles/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "fchollet", "id": 710255, "node_id": "MDQ6VXNlcjcxMDI1NQ==", "avatar_url": "https://avatars3.githubusercontent.com/u/710255?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fchollet", "html_url": "https://github.com/fchollet", "followers_url": "https://api.github.com/users/fchollet/followers", "following_url": "https://api.github.com/users/fchollet/following{/other_user}", "gists_url": "https://api.github.com/users/fchollet/gists{/gist_id}", "starred_url": "https://api.github.com/users/fchollet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fchollet/subscriptions", "organizations_url": "https://api.github.com/users/fchollet/orgs", "repos_url": "https://api.github.com/users/fchollet/repos", "events_url": "https://api.github.com/users/fchollet/events{/privacy}", "received_events_url": "https://api.github.com/users/fchollet/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-10-06T18:37:21Z", "updated_at": "2019-10-16T20:28:51Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code: not really, no.\r\n- OS Platform and Distribution: Linux Ubuntu 18.04.2 LTS (Bionic Beaver)\r\n- TensorFlow installed from (source or binary): pip install (binary?)\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: 3.5.2\r\n- Bazel version (if compiling from source): - \r\n- GCC/Compiler version (if compiling from source): - \r\n- CUDA/cuDNN version: - (running on cpu only)\r\n- GPU model and memory: - (running on cpu only)\r\n\r\n**Describe the current behavior**\r\nWhen converting to PIL format from array and back, tf silently rounds values to integers. (see https://www.tensorflow.org/api_docs/python/tf/keras/preprocessing/image/array_to_img, https://www.tensorflow.org/api_docs/python/tf/keras/preprocessing/image/img_to_array)\r\n\r\n**Describe the expected behavior**\r\nThrow a warning when silently rounding. maybe convert to float instead of integer if input is a float dtype?\r\n\r\n**Code to reproduce the issue**\r\nplease see the short example test case here: https://github.com/WildTangles/tf-issues/blob/master/tensorflow_bug_conversions/bug_demo.ipynb\r\n\r\nIn particular, see: \r\ncell 4 (random noise image, 4800 unique values) vs. \r\ncell 6 (image after conversion to PIL and back, 256 unique values)\r\n\r\n**Other info / logs**\r\nHappy to provide if necessary."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33088", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33088/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33088/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33088/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33088", "id": 503136300, "node_id": "MDU6SXNzdWU1MDMxMzYzMDA=", "number": 33088, "title": "inconsistent behavior of model after creation vs. after loading from save file", "user": {"login": "WildTangles", "id": 2264510, "node_id": "MDQ6VXNlcjIyNjQ1MTA=", "avatar_url": "https://avatars1.githubusercontent.com/u/2264510?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WildTangles", "html_url": "https://github.com/WildTangles", "followers_url": "https://api.github.com/users/WildTangles/followers", "following_url": "https://api.github.com/users/WildTangles/following{/other_user}", "gists_url": "https://api.github.com/users/WildTangles/gists{/gist_id}", "starred_url": "https://api.github.com/users/WildTangles/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WildTangles/subscriptions", "organizations_url": "https://api.github.com/users/WildTangles/orgs", "repos_url": "https://api.github.com/users/WildTangles/repos", "events_url": "https://api.github.com/users/WildTangles/events{/privacy}", "received_events_url": "https://api.github.com/users/WildTangles/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-10-06T17:57:09Z", "updated_at": "2019-10-14T23:28:25Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code: yes\r\n- OS Platform and Distribution: Linux Ubuntu 18.04.2 LTS (Bionic Beaver)\r\n- TensorFlow installed from (source or binary): pip install (binary?)\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: 3.5.2\r\n- Bazel version (if compiling from source): - \r\n- GCC/Compiler version (if compiling from source): - \r\n- CUDA/cuDNN version: - (running on cpu only)\r\n- GPU model and memory: - (running on cpu only)\r\n\r\n**Describe the current behavior**\r\nWhen using lambda layers with parameters generated in a loop, creation-time behavior of model is different from behavior of model re-loaded from a save file.\r\n\r\n**Describe the expected behavior**\r\nConsistent behavior at creation-time of model and after re-loading from a save file.\r\n\r\n**Code to reproduce the issue**\r\nplease see the short example test case here: https://github.com/WildTangles/tf-issues/blob/master/tensorflow_bug_lambdas/bug_demo.ipynb\r\n\r\n(alternatively, please see the same notebook rendered on a different site here: https://nbviewer.jupyter.org/github/WildTangles/tf-issues/blob/master/tensorflow_bug_lambdas/bug_demo.ipynb)\r\n\r\nIn particular, see: \r\ncell 6 (expected output plotted by hand) vs. \r\ncell 7 (model behavior right after being created, matches expected) vs.\r\ncell 10 (model behavior after being saved and re-loaded, does not match expected)\r\n\r\ncell 4 (model definition, in particular, see first few lines with lambda layer parameters defined in a loop)\r\n\r\n**Other info / logs**\r\nHappy to provide if necessary."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33085", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33085/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33085/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33085/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33085", "id": 503113688, "node_id": "MDU6SXNzdWU1MDMxMTM2ODg=", "number": 33085, "title": "Calling tf.keras.models.load_model / model.save twice fails", "user": {"login": "srfrnk", "id": 1501654, "node_id": "MDQ6VXNlcjE1MDE2NTQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/1501654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srfrnk", "html_url": "https://github.com/srfrnk", "followers_url": "https://api.github.com/users/srfrnk/followers", "following_url": "https://api.github.com/users/srfrnk/following{/other_user}", "gists_url": "https://api.github.com/users/srfrnk/gists{/gist_id}", "starred_url": "https://api.github.com/users/srfrnk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srfrnk/subscriptions", "organizations_url": "https://api.github.com/users/srfrnk/orgs", "repos_url": "https://api.github.com/users/srfrnk/repos", "events_url": "https://api.github.com/users/srfrnk/events{/privacy}", "received_events_url": "https://api.github.com/users/srfrnk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rohan100jain", "id": 144114, "node_id": "MDQ6VXNlcjE0NDExNA==", "avatar_url": "https://avatars2.githubusercontent.com/u/144114?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rohan100jain", "html_url": "https://github.com/rohan100jain", "followers_url": "https://api.github.com/users/rohan100jain/followers", "following_url": "https://api.github.com/users/rohan100jain/following{/other_user}", "gists_url": "https://api.github.com/users/rohan100jain/gists{/gist_id}", "starred_url": "https://api.github.com/users/rohan100jain/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rohan100jain/subscriptions", "organizations_url": "https://api.github.com/users/rohan100jain/orgs", "repos_url": "https://api.github.com/users/rohan100jain/repos", "events_url": "https://api.github.com/users/rohan100jain/events{/privacy}", "received_events_url": "https://api.github.com/users/rohan100jain/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 17, "created_at": "2019-10-06T15:12:34Z", "updated_at": "2020-03-13T22:54:09Z", "closed_at": null, "author_association": "NONE", "body": "Please see [CoLab](https://colab.research.google.com/drive/1dXgiJZDbGHdQFrquvtMBblgz_5O1WSlD) or [Github Gist](https://gist.github.com/srfrnk/713765b44dd6677ba3e26ff4ac46f68b#file-save-load-bug-ipynb) to see live demo.\r\n\r\nSteps to reproduce:\r\n1) Create model,compile and fit\r\n2) Save model\r\n3) Load model and fit\r\n4) Save model\r\n5) Load model\r\n\r\nGet error: `ValueError: Passing a dictionary input to a Sequential Model which doesn't have FeatureLayer as the first layer is an error.`\r\n\r\nExpected: Model that was loaded and saved again should be loaded without error."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33084", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33084/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33084/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33084/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33084", "id": 503089760, "node_id": "MDU6SXNzdWU1MDMwODk3NjA=", "number": 33084, "title": "how to change version of protobuf when I compile source code of tensorflow1.9 by bazel", "user": {"login": "liupengkd", "id": 15835439, "node_id": "MDQ6VXNlcjE1ODM1NDM5", "avatar_url": "https://avatars0.githubusercontent.com/u/15835439?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liupengkd", "html_url": "https://github.com/liupengkd", "followers_url": "https://api.github.com/users/liupengkd/followers", "following_url": "https://api.github.com/users/liupengkd/following{/other_user}", "gists_url": "https://api.github.com/users/liupengkd/gists{/gist_id}", "starred_url": "https://api.github.com/users/liupengkd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liupengkd/subscriptions", "organizations_url": "https://api.github.com/users/liupengkd/orgs", "repos_url": "https://api.github.com/users/liupengkd/repos", "events_url": "https://api.github.com/users/liupengkd/events{/privacy}", "received_events_url": "https://api.github.com/users/liupengkd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1205615612, "node_id": "MDU6TGFiZWwxMjA1NjE1NjEy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:%20ubuntu/linux", "name": "subtype: ubuntu/linux", "color": "b619ea", "default": false, "description": "Ubuntu/Linux Build/Installation Issues"}, {"id": 1222092379, "node_id": "MDU6TGFiZWwxMjIyMDkyMzc5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:bazel", "name": "subtype:bazel", "color": "b619ea", "default": false, "description": "Bazel related Build_Installation issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-10-06T11:46:56Z", "updated_at": "2020-01-09T10:42:13Z", "closed_at": null, "author_association": "NONE", "body": "I want to compile source code of tensorflow-1.9 for c library. When I compile the source code of tensorflow1.9 through bazel, it downloaded and used protobuf3.5 during the compilation process. How to modify the code can be downloaded and used protobuf3.4.1 during the compilation process."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33079", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33079/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33079/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33079/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33079", "id": 503063747, "node_id": "MDU6SXNzdWU1MDMwNjM3NDc=", "number": 33079, "title": "make_csv_dataset with num_epochs=1,2,... (finite) produces (None,) shape tensors", "user": {"login": "srfrnk", "id": 1501654, "node_id": "MDQ6VXNlcjE1MDE2NTQ=", "avatar_url": "https://avatars0.githubusercontent.com/u/1501654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/srfrnk", "html_url": "https://github.com/srfrnk", "followers_url": "https://api.github.com/users/srfrnk/followers", "following_url": "https://api.github.com/users/srfrnk/following{/other_user}", "gists_url": "https://api.github.com/users/srfrnk/gists{/gist_id}", "starred_url": "https://api.github.com/users/srfrnk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/srfrnk/subscriptions", "organizations_url": "https://api.github.com/users/srfrnk/orgs", "repos_url": "https://api.github.com/users/srfrnk/repos", "events_url": "https://api.github.com/users/srfrnk/events{/privacy}", "received_events_url": "https://api.github.com/users/srfrnk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-10-06T07:23:26Z", "updated_at": "2019-10-09T09:37:17Z", "closed_at": null, "author_association": "NONE", "body": "The following CoLab and Github Gist show the issue:\r\n[CoLab](https://colab.research.google.com/gist/srfrnk/5744026f803b57254b5ba6162dd16bf8/csv.ipynb)\r\n[Github Gist](https://gist.github.com/srfrnk/5744026f803b57254b5ba6162dd16bf8#file-csv-ipynb)\r\n\r\nIt is expected that the same shape will be returned regardless of num_epochs.\r\nCurrently if num_epochs=1 the returned tensors all have shape (None,)\r\nOnly when num_epochs=None meaning infinite repeat will the correct shape be returned.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33074", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33074/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33074/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33074/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33074", "id": 503032790, "node_id": "MDU6SXNzdWU1MDMwMzI3OTA=", "number": 33074, "title": "tf.keras accepts incorrect CNN input shapes from tf.data.Dataset when eager execution is disabled", "user": {"login": "bfmat", "id": 25210589, "node_id": "MDQ6VXNlcjI1MjEwNTg5", "avatar_url": "https://avatars0.githubusercontent.com/u/25210589?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bfmat", "html_url": "https://github.com/bfmat", "followers_url": "https://api.github.com/users/bfmat/followers", "following_url": "https://api.github.com/users/bfmat/following{/other_user}", "gists_url": "https://api.github.com/users/bfmat/gists{/gist_id}", "starred_url": "https://api.github.com/users/bfmat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bfmat/subscriptions", "organizations_url": "https://api.github.com/users/bfmat/orgs", "repos_url": "https://api.github.com/users/bfmat/repos", "events_url": "https://api.github.com/users/bfmat/events{/privacy}", "received_events_url": "https://api.github.com/users/bfmat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-10-06T00:19:26Z", "updated_at": "2019-12-06T23:01:01Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code: Yes\r\n- OS Platform and Distribution: Ubuntu 16.04\r\n- TensorFlow installed from (source or binary): Binary\r\n- TensorFlow version (use command below): 1.14.0\r\n- Python version: 3.7\r\n- Device: CPU\r\n\r\n**Describe the current behavior**\r\nI am using a `tf.data.Dataset` to train a `tf.keras` model. My CNN input layer size is (72, 96, 1). I find that if I input a tensor with size (96, 72, 1) (note the reversed dimensions), training completes successfully. However, if I enable eager execution, a `ValueError` is produced as expected.\r\n\r\n**Describe the expected behavior**\r\nA `ValueError` should be produced in response to the incorrect input shape, whether or not eager execution is enabled.\r\n\r\n**Code to reproduce the issue**\r\nNOTE: With the code below, there is no error message. However, uncomment the `tf.enable_eager_execution()` line and you will get a `ValueError`.\r\n\r\n```\r\n#!/usr/bin/env python3\r\n  \r\nimport numpy as np\r\nimport tensorflow as tf\r\nfrom tensorflow.keras import layers\r\n\r\n# UNCOMMENT THIS LINE AND YOU WILL GET AN ERROR\r\n# tf.enable_eager_execution()\r\n\r\ndef tf_dataset():\r\n\r\n    def data_gen():\r\n        while True:\r\n            yield np.random.rand(72, 96, 1), np.random.rand(18)\r\n\r\n    types = (tf.float64, tf.float64)\r\n    shapes = (tf.TensorShape([None, None, None]), tf.TensorShape([None]))\r\n    dataset = tf.data.Dataset.from_generator(data_gen, types, output_shapes=shapes)\r\n    dataset = dataset.batch(16)\r\n    return dataset\r\n\r\ndataset = tf_dataset()\r\n\r\nmodel = tf.keras.Sequential()\r\n# Notice how the input dimensions are mismatched\r\nmodel.add(layers.InputLayer((96, 72, 1)))\r\nmodel.add(layers.Conv2D(filters=32, kernel_size=4, strides=4, activation='relu'))\r\nmodel.add(layers.Conv2D(filters=32, kernel_size=4, strides=4, activation='relu'))\r\nmodel.add(layers.Flatten())\r\nmodel.add(layers.Dense(18, activation='softmax'))\r\nmodel.compile(optimizer='adam', loss='categorical_crossentropy')\r\nprint(model.summary())\r\nmodel.fit(dataset, steps_per_epoch=1, epochs=1)\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33068", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33068/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33068/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33068/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/33068", "id": 502967649, "node_id": "MDExOlB1bGxSZXF1ZXN0MzI0OTQyNjE4", "number": 33068, "title": "Linspace for multi-dimensional tensors", "user": {"login": "hristo-vrigazov", "id": 14914140, "node_id": "MDQ6VXNlcjE0OTE0MTQw", "avatar_url": "https://avatars0.githubusercontent.com/u/14914140?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hristo-vrigazov", "html_url": "https://github.com/hristo-vrigazov", "followers_url": "https://api.github.com/users/hristo-vrigazov/followers", "following_url": "https://api.github.com/users/hristo-vrigazov/following{/other_user}", "gists_url": "https://api.github.com/users/hristo-vrigazov/gists{/gist_id}", "starred_url": "https://api.github.com/users/hristo-vrigazov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hristo-vrigazov/subscriptions", "organizations_url": "https://api.github.com/users/hristo-vrigazov/orgs", "repos_url": "https://api.github.com/users/hristo-vrigazov/repos", "events_url": "https://api.github.com/users/hristo-vrigazov/events{/privacy}", "received_events_url": "https://api.github.com/users/hristo-vrigazov/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 522623856, "node_id": "MDU6TGFiZWw1MjI2MjM4NTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/API%20review", "name": "API review", "color": "d4c5f9", "default": false, "description": null}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1178505529, "node_id": "MDU6TGFiZWwxMTc4NTA1NTI5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/prtype:bugfix", "name": "prtype:bugfix", "color": "159b2e", "default": false, "description": "PR to fix a bug"}, {"id": 987666414, "node_id": "MDU6TGFiZWw5ODc2NjY0MTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/ready%20to%20pull", "name": "ready to pull", "color": "2cd643", "default": false, "description": ""}, {"id": 1169365682, "node_id": "MDU6TGFiZWwxMTY5MzY1Njgy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:L", "name": "size:L", "color": "adafea", "default": false, "description": "CL Change Size: Large"}], "state": "open", "locked": false, "assignee": {"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "gbaned", "id": 48215717, "node_id": "MDQ6VXNlcjQ4MjE1NzE3", "avatar_url": "https://avatars3.githubusercontent.com/u/48215717?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gbaned", "html_url": "https://github.com/gbaned", "followers_url": "https://api.github.com/users/gbaned/followers", "following_url": "https://api.github.com/users/gbaned/following{/other_user}", "gists_url": "https://api.github.com/users/gbaned/gists{/gist_id}", "starred_url": "https://api.github.com/users/gbaned/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gbaned/subscriptions", "organizations_url": "https://api.github.com/users/gbaned/orgs", "repos_url": "https://api.github.com/users/gbaned/repos", "events_url": "https://api.github.com/users/gbaned/events{/privacy}", "received_events_url": "https://api.github.com/users/gbaned/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 17, "created_at": "2019-10-05T14:06:58Z", "updated_at": "2020-01-22T09:55:03Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/33068", "html_url": "https://github.com/tensorflow/tensorflow/pull/33068", "diff_url": "https://github.com/tensorflow/tensorflow/pull/33068.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/33068.patch"}, "body": "Issue [32093](https://github.com/tensorflow/tensorflow/issues/32093)\r\n\r\nPrevious PR was this one: [32141](https://github.com/tensorflow/tensorflow/pull/32141)\r\n\r\nThere were comments in the previous PR by @nfelt @yongtang and @alextp , which I believe have been addressed: currently, `linspace_nd` can handle correctly a fully unknown shape, also addressed linter problems and added tests for the requested changes. \r\n\r\nThe newly added function `linspace_nd` behaves like [`np.linspace`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.linspace.html) and thus is slightly different than `tf.linspace` in two ways:\r\n\r\n* It can accept N-D tensors\r\n* When `num == 0`, the function adheres to Numpy's behaviour (returning an empty tensor), while `tf.linspace` raises an `InvallidArgumentError`\r\n\r\nFor this reason, I added it as a different function."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33057", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33057/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33057/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33057/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33057", "id": 502869205, "node_id": "MDU6SXNzdWU1MDI4NjkyMDU=", "number": 33057, "title": "No stat cache for s3 file system", "user": {"login": "ziliangpeng", "id": 551900, "node_id": "MDQ6VXNlcjU1MTkwMA==", "avatar_url": "https://avatars1.githubusercontent.com/u/551900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ziliangpeng", "html_url": "https://github.com/ziliangpeng", "followers_url": "https://api.github.com/users/ziliangpeng/followers", "following_url": "https://api.github.com/users/ziliangpeng/following{/other_user}", "gists_url": "https://api.github.com/users/ziliangpeng/gists{/gist_id}", "starred_url": "https://api.github.com/users/ziliangpeng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ziliangpeng/subscriptions", "organizations_url": "https://api.github.com/users/ziliangpeng/orgs", "repos_url": "https://api.github.com/users/ziliangpeng/repos", "events_url": "https://api.github.com/users/ziliangpeng/events{/privacy}", "received_events_url": "https://api.github.com/users/ziliangpeng/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-10-04T22:27:16Z", "updated_at": "2019-11-15T23:40:56Z", "closed_at": null, "author_association": "CONTRIBUTOR", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.14\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nIn gcs file system there's a cache for object `stat` where you don't have to repeatedly send `stat` call to remote server to get stat of the same object. This is a nice performance gain but not available in s3 file system.\r\n\r\nAs s3 share the same nature as gcs, the same cache can be applied to s3 file system for the performance gain.\r\n\r\n**Will this change the current api? How?**\r\n\r\nNo.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nUser of s3 file system, whose use pattern send rapid api calls.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33053", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33053/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33053/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33053/events", "html_url": "https://github.com/tensorflow/tensorflow/pull/33053", "id": 502792888, "node_id": "MDExOlB1bGxSZXF1ZXN0MzI0ODA4MDAz", "number": 33053, "title": "Expose tf.keras.CallbackList API", "user": {"login": "QRabbani", "id": 12076190, "node_id": "MDQ6VXNlcjEyMDc2MTkw", "avatar_url": "https://avatars0.githubusercontent.com/u/12076190?v=4", "gravatar_id": "", "url": "https://api.github.com/users/QRabbani", "html_url": "https://github.com/QRabbani", "followers_url": "https://api.github.com/users/QRabbani/followers", "following_url": "https://api.github.com/users/QRabbani/following{/other_user}", "gists_url": "https://api.github.com/users/QRabbani/gists{/gist_id}", "starred_url": "https://api.github.com/users/QRabbani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/QRabbani/subscriptions", "organizations_url": "https://api.github.com/users/QRabbani/orgs", "repos_url": "https://api.github.com/users/QRabbani/repos", "events_url": "https://api.github.com/users/QRabbani/events{/privacy}", "received_events_url": "https://api.github.com/users/QRabbani/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 390482148, "node_id": "MDU6TGFiZWwzOTA0ODIxNDg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/awaiting%20review", "name": "awaiting review", "color": "bc3869", "default": false, "description": ""}, {"id": 300136587, "node_id": "MDU6TGFiZWwzMDAxMzY1ODc=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/cla:%20yes", "name": "cla: yes", "color": "009800", "default": false, "description": null}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 1169364259, "node_id": "MDU6TGFiZWwxMTY5MzY0MjU5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/size:XS", "name": "size:XS", "color": "adafea", "default": false, "description": "CL Change Size: Extra Small"}], "state": "open", "locked": false, "assignee": {"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rthadur", "id": 43972606, "node_id": "MDQ6VXNlcjQzOTcyNjA2", "avatar_url": "https://avatars2.githubusercontent.com/u/43972606?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rthadur", "html_url": "https://github.com/rthadur", "followers_url": "https://api.github.com/users/rthadur/followers", "following_url": "https://api.github.com/users/rthadur/following{/other_user}", "gists_url": "https://api.github.com/users/rthadur/gists{/gist_id}", "starred_url": "https://api.github.com/users/rthadur/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rthadur/subscriptions", "organizations_url": "https://api.github.com/users/rthadur/orgs", "repos_url": "https://api.github.com/users/rthadur/repos", "events_url": "https://api.github.com/users/rthadur/events{/privacy}", "received_events_url": "https://api.github.com/users/rthadur/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-10-04T18:55:47Z", "updated_at": "2020-02-12T10:07:00Z", "closed_at": null, "author_association": "NONE", "pull_request": {"url": "https://api.github.com/repos/tensorflow/tensorflow/pulls/33053", "html_url": "https://github.com/tensorflow/tensorflow/pull/33053", "diff_url": "https://github.com/tensorflow/tensorflow/pull/33053.diff", "patch_url": "https://github.com/tensorflow/tensorflow/pull/33053.patch"}, "body": "Proposing this in reference to https://github.com/tensorflow/tensorflow/pull/23880#issuecomment-514821825. Will this change add \"from tensorflow.python.keras.callbacks import CallbackList\" to the machine-generated code in \"tensorflow/_api/v1/keras/callbacks/init.py\" upon building so that it can be imported as in the regular Keras? If not, please let me know what to do. Thanks!"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33041", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33041/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33041/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33041/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33041", "id": 502417867, "node_id": "MDU6SXNzdWU1MDI0MTc4Njc=", "number": 33041, "title": "EdgeTPU library is not updating for coral dev board ", "user": {"login": "sanchitjain04", "id": 38455473, "node_id": "MDQ6VXNlcjM4NDU1NDcz", "avatar_url": "https://avatars3.githubusercontent.com/u/38455473?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanchitjain04", "html_url": "https://github.com/sanchitjain04", "followers_url": "https://api.github.com/users/sanchitjain04/followers", "following_url": "https://api.github.com/users/sanchitjain04/following{/other_user}", "gists_url": "https://api.github.com/users/sanchitjain04/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanchitjain04/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanchitjain04/subscriptions", "organizations_url": "https://api.github.com/users/sanchitjain04/orgs", "repos_url": "https://api.github.com/users/sanchitjain04/repos", "events_url": "https://api.github.com/users/sanchitjain04/events{/privacy}", "received_events_url": "https://api.github.com/users/sanchitjain04/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-10-04T04:25:52Z", "updated_at": "2019-10-08T00:17:24Z", "closed_at": null, "author_association": "NONE", "body": "* Doc you were trying to follow: https://coral.withgoogle.com/news/updates-07-2019/\r\n* Your host OS: Ubuntu 16.04\r\nPython3 version: 3.5.3\r\n\r\n# What I ran\r\n\r\nI executed the commands as mentioned in the post as mentioned above :\r\n\r\nsudo apt-get update\r\n\r\nsudo apt-get dist-upgrade\r\n\r\n\r\n\r\nthis automatically updates the edgetpu library along with other Mendel system software.\r\n\r\n# What the docs said should happen:\r\n\r\nAs per the post it should have updated the library but after updates were done the edgetpu library version is still been shown as 1.2.0\r\n\r\nBut our expectations were to be updated to newest 2.11.1 version\r\n\r\n# What actually happened\r\n\r\nEdgeTPU library version is still been shown as 1.2.0\r\n\r\n\r\nKindly help in resolving the issue.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33037", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33037/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33037/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33037/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33037", "id": 502393921, "node_id": "MDU6SXNzdWU1MDIzOTM5MjE=", "number": 33037, "title": "radon and inverse radon transform, Projection and back_projection function in CT", "user": {"login": "wangwei-cmd", "id": 56121617, "node_id": "MDQ6VXNlcjU2MTIxNjE3", "avatar_url": "https://avatars2.githubusercontent.com/u/56121617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wangwei-cmd", "html_url": "https://github.com/wangwei-cmd", "followers_url": "https://api.github.com/users/wangwei-cmd/followers", "following_url": "https://api.github.com/users/wangwei-cmd/following{/other_user}", "gists_url": "https://api.github.com/users/wangwei-cmd/gists{/gist_id}", "starred_url": "https://api.github.com/users/wangwei-cmd/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wangwei-cmd/subscriptions", "organizations_url": "https://api.github.com/users/wangwei-cmd/orgs", "repos_url": "https://api.github.com/users/wangwei-cmd/repos", "events_url": "https://api.github.com/users/wangwei-cmd/events{/privacy}", "received_events_url": "https://api.github.com/users/wangwei-cmd/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-10-04T02:41:15Z", "updated_at": "2019-10-07T20:48:38Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using):  tf 1.14\r\n- Are you willing to contribute it (Yes/No):  no\r\n   When training a CT-reconstructed model, the projection and back_projection functions are usually used. However, to my knowledge, there is no api  to implement the above functions.\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n  Like in the scikit-image package, the projection function is the radon transform (skimage.transform.radon) while the back-projection is the dual operator of projection.\r\n\r\n**Will this change the current api? How?**\r\nWill add two maybe three apis.\r\n\r\n**Who will benefit with this feature?**\r\nanyone uses these functions to train CT-reconstruction moedl.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33023", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33023/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33023/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33023/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33023", "id": 502148187, "node_id": "MDU6SXNzdWU1MDIxNDgxODc=", "number": 33023, "title": "optimize gfile for sequential reading", "user": {"login": "ustcwlin", "id": 8966077, "node_id": "MDQ6VXNlcjg5NjYwNzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/8966077?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ustcwlin", "html_url": "https://github.com/ustcwlin", "followers_url": "https://api.github.com/users/ustcwlin/followers", "following_url": "https://api.github.com/users/ustcwlin/following{/other_user}", "gists_url": "https://api.github.com/users/ustcwlin/gists{/gist_id}", "starred_url": "https://api.github.com/users/ustcwlin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ustcwlin/subscriptions", "organizations_url": "https://api.github.com/users/ustcwlin/orgs", "repos_url": "https://api.github.com/users/ustcwlin/repos", "events_url": "https://api.github.com/users/ustcwlin/events{/privacy}", "received_events_url": "https://api.github.com/users/ustcwlin/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ustcwlin", "id": 8966077, "node_id": "MDQ6VXNlcjg5NjYwNzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/8966077?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ustcwlin", "html_url": "https://github.com/ustcwlin", "followers_url": "https://api.github.com/users/ustcwlin/followers", "following_url": "https://api.github.com/users/ustcwlin/following{/other_user}", "gists_url": "https://api.github.com/users/ustcwlin/gists{/gist_id}", "starred_url": "https://api.github.com/users/ustcwlin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ustcwlin/subscriptions", "organizations_url": "https://api.github.com/users/ustcwlin/orgs", "repos_url": "https://api.github.com/users/ustcwlin/repos", "events_url": "https://api.github.com/users/ustcwlin/events{/privacy}", "received_events_url": "https://api.github.com/users/ustcwlin/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ustcwlin", "id": 8966077, "node_id": "MDQ6VXNlcjg5NjYwNzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/8966077?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ustcwlin", "html_url": "https://github.com/ustcwlin", "followers_url": "https://api.github.com/users/ustcwlin/followers", "following_url": "https://api.github.com/users/ustcwlin/following{/other_user}", "gists_url": "https://api.github.com/users/ustcwlin/gists{/gist_id}", "starred_url": "https://api.github.com/users/ustcwlin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ustcwlin/subscriptions", "organizations_url": "https://api.github.com/users/ustcwlin/orgs", "repos_url": "https://api.github.com/users/ustcwlin/repos", "events_url": "https://api.github.com/users/ustcwlin/events{/privacy}", "received_events_url": "https://api.github.com/users/ustcwlin/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-10-03T15:47:13Z", "updated_at": "2020-01-08T11:36:16Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): 1.12 and 2.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nThe current gfile only contain one buffer and most of behave is sequential reading, I think it is worthwhile to let gfile to contain double buffers to overlap reading and processing completely. I will make sure there is no performance regression even the handle is used for random access\uff08seek or other interface\uff09. The feature will be very useful especially when use tensorflow in cloud environment and IO has a very long latency.\r\n\r\n**Will this change the current api? How?**\r\nI maybe will introduce additonal optional argument to let user to tell if the handle will be used as sequential reading or random reading.\r\n\r\n**Who will benefit with this feature?**\r\nanyone who will use the gfile, and most of behave is sequential reading, and the read latency is a little long.\r\n\r\n**Any Other info.**\r\nI will prepare the change and send CR"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33014", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33014/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33014/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33014/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33014", "id": 501996008, "node_id": "MDU6SXNzdWU1MDE5OTYwMDg=", "number": 33014, "title": "tflite.allocate_tensors() fails after changing input size", "user": {"login": "NadavLightricks", "id": 52624464, "node_id": "MDQ6VXNlcjUyNjI0NDY0", "avatar_url": "https://avatars0.githubusercontent.com/u/52624464?v=4", "gravatar_id": "", "url": "https://api.github.com/users/NadavLightricks", "html_url": "https://github.com/NadavLightricks", "followers_url": "https://api.github.com/users/NadavLightricks/followers", "following_url": "https://api.github.com/users/NadavLightricks/following{/other_user}", "gists_url": "https://api.github.com/users/NadavLightricks/gists{/gist_id}", "starred_url": "https://api.github.com/users/NadavLightricks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/NadavLightricks/subscriptions", "organizations_url": "https://api.github.com/users/NadavLightricks/orgs", "repos_url": "https://api.github.com/users/NadavLightricks/repos", "events_url": "https://api.github.com/users/NadavLightricks/events{/privacy}", "received_events_url": "https://api.github.com/users/NadavLightricks/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-10-03T11:00:28Z", "updated_at": "2019-11-20T19:46:01Z", "closed_at": null, "author_association": "NONE", "body": "(using tensorflow 1.14.0)\r\n\r\nI'm trying to use a tflite model to do inference on a batch. I use the following code:\r\n\r\n```python\r\ninterpreter = tf.lite.Interpreter(model_path=model_path)\r\ninput_details = interpreter.get_input_details()\r\ninterpreter.resize_tensor_input(input_details[0][\"index\"], [batch_size, 513, 513, 3])\r\ninterpreter.allocate_tensors()\r\n```\r\n\r\nThe code crashes and gives the following error:\r\n```python\r\nRuntimeError: tensorflow/lite/kernels/reshape.cc:58 num_input_elements != num_output_elements (1579014 != 789507)Node number 0 (RESHAPE) failed to prepare.\r\n````\r\n\r\nWhen looking at the output details, it still has the shape ```[1, 513, 513, output_channels]``` and not ```[batch_size, 513, 513, output_channels]``` as I would expect.\r\n\r\nAny ideas?\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33013", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33013/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33013/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33013/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33013", "id": 501992303, "node_id": "MDU6SXNzdWU1MDE5OTIzMDM=", "number": 33013, "title": "ERROR: Config value android_arm64 is not defined in any .rc file", "user": {"login": "Davari393", "id": 46137886, "node_id": "MDQ6VXNlcjQ2MTM3ODg2", "avatar_url": "https://avatars0.githubusercontent.com/u/46137886?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Davari393", "html_url": "https://github.com/Davari393", "followers_url": "https://api.github.com/users/Davari393/followers", "following_url": "https://api.github.com/users/Davari393/following{/other_user}", "gists_url": "https://api.github.com/users/Davari393/gists{/gist_id}", "starred_url": "https://api.github.com/users/Davari393/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Davari393/subscriptions", "organizations_url": "https://api.github.com/users/Davari393/orgs", "repos_url": "https://api.github.com/users/Davari393/repos", "events_url": "https://api.github.com/users/Davari393/events{/privacy}", "received_events_url": "https://api.github.com/users/Davari393/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jdduke", "id": 479117, "node_id": "MDQ6VXNlcjQ3OTExNw==", "avatar_url": "https://avatars2.githubusercontent.com/u/479117?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jdduke", "html_url": "https://github.com/jdduke", "followers_url": "https://api.github.com/users/jdduke/followers", "following_url": "https://api.github.com/users/jdduke/following{/other_user}", "gists_url": "https://api.github.com/users/jdduke/gists{/gist_id}", "starred_url": "https://api.github.com/users/jdduke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jdduke/subscriptions", "organizations_url": "https://api.github.com/users/jdduke/orgs", "repos_url": "https://api.github.com/users/jdduke/repos", "events_url": "https://api.github.com/users/jdduke/events{/privacy}", "received_events_url": "https://api.github.com/users/jdduke/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-10-03T10:52:22Z", "updated_at": "2019-10-11T23:28:28Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):source\r\n- TensorFlow version:1.15\r\n- Python version:3.6\r\n- Installed using virtualenv? pip? conda?:virtual.pip\r\n- Bazel version (if compiling from source):0.26\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\n\r\n\r\n\r\n\r\nwhen run this:\r\n\r\nbazel build -c opt \\\r\n  --config=android_arm64 \\\r\n  --cxxopt='--std=c++11' \\\r\n  //tensorflow/lite/tools/evaluation/tasks/coco_object_detection:run_eval\r\n\r\n\r\nget error:\r\n\r\nERROR: Config value android_arm64 is not defined in any .rc file\r\n\r\n\r\nhow can I fix it?\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33005", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33005/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33005/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33005/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33005", "id": 501806486, "node_id": "MDU6SXNzdWU1MDE4MDY0ODY=", "number": 33005, "title": "Will DepthwiseConv2D support non-square Strides in the future? Ex: `strides=(1,3)`", "user": {"login": "Raukk", "id": 11621499, "node_id": "MDQ6VXNlcjExNjIxNDk5", "avatar_url": "https://avatars2.githubusercontent.com/u/11621499?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Raukk", "html_url": "https://github.com/Raukk", "followers_url": "https://api.github.com/users/Raukk/followers", "following_url": "https://api.github.com/users/Raukk/following{/other_user}", "gists_url": "https://api.github.com/users/Raukk/gists{/gist_id}", "starred_url": "https://api.github.com/users/Raukk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Raukk/subscriptions", "organizations_url": "https://api.github.com/users/Raukk/orgs", "repos_url": "https://api.github.com/users/Raukk/repos", "events_url": "https://api.github.com/users/Raukk/events{/privacy}", "received_events_url": "https://api.github.com/users/Raukk/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "pavithrasv", "id": 13326758, "node_id": "MDQ6VXNlcjEzMzI2NzU4", "avatar_url": "https://avatars0.githubusercontent.com/u/13326758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pavithrasv", "html_url": "https://github.com/pavithrasv", "followers_url": "https://api.github.com/users/pavithrasv/followers", "following_url": "https://api.github.com/users/pavithrasv/following{/other_user}", "gists_url": "https://api.github.com/users/pavithrasv/gists{/gist_id}", "starred_url": "https://api.github.com/users/pavithrasv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pavithrasv/subscriptions", "organizations_url": "https://api.github.com/users/pavithrasv/orgs", "repos_url": "https://api.github.com/users/pavithrasv/repos", "events_url": "https://api.github.com/users/pavithrasv/events{/privacy}", "received_events_url": "https://api.github.com/users/pavithrasv/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-10-03T01:39:12Z", "updated_at": "2019-10-25T01:21:55Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using): \r\n2.0.0, 1.14.0\r\n- Are you willing to contribute it (Yes/No): \r\nNo, sorry, that is well outside my expertise. \r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\nWill DepthwiseConv2D support non-square Strides in the future? \r\nThis would make it consistent with the majority of other layers that accept the strides argument and can take non-square strides. Ex: `strides=(1,3)`\r\n\r\nOr at minimum, please update the documentation to specify this limitation.\r\nhttps://www.tensorflow.org/api_docs/python/tf/keras/layers/DepthwiseConv2D\r\n\"strides: An integer or tuple/list of 2 integers, specifying the strides of the convolution along the height and width.\"\r\n\r\n\r\ndepthwise_conv_op\r\n\"Current implementation only supports equal length strides in the row and column dimensions.\"\r\nhttps://github.com/tensorflow/tensorflow/blob/242a42139513aa5903743c37c0ef15ed00f93fed/tensorflow/core/kernels/depthwise_conv_op.cc#L288\r\n\r\n\r\n**Will this change the current api? How?**\r\nNo, there is already a strides option that should be able to take non-square shaped strides. This would actually make it more consistent with the rest of the API.\r\n\r\n\r\n**Who will benefit with this feature?**\r\nBob will.\r\n\r\n\r\n**Any Other info.**\r\nI'm using the `tf.keras.layers.DepthwiseConv2D`  implementation.\r\n\r\n2.0.0:\r\n`tensorflow.python.framework.errors_impl.InvalidArgumentError: Current implementation only supports equal length strides in the row and column dimensions. [Op:DepthwiseConv2dNative] name: model/depthwise_conv2d/depthwise/`\r\n\r\n1.14.0:\r\n`tensorflow.python.framework.errors_impl.InvalidArgumentError: Current implementation only supports equal length strides in the row and column dimensions.\r\n         [[{{node depthwise_conv2d/depthwise}}]]`\r\n\r\n\r\nSimple example:\r\n`tf.keras.layers.DepthwiseConv2D((3, 3), strides=(1,2))`"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33001", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33001/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33001/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33001/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33001", "id": 501757518, "node_id": "MDU6SXNzdWU1MDE3NTc1MTg=", "number": 33001, "title": "ERROR: C:/tensorflow/tensorflow/compiler/xla/service/gpu/BUILD:1314:1: C++ compilation of rule '//tensorflow/compiler/xla/service/gpu:cudnn_fused_conv_rewriter' failed (Exit 2): python.exe failed: error executing command", "user": {"login": "QRabbani", "id": 12076190, "node_id": "MDQ6VXNlcjEyMDc2MTkw", "avatar_url": "https://avatars0.githubusercontent.com/u/12076190?v=4", "gravatar_id": "", "url": "https://api.github.com/users/QRabbani", "html_url": "https://github.com/QRabbani", "followers_url": "https://api.github.com/users/QRabbani/followers", "following_url": "https://api.github.com/users/QRabbani/following{/other_user}", "gists_url": "https://api.github.com/users/QRabbani/gists{/gist_id}", "starred_url": "https://api.github.com/users/QRabbani/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/QRabbani/subscriptions", "organizations_url": "https://api.github.com/users/QRabbani/orgs", "repos_url": "https://api.github.com/users/QRabbani/repos", "events_url": "https://api.github.com/users/QRabbani/events{/privacy}", "received_events_url": "https://api.github.com/users/QRabbani/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1133285679, "node_id": "MDU6TGFiZWwxMTMzMjg1Njc5", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:xla", "name": "comp:xla", "color": "0052cc", "default": false, "description": ""}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sanjoy", "id": 136291, "node_id": "MDQ6VXNlcjEzNjI5MQ==", "avatar_url": "https://avatars2.githubusercontent.com/u/136291?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanjoy", "html_url": "https://github.com/sanjoy", "followers_url": "https://api.github.com/users/sanjoy/followers", "following_url": "https://api.github.com/users/sanjoy/following{/other_user}", "gists_url": "https://api.github.com/users/sanjoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanjoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanjoy/subscriptions", "organizations_url": "https://api.github.com/users/sanjoy/orgs", "repos_url": "https://api.github.com/users/sanjoy/repos", "events_url": "https://api.github.com/users/sanjoy/events{/privacy}", "received_events_url": "https://api.github.com/users/sanjoy/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 6, "created_at": "2019-10-02T22:26:12Z", "updated_at": "2019-10-08T18:49:06Z", "closed_at": null, "author_association": "NONE", "body": "I'm trying to build Tensorflow 2.0 from source on my RTX 2070 machine. I get this error towards the end of the compilation process (https://pastebin.com/zuuQqZTb):\r\n\r\n```\r\nERROR: C:/tensorflow/tensorflow/compiler/xla/service/gpu/BUILD:1314:1: C++ compilation of rule '//tensorflow/compiler/xla/service/gpu:cudnn_fused_conv_rewriter' failed (Exit 2): python.exe failed: error executing command\r\n  cd C:/users/qrabbani/_bazel_qrabbani/xv6zejqw/execroot/org_tensorflow\r\n  SET CUDA_TOOLKIT_PATH=C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.1\r\n    SET INCLUDE=C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.23.28105\\ATLMFC\\include;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.23.28105\\include;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\ucrt;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\shared;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\um;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\winrt;C:\\Program Files (x86)\\Windows Kits\\10\\include\\10.0.18362.0\\cppwinrt\r\n    SET LIB=C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.23.28105\\ATLMFC\\lib\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.23.28105\\lib\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.18362.0\\ucrt\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\lib\\10.0.18362.0\\um\\x64;\r\n    SET PATH=C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.23.28105\\bin\\HostX64\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\Common7\\IDE\\VC\\VCPackages;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\Common7\\IDE\\CommonExtensions\\Microsoft\\TestWindow;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\Common7\\IDE\\CommonExtensions\\Microsoft\\TeamFoundation\\Team Explorer;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\MSBuild\\Current\\bin\\Roslyn;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\Team Tools\\Performance Tools\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\Team Tools\\Performance Tools;C:\\Program Files (x86)\\Microsoft Visual Studio\\Shared\\Common\\VSPerfCollectionTools\\vs2019\\\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio\\Shared\\Common\\VSPerfCollectionTools\\vs2019\\;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\10.0.18362.0\\x64;C:\\Program Files (x86)\\Windows Kits\\10\\bin\\x64;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\\\MSBuild\\Current\\Bin;C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\Common7\\IDE\\;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\Common7\\Tools\\;;C:\\Windows\\system32;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\Common7\\IDE\\CommonExtensions\\Microsoft\\CMake\\CMake\\bin;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\Common7\\IDE\\CommonExtensions\\Microsoft\\CMake\\Ninja\r\n    SET PWD=/proc/self/cwd\r\n    SET PYTHON_BIN_PATH=C:/Users/QRabbani/Anaconda3/envs/tf_gpu/python.exe\r\n    SET PYTHON_LIB_PATH=C:/Users/QRabbani/Anaconda3/envs/tf_gpu/lib/site-packages\r\n    SET RUNFILES_MANIFEST_ONLY=1\r\n    SET TEMP=C:\\Users\\QRabbani\\AppData\\Local\\Temp\r\n    SET TF_CONFIGURE_IOS=0\r\n    SET TF_CUDA_COMPUTE_CAPABILITIES=3.5,7.0\r\n    SET TF_NEED_CUDA=1\r\n    SET TMP=C:\\Users\\QRabbani\\AppData\\Local\\Temp\r\n  C:/Users/QRabbani/Anaconda3/envs/tf_gpu/python.exe -B external/local_config_cuda/crosstool/windows/msvc_wrapper_for_nvcc.py /nologo /DCOMPILER_MSVC /DNOMINMAX /D_WIN32_WINNT=0x0600 /D_CRT_SECURE_NO_DEPRECATE /D_CRT_SECURE_NO_WARNINGS /D_SILENCE_STDEXT_HASH_DEPRECATION_WARNINGS /bigobj /Zm500 /J /Gy /GF /EHsc /wd4351 /wd4291 /wd4250 /wd4996 /I. /Ibazel-out/x64_windows-opt/bin /Iexternal/com_google_protobuf /Ibazel-out/x64_windows-opt/bin/external/com_google_protobuf /Iexternal/com_google_absl /Ibazel-out/x64_windows-opt/bin/external/com_google_absl /Iexternal/nsync /Ibazel-out/x64_windows-opt/bin/external/nsync /Iexternal/eigen_archive /Ibazel-out/x64_windows-opt/bin/external/eigen_archive /Iexternal/local_config_sycl /Ibazel-out/x64_windows-opt/bin/external/local_config_sycl /Iexternal/gif_archive /Ibazel-out/x64_windows-opt/bin/external/gif_archive /Iexternal/jpeg /Ibazel-out/x64_windows-opt/bin/external/jpeg /Iexternal/com_googlesource_code_re2 /Ibazel-out/x64_windows-opt/bin/external/com_googlesource_code_re2 /Iexternal/farmhash_archive /Ibazel-out/x64_windows-opt/bin/external/farmhash_archive /Iexternal/fft2d /Ibazel-out/x64_windows-opt/bin/external/fft2d /Iexternal/highwayhash /Ibazel-out/x64_windows-opt/bin/external/highwayhash /Iexternal/zlib_archive /Ibazel-out/x64_windows-opt/bin/external/zlib_archive /Iexternal/double_conversion /Ibazel-out/x64_windows-opt/bin/external/double_conversion /Iexternal/snappy /Ibazel-out/x64_windows-opt/bin/external/snappy /Iexternal/local_config_cuda /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda /Iexternal/local_config_tensorrt /Ibazel-out/x64_windows-opt/bin/external/local_config_tensorrt /Iexternal/llvm /Ibazel-out/x64_windows-opt/bin/external/llvm /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda/cuda/_virtual_includes/cuda_headers_virtual /Ibazel-out/x64_windows-opt/bin/external/local_config_tensorrt/_virtual_includes/tensorrt_headers /Iexternal/com_google_protobuf/src /Ibazel-out/x64_windows-opt/bin/external/com_google_protobuf/src /Iexternal/nsync/public /Ibazel-out/x64_windows-opt/bin/external/nsync/public /Iexternal/eigen_archive /Ibazel-out/x64_windows-opt/bin/external/eigen_archive /Iexternal/gif_archive /Ibazel-out/x64_windows-opt/bin/external/gif_archive /Iexternal/gif_archive/windows /Ibazel-out/x64_windows-opt/bin/external/gif_archive/windows /Iexternal/farmhash_archive/src /Ibazel-out/x64_windows-opt/bin/external/farmhash_archive/src /Iexternal/zlib_archive /Ibazel-out/x64_windows-opt/bin/external/zlib_archive /Iexternal/double_conversion /Ibazel-out/x64_windows-opt/bin/external/double_conversion /Iexternal/local_config_cuda/cuda /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda/cuda /Iexternal/local_config_cuda/cuda/cuda/include /Ibazel-out/x64_windows-opt/bin/external/local_config_cuda/cuda/cuda/include /Iexternal/llvm/lib/IR /Ibazel-out/x64_windows-opt/bin/external/llvm/lib/IR /Iexternal/llvm/include/llvm/IR /Ibazel-out/x64_windows-opt/bin/external/llvm/include/llvm/IR /Iexternal/llvm/include /Ibazel-out/x64_windows-opt/bin/external/llvm/include /D__CLANG_SUPPORT_DYN_ANNOTATION__ /DEIGEN_MPL2_ONLY /DEIGEN_MAX_ALIGN_BYTES=64 /DEIGEN_HAS_TYPE_TRAITS=0 /DTF_USE_SNAPPY /D_CRT_SECURE_NO_DEPRECATE /D_CRT_SECURE_NO_WARNINGS /D_CRT_NONSTDC_NO_DEPRECATE /D_CRT_NONSTDC_NO_WARNINGS /D_SCL_SECURE_NO_DEPRECATE /D_SCL_SECURE_NO_WARNINGS /DUNICODE /D_UNICODE /DLLVM_ENABLE_STATS /D__STDC_LIMIT_MACROS /D__STDC_CONSTANT_MACROS /D__STDC_FORMAT_MACROS /DLLVM_BUILD_GLOBAL_ISEL /showIncludes /MD /O2 /DNDEBUG -w -DWIN32_LEAN_AND_MEAN -DNOGDI /arch:AVX /Fobazel-out/x64_windows-opt/bin/tensorflow/compiler/xla/service/gpu/_objs/cudnn_fused_conv_rewriter/cudnn_fused_conv_rewriter.o /c tensorflow/compiler/xla/service/gpu/cudnn_fused_conv_rewriter.cc\r\nExecution platform: @bazel_tools//platforms:host_platform\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(499): error C2672: 'xla::match::detail::LayoutPattern<const xla::Layout,xla::match::detail::LayoutPatternBaseImpl>::AppendImpl': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(645): note: see reference to class template instantiation 'xla::match::detail::LayoutPattern<const xla::Layout,xla::match::detail::LayoutPatternBaseImpl>' being compiled\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.23.28105\\include\\xtr1common(159): note: see reference to class template instantiation 'std::integral_constant<bool,false>' being compiled\r\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.23.28105\\include\\xtr1common(159): note: see reference to class template instantiation 'std::disjunction<_Traits...>' being compiled\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(499): error C2893: Failed to specialize function template 'xla::match::detail::LayoutPattern<LayoutType,unknown-type> xla::match::detail::LayoutPattern<LayoutType,xla::match::detail::LayoutPatternBaseImpl>::AppendImpl(NewImpl) const'\r\n        with\r\n        [\r\n            LayoutType=const xla::Layout\r\n        ]\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(456): note: see declaration of 'xla::match::detail::LayoutPattern<const xla::Layout,xla::match::detail::LayoutPatternBaseImpl>::AppendImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(499): note: With the following template arguments:\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(499): note: 'NewImpl=xla::match::detail::LayoutPatternEqualImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(505): error C2672: 'xla::match::detail::LayoutPattern<const xla::Layout,xla::match::detail::LayoutPatternBaseImpl>::AppendImpl': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(505): error C2893: Failed to specialize function template 'xla::match::detail::LayoutPattern<LayoutType,unknown-type> xla::match::detail::LayoutPattern<LayoutType,xla::match::detail::LayoutPatternBaseImpl>::AppendImpl(NewImpl) const'\r\n        with\r\n        [\r\n            LayoutType=const xla::Layout\r\n        ]\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(456): note: see declaration of 'xla::match::detail::LayoutPattern<const xla::Layout,xla::match::detail::LayoutPatternBaseImpl>::AppendImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(505): note: With the following template arguments:\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(505): note: 'NewImpl=xla::match::detail::LayoutPatternFormatImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(511): error C2672: 'xla::match::detail::LayoutPattern<const xla::Layout,xla::match::detail::LayoutPatternBaseImpl>::AppendImpl': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(511): error C2893: Failed to specialize function template 'xla::match::detail::LayoutPattern<LayoutType,unknown-type> xla::match::detail::LayoutPattern<LayoutType,xla::match::detail::LayoutPatternBaseImpl>::AppendImpl(NewImpl) const'\r\n        with\r\n        [\r\n            LayoutType=const xla::Layout\r\n        ]\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(456): note: see declaration of 'xla::match::detail::LayoutPattern<const xla::Layout,xla::match::detail::LayoutPatternBaseImpl>::AppendImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(511): note: With the following template arguments:\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(511): note: 'NewImpl=xla::match::detail::LayoutPatternFormatImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(499): error C2672: 'xla::match::detail::LayoutPattern<xla::Layout,xla::match::detail::LayoutPatternBaseImpl>::AppendImpl': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(655): note: see reference to class template instantiation 'xla::match::detail::LayoutPattern<xla::Layout,xla::match::detail::LayoutPatternBaseImpl>' being compiled\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(499): error C2893: Failed to specialize function template 'xla::match::detail::LayoutPattern<LayoutType,unknown-type> xla::match::detail::LayoutPattern<LayoutType,xla::match::detail::LayoutPatternBaseImpl>::AppendImpl(NewImpl) const'\r\n        with\r\n        [\r\n            LayoutType=xla::Layout\r\n        ]\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(456): note: see declaration of 'xla::match::detail::LayoutPattern<xla::Layout,xla::match::detail::LayoutPatternBaseImpl>::AppendImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(499): note: With the following template arguments:\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(499): note: 'NewImpl=xla::match::detail::LayoutPatternEqualImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(505): error C2672: 'xla::match::detail::LayoutPattern<xla::Layout,xla::match::detail::LayoutPatternBaseImpl>::AppendImpl': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(505): error C2893: Failed to specialize function template 'xla::match::detail::LayoutPattern<LayoutType,unknown-type> xla::match::detail::LayoutPattern<LayoutType,xla::match::detail::LayoutPatternBaseImpl>::AppendImpl(NewImpl) const'\r\n        with\r\n        [\r\n            LayoutType=xla::Layout\r\n        ]\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(456): note: see declaration of 'xla::match::detail::LayoutPattern<xla::Layout,xla::match::detail::LayoutPatternBaseImpl>::AppendImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(505): note: With the following template arguments:\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(505): note: 'NewImpl=xla::match::detail::LayoutPatternFormatImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(511): error C2672: 'xla::match::detail::LayoutPattern<xla::Layout,xla::match::detail::LayoutPatternBaseImpl>::AppendImpl': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(511): error C2893: Failed to specialize function template 'xla::match::detail::LayoutPattern<LayoutType,unknown-type> xla::match::detail::LayoutPattern<LayoutType,xla::match::detail::LayoutPatternBaseImpl>::AppendImpl(NewImpl) const'\r\n        with\r\n        [\r\n            LayoutType=xla::Layout\r\n        ]\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(456): note: see declaration of 'xla::match::detail::LayoutPattern<xla::Layout,xla::match::detail::LayoutPatternBaseImpl>::AppendImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(511): note: With the following template arguments:\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(511): note: 'NewImpl=xla::match::detail::LayoutPatternFormatImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(997): error C2672: 'xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1116): note: see reference to class template instantiation 'xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>' being compiled\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(997): error C2893: Failed to specialize function template 'xla::match::detail::ShapePattern<ShapeType,unknown-type> xla::match::detail::ShapePattern<ShapeType,xla::match::detail::ShapePatternBaseImpl>::AppendImpl(NewImpl) const'\r\n        with\r\n        [\r\n            ShapeType=const xla::Shape\r\n        ]\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(948): note: see declaration of 'xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(997): note: With the following template arguments:\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(997): note: 'NewImpl=xla::match::detail::ShapePatternEqualImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1004): error C2672: 'xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1004): error C2893: Failed to specialize function template 'xla::match::detail::ShapePattern<ShapeType,unknown-type> xla::match::detail::ShapePattern<ShapeType,xla::match::detail::ShapePatternBaseImpl>::AppendImpl(NewImpl) const'\r\n        with\r\n        [\r\n            ShapeType=const xla::Shape\r\n        ]\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(948): note: see declaration of 'xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1004): note: With the following template arguments:\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1004): note: 'NewImpl=xla::match::detail::ShapePatternCompatibleImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1010): error C2672: 'xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1010): error C2893: Failed to specialize function template 'xla::match::detail::ShapePattern<ShapeType,unknown-type> xla::match::detail::ShapePattern<ShapeType,xla::match::detail::ShapePatternBaseImpl>::AppendImpl(NewImpl) const'\r\n        with\r\n        [\r\n            ShapeType=const xla::Shape\r\n        ]\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(948): note: see declaration of 'xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1010): note: With the following template arguments:\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1010): note: 'NewImpl=xla::match::detail::ShapePatternElementTypeImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1016): error C2672: 'xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1016): error C2893: Failed to specialize function template 'xla::match::detail::ShapePattern<ShapeType,unknown-type> xla::match::detail::ShapePattern<ShapeType,xla::match::detail::ShapePatternBaseImpl>::AppendImpl(NewImpl) const'\r\n        with\r\n        [\r\n            ShapeType=const xla::Shape\r\n        ]\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(948): note: see declaration of 'xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1016): note: With the following template arguments:\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1016): note: 'NewImpl=xla::match::detail::ShapePatternIsScalarImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1022): error C2672: 'xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1022): error C2893: Failed to specialize function template 'xla::match::detail::ShapePattern<ShapeType,unknown-type> xla::match::detail::ShapePattern<ShapeType,xla::match::detail::ShapePatternBaseImpl>::AppendImpl(NewImpl) const'\r\n        with\r\n        [\r\n            ShapeType=const xla::Shape\r\n        ]\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(948): note: see declaration of 'xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1022): note: With the following template arguments:\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1022): note: 'NewImpl=xla::match::detail::ShapePatternIsArrayImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1028): error C2672: 'xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1028): error C2893: Failed to specialize function template 'xla::match::detail::ShapePattern<ShapeType,unknown-type> xla::match::detail::ShapePattern<ShapeType,xla::match::detail::ShapePatternBaseImpl>::AppendImpl(NewImpl) const'\r\n        with\r\n        [\r\n            ShapeType=const xla::Shape\r\n        ]\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(948): note: see declaration of 'xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1028): note: With the following template arguments:\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1028): note: 'NewImpl=xla::match::detail::ShapePatternIsTupleImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1033): error C2672: 'xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1033): error C2893: Failed to specialize function template 'xla::match::detail::ShapePattern<ShapeType,unknown-type> xla::match::detail::ShapePattern<ShapeType,xla::match::detail::ShapePatternBaseImpl>::AppendImpl(NewImpl) const'\r\n        with\r\n        [\r\n            ShapeType=const xla::Shape\r\n        ]\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(948): note: see declaration of 'xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1033): note: With the following template arguments:\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1033): note: 'NewImpl=xla::match::detail::ShapePatternEffectiveScalarImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1039): error C2672: 'xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1039): error C2893: Failed to specialize function template 'xla::match::detail::ShapePattern<ShapeType,unknown-type> xla::match::detail::ShapePattern<ShapeType,xla::match::detail::ShapePatternBaseImpl>::AppendImpl(NewImpl) const'\r\n        with\r\n        [\r\n            ShapeType=const xla::Shape\r\n        ]\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(948): note: see declaration of 'xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1039): note: With the following template arguments:\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1039): note: 'NewImpl=xla::match::detail::ShapePatternRankImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1053): error C2672: 'xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::WithLayout': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1053): error C2784: 'unknown-type xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::WithLayout(const xla::match::detail::LayoutPattern<LayoutType,LayoutImpl> &) const': could not deduce template argument for 'const xla::match::detail::LayoutPattern<LayoutType,LayoutImpl> &' from 'unknown-type'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1046): note: see declaration of 'xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::WithLayout'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1058): error C2672: 'xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::WithLayout': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1058): error C2784: 'unknown-type xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::WithLayout(const xla::match::detail::LayoutPattern<LayoutType,LayoutImpl> &) const': could not deduce template argument for 'const xla::match::detail::LayoutPattern<LayoutType,LayoutImpl> &' from 'unknown-type'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1046): note: see declaration of 'xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::WithLayout'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1063): error C2672: 'xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::WithLayout': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1063): error C2784: 'unknown-type xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::WithLayout(const xla::match::detail::LayoutPattern<LayoutType,LayoutImpl> &) const': could not deduce template argument for 'const xla::match::detail::LayoutPattern<LayoutType,LayoutImpl> &' from 'unknown-type'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1046): note: see declaration of 'xla::match::detail::ShapePattern<const xla::Shape,xla::match::detail::ShapePatternBaseImpl>::WithLayout'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1080): error C2923: 'xla::match::detail::AllOfPattern': 'xla::match::Shape' is not a valid template type argument for parameter 'Item'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1116): note: see declaration of 'xla::match::Shape'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1080): error C3203: 'AllOfPattern': unspecialized class template can't be used as a template argument for template parameter 'Impl', expected a real type\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1093): error C2923: 'xla::match::detail::AllOfPattern': 'xla::match::Shape' is not a valid template type argument for parameter 'Item'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1116): note: see declaration of 'xla::match::Shape'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1093): error C3203: 'AllOfPattern': unspecialized class template can't be used as a template argument for template parameter 'Impl', expected a real type\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(997): error C2672: 'xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1124): note: see reference to class template instantiation 'xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>' being compiled\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(997): error C2893: Failed to specialize function template 'xla::match::detail::ShapePattern<ShapeType,unknown-type> xla::match::detail::ShapePattern<ShapeType,xla::match::detail::ShapePatternBaseImpl>::AppendImpl(NewImpl) const'\r\n        with\r\n        [\r\n            ShapeType=xla::Shape\r\n        ]\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(948): note: see declaration of 'xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(997): note: With the following template arguments:\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(997): note: 'NewImpl=xla::match::detail::ShapePatternEqualImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1004): error C2672: 'xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1004): error C2893: Failed to specialize function template 'xla::match::detail::ShapePattern<ShapeType,unknown-type> xla::match::detail::ShapePattern<ShapeType,xla::match::detail::ShapePatternBaseImpl>::AppendImpl(NewImpl) const'\r\n        with\r\n        [\r\n            ShapeType=xla::Shape\r\n        ]\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(948): note: see declaration of 'xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1004): note: With the following template arguments:\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1004): note: 'NewImpl=xla::match::detail::ShapePatternCompatibleImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1010): error C2672: 'xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1010): error C2893: Failed to specialize function template 'xla::match::detail::ShapePattern<ShapeType,unknown-type> xla::match::detail::ShapePattern<ShapeType,xla::match::detail::ShapePatternBaseImpl>::AppendImpl(NewImpl) const'\r\n        with\r\n        [\r\n            ShapeType=xla::Shape\r\n        ]\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(948): note: see declaration of 'xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1010): note: With the following template arguments:\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1010): note: 'NewImpl=xla::match::detail::ShapePatternElementTypeImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1016): error C2672: 'xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1016): error C2893: Failed to specialize function template 'xla::match::detail::ShapePattern<ShapeType,unknown-type> xla::match::detail::ShapePattern<ShapeType,xla::match::detail::ShapePatternBaseImpl>::AppendImpl(NewImpl) const'\r\n        with\r\n        [\r\n            ShapeType=xla::Shape\r\n        ]\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(948): note: see declaration of 'xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1016): note: With the following template arguments:\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1016): note: 'NewImpl=xla::match::detail::ShapePatternIsScalarImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1022): error C2672: 'xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1022): error C2893: Failed to specialize function template 'xla::match::detail::ShapePattern<ShapeType,unknown-type> xla::match::detail::ShapePattern<ShapeType,xla::match::detail::ShapePatternBaseImpl>::AppendImpl(NewImpl) const'\r\n        with\r\n        [\r\n            ShapeType=xla::Shape\r\n        ]\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(948): note: see declaration of 'xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1022): note: With the following template arguments:\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1022): note: 'NewImpl=xla::match::detail::ShapePatternIsArrayImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1028): error C2672: 'xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1028): error C2893: Failed to specialize function template 'xla::match::detail::ShapePattern<ShapeType,unknown-type> xla::match::detail::ShapePattern<ShapeType,xla::match::detail::ShapePatternBaseImpl>::AppendImpl(NewImpl) const'\r\n        with\r\n        [\r\n            ShapeType=xla::Shape\r\n        ]\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(948): note: see declaration of 'xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1028): note: With the following template arguments:\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1028): note: 'NewImpl=xla::match::detail::ShapePatternIsTupleImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1033): error C2672: 'xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1033): error C2893: Failed to specialize function template 'xla::match::detail::ShapePattern<ShapeType,unknown-type> xla::match::detail::ShapePattern<ShapeType,xla::match::detail::ShapePatternBaseImpl>::AppendImpl(NewImpl) const'\r\n        with\r\n        [\r\n            ShapeType=xla::Shape\r\n        ]\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(948): note: see declaration of 'xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1033): note: With the following template arguments:\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1033): note: 'NewImpl=xla::match::detail::ShapePatternEffectiveScalarImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1039): error C2672: 'xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1039): error C2893: Failed to specialize function template 'xla::match::detail::ShapePattern<ShapeType,unknown-type> xla::match::detail::ShapePattern<ShapeType,xla::match::detail::ShapePatternBaseImpl>::AppendImpl(NewImpl) const'\r\n        with\r\n        [\r\n            ShapeType=xla::Shape\r\n        ]\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(948): note: see declaration of 'xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::AppendImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1039): note: With the following template arguments:\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1039): note: 'NewImpl=xla::match::detail::ShapePatternRankImpl'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1053): error C2672: 'xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::WithLayout': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1053): error C2784: 'unknown-type xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::WithLayout(const xla::match::detail::LayoutPattern<LayoutType,LayoutImpl> &) const': could not deduce template argument for 'const xla::match::detail::LayoutPattern<LayoutType,LayoutImpl> &' from 'unknown-type'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1046): note: see declaration of 'xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::WithLayout'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1058): error C2672: 'xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::WithLayout': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1058): error C2784: 'unknown-type xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::WithLayout(const xla::match::detail::LayoutPattern<LayoutType,LayoutImpl> &) const': could not deduce template argument for 'const xla::match::detail::LayoutPattern<LayoutType,LayoutImpl> &' from 'unknown-type'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1046): note: see declaration of 'xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::WithLayout'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1063): error C2672: 'xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::WithLayout': no matching overloaded function found\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1063): error C2784: 'unknown-type xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::WithLayout(const xla::match::detail::LayoutPattern<LayoutType,LayoutImpl> &) const': could not deduce template argument for 'const xla::match::detail::LayoutPattern<LayoutType,LayoutImpl> &' from 'unknown-type'\r\n.\\tensorflow/compiler/xla/service/pattern_matcher.h(1046): note: see declaration of 'xla::match::detail::ShapePattern<xla::Shape,xla::match::detail::ShapePatternBaseImpl>::WithLayout'\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\nINFO: Elapsed time: 2238.604s, Critical Path: 469.42s\r\nINFO: 4001 processes: 4001 local.\r\nFAILED: Build did NOT complete successfully\r\n```\r\n\r\nAny idea what's going on and how to fix it?\r\n\r\n**Edit:**\r\nHere's the output of ./configure (https://pastebin.com/DhvwwyZM):\r\n\r\n```\r\nWARNING: --batch mode is deprecated. Please instead explicitly shut down your Bazel server using the command \"bazel shutdown\".\r\nYou have bazel 0.26.1 installed.\r\nPlease specify the location of python. [Default is C:\\Users\\QRabbani\\Anaconda3\\envs\\tf_gpu\\python.exe]:\r\n\r\n\r\nFound possible Python library paths:\r\n  C:\\Users\\QRabbani\\Anaconda3\\envs\\tf_gpu\\lib\\site-packages\r\nPlease input the desired Python library path to use.  Default is [C:\\Users\\QRabbani\\Anaconda3\\envs\\tf_gpu\\lib\\site-packages]\r\n\r\nDo you wish to build TensorFlow with XLA JIT support? [y/N]: y\r\nXLA JIT support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with ROCm support? [y/N]: n\r\nNo ROCm support will be enabled for TensorFlow.\r\n\r\nDo you wish to build TensorFlow with CUDA support? [y/N]: y\r\nCUDA support will be enabled for TensorFlow.\r\n\r\nFound CUDA 10.1 in:\r\n    C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.1/lib/x64\r\n    C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.1/include\r\nFound cuDNN 7 in:\r\n    C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.1/lib/x64\r\n    C:/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v10.1/include\r\n\r\n\r\nPlease specify a list of comma-separated CUDA compute capabilities you want to build with.\r\nYou can find the compute capability of your device at: https://developer.nvidia.com/cuda-gpus.\r\nPlease note that each additional compute capability significantly increases your build time and binary size, and that TensorFlow only supports compute capabilities >= 3.5 [Default is: 3.5,7.0]:\r\n\r\n\r\nPlease specify optimization flags to use during compilation when bazel option \"--config=opt\" is specified [Default is /arch:AVX]:\r\n\r\n\r\nWould you like to override eigen strong inline for some C++ compilation to reduce the compilation time? [Y/n]: y\r\nEigen strong inline overridden.\r\n\r\nPreconfigured Bazel build configs. You can use any of the below by adding \"--config=<>\" to your build command. See .bazelrc for more details.\r\n        --config=mkl            # Build with MKL support.\r\n        --config=monolithic     # Config for mostly static monolithic build.\r\n        --config=gdr            # Build with GDR support.\r\n        --config=verbs          # Build with libverbs support.\r\n        --config=ngraph         # Build with Intel nGraph support.\r\n        --config=numa           # Build with NUMA support.\r\n        --config=dynamic_kernels        # (Experimental) Build kernels into separate shared objects.\r\n        --config=v2             # Build TensorFlow 2.x instead of 1.x.\r\nPreconfigured Bazel build configs to DISABLE default on features:\r\n        --config=noaws          # Disable AWS S3 filesystem support.\r\n        --config=nogcp          # Disable GCP support.\r\n        --config=nohdfs         # Disable HDFS support.\r\n        --config=noignite       # Disable Apache Ignite support.\r\n        --config=nokafka        # Disable Apache Kafka support.\r\n        --config=nonccl         # Disable NVIDIA NCCL support.\r\n```\r\n\r\nAnd here's what's in my .bazelrc (https://pastebin.com/h6aLHX0d):\r\n\r\n```\r\n# Android configs. Bazel needs to have --cpu and --fat_apk_cpu both set to the\r\n# target CPU to build transient dependencies correctly. See\r\n# https://docs.bazel.build/versions/master/user-manual.html#flag--fat_apk_cpu\r\nbuild:android --crosstool_top=//external:android/crosstool\r\nbuild:android --host_crosstool_top=@bazel_tools//tools/cpp:toolchain\r\nbuild:android_arm --config=android\r\nbuild:android_arm --cpu=armeabi-v7a\r\nbuild:android_arm --fat_apk_cpu=armeabi-v7a\r\nbuild:android_arm64 --config=android\r\nbuild:android_arm64 --cpu=arm64-v8a\r\nbuild:android_arm64 --fat_apk_cpu=arm64-v8a\r\nbuild:android_x86 --config=android\r\nbuild:android_x86 --cpu=x86\r\nbuild:android_x86 --fat_apk_cpu=x86\r\nbuild:android_x86_64 --config=android\r\nbuild:android_x86_64 --cpu=x86_64\r\nbuild:android_x86_64 --fat_apk_cpu=x86_64\r\n \r\n# Sets the default Apple platform to macOS.\r\nbuild --apple_platform_type=macos\r\n \r\n# Config to use a mostly-static build and disable modular op registration\r\n# support (this will revert to loading TensorFlow with RTLD_GLOBAL in Python).\r\n# By default, TensorFlow will build with a dependence on\r\n# //tensorflow:libtensorflow_framework.so.\r\nbuild:monolithic --define framework_shared_object=false\r\n \r\n# For projects which use TensorFlow as part of a Bazel build process, putting\r\n# nothing in a bazelrc will default to a monolithic build. The following line\r\n# opts in to modular op registration support by default.\r\nbuild --define framework_shared_object=true\r\n \r\n# Flags for open source build, always set to be true.\r\nbuild --define open_source_build=true\r\ntest --define open_source_build=true\r\n \r\n# Please note that MKL on MacOS or windows is still not supported.\r\n# If you would like to use a local MKL instead of downloading, please set the\r\n# environment variable \"TF_MKL_ROOT\" every time before build.\r\nbuild:mkl --define=build_with_mkl=true --define=enable_mkl=true\r\nbuild:mkl --define=tensorflow_mkldnn_contraction_kernel=0\r\nbuild:mkl -c opt\r\n \r\n# This config option is used to enable MKL-DNN open source library only,\r\n# without depending on MKL binary version.\r\nbuild:mkl_open_source_only --define=build_with_mkl_dnn_only=true\r\nbuild:mkl_open_source_only --define=build_with_mkl_dnn_v1_only=true\r\nbuild:mkl_open_source_only --define=build_with_mkl=true --define=enable_mkl=true\r\nbuild:mkl_open_source_only --define=tensorflow_mkldnn_contraction_kernel=0\r\n \r\nbuild:download_clang --crosstool_top=@local_config_download_clang//:toolchain\r\nbuild:download_clang --define=using_clang=true\r\nbuild:download_clang --action_env TF_DOWNLOAD_CLANG=1\r\n# Instruct clang to use LLD for linking.\r\n# This only works with GPU builds currently, since Bazel sets -B/usr/bin in\r\n# auto-generated CPU crosstool, forcing /usr/bin/ld.lld to be preferred over\r\n# the downloaded one.\r\nbuild:download_clang_use_lld --linkopt='-fuse-ld=lld'\r\n \r\n# This config refers to building with CUDA available. It does not necessarily\r\n# mean that we build CUDA op kernels.\r\nbuild:using_cuda --define=using_cuda=true\r\nbuild:using_cuda --action_env TF_NEED_CUDA=1\r\nbuild:using_cuda --crosstool_top=@local_config_cuda//crosstool:toolchain\r\n \r\n# This config refers to building CUDA op kernels with nvcc.\r\nbuild:cuda --config=using_cuda\r\nbuild:cuda --define=using_cuda_nvcc=true\r\n \r\n# This config refers to building CUDA op kernels with clang.\r\nbuild:cuda_clang --config=using_cuda\r\nbuild:cuda_clang --define=using_cuda_clang=true\r\nbuild:cuda_clang --define=using_clang=true\r\n \r\nbuild:tensorrt --action_env TF_NEED_TENSORRT=1\r\n \r\nbuild:rocm --crosstool_top=@local_config_rocm//crosstool:toolchain\r\nbuild:rocm --define=using_rocm=true --define=using_rocm_hipcc=true\r\nbuild:rocm --action_env TF_NEED_ROCM=1\r\n \r\nbuild:sycl --crosstool_top=@local_config_sycl//crosstool:toolchain\r\nbuild:sycl --define=using_sycl=true\r\nbuild:sycl --action_env TF_NEED_OPENCL_SYCL=1\r\n \r\nbuild:sycl_nodouble --config=sycl\r\nbuild:sycl_nodouble --cxxopt -DTENSORFLOW_SYCL_NO_DOUBLE\r\n \r\nbuild:sycl_nodouble --config=sycl\r\nbuild:sycl_asan --copt -fno-omit-frame-pointer --copt -fsanitize-coverage=3 --copt -DGPR_NO_DIRECT_SYSCALLS --linkopt -fPIC --linkopt -fsanitize=address\r\n \r\nbuild:sycl_nodouble --config=sycl\r\nbuild:sycl_trisycl --define=using_trisycl=true\r\n \r\n# Options extracted from configure script\r\nbuild:gdr --define=with_gdr_support=true\r\nbuild:ngraph --define=with_ngraph_support=true\r\nbuild:verbs --define=with_verbs_support=true\r\nbuild:numa --define=with_numa_support=true\r\n \r\n# Options to disable default on features\r\nbuild:noaws --define=no_aws_support=true\r\nbuild:nogcp --define=no_gcp_support=true\r\nbuild:nohdfs --define=no_hdfs_support=true\r\nbuild:nokafka --define=no_kafka_support=true\r\nbuild:noignite --define=no_ignite_support=true\r\nbuild:nonccl --define=no_nccl_support=true\r\n \r\nbuild --define=use_fast_cpp_protos=true\r\nbuild --define=allow_oversize_protos=true\r\n \r\nbuild --spawn_strategy=standalone\r\nbuild --strategy=Genrule=standalone\r\nbuild -c opt\r\n \r\n# Make Bazel print out all options from rc files.\r\nbuild --announce_rc\r\n \r\n# Other build flags.\r\nbuild --define=grpc_no_ares=true\r\n \r\n# Modular TF build options\r\nbuild:dynamic_kernels --define=dynamic_loaded_kernels=true\r\nbuild:dynamic_kernels --copt=-DAUTOLOAD_DYNAMIC_KERNELS\r\n \r\n# Build TF with C++ 17 features.\r\nbuild:c++17 --cxxopt=-std=c++1z\r\nbuild:c++17 --cxxopt=-stdlib=libc++\r\nbuild:c++1z --config=c++17\r\n \r\n# Default paths for TF_SYSTEM_LIBS\r\nbuild --define=PREFIX=/usr\r\nbuild --define=LIBDIR=$(PREFIX)/lib\r\nbuild --define=INCLUDEDIR=$(PREFIX)/include\r\n \r\n# Suppress all warning messages.\r\nbuild:short_logs --output_filter=DONT_MATCH_ANYTHING\r\n \r\n# Options when using remote execution\r\nbuild:rbe --action_env=BAZEL_DO_NOT_DETECT_CPP_TOOLCHAIN=1\r\nbuild:rbe --auth_enabled=true\r\nbuild:rbe --auth_scope=https://www.googleapis.com/auth/cloud-source-tools\r\nbuild:rbe --define=EXECUTOR=remote\r\nbuild:rbe --flaky_test_attempts=3\r\nbuild:rbe --jobs=200\r\nbuild:rbe --remote_accept_cached=true\r\nbuild:rbe --remote_cache=remotebuildexecution.googleapis.com\r\nbuild:rbe --remote_executor=remotebuildexecution.googleapis.com\r\nbuild:rbe --remote_local_fallback=false\r\nbuild:rbe --remote_timeout=600\r\nbuild:rbe --spawn_strategy=remote\r\nbuild:rbe --strategy=Genrule=remote\r\nbuild:rbe --strategy=Closure=remote\r\nbuild:rbe --strategy=Javac=remote\r\nbuild:rbe --strategy=TestRunner=remote\r\nbuild:rbe --tls_enabled\r\ntest:rbe --test_env=USER=anon\r\n \r\n# Options to build TensorFlow 1.x or 2.x.\r\nbuild:v1 --define=tf_api_version=1\r\nbuild:v2 --define=tf_api_version=2\r\ntest:v1 --test_env=TF2_BEHAVIOR=0\r\ntest:v2 --test_env=TF2_BEHAVIOR=1\r\nbuild --config=v2\r\ntest --config=v2\r\n \r\n# Default options should come above this line\r\n \r\n# Options from ./configure\r\ntry-import %workspace%/.tf_configure.bazelrc\r\n \r\n# Put user-specific options in .bazelrc.user\r\ntry-import %workspace%/.bazelrc.user\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33000", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33000/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33000/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/33000/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/33000", "id": 501734990, "node_id": "MDU6SXNzdWU1MDE3MzQ5OTA=", "number": 33000, "title": "Performance Degradation on MLPerf's GNMT implementation after converting to frozen graph ", "user": {"login": "brycearden", "id": 7913815, "node_id": "MDQ6VXNlcjc5MTM4MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/7913815?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brycearden", "html_url": "https://github.com/brycearden", "followers_url": "https://api.github.com/users/brycearden/followers", "following_url": "https://api.github.com/users/brycearden/following{/other_user}", "gists_url": "https://api.github.com/users/brycearden/gists{/gist_id}", "starred_url": "https://api.github.com/users/brycearden/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brycearden/subscriptions", "organizations_url": "https://api.github.com/users/brycearden/orgs", "repos_url": "https://api.github.com/users/brycearden/repos", "events_url": "https://api.github.com/users/brycearden/events{/privacy}", "received_events_url": "https://api.github.com/users/brycearden/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1097543484, "node_id": "MDU6TGFiZWwxMDk3NTQzNDg0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:runtime", "name": "comp:runtime", "color": "0052cc", "default": false, "description": "c++ runtime, performance issues (cpu)"}, {"id": 1463677878, "node_id": "MDU6TGFiZWwxNDYzNjc3ODc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:performance", "name": "type:performance", "color": "159b2e", "default": false, "description": "Performance Issue"}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-10-02T21:25:15Z", "updated_at": "2020-03-12T18:31:19Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): no\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Linux Ubuntu 18.04\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): ('v1.14.0-rc1-22-gaf24dc91b5', '1.14.0')\r\n- Python version: 2.7.15+\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source): `gcc (Ubuntu 7.4.0-1ubuntu1~18.04.1) 7.4.0`\r\n- CUDA/cuDNN version:\r\n- GPU model and memory: NVIDIA Titan V\r\n\r\nI am noticing a significant performance degradation in inference time when using the GNMT model provided for the MLPerf v0.5 benchmark with a trained model loaded from a checkpoint vs a trained model represented as a frozen graph. On the first iteration of inference (with batch_size = 6), the checkpoint graph takes ~2.9sec to perform inference while the frozen_graph implementation takes > 40sec. I would expect the frozen_graph to have better performance than the checkpoint model since my impression was that frozen graphs were meant for inference. \r\n\r\nOutput from model loaded from checkpoint:\r\n```\r\n# Start decoding\r\n  decoding to output /foobar/g_nmt-out\r\n  infer_mode beam_search, beam_width 10, num translations per input 1.\r\n  total iterations count 1.\r\ninfer time: 2.9462 secs\r\n  done, num sentences 6, num translations per input 1, time 2s, Wed Oct  2 16:02:07 2019.\r\nsingle_worker_inference time: 3.0597 secs\r\n  bleu: 16.8\r\n```\r\n\r\nOutput from model loaded from a frozen graph:\r\n```\r\n# Start decoding\r\n  decoding to output /foobar/g_nmt-out\r\n  infer_mode beam_search, beam_width 10, num translations per input 1.\r\n  total iterations count 1.\r\ninfer time: 40.5799 secs\r\n  done, num sentences 6, num translations per input 1, time 40s, Wed Oct  2 15:40:09 2019.\r\nsingle_worker_inference time: 40.7543 secs\r\n  bleu: 16.8\r\n```\r\n\r\nI've pushed up my own fork of the [mlperf/inference](https://github.com/mlperf/inference) repository with a branch that exposes this performance degradation [found here](https://github.com/brycearden/inference/tree/gnmt-frozen-perf-degradation). The fast / slow behavior can be toggled here, and can be reproduced by running `python run_task.py --run=accuracy`:\r\n\r\nhttps://github.com/brycearden/inference/blob/gnmt-frozen-perf-degradation/v0.5/translation/gnmt/tensorflow/nmt/inference.py#L131-L160\r\n\r\nNote that on the second iteration (after the caches warm up), the frozen graph still seems to be ~3x slower than the checkpoint model (7sec vs 2sec)\r\n\r\nAny additional insight would be greatly appreciated.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32998", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32998/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32998/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32998/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/32998", "id": 501659801, "node_id": "MDU6SXNzdWU1MDE2NTk4MDE=", "number": 32998, "title": "Cannot compile TF 2.0.0 with MacOS 10.14.6 and XCode 11.0", "user": {"login": "feranick", "id": 35967, "node_id": "MDQ6VXNlcjM1OTY3", "avatar_url": "https://avatars1.githubusercontent.com/u/35967?v=4", "gravatar_id": "", "url": "https://api.github.com/users/feranick", "html_url": "https://github.com/feranick", "followers_url": "https://api.github.com/users/feranick/followers", "following_url": "https://api.github.com/users/feranick/following{/other_user}", "gists_url": "https://api.github.com/users/feranick/gists{/gist_id}", "starred_url": "https://api.github.com/users/feranick/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/feranick/subscriptions", "organizations_url": "https://api.github.com/users/feranick/orgs", "repos_url": "https://api.github.com/users/feranick/repos", "events_url": "https://api.github.com/users/feranick/events{/privacy}", "received_events_url": "https://api.github.com/users/feranick/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1205765054, "node_id": "MDU6TGFiZWwxMjA1NzY1MDU0", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:macOS", "name": "subtype:macOS", "color": "b619ea", "default": false, "description": "macOS Build/Installation issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 11, "created_at": "2019-10-02T18:42:27Z", "updated_at": "2019-11-11T12:39:11Z", "closed_at": null, "author_association": "NONE", "body": "### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**: No\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**: MacOs 10.14.6\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**: No\r\n- **TensorFlow installed from (source or binary)**: Source\r\n- **TensorFlow version (use command below)**: 2.0.0 and 1.15.0-rc2\r\n- **Python version**: 3.7.4\r\n- **Bazel version (if compiling from source)**: either 2.6.1, 2.6.0, 2.5.3\r\n- **GCC/Compiler version (if compiling from source)**: Apple clang version 11.0.0 (clang-1100.0.33.8)\r\n- **CUDA/cuDNN version**: None\r\n- **GPU model and memory**: None\r\n- **Exact command to reproduce**: within the tensorflow 2.0.0 source directory, after standard ./configure (CPU, no GPU) or particular optimization flags besides default:\r\n\r\n`bazel build --config=opt --config=v2 --verbose_failures //tensorflow/tools/pip_package:build_pip_package`\r\n\r\n### Describe the problem\r\nCompilation stops with following error:\r\n```\r\nERROR: /Users/feranick/Desktop/tensorflow/tensorflow/core/debug/BUILD:43:1: ProtoCompile tensorflow/core/debug/debug_service.pb.h failed (Segmentation fault): protoc failed: error executing command \r\n  (cd /private/var/tmp/_bazel_feranick/50b852099a3bf3aaa184abce166f8e34/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    PATH=/Users/feranick/Library/Python/3.7/bin/:/opt/local/Library/Frameworks/Python.framework/Versions/3.7/bin:/opt/usr/local/bin/:/Users/feranick/Documents/Work/c/android-sdk-macosx/platform-tools:/opt/local/bin:/opt/local/sbin:/Users/feranick/Library/Python/3.7/bin/:/opt/local/Library/Frameworks/Python.framework/Versions/3.7/bin:/opt/usr/local/bin/:/Users/feranick/Documents/Work/c/android-sdk-macosx/platform-tools:/opt/local/bin:/opt/local/sbin:/Users/feranick/Library/Python/3.7/bin/:/opt/local/Library/Frameworks/Python.framework/Versions/3.7/bin:/opt/usr/local/bin/:/Users/feranick/Documents/Work/c/android-sdk-macosx/platform-tools:/opt/local/bin:/opt/local/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/TeX/texbin:/usr/local/MacGPG2/bin:/opt/X11/bin:/Users/feranick/Documents/Work/c/android-sdk/platform-tools/:/Users/feranick/Documents/Work/c/android-sdk/platform-tools/:/Users/feranick/Documents/Work/c/android-sdk/platform-tools/ \\\r\n  bazel-out/host/bin/external/com_google_protobuf/protoc '--cpp_out=bazel-out/host/bin' '--plugin=protoc-gen-grpc=bazel-out/host/bin/external/grpc/grpc_cpp_plugin' '--grpc_out=bazel-out/host/bin' -I. -I. -Iexternal/com_google_protobuf/src -Ibazel-out/host/bin/external/com_google_protobuf/src -I. -I. -I. -I. -Iexternal/com_google_protobuf/src -Ibazel-out/host/bin/external/com_google_protobuf/src -Iexternal/com_google_protobuf/src -Ibazel-out/host/bin/external/com_google_protobuf/src -I. -Iexternal/com_google_protobuf/src -Ibazel-out/host/bin/external/com_google_protobuf/src -Iexternal/com_google_protobuf/src -Ibazel-out/host/bin/external/com_google_protobuf/src -I. -I. -I. -Iexternal/com_google_protobuf/src -Ibazel-out/host/bin/external/com_google_protobuf/src -Iexternal/com_google_protobuf/src -Ibazel-out/host/bin/external/com_google_protobuf/src -I. -Iexternal/com_google_protobuf/src -Ibazel-out/host/bin/external/com_google_protobuf/src -Iexternal/com_google_protobuf/src -Ibazel-out/host/bin/external/com_google_protobuf/src tensorflow/core/debug/debug_service.proto)\r\nExecution platform: @bazel_tools//platforms:host_platform: protoc failed: error executing command \r\n  (cd /private/var/tmp/_bazel_feranick/50b852099a3bf3aaa184abce166f8e34/execroot/org_tensorflow && \\\r\n  exec env - \\\r\n    PATH=/Users/feranick/Library/Python/3.7/bin/:/opt/local/Library/Frameworks/Python.framework/Versions/3.7/bin:/opt/usr/local/bin/:/Users/feranick/Documents/Work/c/android-sdk-macosx/platform-tools:/opt/local/bin:/opt/local/sbin:/Users/feranick/Library/Python/3.7/bin/:/opt/local/Library/Frameworks/Python.framework/Versions/3.7/bin:/opt/usr/local/bin/:/Users/feranick/Documents/Work/c/android-sdk-macosx/platform-tools:/opt/local/bin:/opt/local/sbin:/Users/feranick/Library/Python/3.7/bin/:/opt/local/Library/Frameworks/Python.framework/Versions/3.7/bin:/opt/usr/local/bin/:/Users/feranick/Documents/Work/c/android-sdk-macosx/platform-tools:/opt/local/bin:/opt/local/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/TeX/texbin:/usr/local/MacGPG2/bin:/opt/X11/bin:/Users/feranick/Documents/Work/c/android-sdk/platform-tools/:/Users/feranick/Documents/Work/c/android-sdk/platform-tools/:/Users/feranick/Documents/Work/c/android-sdk/platform-tools/ \\\r\n  bazel-out/host/bin/external/com_google_protobuf/protoc '--cpp_out=bazel-out/host/bin' '--plugin=protoc-gen-grpc=bazel-out/host/bin/external/grpc/grpc_cpp_plugin' '--grpc_out=bazel-out/host/bin' -I. -I. -Iexternal/com_google_protobuf/src -Ibazel-out/host/bin/external/com_google_protobuf/src -I. -I. -I. -I. -Iexternal/com_google_protobuf/src -Ibazel-out/host/bin/external/com_google_protobuf/src -Iexternal/com_google_protobuf/src -Ibazel-out/host/bin/external/com_google_protobuf/src -I. -Iexternal/com_google_protobuf/src -Ibazel-out/host/bin/external/com_google_protobuf/src -Iexternal/com_google_protobuf/src -Ibazel-out/host/bin/external/com_google_protobuf/src -I. -I. -I. -Iexternal/com_google_protobuf/src -Ibazel-out/host/bin/external/com_google_protobuf/src -Iexternal/com_google_protobuf/src -Ibazel-out/host/bin/external/com_google_protobuf/src -I. -Iexternal/com_google_protobuf/src -Ibazel-out/host/bin/external/com_google_protobuf/src -Iexternal/com_google_protobuf/src -Ibazel-out/host/bin/external/com_google_protobuf/src tensorflow/core/debug/debug_service.proto)\r\nExecution platform: @bazel_tools//platforms:host_platform\r\nbazel-out/host/bin/external/com_google_protobuf/src: warning: directory does not exist.\r\nbazel-out/host/bin/external/com_google_protobuf/src: warning: directory does not exist.\r\nbazel-out/host/bin/external/com_google_protobuf/src: warning: directory does not exist.\r\nbazel-out/host/bin/external/com_google_protobuf/src: warning: directory does not exist.\r\nbazel-out/host/bin/external/com_google_protobuf/src: warning: directory does not exist.\r\nbazel-out/host/bin/external/com_google_protobuf/src: warning: directory does not exist.\r\nbazel-out/host/bin/external/com_google_protobuf/src: warning: directory does not exist.\r\nbazel-out/host/bin/external/com_google_protobuf/src: warning: directory does not exist.\r\nbazel-out/host/bin/external/com_google_protobuf/src: warning: directory does not exist.\r\nTarget //tensorflow/tools/pip_package:build_pip_package failed to build\r\n```\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32997", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32997/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32997/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32997/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/32997", "id": 501647386, "node_id": "MDU6SXNzdWU1MDE2NDczODY=", "number": 32997, "title": "Cannot link to built tensorflow_cc.lib with Visual C++ -- undefined symbols; r2.0", "user": {"login": "Kramax", "id": 14958160, "node_id": "MDQ6VXNlcjE0OTU4MTYw", "avatar_url": "https://avatars0.githubusercontent.com/u/14958160?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kramax", "html_url": "https://github.com/Kramax", "followers_url": "https://api.github.com/users/Kramax/followers", "following_url": "https://api.github.com/users/Kramax/following{/other_user}", "gists_url": "https://api.github.com/users/Kramax/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kramax/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kramax/subscriptions", "organizations_url": "https://api.github.com/users/Kramax/orgs", "repos_url": "https://api.github.com/users/Kramax/repos", "events_url": "https://api.github.com/users/Kramax/events{/privacy}", "received_events_url": "https://api.github.com/users/Kramax/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1188421838, "node_id": "MDU6TGFiZWwxMTg4NDIxODM4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/subtype:windows", "name": "subtype:windows", "color": "b619ea", "default": false, "description": "Windows Build/Installation Issues"}, {"id": 473173351, "node_id": "MDU6TGFiZWw0NzMxNzMzNTE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:build/install", "name": "type:build/install", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "angerson", "id": 32465472, "node_id": "MDQ6VXNlcjMyNDY1NDcy", "avatar_url": "https://avatars2.githubusercontent.com/u/32465472?v=4", "gravatar_id": "", "url": "https://api.github.com/users/angerson", "html_url": "https://github.com/angerson", "followers_url": "https://api.github.com/users/angerson/followers", "following_url": "https://api.github.com/users/angerson/following{/other_user}", "gists_url": "https://api.github.com/users/angerson/gists{/gist_id}", "starred_url": "https://api.github.com/users/angerson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/angerson/subscriptions", "organizations_url": "https://api.github.com/users/angerson/orgs", "repos_url": "https://api.github.com/users/angerson/repos", "events_url": "https://api.github.com/users/angerson/events{/privacy}", "received_events_url": "https://api.github.com/users/angerson/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 3, "created_at": "2019-10-02T18:17:08Z", "updated_at": "2019-12-11T18:53:37Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a build/installation issue. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:build_template</em>\r\n\r\n**System information**\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):\r\n   Windows 10 1903 Build 18362.356\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n  NA\r\n- TensorFlow installed from (source or binary): \r\n  source\r\n- TensorFlow version: \r\n  r2.0 as of 29-Sep-2019\r\n- Python version: \r\n  3.6\r\n- Installed using virtualenv? pip? conda?: \r\n  No\r\n- Bazel version (if compiling from source): \r\n  0.29.1\r\n- GCC/Compiler version (if compiling from source): \r\n  Visual C++ 2017 14.16.27023\r\n- CUDA/cuDNN version: \r\n  10.1, 7.6.4.38\r\n- GPU model and memory: \r\n  NVIDIA Quadro P2000, 5GB\r\n\r\n\r\n\r\n**Describe the problem**\r\nFirst off, I know I am not using the version of Bazel called for in the build instructions. In fact the version of bazel called for is a little ambiguous, but none of the versions called for would work for me. They just did not work with Visual C++ 2017 as I have it installed. But 0.29.1 did work in that it could build \"successfully\".\r\n\r\nI am building r2.0 from source to use the C++ API with an external program in a plugin DLL. I built tensorflow_cc.dll and tensorflow_cc.lib using bazel (after much struggle). But when I tried to link to tensorflow_cc.lib (and no other tensorflow objects) I get unresolved symbols from tensorflow packages. With the vanilla r2.0 source, I get unresolved symbols for the following:\r\n```\r\n?_TensorShapeProto_default_instance_@tensorflow@@3VTensorShapeProtoDefaultTypeInternal@1@A\r\n\r\n??0SessionOptions@tensorflow@@QEAA@XZ\r\n\r\n?LoadSavedModel@tensorflow@@YA?AVStatus@1@AEBUSessionOptions@1@AEBVRunOptions@1@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@AEBV?$unordered_set@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@U?$hash@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@2@U?$equal_to@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@2@V?$allocator@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@2@@6@QEAUSavedModelBundle@1@@Z\r\n```\r\n\r\n\r\nwhich coresponds to the following when demangled:\r\n```\r\nclass tensorflow::TensorShapeProtoDefaultTypeInternal tensorflow::_TensorShapeProto_default_instance_\r\n\r\npublic: __cdecl tensorflow::SessionOptions::SessionOptions(void) __ptr64\r\n\r\nclass tensorflow::Status __cdecl tensorflow::LoadSavedModel(struct tensorflow::SessionOptions const & __ptr64,class tensorflow::RunOptions const & __ptr64,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const & __ptr64,class std::unordered_set<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,struct std::hash<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > >,struct std::equal_to<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > >,class std::allocator<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > > > const & __ptr64,struct tensorflow::SavedModelBundle * __ptr64 const)\r\n```\r\nI read some other github bug reports and discovered that there is a complex method used to export a subset of the global symbols into the .lib file that involves a python program tensorflow/tools/def_file_filter/def_file_filter.py.tpl and someone showed how to put extra symbols in that to add to the set exported. I went ahead and did that:\r\n```\r\ndiff --git a/tensorflow/tools/def_file_filter/def_file_filter.py.tpl ...\r\n@@ -154,6 +154,9 @@ def main():\r\n       else:\r\n         def_fp.write(\"\\t\" + decorated + \" DATA\\n\")\r\n       taken.add(decorated)\r\n+    def_fp.write(\"\\t??0SessionOptions@tensorflow@@QEAA@XZ\\n\")\r\n+    def_fp.write(\"\\t?_TensorShapeProto_default_instance_@tensorflow@@3VTensorShapeProtoDefaultTypeInternal@1@A DATA\\n\")\r\n+    def_fp.write(\"\\t?LoadSavedModel@tensorflow@@YA?AVStatus@1@AEBUSessionOptions@1@AEBVRunOptions@1@AEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@AEBV?$unordered_set@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@U?$hash@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@2@U?$equal_to@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@2@V?$allocator@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@2@@6@QEAUSavedModelBundle@1@@Z\\n\")\r\n     def_fp.close()\r\n\r\n   exit_code = proc.wait()\r\n```\r\nThis fixed 2 of the 3 unresolved, but the following was still undefined:\r\n```\r\n?_TensorShapeProto_default_instance_@tensorflow@@3VTensorShapeProtoDefaultTypeInternal@1@A\r\n```\r\nThe only way I could get it to work was to actually link to the object file that defined that global object (tensor_shape.pb.o) and two \".a\" libraries for protobuf (libprotobuf_lite.a & libprotobuf.a):\r\n```\r\ncl.exe -MD ... plugin.obj .wsl.obj/segTask.obj .wsl.obj/tfseg.obj /link /dll ... c:/root/tensorflow/bazel-out/x64_windows-opt/bin/tensorflow/core/_objs/protos_all_proto_cc_impl/tensor_shape.pb.o c:/root/tensorflow/bazel-out/x64_windows-opt/bin/external/com_google_protobuf/libprotobuf.a c:/root/tensorflow/bazel-out/x64_windows-opt/bin/external/com_google_protobuf/libprotobuf_lite.a c:/root/tensorflow/bazel-bin/tensorflow/tensorflow_cc.lib \r\n```\r\nI am not using any exotic tensorflow calls in my C++ code and it seems that it should just work. There are clearly other similar issues with unresolved symbols with Visual C++ builds and I am hoping the above will help to resolve those. As it is, it seems that anyone trying to deploy an inference engine using C++ on Windows will struggle mightily. I think the first issue that was solved with def_file_filter.py.tpl is simple to solve. But I just could not figure out why the 3rd symbol would never resolve. Clearly, linking in the .o file is totally bogus. I looked at the generated def file tensorflow_filtered_def_file.def and it seemed the symbol was actually in that file already without my changes to def_file_filter.py.tpl, but it still would not work.\r\n\r\n(BTW, I also posted a stackoverflow question about this https://stackoverflow.com/questions/58176287/cannot-link-c-using-tensorflow-c-api-tensorflow-cc-lib-on-windows-10-visual/58188482#58188482)\r\n\r\n**Provide the exact sequence of commands / steps that you executed before running into the problem**\r\nbazel build --config=monolithic //tensorflow:tensorflow_cc.dll  --verbose_failures\r\nbazel build --config=monolithic //tensorflow:tensorflow_cc.lib  --verbose_failures\r\n\r\n**Any other info / logs**\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached.\r\nLogs of the bazel link-stage builds of the DLL and LIB are attached.\r\n[build-dll.txt](https://github.com/tensorflow/tensorflow/files/3682666/build-dll.txt)\r\n[build-lib.txt](https://github.com/tensorflow/tensorflow/files/3682667/build-lib.txt)\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32982", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32982/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32982/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32982/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/32982", "id": 501311981, "node_id": "MDU6SXNzdWU1MDEzMTE5ODE=", "number": 32982, "title": "TF2 Stubs for intellisense; current way tf2 imports modules does not support intellisense", "user": {"login": "RensDimmendaal", "id": 9828683, "node_id": "MDQ6VXNlcjk4Mjg2ODM=", "avatar_url": "https://avatars2.githubusercontent.com/u/9828683?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RensDimmendaal", "html_url": "https://github.com/RensDimmendaal", "followers_url": "https://api.github.com/users/RensDimmendaal/followers", "following_url": "https://api.github.com/users/RensDimmendaal/following{/other_user}", "gists_url": "https://api.github.com/users/RensDimmendaal/gists{/gist_id}", "starred_url": "https://api.github.com/users/RensDimmendaal/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RensDimmendaal/subscriptions", "organizations_url": "https://api.github.com/users/RensDimmendaal/orgs", "repos_url": "https://api.github.com/users/RensDimmendaal/repos", "events_url": "https://api.github.com/users/RensDimmendaal/events{/privacy}", "received_events_url": "https://api.github.com/users/RensDimmendaal/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "annarev", "id": 22060313, "node_id": "MDQ6VXNlcjIyMDYwMzEz", "avatar_url": "https://avatars0.githubusercontent.com/u/22060313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/annarev", "html_url": "https://github.com/annarev", "followers_url": "https://api.github.com/users/annarev/followers", "following_url": "https://api.github.com/users/annarev/following{/other_user}", "gists_url": "https://api.github.com/users/annarev/gists{/gist_id}", "starred_url": "https://api.github.com/users/annarev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/annarev/subscriptions", "organizations_url": "https://api.github.com/users/annarev/orgs", "repos_url": "https://api.github.com/users/annarev/repos", "events_url": "https://api.github.com/users/annarev/events{/privacy}", "received_events_url": "https://api.github.com/users/annarev/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "annarev", "id": 22060313, "node_id": "MDQ6VXNlcjIyMDYwMzEz", "avatar_url": "https://avatars0.githubusercontent.com/u/22060313?v=4", "gravatar_id": "", "url": "https://api.github.com/users/annarev", "html_url": "https://github.com/annarev", "followers_url": "https://api.github.com/users/annarev/followers", "following_url": "https://api.github.com/users/annarev/following{/other_user}", "gists_url": "https://api.github.com/users/annarev/gists{/gist_id}", "starred_url": "https://api.github.com/users/annarev/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/annarev/subscriptions", "organizations_url": "https://api.github.com/users/annarev/orgs", "repos_url": "https://api.github.com/users/annarev/repos", "events_url": "https://api.github.com/users/annarev/events{/privacy}", "received_events_url": "https://api.github.com/users/annarev/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 30, "created_at": "2019-10-02T06:55:40Z", "updated_at": "2020-03-19T12:39:02Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 2.0.0\r\n- Are you willing to contribute it (Yes/No): Happy to help out\r\n\r\n**Describe the feature and the current behavior/state.**\r\nIntellisense does not work because of the way tf2 has import statements.\r\n\r\n![image](https://user-images.githubusercontent.com/9828683/66023599-f7f83180-e4f1-11e9-83d0-fe931c4486f6.png)\r\n\r\n\r\n**Will this change the current api? How?**\r\n\r\nAdd stubs.\r\n\r\n**Who will benefit with this feature?**\r\n\r\nVscode users\r\n\r\n**Any Other info.**\r\n\r\nDiscussed here: \r\nhttps://github.com/microsoft/python-language-server/issues/818#issuecomment-537143000"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32981", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32981/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32981/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32981/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/32981", "id": 501295480, "node_id": "MDU6SXNzdWU1MDEyOTU0ODA=", "number": 32981, "title": "Accessing validation data within a custom callback ??", "user": {"login": "hagianga21", "id": 30545605, "node_id": "MDQ6VXNlcjMwNTQ1NjA1", "avatar_url": "https://avatars2.githubusercontent.com/u/30545605?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hagianga21", "html_url": "https://github.com/hagianga21", "followers_url": "https://api.github.com/users/hagianga21/followers", "following_url": "https://api.github.com/users/hagianga21/following{/other_user}", "gists_url": "https://api.github.com/users/hagianga21/gists{/gist_id}", "starred_url": "https://api.github.com/users/hagianga21/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hagianga21/subscriptions", "organizations_url": "https://api.github.com/users/hagianga21/orgs", "repos_url": "https://api.github.com/users/hagianga21/repos", "events_url": "https://api.github.com/users/hagianga21/events{/privacy}", "received_events_url": "https://api.github.com/users/hagianga21/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "rchao", "id": 6505863, "node_id": "MDQ6VXNlcjY1MDU4NjM=", "avatar_url": "https://avatars2.githubusercontent.com/u/6505863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rchao", "html_url": "https://github.com/rchao", "followers_url": "https://api.github.com/users/rchao/followers", "following_url": "https://api.github.com/users/rchao/following{/other_user}", "gists_url": "https://api.github.com/users/rchao/gists{/gist_id}", "starred_url": "https://api.github.com/users/rchao/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rchao/subscriptions", "organizations_url": "https://api.github.com/users/rchao/orgs", "repos_url": "https://api.github.com/users/rchao/repos", "events_url": "https://api.github.com/users/rchao/events{/privacy}", "received_events_url": "https://api.github.com/users/rchao/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-10-02T06:06:28Z", "updated_at": "2019-10-10T22:39:12Z", "closed_at": null, "author_association": "NONE", "body": "**Describe the current behavior**\r\nHi, how can I access validation data within a custom callback ?\r\n\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n\r\n```\r\nfrom __future__ import absolute_import, division, print_function, unicode_literals\r\n\r\nimport os\r\nimport matplotlib.pyplot as plt\r\ntry:\r\n  # %tensorflow_version only exists in Colab.\r\n  %tensorflow_version 2.x\r\nexcept Exception:\r\n  pass\r\nimport tensorflow as tf\r\nimport datetime\r\n\r\n\r\n\r\nprint(\"TensorFlow version: {}\".format(tf.__version__))\r\nprint(\"Eager execution: {}\".format(tf.executing_eagerly()))\r\n\r\nfrom tensorflow.keras.layers import Dense, Flatten, Conv2D\r\nfrom tensorflow.keras import Model\r\n\r\nmnist = tf.keras.datasets.mnist\r\n\r\n(x_train, y_train), (x_test, y_test) = mnist.load_data()\r\nx_train, x_test = x_train / 255.0, x_test / 255.0\r\n\r\n\r\nmodel = tf.keras.models.Sequential([\r\n  tf.keras.layers.Flatten(input_shape=(28, 28)),\r\n  tf.keras.layers.Dense(128, activation='relu'),\r\n  tf.keras.layers.Dropout(0.2),\r\n  tf.keras.layers.Dense(10, activation='softmax')\r\n])\r\n\r\nclass MyCustomCallback(tf.keras.callbacks.Callback):\r\n    def on_epoch_end(self, epoch, logs=None):\r\n        print('Hello')\r\n        print(self.validation_data[0].shape)\r\n  \r\ndef customLoss3(y_true, y_pred):\r\n    return tf.reduce_mean(tf.keras.losses.sparse_categorical_crossentropy(y_true, y_pred))\r\n  \r\n#model.compile(optimizer='adam', loss=customLoss3, metrics=['accuracy'])\r\n\r\nmodel.compile(optimizer='adam', loss=customLoss3, metrics=[tf.keras.metrics.SparseCategoricalAccuracy()])\r\n\r\nmodel.fit(x_train, y_train, epochs=5, validation_split=0.2, callbacks=[MyCustomCallback()])\r\n\r\nmodel.evaluate(x_test, y_test)\r\n\r\n```\r\n**Other info / logs**\r\nTypeError: 'NoneType' object is not subscriptable\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32975", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32975/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32975/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32975/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/32975", "id": 501208081, "node_id": "MDU6SXNzdWU1MDEyMDgwODE=", "number": 32975, "title": "tf.io.gfile.GFile does not work with Python zipfile", "user": {"login": "eirism", "id": 1268471, "node_id": "MDQ6VXNlcjEyNjg0NzE=", "avatar_url": "https://avatars2.githubusercontent.com/u/1268471?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eirism", "html_url": "https://github.com/eirism", "followers_url": "https://api.github.com/users/eirism/followers", "following_url": "https://api.github.com/users/eirism/following{/other_user}", "gists_url": "https://api.github.com/users/eirism/gists{/gist_id}", "starred_url": "https://api.github.com/users/eirism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eirism/subscriptions", "organizations_url": "https://api.github.com/users/eirism/orgs", "repos_url": "https://api.github.com/users/eirism/repos", "events_url": "https://api.github.com/users/eirism/events{/privacy}", "received_events_url": "https://api.github.com/users/eirism/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-10-02T00:16:37Z", "updated_at": "2019-10-04T03:14:06Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n\r\n-  Have I written custom code: Yes\r\n- OS Platform and Distribution: Linux Ubuntu 18.04\r\n- TensorFlow installed from: binary\r\n- TensorFlow version: v1.14.0-rc1-22-gaf24dc9 1.14.0\r\n- Python version: 3.6\r\n\r\n**Describe the current behavior**\r\n`tf.io.gfile.GFile` does not work correctly with the Python built in `zipfile` module. When writing to a ZipFile where `file=GFile()` the resulting ZIP file is corrupt.\r\n\r\n**Describe the expected behavior**\r\nZipFiles written with `file=GFile()` should be not be corrupt and equal to those written with `file=<other_type_fd>`.\r\n\r\n**Code to reproduce the issue**\r\n\r\n```\r\nimport tensorflow as tf\r\nimport zipfile\r\nimport filecmp\r\n\r\n\r\nnormal_fd = open(\"normal.zip\", \"wb\")\r\nnormal2_fd = open(\"normal2.zip\", \"wb\")\r\nopen(\"gfile.zip\", \"w\").close()  # \"touch\" file so that it exists, issue #32090\r\ngfile_fd = tf.io.gfile.GFile(\"gfile.zip\", \"w+b\")  # need +, issue #32122\r\n\r\nfor fd in (normal_fd, normal2_fd, gfile_fd):\r\n    with zipfile.ZipFile(file=fd, \"w\") as zipfd:\r\n        with zipfd.open(\"test.txt\", \"w\") as fid:\r\n            fid.write(\"Hello, World!\".encode())\r\n    fd.close()\r\n\r\nprint(\"Normal zips equal?\", filecmp.cmp(\"normal.zip\", \"normal2.zip\"))\r\nprint(\"GFile zip equal normal?\", filecmp.cmp(\"normal.zip\", \"gfile.zip\"))\r\n\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32972", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32972/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32972/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32972/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/32972", "id": 501178490, "node_id": "MDU6SXNzdWU1MDExNzg0OTA=", "number": 32972, "title": "tf.io.gfile.mkdir does not throw exception if path exists", "user": {"login": "eirism", "id": 1268471, "node_id": "MDQ6VXNlcjEyNjg0NzE=", "avatar_url": "https://avatars2.githubusercontent.com/u/1268471?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eirism", "html_url": "https://github.com/eirism", "followers_url": "https://api.github.com/users/eirism/followers", "following_url": "https://api.github.com/users/eirism/following{/other_user}", "gists_url": "https://api.github.com/users/eirism/gists{/gist_id}", "starred_url": "https://api.github.com/users/eirism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eirism/subscriptions", "organizations_url": "https://api.github.com/users/eirism/orgs", "repos_url": "https://api.github.com/users/eirism/repos", "events_url": "https://api.github.com/users/eirism/events{/privacy}", "received_events_url": "https://api.github.com/users/eirism/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-10-01T22:29:53Z", "updated_at": "2019-10-04T03:13:16Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n\r\n-  Have I written custom code: Yes\r\n- OS Platform and Distribution: Linux Ubuntu 18.04\r\n- TensorFlow installed from: binary\r\n- TensorFlow version: v1.14.0-rc1-22-gaf24dc9 1.14.0\r\n- Python version: 3.6\r\n\r\n**Describe the current behavior**\r\n`tf.io.gfile.mkdir()` on Linux does not throw an exception if the path exists. This can cause problems if the path is a file, as you would assume that the path is a directory after calling `mkdir()`. See the code below for an example.\r\n\r\n**Describe the expected behavior**\r\n`mkdir()` should throw an exception if the path exists, like the Python built in [`os.mkdir()`](https://docs.python.org/3/library/os.html#os.mkdir) does.\r\n\r\n**Code to reproduce the issue**\r\n\r\n```\r\nimport tensorflow as tf\r\n\r\ntest_path = \"test\"\r\n\r\n# Create a file at <test_path>\r\nwith open(test_path, \"w\") as f:\r\n    f.write(\"Hello, World!\")\r\n\r\n# No error when creating dir\r\ntf.io.gfile.mkdir(test_path)\r\nwith tf.io.gfile.GFile(test_path + \"/test_file.txt\", \"w\") as f:\r\n    # .write throws exception since the <test_path> directory does not exist\r\n    f.write(\"Hello\")\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32970", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32970/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32970/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32970/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/32970", "id": 501160985, "node_id": "MDU6SXNzdWU1MDExNjA5ODU=", "number": 32970, "title": "java.nio.BufferOverflowException TensorFlowYoloDetector", "user": {"login": "mkulisic", "id": 31263950, "node_id": "MDQ6VXNlcjMxMjYzOTUw", "avatar_url": "https://avatars0.githubusercontent.com/u/31263950?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mkulisic", "html_url": "https://github.com/mkulisic", "followers_url": "https://api.github.com/users/mkulisic/followers", "following_url": "https://api.github.com/users/mkulisic/following{/other_user}", "gists_url": "https://api.github.com/users/mkulisic/gists{/gist_id}", "starred_url": "https://api.github.com/users/mkulisic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mkulisic/subscriptions", "organizations_url": "https://api.github.com/users/mkulisic/orgs", "repos_url": "https://api.github.com/users/mkulisic/repos", "events_url": "https://api.github.com/users/mkulisic/events{/privacy}", "received_events_url": "https://api.github.com/users/mkulisic/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "teijeong", "id": 4837376, "node_id": "MDQ6VXNlcjQ4MzczNzY=", "avatar_url": "https://avatars0.githubusercontent.com/u/4837376?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teijeong", "html_url": "https://github.com/teijeong", "followers_url": "https://api.github.com/users/teijeong/followers", "following_url": "https://api.github.com/users/teijeong/following{/other_user}", "gists_url": "https://api.github.com/users/teijeong/gists{/gist_id}", "starred_url": "https://api.github.com/users/teijeong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teijeong/subscriptions", "organizations_url": "https://api.github.com/users/teijeong/orgs", "repos_url": "https://api.github.com/users/teijeong/repos", "events_url": "https://api.github.com/users/teijeong/events{/privacy}", "received_events_url": "https://api.github.com/users/teijeong/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "teijeong", "id": 4837376, "node_id": "MDQ6VXNlcjQ4MzczNzY=", "avatar_url": "https://avatars0.githubusercontent.com/u/4837376?v=4", "gravatar_id": "", "url": "https://api.github.com/users/teijeong", "html_url": "https://github.com/teijeong", "followers_url": "https://api.github.com/users/teijeong/followers", "following_url": "https://api.github.com/users/teijeong/following{/other_user}", "gists_url": "https://api.github.com/users/teijeong/gists{/gist_id}", "starred_url": "https://api.github.com/users/teijeong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/teijeong/subscriptions", "organizations_url": "https://api.github.com/users/teijeong/orgs", "repos_url": "https://api.github.com/users/teijeong/repos", "events_url": "https://api.github.com/users/teijeong/events{/privacy}", "received_events_url": "https://api.github.com/users/teijeong/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-10-01T21:41:01Z", "updated_at": "2019-10-08T06:08:31Z", "closed_at": null, "author_association": "NONE", "body": "Hello, \r\nI am using Yolov2-tiny to detect a single class a running this on this example app. Because I only need a single class, I have been experimenting by reducing layers on yolov2-tiny and the filter sizes.  After a second reduction of the model, I have ran into the error \"java.nio.BufferOverflowException\". \r\n\r\n**Full Error**\r\nE/AndroidRuntime: FATAL EXCEPTION: inference\r\n    Process: org.tensorflow.demo, PID: 32033\r\n    java.nio.BufferOverflowException\r\n        at java.nio.HeapFloatBuffer.put(HeapFloatBuffer.java:180)\r\n        at org.tensorflow.Tensor.writeTo(Tensor.java:488)\r\n        at org.tensorflow.contrib.android.TensorFlowInferenceInterface.fetch(TensorFlowInferenceInterface.java:488)\r\n        at org.tensorflow.contrib.android.TensorFlowInferenceInterface.fetch(TensorFlowInferenceInterface.java:442)\r\n        at org.tensorflow.demo.TensorFlowYoloDetector.recognizeImage(TensorFlowYoloDetector.java:168)\r\n        at org.tensorflow.demo.DetectorActivity$3.run(DetectorActivity.java:330)\r\n        at android.os.Handler.handleCallback(Handler.java:873)\r\n        at android.os.Handler.dispatchMessage(Handler.java:99)\r\n        at android.os.Looper.loop(Looper.java:214)\r\n        at android.os.HandlerThread.run(HandlerThread.java:65)\r\nI/Process: Sending signal. PID: 32033 SIG: 9\r\n\r\n**Here is my setup** \r\n\r\n- **Hardware**: Samsung S8\r\n- **System**: Windows\r\n-**Models**: Trained inside Linux VM and converted to .pb file using darknet.\r\n- **Preview Size**: Changed from 640x480 to 1920x1080\r\n\r\n**Models**\r\n\r\n- **Trial 1**\r\n     - **Model**: Yolov2-tiny (no modifications)\r\n     - **Model size**: 43MB\r\n     -**Inference Time**: ~600ms\r\n     -**Status**: Works with no issues\r\n\r\n- **Trial 2**\r\n     - **Model**: Yolov2-tiny (Removed a convolutional layer and scaled down filters)\r\n     - **Model size**: 10MB\r\n     -**Inference Time**: ~400ms\r\n     -**Status**: Works with no issues\r\n\r\n- **Trial 3**\r\n     - **Model**: Yolov2-tiny (removed 2 convolutional layers and scaled down filters)\r\n     - **Model size**: 2.7MB\r\n     -**Inference Time**: None\r\n     -**Status**: Throws the exception status above\r\n     -**Note**: This version works if I lower the parameter YOLO_BLOCK_SIZE in \r\n                      DetectorActivitty.java from 32 to 16. The problem with this is that it gives me an \r\n                      inference time of 600MS and that negates the purpose of scaling down the model\r\n\r\nAll three of these model work well when used with darknet and were converted using darkflow in the exact same environment and commands. \r\n\r\nAs mentioned by  @UsamaIslam in #12649 , he fixed this issue by changing the MAX_RESULTS parameter when using fast rcnn with this example app. I tried doing the same, but it didn't work. I don't fully understand this exception so I need help understanding why this fails with **Trial 3** and not the other two trials. \r\n\r\nI would appreciate any suggestions on how I could make this work. \r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32966", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32966/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32966/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32966/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/32966", "id": 501135879, "node_id": "MDU6SXNzdWU1MDExMzU4Nzk=", "number": 32966, "title": "DepthwiseConv2D missing dilation_rate argument (& higher performance)", "user": {"login": "dajoke", "id": 54447024, "node_id": "MDQ6VXNlcjU0NDQ3MDI0", "avatar_url": "https://avatars2.githubusercontent.com/u/54447024?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dajoke", "html_url": "https://github.com/dajoke", "followers_url": "https://api.github.com/users/dajoke/followers", "following_url": "https://api.github.com/users/dajoke/following{/other_user}", "gists_url": "https://api.github.com/users/dajoke/gists{/gist_id}", "starred_url": "https://api.github.com/users/dajoke/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dajoke/subscriptions", "organizations_url": "https://api.github.com/users/dajoke/orgs", "repos_url": "https://api.github.com/users/dajoke/repos", "events_url": "https://api.github.com/users/dajoke/events{/privacy}", "received_events_url": "https://api.github.com/users/dajoke/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-10-01T20:44:32Z", "updated_at": "2019-11-15T02:03:06Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): (yes)\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): Windows 10\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary): ongoing, reference github source https://github.com/tensorflow/tensorflow/blob/r2.0/tensorflow/python/keras/layers/convolutional.py#L1686-L1877\r\n- TensorFlow version (use command below): TF2 rc\r\n- Python version: (3)\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\n\r\nConv, Conv2D, and backend.depthwise_conv2d support dilation_rate, but DepthwiseConv2D does not. \r\n\r\n**Describe the expected behavior**\r\n\r\nDepthwiseConv2D needs the dilation_rate argument. It is supported by underlying code and mentioned by the DepthwiseConv2D documentation, but is missing from DepthwiseConv2D. \r\n\r\n**Note that while the DepthwiseConv2D  as below works OK, performance of the forward inference code is significantly less than what it should be. DepthwiseConv2D with dilation is a very useful operation for full-resolution feature matching with a low operation count, so improving the execution code would be valuable.**\r\n\r\n**Other info / logs**\r\n\r\nProposed working revised version (sorry, not adept with github).\r\n\r\n\r\n```\r\n\r\n@keras_export('keras.layers.DepthwiseConv2D')\r\nclass DepthwiseConv2D(Conv2D):\r\n  \"\"\"Depthwise separable 2D convolution.\r\n  Depthwise Separable convolutions consists in performing\r\n  just the first step in a depthwise spatial convolution\r\n  (which acts on each input channel separately).\r\n  The `depth_multiplier` argument controls how many\r\n  output channels are generated per input channel in the depthwise step.\r\n  Arguments:\r\n    kernel_size: An integer or tuple/list of 2 integers, specifying the\r\n      height and width of the 2D convolution window.\r\n      Can be a single integer to specify the same value for\r\n      all spatial dimensions.\r\n    strides: An integer or tuple/list of 2 integers,\r\n      specifying the strides of the convolution along the height and width.\r\n      Can be a single integer to specify the same value for\r\n      all spatial dimensions.\r\n      Specifying any stride value != 1 is incompatible with specifying\r\n      any `dilation_rate` value != 1.\r\n    padding: one of `'valid'` or `'same'` (case-insensitive).\r\n    depth_multiplier: The number of depthwise convolution output channels\r\n      for each input channel.\r\n      The total number of depthwise convolution output\r\n      channels will be equal to `filters_in * depth_multiplier`.\r\n    data_format: A string,\r\n      one of `channels_last` (default) or `channels_first`.\r\n      The ordering of the dimensions in the inputs.\r\n      `channels_last` corresponds to inputs with shape\r\n      `(batch, height, width, channels)` while `channels_first`\r\n      corresponds to inputs with shape\r\n      `(batch, channels, height, width)`.\r\n      It defaults to the `image_data_format` value found in your\r\n      Keras config file at `~/.keras/keras.json`.\r\n      If you never set it, then it will be 'channels_last'.\r\n    dilation_rate: an integer or tuple/list of 2 integers, specifying\r\n      the dilation rate to use for dilated convolution.\r\n      Can be a single integer to specify the same value for\r\n      all spatial dimensions.\r\n      Currently, specifying any `dilation_rate` value != 1 is\r\n      incompatible with specifying any stride value != 1.\r\n    activation: Activation function to use.\r\n      If you don't specify anything, no activation is applied\r\n      (ie. 'linear' activation: `a(x) = x`).\r\n    use_bias: Boolean, whether the layer uses a bias vector.\r\n    depthwise_initializer: Initializer for the depthwise kernel matrix.\r\n    bias_initializer: Initializer for the bias vector.\r\n    depthwise_regularizer: Regularizer function applied to\r\n      the depthwise kernel matrix.\r\n    bias_regularizer: Regularizer function applied to the bias vector.\r\n    activity_regularizer: Regularizer function applied to\r\n      the output of the layer (its 'activation').\r\n    depthwise_constraint: Constraint function applied to\r\n      the depthwise kernel matrix.\r\n    bias_constraint: Constraint function applied to the bias vector.\r\n  Input shape:\r\n    4D tensor with shape:\r\n    `[batch, channels, rows, cols]` if data_format='channels_first'\r\n    or 4D tensor with shape:\r\n    `[batch, rows, cols, channels]` if data_format='channels_last'.\r\n  Output shape:\r\n    4D tensor with shape:\r\n    `[batch, filters, new_rows, new_cols]` if data_format='channels_first'\r\n    or 4D tensor with shape:\r\n    `[batch, new_rows, new_cols, filters]` if data_format='channels_last'.\r\n    `rows` and `cols` values might have changed due to padding.\r\n  \"\"\"\r\n\r\n  def __init__(self,\r\n               kernel_size,\r\n               strides=(1, 1),\r\n               padding='valid',\r\n               depth_multiplier=1,\r\n               data_format=None,\r\n               activation=None,\r\n               use_bias=True,\r\n               dilation_rate=(1,1),\r\n               depthwise_initializer='glorot_uniform',\r\n               bias_initializer='zeros',\r\n               depthwise_regularizer=None,\r\n               bias_regularizer=None,\r\n               activity_regularizer=None,\r\n               depthwise_constraint=None,\r\n               bias_constraint=None,\r\n               **kwargs):\r\n    super(DepthwiseConv2D, self).__init__(\r\n        filters=None,\r\n        kernel_size=kernel_size,\r\n        strides=strides,\r\n        padding=padding,\r\n        data_format=data_format,\r\n        dilation_rate=dilation_rate,\r\n        activation=activation,\r\n        use_bias=use_bias,\r\n        bias_regularizer=bias_regularizer,\r\n        activity_regularizer=activity_regularizer,\r\n        bias_constraint=bias_constraint,\r\n        **kwargs)\r\n    self.depth_multiplier = depth_multiplier\r\n    self.depthwise_initializer = initializers.get(depthwise_initializer)\r\n    self.depthwise_regularizer = regularizers.get(depthwise_regularizer)\r\n    self.depthwise_constraint = constraints.get(depthwise_constraint)\r\n    self.bias_initializer = initializers.get(bias_initializer)\r\n\r\n  def build(self, input_shape):\r\n    if len(input_shape) < 4:\r\n      raise ValueError('Inputs to `DepthwiseConv2D` should have rank 4. '\r\n                       'Received input shape:', str(input_shape))\r\n    input_shape = tensor_shape.TensorShape(input_shape)\r\n    if self.data_format == 'channels_first':\r\n      channel_axis = 1\r\n    else:\r\n      channel_axis = 3\r\n    if input_shape.dims[channel_axis].value is None:\r\n      raise ValueError('The channel dimension of the inputs to '\r\n                       '`DepthwiseConv2D` '\r\n                       'should be defined. Found `None`.')\r\n    input_dim = int(input_shape[channel_axis])\r\n    depthwise_kernel_shape = (self.kernel_size[0],\r\n                              self.kernel_size[1],\r\n                              input_dim,\r\n                              self.depth_multiplier)\r\n\r\n    self.depthwise_kernel = self.add_weight(\r\n        shape=depthwise_kernel_shape,\r\n        initializer=self.depthwise_initializer,\r\n        name='depthwise_kernel',\r\n        regularizer=self.depthwise_regularizer,\r\n        constraint=self.depthwise_constraint)\r\n\r\n    if self.use_bias:\r\n      self.bias = self.add_weight(shape=(input_dim * self.depth_multiplier,),\r\n                                  initializer=self.bias_initializer,\r\n                                  name='bias',\r\n                                  regularizer=self.bias_regularizer,\r\n                                  constraint=self.bias_constraint)\r\n    else:\r\n      self.bias = None\r\n    # Set input spec.\r\n    self.input_spec = InputSpec(ndim=4, axes={channel_axis: input_dim})\r\n    self.built = True\r\n\r\n  def call(self, inputs):\r\n    outputs = backend.depthwise_conv2d(\r\n        inputs,\r\n        self.depthwise_kernel,\r\n        strides=self.strides,\r\n        padding=self.padding,\r\n        dilation_rate=self.dilation_rate,\r\n        data_format=self.data_format)\r\n\r\n    if self.use_bias:\r\n      outputs = backend.bias_add(\r\n          outputs,\r\n          self.bias,\r\n          data_format=self.data_format)\r\n\r\n    if self.activation is not None:\r\n      return self.activation(outputs)\r\n\r\n    return outputs\r\n\r\n  @tf_utils.shape_type_conversion\r\n  def compute_output_shape(self, input_shape):\r\n    if self.data_format == 'channels_first':\r\n      rows = input_shape[2]\r\n      cols = input_shape[3]\r\n      out_filters = input_shape[1] * self.depth_multiplier\r\n    elif self.data_format == 'channels_last':\r\n      rows = input_shape[1]\r\n      cols = input_shape[2]\r\n      out_filters = input_shape[3] * self.depth_multiplier\r\n\r\n    rows = conv_utils.conv_output_length(rows, self.kernel_size[0],\r\n                                         padding=self.padding,\r\n                                         stride=self.strides[0],\r\n                                         dilation=self.dilation_rate[0])\r\n    cols = conv_utils.conv_output_length(cols, self.kernel_size[1],\r\n                                         padding=self.padding,\r\n                                         stride=self.strides[1],\r\n                                         dilation=self.dilation_rate[1])\r\n    if self.data_format == 'channels_first':\r\n      return (input_shape[0], out_filters, rows, cols)\r\n    elif self.data_format == 'channels_last':\r\n      return (input_shape[0], rows, cols, out_filters)\r\n\r\n  def get_config(self):\r\n    config = super(DepthwiseConv2D, self).get_config()\r\n    config.pop('filters')\r\n    config.pop('kernel_initializer')\r\n    config.pop('kernel_regularizer')\r\n    config.pop('kernel_constraint')\r\n    config['depth_multiplier'] = self.depth_multiplier\r\n    config['depthwise_initializer'] = initializers.serialize(\r\n        self.depthwise_initializer)\r\n    config['depthwise_regularizer'] = regularizers.serialize(\r\n        self.depthwise_regularizer)\r\n    config['depthwise_constraint'] = constraints.serialize(\r\n        self.depthwise_constraint)\r\n    return config\r\n\r\n\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32964", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32964/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32964/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32964/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/32964", "id": 501102716, "node_id": "MDU6SXNzdWU1MDExMDI3MTY=", "number": 32964, "title": "Automatic gradient for numpy functions/external functions", "user": {"login": "zhulingchen", "id": 2105740, "node_id": "MDQ6VXNlcjIxMDU3NDA=", "avatar_url": "https://avatars0.githubusercontent.com/u/2105740?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zhulingchen", "html_url": "https://github.com/zhulingchen", "followers_url": "https://api.github.com/users/zhulingchen/followers", "following_url": "https://api.github.com/users/zhulingchen/following{/other_user}", "gists_url": "https://api.github.com/users/zhulingchen/gists{/gist_id}", "starred_url": "https://api.github.com/users/zhulingchen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zhulingchen/subscriptions", "organizations_url": "https://api.github.com/users/zhulingchen/orgs", "repos_url": "https://api.github.com/users/zhulingchen/repos", "events_url": "https://api.github.com/users/zhulingchen/events{/privacy}", "received_events_url": "https://api.github.com/users/zhulingchen/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "jvishnuvardhan", "id": 46058173, "node_id": "MDQ6VXNlcjQ2MDU4MTcz", "avatar_url": "https://avatars2.githubusercontent.com/u/46058173?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jvishnuvardhan", "html_url": "https://github.com/jvishnuvardhan", "followers_url": "https://api.github.com/users/jvishnuvardhan/followers", "following_url": "https://api.github.com/users/jvishnuvardhan/following{/other_user}", "gists_url": "https://api.github.com/users/jvishnuvardhan/gists{/gist_id}", "starred_url": "https://api.github.com/users/jvishnuvardhan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jvishnuvardhan/subscriptions", "organizations_url": "https://api.github.com/users/jvishnuvardhan/orgs", "repos_url": "https://api.github.com/users/jvishnuvardhan/repos", "events_url": "https://api.github.com/users/jvishnuvardhan/events{/privacy}", "received_events_url": "https://api.github.com/users/jvishnuvardhan/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-10-01T19:36:12Z", "updated_at": "2019-10-03T22:25:02Z", "closed_at": null, "author_association": "NONE", "body": "I am thinking of the following scenarios and want to see if TensorFlow could do Automatic Differentiation for them:\r\n\r\n1. There would be a numpy function that accepts numpy array(s) as input(s) and numpy array(s) as output(s);\r\n\r\n2. There would be an external executable that accepts numpy array(s) as input(s) and numpy array(s) as output(s).\r\n\r\nI know TensorFlow has `tf.numpy_function` (with the v2 context, and equivalently, it was `tf.py_func` in the v1 context) can \"convert\" a numpy function to a tensor function and inject it into the graph but unfortunately it cannot support Automatic Differentiation; also, `tf.py_function` must accept a tensor function and tensor inputs to inject the function into the graph and fortunately it can support Automatic Differentiation. I cannot think of a way to inject an external executable to be part of the graph and possibly get its differentiation.\r\n\r\nIf there is no way to achieve scenario 1 and/or 2, is there any workaround?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32963", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32963/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32963/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32963/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/32963", "id": 501085638, "node_id": "MDU6SXNzdWU1MDEwODU2Mzg=", "number": 32963, "title": "tf.io.gfile.mkdir restricts directory mode/(permissions)", "user": {"login": "eirism", "id": 1268471, "node_id": "MDQ6VXNlcjEyNjg0NzE=", "avatar_url": "https://avatars2.githubusercontent.com/u/1268471?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eirism", "html_url": "https://github.com/eirism", "followers_url": "https://api.github.com/users/eirism/followers", "following_url": "https://api.github.com/users/eirism/following{/other_user}", "gists_url": "https://api.github.com/users/eirism/gists{/gist_id}", "starred_url": "https://api.github.com/users/eirism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eirism/subscriptions", "organizations_url": "https://api.github.com/users/eirism/orgs", "repos_url": "https://api.github.com/users/eirism/repos", "events_url": "https://api.github.com/users/eirism/events{/privacy}", "received_events_url": "https://api.github.com/users/eirism/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 1097547147, "node_id": "MDU6TGFiZWwxMDk3NTQ3MTQ3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:ops", "name": "comp:ops", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-10-01T19:00:38Z", "updated_at": "2019-10-13T18:55:22Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n\r\n-  Have I written custom code: Yes\r\n- OS Platform and Distribution: Linux Ubuntu 18.04\r\n- TensorFlow installed from: binary\r\n- TensorFlow version: v1.14.0-rc1-22-gaf24dc9 1.14.0\r\n- Python version: 3.6\r\n\r\n**Describe the current behavior**\r\nDirectories created with `tf.io.gfile.mkdir()` on Linux does not have the w mode bit set for group and other even if allowed by the umask and ACL.\r\n\r\n**Describe the expected behavior**\r\nDirectories created with `tf.io.gfile.mkdir` should have the maximum permissions allowed by the umask and ACL, which is the way `os.mkdir()` in Python works.\r\nI think this behavior is caused by the fact that [TF always calls mkdir with mode 0755](https://github.com/tensorflow/tensorflow/blob/r1.14/tensorflow/core/platform/posix/posix_file_system.cc#L281) while  [Python calls mkdir with mode 511 (= 777 in octal)](https://github.com/python/cpython/blob/3.7/Modules/clinic/posixmodule.c.h#L1094) if no mode is given .\r\n\r\n**Code to reproduce the issue**\r\n\r\n```\r\nimport tensorflow as tf\r\nimport stat\r\nimport os\r\n\r\nos.umask(0000)\r\n\r\ntf_dir = \"test1\"\r\nos_dir = \"test2\"\r\n\r\ntf.io.gfile.mkdir(tf_dir)\r\ntf_mode = os.stat(tf_dir).st_mode\r\n\r\nos.mkdir(os_dir)\r\nos_mode = os.stat(os_dir).st_mode\r\n\r\nif (tf_mode != os_mode):\r\n    print(\"File mode differs:\")\r\n    print(\"TF: {}, OS: {}\".format(stat.filemode(tf_mode), stat.filemode(os_mode)))\r\n\r\n```"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32957", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32957/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32957/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32957/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/32957", "id": 501041230, "node_id": "MDU6SXNzdWU1MDEwNDEyMzA=", "number": 32957, "title": "Unability to reach some modules (feature_column and data) with previous working code", "user": {"login": "durandg12", "id": 45902885, "node_id": "MDQ6VXNlcjQ1OTAyODg1", "avatar_url": "https://avatars0.githubusercontent.com/u/45902885?v=4", "gravatar_id": "", "url": "https://api.github.com/users/durandg12", "html_url": "https://github.com/durandg12", "followers_url": "https://api.github.com/users/durandg12/followers", "following_url": "https://api.github.com/users/durandg12/following{/other_user}", "gists_url": "https://api.github.com/users/durandg12/gists{/gist_id}", "starred_url": "https://api.github.com/users/durandg12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/durandg12/subscriptions", "organizations_url": "https://api.github.com/users/durandg12/orgs", "repos_url": "https://api.github.com/users/durandg12/repos", "events_url": "https://api.github.com/users/durandg12/events{/privacy}", "received_events_url": "https://api.github.com/users/durandg12/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "mihaimaruseac", "id": 323199, "node_id": "MDQ6VXNlcjMyMzE5OQ==", "avatar_url": "https://avatars0.githubusercontent.com/u/323199?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mihaimaruseac", "html_url": "https://github.com/mihaimaruseac", "followers_url": "https://api.github.com/users/mihaimaruseac/followers", "following_url": "https://api.github.com/users/mihaimaruseac/following{/other_user}", "gists_url": "https://api.github.com/users/mihaimaruseac/gists{/gist_id}", "starred_url": "https://api.github.com/users/mihaimaruseac/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mihaimaruseac/subscriptions", "organizations_url": "https://api.github.com/users/mihaimaruseac/orgs", "repos_url": "https://api.github.com/users/mihaimaruseac/repos", "events_url": "https://api.github.com/users/mihaimaruseac/events{/privacy}", "received_events_url": "https://api.github.com/users/mihaimaruseac/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 9, "created_at": "2019-10-01T17:33:09Z", "updated_at": "2019-12-13T22:33:20Z", "closed_at": null, "author_association": "NONE", "body": "- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): no\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): macOS 10.13.6\r\n- TensorFlow installed from (source or binary): pip install tensorflow==2.0.0-beta1\r\n- TensorFlow version (use command below): v2.0.0-rc2-26-g64c3d382ca 2.0.0\r\n- Python version: v3.6.7:6ec5cf24b7, Oct 20 2018, 03:02:14\r\n\r\n**Describe the current behavior**\r\n\r\n`from tensorflow.feature_column import numeric_column`and `from tensorflow.data import Dataset` raise `ModuleNotFoundError: No module named 'tensorflow.feature_column'`and `ModuleNotFoundError: No module named 'tensorflow.data'`.\r\n\r\n The workaround `from tensorflow.python.data import Dataset` works but `from tensorflow.python.feature_column import numeric_column` fails and raises `ImportError: cannot import name 'numeric_column'`. To import `numeric_column` (or other functions of the module) I have found this workaround: `from tensorflow.compat.v2.feature_column import numeric_column`.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32950", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32950/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32950/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32950/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/32950", "id": 500868216, "node_id": "MDU6SXNzdWU1MDA4NjgyMTY=", "number": 32950, "title": "Tensorflow 2.0 AdaDelta Optimizer", "user": {"login": "vivekvekariya", "id": 38262106, "node_id": "MDQ6VXNlcjM4MjYyMTA2", "avatar_url": "https://avatars3.githubusercontent.com/u/38262106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vivekvekariya", "html_url": "https://github.com/vivekvekariya", "followers_url": "https://api.github.com/users/vivekvekariya/followers", "following_url": "https://api.github.com/users/vivekvekariya/following{/other_user}", "gists_url": "https://api.github.com/users/vivekvekariya/gists{/gist_id}", "starred_url": "https://api.github.com/users/vivekvekariya/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vivekvekariya/subscriptions", "organizations_url": "https://api.github.com/users/vivekvekariya/orgs", "repos_url": "https://api.github.com/users/vivekvekariya/repos", "events_url": "https://api.github.com/users/vivekvekariya/events{/privacy}", "received_events_url": "https://api.github.com/users/vivekvekariya/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 15, "created_at": "2019-10-01T12:39:06Z", "updated_at": "2019-10-22T00:36:31Z", "closed_at": null, "author_association": "NONE", "body": "Please go to Stack Overflow for help and support:\r\n\r\nhttps://stackoverflow.com/questions/tagged/tensorflow\r\n\r\nIf you open a GitHub issue, here is our policy:\r\n\r\n1. It must be a bug, a feature request, or a significant problem with documentation (for small docs fixes please send a PR instead).\r\n2. The form below must be filled out.\r\n3. It shouldn't be a TensorBoard issue. Those go [here](https://github.com/tensorflow/tensorboard/issues).\r\n\r\n**Here's why we have that policy**: TensorFlow developers respond to issues. We want to focus on work that benefits the whole community, e.g., fixing bugs and adding features. Support only helps individuals. GitHub also notifies thousands of people when issues are filed. We want them to see you communicating an interesting problem, rather than being redirected to Stack Overflow.\r\n\r\n------------------------\r\n\r\n### System information\r\n- **Have I written custom code (as opposed to using a stock example script provided in TensorFlow)**:\r\n- **OS Platform and Distribution (e.g., Linux Ubuntu 16.04)**:\r\n- **Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device**:\r\n- **TensorFlow installed from (source or binary)**:\r\n- **TensorFlow version (use command below)**:\r\n- **Python version**:\r\n- **Bazel version (if compiling from source)**:\r\n- **GCC/Compiler version (if compiling from source)**:\r\n- **CUDA/cuDNN version**:\r\n- **GPU model and memory**:\r\n- **Exact command to reproduce**:\r\n\r\nYou can collect some of this information using our environment capture script:\r\n\r\nhttps://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh\r\n\r\nYou can obtain the TensorFlow version with:\r\n\r\n```bash\r\npython -c \"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"\r\n```\r\n\r\n### Describe the problem\r\nDescribe the problem clearly here. Be sure to convey here why it's a bug in TensorFlow or a feature request.\r\n\r\n### Source code / logs\r\nInclude any logs or source code that would be helpful to diagnose the problem. If including tracebacks, please include the full traceback. Large logs and files should be attached. Try to provide a reproducible test case that is the bare minimum necessary to generate the problem.\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32948", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32948/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32948/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32948/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/32948", "id": 500861466, "node_id": "MDU6SXNzdWU1MDA4NjE0NjY=", "number": 32948, "title": "tf2.0 model issue on conv3D with activation relu", "user": {"login": "tiru1930", "id": 12211287, "node_id": "MDQ6VXNlcjEyMjExMjg3", "avatar_url": "https://avatars2.githubusercontent.com/u/12211287?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tiru1930", "html_url": "https://github.com/tiru1930", "followers_url": "https://api.github.com/users/tiru1930/followers", "following_url": "https://api.github.com/users/tiru1930/following{/other_user}", "gists_url": "https://api.github.com/users/tiru1930/gists{/gist_id}", "starred_url": "https://api.github.com/users/tiru1930/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tiru1930/subscriptions", "organizations_url": "https://api.github.com/users/tiru1930/orgs", "repos_url": "https://api.github.com/users/tiru1930/repos", "events_url": "https://api.github.com/users/tiru1930/events{/privacy}", "received_events_url": "https://api.github.com/users/tiru1930/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "tanzhenyu", "id": 15220929, "node_id": "MDQ6VXNlcjE1MjIwOTI5", "avatar_url": "https://avatars3.githubusercontent.com/u/15220929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tanzhenyu", "html_url": "https://github.com/tanzhenyu", "followers_url": "https://api.github.com/users/tanzhenyu/followers", "following_url": "https://api.github.com/users/tanzhenyu/following{/other_user}", "gists_url": "https://api.github.com/users/tanzhenyu/gists{/gist_id}", "starred_url": "https://api.github.com/users/tanzhenyu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tanzhenyu/subscriptions", "organizations_url": "https://api.github.com/users/tanzhenyu/orgs", "repos_url": "https://api.github.com/users/tanzhenyu/repos", "events_url": "https://api.github.com/users/tanzhenyu/events{/privacy}", "received_events_url": "https://api.github.com/users/tanzhenyu/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 4, "created_at": "2019-10-01T12:26:08Z", "updated_at": "2019-10-18T06:57:45Z", "closed_at": null, "author_association": "NONE", "body": "== tensorflow installed from info ==================\r\nName: tensorflow\r\nVersion: 2.0.0\r\nSummary: TensorFlow is an open source machine learning framework for everyone.\r\nHome-page: https://www.tensorflow.org/\r\nAuthor-email: packages@tensorflow.org\r\nLicense: Apache 2.0\r\nLocation: /home/tbaggu/Desktop/pose-anomaly-detection/env/lib/python3.6/site-packages\r\nRequired-by:\r\n`class C3Dmodel(Model):\r\n  \r\n    def __init__(self):\r\n        super(C3Dmodel, self).__init__()\r\n        self.conv1 = tf.keras.layers.Conv3D(filters=64,kernel_size=3,padding='SAME',activation=tf.keras.layers.ReLU)\r\n        self.conv2 = tf.keras.layers.Conv3D(filters=128,kernel_size=3,padding='SAME',activation=tf.keras.layers.ReLU)\r\n        self.conv3 = tf.keras.layers.Conv3D(filters=256,kernel_size=3,padding='SAME',activation=tf.keras.layers.ReLU)\r\n        self.conv4 = tf.keras.layers.Conv3D(filters=512,kernel_size=3,padding='SAME',activation=tf.keras.layers.ReLU)\r\n        self.pool1 = tf.keras.layers.MaxPool3D(pool_size=(1,2,2),strides=(1,2,2),padding='SAME')\r\n        self.pool2 = tf.keras.layers.MaxPool3D(pool_size=2,strides=2,padding='SAME')\r\n        self.fc1   = tf.keras.layers.Dense(4096,activation=tf.keras.layers.ReLU)\r\n        self.fc2   = tf.keras.layers.Dense(512,activation=tf.keras.layers.ReLU)\r\n        self.fc3   = tf.keras.layers.Dense(32,activation=tf.keras.layers.ReLU)\r\n        self.fc4   = tf.keras.layers.Dense(1)\r\n        self.dropout = tf.keras.layers.Dropout(0.5)\r\n        self.flatten = tf.keras.layers.Flatten()\r\n\r\n    def call(self,x):\r\n        x = self.conv1(x)\r\n        x = self.pool1(x)\r\n        x = self.conv2(x)\r\n        x = self.pool2(x)\r\n        x = self.conv3(x)\r\n        x = self.conv3(x)\r\n        x = self.pool2(x)\r\n        x = self.conv4(x)\r\n        x = self.conv4(x)\r\n        x = self.pool2(x)\r\n        x = tf.pad(x, [[0, 0], [1, 1], [1, 1], [1, 1], [0, 0]])\r\n        x = self.conv4(x)\r\n        x = tf.pad(x, [[0, 0], [1, 1], [1, 1], [1, 1], [0, 0]])\r\n        x = self.conv4(x)\r\n        x = self.pool2(x)\r\n\r\n        x = self.flatten(x)\r\n        x = self.fc1(x)\r\n        x = self.dropout(x)\r\n        x = self.fc2(x)\r\n        x = self.dropout(x)\r\n        x = self.fc3(x)\r\n        x = self.dropout(x)\r\n        return self.fc4(x)\r\n`\r\n\r\nInput shape : (2, 16, 240, 320, 3)\r\n\r\nError:\r\n`Traceback (most recent call last):\r\n  File \"train.py\", line 45, in <module>\r\n    main()\r\n  File \"train.py\", line 43, in main\r\n    tN.train()\r\n  File \"train.py\", line 39, in train\r\n    print(self.model(batch))\r\n  File \"#HOME/env/lib/python3.6/site-packages/tensorflow_core/python/keras/engine/base_layer.py\", line 891, in __call__\r\n    outputs = self.call(cast_inputs, *args, **kwargs)\r\n  File \"#HOME/src/model.py\", line 68, in call\r\n    x = self.conv1(x)\r\n  File \"#HOME/env/lib/python3.6/site-packages/tensorflow_core/python/keras/engine/base_layer.py\", line 891, in __call__\r\n    outputs = self.call(cast_inputs, *args, **kwargs)\r\n  File \"#HOME/env/lib/python3.6/site-packages/tensorflow_core/python/keras/layers/convolutional.py\", line 211, in call\r\n    return self.activation(outputs)\r\n  File \"#HOME/env/lib/python3.6/site-packages/tensorflow_core/python/keras/layers/advanced_activations.py\", line 299, in __init__\r\n    if max_value is not None and max_value < 0.:\r\n  File \"#HOME/env/lib/python3.6/site-packages/tensorflow_core/python/framework/ops.py\", line 876, in __bool__\r\n    return bool(self._numpy())\r\nValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()`\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32946", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32946/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32946/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32946/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/32946", "id": 500763038, "node_id": "MDU6SXNzdWU1MDA3NjMwMzg=", "number": 32946, "title": "Error converting .pb model to .tflite", "user": {"login": "mohitranawat", "id": 42750651, "node_id": "MDQ6VXNlcjQyNzUwNjUx", "avatar_url": "https://avatars1.githubusercontent.com/u/42750651?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mohitranawat", "html_url": "https://github.com/mohitranawat", "followers_url": "https://api.github.com/users/mohitranawat/followers", "following_url": "https://api.github.com/users/mohitranawat/following{/other_user}", "gists_url": "https://api.github.com/users/mohitranawat/gists{/gist_id}", "starred_url": "https://api.github.com/users/mohitranawat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mohitranawat/subscriptions", "organizations_url": "https://api.github.com/users/mohitranawat/orgs", "repos_url": "https://api.github.com/users/mohitranawat/repos", "events_url": "https://api.github.com/users/mohitranawat/events{/privacy}", "received_events_url": "https://api.github.com/users/mohitranawat/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1161789751, "node_id": "MDU6TGFiZWwxMTYxNzg5NzUx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.13", "name": "TF 1.13", "color": "7dedc4", "default": false, "description": "Issues related to TF 1.13"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 5, "created_at": "2019-10-01T09:08:23Z", "updated_at": "2019-10-10T04:08:51Z", "closed_at": null, "author_association": "NONE", "body": "System information\r\n- OS Platform and Distribution : Windows 10 64-bit\r\n- TensorFlow installed from (source or binary): Binary\r\n-TensorFlow Version - 1.13.1\r\n-Onnx Version - 1.6.0\r\n\r\nI have pytorch model and I have to deploy it into android, so I saved the model in onnx and then converted the model in .pb\r\nBut not able to convert the model in tensorflowlite.\r\n\r\n\r\n` import tensorflow as tf\r\n\r\ngraph_def_file = \"tensorf.pb\"\r\ninput_arrays = ['Const']\r\noutput_arrays = ['concat_98']\r\n\r\nconverter = tf.lite.TFLiteConverter.from_frozen_graph(graph_def_file, input_arrays, output_arrays)\r\ntflite_model = converter.convert()\r\nopen(\"tensorf_lite.tflite\", \"wb\").write(tflite_model) `\r\n\r\nError log -\r\n\r\n`Traceback (most recent call last): File \"tfliteconvertor.py\", line 8, in <module> tflite_model = converter.convert() File \"C:\\Program Files\\Python37\\lib\\site-packages\\tensorflow\\lite\\python\\lite.py\", line 455, in convert **converter_kwargs) File \"C:\\Program Files\\Python37\\lib\\site-packages\\tensorflow\\lite\\python\\convert.py\", line 442, in toco_convert_impl input_data.SerializeToString()) File \"C:\\Program Files\\Python37\\lib\\site-packages\\tensorflow\\lite\\python\\convert.py\", line 205, in toco_convert_protos \"TOCO failed. See console for info.\\n%s\\n%s\\n\" % (stdout, stderr)) tensorflow.lite.python.convert.ConverterError: TOCO failed. See console for info. 2019-10-01 12:18:57.243087: I tensorflow/lite/toco/import_tensorflow.cc:1324] Converting unsupported operation: PyFunc 2019-10-01 12:18:57.243738: E tensorflow/core/framework/op_kernel.cc:1325] OpKernel ('op: \"WrapDatasetVariant\" device_type: \"CPU\"') for unknown op: WrapDatasetVariant 2019-10-01 12:18:57.244227: E tensorflow/core/framework/op_kernel.cc:1325] OpKernel ('op: \"WrapDatasetVariant\" device_type: \"GPU\" host_memory_arg: \"input_handle\" host_memory_arg: \"output_handle\"') for unknown op: WrapDatasetVariant 2019-10-01 12:18:57.244653: E tensorflow/core/framework/op_kernel.cc:1325] OpKernel ('op: \"UnwrapDatasetVariant\" device_type: \"CPU\"') for unknown op: UnwrapDatasetVariant 2019-10-01 12:18:57.245022: E tensorflow/core/framework/op_kernel.cc:1325] OpKernel ('op: \"UnwrapDatasetVariant\" device_type: \"GPU\" host_memory_arg: \"input_handle\" host_memory_arg: \"output_handle\"') for unknown op: UnwrapDatasetVariant 2019-10-01 12:18:57.245590: F tensorflow/lite/toco/import_tensorflow.cc:114] Check failed: attr.value_case() == AttrValue::kType (1 vs. 6)`\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32943", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32943/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32943/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32943/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/32943", "id": 500727075, "node_id": "MDU6SXNzdWU1MDA3MjcwNzU=", "number": 32943, "title": "TensorFlow 2.x Java/Maven release", "user": {"login": "maziyarpanahi", "id": 5762953, "node_id": "MDQ6VXNlcjU3NjI5NTM=", "avatar_url": "https://avatars3.githubusercontent.com/u/5762953?v=4", "gravatar_id": "", "url": "https://api.github.com/users/maziyarpanahi", "html_url": "https://github.com/maziyarpanahi", "followers_url": "https://api.github.com/users/maziyarpanahi/followers", "following_url": "https://api.github.com/users/maziyarpanahi/following{/other_user}", "gists_url": "https://api.github.com/users/maziyarpanahi/gists{/gist_id}", "starred_url": "https://api.github.com/users/maziyarpanahi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/maziyarpanahi/subscriptions", "organizations_url": "https://api.github.com/users/maziyarpanahi/orgs", "repos_url": "https://api.github.com/users/maziyarpanahi/repos", "events_url": "https://api.github.com/users/maziyarpanahi/events{/privacy}", "received_events_url": "https://api.github.com/users/maziyarpanahi/received_events", "type": "User", "site_admin": false}, "labels": [], "state": "open", "locked": false, "assignee": {"login": "sjamesr", "id": 4641539, "node_id": "MDQ6VXNlcjQ2NDE1Mzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/4641539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjamesr", "html_url": "https://github.com/sjamesr", "followers_url": "https://api.github.com/users/sjamesr/followers", "following_url": "https://api.github.com/users/sjamesr/following{/other_user}", "gists_url": "https://api.github.com/users/sjamesr/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjamesr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjamesr/subscriptions", "organizations_url": "https://api.github.com/users/sjamesr/orgs", "repos_url": "https://api.github.com/users/sjamesr/repos", "events_url": "https://api.github.com/users/sjamesr/events{/privacy}", "received_events_url": "https://api.github.com/users/sjamesr/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "sjamesr", "id": 4641539, "node_id": "MDQ6VXNlcjQ2NDE1Mzk=", "avatar_url": "https://avatars0.githubusercontent.com/u/4641539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sjamesr", "html_url": "https://github.com/sjamesr", "followers_url": "https://api.github.com/users/sjamesr/followers", "following_url": "https://api.github.com/users/sjamesr/following{/other_user}", "gists_url": "https://api.github.com/users/sjamesr/gists{/gist_id}", "starred_url": "https://api.github.com/users/sjamesr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sjamesr/subscriptions", "organizations_url": "https://api.github.com/users/sjamesr/orgs", "repos_url": "https://api.github.com/users/sjamesr/repos", "events_url": "https://api.github.com/users/sjamesr/events{/privacy}", "received_events_url": "https://api.github.com/users/sjamesr/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 7, "created_at": "2019-10-01T07:56:39Z", "updated_at": "2020-03-01T23:58:20Z", "closed_at": null, "author_association": "NONE", "body": "Hello,\r\n\r\nOur library really depends on `libtensorflow` and `libtensorflow_jni_gpu` releases on Maven, is there any ETA for releasing TensorFlow 2.0 on Maven? The latest release is `1.14.0` now.\r\n\r\nMany thanks"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32940", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32940/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32940/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32940/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/32940", "id": 500686886, "node_id": "MDU6SXNzdWU1MDA2ODY4ODY=", "number": 32940, "title": "My ground_truth.pbtxt and images folder of Preprocessing the minival dataset code are empty!", "user": {"login": "Davari393", "id": 46137886, "node_id": "MDQ6VXNlcjQ2MTM3ODg2", "avatar_url": "https://avatars0.githubusercontent.com/u/46137886?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Davari393", "html_url": "https://github.com/Davari393", "followers_url": "https://api.github.com/users/Davari393/followers", "following_url": "https://api.github.com/users/Davari393/following{/other_user}", "gists_url": "https://api.github.com/users/Davari393/gists{/gist_id}", "starred_url": "https://api.github.com/users/Davari393/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Davari393/subscriptions", "organizations_url": "https://api.github.com/users/Davari393/orgs", "repos_url": "https://api.github.com/users/Davari393/repos", "events_url": "https://api.github.com/users/Davari393/events{/privacy}", "received_events_url": "https://api.github.com/users/Davari393/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1548890241, "node_id": "MDU6TGFiZWwxNTQ4ODkwMjQx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.15", "name": "TF 1.15", "color": "e99695", "default": false, "description": "for issues seen on TF 1.15"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-10-01T06:15:26Z", "updated_at": "2019-10-03T06:20:31Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):No\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):Ubuntu 18.04\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device:\r\n- TensorFlow installed from (source or binary):Source\r\n- TensorFlow version (use command below):1.15\r\n- Python version:3.6\r\n- Bazel version (if compiling from source):0.26.1\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:No\r\n- GPU model and memory:\r\n\r\n\r\n\r\nwhen I run this command I get images folder and ground_truth.pbtxt empty:\r\nbazel run //tensorflow/lite/tools/evaluation/tasks/coco_object_detection:preprocess_coco_minival -- \\\r\n  --images_folder=/path/to/val2014 \\\r\n  --instances_file=/path/to/instances_val2014.json \\\r\n  --whitelist_file=/path/to/minival_whitelist.txt \\\r\n  --output_folder=/path/to/output/folder\r\n\r\n\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32939", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32939/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32939/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32939/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/32939", "id": 500644658, "node_id": "MDU6SXNzdWU1MDA2NDQ2NTg=", "number": 32939, "title": "Quantize training flow in TF 2.0", "user": {"login": "brucechou1983", "id": 8468820, "node_id": "MDQ6VXNlcjg0Njg4MjA=", "avatar_url": "https://avatars3.githubusercontent.com/u/8468820?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brucechou1983", "html_url": "https://github.com/brucechou1983", "followers_url": "https://api.github.com/users/brucechou1983/followers", "following_url": "https://api.github.com/users/brucechou1983/following{/other_user}", "gists_url": "https://api.github.com/users/brucechou1983/gists{/gist_id}", "starred_url": "https://api.github.com/users/brucechou1983/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brucechou1983/subscriptions", "organizations_url": "https://api.github.com/users/brucechou1983/orgs", "repos_url": "https://api.github.com/users/brucechou1983/repos", "events_url": "https://api.github.com/users/brucechou1983/events{/privacy}", "received_events_url": "https://api.github.com/users/brucechou1983/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-10-01T03:57:17Z", "updated_at": "2019-11-02T16:54:59Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using):2.0.0\r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n**Describe the feature and the current behavior/state.**\r\nIn TF 1.x I use quantize training flow to create fixed point models that run faster on edge devices without GPU. I certainly want that be available in TF 2.0.\r\n\r\n**Will this change the current api? How?**\r\nIt shouldn't.\r\n\r\n**Who will benefit with this feature?**\r\nIoT & mobile AI practitioners.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32938", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32938/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32938/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32938/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/32938", "id": 500639575, "node_id": "MDU6SXNzdWU1MDA2Mzk1NzU=", "number": 32938, "title": "Documentation for streaming training data from disk.", "user": {"login": "invencode", "id": 44388470, "node_id": "MDQ6VXNlcjQ0Mzg4NDcw", "avatar_url": "https://avatars0.githubusercontent.com/u/44388470?v=4", "gravatar_id": "", "url": "https://api.github.com/users/invencode", "html_url": "https://github.com/invencode", "followers_url": "https://api.github.com/users/invencode/followers", "following_url": "https://api.github.com/users/invencode/following{/other_user}", "gists_url": "https://api.github.com/users/invencode/gists{/gist_id}", "starred_url": "https://api.github.com/users/invencode/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/invencode/subscriptions", "organizations_url": "https://api.github.com/users/invencode/orgs", "repos_url": "https://api.github.com/users/invencode/repos", "events_url": "https://api.github.com/users/invencode/events{/privacy}", "received_events_url": "https://api.github.com/users/invencode/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 284443156, "node_id": "MDU6TGFiZWwyODQ0NDMxNTY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:docs", "name": "type:docs", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "MarkDaoust", "id": 1414837, "node_id": "MDQ6VXNlcjE0MTQ4Mzc=", "avatar_url": "https://avatars1.githubusercontent.com/u/1414837?v=4", "gravatar_id": "", "url": "https://api.github.com/users/MarkDaoust", "html_url": "https://github.com/MarkDaoust", "followers_url": "https://api.github.com/users/MarkDaoust/followers", "following_url": "https://api.github.com/users/MarkDaoust/following{/other_user}", "gists_url": "https://api.github.com/users/MarkDaoust/gists{/gist_id}", "starred_url": "https://api.github.com/users/MarkDaoust/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/MarkDaoust/subscriptions", "organizations_url": "https://api.github.com/users/MarkDaoust/orgs", "repos_url": "https://api.github.com/users/MarkDaoust/repos", "events_url": "https://api.github.com/users/MarkDaoust/events{/privacy}", "received_events_url": "https://api.github.com/users/MarkDaoust/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-10-01T03:35:33Z", "updated_at": "2019-10-02T17:57:19Z", "closed_at": null, "author_association": "NONE", "body": "I think we need more detailed description and example for streaming training data from disk on\r\nhttps://www.tensorflow.org/guide/data#basic_mechanics.\r\n\r\nIt is mentioned on other documents, but no how-tos. It would be helpful if we add how to implement streaming data from disk and improvements on TF2.0, if any.\r\n\r\n> When iterating over training data that fits in memory, feel free to use regular Python iteration. Otherwise, tf.data.Dataset is the best way to stream training data from disk. https://www.tensorflow.org/guide/effective_tf2\r\n\r\n> For large datasets (> 1 GB), this can waste memory and run into byte limits of graph serialization. If tensors contains one or more large NumPy arrays, consider the alternative described in this guide.\r\nhttps://www.tensorflow.org/api_docs/python/tf/data/Dataset#from_tensor_slices\r\n** The link to \"this guide\" is broken.\r\n\r\n\r\n> The tf.data API supports a variety of file formats so that you can process large datasets that do not fit in memory. For example, the TFRecord file format is a simple record-oriented binary format that many TensorFlow applications use for training data. The tf.data.TFRecordDataset class enables you to stream over the contents of one or more TFRecord files as part of an input pipeline.\r\nhttps://www.tensorflow.org/guide/data#consuming_tfrecord_data\r\n\r\nAlso, it would be helpful if we make it clear...\r\n- If the tf.data.TFRecordDataset is the only class that supports streaming.\r\n- If the TFRecord is the only file format that supports streaming.\r\n- If the user needs to convert their dataset to TFRecord format.\r\n- If the trained model can be used with TFLite. \r\n- etc..."}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32932", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32932/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32932/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32932/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/32932", "id": 500519855, "node_id": "MDU6SXNzdWU1MDA1MTk4NTU=", "number": 32932, "title": "BatchMatMul for TFLite", "user": {"login": "TimCapes", "id": 1132145, "node_id": "MDQ6VXNlcjExMzIxNDU=", "avatar_url": "https://avatars3.githubusercontent.com/u/1132145?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TimCapes", "html_url": "https://github.com/TimCapes", "followers_url": "https://api.github.com/users/TimCapes/followers", "following_url": "https://api.github.com/users/TimCapes/following{/other_user}", "gists_url": "https://api.github.com/users/TimCapes/gists{/gist_id}", "starred_url": "https://api.github.com/users/TimCapes/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TimCapes/subscriptions", "organizations_url": "https://api.github.com/users/TimCapes/orgs", "repos_url": "https://api.github.com/users/TimCapes/repos", "events_url": "https://api.github.com/users/TimCapes/events{/privacy}", "received_events_url": "https://api.github.com/users/TimCapes/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1501014628, "node_id": "MDU6TGFiZWwxNTAxMDE0NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0-rc0", "name": "TF 2.0-rc0", "color": "12ce7d", "default": false, "description": "Issues related to TF 2.0-rc0"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "aselle", "id": 326106, "node_id": "MDQ6VXNlcjMyNjEwNg==", "avatar_url": "https://avatars1.githubusercontent.com/u/326106?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aselle", "html_url": "https://github.com/aselle", "followers_url": "https://api.github.com/users/aselle/followers", "following_url": "https://api.github.com/users/aselle/following{/other_user}", "gists_url": "https://api.github.com/users/aselle/gists{/gist_id}", "starred_url": "https://api.github.com/users/aselle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aselle/subscriptions", "organizations_url": "https://api.github.com/users/aselle/orgs", "repos_url": "https://api.github.com/users/aselle/repos", "events_url": "https://api.github.com/users/aselle/events{/privacy}", "received_events_url": "https://api.github.com/users/aselle/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-09-30T20:55:38Z", "updated_at": "2020-03-10T20:10:11Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a feature request. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:feature_template</em>\r\n\r\n\r\n**System information**\r\n- TensorFlow version (you are using):tf2.0.0-rc1\r\n- Are you willing to contribute it (Yes/No):No\r\n\r\n**Describe the feature and the current behavior/state.**\r\nCurrently tf.matmul hides batch matmuls in code and this means seemingly benign operations (tf.matmul is listed as supported) will cause a model to not be convertable to TFLite without using TF_SELECT_OPS and compiling a custom interpreter.\r\n**Will this change the current api? How?** No\r\n\r\n**Who will benefit with this feature?** All users who wish to convert models to TFLite models and use matmul for batch multiplication.\r\n\r\n**Any Other info.**\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32920", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32920/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32920/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32920/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/32920", "id": 500341893, "node_id": "MDU6SXNzdWU1MDAzNDE4OTM=", "number": 32920, "title": "How to explitly save the values of every buffer in a tflite model?", "user": {"login": "bwang-delft", "id": 54551211, "node_id": "MDQ6VXNlcjU0NTUxMjEx", "avatar_url": "https://avatars3.githubusercontent.com/u/54551211?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bwang-delft", "html_url": "https://github.com/bwang-delft", "followers_url": "https://api.github.com/users/bwang-delft/followers", "following_url": "https://api.github.com/users/bwang-delft/following{/other_user}", "gists_url": "https://api.github.com/users/bwang-delft/gists{/gist_id}", "starred_url": "https://api.github.com/users/bwang-delft/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bwang-delft/subscriptions", "organizations_url": "https://api.github.com/users/bwang-delft/orgs", "repos_url": "https://api.github.com/users/bwang-delft/repos", "events_url": "https://api.github.com/users/bwang-delft/events{/privacy}", "received_events_url": "https://api.github.com/users/bwang-delft/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "liyunlu0618", "id": 9705880, "node_id": "MDQ6VXNlcjk3MDU4ODA=", "avatar_url": "https://avatars1.githubusercontent.com/u/9705880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liyunlu0618", "html_url": "https://github.com/liyunlu0618", "followers_url": "https://api.github.com/users/liyunlu0618/followers", "following_url": "https://api.github.com/users/liyunlu0618/following{/other_user}", "gists_url": "https://api.github.com/users/liyunlu0618/gists{/gist_id}", "starred_url": "https://api.github.com/users/liyunlu0618/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liyunlu0618/subscriptions", "organizations_url": "https://api.github.com/users/liyunlu0618/orgs", "repos_url": "https://api.github.com/users/liyunlu0618/repos", "events_url": "https://api.github.com/users/liyunlu0618/events{/privacy}", "received_events_url": "https://api.github.com/users/liyunlu0618/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-09-30T15:10:34Z", "updated_at": "2019-10-01T06:47:25Z", "closed_at": null, "author_association": "NONE", "body": "When using interpreter.get_tensor() to get the values in a tensor after calling interpreter.invoke(), some values seem to be overwritten. If I understand correctly, to explicitly prevent those values from being overwritten, we have to append the names of the tensors we care about in the \"output_arrays\" argument when calling tf.lite.TFLiteConverter.from_saved_model(). However, some tensors in a tflite model are called \"xx_int8\" and they don't exist in the original saved model. In this case, how do we include them in \"output_arrays\"?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32918", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32918/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32918/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32918/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/32918", "id": 500281393, "node_id": "MDU6SXNzdWU1MDAyODEzOTM=", "number": 32918, "title": "Tensorflow 2.0 custom_scalar plugin for tensorboard", "user": {"login": "PgLoLo", "id": 5480856, "node_id": "MDQ6VXNlcjU0ODA4NTY=", "avatar_url": "https://avatars3.githubusercontent.com/u/5480856?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PgLoLo", "html_url": "https://github.com/PgLoLo", "followers_url": "https://api.github.com/users/PgLoLo/followers", "following_url": "https://api.github.com/users/PgLoLo/following{/other_user}", "gists_url": "https://api.github.com/users/PgLoLo/gists{/gist_id}", "starred_url": "https://api.github.com/users/PgLoLo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PgLoLo/subscriptions", "organizations_url": "https://api.github.com/users/PgLoLo/orgs", "repos_url": "https://api.github.com/users/PgLoLo/repos", "events_url": "https://api.github.com/users/PgLoLo/events{/privacy}", "received_events_url": "https://api.github.com/users/PgLoLo/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 284285184, "node_id": "MDU6TGFiZWwyODQyODUxODQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:tensorboard", "name": "comp:tensorboard", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473184161, "node_id": "MDU6TGFiZWw0NzMxODQxNjE=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:support", "name": "type:support", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "nfelt", "id": 710113, "node_id": "MDQ6VXNlcjcxMDExMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/710113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nfelt", "html_url": "https://github.com/nfelt", "followers_url": "https://api.github.com/users/nfelt/followers", "following_url": "https://api.github.com/users/nfelt/following{/other_user}", "gists_url": "https://api.github.com/users/nfelt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nfelt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nfelt/subscriptions", "organizations_url": "https://api.github.com/users/nfelt/orgs", "repos_url": "https://api.github.com/users/nfelt/repos", "events_url": "https://api.github.com/users/nfelt/events{/privacy}", "received_events_url": "https://api.github.com/users/nfelt/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "nfelt", "id": 710113, "node_id": "MDQ6VXNlcjcxMDExMw==", "avatar_url": "https://avatars0.githubusercontent.com/u/710113?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nfelt", "html_url": "https://github.com/nfelt", "followers_url": "https://api.github.com/users/nfelt/followers", "following_url": "https://api.github.com/users/nfelt/following{/other_user}", "gists_url": "https://api.github.com/users/nfelt/gists{/gist_id}", "starred_url": "https://api.github.com/users/nfelt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nfelt/subscriptions", "organizations_url": "https://api.github.com/users/nfelt/orgs", "repos_url": "https://api.github.com/users/nfelt/repos", "events_url": "https://api.github.com/users/nfelt/events{/privacy}", "received_events_url": "https://api.github.com/users/nfelt/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 1, "created_at": "2019-09-30T13:34:35Z", "updated_at": "2020-01-16T11:25:35Z", "closed_at": null, "author_association": "NONE", "body": "To set layout for custom_layout plugin in tensorflow 1.x you should use method add_summary in FileWriter class. So the code should look like this:\r\n\r\n```python\r\nwith tf.summary.FileWriter(LOGDIR) as writer:\r\n   layout_summary = summary_lib.custom_scalar_pb(...)\r\n   writer.add_summary(layout_summary)\r\n```\r\n\r\nIn tensorflow 2 add_summary method was removed. How can I set custom_scalar layout now? Is it a bug or a desired API change?"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32914", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32914/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32914/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32914/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/32914", "id": 500049781, "node_id": "MDU6SXNzdWU1MDAwNDk3ODE=", "number": 32914, "title": "set tflite interpreter gpu delegate on android\uff0cit's output is different without gpu delegate", "user": {"login": "ArtemisZGL", "id": 31615877, "node_id": "MDQ6VXNlcjMxNjE1ODc3", "avatar_url": "https://avatars3.githubusercontent.com/u/31615877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ArtemisZGL", "html_url": "https://github.com/ArtemisZGL", "followers_url": "https://api.github.com/users/ArtemisZGL/followers", "following_url": "https://api.github.com/users/ArtemisZGL/following{/other_user}", "gists_url": "https://api.github.com/users/ArtemisZGL/gists{/gist_id}", "starred_url": "https://api.github.com/users/ArtemisZGL/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ArtemisZGL/subscriptions", "organizations_url": "https://api.github.com/users/ArtemisZGL/orgs", "repos_url": "https://api.github.com/users/ArtemisZGL/repos", "events_url": "https://api.github.com/users/ArtemisZGL/events{/privacy}", "received_events_url": "https://api.github.com/users/ArtemisZGL/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1445545631, "node_id": "MDU6TGFiZWwxNDQ1NTQ1NjMx", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%201.14", "name": "TF 1.14", "color": "5319e7", "default": false, "description": "for issues seen with TF 1.14"}, {"id": 750616506, "node_id": "MDU6TGFiZWw3NTA2MTY1MDY=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:lite", "name": "comp:lite", "color": "0052cc", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "impjdi", "id": 9742927, "node_id": "MDQ6VXNlcjk3NDI5Mjc=", "avatar_url": "https://avatars2.githubusercontent.com/u/9742927?v=4", "gravatar_id": "", "url": "https://api.github.com/users/impjdi", "html_url": "https://github.com/impjdi", "followers_url": "https://api.github.com/users/impjdi/followers", "following_url": "https://api.github.com/users/impjdi/following{/other_user}", "gists_url": "https://api.github.com/users/impjdi/gists{/gist_id}", "starred_url": "https://api.github.com/users/impjdi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/impjdi/subscriptions", "organizations_url": "https://api.github.com/users/impjdi/orgs", "repos_url": "https://api.github.com/users/impjdi/repos", "events_url": "https://api.github.com/users/impjdi/events{/privacy}", "received_events_url": "https://api.github.com/users/impjdi/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 2, "created_at": "2019-09-30T04:54:58Z", "updated_at": "2019-10-02T00:39:57Z", "closed_at": null, "author_association": "NONE", "body": "<em>Please make sure that this is a bug. As per our [GitHub Policy](https://github.com/tensorflow/tensorflow/blob/master/ISSUES.md), we only address code/doc bugs, performance issues, feature requests and build/installation issues on GitHub. tag:bug_template</em>\r\n\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow):yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04):android\r\n- Mobile device (e.g. iPhone 8, Pixel 2, Samsung Galaxy) if the issue happens on mobile device: MI PAD 4 PLUS\r\n- TensorFlow installed from (source or binary):source\r\n- TensorFlow version (use command below):1.14\r\n- Python version:3.7\r\n- Bazel version (if compiling from source):\r\n- GCC/Compiler version (if compiling from source):\r\n- CUDA/cuDNN version:\r\n- GPU model and memory:\r\n\r\nYou can collect some of this information using our environment capture\r\n[script](https://github.com/tensorflow/tensorflow/tree/master/tools/tf_env_collect.sh)\r\nYou can also obtain the TensorFlow version with: 1. TF 1.0: `python -c \"import\r\ntensorflow as tf; print(tf.GIT_VERSION, tf.VERSION)\"` 2. TF 2.0: `python -c\r\n\"import tensorflow as tf; print(tf.version.GIT_VERSION, tf.version.VERSION)\"`\r\n\r\n**Describe the current behavior**\r\nset tflite interpreter gpu delegate on android\uff0cit's output is different without gpu delegate, and it seems that whatever data i fed, the model output is the same, is it something wrong with my code \uff1fand i have checked my code, it's output is correct without set the gpu delegate.\r\n\r\n**Describe the expected behavior**\r\nuse gpu to accelerate inference\r\n**Code to reproduce the issue**\r\nProvide a reproducible test case that is the bare minimum necessary to generate the problem.\r\nhere is the code i set the tflite interpreter options:\r\n\r\n```\r\ntfliteModel = loadModelFile(activity);\r\n    switch (device) {\r\n        case NNAPI:\r\n            tfliteOptions.setUseNNAPI(true);\r\n            break;\r\n        case GPU:\r\n            gpuDelegate = new GpuDelegate();\r\n            tfliteOptions.addDelegate(gpuDelegate);\r\n            break;\r\n        case CPU:\r\n            break;\r\n    }\r\n    tfliteOptions.setNumThreads(numThreads);\r\n    tflite = new Interpreter(tfliteModel, tfliteOptions);\r\n```\r\nand here is the code i used to inference(where the input is a four dim array, and output is a two dim array, corresponding to the model input and output dimentions):\r\n`tflite.run(audioData, output);`\r\n**Other info / logs**\r\n14:11:28.433 30654-30654/? I/tflite: Created TensorFlow Lite delegate for GPU.\r\n2019-09-30 14:11:28.435 30654-30654/? I/tflite: Initialized TensorFlow Lite runtime.\r\n2019-09-30 14:11:28.464 30654-30654/? I/Adreno: QUALCOMM build                   : dcd4b96, I568c71768a\r\n    Build Date                       : 04/30/18\r\n    OpenGL ES Shader Compiler Version: EV031.22.00.01_06\r\n    Local Branch                     : \r\n    Remote Branch                    : quic/gfx-adreno.lnx.1.0.r33-rel\r\n    Remote Branch                    : NONE\r\n    Reconstruct Branch               : NOTHING\r\n2019-09-30 14:11:28.467 30654-30654/? I/Adreno: PFP: 0x005ff087, ME: 0x005ff063\r\n2019-09-30 14:11:28.471 30654-30654/? I/zygote64: android::hardware::configstore::V1_0::ISurfaceFlingerConfigs::hasWideColorDisplay retrieved: 0\r\n2019-09-30 14:11:28.472 30654-30654/? E/libEGL: call to OpenGL ES API with no current context (logged once per thread)\r\n2019-09-30 14:11:28.659 3275-3275/? D/EventBus: [3275, u0] send(AppTransitionFinishedEvent)\r\n2019-09-30 14:11:28.659 3275-3275/? D/EventBus: [3275, u0]  -> ForcedResizableInfoActivityController [0xe31f776, P1] onBusEvent(AppTransitionFinishedEvent)\r\n2019-09-30 14:11:28.659 3275-3275/? D/EventBus: [3275, u0] onBusEvent(AppTransitionFinishedEvent) duration: 17 microseconds, avg: 159\r\n2019-09-30 14:11:28.659 3275-3275/? D/EventBus: [3275, u0] send(AppTransitionFinishedEvent)\r\n2019-09-30 14:11:28.659 3275-3275/? D/EventBus: [3275, u0]  -> ForcedResizableInfoActivityController [0xe31f776, P1] onBusEvent(AppTransitionFinishedEvent)\r\n2019-09-30 14:11:28.659 3275-3275/? D/EventBus: [3275, u0] onBusEvent(AppTransitionFinishedEvent) duration: 6 microseconds, avg: 159\r\n2019-09-30 14:11:29.152 30654-30674/? D/OpenGLRenderer: HWUI GL Pipeline\r\n2019-09-30 14:11:29.161 30654-30654/? I/Toast: Show toast from OpPackageName:com.example.dm.testing, PackageName:com.example.dm.testing\r\n2019-09-30 14:11:29.201 30654-30674/? I/OpenGLRenderer: Initialized EGL, version 1.4\r\n2019-09-30 14:11:29.201 30654-30674/? D/OpenGLRenderer: Swap behavior 2\r\n2019-09-30 14:11:29.321 2629-2679/? I/ActivityManager: Displayed com.example.dm.testing/.MainActivity: +1s153ms\r\n2019-09-30 14:11:29.322 4049-4487/? D/PowerKeeper.Event: notifyActivityLaunchTime: com.example.dm.testing/.MainActivity totalTime: 1153\r\n2019-09-30 14:11:29.322 598-598/? W//system/bin/hwservicemanager: getTransport: Cannot find entry vendor.qti.hardware.iop@1.0::IIop/default in either framework or device manifest.\r\n2019-09-30 14:11:29.322 2629-2679/? E/ANDR-PERF-JNI: Iop tryGetService failed\r\n2019-09-30 14:11:29.360 2629-16635/? D/ActivityTrigger: ActivityTrigger activityStopTrigger \r\n2019-09-30 14:11:29.363 6198-6198/? D/Launcher.AdPendantUtils: updateAdvertisementPendantVisibility, mIsAdPendantEnable=false, mIsPullActionEnable=false, mIsEditDisabled=true, mCurrentScreenId=2, mDefaultScreenId=2, mIsLauncherVisible=false, mIsMinusOneScreenShow=false\r\n2019-09-30 14:11:29.452 3880-8501/? D/com.xiaomi.common.Network: Http POST Response Code: 200\r\n2019-09-30 14:11:31.156 768-815/? E/ANDR-PERF-OPTSHANDLER: perf_lock_rel: updated /sys/class/mmc_host/mmc0/clk_scaling/enable with 1\r\n     return value 2\r\n"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32912", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32912/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32912/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32912/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/32912", "id": 500030897, "node_id": "MDU6SXNzdWU1MDAwMzA4OTc=", "number": 32912, "title": "model.fit with tf.data.Dataset.from_generator can't infer shape", "user": {"login": "matpalm", "id": 21549, "node_id": "MDQ6VXNlcjIxNTQ5", "avatar_url": "https://avatars2.githubusercontent.com/u/21549?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matpalm", "html_url": "https://github.com/matpalm", "followers_url": "https://api.github.com/users/matpalm/followers", "following_url": "https://api.github.com/users/matpalm/following{/other_user}", "gists_url": "https://api.github.com/users/matpalm/gists{/gist_id}", "starred_url": "https://api.github.com/users/matpalm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matpalm/subscriptions", "organizations_url": "https://api.github.com/users/matpalm/orgs", "repos_url": "https://api.github.com/users/matpalm/repos", "events_url": "https://api.github.com/users/matpalm/events{/privacy}", "received_events_url": "https://api.github.com/users/matpalm/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1160540362, "node_id": "MDU6TGFiZWwxMTYwNTQwMzYy", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0", "name": "TF 2.0", "color": "e79b38", "default": false, "description": "Issues relating to TensorFlow 2.0"}, {"id": 1114343535, "node_id": "MDU6TGFiZWwxMTE0MzQzNTM1", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:data", "name": "comp:data", "color": "0052cc", "default": false, "description": "tf.data related issues"}, {"id": 1097546578, "node_id": "MDU6TGFiZWwxMDk3NTQ2NTc4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:keras", "name": "comp:keras", "color": "0052cc", "default": false, "description": ""}, {"id": 404586594, "node_id": "MDU6TGFiZWw0MDQ1ODY1OTQ=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:awaiting%20tensorflower", "name": "stat:awaiting tensorflower", "color": "f4b400", "default": false, "description": ""}, {"id": 473172988, "node_id": "MDU6TGFiZWw0NzMxNzI5ODg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:bug", "name": "type:bug", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "omalleyt12", "id": 29100818, "node_id": "MDQ6VXNlcjI5MTAwODE4", "avatar_url": "https://avatars3.githubusercontent.com/u/29100818?v=4", "gravatar_id": "", "url": "https://api.github.com/users/omalleyt12", "html_url": "https://github.com/omalleyt12", "followers_url": "https://api.github.com/users/omalleyt12/followers", "following_url": "https://api.github.com/users/omalleyt12/following{/other_user}", "gists_url": "https://api.github.com/users/omalleyt12/gists{/gist_id}", "starred_url": "https://api.github.com/users/omalleyt12/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/omalleyt12/subscriptions", "organizations_url": "https://api.github.com/users/omalleyt12/orgs", "repos_url": "https://api.github.com/users/omalleyt12/repos", "events_url": "https://api.github.com/users/omalleyt12/events{/privacy}", "received_events_url": "https://api.github.com/users/omalleyt12/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 15, "created_at": "2019-09-30T03:31:33Z", "updated_at": "2020-02-26T23:58:24Z", "closed_at": null, "author_association": "NONE", "body": "\r\n**System information**\r\n- Have I written custom code (as opposed to using a stock example script provided in TensorFlow): Yes\r\n- OS Platform and Distribution (e.g., Linux Ubuntu 16.04): MacOs 10.13.6\r\n- TensorFlow installed from (source or binary): binary\r\n- TensorFlow version (use command below): v2.0.0-beta1-5101-gc75bb66a99 2.0.0-rc0\r\n- Python version: 3.6.4 \r\n- Bazel version (if compiling from source): N/A\r\n- GCC/Compiler version (if compiling from source): N/A\r\n- CUDA/cuDNN version: N/A\r\n- GPU model and memory: N/A\r\n\r\n**Describe the current behavior**\r\n\r\n`model.fit` when given a `tf.data` dataset (that uses a `from_generator`) throws `ValueError: as_list() is not defined on an unknown TensorShape.` \r\n\r\nsee https://gist.github.com/matpalm/779c2c67d5ec195845ae2ab01570d883 for full traceback\r\n\r\n**Describe the expected behavior**\r\n\r\nmodel.fit should be able to infer the shape of the input.\r\n\r\n**Code to reproduce the issue**\r\n\r\n```\r\nimport tensorflow as tf\r\nfrom tensorflow.keras.layers import *\r\nfrom tensorflow.keras.models import Model\r\nfrom tensorflow.keras.optimizers import Adam\r\n\r\ninp = Input(shape=(3,))\r\noutput = Dense(1, activation='sigmoid')(inp)\r\nmodel = Model(inp, output)\r\nmodel.compile(optimizer=Adam(1e-2), loss='binary_crossentropy')\r\n\r\ndef simple_generator():\r\n    while True:\r\n        yield [0.5, 0.2, -0.3], 0.0\r\n        yield [-0.5, 0.3, -0.1], 1.0\r\n        \r\ndataset = tf.data.Dataset.from_generator(simple_generator,\r\n                                         output_types=(tf.float32,\r\n                                                       tf.float32))\r\ndataset = dataset.batch(4).prefetch(1)\r\n\r\nmodel.fit(dataset)\r\n```\r\n\r\nthrows `ValueError: as_list() is not defined on an unknown TensorShape.`\r\n\r\nnote: the following works...\r\n\r\n```\r\nfor X, y in dataset:\r\n  model.fit(X, y)\r\n  break\r\n```\r\n\r\n**Other info / logs**\r\n\r\nsee https://gist.github.com/matpalm/779c2c67d5ec195845ae2ab01570d883 for full traceback"}, {"url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32903", "repository_url": "https://api.github.com/repos/tensorflow/tensorflow", "labels_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32903/labels{/name}", "comments_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32903/comments", "events_url": "https://api.github.com/repos/tensorflow/tensorflow/issues/32903/events", "html_url": "https://github.com/tensorflow/tensorflow/issues/32903", "id": 499885223, "node_id": "MDU6SXNzdWU0OTk4ODUyMjM=", "number": 32903, "title": "Let us decide the index of the blank in tf.nn.ctc_greedy_decoder ", "user": {"login": "FLming", "id": 22290556, "node_id": "MDQ6VXNlcjIyMjkwNTU2", "avatar_url": "https://avatars0.githubusercontent.com/u/22290556?v=4", "gravatar_id": "", "url": "https://api.github.com/users/FLming", "html_url": "https://github.com/FLming", "followers_url": "https://api.github.com/users/FLming/followers", "following_url": "https://api.github.com/users/FLming/following{/other_user}", "gists_url": "https://api.github.com/users/FLming/gists{/gist_id}", "starred_url": "https://api.github.com/users/FLming/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/FLming/subscriptions", "organizations_url": "https://api.github.com/users/FLming/orgs", "repos_url": "https://api.github.com/users/FLming/repos", "events_url": "https://api.github.com/users/FLming/events{/privacy}", "received_events_url": "https://api.github.com/users/FLming/received_events", "type": "User", "site_admin": false}, "labels": [{"id": 1501014628, "node_id": "MDU6TGFiZWwxNTAxMDE0NjI4", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/TF%202.0-rc0", "name": "TF 2.0-rc0", "color": "12ce7d", "default": false, "description": "Issues related to TF 2.0-rc0"}, {"id": 1097545817, "node_id": "MDU6TGFiZWwxMDk3NTQ1ODE3", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/comp:apis", "name": "comp:apis", "color": "0052cc", "default": false, "description": ""}, {"id": 299643928, "node_id": "MDU6TGFiZWwyOTk2NDM5Mjg=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/stat:contributions%20welcome", "name": "stat:contributions welcome", "color": "f4b400", "default": false, "description": ""}, {"id": 473173272, "node_id": "MDU6TGFiZWw0NzMxNzMyNzI=", "url": "https://api.github.com/repos/tensorflow/tensorflow/labels/type:feature", "name": "type:feature", "color": "159b2e", "default": false, "description": ""}], "state": "open", "locked": false, "assignee": {"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}, "assignees": [{"login": "ebrevdo", "id": 1794715, "node_id": "MDQ6VXNlcjE3OTQ3MTU=", "avatar_url": "https://avatars0.githubusercontent.com/u/1794715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebrevdo", "html_url": "https://github.com/ebrevdo", "followers_url": "https://api.github.com/users/ebrevdo/followers", "following_url": "https://api.github.com/users/ebrevdo/following{/other_user}", "gists_url": "https://api.github.com/users/ebrevdo/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebrevdo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebrevdo/subscriptions", "organizations_url": "https://api.github.com/users/ebrevdo/orgs", "repos_url": "https://api.github.com/users/ebrevdo/repos", "events_url": "https://api.github.com/users/ebrevdo/events{/privacy}", "received_events_url": "https://api.github.com/users/ebrevdo/received_events", "type": "User", "site_admin": false}], "milestone": null, "comments": 0, "created_at": "2019-09-29T09:09:01Z", "updated_at": "2020-01-12T03:04:48Z", "closed_at": null, "author_association": "NONE", "body": "**System information**\r\n- TensorFlow version (you are using): 2.0.0rc1 \r\n- Are you willing to contribute it (Yes/No): Yes\r\n\r\n\r\n\r\n**Describe the feature and the current behavior/state.**\r\n\r\nI am using ctc_greedy_decoder function to decode my output from logits. In the ctc_loss function, we have the opportunity to choose blank_index equals what, but in the ctc_greedy_decoder function, it seems equals (num_classes-1) by default. Thus I have to write a map function by myself or change my lookup table\r\n\r\n**Will this change the current api? How?**\r\n\r\nPlease add a parameter to this function in order to choose which index we use."}]